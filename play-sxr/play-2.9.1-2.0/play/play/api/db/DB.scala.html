<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play/play/api/db/DB.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.api.db

<span class="keyword">import</span> play.api._
<span class="keyword">import</span> play.api.libs._

<span class="keyword">import</span> play.core._

<span class="keyword">import</span> java.sql._
<span class="keyword">import</span> javax.sql._

<span class="keyword">import</span> com.jolbox.bonecp._
<span class="keyword">import</span> com.jolbox.bonecp.hooks._

<span class="comment">/**
 * The Play Database API manages several connection pools.
 *
 * @param datasources the managed data sources
 */</span>
<span class="keyword">trait</span> <a title="trait DBApi extends java.lang.Object with ScalaObject" id="12207">DBApi</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="=&gt; List[(javax.sql.DataSource, String)]" id="150643">datasources</a>: <span title="List[(javax.sql.DataSource, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>DataSource, String<span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Shutdown pool for given datasource
   */</span>
  <span class="keyword">def</span> <a title="(ds: javax.sql.DataSource)Unit" id="150644">shutdownPool</a><span class="delimiter">(</span><a title="javax.sql.DataSource" id="150660">ds</a>: <span title="javax.sql.DataSource">DataSource</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection, with auto-commit set to `true`.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)javax.sql.DataSource" id="150645">getDataSource</a><span class="delimiter">(</span><a title="String" id="150662">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span>

  <span class="comment">/**
   * Retrieves the JDBC connection URL for a particular data source.
   *
   * @param name the data source name
   * @return The JDBC URL connection string, i.e. `jdbc:…`
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)String" id="150646">getDataSourceURL</a><span class="delimiter">(</span><a title="String" id="150664">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="javax.sql.DataSource" id="150666">ds</a> = <a href="#150645" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#150664" title="String">name</a><span class="delimiter">)</span>
    <a href="#150666" title="javax.sql.DataSource">ds</a>.<span title="()java.sql.Connection">getConnection</span>.<span title="()java.sql.DatabaseMetaData">getMetaData</span>.<span title="()java.lang.String">getURL</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Retrieves a JDBC connection.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @param autocommit when `true`, sets this connection to auto-commit
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String, autocommit: Boolean)java.sql.Connection" id="150647">getConnection</a><span class="delimiter">(</span><a title="String" id="150997">name</a>: <span title="String">String</span>, <a title="Boolean" id="151000">autocommit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="151001">connection</a> = <a href="#150645" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#150997" title="String">name</a><span class="delimiter">)</span>.<span title="()java.sql.Connection">getConnection</span>
    <a href="#151001" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#151000" title="Boolean">autocommit</a><span class="delimiter">)</span>
    <a href="#151001" title="java.sql.Connection">connection</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection and all created statements are
   * automatically released.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)A" id="150648">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="150650">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="151004">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="151005">block</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#150650" title="A">A</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="play.api.db.AutoCleanConnection" id="151008">connection</a> = <span title="play.api.db.AutoCleanConnection" class="keyword">new</span> <a href="#12231" title="play.api.db.AutoCleanConnection">AutoCleanConnection</a><span class="delimiter">(</span><a href="#150647" title="(name: String, autocommit: Boolean)java.sql.Connection">getConnection</a><span class="delimiter">(</span><a href="#151004" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#151005" title="(v1: java.sql.Connection)A">block</a><span class="delimiter">(</span><a href="#151008" title="play.api.db.AutoCleanConnection">connection</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#151008" title="play.api.db.AutoCleanConnection">connection</a>.<a href="#151030" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)A" id="150651">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="150653">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="151079">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="151080">block</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#150653" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#150648" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><a href="#151079" title="String">name</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.sql.Connection" id="151088">connection</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#151088" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="A" id="151089">r</a> = <a href="#151080" title="(v1: java.sql.Connection)A">block</a><span class="delimiter">(</span><a href="#151088" title="java.sql.Connection">connection</a><span class="delimiter">)</span>
        <a href="#151088" title="java.sql.Connection">connection</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#151089" title="A">r</a>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="151091">e</a> =&gt; <a href="#151088" title="java.sql.Connection">connection</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span>; <span title="Nothing" class="keyword">throw</span> <a href="#151091" title="java.lang.Throwable">e</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Provides a high-level API for getting JDBC connections.
 *
 * For example:
 * {{{
 * val conn = DB.getConnection(&quot;customers&quot;)
 * }}}
 */</span>
<span class="keyword">object</span> <a title="object play.api.db.DB" id="12193">DB</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/** The exception we are throwing. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="151100">error</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;DB plugin is not registered.&quot;)" class="string">&quot;DB plugin is not registered.&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection.
   *
   * @param name data source name
   * @param autocommit when `true`, sets this connection to auto-commit
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String, autocommit: Boolean)(implicit app: play.api.Application)java.sql.Connection" id="151101">getConnection</a><span class="delimiter">(</span><a title="String" id="151127">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span>, <a title="Boolean" id="151128">autocommit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="151125">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <a href="#151125" title="play.api.Application">app</a>.<a href="../Application.scala.html#65136" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; java.sql.Connection)Option[java.sql.Connection]">map</span><span class="delimiter">(</span><a href="#151155" title="play.api.db.DBPlugin">_</a>.<a href="#151132" title="=&gt; play.api.db.DBApi">api</a>.<a href="#150647" title="(name: String, autocommit: Boolean)java.sql.Connection">getConnection</a><span class="delimiter">(</span><a href="#151127" title="String">name</a>, <a href="#151128" title="Boolean">autocommit</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; java.sql.Connection)java.sql.Connection">getOrElse</span><span class="delimiter">(</span><a href="#151100" title="=&gt; Nothing">error</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection (autocommit is set to true).
   *
   * @param name data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)(implicit app: play.api.Application)javax.sql.DataSource" id="151102">getDataSource</a><span class="delimiter">(</span><a title="String" id="151167">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="151165">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <a href="#151165" title="play.api.Application">app</a>.<a href="../Application.scala.html#65136" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; javax.sql.DataSource)Option[javax.sql.DataSource]">map</span><span class="delimiter">(</span><a href="#151192" title="play.api.db.DBPlugin">_</a>.<a href="#151132" title="=&gt; play.api.db.DBApi">api</a>.<a href="#150645" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#151167" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; javax.sql.DataSource)javax.sql.DataSource">getOrElse</span><span class="delimiter">(</span><a href="#151100" title="=&gt; Nothing">error</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection is
   * automatically released.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="151103">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="151105">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="151199">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="151200">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="151201">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#151105" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#151201" title="play.api.Application">app</a>.<a href="../Application.scala.html#65136" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#151228" title="play.api.db.DBPlugin">_</a>.<a href="#151132" title="=&gt; play.api.db.DBApi">api</a>.<a href="#150648" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><a href="#151199" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#151200" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#151100" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection and all created statements are
   * automatically released.
   *
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="151106">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="151108">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="151241">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="151242">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#151108" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#151242" title="play.api.Application">app</a>.<a href="../Application.scala.html#65136" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#151269" title="play.api.db.DBPlugin">_</a>.<a href="#151132" title="=&gt; play.api.db.DBApi">api</a>.<a href="#150648" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#151241" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#151100" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="151109">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="151288">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="151286">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="151283">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="151284">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#151288" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#151284" title="play.api.Application">app</a>.<a href="../Application.scala.html#65136" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#151314" title="play.api.db.DBPlugin">_</a>.<a href="#151132" title="=&gt; play.api.db.DBApi">api</a>.<a href="#150651" title="(name: String)(block: java.sql.Connection =&gt; A)A">withTransaction</a><span class="delimiter">(</span><a href="#151286" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#151283" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#151100" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="151112">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="151114">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="151327">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="151328">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#151114" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#151328" title="play.api.Application">app</a>.<a href="../Application.scala.html#65136" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#151355" title="play.api.db.DBPlugin">_</a>.<a href="#151132" title="=&gt; play.api.db.DBApi">api</a>.<a href="#150651" title="(name: String)(block: java.sql.Connection =&gt; A)A">withTransaction</a><span class="delimiter">(</span><span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#151327" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#151100" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Generic DBPlugin interface
 */</span>
<span class="keyword">trait</span> <a title="trait DBPlugin extends java.lang.Object with play.api.Plugin" id="12204">DBPlugin</a> <span class="keyword">extends</span> <a href="../Plugins.scala.html#10436" title="play.api.Plugin">Plugin</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.db.DBApi" id="151132">api</a>: <a href="#12207" title="play.api.db.DBApi">DBApi</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * A DBPlugin implementation that provides a DBApi
 *
 * @param app the application that is registering the plugin
 */</span>
<span class="keyword">class</span> <a title="class BoneCPPlugin extends java.lang.Object with play.api.db.DBPlugin with ScalaObject" id="12210">BoneCPPlugin</a><a href="#12210" title="ScalaObject" class="delimiter">(</a><a title="play.api.Application" id="151422">app</a>: <a href="../Application.scala.html#10355" title="play.api.Application">Application</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12204" title="play.api.db.DBPlugin">DBPlugin</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="151382">error</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;db keys are missing from application.conf&quot;)" class="string">&quot;db keys are missing from application.conf&quot;</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.Configuration" id="151384">dbConfig</a> = <a href="#151422" title="play.api.Application">app</a>.<a href="../Application.scala.html#65130" title="=&gt; play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#65564" title="(path: String)Option[play.api.Configuration]">getConfig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;db&quot;)" class="string">&quot;db&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.Configuration)play.api.Configuration">getOrElse</span><span class="delimiter">(</span><a href="../Configuration.scala.html#10629" title="object play.api.Configuration">Configuration</a>.<a href="../Configuration.scala.html#65575" title="=&gt; play.api.Configuration">empty</a><span class="delimiter">)</span>

  <span class="comment">// should be accessed in onStart first</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.db.DBApi" id="151386">dbApi</a>: <a href="#12207" title="play.api.db.DBApi">DBApi</a> = <span title="play.api.db.BoneCPApi" class="keyword">new</span> <a href="#12300" title="play.api.db.BoneCPApi">BoneCPApi</a><span class="delimiter">(</span><a href="#151383" title="=&gt; play.api.Configuration">dbConfig</a>, <a href="#151422" title="play.api.Application">app</a>.<a href="../Application.scala.html#65111" title="=&gt; java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>

  <span class="comment">/**
   * plugin is disabled if either configuration is missing or the plugin is explicitly disabled
   */</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="151388">isDisabled</a> = <span class="delimiter">{</span>
    <a href="#151422" title="play.api.Application">app</a>.<a href="../Application.scala.html#65130" title="play.api.Configuration" id="151400">configuration</a>.<a href="../Configuration.scala.html#79477" title="Option[Set[String]]" id="151402">getString</a><span class="delimiter">(</span><a title="java.lang.String(&quot;dbplugin&quot;)" id="151401" class="string">&quot;dbplugin&quot;</a><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">filter</span><span class="delimiter">(</span><a href="#151404" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;disabled&quot;)" class="string">&quot;disabled&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">||</span> <a href="#151383" title="=&gt; play.api.Configuration">dbConfig</a>.<a href="../Configuration.scala.html#65566" title="=&gt; Set[String]">subKeys</a>.<span title="=&gt; Boolean">isEmpty</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Is this plugin enabled.
   *
   * {{{
   * dbplugin=disabled
   * }}}
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="151389">enabled</a> = <a href="#151387" title="=&gt; Boolean">isDisabled</a> <span title="(x: Boolean)Boolean">==</span> <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * Retrieves the underlying `DBApi` managing the data sources.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.db.DBApi" id="151390">api</a>: <a href="#12207" title="play.api.db.DBApi">DBApi</a> = <a href="#151385" title="=&gt; play.api.db.DBApi">dbApi</a>

  <span class="comment">/**
   * Reads the configuration and connects to every data source.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="151391">onStart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Try to connect to each, this should be the first access to dbApi</span>
    <a href="#151385" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#150643" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(f: (javax.sql.DataSource, String) =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[List[(javax.sql.DataSource, String)],Unit,Any])Any">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Unit,List[Unit]]" class="delimiter">{</span> <a title="(javax.sql.DataSource, String)" id="151472">ds</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#151472" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; javax.sql.DataSource">_1</span>.<span title="()java.sql.Connection">getConnection</span>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#151422" title="play.api.Application">app</a>.<a href="../Application.scala.html#65115" title="=&gt; play.api.Mode.Mode">mode</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../Play.scala.html#10533" title="Unit">Mode</a>.<a href="../Play.scala.html#65468" title="=&gt; play.api.Mode.Value">Test</a> =&gt;
          <span class="keyword">case</span> <a title="Unit" id="151475">mode</a> =&gt; <a href="../Logger.scala.html#79859" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;play&quot;)" class="string">&quot;play&quot;</span><span class="delimiter">)</span>.<a href="../Logger.scala.html#79849" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="java.lang.String(&quot;database [&quot;)" class="string">&quot;database [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#151472" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] connected at &quot;)" class="string">&quot;] connected at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#151472" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; javax.sql.DataSource">_1</span>.<span title="()java.sql.Connection">getConnection</span>.<span title="()java.sql.DatabaseMetaData">getMetaData</span>.<span title="()java.lang.String">getURL</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="151492">e</a> =&gt; <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">throw</span> <a href="#151383" title="=&gt; play.api.Configuration">dbConfig</a>.<a href="../Configuration.scala.html#65567" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><a href="#151472" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url&quot;)" class="string">&quot;.url&quot;</span>, <span title="java.lang.String(&quot;Cannot connect to database [&quot;)" class="string">&quot;Cannot connect to database [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#151472" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#151492" title="java.lang.Throwable">e</a>.<span title="()java.lang.Throwable">getCause</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Closes all data sources.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="151392">onStop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#151385" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#150643" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(f: (javax.sql.DataSource, String) =&gt; Unit)Unit">foreach</span> <a href="#151548" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="javax.sql.DataSource" id="151551">ds</a>, _<span class="delimiter">)</span> =&gt; <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#151385" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#150644" title="(ds: javax.sql.DataSource)Unit">shutdownPool</a><span class="delimiter">(</span><a href="#151551" title="javax.sql.DataSource">ds</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="java.util.Enumeration[java.sql.Driver]" id="151528">drivers</a> = <span title="object java.sql.DriverManager">DriverManager</span>.<span title="()java.util.Enumeration[java.sql.Driver]">getDrivers</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#151528" title="java.util.Enumeration[java.sql.Driver]">drivers</a>.<span title="()Boolean">hasMoreElements</span><span class="delimiter">)</span> <a href="#151595" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="java.sql.Driver" id="151596">driver</a> = <a href="#151528" title="java.util.Enumeration[java.sql.Driver]">drivers</a>.<span title="()java.sql.Driver">nextElement</span>
      <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">deregisterDriver</span><span class="delimiter">(</span><a href="#151596" title="java.sql.Driver">driver</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>db<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class BoneCPApi extends java.lang.Object with play.api.db.DBApi with ScalaObject" id="12300">BoneCPApi</a><a href="#12300" title="ScalaObject" class="delimiter">(</a><a title="play.api.Configuration" id="151444">configuration</a>: <a href="../Configuration.scala.html#10628" title="play.api.Configuration">Configuration</a>, <a title="java.lang.ClassLoader" id="151445">classloader</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12207" title="play.api.db.DBApi">DBApi</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(db: String, message: String)Nothing" id="151435">error</a><span class="delimiter">(</span><a title="String" id="151600">db</a>: <span title="String">String</span>, <a title="String" id="151604">message</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span title="Nothing" class="keyword">throw</span> <a href="#151444" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#65567" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><a href="#151600" title="String">db</a>, <a href="#151604" title="String">message</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Set[String]" id="151436">dbNames</a> = <a href="#151444" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#65566" title="=&gt; Set[String]">subKeys</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(driver: String, c: play.api.Configuration)Unit" id="151438">register</a><span class="delimiter">(</span><a title="String" id="151605">driver</a>: <span title="String">String</span>, <a title="play.api.Configuration" id="151606">c</a>: <a href="../Configuration.scala.html#10628" title="play.api.Configuration">Configuration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">registerDriver</span><span class="delimiter">(</span><span title="play.utils.ProxyDriver" class="keyword">new</span> play.utils.<a href="../../core/utils/ProxyDriver.scala.html#20536" title="play.utils.ProxyDriver">ProxyDriver</a><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#151605" title="String">driver</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#151445" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.sql.Driver" class="delimiter">[</span><span title="java.sql.Driver">Driver</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="151622">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#151606" title="play.api.Configuration">c</a>.<a href="../Configuration.scala.html#65567" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>, <span title="java.lang.String(&quot;Driver not found: [&quot;)" class="string">&quot;Driver not found: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#151605" title="String">driver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#151622" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dbName: String, url: String, driver: String, conf: play.api.Configuration)javax.sql.DataSource" id="151439">createDataSource</a><span class="delimiter">(</span><a title="String" id="151626">dbName</a>: <span title="String">String</span>, <a title="String" id="151627">url</a>: <span title="String">String</span>, <a title="String" id="151628">driver</a>: <span title="String">String</span>, <a title="play.api.Configuration" id="151629">conf</a>: <a href="../Configuration.scala.html#10628" title="play.api.Configuration">Configuration</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="com.jolbox.bonecp.BoneCPDataSource" id="151631">datasource</a> = <span title="com.jolbox.bonecp.BoneCPDataSource" class="keyword">new</span> <span title="com.jolbox.bonecp.BoneCPDataSource">BoneCPDataSource</span>

    <span class="comment">// Try to load the driver</span>
    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="String" id="152136">driver</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">registerDriver</span><span class="delimiter">(</span><span title="play.utils.ProxyDriver" class="keyword">new</span> play.utils.<a href="../../core/utils/ProxyDriver.scala.html#20536" title="play.utils.ProxyDriver">ProxyDriver</a><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#152136" title="String">driver</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#151445" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.sql.Driver" class="delimiter">[</span><span title="java.sql.Driver">Driver</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="152140">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65567" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>, <span title="java.lang.String(&quot;Driver not found: [&quot;)" class="string">&quot;Driver not found: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#152136" title="String">driver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#152140" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Boolean" id="151632">autocommit</a> = <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65561" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;autocommit&quot;)" class="string">&quot;autocommit&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[Int]" id="151633">isolation</a> = <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isolation&quot;)" class="string">&quot;isolation&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Int)Option[Int]">map</span> <a href="#152153" title="Int" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Int(0)" class="string">&quot;NONE&quot;</span> =&gt; Connection.<span title="Int(0)">TRANSACTION_NONE</span>
      <span class="keyword">case</span> <span title="Int(2)" class="string">&quot;READ_COMMITTED&quot;</span> =&gt; Connection.<span title="Int(2)">TRANSACTION_READ_COMMITTED</span>
      <span class="keyword">case</span> <span title="Int(1)" class="string">&quot;READ_UNCOMMITTED &quot;</span> =&gt; Connection.<span title="Int(1)">TRANSACTION_READ_UNCOMMITTED</span>
      <span class="keyword">case</span> <span title="Int(4)" class="string">&quot;REPEATABLE_READ &quot;</span> =&gt; Connection.<span title="Int(4)">TRANSACTION_REPEATABLE_READ</span>
      <span class="keyword">case</span> <span title="Int(8)" class="string">&quot;SERIALIZABLE&quot;</span> =&gt; Connection.<span title="Int(8)">TRANSACTION_SERIALIZABLE</span>
      <span class="keyword">case</span> <a title="Nothing" id="152154">unknown</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65567" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isolation&quot;)" class="string">&quot;isolation&quot;</span>, <span title="java.lang.String(&quot;Unknown isolation level [&quot;)" class="string">&quot;Unknown isolation level [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#152154" title="String">unknown</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Option[String]" id="151634">catalog</a> = <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;defaultCatalog&quot;)" class="string">&quot;defaultCatalog&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="151635">readOnly</a> = <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65561" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;readOnly&quot;)" class="string">&quot;readOnly&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.ClassLoader)Unit">setClassLoader</span><span class="delimiter">(</span><a href="#151445" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="play.api.Logger" id="151636">logger</a> = <a href="../Logger.scala.html#79859" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;com.jolbox.bonecp&quot;)" class="string">&quot;com.jolbox.bonecp&quot;</span><span class="delimiter">)</span>

    <span class="comment">// Re-apply per connection config @ checkout</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: com.jolbox.bonecp.hooks.ConnectionHook)Unit">setConnectionHook</span><span class="delimiter">(</span><a href="#152243" title="com.jolbox.bonecp.hooks.AbstractConnectionHook" class="keyword">new</a> <a title="anonymous class $anon extends com.jolbox.bonecp.hooks.AbstractConnectionHook" id="152243">AbstractConnectionHook</a> <span class="delimiter">{</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(connection: com.jolbox.bonecp.ConnectionHandle)Unit" id="152321">onCheckIn</a><span class="delimiter">(</span><a title="com.jolbox.bonecp.ConnectionHandle" id="152323">connection</a>: <span title="com.jolbox.bonecp.ConnectionHandle">ConnectionHandle</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#151636" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#79835" title="=&gt; Boolean">isTraceEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#151636" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#79845" title="(message: =&gt; String)Unit">trace</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Check in connection [%s leased]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="()Int">getTotalLeased</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(connection: com.jolbox.bonecp.ConnectionHandle)Unit" id="152322">onCheckOut</a><span class="delimiter">(</span><a title="com.jolbox.bonecp.ConnectionHandle" id="152519">connection</a>: <span title="com.jolbox.bonecp.ConnectionHandle">ConnectionHandle</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#152519" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#151632" title="Boolean">autocommit</a><span class="delimiter">)</span>
        <a href="#151633" title="Option[Int]">isolation</a>.<span title="(f: Int =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#152519" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Int)Unit">setTransactionIsolation</span><span class="delimiter">(</span><a href="#152531" title="Int">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#152519" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Boolean)Unit">setReadOnly</span><span class="delimiter">(</span><a href="#151635" title="Boolean">readOnly</a><span class="delimiter">)</span>
        <a href="#151634" title="Option[String]">catalog</a>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#152519" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: java.lang.String)Unit">setCatalog</span><span class="delimiter">(</span><a href="#152537" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#151636" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#79835" title="=&gt; Boolean">isTraceEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#151636" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#79845" title="(message: =&gt; String)Unit">trace</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Check out connection [%s leased]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="()Int">getTotalLeased</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="151637">PostgresFullUrl</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;^postgres://([a-zA-Z0-9_]+):([^@]+)@([^/]+)/([^\\s]+)$&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="151638">MysqlFullUrl</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;^mysql://([a-zA-Z0-9_]+):([^@]+)@([^/]+)/([^\\s]+)$&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a href="#151637" title="(target: Any)Option[List[String]]">PostgresFullUrl</a><span class="delimiter">(</span><a title="String" id="152552">username</a>, <a title="String" id="152553">password</a>, <a title="String" id="152554">host</a>, <a title="String" id="152555">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;jdbc:postgresql://%s/%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#152554" title="String">host</a>, <a href="#152555" title="String">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#152552" title="String">username</a><span class="delimiter">)</span>
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#152553" title="String">password</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a href="#151638" title="(target: Any)Option[List[String]]">MysqlFullUrl</a><span class="delimiter">(</span><a title="String" id="152561">username</a>, <a title="String" id="152562">password</a>, <a title="String" id="152563">host</a>, <a title="String" id="152564">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;jdbc:mysql://%s/%s?useUnicode=yes&amp;characterEncoding=UTF-8&amp;connectionCollation=utf8_general_ci&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#152563" title="String">host</a>, <a href="#152564" title="String">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#152561" title="String">username</a><span class="delimiter">)</span>
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#152562" title="String">password</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="java.lang.String" id="152569">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt;
        <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><a href="#152569" title="java.lang.String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65568" title="(message: String, e: Option[Throwable])play.api.PlayException">globalError</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Missing url configuration for database [%s]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#152577" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;pass&quot;)" class="string">&quot;pass&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#152582" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#152587" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Pool configuration</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setPartitionCount</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65560" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;partitionCount&quot;)" class="string">&quot;partitionCount&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setMaxConnectionsPerPartition</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65560" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;maxConnectionsPerPartition&quot;)" class="string">&quot;maxConnectionsPerPartition&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(30)" class="int">30</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setMinConnectionsPerPartition</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65560" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;minConnectionsPerPartition&quot;)" class="string">&quot;minConnectionsPerPartition&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setAcquireIncrement</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65560" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireIncrement&quot;)" class="string">&quot;acquireIncrement&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setAcquireRetryAttempts</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65560" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireRetryAttempts&quot;)" class="string">&quot;acquireRetryAttempts&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long)Unit">setAcquireRetryDelayInMs</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65562" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireRetryDelay&quot;)" class="string">&quot;acquireRetryDelay&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(1000L)" class="int">1000</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long)Unit">setConnectionTimeoutInMs</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65562" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;connectionTimeout&quot;)" class="string">&quot;connectionTimeout&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(1000L)" class="int">1000</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setIdleMaxAge</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65562" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;idleMaxAge&quot;)" class="string">&quot;idleMaxAge&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> * <span class="int">60</span> <span title="Long(600000L)">*</span> <span class="int">10</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setMaxConnectionAge</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65562" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;maxConnectionAge&quot;)" class="string">&quot;maxConnectionAge&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> * <span class="int">60</span> <span title="Long(3600000L)">*</span> <span class="int">60</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Boolean)Unit">setDisableJMX</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65561" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;disableJMX&quot;)" class="string">&quot;disableJMX&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setIdleConnectionTestPeriod</span><span class="delimiter">(</span><a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65562" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;idleConnectionTestPeriod&quot;)" class="string">&quot;idleConnectionTestPeriod&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> <span title="Long(60000L)">*</span> <span class="int">60</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>

    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;initSQL&quot;)" class="string">&quot;initSQL&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setInitSQL</span><span class="delimiter">(</span><a href="#152659" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65561" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;logStatements&quot;)" class="string">&quot;logStatements&quot;</span><span class="delimiter">)</span>.<span title="(f: Boolean =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Boolean)Unit">setLogStatementsEnabled</span><span class="delimiter">(</span><a href="#152665" title="Boolean">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;connectionTestStatement&quot;)" class="string">&quot;connectionTestStatement&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setConnectionTestStatement</span><span class="delimiter">(</span><a href="#152671" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Bind in JNDI</span>
    <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jndiName&quot;)" class="string">&quot;jndiName&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="String" id="152676">name</a> =&gt;
      <a href="../libs/JNDI.scala.html#12953" title="object play.api.libs.JNDI">JNDI</a>.<a href="../libs/JNDI.scala.html#152682" title="=&gt; javax.naming.InitialContext">initialContext</a>.<span title="(x$1: java.lang.String, x$2: Any)Unit">rebind</span><span class="delimiter">(</span><a href="#152676" title="String">name</a>, <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a><span class="delimiter">)</span>
      <a href="../Logger.scala.html#79859" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;play&quot;)" class="string">&quot;play&quot;</span><span class="delimiter">)</span>.<a href="../Logger.scala.html#79849" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="java.lang.String(&quot;datasource [&quot;)" class="string">&quot;datasource [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#151629" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">get</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] bound to JNDI as &quot;)" class="string">&quot;] bound to JNDI as &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#152676" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#151631" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>

  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="List[(javax.sql.DataSource, String)]" id="151440">datasources</a>: <span title="List[(javax.sql.DataSource, String)]">List</span><span class="delimiter">[</span>Tuple2<span class="delimiter">[</span>DataSource, String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#151436" title="=&gt; Set[String]">dbNames</a>.<span title="(f: String =&gt; (javax.sql.DataSource, String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],(javax.sql.DataSource, String),scala.collection.immutable.Set[(javax.sql.DataSource, String)]])scala.collection.immutable.Set[(javax.sql.DataSource, String)]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,(javax.sql.DataSource, String),scala.collection.immutable.Set[(javax.sql.DataSource, String)]]" class="delimiter">{</span> <a title="String" id="153091">dbName</a> =&gt;
    <span class="keyword">val</span> <a title="String" id="153092">url</a> = <a href="#151444" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><a href="#153091" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url&quot;)" class="string">&quot;.url&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#151435" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#153091" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153091" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url]&quot;)" class="string">&quot;.url]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="153093">driver</a> = <a href="#151444" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#65559" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><a href="#153091" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.driver&quot;)" class="string">&quot;.driver&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#151435" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#153091" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153091" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.driver]&quot;)" class="string">&quot;.driver]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="play.api.Configuration" id="153094">extraConfig</a> = <a href="#151444" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#65564" title="(path: String)Option[play.api.Configuration]">getConfig</a><span class="delimiter">(</span><a href="#153091" title="String">dbName</a><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.Configuration)play.api.Configuration">getOrElse</span><span class="delimiter">(</span><a href="#151435" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#153091" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153091" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#151438" title="(driver: String, c: play.api.Configuration)Unit">register</a><span class="delimiter">(</span><a href="#153093" title="String">driver</a>, <a href="#153094" title="play.api.Configuration">extraConfig</a><span class="delimiter">)</span>
    <a href="#151439" title="(dbName: String, url: String, driver: String, conf: play.api.Configuration)javax.sql.DataSource">createDataSource</a><span title="(x: javax.sql.DataSource)ArrowAssoc[javax.sql.DataSource]" class="delimiter">(</span><a href="#153091" title="String">dbName</a>, <a href="#153092" title="String">url</a>, <a href="#153093" title="String">driver</a>, <a href="#153094" title="play.api.Configuration">extraConfig</a><span class="delimiter">)</span> <span title="(y: String)(javax.sql.DataSource, String)">-&gt;</span> <a href="#153091" title="String">dbName</a>
  <span class="delimiter">}</span>.<span title="=&gt; List[(javax.sql.DataSource, String)]">toList</span>

  <span class="keyword">def</span> <a title="(ds: javax.sql.DataSource)Unit" id="151442">shutdownPool</a><span class="delimiter">(</span><a title="javax.sql.DataSource" id="153155">ds</a>: <span title="javax.sql.DataSource">DataSource</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#153155" title="javax.sql.DataSource">ds</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="153158">ds</a>: <span title="com.jolbox.bonecp.BoneCPDataSource">BoneCPDataSource</span> =&gt; <a href="#153158" title="com.jolbox.bonecp.BoneCPDataSource">ds</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <a href="#151435" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot; - could not recognize DataSource, therefore unable to shutdown this pool&quot;)" class="string">&quot; - could not recognize DataSource, therefore unable to shutdown this pool&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Retrieves a JDBC connection, with auto-commit set to `true`.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)javax.sql.DataSource" id="151443">getDataSource</a><span class="delimiter">(</span><a title="String" id="153161">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>
    <a href="#151440" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(p: (javax.sql.DataSource, String) =&gt; Boolean)List[(javax.sql.DataSource, String)]">filter</span><span class="delimiter">(</span><a href="#153166" title="(javax.sql.DataSource, String)">_</a>.<span title="=&gt; String">_2</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#153161" title="String">name</a><span class="delimiter">)</span>.<span title="=&gt; Option[(javax.sql.DataSource, String)]">headOption</span>.<span title="(f: (javax.sql.DataSource, String) =&gt; javax.sql.DataSource)Option[javax.sql.DataSource]">map</span><span class="delimiter">(</span><a title="(javax.sql.DataSource, String)" id="153175">e</a> =&gt; <a href="#153175" title="(javax.sql.DataSource, String)">e</a>.<span title="=&gt; javax.sql.DataSource">_1</span><span class="delimiter">)</span>.<span title="(default: =&gt; javax.sql.DataSource)javax.sql.DataSource">getOrElse</span><span class="delimiter">(</span><a href="#151435" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot; - could not find datasource for &quot;)" class="string">&quot; - could not find datasource for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153161" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * A connection releasing automatically statements on close
 */</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class AutoCleanConnection extends java.lang.Object with java.sql.Connection with ScalaObject" id="12231">AutoCleanConnection</a><a href="#12231" title="ScalaObject" class="delimiter">(</a><a title="java.sql.Connection" id="151074">connection</a>: <span title="java.sql.Connection">Connection</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.sql.Connection">Connection</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[java.sql.Statement]" id="151012">statements</a> = scala.collection.mutable.<span title="object scala.collection.mutable.ListBuffer">ListBuffer</span>.<span title="[A]=&gt; scala.collection.mutable.ListBuffer[A]">empty</span><span title="scala.collection.mutable.ListBuffer[java.sql.Statement]" class="delimiter">[</span><span title="java.sql.Statement">Statement</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: java.sql.Statement](b: =&gt; T)T" id="151014">registering</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: java.sql.Statement" id="151016">T</a> &lt;: Statement<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="153252">b</a>: =&gt; T<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="153255">statement</a> = <a href="#153252" title="=&gt; T">b</a>
    <a href="#151012" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a> <span title="(x: java.sql.Statement)AutoCleanConnection.this.statements.type">+=</span> <a href="#153255" title="T">statement</a>
    <a href="#153255" title="T">statement</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="151017">releaseStatements</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#151012" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a>.<span title="(f: java.sql.Statement =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="java.sql.Statement" id="154494">statement</a> =&gt;
      <a href="#154494" title="java.sql.Statement">statement</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#151012" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()java.sql.Statement" id="151018">createStatement</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(resultSetType: Int, resultSetConcurrency: Int)java.sql.Statement" id="151019">createStatement</a><span class="delimiter">(</span><a title="Int" id="153538">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="153539">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#151019" title="(resultSetType: Int, resultSetConcurrency: Int)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#153538" title="Int">resultSetType</a>, <a href="#153539" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.Statement" id="151020">createStatement</a><span class="delimiter">(</span><a title="Int" id="153546">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="153547">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="153548">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#151020" title="(resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#153546" title="Int">resultSetType</a>, <a href="#153547" title="Int">resultSetConcurrency</a>, <a href="#153548" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.sql.PreparedStatement" id="151021">prepareStatement</a><span class="delimiter">(</span><a title="String" id="153572">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#153572" title="String">sql</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, autoGeneratedKeys: Int)java.sql.PreparedStatement" id="151022">prepareStatement</a><span class="delimiter">(</span><a title="String" id="153584">sql</a>: <span title="String">String</span>, <a title="Int" id="153585">autoGeneratedKeys</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#153584" title="String">sql</a>, <a href="#153585" title="Int">autoGeneratedKeys</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, columnIndexes: Array[Int])java.sql.PreparedStatement" id="151023">prepareStatement</a><span class="delimiter">(</span><a title="String" id="153601">sql</a>: <span title="String">String</span>, <a title="Array[Int]" id="153602">columnIndexes</a>: scala.<span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[Int])java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#153601" title="String">sql</a>, <a href="#153602" title="Array[Int]">columnIndexes</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int)java.sql.PreparedStatement" id="151024">prepareStatement</a><span class="delimiter">(</span><a title="String" id="153617">sql</a>: <span title="String">String</span>, <a title="Int" id="153618">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="153619">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#153617" title="String">sql</a>, <a href="#153618" title="Int">resultSetType</a>, <a href="#153619" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.PreparedStatement" id="151025">prepareStatement</a><span class="delimiter">(</span><a title="String" id="153633">sql</a>: <span title="String">String</span>, <a title="Int" id="153634">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="153635">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="153636">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#153633" title="String">sql</a>, <a href="#153634" title="Int">resultSetType</a>, <a href="#153635" title="Int">resultSetConcurrency</a>, <a href="#153636" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, columnNames: Array[String])java.sql.PreparedStatement" id="151026">prepareStatement</a><span class="delimiter">(</span><a title="String" id="153651">sql</a>: <span title="String">String</span>, <a title="Array[String]" id="153652">columnNames</a>: scala.<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.String])java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#153651" title="String">sql</a>, <a href="#153652" title="Array[String]">columnNames</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.sql.CallableStatement" id="151027">prepareCall</a><span class="delimiter">(</span><a title="String" id="153667">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#153667" title="String">sql</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int)java.sql.CallableStatement" id="151028">prepareCall</a><span class="delimiter">(</span><a title="String" id="153991">sql</a>: <span title="String">String</span>, <a title="Int" id="153992">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="153993">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#153991" title="String">sql</a>, <a href="#153992" title="Int">resultSetType</a>, <a href="#153993" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.CallableStatement" id="151029">prepareCall</a><span class="delimiter">(</span><a title="String" id="154007">sql</a>: <span title="String">String</span>, <a title="Int" id="154008">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="154009">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="154010">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151014" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#154007" title="String">sql</a>, <a href="#154008" title="Int">resultSetType</a>, <a href="#154009" title="Int">resultSetConcurrency</a>, <a href="#154010" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="151030">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#151017" title="()Unit">releaseStatements</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="151031">clearWarnings</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Unit">clearWarnings</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="151032">commit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(typeName: String, elements: Array[AnyRef])java.sql.Array" id="151033">createArrayOf</a><span class="delimiter">(</span><a title="String" id="154030">typeName</a>: <span title="String">String</span>, <a title="Array[AnyRef]" id="154031">elements</a>: scala.<span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.Object])java.sql.Array">createArrayOf</span><span class="delimiter">(</span><a href="#154030" title="String">typeName</a>, <a href="#154031" title="Array[AnyRef]">elements</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.Blob" id="151034">createBlob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.Blob">createBlob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.Clob" id="151035">createClob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.Clob">createClob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.NClob" id="151036">createNClob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.NClob">createNClob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.SQLXML" id="151037">createSQLXML</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.SQLXML">createSQLXML</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(typeName: String, attributes: Array[AnyRef])java.sql.Struct" id="151038">createStruct</a><span class="delimiter">(</span><a title="String" id="154230">typeName</a>: <span title="String">String</span>, <a title="Array[AnyRef]" id="154231">attributes</a>: scala.<span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.Object])java.sql.Struct">createStruct</span><span class="delimiter">(</span><a href="#154230" title="String">typeName</a>, <a href="#154231" title="Array[AnyRef]">attributes</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="151039">getAutoCommit</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Boolean">getAutoCommit</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.lang.String" id="151040">getCatalog</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.lang.String">getCatalog</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.util.Properties" id="151041">getClientInfo</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.util.Properties">getClientInfo</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="151042">getClientInfo</a><span class="delimiter">(</span><a title="String" id="154258">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.lang.String">getClientInfo</span><span class="delimiter">(</span><a href="#154258" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="151043">getHoldability</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Int">getHoldability</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.DatabaseMetaData" id="151044">getMetaData</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="151045">getTransactionIsolation</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Int">getTransactionIsolation</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.util.Map[java.lang.String,java.lang.Class[_]]" id="151046">getTypeMap</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.util.Map[java.lang.String,java.lang.Class[_]]">getTypeMap</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.SQLWarning" id="151047">getWarnings</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.SQLWarning">getWarnings</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="151048">isClosed</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Boolean">isClosed</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="151049">isReadOnly</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Boolean">isReadOnly</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(timeout: Int)Boolean" id="151050">isValid</a><span class="delimiter">(</span><a title="Int" id="154315">timeout</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Boolean">isValid</span><span class="delimiter">(</span><a href="#154315" title="Int">timeout</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.lang.String" id="151051">nativeSQL</a><span class="delimiter">(</span><a title="String" id="154320">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.lang.String">nativeSQL</span><span class="delimiter">(</span><a href="#154320" title="String">sql</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(savepoint: java.sql.Savepoint)Unit" id="151052">releaseSavepoint</a><span class="delimiter">(</span><a title="java.sql.Savepoint" id="154325">savepoint</a>: <span title="java.sql.Savepoint">Savepoint</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.sql.Savepoint)Unit">releaseSavepoint</span><span class="delimiter">(</span><a href="#154325" title="java.sql.Savepoint">savepoint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="151053">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(savepoint: java.sql.Savepoint)Unit" id="151054">rollback</a><span class="delimiter">(</span><a title="java.sql.Savepoint" id="154332">savepoint</a>: <span title="java.sql.Savepoint">Savepoint</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.sql.Savepoint)Unit">rollback</span><span class="delimiter">(</span><a href="#154332" title="java.sql.Savepoint">savepoint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(autoCommit: Boolean)Unit" id="151055">setAutoCommit</a><span class="delimiter">(</span><a title="Boolean" id="154337">autoCommit</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#154337" title="Boolean">autoCommit</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(catalog: String)Unit" id="151056">setCatalog</a><span class="delimiter">(</span><a title="String" id="154341">catalog</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)Unit">setCatalog</span><span class="delimiter">(</span><a href="#154341" title="String">catalog</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(properties: java.util.Properties)Unit" id="151057">setClientInfo</a><span class="delimiter">(</span><a title="java.util.Properties" id="154345">properties</a>: java.util.<span title="java.util.Properties">Properties</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.util.Properties)Unit">setClientInfo</span><span class="delimiter">(</span><a href="#154345" title="java.util.Properties">properties</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String, value: String)Unit" id="151058">setClientInfo</a><span class="delimiter">(</span><a title="String" id="154350">name</a>: <span title="String">String</span>, <a title="String" id="154351">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">setClientInfo</span><span class="delimiter">(</span><a href="#154350" title="String">name</a>, <a href="#154351" title="String">value</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(holdability: Int)Unit" id="151059">setHoldability</a><span class="delimiter">(</span><a title="Int" id="154357">holdability</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Unit">setHoldability</span><span class="delimiter">(</span><a href="#154357" title="Int">holdability</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(readOnly: Boolean)Unit" id="151060">setReadOnly</a><span class="delimiter">(</span><a title="Boolean" id="154361">readOnly</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setReadOnly</span><span class="delimiter">(</span><a href="#154361" title="Boolean">readOnly</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()java.sql.Savepoint" id="151061">setSavepoint</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="()java.sql.Savepoint">setSavepoint</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)java.sql.Savepoint" id="151062">setSavepoint</a><span class="delimiter">(</span><a title="String" id="154372">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.Savepoint">setSavepoint</span><span class="delimiter">(</span><a href="#154372" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(level: Int)Unit" id="151063">setTransactionIsolation</a><span class="delimiter">(</span><a title="Int" id="154381">level</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Unit">setTransactionIsolation</span><span class="delimiter">(</span><a href="#154381" title="Int">level</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(map: java.util.Map[String,Class[_]])Unit" id="151064">setTypeMap</a><span class="delimiter">(</span><a title="java.util.Map[String,Class[_]]" id="154385">map</a>: java.util.<span title="java.util.Map[String,Class[_]]">Map</span><span class="delimiter">[</span>String, Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.util.Map[java.lang.String,java.lang.Class[_]])Unit">setTypeMap</span><span class="delimiter">(</span><a href="#154385" title="java.util.Map[String,Class[_]]">map</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(iface: Class[_])Boolean" id="151065">isWrapperFor</a><span class="delimiter">(</span><a title="Class[_]" id="154391">iface</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.Class[_])Boolean">isWrapperFor</span><span class="delimiter">(</span><a href="#154391" title="Class[_]">iface</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](iface: Class[T])T" id="151066">unwrap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="151068">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="154401">iface</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#151074" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.Class[T])T">unwrap</span><span class="delimiter">(</span><a href="#154401" title="Class[T]">iface</a><span class="delimiter">)</span>

  <span class="comment">// JDBC 4.1</span>
  <span class="keyword">def</span> <a title="()String" id="151069">getSchema</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#151074" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#154419" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> getSchema<span class="delimiter">(</span><span class="delimiter">)</span>: String <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#154420" title="()String">getSchema</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(schema: String)Unit" id="151070">setSchema</a><span class="delimiter">(</span><a title="String" id="154422">schema</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#151074" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#154510" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> setSchema<span class="delimiter">(</span>schema: String<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#154511" title="(schema: String)Unit">setSchema</a><span class="delimiter">(</span><a href="#154422" title="String">schema</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Int" id="151071">getNetworkTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#151074" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#154428" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> getNetworkTimeout<span class="delimiter">(</span><span class="delimiter">)</span>: Int <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#154429" title="()Int">getNetworkTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(executor: java.util.concurrent.Executor, milliseconds: Int)Unit" id="151072">setNetworkTimeout</a><span class="delimiter">(</span><a title="java.util.concurrent.Executor" id="154431">executor</a>: java.util.concurrent.<span title="java.util.concurrent.Executor">Executor</span>, <a title="Int" id="154432">milliseconds</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#151074" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#154513" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> setNetworkTimeout<span class="delimiter">(</span>executor: java.util.concurrent.Executor, milliseconds: Int<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#154514" title="(executor: java.util.concurrent.Executor, milliseconds: Int)Unit">setNetworkTimeout</a><span class="delimiter">(</span><a href="#154431" title="java.util.concurrent.Executor">executor</a>, <a href="#154432" title="Int">milliseconds</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(executor: java.util.concurrent.Executor)Unit" id="151073">abort</a><span class="delimiter">(</span><a title="java.util.concurrent.Executor" id="154439">executor</a>: java.util.concurrent.<span title="java.util.concurrent.Executor">Executor</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#151074" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#154517" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> abort<span class="delimiter">(</span>executor: java.util.concurrent.Executor<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#154518" title="(executor: java.util.concurrent.Executor)Unit">abort</a><span class="delimiter">(</span><a href="#154439" title="java.util.concurrent.Executor">executor</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>