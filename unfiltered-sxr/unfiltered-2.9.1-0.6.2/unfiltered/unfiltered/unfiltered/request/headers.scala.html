<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>unfiltered/unfiltered/unfiltered/request/headers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">trait</span> <a title="trait DateParser extends java.lang.Object with String =&gt; java.util.Date" id="9784">DateParser</a> <span class="keyword">extends</span> <span class="delimiter">(</span>String =&gt; java.util.Date<span class="delimiter">)</span>

<span class="keyword">object</span> <a title="object unfiltered.request.DateFormatting" id="9779">DateFormatting</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> java.text.SimpleDateFormat
  <span class="keyword">import</span> java.util.<span class="delimiter">{</span> Date, Locale, TimeZone <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(date: java.util.Date)java.lang.String" id="85537">format</a><span class="delimiter">(</span><a title="java.util.Date" id="85731">date</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> =
    <a href="#85734" title="java.text.SimpleDateFormat" class="keyword">new</a> <a title="anonymous class $anon extends java.text.SimpleDateFormat" id="85734">SimpleDateFormat</a><span class="delimiter">(</span><span title="java.lang.String(&quot;E, dd MMM yyyy HH:mm:ss z&quot;)" class="string">&quot;E, dd MMM yyyy HH:mm:ss z&quot;</span>, <span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#85734" title="(x$1: java.util.TimeZone)Unit">setTimeZone</a><span class="delimiter">(</span><span title="object java.util.TimeZone">TimeZone</span>.<span title="(x$1: java.lang.String)java.util.TimeZone">getTimeZone</span><span class="delimiter">(</span><span title="java.lang.String(&quot;GMT&quot;)" class="string">&quot;GMT&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#85731" title="java.util.Date">date</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(fmt: String)(value: String)Option[java.util.Date]" id="85538">parseAs</a><span class="delimiter">(</span><a title="String" id="85549">fmt</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="String" id="85550">value</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[java.util.Date]">Option</span><span class="delimiter">[</span>Date<span class="delimiter">]</span> =
    <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: java.util.Date)Some[java.util.Date]">Some</span><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: java.util.Locale)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><a href="#85549" title="String">fmt</a>, <span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">US</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#85550" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>

  <span class="comment">/** Preferred HTTP date format Sun, 06 Nov 1994 08:49:37 GMT */</span>
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="85539">RFC1123</a> = <a href="#85538" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#85553" title="String" class="delimiter">(</a><span title="java.lang.String(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;)" class="string">&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;</span><span class="delimiter">)</span>_

  <span class="comment">/** Sunday, 06-Nov-94 08:49:37 GMT */</span>
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="85540">RFC1036</a> = <a href="#85538" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#85563" title="String" class="delimiter">(</a><span title="java.lang.String(&quot;EEEEEE, dd-MMM-yy HH:mm:ss z&quot;)" class="string">&quot;EEEEEE, dd-MMM-yy HH:mm:ss z&quot;</span><span class="delimiter">)</span>_

  <span class="comment">/** Sun Nov  6 08:49:37 1994 */</span>
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="85541">ANSICTime</a> = <a href="#85538" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#85571" title="String" class="delimiter">(</a><span title="java.lang.String(&quot;EEE MMM  d HH:mm:ss yyyy&quot;)" class="string">&quot;EEE MMM  d HH:mm:ss yyyy&quot;</span><span class="delimiter">)</span>_

  <span class="comment">/** @return various date coersion formats falling back on None value */</span>
  <span class="keyword">def</span> <a title="(raw: String)Option[java.util.Date]" id="85542">parseDate</a><span class="delimiter">(</span><a title="String" id="85543">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#85539" title="(v1: String)Option[java.util.Date]">RFC1123</a><span class="delimiter">(</span><a href="#85543" title="String">raw</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[java.util.Date])Option[java.util.Date]">orElse</span> <a href="#85540" title="(v1: String)Option[java.util.Date]">RFC1036</a><span class="delimiter">(</span><a href="#85543" title="String">raw</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[java.util.Date])Option[java.util.Date]">orElse</span> <a href="#85541" title="(v1: String)Option[java.util.Date]">ANSICTime</a><span class="delimiter">(</span><a href="#85543" title="String">raw</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** A header with values mapped to keys in a Map. */</span>
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class MappedRequestHeader[A, B] extends java.lang.Object with ScalaObject" id="9985">MappedRequestHeader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13516">A</a>, <a title="&gt;: Nothing &lt;: Any" id="13517">B</a><span class="delimiter">]</span><a href="#9985" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="84887">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; Map[A,B]" id="84888">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Map<span class="delimiter">[</span>A, B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Some[Map[A,B]]" id="84879">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="84881">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="85776">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(x: Map[A,B])Some[Map[A,B]]">Some</span><span class="delimiter">(</span><a href="#84888" title="(v1: Iterator[String])Map[A,B]">parser</a><span class="delimiter">(</span><a href="#85776" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13901" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#84887" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Map[A,B]" id="84882">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="84884">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="85793">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#84888" title="(v1: Iterator[String])Map[A,B]">parser</a><span class="delimiter">(</span><a href="#85793" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13901" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#84887" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** A header with comma delimited values. Implementations of this extractor
 * will not match requests for which the header `name` is not present.*/</span>
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class SeqRequestHeader[T] extends java.lang.Object with ScalaObject" id="10261">SeqRequestHeader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13518">T</a><span class="delimiter">]</span><a href="#10261" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="40361">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; List[T]" id="40362">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[A](req: unfiltered.request.HttpRequest[A])Option[List[T]]" id="40353">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="40355">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[A]" id="40373">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[A]">HttpRequest</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="(x: List[T])Some[List[T]]">Some</span><span class="delimiter">(</span><a href="#40362" title="(v1: Iterator[String])List[T]">parser</a><span class="delimiter">(</span><a href="#40373" title="unfiltered.request.HttpRequest[A]">req</a>.<a href="HttpRequest.scala.html#13901" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#40361" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(p: List[T] =&gt; Boolean)Option[List[T]]">filter</span> <span class="delimiter">{</span> <span title="=&gt; Boolean">!</span><a href="#40400" title="List[T]">_</a>.<span title="=&gt; Boolean">isEmpty</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])List[T]" id="40356">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="40358">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="56557">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#40362" title="(v1: Iterator[String])List[T]">parser</a><span class="delimiter">(</span><a href="#56557" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13901" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#40361" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** A header with a single value. Implementations of this extractor
 * will not match requests for which the header `name` is not present.*/</span>
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RequestHeader[A] extends java.lang.Object with ScalaObject" id="10249">RequestHeader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13519">A</a><span class="delimiter">]</span><a href="#10249" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="16010">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; List[A]" id="16011">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[A]" id="16002">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16004">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="16250">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#16011" title="(v1: Iterator[String])List[A]">parser</a><span class="delimiter">(</span><a href="#16250" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13901" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#16010" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[A]">headOption</span>
   <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[A]" id="16005">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16007">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="43256">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#16011" title="(v1: Iterator[String])List[A]">parser</a><span class="delimiter">(</span><a href="#43256" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13901" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#16010" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[A]">headOption</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.DateValueParser" id="9794">DateValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>java.util.Date<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#9779" title="object unfiltered.request.DateFormatting">DateFormatting</a>._
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[java.util.Date]" id="43250">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="85804">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#85804" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.util.Date])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.util.Date,List[java.util.Date]])List[java.util.Date]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.util.Date,List[java.util.Date]]" class="delimiter">(</span><a href="#85542" title="(xo: Option[java.util.Date])Iterable[java.util.Date]">parseDate</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.IntValueParser" id="9956">IntValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="(raw: String)Option[Int]" id="85902">tryInt</a><span class="delimiter">(</span><a title="String" id="85905">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#85905" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">raw</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>
   <span class="keyword">def</span> <a title="(values: Iterator[String])List[Int]" id="85903">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="85925">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
     <a href="#85925" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[Int])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],Int,List[Int]])List[Int]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Int,List[Int]]" class="delimiter">(</span><a href="#85902" title="(xo: Option[Int])Iterable[Int]">tryInt</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.StringValueParser" id="10289">StringValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="16244">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="86023">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#86023" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.UriValueParser" id="10325">UriValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>java.net.URI<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(raw: String)Option[java.net.URI]" id="86028">toUri</a><span class="delimiter">(</span><a title="String" id="86031">raw</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: java.net.URI)Some[java.net.URI]">Some</span><span class="delimiter">(</span><span title="java.net.URI" class="keyword">new</span> java.net.<span title="java.net.URI">URI</span><span class="delimiter">(</span><a href="#86031" title="String">raw</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(values: Iterator[String])List[java.net.URI]" id="86029">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="86050">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#86050" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.net.URI])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.net.URI,List[java.net.URI]])List[java.net.URI]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.net.URI,List[java.net.URI]]" class="delimiter">(</span><a href="#86028" title="(xo: Option[java.net.URI])Iterable[java.net.URI]">toUri</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.SeqValueParser" id="10277">SeqValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="56551">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="86148">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
     <span class="keyword">def</span> <a title="(raw: String)List[String]" id="86152">split</a><span class="delimiter">(</span><a title="String" id="86153">raw</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
       <span class="delimiter">(</span><a href="#86153" title="String">raw</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span> <span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</span> <span class="delimiter">{</span>
         <a href="#86601" title="java.lang.String">_</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</span>.<span title="(p: Char =&gt; Boolean)String">takeWhile</span> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">{</span> <a href="#86680" title="Char">_</a> <span title="(x: Char)Boolean">!=</span> <span title="Char(\';\')" class="char">';'</span> <span class="delimiter">}</span> <span title="=&gt; String">mkString</span>
       <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
     <a href="#86148" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#86152" title="(raw: String)List[String]">split</a><span class="delimiter">)</span>
   <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span>  case <span class="keyword">class</span> <a title="class Conneg extends java.lang.Object with ScalaObject with Product with Serializable" id="86958">Conneg</a><a href="#86958" title="ScalaObject" class="delimiter">(</a><a title="String" id="87434">value</a>: <span title="String">String</span>, <a title="Double" id="87435">qualifier</a>: <span title="Double">Double</span> = <span title="Double(1.0)" class="double">1.0</span><span class="delimiter">)</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span>  <span class="keyword">object</span> <a title="object unfiltered.request.Conneg" id="87440">Conneg</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="86955">EqualsMatcher</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;(\w*)=&quot;?([a-zA-Z\.0-9]*)&quot;?&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="keyword">def</span> <a title="(input: String)unfiltered.request.Conneg" id="86957">apply</a><span class="delimiter">(</span><a title="String" id="87021">input</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#86958" title="unfiltered.request.Conneg">Conneg</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="87023">split</a> = <a href="#87021" title="String">input</a>.<span title="()java.lang.String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,String]" id="87024">params</a> = <a href="#87023" title="List[java.lang.String]">split</a>.<span title="=&gt; List[java.lang.String]">tail</span>.<span title="(z: scala.collection.immutable.Map[String,Option[String]])(f: (scala.collection.immutable.Map[String,Option[String]], java.lang.String) =&gt; scala.collection.immutable.Map[String,Option[String]])scala.collection.immutable.Map[String,Option[String]]">foldLeft</span><span class="delimiter">(</span><span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, Option[String])*)scala.collection.immutable.Map[String,Option[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#87155" title="scala.collection.immutable.Map[String,Option[String]]" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="scala.collection.immutable.Map[String,Option[String]]" class="delimiter">(</span><a title="scala.collection.immutable.Map[String,Option[String]]" id="87165">map</a>, <a title="java.lang.String" id="87166">s</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="(java.lang.String, Option[java.lang.String])" id="87167">item</a> = <a href="#87166" title="java.lang.String">s</a>.<span title="()java.lang.String">trim</span> <span title="(java.lang.String, Option[java.lang.String])" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#86955" title="(java.lang.String, Some[java.lang.String])">EqualsMatcher</a><span class="delimiter">(</span><a title="String" id="87169">a</a>, <a title="String" id="87170">b</a><span class="delimiter">)</span> =&gt; <span title="(_1: java.lang.String, _2: Some[java.lang.String])(java.lang.String, Some[java.lang.String])" class="delimiter">(</span><a href="#87169" title="String">a</a>.<span title="()java.lang.String">trim</span>, <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#87170" title="String">b</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="(java.lang.String, None.type)">_</span> =&gt; <span title="(_1: java.lang.String, _2: None.type)(java.lang.String, None.type)" class="delimiter">(</span><a href="#87166" title="java.lang.String">s</a>, <span title="object None">None</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#87165" title="scala.collection.immutable.Map[String,Option[String]]">map</a> <span title="(kv: (String, Option[String]))scala.collection.immutable.Map[String,Option[String]]">+</span> <a href="#87167" title="(java.lang.String, Option[java.lang.String])">item</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="(pf: PartialFunction[(String, Option[String]),(String, String)])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Option[String]],(String, String),scala.collection.immutable.Map[String,String]])scala.collection.immutable.Map[String,String]">collect</span><a href="#87284" title="(String, String)" class="delimiter">{</a><span class="keyword">case</span> <span title="(String, String)" class="delimiter">(</span><a title="String" id="87287">a</a>, Some<span class="delimiter">(</span><a title="String" id="87289">b</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#87287" title="String">a</a>, <a href="#87289" title="String">b</a><span class="delimiter">)</span><span class="delimiter">}</span>

    <span title="unfiltered.request.Conneg" class="keyword">new</span> <a href="#86958" title="unfiltered.request.Conneg">Conneg</a><span class="delimiter">(</span><a href="#87023" title="List[java.lang.String]">split</a>.<span title="=&gt; java.lang.String">head</span>, <a href="#87024" title="scala.collection.immutable.Map[String,String]">params</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><span title="java.lang.String(&quot;q&quot;)" class="string">&quot;q&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Double)Option[Double]">map</span><span class="delimiter">(</span><a href="#87420" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>.<span title="(default: =&gt; Double)Double">getOrElse</span><span class="delimiter">(</span><span title="Double(1.0)" class="double">1.0</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.ConnegValueParser" id="9737">ConnegValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="40367">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="87442">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String =&gt; List[unfiltered.request.Conneg]" id="87446">parse</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; scala.List<span class="delimiter">[</span>Conneg<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a title="String" id="87448">raw</a> =&gt; <a href="#87448" title="String">raw</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; unfiltered.request.Conneg)(implicit bf: scala.collection.generic.CanBuildFrom[Array[java.lang.String],unfiltered.request.Conneg,Array[unfiltered.request.Conneg]])Array[unfiltered.request.Conneg]">map</span><span title="(xs: Array[unfiltered.request.Conneg])scala.collection.mutable.ArrayOps[unfiltered.request.Conneg]" class="delimiter">(</span><a href="#86957" title="(input: String)unfiltered.request.Conneg">Conneg</a><span class="delimiter">(</span><a href="#87896" title="java.lang.String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; List[unfiltered.request.Conneg]">toList</span>
    <span class="delimiter">}</span>
    <a href="#87442" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[unfiltered.request.Conneg])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],unfiltered.request.Conneg,List[unfiltered.request.Conneg]])List[unfiltered.request.Conneg]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,unfiltered.request.Conneg,List[unfiltered.request.Conneg]]" class="delimiter">(</span><a href="#87446" title="=&gt; String =&gt; List[unfiltered.request.Conneg]">parse</a><span class="delimiter">)</span>.<span title="(f: unfiltered.request.Conneg =&gt; Double)(implicit ord: scala.math.Ordering[Double])List[unfiltered.request.Conneg]">sortBy</span><span class="delimiter">(</span><a href="#88093" title="unfiltered.request.Conneg">_</a>.<a href="#87435" title="=&gt; Double">qualifier</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="=&gt; math.Ordering.type">Ordering</span>.<span title="object Ordering.Double">Double</span>.<span title="=&gt; scala.math.Ordering[Double]">reverse</span><span class="delimiter">)</span>.<span title="(f: unfiltered.request.Conneg =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[unfiltered.request.Conneg],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#88122" title="unfiltered.request.Conneg">_</a>.<a href="#87434" title="=&gt; String">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Header whose value should be a date and time. Parsing is attempted
 * for formats defined in the DateFormatting object, in this order:
 * RFC1123, RFC1036,  ANSICTime. */</span>
<span class="keyword">class</span> <a title="class DateHeader extends unfiltered.request.RequestHeader[java.util.Date] with ScalaObject" id="9781">DateHeader</a><a href="#9781" title="ScalaObject" class="delimiter">(</a><a title="String" id="88159">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10249" title="unfiltered.request.RequestHeader[java.util.Date]">RequestHeader</a><span class="delimiter">(</span><a href="#88159" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9794" title="object unfiltered.request.DateValueParser">DateValueParser</a><span class="delimiter">)</span>
<span class="comment">/** A repeatable header may be specified in more than one header k-v pair and
 *  whose values are a list delimited by comma
 *  see also http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2 */</span>
<span class="keyword">class</span> <a title="class RepeatableHeader extends unfiltered.request.SeqRequestHeader[String] with ScalaObject" id="10240">RepeatableHeader</a><a href="#10240" title="ScalaObject" class="delimiter">(</a><a title="String" id="88170">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10261" title="unfiltered.request.SeqRequestHeader[String]">SeqRequestHeader</a><span class="delimiter">(</span><a href="#88170" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#10277" title="object unfiltered.request.SeqValueParser">SeqValueParser</a><span class="delimiter">)</span>
<span class="comment">/** Header whose value should be a valid URI. */</span>
<span class="keyword">class</span> <a title="class UriHeader extends unfiltered.request.RequestHeader[java.net.URI] with ScalaObject" id="10315">UriHeader</a><a href="#10315" title="ScalaObject" class="delimiter">(</a><a title="String" id="88190">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10249" title="unfiltered.request.RequestHeader[java.net.URI]">RequestHeader</a><span class="delimiter">(</span><a href="#88190" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#10325" title="object unfiltered.request.UriValueParser">UriValueParser</a><span class="delimiter">)</span>
<span class="comment">/** Header whose value can be any string. */</span>
<span class="keyword">class</span> <a title="class StringHeader extends unfiltered.request.RequestHeader[String] with ScalaObject" id="10282">StringHeader</a><a href="#10282" title="ScalaObject" class="delimiter">(</a><a title="String" id="55286">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10249" title="unfiltered.request.RequestHeader[String]">RequestHeader</a><span class="delimiter">(</span><a href="#55286" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#10289" title="object unfiltered.request.StringValueParser">StringValueParser</a><span class="delimiter">)</span>
<span class="comment">/** Header whose value should be an integer. (Is stored in an Int.) */</span>
<span class="keyword">class</span> <a title="class IntHeader extends unfiltered.request.RequestHeader[Int] with ScalaObject" id="9946">IntHeader</a><a href="#9946" title="ScalaObject" class="delimiter">(</a><a title="String" id="88220">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10249" title="unfiltered.request.RequestHeader[Int]">RequestHeader</a><span class="delimiter">(</span><a href="#88220" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9956" title="object unfiltered.request.IntValueParser">IntValueParser</a><span class="delimiter">)</span>
<span class="comment">/* Header where the value needs to be sorted by the qualifier attribute. */</span>
<span class="keyword">class</span> <a title="class ConnegHeader extends unfiltered.request.SeqRequestHeader[String] with ScalaObject" id="9718">ConnegHeader</a><a href="#9718" title="ScalaObject" class="delimiter">(</a><a title="String" id="88231">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10261" title="unfiltered.request.SeqRequestHeader[String]">SeqRequestHeader</a><span class="delimiter">(</span><a href="#88231" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9737" title="object unfiltered.request.ConnegValueParser">ConnegValueParser</a><span class="delimiter">)</span>

<span class="comment">// http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.10</span>

<span class="keyword">object</span> <a title="object unfiltered.request.Accept" id="9542">Accept</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9718" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept&quot;)" class="string">&quot;Accept&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.AcceptCharset" id="9548">AcceptCharset</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9718" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept-Charset&quot;)" class="string">&quot;Accept-Charset&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.AcceptEncoding" id="9554">AcceptEncoding</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9718" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept-Encoding&quot;)" class="string">&quot;Accept-Encoding&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.AcceptLanguage" id="9560">AcceptLanguage</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9718" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept-Language&quot;)" class="string">&quot;Accept-Language&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Authorization" id="9659">Authorization</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Authorization&quot;)" class="string">&quot;Authorization&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Connection" id="9698">Connection</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Connection&quot;)" class="string">&quot;Connection&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.RequestContentType" id="10247">RequestContentType</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Content-Type&quot;)" class="string">&quot;Content-Type&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Expect" id="9827">Expect</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Expect&quot;)" class="string">&quot;Expect&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.From" id="9836">From</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;From&quot;)" class="string">&quot;From&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Host" id="9881">Host</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Host&quot;)" class="string">&quot;Host&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfMatch" id="9920">IfMatch</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Match&quot;)" class="string">&quot;If-Match&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfModifiedSince" id="9926">IfModifiedSince</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9781" title="unfiltered.request.DateHeader">DateHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Modified-Since&quot;)" class="string">&quot;If-Modified-Since&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfNoneMatch" id="9932">IfNoneMatch</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-None-Match&quot;)" class="string">&quot;If-None-Match&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfRange" id="9938">IfRange</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Range&quot;)" class="string">&quot;If-Range&quot;</span><span class="delimiter">)</span> <span class="comment">// can also be an http date</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfUnmodifiedSince" id="9944">IfUnmodifiedSince</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9781" title="unfiltered.request.DateHeader">DateHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Unmodified-Since&quot;)" class="string">&quot;If-Unmodified-Since&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.MaxForwards" id="9992">MaxForwards</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9946" title="unfiltered.request.IntHeader">IntHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Max-Forwards&quot;)" class="string">&quot;Max-Forwards&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.ProxyAuthorization" id="10103">ProxyAuthorization</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Proxy-Authorization&quot;)" class="string">&quot;Proxy-Authorization&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Range" id="10223">Range</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Range&quot;)" class="string">&quot;Range&quot;</span><span class="delimiter">)</span><span class="comment">// there more structure here</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Referer" id="10229">Referer</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10315" title="unfiltered.request.UriHeader">UriHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Referer&quot;)" class="string">&quot;Referer&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.TE" id="10295">TE</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;TE&quot;)" class="string">&quot;TE&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Upgrade" id="10313">Upgrade</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Upgrade&quot;)" class="string">&quot;Upgrade&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.UserAgent" id="10331">UserAgent</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10282" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;User-Agent&quot;)" class="string">&quot;User-Agent&quot;</span><span class="delimiter">)</span><span class="comment">// maybe a bit more structure here</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Via" id="10337">Via</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Via&quot;)" class="string">&quot;Via&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.XForwardedFor" id="10343">XForwardedFor</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10240" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;X-Forwarded-For&quot;)" class="string">&quot;X-Forwarded-For&quot;</span><span class="delimiter">)</span>

<span class="comment">/** Extracts the charset value from the Content-Type header, if present */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Charset" id="9686">Charset</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> unfiltered.util.MIMEType
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[String]" id="58447">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="58449">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="58456">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a href="../../../../util/unfiltered/util/mime.scala.html#58465" title="(mt: String)Option[unfiltered.util.MIMEType]">MIMEType</a><span class="delimiter">(</span><a title="unfiltered.util.MIMEType" id="58487">mimeType</a><span class="delimiter">)</span> &lt;- <a href="#16005" title="(req: unfiltered.request.HttpRequest[T])Option[String]">RequestContentType</a><a href="#58463" title="(f: String =&gt; Option[String])Option[String]" class="delimiter">(</a><a href="#58456" title="unfiltered.request.HttpRequest[T]">req</a><span class="delimiter">)</span>
      <a title="String" id="58493">charset</a> &lt;- <a href="#58487" title="unfiltered.util.MIMEType">mimeType</a>.<a href="../../../../util/unfiltered/util/mime.scala.html#58476" title="=&gt; Map[String,String]">params</a>.<span title="(key: String)Option[String]">get</span><span title="(f: String =&gt; String)Option[String]" class="delimiter">(</span><span title="java.lang.String(&quot;charset&quot;)" class="string">&quot;charset&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#58493" title="String">charset</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[String]" id="58450">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="58452">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="58453">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#58447" title="(req: unfiltered.request.HttpRequest[T])Option[String]">unapply</a><span class="delimiter">(</span><a href="#58453" title="unfiltered.request.HttpRequest[T]">req</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** Extracts hostname and port separately from the Host header, setting
 * a default port of 80 or 443 when none is specified */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.HostPort" id="9887">HostPort</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> unfiltered.util.Of
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[(String, Int)]" id="84631">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="84633">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="84634">req</a>: <a href="HttpRequest.scala.html#9907" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[(String, Int)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, Int<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#84634" title="unfiltered.request.HttpRequest[T]">req</a> <span title="Option[(String, Int)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#16002" title="Option[(String, Int)]">Host</a><span class="delimiter">(</span><a title="String" id="88280">hostname</a><span class="delimiter">)</span> =&gt; <a href="#88280" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">hostname</a>.<span title="(separator: Char)Array[String]">split</span><span class="delimiter">(</span><span title="Char(\':\')" class="char">':'</span><span class="delimiter">)</span> <span title="Option[(String, Int)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#88304" title="Some[(String, Int)]">Array</a><span class="delimiter">(</span><a title="String" id="88310">host</a>, <a href="../../../../util/unfiltered/util/utils.scala.html#13694" title="object unfiltered.util.Of">Of</a>.<a href="../../../../util/unfiltered/util/utils.scala.html#88321" title="(str: String)Option[Int]">Int</a><span class="delimiter">(</span><a title="Int" id="88338">port</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: (String, Int))Some[(String, Int)]">Some</span><span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#88310" title="String">host</a>, <a href="#88338" title="Int">port</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Some[(String, Int)]">_</span> =&gt; <span title="(x: (String, Int))Some[(String, Int)]">Some</span><span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#88280" title="String">hostname</a>, <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#84634" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13903" title="=&gt; Boolean">isSecure</a><span class="delimiter">)</span> <span title="Int(443)" class="int">443</span> <span class="keyword">else</span> <span title="Int(80)" class="int">80</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>