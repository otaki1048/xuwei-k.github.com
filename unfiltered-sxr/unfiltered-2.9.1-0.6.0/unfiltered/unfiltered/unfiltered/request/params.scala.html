<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>unfiltered/unfiltered/unfiltered/request/params.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">import</span> unfiltered.response.ResponseFunction
<span class="keyword">import</span> scala.util.control.<span title="object scala.util.control.Exception">Exception</span>.allCatch

<span class="comment">/** Basic parameter acess, and a pattern matching extractor in Extract. */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Params" id="10051">Params</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="scala.collection.Map[String,Seq[String]]" id="37626">Map</a> = scala.collection.<span title="scala.collection.Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="comment">/**
   * Given a req, extract the request params into a (Map[String, Seq[String]], request).
   * The Map is assigned a default value of Nil, so param(&quot;p&quot;) would return Nil if there
   * is no such parameter, or (as normal for servlets) a single empty string if the
   * parameter was supplied without a value. */</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Some[scala.collection.immutable.Map[String,Seq[String]]]" id="37627">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37629">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="39673">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterator[String]" id="39676">names</a> = <a href="#39673" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13029" title="=&gt; Iterator[String]">parameterNames</a>
    <span title="(x: scala.collection.immutable.Map[String,Seq[String]])Some[scala.collection.immutable.Map[String,Seq[String]]]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,Seq[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> <a href="#39679" title="(z: scala.collection.immutable.Map[String,Seq[String]])(op: (scala.collection.immutable.Map[String,Seq[String]], String) =&gt; scala.collection.immutable.Map[String,Seq[String]])scala.collection.immutable.Map[String,Seq[String]]">/:</a> <a href="#39676" title="Iterator[String]">names</a><span class="delimiter">)</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.collection.immutable.Map[String,Seq[String]]" id="39707">m</a>, <a title="String" id="39708">n</a><span class="delimiter">)</span> =&gt;
        <a href="#39707" title="scala.collection.immutable.Map[String,Seq[String]]">m</a> <span title="(kv: (String, Seq[String]))scala.collection.immutable.Map[String,Seq[String]]">+</span> <span class="delimiter">(</span><a href="#39708" title="(x: String)ArrowAssoc[String]">n</a> <span title="(y: Seq[String])(String, Seq[String])">-&gt;</span> <a href="#39673" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13030" title="(param: String)Seq[String]">parameterValues</a><span class="delimiter">(</span><a href="#39708" title="String">n</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(d: Seq[String])scala.collection.immutable.Map[String,Seq[String]]">withDefaultValue</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A function Seq[String] =&gt; Option[B]  used to test and transform values
   * from the parameter map. Conditions may be chained with `~&gt;` */</span>
  <span class="keyword">class</span> <a title="class ParamMapper[B] extends java.lang.Object with Seq[String] =&gt; Option[B] with ScalaObject" id="37630">ParamMapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37631">B</a><span class="delimiter">]</span><a href="#37630" title="ScalaObject" class="delimiter">(</a><a title="Seq[String] =&gt; Option[B]" id="38710">f</a>: Seq<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span class="delimiter">(</span>Seq<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(a: Seq[String])Option[B]" id="38705">apply</a><span class="delimiter">(</span><a title="Seq[String]" id="80254">a</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#38710" title="(v1: Seq[String])Option[B]">f</a><span class="delimiter">(</span><a href="#80254" title="Seq[String]">a</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[C](that: Option[B] =&gt; Option[C])unfiltered.request.Params.ParamMapper[C]" id="38706">~&gt;</a> <span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="38708">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[B] =&gt; Option[C]" id="80259">that</a>: Option<span class="delimiter">[</span>B<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>C<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="unfiltered.request.Params.ParamMapper[C]" class="keyword">new</span> <a href="#37630" title="unfiltered.request.Params.ParamMapper[C]">ParamMapper</a><span class="delimiter">(</span><span class="delimiter">{</span> <a href="#38710" title="Seq[String] =&gt; Option[B]">f</a> <span title="(g: Option[B] =&gt; Option[C])Seq[String] =&gt; Option[C]">andThen</span> <a href="#80259" title="Option[B] =&gt; Option[C]">that</a> <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Maps first parameter, if present. */</span>
  <span class="keyword">val</span> <a title="unfiltered.request.Params.ParamMapper[String]" id="37632">first</a> = <span title="unfiltered.request.Params.ParamMapper[String]" class="keyword">new</span> <a href="#37630" title="unfiltered.request.Params.ParamMapper[String]">ParamMapper</a><span class="delimiter">(</span><a href="#38713" title="Seq[String]">_</a>.<span title="=&gt; Option[String]">headOption</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Base class for parameter extractor objects, may be extended inline with
   * chained ParamMapper objects. */</span>
  <span class="keyword">class</span> <a title="class Extract[E, T] extends java.lang.Object with ScalaObject" id="37634">Extract</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37635">E</a>,<a title="&gt;: Nothing &lt;: Any" id="37636">T</a><span class="delimiter">]</span><a href="#37634" title="ScalaObject" class="delimiter">(</a><a title="unfiltered.request.Params.Map =&gt; Option[T]" id="37666">f</a>: Map =&gt; Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(name: String, f: Seq[String] =&gt; Option[T])unfiltered.request.Params.Extract[E,T]" id="37656" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="37662">name</a>: <span title="String">String</span>, <a title="Seq[String] =&gt; Option[T]" id="37663">f</a>: Seq<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#37634" title="Extract.this.type" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">{</span> params: <span title="unfiltered.request.Params.Map">Map</span> =&gt; <a href="#37663" title="(v1: Seq[String])Option[T]">f</a><span class="delimiter">(</span><a href="#80282" title="(key: String)Seq[String]">params</a><span class="delimiter">(</span><a href="#37662" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(params: unfiltered.request.Params.Map)Option[T]" id="37657">unapply</a><span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="40138">params</a>: <span title="unfiltered.request.Params.Map">Map</span><span class="delimiter">)</span> = <a href="#37666" title="(v1: unfiltered.request.Params.Map)Option[T]">f</a><span class="delimiter">(</span><a href="#40138" title="unfiltered.request.Params.Map">params</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Construct a parameter predicate */</span>
  <span class="keyword">def</span> <a title="[E, A](p: A =&gt; Boolean)Option[A] =&gt; Option[A]" id="37637">pred</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37640">E</a>,<a title="&gt;: Nothing &lt;: Any" id="37641">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; Boolean" id="57188">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a title="Option[A]" id="80310">opt</a> =&gt; <a href="#80310" title="Option[A]">opt</a> <span title="(p: A =&gt; Boolean)Option[A]">filter</span> <a href="#57188" title="A =&gt; Boolean">p</a>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Int]" id="37642">int</a><span class="delimiter">(</span><a title="Option[String]" id="80312">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#80312" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Int])Option[Int]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="80319">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Int)Option[Int]">opt</span> <span class="delimiter">{</span> <a href="#80319" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Int">toInt</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Long]" id="37643">long</a><span class="delimiter">(</span><a title="Option[String]" id="80332">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#80332" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Long])Option[Long]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="80339">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Long)Option[Long]">opt</span> <span class="delimiter">{</span> <a href="#80339" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Long">toLong</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Float]" id="37644">float</a><span class="delimiter">(</span><a title="Option[String]" id="80352">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#80352" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Float])Option[Float]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="80359">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Float)Option[Float]">opt</span> <span class="delimiter">{</span> <a href="#80359" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Float">toFloat</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Double]" id="37645">double</a><span class="delimiter">(</span><a title="Option[String]" id="80374">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#80374" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Double])Option[Double]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="80381">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Double)Option[Double]">opt</span> <span class="delimiter">{</span> <a href="#80381" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Double">toDouble</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="Option[Int] =&gt; Option[Int]" id="37646">even</a> = <a href="#37637" title="(p: Int =&gt; Boolean)Option[Int] =&gt; Option[Int]">pred</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a href="#80226" title="Int">_</a>:<span title="Int">Int</span><span class="delimiter">)</span> <span title="(x: Int)Int">%</span> <span title="Int(2)" class="int">2</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="Option[Int] =&gt; Option[Int]" id="37648">odd</a> = <a href="#37637" title="(p: Int =&gt; Boolean)Option[Int] =&gt; Option[Int]">pred</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a href="#80241" title="Int">_</a>:<span title="Int">Int</span><span class="delimiter">)</span> <span title="(x: Int)Int">%</span> <span title="Int(2)" class="int">2</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(s: Option[String])Option[java.lang.String]" id="37650">trimmed</a><span class="delimiter">(</span><a title="Option[String]" id="80396">s</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#80396" title="Option[String]">s</a> <span title="(f: String =&gt; java.lang.String)Option[java.lang.String]">map</span> <span class="delimiter">{</span> <a href="#80403" title="String">_</a>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="Option[String] =&gt; Option[String]" id="37651">nonempty</a> = <a href="#37637" title="(p: String =&gt; Boolean)Option[String] =&gt; Option[String]">pred</a> <span class="delimiter">{</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#57195" title="String">_</a>:<span title="String">String</span><span class="delimiter">)</span>.<span title="()Boolean">isEmpty</span> <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Fined-grained error reporting for arbitrarily many failing parameters.
 * Import QParams._ to use; see ParamsSpec for examples. */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.QParams" id="9553">QParams</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="[E]List[unfiltered.request.QParams.Fail[E]]" id="56835">Log</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56836">E</a><span class="delimiter">]</span> = <span title="List[unfiltered.request.QParams.Fail[E]]">List</span><span class="delimiter">[</span>Fail<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="[E, A](unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], A)" id="56837">QueryFn</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56838">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56839">A</a><span class="delimiter">]</span> = <span class="delimiter">(</span>Params.Map, Option<span class="delimiter">[</span>String<span class="delimiter">]</span>, Log<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
    <span class="delimiter">(</span>Option<span class="delimiter">[</span>String<span class="delimiter">]</span>, Log<span class="delimiter">[</span>E<span class="delimiter">]</span>, A<span class="delimiter">)</span>
  <span class="keyword">type</span> <a title="[E, A]Either[unfiltered.request.QParams.Log[E],A]" id="56840">QueryResult</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56841">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56842">A</a><span class="delimiter">]</span> = <span title="Either[unfiltered.request.QParams.Log[E],A]">Either</span><span class="delimiter">[</span>Log<span class="delimiter">[</span>E<span class="delimiter">]</span>, A<span class="delimiter">]</span>
  <span class="comment">/** Left if the query has failed, right if it has not (but may be empty) */</span>
  <span class="keyword">type</span> <a title="[E, A]Either[E,Option[A]]" id="56843">Report</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56844">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56845">A</a><span class="delimiter">]</span> = <span title="Either[E,Option[A]]">Either</span><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="[E, A, B]Option[A] =&gt; unfiltered.request.QParams.Report[E,B]" id="56846">Reporter</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56847">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56848">A</a>,<a title="&gt;: Nothing &lt;: Any" id="56849">B</a><span class="delimiter">]</span> = Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Report<span class="delimiter">[</span>E,B<span class="delimiter">]</span>

  case <span class="keyword">class</span> <a title="class Fail[E] extends java.lang.Object with ScalaObject with Product with Serializable" id="81023">Fail</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="57795">E</a><span class="delimiter">]</span><a href="#81023" title="ScalaObject" class="delimiter">(</a><a title="String" id="80720">name</a>: <span title="String">String</span>, <a title="E" id="80721">error</a>: <a href="#57795" title="E">E</a><span class="delimiter">)</span>

  <span class="comment">/* Implicitly provide 'orFail' for QueryResult (either) type. */</span>
  case <span class="keyword">class</span> <a title="class QueryResultX[E, A] extends java.lang.Object with ScalaObject with Product with Serializable" id="81017">QueryResultX</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="80498">E</a>,<a title="&gt;: Nothing &lt;: Any" id="80499">A</a><span class="delimiter">]</span><a href="#81017" title="ScalaObject" class="delimiter">(</a><a title="unfiltered.request.QParams.QueryResult[E,A]" id="80537">r</a>: <span title="unfiltered.request.QParams.QueryResult[E,A]">QueryResult</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[B &gt;: A](handler: unfiltered.request.QParams.Log[E] =&gt; B)B" id="57628">orFail</a><span class="delimiter">[</span><a title="&gt;: A &lt;: Any" id="57630">B</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.QParams.Log[E] =&gt; B" id="57638">handler</a>: Log<span class="delimiter">[</span>E<span class="delimiter">]</span> =&gt; B<span class="delimiter">)</span> =
      <a href="#80537" title="=&gt; unfiltered.request.QParams.QueryResult[E,A]">r</a>.<span title="=&gt; Either.LeftProjection[unfiltered.request.QParams.Log[E],A]">left</span>.<span title="(f: unfiltered.request.QParams.Log[E] =&gt; B)Product with Either[B,A] with Serializable">map</span><span class="delimiter">(</span><a href="#57638" title="unfiltered.request.QParams.Log[E] =&gt; B">handler</a><span class="delimiter">)</span> <span title="B" class="keyword">match</span> <span class="delimiter">{</span> <span class="comment">// i.e. .merge, in 2.8</span>
        <span class="keyword">case</span> <span title="B">Left</span><span class="delimiter">(</span><a title="B" id="57688">v</a><span class="delimiter">)</span> =&gt; <a href="#57688" title="B">v</a>
        <span class="keyword">case</span> <span title="A">Right</span><span class="delimiter">(</span><a title="A" id="57726">v</a><span class="delimiter">)</span> =&gt; <a href="#57726" title="A">v</a>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[E, A](r: unfiltered.request.QParams.QueryResult[E,A])unfiltered.request.QParams.QueryResultX[E,A]" id="56859">queryOrElse</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56862">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56863">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.QParams.QueryResult[E,A]" id="56951">r</a>: <span title="unfiltered.request.QParams.QueryResult[E,A]">QueryResult</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#81017" title="unfiltered.request.QParams.QueryResultX[E,A]">QueryResultX</a><span class="delimiter">[</span>E,A<span class="delimiter">]</span> =
    <a href="#81017" title="(r: unfiltered.request.QParams.QueryResult[E,A])unfiltered.request.QParams.QueryResultX[E,A]">QueryResultX</a><span class="delimiter">(</span><a href="#56951" title="unfiltered.request.QParams.QueryResult[E,A]">r</a><span class="delimiter">)</span>

  <span class="comment">/* The query-building monad, a variant of state-transformer. */</span>
  case <span class="keyword">class</span> <a title="class QueryM[E, A] extends java.lang.Object with ScalaObject with Product with Serializable" id="81012">QueryM</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="80552">E</a>,<a title="&gt;: Nothing &lt;: Any" id="80553">A</a><span class="delimiter">]</span><a href="#81012" title="ScalaObject" class="delimiter">(</a><a title="(unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], A)" id="80559">exec</a>: <span title="(unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], A)">QueryFn</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[B](f: A =&gt; unfiltered.request.QParams.QueryM[E,B])unfiltered.request.QParams.QueryM[E,B]" id="57151">flatMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="57153">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; unfiltered.request.QParams.QueryM[E,B]" id="57218">f</a>: A =&gt; QueryM<span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,B]">QueryM</a><span class="delimiter">[</span>E,B<span class="delimiter">]</span> =
      <a href="#81012" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], B))unfiltered.request.QParams.QueryM[E,B]">QueryM</a> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="80566">params</a>, <a title="Option[String]" id="80567">key0</a>, <a title="unfiltered.request.QParams.Log[E]" id="80568">log0</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#80570" title="(Option[String], unfiltered.request.QParams.Log[E], A)" class="delimiter">(</a><a href="#80569" title="Option[String]" id="80570">key1</a>, <a href="#80569" title="unfiltered.request.QParams.Log[E]" id="80571">log1</a>, <a href="#80569" title="A" id="80572">value</a><span class="delimiter">)</span> = <a href="#80559" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span title="(Option[String], unfiltered.request.QParams.Log[E], A) @unchecked" class="delimiter">(</span><a href="#80566" title="unfiltered.request.Params.Map">params</a>, <a href="#80567" title="Option[String]">key0</a>, <a href="#80568" title="unfiltered.request.QParams.Log[E]">log0</a><span class="delimiter">)</span>
          <a href="#57218" title="(v1: A)unfiltered.request.QParams.QueryM[E,B]">f</a><span class="delimiter">(</span><a href="#80572" title="A">value</a><span class="delimiter">)</span>.<a href="#80559" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], B)">exec</a><span class="delimiter">(</span><a href="#80566" title="unfiltered.request.Params.Map">params</a>, <a href="#80570" title="Option[String]">key1</a>, <a href="#80571" title="unfiltered.request.QParams.Log[E]">log1</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/* Compose monads, ignoring value of this. */</span>
    <span class="keyword">def</span> <a title="[B](that: unfiltered.request.QParams.QueryM[E,B])unfiltered.request.QParams.QueryM[E,B]" id="57154">andThen</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="57156">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.QParams.QueryM[E,B]" id="80614">that</a>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,B]">QueryM</a><span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,B]">QueryM</a><span class="delimiter">[</span>E,B<span class="delimiter">]</span> =
      <a href="#57151" title="(f: A =&gt; unfiltered.request.QParams.QueryM[E,B])unfiltered.request.QParams.QueryM[E,B]">flatMap</a><span class="delimiter">(</span><a title="A" id="80620">_</a> =&gt; <a href="#80614" title="unfiltered.request.QParams.QueryM[E,B]">that</a><span class="delimiter">)</span>

    <span class="comment">/* This map is not defined as flatMap(unit(f(_))), as expected.
       If any errors have been accumulated, it does NOT run the
       query function. */</span>
    <span class="keyword">def</span> <a title="[B](f: A =&gt; B)unfiltered.request.QParams.QueryM[E,unfiltered.request.QParams.QueryResult[E,B]]" id="57157">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="57159">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; B" id="57382">f</a>: A =&gt; B<span class="delimiter">)</span>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,unfiltered.request.QParams.QueryResult[E,B]]">QueryM</a><span class="delimiter">[</span>E,QueryResult<span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#81012" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], unfiltered.request.QParams.QueryResult[E,B]))unfiltered.request.QParams.QueryM[E,unfiltered.request.QParams.QueryResult[E,B]]">QueryM</a> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="80626">params</a>, <a title="Option[String]" id="80627">key0</a>, <a title="unfiltered.request.QParams.Log[E]" id="80628">log0</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#80630" title="(Option[String], unfiltered.request.QParams.Log[E], A)" class="delimiter">(</a><a href="#80629" title="Option[String]" id="80630">key1</a>, <a href="#80629" title="unfiltered.request.QParams.Log[E]" id="80631">log1</a>, <a href="#80629" title="A" id="80632">value</a><span class="delimiter">)</span> = <a href="#80559" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span title="(Option[String], unfiltered.request.QParams.Log[E], A) @unchecked" class="delimiter">(</span><a href="#80626" title="unfiltered.request.Params.Map">params</a>, <a href="#80627" title="Option[String]">key0</a>, <a href="#80628" title="unfiltered.request.QParams.Log[E]">log0</a><span class="delimiter">)</span>
          <span title="(_1: Option[String], _2: unfiltered.request.QParams.Log[E], _3: unfiltered.request.QParams.QueryResult[E,B])(Option[String], unfiltered.request.QParams.Log[E], unfiltered.request.QParams.QueryResult[E,B])" class="delimiter">(</span><a href="#80630" title="Option[String]">key1</a>, <a href="#80631" title="unfiltered.request.QParams.Log[E]">log1</a>, <a href="#80631" title="unfiltered.request.QParams.Log[E]">log1</a> <span title="unfiltered.request.QParams.QueryResult[E,B]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Right[Nothing,B]">Nil</span> =&gt; <span title="(b: B)Right[Nothing,B]">Right</span><span class="delimiter">(</span><a href="#57382" title="(v1: A)B">f</a><span class="delimiter">(</span><a href="#80632" title="A">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Left[List[unfiltered.request.QParams.Fail[E]],Nothing]">_</span> =&gt; <span title="(a: List[unfiltered.request.QParams.Fail[E]])Left[List[unfiltered.request.QParams.Fail[E]],Nothing]">Left</span><span class="delimiter">(</span><a href="#80631" title="unfiltered.request.QParams.Log[E]">log1</a>.<span title="=&gt; List[unfiltered.request.QParams.Fail[E]]">reverse</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/* Combinator for filtering the value and tagging errors. */</span>
    <span class="keyword">def</span> <a title="[B](f: A =&gt; unfiltered.request.QParams.Report[E,B])unfiltered.request.QParams.QueryM[E,Option[B]]" id="57160">is</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="57162">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; unfiltered.request.QParams.Report[E,B]" id="57169">f</a>: A =&gt; Report<span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,Option[B]]">QueryM</a><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#81012" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], Option[B]))unfiltered.request.QParams.QueryM[E,Option[B]]">QueryM</a> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="80677">params</a>, <a title="Option[String]" id="80678">key0</a>, <a title="unfiltered.request.QParams.Log[E]" id="80679">log0</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#80681" title="(Option[String], unfiltered.request.QParams.Log[E], A)" class="delimiter">(</a><a href="#80680" title="Option[String]" id="80681">key1</a>, <a href="#80680" title="unfiltered.request.QParams.Log[E]" id="80682">log1</a>, <a href="#80680" title="A" id="80683">value</a><span class="delimiter">)</span> = <a href="#80559" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span title="(Option[String], unfiltered.request.QParams.Log[E], A) @unchecked" class="delimiter">(</span><a href="#80677" title="unfiltered.request.Params.Map">params</a>, <a href="#80678" title="Option[String]">key0</a>, <a href="#80679" title="unfiltered.request.QParams.Log[E]">log0</a><span class="delimiter">)</span>
          <a href="#80681" title="Option[String]">key1</a> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], None.type)">None</span> =&gt; <span title="(_1: Option[String], _2: unfiltered.request.QParams.Log[E], _3: None.type)(Option[String], unfiltered.request.QParams.Log[E], None.type)" class="delimiter">(</span><a href="#80681" title="Option[String]">key1</a>, <a href="#80682" title="unfiltered.request.QParams.Log[E]">log1</a>, <span title="object None">None</span><span class="delimiter">)</span> <span class="comment">// do not record error</span>
            <span class="keyword">case</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])">Some</span><span class="delimiter">(</span><a title="String" id="80709">k</a><span class="delimiter">)</span> =&gt;
              <a href="#57169" title="(v1: A)unfiltered.request.QParams.Report[E,B]">f</a><span class="delimiter">(</span><a href="#80683" title="A">value</a><span class="delimiter">)</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="(None.type, List[unfiltered.request.QParams.Fail[E]], None.type)">Left</span><span class="delimiter">(</span><a title="E" id="80712">err</a><span class="delimiter">)</span> =&gt; <span title="(_1: None.type, _2: List[unfiltered.request.QParams.Fail[E]], _3: None.type)(None.type, List[unfiltered.request.QParams.Fail[E]], None.type)" class="delimiter">(</span><span title="object None">None</span>, <a href="#81023" title="(name: String, error: E)unfiltered.request.QParams.Fail[E]">Fail</a><span class="delimiter">(</span><a href="#80709" title="String">k</a>,<a href="#80712" title="E">err</a><span class="delimiter">)</span><a href="#80719" title="(x: unfiltered.request.QParams.Fail[E])List[unfiltered.request.QParams.Fail[E]]">::</a><a href="#80682" title="unfiltered.request.QParams.Log[E]">log1</a>, <span title="object None">None</span><span class="delimiter">)</span> <span class="comment">// do record</span>
                <span class="keyword">case</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])">Right</span><span class="delimiter">(</span><a title="Option[B]" id="80739">v</a><span class="delimiter">)</span> =&gt; <span title="(_1: Option[String], _2: unfiltered.request.QParams.Log[E], _3: Option[B])(Option[String], unfiltered.request.QParams.Log[E], Option[B])" class="delimiter">(</span><a href="#80681" title="Option[String]">key1</a>, <a href="#80682" title="unfiltered.request.QParams.Log[E]">log1</a>, <a href="#80739" title="Option[B]">v</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(params: unfiltered.request.Params.Map)A" id="57163">apply</a><span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="57549">params</a>: Params.<span title="unfiltered.request.Params.Map">Map</span><span class="delimiter">)</span> = <a href="#80559" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span class="delimiter">(</span><a href="#57549" title="unfiltered.request.Params.Map">params</a>, <span title="object None">None</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span>.<span title="=&gt; A">_3</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Create a validion token from a named value from the input Params.Map */</span>
  <span class="keyword">def</span> <a title="[E](key: String)unfiltered.request.QParams.QueryM[E,Option[String]]" id="56869">lookup</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56871">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="57144">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,Option[String]]">QueryM</a><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#81012" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], Option[String]))unfiltered.request.QParams.QueryM[E,Option[String]]">QueryM</a> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="80802">params</a>, <a title="Option[String]" id="80803">_</a>, <a title="unfiltered.request.QParams.Log[E]" id="80804">log0</a><span class="delimiter">)</span> =&gt;
        <span title="(_1: Some[String], _2: unfiltered.request.QParams.Log[E], _3: Option[String])(Some[String], unfiltered.request.QParams.Log[E], Option[String])" class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#57144" title="String">key</a><span class="delimiter">)</span>, <a href="#80804" title="unfiltered.request.QParams.Log[E]">log0</a>, <a href="#80802" title="unfiltered.request.Params.Map">params</a>.<span title="(key: String)Option[Seq[String]]">get</span><span class="delimiter">(</span><a href="#57144" title="String">key</a><span class="delimiter">)</span>.<span title="(f: Seq[String] =&gt; Option[String])Option[String]">flatMap</span> <span class="delimiter">{</span> <a href="#80829" title="Seq[String]">_</a>.<span title="=&gt; Option[String]">headOption</span> <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/** Create and name a validation token for an external input */</span>
  <span class="keyword">def</span> <a title="[E, A](key: String, value: Option[A])unfiltered.request.QParams.QueryM[E,Option[A]]" id="56872">external</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56875">E</a>, <a title="&gt;: Nothing &lt;: Any" id="56876">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="80835">key</a>: <span title="String">String</span>, <a title="Option[A]" id="80836">value</a>: <span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#81012" title="unfiltered.request.QParams.QueryM[E,Option[A]]">QueryM</a><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#81012" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], Option[A]))unfiltered.request.QParams.QueryM[E,Option[A]]">QueryM</a> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="80844">params</a>, <a title="Option[String]" id="80845">_</a>, <a title="unfiltered.request.QParams.Log[E]" id="80846">log0</a><span class="delimiter">)</span> =&gt;
        <span title="(_1: Some[String], _2: unfiltered.request.QParams.Log[E], _3: Option[A])(Some[String], unfiltered.request.QParams.Log[E], Option[A])" class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#80835" title="String">key</a><span class="delimiter">)</span>, <a href="#80846" title="unfiltered.request.QParams.Log[E]">log0</a>, <a href="#80836" title="Option[A]">value</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/* Functions that are useful arguments to QueryM.is */</span>
  <span class="keyword">def</span> <a title="[E, A](err: E)Option[A] =&gt; unfiltered.request.QParams.Report[E,A]" id="56877">required</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56880">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56881">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E" id="57210">err</a>:<a href="#56880" title="E">E</a><span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">Reporter</span><span class="delimiter">[</span>E,A,A<span class="delimiter">]</span> = <a href="#80870" title="unfiltered.request.QParams.Report[E,A]" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Left[E,Nothing]">None</span> =&gt; <span title="(a: E)Left[E,Nothing]">Left</span><span class="delimiter">(</span><a href="#57210" title="E">err</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Right[Nothing,Option[A]]" id="80875">oa</a> =&gt; <span title="(b: Option[A])Right[Nothing,Option[A]]">Right</span><span class="delimiter">(</span><a href="#80875" title="Option[A]">oa</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[E, A](xs: Option[A])unfiltered.request.QParams.Report[E,Option[A]]" id="56882">optional</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56885">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56886">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A]" id="57359">xs</a>: <span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="unfiltered.request.QParams.Report[E,Option[A]]">Report</span><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
    <span title="(b: Some[Option[A]])Right[Nothing,Some[Option[A]]]">Right</span><span class="delimiter">(</span><span title="(x: Option[A])Some[Option[A]]">Some</span><span class="delimiter">(</span><a href="#57359" title="Option[A]">xs</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** Promote c to an error reporter that fails if Some input is discarded */</span>
  <span class="keyword">def</span> <a title="[E, A, B](c: Option[A] =&gt; Option[B], err: A =&gt; E)Option[A] =&gt; unfiltered.request.QParams.Report[E,B]" id="56887">watch</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56891">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56892">A</a>,<a title="&gt;: Nothing &lt;: Any" id="56893">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A] =&gt; Option[B]" id="57178">c</a>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>B<span class="delimiter">]</span>, <a title="A =&gt; E" id="57179">err</a>: A =&gt; E<span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,B]">Reporter</span><span class="delimiter">[</span>E,A,B<span class="delimiter">]</span> = <a href="#80888" title="unfiltered.request.QParams.Report[E,B]" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Right[Nothing,None.type]">None</span> =&gt; <span title="(b: None.type)Right[Nothing,None.type]">Right</span><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="&lt;none&gt; extends Product with Serializable with Either[E,Some[B]]">Some</span><span class="delimiter">(</span><a title="A" id="80894">a</a><span class="delimiter">)</span> =&gt; <a href="#57178" title="(v1: Option[A])Option[B]">c</a><span class="delimiter">(</span><span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#80894" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: B =&gt; Right[Nothing,Some[B]])Option[Right[Nothing,Some[B]]]">map</span> <span class="delimiter">{</span> <a title="B" id="80903">b</a> =&gt; <span title="(b: Some[B])Right[Nothing,Some[B]]">Right</span><span class="delimiter">(</span><span title="(x: B)Some[B]">Some</span><span class="delimiter">(</span><a href="#80903" title="B">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(default: =&gt; Product with Serializable with Either[E,Some[B]])Product with Serializable with Either[E,Some[B]]">getOrElse</span> <span title="(a: E)Left[E,Nothing]">Left</span><span class="delimiter">(</span><a href="#57179" title="(v1: A)E">err</a><span class="delimiter">(</span><a href="#80894" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Convert a predicate into an error reporter */</span>
  <span class="keyword">def</span> <a title="[E, A](p: A =&gt; Boolean, err: A =&gt; E)Option[A] =&gt; unfiltered.request.QParams.Report[E,A]" id="56894">pred</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56897">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56898">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; Boolean" id="57335">p</a>: A =&gt; Boolean, <a title="A =&gt; E" id="57336">err</a>: A =&gt; E<span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">Reporter</span><span class="delimiter">[</span>E,A,A<span class="delimiter">]</span> =
    <a href="#56887" title="(c: Option[A] =&gt; Option[A], err: A =&gt; E)Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">watch</a><span class="delimiter">(</span><span class="delimiter">{</span><a href="#80940" title="Option[A]">_</a> <span title="(p: A =&gt; Boolean)Option[A]">filter</span> <a href="#57335" title="A =&gt; Boolean">p</a><span class="delimiter">}</span>, <a href="#57336" title="A =&gt; E">err</a><span class="delimiter">)</span>

  <span class="comment">/** Convert f into an error reporter that never reports errors */</span>
  <span class="keyword">def</span> <a title="[E, A](f: Option[A] =&gt; Option[A])Option[A] =&gt; unfiltered.request.QParams.Report[E,A]" id="56899">ignore</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56902">E</a>,<a title="&gt;: Nothing &lt;: Any" id="56903">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A] =&gt; Option[A]" id="80944">f</a>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">Reporter</span><span class="delimiter">[</span>E,A,A<span class="delimiter">]</span> =
    <a title="Option[A]" id="80948">opt</a> =&gt; <span title="(b: Option[A])Right[Nothing,Option[A]]">Right</span><span class="delimiter">(</span><a href="#80944" title="(v1: Option[A])Option[A]">f</a><span class="delimiter">(</span><a href="#80948" title="Option[A]">opt</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[E](e: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Int]" id="56904">int</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56906">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String =&gt; E" id="80954">e</a>: String =&gt; E<span class="delimiter">)</span> = <a href="#56887" title="(c: Option[String] =&gt; Option[Int], err: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Int]">watch</a><span class="delimiter">(</span><a href="#10051" title="object unfiltered.request.Params">Params</a>.<a href="#37642" title="(os: Option[String])Option[Int]">int</a>, <a href="#80954" title="String =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Long]" id="56907">long</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56909">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String =&gt; E" id="80967">e</a>: String =&gt; E<span class="delimiter">)</span> = <a href="#56887" title="(c: Option[String] =&gt; Option[Long], err: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Long]">watch</a><span class="delimiter">(</span><a href="#10051" title="object unfiltered.request.Params">Params</a>.<a href="#37643" title="(os: Option[String])Option[Long]">long</a>, <a href="#80967" title="String =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]" id="56910">even</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56912">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int =&gt; E" id="80980">e</a>: Int =&gt; E<span class="delimiter">)</span> = <a href="#56887" title="(c: Option[Int] =&gt; Option[Int], err: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]">watch</a><span class="delimiter">(</span><a href="#10051" title="object unfiltered.request.Params">Params</a>.<a href="#37646" title="=&gt; Option[Int] =&gt; Option[Int]">even</a>, <a href="#80980" title="Int =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]" id="56913">odd</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56915">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int =&gt; E" id="80991">e</a>: Int =&gt; E<span class="delimiter">)</span> = <a href="#56887" title="(c: Option[Int] =&gt; Option[Int], err: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]">watch</a><span class="delimiter">(</span><a href="#10051" title="object unfiltered.request.Params">Params</a>.<a href="#37648" title="=&gt; Option[Int] =&gt; Option[Int]">odd</a>, <a href="#80991" title="Int =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E]=&gt; Option[String] =&gt; unfiltered.request.QParams.Report[E,String]" id="56916">trimmed</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56918">E</a><span class="delimiter">]</span> = <a href="#56899" title="[E, A](f: Option[A] =&gt; Option[A])Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">ignore</a><span title="(f: Option[String] =&gt; Option[String])Option[String] =&gt; unfiltered.request.QParams.Report[E,String]" class="delimiter">[</span><a href="#56918" title="E">E</a>,<span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#10051" title="object unfiltered.request.Params">Params</a>.<a href="#37650" title="(s: Option[String])Option[java.lang.String]">trimmed</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: E)Option[String] =&gt; unfiltered.request.QParams.Report[E,String]" id="56919">nonempty</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="56921">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E" id="57175">e</a>: <a href="#56921" title="E">E</a><span class="delimiter">)</span> = <a href="#56887" title="(c: Option[String] =&gt; Option[String], err: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,String]">watch</a><span class="delimiter">(</span><a href="#10051" title="object unfiltered.request.Params">Params</a>.<a href="#37651" title="=&gt; Option[String] =&gt; Option[String]">nonempty</a>, <span class="delimiter">(</span>s: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#57175" title="E">e</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>