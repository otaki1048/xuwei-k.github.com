<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>unfiltered/unfiltered/unfiltered/request/headers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">trait</span> <a title="trait DateParser extends java.lang.Object with String =&gt; java.util.Date" id="9822">DateParser</a> <span class="keyword">extends</span> <span class="delimiter">(</span>String =&gt; java.util.Date<span class="delimiter">)</span>

<span class="keyword">object</span> <a title="object unfiltered.request.DateFormatting" id="9847">DateFormatting</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> java.text.SimpleDateFormat
  <span class="keyword">import</span> java.util.<span class="delimiter">{</span> Date, Locale, TimeZone <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(date: java.util.Date)java.lang.String" id="78638">format</a><span class="delimiter">(</span><a title="java.util.Date" id="78832">date</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> =
    <a href="#78835" title="java.text.SimpleDateFormat" class="keyword">new</a> <a title="anonymous class $anon extends java.text.SimpleDateFormat" id="78835">SimpleDateFormat</a><span class="delimiter">(</span><span title="java.lang.String(&quot;E, dd MMM yyyy HH:mm:ss z&quot;)" class="string">&quot;E, dd MMM yyyy HH:mm:ss z&quot;</span>, <span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#78835" title="(x$1: java.util.TimeZone)Unit">setTimeZone</a><span class="delimiter">(</span><span title="object java.util.TimeZone">TimeZone</span>.<span title="(x$1: java.lang.String)java.util.TimeZone">getTimeZone</span><span class="delimiter">(</span><span title="java.lang.String(&quot;GMT&quot;)" class="string">&quot;GMT&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#78832" title="java.util.Date">date</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(fmt: String)(value: String)Option[java.util.Date]" id="78639">parseAs</a><span class="delimiter">(</span><a title="String" id="78650">fmt</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="String" id="78651">value</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[java.util.Date]">Option</span><span class="delimiter">[</span>Date<span class="delimiter">]</span> =
    <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: java.util.Date)Some[java.util.Date]">Some</span><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: java.util.Locale)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><a href="#78650" title="String">fmt</a>, <span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">US</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#78651" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>

  <span class="comment">/** Preferred HTTP date format Sun, 06 Nov 1994 08:49:37 GMT */</span>
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="78640">RFC1123</a> = <a href="#78639" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#78654" title="String" class="delimiter">(</a><span title="java.lang.String(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;)" class="string">&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;</span><span class="delimiter">)</span>_

  <span class="comment">/** Sunday, 06-Nov-94 08:49:37 GMT */</span>
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="78641">RFC1036</a> = <a href="#78639" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#78664" title="String" class="delimiter">(</a><span title="java.lang.String(&quot;EEEEEE, dd-MMM-yy HH:mm:ss z&quot;)" class="string">&quot;EEEEEE, dd-MMM-yy HH:mm:ss z&quot;</span><span class="delimiter">)</span>_

  <span class="comment">/** Sun Nov  6 08:49:37 1994 */</span>
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="78642">ANSICTime</a> = <a href="#78639" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#78672" title="String" class="delimiter">(</a><span title="java.lang.String(&quot;EEE MMM  d HH:mm:ss yyyy&quot;)" class="string">&quot;EEE MMM  d HH:mm:ss yyyy&quot;</span><span class="delimiter">)</span>_

  <span class="comment">/** @return various date coersion formats falling back on None value */</span>
  <span class="keyword">def</span> <a title="(raw: String)Option[java.util.Date]" id="78643">parseDate</a><span class="delimiter">(</span><a title="String" id="78644">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#78640" title="(v1: String)Option[java.util.Date]">RFC1123</a><span class="delimiter">(</span><a href="#78644" title="String">raw</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[java.util.Date])Option[java.util.Date]">orElse</span> <a href="#78641" title="(v1: String)Option[java.util.Date]">RFC1036</a><span class="delimiter">(</span><a href="#78644" title="String">raw</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[java.util.Date])Option[java.util.Date]">orElse</span> <a href="#78642" title="(v1: String)Option[java.util.Date]">ANSICTime</a><span class="delimiter">(</span><a href="#78644" title="String">raw</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** A header with values mapped to keys in a Map. */</span>
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class MappedRequestHeader[A, B] extends java.lang.Object with ScalaObject" id="10326">MappedRequestHeader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="12702">A</a>, <a title="&gt;: Nothing &lt;: Any" id="12703">B</a><span class="delimiter">]</span><a href="#10326" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="77977">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; Map[A,B]" id="77978">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Map<span class="delimiter">[</span>A, B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Some[Map[A,B]]" id="77969">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="77971">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="78876">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#77978" title="(v1: Iterator[String])Map[A,B]">parser</a><span class="delimiter">(</span><a href="#78876" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#77977" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Some[Map[A,B]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Some[Map[A,B]]" id="78880">hs</a> =&gt; <span title="(x: Map[A,B])Some[Map[A,B]]">Some</span><span class="delimiter">(</span><a href="#78880" title="Map[A,B]">hs</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Map[A,B]" id="77972">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="77974">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="78894">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#77978" title="(v1: Iterator[String])Map[A,B]">parser</a><span class="delimiter">(</span><a href="#78894" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#77977" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** A header with comma delimited values. Implementations of this extractor
 * will not match requests for which the header `name` is not present.*/</span>
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class SeqRequestHeader[T] extends java.lang.Object with ScalaObject" id="10170">SeqRequestHeader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="12704">T</a><span class="delimiter">]</span><a href="#10170" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="39505">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; List[T]" id="39506">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[List[T]]" id="39497">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39499">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="39517">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#39506" title="(v1: Iterator[String])List[T]">parser</a><span class="delimiter">(</span><a href="#39517" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#39505" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Option[List[T]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="None.type">Nil</span> =&gt; <span title="object None">None</span>
    <span class="keyword">case</span> <a title="Some[List[T]]" id="39521">hs</a> =&gt; <span title="(x: List[T])Some[List[T]]">Some</span><span class="delimiter">(</span><a href="#39521" title="List[T]">hs</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])List[T]" id="39500">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39502">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="50699">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#39506" title="(v1: Iterator[String])List[T]">parser</a><span class="delimiter">(</span><a href="#50699" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#39505" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** A header with a single value. Implementations of this extractor
 * will not match requests for which the header `name` is not present.*/</span>
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RequestHeader[A] extends java.lang.Object with ScalaObject" id="9996">RequestHeader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="12705">A</a><span class="delimiter">]</span><a href="#9996" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="15165">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; List[A]" id="15166">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[A]" id="15157">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="15159">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="15405">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =  <a href="#15166" title="(v1: Iterator[String])List[A]">parser</a><span class="delimiter">(</span><a href="#15405" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#15165" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Option[A]" class="keyword">match</span> <span class="delimiter">{</span>
     <span class="keyword">case</span> <a title="Some[A]" id="18621">head</a> :: _ =&gt; <span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#18621" title="A">head</a><span class="delimiter">)</span>
     <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
   <span class="delimiter">}</span>
   <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[A]" id="15160">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="15162">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="43280">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#15166" title="(v1: Iterator[String])List[A]">parser</a><span class="delimiter">(</span><a href="#43280" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#15165" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[A]">headOption</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.DateValueParser" id="9661">DateValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>java.util.Date<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#9847" title="object unfiltered.request.DateFormatting">DateFormatting</a>._
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[java.util.Date]" id="43274">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="78905">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#78905" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.util.Date])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.util.Date,List[java.util.Date]])List[java.util.Date]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.util.Date,List[java.util.Date]]" class="delimiter">(</span><a href="#78643" title="(xo: Option[java.util.Date])Iterable[java.util.Date]">parseDate</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.IntValueParser" id="9544">IntValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="(raw: String)Option[Int]" id="79003">tryInt</a><span class="delimiter">(</span><a title="String" id="79006">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#79006" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">raw</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>
   <span class="keyword">def</span> <a title="(values: Iterator[String])List[Int]" id="79004">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="79026">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
     <a href="#79026" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[Int])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],Int,List[Int]])List[Int]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Int,List[Int]]" class="delimiter">(</span><a href="#79003" title="(xo: Option[Int])Iterable[Int]">tryInt</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.StringValueParser" id="10012">StringValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="15399">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="79124">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#79124" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.UriValueParser" id="9787">UriValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>java.net.URI<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(raw: String)Option[java.net.URI]" id="79129">toUri</a><span class="delimiter">(</span><a title="String" id="79132">raw</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: java.net.URI)Some[java.net.URI]">Some</span><span class="delimiter">(</span><span title="java.net.URI" class="keyword">new</span> java.net.<span title="java.net.URI">URI</span><span class="delimiter">(</span><a href="#79132" title="String">raw</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(values: Iterator[String])List[java.net.URI]" id="79130">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="79151">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#79151" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.net.URI])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.net.URI,List[java.net.URI]])List[java.net.URI]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.net.URI,List[java.net.URI]]" class="delimiter">(</span><a href="#79129" title="(xo: Option[java.net.URI])Iterable[java.net.URI]">toUri</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.request.SeqValueParser" id="9730">SeqValueParser</a> <span title="ScalaObject" class="keyword">extends</span> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="39511">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="79249">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
     <span class="keyword">def</span> <a title="(raw: String)List[String]" id="79253">split</a><span class="delimiter">(</span><a title="String" id="79254">raw</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
       <span class="delimiter">(</span><a href="#79254" title="String">raw</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span> <span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</span> <span class="delimiter">{</span>
         <a href="#79702" title="java.lang.String">_</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</span>.<span title="(p: Char =&gt; Boolean)String">takeWhile</span> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">{</span> <a href="#79781" title="Char">_</a> <span title="(x: Char)Boolean">!=</span> <span title="Char(\';\')" class="char">';'</span> <span class="delimiter">}</span> <span title="=&gt; String">mkString</span>
       <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
     <a href="#79249" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#79253" title="(raw: String)List[String]">split</a><span class="delimiter">)</span>
   <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Header whose value should be a date and time. Parsing is attempted
 * for formats defined in the DateFormatting object, in this order:
 * RFC1123, RFC1036,  ANSICTime. */</span>
<span class="keyword">class</span> <a title="class DateHeader extends unfiltered.request.RequestHeader[java.util.Date] with ScalaObject" id="9879">DateHeader</a><a href="#9879" title="ScalaObject" class="delimiter">(</a><a title="String" id="80053">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9996" title="unfiltered.request.RequestHeader[java.util.Date]">RequestHeader</a><span class="delimiter">(</span><a href="#80053" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9661" title="object unfiltered.request.DateValueParser">DateValueParser</a><span class="delimiter">)</span>
<span class="comment">/** A repeatable header may be specified in more than one header k-v pair and
 *  whose values are a list delimited by comma
 *  see also http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2 */</span>
<span class="keyword">class</span> <a title="class RepeatableHeader extends unfiltered.request.SeqRequestHeader[String] with ScalaObject" id="9555">RepeatableHeader</a><a href="#9555" title="ScalaObject" class="delimiter">(</a><a title="String" id="80064">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10170" title="unfiltered.request.SeqRequestHeader[String]">SeqRequestHeader</a><span class="delimiter">(</span><a href="#80064" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9730" title="object unfiltered.request.SeqValueParser">SeqValueParser</a><span class="delimiter">)</span>
<span class="comment">/** Header whose value should be a valid URI. */</span>
<span class="keyword">class</span> <a title="class UriHeader extends unfiltered.request.RequestHeader[java.net.URI] with ScalaObject" id="9711">UriHeader</a><a href="#9711" title="ScalaObject" class="delimiter">(</a><a title="String" id="80084">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9996" title="unfiltered.request.RequestHeader[java.net.URI]">RequestHeader</a><span class="delimiter">(</span><a href="#80084" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9787" title="object unfiltered.request.UriValueParser">UriValueParser</a><span class="delimiter">)</span>
<span class="comment">/** Header whose value can be any string. */</span>
<span class="keyword">class</span> <a title="class StringHeader extends unfiltered.request.RequestHeader[String] with ScalaObject" id="9720">StringHeader</a><a href="#9720" title="ScalaObject" class="delimiter">(</a><a title="String" id="49418">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9996" title="unfiltered.request.RequestHeader[String]">RequestHeader</a><span class="delimiter">(</span><a href="#49418" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#10012" title="object unfiltered.request.StringValueParser">StringValueParser</a><span class="delimiter">)</span>
<span class="comment">/** Header whose value should be an integer. (Is stored in an Int.) */</span>
<span class="keyword">class</span> <a title="class IntHeader extends unfiltered.request.RequestHeader[Int] with ScalaObject" id="9783">IntHeader</a><a href="#9783" title="ScalaObject" class="delimiter">(</a><a title="String" id="80114">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9996" title="unfiltered.request.RequestHeader[Int]">RequestHeader</a><span class="delimiter">(</span><a href="#80114" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#9544" title="object unfiltered.request.IntValueParser">IntValueParser</a><span class="delimiter">)</span>

<span class="comment">// http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.10</span>

<span class="keyword">object</span> <a title="object unfiltered.request.Accept" id="10114">Accept</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept&quot;)" class="string">&quot;Accept&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.AcceptCharset" id="10048">AcceptCharset</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept-Charset&quot;)" class="string">&quot;Accept-Charset&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.AcceptEncoding" id="9841">AcceptEncoding</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept-Encoding&quot;)" class="string">&quot;Accept-Encoding&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.AcceptLanguage" id="10180">AcceptLanguage</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accept-Language&quot;)" class="string">&quot;Accept-Language&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Authorization" id="9739">Authorization</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Authorization&quot;)" class="string">&quot;Authorization&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Connection" id="9973">Connection</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Connection&quot;)" class="string">&quot;Connection&quot;</span><span class="delimiter">)</span>
<span class="comment">// may want opt added parser i.e for charset</span>
<span class="keyword">object</span> <a title="object unfiltered.request.RequestContentType" id="10174">RequestContentType</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Content-Type&quot;)" class="string">&quot;Content-Type&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Expect" id="10222">Expect</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Expect&quot;)" class="string">&quot;Expect&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.From" id="10000">From</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;From&quot;)" class="string">&quot;From&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Host" id="10021">Host</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Host&quot;)" class="string">&quot;Host&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfMatch" id="10231">IfMatch</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Match&quot;)" class="string">&quot;If-Match&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfModifiedSince" id="9697">IfModifiedSince</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9879" title="unfiltered.request.DateHeader">DateHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Modified-Since&quot;)" class="string">&quot;If-Modified-Since&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfNoneMatch" id="9601">IfNoneMatch</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-None-Match&quot;)" class="string">&quot;If-None-Match&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfRange" id="10285">IfRange</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Range&quot;)" class="string">&quot;If-Range&quot;</span><span class="delimiter">)</span> <span class="comment">// can also be an http date</span>
<span class="keyword">object</span> <a title="object unfiltered.request.IfUnmodifiedSince" id="9643">IfUnmodifiedSince</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9879" title="unfiltered.request.DateHeader">DateHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;If-Unmodified-Since&quot;)" class="string">&quot;If-Unmodified-Since&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.MaxForwards" id="10081">MaxForwards</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9783" title="unfiltered.request.IntHeader">IntHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Max-Forwards&quot;)" class="string">&quot;Max-Forwards&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.ProxyAuthorization" id="9991">ProxyAuthorization</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Proxy-Authorization&quot;)" class="string">&quot;Proxy-Authorization&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Range" id="9688">Range</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Range&quot;)" class="string">&quot;Range&quot;</span><span class="delimiter">)</span><span class="comment">// there more structure here</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Referer" id="10150">Referer</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9711" title="unfiltered.request.UriHeader">UriHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Referer&quot;)" class="string">&quot;Referer&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.TE" id="9934">TE</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;TE&quot;)" class="string">&quot;TE&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Upgrade" id="9535">Upgrade</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Upgrade&quot;)" class="string">&quot;Upgrade&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.UserAgent" id="9889">UserAgent</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9720" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;User-Agent&quot;)" class="string">&quot;User-Agent&quot;</span><span class="delimiter">)</span><span class="comment">// maybe a bit more structure here</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Via" id="9922">Via</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Via&quot;)" class="string">&quot;Via&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="object unfiltered.request.XForwardedFor" id="10117">XForwardedFor</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9555" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="java.lang.String(&quot;X-Forwarded-For&quot;)" class="string">&quot;X-Forwarded-For&quot;</span><span class="delimiter">)</span>

<span class="comment">/** Extracts the charset value from the Content-Type header, if present */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Charset" id="9988">Charset</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="52636">Setting</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;.*;.*\bcharset=(\S+).*&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[(String, unfiltered.request.HttpRequest[T])]" id="52638">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="52640">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="52641">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#52641" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13031" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#10174" title="object unfiltered.request.RequestContentType">RequestContentType</a>.<a href="#15165" title="=&gt; String">name</a><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[(String, unfiltered.request.HttpRequest[T])])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, unfiltered.request.HttpRequest[T]),List[(String, unfiltered.request.HttpRequest[T])]])List[(String, unfiltered.request.HttpRequest[T])]">flatMap</span> <a href="#52664" title="List[(String, unfiltered.request.HttpRequest[T])]" class="delimiter">{</a>
      <span class="keyword">case</span> <a href="#52636" title="List[(String, unfiltered.request.HttpRequest[T])]">Setting</a><span class="delimiter">(</span><a title="String" id="52858">cs</a><span class="delimiter">)</span> =&gt; <span title="(_1: String, _2: unfiltered.request.HttpRequest[T])(String, unfiltered.request.HttpRequest[T])" class="delimiter">(</span><a href="#52858" title="String">cs</a>, <a href="#52641" title="unfiltered.request.HttpRequest[T]">req</a><span class="delimiter">)</span> <a href="#52859" title="(x: (String, unfiltered.request.HttpRequest[T]))List[(String, unfiltered.request.HttpRequest[T])]">::</a> <span title="object Nil">Nil</span>
      <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
    <span class="delimiter">}</span>.<span title="=&gt; Option[(String, unfiltered.request.HttpRequest[T])]">headOption</span>
<span class="delimiter">}</span>

<span class="comment">/** Extracts the port number from the Host header, if present */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.HostPort" id="9970">HostPort</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="80157">Port</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;^\S+[:](\d{4})$&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[(String, Int)]" id="80159">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="80161">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="80166">req</a>: <a href="HttpRequest.scala.html#10254" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[(String, Int)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, Int<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#80166" title="unfiltered.request.HttpRequest[T]">req</a> <span title="Option[(String, Int)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#15157" title="Option[(String, Int)]">Host</a><span class="delimiter">(</span><a title="String" id="80175">hostname</a><span class="delimiter">)</span> =&gt; <a href="#80175" title="String">hostname</a> <span title="Option[(String, Int)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#80157" title="Some[(String, Int)]">Port</a><span class="delimiter">(</span><a title="String" id="80177">port</a><span class="delimiter">)</span> =&gt; <span title="(x: (String, Int))Some[(String, Int)]">Some</span><span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#80175" title="String">hostname</a>, <a href="#80177" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">port</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Some[(String, Int)]">_</span> =&gt; <span title="(x: (String, Int))Some[(String, Int)]">Some</span><span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#80175" title="String">hostname</a>, <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#80166" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#13033" title="=&gt; Boolean">isSecure</a><span class="delimiter">)</span> <span title="Int(443)" class="int">443</span> <span class="keyword">else</span> <span title="Int(80)" class="int">80</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>