<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>unfiltered/unfiltered/unfiltered/response/cookies.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.response

<span class="keyword">import</span> unfiltered.Cookie

<span class="comment">/** Set-Cookie response header. See SetCookies */</span>
<span class="keyword">object</span> <a title="object unfiltered.response.ResponseCookies" id="11027">ResponseCookies</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="84230">Name</a> = <span title="java.lang.String(&quot;Set-Cookie&quot;)" class="string">&quot;Set-Cookie&quot;</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use unfiltered.response.SetCookies(cookies) instead&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(cookies: unfiltered.Cookie*)unfiltered.response.ResponseHeader" id="84232">apply</a><span class="delimiter">(</span><a title="unfiltered.Cookie*" id="84234">cookies</a>: <span title="unfiltered.Cookie*">Cookie</span>*<span class="delimiter">)</span> =
    <span title="unfiltered.response.ResponseHeader" class="keyword">new</span> <a href="headers.scala.html#10639" title="unfiltered.response.ResponseHeader">ResponseHeader</a><span class="delimiter">(</span><a href="#84230" title="=&gt; java.lang.String">Name</a>, <span class="delimiter">(</span><span title="object Seq">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span> <a href="#84239" title="(z: Seq[String])(op: (Seq[String], unfiltered.Cookie) =&gt; Seq[String])Seq[String]">/:</a> <a href="#84234" title="unfiltered.Cookie*">cookies</a><span class="delimiter">)</span><span class="delimiter">(</span>
      <span class="delimiter">(</span><a title="Seq[String]" id="84252">a</a>, <a title="unfiltered.Cookie" id="84253">e</a><span class="delimiter">)</span> =&gt; <a href="#84261" title="(cs: unfiltered.Cookie*)String">ToCookies</a><span class="delimiter">(</span><a href="#84253" title="unfiltered.Cookie">e</a><span class="delimiter">)</span> <a href="#84254" title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">+:</a> <a href="#84252" title="Seq[String]">a</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** Set-Cookie response header */</span>
<span class="keyword">object</span> <a title="object unfiltered.response.SetCookies" id="11297">SetCookies</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="84307">Name</a> = <span title="java.lang.String(&quot;Set-Cookie&quot;)" class="string">&quot;Set-Cookie&quot;</span>
  <span class="keyword">def</span> <a title="(cookies: unfiltered.Cookie*)unfiltered.response.ResponseHeader" id="84309">apply</a><span class="delimiter">(</span><a title="unfiltered.Cookie*" id="84312">cookies</a>: <span title="unfiltered.Cookie*">Cookie</span>*<span class="delimiter">)</span> =
    <span title="unfiltered.response.ResponseHeader" class="keyword">new</span> <a href="headers.scala.html#10639" title="unfiltered.response.ResponseHeader">ResponseHeader</a><span class="delimiter">(</span><a href="#84307" title="=&gt; java.lang.String">Name</a>, <span class="delimiter">(</span><span title="object Seq">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span> <a href="#84315" title="(z: Seq[String])(op: (Seq[String], unfiltered.Cookie) =&gt; Seq[String])Seq[String]">/:</a> <a href="#84312" title="unfiltered.Cookie*">cookies</a><span class="delimiter">)</span><span class="delimiter">(</span>
      <span class="delimiter">(</span><a title="Seq[String]" id="84328">a</a>, <a title="unfiltered.Cookie" id="84329">e</a><span class="delimiter">)</span> =&gt; <a href="#84261" title="(cs: unfiltered.Cookie*)String">ToCookies</a><span class="delimiter">(</span><a href="#84329" title="unfiltered.Cookie">e</a><span class="delimiter">)</span> <a href="#84330" title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">+:</a> <a href="#84328" title="Seq[String]">a</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="comment">/** Call this method with a list of names to discard cookies */</span>
  <span class="keyword">def</span> <a title="(names: String*)unfiltered.response.ResponseHeader" id="84310">discarding</a><span class="delimiter">(</span><a title="String*" id="84367">names</a>: <span title="String*">String</span>*<span class="delimiter">)</span> =
    <a href="#84309" title="(cookies: unfiltered.Cookie*)unfiltered.response.ResponseHeader">apply</a><span class="delimiter">(</span><a href="#84367" title="String*">names</a>.<span title="(f: String =&gt; unfiltered.Cookie)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],unfiltered.Cookie,Seq[unfiltered.Cookie]])Seq[unfiltered.Cookie]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,unfiltered.Cookie,Seq[unfiltered.Cookie]]" class="delimiter">(</span><a href="../cookies.scala.html#26229" title="Option[String]" id="84413">Cookie</a><span class="delimiter">(</span><a href="#84386" title="String" id="84406">_</a>, <a title="java.lang.String(&quot;&quot;)" id="84407" class="string">&quot;&quot;</a>, maxAge = <span title="(x: Int)Some[Int]">Some</span><a title="Some[Int]" id="84408" class="delimiter">(</a><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>:_*<span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** Module for Cookie serialization */</span>
<span class="keyword">object</span> <a title="object unfiltered.response.ToCookies" id="11246">ToCookies</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> java.util.Date
  <span class="keyword">import</span> unfiltered.<a href="../cookies.scala.html#9507" title="object unfiltered.CookieKeys">CookieKeys</a>._
  <span class="keyword">import</span> unfiltered.request.DateFormatting

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Array[Char]" id="84259">Quotables</a> = <span title="(x: Char, xs: Char*)Array[Char]">Array</span><span class="delimiter">(</span>
    <span title="Char(\'\\t\')" class="char">'\t'</span>, <span title="Char(\' \')" class="char">' '</span>, <span title="Char(\'\\\&quot;\')" class="char">'&quot;'</span>, <span title="Char(\'(\')" class="char">'('</span>, <span title="Char(\')\')" class="char">')'</span>, <span title="Char(\',\')" class="char">','</span>, <span title="Char(\'/\')" class="char">'/'</span>, <span title="Char(\':\')" class="char">':'</span>, <span title="Char(\';\')" class="char">';'</span>, <span title="Char(\'&lt;\')" class="char">'&lt;'</span>,
    <span title="Char(\'=\')" class="char">'='</span>, <span title="Char(\'&gt;\')" class="char">'&gt;'</span>, <span title="Char(\'?\')" class="char">'?'</span>, <span title="Char(\'@\')" class="char">'@'</span>, <span title="Char(\'[\')" class="char">'['</span>, <span title="Char(\'\\\\\')" class="char">'\\'</span>, <span title="Char(\']\')" class="char">']'</span>, <span title="Char(\'{\')" class="char">'{'</span>, <span title="Char(\'}\')" class="char">'}'</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(cs: unfiltered.Cookie*)String" id="84261">apply</a><span class="delimiter">(</span><a title="unfiltered.Cookie*" id="84267">cs</a>: <span title="unfiltered.Cookie*">Cookie</span>*<span class="delimiter">)</span>: <span title="String">String</span> =
    <span class="delimiter">(</span><span class="delimiter">(</span><span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <a href="#84462" title="(z: StringBuilder)(op: (StringBuilder, unfiltered.Cookie) =&gt; StringBuilder)StringBuilder">/:</a> <a href="#84267" title="unfiltered.Cookie*">cs</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="StringBuilder" id="84702">b</a>, <a title="unfiltered.Cookie" id="84703">c</a><span class="delimiter">)</span> =&gt; <a href="#84266" title="(sb: StringBuilder, c: unfiltered.Cookie)Unit">append</a><span class="delimiter">(</span><a href="#84702" title="StringBuilder">b</a>, <a href="#84703" title="unfiltered.Cookie">c</a><span class="delimiter">)</span>; <a href="#84702" title="StringBuilder">b</a> <span class="delimiter">}</span><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="85257">sb</a> <span class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#85257" title="StringBuilder">sb</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> =&gt;
        <a href="#85257" title="StringBuilder">sb</a>.<span title="(len: Int)Unit">setLength</span><span class="delimiter">(</span><a href="#85257" title="StringBuilder">sb</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <a href="#85257" title="StringBuilder">sb</a>.<span title="()java.lang.String">toString</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="85262">empty</a> =&gt; <a href="#85262" title="StringBuilder">empty</a>.<span title="()java.lang.String">toString</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: String, v: String)String" id="84262">quoted</a><span class="delimiter">(</span><a title="String" id="84716">k</a>: <span title="String">String</span>, <a title="String" id="84717">v</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;%s=&quot;%s&quot;;&quot;&quot;&quot;</span> <span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#84716" title="String">k</a>, <a href="#84717" title="String">v</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)" class="keyword">null</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="84723">value</a> =&gt; <a href="#84723" title="String">value</a>.<span title="(x$1: java.lang.CharSequence, x$2: java.lang.CharSequence)java.lang.String">replace</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\&quot;)" class="string">&quot;\\&quot;</span>, <span title="java.lang.String(&quot;\\\\&quot;)" class="string">&quot;\\\\&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.CharSequence, x$2: java.lang.CharSequence)java.lang.String">replace</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span>, <span title="java.lang.String(&quot;\\\&quot;&quot;)" class="string">&quot;\\\&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: String, v: String)String" id="84263">literal</a><span class="delimiter">(</span><a title="String" id="85067">k</a>: <span title="String">String</span>, <a title="String" id="85068">v</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s=%s;&quot;</span> <span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#85067" title="String">k</a>, <a href="#85068" title="String">v</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: String, v: String)String" id="84264">add</a><span class="delimiter">(</span><a title="String" id="84712">k</a>: <span title="String">String</span>, <a title="String" id="84713">v</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#84713" title="String">v</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String" class="keyword">null</span> =&gt; <a href="#84262" title="(k: String, v: String)String">quoted</a><span class="delimiter">(</span><a href="#84712" title="String">k</a>, <a href="#84713" title="String">v</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="String" id="84732">value</a> =&gt;
      <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#84732" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">value</a>.<span title="(p: Char =&gt; Boolean)Option[Char]">find</span><span class="delimiter">(</span><a href="#84259" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">Quotables</a>.<a href="#85066" title="(elem: Any)Boolean">contains</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#84262" title="(k: String, v: String)String">quoted</a><span class="delimiter">(</span><a href="#84712" title="String">k</a>, <a href="#84713" title="String">v</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#84263" title="(k: String, v: String)String">literal</a><span class="delimiter">(</span><a href="#84712" title="String">k</a>, <a href="#84713" title="String">v</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(secs: Int)java.lang.String" id="84265">gmt</a><span class="delimiter">(</span><a title="Int" id="85087">secs</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
    <a href="../request/headers.scala.html#9847" title="object unfiltered.request.DateFormatting">DateFormatting</a>.<a href="../request/headers.scala.html#78638" title="(date: java.util.Date)java.lang.String">format</a><span class="delimiter">(</span>
      <span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Long)Long">+</span> <a href="#85087" title="Int">secs</a> <span title="(x: Long)Long">*</span> <span title="Long(1000L)" class="long">1000L</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sb: StringBuilder, c: unfiltered.Cookie)Unit" id="84266">append</a><span class="delimiter">(</span><a title="StringBuilder" id="84704">sb</a>: <span title="StringBuilder">StringBuilder</span>, <a title="unfiltered.Cookie" id="84705">c</a>: <a href="../cookies.scala.html#9467" title="unfiltered.Cookie">Cookie</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><a href="#84264" title="(k: String, v: String)String">add</a><span class="delimiter">(</span><a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24912" title="=&gt; String">name</a>, <a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24914" title="=&gt; String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24920" title="=&gt; Option[Int]">maxAge</a> <span title="(f: Int =&gt; StringBuilder)Option[StringBuilder]">map</span> <span class="delimiter">{</span> <a title="Int" id="85078">ma</a> =&gt;
      <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span>
        <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24926" title="=&gt; Int">version</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#84263" title="(k: String, v: String)String">literal</a><span class="delimiter">(</span><a href="../cookies.scala.html#75859" title="=&gt; java.lang.String">Expires</a>, <a href="#84265" title="(secs: Int)java.lang.String">gmt</a><span class="delimiter">(</span><a href="#85078" title="Int">ma</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#84264" title="(k: String, v: String)String">add</a><span class="delimiter">(</span><a href="../cookies.scala.html#75861" title="=&gt; java.lang.String">MaxAge</a>, <a href="#85078" title="Int">ma</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24918" title="=&gt; Option[String]">path</a> <span title="(f: String =&gt; StringBuilder)Option[StringBuilder]">map</span> <span class="delimiter">{</span> <a title="String" id="85107">p</a> =&gt;
      <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span>
        <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24926" title="=&gt; Int">version</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#84264" title="(k: String, v: String)String">add</a><span class="delimiter">(</span><a href="../cookies.scala.html#75857" title="=&gt; java.lang.String">Path</a>, <a href="#85107" title="String">p</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#84263" title="(k: String, v: String)String">literal</a><span class="delimiter">(</span><a href="../cookies.scala.html#75857" title="=&gt; java.lang.String">Path</a>, <a href="#85107" title="String">p</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24916" title="=&gt; Option[String]">domain</a> <span title="(f: String =&gt; StringBuilder)Option[StringBuilder]">map</span> <span class="delimiter">{</span> <a title="String" id="85121">d</a> =&gt;
      <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span>
        <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24926" title="=&gt; Int">version</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#84264" title="(k: String, v: String)String">add</a><span class="delimiter">(</span><a href="../cookies.scala.html#75863" title="=&gt; java.lang.String">Domain</a>, <a href="#85121" title="String">d</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#84263" title="(k: String, v: String)String">literal</a><span class="delimiter">(</span><a href="../cookies.scala.html#75863" title="=&gt; java.lang.String">Domain</a>, <a href="#85121" title="String">d</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24922" title="=&gt; Option[Boolean]">secure</a> <span title="(f: Boolean =&gt; Any)Option[Any]">map</span><span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#85135" title="Boolean">_</a><span class="delimiter">)</span> <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s;&quot;</span> <span title="(args: Any*)String">format</span> <a href="../cookies.scala.html#75865" title="=&gt; java.lang.String">Secure</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24924" title="=&gt; Boolean">httpOnly</a><span class="delimiter">)</span> <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s;&quot;</span> <span title="(args: Any*)String">format</span> <a href="../cookies.scala.html#75867" title="=&gt; java.lang.String">HTTPOnly</a><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24926" title="=&gt; Int">version</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
       <a href="#84704" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><a href="#84264" title="(k: String, v: String)String">add</a><span class="delimiter">(</span><a href="../cookies.scala.html#75877" title="=&gt; java.lang.String">Version</a>, <a href="#84705" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#24926" title="=&gt; Int">version</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#84704" title="StringBuilder">sb</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#84704" title="StringBuilder">sb</a>.<span title="(len: Int)Unit">setLength</span><span class="delimiter">(</span><a href="#84704" title="StringBuilder">sb</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="comment">// ignore v1 extras for now</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>