<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>netty/bindings.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>

<span class="keyword">package</span> unfiltered.netty

<span class="keyword">import</span> unfiltered.<span class="delimiter">{</span>JIteratorIterator,Async<span class="delimiter">}</span>
<span class="keyword">import</span> unfiltered.response.<span class="delimiter">{</span>ResponseFunction, HttpResponse<span class="delimiter">}</span>
<span class="keyword">import</span> unfiltered.request.<span class="delimiter">{</span>HttpRequest,POST,RequestContentType,Charset<span class="delimiter">}</span>
<span class="keyword">import</span> java.net.URLDecoder
<span class="keyword">import</span> org.jboss.netty.handler.codec.http._
<span class="keyword">import</span> java.io._
<span class="keyword">import</span> org.jboss.netty.buffer.<span class="delimiter">{</span>ChannelBuffers, ChannelBufferOutputStream,
  ChannelBufferInputStream<span class="delimiter">}</span>
<span class="keyword">import</span> org.jboss.netty.channel._
<span class="keyword">import</span> org.jboss.netty.handler.codec.http.<span title="object org.jboss.netty.handler.codec.http.HttpVersion">HttpVersion</span>._
<span class="keyword">import</span> org.jboss.netty.handler.codec.http.<span title="object org.jboss.netty.handler.codec.http.HttpResponseStatus">HttpResponseStatus</span>._
<span class="keyword">import</span> org.jboss.netty.handler.codec.http.<span class="delimiter">{</span>HttpResponse=&gt;NHttpResponse,
                                           HttpRequest=&gt;NHttpRequest<span class="delimiter">}</span>
<span class="keyword">import</span> java.nio.charset.<span class="delimiter">{</span>Charset =&gt; JNIOCharset<span class="delimiter">}</span>
<span class="keyword">import</span> unfiltered.Cookie
<span class="keyword">import</span> unfiltered.util.Optional

<span class="keyword">object</span> <a title="object unfiltered.netty.HttpConfig" id="9660">HttpConfig</a> <span title="ScalaObject" class="delimiter">{</span>
   <span class="keyword">val</span> <a title="java.lang.String" id="42965">DEFAULT_CHARSET</a> = <span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class RequestBinding extends unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage] with unfiltered.Async.Responder[org.jboss.netty.handler.codec.http.HttpResponse] with ScalaObject" id="9662">RequestBinding</a><a href="#9662" title="ScalaObject" class="delimiter">(</a><a title="unfiltered.netty.ReceivedMessage" id="42884">msg</a>: <a href="#46100" title="unfiltered.netty.ReceivedMessage">ReceivedMessage</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="../unfiltered/request/HttpRequest.scala.html#9948" title="unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage]">HttpRequest</a><span class="delimiter">(</span><a href="#42884" title="unfiltered.netty.ReceivedMessage">msg</a><span class="delimiter">)</span> <span class="keyword">with</span> Async.<a href="../unfiltered/intents.scala.html#39115" title="unfiltered.Async.Responder[org.jboss.netty.handler.codec.http.HttpResponse]">Responder</a><span class="delimiter">[</span>NHttpResponse<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="org.jboss.netty.handler.codec.http.HttpRequest" id="42862">req</a> = <a href="#42884" title="unfiltered.netty.ReceivedMessage">msg</a>.<a href="#42907" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">request</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,Seq[String]]" id="42865">params</a> = <a href="#42866" title="=&gt; Map[String,Seq[String]]">queryParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <a href="#42867" title="=&gt; Map[String,Seq[String]]">postParams</a>
  <span class="keyword">def</span> <a title="=&gt; Map[String,Seq[String]]" id="42866">queryParams</a> = <a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="()java.lang.String">getUri</span>.<span title="(x$1: java.lang.String, x$2: Int)Array[java.lang.String]">split</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\?&quot;)" class="string">&quot;\\?&quot;</span>, <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span title="Map[String,Seq[String]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#42979" title="Map[String,Seq[String]]">Array</a><span class="delimiter">(</span>_, <a title="java.lang.String" id="42985">qs</a><span class="delimiter">)</span> =&gt; <a href="#9668" title="object unfiltered.netty.URLParser">URLParser</a>.<a href="#42987" title="(enc: String)Map[String,Seq[String]]">urldecode</a><span class="delimiter">(</span><a href="#42985" title="java.lang.String">qs</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="scala.collection.immutable.Map[String,Seq[String]]">_</span> =&gt; <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,Seq[String]]" class="delimiter">[</span><span title="String">String</span>,<span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Map[String,Seq[String]]" id="42867">postParams</a> = <a href="#9662" title="unfiltered.netty.RequestBinding" class="keyword">this</a> <span title="Map[String,Seq[String]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../unfiltered/request/methods.scala.html#37655" title="Map[String,Seq[String]]">POST</a><span class="delimiter">(</span><a href="../unfiltered/request/headers.scala.html#12802" title="(req: unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage])Option[String]">RequestContentType</a><span class="delimiter">(</span><a title="String" id="43080">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#43080" title="String">ct</a>.<span title="(x$1: java.lang.CharSequence)Boolean">contains</span><span class="delimiter">(</span><span title="java.lang.String(&quot;application/x-www-form-urlencoded&quot;)" class="string">&quot;application/x-www-form-urlencoded&quot;</span><span class="delimiter">)</span> =&gt;
      <a href="#9668" title="object unfiltered.netty.URLParser">URLParser</a>.<a href="#42987" title="(enc: String)Map[String,Seq[String]]">urldecode</a><span class="delimiter">(</span><a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="()org.jboss.netty.buffer.ChannelBuffer">getContent</span>.<span title="(x$1: java.nio.charset.Charset)java.lang.String">toString</span><span class="delimiter">(</span><span title="object java.nio.charset.Charset">JNIOCharset</span>.<span title="(x$1: java.lang.String)java.nio.charset.Charset">forName</span><span class="delimiter">(</span><a href="#42868" title="=&gt; String">charset</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="scala.collection.immutable.Map[String,Seq[String]]">_</span> =&gt; <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,Seq[String]]" class="delimiter">[</span><span title="String">String</span>,<span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; String" id="42868">charset</a> = <a href="#9662" title="unfiltered.netty.RequestBinding" class="keyword">this</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../unfiltered/request/headers.scala.html#43106" title="String">Charset</a><span class="delimiter">(</span><a title="String" id="43382">cs</a>, _<span class="delimiter">)</span> =&gt; <a href="#43382" title="String">cs</a>
    <span class="keyword">case</span> <span title="java.lang.String">_</span> =&gt; <a href="#9660" title="object unfiltered.netty.HttpConfig">HttpConfig</a>.<a href="#42965" title="=&gt; java.lang.String">DEFAULT_CHARSET</a>
  <span class="delimiter">}</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.jboss.netty.buffer.ChannelBufferInputStream" id="42870">inputStream</a> = <span title="org.jboss.netty.buffer.ChannelBufferInputStream" class="keyword">new</span> <span title="org.jboss.netty.buffer.ChannelBufferInputStream">ChannelBufferInputStream</span><span class="delimiter">(</span><a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="()org.jboss.netty.buffer.ChannelBuffer">getContent</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.BufferedReader" id="42872">reader</a> = <span class="delimiter">{</span>
    <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="(x$1: java.io.InputStream, x$2: java.lang.String)java.io.InputStreamReader" class="keyword">new</span> <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><a href="#42869" title="=&gt; org.jboss.netty.buffer.ChannelBufferInputStream">inputStream</a>, <a href="#42868" title="=&gt; String">charset</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="42873">protocol</a> = <a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="()org.jboss.netty.handler.codec.http.HttpVersion">getProtocolVersion</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;HTTP/1.0&quot;)">HttpVersion</span>.<span title="org.jboss.netty.handler.codec.http.HttpVersion">HTTP_1_0</span> =&gt; <span title="java.lang.String(&quot;HTTP/1.0&quot;)" class="string">&quot;HTTP/1.0&quot;</span>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;HTTP/1.1&quot;)">HttpVersion</span>.<span title="org.jboss.netty.handler.codec.http.HttpVersion">HTTP_1_1</span> =&gt; <span title="java.lang.String(&quot;HTTP/1.1&quot;)" class="string">&quot;HTTP/1.1&quot;</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="42874">method</a> = <a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="()org.jboss.netty.handler.codec.http.HttpMethod">getMethod</span>.<span title="()java.lang.String">toString</span>.<span title="()java.lang.String">toUpperCase</span>

  <span class="comment">// todo should we call URLDecoder.decode(uri, charset) on this here?</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="42875">uri</a> = <a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="()java.lang.String">getUri</span>

  <span class="keyword">def</span> <a title="=&gt; Iterator[String]" id="42876">parameterNames</a> = <a href="#42864" title="=&gt; scala.collection.immutable.Map[String,Seq[String]]">params</a>.<span title="=&gt; scala.collection.immutable.Set[String]">keySet</span>.<span title="=&gt; Iterator[String]">iterator</span>
  <span class="keyword">def</span> <a title="(param: String)Seq[String]" id="42877">parameterValues</a><span class="delimiter">(</span><a title="String" id="44148">param</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#42864" title="(key: String)Seq[String]">params</a><span class="delimiter">(</span><a href="#44148" title="String">param</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)unfiltered.JIteratorIterator[java.lang.String]" id="42878">headers</a><span class="delimiter">(</span><a title="String" id="44169">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="unfiltered.JIteratorIterator[java.lang.String]" class="keyword">new</span> <a href="../unfiltered/jcollections.scala.html#9922" title="unfiltered.JIteratorIterator[java.lang.String]">JIteratorIterator</a><span class="delimiter">(</span><a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="(x$1: java.lang.String)java.util.List[java.lang.String]">getHeaders</span><span class="delimiter">(</span><a href="#44169" title="String">name</a><span class="delimiter">)</span>.<span title="()java.util.Iterator[java.lang.String]">iterator</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[unfiltered.Cookie]" id="42880">cookies</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> org.jboss.netty.handler.codec.http.<span class="delimiter">{</span>Cookie =&gt; NCookie, CookieDecoder<span class="delimiter">}</span>
    <span class="keyword">import</span> unfiltered.Cookie
    <span class="keyword">val</span> <a title="java.lang.String" id="43522">cookieString</a> = <a href="#42862" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">req</a>.<span title="(x$1: java.lang.String)java.lang.String">getHeader</span><span class="delimiter">(</span>HttpHeaders.Names.<span title="java.lang.String(&quot;Cookie&quot;)">COOKIE</span><span class="delimiter">)</span>;
    <span title="List[unfiltered.Cookie]" class="keyword">if</span> <span class="delimiter">(</span><a href="#43522" title="java.lang.String">cookieString</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.jboss.netty.handler.codec.http.CookieDecoder" id="43589">cookieDecoder</a> = <span title="org.jboss.netty.handler.codec.http.CookieDecoder" class="keyword">new</span> <span title="org.jboss.netty.handler.codec.http.CookieDecoder">CookieDecoder</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[org.jboss.netty.handler.codec.http.Cookie with java.lang.Object]" id="43590">decCookies</a> = <span title="(elems: org.jboss.netty.handler.codec.http.Cookie with java.lang.Object*)scala.collection.immutable.Set[org.jboss.netty.handler.codec.http.Cookie with java.lang.Object]">Set</span><span class="delimiter">(</span><a href="#43589" title="org.jboss.netty.handler.codec.http.CookieDecoder">cookieDecoder</a>.<span title="(x$1: java.lang.String)java.util.Set[org.jboss.netty.handler.codec.http.Cookie]">decode</span><span class="delimiter">(</span><a href="#43522" title="java.lang.String">cookieString</a><span class="delimiter">)</span>.<span title="(x$1: Array[org.jboss.netty.handler.codec.http.Cookie with java.lang.Object])Array[org.jboss.netty.handler.codec.http.Cookie with java.lang.Object]">toArray</span><span class="delimiter">(</span><span title="Array[org.jboss.netty.handler.codec.http.Cookie]" class="keyword">new</span> <span title="Array[org.jboss.netty.handler.codec.http.Cookie]">Array</span><span class="delimiter">[</span>NCookie<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
      <span class="delimiter">(</span>List<span class="delimiter">[</span>Cookie<span class="delimiter">]</span><span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span> <a href="#43817" title="(z: List[unfiltered.Cookie])(op: (List[unfiltered.Cookie], org.jboss.netty.handler.codec.http.Cookie with java.lang.Object) =&gt; List[unfiltered.Cookie])List[unfiltered.Cookie]">/:</a> <a href="#43590" title="scala.collection.immutable.Set[org.jboss.netty.handler.codec.http.Cookie with java.lang.Object]">decCookies</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="List[unfiltered.Cookie]" id="44052">l</a>, <a title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object" id="44053">c</a><span class="delimiter">)</span> =&gt;
        <a href="../unfiltered/cookies.scala.html#23186" title="(name: String, value: String, domain: Option[String], path: Option[String], maxAge: Option[Int], secure: Option[Boolean])unfiltered.Cookie">Cookie</a><span class="delimiter">(</span><a href="#44053" title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object">c</a>.<span title="()java.lang.String">getName</span>, <a href="#44053" title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object">c</a>.<span title="()java.lang.String">getValue</span>, <a href="../utils/utils.scala.html#23212" title="(x: java.lang.String)Option[java.lang.String]">Optional</a><span class="delimiter">(</span><a href="#44053" title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object">c</a>.<span title="()java.lang.String">getDomain</span><span class="delimiter">)</span>, <a href="../utils/utils.scala.html#23212" title="(x: java.lang.String)Option[java.lang.String]">Optional</a><span class="delimiter">(</span><a href="#44053" title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object">c</a>.<span title="()java.lang.String">getPath</span><span class="delimiter">)</span>, <a href="../utils/utils.scala.html#23212" title="(x: Int)Option[Int]">Optional</a><span class="delimiter">(</span><a href="#44053" title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object">c</a>.<span title="()Int">getMaxAge</span><span class="delimiter">)</span>, <a href="../utils/utils.scala.html#23212" title="(x: Boolean)Option[Boolean]">Optional</a><span class="delimiter">(</span><a href="#44053" title="&lt;none&gt; extends org.jboss.netty.handler.codec.http.Cookie with java.lang.Object">c</a>.<span title="()Boolean">isSecure</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#44054" title="(x: unfiltered.Cookie)List[unfiltered.Cookie]">::</a> <a href="#44052" title="List[unfiltered.Cookie]">l</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="object Nil">Nil</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="42881">isSecure</a> = <a href="#42884" title="unfiltered.netty.ReceivedMessage">msg</a>.<a href="#42908" title="=&gt; org.jboss.netty.channel.ChannelHandlerContext">context</a>.<span title="()org.jboss.netty.channel.ChannelPipeline">getPipeline</span>.<span title="(x$1: java.lang.Class[org.jboss.netty.handler.ssl.SslHandler])org.jboss.netty.handler.ssl.SslHandler">get</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[org.jboss.netty.handler.ssl.SslHandler](classOf[org.jboss.netty.handler.ssl.SslHandler])" class="delimiter">[</span>org.jboss.netty.handler.ssl.SslHandler<span class="delimiter">]</span><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Boolean(false)" class="keyword">null</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">case</span> <span title="Boolean(true)">_</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="42882">remoteAddr</a> =<a href="#42884" title="unfiltered.netty.ReceivedMessage">msg</a>.<a href="#42908" title="=&gt; org.jboss.netty.channel.ChannelHandlerContext">context</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>.<span title="()java.net.SocketAddress">getRemoteAddress</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.net.InetSocketAddress" class="delimiter">[</span>java.net.<span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">]</span>.<span title="()java.net.InetAddress">getAddress</span>.<span title="()java.lang.String">getHostAddress</span>

  <span class="keyword">def</span> <a title="(rf: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse])Unit" id="42883">respond</a><span class="delimiter">(</span><a title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]" id="44295">rf</a>: <a href="../unfiltered/response/functions.scala.html#10158" title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]">ResponseFunction</a><span class="delimiter">[</span>NHttpResponse<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="../unfiltered/request/HttpRequest.scala.html#10666" title="=&gt; unfiltered.netty.ReceivedMessage">underlying</a>.<a href="#38203" title="(rf: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse])Unit">respond</a><span class="delimiter">(</span><a href="#44295" title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]">rf</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
<span class="comment">/** Extension of basic request binding to expose Netty-specific attributes */</span>
case <span class="keyword">class</span> <a title="class ReceivedMessage extends java.lang.Object with ScalaObject with Product with Serializable" id="46100">ReceivedMessage</a><a href="#46100" title="ScalaObject" class="delimiter">(</a>
  <a title="org.jboss.netty.handler.codec.http.HttpRequest" id="42907">request</a>: <span title="org.jboss.netty.handler.codec.http.HttpRequest">NHttpRequest</span>,
  <a title="org.jboss.netty.channel.ChannelHandlerContext" id="42908">context</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>,
  <a title="org.jboss.netty.channel.MessageEvent" id="42909">event</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/** Binds a Netty HttpResponse res to Unfiltered's HttpResponse to apply any
   * response function to it. */</span>
  <span class="keyword">def</span> <a title="[T &lt;: org.jboss.netty.handler.codec.http.HttpResponse](res: T)(rf: unfiltered.response.ResponseFunction[T])T" id="38198">response</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.jboss.netty.handler.codec.http.HttpResponse" id="38200">T</a> &lt;: NHttpResponse<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="38945">res</a>: <a href="#38200" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="unfiltered.response.ResponseFunction[T]" id="38946">rf</a>: <a href="../unfiltered/response/functions.scala.html#10158" title="unfiltered.response.ResponseFunction[T]">ResponseFunction</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="../unfiltered/response/functions.scala.html#26069" title="(res: unfiltered.response.HttpResponse[T])unfiltered.response.HttpResponse[T]">rf</a><span class="delimiter">(</span><span title="unfiltered.netty.ResponseBinding[T]" class="keyword">new</span> <a href="#9666" title="unfiltered.netty.ResponseBinding[T]">ResponseBinding</a><span class="delimiter">(</span><a href="#38945" title="T">res</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../unfiltered/response/HttpResponse.scala.html#25701" title="=&gt; T">underlying</a>

  <span class="comment">/** @return a new Netty DefaultHttpResponse bound to an Unfiltered HttpResponse */</span>
  <span class="keyword">val</span> <a title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.DefaultHttpResponse] =&gt; org.jboss.netty.handler.codec.http.DefaultHttpResponse" id="38201">defaultResponse</a> = <a href="#38198" title="(res: org.jboss.netty.handler.codec.http.DefaultHttpResponse)(rf: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.DefaultHttpResponse])org.jboss.netty.handler.codec.http.DefaultHttpResponse">response</a><a href="#39033" title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.DefaultHttpResponse]" class="delimiter">(</a><a href="#39031" title="org.jboss.netty.handler.codec.http.DefaultHttpResponse" class="keyword">new</a> <span title="org.jboss.netty.handler.codec.http.DefaultHttpResponse">DefaultHttpResponse</span><span class="delimiter">(</span><span title="org.jboss.netty.handler.codec.http.HttpVersion">HTTP_1_1</span>, <span title="org.jboss.netty.handler.codec.http.HttpResponseStatus">OK</span><span class="delimiter">)</span><span class="delimiter">)</span>_
  <span class="comment">/** Applies rf to a new `defaultResponse` and writes it out */</span>
  <span class="keyword">def</span> <a title="(rf: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse])Unit" id="38203">respond</a><span class="delimiter">(</span><a title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]" id="38205">rf</a>: <a href="../unfiltered/response/functions.scala.html#10158" title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]">ResponseFunction</a><span class="delimiter">[</span>NHttpResponse<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="38208">keepAlive</a> = <span title="object org.jboss.netty.handler.codec.http.HttpHeaders">HttpHeaders</span>.<span title="(x$1: org.jboss.netty.handler.codec.http.HttpMessage)Boolean">isKeepAlive</span><span class="delimiter">(</span><a href="#42907" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="closer extends java.lang.Object with unfiltered.response.Responder[org.jboss.netty.handler.codec.http.HttpResponse]" id="38209">closer</a> = <a href="#38506" title="java.lang.Object with unfiltered.response.Responder[org.jboss.netty.handler.codec.http.HttpResponse]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with unfiltered.response.Responder[org.jboss.netty.handler.codec.http.HttpResponse]" id="38506">unfiltered</a>.response.<a href="../unfiltered/response/functions.scala.html#10160" title="unfiltered.response.Responder[org.jboss.netty.handler.codec.http.HttpResponse]">Responder</a><span class="delimiter">[</span>NHttpResponse<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(res: unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse])Unit" id="38511">respond</a><span class="delimiter">(</span><a title="unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse]" id="38512">res</a>: <a href="../unfiltered/response/HttpResponse.scala.html#10131" title="unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse]">HttpResponse</a><span class="delimiter">[</span>NHttpResponse<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#38512" title="unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse]">res</a>.<a href="../unfiltered/response/HttpResponse.scala.html#25708" title="=&gt; java.io.OutputStream">outputStream</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">(</span>
          <a href="../unfiltered/response/functions.scala.html#26069" title="(res: unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse])unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse]" class="keyword">if</a> <span class="delimiter">(</span><a href="#38208" title="Boolean">keepAlive</a><span class="delimiter">)</span>
            unfiltered.response.<a href="../unfiltered/response/headers.scala.html#38523" title="(value: String*)unfiltered.response.ResponseHeader">Connection</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Keep-Alive&quot;)" class="string">&quot;Keep-Alive&quot;</span><span class="delimiter">)</span> <a href="../unfiltered/response/functions.scala.html#26072" title="(that: unfiltered.response.ResponseFunction[Any])java.lang.Object with unfiltered.response.ResponseFunction[Any]">~&gt;</a>
            unfiltered.response.<a href="../unfiltered/response/headers.scala.html#38523" title="(value: String*)unfiltered.response.ResponseHeader">ContentLength</a><span class="delimiter">(</span>
              <a href="#38512" title="unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse]">res</a>.<a href="../unfiltered/response/HttpResponse.scala.html#25701" title="=&gt; org.jboss.netty.handler.codec.http.HttpResponse">underlying</a>.<span title="()org.jboss.netty.buffer.ChannelBuffer">getContent</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()Int">readableBytes</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
          <span class="keyword">else</span> unfiltered.response.<a href="../unfiltered/response/headers.scala.html#38523" title="(value: String*)unfiltered.response.ResponseHeader">Connection</a><span class="delimiter">(</span><span title="java.lang.String(&quot;close&quot;)" class="string">&quot;close&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">)</span><span title="Unit" class="delimiter">(</span><a href="#38512" title="unfiltered.response.HttpResponse[org.jboss.netty.handler.codec.http.HttpResponse]">res</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.ChannelFuture" id="38210">future</a> = <a href="#42909" title="=&gt; org.jboss.netty.channel.MessageEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>.<span title="(x$1: Any)org.jboss.netty.channel.ChannelFuture">write</span><span class="delimiter">(</span>
      <a href="#38201" title="(v1: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.DefaultHttpResponse])org.jboss.netty.handler.codec.http.DefaultHttpResponse">defaultResponse</a><span class="delimiter">(</span>
        unfiltered.response.<a href="../unfiltered/response/headers.scala.html#38523" title="(value: String*)unfiltered.response.ResponseHeader">Server</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Scala Netty Unfiltered Server&quot;)" class="string">&quot;Scala Netty Unfiltered Server&quot;</span><span class="delimiter">)</span> <a href="../unfiltered/response/functions.scala.html#26072" title="(that: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse])java.lang.Object with unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]">~&gt;</a> <a href="#38205" title="unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]">rf</a> <a href="../unfiltered/response/functions.scala.html#26072" title="(that: unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse])java.lang.Object with unfiltered.response.ResponseFunction[org.jboss.netty.handler.codec.http.HttpResponse]">~&gt;</a> <a href="#38209" title="closer extends java.lang.Object with unfiltered.response.Responder[org.jboss.netty.handler.codec.http.HttpResponse]">closer</a>
      <span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#38208" title="Boolean">keepAlive</a><span class="delimiter">)</span>
      <a href="#38210" title="org.jboss.netty.channel.ChannelFuture">future</a>.<span title="(x$1: org.jboss.netty.channel.ChannelFutureListener)Unit">addListener</span><span class="delimiter">(</span><span title="object org.jboss.netty.channel.ChannelFutureListener">ChannelFutureListener</span>.<span title="org.jboss.netty.channel.ChannelFutureListener">CLOSE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ResponseBinding[U &lt;: org.jboss.netty.handler.codec.http.HttpResponse] extends unfiltered.response.HttpResponse[U] with ScalaObject" id="9666">ResponseBinding</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.jboss.netty.handler.codec.http.HttpResponse" id="9667">U</a> &lt;: NHttpResponse<span class="delimiter">]</span><a href="#9666" title="ScalaObject" class="delimiter">(</a><a title="U" id="38967">res</a>: <a href="#9667" title="U">U</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="../unfiltered/response/HttpResponse.scala.html#10131" title="unfiltered.response.HttpResponse[U]">HttpResponse</a><span class="delimiter">(</span><a href="#38967" title="U">res</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="38960">byteOutputStream</a> = <a href="#44381" title="java.io.ByteArrayOutputStream" class="keyword">new</a> <a title="anonymous class $anon extends java.io.ByteArrayOutputStream" id="44381">ByteArrayOutputStream</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="44405">close</a> = <span class="delimiter">{</span>
      <a href="#38967" title="U">res</a>.<span title="(x$1: org.jboss.netty.buffer.ChannelBuffer)Unit">setContent</span><span class="delimiter">(</span><span title="object org.jboss.netty.buffer.ChannelBuffers">ChannelBuffers</span>.<span title="(x$1: Array[Byte])org.jboss.netty.buffer.ChannelBuffer">copiedBuffer</span><span class="delimiter">(</span><a href="#44381" title="this.type" class="keyword">this</a>.<span title="()Array[Byte]">toByteArray</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(statusCode: Int)Unit" id="38961">status</a><span class="delimiter">(</span><a title="Int" id="44732">statusCode</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
    <a href="#38967" title="U">res</a>.<span title="(x$1: org.jboss.netty.handler.codec.http.HttpResponseStatus)Unit">setStatus</span><span class="delimiter">(</span><span title="object org.jboss.netty.handler.codec.http.HttpResponseStatus">HttpResponseStatus</span>.<span title="(x$1: Int)org.jboss.netty.handler.codec.http.HttpResponseStatus">valueOf</span><span class="delimiter">(</span><a href="#44732" title="Int">statusCode</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String, value: String)Unit" id="38962">header</a><span class="delimiter">(</span><a title="String" id="44735">name</a>: <span title="String">String</span>, <a title="String" id="44736">value</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#38967" title="U">res</a>.<span title="(x$1: java.lang.String, x$2: Any)Unit">addHeader</span><span class="delimiter">(</span><a href="#44735" title="String">name</a>, <a href="#44736" title="String">value</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(url: String)Unit" id="38963">redirect</a><span class="delimiter">(</span><a title="String" id="44739">url</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#38967" title="U">res</a>.<span title="(x$1: org.jboss.netty.handler.codec.http.HttpResponseStatus)Unit">setStatus</span><span class="delimiter">(</span><span title="object org.jboss.netty.handler.codec.http.HttpResponseStatus">HttpResponseStatus</span>.<span title="org.jboss.netty.handler.codec.http.HttpResponseStatus">FOUND</span><span class="delimiter">)</span>
    <a href="#38967" title="U">res</a>.<span title="(x$1: java.lang.String, x$2: Any)Unit">setHeader</span><span class="delimiter">(</span>HttpHeaders.Names.<span title="java.lang.String(&quot;Location&quot;)">LOCATION</span>, <a href="#44739" title="String">url</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; java.io.ByteArrayOutputStream" id="38964">outputStream</a> = <a href="#38959" title="=&gt; java.io.ByteArrayOutputStream">byteOutputStream</a>

  <span class="keyword">def</span> <a title="(resCookies: Seq[unfiltered.Cookie])Unit" id="38965">cookies</a><span class="delimiter">(</span><a title="Seq[unfiltered.Cookie]" id="44752">resCookies</a>: <span title="Seq[unfiltered.Cookie]">Seq</span><span class="delimiter">[</span>Cookie<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> org.jboss.netty.handler.codec.http.<span class="delimiter">{</span>DefaultCookie, CookieEncoder<span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#44752" title="Seq[unfiltered.Cookie]">resCookies</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.jboss.netty.handler.codec.http.CookieEncoder" id="44756">cookieEncoder</a> = <span title="org.jboss.netty.handler.codec.http.CookieEncoder" class="keyword">new</span> <span title="org.jboss.netty.handler.codec.http.CookieEncoder">CookieEncoder</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <a href="#44752" title="Seq[unfiltered.Cookie]">resCookies</a>.<span title="(f: unfiltered.Cookie =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="unfiltered.Cookie" id="44781">c</a> =&gt;
        <span class="keyword">val</span> <a title="org.jboss.netty.handler.codec.http.DefaultCookie" id="44782">nc</a> = <span title="org.jboss.netty.handler.codec.http.DefaultCookie" class="keyword">new</span> <span title="org.jboss.netty.handler.codec.http.DefaultCookie">DefaultCookie</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16946" title="=&gt; String">name</a>, <a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16948" title="=&gt; String">value</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16950" title="=&gt; Option[String]">domain</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#44782" title="org.jboss.netty.handler.codec.http.DefaultCookie">nc</a>.<span title="(x$1: java.lang.String)Unit">setDomain</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16950" title="=&gt; Option[String]">domain</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16952" title="=&gt; Option[String]">path</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#44782" title="org.jboss.netty.handler.codec.http.DefaultCookie">nc</a>.<span title="(x$1: java.lang.String)Unit">setPath</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16952" title="=&gt; Option[String]">path</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16954" title="=&gt; Option[Int]">maxAge</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#44782" title="org.jboss.netty.handler.codec.http.DefaultCookie">nc</a>.<span title="(x$1: Int)Unit">setMaxAge</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16954" title="=&gt; Option[Int]">maxAge</a>.<span title="=&gt; Int">get</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16956" title="=&gt; Option[Boolean]">secure</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#44782" title="org.jboss.netty.handler.codec.http.DefaultCookie">nc</a>.<span title="(x$1: Boolean)Unit">setSecure</span><span class="delimiter">(</span><a href="#44781" title="unfiltered.Cookie">c</a>.<a href="../unfiltered/cookies.scala.html#16956" title="=&gt; Option[Boolean]">secure</a>.<span title="=&gt; Boolean">get</span><span class="delimiter">)</span>
        <a href="#44756" title="org.jboss.netty.handler.codec.http.CookieEncoder">cookieEncoder</a>.<span title="(x$1: org.jboss.netty.handler.codec.http.Cookie)Unit">addCookie</span><span class="delimiter">(</span><a href="#44782" title="org.jboss.netty.handler.codec.http.DefaultCookie">nc</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#38967" title="U">res</a>.<span title="(x$1: java.lang.String, x$2: Any)Unit">addHeader</span><span class="delimiter">(</span>HttpHeaders.Names.<span title="java.lang.String(&quot;Set-Cookie&quot;)">SET_COOKIE</span>, <a href="#44756" title="org.jboss.netty.handler.codec.http.CookieEncoder">cookieEncoder</a>.<span title="()java.lang.String">encode</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>netty<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object unfiltered.netty.URLParser" id="9668">URLParser</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(enc: String)Map[String,Seq[String]]" id="42987">urldecode</a><span class="delimiter">(</span><a title="String" id="42988">enc</a>: <span title="String">String</span><span class="delimiter">)</span> : <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(raw: String)java.lang.String" id="44855">decode</a><span class="delimiter">(</span><a title="String" id="44857">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="object java.net.URLDecoder">URLDecoder</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">decode</span><span class="delimiter">(</span><a href="#44857" title="String">raw</a>, <a href="#9660" title="object unfiltered.netty.HttpConfig">HttpConfig</a>.<a href="#42965" title="=&gt; java.lang.String">DEFAULT_CHARSET</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[(java.lang.String, java.lang.String)]" id="44856">pairs</a> = <a href="#42988" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">enc</a>.<span title="(separator: Char)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="Char(\'&amp;\')" class="char">'&amp;'</span><span class="delimiter">)</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[(java.lang.String, java.lang.String)])(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],(java.lang.String, java.lang.String),Array[(java.lang.String, java.lang.String)]])Array[(java.lang.String, java.lang.String)]">flatMap</span> <span title="(xs: Array[(java.lang.String, java.lang.String)])scala.collection.mutable.ArrayOps[(java.lang.String, java.lang.String)]" class="delimiter">{</span>
      <a href="#45333" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a>.<span title="(separator: Char)Array[String]">split</span><span class="delimiter">(</span><span title="Char(\'=\')" class="char">'='</span><span class="delimiter">)</span> <span title="List[(java.lang.String, java.lang.String)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#45357" title="List[(java.lang.String, java.lang.String)]">Array</a><span class="delimiter">(</span><a title="String" id="45363">key</a>, <a title="String" id="45364">value</a><span class="delimiter">)</span> =&gt; <span title="(xs: (java.lang.String, java.lang.String)*)List[(java.lang.String, java.lang.String)]">List</span><span class="delimiter">(</span><span title="(_1: java.lang.String, _2: java.lang.String)(java.lang.String, java.lang.String)" class="delimiter">(</span><a href="#44855" title="(raw: String)java.lang.String">decode</a><span class="delimiter">(</span><a href="#45363" title="String">key</a><span class="delimiter">)</span>, <a href="#44855" title="(raw: String)java.lang.String">decode</a><span class="delimiter">(</span><a href="#45364" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#45378" title="List[(java.lang.String, java.lang.String)]">Array</a><span class="delimiter">(</span><a title="String" id="45384">key</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#45384" title="String">key</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> =&gt; <span title="(xs: (java.lang.String, java.lang.String)*)List[(java.lang.String, java.lang.String)]">List</span><span class="delimiter">(</span><span title="(_1: java.lang.String, _2: java.lang.String)(java.lang.String, java.lang.String)" class="delimiter">(</span><a href="#44855" title="(raw: String)java.lang.String">decode</a><span class="delimiter">(</span><a href="#45384" title="String">key</a><span class="delimiter">)</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="=&gt; Array[(java.lang.String, java.lang.String)]">reverse</span>
    <span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(d: String =&gt; List[String])scala.collection.immutable.Map[String,List[String]]">withDefault</span> <span class="delimiter">{</span><a title="String" id="45698">_</a> =&gt; <span title="object Nil">Nil</span> <span class="delimiter">}</span> <a href="#45691" title="(z: scala.collection.immutable.Map[String,List[String]])(op: (scala.collection.immutable.Map[String,List[String]], (java.lang.String, java.lang.String)) =&gt; scala.collection.immutable.Map[String,List[String]])scala.collection.immutable.Map[String,List[String]]">/:</a> <a href="#44856" title="(xs: Array[(java.lang.String, java.lang.String)])scala.collection.mutable.ArrayOps[(java.lang.String, java.lang.String)]">pairs</a><span class="delimiter">)</span> <a href="#45975" title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">(</span><a title="scala.collection.immutable.Map[String,List[String]]" id="45985">m</a>, <span class="delimiter">(</span><a title="java.lang.String" id="45988">k</a>, <a title="java.lang.String" id="45989">v</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#45985" title="scala.collection.immutable.Map[String,List[String]]">m</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span><a href="#45988" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">k</a> <span title="(y: List[String])(java.lang.String, List[String])">-&gt;</span> <span class="delimiter">(</span><a href="#45989" title="java.lang.String">v</a> <a href="#46066" title="(x: String)List[String]">::</a> <a href="#45985" title="(key: String)List[String]">m</a><span class="delimiter">(</span><a href="#45988" title="java.lang.String">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>