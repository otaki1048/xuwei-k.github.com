<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>unfiltered/request/params.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">import</span> unfiltered.response.ResponseFunction
<span class="keyword">import</span> scala.util.control.<span title="object scala.util.control.Exception">Exception</span>.allCatch

<span class="comment">/** Basic parameter acess, and a pattern matching extractor in Extract. */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.Params" id="10078">Params</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="scala.collection.Map[String,Seq[String]]" id="33989">Map</a> = scala.collection.<span title="scala.collection.Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="comment">/**
   * Given a req, extract the request params into a (Map[String, Seq[String]], request).
   * The Map is assigned a default value of Nil, so param(&quot;p&quot;) would return Nil if there
   * is no such parameter, or (as normal for servlets) a single empty string if the
   * parameter was supplied without a value. */</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Some[scala.collection.immutable.Map[String,Seq[String]]]" id="33990">unapply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="33992">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="35679">req</a>: <a href="HttpRequest.scala.html#9948" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterator[String]" id="35682">names</a> = <a href="#35679" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#10674" title="=&gt; Iterator[String]">parameterNames</a>
    <span title="(x: scala.collection.immutable.Map[String,Seq[String]])Some[scala.collection.immutable.Map[String,Seq[String]]]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,Seq[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> <a href="#35685" title="(z: scala.collection.immutable.Map[String,Seq[String]])(op: (scala.collection.immutable.Map[String,Seq[String]], String) =&gt; scala.collection.immutable.Map[String,Seq[String]])scala.collection.immutable.Map[String,Seq[String]]">/:</a> <a href="#35682" title="Iterator[String]">names</a><span class="delimiter">)</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.collection.immutable.Map[String,Seq[String]]" id="35713">m</a>, <a title="String" id="35714">n</a><span class="delimiter">)</span> =&gt;
        <a href="#35713" title="scala.collection.immutable.Map[String,Seq[String]]">m</a> <span title="(kv: (String, Seq[String]))scala.collection.immutable.Map[String,Seq[String]]">+</span> <span class="delimiter">(</span><a href="#35714" title="(x: String)ArrowAssoc[String]">n</a> <span title="(y: Seq[String])(String, Seq[String])">-&gt;</span> <a href="#35679" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#10675" title="(param: String)Seq[String]">parameterValues</a><span class="delimiter">(</span><a href="#35714" title="String">n</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(d: Seq[String])scala.collection.immutable.Map[String,Seq[String]]">withDefaultValue</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A function Seq[String] =&gt; Option[B]  used to test and transform values
   * from the parameter map. Conditions may be chained with `~&gt;` */</span>
  <span class="keyword">class</span> <a title="class ParamMapper[B] extends java.lang.Object with Seq[String] =&gt; Option[B] with ScalaObject" id="33993">ParamMapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="33994">B</a><span class="delimiter">]</span><a href="#33993" title="ScalaObject" class="delimiter">(</a><a title="Seq[String] =&gt; Option[B]" id="35073">f</a>: Seq<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span class="delimiter">(</span>Seq<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(a: Seq[String])Option[B]" id="35068">apply</a><span class="delimiter">(</span><a title="Seq[String]" id="72626">a</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#35073" title="(v1: Seq[String])Option[B]">f</a><span class="delimiter">(</span><a href="#72626" title="Seq[String]">a</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[C](that: Option[B] =&gt; Option[C])unfiltered.request.Params.ParamMapper[C]" id="35069">~&gt;</a> <span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="35071">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[B] =&gt; Option[C]" id="72631">that</a>: Option<span class="delimiter">[</span>B<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>C<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="unfiltered.request.Params.ParamMapper[C]" class="keyword">new</span> <a href="#33993" title="unfiltered.request.Params.ParamMapper[C]">ParamMapper</a><span class="delimiter">(</span><span class="delimiter">{</span> <a href="#35073" title="Seq[String] =&gt; Option[B]">f</a> <span title="(g: Option[B] =&gt; Option[C])Seq[String] =&gt; Option[C]">andThen</span> <a href="#72631" title="Option[B] =&gt; Option[C]">that</a> <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Maps first parameter, if present. */</span>
  <span class="keyword">val</span> <a title="unfiltered.request.Params.ParamMapper[String]" id="33995">first</a> = <span title="unfiltered.request.Params.ParamMapper[String]" class="keyword">new</span> <a href="#33993" title="unfiltered.request.Params.ParamMapper[String]">ParamMapper</a><span class="delimiter">(</span><a href="#35076" title="Seq[String]">_</a>.<span title="=&gt; Option[String]">headOption</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Base class for parameter extractor objects, may be extended inline with
   * chained ParamMapper objects. */</span>
  <span class="keyword">class</span> <a title="class Extract[E, T] extends java.lang.Object with ScalaObject" id="33997">Extract</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="33998">E</a>,<a title="&gt;: Nothing &lt;: Any" id="33999">T</a><span class="delimiter">]</span><a href="#33997" title="ScalaObject" class="delimiter">(</a><a title="unfiltered.request.Params.Map =&gt; Option[T]" id="34029">f</a>: Map =&gt; Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(name: String, f: Seq[String] =&gt; Option[T])unfiltered.request.Params.Extract[E,T]" id="34019" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="34025">name</a>: <span title="String">String</span>, <a title="Seq[String] =&gt; Option[T]" id="34026">f</a>: Seq<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#33997" title="Extract.this.type" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">{</span> params: <span title="unfiltered.request.Params.Map">Map</span> =&gt; <a href="#34026" title="(v1: Seq[String])Option[T]">f</a><span class="delimiter">(</span><a href="#72654" title="(key: String)Seq[String]">params</a><span class="delimiter">(</span><a href="#34025" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(params: unfiltered.request.Params.Map)Option[T]" id="34020">unapply</a><span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="36261">params</a>: <span title="unfiltered.request.Params.Map">Map</span><span class="delimiter">)</span> = <a href="#34029" title="(v1: unfiltered.request.Params.Map)Option[T]">f</a><span class="delimiter">(</span><a href="#36261" title="unfiltered.request.Params.Map">params</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Construct a parameter predicate */</span>
  <span class="keyword">def</span> <a title="[E, A](p: A =&gt; Boolean)Option[A] =&gt; Option[A]" id="34000">pred</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="34003">E</a>,<a title="&gt;: Nothing &lt;: Any" id="34004">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; Boolean" id="48033">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a title="Option[A]" id="72682">opt</a> =&gt; <a href="#72682" title="Option[A]">opt</a> <span title="(p: A =&gt; Boolean)Option[A]">filter</span> <a href="#48033" title="A =&gt; Boolean">p</a>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Int]" id="34005">int</a><span class="delimiter">(</span><a title="Option[String]" id="72684">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#72684" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Int])Option[Int]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="72691">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Int)Option[Int]">opt</span> <span class="delimiter">{</span> <a href="#72691" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Int">toInt</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Long]" id="34006">long</a><span class="delimiter">(</span><a title="Option[String]" id="72704">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#72704" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Long])Option[Long]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="72711">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Long)Option[Long]">opt</span> <span class="delimiter">{</span> <a href="#72711" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Long">toLong</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Float]" id="34007">float</a><span class="delimiter">(</span><a title="Option[String]" id="72726">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#72726" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Float])Option[Float]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="72733">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Float)Option[Float]">opt</span> <span class="delimiter">{</span> <a href="#72733" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Float">toFloat</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(os: Option[String])Option[Double]" id="34008">double</a><span class="delimiter">(</span><a title="Option[String]" id="72748">os</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#72748" title="Option[String]">os</a>.<span title="(f: String =&gt; Option[Double])Option[Double]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="72755">s</a> =&gt; <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; Double)Option[Double]">opt</span> <span class="delimiter">{</span> <a href="#72755" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="=&gt; Double">toDouble</span> <span class="delimiter">}</span> <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="Option[Int] =&gt; Option[Int]" id="34009">even</a> = <a href="#34000" title="(p: Int =&gt; Boolean)Option[Int] =&gt; Option[Int]">pred</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a href="#72598" title="Int">_</a>:<span title="Int">Int</span><span class="delimiter">)</span> <span title="(x: Int)Int">%</span> <span title="Int(2)" class="int">2</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="Option[Int] =&gt; Option[Int]" id="34011">odd</a> = <a href="#34000" title="(p: Int =&gt; Boolean)Option[Int] =&gt; Option[Int]">pred</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a href="#72613" title="Int">_</a>:<span title="Int">Int</span><span class="delimiter">)</span> <span title="(x: Int)Int">%</span> <span title="Int(2)" class="int">2</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(s: Option[String])Option[java.lang.String]" id="34013">trimmed</a><span class="delimiter">(</span><a title="Option[String]" id="72770">s</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#72770" title="Option[String]">s</a> <span title="(f: String =&gt; java.lang.String)Option[java.lang.String]">map</span> <span class="delimiter">{</span> <a href="#72777" title="String">_</a>.<span title="()java.lang.String">trim</span> <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="Option[String] =&gt; Option[String]" id="34014">nonempty</a> = <a href="#34000" title="(p: String =&gt; Boolean)Option[String] =&gt; Option[String]">pred</a> <span class="delimiter">{</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#48040" title="String">_</a>:<span title="String">String</span><span class="delimiter">)</span>.<span title="()Boolean">isEmpty</span> <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Fined-grained error reporting for arbitrarily many failing parameters.
 * Import QParams._ to use; see ParamsSpec for examples. */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.QParams" id="10080">QParams</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="[E]List[unfiltered.request.QParams.Fail[E]]" id="47680">Log</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47681">E</a><span class="delimiter">]</span> = <span title="List[unfiltered.request.QParams.Fail[E]]">List</span><span class="delimiter">[</span>Fail<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="[E, A](unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], A)" id="47682">QueryFn</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47683">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47684">A</a><span class="delimiter">]</span> = <span class="delimiter">(</span>Params.Map, Option<span class="delimiter">[</span>String<span class="delimiter">]</span>, Log<span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
    <span class="delimiter">(</span>Option<span class="delimiter">[</span>String<span class="delimiter">]</span>, Log<span class="delimiter">[</span>E<span class="delimiter">]</span>, A<span class="delimiter">)</span>
  <span class="keyword">type</span> <a title="[E, A]Either[unfiltered.request.QParams.Log[E],A]" id="47685">QueryResult</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47686">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47687">A</a><span class="delimiter">]</span> = <span title="Either[unfiltered.request.QParams.Log[E],A]">Either</span><span class="delimiter">[</span>Log<span class="delimiter">[</span>E<span class="delimiter">]</span>, A<span class="delimiter">]</span>
  <span class="comment">/** Left if the query has failed, right if it has not (but may be empty) */</span>
  <span class="keyword">type</span> <a title="[E, A]Either[E,Option[A]]" id="47688">Report</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47689">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47690">A</a><span class="delimiter">]</span> = <span title="Either[E,Option[A]]">Either</span><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="[E, A, B]Option[A] =&gt; unfiltered.request.QParams.Report[E,B]" id="47691">Reporter</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47692">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47693">A</a>,<a title="&gt;: Nothing &lt;: Any" id="47694">B</a><span class="delimiter">]</span> = Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Report<span class="delimiter">[</span>E,B<span class="delimiter">]</span>

  case <span class="keyword">class</span> <a title="class Fail[E] extends java.lang.Object with ScalaObject with Product with Serializable" id="73399">Fail</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48784">E</a><span class="delimiter">]</span><a href="#73399" title="ScalaObject" class="delimiter">(</a><a title="String" id="73096">name</a>: <span title="String">String</span>, <a title="E" id="73097">error</a>: <a href="#48784" title="E">E</a><span class="delimiter">)</span>

  <span class="comment">/* Implicitly provide 'orFail' for QueryResult (either) type. */</span>
  case <span class="keyword">class</span> <a title="class QueryResultX[E, A] extends java.lang.Object with ScalaObject with Product with Serializable" id="73393">QueryResultX</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="72872">E</a>,<a title="&gt;: Nothing &lt;: Any" id="72873">A</a><span class="delimiter">]</span><a href="#73393" title="ScalaObject" class="delimiter">(</a><a title="unfiltered.request.QParams.QueryResult[E,A]" id="72911">r</a>: <span title="unfiltered.request.QParams.QueryResult[E,A]">QueryResult</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[B &gt;: A](handler: unfiltered.request.QParams.Log[E] =&gt; B)B" id="48617">orFail</a><span class="delimiter">[</span><a title="&gt;: A &lt;: Any" id="48619">B</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.QParams.Log[E] =&gt; B" id="48627">handler</a>: Log<span class="delimiter">[</span>E<span class="delimiter">]</span> =&gt; B<span class="delimiter">)</span> =
      <a href="#72911" title="=&gt; unfiltered.request.QParams.QueryResult[E,A]">r</a>.<span title="=&gt; Either.LeftProjection[unfiltered.request.QParams.Log[E],A]">left</span>.<span title="(f: unfiltered.request.QParams.Log[E] =&gt; B)Product with Either[B,A] with Serializable">map</span><span class="delimiter">(</span><a href="#48627" title="unfiltered.request.QParams.Log[E] =&gt; B">handler</a><span class="delimiter">)</span> <span title="B" class="keyword">match</span> <span class="delimiter">{</span> <span class="comment">// i.e. .merge, in 2.8</span>
        <span class="keyword">case</span> <span title="B">Left</span><span class="delimiter">(</span><a title="B" id="48677">v</a><span class="delimiter">)</span> =&gt; <a href="#48677" title="B">v</a>
        <span class="keyword">case</span> <span title="A">Right</span><span class="delimiter">(</span><a title="A" id="48715">v</a><span class="delimiter">)</span> =&gt; <a href="#48715" title="A">v</a>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[E, A](r: unfiltered.request.QParams.QueryResult[E,A])unfiltered.request.QParams.QueryResultX[E,A]" id="47704">queryOrElse</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47707">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47708">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.QParams.QueryResult[E,A]" id="47796">r</a>: <span title="unfiltered.request.QParams.QueryResult[E,A]">QueryResult</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73393" title="unfiltered.request.QParams.QueryResultX[E,A]">QueryResultX</a><span class="delimiter">[</span>E,A<span class="delimiter">]</span> =
    <a href="#73393" title="(r: unfiltered.request.QParams.QueryResult[E,A])unfiltered.request.QParams.QueryResultX[E,A]">QueryResultX</a><span class="delimiter">(</span><a href="#47796" title="unfiltered.request.QParams.QueryResult[E,A]">r</a><span class="delimiter">)</span>

  <span class="comment">/* The query-building monad, a variant of state-transformer. */</span>
  case <span class="keyword">class</span> <a title="class QueryM[E, A] extends java.lang.Object with ScalaObject with Product with Serializable" id="73388">QueryM</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="72926">E</a>,<a title="&gt;: Nothing &lt;: Any" id="72927">A</a><span class="delimiter">]</span><a href="#73388" title="ScalaObject" class="delimiter">(</a><a title="(unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], A)" id="72933">exec</a>: <span title="(unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], A)">QueryFn</span><span class="delimiter">[</span>E,A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[B](f: A =&gt; unfiltered.request.QParams.QueryM[E,B])unfiltered.request.QParams.QueryM[E,B]" id="47996">flatMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47998">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; unfiltered.request.QParams.QueryM[E,B]" id="48063">f</a>: A =&gt; QueryM<span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,B]">QueryM</a><span class="delimiter">[</span>E,B<span class="delimiter">]</span> =
      <a href="#73388" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], B))unfiltered.request.QParams.QueryM[E,B]">QueryM</a> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="72940">params</a>, <a title="Option[String]" id="72941">key0</a>, <a title="unfiltered.request.QParams.Log[E]" id="72942">log0</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#72944" title="(Option[String], unfiltered.request.QParams.Log[E], A)" class="delimiter">(</a><a href="#72943" title="Option[String]" id="72944">key1</a>, <a href="#72943" title="unfiltered.request.QParams.Log[E]" id="72945">log1</a>, <a href="#72943" title="A" id="72946">value</a><span class="delimiter">)</span> = <a href="#72933" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span title="(Option[String], unfiltered.request.QParams.Log[E], A) @unchecked" class="delimiter">(</span><a href="#72940" title="unfiltered.request.Params.Map">params</a>, <a href="#72941" title="Option[String]">key0</a>, <a href="#72942" title="unfiltered.request.QParams.Log[E]">log0</a><span class="delimiter">)</span>
          <a href="#48063" title="(v1: A)unfiltered.request.QParams.QueryM[E,B]">f</a><span class="delimiter">(</span><a href="#72946" title="A">value</a><span class="delimiter">)</span>.<a href="#72933" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], B)">exec</a><span class="delimiter">(</span><a href="#72940" title="unfiltered.request.Params.Map">params</a>, <a href="#72944" title="Option[String]">key1</a>, <a href="#72945" title="unfiltered.request.QParams.Log[E]">log1</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/* Compose monads, ignoring value of this. */</span>
    <span class="keyword">def</span> <a title="[B](that: unfiltered.request.QParams.QueryM[E,B])unfiltered.request.QParams.QueryM[E,B]" id="47999">andThen</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48001">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.QParams.QueryM[E,B]" id="72988">that</a>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,B]">QueryM</a><span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,B]">QueryM</a><span class="delimiter">[</span>E,B<span class="delimiter">]</span> =
      <a href="#47996" title="(f: A =&gt; unfiltered.request.QParams.QueryM[E,B])unfiltered.request.QParams.QueryM[E,B]">flatMap</a><span class="delimiter">(</span><a title="A" id="72994">_</a> =&gt; <a href="#72988" title="unfiltered.request.QParams.QueryM[E,B]">that</a><span class="delimiter">)</span>

    <span class="comment">/* This map is not defined as flatMap(unit(f(_))), as expected.
       If any errors have been accumulated, it does NOT run the
       query function. */</span>
    <span class="keyword">def</span> <a title="[B](f: A =&gt; B)unfiltered.request.QParams.QueryM[E,unfiltered.request.QParams.QueryResult[E,B]]" id="48002">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48004">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; B" id="48227">f</a>: A =&gt; B<span class="delimiter">)</span>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,unfiltered.request.QParams.QueryResult[E,B]]">QueryM</a><span class="delimiter">[</span>E,QueryResult<span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#73388" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], unfiltered.request.QParams.QueryResult[E,B]))unfiltered.request.QParams.QueryM[E,unfiltered.request.QParams.QueryResult[E,B]]">QueryM</a> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="73000">params</a>, <a title="Option[String]" id="73001">key0</a>, <a title="unfiltered.request.QParams.Log[E]" id="73002">log0</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#73004" title="(Option[String], unfiltered.request.QParams.Log[E], A)" class="delimiter">(</a><a href="#73003" title="Option[String]" id="73004">key1</a>, <a href="#73003" title="unfiltered.request.QParams.Log[E]" id="73005">log1</a>, <a href="#73003" title="A" id="73006">value</a><span class="delimiter">)</span> = <a href="#72933" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span title="(Option[String], unfiltered.request.QParams.Log[E], A) @unchecked" class="delimiter">(</span><a href="#73000" title="unfiltered.request.Params.Map">params</a>, <a href="#73001" title="Option[String]">key0</a>, <a href="#73002" title="unfiltered.request.QParams.Log[E]">log0</a><span class="delimiter">)</span>
          <span title="(_1: Option[String], _2: unfiltered.request.QParams.Log[E], _3: unfiltered.request.QParams.QueryResult[E,B])(Option[String], unfiltered.request.QParams.Log[E], unfiltered.request.QParams.QueryResult[E,B])" class="delimiter">(</span><a href="#73004" title="Option[String]">key1</a>, <a href="#73005" title="unfiltered.request.QParams.Log[E]">log1</a>, <a href="#73005" title="unfiltered.request.QParams.Log[E]">log1</a> <span title="unfiltered.request.QParams.QueryResult[E,B]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Right[Nothing,B]">Nil</span> =&gt; <span title="(b: B)Right[Nothing,B]">Right</span><span class="delimiter">(</span><a href="#48227" title="(v1: A)B">f</a><span class="delimiter">(</span><a href="#73006" title="A">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Left[List[unfiltered.request.QParams.Fail[E]],Nothing]">_</span> =&gt; <span title="(a: List[unfiltered.request.QParams.Fail[E]])Left[List[unfiltered.request.QParams.Fail[E]],Nothing]">Left</span><span class="delimiter">(</span><a href="#73005" title="unfiltered.request.QParams.Log[E]">log1</a>.<span title="=&gt; List[unfiltered.request.QParams.Fail[E]]">reverse</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/* Combinator for filtering the value and tagging errors. */</span>
    <span class="keyword">def</span> <a title="[B](f: A =&gt; unfiltered.request.QParams.Report[E,B])unfiltered.request.QParams.QueryM[E,Option[B]]" id="48005">is</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48007">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; unfiltered.request.QParams.Report[E,B]" id="48014">f</a>: A =&gt; Report<span class="delimiter">[</span>E,B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,Option[B]]">QueryM</a><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#73388" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], Option[B]))unfiltered.request.QParams.QueryM[E,Option[B]]">QueryM</a> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="73053">params</a>, <a title="Option[String]" id="73054">key0</a>, <a title="unfiltered.request.QParams.Log[E]" id="73055">log0</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#73057" title="(Option[String], unfiltered.request.QParams.Log[E], A)" class="delimiter">(</a><a href="#73056" title="Option[String]" id="73057">key1</a>, <a href="#73056" title="unfiltered.request.QParams.Log[E]" id="73058">log1</a>, <a href="#73056" title="A" id="73059">value</a><span class="delimiter">)</span> = <a href="#72933" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span title="(Option[String], unfiltered.request.QParams.Log[E], A) @unchecked" class="delimiter">(</span><a href="#73053" title="unfiltered.request.Params.Map">params</a>, <a href="#73054" title="Option[String]">key0</a>, <a href="#73055" title="unfiltered.request.QParams.Log[E]">log0</a><span class="delimiter">)</span>
          <a href="#73057" title="Option[String]">key1</a> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], None.type)">None</span> =&gt; <span title="(_1: Option[String], _2: unfiltered.request.QParams.Log[E], _3: None.type)(Option[String], unfiltered.request.QParams.Log[E], None.type)" class="delimiter">(</span><a href="#73057" title="Option[String]">key1</a>, <a href="#73058" title="unfiltered.request.QParams.Log[E]">log1</a>, <span title="object None">None</span><span class="delimiter">)</span> <span class="comment">// do not record error</span>
            <span class="keyword">case</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])">Some</span><span class="delimiter">(</span><a title="String" id="73085">k</a><span class="delimiter">)</span> =&gt;
              <a href="#48014" title="(v1: A)unfiltered.request.QParams.Report[E,B]">f</a><span class="delimiter">(</span><a href="#73059" title="A">value</a><span class="delimiter">)</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="(None.type, List[unfiltered.request.QParams.Fail[E]], None.type)">Left</span><span class="delimiter">(</span><a title="E" id="73088">err</a><span class="delimiter">)</span> =&gt; <span title="(_1: None.type, _2: List[unfiltered.request.QParams.Fail[E]], _3: None.type)(None.type, List[unfiltered.request.QParams.Fail[E]], None.type)" class="delimiter">(</span><span title="object None">None</span>, <a href="#73399" title="(name: String, error: E)unfiltered.request.QParams.Fail[E]">Fail</a><span class="delimiter">(</span><a href="#73085" title="String">k</a>,<a href="#73088" title="E">err</a><span class="delimiter">)</span><a href="#73095" title="(x: unfiltered.request.QParams.Fail[E])List[unfiltered.request.QParams.Fail[E]]">::</a><a href="#73058" title="unfiltered.request.QParams.Log[E]">log1</a>, <span title="object None">None</span><span class="delimiter">)</span> <span class="comment">// do record</span>
                <span class="keyword">case</span> <span title="(Option[String], unfiltered.request.QParams.Log[E], Option[B])">Right</span><span class="delimiter">(</span><a title="Option[B]" id="73115">v</a><span class="delimiter">)</span> =&gt; <span title="(_1: Option[String], _2: unfiltered.request.QParams.Log[E], _3: Option[B])(Option[String], unfiltered.request.QParams.Log[E], Option[B])" class="delimiter">(</span><a href="#73057" title="Option[String]">key1</a>, <a href="#73058" title="unfiltered.request.QParams.Log[E]">log1</a>, <a href="#73115" title="Option[B]">v</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(params: unfiltered.request.Params.Map)A" id="48008">apply</a><span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="48538">params</a>: Params.<span title="unfiltered.request.Params.Map">Map</span><span class="delimiter">)</span> = <a href="#72933" title="(v1: unfiltered.request.Params.Map, v2: Option[String], v3: unfiltered.request.QParams.Log[E])(Option[String], unfiltered.request.QParams.Log[E], A)">exec</a><span class="delimiter">(</span><a href="#48538" title="unfiltered.request.Params.Map">params</a>, <span title="object None">None</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span>.<span title="=&gt; A">_3</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Create a validion token from a named value from the input Params.Map */</span>
  <span class="keyword">def</span> <a title="[E](key: String)unfiltered.request.QParams.QueryM[E,Option[String]]" id="47714">lookup</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47716">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="47989">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,Option[String]]">QueryM</a><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#73388" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], Option[String]))unfiltered.request.QParams.QueryM[E,Option[String]]">QueryM</a> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="73178">params</a>, <a title="Option[String]" id="73179">_</a>, <a title="unfiltered.request.QParams.Log[E]" id="73180">log0</a><span class="delimiter">)</span> =&gt;
        <span title="(_1: Some[String], _2: unfiltered.request.QParams.Log[E], _3: Option[String])(Some[String], unfiltered.request.QParams.Log[E], Option[String])" class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#47989" title="String">key</a><span class="delimiter">)</span>, <a href="#73180" title="unfiltered.request.QParams.Log[E]">log0</a>, <a href="#73178" title="unfiltered.request.Params.Map">params</a>.<span title="(key: String)Option[Seq[String]]">get</span><span class="delimiter">(</span><a href="#47989" title="String">key</a><span class="delimiter">)</span>.<span title="(f: Seq[String] =&gt; Option[String])Option[String]">flatMap</span> <span class="delimiter">{</span> <a href="#73205" title="Seq[String]">_</a>.<span title="=&gt; Option[String]">headOption</span> <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/** Create and name a validation token for an external input */</span>
  <span class="keyword">def</span> <a title="[E, A](key: String, value: Option[A])unfiltered.request.QParams.QueryM[E,Option[A]]" id="47717">external</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47720">E</a>, <a title="&gt;: Nothing &lt;: Any" id="47721">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="73211">key</a>: <span title="String">String</span>, <a title="Option[A]" id="73212">value</a>: <span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73388" title="unfiltered.request.QParams.QueryM[E,Option[A]]">QueryM</a><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#73388" title="(exec: (unfiltered.request.Params.Map, Option[String], unfiltered.request.QParams.Log[E]) =&gt; (Option[String], unfiltered.request.QParams.Log[E], Option[A]))unfiltered.request.QParams.QueryM[E,Option[A]]">QueryM</a> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="unfiltered.request.Params.Map" id="73220">params</a>, <a title="Option[String]" id="73221">_</a>, <a title="unfiltered.request.QParams.Log[E]" id="73222">log0</a><span class="delimiter">)</span> =&gt;
        <span title="(_1: Some[String], _2: unfiltered.request.QParams.Log[E], _3: Option[A])(Some[String], unfiltered.request.QParams.Log[E], Option[A])" class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#73211" title="String">key</a><span class="delimiter">)</span>, <a href="#73222" title="unfiltered.request.QParams.Log[E]">log0</a>, <a href="#73212" title="Option[A]">value</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/* Functions that are useful arguments to QueryM.is */</span>
  <span class="keyword">def</span> <a title="[E, A](err: E)Option[A] =&gt; unfiltered.request.QParams.Report[E,A]" id="47722">required</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47725">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47726">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E" id="48055">err</a>:<a href="#47725" title="E">E</a><span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">Reporter</span><span class="delimiter">[</span>E,A,A<span class="delimiter">]</span> = <a href="#73246" title="unfiltered.request.QParams.Report[E,A]" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Left[E,Nothing]">None</span> =&gt; <span title="(a: E)Left[E,Nothing]">Left</span><span class="delimiter">(</span><a href="#48055" title="E">err</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Right[Nothing,Option[A]]" id="73251">oa</a> =&gt; <span title="(b: Option[A])Right[Nothing,Option[A]]">Right</span><span class="delimiter">(</span><a href="#73251" title="Option[A]">oa</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[E, A](xs: Option[A])unfiltered.request.QParams.Report[E,Option[A]]" id="47727">optional</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47730">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47731">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A]" id="48204">xs</a>: <span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="unfiltered.request.QParams.Report[E,Option[A]]">Report</span><span class="delimiter">[</span>E,Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
    <span title="(b: Some[Option[A]])Right[Nothing,Some[Option[A]]]">Right</span><span class="delimiter">(</span><span title="(x: Option[A])Some[Option[A]]">Some</span><span class="delimiter">(</span><a href="#48204" title="Option[A]">xs</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** Promote c to an error reporter that fails if Some input is discarded */</span>
  <span class="keyword">def</span> <a title="[E, A, B](c: Option[A] =&gt; Option[B], err: A =&gt; E)Option[A] =&gt; unfiltered.request.QParams.Report[E,B]" id="47732">watch</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47736">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47737">A</a>,<a title="&gt;: Nothing &lt;: Any" id="47738">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A] =&gt; Option[B]" id="48023">c</a>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>B<span class="delimiter">]</span>, <a title="A =&gt; E" id="48024">err</a>: A =&gt; E<span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,B]">Reporter</span><span class="delimiter">[</span>E,A,B<span class="delimiter">]</span> = <a href="#73264" title="unfiltered.request.QParams.Report[E,B]" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Right[Nothing,None.type]">None</span> =&gt; <span title="(b: None.type)Right[Nothing,None.type]">Right</span><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="&lt;none&gt; extends Product with Serializable with Either[E,Some[B]]">Some</span><span class="delimiter">(</span><a title="A" id="73270">a</a><span class="delimiter">)</span> =&gt; <a href="#48023" title="(v1: Option[A])Option[B]">c</a><span class="delimiter">(</span><span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#73270" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: B =&gt; Right[Nothing,Some[B]])Option[Right[Nothing,Some[B]]]">map</span> <span class="delimiter">{</span> <a title="B" id="73279">b</a> =&gt; <span title="(b: Some[B])Right[Nothing,Some[B]]">Right</span><span class="delimiter">(</span><span title="(x: B)Some[B]">Some</span><span class="delimiter">(</span><a href="#73279" title="B">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(default: =&gt; Product with Serializable with Either[E,Some[B]])Product with Serializable with Either[E,Some[B]]">getOrElse</span> <span title="(a: E)Left[E,Nothing]">Left</span><span class="delimiter">(</span><a href="#48024" title="(v1: A)E">err</a><span class="delimiter">(</span><a href="#73270" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Convert a predicate into an error reporter */</span>
  <span class="keyword">def</span> <a title="[E, A](p: A =&gt; Boolean, err: A =&gt; E)Option[A] =&gt; unfiltered.request.QParams.Report[E,A]" id="47739">pred</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47742">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47743">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; Boolean" id="48180">p</a>: A =&gt; Boolean, <a title="A =&gt; E" id="48181">err</a>: A =&gt; E<span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">Reporter</span><span class="delimiter">[</span>E,A,A<span class="delimiter">]</span> =
    <a href="#47732" title="(c: Option[A] =&gt; Option[A], err: A =&gt; E)Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">watch</a><span class="delimiter">(</span><span class="delimiter">{</span><a href="#73316" title="Option[A]">_</a> <span title="(p: A =&gt; Boolean)Option[A]">filter</span> <a href="#48180" title="A =&gt; Boolean">p</a><span class="delimiter">}</span>, <a href="#48181" title="A =&gt; E">err</a><span class="delimiter">)</span>

  <span class="comment">/** Convert f into an error reporter that never reports errors */</span>
  <span class="keyword">def</span> <a title="[E, A](f: Option[A] =&gt; Option[A])Option[A] =&gt; unfiltered.request.QParams.Report[E,A]" id="47744">ignore</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47747">E</a>,<a title="&gt;: Nothing &lt;: Any" id="47748">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A] =&gt; Option[A]" id="73320">f</a>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">Reporter</span><span class="delimiter">[</span>E,A,A<span class="delimiter">]</span> =
    <a title="Option[A]" id="73324">opt</a> =&gt; <span title="(b: Option[A])Right[Nothing,Option[A]]">Right</span><span class="delimiter">(</span><a href="#73320" title="(v1: Option[A])Option[A]">f</a><span class="delimiter">(</span><a href="#73324" title="Option[A]">opt</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[E](e: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Int]" id="47749">int</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47751">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String =&gt; E" id="73330">e</a>: String =&gt; E<span class="delimiter">)</span> = <a href="#47732" title="(c: Option[String] =&gt; Option[Int], err: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Int]">watch</a><span class="delimiter">(</span><a href="#10078" title="object unfiltered.request.Params">Params</a>.<a href="#34005" title="(os: Option[String])Option[Int]">int</a>, <a href="#73330" title="String =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Long]" id="47752">long</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47754">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String =&gt; E" id="73343">e</a>: String =&gt; E<span class="delimiter">)</span> = <a href="#47732" title="(c: Option[String] =&gt; Option[Long], err: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,Long]">watch</a><span class="delimiter">(</span><a href="#10078" title="object unfiltered.request.Params">Params</a>.<a href="#34006" title="(os: Option[String])Option[Long]">long</a>, <a href="#73343" title="String =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]" id="47755">even</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47757">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int =&gt; E" id="73356">e</a>: Int =&gt; E<span class="delimiter">)</span> = <a href="#47732" title="(c: Option[Int] =&gt; Option[Int], err: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]">watch</a><span class="delimiter">(</span><a href="#10078" title="object unfiltered.request.Params">Params</a>.<a href="#34009" title="=&gt; Option[Int] =&gt; Option[Int]">even</a>, <a href="#73356" title="Int =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]" id="47758">odd</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47760">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int =&gt; E" id="73367">e</a>: Int =&gt; E<span class="delimiter">)</span> = <a href="#47732" title="(c: Option[Int] =&gt; Option[Int], err: Int =&gt; E)Option[Int] =&gt; unfiltered.request.QParams.Report[E,Int]">watch</a><span class="delimiter">(</span><a href="#10078" title="object unfiltered.request.Params">Params</a>.<a href="#34011" title="=&gt; Option[Int] =&gt; Option[Int]">odd</a>, <a href="#73367" title="Int =&gt; E">e</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E]=&gt; Option[String] =&gt; unfiltered.request.QParams.Report[E,String]" id="47761">trimmed</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47763">E</a><span class="delimiter">]</span> = <a href="#47744" title="[E, A](f: Option[A] =&gt; Option[A])Option[A] =&gt; unfiltered.request.QParams.Report[E,A]">ignore</a><span title="(f: Option[String] =&gt; Option[String])Option[String] =&gt; unfiltered.request.QParams.Report[E,String]" class="delimiter">[</span><a href="#47763" title="E">E</a>,<span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#10078" title="object unfiltered.request.Params">Params</a>.<a href="#34013" title="(s: Option[String])Option[java.lang.String]">trimmed</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[E](e: E)Option[String] =&gt; unfiltered.request.QParams.Report[E,String]" id="47764">nonempty</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="47766">E</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="E" id="48020">e</a>: <a href="#47766" title="E">E</a><span class="delimiter">)</span> = <a href="#47732" title="(c: Option[String] =&gt; Option[String], err: String =&gt; E)Option[String] =&gt; unfiltered.request.QParams.Report[E,String]">watch</a><span class="delimiter">(</span><a href="#10078" title="object unfiltered.request.Params">Params</a>.<a href="#34014" title="=&gt; Option[String] =&gt; Option[String]">nonempty</a>, <span class="delimiter">(</span>s: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#48020" title="E">e</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>