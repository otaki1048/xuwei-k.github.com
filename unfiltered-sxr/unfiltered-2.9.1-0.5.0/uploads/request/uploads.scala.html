<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>uploads/request/uploads.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">import</span> scala.util.control.<span title="object scala.util.control.Exception">Exception</span>.allCatch

<span class="keyword">import</span> javax.servlet.http.HttpServletRequest

<span class="keyword">import</span> org.apache.commons.<span class="delimiter">{</span>fileupload =&gt; fu<span class="delimiter">}</span>
<span class="keyword">import</span> fu.servlet.ServletFileUpload
<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File =&gt; JFile<span class="delimiter">}</span>

<span class="comment">/** Matches requests that have multipart content */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.MultiPart" id="10415">MultiPart</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(req: unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest])Option[unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]]" id="78492">unapply</a><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]" id="78494">req</a>: <a href="../../unfiltered/request/HttpRequest.scala.html#9948" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">HttpRequest</a><span class="delimiter">[</span>HttpServletRequest<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="Option[unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]]" class="keyword">if</span> <span class="delimiter">(</span><span title="object org.apache.commons.fileupload.servlet.ServletFileUpload">ServletFileUpload</span>.<span title="(x$1: javax.servlet.http.HttpServletRequest)Boolean">isMultipartContent</span><span class="delimiter">(</span><a href="#78494" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">req</a>.<a href="../../unfiltered/request/HttpRequest.scala.html#10666" title="=&gt; javax.servlet.http.HttpServletRequest">underlying</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="(x: unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest])Some[unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]]">Some</span><span class="delimiter">(</span><a href="#78494" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">req</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="object None">None</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class MultipartData[W] extends java.lang.Object with ScalaObject with Product with Serializable" id="79974">MultipartData</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="78563">W</a><span class="delimiter">]</span><a href="#79974" title="ScalaObject" class="delimiter">(</a><a title="String =&gt; Seq[String]" id="79136">params</a>: String =&gt; Seq<span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="String =&gt; W" id="79137">files</a>: String =&gt; W<span class="delimiter">)</span>

<span class="keyword">trait</span> <a title="trait FileWrapper extends java.lang.Object" id="10421">FileWrapper</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="=&gt; String" id="78611">name</a>: <span title="String">String</span>
  <span class="keyword">val</span> <a title="=&gt; String" id="78612">contentType</a>: <span title="String">String</span>
  <span class="keyword">def</span> <a title="(out: java.io.File)Option[java.io.File]" id="78613">write</a><span class="delimiter">(</span><a title="java.io.File" id="78615">out</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>JFile<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/** Represents an uploaded file loaded into memory (and possibly written to disk) */</span>
<span class="keyword">class</span> <a title="class DiskFileWrapper extends java.lang.Object with unfiltered.request.FileWrapper with ScalaObject" id="10422">DiskFileWrapper</a><a href="#10422" title="ScalaObject" class="delimiter">(</a><a title="org.apache.commons.fileupload.FileItem" id="78648">item</a>: fu.<span title="org.apache.commons.fileupload.FileItem">FileItem</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10421" title="unfiltered.request.FileWrapper">FileWrapper</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(out: java.io.File)Option[java.io.File]" id="78619">write</a><span class="delimiter">(</span><a title="java.io.File" id="78649">out</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>JFile<span class="delimiter">]</span> = <span class="keyword">try</span> <span class="delimiter">{</span>
    <a href="#78648" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="(x$1: java.io.File)Unit">write</span><span class="delimiter">(</span><a href="#78649" title="java.io.File">out</a><span class="delimiter">)</span>
    <span title="(x: java.io.File)Some[java.io.File]">Some</span><span class="delimiter">(</span><a href="#78649" title="java.io.File">out</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="78620">isInMemory</a> = <a href="#78648" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()Boolean">isInMemory</span>
  <span class="keyword">def</span> <a title="=&gt; Array[Byte]" id="78621">bytes</a> = <a href="#78648" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()Array[Byte]">get</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="78622">size</a> = <a href="#78648" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()Long">getSize</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="78623">name</a> = <a href="#78648" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()java.lang.String">getName</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="78625">contentType</a> = <a href="#78648" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()java.lang.String">getContentType</span>
<span class="delimiter">}</span>

<span class="comment">/** Represents an uploaded file exposing a stream to read its contents */</span>
<span class="keyword">class</span> <a title="class StreamedFileWrapper extends java.lang.Object with unfiltered.request.FileWrapper with unfiltered.request.io.FileIO with ScalaObject" id="10423">StreamedFileWrapper</a><a href="#10423" title="ScalaObject" class="delimiter">(</a><a title="org.apache.commons.fileupload.FileItemStream" id="78687">fstm</a>: fu.<span title="org.apache.commons.fileupload.FileItemStream">FileItemStream</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10421" title="unfiltered.request.FileWrapper">FileWrapper</a>
  <span class="keyword">with</span> unfiltered.request.io.<a href="io/files.scala.html#10406" title="unfiltered.request.io.FileIO">FileIO</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(out: java.io.File)Option[java.io.File]" id="78666">write</a><span class="delimiter">(</span><a title="java.io.File" id="78688">out</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>JFile<span class="delimiter">]</span> = <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; java.io.File)Option[java.io.File]">opt</span> <span class="delimiter">{</span>
    <a href="#78667" title="(v1: java.io.InputStream =&gt; java.io.File)java.io.File">stream</a> <span class="delimiter">{</span> <a title="java.io.InputStream" id="78700">stm</a> =&gt;
      <a href="io/files.scala.html#77872" title="(from: java.io.InputStream)(to: java.io.File)Unit">toFile</a><span class="delimiter">(</span><a href="#78700" title="java.io.InputStream">stm</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#78688" title="java.io.File">out</a><span class="delimiter">)</span>
      <a href="#78688" title="java.io.File">out</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T]=&gt; java.io.InputStream =&gt; T =&gt; T" id="78667">stream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="78669">T</a><span class="delimiter">]</span>: <span class="delimiter">(</span>java.io.InputStream =&gt; T<span class="delimiter">)</span> =&gt; T =
    <a href="#10424" title="object unfiltered.request.MultiPartParams">MultiPartParams</a>.<a href="#78706" title="object unfiltered.request.MultiPartParams.Streamed">Streamed</a>.<a href="#78728" title="[T](fstm: org.apache.commons.fileupload.FileItemStream)(f: java.io.InputStream =&gt; T)T">withStreamedFile</a><span title="(fstm: org.apache.commons.fileupload.FileItemStream)(f: java.io.InputStream =&gt; T)T" class="delimiter">[</span><a href="#78669" title="T">T</a><span class="delimiter">]</span><a href="#78738" title="java.io.InputStream =&gt; T" class="delimiter">(</a><a href="#78687" title="org.apache.commons.fileupload.FileItemStream">fstm</a><span class="delimiter">)</span>_
  <span class="keyword">val</span> <a title="java.lang.String" id="78670">name</a> = <a href="#78687" title="org.apache.commons.fileupload.FileItemStream">fstm</a>.<span title="()java.lang.String">getName</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="78672">contentType</a> = <a href="#78687" title="org.apache.commons.fileupload.FileItemStream">fstm</a>.<span title="()java.lang.String">getContentType</span>
<span class="delimiter">}</span>

<span class="comment">/** Extactors for multi-part form param processing
  * @note a request can go through one pass of this extractor
  * afterwards, the requests input stream will appear empty
  */</span>
<span class="keyword">object</span> <a title="object unfiltered.request.MultiPartParams" id="10424">MultiPartParams</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/** Stream-based multi-part form data extractor */</span>
  <span class="keyword">object</span> <a title="object unfiltered.request.MultiPartParams.Streamed" id="78706">Streamed</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> fu.<span class="delimiter">{</span>FileItemIterator, FileItemStream<span class="delimiter">}</span>
    <span class="keyword">import</span> fu.util.Streams

    case <span class="keyword">class</span> <a title="class FIIteratorWrapper extends java.lang.Object with Iterator[org.apache.commons.fileupload.FileItemStream] with ScalaObject with Product with Serializable" id="79158">FIIteratorWrapper</a><a href="#79158" title="ScalaObject" class="delimiter">(</a><a title="org.apache.commons.fileupload.FileItemIterator" id="79155">i</a>: <span title="org.apache.commons.fileupload.FileItemIterator">FileItemIterator</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="Iterator[org.apache.commons.fileupload.FileItemStream]">Iterator</span><span class="delimiter">[</span>FileItemStream<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="78758">hasNext</a>: <span title="Boolean">Boolean</span> = <a href="#79155" title="=&gt; org.apache.commons.fileupload.FileItemIterator">i</a>.<span title="()Boolean">hasNext</span>
      <span class="keyword">def</span> <a title="()org.apache.commons.fileupload.FileItemStream" id="78759">next</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="org.apache.commons.fileupload.FileItemStream">FileItemStream</span> = <a href="#79155" title="=&gt; org.apache.commons.fileupload.FileItemIterator">i</a>.<span title="()org.apache.commons.fileupload.FileItemStream">next</span>
    <span class="delimiter">}</span>

    <span class="comment">/** convert apache commons file iterator to scala iterator */</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit unfiltered.request.MultiPartParams.Streamed.acfi2si : (i: org.apache.commons.fileupload.FileItemIterator)unfiltered.request.MultiPartParams.Streamed.FIIteratorWrapper" id="78726">acfi2si</a><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemIterator" id="78812">i</a> : <span title="org.apache.commons.fileupload.FileItemIterator">FileItemIterator</span><span class="delimiter">)</span> = <span title="unfiltered.request.MultiPartParams.Streamed.FIIteratorWrapper" class="keyword">new</span> <a href="#79158" title="unfiltered.request.MultiPartParams.Streamed.FIIteratorWrapper">FIIteratorWrapper</a><span class="delimiter">(</span><a href="#78812" title="org.apache.commons.fileupload.FileItemIterator">i</a><span class="delimiter">)</span>

    <span class="comment">/**
      Provides extraction similar to MultiPartParams.Disk, except the second map will
      contain Map[String, Seq[StreamedFileWrapper]] rather than  Map[String, Seq[DiskFileWrapper]].
      @note the seq returned by keys will only return the `first` named value. This is a limitation
      on apache commons file upload streaming interface. To read from the stream iterator,
      you must read before #next is called or the stream read will fail. */</span>
    <span class="keyword">def</span> <a title="(req: unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest])unfiltered.request.MultipartData[Seq[unfiltered.request.StreamedFileWrapper]]" id="78727">apply</a><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]" id="78815">req</a>: <a href="../../unfiltered/request/HttpRequest.scala.html#9948" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">HttpRequest</a><span class="delimiter">[</span>HttpServletRequest<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; org.apache.commons.fileupload.FileItemIterator" id="78818">items</a> = <span title="org.apache.commons.fileupload.servlet.ServletFileUpload" class="keyword">new</span> <span title="org.apache.commons.fileupload.servlet.ServletFileUpload">ServletFileUpload</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: javax.servlet.http.HttpServletRequest)org.apache.commons.fileupload.FileItemIterator">getItemIterator</span><span class="delimiter">(</span><a href="#78815" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">req</a>.<a href="../../unfiltered/request/HttpRequest.scala.html#10666" title="=&gt; javax.servlet.http.HttpServletRequest">underlying</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.apache.commons.fileupload.FileItemIterator" class="delimiter">[</span><span title="org.apache.commons.fileupload.FileItemIterator">FileItemIterator</span><span class="delimiter">]</span>
      <span class="comment">/** attempt to extract the first named param from the stream */</span>
      <span class="keyword">def</span> <a title="(name: String)Seq[String]" id="78819">extractParam</a><span class="delimiter">(</span><a title="String" id="78944">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
         <a href="#78726" title="implicit unfiltered.request.MultiPartParams.Streamed.acfi2si : (i: org.apache.commons.fileupload.FileItemIterator)unfiltered.request.MultiPartParams.Streamed.FIIteratorWrapper">items</a>.<span title="(p: org.apache.commons.fileupload.FileItemStream =&gt; Boolean)Option[org.apache.commons.fileupload.FileItemStream]">find</span><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemStream" id="79019">f</a> =&gt; <a href="#79019" title="org.apache.commons.fileupload.FileItemStream">f</a>.<span title="()java.lang.String">getFieldName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#78944" title="String">name</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#79019" title="org.apache.commons.fileupload.FileItemStream">f</a>.<span title="()Boolean">isFormField</span><span class="delimiter">)</span> <span title="Seq[String]" class="keyword">match</span> <span class="delimiter">{</span>
           <span class="keyword">case</span> <span title="Seq[String]">Some</span><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemStream" id="79026">p</a><span class="delimiter">)</span> =&gt; <span title="(elems: String*)Seq[String]">Seq</span><span class="delimiter">(</span><a href="#78731" title="(fstm: org.apache.commons.fileupload.FileItemStream)String">extractStr</a><span class="delimiter">(</span><a href="#79026" title="org.apache.commons.fileupload.FileItemStream">p</a><span class="delimiter">)</span><span class="delimiter">)</span>
           <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
         <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="comment">/** attempt to extract the first named file from the stream */</span>
      <span class="keyword">def</span> <a title="(name: String)Seq[unfiltered.request.StreamedFileWrapper]" id="78820">extractFile</a><span class="delimiter">(</span><a title="String" id="79052">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[unfiltered.request.StreamedFileWrapper]">Seq</span><span class="delimiter">[</span>StreamedFileWrapper<span class="delimiter">]</span> = <span class="delimiter">{</span>
         <a href="#78726" title="implicit unfiltered.request.MultiPartParams.Streamed.acfi2si : (i: org.apache.commons.fileupload.FileItemIterator)unfiltered.request.MultiPartParams.Streamed.FIIteratorWrapper">items</a>.<span title="(p: org.apache.commons.fileupload.FileItemStream =&gt; Boolean)Option[org.apache.commons.fileupload.FileItemStream]">find</span><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemStream" id="79125">f</a> =&gt; <a href="#79125" title="org.apache.commons.fileupload.FileItemStream">f</a>.<span title="()java.lang.String">getFieldName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#79052" title="String">name</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#79125" title="org.apache.commons.fileupload.FileItemStream">f</a>.<span title="()Boolean">isFormField</span><span class="delimiter">)</span> <span title="Seq[unfiltered.request.StreamedFileWrapper]" class="keyword">match</span> <span class="delimiter">{</span>
           <span class="keyword">case</span> <span title="Seq[unfiltered.request.StreamedFileWrapper]">Some</span><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemStream" id="79132">f</a><span class="delimiter">)</span> =&gt; <span title="(elems: unfiltered.request.StreamedFileWrapper*)Seq[unfiltered.request.StreamedFileWrapper]">Seq</span><span class="delimiter">(</span><span title="unfiltered.request.StreamedFileWrapper" class="keyword">new</span> <a href="#10423" title="unfiltered.request.StreamedFileWrapper">StreamedFileWrapper</a><span class="delimiter">(</span><a href="#79132" title="org.apache.commons.fileupload.FileItemStream">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
           <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
         <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#79974" title="(params: String =&gt; Seq[String], files: String =&gt; Seq[unfiltered.request.StreamedFileWrapper])unfiltered.request.MultipartData[Seq[unfiltered.request.StreamedFileWrapper]]">MultipartData</a><span class="delimiter">(</span><a href="#78819" title="(name: String)Seq[String]">extractParam</a> _,<a href="#78820" title="(name: String)Seq[unfiltered.request.StreamedFileWrapper]">extractFile</a> _<span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="[T](fstm: org.apache.commons.fileupload.FileItemStream)(f: java.io.InputStream =&gt; T)T" id="78728">withStreamedFile</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="78730">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemStream" id="78732">fstm</a>: <span title="org.apache.commons.fileupload.FileItemStream">FileItemStream</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.io.InputStream =&gt; T" id="78733">f</a>: java.io.InputStream =&gt; T<span class="delimiter">)</span>: <a href="#78730" title="T">T</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.io.InputStream" id="79150">stm</a> = <a href="#78732" title="org.apache.commons.fileupload.FileItemStream">fstm</a>.<span title="()java.io.InputStream">openStream</span>
      <span class="keyword">try</span> <span class="delimiter">{</span> <a href="#78733" title="(v1: java.io.InputStream)T">f</a><span class="delimiter">(</span><a href="#79150" title="java.io.InputStream">stm</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span> <a href="#79150" title="java.io.InputStream">stm</a>.<span title="()Unit">close</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fstm: org.apache.commons.fileupload.FileItemStream)String" id="78731">extractStr</a><span class="delimiter">(</span><a title="org.apache.commons.fileupload.FileItemStream" id="79029">fstm</a>: <span title="org.apache.commons.fileupload.FileItemStream">FileItemStream</span><span class="delimiter">)</span> = <a href="#78728" title="[T](fstm: org.apache.commons.fileupload.FileItemStream)(f: java.io.InputStream =&gt; T)T">withStreamedFile</a><span title="(fstm: org.apache.commons.fileupload.FileItemStream)(f: java.io.InputStream =&gt; String)String" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#79029" title="org.apache.commons.fileupload.FileItemStream">fstm</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.io.InputStream" id="79034">stm</a> =&gt;
      <span title="object org.apache.commons.fileupload.util.Streams">Streams</span>.<span title="(x$1: java.io.InputStream)java.lang.String">asString</span><span class="delimiter">(</span><a href="#79034" title="java.io.InputStream">stm</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** On-disk  multi-part form data extractor */</span>
  <span class="keyword">object</span> <a title="object unfiltered.request.MultiPartParams.Disk" id="78708">Disk</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#78712" title="unfiltered.request.MultiPartParams.AbstractDisk">AbstractDisk</a> <span class="delimiter">{</span>
    <span class="keyword">import</span> fu.disk.<span class="delimiter">{</span>DiskFileItemFactory<span class="delimiter">}</span>

    <span class="comment">// TODO come up with sensible default</span>
    <span class="keyword">val</span> <a title="Int" id="79175">memLimit</a> = Int.<span title="Int(2147483647)">MaxValue</span>
    <span class="keyword">val</span> <a title="java.io.File" id="79177">tempDir</a> = <span title="java.io.File" class="keyword">new</span> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(writeAfter: Int, writeDir: java.io.File)org.apache.commons.fileupload.disk.DiskFileItemFactory" id="79179">factory</a><span class="delimiter">(</span><a title="Int" id="79191">writeAfter</a>: <span title="Int">Int</span>, <a title="java.io.File" id="79192">writeDir</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span> = <span title="(x$1: Int, x$2: java.io.File)org.apache.commons.fileupload.disk.DiskFileItemFactory" class="keyword">new</span> <span title="org.apache.commons.fileupload.disk.DiskFileItemFactory">DiskFileItemFactory</span><span class="delimiter">(</span><a href="#79191" title="Int">writeAfter</a>, <a href="#79192" title="java.io.File">writeDir</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** All in memory multi-part form data extractor.
      This exposes a very specific class of file references
      intended for use in environments such as GAE where writing
      to disk is prohibited.
      */</span>
  <span class="keyword">object</span> <a title="object unfiltered.request.MultiPartParams.Memory" id="78710">Memory</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#78712" title="unfiltered.request.MultiPartParams.AbstractDisk">AbstractDisk</a> <span class="delimiter">{</span>

    <span class="keyword">class</span> <a title="class ByteArrayFileItem extends java.lang.Object with org.apache.commons.fileupload.FileItem with ScalaObject" id="79282">ByteArrayFileItem</a><a href="#79282" title="ScalaObject" class="delimiter">(</a><span class="keyword">var</span> <a title="String" id="79344">fieldName</a>: <span title="String">String</span>,
        <span class="keyword">val</span> <a title="String" id="79345">contentType</a>: <span title="String">String</span>,
     	  <span class="keyword">var</span> <a title="Boolean" id="79346">formField</a>: <span title="Boolean">Boolean</span>,
        <span class="keyword">val</span> <a title="String" id="79347">name</a>: <span title="String">String</span>,
        <span class="keyword">val</span> <a title="Int" id="79348">sizeThreshold</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> fu.<span title="org.apache.commons.fileupload.FileItem">FileItem</span> <span class="delimiter">{</span>

        <span class="keyword">import</span> java.io.<span class="delimiter">{</span>InputStream, ByteArrayInputStream,
          OutputStream, ByteArrayOutputStream<span class="delimiter">}</span>

        <span class="keyword">var</span> <a title="Option[Array[Byte]]" id="79314">cache</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="object None">None</span>
        <span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="79316">out</a> = <span title="java.io.ByteArrayOutputStream" class="keyword">new</span> <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="79318">delete</a> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Array[Byte]" id="79319">get</a> = <a href="#79314" title="=&gt; Option[Array[Byte]]">cache</a> <span title="(default: =&gt; Array[Byte])Array[Byte]">getOrElse</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Array[Byte]" id="79358">content</a> = <a href="#79316" title="=&gt; java.io.ByteArrayOutputStream">out</a>.<span title="()Array[Byte]">toByteArray</span>
          <a href="#79314" title="(x$1: Option[Array[Byte]])Unit">cache</a> = <span title="(x: Array[Byte])Some[Array[Byte]]">Some</span><span class="delimiter">(</span><a href="#79358" title="Array[Byte]">content</a><span class="delimiter">)</span>
          <a href="#79358" title="Array[Byte]">content</a>
        <span class="delimiter">}</span>

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="79320">getContentType</a> = <a href="#79345" title="=&gt; String">contentType</a>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="79321">getFieldName</a> = <a href="#79344" title="=&gt; String">fieldName</a>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.io.InputStream" id="79322">getInputStream</a>: <span title="java.io.InputStream">InputStream</span> = <span title="java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#79319" title="()Array[Byte]">get</a><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="79323">getName</a> = <a href="#79347" title="=&gt; String">name</a>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.io.ByteArrayOutputStream" id="79324">getOutputStream</a> = <a href="#79316" title="=&gt; java.io.ByteArrayOutputStream">out</a>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Long" id="79325">getSize</a> = <a href="#79319" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">get</a>.<span title="=&gt; Long">size</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(charset: String)java.lang.String" id="79326">getString</a><span class="delimiter">(</span><a title="String" id="79512">charset</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="(x$1: Array[Byte], x$2: java.lang.String)java.lang.String" class="keyword">new</span> <span title="java.lang.String">String</span><span class="delimiter">(</span><a href="#79319" title="()Array[Byte]">get</a>, <a href="#79512" title="String">charset</a><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="79327">getString</a> = <a href="#79326" title="(charset: String)java.lang.String">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Boolean" id="79328">isFormField</a> = <a href="#79346" title="=&gt; Boolean">formField</a>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Boolean" id="79329">isInMemory</a> = <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(value: String)Unit" id="79330">setFieldName</a><span class="delimiter">(</span><a title="String" id="79537">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#79344" title="(x$1: String)Unit">fieldName</a> = <a href="#79537" title="String">value</a> <span class="delimiter">}</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(state: Boolean)Unit" id="79331">setFormField</a><span class="delimiter">(</span><a title="Boolean" id="79539">state</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#79346" title="(x$1: Boolean)Unit">formField</a> = <a href="#79539" title="Boolean">state</a> <span class="delimiter">}</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(file: java.io.File)Unit" id="79332">write</a><span class="delimiter">(</span><a title="java.io.File" id="79541">file</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;File writing is not permitted&quot;)" class="string">&quot;File writing is not permitted&quot;</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class ByteArrayFileItemFactory extends java.lang.Object with org.apache.commons.fileupload.FileItemFactory with ScalaObject" id="79283">ByteArrayFileItemFactory</a> <a href="#79283" title="ScalaObject" class="keyword">extends</a> fu.<span title="org.apache.commons.fileupload.FileItemFactory">FileItemFactory</span> <span class="delimiter">{</span>
       <span class="keyword">override</span> <span class="keyword">def</span> <a title="(fieldName: String, contentType: String, isFormField: Boolean, fileName: String)unfiltered.request.MultiPartParams.Memory.ByteArrayFileItem" id="79544">createItem</a><span class="delimiter">(</span><a title="String" id="79546">fieldName</a>: <span title="String">String</span> , <a title="String" id="79547">contentType</a>: <span title="String">String</span> ,
    	                      <a title="Boolean" id="79548">isFormField</a>: <span title="Boolean">Boolean</span> , <a title="String" id="79549">fileName</a>: <span title="String">String</span> <span class="delimiter">)</span> = <span title="unfiltered.request.MultiPartParams.Memory.ByteArrayFileItem" class="keyword">new</span> <a href="#79282" title="unfiltered.request.MultiPartParams.Memory.ByteArrayFileItem">ByteArrayFileItem</a><span class="delimiter">(</span>
    	                        <a href="#79546" title="String">fieldName</a>, <a href="#79547" title="String">contentType</a>, <a href="#79548" title="Boolean">isFormField</a>, <a href="#79549" title="String">fileName</a>, Int.<span title="Int(2147483647)">MaxValue</span>
    	                      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Int" id="79284">memLimit</a> = Int.<span title="Int(2147483647)">MaxValue</span>
    <span class="keyword">val</span> <a title="java.io.File" id="79286">tempDir</a> = <span title="java.io.File" class="keyword">new</span> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(writeAfter: Int, writeDir: java.io.File)unfiltered.request.MultiPartParams.Memory.ByteArrayFileItemFactory" id="79288">factory</a><span class="delimiter">(</span><a title="Int" id="79552">writeAfter</a>: <span title="Int">Int</span>, <a title="java.io.File" id="79553">writeDir</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span> = <span title="unfiltered.request.MultiPartParams.Memory.ByteArrayFileItemFactory" class="keyword">new</span> <a href="#79283" title="unfiltered.request.MultiPartParams.Memory.ByteArrayFileItemFactory">ByteArrayFileItemFactory</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Base trait for disk-based multi part form data extraction */</span>
  <span class="keyword">trait</span> <a title="trait AbstractDisk extends java.lang.Object with ScalaObject" id="78712">AbstractDisk</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> fu.<span class="delimiter">{</span>FileItemFactory, FileItem =&gt; ACFileItem<span class="delimiter">}</span>
    <span class="keyword">import</span> java.util.<span class="delimiter">{</span>Iterator =&gt; JIterator<span class="delimiter">}</span>

    <span class="comment">/** @return the number of bytes to load a file into memory before writing to disk */</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="79162">memLimit</a>: <span title="Int">Int</span>
    <span class="comment">/** @return the directory to write temp files to */</span>
    <span class="keyword">def</span> <a title="=&gt; java.io.File" id="79163">tempDir</a>: <span title="java.io.File">JFile</span>
    <span class="comment">/** @return a configured FileItemFactory to parse a request */</span>
    <span class="keyword">def</span> <a title="(writeAfter: Int, writeDir: java.io.File)org.apache.commons.fileupload.FileItemFactory" id="79164">factory</a><span class="delimiter">(</span><a title="Int" id="79194">writeAfter</a>: <span title="Int">Int</span>, <a title="java.io.File" id="79195">writeDir</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span>: <span title="org.apache.commons.fileupload.FileItemFactory">FileItemFactory</span>

    case <span class="keyword">class</span> <a title="class JIteratorWrapper[A] extends java.lang.Object with Iterator[A] with ScalaObject with Product with Serializable" id="79592">JIteratorWrapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="79594">A</a><span class="delimiter">]</span><a href="#79592" title="ScalaObject" class="delimiter">(</a><a title="java.util.Iterator[A]" id="79965">i</a>: <span title="java.util.Iterator[A]">JIterator</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="Iterator[A]">Iterator</span><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="79566">hasNext</a>: <span title="Boolean">Boolean</span> = <a href="#79965" title="=&gt; java.util.Iterator[A]">i</a>.<span title="()Boolean">hasNext</span>
      <span class="keyword">def</span> <a title="()A" id="79567">next</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#79594" title="A">A</a> = <a href="#79965" title="=&gt; java.util.Iterator[A]">i</a>.<span title="()A">next</span>
    <span class="delimiter">}</span>

    <span class="comment">/** convert java iterator to scala iterator */</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](i: java.util.Iterator[A])AbstractDisk.this.JIteratorWrapper[A]" id="79169">ji2si</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="79171">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.Iterator[A]" id="79630">i</a> : <span title="java.util.Iterator[A]">JIterator</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="AbstractDisk.this.JIteratorWrapper[A]" class="keyword">new</span> <a href="#79592" title="AbstractDisk.this.JIteratorWrapper[A]">JIteratorWrapper</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#79630" title="java.util.Iterator[A]">i</a><span class="delimiter">)</span>

    <span class="comment">/**
      Given a req, extract the multipart form params into a (Map[String, Seq[String]], Map[String, Seq[FileItem]], request).
      The Map is assigned a default value of Nil, so param(&quot;p&quot;) would return Nil if there
      is no such parameter, or (as normal for servlets) a single empty string if the
      parameter was supplied without a value. */</span>
    <span class="keyword">def</span> <a title="(req: unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest])unfiltered.request.MultipartData[List[unfiltered.request.DiskFileWrapper]]" id="79172">apply</a><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]" id="79635">req</a>: <a href="../../unfiltered/request/HttpRequest.scala.html#9948" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">HttpRequest</a><span class="delimiter">[</span>HttpServletRequest<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.util.Iterator[org.apache.commons.fileupload.FileItem]" id="79638">items</a> =  <span title="(x$1: org.apache.commons.fileupload.FileItemFactory)org.apache.commons.fileupload.servlet.ServletFileUpload" class="keyword">new</span> <span title="org.apache.commons.fileupload.servlet.ServletFileUpload">ServletFileUpload</span><span class="delimiter">(</span><a href="#79164" title="(writeAfter: Int, writeDir: java.io.File)org.apache.commons.fileupload.FileItemFactory">factory</a><span class="delimiter">(</span><a href="#79162" title="=&gt; Int">memLimit</a>, <a href="#79163" title="=&gt; java.io.File">tempDir</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(x$1: javax.servlet.http.HttpServletRequest)java.util.List[_]">parseRequest</span><span class="delimiter">(</span>
        <a href="#79635" title="unfiltered.request.HttpRequest[javax.servlet.http.HttpServletRequest]">req</a>.<a href="../../unfiltered/request/HttpRequest.scala.html#10666" title="=&gt; javax.servlet.http.HttpServletRequest">underlying</a>
      <span class="delimiter">)</span>.<span title="()java.util.Iterator[?0]">iterator</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.util.Iterator[org.apache.commons.fileupload.FileItem]" class="delimiter">[</span><span title="java.util.Iterator[org.apache.commons.fileupload.FileItem]">JIterator</span><span class="delimiter">[</span>ACFileItem<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a href="#79640" title="(scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]])" class="delimiter">(</a><a href="#79639" title="scala.collection.immutable.Map[String,List[String]]" id="79640">params</a>, <a href="#79639" title="scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]]" id="79641">files</a><span class="delimiter">)</span> = <a href="#78713" title="[A, B, C](iter: Iterator[C])(f: ((Map[String,List[A]], Map[String,List[B]]), C) =&gt; (Map[String,List[A]], Map[String,List[B]]))(scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]])">genTuple</a><span title="(iter: Iterator[org.apache.commons.fileupload.FileItem])(f: ((Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]]), org.apache.commons.fileupload.FileItem) =&gt; (Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]]))(scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]])" class="delimiter">[</span><span title="String">String</span>, <a href="#10422" title="unfiltered.request.DiskFileWrapper">DiskFileWrapper</a>, <span title="org.apache.commons.fileupload.FileItem">ACFileItem</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#79169" title="(i: java.util.Iterator[org.apache.commons.fileupload.FileItem])AbstractDisk.this.JIteratorWrapper[org.apache.commons.fileupload.FileItem]">items</a><span class="delimiter">)</span> <span title="(scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]]) @unchecked" class="delimiter">(</span><span class="delimiter">(</span><a title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])" id="79709">maps</a>, <a title="org.apache.commons.fileupload.FileItem" id="79710">item</a><span class="delimiter">)</span> =&gt;
        <span title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])" class="keyword">if</span><span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()Boolean">isFormField</span><span class="delimiter">)</span> <span title="(_1: scala.collection.immutable.Map[String,List[String]], _2: Map[String,List[unfiltered.request.DiskFileWrapper]])(scala.collection.immutable.Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])" class="delimiter">(</span><a href="#79709" title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[String]]">_1</span> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="(x: java.lang.String)ArrowAssoc[java.lang.String]">getFieldName</span> <span title="(y: List[String])(java.lang.String, List[String])">-&gt;</span> <span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()java.lang.String">getString</span> <a href="#79800" title="(x: String)List[String]">::</a> <a href="#79709" title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])">maps</a>.<span title="(key: String)List[String]">_1</span><span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()java.lang.String">getFieldName</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#79709" title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[unfiltered.request.DiskFileWrapper]]">_2</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="(_1: Map[String,List[String]], _2: scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]])(Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]])" class="delimiter">(</span><a href="#79709" title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[String]]">_1</span>, <a href="#79709" title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[unfiltered.request.DiskFileWrapper]]">_2</span> <span title="(kv: (String, List[unfiltered.request.DiskFileWrapper]))scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]]">+</span> <span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="(x: java.lang.String)ArrowAssoc[java.lang.String]">getFieldName</span> <span title="(y: List[unfiltered.request.DiskFileWrapper])(java.lang.String, List[unfiltered.request.DiskFileWrapper])">-&gt;</span> <span class="delimiter">(</span><span title="unfiltered.request.DiskFileWrapper" class="keyword">new</span> <a href="#10422" title="unfiltered.request.DiskFileWrapper">DiskFileWrapper</a><span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a><span class="delimiter">)</span> <a href="#79912" title="(x: unfiltered.request.DiskFileWrapper)List[unfiltered.request.DiskFileWrapper]">::</a> <a href="#79709" title="(Map[String,List[String]], Map[String,List[unfiltered.request.DiskFileWrapper]])">maps</a>.<span title="(key: String)List[unfiltered.request.DiskFileWrapper]">_2</span><span class="delimiter">(</span><a href="#79710" title="org.apache.commons.fileupload.FileItem">item</a>.<span title="()java.lang.String">getFieldName</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
      <a href="#79974" title="(params: String =&gt; Seq[String], files: String =&gt; List[unfiltered.request.DiskFileWrapper])unfiltered.request.MultipartData[List[unfiltered.request.DiskFileWrapper]]">MultipartData</a><span class="delimiter">(</span><a href="#79640" title="scala.collection.immutable.Map[String,List[String]]">params</a>, <a href="#79641" title="scala.collection.immutable.Map[String,List[unfiltered.request.DiskFileWrapper]]">files</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** generates a tuple of (Map[String, List[A]], Map[String, List[B]]) */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[A, B, C](iter: Iterator[C])(f: ((Map[String,List[A]], Map[String,List[B]]), C) =&gt; (Map[String,List[A]], Map[String,List[B]]))(scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]])" id="78713">genTuple</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="78717">A</a>, <a title="&gt;: Nothing &lt;: Any" id="78718">B</a>, <a title="&gt;: Nothing &lt;: Any" id="78719">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterator[C]" id="79651">iter</a>: <span title="Iterator[C]">Iterator</span><span class="delimiter">[</span>C<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="((Map[String,List[A]], Map[String,List[B]]), C) =&gt; (Map[String,List[A]], Map[String,List[B]])" id="79652">f</a>: <span class="delimiter">(</span><span class="delimiter">(</span>Map<span class="delimiter">[</span>String, List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, Map<span class="delimiter">[</span>String, List<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>, C<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>Map<span class="delimiter">[</span>String, List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, Map<span class="delimiter">[</span>String, List<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> =
   <span class="delimiter">(</span><span title="(_1: scala.collection.immutable.Map[String,List[A]], _2: scala.collection.immutable.Map[String,List[B]])(scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]])" class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,List[A]]" class="delimiter">[</span><span title="String">String</span>, <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(d: List[A])scala.collection.immutable.Map[String,List[A]]">withDefaultValue</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,List[B]]" class="delimiter">[</span><span title="String">String</span>, <span title="List[B]">List</span><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(d: List[B])scala.collection.immutable.Map[String,List[B]]">withDefaultValue</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#79655" title="(z: (scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]]))(op: ((scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]]), C) =&gt; (scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]]))(scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]])">/:</a> <a href="#79651" title="Iterator[C]">iter</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#79652" title="(v1: (Map[String,List[A]], Map[String,List[B]]), v2: C)(Map[String,List[A]], Map[String,List[B]])">f</a><span class="delimiter">(</span><a href="#79694" title="(scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]])">_</a>,<a href="#79695" title="C">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>