<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>core/util/OpLog.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (c) 2010, 2011 10gen, Inc. &lt;http://10gen.com&gt;
 * Copyright (c) 2009, 2010 Novus Partners, Inc. &lt;http://novus.com&gt;
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * For questions and comments about this product, please see the project page at:
 *
 *     http://github.com/mongodb/casbah
 * 
 */</span>

<span class="keyword">package</span> com.mongodb.casbah
<span class="keyword">package</span> util

<span class="keyword">import</span> org.bson.types.BSONTimestamp
<span class="keyword">import</span> com.mongodb.Bytes

<span class="keyword">import</span> com.mongodb.casbah.<a href="../Implicits.scala.html#9053" title="object com.mongodb.casbah.Imports">Imports</a>._
<span class="keyword">import</span> com.mongodb.casbah.commons.Logging

<span class="keyword">import</span> scala.util.control.<span title="object scala.util.control.Exception">Exception</span>._

<span class="keyword">class</span> <a title="class MongoOpLog extends java.lang.Object with Iterator[com.mongodb.casbah.util.MongoOpLogEntry] with com.mongodb.casbah.commons.Logging with ScalaObject" id="9595">MongoOpLog</a><a href="#9595" title="ScalaObject" class="delimiter">(</a><a title="com.mongodb.casbah.Imports.MongoConnection" id="66770">mongo</a>: <a href="../MongoConnection.scala.html#9055" title="com.mongodb.casbah.Imports.MongoConnection">MongoConnection</a> = <a href="../MongoConnection.scala.html#44637" title="()com.mongodb.casbah.MongoConnection">MongoConnection</a><span class="delimiter">(</span><span class="delimiter">)</span>,
  <a title="Option[org.bson.types.BSONTimestamp]" id="66771">startTimestamp</a>: <span title="Option[org.bson.types.BSONTimestamp]">Option</span><span class="delimiter">[</span>BSONTimestamp<span class="delimiter">]</span> = <span title="object None">None</span>,
  <a title="Option[String]" id="66772">namespace</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="Iterator[com.mongodb.casbah.util.MongoOpLogEntry]">Iterator</span><span class="delimiter">[</span>MongoOpLogEntry<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../commons/Logger.scala.html#9255" title="com.mongodb.casbah.commons.Logging">Logging</a> <span class="delimiter">{</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object MongoOpLog.this.BSONTimestampOk" id="57125">BSONTimestampOk</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../query/Implicits.scala.html#10079" title="com.mongodb.casbah.Imports.ValidDateOrNumericType[org.bson.types.BSONTimestamp]">ValidDateOrNumericType</a><span class="delimiter">[</span>org.bson.types.BSONTimestamp<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="com.mongodb.casbah.MongoDB" id="57127">local</a> = <a href="../MongoConnection.scala.html#43347" title="(dbName: String)com.mongodb.casbah.MongoDB">mongo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;local&quot;)" class="string">&quot;local&quot;</span><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="com.mongodb.casbah.MongoCollection" id="57129">oplog</a> = <a href="../MongoDB.scala.html#43595" title="(collection: String)com.mongodb.casbah.MongoCollection">local</a><span class="delimiter">(</span><span title="java.lang.String(&quot;oplog.$main&quot;)" class="string">&quot;oplog.$main&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="org.bson.types.BSONTimestamp" id="57131">tsp</a> = <a href="#57139" title="=&gt; org.bson.types.BSONTimestamp">verifyOpLog</a>

  <a href="../../commons/Logger.scala.html#29697" title="=&gt; com.mongodb.casbah.commons.Logger">log</a>.<a href="../../commons/Logger.scala.html#31098" title="(fmt: =&gt; String, arg: Any, argN: Any*)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Beginning monitoring OpLog at \'%s\'&quot;)" class="string">&quot;Beginning monitoring OpLog at '%s'&quot;</span>, <a href="#57131" title="=&gt; org.bson.types.BSONTimestamp">tsp</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="com.mongodb.casbah.commons.Imports.DBObject" id="57133">q</a> = <a href="#66772" title="Option[String]">namespace</a> <span title="com.mongodb.casbah.commons.Imports.DBObject" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="com.mongodb.casbah.commons.Imports.DBObject">Some</span><span class="delimiter">(</span><a title="String" id="57158">ns</a><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="../../query/Implicits.scala.html#43423" title="implicit com.mongodb.casbah.query.Implicits.mongoQueryStatements : (left: String)java.lang.Object with com.mongodb.casbah.query.FluidQueryOperators" class="string">&quot;ts&quot;</a> <a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject">$gt</a> <a href="#57131" title="=&gt; org.bson.types.BSONTimestamp">tsp</a><span class="delimiter">)</span> <a href="../../commons/MongoDBObject.scala.html#18913" title="(pairs: Tuple2[String, _]*)com.mongodb.casbah.commons.Imports.DBObject">++</a> <span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;ns&quot;</span> <span title="(y: String)(java.lang.String, String)">-&gt;</span> <a href="#57158" title="String">ns</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="DSLDBObject extends com.mongodb.DBObject with com.mongodb.casbah.query.DSLDBObject">None</span> =&gt; <a href="../../query/Implicits.scala.html#43423" title="implicit com.mongodb.casbah.query.Implicits.mongoQueryStatements : (left: String)java.lang.Object with com.mongodb.casbah.query.FluidQueryOperators" class="string">&quot;ts&quot;</a> <a href="../../query/CoreOperators.scala.html#45148" title="(target: org.bson.types.BSONTimestamp)(implicit evidence$4: com.mongodb.casbah.query.ValidDateOrNumericType[org.bson.types.BSONTimestamp])com.mongodb.DBObject with com.mongodb.casbah.query.DSLDBObject">$gt</a> <a href="#57131" title="=&gt; org.bson.types.BSONTimestamp">tsp</a>
  <span class="delimiter">}</span>

  <a href="../../commons/Logger.scala.html#29697" title="=&gt; com.mongodb.casbah.commons.Logger">log</a>.<a href="../../commons/Logger.scala.html#31098" title="(fmt: =&gt; String, arg: Any, argN: Any*)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;OpLog Filter: \'%s\'&quot;)" class="string">&quot;OpLog Filter: '%s'&quot;</span>, <a href="#57133" title="=&gt; com.mongodb.casbah.commons.Imports.DBObject">q</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="MongoOpLog.this.oplog.CursorType" id="57135">cursor</a> = <a href="#57129" title="=&gt; com.mongodb.casbah.MongoCollection">oplog</a>.<a href="../MongoCollection.scala.html#44076" title="(ref: com.mongodb.casbah.commons.Imports.DBObject)(implicit evidence$11: (com.mongodb.casbah.commons.Imports.DBObject) =&gt; com.mongodb.casbah.Imports.DBObject)MongoOpLog.this.oplog.CursorType">find</a><span title="&lt;:&lt;[com.mongodb.casbah.commons.Imports.DBObject,com.mongodb.casbah.commons.Imports.DBObject]" class="delimiter">(</span><a href="#57133" title="=&gt; com.mongodb.casbah.commons.Imports.DBObject">q</a><span class="delimiter">)</span>

  <a href="#57135" title="=&gt; MongoOpLog.this.oplog.CursorType">cursor</a>.<a href="../MongoCursor.scala.html#44451" title="(opts: Int)Unit">options</a> = <a href="../../com/mongodb/Bytes.java.html#7963" title="object com.mongodb.Bytes">Bytes</a>.<a href="../../com/mongodb/Bytes.java.html#66812" title="Int">QUERYOPTION_TAILABLE</a>
  <a href="#57135" title="=&gt; MongoOpLog.this.oplog.CursorType">cursor</a>.<a href="../MongoCursor.scala.html#44451" title="(opts: Int)Unit">options</a> = <a href="../../com/mongodb/Bytes.java.html#7963" title="object com.mongodb.Bytes">Bytes</a>.<a href="../../com/mongodb/Bytes.java.html#66816" title="Int">QUERYOPTION_AWAITDATA</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="57137">hasNext</a> = <a href="#57135" title="=&gt; MongoOpLog.this.oplog.CursorType">cursor</a>.<a href="../MongoCursor.scala.html#44442" title="=&gt; Boolean">hasNext</a>

  <span class="keyword">def</span> <a title="()Product with Serializable with com.mongodb.casbah.util.MongoOpLogEntry{val opType: Product with Serializable with com.mongodb.casbah.util.MongoOpType}" id="57138">next</a> = <a href="#66836" title="(entry: com.mongodb.casbah.Imports.MongoDBObject)Product with Serializable with com.mongodb.casbah.util.MongoOpLogEntry{val opType: Product with Serializable with com.mongodb.casbah.util.MongoOpType}">MongoOpLogEntry</a><span class="delimiter">(</span><a href="#57135" title="=&gt; MongoOpLog.this.oplog.CursorType">cursor</a>.<a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject">next</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.bson.types.BSONTimestamp" id="57139">verifyOpLog</a>: <a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a> = <span class="delimiter">{</span>
    <span class="comment">// Verify the oplog exists </span>
    <span class="keyword">val</span> <a title="com.mongodb.casbah.MongoCursor" id="67149">last</a> = <a href="#57129" title="=&gt; com.mongodb.casbah.MongoCollection">oplog</a>.<a href="../MongoCollection.scala.html#44075" title="()MongoOpLog.this.oplog.CursorType">find</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../MongoCursor.scala.html#44443" title="(orderBy: com.mongodb.casbah.commons.Imports.DBObject)(implicit evidence$1: (com.mongodb.casbah.commons.Imports.DBObject) =&gt; com.mongodb.DBObject)com.mongodb.casbah.MongoCursor">sort</a><span title="&lt;:&lt;[com.mongodb.casbah.commons.Imports.DBObject,com.mongodb.casbah.commons.Imports.DBObject]" class="delimiter">(</span><a href="../../commons/MongoDBObject.scala.html#37176" title="(elems: (java.lang.String, Int)*)com.mongodb.casbah.commons.Imports.DBObject">MongoDBObject</a><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;$natural&quot;</span> <span title="(y: Int)(java.lang.String, Int)">-&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../MongoCursor.scala.html#44458" title="(n: Int)com.mongodb.casbah.MongoCursor">limit</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span title="(assumption: Boolean, message: =&gt; Any)Unit">assume</span><span class="delimiter">(</span><a href="#67149" title="com.mongodb.casbah.MongoCursor">last</a>.<a href="../MongoCursor.scala.html#44442" title="=&gt; Boolean">hasNext</a>,
      <span title="java.lang.String(&quot;No oplog found. mongod must be a --master or belong to a Replica Set.&quot;)" class="string">&quot;No oplog found. mongod must be a --master or belong to a Replica Set.&quot;</span><span class="delimiter">)</span>
    <span class="comment">/**
     * If a startTimestamp was specified attempt to sync from there.
     * An exception is thrown if the timestamp isn't found because
     * you won't be able to sync. 
     */</span>
    <a href="#66771" title="Option[org.bson.types.BSONTimestamp]">startTimestamp</a> <span title="org.bson.types.BSONTimestamp" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="org.bson.types.BSONTimestamp">Some</span><span class="delimiter">(</span><a title="org.bson.types.BSONTimestamp" id="67318">ts</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#57129" title="=&gt; com.mongodb.casbah.MongoCollection">oplog</a>.<a href="../MongoCollection.scala.html#44090" title="(o: com.mongodb.casbah.commons.Imports.DBObject)(implicit evidence$16: (com.mongodb.casbah.commons.Imports.DBObject) =&gt; com.mongodb.casbah.Imports.DBObject)Option[MongoOpLog.this.oplog.T]">findOne</a><span title="&lt;:&lt;[com.mongodb.casbah.commons.Imports.DBObject,com.mongodb.casbah.commons.Imports.DBObject]" class="delimiter">(</span><a href="../../commons/MongoDBObject.scala.html#37176" title="(elems: (java.lang.String, org.bson.types.BSONTimestamp)*)com.mongodb.casbah.commons.Imports.DBObject">MongoDBObject</a><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;ts&quot;</span> <span title="(y: org.bson.types.BSONTimestamp)(java.lang.String, org.bson.types.BSONTimestamp)">-&gt;</span> <a href="#67318" title="org.bson.types.BSONTimestamp">ts</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(alternative: =&gt; Option[MongoOpLog.this.oplog.T])Option[MongoOpLog.this.oplog.T]">orElse</span><span class="delimiter">(</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;No oplog entry for requested start timestamp.&quot;)" class="string">&quot;No oplog entry for requested start timestamp.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#67318" title="org.bson.types.BSONTimestamp">ts</a>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="org.bson.types.BSONTimestamp">None</span> =&gt; <a href="#67149" title="com.mongodb.casbah.MongoCursor">last</a>.<a href="../MongoCursor.scala.html#44441" title="()last.T">next</a><a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject" class="delimiter">(</a><span class="delimiter">)</span>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[org.bson.types.BSONTimestamp])org.bson.types.BSONTimestamp" class="delimiter">[</span><a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.bson.types.BSONTimestamp]" class="delimiter">(</span><span title="java.lang.String(&quot;ts&quot;)" class="string">&quot;ts&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object com.mongodb.casbah.util.MongoOpLogEntry" id="9643">MongoOpLogEntry</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(entry: com.mongodb.casbah.Imports.MongoDBObject)Product with Serializable with com.mongodb.casbah.util.MongoOpLogEntry{val opType: Product with Serializable with com.mongodb.casbah.util.MongoOpType}" id="66836">apply</a><span class="delimiter">(</span><a title="com.mongodb.casbah.Imports.MongoDBObject" id="66837">entry</a>: <a href="../../commons/MongoDBObject.scala.html#9270" title="com.mongodb.casbah.Imports.MongoDBObject">MongoDBObject</a><span class="delimiter">)</span> = <a href="#66837" title="(key: String)AnyRef">entry</a><span class="delimiter">(</span><span title="java.lang.String(&quot;op&quot;)" class="string">&quot;op&quot;</span><span class="delimiter">)</span> <span title="&lt;none&gt; extends Product with Serializable with com.mongodb.casbah.util.MongoOpLogEntry" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#67564" title="com.mongodb.casbah.util.MongoInsertOperation">InsertOp</a> =&gt;
      <a href="#68010" title="(timestamp: org.bson.types.BSONTimestamp, opID: Long, namespace: String, document: com.mongodb.casbah.Imports.MongoDBObject)com.mongodb.casbah.util.MongoInsertOperation">MongoInsertOperation</a><span class="delimiter">(</span>
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[org.bson.types.BSONTimestamp])org.bson.types.BSONTimestamp" class="delimiter">[</span><a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.bson.types.BSONTimestamp]" class="delimiter">(</span><span title="java.lang.String(&quot;ts&quot;)" class="string">&quot;ts&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[Long])Long" class="delimiter">[</span><span title="Long">Long</span><span class="delimiter">]</span><span title="=&gt; scala.reflect.AnyValManifest[Long]" class="delimiter">(</span><span title="java.lang.String(&quot;h&quot;)" class="string">&quot;h&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[String])String" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[String]" class="delimiter">(</span><span title="java.lang.String(&quot;ns&quot;)" class="string">&quot;ns&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[com.mongodb.casbah.Imports.DBObject])com.mongodb.casbah.Imports.DBObject" class="delimiter">[</span><a href="../../com/mongodb/DBObject.java.html#7932" title="com.mongodb.casbah.Imports.DBObject">DBObject</a><span class="delimiter">]</span><a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject" class="delimiter">(</a><span title="java.lang.String(&quot;o&quot;)" class="string">&quot;o&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#67579" title="com.mongodb.casbah.util.MongoUpdateOperation">UpdateOp</a> =&gt;
      <a href="#67974" title="(timestamp: org.bson.types.BSONTimestamp, opID: Long, namespace: String, document: com.mongodb.casbah.Imports.MongoDBObject, documentID: com.mongodb.casbah.Imports.MongoDBObject)com.mongodb.casbah.util.MongoUpdateOperation">MongoUpdateOperation</a><span class="delimiter">(</span>
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[org.bson.types.BSONTimestamp])org.bson.types.BSONTimestamp" class="delimiter">[</span><a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.bson.types.BSONTimestamp]" class="delimiter">(</span><span title="java.lang.String(&quot;ts&quot;)" class="string">&quot;ts&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[Long])Long" class="delimiter">[</span><span title="Long">Long</span><span class="delimiter">]</span><span title="=&gt; scala.reflect.AnyValManifest[Long]" class="delimiter">(</span><span title="java.lang.String(&quot;h&quot;)" class="string">&quot;h&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[String])String" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[String]" class="delimiter">(</span><span title="java.lang.String(&quot;ns&quot;)" class="string">&quot;ns&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[com.mongodb.casbah.Imports.DBObject])com.mongodb.casbah.Imports.DBObject" class="delimiter">[</span><a href="../../com/mongodb/DBObject.java.html#7932" title="com.mongodb.casbah.Imports.DBObject">DBObject</a><span class="delimiter">]</span><a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject" class="delimiter">(</a><span title="java.lang.String(&quot;o&quot;)" class="string">&quot;o&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[com.mongodb.casbah.Imports.DBObject])com.mongodb.casbah.Imports.DBObject" class="delimiter">[</span><a href="../../com/mongodb/DBObject.java.html#7932" title="com.mongodb.casbah.Imports.DBObject">DBObject</a><span class="delimiter">]</span><a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject" class="delimiter">(</a><span title="java.lang.String(&quot;o2&quot;)" class="string">&quot;o2&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#67594" title="com.mongodb.casbah.util.MongoInsertOperation">DeleteOp</a> =&gt;
      <a href="#68010" title="(timestamp: org.bson.types.BSONTimestamp, opID: Long, namespace: String, document: com.mongodb.casbah.Imports.MongoDBObject)com.mongodb.casbah.util.MongoInsertOperation">MongoInsertOperation</a><span class="delimiter">(</span>
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[org.bson.types.BSONTimestamp])org.bson.types.BSONTimestamp" class="delimiter">[</span><a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.bson.types.BSONTimestamp]" class="delimiter">(</span><span title="java.lang.String(&quot;ts&quot;)" class="string">&quot;ts&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[Long])Long" class="delimiter">[</span><span title="Long">Long</span><span class="delimiter">]</span><span title="=&gt; scala.reflect.AnyValManifest[Long]" class="delimiter">(</span><span title="java.lang.String(&quot;h&quot;)" class="string">&quot;h&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[String])String" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[String]" class="delimiter">(</span><span title="java.lang.String(&quot;ns&quot;)" class="string">&quot;ns&quot;</span><span class="delimiter">)</span>,
        <a href="#66837" title="com.mongodb.casbah.Imports.MongoDBObject">entry</a>.<a href="../../commons/MongoDBObject.scala.html#18909" title="[A](key: String)(implicit evidence$1: scala.reflect.Manifest[A])A">as</a><span title="(key: String)(implicit evidence$1: scala.reflect.Manifest[com.mongodb.casbah.Imports.DBObject])com.mongodb.casbah.Imports.DBObject" class="delimiter">[</span><a href="../../com/mongodb/DBObject.java.html#7932" title="com.mongodb.casbah.Imports.DBObject">DBObject</a><span class="delimiter">]</span><a href="../../commons/Implicits.scala.html#10146" title="implicit com.mongodb.casbah.commons.Implicits.wrapDBObj : (in: com.mongodb.DBObject)com.mongodb.casbah.commons.MongoDBObject" class="delimiter">(</a><span title="java.lang.String(&quot;o&quot;)" class="string">&quot;o&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait MongoOpType extends java.lang.Object" id="9597">MongoOpType</a> <span title="java.lang.Object" class="delimiter">{</span> <span class="keyword">def</span> <a title="=&gt; String" id="66856">typeCode</a>: <span title="String">String</span> <span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#67556" title="object com.mongodb.casbah.util.InsertOp" id="67564">InsertOp</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9597" title="com.mongodb.casbah.util.MongoOpType">MongoOpType</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="java.lang.String" id="66858">typeCode</a> = <span title="java.lang.String(&quot;i&quot;)" class="string">&quot;i&quot;</span> <span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#67571" title="object com.mongodb.casbah.util.UpdateOp" id="67579">UpdateOp</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9597" title="com.mongodb.casbah.util.MongoOpType">MongoOpType</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="java.lang.String" id="66964">typeCode</a> = <span title="java.lang.String(&quot;u&quot;)" class="string">&quot;u&quot;</span> <span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#67586" title="object com.mongodb.casbah.util.DeleteOp" id="67594">DeleteOp</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9597" title="com.mongodb.casbah.util.MongoOpType">MongoOpType</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="java.lang.String" id="67079">typeCode</a> = <span title="java.lang.String(&quot;d&quot;)" class="string">&quot;d&quot;</span> <span class="delimiter">}</span>

<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait MongoOpLogEntry extends java.lang.Object with ScalaObject" id="9642">MongoOpLogEntry</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="=&gt; org.bson.types.BSONTimestamp" id="66870">timestamp</a>: <a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.bson.types.BSONTimestamp" id="66872">ts</a> = <a href="#66870" title="=&gt; org.bson.types.BSONTimestamp">timestamp</a>

  <span class="keyword">val</span> <a title="=&gt; Long" id="66873">opID</a>: <span title="Long">Long</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Long" id="66875">h</a> = <a href="#66873" title="=&gt; Long">opID</a>

  <span class="keyword">val</span> <a title="=&gt; com.mongodb.casbah.util.MongoOpType" id="66876">opType</a>: <a href="#9597" title="com.mongodb.casbah.util.MongoOpType">MongoOpType</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="com.mongodb.casbah.util.MongoOpType" id="66878">op</a> = <a href="#66876" title="=&gt; com.mongodb.casbah.util.MongoOpType">opType</a>

  <span class="keyword">val</span> <a title="=&gt; String" id="66879">namespace</a>: <span title="String">String</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="66881">ns</a> = <a href="#66879" title="=&gt; String">namespace</a>

  <span class="keyword">val</span> <a title="=&gt; com.mongodb.casbah.Imports.MongoDBObject" id="66882">document</a>: <a href="../../commons/MongoDBObject.scala.html#9270" title="com.mongodb.casbah.Imports.MongoDBObject">MongoDBObject</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="com.mongodb.casbah.Imports.MongoDBObject" id="66884">o</a> = <a href="#66882" title="=&gt; com.mongodb.casbah.Imports.MongoDBObject">document</a>

<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class MongoInsertOperation extends java.lang.Object with com.mongodb.casbah.util.MongoOpLogEntry with ScalaObject with Product with Serializable" id="68010">MongoInsertOperation</a><a href="#68010" title="ScalaObject" class="delimiter">(</a><a title="org.bson.types.BSONTimestamp" id="66902">timestamp</a>: <a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a>, <a title="Long" id="66903">opID</a>: <span title="Long">Long</span>, <a title="String" id="66904">namespace</a>: <span title="String">String</span>, <a title="com.mongodb.casbah.Imports.MongoDBObject" id="66905">document</a>: <a href="../../commons/MongoDBObject.scala.html#9270" title="com.mongodb.casbah.Imports.MongoDBObject">MongoDBObject</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9642" title="com.mongodb.casbah.util.MongoOpLogEntry">MongoOpLogEntry</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="com.mongodb.casbah.util.InsertOp.type" id="66898">opType</a> = <a href="#67564" title="object com.mongodb.casbah.util.InsertOp">InsertOp</a>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class MongoUpdateOperation extends java.lang.Object with com.mongodb.casbah.util.MongoOpLogEntry with ScalaObject with Product with Serializable" id="67974">MongoUpdateOperation</a><a href="#67974" title="ScalaObject" class="delimiter">(</a><a title="org.bson.types.BSONTimestamp" id="66998">timestamp</a>: <a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a>, <a title="Long" id="66999">opID</a>: <span title="Long">Long</span>, <a title="String" id="67000">namespace</a>: <span title="String">String</span>, <a title="com.mongodb.casbah.Imports.MongoDBObject" id="67001">document</a>: <a href="../../commons/MongoDBObject.scala.html#9270" title="com.mongodb.casbah.Imports.MongoDBObject">MongoDBObject</a>, <a title="com.mongodb.casbah.Imports.MongoDBObject" id="67002">documentID</a>: <a href="../../commons/MongoDBObject.scala.html#9270" title="com.mongodb.casbah.Imports.MongoDBObject">MongoDBObject</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9642" title="com.mongodb.casbah.util.MongoOpLogEntry">MongoOpLogEntry</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="com.mongodb.casbah.util.UpdateOp.type" id="66992">opType</a> = <a href="#67579" title="object com.mongodb.casbah.util.UpdateOp">UpdateOp</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="com.mongodb.casbah.Imports.MongoDBObject" id="66995">o2</a> = <a href="#67002" title="=&gt; com.mongodb.casbah.Imports.MongoDBObject">documentID</a>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class MongoDeleteOperation extends java.lang.Object with com.mongodb.casbah.util.MongoOpLogEntry with ScalaObject with Product with Serializable" id="67989">MongoDeleteOperation</a><a href="#67989" title="ScalaObject" class="delimiter">(</a><a title="org.bson.types.BSONTimestamp" id="67979">timestamp</a>: <a href="../../org/bson/types/BSONTimestamp.java.html#8564" title="org.bson.types.BSONTimestamp">BSONTimestamp</a>, <a title="Long" id="67980">opID</a>: <span title="Long">Long</span>, <a title="String" id="67981">namespace</a>: <span title="String">String</span>, <a title="com.mongodb.casbah.Imports.MongoDBObject" id="67982">document</a>: <a href="../../commons/MongoDBObject.scala.html#9270" title="com.mongodb.casbah.Imports.MongoDBObject">MongoDBObject</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9642" title="com.mongodb.casbah.util.MongoOpLogEntry">MongoOpLogEntry</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="com.mongodb.casbah.util.DeleteOp.type" id="67850">opType</a> = <a href="#67594" title="object com.mongodb.casbah.util.DeleteOp">DeleteOp</a>
<span class="delimiter">}</span>

<span class="comment">// vim: set ts=2 sw=2 sts=2 et:</span>

        </pre>
    </body>
</html>