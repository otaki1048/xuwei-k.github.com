<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>fj/test/reflect/Check.java</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> fj.test.reflect;

<span class="keyword">import</span> static fj.Bottom.error;
<span class="keyword">import</span> fj.Class;
<span class="keyword">import</span> static fj.Class.clas;
<span class="keyword">import</span> fj.F;
<span class="keyword">import</span> fj.Function;
<span class="keyword">import</span> fj.P;
<span class="keyword">import</span> static fj.P.p;
<span class="keyword">import</span> fj.P2;
<span class="keyword">import</span> fj.P3;
<span class="keyword">import</span> fj.data.Array;
<span class="keyword">import</span> static fj.data.Array.array;
<span class="keyword">import</span> fj.data.List;
<span class="keyword">import</span> static fj.data.List.join;
<span class="keyword">import</span> static fj.data.List.list;
<span class="keyword">import</span> fj.data.Option;
<span class="keyword">import</span> static fj.data.Option.fromNull;
<span class="keyword">import</span> static fj.data.Option.none;
<span class="keyword">import</span> static fj.data.Option.some;
<span class="keyword">import</span> static fj.data.Option.somes;
<span class="keyword">import</span> fj.test.CheckResult;
<span class="keyword">import</span> fj.test.Property;
<span class="keyword">import</span> fj.test.Rand;

<span class="keyword">import</span> java.lang.reflect.AnnotatedElement;
<span class="keyword">import</span> java.lang.reflect.Constructor;
<span class="keyword">import</span> java.lang.reflect.Field;
<span class="keyword">import</span> java.lang.reflect.Method;
<span class="keyword">import</span> static java.lang.reflect.Modifier.isStatic;

<span class="comment">/**
 * Functions for checking properties in a class that are found reflectively and according to various
 * annotations.
 * 
 * @version %build.number%
 */</span>
public <span class="keyword">final</span> <span class="keyword">class</span> <a title="object fj.test.reflect.Check" id="11303">Check</a> <span class="delimiter">{</span>
  <span class="keyword">private</span> Check<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given classes using a
   * {@link Rand#standard standard random generator}.
   *
   * @param c The classes to check the properties of.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results and names of checking the properties on the given classes using a
   * {@link Rand#standard standard random generator}.
   */</span>
  public static &lt;<a title="Nothing" id="39276">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: fj.data.List[java.lang.Class[T]], categories: &lt;repeated...&gt;[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39274">check</a><span class="delimiter">(</span><span class="keyword">final</span> List&lt;java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39276" title="T">T</a>&gt;&gt; <a title="fj.data.List[java.lang.Class[T]]" id="39312">c</a>, <span class="keyword">final</span> <span title="&lt;repeated...&gt;">String</span>... <a title="&lt;repeated...&gt;[java.lang.String]" id="39313">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> check<span class="delimiter">(</span>c, Rand.standard, categories<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given classes using a
   * {@link Rand#standard standard random generator}.
   *
   * @param c The classes to check the properties of.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results and names of checking the properties on the given classes using a
   * {@link Rand#standard standard random generator}.
   */</span>
  public static &lt;<a title="Nothing" id="39279">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: fj.data.List[java.lang.Class[T]], categories: fj.data.List[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39277">check</a><span class="delimiter">(</span><span class="keyword">final</span> List&lt;java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39279" title="T">T</a>&gt;&gt; <a title="fj.data.List[java.lang.Class[T]]" id="39317">c</a>, <span class="keyword">final</span> List&lt;String&gt; <a title="fj.data.List[java.lang.String]" id="39318">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> check<span class="delimiter">(</span>c, Rand.standard, categories.toArray<span class="delimiter">(</span><span class="delimiter">)</span>.array<span class="delimiter">(</span>String<span class="delimiter">[</span><span class="delimiter">]</span>.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given classes.
   *
   * @param c The classes to check the properties of.
   * @param r The random generator to use to check the properties on the given classes.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results and names of checking the properties on the given classes.
   */</span>
  public static &lt;<a title="Nothing" id="39282">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: fj.data.List[java.lang.Class[T]], r: fj.test.Rand, categories: &lt;repeated...&gt;[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39280">check</a><span class="delimiter">(</span><span class="keyword">final</span> List&lt;java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39282" title="T">T</a>&gt;&gt; <a title="fj.data.List[java.lang.Class[T]]" id="39322">c</a>, <span class="keyword">final</span> Rand <a title="fj.test.Rand" id="39323">r</a>, <span class="keyword">final</span> <span title="&lt;repeated...&gt;">String</span>... <a title="&lt;repeated...&gt;[java.lang.String]" id="39324">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> join<span class="delimiter">(</span>c.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;java.lang.Class&lt;T&gt;, List&lt;P2&lt;String, CheckResult&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public List&lt;P2&lt;String, CheckResult&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> java.lang.Class&lt;T&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> check<span class="delimiter">(</span>c, r, categories<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given classes.
   *
   * @param c The classes to check the properties of.
   * @param r The random generator to use to check the properties on the given classes.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results and names of checking the properties on the given classes.
   */</span>
  public static &lt;<a title="Nothing" id="39285">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: fj.data.List[java.lang.Class[T]], r: fj.test.Rand, categories: fj.data.List[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39283">check</a><span class="delimiter">(</span><span class="keyword">final</span> List&lt;java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39285" title="T">T</a>&gt;&gt; <a title="fj.data.List[java.lang.Class[T]]" id="39329">c</a>, <span class="keyword">final</span> Rand <a title="fj.test.Rand" id="39330">r</a>, <span class="keyword">final</span> List&lt;String&gt; <a title="fj.data.List[java.lang.String]" id="39331">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> check<span class="delimiter">(</span>c, r, categories.toArray<span class="delimiter">(</span><span class="delimiter">)</span>.array<span class="delimiter">(</span>String<span class="delimiter">[</span><span class="delimiter">]</span>.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given class using a
   * {@link Rand#standard standard random generator}.
   *
   * @param c The class to check the properties of.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results and names of checking the properties on the given class using a
   * {@link Rand#standard standard random generator}.
   */</span>
  public static &lt;<a title="Nothing" id="39288">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: java.lang.Class[T], categories: &lt;repeated...&gt;[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39286">check</a><span class="delimiter">(</span><span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39288" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39336">c</a>, <span class="keyword">final</span> <span title="&lt;repeated...&gt;">String</span>... <a title="&lt;repeated...&gt;[java.lang.String]" id="39337">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> check<span class="delimiter">(</span>c, Rand.standard, categories<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given class using a
   * {@link Rand#standard standard random generator}.
   *
   * @param c The class to check the properties of.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results and names of checking the properties on the given class using a
   * {@link Rand#standard standard random generator}.
   */</span>
  public static &lt;<a title="Nothing" id="39291">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: java.lang.Class[T], categories: fj.data.List[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39289">check</a><span class="delimiter">(</span><span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39291" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39341">c</a>, <span class="keyword">final</span> List&lt;String&gt; <a title="fj.data.List[java.lang.String]" id="39342">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> check<span class="delimiter">(</span>c, Rand.standard, categories.toArray<span class="delimiter">(</span><span class="delimiter">)</span>.array<span class="delimiter">(</span>String<span class="delimiter">[</span><span class="delimiter">]</span>.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given class.
   *
   * @param c The class to check the properties of.
   * @param r The random generator to use to check the properties on the given class.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results of checking the properties on the given class.
   */</span>
  public static &lt;<a title="Nothing" id="39294">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: java.lang.Class[T], r: fj.test.Rand, categories: &lt;repeated...&gt;[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39292">check</a><span class="delimiter">(</span><span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39294" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39346">c</a>, <span class="keyword">final</span> Rand <a title="fj.test.Rand" id="39347">r</a>, <span class="keyword">final</span> <span title="&lt;repeated...&gt;">String</span>... <a title="&lt;repeated...&gt;[java.lang.String]" id="39348">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> join<span class="delimiter">(</span>clas<span class="delimiter">(</span>c<span class="delimiter">)</span>.inheritance<span class="delimiter">(</span><span class="delimiter">)</span>.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Class&lt;? <span class="keyword">super</span> T&gt;, List&lt;P3&lt;Property, String, Option&lt;CheckParams&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public List&lt;P3&lt;Property, String, Option&lt;CheckParams&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Class&lt;? <span class="keyword">super</span> T&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> properties<span class="delimiter">(</span>c.clas<span class="delimiter">(</span><span class="delimiter">)</span>, categories<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;P3&lt;Property, String, Option&lt;CheckParams&gt;&gt;, P2&lt;String, CheckResult&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P2&lt;String, CheckResult&gt; f<span class="delimiter">(</span><span class="keyword">final</span> P3&lt;Property, String, Option&lt;CheckParams&gt;&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">if</span><span class="delimiter">(</span>p._3<span class="delimiter">(</span><span class="delimiter">)</span>.isSome<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">final</span> CheckParams ps = p._3<span class="delimiter">(</span><span class="delimiter">)</span>.some<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="keyword">return</span> p<span class="delimiter">(</span>p._2<span class="delimiter">(</span><span class="delimiter">)</span>, p._1<span class="delimiter">(</span><span class="delimiter">)</span>.check<span class="delimiter">(</span>r, ps.minSuccessful<span class="delimiter">(</span><span class="delimiter">)</span>, ps.maxDiscarded<span class="delimiter">(</span><span class="delimiter">)</span>, ps.minSize<span class="delimiter">(</span><span class="delimiter">)</span>, ps.maxSize<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span>
          <span class="keyword">return</span> p<span class="delimiter">(</span>p._2<span class="delimiter">(</span><span class="delimiter">)</span>, p._1<span class="delimiter">(</span><span class="delimiter">)</span>.check<span class="delimiter">(</span>r<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the results and names of checking the properties on the given class.
   *
   * @param c The class to check the properties of.
   * @param r The random generator to use to check the properties on the given class.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return The results of checking the properties on the given class.
   */</span>
  public static &lt;<a title="Nothing" id="39297">T</a>&gt; List&lt;P2&lt;String, CheckResult&gt;&gt; <a title="[T](c: java.lang.Class[T], r: fj.test.Rand, categories: fj.data.List[java.lang.String])fj.data.List[fj.P2[java.lang.String,fj.test.CheckResult]]" id="39295">check</a><span class="delimiter">(</span><span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39297" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39353">c</a>, <span class="keyword">final</span> Rand <a title="fj.test.Rand" id="39354">r</a>, <span class="keyword">final</span> List&lt;String&gt; <a title="fj.data.List[java.lang.String]" id="39355">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> check<span class="delimiter">(</span>c, r, categories.toArray<span class="delimiter">(</span><span class="delimiter">)</span>.array<span class="delimiter">(</span>String<span class="delimiter">[</span><span class="delimiter">]</span>.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns all properties, their name and possible check parameters in a given class that are
   * found reflectively and according to various annotations. For example, properties or their
   * enclosing class that are annotated with {@link NoCheck} are not considered. The name of a
   * property is specified by the {@link Name annotation} or if this annotation is not present, the
   * name of the method or field that represents the property.
   *
   * @param c The class to look for properties on.
   * @param categories The categories of properties to return. If no categories are specified, all
   * candidate properties are returned, otherwise, only those properties in the given categories are
   * returned (properties in no category are omitted in this latter case).
   * @return All properties, their name and possible check parameters in a given class that are
   * found reflectively and according to various annotations.
   */</span>
  public static &lt;<a title="Nothing" id="39301">U</a>, <a title="Nothing" id="39302">T</a> <span class="keyword">extends</span> <a href="#39299" title="U">U</a>&gt; List&lt;P3&lt;Property, String, Option&lt;<a href="CheckParams.java.html#11315" title="fj.test.reflect.CheckParams">CheckParams</a>&gt;&gt;&gt; <a title="[U, T &lt;: U](c: java.lang.Class[T], categories: &lt;repeated...&gt;[java.lang.String])fj.data.List[fj.P3[fj.test.Property,java.lang.String,fj.data.Option[fj.test.reflect.CheckParams]]]" id="39298">properties</a><span class="delimiter">(</span><span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39302" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39360">c</a>, <span class="keyword">final</span> <span title="&lt;repeated...&gt;">String</span>... <a title="&lt;repeated...&gt;[java.lang.String]" id="39361">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">//noinspection ClassEscapesDefinedScope</span>
    <span class="keyword">final</span> Array&lt;P3&lt;Property, String, Option&lt;CheckParams&gt;&gt;&gt; propFields = properties<span class="delimiter">(</span>array<span class="delimiter">(</span>c.getDeclaredFields<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Field, PropertyMember&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public PropertyMember f<span class="delimiter">(</span><span class="keyword">final</span> Field f<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> PropertyMember<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public java.lang.Class&lt;?&gt; <span class="keyword">type</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> f.getType<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public AnnotatedElement element<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> f;
          <span class="delimiter">}</span>

          public String name<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> f.getName<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public int modifiers<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> f.getModifiers<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public &lt;X&gt; Property invoke<span class="delimiter">(</span><span class="keyword">final</span> X x<span class="delimiter">)</span> throws IllegalAccessException <span class="delimiter">{</span>
            f.setAccessible<span class="delimiter">(</span><span class="keyword">true</span><span class="delimiter">)</span>;
            <span class="keyword">return</span> <span class="delimiter">(</span>Property<span class="delimiter">)</span>f.get<span class="delimiter">(</span>x<span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public boolean isProperty<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> <span class="keyword">true</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>, c, categories<span class="delimiter">)</span>;

    <span class="comment">//noinspection ClassEscapesDefinedScope</span>
    <span class="keyword">final</span> Array&lt;P3&lt;Property, String, Option&lt;CheckParams&gt;&gt;&gt; propMethods = properties<span class="delimiter">(</span>array<span class="delimiter">(</span>c.getDeclaredMethods<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Method, PropertyMember&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public PropertyMember f<span class="delimiter">(</span><span class="keyword">final</span> Method m<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">//noinspection ProhibitedExceptionDeclared</span>
        <span class="keyword">return</span> <span class="keyword">new</span> PropertyMember<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public java.lang.Class&lt;?&gt; <span class="keyword">type</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> m.getReturnType<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public AnnotatedElement element<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> m;
          <span class="delimiter">}</span>

          public String name<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> m.getName<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public int modifiers<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> m.getModifiers<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public &lt;X&gt; Property invoke<span class="delimiter">(</span><span class="keyword">final</span> X x<span class="delimiter">)</span> throws Exception <span class="delimiter">{</span>
            m.setAccessible<span class="delimiter">(</span><span class="keyword">true</span><span class="delimiter">)</span>;
            <span class="keyword">return</span> <span class="delimiter">(</span>Property<span class="delimiter">)</span>m.invoke<span class="delimiter">(</span>x<span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public boolean isProperty<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> m.getParameterTypes<span class="delimiter">(</span><span class="delimiter">)</span>.length == <span class="int">0</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>, c, categories<span class="delimiter">)</span>;

    <span class="keyword">return</span> propFields.append<span class="delimiter">(</span>propMethods<span class="delimiter">)</span>.toList<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> interface <a title="object fj.test.reflect.Check.PropertyMember" id="39305">PropertyMember</a> <span class="delimiter">{</span>
    java.lang.Class&lt;?&gt; <span class="keyword">type</span><span class="delimiter">(</span><span class="delimiter">)</span>;
    AnnotatedElement element<span class="delimiter">(</span><span class="delimiter">)</span>;
    String name<span class="delimiter">(</span><span class="delimiter">)</span>;
    int modifiers<span class="delimiter">(</span><span class="delimiter">)</span>;
    @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;ProhibitedExceptionDeclared&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
    &lt;X&gt; Property invoke<span class="delimiter">(</span>X x<span class="delimiter">)</span> throws Exception;
    boolean isProperty<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> static &lt;<a title="Nothing" id="39308">T</a>&gt; Array&lt;P3&lt;Property, String, Option&lt;<a href="CheckParams.java.html#11315" title="fj.test.reflect.CheckParams">CheckParams</a>&gt;&gt;&gt; <a title="[T](ms: fj.data.Array[fj.test.reflect.Check.PropertyMember], declaringClass: java.lang.Class[T], categories: &lt;repeated...&gt;[java.lang.String])fj.data.Array[fj.P3[fj.test.Property,java.lang.String,fj.data.Option[fj.test.reflect.CheckParams]]]" id="39306">properties</a><span class="delimiter">(</span><span class="keyword">final</span> Array&lt;PropertyMember&gt; <a title="fj.data.Array[fj.test.reflect.Check.PropertyMember]" id="39366">ms</a>, <span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39308" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39367">declaringClass</a>, <span class="keyword">final</span> <span title="&lt;repeated...&gt;">String</span>... <a title="&lt;repeated...&gt;[java.lang.String]" id="39368">categories</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Option&lt;T&gt; t = emptyCtor<span class="delimiter">(</span>declaringClass<span class="delimiter">)</span>.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Constructor&lt;T&gt;, T&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;OverlyBroadCatchBlock&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
      public T f<span class="delimiter">(</span><span class="keyword">final</span> Constructor&lt;T&gt; ctor<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
          ctor.setAccessible<span class="delimiter">(</span><span class="keyword">true</span><span class="delimiter">)</span>;
          <span class="keyword">return</span> ctor.newInstance<span class="delimiter">(</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Exception e<span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">throw</span> error<span class="delimiter">(</span>e.toString<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;

    <span class="keyword">final</span> F&lt;AnnotatedElement, F&lt;String, Boolean&gt;&gt; p = <span class="keyword">new</span> F&lt;AnnotatedElement, F&lt;String, Boolean&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public F&lt;String, Boolean&gt; f<span class="delimiter">(</span><span class="keyword">final</span> AnnotatedElement e<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> F&lt;String, Boolean&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public Boolean f<span class="delimiter">(</span><span class="keyword">final</span> String s<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">final</span> F&lt;Category, Boolean&gt; p = <span class="keyword">new</span> F&lt;Category, Boolean&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              public Boolean f<span class="delimiter">(</span><span class="keyword">final</span> Category c<span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">return</span> array<span class="delimiter">(</span>c.value<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.exists<span class="delimiter">(</span><span class="keyword">new</span> F&lt;String, Boolean&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  public Boolean f<span class="delimiter">(</span><span class="keyword">final</span> String cs<span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">return</span> cs.equals<span class="delimiter">(</span>s<span class="delimiter">)</span>;
                  <span class="delimiter">}</span>
                <span class="delimiter">}</span><span class="delimiter">)</span>;
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>;

            @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
            <span class="keyword">final</span> List&lt;Boolean&gt; bss = somes<span class="delimiter">(</span>list<span class="delimiter">(</span>fromNull<span class="delimiter">(</span>e.getAnnotation<span class="delimiter">(</span>Category.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>.map<span class="delimiter">(</span>p<span class="delimiter">)</span>,
              fromNull<span class="delimiter">(</span>declaringClass.getAnnotation<span class="delimiter">(</span>Category.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>.map<span class="delimiter">(</span>p<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
            <span class="keyword">return</span> bss.exists<span class="delimiter">(</span>Function.&lt;Boolean&gt;identity<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;

    <span class="keyword">final</span> F&lt;Name, String&gt; nameS = <span class="keyword">new</span> F&lt;Name, String&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public String f<span class="delimiter">(</span><span class="keyword">final</span> Name name<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> name.value<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;

    <span class="keyword">return</span> ms.filter<span class="delimiter">(</span><span class="keyword">new</span> F&lt;PropertyMember, Boolean&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Boolean f<span class="delimiter">(</span><span class="keyword">final</span> PropertyMember m<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">//noinspection ObjectEquality</span>
        <span class="keyword">return</span> m.isProperty<span class="delimiter">(</span><span class="delimiter">)</span> &amp;&amp;
            m.<span class="keyword">type</span><span class="delimiter">(</span><span class="delimiter">)</span> == Property.<span class="keyword">class</span> &amp;&amp;
            !m.element<span class="delimiter">(</span><span class="delimiter">)</span>.isAnnotationPresent<span class="delimiter">(</span>NoCheck.<span class="keyword">class</span><span class="delimiter">)</span> &amp;&amp;
            !declaringClass.isAnnotationPresent<span class="delimiter">(</span>NoCheck.<span class="keyword">class</span><span class="delimiter">)</span> &amp;&amp;
            <span class="delimiter">(</span>categories.length == <span class="int">0</span> || array<span class="delimiter">(</span>categories<span class="delimiter">)</span>.exists<span class="delimiter">(</span>p.f<span class="delimiter">(</span>m.element<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> &amp;&amp;
            <span class="delimiter">(</span>t.isSome<span class="delimiter">(</span><span class="delimiter">)</span> || isStatic<span class="delimiter">(</span>m.modifiers<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;PropertyMember, P3&lt;Property, String, Option&lt;CheckParams&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P3&lt;Property, String, Option&lt;CheckParams&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> PropertyMember m<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <span class="keyword">final</span> Option&lt;CheckParams&gt; params = fromNull<span class="delimiter">(</span>m.element<span class="delimiter">(</span><span class="delimiter">)</span>.getAnnotation<span class="delimiter">(</span>CheckParams.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>.orElse<span class="delimiter">(</span>fromNull<span class="delimiter">(</span>declaringClass.getAnnotation<span class="delimiter">(</span>CheckParams.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
          <span class="keyword">final</span> String name = fromNull<span class="delimiter">(</span>m.element<span class="delimiter">(</span><span class="delimiter">)</span>.getAnnotation<span class="delimiter">(</span>Name.<span class="keyword">class</span><span class="delimiter">)</span><span class="delimiter">)</span>.map<span class="delimiter">(</span>nameS<span class="delimiter">)</span>.orSome<span class="delimiter">(</span>m.name<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
          <span class="keyword">return</span> p<span class="delimiter">(</span>m.invoke<span class="delimiter">(</span>t.orSome<span class="delimiter">(</span>P.&lt;T&gt;p<span class="delimiter">(</span><span class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, name, params<span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Exception e<span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">throw</span> error<span class="delimiter">(</span>e.toString<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> static &lt;<a title="Nothing" id="39311">T</a>&gt; Option&lt;Constructor&lt;<a href="#39311" title="T">T</a>&gt;&gt; <a title="[T](c: java.lang.Class[T])fj.data.Option[java.lang.reflect.Constructor[T]]" id="39309">emptyCtor</a><span class="delimiter">(</span><span class="keyword">final</span> java.lang.<span title="java.lang.Class">Class</span>&lt;<a href="#39311" title="T">T</a>&gt; <a title="java.lang.Class[T]" id="39373">c</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    Option&lt;Constructor&lt;T&gt;&gt; ctor;

    <span class="comment">//noinspection UnusedCatchParameter</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      ctor = some<span class="delimiter">(</span>c.getDeclaredConstructor<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>NoSuchMethodException e<span class="delimiter">)</span> <span class="delimiter">{</span>
      ctor = none<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">return</span> ctor;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>