<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>fj/P2.java</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> fj;

<span class="keyword">import</span> <a href="Function.java.html#9624" title="object fj.Function">static</a> fj.Function.*;
<span class="keyword">import</span> fj.data.List;
<span class="keyword">import</span> fj.data.Stream;

<span class="comment">/**
 * A product-2.
 *
 * @version %build.number%
 */</span>
public <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="object fj.P2" id="9705">P2</a>&lt;<a title="Nothing" id="9706">A</a>, <a title="Nothing" id="9707">B</a>&gt; <span class="delimiter">{</span>
  <span class="comment">/**
   * Access the first element of the product.
   *
   * @return The first element of the product.
   */</span>
  public <span class="keyword">abstract</span> <a href="#9706" title="A">A</a> <a title="()A" id="18158">_1</a><span class="delimiter">(</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Access the second element of the product.
   *
   * @return The second element of the product.
   */</span>
  public <span class="keyword">abstract</span> <a href="#9707" title="B">B</a> <a title="()B" id="18159">_2</a><span class="delimiter">(</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Swaps the elements around in this product.
   *
   * @return A new product-2 with the elements swapped.
   */</span>
  public <span class="keyword">final</span> <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9707" title="B">B</a>, <a href="#9706" title="A">A</a>&gt; <a title="()fj.P2[B,A]" id="18160">swap</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> P2&lt;B, A&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public B _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> P2.<span class="keyword">this</span>._2<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public A _2<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> P2.<span class="keyword">this</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Map the first element of the product.
   *
   * @param f The function to map with.
   * @return A product with the given function applied.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18163">X</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#18163" title="X">X</a>, <a href="#9707" title="B">B</a>&gt; <a title="[X](f: fj.F[A,X])fj.P2[X,B]" id="18161">map1</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9706" title="A">A</a>, <a href="#18163" title="X">X</a>&gt; <a title="fj.F[A,X]" id="24100">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> P2&lt;X, B&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public X _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> f.f<span class="delimiter">(</span>P2.<span class="keyword">this</span>._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public B _2<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> P2.<span class="keyword">this</span>._2<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Map the second element of the product.
   *
   * @param f The function to map with.
   * @return A product with the given function applied.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18166">X</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9706" title="A">A</a>, <a href="#18166" title="X">X</a>&gt; <a title="[X](f: fj.F[B,X])fj.P2[A,X]" id="18164">map2</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9707" title="B">B</a>, <a href="#18166" title="X">X</a>&gt; <a title="fj.F[B,X]" id="24102">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> P2&lt;A, X&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public A _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> P2.<span class="keyword">this</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public X _2<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> f.f<span class="delimiter">(</span>P2.<span class="keyword">this</span>._2<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>


  <span class="comment">/**
   * Split this product between two argument functions and combine their output.
   *
   * @param f A function that will map the first element of this product.
   * @param g A function that will map the second element of this product.
   * @return A new product with the first function applied to the second element
   *         and the second function applied to the second element.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18170">C</a>, <a title="Nothing" id="18171">D</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#18170" title="C">C</a>, <a href="#18171" title="D">D</a>&gt; <a title="[C, D](f: fj.F[A,C], g: fj.F[B,D])fj.P2[C,D]" id="18167">split</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9706" title="A">A</a>, <a href="#18170" title="C">C</a>&gt; <a title="fj.F[A,C]" id="24104">f</a>, <span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9707" title="B">B</a>, <a href="#18171" title="D">D</a>&gt; <a title="fj.F[B,D]" id="24105">g</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;P2&lt;A, D&gt;, P2&lt;C, D&gt;&gt; ff = map1_<span class="delimiter">(</span>f<span class="delimiter">)</span>;
    <span class="keyword">final</span> F&lt;P2&lt;A, B&gt;, P2&lt;A, D&gt;&gt; gg = map2_<span class="delimiter">(</span>g<span class="delimiter">)</span>;
    <span class="keyword">return</span> compose<span class="delimiter">(</span>ff, gg<span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Duplicates this product on the first element, and maps the given function across the duplicate (Comonad pattern).
   *
   * @param k A function to map over the duplicated product.
   * @return A new product with the result of the given function applied to this product as the first element,
   *         and with the second element intact.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18174">C</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#18174" title="C">C</a>, <a href="#9707" title="B">B</a>&gt; <a title="[C](k: fj.F[fj.P2[A,B],C])fj.P2[C,B]" id="18172">cobind</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9706" title="A">A</a>, <a href="#9707" title="B">B</a>&gt;, <a href="#18174" title="C">C</a>&gt; <a title="fj.F[fj.P2[A,B],C]" id="24108">k</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> P2&lt;C, B&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      public C _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> k.f<span class="delimiter">(</span>P2.<span class="keyword">this</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public B _2<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> P2.<span class="keyword">this</span>._2<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Duplicates this product into the first element (Comonad pattern).
   *
   * @return A new product with this product in its first element and with the second element intact.
   */</span>
  public <span class="keyword">final</span> <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9706" title="A">A</a>, <a href="#9707" title="B">B</a>&gt;, <a href="#9707" title="B">B</a>&gt; <a title="()fj.P2[fj.P2[A,B],B]" id="18175">duplicate</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;P2&lt;A, B&gt;, P2&lt;A, B&gt;&gt; id = identity<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> cobind<span class="delimiter">(</span>id<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Replaces the first element of this product with the given value.
   *
   * @param c The value with which to replace the first element of this product.
   * @return A new product with the first element replaced with the given value.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18178">C</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#18178" title="C">C</a>, <a href="#9707" title="B">B</a>&gt; <a title="[C](c: C)fj.P2[C,B]" id="18176">inject</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#18178" title="C">C</a> <a title="C" id="24110">c</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;P2&lt;A, B&gt;, C&gt; co = constant<span class="delimiter">(</span>c<span class="delimiter">)</span>;
    <span class="keyword">return</span> cobind<span class="delimiter">(</span>co<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Applies a list of comonadic functions to this product, returning a list of values.
   *
   * @param fs A list of functions to apply to this product.
   * @return A list of the results of applying the given list of functions to this product.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18181">C</a>&gt; List&lt;<a href="#18181" title="C">C</a>&gt; <a title="[C](fs: fj.data.List[fj.F[fj.P2[A,B],C]])fj.data.List[C]" id="18179">sequenceW</a><span class="delimiter">(</span><span class="keyword">final</span> List&lt;<a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9706" title="A">A</a>, <a href="#9707" title="B">B</a>&gt;, <a href="#18181" title="C">C</a>&gt;&gt; <a title="fj.data.List[fj.F[fj.P2[A,B],C]]" id="24112">fs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    List.Buffer&lt;C&gt; cs = List.Buffer.empty<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> F&lt;P2&lt;A, B&gt;, C&gt; f : fs<span class="delimiter">)</span>
      cs = cs.snoc<span class="delimiter">(</span>f.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> cs.toList<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Applies a stream of comonadic functions to this product, returning a stream of values.
   *
   * @param fs A stream of functions to apply to this product.
   * @return A stream of the results of applying the given stream of functions to this product.
   */</span>
  public <span class="keyword">final</span> &lt;<a title="Nothing" id="18184">C</a>&gt; Stream&lt;<a href="#18184" title="C">C</a>&gt; <a title="[C](fs: fj.data.Stream[fj.F[fj.P2[A,B],C]])fj.data.Stream[C]" id="18182">sequenceW</a><span class="delimiter">(</span><span class="keyword">final</span> Stream&lt;<a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9706" title="A">A</a>, <a href="#9707" title="B">B</a>&gt;, <a href="#18184" title="C">C</a>&gt;&gt; <a title="fj.data.Stream[fj.F[fj.P2[A,B],C]]" id="24114">fs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> fs.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>
           ? Stream.&lt;C&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>
           : Stream.cons<span class="delimiter">(</span>fs.head<span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>, <span class="keyword">new</span> P1&lt;Stream&lt;C&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
             public Stream&lt;C&gt; _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
               <span class="keyword">return</span> sequenceW<span class="delimiter">(</span>fs.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
             <span class="delimiter">}</span>
           <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the 1-product projection over the first element.
   *
   * @return the 1-product projection over the first element.
   */</span>
  public <span class="keyword">final</span> <a href="P1.java.html#9697" title="fj.P1">P1</a>&lt;<a href="#9706" title="A">A</a>&gt; <a title="()fj.P1[A]" id="18185">_1_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> P2.&lt;A, B&gt;__1<span class="delimiter">(</span><span class="delimiter">)</span>.<span class="keyword">lazy</span><span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the 1-product projection over the second element.
   *
   * @return the 1-product projection over the second element.
   */</span>
  public <span class="keyword">final</span> <a href="P1.java.html#9697" title="fj.P1">P1</a>&lt;<a href="#9707" title="B">B</a>&gt; <a title="()fj.P1[B]" id="18186">_2_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> P2.&lt;A, B&gt;__2<span class="delimiter">(</span><span class="delimiter">)</span>.<span class="keyword">lazy</span><span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Provides a memoising P2 that remembers its values.
   *
   * @return A P2 that calls this P2 once for any given element and remembers the value for subsequent calls.
   */</span>
  public <span class="keyword">final</span> <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#9706" title="A">A</a>, <a href="#9707" title="B">B</a>&gt; <a title="()fj.P2[A,B]" id="18187">memo</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> P2&lt;A, B&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">final</span> P1&lt;A&gt; a = _1_<span class="delimiter">(</span><span class="delimiter">)</span>.memo<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="keyword">private</span> <span class="keyword">final</span> P1&lt;B&gt; b = _2_<span class="delimiter">(</span><span class="delimiter">)</span>.memo<span class="delimiter">(</span><span class="delimiter">)</span>;

      public A _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> a._1<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public B _2<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> b._1<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class version of the split function.
   *
   * @param f A function that will map the first element of the given product.
   * @param g A function that will map the second element of the given product.
   * @return A function that splits a given product between the two given functions and combines their output.
   */</span>
  public static &lt;<a title="Nothing" id="23999">A</a>, <a title="Nothing" id="24000">B</a>, <a title="Nothing" id="24001">C</a>, <a title="Nothing" id="24002">D</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#23999" title="A">A</a>, <a href="#24000" title="B">B</a>&gt;, <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24001" title="C">C</a>, <a href="#24002" title="D">D</a>&gt;&gt; <a title="[A, B, C, D](f: fj.F[A,C], g: fj.F[B,D])fj.F[fj.P2[A,B],fj.P2[C,D]]" id="23994">split_</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#23999" title="A">A</a>, <a href="#24001" title="C">C</a>&gt; <a title="fj.F[A,C]" id="24065">f</a>, <span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24000" title="B">B</a>, <a href="#24002" title="D">D</a>&gt; <a title="fj.F[B,D]" id="24066">g</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, P2&lt;C, D&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P2&lt;C, D&gt; f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> p.split<span class="delimiter">(</span>f, g<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Promotes a function so that it maps the first element of a product.
   *
   * @param f The function to promote.
   * @return The given function, promoted to map the first element of products.
   */</span>
  public static &lt;<a title="Nothing" id="24007">A</a>, <a title="Nothing" id="24008">B</a>, <a title="Nothing" id="24009">X</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24007" title="A">A</a>, <a href="#24008" title="B">B</a>&gt;, <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24009" title="X">X</a>, <a href="#24008" title="B">B</a>&gt;&gt; <a title="[A, B, X](f: fj.F[A,X])fj.F[fj.P2[A,B],fj.P2[X,B]]" id="24003">map1_</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24007" title="A">A</a>, <a href="#24009" title="X">X</a>&gt; <a title="fj.F[A,X]" id="24070">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, P2&lt;X, B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P2&lt;X, B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> p.map1<span class="delimiter">(</span>f<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Promotes a function so that it maps the second element of a product.
   *
   * @param f The function to promote.
   * @return The given function, promoted to map the second element of products.
   */</span>
  public static &lt;<a title="Nothing" id="24014">A</a>, <a title="Nothing" id="24015">B</a>, <a title="Nothing" id="24016">X</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24014" title="A">A</a>, <a href="#24015" title="B">B</a>&gt;, <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24014" title="A">A</a>, <a href="#24016" title="X">X</a>&gt;&gt; <a title="[A, B, X](f: fj.F[B,X])fj.F[fj.P2[A,B],fj.P2[A,X]]" id="24010">map2_</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24015" title="B">B</a>, <a href="#24016" title="X">X</a>&gt; <a title="fj.F[B,X]" id="24073">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, P2&lt;A, X&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P2&lt;A, X&gt; f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> p.map2<span class="delimiter">(</span>f<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Sends the given input value to both argument functions and combines their output.
   *
   * @param f A function to receive an input value.
   * @param g A function to receive an input value.
   * @param b An input value to send to both functions.
   * @return The product of the two functions applied to the input value.
   */</span>
  public static &lt;<a title="Nothing" id="24021">B</a>, <a title="Nothing" id="24022">C</a>, <a title="Nothing" id="24023">D</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24022" title="C">C</a>, <a href="#24023" title="D">D</a>&gt; <a title="[B, C, D](f: fj.F[B,C], g: fj.F[B,D], b: B)fj.P2[C,D]" id="24017">fanout</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24021" title="B">B</a>, <a href="#24022" title="C">C</a>&gt; <a title="fj.F[B,C]" id="24076">f</a>, <span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24021" title="B">B</a>, <a href="#24023" title="D">D</a>&gt; <a title="fj.F[B,D]" id="24077">g</a>, <span class="keyword">final</span> <a href="#24021" title="B">B</a> <a title="B" id="24078">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> join<span class="delimiter">(</span>P.&lt;B, B&gt;p2<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>b<span class="delimiter">)</span>.split<span class="delimiter">(</span>f, g<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps the given function across both the elements of the given product.
   *
   * @param f A function to map over a product.
   * @param p A product over which to map.
   * @return A new product with the given function applied to both elements.
   */</span>
  public static &lt;<a title="Nothing" id="24027">A</a>, <a title="Nothing" id="24028">B</a>&gt; <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24028" title="B">B</a>, <a href="#24028" title="B">B</a>&gt; <a title="[A, B](f: fj.F[A,B], p: fj.P2[A,A])fj.P2[B,B]" id="24024">map</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24027" title="A">A</a>, <a href="#24028" title="B">B</a>&gt; <a title="fj.F[A,B]" id="24083">f</a>, <span class="keyword">final</span> <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24027" title="A">A</a>, <a href="#24027" title="A">A</a>&gt; <a title="fj.P2[A,A]" id="24084">p</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> p.split<span class="delimiter">(</span>f, f<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a curried form of {@link #swap()}.
   *
   * @return A curried form of {@link #swap()}.
   */</span>
  public static &lt;<a title="Nothing" id="24032">A</a>, <a title="Nothing" id="24033">B</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24032" title="A">A</a>, <a href="#24033" title="B">B</a>&gt;, <a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24033" title="B">B</a>, <a href="#24032" title="A">A</a>&gt;&gt; <a title="[A, B]()fj.F[fj.P2[A,B],fj.P2[B,A]]" id="24029">swap_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, P2&lt;B, A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P2&lt;B, A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> p.swap<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a function that returns the first element of a product.
   *
   * @return A function that returns the first element of a product.
   */</span>
  public static &lt;<a title="Nothing" id="24037">A</a>, <a title="Nothing" id="24038">B</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24037" title="A">A</a>, <a href="#24038" title="B">B</a>&gt;, <a href="#24037" title="A">A</a>&gt; <a title="[A, B]()fj.F[fj.P2[A,B],A]" id="24034">__1</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, A&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public A f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> p._1<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a function that returns the second element of a product.
   *
   * @return A function that returns the second element of a product.
   */</span>
  public static &lt;<a title="Nothing" id="24042">A</a>, <a title="Nothing" id="24043">B</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24042" title="A">A</a>, <a href="#24043" title="B">B</a>&gt;, <a href="#24043" title="B">B</a>&gt; <a title="[A, B]()fj.F[fj.P2[A,B],B]" id="24039">__2</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, B&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public B f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> p._2<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Transforms a curried function of arity-2 to a function of a product-2
   *
   * @param f a curried function of arity-2 to transform into a function of a product-2
   * @return The function, transformed to operate on on a product-2
   */</span>
  public static &lt;<a title="Nothing" id="24048">A</a>, <a title="Nothing" id="24049">B</a>, <a title="Nothing" id="24050">C</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24048" title="A">A</a>, <a href="#24049" title="B">B</a>&gt;, <a href="#24050" title="C">C</a>&gt; <a title="[A, B, C](f: fj.F[A,fj.F[B,C]])fj.F[fj.P2[A,B],C]" id="24044">tuple</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24048" title="A">A</a>, <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#24049" title="B">B</a>, <a href="#24050" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="24091">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;P2&lt;A, B&gt;, C&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public C f<span class="delimiter">(</span><span class="keyword">final</span> P2&lt;A, B&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> f.f<span class="delimiter">(</span>p._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>p._2<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Transforms an uncurried function of arity-2 to a function of a product-2
   *
   * @param f an uncurried function of arity-2 to transform into a function of a product-2
   * @return The function, transformed to operate on on a product-2
   */</span>
  public static &lt;<a title="Nothing" id="24055">A</a>, <a title="Nothing" id="24056">B</a>, <a title="Nothing" id="24057">C</a>&gt; <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24055" title="A">A</a>, <a href="#24056" title="B">B</a>&gt;, <a href="#24057" title="C">C</a>&gt; <a title="[A, B, C](f: fj.F2[A,B,C])fj.F[fj.P2[A,B],C]" id="24051">tuple</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F2.java.html#9555" title="fj.F2">F2</a>&lt;<a href="#24055" title="A">A</a>, <a href="#24056" title="B">B</a>, <a href="#24057" title="C">C</a>&gt; <a title="fj.F2[A,B,C]" id="24094">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> tuple<span class="delimiter">(</span>curry<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Transforms a function of a product-2 to an uncurried function or arity-2.
   *
   * @param f A function of a product-2 to transform into an uncurried function.
   * @return The function, transformed to an uncurried function of arity-2.
   */</span>
  public static &lt;<a title="Nothing" id="24062">A</a>, <a title="Nothing" id="24063">B</a>, <a title="Nothing" id="24064">C</a>&gt; <a href="F2.java.html#9555" title="fj.F2">F2</a>&lt;<a href="#24062" title="A">A</a>, <a href="#24063" title="B">B</a>, <a href="#24064" title="C">C</a>&gt; <a title="[A, B, C](f: fj.F[fj.P2[A,B],C])fj.F2[A,B,C]" id="24058">untuple</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="F.java.html#9532" title="fj.F">F</a>&lt;<a href="#9705" title="fj.P2">P2</a>&lt;<a href="#24062" title="A">A</a>, <a href="#24063" title="B">B</a>&gt;, <a href="#24064" title="C">C</a>&gt; <a title="fj.F[fj.P2[A,B],C]" id="24097">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F2&lt;A, B, C&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public C f<span class="delimiter">(</span><span class="keyword">final</span> A a, <span class="keyword">final</span> B b<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> f.f<span class="delimiter">(</span>P.p<span class="delimiter">(</span>a, b<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>