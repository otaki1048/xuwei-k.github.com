<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>fj/data/Array.java</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> fj.data;

<span class="keyword">import</span> fj.Effect;
<span class="keyword">import</span> fj.F;
<span class="keyword">import</span> fj.F2;
<span class="keyword">import</span> fj.P;
<span class="keyword">import</span> fj.P1;
<span class="keyword">import</span> fj.P2;
<span class="keyword">import</span> fj.Unit;

<span class="keyword">import</span> <a href="../Function.java.html#9624" title="object fj.Function">static</a> fj.Function.*;
<span class="keyword">import</span> static fj.P.p;
<span class="keyword">import</span> static fj.P.p2;
<span class="keyword">import</span> static fj.Unit.unit;
<span class="keyword">import</span> static fj.data.List.iterableList;
<span class="keyword">import</span> static fj.data.Option.none;
<span class="keyword">import</span> static fj.data.Option.some;

<span class="keyword">import</span> static java.lang.Math.min;
<span class="keyword">import</span> static java.lang.System.arraycopy;

<span class="keyword">import</span> java.util.AbstractCollection;
<span class="keyword">import</span> java.util.Collection;
<span class="keyword">import</span> java.util.Iterator;
<span class="keyword">import</span> java.util.NoSuchElementException;

<span class="comment">/**
 * Provides an interface to arrays.
 *
 * @version %build.number%
 */</span>
public <span class="keyword">final</span> <span class="keyword">class</span> <a title="object fj.data.Array" id="10010">Array</a>&lt;<a title="Nothing" id="10011">A</a>&gt; implements Iterable&lt;<a href="#10011" title="A">A</a>&gt; <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">final</span> Object<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="Array[java.lang.Object]" id="18069">a</a>;

  <span class="keyword">private</span> Array<span class="delimiter">(</span><span class="keyword">final</span> Object<span class="delimiter">[</span><span class="delimiter">]</span> a<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">this</span>.a = a;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an iterator for this array. This method exists to permit the use in a &lt;code&gt;for&lt;/code&gt;-each loop.
   *
   * @return A iterator for this array.
   */</span>
  public Iterator&lt;<a href="#10011" title="A">A</a>&gt; <a title="()java.util.Iterator[A]" id="18071">iterator</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> toCollection<span class="delimiter">(</span><span class="delimiter">)</span>.iterator<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the element at the given index if it exists, fails otherwise.
   *
   * @param index The index at which to get the element to return.
   * @return The element at the given index if it exists, fails otherwise.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public <a href="#10011" title="A">A</a> <a title="(index: Int)A" id="18072">get</a><span class="delimiter">(</span><span class="keyword">final</span> int <a title="Int" id="26355">index</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>index<span class="delimiter">]</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Sets the element at the given index to the given value.
   *
   * @param index The index at which to set the given value.
   * @param a     The value to set at the given index.
   * @return The unit value.
   */</span>
  public Unit <a title="(index: Int, a: A)fj.Unit" id="18073">set</a><span class="delimiter">(</span><span class="keyword">final</span> int <a title="Int" id="26357">index</a>, <span class="keyword">final</span> <a href="#10011" title="A">A</a> <a title="A" id="26358">a</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">this</span>.a<span class="delimiter">[</span>index<span class="delimiter">]</span> = a;
    <span class="keyword">return</span> unit<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the length of this array.
   *
   * @return The length of this array.
   */</span>
  public int <a title="()Int" id="18074">length</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> a.length;
  <span class="delimiter">}</span>

  public ImmutableProjection&lt;<a href="#10011" title="A">A</a>&gt; <a title="()Array.this.ImmutableProjection[A]" id="18075">immutable</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> ImmutableProjection&lt;A&gt;<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns &lt;code&gt;true&lt;/code&gt; is this array is empty, &lt;code&gt;false&lt;/code&gt; otherwise.
   *
   * @return &lt;code&gt;true&lt;/code&gt; is this array is empty, &lt;code&gt;false&lt;/code&gt; otherwise.
   */</span>
  public boolean <a title="()Boolean" id="18076">isEmpty</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> a.length == <span class="int">0</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns &lt;code&gt;false&lt;/code&gt; is this array is empty, &lt;code&gt;true&lt;/code&gt; otherwise.
   *
   * @return &lt;code&gt;false&lt;/code&gt; is this array is empty, &lt;code&gt;true&lt;/code&gt; otherwise.
   */</span>
  public boolean <a title="()Boolean" id="18077">isNotEmpty</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> a.length != <span class="int">0</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a copy of the underlying primitive array.
   *
   * @param c A class for the returned array.
   * @return A copy of the underlying primitive array.
   */</span>
  public <a href="#10011" title="A">A</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="(c: java.lang.Class[Array[A with java.lang.Object]])Array[A with java.lang.Object]" id="18078">array</a><span class="delimiter">(</span><span class="keyword">final</span> Class&lt;<a href="#10011" title="A">A</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span>&gt; <a title="java.lang.Class[Array[A]]" id="26400">c</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> copyOf<span class="delimiter">(</span>a, a.length, c<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a copy of the underlying primitive array.
   *
   * @return A copy of the underlying primitive array;
   */</span>
  public Object<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="()Array[java.lang.Object]" id="18079">array</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> copyOf<span class="delimiter">(</span>a, a.length<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an option projection of this array; &lt;code&gt;None&lt;/code&gt; if empty, or the first element in
   * &lt;code&gt;Some&lt;/code&gt;.
   *
   * @return An option projection of this array.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="()fj.data.Option[A]" id="18080">toOption</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> a.length == <span class="int">0</span> ? Option.&lt;A&gt;none<span class="delimiter">(</span><span class="delimiter">)</span> : some<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span><span class="int">0</span><span class="delimiter">]</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an either projection of this array; the given argument in &lt;code&gt;Left&lt;/code&gt; if empty,
   * or the first element in &lt;code&gt;Right&lt;/code&gt;.
   *
   * @param x The value to return in left if this array is empty.
   * @return An either projection of this array.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public &lt;<a title="Nothing" id="18083">X</a>&gt; <a href="Either.java.html#10039" title="fj.data.Either">Either</a>&lt;<a href="#18083" title="X">X</a>, <a href="#10011" title="A">A</a>&gt; <a title="[X](x: fj.P1[X])fj.data.Either[X,A]" id="18081">toEither</a><span class="delimiter">(</span><span class="keyword">final</span> P1&lt;<a href="#18083" title="X">X</a>&gt; <a title="fj.P1[X]" id="26408">x</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> a.length == <span class="int">0</span> ? Either.&lt;X, A&gt;left<span class="delimiter">(</span>x._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> : Either.&lt;X, A&gt;right<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span><span class="int">0</span><span class="delimiter">]</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a list projection of this array.
   *
   * @return A list projection of this array.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public <a href="List.java.html#10232" title="fj.data.List">List</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="()fj.data.List[A]" id="18084">toList</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    List&lt;A&gt; x = List.nil<span class="delimiter">(</span><span class="delimiter">)</span>;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = a.length - <span class="int">1</span>; i &gt;= <span class="int">0</span>; i--<span class="delimiter">)</span> <span class="delimiter">{</span>
      x = x.cons<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="keyword">return</span> x;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a stream projection of this array.
   *
   * @return A stream projection of this array.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="()fj.data.Stream[A]" id="18085">toStream</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> Stream.unfold<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Integer, Option&lt;P2&lt;A, Integer&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Option&lt;P2&lt;A, Integer&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Integer o<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> a.length &gt; o ? some<span class="delimiter">(</span>p<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>o<span class="delimiter">]</span>, o + <span class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
            : Option.&lt;P2&lt;A, Integer&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>, <span class="int">0</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps the given function across this array.
   *
   * @param f The function to map across this array.
   * @return A new array after the given function has been applied to each element.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
  public &lt;<a title="Nothing" id="18088">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18088" title="B">B</a>&gt; <a title="[B](f: fj.F[A,B])fj.data.Array[B]" id="18086">map</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, <a href="#18088" title="B">B</a>&gt; <a title="fj.F[A,B]" id="26413">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Object<span class="delimiter">[</span><span class="delimiter">]</span> bs = <span class="keyword">new</span> Object<span class="delimiter">[</span>a.length<span class="delimiter">]</span>;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = <span class="int">0</span>; i &lt; a.length; i++<span class="delimiter">)</span> <span class="delimiter">{</span>
      bs<span class="delimiter">[</span>i<span class="delimiter">]</span> = f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;B&gt;<span class="delimiter">(</span>bs<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Filters elements from this array by returning only elements which produce &lt;code&gt;true&lt;/code&gt;
   * when the given function is applied to them.
   *
   * @param f The predicate function to filter on.
   * @return A new array whose elements all match the given predicate.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="(f: fj.F[A,java.lang.Boolean])fj.data.Array[A]" id="18089">filter</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, Boolean&gt; <a title="fj.F[A,java.lang.Boolean]" id="26416">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    List&lt;A&gt; x = List.nil<span class="delimiter">(</span><span class="delimiter">)</span>;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = a.length - <span class="int">1</span>; i &gt;= <span class="int">0</span>; i--<span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">if</span> <span class="delimiter">(</span>f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
        x = x.cons<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="keyword">return</span> x.toArray<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a side-effect for each element of this array.
   *
   * @param f The side-effect to perform for the given element.
   * @return The unit value.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public Unit <a title="(f: fj.F[A,fj.Unit])fj.Unit" id="18090">foreach</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, Unit&gt; <a title="fj.F[A,fj.Unit]" id="26418">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> Object x : a<span class="delimiter">)</span> <span class="delimiter">{</span>
      f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> x<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="keyword">return</span> unit<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a side-effect for each element of this array.
   *
   * @param f The side-effect to perform for the given element.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public void <a title="(f: fj.Effect[A])Unit" id="18091">foreach</a><span class="delimiter">(</span><span class="keyword">final</span> Effect&lt;<a href="#10011" title="A">A</a>&gt; <a title="fj.Effect[A]" id="26420">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> Object x : a<span class="delimiter">)</span> <span class="delimiter">{</span>
      f.e<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> x<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a right-fold reduction across this array. This function runs in constant stack space.
   *
   * @param f The function to apply on each element of the array.
   * @param b The beginning value to start the application from.
   * @return The final result after the right-fold reduction.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public &lt;<a title="Nothing" id="18094">B</a>&gt; <a href="#18094" title="B">B</a> <a title="[B](f: fj.F[A,fj.F[B,B]], b: B)B" id="18092">foldRight</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, F&lt;<a href="#18094" title="B">B</a>, <a href="#18094" title="B">B</a>&gt;&gt; <a title="fj.F[A,fj.F[B,B]]" id="26422">f</a>, <span class="keyword">final</span> <a href="#18094" title="B">B</a> <a title="B" id="26423">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    B x = b;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = a.length - <span class="int">1</span>; i &gt;= <span class="int">0</span>; i--<span class="delimiter">)</span>
      x = f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>x<span class="delimiter">)</span>;

    <span class="keyword">return</span> x;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a right-fold reduction across this array. This function runs in constant stack space.
   *
   * @param f The function to apply on each element of the array.
   * @param b The beginning value to start the application from.
   * @return The final result after the right-fold reduction.
   */</span>
  public &lt;<a title="Nothing" id="18097">B</a>&gt; <a href="#18097" title="B">B</a> <a title="[B](f: fj.F2[A,B,B], b: B)B" id="18095">foldRight</a><span class="delimiter">(</span><span class="keyword">final</span> F2&lt;<a href="#10011" title="A">A</a>, <a href="#18097" title="B">B</a>, <a href="#18097" title="B">B</a>&gt; <a title="fj.F2[A,B,B]" id="26427">f</a>, <span class="keyword">final</span> <a href="#18097" title="B">B</a> <a title="B" id="26428">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> foldRight<span class="delimiter">(</span>curry<span class="delimiter">(</span>f<span class="delimiter">)</span>, b<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a left-fold reduction across this array. This function runs in constant space.
   *
   * @param f The function to apply on each element of the array.
   * @param b The beginning value to start the application from.
   * @return The final result after the left-fold reduction.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public &lt;<a title="Nothing" id="18100">B</a>&gt; <a href="#18100" title="B">B</a> <a title="[B](f: fj.F[B,fj.F[A,B]], b: B)B" id="18098">foldLeft</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#18100" title="B">B</a>, F&lt;<a href="#10011" title="A">A</a>, <a href="#18100" title="B">B</a>&gt;&gt; <a title="fj.F[B,fj.F[A,B]]" id="26432">f</a>, <span class="keyword">final</span> <a href="#18100" title="B">B</a> <a title="B" id="26433">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    B x = b;

    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> Object aa : a<span class="delimiter">)</span>
      x = f.f<span class="delimiter">(</span>x<span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> aa<span class="delimiter">)</span>;

    <span class="keyword">return</span> x;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a left-fold reduction across this array. This function runs in constant space.
   *
   * @param f The function to apply on each element of the array.
   * @param b The beginning value to start the application from.
   * @return The final result after the left-fold reduction.
   */</span>
  public &lt;<a title="Nothing" id="18103">B</a>&gt; <a href="#18103" title="B">B</a> <a title="[B](f: fj.F2[B,A,B], b: B)B" id="18101">foldLeft</a><span class="delimiter">(</span><span class="keyword">final</span> F2&lt;<a href="#18103" title="B">B</a>, <a href="#10011" title="A">A</a>, <a href="#18103" title="B">B</a>&gt; <a title="fj.F2[B,A,B]" id="26437">f</a>, <span class="keyword">final</span> <a href="#18103" title="B">B</a> <a title="B" id="26438">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> foldLeft<span class="delimiter">(</span>curry<span class="delimiter">(</span>f<span class="delimiter">)</span>, b<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Binds the given function across each element of this array with a final join.
   *
   * @param f The function to apply to each element of this array.
   * @return A new array after performing the map, then final join.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
  public &lt;<a title="Nothing" id="18106">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18106" title="B">B</a>&gt; <a title="[B](f: fj.F[A,fj.data.Array[B]])fj.data.Array[B]" id="18104">bind</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18106" title="B">B</a>&gt;&gt; <a title="fj.F[A,fj.data.Array[B]]" id="26442">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    List&lt;Array&lt;B&gt;&gt; x = List.nil<span class="delimiter">(</span><span class="delimiter">)</span>;
    int len = <span class="int">0</span>;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = a.length - <span class="int">1</span>; i &gt;= <span class="int">0</span>; i--<span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">final</span> Array&lt;B&gt; bs = f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span><span class="delimiter">)</span>;
      len = len + bs.length<span class="delimiter">(</span><span class="delimiter">)</span>;
      x = x.cons<span class="delimiter">(</span>bs<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="keyword">final</span> Object<span class="delimiter">[</span><span class="delimiter">]</span> bs = <span class="keyword">new</span> Object<span class="delimiter">[</span>len<span class="delimiter">]</span>;

    x.foreach<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Array&lt;B&gt;, Unit&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">private</span> int i;

      public Unit f<span class="delimiter">(</span><span class="keyword">final</span> Array&lt;B&gt; x<span class="delimiter">)</span> <span class="delimiter">{</span>
        arraycopy<span class="delimiter">(</span>x.a, <span class="int">0</span>, bs, i, x.a.length<span class="delimiter">)</span>;
        i = i + x.a.length;
        <span class="keyword">return</span> unit<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;

    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;B&gt;<span class="delimiter">(</span>bs<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a bind across each array element, but ignores the element value each time.
   *
   * @param bs The array to apply in the final join.
   * @return A new array after the final join.
   */</span>
  public &lt;<a title="Nothing" id="18109">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18109" title="B">B</a>&gt; <a title="[B](bs: fj.data.Array[B])fj.data.Array[B]" id="18107">sequence</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18109" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26445">bs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;A, Array&lt;B&gt;&gt; c = constant<span class="delimiter">(</span>bs<span class="delimiter">)</span>;
    <span class="keyword">return</span> bind<span class="delimiter">(</span>c<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Binds the given function across each element of this array and the given array with a final
   * join.
   *
   * @param sb A given array to bind the given function with.
   * @param f  The function to apply to each element of this array and the given array.
   * @return A new array after performing the map, then final join.
   */</span>
  public &lt;<a title="Nothing" id="18113">B</a>, <a title="Nothing" id="18114">C</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18114" title="C">C</a>&gt; <a title="[B, C](sb: fj.data.Array[B], f: fj.F[A,fj.F[B,C]])fj.data.Array[C]" id="18110">bind</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18113" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26448">sb</a>, <span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, F&lt;<a href="#18113" title="B">B</a>, <a href="#18114" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="26449">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> sb.apply<span class="delimiter">(</span>map<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Binds the given function across each element of this array and the given array with a final
   * join.
   *
   * @param sb A given array to bind the given function with.
   * @param f  The function to apply to each element of this array and the given array.
   * @return A new array after performing the map, then final join.
   */</span>
  public &lt;<a title="Nothing" id="18118">B</a>, <a title="Nothing" id="18119">C</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18119" title="C">C</a>&gt; <a title="[B, C](sb: fj.data.Array[B], f: fj.F2[A,B,C])fj.data.Array[C]" id="18115">bind</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18118" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26453">sb</a>, <span class="keyword">final</span> F2&lt;<a href="#10011" title="A">A</a>, <a href="#18118" title="B">B</a>, <a href="#18119" title="C">C</a>&gt; <a title="fj.F2[A,B,C]" id="26454">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> bind<span class="delimiter">(</span>sb, curry<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs function application within an array (applicative functor pattern).
   *
   * @param lf The array of functions to apply.
   * @return A new array after applying the given array of functions through this array.
   */</span>
  public &lt;<a title="Nothing" id="18122">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18122" title="B">B</a>&gt; <a title="[B](lf: fj.data.Array[fj.F[A,B]])fj.data.Array[B]" id="18120">apply</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;F&lt;<a href="#10011" title="A">A</a>, <a href="#18122" title="B">B</a>&gt;&gt; <a title="fj.data.Array[fj.F[A,B]]" id="26458">lf</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> lf.bind<span class="delimiter">(</span><span class="keyword">new</span> F&lt;F&lt;A, B&gt;, Array&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Array&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;A, B&gt; f<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> map<span class="delimiter">(</span><span class="keyword">new</span> F&lt;A, B&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public B f<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> f.f<span class="delimiter">(</span>a<span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Reverse this array in constant stack space.
   *
   * @return A new array that is the reverse of this one.
   */</span>
  public <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="()fj.data.Array[A]" id="18123">reverse</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Object<span class="delimiter">[</span><span class="delimiter">]</span> x = <span class="keyword">new</span> Object<span class="delimiter">[</span>a.length<span class="delimiter">]</span>;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = <span class="int">0</span>; i &lt; a.length; i++<span class="delimiter">)</span> <span class="delimiter">{</span>
      x<span class="delimiter">[</span>a.length - <span class="int">1</span> - i<span class="delimiter">]</span> = a<span class="delimiter">[</span>i<span class="delimiter">]</span>;
    <span class="delimiter">}</span>

    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span>x<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Appends the given array to this array.
   *
   * @param aas The array to append to this one.
   * @return A new array that has appended the given array.
   */</span>
  public <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="(aas: fj.data.Array[A])fj.data.Array[A]" id="18124">append</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="fj.data.Array[A]" id="26462">aas</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Object<span class="delimiter">[</span><span class="delimiter">]</span> x = <span class="keyword">new</span> Object<span class="delimiter">[</span>a.length + aas.a.length<span class="delimiter">]</span>;

    arraycopy<span class="delimiter">(</span>a, <span class="int">0</span>, x, <span class="int">0</span>, a.length<span class="delimiter">)</span>;
    arraycopy<span class="delimiter">(</span>aas.a, <span class="int">0</span>, x, a.length, aas.a.length<span class="delimiter">)</span>;

    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span>x<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an empty array.
   *
   * @return An empty array.
   */</span>
  public static &lt;<a title="Nothing" id="26248">A</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26248" title="A">A</a>&gt; <a title="[A]()fj.data.Array[A]" id="26246">empty</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span><span class="keyword">new</span> Object<span class="delimiter">[</span><span class="int">0</span><span class="delimiter">]</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Constructs an array from the given elements.
   *
   * @param a The elements to construct the array with.
   * @return A new array of the given elements.
   */</span>
  public static &lt;<a title="Nothing" id="26251">A</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26251" title="A">A</a>&gt; <a title="[A](a: &lt;repeated...&gt;[A])fj.data.Array[A]" id="26249">array</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#26251" title="&lt;repeated...&gt;">A</a>... <a title="&lt;repeated...&gt;[A]" id="26291">a</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span>a<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Unsafe package-private constructor. The elements of the given array must be assignable to the given type.
   *
   * @param a An array with elements of the given type.
   * @return A wrapped array.
   */</span>
  static &lt;<a title="Nothing" id="26254">A</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26254" title="A">A</a>&gt; <a title="[A](a: Array[java.lang.Object])fj.data.Array[A]" id="26252">mkArray</a><span class="delimiter">(</span><span class="keyword">final</span> Object<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="Array[java.lang.Object]" id="26294">a</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span>a<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Constructs a singleton array.
   *
   * @param a The element to put in the array.
   * @return An array with the given single element.
   */</span>
  public static &lt;<a title="Nothing" id="26257">A</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26257" title="A">A</a>&gt; <a title="[A](a: A)fj.data.Array[A]" id="26255">single</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#26257" title="A">A</a> <a title="A" id="26296">a</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span><span class="keyword">new</span> Object<span class="delimiter">[</span><span class="delimiter">]</span><span class="delimiter">{</span>a<span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * First-class wrapper function for arrays.
   *
   * @return A function that wraps a given array.
   */</span>
  public static &lt;<a title="Nothing" id="26260">A</a>&gt; F&lt;<a href="#26260" title="A">A</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span>, <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26260" title="A">A</a>&gt;&gt; <a title="[A]()fj.F[Array[A with java.lang.Object],fj.data.Array[A]]" id="26258">wrap</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;A<span class="delimiter">[</span><span class="delimiter">]</span>, Array&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Array&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> A<span class="delimiter">[</span><span class="delimiter">]</span> as<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> array<span class="delimiter">(</span>as<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * First-class map function for Arrays.
   *
   * @return A function that maps a given function across a given array.
   */</span>
  public static &lt;<a title="Nothing" id="26264">A</a>, <a title="Nothing" id="26265">B</a>&gt; F&lt;F&lt;<a href="#26264" title="A">A</a>, <a href="#26265" title="B">B</a>&gt;, F&lt;<a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26264" title="A">A</a>&gt;, <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26265" title="B">B</a>&gt;&gt;&gt; <a title="[A, B]()fj.F[fj.F[A,B],fj.F[fj.data.Array[A],fj.data.Array[B]]]" id="26261">map</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> curry<span class="delimiter">(</span><span class="keyword">new</span> F2&lt;F&lt;A, B&gt;, Array&lt;A&gt;, Array&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Array&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;A, B&gt; abf, <span class="keyword">final</span> Array&lt;A&gt; array<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> array.map<span class="delimiter">(</span>abf<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Joins the given array of arrays using a bind operation.
   *
   * @param o The array of arrays to join.
   * @return A new array that is the join of the given arrays.
   */</span>
  public static &lt;<a title="Nothing" id="26268">A</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26268" title="A">A</a>&gt; <a title="[A](o: fj.data.Array[fj.data.Array[A]])fj.data.Array[A]" id="26266">join</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26268" title="A">A</a>&gt;&gt; <a title="fj.data.Array[fj.data.Array[A]]" id="26302">o</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;Array&lt;A&gt;, Array&lt;A&gt;&gt; id = identity<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> o.bind<span class="delimiter">(</span>id<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class version of join
   *
   * @return A function that joins a array of arrays using a bind operation.
   */</span>
  public static &lt;<a title="Nothing" id="26271">A</a>&gt; F&lt;<a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26271" title="A">A</a>&gt;&gt;, <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26271" title="A">A</a>&gt;&gt; <a title="[A]()fj.F[fj.data.Array[fj.data.Array[A]],fj.data.Array[A]]" id="26269">join</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;Array&lt;Array&lt;A&gt;&gt;, Array&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Array&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Array&lt;Array&lt;A&gt;&gt; as<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> join<span class="delimiter">(</span>as<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns &lt;code&gt;true&lt;/code&gt; if the predicate holds for all of the elements of this array,
   * &lt;code&gt;false&lt;/code&gt; otherwise (&lt;code&gt;true&lt;/code&gt; for the empty array).
   *
   * @param f the predicate function to test on each element of this array.
   * @return &lt;code&gt;true&lt;/code&gt; if the predicate holds for all of the elements of this array,
   *         &lt;code&gt;false&lt;/code&gt; otherwise.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public boolean <a title="(f: fj.F[A,java.lang.Boolean])Boolean" id="18125">forall</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, Boolean&gt; <a title="fj.F[A,java.lang.Boolean]" id="26464">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> Object x : a<span class="delimiter">)</span>
      <span class="keyword">if</span> <span class="delimiter">(</span>!f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> x<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;

    <span class="keyword">return</span> <span class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns &lt;code&gt;true&lt;/code&gt; if the predicate holds for at least one of the elements of this
   * array, &lt;code&gt;false&lt;/code&gt; otherwise (&lt;code&gt;false&lt;/code&gt; for the empty array).
   *
   * @param f the predicate function to test on the elements of this array.
   * @return &lt;code&gt;true&lt;/code&gt; if the predicate holds for at least one of the elements of this
   *         array.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public boolean <a title="(f: fj.F[A,java.lang.Boolean])Boolean" id="18126">exists</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, Boolean&gt; <a title="fj.F[A,java.lang.Boolean]" id="26466">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> Object x : a<span class="delimiter">)</span>
      <span class="keyword">if</span> <span class="delimiter">(</span>f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> x<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">return</span> <span class="keyword">true</span>;

    <span class="keyword">return</span> <span class="keyword">false</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Finds the first occurrence of an element that matches the given predicate or no value if no
   * elements match.
   *
   * @param f The predicate function to test on elements of this array.
   * @return The first occurrence of an element that matches the given predicate or no value if no
   *         elements match.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10011" title="A">A</a>&gt; <a title="(f: fj.F[A,java.lang.Boolean])fj.data.Option[A]" id="18127">find</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, Boolean&gt; <a title="fj.F[A,java.lang.Boolean]" id="26468">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> Object x : a<span class="delimiter">)</span>
      <span class="keyword">if</span> <span class="delimiter">(</span>f.f<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> x<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">return</span> some<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> x<span class="delimiter">)</span>;

    <span class="keyword">return</span> none<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an array of integers from the given &lt;code&gt;from&lt;/code&gt; value (inclusive) to the given
   * &lt;code&gt;to&lt;/code&gt; value (exclusive).
   *
   * @param from The minimum value for the array (inclusive).
   * @param to   The maximum value for the array (exclusive).
   * @return An array of integers from the given &lt;code&gt;from&lt;/code&gt; value (inclusive) to the given
   *         &lt;code&gt;to&lt;/code&gt; value (exclusive).
   */</span>
  public static <a href="#10010" title="fj.data.Array">Array</a>&lt;Integer&gt; <a title="(from: Int, to: Int)fj.data.Array[java.lang.Integer]" id="26272">range</a><span class="delimiter">(</span><span class="keyword">final</span> int <a title="Int" id="26306">from</a>, <span class="keyword">final</span> int <a title="Int" id="26307">to</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">if</span> <span class="delimiter">(</span>from &gt;= to<span class="delimiter">)</span>
      <span class="keyword">return</span> empty<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">final</span> Array&lt;Integer&gt; a = <span class="keyword">new</span> Array&lt;Integer&gt;<span class="delimiter">(</span><span class="keyword">new</span> Integer<span class="delimiter">[</span>to - from<span class="delimiter">]</span><span class="delimiter">)</span>;

      <span class="keyword">for</span> <span class="delimiter">(</span>int i = from; i &lt; to; i++<span class="delimiter">)</span>
        a.set<span class="delimiter">(</span>i - from, i<span class="delimiter">)</span>;

      <span class="keyword">return</span> a;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this array with the given array using the given function to produce a new array. If this
   * array and the given array have different lengths, then the longer array is normalised so this
   * function never fails.
   *
   * @param bs The array to zip this array with.
   * @param f  The function to zip this array and the given array with.
   * @return A new array with a length the same as the shortest of this array and the given array.
   */</span>
  public &lt;<a title="Nothing" id="18131">B</a>, <a title="Nothing" id="18132">C</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18132" title="C">C</a>&gt; <a title="[B, C](bs: fj.data.Array[B], f: fj.F[A,fj.F[B,C]])fj.data.Array[C]" id="18128">zipWith</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18131" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26470">bs</a>, <span class="keyword">final</span> F&lt;<a href="#10011" title="A">A</a>, F&lt;<a href="#18131" title="B">B</a>, <a href="#18132" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="26471">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> int len = min<span class="delimiter">(</span>a.length, bs.length<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">final</span> Array&lt;C&gt; x = <span class="keyword">new</span> Array&lt;C&gt;<span class="delimiter">(</span><span class="keyword">new</span> Object<span class="delimiter">[</span>len<span class="delimiter">]</span><span class="delimiter">)</span>;

    <span class="keyword">for</span> <span class="delimiter">(</span>int i = <span class="int">0</span>; i &lt; len; i++<span class="delimiter">)</span> <span class="delimiter">{</span>
      x.set<span class="delimiter">(</span>i, f.f<span class="delimiter">(</span>get<span class="delimiter">(</span>i<span class="delimiter">)</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>bs.get<span class="delimiter">(</span>i<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="keyword">return</span> x;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this array with the given array using the given function to produce a new array. If this
   * array and the given array have different lengths, then the longer array is normalised so this
   * function never fails.
   *
   * @param bs The array to zip this array with.
   * @param f  The function to zip this array and the given array with.
   * @return A new array with a length the same as the shortest of this array and the given array.
   */</span>
  public &lt;<a title="Nothing" id="18136">B</a>, <a title="Nothing" id="18137">C</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18137" title="C">C</a>&gt; <a title="[B, C](bs: fj.data.Array[B], f: fj.F2[A,B,C])fj.data.Array[C]" id="18133">zipWith</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18136" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26475">bs</a>, <span class="keyword">final</span> F2&lt;<a href="#10011" title="A">A</a>, <a href="#18136" title="B">B</a>, <a href="#18137" title="C">C</a>&gt; <a title="fj.F2[A,B,C]" id="26476">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> zipWith<span class="delimiter">(</span>bs, curry<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this array with the given array to produce an array of pairs. If this array and the given
   * array have different lengths, then the longer array is normalised so this function never fails.
   *
   * @param bs The array to zip this array with.
   * @return A new array with a length the same as the shortest of this array and the given array.
   */</span>
  public &lt;<a title="Nothing" id="18140">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;P2&lt;<a href="#10011" title="A">A</a>, <a href="#18140" title="B">B</a>&gt;&gt; <a title="[B](bs: fj.data.Array[B])fj.data.Array[fj.P2[A,B]]" id="18138">zip</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18140" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26480">bs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;A, F&lt;B, P2&lt;A, B&gt;&gt;&gt; __2 = p2<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> zipWith<span class="delimiter">(</span>bs, __2<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this array with the index of its element as a pair.
   *
   * @return A new array with the same length as this array.
   */</span>
  public <a href="#10010" title="fj.data.Array">Array</a>&lt;P2&lt;<a href="#10011" title="A">A</a>, Integer&gt;&gt; <a title="()fj.data.Array[fj.P2[A,java.lang.Integer]]" id="18141">zipIndex</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> zipWith<span class="delimiter">(</span>range<span class="delimiter">(</span><span class="int">0</span>, length<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span class="keyword">new</span> F&lt;A, F&lt;Integer, P2&lt;A, Integer&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public F&lt;Integer, P2&lt;A, Integer&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> F&lt;Integer, P2&lt;A, Integer&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public P2&lt;A, Integer&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Integer i<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> p<span class="delimiter">(</span>a, i<span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Projects an immutable collection of this array.
   *
   * @return An immutable collection of this array.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
  public Collection&lt;<a href="#10011" title="A">A</a>&gt; <a title="()java.util.Collection[A]" id="18142">toCollection</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> AbstractCollection&lt;A&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Iterator&lt;A&gt; iterator<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;A&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">private</span> int i;

          public boolean hasNext<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> i &lt; a.length;
          <span class="delimiter">}</span>

          public A next<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">if</span> <span class="delimiter">(</span>i &gt;= a.length<span class="delimiter">)</span>
              <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">else</span> <span class="delimiter">{</span>
              <span class="keyword">final</span> A aa = <span class="delimiter">(</span>A<span class="delimiter">)</span> a<span class="delimiter">[</span>i<span class="delimiter">]</span>;
              i++;
              <span class="keyword">return</span> aa;
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          public void remove<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>

      public int size<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> a.length;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Takes the given iterable to an array.
   *
   * @param i The iterable to take to an array.
   * @return An array from the given iterable.
   */</span>
  public static &lt;<a title="Nothing" id="26275">A</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26275" title="A">A</a>&gt; <a title="[A](i: java.lang.Iterable[A])fj.data.Array[A]" id="26273">iterableArray</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#26275" title="A">A</a>&gt; <a title="java.lang.Iterable[A]" id="26309">i</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> iterableList<span class="delimiter">(</span>i<span class="delimiter">)</span>.toArray<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Transforms an array of pairs into an array of first components and an array of second components.
   *
   * @param xs The array of pairs to transform.
   * @return An array of first components and an array of second components.
   */</span>
  @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
  public static &lt;<a title="Nothing" id="26279">A</a>, <a title="Nothing" id="26280">B</a>&gt; P2&lt;<a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26279" title="A">A</a>&gt;, <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26280" title="B">B</a>&gt;&gt; <a title="[A, B](xs: fj.data.Array[fj.P2[A,B]])fj.P2[fj.data.Array[A],fj.data.Array[B]]" id="26276">unzip</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;P2&lt;<a href="#26279" title="A">A</a>, <a href="#26280" title="B">B</a>&gt;&gt; <a title="fj.data.Array[fj.P2[A,B]]" id="26312">xs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> int len = xs.length<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">final</span> Array&lt;A&gt; aa = <span class="keyword">new</span> Array&lt;A&gt;<span class="delimiter">(</span><span class="keyword">new</span> Object<span class="delimiter">[</span>len<span class="delimiter">]</span><span class="delimiter">)</span>;
    <span class="keyword">final</span> Array&lt;B&gt; ab = <span class="keyword">new</span> Array&lt;B&gt;<span class="delimiter">(</span><span class="keyword">new</span> Object<span class="delimiter">[</span>len<span class="delimiter">]</span><span class="delimiter">)</span>;
    <span class="keyword">for</span> <span class="delimiter">(</span>int i = len - <span class="int">1</span>; i &gt;= <span class="int">0</span>; i--<span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">final</span> P2&lt;A, B&gt; p = xs.get<span class="delimiter">(</span>i<span class="delimiter">)</span>;
      aa.set<span class="delimiter">(</span>i, p._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      ab.set<span class="delimiter">(</span>i, p._2<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">return</span> P.p<span class="delimiter">(</span>aa, ab<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Projects an array by providing only operations which do not mutate.
   */</span>
  public <span class="keyword">final</span> <span class="keyword">class</span> <a title="object Array.this.ImmutableProjection" id="18145">ImmutableProjection</a>&lt;<a title="Nothing" id="18146">A</a>&gt; implements Iterable&lt;<a href="#18146" title="A">A</a>&gt; <span class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="fj.data.Array[A]" id="26362">a</a>;

    <span class="keyword">private</span> ImmutableProjection<span class="delimiter">(</span><span class="keyword">final</span> Array&lt;A&gt; a<span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">this</span>.a = a;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns an iterator for this array. This method exists to permit the use in a &lt;code&gt;for&lt;/code&gt;-each loop.
     *
     * @return A iterator for this array.
     */</span>
    public Iterator&lt;<a href="#18146" title="A">A</a>&gt; <a title="()java.util.Iterator[A]" id="26364">iterator</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.iterator<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns the element at the given index if it exists, fails otherwise.
     *
     * @param index The index at which to get the element to return.
     * @return The element at the given index if it exists, fails otherwise.
     */</span>
    public <a href="#18146" title="A">A</a> <a title="(index: Int)A" id="26365">get</a><span class="delimiter">(</span><span class="keyword">final</span> int <a title="Int" id="26487">index</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.get<span class="delimiter">(</span>index<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns the length of this array.
     *
     * @return The length of this array.
     */</span>
    public int <a title="()Int" id="26366">length</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.length<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns &lt;code&gt;true&lt;/code&gt; is this array is empty, &lt;code&gt;false&lt;/code&gt; otherwise.
     *
     * @return &lt;code&gt;true&lt;/code&gt; is this array is empty, &lt;code&gt;false&lt;/code&gt; otherwise.
     */</span>
    public boolean <a title="()Boolean" id="26367">isEmpty</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns &lt;code&gt;false&lt;/code&gt; is this array is empty, &lt;code&gt;true&lt;/code&gt; otherwise.
     *
     * @return &lt;code&gt;false&lt;/code&gt; is this array is empty, &lt;code&gt;true&lt;/code&gt; otherwise.
     */</span>
    public boolean <a title="()Boolean" id="26368">isNotEmpty</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns an option projection of this array; &lt;code&gt;None&lt;/code&gt; if empty, or the first element
     * in &lt;code&gt;Some&lt;/code&gt;.
     *
     * @return An option projection of this array.
     */</span>
    public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="()fj.data.Option[A]" id="26369">toOption</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.toOption<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns an either projection of this array; the given argument in &lt;code&gt;Left&lt;/code&gt; if empty,
     * or the first element in &lt;code&gt;Right&lt;/code&gt;.
     *
     * @param x The value to return in left if this array is empty.
     * @return An either projection of this array.
     */</span>
    public &lt;<a title="Nothing" id="26372">X</a>&gt; <a href="Either.java.html#10039" title="fj.data.Either">Either</a>&lt;<a href="#26372" title="X">X</a>, <a href="#18146" title="A">A</a>&gt; <a title="[X](x: fj.P1[X])fj.data.Either[X,A]" id="26370">toEither</a><span class="delimiter">(</span><span class="keyword">final</span> P1&lt;<a href="#26372" title="X">X</a>&gt; <a title="fj.P1[X]" id="26493">x</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.toEither<span class="delimiter">(</span>x<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns a list projection of this array.
     *
     * @return A list projection of this array.
     */</span>
    public <a href="List.java.html#10232" title="fj.data.List">List</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="()fj.data.List[A]" id="26373">toList</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.toList<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Returns a stream projection of this array.
     *
     * @return A stream projection of this array.
     */</span>
    public <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="()fj.data.Stream[A]" id="26374">toStream</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.toStream<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Maps the given function across this array.
     *
     * @param f The function to map across this array.
     * @return A new array after the given function has been applied to each element.
     */</span>
    public &lt;<a title="Nothing" id="26377">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26377" title="B">B</a>&gt; <a title="[B](f: fj.F[A,B])fj.data.Array[B]" id="26375">map</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#18146" title="A">A</a>, <a href="#26377" title="B">B</a>&gt; <a title="fj.F[A,B]" id="26498">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.map<span class="delimiter">(</span>f<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Filters elements from this array by returning only elements which produce &lt;code&gt;true&lt;/code&gt;
     * when the given function is applied to them.
     *
     * @param f The predicate function to filter on.
     * @return A new array whose elements all match the given predicate.
     */</span>
    public <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="(f: fj.F[A,java.lang.Boolean])fj.data.Array[A]" id="26378">filter</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#18146" title="A">A</a>, Boolean&gt; <a title="fj.F[A,java.lang.Boolean]" id="26501">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.filter<span class="delimiter">(</span>f<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Performs a side-effect for each element of this array.
     *
     * @param f The side-effect to perform for the given element.
     * @return The unit value.
     */</span>
    public Unit <a title="(f: fj.F[A,fj.Unit])fj.Unit" id="26379">foreach</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#18146" title="A">A</a>, Unit&gt; <a title="fj.F[A,fj.Unit]" id="26503">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.foreach<span class="delimiter">(</span>f<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Performs a right-fold reduction across this array. This function uses O(length) stack space.
     *
     * @param f The function to apply on each element of the array.
     * @param b The beginning value to start the application from.
     * @return The final result after the right-fold reduction.
     */</span>
    public &lt;<a title="Nothing" id="26382">B</a>&gt; <a href="#26382" title="B">B</a> <a title="[B](f: fj.F[A,fj.F[B,B]], b: B)B" id="26380">foldRight</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#18146" title="A">A</a>, F&lt;<a href="#26382" title="B">B</a>, <a href="#26382" title="B">B</a>&gt;&gt; <a title="fj.F[A,fj.F[B,B]]" id="26505">f</a>, <span class="keyword">final</span> <a href="#26382" title="B">B</a> <a title="B" id="26506">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.foldRight<span class="delimiter">(</span>f, b<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Performs a left-fold reduction across this array. This function runs in constant space.
     *
     * @param f The function to apply on each element of the array.
     * @param b The beginning value to start the application from.
     * @return The final result after the left-fold reduction.
     */</span>
    public &lt;<a title="Nothing" id="26385">B</a>&gt; <a href="#26385" title="B">B</a> <a title="[B](f: fj.F[B,fj.F[A,B]], b: B)B" id="26383">foldLeft</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#26385" title="B">B</a>, F&lt;<a href="#18146" title="A">A</a>, <a href="#26385" title="B">B</a>&gt;&gt; <a title="fj.F[B,fj.F[A,B]]" id="26510">f</a>, <span class="keyword">final</span> <a href="#26385" title="B">B</a> <a title="B" id="26511">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.foldLeft<span class="delimiter">(</span>f, b<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Binds the given function across each element of this array with a final join.
     *
     * @param f The function to apply to each element of this array.
     * @return A new array after performing the map, then final join.
     */</span>
    public &lt;<a title="Nothing" id="26388">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26388" title="B">B</a>&gt; <a title="[B](f: fj.F[A,fj.data.Array[B]])fj.data.Array[B]" id="26386">bind</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#18146" title="A">A</a>, <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26388" title="B">B</a>&gt;&gt; <a title="fj.F[A,fj.data.Array[B]]" id="26515">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.bind<span class="delimiter">(</span>f<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Performs a bind across each array element, but ignores the element value each time.
     *
     * @param bs The array to apply in the final join.
     * @return A new array after the final join.
     */</span>
    public &lt;<a title="Nothing" id="26391">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26391" title="B">B</a>&gt; <a title="[B](bs: fj.data.Array[B])fj.data.Array[B]" id="26389">sequence</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26391" title="B">B</a>&gt; <a title="fj.data.Array[B]" id="26518">bs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.sequence<span class="delimiter">(</span>bs<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Performs function application within an array (applicative functor pattern).
     *
     * @param lf The array of functions to apply.
     * @return A new array after applying the given array of functions through this array.
     */</span>
    public &lt;<a title="Nothing" id="26394">B</a>&gt; <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#26394" title="B">B</a>&gt; <a title="[B](lf: fj.data.Array[fj.F[A,B]])fj.data.Array[B]" id="26392">apply</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;F&lt;<a href="#18146" title="A">A</a>, <a href="#26394" title="B">B</a>&gt;&gt; <a title="fj.data.Array[fj.F[A,B]]" id="26521">lf</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.apply<span class="delimiter">(</span>lf<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Reverse this array in constant stack space.
     *
     * @return A new array that is the reverse of this one.
     */</span>
    public <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="()fj.data.Array[A]" id="26395">reverse</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.reverse<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Appends the given array to this array.
     *
     * @param aas The array to append to this one.
     * @return A new array that has appended the given array.
     */</span>
    public <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="(aas: fj.data.Array[A])fj.data.Array[A]" id="26396">append</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10010" title="fj.data.Array">Array</a>&lt;<a href="#18146" title="A">A</a>&gt; <a title="fj.data.Array[A]" id="26525">aas</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.append<span class="delimiter">(</span>aas<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Projects an immutable collection of this array.
     *
     * @return An immutable collection of this array.
     */</span>
    public Collection&lt;<a href="#18146" title="A">A</a>&gt; <a title="()java.util.Collection[A]" id="26397">toCollection</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> a.toCollection<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;SuspiciousSystemArraycopy&quot;</span>, <span class="string">&quot;unchecked&quot;</span>, <span class="string">&quot;ObjectEquality&quot;</span>, <span class="string">&quot;RedundantCast&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
  public static &lt;<a title="Nothing" id="26284">T</a>, <a title="Nothing" id="26285">U</a>&gt; <a href="#26284" title="T">T</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="[T, U](a: Array[U with java.lang.Object], len: Int, newType: java.lang.Class[_ &lt;: Array[T with java.lang.Object]])Array[T with java.lang.Object]" id="26281">copyOf</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#26285" title="U">U</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="Array[U]" id="26315">a</a>, <span class="keyword">final</span> int <a title="Int" id="26316">len</a>, <span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <a href="#26284" title="T">T</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span>&gt; <a title="java.lang.Class[_ &lt;: Array[T with java.lang.Object]]" id="26317">newType</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> T<span class="delimiter">[</span><span class="delimiter">]</span> copy = <span class="delimiter">(</span>Object<span class="delimiter">)</span>newType == Object<span class="delimiter">[</span><span class="delimiter">]</span>.<span class="keyword">class</span>
        ? <span class="delimiter">(</span>T<span class="delimiter">[</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">new</span> Object<span class="delimiter">[</span>len<span class="delimiter">]</span>
        : <span class="delimiter">(</span>T<span class="delimiter">[</span><span class="delimiter">]</span><span class="delimiter">)</span> java.lang.reflect.Array.newInstance<span class="delimiter">(</span>newType.getComponentType<span class="delimiter">(</span><span class="delimiter">)</span>, len<span class="delimiter">)</span>;
    System.arraycopy<span class="delimiter">(</span>a, <span class="int">0</span>, copy, <span class="int">0</span>,
        Math.min<span class="delimiter">(</span>a.length, len<span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> copy;
  <span class="delimiter">}</span>

  @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
  public static &lt;<a title="Nothing" id="26288">T</a>&gt; <a href="#26288" title="T">T</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="[T](a: Array[T with java.lang.Object], len: Int)Array[T with java.lang.Object]" id="26286">copyOf</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#26288" title="T">T</a><span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="Array[T]" id="26336">a</a>, <span class="keyword">final</span> int <a title="Int" id="26337">len</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">return</span> <span class="delimiter">(</span>T<span class="delimiter">[</span><span class="delimiter">]</span><span class="delimiter">)</span> copyOf<span class="delimiter">(</span>a, len, a.getClass<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  public static char<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="(a: Array[Char], from: Int, to: Int)Array[Char]" id="26289">copyOfRange</a><span class="delimiter">(</span><span class="keyword">final</span> char<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="Array[Char]" id="26346">a</a>, <span class="keyword">final</span> int <a title="Int" id="26347">from</a>, <span class="keyword">final</span> int <a title="Int" id="26348">to</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">final</span> int len = to - from;
      <span class="keyword">if</span> <span class="delimiter">(</span>len &lt; <span class="int">0</span><span class="delimiter">)</span>
          <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException<span class="delimiter">(</span>from + <span class="string">&quot; &gt; &quot;</span> + to<span class="delimiter">)</span>;
      <span class="keyword">final</span> char<span class="delimiter">[</span><span class="delimiter">]</span> copy = <span class="keyword">new</span> char<span class="delimiter">[</span>len<span class="delimiter">]</span>;
      System.arraycopy<span class="delimiter">(</span>a, from, copy, <span class="int">0</span>,
                       Math.min<span class="delimiter">(</span>a.length - from, len<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="keyword">return</span> copy;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>