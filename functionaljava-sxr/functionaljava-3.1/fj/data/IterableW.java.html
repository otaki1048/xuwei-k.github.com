<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>fj/data/IterableW.java</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> fj.data;

<span class="keyword">import</span> static fj.data.Option.some;
<span class="keyword">import</span> static fj.data.Stream.iterableStream;

<span class="keyword">import</span> fj.Equal;
<span class="keyword">import</span> fj.F;
<span class="keyword">import</span> fj.F2;
<span class="keyword">import</span> fj.F3;
<span class="keyword">import</span> fj.P1;
<span class="keyword">import</span> fj.P2;

<span class="keyword">import</span> static fj.Function.curry;
<span class="keyword">import</span> static fj.Function.identity;

<span class="keyword">import</span> java.util.Collection;
<span class="keyword">import</span> java.util.Iterator;
<span class="keyword">import</span> java.util.List;
<span class="keyword">import</span> java.util.ListIterator;
<span class="keyword">import</span> java.util.NoSuchElementException;

<span class="comment">/**
 * A wrapper for Iterable that equips it with some useful functions.
 */</span>
public <span class="keyword">final</span> <span class="keyword">class</span> <a title="object fj.data.IterableW" id="10126">IterableW</a>&lt;<a title="Nothing" id="10127">A</a>&gt; implements Iterable&lt;<a href="#10127" title="A">A</a>&gt; <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">final</span> Iterable&lt;<a href="#10127" title="A">A</a>&gt; <a title="java.lang.Iterable[A]" id="19783">i</a>;

  <span class="keyword">private</span> IterableW<span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;A&gt; i<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">this</span>.i = i;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Wraps the given iterable.
   *
   * @param a The iterable to wrap.
   * @return An iterable equipped with some useful functions.
   */</span>
  public static &lt;<a title="Nothing" id="27839">A</a>&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27839" title="A">A</a>&gt; <a title="[A](a: java.lang.Iterable[A])fj.data.IterableW[A]" id="27837">wrap</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#27839" title="A">A</a>&gt; <a title="java.lang.Iterable[A]" id="27899">a</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> IterableW&lt;A&gt;<span class="delimiter">(</span>a<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Provides a function that wraps the given iterable.
   *
   * @return A function that returns the given iterable, wrapped.
   */</span>
  public static &lt;<a title="Nothing" id="27843">A</a>, <a title="Nothing" id="27844">T</a> <span class="keyword">extends</span> Iterable&lt;<a href="#27841" title="A">A</a>&gt;&gt; F&lt;<a href="#27844" title="T">T</a>, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27843" title="A">A</a>&gt;&gt; <a title="[A, T &lt;: java.lang.Iterable[A]]()fj.F[T,fj.data.IterableW[A]]" id="27840">wrap</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;T, IterableW&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public IterableW&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> T a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> wrap<span class="delimiter">(</span>a<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an Iterable that completely preserves the argument. The unit function for Iterables.
   *
   * @param a A value to preserve in an Iterable.
   * @return An Iterable that yields the argument when iterated over.
   */</span>
  public static &lt;<a title="Nothing" id="27847">A</a>&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27847" title="A">A</a>&gt; <a title="[A](a: A)fj.data.IterableW[A]" id="27845">iterable</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#27847" title="A">A</a> <a title="A" id="27903">a</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>some<span class="delimiter">(</span>a<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Wraps a given function's return value in a Iterable.
   * The Kleisli arrow for Iterables.
   *
   * @param f The function whose return value to wrap in a Iterable.
   * @return The equivalent function whose return value is iterable.
   */</span>
  public static &lt;<a title="Nothing" id="27851">A</a>, <a title="Nothing" id="27852">B</a>&gt; F&lt;<a href="#27851" title="A">A</a>, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27852" title="B">B</a>&gt;&gt; <a title="[A, B](f: fj.F[A,B])fj.F[A,fj.data.IterableW[B]]" id="27848">iterable</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#27851" title="A">A</a>, <a href="#27852" title="B">B</a>&gt; <a title="fj.F[A,B]" id="27906">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;A, IterableW&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public IterableW&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterable<span class="delimiter">(</span>f.f<span class="delimiter">(</span>a<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Provides a transformation from a function to a Iterable-valued function that is equivalent to it.
   * The first-class Kleisli arrow for Iterables.
   *
   * @return A transformation from a function to the equivalent Iterable-valued function.
   */</span>
  public static &lt;<a title="Nothing" id="27856">A</a>, <a title="Nothing" id="27857">B</a>&gt; F&lt;F&lt;<a href="#27856" title="A">A</a>, <a href="#27857" title="B">B</a>&gt;, F&lt;<a href="#27856" title="A">A</a>, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27857" title="B">B</a>&gt;&gt;&gt; <a title="[A, B]()fj.F[fj.F[A,B],fj.F[A,fj.data.IterableW[B]]]" id="27853">arrow</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;F&lt;A, B&gt;, F&lt;A, IterableW&lt;B&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public F&lt;A, IterableW&lt;B&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;A, B&gt; f<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterable<span class="delimiter">(</span>f<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Binds the given function across the wrapped Iterable with a final join.
   *
   * @param f A function to bind across the Iterable.
   * @return an iterable result of binding the given function over the wrapped Iterable.
   */</span>
  public &lt;<a title="Nothing" id="19788">B</a>, <a title="Nothing" id="19789">T</a> <span class="keyword">extends</span> Iterable&lt;<a href="#19786" title="B">B</a>&gt;&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#19788" title="B">B</a>&gt; <a title="[B, T &lt;: java.lang.Iterable[B]](f: fj.F[A,T])fj.data.IterableW[B]" id="19785">bind</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10127" title="A">A</a>, <a href="#19789" title="T">T</a>&gt; <a title="fj.F[A,T]" id="27929">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>.bind<span class="delimiter">(</span><span class="keyword">new</span> F&lt;A, Stream&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Stream&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>f.f<span class="delimiter">(</span>a<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs function application within an iterable (applicative functor pattern).
   *
   * @param f The iterable function to apply.
   * @return A new iterable after applying the given iterable function to the wrapped iterable.
   */</span>
  public &lt;<a title="Nothing" id="19792">B</a>&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#19792" title="B">B</a>&gt; <a title="[B](f: java.lang.Iterable[fj.F[A,B]])fj.data.IterableW[B]" id="19790">apply</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;F&lt;<a href="#10127" title="A">A</a>, <a href="#19792" title="B">B</a>&gt;&gt; <a title="java.lang.Iterable[fj.F[A,B]]" id="27932">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>f<span class="delimiter">)</span>.bind<span class="delimiter">(</span><span class="keyword">new</span> F&lt;F&lt;A, B&gt;, Iterable&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Iterable&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;A, B&gt; f<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> map<span class="delimiter">(</span>f<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Binds the given function to the values in the given iterables with a final join.
   *
   * @param a A given iterable to bind the given function with.
   * @param b A given iterable to bind the given function with.
   * @param f The function to apply to the values in the given iterables.
   * @return A new iterable after performing the map, then final join.
   */</span>
  public static &lt;<a title="Nothing" id="27862">A</a>, <a title="Nothing" id="27863">B</a>, <a title="Nothing" id="27864">C</a>&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27864" title="C">C</a>&gt; <a title="[A, B, C](a: java.lang.Iterable[A], b: java.lang.Iterable[B], f: fj.F[A,fj.F[B,C]])fj.data.IterableW[C]" id="27858">bind</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#27862" title="A">A</a>&gt; <a title="java.lang.Iterable[A]" id="27910">a</a>, <span class="keyword">final</span> Iterable&lt;<a href="#27863" title="B">B</a>&gt; <a title="java.lang.Iterable[B]" id="27911">b</a>, <span class="keyword">final</span> F&lt;<a href="#27862" title="A">A</a>, F&lt;<a href="#27863" title="B">B</a>, <a href="#27864" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="27912">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>b<span class="delimiter">)</span>.apply<span class="delimiter">(</span>wrap<span class="delimiter">(</span>a<span class="delimiter">)</span>.map<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Promotes a function of arity-2 to a function on iterables.
   *
   * @param f The function to promote.
   * @return A function of arity-2 promoted to map over iterables.
   */</span>
  public static &lt;<a title="Nothing" id="27869">A</a>, <a title="Nothing" id="27870">B</a>, <a title="Nothing" id="27871">C</a>&gt; F&lt;Iterable&lt;<a href="#27869" title="A">A</a>&gt;, F&lt;Iterable&lt;<a href="#27870" title="B">B</a>&gt;, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27871" title="C">C</a>&gt;&gt;&gt; <a title="[A, B, C](f: fj.F[A,fj.F[B,C]])fj.F[java.lang.Iterable[A],fj.F[java.lang.Iterable[B],fj.data.IterableW[C]]]" id="27865">liftM2</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#27869" title="A">A</a>, F&lt;<a href="#27870" title="B">B</a>, <a href="#27871" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="27917">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> curry<span class="delimiter">(</span><span class="keyword">new</span> F2&lt;Iterable&lt;A&gt;, Iterable&lt;B&gt;, IterableW&lt;C&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public IterableW&lt;C&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;A&gt; ca, <span class="keyword">final</span> Iterable&lt;B&gt; cb<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> bind<span class="delimiter">(</span>ca, cb, f<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Performs a bind across each element of all iterables of an iterable, collecting the values in an iterable.
   * This implementation is strict and requires O(n) stack space.
   *
   * @param as The iterable of iterables to transform.
   * @return A iterable of iterables containing the results of the bind operations across all given iterables.
   */</span>
  public static &lt;<a title="Nothing" id="27875">A</a>, <a title="Nothing" id="27876">T</a> <span class="keyword">extends</span> Iterable&lt;<a href="#27873" title="A">A</a>&gt;&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27875" title="A">A</a>&gt;&gt; <a title="[A, T &lt;: java.lang.Iterable[A]](as: java.lang.Iterable[T])fj.data.IterableW[fj.data.IterableW[A]]" id="27872">sequence</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#27876" title="T">T</a>&gt; <a title="java.lang.Iterable[T]" id="27920">as</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Stream&lt;T&gt; ts = iterableStream<span class="delimiter">(</span>as<span class="delimiter">)</span>;
    <span class="keyword">return</span> ts.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? iterable<span class="delimiter">(</span>wrap<span class="delimiter">(</span>Option.&lt;A&gt;none<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> : wrap<span class="delimiter">(</span>ts.head<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.bind<span class="delimiter">(</span><span class="keyword">new</span> F&lt;A, Iterable&lt;IterableW&lt;A&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Iterable&lt;IterableW&lt;A&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> sequence<span class="delimiter">(</span>ts.tail<span class="delimiter">(</span><span class="delimiter">)</span>.map<span class="delimiter">(</span>IterableW.&lt;T, Stream&lt;T&gt;&gt;wrap<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
            .bind<span class="delimiter">(</span><span class="keyword">new</span> F&lt;IterableW&lt;A&gt;, Iterable&lt;IterableW&lt;A&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              public Iterable&lt;IterableW&lt;A&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> IterableW&lt;A&gt; as<span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">return</span> iterable<span class="delimiter">(</span>wrap<span class="delimiter">(</span>Stream.cons<span class="delimiter">(</span>a, <span class="keyword">new</span> P1&lt;Stream&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  public Stream&lt;A&gt; _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>as<span class="delimiter">)</span>;
                  <span class="delimiter">}</span>
                <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
              <span class="delimiter">}</span>
            <span class="delimiter">}</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The first-class bind function over Iterable.
   * Returns a function that binds a given function across a given iterable.
   *
   * @return a function that binds a given function across a given iterable.
   */</span>
  public static &lt;<a title="Nothing" id="27881">A</a>, <a title="Nothing" id="27882">B</a>, <a title="Nothing" id="27883">T</a> <span class="keyword">extends</span> Iterable&lt;<a href="#27879" title="B">B</a>&gt;&gt; F&lt;<a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27881" title="A">A</a>&gt;, F&lt;F&lt;<a href="#27881" title="A">A</a>, <a href="#27883" title="T">T</a>&gt;, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27882" title="B">B</a>&gt;&gt;&gt; <a title="[A, B, T &lt;: java.lang.Iterable[B]]()fj.F[fj.data.IterableW[A],fj.F[fj.F[A,T],fj.data.IterableW[B]]]" id="27877">bind</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;IterableW&lt;A&gt;, F&lt;F&lt;A, T&gt;, IterableW&lt;B&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public F&lt;F&lt;A, T&gt;, IterableW&lt;B&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> IterableW&lt;A&gt; a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> F&lt;F&lt;A, T&gt;, IterableW&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public IterableW&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;A, T&gt; f<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> a.bind<span class="delimiter">(</span>f<span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Joins an Iterable of Iterables into a single Iterable.
   *
   * @param as An Iterable of Iterables to join.
   * @return the joined Iterable.
   */</span>
  public static &lt;<a title="Nothing" id="27887">A</a>, <a title="Nothing" id="27888">T</a> <span class="keyword">extends</span> Iterable&lt;<a href="#27885" title="A">A</a>&gt;&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27887" title="A">A</a>&gt; <a title="[A, T &lt;: java.lang.Iterable[A]](as: java.lang.Iterable[T])fj.data.IterableW[A]" id="27884">join</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#27888" title="T">T</a>&gt; <a title="java.lang.Iterable[T]" id="27924">as</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;T, T&gt; id = identity<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>as<span class="delimiter">)</span>.bind<span class="delimiter">(</span>id<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a function that joins an Iterable of Iterables into a single Iterable.
   *
   * @return a function that joins an Iterable of Iterables into a single Iterable.
   */</span>
  public static &lt;<a title="Nothing" id="27892">A</a>, <a title="Nothing" id="27893">T</a> <span class="keyword">extends</span> Iterable&lt;<a href="#27890" title="A">A</a>&gt;&gt; F&lt;Iterable&lt;<a href="#27893" title="T">T</a>&gt;, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27892" title="A">A</a>&gt;&gt; <a title="[A, T &lt;: java.lang.Iterable[A]]()fj.F[java.lang.Iterable[T],fj.data.IterableW[A]]" id="27889">join</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;Iterable&lt;T&gt;, IterableW&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public IterableW&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;T&gt; a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> join<span class="delimiter">(</span>a<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps a given function across the wrapped Iterable.
   *
   * @param f A function to map across the wrapped Iterable.
   * @return An Iterable of the results of mapping the given function across the wrapped Iterable.
   */</span>
  public &lt;<a title="Nothing" id="19795">B</a>&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#19795" title="B">B</a>&gt; <a title="[B](f: fj.F[A,B])fj.data.IterableW[B]" id="19793">map</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10127" title="A">A</a>, <a href="#19795" title="B">B</a>&gt; <a title="fj.F[A,B]" id="27935">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> bind<span class="delimiter">(</span>iterable<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a function that promotes any function so that it operates on Iterables.
   *
   * @return a function that promotes any function so that it operates on Iterables.
   */</span>
  public static &lt;<a title="Nothing" id="27897">A</a>, <a title="Nothing" id="27898">B</a>&gt; F&lt;F&lt;<a href="#27897" title="A">A</a>, <a href="#27898" title="B">B</a>&gt;, F&lt;<a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27897" title="A">A</a>&gt;, <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#27898" title="B">B</a>&gt;&gt;&gt; <a title="[A, B]()fj.F[fj.F[A,B],fj.F[fj.data.IterableW[A],fj.data.IterableW[B]]]" id="27894">map</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;F&lt;A, B&gt;, F&lt;IterableW&lt;A&gt;, IterableW&lt;B&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public F&lt;IterableW&lt;A&gt;, IterableW&lt;B&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;A, B&gt; f<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> F&lt;IterableW&lt;A&gt;, IterableW&lt;B&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public IterableW&lt;B&gt; f<span class="delimiter">(</span><span class="keyword">final</span> IterableW&lt;A&gt; a<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> a.map<span class="delimiter">(</span>f<span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The catamorphism for Iterables, implemented as a left fold.
   *
   * @param f The function with which to fold the wrapped iterable.
   * @param z The base case value of the destination type, applied first (leftmost) to the fold.
   * @return The result of the catamorphism.
   */</span>
  public &lt;<a title="Nothing" id="19798">B</a>&gt; <a href="#19798" title="B">B</a> <a title="[B](f: fj.F[B,fj.F[A,B]], z: B)B" id="19796">foldLeft</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#19798" title="B">B</a>, F&lt;<a href="#10127" title="A">A</a>, <a href="#19798" title="B">B</a>&gt;&gt; <a title="fj.F[B,fj.F[A,B]]" id="27938">f</a>, <span class="keyword">final</span> <a href="#19798" title="B">B</a> <a title="B" id="27939">z</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    B p = z;
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> A x : <span class="keyword">this</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      p = f.f<span class="delimiter">(</span>p<span class="delimiter">)</span>.f<span class="delimiter">(</span>x<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">return</span> p;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Takes the first 2 elements of the iterable and applies the function to them,
   * then applies the function to the result and the third element and so on.
   *
   * @param f The function to apply on each element of the iterable.
   * @return The final result after the left-fold reduction.
   */</span>
  public <a href="#10127" title="A">A</a> <a title="(f: fj.F2[A,A,A])A" id="19799">foldLeft1</a><span class="delimiter">(</span><span class="keyword">final</span> F2&lt;<a href="#10127" title="A">A</a>, <a href="#10127" title="A">A</a>, <a href="#10127" title="A">A</a>&gt; <a title="fj.F2[A,A,A]" id="27943">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> foldLeft1<span class="delimiter">(</span>curry<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Takes the first 2 elements of the iterable and applies the function to them,
   * then applies the function to the result and the third element and so on.
   *
   * @param f The function to apply on each element of the iterable.
   * @return The final result after the left-fold reduction.
   */</span>
  public <a href="#10127" title="A">A</a> <a title="(f: fj.F[A,fj.F[A,A]])A" id="19800">foldLeft1</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10127" title="A">A</a>, F&lt;<a href="#10127" title="A">A</a>, <a href="#10127" title="A">A</a>&gt;&gt; <a title="fj.F[A,fj.F[A,A]]" id="27945">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>.foldLeft1<span class="delimiter">(</span>f<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The catamorphism for Iterables, implemented as a right fold.
   *
   * @param f The function with which to fold the wrapped iterable.
   * @param z The base case value of the destination type, applied last (rightmost) to the fold.
   * @return The result of the catamorphism.
   */</span>
  public &lt;<a title="Nothing" id="19803">B</a>&gt; <a href="#19803" title="B">B</a> <a title="[B](f: fj.F2[A,B,B], z: B)B" id="19801">foldRight</a><span class="delimiter">(</span><span class="keyword">final</span> F2&lt;<a href="#10127" title="A">A</a>, <a href="#19803" title="B">B</a>, <a href="#19803" title="B">B</a>&gt; <a title="fj.F2[A,B,B]" id="27947">f</a>, <span class="keyword">final</span> <a href="#19803" title="B">B</a> <a title="B" id="27948">z</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;B, B&gt; id = identity<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> foldLeft<span class="delimiter">(</span>curry<span class="delimiter">(</span><span class="keyword">new</span> F3&lt;F&lt;B, B&gt;, A, B, B&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public B f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;B, B&gt; k, <span class="keyword">final</span> A a, <span class="keyword">final</span> B b<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> k.f<span class="delimiter">(</span>f.f<span class="delimiter">(</span>a, b<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>, id<span class="delimiter">)</span>.f<span class="delimiter">(</span>z<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns an iterator for this iterable.
   *
   * @return an iterator for this iterable.
   */</span>
  public Iterator&lt;<a href="#10127" title="A">A</a>&gt; <a title="()java.util.Iterator[A]" id="19804">iterator</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> i.iterator<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this iterable with the given iterable of functions, applying each function in turn to the
   * corresponding element in this iterable to produce a new iterable. The iteration is normalised
   * so that it ends when one of the iterators is exhausted.
   *
   * @param fs The iterable of functions to apply to this iterable.
   * @return A new iterable with the results of applying the functions to this iterable.
   */</span>
  public &lt;<a title="Nothing" id="19807">B</a>&gt; <a href="#10126" title="fj.data.IterableW">IterableW</a>&lt;<a href="#19807" title="B">B</a>&gt; <a title="[B](fs: java.lang.Iterable[fj.F[A,B]])fj.data.IterableW[B]" id="19805">zapp</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;F&lt;<a href="#10127" title="A">A</a>, <a href="#19807" title="B">B</a>&gt;&gt; <a title="java.lang.Iterable[fj.F[A,B]]" id="27953">fs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>.zapp<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span>fs<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this iterable with the given iterable using the given function to produce a new iterable. If
   * this iterable and the given iterable have different lengths, then the longer iterable is normalised
   * so this function never fails.
   *
   * @param bs The iterable to zip this iterable with.
   * @param f  The function to zip this iterable and the given iterable with.
   * @return A new iterable with a length the same as the shortest of this iterable and the given
   *         iterable.
   */</span>
  public &lt;<a title="Nothing" id="19811">B</a>, <a title="Nothing" id="19812">C</a>&gt; Iterable&lt;<a href="#19812" title="C">C</a>&gt; <a title="[B, C](bs: java.lang.Iterable[B], f: fj.F[A,fj.F[B,C]])java.lang.Iterable[C]" id="19808">zipWith</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#19811" title="B">B</a>&gt; <a title="java.lang.Iterable[B]" id="27956">bs</a>, <span class="keyword">final</span> F&lt;<a href="#10127" title="A">A</a>, F&lt;<a href="#19811" title="B">B</a>, <a href="#19812" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="27957">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>.zipWith<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span>bs<span class="delimiter">)</span>, f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this iterable with the given iterable using the given function to produce a new iterable. If
   * this iterable and the given iterable have different lengths, then the longer iterable is normalised
   * so this function never fails.
   *
   * @param bs The iterable to zip this iterable with.
   * @param f  The function to zip this iterable and the given iterable with.
   * @return A new iterable with a length the same as the shortest of this iterable and the given
   *         iterable.
   */</span>
  public &lt;<a title="Nothing" id="19816">B</a>, <a title="Nothing" id="19817">C</a>&gt; Iterable&lt;<a href="#19817" title="C">C</a>&gt; <a title="[B, C](bs: java.lang.Iterable[B], f: fj.F2[A,B,C])java.lang.Iterable[C]" id="19813">zipWith</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#19816" title="B">B</a>&gt; <a title="java.lang.Iterable[B]" id="27961">bs</a>, <span class="keyword">final</span> F2&lt;<a href="#10127" title="A">A</a>, <a href="#19816" title="B">B</a>, <a href="#19817" title="C">C</a>&gt; <a title="fj.F2[A,B,C]" id="27962">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> zipWith<span class="delimiter">(</span>bs, curry<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this iterable with the given iterable to produce a iterable of pairs. If this iterable and the
   * given iterable have different lengths, then the longer iterable is normalised so this function
   * never fails.
   *
   * @param bs The iterable to zip this iterable with.
   * @return A new iterable with a length the same as the shortest of this iterable and the given
   *         iterable.
   */</span>
  public &lt;<a title="Nothing" id="19820">B</a>&gt; Iterable&lt;P2&lt;<a href="#10127" title="A">A</a>, <a href="#19820" title="B">B</a>&gt;&gt; <a title="[B](bs: java.lang.Iterable[B])java.lang.Iterable[fj.P2[A,B]]" id="19818">zip</a><span class="delimiter">(</span><span class="keyword">final</span> Iterable&lt;<a href="#19820" title="B">B</a>&gt; <a title="java.lang.Iterable[B]" id="27966">bs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>.zip<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span>bs<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this iterable with the index of its element as a pair.
   *
   * @return A new iterable with the same length as this iterable.
   */</span>
  public Iterable&lt;P2&lt;<a href="#10127" title="A">A</a>, Integer&gt;&gt; <a title="()java.lang.Iterable[fj.P2[A,java.lang.Integer]]" id="19821">zipIndex</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> wrap<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>.zipIndex<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a java.util.List implementation for this iterable.
   * The returned list cannot be modified.
   *
   * @return An immutable implementation of java.util.List for this iterable.
   */</span>
  public <a href="List.java.html#10232" title="fj.data.List">List</a>&lt;<a href="#10127" title="A">A</a>&gt; <a title="()fj.data.List[A]" id="19822">toStandardList</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> List&lt;A&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      public int size<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.length<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public boolean isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;unchecked&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
      public boolean contains<span class="delimiter">(</span><span class="keyword">final</span> Object o<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.exists<span class="delimiter">(</span>Equal.&lt;A&gt;anyEqual<span class="delimiter">(</span><span class="delimiter">)</span>.eq<span class="delimiter">(</span><span class="delimiter">(</span>A<span class="delimiter">)</span> o<span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public Iterator&lt;A&gt; iterator<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> IterableW.<span class="keyword">this</span>.iterator<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public Object<span class="delimiter">[</span><span class="delimiter">]</span> toArray<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> Array.iterableArray<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span><span class="delimiter">)</span>.array<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      @SuppressWarnings<span class="delimiter">(</span><span class="delimiter">{</span><span class="string">&quot;SuspiciousToArrayCall&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span>
      public &lt;T&gt; T<span class="delimiter">[</span><span class="delimiter">]</span> toArray<span class="delimiter">(</span><span class="keyword">final</span> T<span class="delimiter">[</span><span class="delimiter">]</span> a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.toCollection<span class="delimiter">(</span><span class="delimiter">)</span>.toArray<span class="delimiter">(</span>a<span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public boolean add<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;
      <span class="delimiter">}</span>

      public boolean remove<span class="delimiter">(</span><span class="keyword">final</span> Object o<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;
      <span class="delimiter">}</span>

      public boolean containsAll<span class="delimiter">(</span><span class="keyword">final</span> Collection&lt;?&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.toCollection<span class="delimiter">(</span><span class="delimiter">)</span>.containsAll<span class="delimiter">(</span>c<span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public boolean addAll<span class="delimiter">(</span><span class="keyword">final</span> Collection&lt;? <span class="keyword">extends</span> A&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;
      <span class="delimiter">}</span>

      public boolean addAll<span class="delimiter">(</span><span class="keyword">final</span> int index, <span class="keyword">final</span> Collection&lt;? <span class="keyword">extends</span> A&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;
      <span class="delimiter">}</span>

      public boolean removeAll<span class="delimiter">(</span><span class="keyword">final</span> Collection&lt;?&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;
      <span class="delimiter">}</span>

      public boolean retainAll<span class="delimiter">(</span><span class="keyword">final</span> Collection&lt;?&gt; c<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">false</span>;
      <span class="delimiter">}</span>

      public void clear<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Modifying an immutable List.&quot;</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public A get<span class="delimiter">(</span><span class="keyword">final</span> int index<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.index<span class="delimiter">(</span>index<span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public A set<span class="delimiter">(</span><span class="keyword">final</span> int index, <span class="keyword">final</span> A element<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Modifying an immutable List.&quot;</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public void add<span class="delimiter">(</span><span class="keyword">final</span> int index, <span class="keyword">final</span> A element<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Modifying an immutable List.&quot;</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public A remove<span class="delimiter">(</span><span class="keyword">final</span> int index<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Modifying an immutable List.&quot;</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public int indexOf<span class="delimiter">(</span><span class="keyword">final</span> Object o<span class="delimiter">)</span> <span class="delimiter">{</span>
        int i = -<span class="int">1</span>;
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> A a : IterableW.<span class="keyword">this</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          i++;
          <span class="keyword">if</span> <span class="delimiter">(</span>a.equals<span class="delimiter">(</span>o<span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">return</span> i;
        <span class="delimiter">}</span>
        <span class="keyword">return</span> i;
      <span class="delimiter">}</span>

      public int lastIndexOf<span class="delimiter">(</span><span class="keyword">final</span> Object o<span class="delimiter">)</span> <span class="delimiter">{</span>
        int i = -<span class="int">1</span>;
        int last = -<span class="int">1</span>;
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> A a : IterableW.<span class="keyword">this</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          i++;
          <span class="keyword">if</span> <span class="delimiter">(</span>a.equals<span class="delimiter">(</span>o<span class="delimiter">)</span><span class="delimiter">)</span>
            last = i;
        <span class="delimiter">}</span>
        <span class="keyword">return</span> last;
      <span class="delimiter">}</span>

      public ListIterator&lt;A&gt; listIterator<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> toListIterator<span class="delimiter">(</span>toZipper<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public ListIterator&lt;A&gt; listIterator<span class="delimiter">(</span><span class="keyword">final</span> int index<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> toListIterator<span class="delimiter">(</span>toZipper<span class="delimiter">(</span><span class="delimiter">)</span>.bind<span class="delimiter">(</span>Zipper.&lt;A&gt;move<span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>index<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      public List&lt;A&gt; subList<span class="delimiter">(</span><span class="keyword">final</span> int fromIndex, <span class="keyword">final</span> int toIndex<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> wrap<span class="delimiter">(</span>Stream.iterableStream<span class="delimiter">(</span>IterableW.<span class="keyword">this</span><span class="delimiter">)</span>.drop<span class="delimiter">(</span>fromIndex<span class="delimiter">)</span>.take<span class="delimiter">(</span>toIndex - fromIndex<span class="delimiter">)</span><span class="delimiter">)</span>.toStandardList<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      <span class="keyword">private</span> ListIterator&lt;A&gt; toListIterator<span class="delimiter">(</span><span class="keyword">final</span> Option&lt;Zipper&lt;A&gt;&gt; z<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> ListIterator&lt;A&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>

          <span class="keyword">private</span> Option&lt;Zipper&lt;A&gt;&gt; pz = z;

          public boolean hasNext<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> pz.isSome<span class="delimiter">(</span><span class="delimiter">)</span> &amp;&amp; !pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.atEnd<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public A next<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">if</span> <span class="delimiter">(</span>pz.isSome<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
              pz = pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.next<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">else</span> <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">if</span> <span class="delimiter">(</span>pz.isSome<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">return</span> pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.focus<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">else</span> <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public boolean hasPrevious<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> pz.isSome<span class="delimiter">(</span><span class="delimiter">)</span> &amp;&amp; !pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.atStart<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public A previous<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            pz = pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.previous<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">return</span> pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.focus<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public int nextIndex<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.index<span class="delimiter">(</span><span class="delimiter">)</span> + <span class="delimiter">(</span>pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.atEnd<span class="delimiter">(</span><span class="delimiter">)</span> ? <span class="int">0</span> : <span class="int">1</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public int previousIndex<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.index<span class="delimiter">(</span><span class="delimiter">)</span> - <span class="delimiter">(</span>pz.some<span class="delimiter">(</span><span class="delimiter">)</span>.atStart<span class="delimiter">(</span><span class="delimiter">)</span> ? <span class="int">0</span> : <span class="int">1</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public void remove<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Remove on immutable ListIterator&quot;</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public void set<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Set on immutable ListIterator&quot;</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>

          public void add<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException<span class="delimiter">(</span><span class="string">&quot;Add on immutable ListIterator&quot;</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="Zipper.java.html#10485" title="fj.data.Zipper">Zipper</a>&lt;<a href="#10127" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.Zipper[A]]" id="19823">toZipper</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> Zipper.fromStream<span class="delimiter">(</span>iterableStream<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>