<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>fj/data/HashSet.java</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> fj.data;

<span class="keyword">import</span> fj.Equal;
<span class="keyword">import</span> fj.Hash;
<span class="keyword">import</span> fj.Unit;
<span class="keyword">import</span> static fj.Unit.unit;

<span class="keyword">import</span> java.util.Collection;
<span class="keyword">import</span> java.util.Iterator;

<span class="comment">/**
 * A mutable hash set that guarantees uniqueness of its elements providing O(1) lookup.
 *
 * @version %build.number%
 * @see HashMap
 */</span>
public <span class="keyword">final</span> <span class="keyword">class</span> <a title="object fj.data.HashSet" id="10082">HashSet</a>&lt;<a id="10083">A</a>&gt; implements Iterable&lt;A&gt; <span class="delimiter">{</span>
  <span class="comment">/**
   * Returns an iterator for this hash set. This method exists to permit the use in a &lt;code&gt;for&lt;/code&gt;-each loop.
   *
   * @return A iterator for this hash set.
   */</span>
  public Iterator&lt;A&gt; iterator<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> toCollection<span class="delimiter">(</span><span class="delimiter">)</span>.iterator<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;A, Unit&gt; m;

  <span class="comment">/**
   * Construct a hash set with the given equality and hashing strategy.
   *
   * @param e The equality strategy.
   * @param h The hashing strategy.
   */</span>
  public HashSet<span class="delimiter">(</span><span class="keyword">final</span> Equal&lt;A&gt; e, <span class="keyword">final</span> Hash&lt;A&gt; h<span class="delimiter">)</span> <span class="delimiter">{</span>
    m = <span class="keyword">new</span> HashMap&lt;A, Unit&gt;<span class="delimiter">(</span>e, h<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Construct a hash set with the given equality and hashing strategy.
   *
   * @param e               The equality strategy.
   * @param h               The hashing strategy.
   * @param initialCapacity The initial capacity.
   */</span>
  public HashSet<span class="delimiter">(</span><span class="keyword">final</span> Equal&lt;A&gt; e, <span class="keyword">final</span> Hash&lt;A&gt; h, <span class="keyword">final</span> int initialCapacity<span class="delimiter">)</span> <span class="delimiter">{</span>
    m = <span class="keyword">new</span> HashMap&lt;A, Unit&gt;<span class="delimiter">(</span>e, h, initialCapacity<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Construct a hash set with the given equality and hashing strategy.
   *
   * @param e               The equality strategy.
   * @param h               The hashing strategy.
   * @param initialCapacity The initial capacity.
   * @param loadFactor      The load factor.
   */</span>
  public HashSet<span class="delimiter">(</span><span class="keyword">final</span> Equal&lt;A&gt; e, <span class="keyword">final</span> Hash&lt;A&gt; h, <span class="keyword">final</span> int initialCapacity, <span class="keyword">final</span> float loadFactor<span class="delimiter">)</span> <span class="delimiter">{</span>
    m = <span class="keyword">new</span> HashMap&lt;A, Unit&gt;<span class="delimiter">(</span>e, h, initialCapacity, loadFactor<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Compare two values for equality using the underlying equality strategy.
   *
   * @param a1 One value to compare.
   * @param a2 The other value to compare.
   * @return &lt;code&gt;true&lt;/code&gt; if the two values are equal, &lt;code&gt;false&lt;/code&gt; otherwise.
   */</span>
  public boolean eq<span class="delimiter">(</span><span class="keyword">final</span> A a1, <span class="keyword">final</span> A a2<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.eq<span class="delimiter">(</span>a1, a2<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Compute the hash of the given value using the underlying hashing strategy.
   *
   * @param a The value to computer the hash of.
   * @return The hash of the given value.
   */</span>
  public int hash<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.hash<span class="delimiter">(</span>a<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Determines if this hash set contains the given element.
   *
   * @param a The element to look for in this hash set.
   * @return &lt;code&gt;true&lt;/code&gt; if this hash set contains the given element, &lt;code&gt;false&lt;/code&gt; otherwise.
   */</span>
  public boolean contains<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.contains<span class="delimiter">(</span>a<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Insert the given element into this hash set.
   *
   * @param a The element to insert.
   */</span>
  public void set<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
    m.set<span class="delimiter">(</span>a, unit<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Clear all elements from this hash set.
   */</span>
  public void clear<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    m.clear<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Determines if this hash set contains any elements.
   *
   * @return &lt;code&gt;true&lt;/code&gt; if this hash set contains no elements, &lt;code&gt;false&lt;/code&gt; otherwise.
   */</span>
  public boolean isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the number of entries in this hash set.
   *
   * @return The number of entries in this hash set.
   */</span>
  public int size<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.size<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Deletes the given element from this hash set.
   *
   * @param a The element to delete from this hash set.
   * @return &lt;code&gt;true&lt;/code&gt; if this hash set contained the given element prior to deletion, &lt;code&gt;false&lt;/code&gt;
   *         otherwise.
   */</span>
  public boolean delete<span class="delimiter">(</span><span class="keyword">final</span> A a<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.getDelete<span class="delimiter">(</span>a<span class="delimiter">)</span>.isSome<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a list projection of this hash set.
   *
   * @return A list projection of this hash set.
   */</span>
  public List&lt;A&gt; toList<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> m.keys<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Projects an immutable collection of this hash set.
   *
   * @return An immutable collection of this hash set.
   */</span>
  public Collection&lt;A&gt; toCollection<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> toList<span class="delimiter">(</span><span class="delimiter">)</span>.toCollection<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>