<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>fj/data/TreeZipper.java</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> fj.data;

<span class="keyword">import</span> fj.Equal;
<span class="keyword">import</span> fj.F;
<span class="keyword">import</span> fj.F2;
<span class="keyword">import</span> fj.F4;
<span class="keyword">import</span> fj.P;
<span class="keyword">import</span> fj.P1;
<span class="keyword">import</span> fj.P2;
<span class="keyword">import</span> fj.P3;
<span class="keyword">import</span> fj.P4;
<span class="keyword">import</span> fj.Show;
<span class="keyword">import</span> fj.function.Booleans;

<span class="keyword">import</span> java.util.Iterator;

<span class="keyword">import</span> static fj.Equal.p3Equal;
<span class="keyword">import</span> static fj.Equal.p4Equal;
<span class="keyword">import</span> static fj.Equal.streamEqual;
<span class="keyword">import</span> static fj.Equal.treeEqual;
<span class="keyword">import</span> static fj.Function.compose;
<span class="keyword">import</span> static fj.Function.curry;
<span class="keyword">import</span> static fj.Function.flip;
<span class="keyword">import</span> static fj.Function.uncurryF2;
<span class="keyword">import</span> static fj.Show.p3Show;
<span class="keyword">import</span> static fj.Show.p4Show;
<span class="keyword">import</span> static fj.Show.streamShow;
<span class="keyword">import</span> static fj.Show.treeShow;
<span class="keyword">import</span> static fj.data.Option.none;
<span class="keyword">import</span> static fj.data.Option.some;
<span class="keyword">import</span> static fj.data.Stream.nil;
<span class="keyword">import</span> static fj.data.Stream.unfold;
<span class="keyword">import</span> static fj.data.Tree.node;
<span class="keyword">import</span> static fj.data.Tree.unfoldTree;

<span class="comment">/**
 * Provides a zipper structure for rose trees, which is a Tree supplied with a location within that tree.
 * Provides navigation, insertion, deletion, and memorization of visited locations within a tree.
 */</span>
public <span class="keyword">final</span> <span class="keyword">class</span> <a title="object fj.data.TreeZipper" id="10434">TreeZipper</a>&lt;<a title="Nothing" id="10435">A</a>&gt; implements Iterable&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <span class="delimiter">{</span>

  <span class="comment">/**
   * Returns an iterator of all the positions of this TreeZipper. Exists for use with the foreach syntax.
   *
   * @return An iterator of all the positions of this TreeZipper.
   */</span>
  public Iterator&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()java.util.Iterator[fj.data.TreeZipper[A]]" id="19863">iterator</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> positions<span class="delimiter">(</span><span class="delimiter">)</span>.toTree<span class="delimiter">(</span><span class="delimiter">)</span>.iterator<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="19864">tree</a>;
  <span class="keyword">private</span> <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="19865">lefts</a>;
  <span class="keyword">private</span> <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="19866">rights</a>;
  <span class="keyword">private</span> <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;, <a href="#10435" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;&gt;&gt; <a title="fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]]" id="19867">parents</a>;

  <span class="keyword">private</span> TreeZipper<span class="delimiter">(</span><span class="keyword">final</span> Tree&lt;A&gt; tree,
                     <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; lefts,
                     <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; rights,
                     <span class="keyword">final</span> Stream&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt; parents<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">this</span>.tree = tree;
    <span class="keyword">this</span>.lefts = lefts;
    <span class="keyword">this</span>.rights = rights;
    <span class="keyword">this</span>.parents = parents;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a new tree zipper given a currently selected tree, a forest on the left, a forest on the right,
   * and a stream of parent contexts.
   *
   * @param tree    The currently selected tree.
   * @param lefts   The selected tree's left siblings, closest first.
   * @param rights  The selected tree's right siblings, closest first.
   * @param parents The parent of the selected tree, and the parent's siblings.
   * @return A new zipper with the given tree selected, and the given forests on the left and right.
   */</span>
  public static &lt;<a title="Nothing" id="30897">A</a>&gt; <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30897" title="A">A</a>&gt; <a title="[A](tree: fj.data.Tree[A], lefts: fj.data.Stream[fj.data.Tree[A]], rights: fj.data.Stream[fj.data.Tree[A]], parents: fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]])fj.data.TreeZipper[A]" id="30895">treeZipper</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30897" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="30943">tree</a>,
                                             <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30897" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="30944">lefts</a>,
                                             <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30897" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="30945">rights</a>,
                                             <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30897" title="A">A</a>&gt;&gt;, <a href="#30897" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30897" title="A">A</a>&gt;&gt;&gt;&gt; <a title="fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]]" id="30946">parents</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> TreeZipper&lt;A&gt;<span class="delimiter">(</span>tree, lefts, rights, parents<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * First-class constructor for tree zippers.
   *
   * @return A function that returns a new tree zipper, given a selected tree, left and right siblings,
   *         and a parent context.
   */</span>
  public static &lt;<a title="Nothing" id="30900">A</a>&gt;
  F&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30900" title="A">A</a>&gt;, F&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30900" title="A">A</a>&gt;&gt;, F&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30900" title="A">A</a>&gt;&gt;, F&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30900" title="A">A</a>&gt;&gt;, <a href="#30900" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30900" title="A">A</a>&gt;&gt;&gt;&gt;, <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30900" title="A">A</a>&gt;&gt;&gt;&gt;&gt;
  <a title="[A]()fj.F[fj.data.Tree[A],fj.F[fj.data.Stream[fj.data.Tree[A]],fj.F[fj.data.Stream[fj.data.Tree[A]],fj.F[fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]],fj.data.TreeZipper[A]]]]]" id="30898">treeZipper</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> curry<span class="delimiter">(</span>
        <span class="keyword">new</span> F4&lt;Tree&lt;A&gt;, Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt;, TreeZipper&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public TreeZipper&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Tree&lt;A&gt; tree,
                                 <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; lefts,
                                 <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; rights,
                                 <span class="keyword">final</span> Stream&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt; parents<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>tree, lefts, rights, parents<span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the product-4 representation of this zipper.
   *
   * @return the product-4 representation of this zipper.
   */</span>
  public P4&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;, <a href="#10435" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;&gt;&gt;&gt; <a title="()fj.P4[fj.data.Tree[A],fj.data.Stream[fj.data.Tree[A]],fj.data.Stream[fj.data.Tree[A]],fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]]]" id="19869">p</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> P.p<span class="delimiter">(</span>tree, lefts, rights, parents<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class function that returns the product-4 representation of a given zipper.
   *
   * @return a function that converts a given zipper to its product-4 representation.
   */</span>
  public static &lt;<a title="Nothing" id="30903">A</a>&gt;
  F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30903" title="A">A</a>&gt;, P4&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30903" title="A">A</a>&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30903" title="A">A</a>&gt;&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30903" title="A">A</a>&gt;&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30903" title="A">A</a>&gt;&gt;, <a href="#30903" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30903" title="A">A</a>&gt;&gt;&gt;&gt;&gt;&gt; <a title="[A]()fj.F[fj.data.TreeZipper[A],fj.P4[fj.data.Tree[A],fj.data.Stream[fj.data.Tree[A]],fj.data.Stream[fj.data.Tree[A]],fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]]]]" id="30901">p_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;
        TreeZipper&lt;A&gt;,
        P4&lt;Tree&lt;A&gt;,
            Stream&lt;Tree&lt;A&gt;&gt;,
            Stream&lt;Tree&lt;A&gt;&gt;,
            Stream&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P4&lt;
          Tree&lt;A&gt;,
          Stream&lt;Tree&lt;A&gt;&gt;,
          Stream&lt;Tree&lt;A&gt;&gt;,
          Stream&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> a.p<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * An Equal instance for tree zippers.
   *
   * @param e An Equal instance for tree elements.
   * @return An Equal instance for tree zippers.
   */</span>
  public static &lt;<a title="Nothing" id="30906">A</a>&gt; Equal&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30906" title="A">A</a>&gt;&gt; <a title="[A](e: fj.Equal[A])fj.Equal[fj.data.TreeZipper[A]]" id="30904">eq</a><span class="delimiter">(</span><span class="keyword">final</span> Equal&lt;<a href="#30906" title="A">A</a>&gt; <a title="fj.Equal[A]" id="30954">e</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> p4Equal<span class="delimiter">(</span>
        treeEqual<span class="delimiter">(</span>e<span class="delimiter">)</span>,
        streamEqual<span class="delimiter">(</span>treeEqual<span class="delimiter">(</span>e<span class="delimiter">)</span><span class="delimiter">)</span>,
        streamEqual<span class="delimiter">(</span>treeEqual<span class="delimiter">(</span>e<span class="delimiter">)</span><span class="delimiter">)</span>,
        streamEqual<span class="delimiter">(</span>p3Equal<span class="delimiter">(</span>streamEqual<span class="delimiter">(</span>treeEqual<span class="delimiter">(</span>e<span class="delimiter">)</span><span class="delimiter">)</span>, e, streamEqual<span class="delimiter">(</span>treeEqual<span class="delimiter">(</span>e<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.comap<span class="delimiter">(</span>TreeZipper.&lt;A&gt;p_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A Show instance for tree zippers.
   *
   * @param s A Show instance for tree elements.
   * @return A Show instance for tree zippers.
   */</span>
  public static &lt;<a title="Nothing" id="30909">A</a>&gt; Show&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30909" title="A">A</a>&gt;&gt; <a title="[A](s: fj.Show[A])fj.Show[fj.data.TreeZipper[A]]" id="30907">show</a><span class="delimiter">(</span><span class="keyword">final</span> Show&lt;<a href="#30909" title="A">A</a>&gt; <a title="fj.Show[A]" id="30957">s</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> p4Show<span class="delimiter">(</span>
        treeShow<span class="delimiter">(</span>s<span class="delimiter">)</span>,
        streamShow<span class="delimiter">(</span>treeShow<span class="delimiter">(</span>s<span class="delimiter">)</span><span class="delimiter">)</span>,
        streamShow<span class="delimiter">(</span>treeShow<span class="delimiter">(</span>s<span class="delimiter">)</span><span class="delimiter">)</span>,
        streamShow<span class="delimiter">(</span>p3Show<span class="delimiter">(</span>streamShow<span class="delimiter">(</span>treeShow<span class="delimiter">(</span>s<span class="delimiter">)</span><span class="delimiter">)</span>, s, streamShow<span class="delimiter">(</span>treeShow<span class="delimiter">(</span>s<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.comap<span class="delimiter">(</span>TreeZipper.&lt;A&gt;p_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> static &lt;<a title="Nothing" id="30912">A</a>&gt; <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30912" title="A">A</a>&gt;&gt; <a title="[A](ls: fj.data.Stream[fj.data.Tree[A]], t: fj.data.Tree[A], rs: fj.data.Stream[fj.data.Tree[A]])fj.data.Stream[fj.data.Tree[A]]" id="30910">combChildren</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30912" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="30960">ls</a>,
                                                  <span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30912" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="30961">t</a>,
                                                  <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30912" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="30962">rs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> ls.foldLeft<span class="delimiter">(</span>compose<span class="delimiter">(</span>flip<span class="delimiter">(</span>Stream.&lt;Tree&lt;A&gt;&gt;cons<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, P.&lt;Stream&lt;Tree&lt;A&gt;&gt;&gt;p1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, Stream.cons<span class="delimiter">(</span>t, P.p<span class="delimiter">(</span>rs<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigates to the parent of the current location.
   *
   * @return A new tree zipper focused on the parent node of the current node,
   *         or none if the current node is the root node.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.TreeZipper[A]]" id="19870">parent</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">if</span> <span class="delimiter">(</span>parents.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">return</span> none<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">final</span> P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt; p = parents.head<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="keyword">return</span> some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>node<span class="delimiter">(</span>p._2<span class="delimiter">(</span><span class="delimiter">)</span>, combChildren<span class="delimiter">(</span>lefts, tree, rights<span class="delimiter">)</span><span class="delimiter">)</span>, p._1<span class="delimiter">(</span><span class="delimiter">)</span>, p._3<span class="delimiter">(</span><span class="delimiter">)</span>, parents.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigates to the top-most parent of the current location.
   *
   * @return A new tree zipper focused on the top-most parent of the current node.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="()fj.data.TreeZipper[A]" id="19871">root</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> parent<span class="delimiter">(</span><span class="delimiter">)</span>.option<span class="delimiter">(</span><span class="keyword">this</span>, TreeZipper.&lt;A&gt;root_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class version of the root function.
   *
   * @return A function that returns a new tree-zipper focused on the root of the given tree zipper's tree.
   */</span>
  public static &lt;<a title="Nothing" id="30915">A</a>&gt; F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30915" title="A">A</a>&gt;, <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30915" title="A">A</a>&gt;&gt; <a title="[A]()fj.F[fj.data.TreeZipper[A],fj.data.TreeZipper[A]]" id="30913">root_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;TreeZipper&lt;A&gt;, TreeZipper&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public TreeZipper&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; a<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> a.root<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigates to the left sibling of the current location.
   *
   * @return A new tree zipper focused on the left sibling of the current node,
   *         or none if there are no siblings on the left.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.TreeZipper[A]]" id="19872">left</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> lefts.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? Option.&lt;TreeZipper&lt;A&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>
                           : some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>lefts.head<span class="delimiter">(</span><span class="delimiter">)</span>, lefts.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, rights.cons<span class="delimiter">(</span>tree<span class="delimiter">)</span>, parents<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigates to the right sibling of the current location.
   *
   * @return A new tree zipper focused on the right sibling of the current node,
   *         or none if there are no siblings on the right.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.TreeZipper[A]]" id="19873">right</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> rights.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? Option.&lt;TreeZipper&lt;A&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>
                            : some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>rights.head<span class="delimiter">(</span><span class="delimiter">)</span>, lefts.cons<span class="delimiter">(</span>tree<span class="delimiter">)</span>, rights.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, parents<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigtes to the first child of the current location.
   *
   * @return A new tree zipper focused on the first child of the current node, or none if the node has no children.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.TreeZipper[A]]" id="19874">firstChild</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; ts = tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> ts.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? Option.&lt;TreeZipper&lt;A&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>
                        : some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>ts.head<span class="delimiter">(</span><span class="delimiter">)</span>, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, ts.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigtes to the last child of the current location.
   *
   * @return A new tree zipper focused on the last child of the current node, or none if the node has no children.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.TreeZipper[A]]" id="19875">lastChild</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; ts = tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>.reverse<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> ts.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? Option.&lt;TreeZipper&lt;A&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>
                        : some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>ts.head<span class="delimiter">(</span><span class="delimiter">)</span>, ts.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigates to the given child of the current location, starting at index 0.
   *
   * @param n The index of the child to which to navigate.
   * @return An optional tree zipper focused on the child node at the given index, or none if there is no such child.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="(n: Int)fj.data.Option[fj.data.TreeZipper[A]]" id="19876">getChild</a><span class="delimiter">(</span><span class="keyword">final</span> int <a title="Int" id="30995">n</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    Option&lt;TreeZipper&lt;A&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> P2&lt;Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt; lr
        : splitChildren<span class="delimiter">(</span>Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, n<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      r = some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>lr._1<span class="delimiter">(</span><span class="delimiter">)</span>.head<span class="delimiter">(</span><span class="delimiter">)</span>, lr._1<span class="delimiter">(</span><span class="delimiter">)</span>.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, lr._2<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">return</span> r;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Navigates to the first child of the current location, that satisfies the given predicate.
   *
   * @param p A predicate to be satisfied by the child node.
   * @return An optional tree zipper focused on the first child node that satisfies the given predicate,
   *         or none if there is no such child.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="(p: fj.F[fj.data.Tree[A],java.lang.Boolean])fj.data.Option[fj.data.TreeZipper[A]]" id="19877">findChild</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;, Boolean&gt; <a title="fj.F[fj.data.Tree[A],java.lang.Boolean]" id="30997">p</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    Option&lt;TreeZipper&lt;A&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;

    <span class="keyword">final</span> F2&lt;Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;Tree&lt;A&gt;&gt;, Option&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, Tree&lt;A&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt;&gt; split =
        <span class="keyword">new</span> F2&lt;Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;Tree&lt;A&gt;&gt;, Option&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, Tree&lt;A&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public Option&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, Tree&lt;A&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; acc,
                                                                         <span class="keyword">final</span> Stream&lt;Tree&lt;A&gt;&gt; xs<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> p.f<span class="delimiter">(</span>xs.head<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> ? some<span class="delimiter">(</span>P.p<span class="delimiter">(</span>acc, xs.head<span class="delimiter">(</span><span class="delimiter">)</span>, xs.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                                  : xs.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? f<span class="delimiter">(</span>acc.cons<span class="delimiter">(</span>xs.head<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, xs.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                                                    : Option.&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, Tree&lt;A&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>;

    Stream&lt;Tree&lt;A&gt;&gt; subforest = tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">if</span> <span class="delimiter">(</span>subforest.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, Tree&lt;A&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt; ltr
        : split.f<span class="delimiter">(</span>Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, subforest<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        r = some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>ltr._2<span class="delimiter">(</span><span class="delimiter">)</span>, ltr._1<span class="delimiter">(</span><span class="delimiter">)</span>, ltr._3<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">return</span> r;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;, <a href="#10435" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;&gt;&gt; <a title="()fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]]" id="19878">downParents</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> parents.cons<span class="delimiter">(</span>P.p<span class="delimiter">(</span>lefts, tree.root<span class="delimiter">(</span><span class="delimiter">)</span>, rights<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> static &lt;<a title="Nothing" id="30918">A</a>&gt; <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;P2&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#30918" title="A">A</a>&gt;, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#30918" title="A">A</a>&gt;&gt;&gt; <a title="[A](acc: fj.data.Stream[A], xs: fj.data.Stream[A], n: Int)fj.data.Option[fj.P2[fj.data.Stream[A],fj.data.Stream[A]]]" id="30916">splitChildren</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#30918" title="A">A</a>&gt; <a title="fj.data.Stream[A]" id="30968">acc</a>,
                                                                    <span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#30918" title="A">A</a>&gt; <a title="fj.data.Stream[A]" id="30969">xs</a>,
                                                                    <span class="keyword">final</span> int <a title="Int" id="30970">n</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> n == <span class="int">0</span> ? some<span class="delimiter">(</span>P.p<span class="delimiter">(</span>acc, xs<span class="delimiter">)</span><span class="delimiter">)</span>
                  : xs.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span> ? splitChildren<span class="delimiter">(</span>acc.cons<span class="delimiter">(</span>xs.head<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, xs.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, n - <span class="int">1</span><span class="delimiter">)</span>
                                    : Option.&lt;P2&lt;Stream&lt;A&gt;, Stream&lt;A&gt;&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> static &lt;<a title="Nothing" id="30921">A</a>&gt; <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;P3&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30921" title="A">A</a>&gt;&gt;, <a href="#30921" title="A">A</a>, <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30921" title="A">A</a>&gt;&gt;&gt;&gt; <a title="[A]()fj.data.Stream[fj.P3[fj.data.Stream[fj.data.Tree[A]],A,fj.data.Stream[fj.data.Tree[A]]]]" id="30919">lp3nil</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> nil<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a new tree zipper focused on the root of the given tree.
   *
   * @param t A tree over which to create a new zipper.
   * @return a new tree zipper focused on the root of the given tree.
   */</span>
  public static &lt;<a title="Nothing" id="30924">A</a>&gt; <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30924" title="A">A</a>&gt; <a title="[A](t: fj.data.Tree[A])fj.data.TreeZipper[A]" id="30922">fromTree</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30924" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="30976">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, TreeZipper.&lt;A&gt;lp3nil<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a new tree zipper focused on the first element of the given forest.
   *
   * @param ts A forest over which to create a new zipper.
   * @return a new tree zipper focused on the first element of the given forest.
   */</span>
  public static &lt;<a title="Nothing" id="30927">A</a>&gt; <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30927" title="A">A</a>&gt;&gt; <a title="[A](ts: fj.data.Stream[fj.data.Tree[A]])fj.data.Option[fj.data.TreeZipper[A]]" id="30925">fromForest</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30927" title="A">A</a>&gt;&gt; <a title="fj.data.Stream[fj.data.Tree[A]]" id="30979">ts</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> ts.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span>
           ? some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>ts.head<span class="delimiter">(</span><span class="delimiter">)</span>, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, ts.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, TreeZipper.&lt;A&gt;lp3nil<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
           : Option.&lt;TreeZipper&lt;A&gt;&gt;none<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the tree containing this location.
   *
   * @return the tree containing this location.
   */</span>
  public <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="()fj.data.Tree[A]" id="19879">toTree</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> root<span class="delimiter">(</span><span class="delimiter">)</span>.tree;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the forest containing this location.
   *
   * @return the forest containing this location.
   */</span>
  public <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Stream[fj.data.Tree[A]]" id="19880">toForest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> TreeZipper&lt;A&gt; r = root<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> combChildren<span class="delimiter">(</span>r.lefts, r.tree, r.rights<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the tree at the currently focused node.
   *
   * @return the tree at the currently focused node.
   */</span>
  public <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="()fj.data.Tree[A]" id="19881">focus</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> tree;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the left siblings of the currently focused node.
   *
   * @return the left siblings of the currently focused node.
   */</span>
  public <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Stream[fj.data.Tree[A]]" id="19882">lefts</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> lefts;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the right siblings of the currently focused node.
   *
   * @return the right siblings of the currently focused node.
   */</span>
  public <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Stream[fj.data.Tree[A]]" id="19883">rights</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> rights;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates whether the current node is at the top of the tree.
   *
   * @return true if the current node is the root of the tree, otherwise false.
   */</span>
  public boolean <a title="()Boolean" id="19884">isRoot</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> parents.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates whether the current node is the leftmost tree in the current forest.
   *
   * @return true if the current node has no left siblings, otherwise false.
   */</span>
  public boolean <a title="()Boolean" id="19885">isFirst</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> lefts.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates whether the current node is the rightmost tree in the current forest.
   *
   * @return true if the current node has no siblings on its right, otherwise false.
   */</span>
  public boolean <a title="()Boolean" id="19886">isLast</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> rights.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates whether the current node is at the bottom of the tree.
   *
   * @return true if the current node has no child nodes, otherwise false.
   */</span>
  public boolean <a title="()Boolean" id="19887">isLeaf</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>.isEmpty<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates whether the current node is a child node of another node.
   *
   * @return true if the current node has a parent node, otherwise false.
   */</span>
  public boolean <a title="()Boolean" id="19888">isChild</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> !isRoot<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates whether the current node has any child nodes.
   *
   * @return true if the current node has child nodes, otherwise false.
   */</span>
  public boolean <a title="()Boolean" id="19889">hasChildren</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> !isLeaf<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Replaces the current node with the given tree.
   *
   * @param t A tree with which to replace the current node.
   * @return A new tree zipper in which the focused node is replaced with the given tree.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(t: fj.data.Tree[A])fj.data.TreeZipper[A]" id="19890">setTree</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="31011">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, lefts, rights, parents<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Modifies the current node with the given function.
   *
   * @param f A function with which to modify the current tree.
   * @return A new tree zipper in which the focused node has been transformed by the given function.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(f: fj.F[fj.data.Tree[A],fj.data.Tree[A]])fj.data.TreeZipper[A]" id="19891">modifyTree</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;, <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="fj.F[fj.data.Tree[A],fj.data.Tree[A]]" id="31013">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> setTree<span class="delimiter">(</span>f.f<span class="delimiter">(</span>tree<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Modifies the label at the current node with the given function.
   *
   * @param f A function with which to transform the current node's label.
   * @return A new tree zipper with the focused node's label transformed by the given function.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(f: fj.F[A,A])fj.data.TreeZipper[A]" id="19892">modifyLabel</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10435" title="A">A</a>, <a href="#10435" title="A">A</a>&gt; <a title="fj.F[A,A]" id="31015">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> setLabel<span class="delimiter">(</span>f.f<span class="delimiter">(</span>getLabel<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Replaces the label of the current node with the given value.
   *
   * @param v The new value for the node's label.
   * @return A new tree zipper with the focused node's label replaced by the given value.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(v: A)fj.data.TreeZipper[A]" id="19893">setLabel</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10435" title="A">A</a> <a title="A" id="31017">v</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> modifyTree<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Tree&lt;A&gt;, Tree&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Tree&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Tree&lt;A&gt; t<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> Tree.node<span class="delimiter">(</span>v, t.subForest<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the label at the current node.
   *
   * @return the label at the current node.
   */</span>
  public <a href="#10435" title="A">A</a> <a title="()A" id="19894">getLabel</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> tree.root<span class="delimiter">(</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a tree to the left of the current position. The inserted tree becomes the current tree.
   *
   * @param t A tree to insert to the left of the current position.
   * @return A new tree zipper with the given tree in focus and the current tree on the right.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(t: fj.data.Tree[A])fj.data.TreeZipper[A]" id="19895">insertLeft</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="31020">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, lefts, rights.cons<span class="delimiter">(</span>tree<span class="delimiter">)</span>, parents<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a tree to the right of the current position. The inserted tree becomes the current tree.
   *
   * @param t A tree to insert to the right of the current position.
   * @return A new tree zipper with the given tree in focus and the current tree on the left.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(t: fj.data.Tree[A])fj.data.TreeZipper[A]" id="19896">insertRight</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="31022">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, lefts.cons<span class="delimiter">(</span>tree<span class="delimiter">)</span>, rights, parents<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a tree as the first child of the current node. The inserted tree becomes the current tree.
   *
   * @param t A tree to insert.
   * @return A new tree zipper with the given tree in focus, as the first child of the current node.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(t: fj.data.Tree[A])fj.data.TreeZipper[A]" id="19897">insertDownFirst</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="31024">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a tree as the last child of the current node. The inserted tree becomes the current tree.
   *
   * @param t A tree to insert.
   * @return A new tree zipper with the given tree in focus, as the last child of the current node.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="(t: fj.data.Tree[A])fj.data.TreeZipper[A]" id="19898">insertDownLast</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="31026">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>.reverse<span class="delimiter">(</span><span class="delimiter">)</span>, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a tree at the specified location in the current node's stream of children. The inserted tree
   * becomes the current node.
   *
   * @param n The index at which to insert the given tree, starting at 0.
   * @param t A tree to insert.
   * @return A new tree zipper with the given tree in focus, at the specified index in the current node's stream
   *         of children, or None if the current node has fewer than &lt;code&gt;n&lt;/code&gt; children.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="(n: Int, t: fj.data.Tree[A])fj.data.Option[fj.data.TreeZipper[A]]" id="19899">insertDownAt</a><span class="delimiter">(</span><span class="keyword">final</span> int <a title="Int" id="31028">n</a>, <span class="keyword">final</span> <a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10435" title="A">A</a>&gt; <a title="fj.data.Tree[A]" id="31029">t</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    Option&lt;TreeZipper&lt;A&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> P2&lt;Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;Tree&lt;A&gt;&gt;&gt; lr
        : splitChildren<span class="delimiter">(</span>Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span>, tree.subForest<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, n<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      r = some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>t, lr._1<span class="delimiter">(</span><span class="delimiter">)</span>, lr._2<span class="delimiter">(</span><span class="delimiter">)</span>, downParents<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">return</span> r;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Removes the current node from the tree. The new position becomes the right sibling, or the left sibling
   * if the current node has no right siblings, or the parent node if the current node has no siblings.
   *
   * @return A new tree zipper with the current node removed.
   */</span>
  public <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.Option[fj.data.TreeZipper[A]]" id="19900">delete</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    Option&lt;TreeZipper&lt;A&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="keyword">if</span> <span class="delimiter">(</span>rights.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      r = some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>rights.head<span class="delimiter">(</span><span class="delimiter">)</span>, lefts, rights.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, parents<span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">else</span> <span class="keyword">if</span> <span class="delimiter">(</span>lefts.isNotEmpty<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      r = some<span class="delimiter">(</span>treeZipper<span class="delimiter">(</span>lefts.head<span class="delimiter">(</span><span class="delimiter">)</span>, lefts.tail<span class="delimiter">(</span><span class="delimiter">)</span>._1<span class="delimiter">(</span><span class="delimiter">)</span>, rights, parents<span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">else</span> <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; loc : parent<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        r = some<span class="delimiter">(</span>loc.modifyTree<span class="delimiter">(</span><span class="keyword">new</span> F&lt;Tree&lt;A&gt;, Tree&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public Tree&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Tree&lt;A&gt; t<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> node<span class="delimiter">(</span>t.root<span class="delimiter">(</span><span class="delimiter">)</span>, Stream.&lt;Tree&lt;A&gt;&gt;nil<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> r;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips the nodes in this zipper with a boolean that indicates whether that node has focus.
   * All of the booleans will be false, except for the focused node.
   *
   * @return A new zipper of pairs, with each node of this zipper paired with a boolean that is true if that
   *         node has focus, and false otherwise.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;P2&lt;<a href="#10435" title="A">A</a>, Boolean&gt;&gt; <a title="()fj.data.TreeZipper[fj.P2[A,java.lang.Boolean]]" id="19901">zipWithFocus</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;A, P2&lt;A, Boolean&gt;&gt; f = flip<span class="delimiter">(</span>P.&lt;A, Boolean&gt;p2<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">false</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> map<span class="delimiter">(</span>f<span class="delimiter">)</span>.modifyLabel<span class="delimiter">(</span>P2.&lt;A, Boolean, Boolean&gt;map2_<span class="delimiter">(</span>Booleans.not<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps the given function across this zipper (covariant functor pattern).
   *
   * @param f A function to map across this zipper.
   * @return A new zipper with the given function applied to the label of every node.
   */</span>
  public &lt;<a title="Nothing" id="19904">B</a>&gt; <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#19904" title="B">B</a>&gt; <a title="[B](f: fj.F[A,B])fj.data.TreeZipper[B]" id="19902">map</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10435" title="A">A</a>, <a href="#19904" title="B">B</a>&gt; <a title="fj.F[A,B]" id="31033">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> F&lt;Tree&lt;A&gt;, Tree&lt;B&gt;&gt; g = Tree.&lt;A, B&gt;fmap_<span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>f<span class="delimiter">)</span>;
    <span class="keyword">final</span> F&lt;Stream&lt;Tree&lt;A&gt;&gt;, Stream&lt;Tree&lt;B&gt;&gt;&gt; h = Stream.&lt;Tree&lt;A&gt;, Tree&lt;B&gt;&gt;map_<span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>g<span class="delimiter">)</span>;
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>tree.fmap<span class="delimiter">(</span>f<span class="delimiter">)</span>, lefts.map<span class="delimiter">(</span>g<span class="delimiter">)</span>, rights.map<span class="delimiter">(</span>g<span class="delimiter">)</span>, parents.map<span class="delimiter">(</span>
        <span class="keyword">new</span> F&lt;P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt;, P3&lt;Stream&lt;Tree&lt;B&gt;&gt;, B, Stream&lt;Tree&lt;B&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public P3&lt;Stream&lt;Tree&lt;B&gt;&gt;, B, Stream&lt;Tree&lt;B&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> P3&lt;Stream&lt;Tree&lt;A&gt;&gt;, A, Stream&lt;Tree&lt;A&gt;&gt;&gt; p<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> p.map1<span class="delimiter">(</span>h<span class="delimiter">)</span>.map2<span class="delimiter">(</span>f<span class="delimiter">)</span>.map3<span class="delimiter">(</span>h<span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * First-class conversion of a Tree to the corresponding tree zipper.
   *
   * @return A function that takes a tree to its tree zipper representation.
   */</span>
  public static &lt;<a title="Nothing" id="30930">A</a>&gt; F&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30930" title="A">A</a>&gt;, <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30930" title="A">A</a>&gt;&gt; <a title="[A]()fj.F[fj.data.Tree[A],fj.data.TreeZipper[A]]" id="30928">fromTree</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;Tree&lt;A&gt;, TreeZipper&lt;A&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public TreeZipper&lt;A&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Tree&lt;A&gt; t<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> fromTree<span class="delimiter">(</span>t<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class version of the left() function.
   *
   * @return A function that focuses the given tree zipper on its left sibling.
   */</span>
  public static &lt;<a title="Nothing" id="30933">A</a>&gt; F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30933" title="A">A</a>&gt;, <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30933" title="A">A</a>&gt;&gt;&gt; <a title="[A]()fj.F[fj.data.TreeZipper[A],fj.data.Option[fj.data.TreeZipper[A]]]" id="30931">left_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Option&lt;TreeZipper&lt;A&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; z<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> z.left<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class version of the right() function.
   *
   * @return A function that focuses the given tree zipper on its right sibling.
   */</span>
  public static &lt;<a title="Nothing" id="30936">A</a>&gt; F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30936" title="A">A</a>&gt;, <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30936" title="A">A</a>&gt;&gt;&gt; <a title="[A]()fj.F[fj.data.TreeZipper[A],fj.data.Option[fj.data.TreeZipper[A]]]" id="30934">right_</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Option&lt;TreeZipper&lt;A&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; z<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> z.right<span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a zipper over the tree of all possible permutations of this tree zipper (comonad pattern).
   * This tree zipper becomes the focused node of the new zipper.
   *
   * @return A tree zipper over the tree of all possible permutations of this tree zipper.
   */</span>
  public <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt; <a title="()fj.data.TreeZipper[fj.data.TreeZipper[A]]" id="19905">positions</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">final</span> Tree&lt;TreeZipper&lt;A&gt;&gt; t = unfoldTree<span class="delimiter">(</span>TreeZipper.&lt;A&gt;dwn<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span>;
    <span class="keyword">final</span> Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt; l = uf<span class="delimiter">(</span>TreeZipper.&lt;A&gt;left_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">final</span> Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt; r = uf<span class="delimiter">(</span>TreeZipper.&lt;A&gt;right_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">final</span> Stream&lt;P3&lt;Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;, TreeZipper&lt;A&gt;, Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;&gt; p = unfold<span class="delimiter">(</span>
        <span class="keyword">new</span> F&lt;Option&lt;TreeZipper&lt;A&gt;&gt;,
            Option&lt;P2&lt;
                P3&lt;Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;, TreeZipper&lt;A&gt;, Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;,
                Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public Option&lt;P2&lt;
              P3&lt;Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;, TreeZipper&lt;A&gt;, Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;,
              Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Option&lt;TreeZipper&lt;A&gt;&gt; o<span class="delimiter">)</span> <span class="delimiter">{</span>
            Option&lt;P2&lt;
                P3&lt;Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;, TreeZipper&lt;A&gt;, Stream&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;,
                Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; z : o<span class="delimiter">)</span> <span class="delimiter">{</span>
              r = some<span class="delimiter">(</span>P.p<span class="delimiter">(</span>P.p<span class="delimiter">(</span>z.uf<span class="delimiter">(</span>TreeZipper.&lt;A&gt;left_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, z, z.uf<span class="delimiter">(</span>TreeZipper.&lt;A&gt;right_<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, z.parent<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
            <span class="delimiter">}</span>
            <span class="keyword">return</span> r;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>, parent<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">return</span> treeZipper<span class="delimiter">(</span>t, l, r, p<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;&gt; <a title="(f: fj.F[fj.data.TreeZipper[A],fj.data.Option[fj.data.TreeZipper[A]]])fj.data.Stream[fj.data.Tree[fj.data.TreeZipper[A]]]" id="19906">uf</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;, <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;&gt;&gt; <a title="fj.F[fj.data.TreeZipper[A],fj.data.Option[fj.data.TreeZipper[A]]]" id="31037">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> unfold<span class="delimiter">(</span>
        <span class="keyword">new</span> F&lt;Option&lt;TreeZipper&lt;A&gt;&gt;, Option&lt;P2&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          public Option&lt;P2&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Option&lt;TreeZipper&lt;A&gt;&gt; o<span class="delimiter">)</span> <span class="delimiter">{</span>
            Option&lt;P2&lt;Tree&lt;TreeZipper&lt;A&gt;&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; c : o<span class="delimiter">)</span> <span class="delimiter">{</span>
              r = some<span class="delimiter">(</span>P.p<span class="delimiter">(</span>unfoldTree<span class="delimiter">(</span>TreeZipper.&lt;A&gt;dwn<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.f<span class="delimiter">(</span>c<span class="delimiter">)</span>, f.f<span class="delimiter">(</span>c<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
            <span class="delimiter">}</span>
            <span class="keyword">return</span> r;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>, f.f<span class="delimiter">(</span><span class="keyword">this</span><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> static &lt;<a title="Nothing" id="30939">A</a>&gt; F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30939" title="A">A</a>&gt;, P2&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30939" title="A">A</a>&gt;, P1&lt;<a href="Stream.java.html#10365" title="fj.data.Stream">Stream</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30939" title="A">A</a>&gt;&gt;&gt;&gt;&gt; <a title="[A]()fj.F[fj.data.TreeZipper[A],fj.P2[fj.data.TreeZipper[A],fj.P1[fj.data.Stream[fj.data.TreeZipper[A]]]]]" id="30937">dwn</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F&lt;TreeZipper&lt;A&gt;, P2&lt;TreeZipper&lt;A&gt;, P1&lt;Stream&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public P2&lt;TreeZipper&lt;A&gt;, P1&lt;Stream&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; tz<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> P.&lt;TreeZipper&lt;A&gt;, P1&lt;Stream&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;p<span class="delimiter">(</span>tz, <span class="keyword">new</span> P1&lt;Stream&lt;TreeZipper&lt;A&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">private</span> F&lt;Option&lt;TreeZipper&lt;A&gt;&gt;, Option&lt;P2&lt;TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;&gt; fwd<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> <span class="keyword">new</span> F&lt;Option&lt;TreeZipper&lt;A&gt;&gt;, Option&lt;P2&lt;TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              public Option&lt;P2&lt;TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> Option&lt;TreeZipper&lt;A&gt;&gt; o<span class="delimiter">)</span> <span class="delimiter">{</span>
                Option&lt;P2&lt;TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;&gt; r = none<span class="delimiter">(</span><span class="delimiter">)</span>;
                <span class="keyword">for</span> <span class="delimiter">(</span><span class="keyword">final</span> TreeZipper&lt;A&gt; c : o<span class="delimiter">)</span> <span class="delimiter">{</span>
                  r = some<span class="delimiter">(</span>P.p<span class="delimiter">(</span>c, c.right<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
                <span class="delimiter">}</span>
                <span class="keyword">return</span> r;
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>;
          <span class="delimiter">}</span>

          public Stream&lt;TreeZipper&lt;A&gt;&gt; _1<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> unfold<span class="delimiter">(</span>fwd<span class="delimiter">(</span><span class="delimiter">)</span>, tz.firstChild<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps the given function over the tree of all positions for this zipper (comonad pattern). Returns a zipper
   * over the tree of results of the function application.
   *
   * @param f A function to map over the tree of all positions for this zipper.
   * @return A zipper over the tree of results of the function application.
   */</span>
  public &lt;<a title="Nothing" id="19909">B</a>&gt; <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#19909" title="B">B</a>&gt; <a title="[B](f: fj.F[fj.data.TreeZipper[A],B])fj.data.TreeZipper[B]" id="19907">cobind</a><span class="delimiter">(</span><span class="keyword">final</span> F&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#10435" title="A">A</a>&gt;, <a href="#19909" title="B">B</a>&gt; <a title="fj.F[fj.data.TreeZipper[A],B]" id="31039">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> positions<span class="delimiter">(</span><span class="delimiter">)</span>.map<span class="delimiter">(</span>f<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A first-class version of the findChild function.
   *
   * @return a function that finds the first child, of a given tree zipper, that matches a given predicate.
   */</span>
  public static &lt;<a title="Nothing" id="30942">A</a>&gt; F2&lt;F&lt;<a href="Tree.java.html#10381" title="fj.data.Tree">Tree</a>&lt;<a href="#30942" title="A">A</a>&gt;, Boolean&gt;, <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30942" title="A">A</a>&gt;, <a href="Option.java.html#10291" title="fj.data.Option">Option</a>&lt;<a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#30942" title="A">A</a>&gt;&gt;&gt; <a title="[A]()fj.F2[fj.F[fj.data.Tree[A],java.lang.Boolean],fj.data.TreeZipper[A],fj.data.Option[fj.data.TreeZipper[A]]]" id="30940">findChild</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> F2&lt;F&lt;Tree&lt;A&gt;, Boolean&gt;, TreeZipper&lt;A&gt;, Option&lt;TreeZipper&lt;A&gt;&gt;&gt;<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      public Option&lt;TreeZipper&lt;A&gt;&gt; f<span class="delimiter">(</span><span class="keyword">final</span> F&lt;Tree&lt;A&gt;, Boolean&gt; f, <span class="keyword">final</span> TreeZipper&lt;A&gt; az<span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> az.findChild<span class="delimiter">(</span>f<span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this TreeZipper with another, applying the given function lock-step over both zippers in all directions.
   * The structure of the resulting TreeZipper is the structural intersection of the two TreeZippers.
   *
   * @param bs A TreeZipper to zip this one with.
   * @param f  A function with which to zip together the two TreeZippers.
   * @return The result of applying the given function over this TreeZipper and the given TreeZipper, location-wise.
   */</span>
  public &lt;<a title="Nothing" id="19913">B</a>, <a title="Nothing" id="19914">C</a>&gt; <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#19914" title="C">C</a>&gt; <a title="[B, C](bs: fj.data.TreeZipper[B], f: fj.F2[A,B,C])fj.data.TreeZipper[C]" id="19910">zipWith</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#19913" title="B">B</a>&gt; <a title="fj.data.TreeZipper[B]" id="31042">bs</a>, <span class="keyword">final</span> F2&lt;<a href="#10435" title="A">A</a>, <a href="#19913" title="B">B</a>, <a href="#19914" title="C">C</a>&gt; <a title="fj.F2[A,B,C]" id="31043">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> f.zipTreeZipperM<span class="delimiter">(</span><span class="delimiter">)</span>.f<span class="delimiter">(</span><span class="keyword">this</span>, bs<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Zips this TreeZipper with another, applying the given function lock-step over both zippers in all directions.
   * The structure of the resulting TreeZipper is the structural intersection of the two TreeZippers.
   *
   * @param bs A TreeZipper to zip this one with.
   * @param f  A function with which to zip together the two TreeZippers.
   * @return The result of applying the given function over this TreeZipper and the given TreeZipper, location-wise.
   */</span>
  public &lt;<a title="Nothing" id="19918">B</a>, <a title="Nothing" id="19919">C</a>&gt; <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#19919" title="C">C</a>&gt; <a title="[B, C](bs: fj.data.TreeZipper[B], f: fj.F[A,fj.F[B,C]])fj.data.TreeZipper[C]" id="19915">zipWith</a><span class="delimiter">(</span><span class="keyword">final</span> <a href="#10434" title="fj.data.TreeZipper">TreeZipper</a>&lt;<a href="#19918" title="B">B</a>&gt; <a title="fj.data.TreeZipper[B]" id="31047">bs</a>, <span class="keyword">final</span> F&lt;<a href="#10435" title="A">A</a>, F&lt;<a href="#19918" title="B">B</a>, <a href="#19919" title="C">C</a>&gt;&gt; <a title="fj.F[A,fj.F[B,C]]" id="31048">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">return</span> zipWith<span class="delimiter">(</span>bs, uncurryF2<span class="delimiter">(</span>f<span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>