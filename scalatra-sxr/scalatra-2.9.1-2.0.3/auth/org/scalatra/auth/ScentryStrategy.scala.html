<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>auth/org/scalatra/auth/ScentryStrategy.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalatra
<span class="keyword">package</span> auth

<span class="keyword">import</span> javax.servlet.http.<span class="delimiter">{</span>HttpSession, HttpServletRequest, Cookie<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait ScentryStrategy[UserType &lt;: AnyRef] extends java.lang.Object with ScalaObject" id="10489">ScentryStrategy</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="10602">UserType</a> &lt;: AnyRef<span class="delimiter">]</span> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.scalatra.auth.ScentryStrategy.sessionWrapper : (s: javax.servlet.http.HttpSession)org.scalatra.RichSession" id="20012">sessionWrapper</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpSession" id="30072">s</a>: <span title="javax.servlet.http.HttpSession">HttpSession</span><span class="delimiter">)</span> = <span title="org.scalatra.RichSession" class="keyword">new</span> <a href="../../../../scalatra/org/scalatra/RichSession.scala.html#10082" title="org.scalatra.RichSession">RichSession</a><span class="delimiter">(</span><a href="#30072" title="javax.servlet.http.HttpSession">s</a><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.scalatra.auth.ScentryStrategy.requestWrapper : (s: javax.servlet.http.HttpServletRequest)org.scalatra.RichRequest" id="20013">requestWrapper</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="30075">s</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> = <span title="org.scalatra.RichRequest" class="keyword">new</span> <a href="../../../../scalatra/org/scalatra/RichRequest.scala.html#9638" title="org.scalatra.RichRequest">RichRequest</a><span class="delimiter">(</span><a href="#30075" title="javax.servlet.http.HttpServletRequest">s</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="=&gt; org.scalatra.ScalatraKernel" id="20014">app</a>: <a href="../../../../scalatra/org/scalatra/ScalatraKernel.scala.html#10016" title="org.scalatra.ScalatraKernel">ScalatraKernel</a>
  <span class="keyword">def</span> <a title="=&gt; Symbol" id="20015">name</a>: <span title="Symbol">Symbol</span> = <span title="(name: String)Symbol" class="symbol">'NameMe</span>

  <span class="keyword">def</span> <a title="(registrar: org.scalatra.auth.Scentry[UserType])Unit" id="20016">registerWith</a><span class="delimiter">(</span><a title="org.scalatra.auth.Scentry[UserType]" id="30082">registrar</a>: <a href="Scentry.scala.html#10465" title="org.scalatra.auth.Scentry[UserType]">Scentry</a><span class="delimiter">[</span>UserType<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#20015" title="=&gt; Symbol">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="(name: String)Symbol" class="symbol">'NameMe</span><span class="delimiter">)</span> <a href="#20018" title="=&gt; Nothing">throwOverrideException</a>
    <span class="keyword">else</span> <a href="#30082" title="org.scalatra.auth.Scentry[UserType]">registrar</a>.<a href="Scentry.scala.html#16706" title="(name: Symbol, strategyFactory: org.scalatra.ScalatraKernel =&gt; registrar.StrategyType)scala.collection.mutable.HashMap[Symbol,org.scalatra.ScalatraKernel =&gt; registrar.StrategyType]">registerStrategy</a><span title="Unit" class="delimiter">(</span><a href="#20015" title="=&gt; Symbol">name</a>, <a href="#20017" title="(app: org.scalatra.ScalatraKernel)ScentryStrategy.this.type">createStrategy</a> _<span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(app: org.scalatra.ScalatraKernel)ScentryStrategy.this.type" id="20017">createStrategy</a><span class="delimiter">(</span><a title="org.scalatra.ScalatraKernel" id="30098">app</a>: <a href="../../../../scalatra/org/scalatra/ScalatraKernel.scala.html#10016" title="org.scalatra.ScalatraKernel">ScalatraKernel</a><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span>
    <a href="#20018" title="=&gt; Nothing">throwOverrideException</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="20018">throwOverrideException</a> = <span class="delimiter">{</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span class="string">&quot;This method is used when configuring strategies through web.xml.\n&quot;</span> +
        <span class="string">&quot;If you want to use this registration method you have to override createStrategy and name in your strategy.\n&quot;</span> <span title="java.lang.String(&quot;This method is used when configuring strategies through web.xml.\012If you want to use this registration method you have to override createStrategy and name in your strategy.\012Your strategy also needs to have a parameterless constructor for it to be used through web.xml&quot;)">+</span>
        <span class="string">&quot;Your strategy also needs to have a parameterless constructor for it to be used through web.xml&quot;</span>
      <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Indicates if this strategy should be run.
   *
   * @return a Boolean to indicate validity
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="20019">isValid</a> = <span title="Boolean(true)" class="keyword">true</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;use isValid&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="20020">valid_?</a> = <a href="#20019" title="=&gt; Boolean">isValid</a>

  <span class="comment">/**
   * Perform the authentication for this strategy
   *
   * @return a UserType option where None indicates auth failure
   */</span>
  <span class="keyword">def</span> <a title="()Option[UserType]" id="20021">authenticate</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Option[UserType]">Option</span><span class="delimiter">[</span>UserType<span class="delimiter">]</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;use authenticate()&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[UserType]" id="20022">authenticate_!</a> = <a href="#20021" title="()Option[UserType]">authenticate</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Perform stuff before authenticating, only run when the module is valid
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="20023">beforeAuthenticate</a> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff after authentication only run when the module is valid
   */</span>
  <span class="keyword">def</span> <a title="(winningStrategy: Symbol, user: UserType)Unit" id="20024">afterAuthenticate</a><span class="delimiter">(</span><a title="Symbol" id="28467">winningStrategy</a>: <span title="Symbol">Symbol</span>, <a title="UserType" id="28468">user</a>: <a href="#10602" title="UserType">UserType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff before setting the user in the session
   */</span>
  <span class="keyword">def</span> <a title="(user: UserType)Unit" id="20025">beforeSetUser</a><span class="delimiter">(</span><a title="UserType" id="28206">user</a>: <a href="#10602" title="UserType">UserType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff after setting the user in the session
   */</span>
  <span class="keyword">def</span> <a title="(user: UserType)Unit" id="20026">afterSetUser</a><span class="delimiter">(</span><a title="UserType" id="28225">user</a>: <a href="#10602" title="UserType">UserType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff before fetching and serializing the user from session
   */</span>
  <span class="keyword">def</span> <a title="[IdType](userId: IdType)Unit" id="20027">beforeFetch</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="20029">IdType</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="IdType" id="28168">userId</a>: <a href="#20029" title="IdType">IdType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff after fetching and serializing the user from session
   */</span>
  <span class="keyword">def</span> <a title="(user: UserType)Unit" id="20030">afterFetch</a><span class="delimiter">(</span><a title="UserType" id="28193">user</a>: <a href="#10602" title="UserType">UserType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff before logging the user out and invalidating the session
   */</span>
  <span class="keyword">def</span> <a title="(user: UserType)Unit" id="20031">beforeLogout</a><span class="delimiter">(</span><a title="UserType" id="28667">user</a>: <a href="#10602" title="UserType">UserType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff after logging the user out and invalidating the session
   */</span>
  <span class="keyword">def</span> <a title="(user: UserType)Unit" id="20032">afterLogout</a><span class="delimiter">(</span><a title="UserType" id="28677">user</a>: <a href="#10602" title="UserType">UserType</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Perform stuff when the request is unauthenticated and the strategy is valid
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="20033">unauthenticated</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>