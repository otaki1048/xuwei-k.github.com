<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalatra/org/scalatra/ScalatraKernel.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalatra

<span class="keyword">import</span> javax.servlet._
<span class="keyword">import</span> javax.servlet.http._
<span class="keyword">import</span> scala.util.DynamicVariable
<span class="keyword">import</span> scala.util.control.ControlThrowable
<span class="keyword">import</span> scala.util.matching.Regex
<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._
<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span>ConcurrentMap, HashMap, ListBuffer, SynchronizedBuffer<span class="delimiter">}</span>
<span class="keyword">import</span> scala.xml.NodeSeq
<span class="keyword">import</span> util.io.zeroCopy
<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File, FileInputStream<span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.<span class="delimiter">{</span>Integer =&gt; JInteger<span class="delimiter">}</span>
<span class="keyword">import</span> java.util.Locale
<span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> util.<span class="delimiter">{</span>MultiMap, MapWithIndifferentAccess, MultiMapHeadView, using<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.scalatra.ScalatraKernel" id="10017">ScalatraKernel</a>
<span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="org.scalatra.util.MultiMap" id="14550">MultiParams</a> = <a href="util/MultiMap.scala.html#11088" title="org.scalatra.util.MultiMap">MultiMap</a>

  <span class="keyword">type</span> <a title="() =&gt; Any" id="14551">Action</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use HttpMethods.methods&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.lang.String]" id="14552">httpMethods</a> = <a href="HttpMethod.scala.html#10002" title="object org.scalatra.HttpMethod">HttpMethod</a>.<a href="HttpMethod.scala.html#55697" title="=&gt; Set[org.scalatra.HttpMethod]">methods</a> <span title="(f: org.scalatra.HttpMethod =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[org.scalatra.HttpMethod],java.lang.String,scala.collection.immutable.Set[java.lang.String]])scala.collection.immutable.Set[java.lang.String]">map</span> <span class="delimiter">{</span> <a href="#59171" title="org.scalatra.HttpMethod">_</a>.<span title="()java.lang.String">toString</span> <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use HttpMethods.methods filter { !_.isSafe }&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.lang.String]" id="14554">writeMethods</a> = <a href="HttpMethod.scala.html#10002" title="object org.scalatra.HttpMethod">HttpMethod</a>.<a href="HttpMethod.scala.html#55697" title="=&gt; Set[org.scalatra.HttpMethod]">methods</a> <span title="(p: org.scalatra.HttpMethod =&gt; Boolean)scala.collection.immutable.Set[org.scalatra.HttpMethod]">filter</span> <span class="delimiter">{</span> <span title="=&gt; Boolean">!</span><a href="#59281" title="org.scalatra.HttpMethod">_</a>.<a href="HttpMethod.scala.html#55475" title="=&gt; Boolean">isSafe</a> <span class="delimiter">}</span> <span title="(f: org.scalatra.HttpMethod =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[org.scalatra.HttpMethod],java.lang.String,scala.collection.immutable.Set[java.lang.String]])scala.collection.immutable.Set[java.lang.String]">map</span> <span class="delimiter">{</span> <a href="#59307" title="org.scalatra.HttpMethod">_</a>.<span title="()java.lang.String">toString</span> <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use CsrfTokenSupport.DefaultKey&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="14556">csrfKey</a> = <a href="CsrfTokenSupport.scala.html#9786" title="object org.scalatra.CsrfTokenSupport">CsrfTokenSupport</a>.<a href="CsrfTokenSupport.scala.html#55011" title="=&gt; java.lang.String">DefaultKey</a>

  <span class="keyword">val</span> <a title="java.lang.String" id="14558">EnvironmentKey</a> = <span title="java.lang.String(&quot;org.scalatra.environment&quot;)" class="string">&quot;org.scalatra.environment&quot;</span>.<span title="()java.lang.String">intern</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="14560">MultiParamsKey</a> = <span title="java.lang.String(&quot;org.scalatra.MultiParams&quot;)" class="string">&quot;org.scalatra.MultiParams&quot;</span>.<span title="()java.lang.String">intern</span>
<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="#10017" title="object org.scalatra.ScalatraKernel">ScalatraKernel</a>._

<span class="comment">/**
 * ScalatraKernel is the default implementation of [[org.scalatra.CoreDSL]].
 * It is typically extended by [[org.scalatra.ScalatraServlet]] or
 * [[org.scalatra.ScalatraFilter]] to create a Scalatra application.
 */</span>
<span class="keyword">trait</span> <a title="trait ScalatraKernel extends java.lang.Object with org.scalatra.Handler with org.scalatra.CoreDsl with org.scalatra.Initializable with org.scalatra.ServletApiImplicits with ScalaObject" id="10016">ScalatraKernel</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Handler.scala.html#10055" title="org.scalatra.Handler">Handler</a> <span class="keyword">with</span> <a href="CoreDsl.scala.html#9635" title="org.scalatra.CoreDsl">CoreDsl</a> <span class="keyword">with</span> <a href="Initializable.scala.html#10103" title="org.scalatra.Initializable">Initializable</a>
  <span class="keyword">with</span> <a href="ServletApiImplicits.scala.html#9944" title="org.scalatra.ServletApiImplicits">ServletApiImplicits</a>
<span class="delimiter">{</span>
  <span class="comment">/**
   * The routes registered in this kernel.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.scalatra.RouteRegistry" id="11849">routes</a>: <a href="RouteRegistry.scala.html#9875" title="org.scalatra.RouteRegistry">RouteRegistry</a> = <span title="org.scalatra.RouteRegistry" class="keyword">new</span> <a href="RouteRegistry.scala.html#9875" title="org.scalatra.RouteRegistry">RouteRegistry</a>

  <span class="comment">/**
   * The default character encoding for requests and responses.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="java.lang.String" id="11850">defaultCharacterEncoding</a> = <span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>

  <span class="comment">/**
   * A dynamic variable containing the currently-scoped response.  Should
   * not typically be invoked directly.  Prefer `response`.
   *
   * @see #response
   */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.util.DynamicVariable[javax.servlet.http.HttpServletResponse]" id="11852">_response</a>   = <span title="scala.util.DynamicVariable[javax.servlet.http.HttpServletResponse]" class="keyword">new</span> <span title="scala.util.DynamicVariable[javax.servlet.http.HttpServletResponse]">DynamicVariable</span><span class="delimiter">[</span>HttpServletResponse<span class="delimiter">]</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>

  <span class="comment">/**
   * A dynamic variable containing the currently-scoped request.  Should
   * not typically be invoked directly.  Prefer `request`.
   *
   * @see #request
   */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.util.DynamicVariable[javax.servlet.http.HttpServletRequest]" id="11854">_request</a>    = <span title="scala.util.DynamicVariable[javax.servlet.http.HttpServletRequest]" class="keyword">new</span> <span title="scala.util.DynamicVariable[javax.servlet.http.HttpServletRequest]">DynamicVariable</span><span class="delimiter">[</span>HttpServletRequest<span class="delimiter">]</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Pluggable way to convert a path expression to a route matcher.
   * The default implementation is compatible with Sinatra's route syntax.
   *
   * @param path a path expression
   * @return a route matcher based on `path`
   */</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.scalatra.ScalatraKernel.string2RouteMatcher : (path: String)org.scalatra.RouteMatcher" id="11856">string2RouteMatcher</a><span class="delimiter">(</span><a title="String" id="29038">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="routeMatcher.scala.html#9533" title="org.scalatra.RouteMatcher">RouteMatcher</a> =
    <span title="org.scalatra.SinatraRouteMatcher" class="keyword">new</span> <a href="routeMatcher.scala.html#10049" title="org.scalatra.SinatraRouteMatcher">SinatraRouteMatcher</a><span class="delimiter">(</span><a href="#29038" title="String">path</a>, <a href="#11865" title="=&gt; String">requestPath</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Path pattern is decoupled from requests.  This adapts the PathPattern to
   * a RouteMatcher by supplying the request path.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.scalatra.ScalatraKernel.pathPatternParser2RouteMatcher : (pattern: org.scalatra.PathPattern)org.scalatra.RouteMatcher" id="11857">pathPatternParser2RouteMatcher</a><span class="delimiter">(</span><a title="org.scalatra.PathPattern" id="29026">pattern</a>: <a href="pathPatternParsers.scala.html#10241" title="org.scalatra.PathPattern">PathPattern</a><span class="delimiter">)</span>: <a href="routeMatcher.scala.html#9533" title="org.scalatra.RouteMatcher">RouteMatcher</a> =
    <span title="org.scalatra.PathPatternRouteMatcher" class="keyword">new</span> <a href="routeMatcher.scala.html#10148" title="org.scalatra.PathPatternRouteMatcher">PathPatternRouteMatcher</a><span class="delimiter">(</span><a href="#29026" title="org.scalatra.PathPattern">pattern</a>, <a href="#11865" title="=&gt; String">requestPath</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Converts a regular expression to a route matcher.
   *
   * @param regex the regular expression
   * @return a route matcher based on `regex`
   * @see [[org.scalatra.RegexRouteMatcher]]
   */</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.scalatra.ScalatraKernel.regex2RouteMatcher : (regex: scala.util.matching.Regex)org.scalatra.RouteMatcher" id="11858">regex2RouteMatcher</a><span class="delimiter">(</span><a title="scala.util.matching.Regex" id="28838">regex</a>: <span title="scala.util.matching.Regex">Regex</span><span class="delimiter">)</span>: <a href="routeMatcher.scala.html#9533" title="org.scalatra.RouteMatcher">RouteMatcher</a> =
    <span title="org.scalatra.RegexRouteMatcher" class="keyword">new</span> <a href="routeMatcher.scala.html#10358" title="org.scalatra.RegexRouteMatcher">RegexRouteMatcher</a><span class="delimiter">(</span><a href="#28838" title="scala.util.matching.Regex">regex</a>, <a href="#11865" title="=&gt; String">requestPath</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Converts a boolean expression to a route matcher.
   *
   * @param block a block that evaluates to a boolean
   *
   * @return a route matcher based on `block`.  The route matcher should
   * return `Some` if the block is true and `None` if the block is false.
   *
   * @see [[org.scalatra.BooleanBlockRouteMatcher]]
   */</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.scalatra.ScalatraKernel.booleanBlock2RouteMatcher : (block: =&gt; Boolean)org.scalatra.RouteMatcher" id="11859">booleanBlock2RouteMatcher</a><span class="delimiter">(</span><a title="=&gt; Boolean" id="28836">block</a>: =&gt; Boolean<span class="delimiter">)</span>: <a href="routeMatcher.scala.html#9533" title="org.scalatra.RouteMatcher">RouteMatcher</a> =
    <span title="org.scalatra.BooleanBlockRouteMatcher" class="keyword">new</span> <a href="routeMatcher.scala.html#9905" title="org.scalatra.BooleanBlockRouteMatcher">BooleanBlockRouteMatcher</a><span class="delimiter">(</span><a href="#28836" title="=&gt; Boolean">block</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Handles a request and renders a response.
   *
   * $ 1. If the request lacks a character encoding, `defaultCharacterEncoding`
   *      is set to the request.
   *
   * $ 2. Sets the response's character encoding to `defaultCharacterEncoding`.
   *
   * $ 3. Binds the current `request`, `response`, and `multiParams`, and calls
   *      `executeRoutes()`.
   */</span>
  <span class="keyword">def</span> <a title="(request: javax.servlet.http.HttpServletRequest, response: javax.servlet.http.HttpServletResponse)Unit" id="11860">handle</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="36536">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="36537">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// As default, the servlet tries to decode params with ISO_8859-1.</span>
    <span class="comment">// It causes an EOFException if params are actually encoded with the other code (such as UTF-8)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36536" title="javax.servlet.http.HttpServletRequest">request</a>.<span title="()java.lang.String">getCharacterEncoding</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#36536" title="javax.servlet.http.HttpServletRequest">request</a>.<span title="(x$1: java.lang.String)Unit">setCharacterEncoding</span><span class="delimiter">(</span><a href="#11850" title="=&gt; java.lang.String">defaultCharacterEncoding</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,Seq[String]]" id="59720">realMultiParams</a> = <a href="#36536" title="javax.servlet.http.HttpServletRequest">request</a>.<span title="()java.util.Map[_, _]">getParameterMap</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="(m: java.util.Map[String,Array[String]])scala.collection.mutable.Map[String,Array[String]]" class="delimiter">[</span>java.util.<span title="java.util.Map[String,Array[String]]">Map</span><span class="delimiter">[</span>String,Array<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(implicit ev: &lt;:&lt;[(String, Array[String]),(String, Array[String])])scala.collection.immutable.Map[String,Array[String]]">toMap</span>
      .<span title="(f: (String, Array[String]) =&gt; Seq[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Array[String]],(String, Seq[String]),scala.collection.immutable.Map[String,Seq[String]]])scala.collection.immutable.Map[String,Seq[String]]">transform</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map.Coll,(String, Seq[String]),scala.collection.immutable.Map[String,Seq[String]]]" class="delimiter">{</span> <span class="delimiter">(</span><a title="String" id="59906">k</a>, <a title="Array[String]" id="59907">v</a><span class="delimiter">)</span> =&gt; <a href="#59907" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">v</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">}</span>

    <a href="#36537" title="javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: java.lang.String)Unit">setCharacterEncoding</span><span class="delimiter">(</span><a href="#11850" title="=&gt; java.lang.String">defaultCharacterEncoding</a><span class="delimiter">)</span>

    <a href="#11854" title="=&gt; scala.util.DynamicVariable[javax.servlet.http.HttpServletRequest]">_request</a>.<span title="(newval: javax.servlet.http.HttpServletRequest)(thunk: =&gt; Unit)Unit">withValue</span><span class="delimiter">(</span><a href="#36536" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#11852" title="=&gt; scala.util.DynamicVariable[javax.servlet.http.HttpServletResponse]">_response</a>.<span title="(newval: javax.servlet.http.HttpServletResponse)(thunk: =&gt; Unit)Unit">withValue</span><span class="delimiter">(</span><a href="#36537" title="javax.servlet.http.HttpServletResponse">response</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="ServletApiImplicits.scala.html#11961" title="(key: String, value: AnyRef)Unit">request</a><span class="delimiter">(</span><a href="#14560" title="=&gt; java.lang.String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="util/MultiMap.scala.html#56867" title="(wrapped: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap">MultiMap</a><span class="delimiter">(</span><span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <a href="#59720" title="scala.collection.immutable.Map[String,Seq[String]]">realMultiParams</a><span class="delimiter">)</span>
        <a href="#11861" title="()Unit">executeRoutes</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// IPC: taken out because I needed the extension point</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Executes routes in the context of the current request and response.
   *
   * $ 1. Executes each before filter with `runFilters`.
   * $ 2. Executes the routes in the route registry with `runRoutes` for
   *      the request's method.
   *      a. The result of runRoutes becomes the _action result_.
   *      b. If no route matches the requested method, but matches are
   *         found for other methods, then the `doMethodNotAllowed` hook is
   *         run with each matching method.
   *      c. If no route matches any method, then the `doNotFound` hook is
   *         run, and its return value becomes the action result.
   * $ 3. If an exception is thrown during the before filters or the route
   * $    actions, then it is passed to the `errorHandler` function, and its
   * $    result becomes the action result.
   * $ 4. Executes the after filters with `runFilters`.
   * $ 5. The action result is passed to `renderResponse`.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="11861">executeRoutes</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Any" id="60091">result</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#11862" title="(filters: Traversable[org.scalatra.Route])Unit">runFilters</a><span class="delimiter">(</span><a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55125" title="=&gt; Seq[org.scalatra.Route]">beforeFilters</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Option[Any]" id="60092">actionResult</a> = <a href="#11863" title="(routes: Traversable[org.scalatra.Route])scala.collection.immutable.Stream[Any]">runRoutes</a><span class="delimiter">(</span><a href="RouteRegistry.scala.html#55119" title="(method: org.scalatra.HttpMethod)Seq[org.scalatra.Route]">routes</a><span class="delimiter">(</span><a href="ServletApiImplicits.scala.html#11961" title="implicit org.scalatra.ServletApiImplicits.requestWrapper : (r: javax.servlet.http.HttpServletRequest)org.scalatra.RichRequest">request</a>.<a href="RichRequest.scala.html#27724" title="=&gt; org.scalatra.HttpMethod">method</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[Any]">headOption</span>
      <a href="#60092" title="Option[Any]">actionResult</a> <span title="(alternative: =&gt; Option[Any])Option[Any]">orElse</span> <a href="#11877" title="()Option[Any]">matchOtherMethods</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(default: =&gt; Any)Any">getOrElse</span> <a href="#11871" title="()Any">doNotFound</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="60411">e</a>: <a href="#65936" title="ScalatraKernel.this.HaltException">HaltException</a> =&gt; <a href="#11901" title="(e: ScalatraKernel.this.HaltException)Unit">renderHaltException</a><span class="delimiter">(</span><a href="#60411" title="ScalatraKernel.this.HaltException">e</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Any" id="60428">e</a> =&gt; <a href="#11879" title="(v1: Throwable)Any">errorHandler</a><span class="delimiter">(</span><a href="#60428" title="java.lang.Throwable">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#11862" title="(filters: Traversable[org.scalatra.Route])Unit">runFilters</a><span class="delimiter">(</span><a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55127" title="=&gt; Seq[org.scalatra.Route]">afterFilters</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#11885" title="(actionResult: Any)Unit">renderResponse</a><span class="delimiter">(</span><a href="#60091" title="Any">result</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Invokes each filters with `invoke`.  The results of the filters
   * are discarded.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(filters: Traversable[org.scalatra.Route])Unit" id="11862">runFilters</a><span class="delimiter">(</span><a title="Traversable[org.scalatra.Route]" id="60093">filters</a>: <span title="Traversable[org.scalatra.Route]">Traversable</span><span class="delimiter">[</span>Route<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="org.scalatra.Route" id="60111">route</a> &lt;- <a href="#60093" title="(f: org.scalatra.Route =&gt; Unit)Unit">filters</a>
      <a title="org.scalatra.MatchedRoute" id="60116">matchedRoute</a> &lt;- <a href="route.scala.html#48404" title="()Option[org.scalatra.MatchedRoute]">route</a><span title="(f: org.scalatra.MatchedRoute =&gt; Option[Any])Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <a href="#11864" title="(matchedRoute: org.scalatra.MatchedRoute)Option[Any]">invoke</a><span class="delimiter">(</span><a href="#60116" title="org.scalatra.MatchedRoute">matchedRoute</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Lazily invokes routes with `invoke`.  The results of the routes
   * are returned as a stream.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(routes: Traversable[org.scalatra.Route])scala.collection.immutable.Stream[Any]" id="11863">runRoutes</a><span class="delimiter">(</span><a title="Traversable[org.scalatra.Route]" id="60119">routes</a>: <span title="Traversable[org.scalatra.Route]">Traversable</span><span class="delimiter">[</span>Route<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="org.scalatra.Route" id="60192">route</a> &lt;- <a href="#60119" title="Traversable[org.scalatra.Route]">routes</a>.<span title="(f: org.scalatra.Route =&gt; scala.collection.GenTraversableOnce[Any])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream[org.scalatra.Route],Any,scala.collection.immutable.Stream[Any]])scala.collection.immutable.Stream[Any]">toStream</span> <span class="comment">// toStream makes it lazy so we stop after match</span>
      <a title="org.scalatra.MatchedRoute" id="60197">matchedRoute</a> &lt;- <a href="route.scala.html#48404" title="()Option[org.scalatra.MatchedRoute]">route</a><span title="(f: org.scalatra.MatchedRoute =&gt; Option[Any])Option[Any]" class="delimiter">(</span><span class="delimiter">)</span>
      <a title="Any" id="60202">actionResult</a> &lt;- <a href="#11864" title="(matchedRoute: org.scalatra.MatchedRoute)Option[Any]">invoke</a><span title="(f: Any =&gt; Any)Option[Any]" class="delimiter">(</span><a href="#60197" title="org.scalatra.MatchedRoute">matchedRoute</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#60202" title="Any">actionResult</a>

  <span class="comment">/**
   * Invokes a route or filter.  The multiParams gathered from the route
   * matchers are merged into the existing route params, and then the action
   * is run.
   *
   * @param matchedRoute the matched route to execute
   *
   * @param return the result of the matched route's action wrapped in `Some`,
   * or `None` if the action calls `pass`.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(matchedRoute: org.scalatra.MatchedRoute)Option[Any]" id="11864">invoke</a><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="43648">matchedRoute</a>: <a href="route.scala.html#10244" title="org.scalatra.MatchedRoute">MatchedRoute</a><span class="delimiter">)</span> =
    <a href="#11882" title="(matchedRoute: Option[org.scalatra.MatchedRoute])(thunk: =&gt; Option[Any])Option[Any]">withRouteMultiParams</a><span class="delimiter">(</span><span title="(x: org.scalatra.MatchedRoute)Some[org.scalatra.MatchedRoute]">Some</span><span class="delimiter">(</span><a href="#43648" title="org.scalatra.MatchedRoute">matchedRoute</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span title="(x: Any)Some[Any]">Some</span><span class="delimiter">(</span><a href="#43648" title="org.scalatra.MatchedRoute">matchedRoute</a>.<a href="route.scala.html#43662" title="()Any">action</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="None.type" id="43673">e</a>: <a href="#11903" title="ScalatraKernel.this.PassException">PassException</a> =&gt; <span title="object None">None</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * The effective path against which routes are matched.  The definition
   * varies between servlets and filters.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="11865">requestPath</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(fun: =&gt; Any)Unit" id="11866">before</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="55102">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="55103">fun</a>: =&gt; Any<span class="delimiter">)</span> =
    <a href="#11867" title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], fun: =&gt; Any)Unit">addBefore</a><span class="delimiter">(</span><a href="#55102" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#55103" title="=&gt; Any">fun</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], fun: =&gt; Any)Unit" id="11867">addBefore</a><span class="delimiter">(</span><a title="Iterable[org.scalatra.RouteMatcher]" id="55106">routeMatchers</a>: <span title="Iterable[org.scalatra.RouteMatcher]">Iterable</span><span class="delimiter">[</span>RouteMatcher<span class="delimiter">]</span>, <a title="=&gt; Any" id="55107">fun</a>: =&gt; Any<span class="delimiter">)</span> =
    <a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55126" title="(route: org.scalatra.Route)Unit">appendBeforeFilter</a><span class="delimiter">(</span><a href="route.scala.html#48878" title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], action: () =&gt; Any, contextPath: () =&gt; String)org.scalatra.Route">Route</a><span class="delimiter">(</span><a href="#55106" title="Iterable[org.scalatra.RouteMatcher]">routeMatchers</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#55107" title="=&gt; Any">fun</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(fun: =&gt; Any)Unit" id="11868">after</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="60436">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="60437">fun</a>: =&gt; Any<span class="delimiter">)</span> =
    <a href="#11869" title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], fun: =&gt; Any)Unit">addAfter</a><span class="delimiter">(</span><a href="#60436" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#60437" title="=&gt; Any">fun</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], fun: =&gt; Any)Unit" id="11869">addAfter</a><span class="delimiter">(</span><a title="Iterable[org.scalatra.RouteMatcher]" id="60440">routeMatchers</a>: <span title="Iterable[org.scalatra.RouteMatcher]">Iterable</span><span class="delimiter">[</span>RouteMatcher<span class="delimiter">]</span>, <a title="=&gt; Any" id="60441">fun</a>: =&gt; Any<span class="delimiter">)</span> =
    <a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55128" title="(route: org.scalatra.Route)Unit">appendAfterFilter</a><span class="delimiter">(</span><a href="route.scala.html#48878" title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], action: () =&gt; Any, contextPath: () =&gt; String)org.scalatra.Route">Route</a><span class="delimiter">(</span><a href="#60440" title="Iterable[org.scalatra.RouteMatcher]">routeMatchers</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#60441" title="=&gt; Any">fun</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Called if no route matches the current request for any method.  The
   * default implementation varies between servlet and filter.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">var</span> <a title="=&gt; () =&gt; Any" id="11871">doNotFound</a>: <span title="() =&gt; Any">Action</span>
  <span class="keyword">def</span> <a title="(fun: =&gt; Any)Unit" id="11872">notFound</a><span class="delimiter">(</span><a title="=&gt; Any" id="60445">fun</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11871" title="(x$1: () =&gt; Any)Unit">doNotFound</a> = <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#60445" title="=&gt; Any">fun</a> <span class="delimiter">}</span>

  <span class="comment">/**
   * Called if no route matches the current request method, but routes
   * match for other methods.  By default, sends an HTTP status of 405
   * and an `Allow` header containing a comma-delimited list of the allowed
   * methods.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Set[org.scalatra.HttpMethod] =&gt; Any" id="11874">doMethodNotAllowed</a>: <span class="delimiter">(</span>Set<span class="delimiter">[</span>HttpMethod<span class="delimiter">]</span> =&gt; Any<span class="delimiter">)</span> = <span class="delimiter">{</span> <a title="Set[org.scalatra.HttpMethod]" id="60450">allow</a> =&gt;
    <a href="CoreDsl.scala.html#11935" title="(code: Int)Unit">status</a><span class="delimiter">(</span><span title="Int(405)" class="int">405</span><span class="delimiter">)</span>
    <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">setHeader</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Allow&quot;)" class="string">&quot;Allow&quot;</span>, <a href="#60450" title="Set[org.scalatra.HttpMethod]">allow</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: Set[org.scalatra.HttpMethod] =&gt; Any)Unit" id="11876">methodNotAllowed</a><span class="delimiter">(</span><a title="Set[org.scalatra.HttpMethod] =&gt; Any" id="60453">f</a>: Set<span class="delimiter">[</span>HttpMethod<span class="delimiter">]</span> =&gt; Any<span class="delimiter">)</span> = <a href="#11874" title="(x$1: Set[org.scalatra.HttpMethod] =&gt; Any)Unit">doMethodNotAllowed</a> = <a href="#60453" title="Set[org.scalatra.HttpMethod] =&gt; Any">f</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Option[Any]" id="11877">matchOtherMethods</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Option[Any]">Option</span><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Set[org.scalatra.HttpMethod]" id="60456">allow</a> = <a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55121" title="(method: org.scalatra.HttpMethod)Set[org.scalatra.HttpMethod]">matchingMethodsExcept</a><span class="delimiter">(</span><a href="ServletApiImplicits.scala.html#11961" title="implicit org.scalatra.ServletApiImplicits.requestWrapper : (r: javax.servlet.http.HttpServletRequest)org.scalatra.RichRequest">request</a>.<a href="RichRequest.scala.html#27724" title="=&gt; org.scalatra.HttpMethod">method</a><span class="delimiter">)</span>
    <span title="Option[Any]" class="keyword">if</span> <span class="delimiter">(</span><a href="#60456" title="Set[org.scalatra.HttpMethod]">allow</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="object None">None</span> <span class="keyword">else</span> <span title="(x: Any)Some[Any]">Some</span><span class="delimiter">(</span><a href="#11874" title="(v1: Set[org.scalatra.HttpMethod])Any">doMethodNotAllowed</a><span class="delimiter">(</span><a href="#60456" title="Set[org.scalatra.HttpMethod]">allow</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The error handler function, called if an exception is thrown during
   * before filters or the routes.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">var</span> <a title="org.scalatra.package.ErrorHandler" id="11879">errorHandler</a>: <span title="org.scalatra.package.ErrorHandler">ErrorHandler</span> = <a href="#60473" title="Any" class="delimiter">{</a> <span class="keyword">case</span> <a title="Nothing" id="60474">t</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#60474" title="Throwable">t</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(handler: org.scalatra.package.ErrorHandler)Unit" id="11881">error</a><span class="delimiter">(</span><a title="org.scalatra.package.ErrorHandler" id="60475">handler</a>: <span title="org.scalatra.package.ErrorHandler">ErrorHandler</span><span class="delimiter">)</span> = <a href="#11879" title="(x$1: org.scalatra.package.ErrorHandler)Unit">errorHandler</a> = <a href="#60475" title="org.scalatra.package.ErrorHandler">handler</a> <span title="(that: PartialFunction[Throwable,Any])PartialFunction[Throwable,Any]">orElse</span> <a href="#11879" title="=&gt; org.scalatra.package.ErrorHandler">errorHandler</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[S](matchedRoute: Option[org.scalatra.MatchedRoute])(thunk: =&gt; S)S" id="11882">withRouteMultiParams</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="11884">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[org.scalatra.MatchedRoute]" id="43651">matchedRoute</a>: <span title="Option[org.scalatra.MatchedRoute]">Option</span><span class="delimiter">[</span>MatchedRoute<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; S" id="43652">thunk</a>: =&gt; S<span class="delimiter">)</span>: <a href="#11884" title="S">S</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.scalatra.ScalatraKernel.MultiParams" id="60485">originalParams</a> = <a href="#11889" title="=&gt; org.scalatra.ScalatraKernel.MultiParams">multiParams</a>
    <a href="ServletApiImplicits.scala.html#11961" title="(key: String, value: AnyRef)Unit">request</a><span class="delimiter">(</span><a href="#14560" title="=&gt; java.lang.String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#60485" title="org.scalatra.ScalatraKernel.MultiParams">originalParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <a href="#43651" title="Option[org.scalatra.MatchedRoute]">matchedRoute</a>.<span title="(f: org.scalatra.MatchedRoute =&gt; org.scalatra.ScalatraKernel.MultiParams)Option[org.scalatra.ScalatraKernel.MultiParams]">map</span><span class="delimiter">(</span><a href="#60562" title="org.scalatra.MatchedRoute">_</a>.<a href="route.scala.html#43664" title="=&gt; org.scalatra.ScalatraKernel.MultiParams">multiParams</a><span class="delimiter">)</span>.<span title="(default: =&gt; scala.collection.immutable.Map[_ &lt;: String, Seq[java.lang.String]])scala.collection.immutable.Map[_ &lt;: String, Seq[java.lang.String]]">getOrElse</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[Nothing,Nothing]">empty</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span> <a href="#43652" title="=&gt; S">thunk</a> <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span> <a href="ServletApiImplicits.scala.html#11961" title="(key: String, value: AnyRef)Unit">request</a><span class="delimiter">(</span><a href="#14560" title="=&gt; java.lang.String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#60485" title="org.scalatra.ScalatraKernel.MultiParams">originalParams</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Renders the action result to the response.
   * $ - If the content type is still null, call the contentTypeInferrer.
   * $ - Call the render pipeline on the result.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(actionResult: Any)Unit" id="11885">renderResponse</a><span class="delimiter">(</span><a title="Any" id="60430">actionResult</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="CoreDsl.scala.html#11933" title="=&gt; String">contentType</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#11886" title="=&gt; org.scalatra.package.ContentTypeInferrer">contentTypeInferrer</a>.<span title="(v1: Any)Option[String]">lift</span><span class="delimiter">(</span><a href="#60430" title="Any">actionResult</a><span class="delimiter">)</span> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="CoreDsl.scala.html#11934" title="(contentType: String)Unit">contentType</a> = <a href="#65537" title="String">_</a> <span class="delimiter">}</span>
    <a href="#11887" title="(actionResult: Any)Unit">renderResponseBody</a><span class="delimiter">(</span><a href="#60430" title="Any">actionResult</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A partial function to infer the content type from the action result.
   *
   * @return
   *   $ - &quot;text/plain&quot; for String
   *   $ - &quot;application/octet-stream&quot; for a byte array
   *   $ - &quot;text/html&quot; for any other result
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.scalatra.package.ContentTypeInferrer" id="11886">contentTypeInferrer</a>: <span title="org.scalatra.package.ContentTypeInferrer">ContentTypeInferrer</span> = <a href="#65542" title="String" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;text/plain&quot;)">_</span>: <span title="String">String</span> =&gt; <span title="java.lang.String(&quot;text/plain&quot;)" class="string">&quot;text/plain&quot;</span>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;application/octet-stream&quot;)">_</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> =&gt; <span title="java.lang.String(&quot;application/octet-stream&quot;)" class="string">&quot;application/octet-stream&quot;</span>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;text/html&quot;)">_</span> =&gt; <span title="java.lang.String(&quot;text/html&quot;)" class="string">&quot;text/html&quot;</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Renders the action result to the response body via the render pipeline.
   *
   * @see #renderPipeline
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(actionResult: Any)Unit" id="11887">renderResponseBody</a><span class="delimiter">(</span><a title="Any" id="65539">actionResult</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(ar: Any)Any" id="65543">loop</a><span class="delimiter">(</span><a title="Any" id="65544">ar</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <a href="#65544" title="Any">ar</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="65545">r</a>: <span title="Unit">Unit</span> =&gt;
      <span class="keyword">case</span> <a title="Any" id="65546">a</a> =&gt; <a href="#65543" title="(ar: Any)Any">loop</a><span class="delimiter">(</span><a href="#11888" title="=&gt; org.scalatra.package.RenderPipeline">renderPipeline</a>.<span title="(v1: Any)Option[Any]">lift</span><span class="delimiter">(</span><a href="#65546" title="Any">a</a><span class="delimiter">)</span> <span title="(default: =&gt; Any)Any">getOrElse</span> <span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#65543" title="(ar: Any)Any">loop</a><span title="Unit" class="delimiter">(</span><a href="#65539" title="Any">actionResult</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The render pipeline is a partial function of Any =&gt; Any.  It is
   * called recursively until it returns ().  () indicates that the
   * response has been rendered.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.scalatra.package.RenderPipeline" id="11888">renderPipeline</a>: <span title="org.scalatra.package.RenderPipeline">RenderPipeline</span> = <a href="#65555" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Unit" id="65556">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> =&gt;
      <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="()javax.servlet.ServletOutputStream">getOutputStream</span>.<span title="(x$1: Array[Byte])Unit">write</span><span class="delimiter">(</span><a href="#65556" title="Array[Byte]">bytes</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Unit" id="65603">file</a>: <span title="java.io.File">File</span> =&gt;
      <a href="util/package.scala.html#11433" title="(closeable: java.io.FileInputStream)(f: java.io.FileInputStream =&gt; Unit)Unit">using</a><span class="delimiter">(</span><span title="(x$1: java.io.File)java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#65603" title="java.io.File">file</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.io.FileInputStream" id="65786">in</a> =&gt; <a href="util/io/package.scala.html#11428" title="(in: java.io.FileInputStream, out: java.io.OutputStream)Unit">zeroCopy</a><span class="delimiter">(</span><a href="#65786" title="java.io.FileInputStream">in</a>, <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="()javax.servlet.ServletOutputStream">getOutputStream</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Unit">Unit</span> =&gt;
      <span class="comment">// If an action returns Unit, it assumes responsibility for the response</span>
    <span class="keyword">case</span> <a title="Unit" id="65792">x</a>: <span title="Any">Any</span>  =&gt;
      <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="()java.io.PrintWriter">getWriter</span>.<span title="(x$1: java.lang.String)Unit">print</span><span class="delimiter">(</span><a href="#65792" title="Any">x</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The current multiparams.  Multiparams are a result of merging the
   * standard request params (query string or post params) with the route
   * parameters extracted from the route matchers of the current route.
   * The default value for an unknown param is the empty sequence.  Invalid
   * outside `handle`.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; org.scalatra.ScalatraKernel.MultiParams" id="11889">multiParams</a>: <a href="util/MultiMap.scala.html#11088" title="org.scalatra.ScalatraKernel.MultiParams">MultiParams</a> = <a href="ServletApiImplicits.scala.html#11961" title="(key: String)AnyRef">request</a><span class="delimiter">(</span><a href="#14560" title="=&gt; java.lang.String">MultiParamsKey</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.ScalatraKernel.MultiParams" class="delimiter">[</span><a href="util/MultiMap.scala.html#11088" title="org.scalatra.ScalatraKernel.MultiParams">MultiParams</a><span class="delimiter">]</span>
    .<span title="(d: Seq[String])scala.collection.immutable.Map[String,Seq[String]]">withDefaultValue</span><a href="util/MultiMap.scala.html#56870" title="implicit org.scalatra.util.MultiMap.map2MultiMap : (map: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap" class="delimiter">(</a><span title="object Seq">Seq</span>.<span title="Seq[Nothing]">empty</span><span class="delimiter">)</span>

  <span class="comment">/*
   * Assumes that there is never a null or empty value in multiParams.  The servlet container won't put them
   * in request.getParameters, and we shouldn't either.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="_params extends java.lang.Object with org.scalatra.util.MultiMapHeadView[String,String] with org.scalatra.util.MapWithIndifferentAccess[String]" id="11890">_params</a> = <a href="#25043" title="java.lang.Object with org.scalatra.util.MultiMapHeadView[String,String] with org.scalatra.util.MapWithIndifferentAccess[String]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalatra.util.MultiMapHeadView[String,String] with org.scalatra.util.MapWithIndifferentAccess[String]" id="25043">MultiMapHeadView</a><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="keyword">with</span> <a href="util/MapWithIndifferentAccess.scala.html#11067" title="org.scalatra.util.MapWithIndifferentAccess[String]">MapWithIndifferentAccess</a><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.scalatra.ScalatraKernel.MultiParams" id="25094">multiMap</a> = <a href="#11889" title="=&gt; org.scalatra.ScalatraKernel.MultiParams">multiParams</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A view of `multiParams`.  Returns the head element for any known param,
   * and is undefined for any unknown param.  Invalid outside `handle`.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.Object with org.scalatra.util.MultiMapHeadView[String,String] with org.scalatra.util.MapWithIndifferentAccess[String]" id="11892">params</a> = <a href="#11890" title="=&gt; java.lang.Object with org.scalatra.util.MultiMapHeadView[String,String] with org.scalatra.util.MapWithIndifferentAccess[String]">_params</a>

  <span class="comment">/**
   * The currently scoped request.  Invalid outside `handle`.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; javax.servlet.http.HttpServletRequest" id="11893">request</a> = <a href="#11854" title="=&gt; scala.util.DynamicVariable[javax.servlet.http.HttpServletRequest]">_request</a> <span title="=&gt; javax.servlet.http.HttpServletRequest">value</span>

  <span class="comment">/**
   * The currently scoped response.  Invalid outside `handle`.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; javax.servlet.http.HttpServletResponse" id="11894">response</a> = <a href="#11852" title="=&gt; scala.util.DynamicVariable[javax.servlet.http.HttpServletResponse]">_response</a> <span title="=&gt; javax.servlet.http.HttpServletResponse">value</span>

  <span class="comment">/**
   * Immediately halts processing of a request.  Can be called from either a
   * before filter or a route.
   *
   * @param status the status to set on the response, or null to leave
   *        the status unchanged.
   * @param body a result to render through the render pipeline as the body
   * @param headers headers to add to the response
   * @param reason the HTTP status reason to set, or null to leave unchanged.
   */</span>
  <span class="keyword">def</span> <a title="[T](status: java.lang.Integer, body: T, headers: Map[String,String], reason: String)(implicit evidence$1: Manifest[T])Nothing" id="32208">halt</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="32361">T</a> : Manifest<span class="delimiter">]</span><span class="delimiter">(</span><a title="java.lang.Integer" id="32359">status</a>: <span title="java.lang.Integer">JInteger</span> = <span title="Null(null)" class="keyword">null</span>,
           <a title="T" id="32362">body</a>: <a href="#32361" title="T">T</a> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>,
           <a title="Map[String,String]" id="32365">headers</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>,
           <a title="String" id="32368">reason</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[Int]" id="65870">statusOpt</a> = <span title="Option[Int]" class="keyword">if</span> <span class="delimiter">(</span><a href="#32359" title="java.lang.Integer">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="object None">None</span> <span class="keyword">else</span> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#32359" title="java.lang.Integer">status</a>.<span title="()Int">intValue</span><span class="delimiter">)</span>
    <span title="Nothing" class="keyword">throw</span> <span title="ScalatraKernel.this.HaltException" class="keyword">new</span> <a href="#65936" title="ScalatraKernel.this.HaltException">HaltException</a><span class="delimiter">(</span><a href="#65870" title="Option[Int]">statusOpt</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#32368" title="String">reason</a><span class="delimiter">)</span>, <a href="#32365" title="Map[String,String]">headers</a>, <a href="#32362" title="T">body</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Implementation detail.  Do not rely on this.
   */</span>
  <span class="keyword">protected</span> case <span class="keyword">class</span> <a title="class HaltException extends java.lang.Throwable with scala.util.control.ControlThrowable with ScalaObject with Product with Serializable" id="65936">HaltException</a><a href="#65936" title="ScalaObject" class="delimiter">(</a>
      <a title="Option[Int]" id="66233">status</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
      <a title="Option[String]" id="66234">reason</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
      <a title="Map[String,String]" id="66235">headers</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>,
      <a title="Any" id="66236">body</a>: <span title="Any">Any</span><span class="delimiter">)</span>
   <span class="keyword">extends</span> <span title="scala.util.control.ControlThrowable">ControlThrowable</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(e: ScalatraKernel.this.HaltException)Unit" id="11901">renderHaltException</a><span class="delimiter">(</span><a title="ScalatraKernel.this.HaltException" id="60426">e</a>: <a href="#65936" title="ScalatraKernel.this.HaltException">HaltException</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#60426" title="ScalatraKernel.this.HaltException">e</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">HaltException</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Int" id="66007">status</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="String" id="66009">reason</a><span class="delimiter">)</span>, _, _<span class="delimiter">)</span> =&gt; <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: Int, x$2: java.lang.String)Unit">setStatus</span><span class="delimiter">(</span><a href="#66007" title="Int">status</a>, <a href="#66009" title="String">reason</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">HaltException</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Int" id="66013">status</a><span class="delimiter">)</span>, <span title="object None">None</span>, _, _<span class="delimiter">)</span> =&gt; <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: Int)Unit">setStatus</span><span class="delimiter">(</span><a href="#66013" title="Int">status</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">HaltException</span><span class="delimiter">(</span><span title="object None">None</span>, _, _, _<span class="delimiter">)</span> =&gt; <span class="comment">// leave status line alone</span>
    <span class="delimiter">}</span>
    <a href="#60426" title="ScalatraKernel.this.HaltException">e</a>.<a href="#66235" title="=&gt; Map[String,String]">headers</a> <span title="(f: (String, String) =&gt; Unit)Unit">foreach</span> <a href="#66041" title="Unit" class="delimiter">{</a> <span class="keyword">case</span><span title="Unit" class="delimiter">(</span><a title="String" id="66044">name</a>, <a title="String" id="66045">value</a><span class="delimiter">)</span> =&gt; <a href="#11894" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">addHeader</span><span class="delimiter">(</span><a href="#66044" title="String">name</a>, <a href="#66045" title="String">value</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="#11885" title="(actionResult: Any)Unit">renderResponse</a><span class="delimiter">(</span><a href="#60426" title="ScalatraKernel.this.HaltException">e</a>.<a href="#66236" title="=&gt; Any">body</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Immediately exits from the current route.
   */</span>
  <span class="keyword">def</span> <a title="()Nothing" id="11902">pass</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="Nothing" class="keyword">throw</span> <span title="ScalatraKernel.this.PassException" class="keyword">new</span> <a href="#11903" title="ScalatraKernel.this.PassException">PassException</a>

  <span class="comment">/**
   * Implementation detail.  Do not rely on this.
   */</span>
  <span class="keyword">protected</span><span class="delimiter">[</span>scalatra<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class PassException extends java.lang.Throwable with scala.util.control.ControlThrowable with ScalaObject" id="11903">PassException</a> <a href="#11903" title="ScalaObject" class="keyword">extends</a> <span title="scala.util.control.ControlThrowable">ControlThrowable</span>

  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(action: =&gt; Any)org.scalatra.Route" id="11904">get</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="66053">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="66054">action</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#9570" title="object org.scalatra.Get">Get</a>, <a href="#66053" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#66054" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(action: =&gt; Any)org.scalatra.Route" id="11905">post</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="66076">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="66077">action</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#10221" title="object org.scalatra.Post">Post</a>, <a href="#66076" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#66077" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(action: =&gt; Any)org.scalatra.Route" id="11906">put</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="66086">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="66087">action</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#10158" title="object org.scalatra.Put">Put</a>, <a href="#66086" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#66087" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(action: =&gt; Any)org.scalatra.Route" id="11907">delete</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="66096">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="66097">action</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#9690" title="object org.scalatra.Delete">Delete</a>, <a href="#66096" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#66097" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="comment">/**
   * @see [[org.scalatra.ScalatraKernel.get]]
   */</span>
  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(action: =&gt; Any)org.scalatra.Route" id="11908">options</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="66106">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="66107">action</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#9567" title="object org.scalatra.Options">Options</a>, <a href="#66106" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#66107" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="comment">/**
   * @see [[org.scalatra.ScalatraKernel.get]]
   */</span>
  <span class="keyword">def</span> <a title="(routeMatchers: org.scalatra.RouteMatcher*)(action: =&gt; Any)org.scalatra.Route" id="11909">patch</a><span class="delimiter">(</span><a title="org.scalatra.RouteMatcher*" id="66116">routeMatchers</a>: <span title="org.scalatra.RouteMatcher*">RouteMatcher</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Any" id="66117">action</a>: =&gt; Any<span class="delimiter">)</span> = <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#10206" title="object org.scalatra.Patch">Patch</a>, <a href="#66116" title="org.scalatra.RouteMatcher*">routeMatchers</a>, <a href="#66117" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Prepends a new route for the given HTTP method.
   *
   * Can be overriden so that subtraits can use their own logic.
   * Possible examples:
   * $ - restricting protocols
   * $ - namespace routes based on class name
   * $ - raising errors on overlapping entries.
   *
   * This is the method invoked by get(), post() etc.
   *
   * @see org.scalatra.ScalatraKernel#removeRoute
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route" id="11910">addRoute</a><span class="delimiter">(</span><a title="org.scalatra.HttpMethod" id="66070">method</a>: <a href="HttpMethod.scala.html#10001" title="org.scalatra.HttpMethod">HttpMethod</a>, <a title="Iterable[org.scalatra.RouteMatcher]" id="66071">routeMatchers</a>: <span title="Iterable[org.scalatra.RouteMatcher]">Iterable</span><span class="delimiter">[</span>RouteMatcher<span class="delimiter">]</span>, <a title="=&gt; Any" id="66072">action</a>: =&gt; Any<span class="delimiter">)</span>: <a href="route.scala.html#9863" title="org.scalatra.Route">Route</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.scalatra.Route" id="66126">route</a> = <a href="route.scala.html#48878" title="(routeMatchers: Iterable[org.scalatra.RouteMatcher], action: () =&gt; Any, contextPath: () =&gt; String)org.scalatra.Route">Route</a><span class="delimiter">(</span><a href="#66071" title="Iterable[org.scalatra.RouteMatcher]">routeMatchers</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#66072" title="=&gt; Any">action</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#11911" title="=&gt; String">routeBasePath</a><span class="delimiter">)</span>
    <a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55123" title="(method: org.scalatra.HttpMethod, route: org.scalatra.Route)Unit">prependRoute</a><span class="delimiter">(</span><a href="#66070" title="org.scalatra.HttpMethod">method</a>, <a href="#66126" title="org.scalatra.Route">route</a><span class="delimiter">)</span>
    <a href="#66126" title="org.scalatra.Route">route</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The base path for URL generation
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="11911">routeBasePath</a>: <span title="String">String</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use addRoute(HttpMethod, Iterable[RouteMatcher], =&gt;Any)&quot;</span><span class="delimiter">)</span>
  <span class="keyword">protected</span><span class="delimiter">[</span>scalatra<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(verb: String, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route" id="11912">addRoute</a><span class="delimiter">(</span><a title="String" id="66061">verb</a>: <span title="String">String</span>, <a title="Iterable[org.scalatra.RouteMatcher]" id="66062">routeMatchers</a>: <span title="Iterable[org.scalatra.RouteMatcher]">Iterable</span><span class="delimiter">[</span>RouteMatcher<span class="delimiter">]</span>, <a title="=&gt; Any" id="66063">action</a>: =&gt; Any<span class="delimiter">)</span>: <a href="route.scala.html#9863" title="org.scalatra.Route">Route</a> =
    <a href="#11910" title="(method: org.scalatra.HttpMethod, routeMatchers: Iterable[org.scalatra.RouteMatcher], action: =&gt; Any)org.scalatra.Route">addRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#55696" title="(name: String)org.scalatra.HttpMethod">HttpMethod</a><span class="delimiter">(</span><a href="#66061" title="String">verb</a><span class="delimiter">)</span>, <a href="#66062" title="Iterable[org.scalatra.RouteMatcher]">routeMatchers</a>, <a href="#66063" title="=&gt; Any">action</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Removes _all_ the actions of a given route for a given HTTP method.
   * If addRoute is overridden then this should probably be overriden too.
   *
   * @see org.scalatra.ScalatraKernel#addRoute
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(method: org.scalatra.HttpMethod, route: org.scalatra.Route)Unit" id="11913">removeRoute</a><span class="delimiter">(</span><a title="org.scalatra.HttpMethod" id="66135">method</a>: <a href="HttpMethod.scala.html#10001" title="org.scalatra.HttpMethod">HttpMethod</a>, <a title="org.scalatra.Route" id="66136">route</a>: <a href="route.scala.html#9863" title="org.scalatra.Route">Route</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#11848" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="RouteRegistry.scala.html#55124" title="(method: org.scalatra.HttpMethod, route: org.scalatra.Route)Unit">removeRoute</a><span class="delimiter">(</span><a href="#66135" title="org.scalatra.HttpMethod">method</a>, <a href="#66136" title="org.scalatra.Route">route</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(method: String, route: org.scalatra.Route)Unit" id="11914">removeRoute</a><span class="delimiter">(</span><a title="String" id="66138">method</a>: <span title="String">String</span>, <a title="org.scalatra.Route" id="66139">route</a>: <a href="route.scala.html#9863" title="org.scalatra.Route">Route</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#11913" title="(method: org.scalatra.HttpMethod, route: org.scalatra.Route)Unit">removeRoute</a><span class="delimiter">(</span><a href="HttpMethod.scala.html#55696" title="(name: String)org.scalatra.HttpMethod">HttpMethod</a><span class="delimiter">(</span><a href="#66138" title="String">method</a><span class="delimiter">)</span>, <a href="#66139" title="org.scalatra.Route">route</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The configuration, typically a ServletConfig or FilterConfig.
   */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="ScalatraKernel.this.Config" id="11916">config</a>: <a href="Initializable.scala.html#11958" title="ScalatraKernel.this.Config">Config</a> = _

  <span class="comment">/**
   * Initializes the kernel.  Used to provide context that is unavailable
   * when the instance is constructed, for example the servlet lifecycle.
   * Should set the `config` variable to the parameter.
   *
   * @param config the configuration.
   */</span>
  <span class="keyword">def</span> <a title="(config: ScalatraKernel.this.Config)Unit" id="11918">initialize</a><span class="delimiter">(</span><a title="ScalatraKernel.this.Config" id="45827">config</a>: <a href="Initializable.scala.html#11958" title="ScalatraKernel.this.Config">Config</a><span class="delimiter">)</span> = <a href="#10016" title="ScalatraKernel.this.type" class="keyword">this</a>.<a href="#11916" title="(x$1: ScalatraKernel.this.Config)Unit">config</a> = <a href="#45827" title="ScalatraKernel.this.Config">config</a>

  <span class="comment">/**
   * Gets an init paramter from the config if it is a ServletConfig or a
   * FilterConfig.
   *
   * @param name the name of the key
   *
   * @return an option containing the value of the parameter if defined, or
   * `None` if the parameter is not set or the config type has no concept of
   * init parameters.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)Option[String]" id="11919">initParameter</a><span class="delimiter">(</span><a title="String" id="66147">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#11916" title="=&gt; ScalatraKernel.this.Config">config</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Option[java.lang.String]" id="66149">config</a>: <span title="javax.servlet.ServletConfig">ServletConfig</span> =&gt; <span title="(x: java.lang.String)Option[java.lang.String]">Option</span><span class="delimiter">(</span><a href="#66149" title="javax.servlet.ServletConfig">config</a>.<span title="(x$1: java.lang.String)java.lang.String">getInitParameter</span><span class="delimiter">(</span><a href="#66147" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Option[java.lang.String]" id="66153">config</a>: <span title="javax.servlet.FilterConfig">FilterConfig</span> =&gt; <span title="(x: java.lang.String)Option[java.lang.String]">Option</span><span class="delimiter">(</span><a href="#66153" title="javax.servlet.FilterConfig">config</a>.<span title="(x$1: java.lang.String)java.lang.String">getInitParameter</span><span class="delimiter">(</span><a href="#66147" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The servlet context in which this kernel runs.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; javax.servlet.ServletContext" id="11920">servletContext</a>: <span title="javax.servlet.ServletContext">ServletContext</span>

  <span class="comment">/**
   * A free form string representing the environment.
   * `org.scalatra.Environment` is looked up as a system property, and if
   * absent, and init parameter.  The default value is `development`.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="11921">environment</a>: <span title="String">String</span> = <span title="object java.lang.System">System</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">getProperty</span><span class="delimiter">(</span><a href="#14558" title="=&gt; java.lang.String">EnvironmentKey</a>, <a href="#11919" title="(name: String)Option[String]">initParameter</a><span class="delimiter">(</span><a href="#14558" title="=&gt; java.lang.String">EnvironmentKey</a><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;development&quot;)" class="string">&quot;development&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * A boolean flag representing whether the kernel is in development mode.
   * The default is true if the `environment` begins with &quot;dev&quot;, case
   * insensitve.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="11922">isDevelopmentMode</a> = <a href="#11921" title="=&gt; String">environment</a>.<span title="()java.lang.String">toLowerCase</span>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;dev&quot;)" class="string">&quot;dev&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>