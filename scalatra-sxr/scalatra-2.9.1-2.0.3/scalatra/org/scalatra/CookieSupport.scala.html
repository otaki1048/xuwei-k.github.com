<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalatra/org/scalatra/CookieSupport.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalatra

<span class="keyword">import</span> collection._
<span class="keyword">import</span> java.util.Locale
<span class="keyword">import</span> javax.servlet.http.<span class="delimiter">{</span>HttpServletRequest, HttpServletResponse, Cookie =&gt; ServletCookie<span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.DynamicVariable
<span class="keyword">import</span> util.<a href="util/RicherString.scala.html#11062" title="object org.scalatra.util.RicherString">RicherString</a>._

case <span class="keyword">class</span> <a title="class CookieOptions extends java.lang.Object with ScalaObject with Product with Serializable" id="54190">CookieOptions</a><a href="#54190" title="ScalaObject" class="delimiter">(</a>
        <a title="String" id="29201">domain</a>  : <span title="String">String</span>  = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,
        <a title="String" id="29202">path</a>    : <span title="String">String</span>  = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,
        <a title="Int" id="29203">maxAge</a>  : <span title="Int">Int</span>     = -<span title="Int(-1)" class="int">1</span>,
        <a title="Boolean" id="29204">secure</a>  : <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>,
        <a title="String" id="29205">comment</a> : <span title="String">String</span>  = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,
        <a title="Boolean" id="29206">httpOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>,
        <a title="String" id="29207">encoding</a>: <span title="String">String</span>  = <span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span><span class="delimiter">)</span>

case <span class="keyword">class</span> <a title="class Cookie extends java.lang.Object with ScalaObject with Product with Serializable" id="54172">Cookie</a><a href="#54172" title="ScalaObject" class="delimiter">(</a><a title="String" id="29162">name</a>: <span title="String">String</span>, <a title="String" id="29163">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.scalatra.CookieOptions" id="29164">cookieOptions</a>: <a href="#54190" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="#54190" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; javax.servlet.http.Cookie" id="29158">toServletCookie</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="javax.servlet.http.Cookie" id="53907">sCookie</a> = <span title="javax.servlet.http.Cookie" class="keyword">new</span> <span title="javax.servlet.http.Cookie">ServletCookie</span><span class="delimiter">(</span><a href="#29162" title="=&gt; String">name</a>, <a href="#29163" title="=&gt; String">value</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">domain</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#53907" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: java.lang.String)Unit">setDomain</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29201" title="=&gt; String">domain</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">path</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#53907" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: java.lang.String)Unit">setPath</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29202" title="=&gt; String">path</a><span class="delimiter">)</span>
    <a href="#53907" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: Int)Unit">setMaxAge</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29203" title="=&gt; Int">maxAge</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29204" title="=&gt; Boolean">secure</a><span class="delimiter">)</span> <a href="#53907" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: Boolean)Unit">setSecure</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29204" title="=&gt; Boolean">secure</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">comment</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#53907" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: java.lang.String)Unit">setComment</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29205" title="=&gt; String">comment</a><span class="delimiter">)</span>
    <a href="#53907" title="javax.servlet.http.Cookie">sCookie</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="29159">toCookieString</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.StringBuffer" id="29250">sb</a> = <span title="java.lang.StringBuffer" class="keyword">new</span> <span title="java.lang.StringBuffer">StringBuffer</span>
    <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <a href="#29162" title="=&gt; String">name</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span title="java.lang.String(&quot;=&quot;)" class="string">&quot;=&quot;</span>
    <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <a href="#29163" title="=&gt; String">value</a>

    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">domain</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#29250" title="java.lang.StringBuffer">sb</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><span title="java.lang.String(&quot;; Domain=&quot;)" class="string">&quot;; Domain=&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span>
      <span class="delimiter">(</span><span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29201" title="=&gt; String">domain</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29201" title="=&gt; String">domain</a> <span class="keyword">else</span> <a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29201" title="=&gt; String">domain</a><span class="delimiter">)</span>.<span title="(x$1: java.util.Locale)java.lang.String">toLowerCase</span><span class="delimiter">(</span><span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="String" id="29251">pth</a> = <a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29202" title="=&gt; String">path</a>
    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">pth</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span title="java.lang.String(&quot;; Path=&quot;)" class="string">&quot;; Path=&quot;</span> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span class="delimiter">(</span><span title="java.lang.String" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#29251" title="String">pth</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#29251" title="String">pth</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span> <a href="#29251" title="String">pth</a> <span class="delimiter">}</span><span class="delimiter">)</span>

    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">comment</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;; Comment=&quot;)" class="string">&quot;; Comment=&quot;</span><span class="delimiter">)</span> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29205" title="=&gt; String">comment</a>

    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29203" title="=&gt; Int">maxAge</a> <span title="(x: Int)Boolean">&gt;</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span title="java.lang.String(&quot;; Max-Age=&quot;)" class="string">&quot;; Max-Age=&quot;</span> <span title="(x$1: Int)java.lang.StringBuffer">append</span> <a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29203" title="=&gt; Int">maxAge</a>

    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29204" title="=&gt; Boolean">secure</a><span class="delimiter">)</span> <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span title="java.lang.String(&quot;; Secure&quot;)" class="string">&quot;; Secure&quot;</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#29164" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29206" title="=&gt; Boolean">httpOnly</a><span class="delimiter">)</span> <a href="#29250" title="java.lang.StringBuffer">sb</a> <span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span> <span title="java.lang.String(&quot;; HttpOnly&quot;)" class="string">&quot;; HttpOnly&quot;</span>
    <a href="#29250" title="java.lang.StringBuffer">sb</a>.<span title="()java.lang.String">toString</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class SweetCookies extends java.lang.Object with ScalaObject" id="9527">SweetCookies</a><a href="#9527" title="ScalaObject" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.Map[String,String]" id="53979">reqCookies</a>: <span title="scala.collection.Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>, <span class="keyword">private</span> <span class="keyword">val</span> <a title="javax.servlet.http.HttpServletResponse" id="53980">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,String]" id="29134">cookies</a> = mutable.<span title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</span><span title="(elems: (String, String)*)scala.collection.mutable.HashMap[String,String]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, String)])scala.collection.mutable.Map[String,String]">++</span> <a href="#53979" title="=&gt; scala.collection.Map[String,String]">reqCookies</a>

  <span class="keyword">def</span> <a title="(key: String)Option[String]" id="29135">get</a><span class="delimiter">(</span><a title="String" id="29825">key</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#29133" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#29825" title="String">key</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(key: String)String" id="29136">apply</a><span class="delimiter">(</span><a title="String" id="53981">key</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#29133" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#53981" title="String">key</a><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;No cookie could be found for the specified key&quot;)" class="string">&quot;No cookie could be found for the specified key&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)javax.servlet.http.Cookie" id="29137">update</a><span class="delimiter">(</span><a title="String" id="54016">name</a>: <span title="String">String</span>, <a title="String" id="54017">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.scalatra.CookieOptions" id="29962">cookieOptions</a>: <a href="#54190" title="org.scalatra.CookieOptions">CookieOptions</a>=<a href="#54190" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="javax.servlet.http.Cookie" id="29963">sCookie</a> = <span title="javax.servlet.http.Cookie" class="keyword">new</span> <span title="javax.servlet.http.Cookie">ServletCookie</span><span class="delimiter">(</span><a href="#54016" title="String">name</a>, <a href="#54017" title="String">value</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">domain</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#29963" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: java.lang.String)Unit">setDomain</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29201" title="=&gt; String">domain</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">path</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#29963" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: java.lang.String)Unit">setPath</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29202" title="=&gt; String">path</a><span class="delimiter">)</span>
    <a href="#29963" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: Int)Unit">setMaxAge</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29203" title="=&gt; Int">maxAge</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29204" title="=&gt; Boolean">secure</a><span class="delimiter">)</span> <a href="#29963" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: Boolean)Unit">setSecure</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29204" title="=&gt; Boolean">secure</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#24699" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">comment</a>.<a href="util/RicherString.scala.html#25295" title="=&gt; Boolean">isNonBlank</a><span class="delimiter">)</span> <a href="#29963" title="javax.servlet.http.Cookie">sCookie</a>.<span title="(x$1: java.lang.String)Unit">setComment</span><span class="delimiter">(</span><a href="#29962" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#29205" title="=&gt; String">comment</a><span class="delimiter">)</span>
    <a href="#29133" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a> <span title="(kv: (String, String))SweetCookies.this.cookies.type">+=</span> <a href="#54016" title="(x: String)ArrowAssoc[String]">name</a> <span title="(y: String)(String, String)">-&gt;</span> <a href="#54017" title="String">value</a>
    <span class="comment">//response.addHeader(&quot;Set-Cookie&quot;, cookie.toCookieString)</span>
    <a href="#53980" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: javax.servlet.http.Cookie)Unit">addCookie</span><span class="delimiter">(</span><a href="#29963" title="javax.servlet.http.Cookie">sCookie</a><span class="delimiter">)</span>
    <a href="#29963" title="javax.servlet.http.Cookie">sCookie</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)javax.servlet.http.Cookie" id="29138">set</a><span class="delimiter">(</span><a title="String" id="54019">name</a>: <span title="String">String</span>, <a title="String" id="54020">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.scalatra.CookieOptions" id="29956">cookieOptions</a>: <a href="#54190" title="org.scalatra.CookieOptions">CookieOptions</a>=<a href="#54190" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#9527" title="SweetCookies.this.type" class="keyword">this</a>.<a href="#29137" title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)javax.servlet.http.Cookie">update</a><span class="delimiter">(</span><a href="#54019" title="String">name</a>, <a href="#54020" title="String">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#29956" title="org.scalatra.CookieOptions">cookieOptions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)Unit" id="29139">delete</a><span class="delimiter">(</span><a title="String" id="53993">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#29133" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a> <span title="(key: String)SweetCookies.this.cookies.type">-=</span> <a href="#53993" title="String">name</a>
    <a href="#53980" title="=&gt; javax.servlet.http.HttpServletResponse">response</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">addHeader</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Set-Cookie&quot;)" class="string">&quot;Set-Cookie&quot;</span>, <a href="#54172" title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie">Cookie</a><span class="delimiter">(</span><a href="#53993" title="String">name</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#29201" title="String" id="54008">CookieOptions</a><span class="delimiter">(</span>maxAge = <a title="Int(0)" id="54002" class="int">0</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#29159" title="=&gt; java.lang.String">toCookieString</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(keyValuePair: (String, String))(implicit cookieOptions: org.scalatra.CookieOptions)javax.servlet.http.Cookie" id="29140">+=</a><span class="delimiter">(</span><a title="(String, String)" id="54014">keyValuePair</a>: <span title="(String, String)" class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.scalatra.CookieOptions" id="54013">cookieOptions</a>: <a href="#54190" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="#54190" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#9527" title="SweetCookies.this.type" class="keyword">this</a>.<a href="#29137" title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)javax.servlet.http.Cookie">update</a><span class="delimiter">(</span><a href="#54014" title="(String, String)">keyValuePair</a>.<span title="=&gt; String">_1</span>, <a href="#54014" title="(String, String)">keyValuePair</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#54013" title="org.scalatra.CookieOptions">cookieOptions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(key: String)Unit" id="29141">-=</a><span class="delimiter">(</span><a title="String" id="30032">key</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#29139" title="(name: String)Unit">delete</a><span class="delimiter">(</span><a href="#30032" title="String">key</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.scalatra.CookieSupport" id="10116">CookieSupport</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="28805">SweetCookiesKey</a> = <span title="java.lang.String(&quot;org.scalatra.SweetCookies&quot;)" class="string">&quot;org.scalatra.SweetCookies&quot;</span>.<span title="()java.lang.String">intern</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="28807">CookieOptionsKey</a> = <span title="java.lang.String(&quot;org.scalatra.CookieOptions&quot;)" class="string">&quot;org.scalatra.CookieOptions&quot;</span>.<span title="()java.lang.String">intern</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait CookieSupport extends java.lang.Object with org.scalatra.Handler with ScalaObject" id="10115">CookieSupport</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Handler.scala.html#10055" title="org.scalatra.Handler">Handler</a> <span class="delimiter">{</span>
  self: ScalatraKernel =&gt;

  <span class="keyword">import</span> <a href="#10116" title="object org.scalatra.CookieSupport">CookieSupport</a>._
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; org.scalatra.CookieOptions" id="28751">cookieOptions</a>: <a href="#54190" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="ServletApiImplicits.scala.html#11961" title="(key: String)AnyRef">request</a><span class="delimiter">(</span><a href="#28807" title="=&gt; java.lang.String">CookieOptionsKey</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.CookieOptions" class="delimiter">[</span><a href="#54190" title="org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; org.scalatra.SweetCookies" id="28752">cookies</a> = <a href="ServletApiImplicits.scala.html#11961" title="(key: String)AnyRef">request</a><span class="delimiter">(</span><a href="#28805" title="=&gt; java.lang.String">SweetCookiesKey</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.SweetCookies" class="delimiter">[</span><a href="#9527" title="org.scalatra.SweetCookies">SweetCookies</a><span class="delimiter">]</span>

  <span class="keyword">abstract</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(req: javax.servlet.http.HttpServletRequest, res: javax.servlet.http.HttpServletResponse)Unit" id="28753">handle</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="31105">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="31106">res</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="ServletApiImplicits.scala.html#11961" title="(key: String, value: AnyRef)Unit">req</a><span class="delimiter">(</span><a href="#28805" title="=&gt; java.lang.String">SweetCookiesKey</a><span class="delimiter">)</span> = <span title="org.scalatra.SweetCookies" class="keyword">new</span> <a href="#9527" title="org.scalatra.SweetCookies">SweetCookies</a><span class="delimiter">(</span><a href="ServletApiImplicits.scala.html#11961" title="implicit org.scalatra.ServletApiImplicits.requestWrapper : (r: javax.servlet.http.HttpServletRequest)org.scalatra.RichRequest">req</a>.<a href="RichRequest.scala.html#27722" title="=&gt; scala.collection.Map[String,String]">cookies</a>, <a href="#31106" title="javax.servlet.http.HttpServletResponse">res</a><span class="delimiter">)</span>
    <a href="ServletApiImplicits.scala.html#11961" title="(key: String, value: AnyRef)Unit">req</a><span class="delimiter">(</span><a href="#28807" title="=&gt; java.lang.String">CookieOptionsKey</a><span class="delimiter">)</span> = <a href="#29201" title="String" id="54161">CookieOptions</a><span class="delimiter">(</span>path = <a href="#31105" title="javax.servlet.http.HttpServletRequest">req</a>.<a title="java.lang.String" id="54155">getContextPath</a><span class="delimiter">)</span>
    <a href="#10115" title="&lt;none&gt; extends org.scalatra.CookieSupport with org.scalatra.ScalatraKernel" class="keyword">super</a>.<a href="Handler.scala.html#11846" title="(req: javax.servlet.http.HttpServletRequest, res: javax.servlet.http.HttpServletResponse)Unit">handle</a><span class="delimiter">(</span><a href="#31105" title="javax.servlet.http.HttpServletRequest">req</a>, <a href="#31106" title="javax.servlet.http.HttpServletResponse">res</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>