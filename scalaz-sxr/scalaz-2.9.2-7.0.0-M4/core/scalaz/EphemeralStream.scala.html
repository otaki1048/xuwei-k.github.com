<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>core/scalaz/EphemeralStream.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scalaz

<span class="keyword">import</span> java.lang.ref.WeakReference

<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait EphemeralStream[A] extends java.lang.Object with ScalaObject" id="10292">EphemeralStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="24945">A</a><span class="delimiter">]</span> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#10293" title="object scalaz.EphemeralStream">EphemeralStream</a>._

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="163220">isEmpty</a>: <span title="Boolean">Boolean</span>

  <span class="keyword">def</span> <a title="=&gt; () =&gt; A" id="163221">head</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; A

  <span class="keyword">def</span> <a title="=&gt; () =&gt; scalaz.EphemeralStream[A]" id="163222">tail</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; List[A]" id="163223">toList</a>: <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(xs: =&gt; List[A])(x: =&gt; A)List[A]" id="164491">lcons</a><span class="delimiter">(</span><a title="=&gt; List[A]" id="164492">xs</a>: =&gt; List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="164493">x</a>: =&gt; A<span class="delimiter">)</span> = <a href="#164493" title="=&gt; A">x</a> <a href="#164494" title="(x: A)List[A]">::</a> <a href="#164492" title="=&gt; List[A]">xs</a>
    <a href="#163227" title="(z: =&gt; List[A])(f: =&gt; List[A] =&gt; (=&gt; A =&gt; List[A]))List[A]">foldLeft</a><span class="delimiter">(</span><span title="object Nil">Nil</span>: <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#164491" title="(xs: =&gt; List[A])(x: =&gt; A)List[A]">lcons</a> _<span class="delimiter">)</span>.<span title="=&gt; List[A]">reverse</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[B](z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B" id="163224">foldRight</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163226">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; B" id="164532">z</a>: =&gt; B<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A =&gt; (=&gt; B =&gt; B)" id="164533">f</a>: <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>=&gt; B<span class="delimiter">)</span> =&gt; B<span class="delimiter">)</span>: <a href="#163226" title="B">B</a> =
    <span title="B" class="keyword">if</span> <span class="delimiter">(</span><a href="#163220" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#164532" title="=&gt; B">z</a> <span class="keyword">else</span> <a href="#164533" title="(v1: =&gt; A)=&gt; B =&gt; B">f</a><span title="(v1: =&gt; B)B" class="delimiter">(</span><a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="#163224" title="(z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B">foldRight</a><span class="delimiter">(</span><a href="#164532" title="=&gt; B">z</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#164533" title="=&gt; A =&gt; (=&gt; B =&gt; B)">f</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](z: =&gt; B)(f: =&gt; B =&gt; (=&gt; A =&gt; B))B" id="163227">foldLeft</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163229">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; B" id="164500">z</a>: =&gt; B<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; B =&gt; (=&gt; A =&gt; B)" id="164501">f</a>: <span class="delimiter">(</span>=&gt; B<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; B<span class="delimiter">)</span>: <a href="#163229" title="B">B</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="164546">t</a> = <a href="#10292" title="scalaz.EphemeralStream[A]" class="keyword">this</a>
    <span class="keyword">var</span> <a title="B" id="164547">acc</a> = <a href="#164500" title="=&gt; B">z</a>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#164546" title="scalaz.EphemeralStream[A]">t</a>.<a href="#163220" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#164548" title="()Unit" class="delimiter">{</a>
      <a href="#164547" title="B">acc</a> = <a href="#164501" title="(v1: =&gt; B)=&gt; A =&gt; B">f</a><span title="(v1: =&gt; A)B" class="delimiter">(</span><a href="#164547" title="B">acc</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#164546" title="scalaz.EphemeralStream[A]">t</a>.<a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#164546" title="scalaz.EphemeralStream[A]">t</a> = <a href="#164546" title="scalaz.EphemeralStream[A]">t</a>.<a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#164547" title="B">acc</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]" id="163230">filter</a><span class="delimiter">(</span><a title="A =&gt; Boolean" id="164551">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scalaz.EphemeralStream[A]" id="164553">rest</a> = <a href="#10292" title="EphemeralStream.this.type" class="keyword">this</a> <a href="#163231" title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]">dropWhile</a> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#164551" title="(v1: A)Boolean">p</a><span class="delimiter">(</span><a href="#164557" title="A">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="scalaz.EphemeralStream[A]" class="keyword">if</span> <span class="delimiter">(</span><a href="#164553" title="scalaz.EphemeralStream[A]">rest</a>.<a href="#163220" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#163255" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>
    <span class="keyword">else</span> <a href="#163258" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#164553" title="scalaz.EphemeralStream[A]">rest</a>.<a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#164553" title="scalaz.EphemeralStream[A]">rest</a>.<a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#163230" title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]">filter</a> <a href="#164551" title="A =&gt; Boolean">p</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]" id="163231">dropWhile</a><span class="delimiter">(</span><a title="A =&gt; Boolean" id="164554">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="164569">these</a>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#10292" title="scalaz.EphemeralStream[A]" class="keyword">this</a>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#164569" title="scalaz.EphemeralStream[A]">these</a>.<a href="#163220" title="=&gt; Boolean">isEmpty</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#164554" title="(v1: A)Boolean">p</a><span class="delimiter">(</span><a href="#164569" title="scalaz.EphemeralStream[A]">these</a>.<a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#164569" title="scalaz.EphemeralStream[A]">these</a> = <a href="#164569" title="scalaz.EphemeralStream[A]">these</a>.<a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#164569" title="scalaz.EphemeralStream[A]">these</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(e: =&gt; scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]" id="163232">++</a><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[A]" id="164572">e</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#163224" title="[B](z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B">foldRight</a><span title="(z: =&gt; scalaz.EphemeralStream[A])(f: =&gt; A =&gt; (=&gt; scalaz.EphemeralStream[A] =&gt; scalaz.EphemeralStream[A]))scalaz.EphemeralStream[A]" class="delimiter">[</span><a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#164572" title="=&gt; scalaz.EphemeralStream[A]">e</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#163258" title="[A](a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]" class="delimiter">[</span><a href="#24945" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#164580" title="=&gt; A">_</a>, <a href="#164581" title="=&gt; scalaz.EphemeralStream[A]">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; =&gt; A =&gt; (=&gt; scalaz.EphemeralStream[A] =&gt; java.lang.Object with scalaz.EphemeralStream[A])">curried</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]" id="163233">flatMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163235">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; scalaz.EphemeralStream[B]" id="164585">f</a>: A =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">[</span>B<span class="delimiter">]</span> =
    <a href="#163224" title="[B](z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B">foldRight</a><span title="(z: =&gt; scalaz.EphemeralStream[B])(f: =&gt; A =&gt; (=&gt; scalaz.EphemeralStream[B] =&gt; scalaz.EphemeralStream[B]))scalaz.EphemeralStream[B]" class="delimiter">[</span><a href="#10292" title="scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#163255" title="scalaz.EphemeralStream[B]">emptyEphemeralStream</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="164592">h</a> =&gt; <a title="=&gt; scalaz.EphemeralStream[B]" id="164594">t</a> =&gt; <a href="#164585" title="(v1: A)scalaz.EphemeralStream[B]">f</a><span class="delimiter">(</span><a href="#164592" title="=&gt; A">h</a><span class="delimiter">)</span> <a href="#163232" title="(e: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]">++</a> <a href="#164594" title="=&gt; scalaz.EphemeralStream[B]">t</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](f: A =&gt; B)scalaz.EphemeralStream[B]" id="163236">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163238">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; B" id="164597">f</a>: A =&gt; B<span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">[</span>B<span class="delimiter">]</span> =
    <a href="#163233" title="(f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]">flatMap</a><span class="delimiter">(</span><a title="A" id="164603">x</a> =&gt; <a href="#163283" title="(as: B*)scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">(</span><a href="#164597" title="(v1: A)B">f</a><span class="delimiter">(</span><a href="#164603" title="A">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Int" id="163239">length</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(c: =&gt; Int)(a: =&gt; A)Int" id="164625">addOne</a><span class="delimiter">(</span><a title="=&gt; Int" id="164626">c</a>: =&gt; Int<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="164627">a</a>: =&gt; A<span class="delimiter">)</span> = <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#164626" title="=&gt; Int">c</a>
    <a href="#163227" title="(z: =&gt; Int)(f: =&gt; Int =&gt; (=&gt; A =&gt; Int))Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#164625" title="(c: =&gt; Int)(a: =&gt; A)Int">addOne</a> _<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[M[_]](p: A =&gt; M[Boolean])(implicit evidence$1: scalaz.Monad[M])M[Option[A]]" id="164644">findM</a><span class="delimiter">[</span><a title="[_]&gt;: Nothing &lt;: Any" id="163242">M</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164645">_</a><span class="delimiter">]</span>: Monad<span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; M[Boolean]" id="164643">p</a>: A =&gt; M<span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#163242" title="M[Option[A]]">M</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
    <span title="M[Option[A]]" class="keyword">if</span><span class="delimiter">(</span><a href="#163220" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="Monad.scala.html#164650" title="[F[_]](implicit F: scalaz.Monad[F])scalaz.Monad[F]">Monad</a><a href="#164644" title="(implicit F: scalaz.Monad[M])scalaz.Monad[M]" class="delimiter">[</a><a href="#163242" title="M">M</a><span class="delimiter">]</span>.<a href="Pointed.scala.html#43393" title="(a: =&gt; Option[A])M[Option[A]]">point</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="A" id="164668">hh</a> = <a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="Monad.scala.html#164650" title="[F[_]](implicit F: scalaz.Monad[F])scalaz.Monad[F]">Monad</a><a href="#164644" title="(implicit F: scalaz.Monad[M])scalaz.Monad[M]" class="delimiter">[</a><a href="#163242" title="M">M</a><span class="delimiter">]</span>.<a href="Bind.scala.html#43409" title="(fa: M[Boolean])(f: Boolean =&gt; M[Option[A]])M[Option[A]]">bind</a><span class="delimiter">(</span><a href="#164643" title="(v1: A)M[Boolean]">p</a><span class="delimiter">(</span><a href="#164668" title="A">hh</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="M[Option[A]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#164684" title="Boolean">_</a><span class="delimiter">)</span> <a href="Monad.scala.html#164650" title="[F[_]](implicit F: scalaz.Monad[F])scalaz.Monad[F]">Monad</a><a href="#164644" title="(implicit F: scalaz.Monad[M])scalaz.Monad[M]" class="delimiter">[</a><a href="#163242" title="M">M</a><span class="delimiter">]</span>.<a href="Pointed.scala.html#43393" title="(a: =&gt; Option[A])M[Option[A]]">point</a><span class="delimiter">(</span><span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#164668" title="A">hh</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#164644" title="(p: A =&gt; M[Boolean])(implicit evidence$1: scalaz.Monad[M])M[Option[A]]">findM</a> <a href="#164643" title="A =&gt; M[Boolean]">p</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scalaz.EphemeralStream[A]" id="163243">reverse</a>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#163227" title="(z: =&gt; scalaz.EphemeralStream[A])(f: =&gt; scalaz.EphemeralStream[A] =&gt; (=&gt; A =&gt; scalaz.EphemeralStream[A]))scalaz.EphemeralStream[A]">foldLeft</a><span class="delimiter">(</span><a href="#10293" title="object scalaz.EphemeralStream">EphemeralStream</a>.<a href="#163255" title="[A]=&gt; scalaz.EphemeralStream[A]">emptyEphemeralStream</a><span title="scalaz.EphemeralStream[A]" class="delimiter">[</span><a href="#24945" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[A]" id="164716">a</a> =&gt; <a title="=&gt; A" id="164718">b</a> =&gt; <a href="#10293" title="object scalaz.EphemeralStream">EphemeralStream</a>.<a href="#163258" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#164718" title="=&gt; A">b</a>, <a href="#164716" title="=&gt; scalaz.EphemeralStream[A]">a</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]" id="163244">zip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163246">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[B]" id="164728">b</a>: =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[(A, B)]">EphemeralStream</a><span class="delimiter">[</span><span class="delimiter">(</span>A, B<span class="delimiter">)</span><span class="delimiter">]</span> =
    <span title="scalaz.EphemeralStream[(A, B)]" class="keyword">if</span><span class="delimiter">(</span><a href="#163220" title="=&gt; Boolean">isEmpty</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#164728" title="=&gt; scalaz.EphemeralStream[B]">b</a>.<a href="#163220" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#163255" title="scalaz.EphemeralStream[(A, B)]">emptyEphemeralStream</a>
    <span class="keyword">else</span>
      <a href="#163258" title="(a: =&gt; (A, B), as: =&gt; scalaz.EphemeralStream[(A, B)])java.lang.Object with scalaz.EphemeralStream[(A, B)]">cons</a><span class="delimiter">(</span><span title="(_1: A, _2: B)(A, B)" class="delimiter">(</span><a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#164728" title="=&gt; scalaz.EphemeralStream[B]">b</a>.<a href="#163221" title="()B">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#163244" title="(b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]">zip</a> <a href="#164728" title="=&gt; scalaz.EphemeralStream[B]">b</a>.<a href="#163222" title="()scalaz.EphemeralStream[B]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[X, Y](implicit ev: =:=[A,(X, Y)])(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" id="163247">unzip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163250">X</a>, <a title="&gt;: Nothing &lt;: Any" id="163251">Y</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="=:=[A,(X, Y)]" id="164750">ev</a>: A <span title="=:=[A,(X, Y)]">=:=</span> <span class="delimiter">(</span>X, Y<span class="delimiter">)</span><span class="delimiter">)</span>: <span title="(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" class="delimiter">(</span>EphemeralStream<span class="delimiter">[</span>X<span class="delimiter">]</span>, EphemeralStream<span class="delimiter">[</span>Y<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#163224" title="(z: =&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y]))(f: =&gt; A =&gt; (=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y]) =&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])))(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])">foldRight</a><span class="delimiter">(</span><span title="(_1: scalaz.EphemeralStream[X], _2: scalaz.EphemeralStream[Y])(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" class="delimiter">(</span><a href="#163255" title="[A]=&gt; scalaz.EphemeralStream[A]">emptyEphemeralStream</a><span title="scalaz.EphemeralStream[X]" class="delimiter">[</span><a href="#163250" title="X">X</a><span class="delimiter">]</span>, <a href="#163255" title="[A]=&gt; scalaz.EphemeralStream[A]">emptyEphemeralStream</a><span title="scalaz.EphemeralStream[Y]" class="delimiter">[</span><a href="#163251" title="Y">Y</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="164767">q</a> =&gt; <a title="=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" id="164769">r</a> =&gt;
      <span title="(_1: java.lang.Object with scalaz.EphemeralStream[X], _2: java.lang.Object with scalaz.EphemeralStream[Y])(java.lang.Object with scalaz.EphemeralStream[X], java.lang.Object with scalaz.EphemeralStream[Y])" class="delimiter">(</span><a href="#163258" title="(a: =&gt; X, as: =&gt; scalaz.EphemeralStream[X])java.lang.Object with scalaz.EphemeralStream[X]">cons</a><span class="delimiter">(</span><a href="#164750" title="(v1: A)(X, Y)">q</a>.<span title="=&gt; X">_1</span>, <a href="#164769" title="=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])">r</a>.<span title="=&gt; scalaz.EphemeralStream[X]">_1</span><span class="delimiter">)</span>, <a href="#163258" title="(a: =&gt; Y, as: =&gt; scalaz.EphemeralStream[Y])java.lang.Object with scalaz.EphemeralStream[Y]">cons</a><span class="delimiter">(</span><a href="#164750" title="(v1: A)(X, Y)">q</a>.<span title="=&gt; Y">_2</span>, <a href="#164769" title="=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])">r</a>.<span title="=&gt; scalaz.EphemeralStream[Y]">_2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalaz.EphemeralStream" id="10293">EphemeralStream</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#23804" title="scalaz.EphemeralStreamFunctions">EphemeralStreamFunctions</a> <span class="keyword">with</span> <a href="#21839" title="scalaz.EphemeralStreamInstances">EphemeralStreamInstances</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[A]=&gt; scalaz.EphemeralStream[A]" id="163280">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163282">A</a><span class="delimiter">]</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#163255" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>

  <span class="keyword">def</span> <a title="[A](as: A*)scalaz.EphemeralStream[A]" id="163283">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163285">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A*" id="164606">as</a>: <span title="A*">A</span>*<span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#163261" title="(b: =&gt; Int, f: Int =&gt; Option[(A, Int)])scalaz.EphemeralStream[A]">unfold</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span class="delimiter">(</span>b: <span title="Int">Int</span><span class="delimiter">)</span> =&gt;
      <span title="Option[(A, Int)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#164823" title="Int">b</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#164606" title="A*">as</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <span title="(x: (A, Int))Some[(A, Int)]">Some</span><span class="delimiter">(</span><span title="(_1: A, _2: Int)(A, Int)" class="delimiter">(</span><a href="#164606" title="(idx: Int)A">as</a><span class="delimiter">(</span><a href="#164823" title="Int">b</a><span class="delimiter">)</span>, <a href="#164823" title="Int">b</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="object None">None</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait EphemeralStreamInstances extends java.lang.Object with ScalaObject" id="21839">EphemeralStreamInstances</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">// TODO more instances</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="scalaz.MonadPlus[scalaz.EphemeralStream]" id="163287">ephemeralStreamInstance</a>: <a href="MonadPlus.scala.html#17882" title="scalaz.MonadPlus[scalaz.EphemeralStream]">MonadPlus</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> = <a href="#164869" title="java.lang.Object with scalaz.MonadPlus[scalaz.EphemeralStream] with scalaz.Zip[scalaz.EphemeralStream] with scalaz.Unzip[scalaz.EphemeralStream]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.MonadPlus[scalaz.EphemeralStream] with scalaz.Zip[scalaz.EphemeralStream] with scalaz.Unzip[scalaz.EphemeralStream]" id="164869">MonadPlus</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="keyword">with</span> <a href="Zip.scala.html#12854" title="scalaz.Zip[scalaz.EphemeralStream]">Zip</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="keyword">with</span> <a href="Unzip.scala.html#16715" title="scalaz.Unzip[scalaz.EphemeralStream]">Unzip</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[A](a: scalaz.EphemeralStream[A], b: =&gt; scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]" id="164940">plus</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164942">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="164964">a</a>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="=&gt; scalaz.EphemeralStream[A]" id="164965">b</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#164964" title="scalaz.EphemeralStream[A]">a</a> <a href="#163232" title="(e: =&gt; scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]">++</a> <a href="#164965" title="=&gt; scalaz.EphemeralStream[A]">b</a>
    <span class="keyword">def</span> <a title="[A, B](fa: scalaz.EphemeralStream[A])(f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]" id="164943">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164946">A</a>, <a title="&gt;: Nothing &lt;: Any" id="164947">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="164985">fa</a>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A =&gt; scalaz.EphemeralStream[B]" id="164986">f</a>: <span class="delimiter">(</span>A<span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#164985" title="scalaz.EphemeralStream[A]">fa</a> <a href="#163233" title="(f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]">flatMap</a> <a href="#164986" title="A =&gt; scalaz.EphemeralStream[B]">f</a>
    <span class="keyword">def</span> <a title="[A](a: =&gt; A)scalaz.EphemeralStream[A]" id="164948">point</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164950">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="165009">a</a>: =&gt; A<span class="delimiter">)</span> = <a href="#163283" title="(as: A*)scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">(</span><a href="#165009" title="=&gt; A">a</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[A]=&gt; scalaz.EphemeralStream[A]" id="164951">empty</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164953">A</a><span class="delimiter">]</span> = <a href="#163283" title="(as: A*)scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[A, B](a: =&gt; scalaz.EphemeralStream[A], b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]" id="164954">zip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164957">A</a>, <a title="&gt;: Nothing &lt;: Any" id="164958">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[A]" id="165044">a</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="=&gt; scalaz.EphemeralStream[B]" id="165045">b</a>: =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#165044" title="=&gt; scalaz.EphemeralStream[A]">a</a> <a href="#163244" title="(b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]">zip</a> <a href="#165045" title="=&gt; scalaz.EphemeralStream[B]">b</a>
    <span class="keyword">def</span> <a title="[A, B](a: scalaz.EphemeralStream[(A, B)])(scalaz.EphemeralStream[A], scalaz.EphemeralStream[B])" id="164959">unzip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="164962">A</a>, <a title="&gt;: Nothing &lt;: Any" id="164963">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[(A, B)]" id="165079">a</a>: <a href="#10292" title="scalaz.EphemeralStream[(A, B)]">EphemeralStream</a><span class="delimiter">[</span><span class="delimiter">(</span>A, B<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#165079" title="scalaz.EphemeralStream[(A, B)]">a</a>.<a href="#163247" title="(implicit ev: =:=[(A, B),(A, B)])(scalaz.EphemeralStream[A], scalaz.EphemeralStream[B])">unzip</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait EphemeralStreamFunctions extends java.lang.Object with ScalaObject" id="23804">EphemeralStreamFunctions</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="[A]scalaz.EphemeralStream[A]" id="163253">EStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163254">A</a><span class="delimiter">]</span> = <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="[A]=&gt; scalaz.EphemeralStream[A]" id="163255">emptyEphemeralStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163257">A</a><span class="delimiter">]</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#165158" title="java.lang.Object with scalaz.EphemeralStream[A]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.EphemeralStream[A]" id="165158">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="165162">isEmpty</a> = <span title="Boolean(true)" class="keyword">true</span>

    <span class="keyword">def</span> <a title="=&gt; () =&gt; Nothing" id="165163">head</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Nothing = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;head of empty stream&quot;)" class="string">&quot;head of empty stream&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; () =&gt; Nothing" id="165164">tail</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Nothing = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;tail of empty stream&quot;)" class="string">&quot;tail of empty stream&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A](a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]" id="163258">cons</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163260">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="163289">a</a>: =&gt; A, <a title="=&gt; scalaz.EphemeralStream[A]" id="163290">as</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#163293" title="java.lang.Object with scalaz.EphemeralStream[A]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.EphemeralStream[A]" id="163293">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="163295">isEmpty</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">val</span> <a title="() =&gt; A" id="163296">head</a> = <a href="#163276" title="(f: =&gt; A)() =&gt; A">weakMemo</a><span class="delimiter">(</span><a href="#163289" title="=&gt; A">a</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="() =&gt; scalaz.EphemeralStream[A]" id="163298">tail</a> = <a href="#163276" title="(f: =&gt; scalaz.EphemeralStream[A])() =&gt; scalaz.EphemeralStream[A]">weakMemo</a><span class="delimiter">(</span><a href="#163290" title="=&gt; scalaz.EphemeralStream[A]">as</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A, B](b: =&gt; B, f: B =&gt; Option[(A, B)])scalaz.EphemeralStream[A]" id="163261">unfold</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163264">A</a>, <a title="&gt;: Nothing &lt;: Any" id="163265">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; B" id="164813">b</a>: =&gt; B, <a title="B =&gt; Option[(A, B)]" id="164814">f</a>: B =&gt; Option<span class="delimiter">[</span><span class="delimiter">(</span>A, B<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#164814" title="(v1: B)Option[(A, B)]">f</a><span class="delimiter">(</span><a href="#164813" title="=&gt; B">b</a><span class="delimiter">)</span> <span title="scalaz.EphemeralStream[A]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scalaz.EphemeralStream[A]">None</span>         =&gt; <a href="#163255" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>
      <span class="keyword">case</span> <span title="cons extends java.lang.Object with scalaz.EphemeralStream[A]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="A" id="165181">a</a>, <a title="B" id="165182">r</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#163258" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#165181" title="A">a</a>, <a href="#163261" title="(b: =&gt; B, f: B =&gt; Option[(A, B)])scalaz.EphemeralStream[A]">unfold</a><span class="delimiter">(</span><a href="#165182" title="B">r</a>, <a href="#164814" title="B =&gt; Option[(A, B)]">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A](start: A)(f: A =&gt; A)scalaz.EphemeralStream[A]" id="163266">iterate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163268">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="165198">start</a>: <a href="#163268" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A =&gt; A" id="165199">f</a>: A =&gt; A<span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#163261" title="(b: =&gt; A, f: A =&gt; Option[(A, A)])scalaz.EphemeralStream[A]">unfold</a><span class="delimiter">(</span><a href="#165198" title="A">start</a>, <span class="delimiter">(</span>a: <a href="#163268" title="A">A</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="A" id="165209">fa</a> = <a href="#165199" title="(v1: A)A">f</a><span class="delimiter">(</span><a href="#165208" title="A">a</a><span class="delimiter">)</span>
      <span title="(x: (A, A))Some[(A, A)]">Some</span><span class="delimiter">(</span><span title="(_1: A, _2: A)(A, A)" class="delimiter">(</span><a href="#165209" title="A">fa</a>, <a href="#165209" title="A">fa</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(lower: Int, upper: Int)scalaz.EphemeralStream[Int]" id="163269">range</a><span class="delimiter">(</span><a title="Int" id="165222">lower</a>: <span title="Int">Int</span>, <a title="Int" id="165223">upper</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[Int]">EphemeralStream</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> =
    <span title="scalaz.EphemeralStream[Int]" class="keyword">if</span> <span class="delimiter">(</span><a href="#165222" title="Int">lower</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#165223" title="Int">upper</a><span class="delimiter">)</span> <a href="#163255" title="scalaz.EphemeralStream[Int]">emptyEphemeralStream</a> <span class="keyword">else</span> <a href="#163258" title="(a: =&gt; Int, as: =&gt; scalaz.EphemeralStream[Int])java.lang.Object with scalaz.EphemeralStream[Int]">cons</a><span class="delimiter">(</span><a href="#165222" title="Int">lower</a>, <a href="#163269" title="(lower: Int, upper: Int)scalaz.EphemeralStream[Int]">range</a><span class="delimiter">(</span><a href="#165222" title="Int">lower</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#165223" title="Int">upper</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](s: =&gt; Stream[A])scalaz.EphemeralStream[A]" id="163270">fromStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163272">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; Stream[A]" id="165243">s</a>: =&gt; Stream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#165243" title="=&gt; Stream[A]">s</a> <span title="scalaz.EphemeralStream[A]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#165247" title="scalaz.EphemeralStream[A]">Stream</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#163255" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>
    <span class="keyword">case</span> <a title="cons extends java.lang.Object with scalaz.EphemeralStream[A]" id="165293">h</a> <a href="#165275" title="(xs: scala.collection.immutable.Stream[A])Option[(A, scala.collection.immutable.Stream[A])]">#::</a> <a title="scala.collection.immutable.Stream[A]" id="165294">t</a>  =&gt; <a href="#163258" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#165293" title="A">h</a>, <a href="#163270" title="(s: =&gt; Stream[A])scalaz.EphemeralStream[A]">fromStream</a><span class="delimiter">(</span><a href="#165294" title="scala.collection.immutable.Stream[A]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](e: scalaz.EphemeralStream[A])Iterable[A]" id="163273">toIterable</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163275">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="164661">e</a>: <a href="#10292" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iterable[A]">Iterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#165321" title="java.lang.Object with Iterable[A]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterable[A]" id="165321">Iterable</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.Object with Iterator[A]" id="165734">iterator</a> = <a href="#165756" title="java.lang.Object with Iterator[A]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[A]" id="165756">Iterator</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="165928">cur</a> = <a href="#164661" title="scalaz.EphemeralStream[A]">e</a>

      <span class="keyword">def</span> <a title="()A" id="165930">next</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="A" id="165934">t</a> = <a href="#165928" title="=&gt; scalaz.EphemeralStream[A]">cur</a>.<a href="#163221" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#165928" title="(x$1: scalaz.EphemeralStream[A])Unit">cur</a> = <a href="#165928" title="=&gt; scalaz.EphemeralStream[A]">cur</a>.<a href="#163222" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#165934" title="A">t</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="165931">hasNext</a> = <span title="=&gt; Boolean">!</span><a href="#165928" title="=&gt; scalaz.EphemeralStream[A]">cur</a>.<a href="#163220" title="=&gt; Boolean">isEmpty</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[V](f: =&gt; V)() =&gt; V" id="163276">weakMemo</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="163278">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; V" id="163305">f</a>: =&gt; V<span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; V = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.Object" id="165951">latch</a> = <span title="java.lang.Object" class="keyword">new</span> <span title="java.lang.Object">Object</span>
    <span class="comment">// TODO I don't think this annotation does anything, as `v` isn't a class member.</span>
    @volatile <span class="keyword">var</span> <a title="Option[java.lang.ref.WeakReference[V]]" id="165952">v</a>: <span title="Option[java.lang.ref.WeakReference[V]]">Option</span><span class="delimiter">[</span>WeakReference<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="object None">None</span>
    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[V]" id="165996">a</a> = <a href="#165952" title="Option[java.lang.ref.WeakReference[V]]">v</a>.<span title="(f: java.lang.ref.WeakReference[V] =&gt; V)Option[V]">map</span><span class="delimiter">(</span><a title="java.lang.ref.WeakReference[V]" id="166001">x</a> =&gt; <a href="#166001" title="java.lang.ref.WeakReference[V]">x</a>.<span title="()V">get</span><span class="delimiter">)</span>
      <span title="V" class="keyword">if</span> <span class="delimiter">(</span><a href="#165996" title="Option[V]">a</a>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#165996" title="Option[V]">a</a>.<span title="=&gt; V">get</span> <span title="(x$1: Any)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#165996" title="Option[V]">a</a>.<span title="=&gt; V">get</span>
      <span class="keyword">else</span> <a href="#165951" title="java.lang.Object">latch</a>.<span title="(x$1: V)V">synchronized</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="V" id="166005">x</a> = <a href="#163305" title="=&gt; V">f</a>
        <a href="#165952" title="Option[java.lang.ref.WeakReference[V]]">v</a> = <span title="(x: java.lang.ref.WeakReference[V])Some[java.lang.ref.WeakReference[V]]">Some</span><span class="delimiter">(</span><span title="java.lang.ref.WeakReference[V]" class="keyword">new</span> <span title="java.lang.ref.WeakReference[V]">WeakReference</span><span class="delimiter">(</span><a href="#166005" title="V">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#166005" title="V">x</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>