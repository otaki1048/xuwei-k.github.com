<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalaquery/ql/extended/HsqldbDriver.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalaquery.ql.extended

<span class="keyword">import</span> java.sql.Types
<span class="keyword">import</span> org.scalaquery.SQueryException
<span class="keyword">import</span> org.scalaquery.ql._
<span class="keyword">import</span> org.scalaquery.ql.basic._
<span class="keyword">import</span> org.scalaquery.util._

<span class="comment">/**
 * ScalaQuery driver for &lt;a href=&quot;http://www.hsqldb.org/&quot;&gt;HyperSQL&lt;/a&gt;
 * (starting with version 2.0).
 * 
 * &lt;p&gt;This driver implements the ExtendedProfile with the following
 * limitations:&lt;/p&gt;
 * &lt;ul&gt;
 *   &lt;li&gt;&lt;code&gt;Sequence.curr&lt;/code&gt; to get the current value of a sequence is
 *     not supported by Hsqldb. Trying to generate SQL code which uses this
 *     feature throws a SQueryException.&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * @author szeiger
 */</span>
<span class="keyword">class</span> <a title="class HsqldbDriver extends java.lang.Object with org.scalaquery.ql.extended.ExtendedProfile with ScalaObject" id="10519">HsqldbDriver</a> <a href="#10519" title="ScalaObject" class="keyword">extends</a> <a href="ExtendedProfile.scala.html#10484" title="org.scalaquery.ql.extended.ExtendedProfile">ExtendedProfile</a> <span class="delimiter">{</span> self =&gt;

  <span class="keyword">type</span> <a title="org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.HsqldbDriver]" id="120172">ImplicitT</a> = <a href="ExtendedProfile.scala.html#10485" title="org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.HsqldbDriver]">ExtendedImplicitConversions</a><span class="delimiter">[</span>HsqldbDriver<span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="org.scalaquery.ql.extended.HsqldbTypeMapperDelegates" id="120173">TypeMapperDelegatesT</a> = <a href="#10522" title="org.scalaquery.ql.extended.HsqldbTypeMapperDelegates">HsqldbTypeMapperDelegates</a>

  <span class="keyword">val</span> <a title="Implicit extends java.lang.Object with org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.HsqldbDriver]" id="120174">Implicit</a> = <a href="#120182" title="java.lang.Object with org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.HsqldbDriver]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.HsqldbDriver]" id="120182">ExtendedImplicitConversions</a><span class="delimiter">[</span>HsqldbDriver<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="org.scalaquery.ql.extended.HsqldbDriver" id="120184">scalaQueryDriver</a> = <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver">self</a>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="org.scalaquery.ql.extended.HsqldbTypeMapperDelegates" id="120176">typeMapperDelegates</a> = <span title="org.scalaquery.ql.extended.HsqldbTypeMapperDelegates" class="keyword">new</span> <a href="#10522" title="org.scalaquery.ql.extended.HsqldbTypeMapperDelegates">HsqldbTypeMapperDelegates</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(query: org.scalaquery.ql.Query[_], nc: org.scalaquery.util.NamingContext)org.scalaquery.ql.extended.HsqldbQueryBuilder" id="120178">createQueryBuilder</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Query[_]" id="120197">query</a>: <a href="../Query.scala.html#10200" title="org.scalaquery.ql.Query[_]">Query</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.util.NamingContext" id="120198">nc</a>: <a href="../../util/NamingContext.scala.html#10725" title="org.scalaquery.util.NamingContext">NamingContext</a><span class="delimiter">)</span> = <span title="org.scalaquery.ql.extended.HsqldbQueryBuilder" class="keyword">new</span> <a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder">HsqldbQueryBuilder</a><span class="delimiter">(</span><a href="#120197" title="org.scalaquery.ql.Query[_]">query</a>, <a href="#120198" title="org.scalaquery.util.NamingContext">nc</a>, <span title="object None">None</span>, <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver" class="keyword">this</a><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(table: org.scalaquery.ql.basic.AbstractBasicTable[_])org.scalaquery.ql.DDL" id="120179">buildTableDDL</a><span class="delimiter">(</span><a title="org.scalaquery.ql.basic.AbstractBasicTable[_]" id="120231">table</a>: <a href="../basic/BasicTable.scala.html#10416" title="org.scalaquery.ql.basic.AbstractBasicTable[_]">AbstractBasicTable</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../DDL.scala.html#9860" title="org.scalaquery.ql.DDL">DDL</a> = <span title="org.scalaquery.ql.extended.HsqldbDDLBuilder" class="keyword">new</span> <a href="#10523" title="org.scalaquery.ql.extended.HsqldbDDLBuilder">HsqldbDDLBuilder</a><span class="delimiter">(</span><a href="#120231" title="org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>, <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver" class="keyword">this</a><span class="delimiter">)</span>.<a href="../basic/BasicDDLBuilder.scala.html#107795" title="=&gt; org.scalaquery.ql.DDL">buildDDL</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(seq: org.scalaquery.ql.Sequence[_])org.scalaquery.ql.DDL" id="120180">buildSequenceDDL</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Sequence[_]" id="120251">seq</a>: <a href="../Sequence.scala.html#10233" title="org.scalaquery.ql.Sequence[_]">Sequence</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../DDL.scala.html#9860" title="org.scalaquery.ql.DDL">DDL</a> = <span title="org.scalaquery.ql.extended.HsqldbSequenceDDLBuilder[_$3]" class="keyword">new</span> <a href="#10525" title="org.scalaquery.ql.extended.HsqldbSequenceDDLBuilder[_$3]">HsqldbSequenceDDLBuilder</a><span class="delimiter">(</span><a href="#120251" title="org.scalaquery.ql.Sequence[_]">seq</a>, <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver" class="keyword">this</a><span class="delimiter">)</span>.<a href="#120262" title="=&gt; org.scalaquery.ql.DDL">buildDDL</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.scalaquery.ql.extended.HsqldbDriver" id="10520">HsqldbDriver</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver">HsqldbDriver</a>

<span class="keyword">class</span> <a title="class HsqldbTypeMapperDelegates extends java.lang.Object with org.scalaquery.ql.basic.BasicTypeMapperDelegates with ScalaObject" id="10522">HsqldbTypeMapperDelegates</a> <a href="#10522" title="ScalaObject" class="keyword">extends</a> <a href="../basic/BasicTypeMapperDelegates.scala.html#10427" title="org.scalaquery.ql.basic.BasicTypeMapperDelegates">BasicTypeMapperDelegates</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">val</span> <a title="org.scalaquery.ql.basic.BasicTypeMapperDelegates.ByteArrayTypeMapperDelegate" id="120195">byteArrayTypeMapperDelegate</a> = <a href="#120277" title="org.scalaquery.ql.basic.BasicTypeMapperDelegates.ByteArrayTypeMapperDelegate{}" class="keyword">new</a> <a href="../basic/BasicTypeMapperDelegates.scala.html#10428" title="anonymous class $anon extends org.scalaquery.ql.basic.BasicTypeMapperDelegates.ByteArrayTypeMapperDelegate" id="120277">BasicTypeMapperDelegates</a>.<a href="../basic/BasicTypeMapperDelegates.scala.html#107111" title="org.scalaquery.ql.basic.BasicTypeMapperDelegates.ByteArrayTypeMapperDelegate">ByteArrayTypeMapperDelegate</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="java.lang.String" id="120279">sqlTypeName</a> = <span title="java.lang.String(&quot;LONGVARBINARY&quot;)" class="string">&quot;LONGVARBINARY&quot;</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class HsqldbDDLBuilder extends org.scalaquery.ql.basic.BasicDDLBuilder with ScalaObject" id="10523">HsqldbDDLBuilder</a><a href="#10523" title="ScalaObject" class="delimiter">(</a><a title="org.scalaquery.ql.basic.AbstractBasicTable[_]" id="120245">table</a>: <a href="../basic/BasicTable.scala.html#10416" title="org.scalaquery.ql.basic.AbstractBasicTable[_]">AbstractBasicTable</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.ql.extended.HsqldbDriver" id="120246">profile</a>: <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver">HsqldbDriver</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../basic/BasicDDLBuilder.scala.html#10320" title="org.scalaquery.ql.basic.BasicDDLBuilder">BasicDDLBuilder</a><span class="delimiter">(</span><a href="#120245" title="org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>, <a href="#120246" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#120246" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a>.<a href="../basic/BasicProfile.scala.html#79191" title="=&gt; org.scalaquery.ql.basic.BasicSQLUtils">sqlUtils</a>._

  <span class="keyword">protected</span> <span class="keyword">class</span> <a title="class HsqldbColumnDDLBuilder extends HsqldbDDLBuilder.this.BasicColumnDDLBuilder with ScalaObject" id="120242">HsqldbColumnDDLBuilder</a><a href="#120242" title="ScalaObject" class="delimiter">(</a><a title="org.scalaquery.ql.NamedColumn[_]" id="120305">column</a>: <a href="../ColumnBase.scala.html#9819" title="org.scalaquery.ql.NamedColumn[_]">NamedColumn</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../basic/BasicDDLBuilder.scala.html#107793" title="HsqldbDDLBuilder.this.BasicColumnDDLBuilder">BasicColumnDDLBuilder</a><span class="delimiter">(</span><a href="#120305" title="org.scalaquery.ql.NamedColumn[_]">column</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sb: StringBuilder)Unit" id="120299">appendOptions</a><span class="delimiter">(</span><a title="StringBuilder" id="120311">sb</a>: <span title="StringBuilder">StringBuilder</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="../basic/BasicDDLBuilder.scala.html#107867" title="=&gt; String">defaultLiteral</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#120311" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; DEFAULT &quot;)" class="string">&quot; DEFAULT &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="../basic/BasicDDLBuilder.scala.html#107867" title="=&gt; String">defaultLiteral</a>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="../basic/BasicDDLBuilder.scala.html#107861" title="=&gt; Boolean">autoIncrement</a><span class="delimiter">)</span> <a href="#120311" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; GENERATED BY DEFAULT AS IDENTITY(START WITH 1)&quot;)" class="string">&quot; GENERATED BY DEFAULT AS IDENTITY(START WITH 1)&quot;</span>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="../basic/BasicDDLBuilder.scala.html#107858" title="=&gt; Boolean">notNull</a><span class="delimiter">)</span> <a href="#120311" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; NOT NULL&quot;)" class="string">&quot; NOT NULL&quot;</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="../basic/BasicDDLBuilder.scala.html#107864" title="=&gt; Boolean">primaryKey</a><span class="delimiter">)</span> <a href="#120311" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; PRIMARY KEY&quot;)" class="string">&quot; PRIMARY KEY&quot;</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: org.scalaquery.ql.NamedColumn[_])HsqldbDDLBuilder.this.HsqldbColumnDDLBuilder" id="120243">createColumnDDLBuilder</a><span class="delimiter">(</span><a title="org.scalaquery.ql.NamedColumn[_]" id="120357">c</a>: <a href="../ColumnBase.scala.html#9819" title="org.scalaquery.ql.NamedColumn[_]">NamedColumn</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="HsqldbDDLBuilder.this.HsqldbColumnDDLBuilder" class="keyword">new</span> <a href="#120242" title="HsqldbDDLBuilder.this.HsqldbColumnDDLBuilder">HsqldbColumnDDLBuilder</a><span class="delimiter">(</span><a href="#120357" title="org.scalaquery.ql.NamedColumn[_]">c</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(idx: org.scalaquery.ql.Index)java.lang.String" id="120244">createIndex</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Index" id="120365">idx</a>: <a href="../Index.scala.html#9871" title="org.scalaquery.ql.Index">Index</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="java.lang.String" class="keyword">if</span><span class="delimiter">(</span><a href="#120365" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85956" title="=&gt; Boolean">unique</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">/* Create a UNIQUE CONSTRAINT (with an automatically generated backing
       * index) because Hsqldb does not allow a FOREIGN KEY CONSTRAINT to
       * reference columns which have a UNIQUE INDEX but not a nominal UNIQUE
       * CONSTRAINT. */</span>
      <span class="keyword">val</span> <a title="StringBuilder" id="120368">sb</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;ALTER TABLE &quot;)" class="string">&quot;ALTER TABLE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="../basic/BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#120245" title="org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; ADD &quot;)" class="string">&quot; ADD &quot;</span>
      <a href="#120368" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;CONSTRAINT &quot;)" class="string">&quot;CONSTRAINT &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="../basic/BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#120365" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85950" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; UNIQUE(&quot;)" class="string">&quot; UNIQUE(&quot;</span>
      <a href="../basic/BasicDDLBuilder.scala.html#107803" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit">addIndexColumnList</a><span class="delimiter">(</span><a href="#120365" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85954" title="=&gt; org.scalaquery.ql.ColumnBase[_]">on</a>, <a href="#120368" title="StringBuilder">sb</a>, <a href="#120365" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85952" title="=&gt; org.scalaquery.ql.AbstractTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span>
      <a href="#120368" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <a href="#120368" title="StringBuilder">sb</a>.<span title="()java.lang.String">toString</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#10523" title="org.scalaquery.ql.extended.HsqldbDDLBuilder" class="keyword">super</a>.<a href="../basic/BasicDDLBuilder.scala.html#107796" title="(idx: org.scalaquery.ql.Index)java.lang.String">createIndex</a><span class="delimiter">(</span><a href="#120365" title="org.scalaquery.ql.Index">idx</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class HsqldbQueryBuilder extends org.scalaquery.ql.basic.BasicQueryBuilder with ScalaObject" id="10524">HsqldbQueryBuilder</a><a href="#10524" title="ScalaObject" class="delimiter">(</a><a title="org.scalaquery.ql.Query[_]" id="120222">_query</a>: <a href="../Query.scala.html#10200" title="org.scalaquery.ql.Query[_]">Query</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.util.NamingContext" id="120223">_nc</a>: <a href="../../util/NamingContext.scala.html#10725" title="org.scalaquery.util.NamingContext">NamingContext</a>, <a title="Option[org.scalaquery.ql.basic.BasicQueryBuilder]" id="120224">parent</a>: <span title="Option[org.scalaquery.ql.basic.BasicQueryBuilder]">Option</span><span class="delimiter">[</span>BasicQueryBuilder<span class="delimiter">]</span>, <a title="org.scalaquery.ql.extended.HsqldbDriver" id="120225">profile</a>: <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver">HsqldbDriver</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="../basic/BasicQueryBuilder.scala.html#10376" title="org.scalaquery.ql.basic.BasicQueryBuilder">BasicQueryBuilder</a><span class="delimiter">(</span><a href="#120222" title="org.scalaquery.ql.Query[_]">_query</a>, <a href="#120223" title="org.scalaquery.util.NamingContext">_nc</a>, <a href="#120224" title="Option[org.scalaquery.ql.basic.BasicQueryBuilder]">parent</a>, <a href="#120225" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="ExtendedProfile.scala.html#10489" title="object org.scalaquery.ql.extended.ExtendedQueryOps">ExtendedQueryOps</a>._
  <span class="keyword">import</span> <a href="#120225" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a>.<a href="../basic/BasicProfile.scala.html#79191" title="=&gt; org.scalaquery.ql.basic.BasicSQLUtils">sqlUtils</a>._

  <span class="keyword">override</span> <span class="keyword">type</span> <a title="org.scalaquery.ql.extended.HsqldbQueryBuilder" id="120214">Self</a> = <a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder">HsqldbQueryBuilder</a>
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Boolean" id="120215">mayLimit0</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Some[java.lang.String]" id="120217">scalarFrom</a> = <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><span title="java.lang.String(&quot;(VALUES (0))&quot;)" class="string">&quot;(VALUES (0))&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(query: org.scalaquery.ql.Query[_], nc: org.scalaquery.util.NamingContext)org.scalaquery.ql.extended.HsqldbQueryBuilder" id="120219">createSubQueryBuilder</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Query[_]" id="120416">query</a>: <a href="../Query.scala.html#10200" title="org.scalaquery.ql.Query[_]">Query</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.util.NamingContext" id="120417">nc</a>: <a href="../../util/NamingContext.scala.html#10725" title="org.scalaquery.util.NamingContext">NamingContext</a><span class="delimiter">)</span> =
    <span title="org.scalaquery.ql.extended.HsqldbQueryBuilder" class="keyword">new</span> <a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder">HsqldbQueryBuilder</a><span class="delimiter">(</span><a href="#120416" title="org.scalaquery.ql.Query[_]">query</a>, <a href="#120417" title="org.scalaquery.util.NamingContext">nc</a>, <span title="(x: org.scalaquery.ql.extended.HsqldbQueryBuilder)Some[org.scalaquery.ql.extended.HsqldbQueryBuilder]">Some</span><span class="delimiter">(</span><a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder" class="keyword">this</a><span class="delimiter">)</span>, <a href="#120225" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit" id="120220">innerExpr</a><span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="120428">c</a>: <a href="../../util/Node.scala.html#10735" title="org.scalaquery.util.Node">Node</a>, <a title="org.scalaquery.util.SQLBuilder" id="120429">b</a>: <a href="../../util/SQLBuilder.scala.html#10756" title="org.scalaquery.util.SQLBuilder">SQLBuilder</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#120428" title="org.scalaquery.util.Node">c</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>

    <span class="keyword">case</span> <span title="Unit">ColumnOps</span>.Concat<span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="120431">l</a>, <a title="org.scalaquery.util.Node" id="120432">r</a><span class="delimiter">)</span> =&gt; <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103843" title="(c: Char)org.scalaquery.util.SQLBuilder">+=</a> <span title="Char(\'(\')" class="char">'('</span>; <a href="../basic/BasicQueryBuilder.scala.html#103906" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">expr</a><span class="delimiter">(</span><a href="#120431" title="org.scalaquery.util.Node">l</a>, <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>; <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;||&quot;)" class="string">&quot;||&quot;</span>; <a href="../basic/BasicQueryBuilder.scala.html#103906" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">expr</a><span class="delimiter">(</span><a href="#120432" title="org.scalaquery.util.Node">r</a>, <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>; <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103843" title="(c: Char)org.scalaquery.util.SQLBuilder">+=</a> <span title="Char(\')\')" class="char">')'</span>

    <span class="keyword">case</span> <a title="Unit" id="120453">c</a> @ ConstColumn<span class="delimiter">(</span><a title="String" id="120456">v</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#120456" title="String">v</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span> =&gt;
      <span class="comment">/* Hsqldb treats string literals as type CHARACTER and pads them with
       * spaces in some expressions, so we cast all string literals to
       * VARCHAR. The length is only 16M instead of 2^31-1 in order to leave
       * enough room for concatenating strings (which extends the size even if
       * it is not needed). */</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#120453" title="org.scalaquery.ql.ConstColumn[Any]">c</a>.<a href="../ColumnBase.scala.html#78936" title="(v1: org.scalaquery.ql.basic.BasicProfile)org.scalaquery.ql.TypeMapperDelegate[Any]">typeMapper</a><span class="delimiter">(</span><a href="#120225" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a><span class="delimiter">)</span>.<a href="../TypeMapper.scala.html#79205" title="=&gt; Int">sqlType</a> <span title="(x: Int)Boolean">==</span> Types.<span title="Int(1)">CHAR</span><span class="delimiter">)</span> <a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder" class="keyword">super</a>.<a href="../basic/BasicQueryBuilder.scala.html#103908" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">innerExpr</a><span class="delimiter">(</span><a href="#120453" title="org.scalaquery.ql.ConstColumn[Any]">c</a>, <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;cast(&quot;)" class="string">&quot;cast(&quot;</span>
        <a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder" class="keyword">super</a>.<a href="../basic/BasicQueryBuilder.scala.html#103908" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">innerExpr</a><span class="delimiter">(</span><a href="#120453" title="org.scalaquery.ql.ConstColumn[Any]">c</a>, <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>
        <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; as varchar(16777216))&quot;)" class="string">&quot; as varchar(16777216))&quot;</span>
      <span class="delimiter">}</span>

    <span class="comment">/* Hsqldb uses the SQL:2008 syntax for NEXTVAL */</span>
    <span class="keyword">case</span> <span title="Unit">Sequence</span>.Nextval<span class="delimiter">(</span><a title="org.scalaquery.ql.Sequence[Any]" id="120475">seq</a><span class="delimiter">)</span> =&gt; <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;(next value for &quot;)" class="string">&quot;(next value for &quot;</span> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <a href="../basic/BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#120475" title="org.scalaquery.ql.Sequence[Any]">seq</a>.<a href="../Sequence.scala.html#102135" title="=&gt; String">name</a><span class="delimiter">)</span> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>

    <span class="keyword">case</span> <span title="Nothing">Sequence</span>.Currval<span class="delimiter">(</span><a title="org.scalaquery.ql.Sequence[Any]" id="120490">seq</a><span class="delimiter">)</span> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="../../SQueryException.scala.html#25911" title="org.scalaquery.SQueryException" class="keyword">new</a> <a href="../../SQueryException.scala.html#9548" title="org.scalaquery.SQueryException">SQueryException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Hsqldb does not support CURRVAL&quot;)" class="string">&quot;Hsqldb does not support CURRVAL&quot;</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <a href="#10524" title="org.scalaquery.ql.extended.HsqldbQueryBuilder" class="keyword">super</a>.<a href="../basic/BasicQueryBuilder.scala.html#103908" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">innerExpr</a><span class="delimiter">(</span><a href="#120428" title="org.scalaquery.util.Node">c</a>, <a href="#120429" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(b: org.scalaquery.util.SQLBuilder)Unit" id="120221">appendLimitClause</a><span class="delimiter">(</span><a title="org.scalaquery.util.SQLBuilder" id="120492">b</a>: <a href="../../util/SQLBuilder.scala.html#10756" title="org.scalaquery.util.SQLBuilder">SQLBuilder</a><span class="delimiter">)</span> = <a href="../basic/BasicQueryBuilder.scala.html#103867" title="=&gt; org.scalaquery.ql.Query[_]">query</a>.<a href="../Query.scala.html#79962" title="[T &lt;: org.scalaquery.ql.QueryModifier](implicit m: ClassManifest[T])List[T]">typedModifiers</a><span title="(implicit m: ClassManifest[org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop])List[org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop]" class="delimiter">[</span><a href="ExtendedProfile.scala.html#112730" title="org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop">TakeDrop</a><span class="delimiter">]</span>.<span title="=&gt; Option[org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop]">lastOption</span>.<span title="(f: org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop =&gt; Any)Unit">foreach</span> <a href="#120505" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Unit">TakeDrop</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// handled in innerBuildSelectNoRewrite</span>
    <span class="keyword">case</span> <span title="org.scalaquery.util.SQLBuilder">TakeDrop</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Int" id="120508">t</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Int" id="120510">d</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#120492" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; LIMIT &quot;)" class="string">&quot; LIMIT &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120508" title="Int">t</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; OFFSET &quot;)" class="string">&quot; OFFSET &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120510" title="Int">d</a>
    <span class="keyword">case</span> <span title="org.scalaquery.util.SQLBuilder">TakeDrop</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Int" id="120528">t</a><span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span> =&gt; <a href="#120492" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; LIMIT &quot;)" class="string">&quot; LIMIT &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120528" title="Int">t</a>
    <span class="keyword">case</span> <span title="org.scalaquery.util.SQLBuilder">TakeDrop</span><span class="delimiter">(</span><span title="object None">None</span>, Some<span class="delimiter">(</span><a title="Int" id="120538">d</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#120492" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; OFFSET &quot;)" class="string">&quot; OFFSET &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120538" title="Int">d</a>
    <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class HsqldbSequenceDDLBuilder[T] extends org.scalaquery.ql.basic.BasicSequenceDDLBuilder with ScalaObject" id="10525">HsqldbSequenceDDLBuilder</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="10526">T</a><span class="delimiter">]</span><a href="#10525" title="ScalaObject" class="delimiter">(</a><a title="org.scalaquery.ql.Sequence[T]" id="120264">seq</a>: <a href="../Sequence.scala.html#10233" title="org.scalaquery.ql.Sequence[T]">Sequence</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="org.scalaquery.ql.extended.HsqldbDriver" id="120265">profile</a>: <a href="#10519" title="org.scalaquery.ql.extended.HsqldbDriver">HsqldbDriver</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../basic/BasicSequenceDDLBuilder.scala.html#10408" title="org.scalaquery.ql.basic.BasicSequenceDDLBuilder">BasicSequenceDDLBuilder</a><span class="delimiter">(</span><a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>, <a href="#120265" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#120265" title="org.scalaquery.ql.extended.HsqldbDriver">profile</a>.<a href="../basic/BasicProfile.scala.html#79191" title="=&gt; org.scalaquery.ql.basic.BasicSQLUtils">sqlUtils</a>._

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; org.scalaquery.ql.DDL" id="120262">buildDDL</a>: <a href="../DDL.scala.html#9860" title="org.scalaquery.ql.DDL">DDL</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102149" title="=&gt; Integral[T]">integral</a>._
    <span class="keyword">val</span> <a title="T" id="120560">increment</a> = <a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102141" title="=&gt; Option[T]">_increment</a>.<span title="(default: =&gt; T)T">getOrElse</span><span class="delimiter">(</span><a href="../Sequence.scala.html#102149" title="=&gt; T">one</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="120561">desc</a> = <a href="../Sequence.scala.html#102149" title="implicit scala.math.Ordering.mkOrderingOps : (lhs: T)HsqldbSequenceDDLBuilder.this.seq.integral.Ops">increment</a> <span title="(rhs: T)Boolean">&lt;</span> <a href="../Sequence.scala.html#102149" title="=&gt; T">zero</a>
    <span class="keyword">val</span> <a title="Any" id="120562">start</a> = <a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102143" title="=&gt; Option[T]">_start</a>.<span title="(default: =&gt; Any)Any">getOrElse</span><span class="delimiter">(</span><span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#120561" title="Boolean">desc</a><span class="delimiter">)</span> -<span title="Int(-1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="StringBuilder" id="120563">b</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;CREATE SEQUENCE &quot;)" class="string">&quot;CREATE SEQUENCE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="../basic/BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102135" title="=&gt; String">name</a><span class="delimiter">)</span>
    <a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102141" title="=&gt; Option[T]">_increment</a>.<span title="(f: T =&gt; StringBuilder)Unit">foreach</span> <span class="delimiter">{</span> <a href="#120563" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; INCREMENT BY &quot;)" class="string">&quot; INCREMENT BY &quot;</span> <span title="(x: Any)StringBuilder">append</span> <a href="#120638" title="T">_</a> <span class="delimiter">}</span>
    <a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102137" title="=&gt; Option[T]">_minValue</a>.<span title="(f: T =&gt; StringBuilder)Unit">foreach</span> <span class="delimiter">{</span> <a href="#120563" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; MINVALUE &quot;)" class="string">&quot; MINVALUE &quot;</span> <span title="(x: Any)StringBuilder">append</span> <a href="#120652" title="T">_</a> <span class="delimiter">}</span>
    <a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102139" title="=&gt; Option[T]">_maxValue</a>.<span title="(f: T =&gt; StringBuilder)Unit">foreach</span> <span class="delimiter">{</span> <a href="#120563" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; MAXVALUE &quot;)" class="string">&quot; MAXVALUE &quot;</span> <span title="(x: Any)StringBuilder">append</span> <a href="#120666" title="T">_</a> <span class="delimiter">}</span>
    <span class="comment">/* The START value in Hsqldb defaults to 0 instead of the more
     * conventional 1/-1 so we rewrite it to make 1/-1 the default. */</span>
    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#120562" title="Any">start</a> <span title="(x$1: Any)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#120563" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; START WITH &quot;)" class="string">&quot; START WITH &quot;</span> <span title="(x: Any)StringBuilder">append</span> <a href="#120562" title="Any">start</a>
    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102145" title="=&gt; Boolean">_cycle</a><span class="delimiter">)</span> <a href="#120563" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; CYCLE&quot;)" class="string">&quot; CYCLE&quot;</span>
    <a href="#120704" title="java.lang.Object with org.scalaquery.ql.DDL{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalaquery.ql.DDL" id="120704">DDL</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="120708">createPhase1</a> = <span title="(elems: java.lang.String*)Iterable[java.lang.String]">Iterable</span><span class="delimiter">(</span><a href="#120563" title="StringBuilder">b</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Nil.type" id="120710">createPhase2</a> = <span title="object Nil">Nil</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Nil.type" id="120712">dropPhase1</a> = <span title="object Nil">Nil</span>
      <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="120714">dropPhase2</a> = <span title="(elems: java.lang.String*)Iterable[java.lang.String]">Iterable</span><span class="delimiter">(</span><span title="java.lang.String(&quot;DROP SEQUENCE &quot;)" class="string">&quot;DROP SEQUENCE &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../basic/BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#120264" title="org.scalaquery.ql.Sequence[T]">seq</a>.<a href="../Sequence.scala.html#102135" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>