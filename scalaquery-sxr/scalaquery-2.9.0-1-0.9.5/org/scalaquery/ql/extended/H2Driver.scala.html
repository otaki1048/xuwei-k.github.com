<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalaquery/ql/extended/H2Driver.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalaquery.ql.extended

<span class="keyword">import</span> org.scalaquery.ql._
<span class="keyword">import</span> org.scalaquery.ql.basic._
<span class="keyword">import</span> org.scalaquery.util._

<span class="keyword">class</span> <a title="class H2Driver extends java.lang.Object with org.scalaquery.ql.extended.ExtendedProfile with ScalaObject" id="10506">H2Driver</a> <a href="#10506" title="ScalaObject" class="keyword">extends</a> <a href="ExtendedProfile.scala.html#10484" title="org.scalaquery.ql.extended.ExtendedProfile">ExtendedProfile</a> <span class="delimiter">{</span> self =&gt;

  <span class="keyword">type</span> <a title="org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.H2Driver]" id="119949">ImplicitT</a> = <a href="ExtendedProfile.scala.html#10485" title="org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.H2Driver]">ExtendedImplicitConversions</a><span class="delimiter">[</span>H2Driver<span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="org.scalaquery.ql.basic.BasicTypeMapperDelegates" id="119950">TypeMapperDelegatesT</a> = <a href="../basic/BasicTypeMapperDelegates.scala.html#10427" title="org.scalaquery.ql.basic.BasicTypeMapperDelegates">BasicTypeMapperDelegates</a>

  <span class="keyword">val</span> <a title="Implicit extends java.lang.Object with org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.H2Driver]" id="119951">Implicit</a> = <a href="#119959" title="java.lang.Object with org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.H2Driver]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalaquery.ql.extended.ExtendedImplicitConversions[org.scalaquery.ql.extended.H2Driver]" id="119959">ExtendedImplicitConversions</a><span class="delimiter">[</span>H2Driver<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="org.scalaquery.ql.extended.H2Driver" id="119961">scalaQueryDriver</a> = <a href="#10506" title="org.scalaquery.ql.extended.H2Driver">self</a>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="typeMapperDelegates extends java.lang.Object with org.scalaquery.ql.basic.BasicTypeMapperDelegates" id="119953">typeMapperDelegates</a> = <a href="#119971" title="java.lang.Object with org.scalaquery.ql.basic.BasicTypeMapperDelegates" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalaquery.ql.basic.BasicTypeMapperDelegates" id="119971">BasicTypeMapperDelegates</a> <span class="delimiter">{</span><span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">val</span> <a title="org.scalaquery.ql.extended.H2SQLUtils" id="119955">sqlUtils</a> = <span title="org.scalaquery.ql.extended.H2SQLUtils" class="keyword">new</span> <a href="#10510" title="org.scalaquery.ql.extended.H2SQLUtils">H2SQLUtils</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(query: org.scalaquery.ql.Query[_], nc: org.scalaquery.util.NamingContext)org.scalaquery.ql.extended.H2QueryBuilder" id="119957">createQueryBuilder</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Query[_]" id="119981">query</a>: <a href="../Query.scala.html#10200" title="org.scalaquery.ql.Query[_]">Query</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.util.NamingContext" id="119982">nc</a>: <a href="../../util/NamingContext.scala.html#10725" title="org.scalaquery.util.NamingContext">NamingContext</a><span class="delimiter">)</span> = <span title="org.scalaquery.ql.extended.H2QueryBuilder" class="keyword">new</span> <a href="#10509" title="org.scalaquery.ql.extended.H2QueryBuilder">H2QueryBuilder</a><span class="delimiter">(</span><a href="#119981" title="org.scalaquery.ql.Query[_]">query</a>, <a href="#119982" title="org.scalaquery.util.NamingContext">nc</a>, <span title="object None">None</span>, <a href="#10506" title="org.scalaquery.ql.extended.H2Driver" class="keyword">this</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.scalaquery.ql.extended.H2Driver" id="10507">H2Driver</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10506" title="org.scalaquery.ql.extended.H2Driver">H2Driver</a>

<span class="keyword">class</span> <a title="class H2QueryBuilder extends org.scalaquery.ql.basic.BasicQueryBuilder with ScalaObject" id="10509">H2QueryBuilder</a><a href="#10509" title="ScalaObject" class="delimiter">(</a><a title="org.scalaquery.ql.Query[_]" id="120003">_query</a>: <a href="../Query.scala.html#10200" title="org.scalaquery.ql.Query[_]">Query</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.util.NamingContext" id="120004">_nc</a>: <a href="../../util/NamingContext.scala.html#10725" title="org.scalaquery.util.NamingContext">NamingContext</a>, <a title="Option[org.scalaquery.ql.basic.BasicQueryBuilder]" id="120005">parent</a>: <span title="Option[org.scalaquery.ql.basic.BasicQueryBuilder]">Option</span><span class="delimiter">[</span>BasicQueryBuilder<span class="delimiter">]</span>, <a title="org.scalaquery.ql.extended.H2Driver" id="120006">profile</a>: <a href="#10506" title="org.scalaquery.ql.extended.H2Driver">H2Driver</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="../basic/BasicQueryBuilder.scala.html#10376" title="org.scalaquery.ql.basic.BasicQueryBuilder">BasicQueryBuilder</a><span class="delimiter">(</span><a href="#120003" title="org.scalaquery.ql.Query[_]">_query</a>, <a href="#120004" title="org.scalaquery.util.NamingContext">_nc</a>, <a href="#120005" title="Option[org.scalaquery.ql.basic.BasicQueryBuilder]">parent</a>, <a href="#120006" title="org.scalaquery.ql.extended.H2Driver">profile</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="ExtendedProfile.scala.html#10489" title="object org.scalaquery.ql.extended.ExtendedQueryOps">ExtendedQueryOps</a>._

  <span class="keyword">override</span> <span class="keyword">type</span> <a title="org.scalaquery.ql.extended.H2QueryBuilder" id="119997">Self</a> = <a href="#10509" title="org.scalaquery.ql.extended.H2QueryBuilder">H2QueryBuilder</a>
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Boolean" id="119998">mayLimit0</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(query: org.scalaquery.ql.Query[_], nc: org.scalaquery.util.NamingContext)org.scalaquery.ql.extended.H2QueryBuilder" id="120000">createSubQueryBuilder</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Query[_]" id="120025">query</a>: <a href="../Query.scala.html#10200" title="org.scalaquery.ql.Query[_]">Query</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.scalaquery.util.NamingContext" id="120026">nc</a>: <a href="../../util/NamingContext.scala.html#10725" title="org.scalaquery.util.NamingContext">NamingContext</a><span class="delimiter">)</span> =
    <span title="org.scalaquery.ql.extended.H2QueryBuilder" class="keyword">new</span> <a href="#10509" title="org.scalaquery.ql.extended.H2QueryBuilder">H2QueryBuilder</a><span class="delimiter">(</span><a href="#120025" title="org.scalaquery.ql.Query[_]">query</a>, <a href="#120026" title="org.scalaquery.util.NamingContext">nc</a>, <span title="(x: org.scalaquery.ql.extended.H2QueryBuilder)Some[org.scalaquery.ql.extended.H2QueryBuilder]">Some</span><span class="delimiter">(</span><a href="#10509" title="org.scalaquery.ql.extended.H2QueryBuilder" class="keyword">this</a><span class="delimiter">)</span>, <a href="#120006" title="org.scalaquery.ql.extended.H2Driver">profile</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit" id="120001">innerExpr</a><span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="120037">c</a>: <a href="../../util/Node.scala.html#10735" title="org.scalaquery.util.Node">Node</a>, <a title="org.scalaquery.util.SQLBuilder" id="120038">b</a>: <a href="../../util/SQLBuilder.scala.html#10756" title="org.scalaquery.util.SQLBuilder">SQLBuilder</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#120037" title="org.scalaquery.util.Node">c</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Unit">ColumnOps</span>.Concat<span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="120040">l</a>, <a title="org.scalaquery.util.Node" id="120041">r</a><span class="delimiter">)</span> =&gt; <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103843" title="(c: Char)org.scalaquery.util.SQLBuilder">+=</a> <span title="Char(\'(\')" class="char">'('</span>; <a href="../basic/BasicQueryBuilder.scala.html#103906" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">expr</a><span class="delimiter">(</span><a href="#120040" title="org.scalaquery.util.Node">l</a>, <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>; <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;||&quot;)" class="string">&quot;||&quot;</span>; <a href="../basic/BasicQueryBuilder.scala.html#103906" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">expr</a><span class="delimiter">(</span><a href="#120041" title="org.scalaquery.util.Node">r</a>, <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>; <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103843" title="(c: Char)org.scalaquery.util.SQLBuilder">+=</a> <span title="Char(\')\')" class="char">')'</span>
    <span class="keyword">case</span> <span title="Unit">Sequence</span>.Nextval<span class="delimiter">(</span><a title="org.scalaquery.ql.Sequence[Any]" id="120064">seq</a><span class="delimiter">)</span> =&gt; <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;nextval(schema(), \'&quot;)" class="string">&quot;nextval(schema(), '&quot;</span> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120064" title="org.scalaquery.ql.Sequence[Any]">seq</a>.<a href="../Sequence.scala.html#102135" title="=&gt; String">name</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;\')&quot;)" class="string">&quot;')&quot;</span>
    <span class="keyword">case</span> <span title="Unit">Sequence</span>.Currval<span class="delimiter">(</span><a title="org.scalaquery.ql.Sequence[Any]" id="120079">seq</a><span class="delimiter">)</span> =&gt; <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;currval(schema(), \'&quot;)" class="string">&quot;currval(schema(), '&quot;</span> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120079" title="org.scalaquery.ql.Sequence[Any]">seq</a>.<a href="../Sequence.scala.html#102135" title="=&gt; String">name</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot;\')&quot;)" class="string">&quot;')&quot;</span>
    <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <a href="#10509" title="org.scalaquery.ql.extended.H2QueryBuilder" class="keyword">super</a>.<a href="../basic/BasicQueryBuilder.scala.html#103908" title="(c: org.scalaquery.util.Node, b: org.scalaquery.util.SQLBuilder)Unit">innerExpr</a><span class="delimiter">(</span><a href="#120037" title="org.scalaquery.util.Node">c</a>, <a href="#120038" title="org.scalaquery.util.SQLBuilder">b</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(b: org.scalaquery.util.SQLBuilder)Unit" id="120002">appendLimitClause</a><span class="delimiter">(</span><a title="org.scalaquery.util.SQLBuilder" id="120093">b</a>: <a href="../../util/SQLBuilder.scala.html#10756" title="org.scalaquery.util.SQLBuilder">SQLBuilder</a><span class="delimiter">)</span> = <a href="../basic/BasicQueryBuilder.scala.html#103867" title="=&gt; org.scalaquery.ql.Query[_]">query</a>.<a href="../Query.scala.html#79962" title="[T &lt;: org.scalaquery.ql.QueryModifier](implicit m: ClassManifest[T])List[T]">typedModifiers</a><span title="(implicit m: ClassManifest[org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop])List[org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop]" class="delimiter">[</span><a href="ExtendedProfile.scala.html#112730" title="org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop">TakeDrop</a><span class="delimiter">]</span>.<span title="=&gt; Option[org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop]">lastOption</span>.<span title="(f: org.scalaquery.ql.extended.ExtendedQueryOps.TakeDrop =&gt; Any)Unit">foreach</span> <a href="#120108" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Unit">TakeDrop</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <span class="comment">// handled in innerBuildSelectNoRewrite</span>
    <span class="keyword">case</span> <span title="org.scalaquery.util.SQLBuilder">TakeDrop</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Int" id="120111">t</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Int" id="120113">d</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#120093" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; LIMIT &quot;)" class="string">&quot; LIMIT &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120111" title="Int">t</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; OFFSET &quot;)" class="string">&quot; OFFSET &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120113" title="Int">d</a>
    <span class="keyword">case</span> <span title="org.scalaquery.util.SQLBuilder">TakeDrop</span><span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Int" id="120131">t</a><span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span> =&gt; <a href="#120093" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; LIMIT &quot;)" class="string">&quot; LIMIT &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120131" title="Int">t</a>
    <span class="keyword">case</span> <span title="org.scalaquery.util.SQLBuilder">TakeDrop</span><span class="delimiter">(</span><span title="object None">None</span>, Some<span class="delimiter">(</span><a title="Int" id="120141">d</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#120093" title="org.scalaquery.util.SQLBuilder">b</a> <a href="../../util/SQLBuilder.scala.html#103840" title="(s: String)org.scalaquery.util.SQLBuilder">+=</a> <span title="java.lang.String(&quot; LIMIT 0 OFFSET &quot;)" class="string">&quot; LIMIT 0 OFFSET &quot;</span> <a href="../../util/SQLBuilder.scala.html#103841" title="(i: Int)org.scalaquery.util.SQLBuilder">+=</a> <a href="#120141" title="Int">d</a>
    <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class H2SQLUtils extends org.scalaquery.ql.basic.BasicSQLUtils with ScalaObject" id="10510">H2SQLUtils</a> <a href="#10510" title="ScalaObject" class="keyword">extends</a> <a href="../basic/BasicSQLUtils.scala.html#10403" title="org.scalaquery.ql.basic.BasicSQLUtils">BasicSQLUtils</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tmd: org.scalaquery.ql.TypeMapperDelegate[_])String" id="119980">mapTypeName</a><span class="delimiter">(</span><a title="org.scalaquery.ql.TypeMapperDelegate[_]" id="120159">tmd</a>: <a href="../TypeMapper.scala.html#10291" title="org.scalaquery.ql.TypeMapperDelegate[_]">TypeMapperDelegate</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#120159" title="org.scalaquery.ql.TypeMapperDelegate[_]">tmd</a>.<a href="../TypeMapper.scala.html#79205" title="=&gt; Int">sqlType</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;VARCHAR&quot;)">java</span>.sql.Types.<span title="Int(12)">VARCHAR</span> =&gt; <span title="java.lang.String(&quot;VARCHAR&quot;)" class="string">&quot;VARCHAR&quot;</span>
    <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#10510" title="org.scalaquery.ql.extended.H2SQLUtils" class="keyword">super</a>.<a href="../basic/BasicSQLUtils.scala.html#107848" title="(tmd: org.scalaquery.ql.TypeMapperDelegate[_])String">mapTypeName</a><span class="delimiter">(</span><a href="#120159" title="org.scalaquery.ql.TypeMapperDelegate[_]">tmd</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>