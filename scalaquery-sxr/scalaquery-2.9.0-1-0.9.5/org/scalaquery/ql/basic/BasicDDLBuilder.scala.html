<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalaquery/ql/basic/BasicDDLBuilder.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalaquery.ql.basic

<span class="keyword">import</span> scala.collection.mutable.HashMap
<span class="keyword">import</span> java.io.PrintWriter
<span class="keyword">import</span> org.scalaquery.SQueryException
<span class="keyword">import</span> org.scalaquery.ql._
<span class="keyword">import</span> org.scalaquery.ql.extended.ExtendedColumnOption <span class="comment">//TODO: Move AutoInc handling to extended profile</span>
<span class="keyword">import</span> org.scalaquery.util.Node

<span class="keyword">class</span> <a title="class BasicDDLBuilder extends java.lang.Object with ScalaObject" id="10320">BasicDDLBuilder</a><a href="#10320" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="org.scalaquery.ql.basic.AbstractBasicTable[_]" id="107841">table</a>: <a href="BasicTable.scala.html#10416" title="org.scalaquery.ql.basic.AbstractBasicTable[_]">AbstractBasicTable</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="org.scalaquery.ql.basic.BasicProfile" id="107842">profile</a>: <a href="BasicProfile.scala.html#10366" title="org.scalaquery.ql.basic.BasicProfile">BasicProfile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#107842" title="=&gt; org.scalaquery.ql.basic.BasicProfile">profile</a>.<a href="BasicProfile.scala.html#79191" title="=&gt; org.scalaquery.ql.basic.BasicSQLUtils">sqlUtils</a>._

  <span class="keyword">protected</span> <span class="keyword">class</span> <a title="class BasicColumnDDLBuilder extends java.lang.Object with ScalaObject" id="107793">BasicColumnDDLBuilder</a><a href="#107793" title="ScalaObject" class="delimiter">(</a><span class="keyword">protected</span> <span class="keyword">val</span> <a title="org.scalaquery.ql.NamedColumn[_]" id="107895">column</a>: <a href="../ColumnBase.scala.html#9819" title="org.scalaquery.ql.NamedColumn[_]">NamedColumn</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="org.scalaquery.ql.TypeMapperDelegate[_]" id="107853">tmDelegate</a> = <a href="#107895" title="=&gt; org.scalaquery.ql.NamedColumn[_]">column</a>.<a href="../ColumnBase.scala.html#78936" title="((v1: org.scalaquery.ql.basic.BasicProfile)org.scalaquery.ql.TypeMapperDelegate[_$2]) forSome { type _$2; type _$2; type _$2 }">typeMapper</a><span class="delimiter">(</span><a href="#107842" title="=&gt; org.scalaquery.ql.basic.BasicProfile">profile</a><span class="delimiter">)</span>
    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="String" id="107856">sqlType</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Boolean" id="107859">notNull</a> = <span title="=&gt; Boolean">!</span><a href="#107853" title="=&gt; org.scalaquery.ql.TypeMapperDelegate[_]">tmDelegate</a>.<a href="../TypeMapper.scala.html#79215" title="=&gt; Boolean">nullable</a>
    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Boolean" id="107862">autoIncrement</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Boolean" id="107865">primaryKey</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="String" id="107868">defaultLiteral</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
    <a href="#107870" title="()Unit">init</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="107870">init</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.scalaquery.ql.ColumnOption[Any, _]" id="107924">o</a> &lt;- <a href="#107895" title="=&gt; org.scalaquery.ql.NamedColumn[_]">column</a>.<a href="../ColumnBase.scala.html#80457" title="(f: org.scalaquery.ql.ColumnOption[Any, _] =&gt; Unit)Unit">options</a><span class="delimiter">)</span> <a href="#107871" title="(o: org.scalaquery.ql.ColumnOption[_, _])Unit">handleColumnOption</a><span class="delimiter">(</span><a href="#107924" title="org.scalaquery.ql.ColumnOption[Any, _]">o</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#107856" title="=&gt; String">sqlType</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#107856" title="(x$1: String)Unit">sqlType</a> = <a href="BasicSQLUtils.scala.html#107848" title="(tmd: org.scalaquery.ql.TypeMapperDelegate[_])String">mapTypeName</a><span class="delimiter">(</span><a href="#107853" title="=&gt; org.scalaquery.ql.TypeMapperDelegate[_]">tmDelegate</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(o: org.scalaquery.ql.ColumnOption[_, _])Unit" id="107871">handleColumnOption</a><span class="delimiter">(</span><a title="org.scalaquery.ql.ColumnOption[_, _]" id="107925">o</a>: <a href="../ColumnOption.scala.html#9836" title="org.scalaquery.ql.ColumnOption[_, _]">ColumnOption</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#107925" title="org.scalaquery.ql.ColumnOption[_, _]">o</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">BasicColumnOption</span>.DBType<span class="delimiter">(</span><a title="String" id="107945">s</a><span class="delimiter">)</span> =&gt; <a href="#107856" title="(x$1: String)Unit">sqlType</a> = <a href="#107945" title="String">s</a>
      <span class="keyword">case</span> <a href="BasicColumnOptions.scala.html#10309" title="Unit">BasicColumnOption</a>.<a href="BasicColumnOptions.scala.html#107591" title="object org.scalaquery.ql.basic.BasicColumnOption.NotNull">NotNull</a> =&gt; <a href="#107859" title="(x$1: Boolean)Unit">notNull</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <a href="BasicColumnOptions.scala.html#10309" title="Unit">BasicColumnOption</a>.<a href="BasicColumnOptions.scala.html#107593" title="object org.scalaquery.ql.basic.BasicColumnOption.Nullable">Nullable</a> =&gt; <a href="#107859" title="(x$1: Boolean)Unit">notNull</a> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">case</span> <a href="../extended/ExtendedProfile.scala.html#10494" title="Unit">ExtendedColumnOption</a>.<a href="../extended/ExtendedProfile.scala.html#107947" title="object org.scalaquery.ql.extended.ExtendedColumnOption.AutoInc">AutoInc</a> =&gt; <a href="#107862" title="(x$1: Boolean)Unit">autoIncrement</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <a href="BasicColumnOptions.scala.html#10309" title="Unit">BasicColumnOption</a>.<a href="BasicColumnOptions.scala.html#107595" title="object org.scalaquery.ql.basic.BasicColumnOption.PrimaryKey">PrimaryKey</a> =&gt; <a href="#107865" title="(x$1: Boolean)Unit">primaryKey</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Unit">BasicColumnOption</span>.Default<span class="delimiter">(</span><a title="Any" id="107952">v</a><span class="delimiter">)</span> =&gt; <a href="#107868" title="(x$1: String)Unit">defaultLiteral</a> = <a href="#107895" title="=&gt; org.scalaquery.ql.NamedColumn[_]">column</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalaquery.ql.NamedColumn[Any]" class="delimiter">[</span><a href="../ColumnBase.scala.html#9819" title="org.scalaquery.ql.NamedColumn[Any]">NamedColumn</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="../ColumnBase.scala.html#78936" title="(v1: org.scalaquery.ql.basic.BasicProfile)org.scalaquery.ql.TypeMapperDelegate[Any]">typeMapper</a><span class="delimiter">(</span><a href="#107842" title="=&gt; org.scalaquery.ql.basic.BasicProfile">profile</a><span class="delimiter">)</span>.<a href="../TypeMapper.scala.html#79214" title="(value: Any)String">valueToSQLLiteral</a><span class="delimiter">(</span><a href="#107952" title="Any">v</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(sb: StringBuilder)Unit" id="107872">appendColumn</a><span class="delimiter">(</span><a title="StringBuilder" id="107955">sb</a>: <span title="StringBuilder">StringBuilder</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#107955" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107895" title="=&gt; org.scalaquery.ql.NamedColumn[_]">column</a>.<a href="../ColumnBase.scala.html#80455" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(x: Char)StringBuilder">append</span> <span title="Char(\' \')" class="char">' '</span>
      <a href="#107955" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <a href="#107856" title="=&gt; String">sqlType</a>
      <a href="#107873" title="(sb: StringBuilder)Unit">appendOptions</a><span class="delimiter">(</span><a href="#107955" title="StringBuilder">sb</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sb: StringBuilder)Unit" id="107873">appendOptions</a><span class="delimiter">(</span><a title="StringBuilder" id="107971">sb</a>: <span title="StringBuilder">StringBuilder</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#107868" title="=&gt; String">defaultLiteral</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#107971" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; DEFAULT &quot;)" class="string">&quot; DEFAULT &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="#107868" title="=&gt; String">defaultLiteral</a>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#107859" title="=&gt; Boolean">notNull</a><span class="delimiter">)</span> <a href="#107971" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; NOT NULL&quot;)" class="string">&quot; NOT NULL&quot;</span>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#107862" title="=&gt; Boolean">autoIncrement</a><span class="delimiter">)</span> <a href="#107971" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; AUTO_INCREMENT&quot;)" class="string">&quot; AUTO_INCREMENT&quot;</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#107865" title="=&gt; Boolean">primaryKey</a><span class="delimiter">)</span> <a href="#107971" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; PRIMARY KEY&quot;)" class="string">&quot; PRIMARY KEY&quot;</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: org.scalaquery.ql.NamedColumn[_])BasicDDLBuilder.this.BasicColumnDDLBuilder" id="107794">createColumnDDLBuilder</a><span class="delimiter">(</span><a title="org.scalaquery.ql.NamedColumn[_]" id="108017">c</a>: <a href="../ColumnBase.scala.html#9819" title="org.scalaquery.ql.NamedColumn[_]">NamedColumn</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="BasicDDLBuilder.this.BasicColumnDDLBuilder" class="keyword">new</span> <a href="#107793" title="BasicDDLBuilder.this.BasicColumnDDLBuilder">BasicColumnDDLBuilder</a><span class="delimiter">(</span><a href="#108017" title="org.scalaquery.ql.NamedColumn[_]">c</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.scalaquery.ql.DDL" id="107795">buildDDL</a>: <a href="../DDL.scala.html#9860" title="org.scalaquery.ql.DDL">DDL</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="108027">createTable</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="StringBuilder" id="108031">b</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;CREATE TABLE &quot;)" class="string">&quot;CREATE TABLE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span>
      <span class="keyword">var</span> <a title="Boolean" id="108032">first</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.scalaquery.ql.NamedColumn[_]" id="108074">n</a> &lt;- <a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84563" title="(f: org.scalaquery.ql.NamedColumn[_] =&gt; Unit)Unit">create_*</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#108032" title="Boolean">first</a><span class="delimiter">)</span> <a href="#108032" title="Boolean">first</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">else</span> <a href="#108031" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>
        <a href="#107794" title="(c: org.scalaquery.ql.NamedColumn[_])BasicDDLBuilder.this.BasicColumnDDLBuilder">createColumnDDLBuilder</a><span class="delimiter">(</span><a href="#108074" title="org.scalaquery.ql.NamedColumn[_]">n</a><span class="delimiter">)</span>.<a href="#107872" title="(sb: StringBuilder)Unit">appendColumn</a><span class="delimiter">(</span><a href="#108031" title="StringBuilder">b</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#108031" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <a href="#108031" title="StringBuilder">b</a>.<span title="()java.lang.String">toString</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="108028">createIndexes</a> = <a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84574" title="=&gt; Iterable[org.scalaquery.ql.Index]">indexes</a>.<span title="(f: org.scalaquery.ql.Index =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.scalaquery.ql.Index],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,java.lang.String,Iterable[java.lang.String]]" class="delimiter">(</span><a href="#107796" title="(idx: org.scalaquery.ql.Index)java.lang.String">createIndex</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Iterable[org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]]" id="108029">foreignKeys</a> = <a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84571" title="=&gt; Iterable[org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]]">foreignKeys</a>
    <span class="keyword">val</span> <a title="Iterable[org.scalaquery.ql.PrimaryKey]" id="108030">primaryKeys</a> = <a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84572" title="=&gt; Iterable[org.scalaquery.ql.PrimaryKey]">primaryKeys</a>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#108030" title="Iterable[org.scalaquery.ql.PrimaryKey]">primaryKeys</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <a href="../../SQueryException.scala.html#25911" title="org.scalaquery.SQueryException" class="keyword">new</a> <a href="../../SQueryException.scala.html#9548" title="org.scalaquery.SQueryException">SQueryException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Table &quot;)" class="string">&quot;Table &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; defines multiple primary keys&quot;)" class="string">&quot; defines multiple primary keys&quot;</span><span class="delimiter">)</span>
    <a href="#108377" title="java.lang.Object with org.scalaquery.ql.DDL{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalaquery.ql.DDL" id="108377">DDL</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="108381">createPhase1</a> = <span title="(elems: java.lang.String*)Iterable[java.lang.String]">Iterable</span><span class="delimiter">(</span><a href="#108027" title="java.lang.String">createTable</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[java.lang.String],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">++</span> <a href="#108030" title="Iterable[org.scalaquery.ql.PrimaryKey]">primaryKeys</a>.<span title="(f: org.scalaquery.ql.PrimaryKey =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.scalaquery.ql.PrimaryKey],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,java.lang.String,Iterable[java.lang.String]]" class="delimiter">(</span><a href="#107799" title="(pk: org.scalaquery.ql.PrimaryKey)java.lang.String">createPrimaryKey</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[java.lang.String],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">++</span> <a href="#108028" title="Iterable[java.lang.String]">createIndexes</a>
      <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="108383">createPhase2</a> = <a href="#108029" title="Iterable[org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]]">foreignKeys</a>.<span title="(f: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]] =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,java.lang.String,Iterable[java.lang.String]]" class="delimiter">(</span><a href="#107797" title="(fk: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]])java.lang.String">createForeignKey</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="108385">dropPhase1</a> = <a href="#108029" title="Iterable[org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]]">foreignKeys</a>.<span title="(f: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]] =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,java.lang.String,Iterable[java.lang.String]]" class="delimiter">(</span><a href="#107801" title="(fk: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]])java.lang.String">dropForeignKey</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Iterable[java.lang.String]" id="108387">dropPhase2</a> = <a href="#108030" title="Iterable[org.scalaquery.ql.PrimaryKey]">primaryKeys</a>.<span title="(f: org.scalaquery.ql.PrimaryKey =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.scalaquery.ql.PrimaryKey],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,java.lang.String,Iterable[java.lang.String]]" class="delimiter">(</span><a href="#107802" title="(pk: org.scalaquery.ql.PrimaryKey)java.lang.String">dropPrimaryKey</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[java.lang.String],java.lang.String,Iterable[java.lang.String]])Iterable[java.lang.String]">++</span> <span title="(elems: java.lang.String*)Iterable[java.lang.String]">Iterable</span><span class="delimiter">(</span><span title="java.lang.String(&quot;DROP TABLE &quot;)" class="string">&quot;DROP TABLE &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(idx: org.scalaquery.ql.Index)java.lang.String" id="107796">createIndex</a><span class="delimiter">(</span><a title="org.scalaquery.ql.Index" id="108119">idx</a>: <a href="../Index.scala.html#9871" title="org.scalaquery.ql.Index">Index</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="StringBuilder" id="108122">b</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;CREATE &quot;)" class="string">&quot;CREATE &quot;</span>
    <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#108119" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85956" title="=&gt; Boolean">unique</a><span class="delimiter">)</span> <a href="#108122" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;UNIQUE &quot;)" class="string">&quot;UNIQUE &quot;</span>
    <a href="#108122" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;INDEX &quot;)" class="string">&quot;INDEX &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108119" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85950" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; ON &quot;)" class="string">&quot; ON &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span>
    <a href="#107803" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit">addIndexColumnList</a><span class="delimiter">(</span><a href="#108119" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85954" title="=&gt; org.scalaquery.ql.ColumnBase[_]">on</a>, <a href="#108122" title="StringBuilder">b</a>, <a href="#108119" title="org.scalaquery.ql.Index">idx</a>.<a href="../Index.scala.html#85952" title="=&gt; org.scalaquery.ql.AbstractTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span>
    <a href="#108122" title="StringBuilder">b</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
    <a href="#108122" title="StringBuilder">b</a>.<span title="()java.lang.String">toString</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(fk: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]])java.lang.String" id="107797">createForeignKey</a><span class="delimiter">(</span><a title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]" id="108545">fk</a>: <a href="../Constraint.scala.html#9844" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">ForeignKey</a><span class="delimiter">[</span>_ &lt;: AbstractTable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="StringBuilder" id="108548">sb</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;ALTER TABLE &quot;)" class="string">&quot;ALTER TABLE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; ADD &quot;)" class="string">&quot; ADD &quot;</span>
    <a href="#107798" title="(fk: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]], sb: StringBuilder)Unit">addForeignKey</a><span class="delimiter">(</span><a href="#108545" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>, <a href="#108548" title="StringBuilder">sb</a><span class="delimiter">)</span>
    <a href="#108548" title="StringBuilder">sb</a>.<span title="()java.lang.String">toString</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(fk: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]], sb: StringBuilder)Unit" id="107798">addForeignKey</a><span class="delimiter">(</span><a title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]" id="108563">fk</a>: <a href="../Constraint.scala.html#9844" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">ForeignKey</a><span class="delimiter">[</span>_ &lt;: AbstractTable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="StringBuilder" id="108564">sb</a>: <span title="StringBuilder">StringBuilder</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#108564" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;CONSTRAINT &quot;)" class="string">&quot;CONSTRAINT &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84526" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; FOREIGN KEY(&quot;)" class="string">&quot; FOREIGN KEY(&quot;</span>
    <a href="#107804" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit">addForeignKeyColumnList</a><span class="delimiter">(</span><a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84534" title="=&gt; org.scalaquery.util.Node">sourceColumns</a>, <a href="#108564" title="StringBuilder">sb</a>, <a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span>
    <a href="#108564" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;) REFERENCES &quot;)" class="string">&quot;) REFERENCES &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84530" title="=&gt; org.scalaquery.ql.AbstractTable[_]">targetTable</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span>
    <a href="#107804" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit">addForeignKeyColumnList</a><span class="delimiter">(</span><a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84548" title="=&gt; org.scalaquery.ql.ColumnBase[_]">targetColumnsForOriginalTargetTable</a>, <a href="#108564" title="StringBuilder">sb</a>, <a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84530" title="=&gt; org.scalaquery.ql.AbstractTable[_]">targetTable</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span>
    <a href="#108564" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;) ON UPDATE &quot;)" class="string">&quot;) ON UPDATE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84538" title="=&gt; org.scalaquery.ql.ForeignKeyAction">onUpdate</a>.<a href="../Constraint.scala.html#53765" title="=&gt; String">action</a>
    <a href="#108564" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; ON DELETE &quot;)" class="string">&quot; ON DELETE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="#108563" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84540" title="=&gt; org.scalaquery.ql.ForeignKeyAction">onDelete</a>.<a href="../Constraint.scala.html#53765" title="=&gt; String">action</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(pk: org.scalaquery.ql.PrimaryKey)java.lang.String" id="107799">createPrimaryKey</a><span class="delimiter">(</span><a title="org.scalaquery.ql.PrimaryKey" id="108436">pk</a>: <a href="../Constraint.scala.html#9853" title="org.scalaquery.ql.PrimaryKey">PrimaryKey</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="StringBuilder" id="108439">sb</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;ALTER TABLE &quot;)" class="string">&quot;ALTER TABLE &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; ADD &quot;)" class="string">&quot; ADD &quot;</span>
    <a href="#107800" title="(pk: org.scalaquery.ql.PrimaryKey, sb: StringBuilder)Unit">addPrimaryKey</a><span class="delimiter">(</span><a href="#108436" title="org.scalaquery.ql.PrimaryKey">pk</a>, <a href="#108439" title="StringBuilder">sb</a><span class="delimiter">)</span>
    <a href="#108439" title="StringBuilder">sb</a>.<span title="()java.lang.String">toString</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(pk: org.scalaquery.ql.PrimaryKey, sb: StringBuilder)Unit" id="107800">addPrimaryKey</a><span class="delimiter">(</span><a title="org.scalaquery.ql.PrimaryKey" id="108454">pk</a>: <a href="../Constraint.scala.html#9853" title="org.scalaquery.ql.PrimaryKey">PrimaryKey</a>, <a title="StringBuilder" id="108455">sb</a>: <span title="StringBuilder">StringBuilder</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#108455" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;CONSTRAINT &quot;)" class="string">&quot;CONSTRAINT &quot;</span> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108454" title="org.scalaquery.ql.PrimaryKey">pk</a>.<a href="../Constraint.scala.html#85410" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot; PRIMARY KEY(&quot;)" class="string">&quot; PRIMARY KEY(&quot;</span>
    <a href="#107805" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit">addPrimaryKeyColumnList</a><span class="delimiter">(</span><a href="#108454" title="org.scalaquery.ql.PrimaryKey">pk</a>.<a href="../Constraint.scala.html#85412" title="=&gt; org.scalaquery.util.Node">columns</a>, <a href="#108455" title="StringBuilder">sb</a>, <a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span>
    <a href="#108455" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(fk: org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]])java.lang.String" id="107801">dropForeignKey</a><span class="delimiter">(</span><a title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]" id="108667">fk</a>: <a href="../Constraint.scala.html#9844" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">ForeignKey</a><span class="delimiter">[</span>_ &lt;: AbstractTable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="java.lang.String(&quot;ALTER TABLE &quot;)" class="string">&quot;ALTER TABLE &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; DROP CONSTRAINT &quot;)" class="string">&quot; DROP CONSTRAINT &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108667" title="org.scalaquery.ql.ForeignKey[_ &lt;: org.scalaquery.ql.AbstractTable[_]]">fk</a>.<a href="../Constraint.scala.html#84526" title="=&gt; String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(pk: org.scalaquery.ql.PrimaryKey)java.lang.String" id="107802">dropPrimaryKey</a><span class="delimiter">(</span><a title="org.scalaquery.ql.PrimaryKey" id="108765">pk</a>: <a href="../Constraint.scala.html#9853" title="org.scalaquery.ql.PrimaryKey">PrimaryKey</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="java.lang.String(&quot;ALTER TABLE &quot;)" class="string">&quot;ALTER TABLE &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#107841" title="=&gt; org.scalaquery.ql.basic.AbstractBasicTable[_]">table</a>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; DROP CONSTRAINT &quot;)" class="string">&quot; DROP CONSTRAINT &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108765" title="org.scalaquery.ql.PrimaryKey">pk</a>.<a href="../Constraint.scala.html#85410" title="=&gt; String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit" id="107803">addIndexColumnList</a><span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="108162">columns</a>: <a href="../../util/Node.scala.html#10735" title="org.scalaquery.util.Node">Node</a>, <a title="StringBuilder" id="108163">sb</a>: <span title="StringBuilder">StringBuilder</span>, <a title="String" id="108164">requiredTableName</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#107806" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String, typeInfo: String)Unit">addColumnList</a><span class="delimiter">(</span><a href="#108162" title="org.scalaquery.util.Node">columns</a>, <a href="#108163" title="StringBuilder">sb</a>, <a href="#108164" title="String">requiredTableName</a>, <span title="java.lang.String(&quot;index&quot;)" class="string">&quot;index&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit" id="107804">addForeignKeyColumnList</a><span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="108846">columns</a>: <a href="../../util/Node.scala.html#10735" title="org.scalaquery.util.Node">Node</a>, <a title="StringBuilder" id="108847">sb</a>: <span title="StringBuilder">StringBuilder</span>, <a title="String" id="108848">requiredTableName</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#107806" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String, typeInfo: String)Unit">addColumnList</a><span class="delimiter">(</span><a href="#108846" title="org.scalaquery.util.Node">columns</a>, <a href="#108847" title="StringBuilder">sb</a>, <a href="#108848" title="String">requiredTableName</a>, <span title="java.lang.String(&quot;foreign key constraint&quot;)" class="string">&quot;foreign key constraint&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String)Unit" id="107805">addPrimaryKeyColumnList</a><span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="108892">columns</a>: <a href="../../util/Node.scala.html#10735" title="org.scalaquery.util.Node">Node</a>, <a title="StringBuilder" id="108893">sb</a>: <span title="StringBuilder">StringBuilder</span>, <a title="String" id="108894">requiredTableName</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#107806" title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String, typeInfo: String)Unit">addColumnList</a><span class="delimiter">(</span><a href="#108892" title="org.scalaquery.util.Node">columns</a>, <a href="#108893" title="StringBuilder">sb</a>, <a href="#108894" title="String">requiredTableName</a>, <span title="java.lang.String(&quot;foreign key constraint&quot;)" class="string">&quot;foreign key constraint&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(columns: org.scalaquery.util.Node, sb: StringBuilder, requiredTableName: String, typeInfo: String)Unit" id="107806">addColumnList</a><span class="delimiter">(</span><a title="org.scalaquery.util.Node" id="108167">columns</a>: <a href="../../util/Node.scala.html#10735" title="org.scalaquery.util.Node">Node</a>, <a title="StringBuilder" id="108168">sb</a>: <span title="StringBuilder">StringBuilder</span>, <a title="String" id="108169">requiredTableName</a>: <span title="String">String</span>, <a title="String" id="108170">typeInfo</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Boolean" id="108173">first</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">def</span> <a title="(c: Any)Unit" id="108174">f</a><span class="delimiter">(</span><a title="Any" id="108175">c</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#108175" title="Any">c</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="108176">p</a>:<a href="../Projection.scala.html#9912" title="org.scalaquery.ql.Projection[_]">Projection</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="108320">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(f: Int =&gt; Unit)Unit">until</span> <a href="#108176" title="org.scalaquery.ql.Projection[_]">p</a>.<span title="=&gt; Int">productArity</span><span class="delimiter">)</span>
          <a href="#108174" title="(c: Any)Unit">f</a><span class="delimiter">(</span><a href="../../util/Node.scala.html#79027" title="(o: Any)org.scalaquery.util.Node">Node</a><span class="delimiter">(</span><a href="#108176" title="org.scalaquery.ql.Projection[_]">p</a>.<span title="(n: Int)Any">productElement</span><span class="delimiter">(</span><a href="#108320" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Unit" id="108322">t</a>:<a href="../TableBase.scala.html#10263" title="org.scalaquery.ql.AbstractTable[_]">AbstractTable</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt; <a href="#108174" title="(c: Any)Unit">f</a><span class="delimiter">(</span><a href="../../util/Node.scala.html#79027" title="(o: Any)org.scalaquery.util.Node">Node</a><span class="delimiter">(</span><a href="#108322" title="org.scalaquery.ql.AbstractTable[_]">t</a>.<a href="../TableBase.scala.html#84562" title="=&gt; org.scalaquery.ql.ColumnBase[_]">*</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Unit" id="108324">n</a>:<a href="../ColumnBase.scala.html#9819" title="org.scalaquery.ql.NamedColumn[_]">NamedColumn</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#108173" title="Boolean">first</a><span class="delimiter">)</span> <a href="#108173" title="Boolean">first</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">else</span> <a href="#108168" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>
        <a href="#108168" title="StringBuilder">sb</a> <span title="(s: String)StringBuilder">append</span> <a href="BasicSQLUtils.scala.html#107847" title="(id: String)String">quoteIdentifier</a><span class="delimiter">(</span><a href="#108324" title="org.scalaquery.ql.NamedColumn[_]">n</a>.<a href="../ColumnBase.scala.html#80455" title="=&gt; String">name</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#108169" title="String">requiredTableName</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#108324" title="org.scalaquery.ql.NamedColumn[_]">n</a>.<a href="../ColumnBase.scala.html#80453" title="=&gt; org.scalaquery.util.Node">table</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalaquery.ql.AbstractTable[_$12]" class="delimiter">[</span><a href="../TableBase.scala.html#10263" title="org.scalaquery.ql.AbstractTable[_]">AbstractTable</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="../TableBase.scala.html#84557" title="=&gt; String">tableName</a><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <a href="../../SQueryException.scala.html#25911" title="org.scalaquery.SQueryException" class="keyword">new</a> <a href="../../SQueryException.scala.html#9548" title="org.scalaquery.SQueryException">SQueryException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;All columns in &quot;)" class="string">&quot;All columns in &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#108170" title="String">typeInfo</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; must belong to table &quot;)" class="string">&quot; must belong to table &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#108169" title="String">requiredTableName</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="../../SQueryException.scala.html#25911" title="org.scalaquery.SQueryException" class="keyword">new</a> <a href="../../SQueryException.scala.html#9548" title="org.scalaquery.SQueryException">SQueryException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Cannot use column &quot;)" class="string">&quot;Cannot use column &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#108175" title="Any">c</a><span title="(x$1: Any)java.lang.String">+</span>
        <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#108170" title="String">typeInfo</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; (only named columns and projections are allowed)&quot;)" class="string">&quot; (only named columns and projections are allowed)&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#108174" title="(c: Any)Unit">f</a><span class="delimiter">(</span><a href="../../util/Node.scala.html#79027" title="(o: Any)org.scalaquery.util.Node">Node</a><span class="delimiter">(</span><a href="#108167" title="org.scalaquery.util.Node">columns</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>