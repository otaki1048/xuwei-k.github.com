<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalaquery/session/Session.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.scalaquery.session

<span class="keyword">import</span> java.sql.<span class="delimiter">{</span>PreparedStatement, Connection, DatabaseMetaData, Statement<span class="delimiter">}</span>
<span class="keyword">import</span> org.scalaquery.SQueryException

<span class="comment">/**
 * A database session which opens a connection and transaction on demand.
 */</span>
<span class="keyword">trait</span> <a title="trait Session extends java.lang.Object with java.io.Closeable with ScalaObject" id="10660">Session</a> <span title="ScalaObject" class="keyword">extends</span> java.io.<span title="java.io.Closeable">Closeable</span> <span class="delimiter">{</span> self =&gt;

  <span class="keyword">def</span> <a title="=&gt; java.sql.Connection" id="13175">conn</a>: <span title="java.sql.Connection">Connection</span>
  <span class="keyword">def</span> <a title="=&gt; java.sql.DatabaseMetaData" id="13176">metaData</a>: <span title="java.sql.DatabaseMetaData">DatabaseMetaData</span>
  <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.DatabaseCapabilities" id="13177">capabilities</a>: <a href="DatabaseCapabilities.scala.html#10617" title="org.scalaquery.session.DatabaseCapabilities">DatabaseCapabilities</a>

  <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.ResultSetType" id="13178">resultSetType</a>: <a href="ResultSetType.scala.html#10652" title="org.scalaquery.session.ResultSetType">ResultSetType</a> = <a href="ResultSetType.scala.html#10653" title="object org.scalaquery.session.ResultSetType">ResultSetType</a>.<a href="ResultSetType.scala.html#25679" title="object org.scalaquery.session.ResultSetType.Auto">Auto</a>
  <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.ResultSetConcurrency" id="13179">resultSetConcurrency</a>: <a href="ResultSetConcurrency.scala.html#10638" title="org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a> = <a href="ResultSetConcurrency.scala.html#10639" title="object org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25671" title="object org.scalaquery.session.ResultSetConcurrency.Auto">Auto</a>
  <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.ResultSetHoldability" id="13180">resultSetHoldability</a>: <a href="ResultSetHoldability.scala.html#10645" title="org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a> = <a href="ResultSetHoldability.scala.html#10646" title="object org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28360" title="object org.scalaquery.session.ResultSetHoldability.Auto">Auto</a>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(sql: String, defaultType: org.scalaquery.session.ResultSetType, defaultConcurrency: org.scalaquery.session.ResultSetConcurrency, defaultHoldability: org.scalaquery.session.ResultSetHoldability)java.sql.PreparedStatement" id="13181">prepareStatement</a><span class="delimiter">(</span><a title="String" id="28372">sql</a>: <span title="String">String</span>,
             <a title="org.scalaquery.session.ResultSetType" id="28377">defaultType</a>: <a href="ResultSetType.scala.html#10652" title="org.scalaquery.session.ResultSetType">ResultSetType</a> = <a href="ResultSetType.scala.html#10653" title="object org.scalaquery.session.ResultSetType">ResultSetType</a>.<a href="ResultSetType.scala.html#25681" title="object org.scalaquery.session.ResultSetType.ForwardOnly">ForwardOnly</a>,
             <a title="org.scalaquery.session.ResultSetConcurrency" id="28378">defaultConcurrency</a>: <a href="ResultSetConcurrency.scala.html#10638" title="org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a> = <a href="ResultSetConcurrency.scala.html#10639" title="object org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25673" title="object org.scalaquery.session.ResultSetConcurrency.ReadOnly">ReadOnly</a>,
             <a title="org.scalaquery.session.ResultSetHoldability" id="28379">defaultHoldability</a>: <a href="ResultSetHoldability.scala.html#10645" title="org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a> = <a href="ResultSetHoldability.scala.html#10646" title="object org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28362" title="object org.scalaquery.session.ResultSetHoldability.Default">Default</a><span class="delimiter">)</span>: <span title="java.sql.PreparedStatement">PreparedStatement</span> = <span class="delimiter">{</span>
    <a href="#13180" title="=&gt; org.scalaquery.session.ResultSetHoldability">resultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28358" title="(r: org.scalaquery.session.ResultSetHoldability)org.scalaquery.session.ResultSetHoldability">withDefault</a><span class="delimiter">(</span><a href="#28379" title="org.scalaquery.session.ResultSetHoldability">defaultHoldability</a><span class="delimiter">)</span> <span title="java.sql.PreparedStatement" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="ResultSetHoldability.scala.html#10646" title="java.sql.PreparedStatement">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28362" title="object org.scalaquery.session.ResultSetHoldability.Default">Default</a> =&gt;
        <a href="#13175" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#28372" title="String">sql</a>, <a href="#13178" title="=&gt; org.scalaquery.session.ResultSetType">resultSetType</a>.<a href="ResultSetType.scala.html#25588" title="(r: org.scalaquery.session.ResultSetType)org.scalaquery.session.ResultSetType">withDefault</a><span class="delimiter">(</span><a href="#28377" title="org.scalaquery.session.ResultSetType">defaultType</a><span class="delimiter">)</span>.<a href="ResultSetType.scala.html#25579" title="=&gt; Int">intValue</a>,
          <a href="#13179" title="=&gt; org.scalaquery.session.ResultSetConcurrency">resultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25576" title="(r: org.scalaquery.session.ResultSetConcurrency)org.scalaquery.session.ResultSetConcurrency">withDefault</a><span class="delimiter">(</span><a href="#28378" title="org.scalaquery.session.ResultSetConcurrency">defaultConcurrency</a><span class="delimiter">)</span>.<a href="ResultSetConcurrency.scala.html#25567" title="=&gt; Int">intValue</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="java.sql.PreparedStatement" id="127579">h</a> =&gt;
        <a href="#13175" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#28372" title="String">sql</a>, <a href="#13178" title="=&gt; org.scalaquery.session.ResultSetType">resultSetType</a>.<a href="ResultSetType.scala.html#25588" title="(r: org.scalaquery.session.ResultSetType)org.scalaquery.session.ResultSetType">withDefault</a><span class="delimiter">(</span><a href="#28377" title="org.scalaquery.session.ResultSetType">defaultType</a><span class="delimiter">)</span>.<a href="ResultSetType.scala.html#25579" title="=&gt; Int">intValue</a>,
          <a href="#13179" title="=&gt; org.scalaquery.session.ResultSetConcurrency">resultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25576" title="(r: org.scalaquery.session.ResultSetConcurrency)org.scalaquery.session.ResultSetConcurrency">withDefault</a><span class="delimiter">(</span><a href="#28378" title="org.scalaquery.session.ResultSetConcurrency">defaultConcurrency</a><span class="delimiter">)</span>.<a href="ResultSetConcurrency.scala.html#25567" title="=&gt; Int">intValue</a>,
          <a href="#127579" title="org.scalaquery.session.ResultSetHoldability">h</a>.<a href="ResultSetHoldability.scala.html#28349" title="=&gt; Int">intValue</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(defaultType: org.scalaquery.session.ResultSetType, defaultConcurrency: org.scalaquery.session.ResultSetConcurrency, defaultHoldability: org.scalaquery.session.ResultSetHoldability)java.sql.Statement" id="13182">createStatement</a><span class="delimiter">(</span><a title="org.scalaquery.session.ResultSetType" id="127586">defaultType</a>: <a href="ResultSetType.scala.html#10652" title="org.scalaquery.session.ResultSetType">ResultSetType</a> = <a href="ResultSetType.scala.html#10653" title="object org.scalaquery.session.ResultSetType">ResultSetType</a>.<a href="ResultSetType.scala.html#25681" title="object org.scalaquery.session.ResultSetType.ForwardOnly">ForwardOnly</a>,
             <a title="org.scalaquery.session.ResultSetConcurrency" id="127587">defaultConcurrency</a>: <a href="ResultSetConcurrency.scala.html#10638" title="org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a> = <a href="ResultSetConcurrency.scala.html#10639" title="object org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25673" title="object org.scalaquery.session.ResultSetConcurrency.ReadOnly">ReadOnly</a>,
             <a title="org.scalaquery.session.ResultSetHoldability" id="127588">defaultHoldability</a>: <a href="ResultSetHoldability.scala.html#10645" title="org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a> = <a href="ResultSetHoldability.scala.html#10646" title="object org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28362" title="object org.scalaquery.session.ResultSetHoldability.Default">Default</a><span class="delimiter">)</span>: <span title="java.sql.Statement">Statement</span> = <span class="delimiter">{</span>
    <a href="#13180" title="=&gt; org.scalaquery.session.ResultSetHoldability">resultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28358" title="(r: org.scalaquery.session.ResultSetHoldability)org.scalaquery.session.ResultSetHoldability">withDefault</a><span class="delimiter">(</span><a href="#127588" title="org.scalaquery.session.ResultSetHoldability">defaultHoldability</a><span class="delimiter">)</span> <span title="java.sql.Statement" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="ResultSetHoldability.scala.html#10646" title="java.sql.Statement">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28362" title="object org.scalaquery.session.ResultSetHoldability.Default">Default</a> =&gt;
        <a href="#13175" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: Int, x$2: Int)java.sql.Statement">createStatement</span><span class="delimiter">(</span><a href="#13178" title="=&gt; org.scalaquery.session.ResultSetType">resultSetType</a>.<a href="ResultSetType.scala.html#25588" title="(r: org.scalaquery.session.ResultSetType)org.scalaquery.session.ResultSetType">withDefault</a><span class="delimiter">(</span><a href="#127586" title="org.scalaquery.session.ResultSetType">defaultType</a><span class="delimiter">)</span>.<a href="ResultSetType.scala.html#25579" title="=&gt; Int">intValue</a>,
          <a href="#13179" title="=&gt; org.scalaquery.session.ResultSetConcurrency">resultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25576" title="(r: org.scalaquery.session.ResultSetConcurrency)org.scalaquery.session.ResultSetConcurrency">withDefault</a><span class="delimiter">(</span><a href="#127587" title="org.scalaquery.session.ResultSetConcurrency">defaultConcurrency</a><span class="delimiter">)</span>.<a href="ResultSetConcurrency.scala.html#25567" title="=&gt; Int">intValue</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="java.sql.Statement" id="127591">h</a> =&gt;
        <a href="#13175" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: Int, x$2: Int, x$3: Int)java.sql.Statement">createStatement</span><span class="delimiter">(</span><a href="#13178" title="=&gt; org.scalaquery.session.ResultSetType">resultSetType</a>.<a href="ResultSetType.scala.html#25588" title="(r: org.scalaquery.session.ResultSetType)org.scalaquery.session.ResultSetType">withDefault</a><span class="delimiter">(</span><a href="#127586" title="org.scalaquery.session.ResultSetType">defaultType</a><span class="delimiter">)</span>.<a href="ResultSetType.scala.html#25579" title="=&gt; Int">intValue</a>,
          <a href="#13179" title="=&gt; org.scalaquery.session.ResultSetConcurrency">resultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25576" title="(r: org.scalaquery.session.ResultSetConcurrency)org.scalaquery.session.ResultSetConcurrency">withDefault</a><span class="delimiter">(</span><a href="#127587" title="org.scalaquery.session.ResultSetConcurrency">defaultConcurrency</a><span class="delimiter">)</span>.<a href="ResultSetConcurrency.scala.html#25567" title="=&gt; Int">intValue</a>,
          <a href="#127591" title="org.scalaquery.session.ResultSetHoldability">h</a>.<a href="ResultSetHoldability.scala.html#28349" title="=&gt; Int">intValue</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](sql: String, defaultType: org.scalaquery.session.ResultSetType, defaultConcurrency: org.scalaquery.session.ResultSetConcurrency, defaultHoldability: org.scalaquery.session.ResultSetHoldability)(f: java.sql.PreparedStatement =&gt; T)T" id="13183">withPreparedStatement</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="85594">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="85586">sql</a>: <span title="String">String</span>,
              <a title="org.scalaquery.session.ResultSetType" id="85592">defaultType</a>: <a href="ResultSetType.scala.html#10652" title="org.scalaquery.session.ResultSetType">ResultSetType</a> = <a href="ResultSetType.scala.html#10653" title="object org.scalaquery.session.ResultSetType">ResultSetType</a>.<a href="ResultSetType.scala.html#25681" title="object org.scalaquery.session.ResultSetType.ForwardOnly">ForwardOnly</a>,
              <a title="org.scalaquery.session.ResultSetConcurrency" id="85595">defaultConcurrency</a>: <a href="ResultSetConcurrency.scala.html#10638" title="org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a> = <a href="ResultSetConcurrency.scala.html#10639" title="object org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25673" title="object org.scalaquery.session.ResultSetConcurrency.ReadOnly">ReadOnly</a>,
              <a title="org.scalaquery.session.ResultSetHoldability" id="85598">defaultHoldability</a>: <a href="ResultSetHoldability.scala.html#10645" title="org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a> = <a href="ResultSetHoldability.scala.html#10646" title="object org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28362" title="object org.scalaquery.session.ResultSetHoldability.Default">Default</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.PreparedStatement =&gt; T" id="85590">f</a>: <span class="delimiter">(</span>PreparedStatement =&gt; T<span class="delimiter">)</span><span class="delimiter">)</span>: <a href="#85594" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.PreparedStatement" id="127594">st</a> = <a href="#13181" title="(sql: String, defaultType: org.scalaquery.session.ResultSetType, defaultConcurrency: org.scalaquery.session.ResultSetConcurrency, defaultHoldability: org.scalaquery.session.ResultSetHoldability)java.sql.PreparedStatement">prepareStatement</a><span class="delimiter">(</span><a href="#85586" title="String">sql</a>, <a href="#85592" title="org.scalaquery.session.ResultSetType">defaultType</a>, <a href="#85595" title="org.scalaquery.session.ResultSetConcurrency">defaultConcurrency</a>, <a href="#85598" title="org.scalaquery.session.ResultSetHoldability">defaultHoldability</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#85590" title="(v1: java.sql.PreparedStatement)T">f</a><span class="delimiter">(</span><a href="#127594" title="java.sql.PreparedStatement">st</a><span class="delimiter">)</span> <span class="keyword">finally</span> <a href="#127594" title="java.sql.PreparedStatement">st</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](defaultType: org.scalaquery.session.ResultSetType, defaultConcurrency: org.scalaquery.session.ResultSetConcurrency, defaultHoldability: org.scalaquery.session.ResultSetHoldability)(f: java.sql.Statement =&gt; T)T" id="13186">withStatement</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="127603">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.scalaquery.session.ResultSetType" id="127601">defaultType</a>: <a href="ResultSetType.scala.html#10652" title="org.scalaquery.session.ResultSetType">ResultSetType</a> = <a href="ResultSetType.scala.html#10653" title="object org.scalaquery.session.ResultSetType">ResultSetType</a>.<a href="ResultSetType.scala.html#25681" title="object org.scalaquery.session.ResultSetType.ForwardOnly">ForwardOnly</a>,
              <a title="org.scalaquery.session.ResultSetConcurrency" id="127604">defaultConcurrency</a>: <a href="ResultSetConcurrency.scala.html#10638" title="org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a> = <a href="ResultSetConcurrency.scala.html#10639" title="object org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a>.<a href="ResultSetConcurrency.scala.html#25673" title="object org.scalaquery.session.ResultSetConcurrency.ReadOnly">ReadOnly</a>,
              <a title="org.scalaquery.session.ResultSetHoldability" id="127607">defaultHoldability</a>: <a href="ResultSetHoldability.scala.html#10645" title="org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a> = <a href="ResultSetHoldability.scala.html#10646" title="object org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a>.<a href="ResultSetHoldability.scala.html#28362" title="object org.scalaquery.session.ResultSetHoldability.Default">Default</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Statement =&gt; T" id="127599">f</a>: <span class="delimiter">(</span>Statement =&gt; T<span class="delimiter">)</span><span class="delimiter">)</span>: <a href="#127603" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.Statement" id="127611">st</a> = <a href="#13182" title="(defaultType: org.scalaquery.session.ResultSetType, defaultConcurrency: org.scalaquery.session.ResultSetConcurrency, defaultHoldability: org.scalaquery.session.ResultSetHoldability)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#127601" title="org.scalaquery.session.ResultSetType">defaultType</a>, <a href="#127604" title="org.scalaquery.session.ResultSetConcurrency">defaultConcurrency</a>, <a href="#127607" title="org.scalaquery.session.ResultSetHoldability">defaultHoldability</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#127599" title="(v1: java.sql.Statement)T">f</a><span class="delimiter">(</span><a href="#127611" title="java.sql.Statement">st</a><span class="delimiter">)</span> <span class="keyword">finally</span> <a href="#127611" title="java.sql.Statement">st</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="13189">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Call this method within a &lt;em&gt;withTransaction&lt;/em&gt; call to roll back the current
   * transaction after &lt;em&gt;withTransaction&lt;/em&gt; returns.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="13190">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Run the supplied function within a transaction. If the function throws an Exception
   * or the session's rollback() method is called, the transaction is rolled back,
   * otherwise it is commited when the function returns.
   */</span>
  <span class="keyword">def</span> <a title="[T](f: =&gt; T)T" id="13191">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13193">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="25700">f</a>: =&gt; T<span class="delimiter">)</span>: <a href="#13193" title="T">T</a>

  <span class="keyword">def</span> <a title="(rsType: org.scalaquery.session.ResultSetType, rsConcurrency: org.scalaquery.session.ResultSetConcurrency, rsHoldability: org.scalaquery.session.ResultSetHoldability)org.scalaquery.session.Session" id="13194">forParameters</a><span class="delimiter">(</span><a title="org.scalaquery.session.ResultSetType" id="127225">rsType</a>: <a href="ResultSetType.scala.html#10652" title="org.scalaquery.session.ResultSetType">ResultSetType</a> = <a href="#13178" title="=&gt; org.scalaquery.session.ResultSetType">resultSetType</a>, <a title="org.scalaquery.session.ResultSetConcurrency" id="127226">rsConcurrency</a>: <a href="ResultSetConcurrency.scala.html#10638" title="org.scalaquery.session.ResultSetConcurrency">ResultSetConcurrency</a> = <a href="#13179" title="=&gt; org.scalaquery.session.ResultSetConcurrency">resultSetConcurrency</a>,
                    <a title="org.scalaquery.session.ResultSetHoldability" id="127227">rsHoldability</a>: <a href="ResultSetHoldability.scala.html#10645" title="org.scalaquery.session.ResultSetHoldability">ResultSetHoldability</a> = <a href="#13180" title="=&gt; org.scalaquery.session.ResultSetHoldability">resultSetHoldability</a><span class="delimiter">)</span>: <a href="#10660" title="org.scalaquery.session.Session">Session</a> = <a href="#127614" title="java.lang.Object with org.scalaquery.session.Session" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalaquery.session.Session" id="127614">Session</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.ResultSetType" id="127618">resultSetType</a> = <a href="#127225" title="org.scalaquery.session.ResultSetType">rsType</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.ResultSetConcurrency" id="127619">resultSetConcurrency</a> = <a href="#127226" title="org.scalaquery.session.ResultSetConcurrency">rsConcurrency</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.ResultSetHoldability" id="127620">resultSetHoldability</a> = <a href="#127227" title="org.scalaquery.session.ResultSetHoldability">rsHoldability</a>
    <span class="keyword">def</span> <a title="=&gt; java.sql.Connection" id="127621">conn</a> = <a href="#10660" title="Session.this.type">self</a>.<a href="#13175" title="=&gt; java.sql.Connection">conn</a>
    <span class="keyword">def</span> <a title="=&gt; java.sql.DatabaseMetaData" id="127622">metaData</a> = <a href="#10660" title="Session.this.type">self</a>.<a href="#13176" title="=&gt; java.sql.DatabaseMetaData">metaData</a>
    <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.DatabaseCapabilities" id="127623">capabilities</a> = <a href="#10660" title="Session.this.type">self</a>.<a href="#13177" title="=&gt; org.scalaquery.session.DatabaseCapabilities">capabilities</a>
    <span class="keyword">def</span> <a title="()Unit" id="127624">close</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#10660" title="Session.this.type">self</a>.<a href="#13189" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()Unit" id="127625">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#10660" title="Session.this.type">self</a>.<a href="#13190" title="()Unit">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[T](f: =&gt; T)T" id="127626">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="127628">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="127651">f</a>: =&gt; T<span class="delimiter">)</span> = <a href="#10660" title="Session.this.type">self</a>.<a href="#13191" title="(f: =&gt; T)T">withTransaction</a><span class="delimiter">(</span><a href="#127651" title="=&gt; T">f</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class BaseSession extends java.lang.Object with org.scalaquery.session.Session with ScalaObject" id="10661">BaseSession</a> <a href="#10661" title="ScalaObject" class="keyword">private</a><span class="delimiter">[</span>session<span class="delimiter">]</span> <span class="delimiter">(</span><a title="org.scalaquery.session.Database" id="124542">db</a>: <a href="Database.scala.html#10611" title="org.scalaquery.session.Database">Database</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10660" title="org.scalaquery.session.Session">Session</a> <span class="delimiter">{</span>

  <span class="keyword">var</span> <a title="Boolean" id="124524">open</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">var</span> <a title="Boolean" id="124527">doRollback</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">var</span> <a title="Boolean" id="124530">inTransaction</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.sql.Connection" id="124533">conn</a> = <span class="delimiter">{</span> <a href="#124524" title="(x$1: Boolean)Unit">open</a> = <span title="Boolean(true)" class="keyword">true</span>; <a href="#124542" title="org.scalaquery.session.Database">db</a>.<a href="Database.scala.html#124397" title="()java.sql.Connection">createConnection</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.sql.DatabaseMetaData" id="124535">metaData</a> = <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.scalaquery.session.DatabaseCapabilities" id="124536">capabilities</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.scalaquery.session.DatabaseCapabilities" id="127702">dc</a> = <a href="#124542" title="org.scalaquery.session.Database">db</a>.<a href="Database.scala.html#124398" title="=&gt; org.scalaquery.session.DatabaseCapabilities">capabilities</a>
    <span title="org.scalaquery.session.DatabaseCapabilities" class="keyword">if</span><span class="delimiter">(</span><a href="#127702" title="org.scalaquery.session.DatabaseCapabilities">dc</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#127702" title="org.scalaquery.session.DatabaseCapabilities">dc</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.scalaquery.session.DatabaseCapabilities" id="127703">newDC</a> = <span title="org.scalaquery.session.DatabaseCapabilities" class="keyword">new</span> <a href="DatabaseCapabilities.scala.html#10617" title="org.scalaquery.session.DatabaseCapabilities">DatabaseCapabilities</a><span class="delimiter">(</span><a href="#10661" title="org.scalaquery.session.BaseSession" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#124542" title="org.scalaquery.session.Database">db</a>.<a href="Database.scala.html#124399" title="(x$1: org.scalaquery.session.DatabaseCapabilities)Unit">capabilities</a> = <a href="#127703" title="org.scalaquery.session.DatabaseCapabilities">newDC</a>
      <a href="#127703" title="org.scalaquery.session.DatabaseCapabilities">newDC</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="124537">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#124524" title="=&gt; Boolean">open</a><span class="delimiter">)</span> <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="124538">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="()Boolean">getAutoCommit</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="../SQueryException.scala.html#25911" title="org.scalaquery.SQueryException" class="keyword">new</a> <a href="../SQueryException.scala.html#9548" title="org.scalaquery.SQueryException">SQueryException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Cannot roll back session in auto-commit mode&quot;)" class="string">&quot;Cannot roll back session in auto-commit mode&quot;</span><span class="delimiter">)</span>
    <a href="#124527" title="(x$1: Boolean)Unit">doRollback</a> = <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](f: =&gt; T)T" id="124539">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="124541">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="127706">f</a>: =&gt; T<span class="delimiter">)</span>: <a href="#124541" title="T">T</a> = <span title="T" class="keyword">if</span><span class="delimiter">(</span><a href="#124530" title="=&gt; Boolean">inTransaction</a><span class="delimiter">)</span> <a href="#127706" title="=&gt; T">f</a> <span class="keyword">else</span> <span class="delimiter">{</span>
    <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <a href="#124530" title="(x$1: Boolean)Unit">inTransaction</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Boolean" id="127711">done</a> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#124527" title="(x$1: Boolean)Unit">doRollback</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">val</span> <a title="T" id="127712">res</a> = <a href="#127706" title="=&gt; T">f</a>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#124527" title="=&gt; Boolean">doRollback</a><span class="delimiter">)</span> <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#127711" title="Boolean">done</a> = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#127712" title="T">res</a>
      <span class="delimiter">}</span> <span class="keyword">finally</span> <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#127711" title="Boolean">done</a><span class="delimiter">)</span> <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#124532" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <a href="#124530" title="(x$1: Boolean)Unit">inTransaction</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>