<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalala/tensor/Tensor.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Distributed as part of Scalala, a linear algebra library.
 *
 * Copyright (C) 2008- Daniel Ramage
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110 USA
 */</span>
<span class="keyword">package</span> scalala;
<span class="keyword">package</span> tensor;

<span class="keyword">import</span> domain._;
<span class="keyword">import</span> generic._;

<span class="keyword">import</span> scalala.operators._;
<span class="keyword">import</span> scalala.scalar.<span class="delimiter">{</span>Scalar,ScalarDecimal<span class="delimiter">}</span>;
<span class="keyword">import</span> scalala.generic.collection._;

<span class="keyword">import</span> scalala.generic.math.<span class="delimiter">{</span>CanMean,CanVariance,CanSqrt<span class="delimiter">}</span>;

<span class="comment">/**
 * A Tensor is a map from keys K (with a domain) to numeric scalar values V.
 * More specific operations are available on tensors indexed by a single key
 * (Tensor1, Vector) or pair of keys (Tensor2, Matrix).
 *
 * Note that this trait does not support for comprehensions, although its
 * two sub-traits: TensorSeqLike and TensorMapLike do.  The difference is
 * the way in which the collection is viewed.  TensorSeqLike views the
 * collection as one containing values.  TensorMapLike views the collection
 * as one containing key value pairs.
 *
 * @author dramage
 */</span>
<span class="keyword">trait</span> <a title="trait TensorLike[K, V, +D &lt;: scalala.tensor.domain.IterableDomain[K], +This &lt;: scalala.tensor.Tensor[K,V]] extends java.lang.Object with scalala.tensor.DomainFunction[K,V,D] with scalala.operators.NumericOps[This] with scalala.operators.HasValuesMonadic[This,V] with ScalaObject" id="18455">TensorLike</a>
<span class="delimiter">[</span>@specialized<span class="delimiter">(</span>Int, Long<span class="delimiter">)</span> <a title="&gt;: Nothing &lt;: Any" id="18651">K</a>,
 @specialized<span class="delimiter">(</span>Int, Long, Float, Double, Boolean<span class="delimiter">)</span> <a title="&gt;: Nothing &lt;: Any" id="18652">V</a>,
 +<a title="&gt;: Nothing &lt;: scalala.tensor.domain.IterableDomain[K]" id="18653">D</a>&lt;:IterableDomain<span class="delimiter">[</span>K<span class="delimiter">]</span>,
 +<a title="&gt;: Nothing &lt;: scalala.tensor.Tensor[K,V]" id="18654">This</a>&lt;:Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span><span class="delimiter">]</span>
<span title="ScalaObject" class="keyword">extends</span> <a href="DomainFunction.scala.html#17831" title="scalala.tensor.DomainFunction[K,V,D]">DomainFunction</a><span class="delimiter">[</span>K, V, D<span class="delimiter">]</span>
<span class="keyword">with</span> operators.<a href="../operators/Ops.scala.html#11559" title="scalala.operators.NumericOps[This]">NumericOps</a><span class="delimiter">[</span>This<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../operators/ValuesMonadic.scala.html#11781" title="scalala.operators.HasValuesMonadic[This,V]">HasValuesMonadic</a><span class="delimiter">[</span>This,V<span class="delimiter">]</span> <span class="delimiter">{</span>
self =&gt;

  <span class="keyword">type</span> <a title="D" id="42239">Domain</a> = <a href="#18653" title="D">D</a>;

  <span class="keyword">protected</span> <span class="keyword">type</span> <a title="This" id="42240">Self</a> = <a href="#18654" title="This">This</a>;

  <span class="comment">/** Returns a pointer to this cast as an instance of This. */</span>
  <span class="keyword">def</span> <a title="=&gt; This" id="42241">repr</a> : <a href="#18654" title="This">This</a> = <a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="This" class="delimiter">[</span><a href="#18654" title="This">This</a><span class="delimiter">]</span>;

  <span class="comment">/** Provides information about the underlying scalar value type V. */</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="=&gt; scalala.scalar.Scalar[V]" id="42242">scalar</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V]">Scalar</a><span class="delimiter">[</span>V<span class="delimiter">]</span>;

  <span class="comment">/**
   * Returns a builder for constructing new instances like this one,
   * on the given domain.
   */</span>
  <span class="keyword">def</span> <a title="[NK, NV](domain: scalala.tensor.domain.IterableDomain[NK])(implicit scalar: scalala.scalar.Scalar[NV])scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]" id="42243">newBuilder</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42246">NK</a>,<a title="&gt;: Nothing &lt;: Any" id="42247">NV</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.tensor.domain.IterableDomain[NK]" id="42396">domain</a> : <a href="domain/IterableDomain.scala.html#19417" title="scalala.tensor.domain.IterableDomain[NK]">IterableDomain</a><span class="delimiter">[</span>NK<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.scalar.Scalar[NV]" id="42397">scalar</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[NV]">Scalar</a><span class="delimiter">[</span>NV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="generic/TensorBuilder.scala.html#19567" title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]">TensorBuilder</a><span class="delimiter">[</span>NK,NV,Tensor<span class="delimiter">[</span>NK,NV<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#42396" title="scalala.tensor.domain.IterableDomain[NK]">domain</a> <span title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]" id="764258">that</a> : <a href="domain/IndexDomain.scala.html#19423" title="scalala.tensor.domain.IndexDomain">IndexDomain</a> =&gt;
      mutable.<a href="dense/DenseVector.scala.html#43285" title="[S](domain: scalala.tensor.domain.IndexDomain)(implicit evidence$39: scalala.scalar.Scalar[S])scalala.tensor.dense.DenseVectorCol[S]">Vector</a><span title="(domain: scalala.tensor.domain.IndexDomain)(implicit evidence$39: scalala.scalar.Scalar[NV])scalala.tensor.dense.DenseVectorCol[NV]" class="delimiter">[</span><a href="#42247" title="NV">NV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#764258" title="scalala.tensor.domain.IndexDomain">that</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#42397" title="scalala.scalar.Scalar[NV]">scalar</a><span class="delimiter">)</span>.<a href="mutable/Tensor.scala.html#42857" title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]">asBuilder</a>;
    <span class="keyword">case</span> <a title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.mutable.Tensor[NK,NV]]" id="764271">that</a> : <a href="domain/Domain1.scala.html#19267" title="scalala.tensor.domain.Domain1[_]">Domain1</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
      mutable.<a href="mutable/Tensor1.scala.html#70628" title="[K, V](domain: scalala.tensor.domain.Domain1[K])(implicit evidence$1: scalala.scalar.Scalar[V])scalala.tensor.mutable.Tensor1Col[K,V]">Tensor1</a><span title="(domain: scalala.tensor.domain.Domain1[NK])(implicit evidence$1: scalala.scalar.Scalar[NV])scalala.tensor.mutable.Tensor1Col[NK,NV]" class="delimiter">[</span><a href="#42246" title="NK">NK</a>,<a href="#42247" title="NV">NV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#764271" title="scalala.tensor.domain.Domain1[_]">that</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scalala.tensor.domain.Domain1[NK]" class="delimiter">[</span><a href="domain/Domain1.scala.html#19267" title="scalala.tensor.domain.Domain1[NK]">Domain1</a><span class="delimiter">[</span>NK<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#42397" title="scalala.scalar.Scalar[NV]">scalar</a><span class="delimiter">)</span>.<a href="mutable/Tensor.scala.html#42857" title="=&gt; scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.mutable.Tensor[NK,NV]]">asBuilder</a>;
    <span class="keyword">case</span> <a title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]" id="764308">that</a> : <a href="domain/TableDomain.scala.html#19270" title="scalala.tensor.domain.TableDomain">TableDomain</a> =&gt;
      mutable.<a href="dense/DenseMatrix.scala.html#62258" title="[V](domain: scalala.tensor.domain.TableDomain)(implicit evidence$13: scalala.scalar.Scalar[V])scalala.tensor.dense.DenseMatrix[V]">Matrix</a><span title="(domain: scalala.tensor.domain.TableDomain)(implicit evidence$13: scalala.scalar.Scalar[NV])scalala.tensor.dense.DenseMatrix[NV]" class="delimiter">[</span><a href="#42247" title="NV">NV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#764308" title="scalala.tensor.domain.TableDomain">that</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#42397" title="scalala.scalar.Scalar[NV]">scalar</a><span class="delimiter">)</span>.<a href="mutable/Tensor.scala.html#42857" title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]">asBuilder</a>;
    <span class="keyword">case</span> <a title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]" id="764316">that</a> : <a href="domain/Domain2.scala.html#19378" title="scalala.tensor.domain.Domain2[_,_]">Domain2</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span> =&gt;
      mutable.<a href="mutable/Tensor2.scala.html#126947" title="[K1, K2, V](domain: scalala.tensor.domain.Domain2[K1,K2])(implicit evidence$1: scalala.scalar.Scalar[V])scalala.tensor.mutable.Tensor2[K1,K2,V]">Tensor2</a><span title="(domain: scalala.tensor.domain.Domain2[Any,Any])(implicit evidence$1: scalala.scalar.Scalar[NV])scalala.tensor.mutable.Tensor2[Any,Any,NV]" class="delimiter">[</span><span title="Any">Any</span>,<span title="Any">Any</span>,<a href="#42247" title="NV">NV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#764316" title="scalala.tensor.domain.Domain2[_,_]">that</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scalala.tensor.domain.Domain2[Any,Any]" class="delimiter">[</span><a href="domain/Domain2.scala.html#19378" title="scalala.tensor.domain.Domain2[Any,Any]">Domain2</a><span class="delimiter">[</span>Any,Any<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#42397" title="scalala.scalar.Scalar[NV]">scalar</a><span class="delimiter">)</span>.<a href="mutable/Tensor.scala.html#42857" title="=&gt; scalala.tensor.generic.TensorBuilder[(Any, Any),NV,scalala.tensor.mutable.Tensor[(Any, Any),NV]]">asBuilder</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]" class="delimiter">[</span><a href="generic/TensorBuilder.scala.html#19567" title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.Tensor[NK,NV]]">TensorBuilder</a><span class="delimiter">[</span>NK,NV,Tensor<span class="delimiter">[</span>NK,NV<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>;
      <span class="comment">// TODO: add this in when we have a mutable.TensorN</span>
<span class="comment">//    case that : ProductNDomain[_] =&gt;</span>
<span class="comment">//      mutable.TensorN(that)(implicitly[Scalar[NV]]).asBuilder;</span>
    <span class="keyword">case</span> <span title="scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.mutable.Tensor[NK,NV]]">_</span> =&gt;
      mutable.<a href="mutable/Tensor.scala.html#70698" title="[K, V](domain: scalala.tensor.domain.IterableDomain[K])(implicit evidence$1: scalala.scalar.Scalar[V])scalala.tensor.mutable.Tensor[K,V]">Tensor</a><span title="(domain: scalala.tensor.domain.IterableDomain[NK])(implicit evidence$1: scalala.scalar.Scalar[NV])scalala.tensor.mutable.Tensor[NK,NV]" class="delimiter">[</span><a href="#42246" title="NK">NK</a>,<a href="#42247" title="NV">NV</a><span class="delimiter">]</span><a href="#42397" title="scalala.scalar.Scalar[NV]" class="delimiter">(</a><a href="#42396" title="scalala.tensor.domain.IterableDomain[NK]">domain</a><span class="delimiter">)</span>.<a href="mutable/Tensor.scala.html#42857" title="=&gt; scalala.tensor.generic.TensorBuilder[NK,NV,scalala.tensor.mutable.Tensor[NK,NV]]">asBuilder</a>;
  <span class="delimiter">}</span>

  <span class="comment">//</span>
  <span class="comment">// Collection contents</span>
  <span class="comment">//</span>

  <span class="comment">/** The size of this collection. */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="42248">size</a> : <span title="Int">Int</span>;
  
  <span class="comment">/** An upper bound on the number of non zero values in this collection. */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="42249">nonzeroSize</a> =
    <a href="#42248" title="=&gt; Int">size</a>;

  <span class="comment">/**
   * Returns the pairs of (K,V) that make up this tensor for use in
   * for comprehensions.  The returned object can be viewed as a 
   * Map[K,V].
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scalala.tensor.generic.TensorPairsMonadic[K,V,This]" id="42250">pairs</a> : <a href="generic/TensorPairsMonadic.scala.html#19549" title="scalala.tensor.generic.TensorPairsMonadic[K,V,This]">TensorPairsMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> =
    <a href="#764352" title="java.lang.Object with scalala.tensor.generic.TensorPairsMonadic[K,V,This]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.tensor.generic.TensorPairsMonadic[K,V,This]" id="764352">TensorPairsMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> <span class="delimiter">{</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; This" id="764356">repr</a> = <a href="#18455" title="TensorLike.this.type">self</a>.<a href="#42241" title="=&gt; This">repr</a>; <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the keys that make up this tensor for use in
   * for comprehensions.  The returned object can be viewed as an
   * Iterable[K].
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scalala.tensor.generic.TensorKeysMonadic[K,V,This]" id="42251">keys</a> : <a href="generic/TensorKeysMonadic.scala.html#19651" title="scalala.tensor.generic.TensorKeysMonadic[K,V,This]">TensorKeysMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> =
    <a href="#764364" title="java.lang.Object with scalala.tensor.generic.TensorKeysMonadic[K,V,This]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.tensor.generic.TensorKeysMonadic[K,V,This]" id="764364">TensorKeysMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> <span class="delimiter">{</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; This" id="764368">repr</a> = <a href="#18455" title="TensorLike.this.type">self</a>.<a href="#42241" title="=&gt; This">repr</a>; <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the values that make up this tensor for use in
   * for comprehensions.  The returned object can be viewed as an 
   * Iterable[V].
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scalala.tensor.generic.TensorValuesMonadic[K,V,This]" id="42252">values</a> : <a href="generic/TensorValuesMonadic.scala.html#19642" title="scalala.tensor.generic.TensorValuesMonadic[K,V,This]">TensorValuesMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> =
    <a href="#764374" title="java.lang.Object with scalala.tensor.generic.TensorValuesMonadic[K,V,This]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.tensor.generic.TensorValuesMonadic[K,V,This]" id="764374">TensorValuesMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> <span class="delimiter">{</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; This" id="764420">repr</a> = <a href="#18455" title="TensorLike.this.type">self</a>.<a href="#42241" title="=&gt; This">repr</a>; <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a monadic nonzero elements of this tensor.  Then call one of
   * .pairs .keys or .values for use in for comprehensions.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scalala.tensor.generic.TensorNonZeroMonadic[K,V,This]" id="42253">nonzero</a> : <a href="generic/TensorNonZeroMonadic.scala.html#19519" title="scalala.tensor.generic.TensorNonZeroMonadic[K,V,This]">TensorNonZeroMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> =
    <a href="#764435" title="java.lang.Object with scalala.tensor.generic.TensorNonZeroMonadic[K,V,This]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.tensor.generic.TensorNonZeroMonadic[K,V,This]" id="764435">TensorNonZeroMonadic</a><span class="delimiter">[</span>K,V,This<span class="delimiter">]</span> <span class="delimiter">{</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; This" id="764461">repr</a> = <a href="#18455" title="TensorLike.this.type">self</a>.<a href="#42241" title="=&gt; This">repr</a>; <span class="delimiter">}</span>

  <span class="comment">/**
   * Applies the given function to each key and its corresponding value.
   */</span>
  <span class="keyword">def</span> <a title="[U](fn: (K, V) =&gt; U)Unit" id="42254">foreachPair</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42256">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(K, V) =&gt; U" id="745506">fn</a>: <span class="delimiter">(</span>K,V<span class="delimiter">)</span> =&gt; U<span class="delimiter">)</span> : <span title="Unit">Unit</span> =
    <a href="#42260" title="[U](fn: K =&gt; U)Unit">foreachKey</a><span title="(fn: K =&gt; U)Unit" class="delimiter">[</span><a href="#42256" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="K" id="764471">k</a> =&gt; <a href="#745506" title="(v1: K, v2: V)U">fn</a><span class="delimiter">(</span><a href="#764471" title="K">k</a>,<a href="#42342" title="(key: K)V">apply</a><span class="delimiter">(</span><a href="#764471" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Applies the given function to each key and its corresponding value
   * if the value is non-zero (and possibly also some that are zeros).
   *
   * @return true if all elements in the tensor were visited.
   */</span>
  <span class="keyword">def</span> <a title="[U](fn: (K, V) =&gt; U)Boolean" id="42257">foreachNonZeroPair</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42259">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(K, V) =&gt; U" id="750304">fn</a> : <span class="delimiter">(</span><span class="delimiter">(</span>K,V<span class="delimiter">)</span>=&gt;U<span class="delimiter">)</span><span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="#42254" title="[U](fn: (K, V) =&gt; U)Unit">foreachPair</a><span title="(fn: (K, V) =&gt; U)Unit" class="delimiter">[</span><a href="#42259" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#750304" title="(K, V) =&gt; U">fn</a><span class="delimiter">)</span>;
    <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Applies the given function to each key in the tensor. */</span>
  <span class="keyword">def</span> <a title="[U](fn: K =&gt; U)Unit" id="42260">foreachKey</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42262">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="K =&gt; U" id="52187">fn</a>: K =&gt; U<span class="delimiter">)</span> : <span title="Unit">Unit</span> =
    <a href="DomainFunction.scala.html#42232" title="=&gt; D">domain</a>.<span title="[U](f: K =&gt; U)Unit">foreach</span><span title="(f: K =&gt; U)Unit" class="delimiter">[</span><a href="#42262" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#52187" title="K =&gt; U">fn</a><span class="delimiter">)</span>;

  <span class="comment">/**
   * Applies the given function to each key if its corresponding value
   * is non-zero (and possibly some zero-valued keys as well).
   *
   * @return true if all keys in the tensor were visisted.
   */</span>
  <span class="keyword">def</span> <a title="[U](fn: K =&gt; U)Boolean" id="42263">foreachNonZeroKey</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42265">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="K =&gt; U" id="750234">fn</a> : K =&gt; U<span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="#42260" title="[U](fn: K =&gt; U)Unit">foreachKey</a><span title="(fn: K =&gt; U)Unit" class="delimiter">[</span><a href="#42265" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#750234" title="K =&gt; U">fn</a><span class="delimiter">)</span>;
    <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Applies the given function to each value in the map (one for
   * each element of the domain, including zeros).
   */</span>
  <span class="keyword">def</span> <a title="[U](fn: V =&gt; U)Unit" id="42266">foreachValue</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42268">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="V =&gt; U" id="52184">fn</a> : <span class="delimiter">(</span>V=&gt;U<span class="delimiter">)</span><span class="delimiter">)</span> =
    <a href="#42260" title="[U](fn: K =&gt; U)Unit">foreachKey</a><span title="(fn: K =&gt; U)Unit" class="delimiter">[</span><a href="#42268" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="K" id="52192">k</a> =&gt; <a href="#52184" title="(v1: V)U">fn</a><span class="delimiter">(</span><a href="#42342" title="(key: K)V">apply</a><span class="delimiter">(</span><a href="#52192" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Applies the given function to every non-zero value in the map
   * (and possibly some zeros, too).
   *
   * @return true if all elements in the map were visited.
   */</span>
  <span class="keyword">def</span> <a title="[U](fn: V =&gt; U)Boolean" id="42269">foreachNonZeroValue</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42271">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="V =&gt; U" id="52181">fn</a> : <span class="delimiter">(</span>V=&gt;U<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="#42266" title="[U](fn: V =&gt; U)Unit">foreachValue</a><span title="(fn: V =&gt; U)Unit" class="delimiter">[</span><a href="#42271" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#52181" title="V =&gt; U">fn</a><span class="delimiter">)</span>;
    <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns true if and only if the given predicate is true for all elements. */</span>
  <span class="keyword">def</span> <a title="(fn: (K, V) =&gt; Boolean)Boolean" id="42272">forallPairs</a><span class="delimiter">(</span><a title="(K, V) =&gt; Boolean" id="764568">fn</a> : <span class="delimiter">(</span>K,V<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#42254" title="(fn: (K, V) =&gt; Unit)Unit">foreachPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="764573">k</a>,<a title="V" id="764574">v</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#764568" title="(v1: K, v2: V)Boolean">fn</a><span class="delimiter">(</span><a href="#764573" title="K">k</a>,<a href="#764574" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>;
    <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns true if and only if the given predicate is true for all elements. */</span>
  <span class="keyword">def</span> <a title="(fn: V =&gt; Boolean)Boolean" id="42273">forallValues</a><span class="delimiter">(</span><a title="V =&gt; Boolean" id="764578">fn</a> : V =&gt; Boolean<span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#42266" title="(fn: V =&gt; Unit)Unit">foreachValue</a><span class="delimiter">(</span><a title="V" id="764583">v</a> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#764578" title="(v1: V)Boolean">fn</a><span class="delimiter">(</span><a href="#764583" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>;
    <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns true if and only if the given predicate is true for all non-zero elements. */</span>
  <span class="keyword">def</span> <a title="(fn: (K, V) =&gt; Boolean)Boolean" id="42274">forallNonZeroPairs</a><span class="delimiter">(</span><a title="(K, V) =&gt; Boolean" id="764586">fn</a> : <span class="delimiter">(</span>K,V<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#42257" title="(fn: (K, V) =&gt; Unit)Boolean">foreachNonZeroPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="764591">k</a>,<a title="V" id="764592">v</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#764586" title="(v1: K, v2: V)Boolean">fn</a><span class="delimiter">(</span><a href="#764591" title="K">k</a>,<a href="#764592" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>;
    <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>
 
  <span class="comment">/** Returns true if and only if the given predicate is true for all non-zero elements. */</span>
  <span class="keyword">def</span> <a title="(fn: V =&gt; Boolean)Boolean" id="42275">forallNonZeroValues</a><span class="delimiter">(</span><a title="V =&gt; Boolean" id="764596">fn</a> : V =&gt; Boolean<span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#42269" title="(fn: V =&gt; Unit)Boolean">foreachNonZeroValue</a><span class="delimiter">(</span><a title="V" id="764601">v</a> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#764596" title="(v1: V)Boolean">fn</a><span class="delimiter">(</span><a href="#764601" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>;
    <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Creates a new map containing a transformed copy of this map. */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, O, That](f: (K, V) =&gt; O)(implicit bf: scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That])That" id="42276">mapPairs</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42280">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42281">O</a>,<a title="&gt;: Nothing &lt;: Any" id="42282">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(K, V) =&gt; O" id="764604">f</a> : <span class="delimiter">(</span>K,V<span class="delimiter">)</span> =&gt; O<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That]" id="764605">bf</a> : <a href="../generic/collection/CanMapKeyValuePairs.scala.html#10296" title="scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That]">CanMapKeyValuePairs</a><span class="delimiter">[</span>TT, K, V, O, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42282" title="That">That</a> =
    <a href="#764605" title="scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That]">bf</a>.<a href="../generic/collection/CanMapKeyValuePairs.scala.html#47133" title="(from: TT, fn: (K, V) =&gt; O)That">map</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>, <a href="#764604" title="(K, V) =&gt; O">f</a><span class="delimiter">)</span>;

  <span class="comment">/** Maps all non-zero key-value pairs values. */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, O, That](f: (K, V) =&gt; O)(implicit bf: scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That])That" id="42283">mapNonZeroPairs</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42287">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42288">O</a>,<a title="&gt;: Nothing &lt;: Any" id="42289">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(K, V) =&gt; O" id="764611">f</a> : <span class="delimiter">(</span>K,V<span class="delimiter">)</span> =&gt; O<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That]" id="764612">bf</a> : <a href="../generic/collection/CanMapKeyValuePairs.scala.html#10296" title="scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That]">CanMapKeyValuePairs</a><span class="delimiter">[</span>TT, K, V, O, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42289" title="That">That</a> =
    <a href="#764612" title="scalala.generic.collection.CanMapKeyValuePairs[TT,K,V,O,That]">bf</a>.<a href="../generic/collection/CanMapKeyValuePairs.scala.html#47134" title="(from: TT, fn: (K, V) =&gt; O)That">mapNonZero</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TT" class="delimiter">[</span><a href="#42287" title="TT">TT</a><span class="delimiter">]</span>, <a href="#764611" title="(K, V) =&gt; O">f</a><span class="delimiter">)</span>;

  <span class="comment">/** Creates a new map containing a transformed copy of this map. */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, O, That](f: V =&gt; O)(implicit bf: scalala.generic.collection.CanMapValues[TT,V,O,That])That" id="42290">mapValues</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42294">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42295">O</a>,<a title="&gt;: Nothing &lt;: Any" id="42296">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="V =&gt; O" id="363716">f</a> : V =&gt; O<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanMapValues[TT,V,O,That]" id="363717">bf</a> : <a href="../generic/collection/CanMapValues.scala.html#9756" title="scalala.generic.collection.CanMapValues[TT,V,O,That]">CanMapValues</a><span class="delimiter">[</span>TT, V, O, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42296" title="That">That</a> =
    <a href="#363717" title="scalala.generic.collection.CanMapValues[TT,V,O,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45299" title="(from: TT, fn: V =&gt; O)That">map</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TT" class="delimiter">[</span><a href="#42294" title="TT">TT</a><span class="delimiter">]</span>, <a href="#363716" title="V =&gt; O">f</a><span class="delimiter">)</span>;

  <span class="comment">/** Maps all non-zero values. */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, O, That](f: V =&gt; O)(implicit bf: scalala.generic.collection.CanMapValues[TT,V,O,That])That" id="42297">mapNonZeroValues</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42301">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42302">O</a>,<a title="&gt;: Nothing &lt;: Any" id="42303">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="V =&gt; O" id="764620">f</a> : V =&gt; O<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanMapValues[TT,V,O,That]" id="764621">bf</a> : <a href="../generic/collection/CanMapValues.scala.html#9756" title="scalala.generic.collection.CanMapValues[TT,V,O,That]">CanMapValues</a><span class="delimiter">[</span>TT, V, O, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42303" title="That">That</a> =
    <a href="#764621" title="scalala.generic.collection.CanMapValues[TT,V,O,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45300" title="(from: TT, fn: V =&gt; O)That">mapNonZero</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TT" class="delimiter">[</span><a href="#42301" title="TT">TT</a><span class="delimiter">]</span>, <a href="#764620" title="V =&gt; O">f</a><span class="delimiter">)</span>;

  <span class="comment">/** Iterates over the keys in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[K]" id="42304">keysIterator</a> : <span title="Iterator[K]">Iterator</span><span class="delimiter">[</span>K<span class="delimiter">]</span> =
    <a href="DomainFunction.scala.html#42232" title="=&gt; D">domain</a>.<a href="domain/IterableDomain.scala.html#42419" title="=&gt; Iterator[K]">iterator</a>;

  <span class="comment">/** Iterates over the (possibly) non-zero keys in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[K]" id="42305">keysIteratorNonZero</a> : <span title="Iterator[K]">Iterator</span><span class="delimiter">[</span>K<span class="delimiter">]</span> =
    <a href="#42304" title="=&gt; Iterator[K]">keysIterator</a>;

  <span class="comment">/** Iterates over the values in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[V]" id="42306">valuesIterator</a> : <span title="Iterator[V]">Iterator</span><span class="delimiter">[</span>V<span class="delimiter">]</span> =
    <a href="#42304" title="=&gt; Iterator[K]">keysIterator</a>.<span title="(f: K =&gt; V)Iterator[V]">map</span><span class="delimiter">(</span><a href="#42342" title="(key: K)V">apply</a><span class="delimiter">)</span>;

  <span class="comment">/** Iterates over the (possibly) non-zero values in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[V]" id="42307">valuesIteratorNonZero</a> : <span title="Iterator[V]">Iterator</span><span class="delimiter">[</span>V<span class="delimiter">]</span> =
    <a href="#42306" title="=&gt; Iterator[V]">valuesIterator</a>;

  <span class="comment">/** Iterates over all elements in the domain and the corresponding value. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[(K, V)]" id="42308">pairsIterator</a> : <span title="Iterator[(K, V)]">Iterator</span><span class="delimiter">[</span><span class="delimiter">(</span>K,V<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#42304" title="=&gt; Iterator[K]">keysIterator</a>.<span title="(f: K =&gt; (K, V))Iterator[(K, V)]">map</span><span class="delimiter">(</span><a title="K" id="764712">k</a> =&gt; <span title="(_1: K, _2: V)(K, V)" class="delimiter">(</span><a href="#764712" title="K">k</a>,<a href="#42342" title="(key: K)V" class="keyword">this</a><span class="delimiter">(</span><a href="#764712" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/** Iterates over the (possibly) non-zero pairs in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[(K, V)]" id="42309">pairsIteratorNonZero</a> : <span title="Iterator[(K, V)]">Iterator</span><span class="delimiter">[</span><span class="delimiter">(</span>K,V<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#42308" title="=&gt; Iterator[(K, V)]">pairsIterator</a>;

  <span class="comment">/** Returns some key for which the given predicate is true. */</span>
  <span class="keyword">def</span> <a title="(p: V =&gt; Boolean)Option[K]" id="42310">find</a><span class="delimiter">(</span><a title="V =&gt; Boolean" id="764806">p</a> : V =&gt; Boolean<span class="delimiter">)</span> : <span title="Option[K]">Option</span><span class="delimiter">[</span>K<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#42260" title="(fn: K =&gt; Unit)Unit">foreachKey</a><span class="delimiter">(</span><a title="K" id="764811">k</a> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764806" title="(v1: V)Boolean">p</a><span class="delimiter">(</span><a href="#42342" title="(key: K)V">apply</a><span class="delimiter">(</span><a href="#764811" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="(x: K)Some[K]">Some</span><span class="delimiter">(</span><a href="#764811" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span title="Nothing" class="keyword">return</span> <span title="object None">None</span>;
  <span class="delimiter">}</span>
    
  <span class="comment">/** Returns the keys for which the given predicate is true. */</span>
  <span class="keyword">def</span> <a title="(p: V =&gt; Boolean)Iterator[K]" id="42311">findAll</a><span class="delimiter">(</span><a title="V =&gt; Boolean" id="764891">p</a> : V =&gt; Boolean<span class="delimiter">)</span> : <span title="Iterator[K]">Iterator</span><span class="delimiter">[</span>K<span class="delimiter">]</span> =
    <a href="#42304" title="=&gt; Iterator[K]">keysIterator</a>.<span title="(p: K =&gt; Boolean)Iterator[K]">filter</span><span class="delimiter">(</span><a href="#18455" title="TensorLike.this.type" class="keyword">this</a> <span title="(k: V =&gt; Boolean)PartialFunction[K,Boolean]">andThen</span> <a href="#764891" title="V =&gt; Boolean">p</a><span class="delimiter">)</span>;
  
  <span class="comment">/**
   * Constructs a view of this map on which calls to mapValues are
   * chained together and lazily evaluated.
   */</span>
  <span class="keyword">def</span> <a title="[That](implicit bf: scalala.generic.collection.CanView[This,That])That" id="42312">view</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42314">That</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanView[This,That]" id="749574">bf</a> : <a href="../generic/collection/CanView.scala.html#9720" title="scalala.generic.collection.CanView[This,That]">CanView</a><span class="delimiter">[</span>This,That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42314" title="That">That</a> =
    <a href="#749574" title="scalala.generic.collection.CanView[This,That]">bf</a>.<a href="../generic/collection/CanView.scala.html#50084" title="(from: This)That">apply</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a><span class="delimiter">)</span>;


  <span class="comment">/**
   * Creates a new Tensor over the same domain using the given value
   * function to create each return value in the map.
   */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, V2, RV, That](tensor: scalala.tensor.Tensor[K,V2])(fn: (K, V, V2) =&gt; RV)(implicit jj: scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2])Unit" id="42315">joinAll</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42320">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42321">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="42322">RV</a>,<a title="&gt;: Nothing &lt;: Any" id="42323">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K,V2]" id="385521">tensor</a> : <a href="#18116" title="scalala.tensor.Tensor[K,V2]">Tensor</a><span class="delimiter">[</span>K,V2<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(K, V, V2) =&gt; RV" id="385522">fn</a> : <span class="delimiter">(</span>K,V,V2<span class="delimiter">)</span> =&gt; RV<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]" id="385523">jj</a> : <a href="../generic/collection/CanJoin.scala.html#9990" title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]">CanJoin</a><span class="delimiter">[</span>TT, Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span>, K, V, V2<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> =
    <a href="#385523" title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]">jj</a>.<a href="../generic/collection/CanJoin.scala.html#47090" title="[RV](a: TT, b: scalala.tensor.Tensor[K,V2], fn: (K, V, V2) =&gt; RV)Unit">joinAll</a><span title="(a: TT, b: scalala.tensor.Tensor[K,V2], fn: (K, V, V2) =&gt; RV)Unit" class="delimiter">[</span><a href="#42322" title="RV">RV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TT" class="delimiter">[</span><a href="#42320" title="TT">TT</a><span class="delimiter">]</span>, <a href="#385521" title="scalala.tensor.Tensor[K,V2]">tensor</a>, <span class="delimiter">(</span><a title="K" id="764908">k</a>,<a title="V" id="764909">v1</a>,<a title="V2" id="764910">v2</a><span class="delimiter">)</span> =&gt; <a href="#385522" title="(v1: K, v2: V, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#764908" title="K">k</a>,<a href="#764909" title="V">v1</a>,<a href="#764910" title="V2">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Creates a new Tensor over the same domain using the given value
   * function to create each return value in the map where keys in
   * both this and m are non-zero.
   */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, V2, RV, That](tensor: scalala.tensor.Tensor[K,V2])(fn: (K, V, V2) =&gt; RV)(implicit jj: scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2])Unit" id="42324">joinBothNonZero</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42329">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42330">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="42331">RV</a>,<a title="&gt;: Nothing &lt;: Any" id="42332">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K,V2]" id="764914">tensor</a> : <a href="#18116" title="scalala.tensor.Tensor[K,V2]">Tensor</a><span class="delimiter">[</span>K,V2<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(K, V, V2) =&gt; RV" id="764915">fn</a> : <span class="delimiter">(</span>K,V,V2<span class="delimiter">)</span> =&gt; RV<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]" id="764916">jj</a> : <a href="../generic/collection/CanJoin.scala.html#9990" title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]">CanJoin</a><span class="delimiter">[</span>TT, Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span>, K, V, V2<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> =
    <a href="#764916" title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]">jj</a>.<a href="../generic/collection/CanJoin.scala.html#47093" title="[RV](a: TT, b: scalala.tensor.Tensor[K,V2], fn: (K, V, V2) =&gt; RV)Unit">joinBothNonZero</a><span title="(a: TT, b: scalala.tensor.Tensor[K,V2], fn: (K, V, V2) =&gt; RV)Unit" class="delimiter">[</span><a href="#42331" title="RV">RV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TT" class="delimiter">[</span><a href="#42329" title="TT">TT</a><span class="delimiter">]</span>, <a href="#764914" title="scalala.tensor.Tensor[K,V2]">tensor</a>, <span class="delimiter">(</span><a title="K" id="764928">k</a>,<a title="V" id="764929">v1</a>,<a title="V2" id="764930">v2</a><span class="delimiter">)</span> =&gt; <a href="#764915" title="(v1: K, v2: V, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#764928" title="K">k</a>,<a href="#764929" title="V">v1</a>,<a href="#764930" title="V2">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Creates a new Tensor over the same domain using the given value
   * function to create each return value in the map where keys in
   * either this or m are non-zero.
   */</span>
  <span class="keyword">def</span> <a title="[TT &gt;: This, V2, RV, That](tensor: scalala.tensor.Tensor[K,V2])(fn: (K, V, V2) =&gt; RV)(implicit jj: scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2])Unit" id="42333">joinEitherNonZero</a><span class="delimiter">[</span><a title="&gt;: This &lt;: Any" id="42338">TT</a>&gt;:This,<a title="&gt;: Nothing &lt;: Any" id="42339">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="42340">RV</a>,<a title="&gt;: Nothing &lt;: Any" id="42341">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K,V2]" id="764934">tensor</a> : <a href="#18116" title="scalala.tensor.Tensor[K,V2]">Tensor</a><span class="delimiter">[</span>K,V2<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(K, V, V2) =&gt; RV" id="764935">fn</a> : <span class="delimiter">(</span>K,V,V2<span class="delimiter">)</span> =&gt; RV<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]" id="764936">jj</a> : <a href="../generic/collection/CanJoin.scala.html#9990" title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]">CanJoin</a><span class="delimiter">[</span>TT, Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span>, K, V, V2<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> =
    <a href="#764936" title="scalala.generic.collection.CanJoin[TT,scalala.tensor.Tensor[K,V2],K,V,V2]">jj</a>.<a href="../generic/collection/CanJoin.scala.html#47096" title="[RV](a: TT, b: scalala.tensor.Tensor[K,V2], fn: (K, V, V2) =&gt; RV)Unit">joinEitherNonZero</a><span title="(a: TT, b: scalala.tensor.Tensor[K,V2], fn: (K, V, V2) =&gt; RV)Unit" class="delimiter">[</span><a href="#42340" title="RV">RV</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TT" class="delimiter">[</span><a href="#42338" title="TT">TT</a><span class="delimiter">]</span>, <a href="#764934" title="scalala.tensor.Tensor[K,V2]">tensor</a>, <span class="delimiter">(</span><a title="K" id="764948">k</a>,<a title="V" id="764949">v1</a>,<a title="V2" id="764950">v2</a><span class="delimiter">)</span> =&gt; <a href="#764935" title="(v1: K, v2: V, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#764948" title="K">k</a>,<a href="#764949" title="V">v1</a>,<a href="#764950" title="V2">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">//</span>
  <span class="comment">// Slice construction</span>
  <span class="comment">//</span>

  <span class="comment">/** The value at the given key.  Takes precedence over apply(keys : K*). */</span>
  <span class="keyword">def</span> <a title="(key: K)V" id="42342">apply</a><span class="delimiter">(</span><a title="K" id="52198">key</a> : <a href="#18651" title="K">K</a><span class="delimiter">)</span> : <a href="#18652" title="V">V</a>;

  <span class="comment">/** Creates a view backed by the given keys, returning them as a sequence. */</span>
  <span class="keyword">def</span> <a title="[That](keys: K*)(implicit bf: scalala.generic.collection.CanSliceVector[This,K,That])That" id="42343">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42345">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="K*" id="52285">keys</a> : <span title="K*">K</span>*<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceVector[This,K,That]" id="52286">bf</a> : <a href="../generic/collection/CanSliceVector.scala.html#10152" title="scalala.generic.collection.CanSliceVector[This,K,That]">CanSliceVector</a><span class="delimiter">[</span>This, K, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42345" title="That">That</a> =
    <a href="../generic/collection/CanSliceVector.scala.html#49363" title="(from: This, keys: Seq[K])That">bf</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>, <a href="#52285" title="K*">keys</a><span class="delimiter">)</span>;

  <span class="comment">/** Creates a view backed by the &quot;true&quot; elements in selected. */</span>
  <span class="keyword">def</span> <a title="[That](selected: scalala.tensor.Tensor[K,Boolean])(implicit bf: scalala.generic.collection.CanSliceVector[This,K,That])That" id="42346">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42348">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K,Boolean]" id="52273">selected</a> : <a href="#18116" title="scalala.tensor.Tensor[K,Boolean]">Tensor</a><span class="delimiter">[</span>K,Boolean<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceVector[This,K,That]" id="52274">bf</a> : <a href="../generic/collection/CanSliceVector.scala.html#10152" title="scalala.generic.collection.CanSliceVector[This,K,That]">CanSliceVector</a><span class="delimiter">[</span>This, K, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42348" title="That">That</a> =
    <a href="../generic/collection/CanSliceVector.scala.html#49363" title="(from: This, keys: Seq[K])That">bf</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>, <a href="DomainFunction.scala.html#42232" title="=&gt; D">domain</a>.<span title="(p: K =&gt; Boolean)Iterable[K]">filter</span><span class="delimiter">(</span><a href="#52273" title="scalala.tensor.Tensor[K,Boolean]">selected</a><span class="delimiter">)</span>.<span title="scala.collection.immutable.IndexedSeq[K]">toIndexedSeq</span><span class="delimiter">)</span>;

  <span class="comment">/** Creates a view backed by the given keys, returning them as a sequence. */</span>
  <span class="keyword">def</span> <a title="[That](keys: TraversableOnce[K])(implicit bf: scalala.generic.collection.CanSliceVector[This,K,That])That" id="42349">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42351">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="TraversableOnce[K]" id="52261">keys</a> : <span title="TraversableOnce[K]">TraversableOnce</span><span class="delimiter">[</span>K<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceVector[This,K,That]" id="52262">bf</a> : <a href="../generic/collection/CanSliceVector.scala.html#10152" title="scalala.generic.collection.CanSliceVector[This,K,That]">CanSliceVector</a><span class="delimiter">[</span>This, K, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42351" title="That">That</a> =
    <a href="../generic/collection/CanSliceVector.scala.html#49363" title="(from: This, keys: Seq[K])That">bf</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>, <a href="#52261" title="TraversableOnce[K]">keys</a>.<span title="scala.collection.immutable.IndexedSeq[K]">toIndexedSeq</span><span class="delimiter">)</span>;

  <span class="comment">/** Creates a view for the given elements with new indexes I, backed by this map. */</span>
  <span class="keyword">def</span> <a title="[I, That](keys: (I, K)*)(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That" id="42352">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42355">I</a>,<a title="&gt;: Nothing &lt;: Any" id="42356">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(I, K)*" id="52245">keys</a> : <span title="(I, K)*" class="delimiter">(</span>I,K<span class="delimiter">)</span>*<span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceTensor[This,K,I,That]" id="52246">bf</a> : <a href="../generic/collection/CanSliceTensor.scala.html#10026" title="scalala.generic.collection.CanSliceTensor[This,K,I,That]">CanSliceTensor</a><span class="delimiter">[</span>This, K, I, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42356" title="That">That</a> =
    <a href="#42362" title="[I, That](keys: scala.collection.Map[I,K])(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That">apply</a><span title="(keys: scala.collection.Map[I,K])(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That" class="delimiter">[</span><a href="#42355" title="I">I</a>,<a href="#42356" title="That">That</a><span class="delimiter">]</span><a href="#52246" title="scalala.generic.collection.CanSliceTensor[This,K,I,That]" class="delimiter">(</a><a href="#52245" title="(I, K)*">keys</a>.<span title="[T, U](implicit ev: &lt;:&lt;[(I, K),(T, U)])scala.collection.immutable.Map[T,U]">toMap</span><span title="(implicit ev: &lt;:&lt;[(I, K),(I, K)])scala.collection.immutable.Map[I,K]" class="delimiter">[</span><a href="#42355" title="I">I</a>,<a href="#18651" title="K">K</a><span class="delimiter">]</span><span class="delimiter">(</span><span title="object Predef">Predef</span>.<span title="[A]=&gt; &lt;:&lt;[A,A]">conforms</span><span title="&lt;:&lt;[(I, K),(I, K)]" class="delimiter">[</span><span title="(I, K)" class="delimiter">(</span>I, K<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/** Creates a view for the given elements with new indexes I, backed by this map. */</span>
  <span class="keyword">def</span> <a title="[I, That](keys: TraversableOnce[(I, K)])(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That" id="42357">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42360">I</a>,<a title="&gt;: Nothing &lt;: Any" id="42361">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="TraversableOnce[(I, K)]" id="52229">keys</a> : <span title="TraversableOnce[(I, K)]">TraversableOnce</span><span class="delimiter">[</span><span class="delimiter">(</span>I,K<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceTensor[This,K,I,That]" id="52230">bf</a> : <a href="../generic/collection/CanSliceTensor.scala.html#10026" title="scalala.generic.collection.CanSliceTensor[This,K,I,That]">CanSliceTensor</a><span class="delimiter">[</span>This, K, I, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42361" title="That">That</a> =
    <a href="#42362" title="[I, That](keys: scala.collection.Map[I,K])(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That">apply</a><span title="(keys: scala.collection.Map[I,K])(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That" class="delimiter">[</span><a href="#42360" title="I">I</a>,<a href="#42361" title="That">That</a><span class="delimiter">]</span><a href="#52230" title="scalala.generic.collection.CanSliceTensor[This,K,I,That]" class="delimiter">(</a><a href="#52229" title="TraversableOnce[(I, K)]">keys</a>.<span title="[T, U](implicit ev: &lt;:&lt;[(I, K),(T, U)])scala.collection.immutable.Map[T,U]">toMap</span><span title="(implicit ev: &lt;:&lt;[(I, K),(I, K)])scala.collection.immutable.Map[I,K]" class="delimiter">[</span><a href="#42360" title="I">I</a>,<a href="#18651" title="K">K</a><span class="delimiter">]</span><span class="delimiter">(</span><span title="object Predef">Predef</span>.<span title="[A]=&gt; &lt;:&lt;[A,A]">conforms</span><span title="&lt;:&lt;[(I, K),(I, K)]" class="delimiter">[</span><span title="(I, K)" class="delimiter">(</span>I, K<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/** Creates a view for the given elements with new indexes I, backed by this map. */</span>
  <span class="keyword">def</span> <a title="[I, That](keys: scala.collection.Map[I,K])(implicit bf: scalala.generic.collection.CanSliceTensor[This,K,I,That])That" id="42362">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42365">I</a>,<a title="&gt;: Nothing &lt;: Any" id="42366">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.collection.Map[I,K]" id="52208">keys</a> : scala.collection.<span title="scala.collection.Map[I,K]">Map</span><span class="delimiter">[</span>I,K<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceTensor[This,K,I,That]" id="52209">bf</a> : <a href="../generic/collection/CanSliceTensor.scala.html#10026" title="scalala.generic.collection.CanSliceTensor[This,K,I,That]">CanSliceTensor</a><span class="delimiter">[</span>This, K, I, That<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42366" title="That">That</a> =
    <a href="../generic/collection/CanSliceTensor.scala.html#49356" title="(from: This, keymap: scala.collection.Map[I,K])That">bf</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a>, <a href="#52208" title="scala.collection.Map[I,K]">keys</a><span class="delimiter">)</span>;

  <span class="comment">//</span>
  <span class="comment">// Sorting</span>
  <span class="comment">//</span>

  <span class="comment">/**
   * Returns the elements of this.domain ordered by their values in this map.
   * Currently this method is not particularly efficient, as it creates several
   * in-memory arrays the size of the domain.
   */</span>
  <span class="keyword">def</span> <a title="(implicit ord: Ordering[V])List[K]" id="42367">argsort</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Ordering[V]" id="219718">ord</a> : <span title="Ordering[V]">Ordering</span><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="List[K]">List</span><span class="delimiter">[</span>K<span class="delimiter">]</span> =
    <a href="generic/TensorKeysMonadic.scala.html#765101" title="(values: scalala.tensor.generic.TensorKeysMonadic[K,V,This])java.lang.Object with Iterable[K]{def self: This}">keys</a>.<span title="=&gt; List[K]">toList</span>.<span title="(lt: (K, K) =&gt; Boolean)List[K]">sortWith</span><span class="delimiter">(</span><span class="delimiter">(</span>i:<a href="#18651" title="K">K</a>, j:<a href="#18651" title="K">K</a><span class="delimiter">)</span> =&gt; <a href="#219718" title="Ordering[V]">ord</a>.<span title="(x: V, y: V)Boolean">lt</span><span class="delimiter">(</span><a href="#42342" title="(key: K)V" class="keyword">this</a><span class="delimiter">(</span><a href="#765375" title="K">i</a><span class="delimiter">)</span>, <a href="#42342" title="(key: K)V" class="keyword">this</a><span class="delimiter">(</span><a href="#765376" title="K">j</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Returns a sorted view of the current map.  Equivalent to calling
   * &lt;code&gt;x(x.argsort)&lt;/code&gt;.  Changes to the sorted view are
   * written-through to the underlying map.
   */</span>
  <span class="keyword">def</span> <a title="[That](implicit bf: scalala.generic.collection.CanSliceVector[This,K,That], implicit ord: Ordering[V])That" id="42368">sorted</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42370">That</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.collection.CanSliceVector[This,K,That]" id="765553">bf</a> : <a href="../generic/collection/CanSliceVector.scala.html#10152" title="scalala.generic.collection.CanSliceVector[This,K,That]">CanSliceVector</a><span class="delimiter">[</span>This, K, That<span class="delimiter">]</span>, <a title="Ordering[V]" id="765554">ord</a> : <span title="Ordering[V]">Ordering</span><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42370" title="That">That</a> =
    <a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="#42349" title="[That](keys: TraversableOnce[K])(implicit bf: scalala.generic.collection.CanSliceVector[This,K,That])That">apply</a><span title="(keys: TraversableOnce[K])(implicit bf: scalala.generic.collection.CanSliceVector[This,K,That])That" class="delimiter">[</span><a href="#42370" title="That">That</a><span class="delimiter">]</span><a href="#765553" title="scalala.generic.collection.CanSliceVector[This,K,That]" class="delimiter">(</a><a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="#42367" title="(implicit ord: Ordering[V])List[K]">argsort</a><span class="delimiter">)</span>;


  <span class="comment">//</span>
  <span class="comment">// Collection level queries</span>
  <span class="comment">//</span>

  <span class="comment">/** Returns a key associated with the largest value in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; K" id="42371">argmax</a> : <a href="#18651" title="K">K</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#42308" title="=&gt; Iterator[(K, V)]">pairsIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty .max&quot;)" class="string">&quot;Empty .max&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">var</span> <a href="#765571" title="(K, V)" class="delimiter">(</a><a href="#765570" title="K" id="765571">arg</a>,<a href="#765570" title="V" id="765572">max</a><span class="delimiter">)</span> = <a href="#42308" title="=&gt; Iterator[(K, V)]">pairsIterator</a>.<span title="()(K, V)">next</span>;
    <a href="#42254" title="(fn: (K, V) =&gt; Unit)Unit">foreachPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="765590">k</a>,<a title="V" id="765591">v</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41053" title="(a: V, b: V)Boolean">&gt;</a><span class="delimiter">(</span><a href="#765591" title="V">v</a>, <a href="#765572" title="V">max</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#765572" title="V">max</a> = <a href="#765591" title="V">v</a>; <a href="#765571" title="K">arg</a> = <a href="#765590" title="K">k</a>; <span class="delimiter">}</span><span class="delimiter">)</span>;
    <a href="#765571" title="K">arg</a>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns a key associated with the smallest value in the tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; K" id="42372">argmin</a> : <a href="#18651" title="K">K</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#42308" title="=&gt; Iterator[(K, V)]">pairsIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty .min&quot;)" class="string">&quot;Empty .min&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">var</span> <a href="#765598" title="(K, V)" class="delimiter">(</a><a href="#765597" title="K" id="765598">arg</a>,<a href="#765597" title="V" id="765599">min</a><span class="delimiter">)</span> = <a href="#42308" title="=&gt; Iterator[(K, V)]">pairsIterator</a>.<span title="()(K, V)">next</span>;
    <a href="#42254" title="(fn: (K, V) =&gt; Unit)Unit">foreachPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="765617">k</a>,<a title="V" id="765618">v</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41055" title="(a: V, b: V)Boolean">&lt;</a><span class="delimiter">(</span><a href="#765618" title="V">v</a>,<a href="#765599" title="V">min</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#765599" title="V">min</a> = <a href="#765618" title="V">v</a>; <a href="#765598" title="K">arg</a> = <a href="#765617" title="K">k</a>; <span class="delimiter">}</span><span class="delimiter">)</span>;
    <a href="#765598" title="K">arg</a>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the max of the values in this tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; V" id="42373">max</a> : <a href="#18652" title="V">V</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#42306" title="=&gt; Iterator[V]">valuesIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty .max&quot;)" class="string">&quot;Empty .max&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">var</span> <a title="V" id="765622">max</a> = <a href="#42306" title="=&gt; Iterator[V]">valuesIterator</a>.<span title="()V">next</span>;
    <span title="V" class="keyword">if</span> <span class="delimiter">(</span><a href="#42269" title="(fn: V =&gt; Unit)Boolean">foreachNonZeroValue</a><span class="delimiter">(</span><a title="V" id="765630">v</a> =&gt; <span class="delimiter">{</span> <a href="#765622" title="V">max</a> = <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41062" title="(a: V, b: V)V">max</a><span class="delimiter">(</span><a href="#765622" title="V">max</a>,<a href="#765630" title="V">v</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#765622" title="V">max</a>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41062" title="(a: V, b: V)V">max</a><span class="delimiter">(</span><a href="#765622" title="V">max</a>, <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V">zero</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the min of the values in this tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; V" id="42374">min</a> : <a href="#18652" title="V">V</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#42306" title="=&gt; Iterator[V]">valuesIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty .min&quot;)" class="string">&quot;Empty .min&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <span class="keyword">var</span> <a title="V" id="765634">min</a> = <a href="#42306" title="=&gt; Iterator[V]">valuesIterator</a>.<span title="()V">next</span>;
    <span title="V" class="keyword">if</span> <span class="delimiter">(</span><a href="#42269" title="(fn: V =&gt; Unit)Boolean">foreachNonZeroValue</a><span class="delimiter">(</span><a title="V" id="765642">v</a> =&gt; <span class="delimiter">{</span> <a href="#765634" title="V">min</a> = <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41061" title="(a: V, b: V)V">min</a><span class="delimiter">(</span><a href="#765634" title="V">min</a>,<a href="#765642" title="V">v</a><span class="delimiter">)</span>; <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#765634" title="V">min</a>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41061" title="(a: V, b: V)V">min</a><span class="delimiter">(</span><a href="#765634" title="V">min</a>, <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V">zero</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the sum of the values in this tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; V" id="42375">sum</a> : <a href="#18652" title="V">V</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="V" id="765646">sum</a> = <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V">zero</a>;
    <a href="#42269" title="(fn: V =&gt; Unit)Boolean">foreachNonZeroValue</a><span class="delimiter">(</span><a title="V" id="765650">v</a> =&gt; <a href="#765646" title="V">sum</a> = <a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a>.<a href="../scalar/Scalar.scala.html#41057" title="(a: V, b: V)V">+</a><span class="delimiter">(</span><a href="#765646" title="V">sum</a>,<a href="#765650" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span title="Nothing" class="keyword">return</span> <a href="#765646" title="V">sum</a>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the mean of the values in this tensor.
   * The returned type is a decimal version of the scalar type of this tensor.
   */</span>
  <span class="keyword">def</span> <a title="[D](implicit calc: scalala.generic.math.CanMean[This,D])D" id="42376">mean</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42378">D</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.math.CanMean[This,D]" id="765654">calc</a> : <a href="../generic/math/CanMean.scala.html#12166" title="scalala.generic.math.CanMean[This,D]">CanMean</a><span class="delimiter">[</span>This,D<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42378" title="D">D</a> =
    <a href="#765654" title="(v1: This)D">calc</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a><span class="delimiter">)</span>;

  <span class="comment">/**
   * Returns the variance of the values in this tensor.
   * The returned type is a decimal version of the scalar type of this tensor.
   */</span>
  <span class="keyword">def</span> <a title="[D](implicit calc: scalala.generic.math.CanVariance[This,D])D" id="42379">variance</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42381">D</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.math.CanVariance[This,D]" id="765658">calc</a> : <a href="../generic/math/CanVariance.scala.html#12349" title="scalala.generic.math.CanVariance[This,D]">CanVariance</a><span class="delimiter">[</span>This,D<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42381" title="D">D</a> =
    <a href="#765658" title="(v1: This)D">calc</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a><span class="delimiter">)</span>;
  
  <span class="comment">/**
   * Returns the standard deviation of the values in this tensor.
   * The returned type is a decimal version of the scalar type of this tensor.
   */</span>
  <span class="keyword">def</span> <a title="[D](implicit calc: scalala.generic.math.CanVariance[This,D], implicit sqrt: scalala.generic.math.CanSqrt[D,D])D" id="42382">stddev</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="42384">D</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.generic.math.CanVariance[This,D]" id="765662">calc</a> : <a href="../generic/math/CanVariance.scala.html#12349" title="scalala.generic.math.CanVariance[This,D]">CanVariance</a><span class="delimiter">[</span>This,D<span class="delimiter">]</span>, <a title="scalala.generic.math.CanSqrt[D,D]" id="765663">sqrt</a> : <a href="../generic/math/CanSqrt.scala.html#12277" title="scalala.generic.math.CanSqrt[D,D]">CanSqrt</a><span class="delimiter">[</span>D,D<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="#42384" title="D">D</a> =
    <a href="../operators/UnaryOp.scala.html#40238" title="(t: D)D">sqrt</a><span class="delimiter">(</span><a href="#765662" title="(v1: This)D">calc</a><span class="delimiter">(</span><a href="#42241" title="=&gt; This">repr</a><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">//</span>
  <span class="comment">// Conversions</span>
  <span class="comment">//</span>

  <span class="comment">/** Returns an ordering over the domain based on the values in this map. */</span>
  <span class="keyword">def</span> <a title="(implicit ord: Ordering[V])Ordering[K]" id="42385">asOrdering</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Ordering[V]" id="765669">ord</a> : <span title="Ordering[V]">Ordering</span><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="Ordering[K]">Ordering</span><span class="delimiter">[</span>K<span class="delimiter">]</span> = <a href="#765671" title="java.lang.Object with Ordering[K]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Ordering[K]" id="765671">Ordering</a><span class="delimiter">[</span>K<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(a: K, b: K)Int" id="765705">compare</a><span class="delimiter">(</span><a title="K" id="765706">a</a> : <a href="#18651" title="K">K</a>, <a title="K" id="765707">b</a> : <a href="#18651" title="K">K</a><span class="delimiter">)</span> = <a href="#765669" title="Ordering[V]">ord</a>.<span title="(x: V, y: V)Int">compare</span><span class="delimiter">(</span><a href="#42342" title="(key: K)V">self</a><span class="delimiter">(</span><a href="#765706" title="K">a</a><span class="delimiter">)</span>, <a href="#42342" title="(key: K)V">self</a><span class="delimiter">(</span><a href="#765707" title="K">b</a><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns an unmodifiable Map-like view of this Tensor. */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.collection.Map[K,V]" id="42386">asMap</a> : scala.collection.<span title="scala.collection.Map[K,V]">Map</span><span class="delimiter">[</span>K,V<span class="delimiter">]</span> =
    <a href="generic/TensorPairsMonadic.scala.html#765911" title="(pairs: scalala.tensor.generic.TensorPairsMonadic[K,V,This])java.lang.Object with scala.collection.Map[K,V]{def self: This; def -(key: K): scala.collection.immutable.Map[K,V]}">pairs</a>;

  <span class="comment">/** Creates a new copy of this Tensor as a scala map. */</span>
  <span class="keyword">def</span> <a title="=&gt; Map[K,V]" id="42387">toMap</a> : <span title="Map[K,V]">Map</span><span class="delimiter">[</span>K,V<span class="delimiter">]</span> =
    <a href="#42386" title="=&gt; scala.collection.Map[K,V]">asMap</a>.<span title="(implicit ev: &lt;:&lt;[(K, V),(K, V)])scala.collection.immutable.Map[K,V]">toMap</span>;

  <span class="keyword">protected</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; V =&gt; String" id="42388">buildMkValueString</a> : V=&gt;String = <span class="delimiter">{</span>
    <span title="V =&gt; String" class="keyword">if</span> <span class="delimiter">(</span><a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="[T](implicit e: T)T">implicitly</span><a href="../scalar/Scalar.scala.html#45343" title="(implicit e: scalala.scalar.Scalar[Double])scalala.scalar.Scalar[Double]" class="delimiter">[</a><a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[Double]">Scalar</a><span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">(</span>v : <a href="#18652" title="V">V</a><span class="delimiter">)</span> =&gt; <span title="object java.lang.String">String</span>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.String">format</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;% g&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#766757" title="V">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Double" class="delimiter">[</span><span title="Double">Double</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">else</span> <span title="V =&gt; String" class="keyword">if</span> <span class="delimiter">(</span><a href="#42242" title="=&gt; scalala.scalar.Scalar[V]">scalar</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="[T](implicit e: T)T">implicitly</span><a href="../scalar/Scalar.scala.html#45341" title="(implicit e: scalala.scalar.Scalar[Float])scalala.scalar.Scalar[Float]" class="delimiter">[</a><a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[Float]">Scalar</a><span class="delimiter">[</span>Float<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">(</span>v : <a href="#18652" title="V">V</a><span class="delimiter">)</span> =&gt; <span title="object java.lang.String">String</span>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.String">format</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;% g&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#766769" title="V">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Float" class="delimiter">[</span><span title="Float">Float</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="keyword">else</span>
      <span class="delimiter">(</span>v : <a href="#18652" title="V">V</a><span class="delimiter">)</span> =&gt; <a href="#766776" title="V">v</a>.<span title="()java.lang.String">toString</span>;
  <span class="delimiter">}</span>
  
  <span class="keyword">protected</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; K =&gt; String" id="42389">buildMkKeyString</a> : K=&gt;String = <span class="delimiter">{</span>
    <span class="delimiter">(</span>k : <a href="#18651" title="K">K</a><span class="delimiter">)</span> =&gt; <a href="#766780" title="K">k</a>.<span title="()java.lang.String">toString</span>;
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Creates a string for the first n non-zero items using the given key string
   * and value string builder.
   */</span>
  <span class="keyword">def</span> <a title="(n: Int, mkKeyString: K =&gt; String, mkValueString: V =&gt; String)String" id="42390">toString</a><span class="delimiter">(</span><a title="Int" id="216349">n</a> : <span title="Int">Int</span>, <a title="K =&gt; String" id="216350">mkKeyString</a> : K=&gt;String, <a title="V =&gt; String" id="216351">mkValueString</a> : V=&gt;String<span class="delimiter">)</span> : <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterator[K]" id="766781">iter</a> = <a href="#42304" title="=&gt; Iterator[K]">keysIterator</a>;
    <span class="keyword">val</span> <a title="List[K]" id="766782">keys</a> = <a href="#766781" title="Iterator[K]">iter</a>.<span title="(n: Int)Iterator[K]">take</span><span class="delimiter">(</span><a href="#216349" title="Int">n</a><span class="delimiter">)</span>.<span title="=&gt; List[K]">toList</span>;
    
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#766782" title="List[K]">keys</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> 
      <span title="Nothing" class="keyword">return</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>;
    
    <span class="keyword">val</span> <a title="java.lang.String" id="766783">newline</a> = <span title="object java.lang.System">System</span>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span><span class="delimiter">(</span><span title="java.lang.String(&quot;line.separator&quot;)" class="string">&quot;line.separator&quot;</span><span class="delimiter">)</span>;
    <span class="keyword">val</span> <a title="Int" id="766784">keyWidth</a> = <a href="#766782" title="List[K]">keys</a>.<span title="=&gt; Iterator[K]">iterator</span>.<span title="(f: K =&gt; String)Iterator[String]">map</span><span class="delimiter">(</span><a href="#216350" title="K =&gt; String">mkKeyString</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Int)Iterator[Int]">map</span><span class="delimiter">(</span><a href="#766808" title="String">_</a>.<span title="()Int">length</span><span class="delimiter">)</span>.<span title="(implicit cmp: Ordering[Int])Int">max</span><span title="(x: Int)Int">+</span><span title="Int(1)" class="int">1</span>;
    <span class="keyword">val</span> <a title="String" id="766785">rv</a> = <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">(</span><a title="K" id="766902">key</a> &lt;- <a href="#42253" title="=&gt; scalala.tensor.generic.TensorNonZeroMonadic[K,V,This]">nonzero</a>.<a href="generic/TensorNonZeroMonadic.scala.html#764433" title="=&gt; scalala.tensor.generic.TensorNonZeroKeysMonadic[K,V,This]">keys</a>.<a href="generic/TensorNonZeroKeysMonadic.scala.html#766886" title="(f: K =&gt; java.lang.String)Iterator[java.lang.String]">iterator</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="766903">ks</a> = <a href="#216350" title="(v1: K)String">mkKeyString</a><span class="delimiter">(</span><a href="#766902" title="K">key</a><span class="delimiter">)</span>;
      <a href="#766903" title="String">ks</a> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; &quot;</span> <span title="(n: Int)String">*</span> <span class="delimiter">(</span><a href="#766784" title="Int">keyWidth</a><span title="(x: Int)Int">-</span><a href="#766903" title="String">ks</a>.<span title="()Int">length</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#216351" title="(v1: V)String">mkValueString</a><span class="delimiter">(</span><a href="#42342" title="(key: K)V">apply</a><span class="delimiter">(</span><a href="#766902" title="K">key</a><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><a href="#766783" title="java.lang.String">newline</a><span class="delimiter">)</span>;
    
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#766781" title="Iterator[K]">iter</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#766785" title="String">rv</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#766783" title="java.lang.String">newline</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;... (&quot;)" class="string">&quot;... (&quot;</span><span title="(x$1: Any)java.lang.String">+</span><span class="delimiter">(</span><a href="DomainFunction.scala.html#42232" title="=&gt; D">domain</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; total)&quot;)" class="string">&quot; total)&quot;</span>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#766785" title="String">rv</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a string representation of the first 10 (potentially) non-zero
   * items in the tensor.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="42391">toString</a> : <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#42390" title="(n: Int, mkKeyString: K =&gt; String, mkValueString: V =&gt; String)String">toString</a><span class="delimiter">(</span><span title="Int(10)" class="int">10</span>, <a href="#42389" title="=&gt; K =&gt; String">buildMkKeyString</a>, <a href="#42388" title="=&gt; V =&gt; String">buildMkValueString</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">//</span>
  <span class="comment">// Equality</span>
  <span class="comment">//</span>

  <span class="comment">/**
   * Default implementation iterates the full domain in order, checking
   * that each function returns the same value.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(other: Any)Boolean" id="42392">equals</a><span class="delimiter">(</span><a title="Any" id="216417">other</a> : <span title="Any">Any</span><span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <a href="#216417" title="Any">other</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Boolean" id="766996">that</a>: <a href="#18116" title="scalala.tensor.Tensor[_,_]">Tensor</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span> =&gt;
      <span class="delimiter">(</span><a href="#18455" title="TensorLike.this.type" class="keyword">this</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#766996" title="scalala.tensor.Tensor[_,_]">that</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <span class="delimiter">(</span><a href="#766996" title="scalala.tensor.Tensor[_,_]">that</a> <a href="#42393" title="(other: Any)Boolean">canEqual</a> <a href="#18455" title="scalala.tensor.TensorLike[K,V,D,This]" class="keyword">this</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span class="delimiter">(</span><a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; D">domain</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#766996" title="scalala.tensor.Tensor[_,_]">that</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[_]">domain</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span class="delimiter">(</span><span class="delimiter">{</span> <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V]" id="767004">casted</a> = <a href="#766996" title="scalala.tensor.Tensor[_,_]">that</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scalala.tensor.Tensor[K,V]" class="delimiter">[</span><a href="#18116" title="scalala.tensor.Tensor[K,V]">Tensor</a><span class="delimiter">[</span>K,V<span class="delimiter">]</span><span class="delimiter">]</span>;
         <a href="#18455" title="TensorLike.this.type" class="keyword">this</a>.<a href="#42333" title="(tensor: scalala.tensor.Tensor[K,V])(fn: (K, V, V) =&gt; Unit)(implicit jj: scalala.generic.collection.CanJoin[This,scalala.tensor.Tensor[K,V],K,V,V])Unit">joinEitherNonZero</a><span class="delimiter">(</span><a href="#767004" title="scalala.tensor.Tensor[K,V]">casted</a><span class="delimiter">)</span> <a href="#55886" title="(implicit viewA: This =&gt; scalala.tensor.Tensor[K,V], implicit viewB: scalala.tensor.Tensor[K,V] =&gt; scalala.tensor.Tensor[K,V])scalala.generic.collection.CanJoin[This,scalala.tensor.Tensor[K,V],K,V,V]" class="delimiter">{</a> <span class="delimiter">(</span><a title="K" id="767020">k</a>,<a title="V" id="767021">v1</a>,<a title="V" id="767022">v2</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#767021" title="V">v1</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#767022" title="V">v2</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>; <span class="delimiter">}</span>
         <span title="Boolean(true)" class="keyword">true</span>; <span class="delimiter">}</span><span class="delimiter">)</span>;
    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** From recipe in &quot;Programming in Scala&quot; section 28.4. */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(other: Any)Boolean" id="42393">canEqual</a><span class="delimiter">(</span><a title="Any" id="745802">other</a> : <span title="Any">Any</span><span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <a href="#745802" title="Any">other</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Boolean(true)" id="767074">that</a> : <a href="#18116" title="scalala.tensor.Tensor[_,_]">Tensor</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>;
    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>;
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="42394">hashCode</a><span class="delimiter">(</span><span class="delimiter">)</span> =
    <a href="DomainFunction.scala.html#42232" title="=&gt; D">domain</a>.<span title="()Int">hashCode</span> <span title="(x: Int)Int">+</span> <a href="#42308" title="=&gt; Iterator[(K, V)]">pairsIterator</a>.<span title="(z: Int)(op: (Int, (K, V)) =&gt; Int)Int">foldLeft</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="216407">hash</a>,<a title="(K, V)" id="216408">v</a><span class="delimiter">)</span> =&gt; <span title="Int(41)" class="int">41</span> <span title="(x: Int)Int">*</span> <a href="#216407" title="Int">hash</a> <span title="(x: Int)Int">+</span> <a href="#216408" title="(K, V)">v</a>.<span title="()Int">hashCode</span><span class="delimiter">)</span>;
<span class="delimiter">}</span>

<span class="comment">/**
 * K Tensor is a map from keys K (with a domain) to numeric scalar values V.
 * More specific operations are available on tensors indexed by a single key
 * (Tensor1, Vector) or pair of keys (Tensor2, Matrix).
 *
 * @author dramage
 */</span>
<span class="keyword">trait</span> <a title="trait Tensor[K, V] extends java.lang.Object with scalala.tensor.TensorLike[K,V,scalala.tensor.domain.IterableDomain[K],scalala.tensor.Tensor[K,V]]" id="18116">Tensor</a>
<span class="delimiter">[</span>@specialized<span class="delimiter">(</span>Int,Long<span class="delimiter">)</span> <a title="&gt;: Nothing &lt;: Any" id="18655">K</a>, @specialized<span class="delimiter">(</span>Int,Long,Float,Double,Boolean<span class="delimiter">)</span> <a title="&gt;: Nothing &lt;: Any" id="18656">V</a><span class="delimiter">]</span>
<span class="keyword">extends</span> <a href="#18455" title="scalala.tensor.TensorLike[K,V,scalala.tensor.domain.IterableDomain[K],scalala.tensor.Tensor[K,V]]">TensorLike</a><span class="delimiter">[</span>K, V, IterableDomain<span class="delimiter">[</span>K<span class="delimiter">]</span>, Tensor<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>;

<span class="keyword">object</span> <a title="object scalala.tensor.Tensor" id="18117">Tensor</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/** Constructs a tensor for the given domain. */</span>
  <span class="keyword">def</span> <a title="[K, V](domain: scalala.tensor.domain.IterableDomain[K])(implicit evidence$1: scalala.scalar.Scalar[V])scalala.tensor.mutable.Tensor[K,V]" id="767089">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55841">K</a>,<a title="&gt;: Nothing &lt;: Any" id="55842">V</a>:Scalar<span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.tensor.domain.IterableDomain[K]" id="767088">domain</a> : <a href="domain/IterableDomain.scala.html#19417" title="scalala.tensor.domain.IterableDomain[K]">IterableDomain</a><span class="delimiter">[</span>K<span class="delimiter">]</span><span class="delimiter">)</span> =
    mutable.<a href="mutable/Tensor.scala.html#20032" title="object scalala.tensor.mutable.Tensor">Tensor</a>.<a href="mutable/Tensor.scala.html#70698" title="(domain: scalala.tensor.domain.IterableDomain[K])(implicit evidence$1: scalala.scalar.Scalar[V])scalala.tensor.mutable.Tensor[K,V]">apply</a><a href="#767089" title="scalala.scalar.Scalar[V]" class="delimiter">(</a><a href="#767088" title="scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span>;

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V](implicit evidence$2: scalala.scalar.Scalar[V])java.lang.Object with scalala.generic.collection.CanView[scalala.tensor.Tensor[K,V],scalala.tensor.TensorView.IdentityView[K,V,scalala.tensor.Tensor[K,V]]]{def apply(from: scalala.tensor.Tensor[K,V]): scalala.tensor.TensorView.IdentityViewImpl[K,V,scalala.tensor.Tensor[K,V]]}" id="56160">canView</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55846">K</a>, <a title="&gt;: Nothing &lt;: Any" id="55847">V</a>:Scalar<span class="delimiter">]</span> =
  <a href="#56163" title="java.lang.Object with scalala.generic.collection.CanView[scalala.tensor.Tensor[K,V],scalala.tensor.TensorView.IdentityView[K,V,scalala.tensor.Tensor[K,V]]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.generic.collection.CanView[scalala.tensor.Tensor[K,V],scalala.tensor.TensorView.IdentityView[K,V,scalala.tensor.Tensor[K,V]]]" id="56163">CanView</a><span class="delimiter">[</span>Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span>,TensorView.IdentityView<span class="delimiter">[</span>K,V,Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: scalala.tensor.Tensor[K,V])scalala.tensor.TensorView.IdentityViewImpl[K,V,scalala.tensor.Tensor[K,V]]" id="56229">apply</a><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K,V]" id="56230">from</a> : <a href="#18116" title="scalala.tensor.Tensor[K,V]">Tensor</a><span class="delimiter">[</span>K,V<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#56160" title="scalala.tensor.TensorView.IdentityViewImpl[K,V,scalala.tensor.Tensor[K,V]]" class="keyword">new</a> TensorView.<a href="TensorView.scala.html#56175" title="scalala.tensor.TensorView.IdentityViewImpl[K,V,scalala.tensor.Tensor[K,V]]">IdentityViewImpl</a><span class="delimiter">[</span>K,V,Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#56230" title="scalala.tensor.Tensor[K,V]">from</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K1, K2, V](implicit evidence$3: scalala.scalar.Scalar[V])java.lang.Object with scalala.generic.collection.CanSliceTensor[scalala.tensor.Tensor[K1,V],K1,K2,scalala.tensor.Tensor[K2,V]]{def apply(from: scalala.tensor.Tensor[K1,V],keymap: scala.collection.Map[K2,K1]): scalala.tensor.TensorSlice.FromKeyMap[K1,K2,V,scalala.tensor.Tensor[K1,V]]}" id="56301">canSliceTensor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55852">K1</a>, <a title="&gt;: Nothing &lt;: Any" id="55853">K2</a>, <a title="&gt;: Nothing &lt;: Any" id="55854">V</a>:Scalar<span class="delimiter">]</span> =
  <a href="#56304" title="java.lang.Object with scalala.generic.collection.CanSliceTensor[scalala.tensor.Tensor[K1,V],K1,K2,scalala.tensor.Tensor[K2,V]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.generic.collection.CanSliceTensor[scalala.tensor.Tensor[K1,V],K1,K2,scalala.tensor.Tensor[K2,V]]" id="56304">CanSliceTensor</a><span class="delimiter">[</span>Tensor<span class="delimiter">[</span>K1,V<span class="delimiter">]</span>, K1, K2, Tensor<span class="delimiter">[</span>K2,V<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: scalala.tensor.Tensor[K1,V], keymap: scala.collection.Map[K2,K1])scalala.tensor.TensorSlice.FromKeyMap[K1,K2,V,scalala.tensor.Tensor[K1,V]]" id="56306">apply</a><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K1,V]" id="56307">from</a> : <a href="#18116" title="scalala.tensor.Tensor[K1,V]">Tensor</a><span class="delimiter">[</span>K1,V<span class="delimiter">]</span>, <a title="scala.collection.Map[K2,K1]" id="56308">keymap</a> : scala.collection.<span title="scala.collection.Map[K2,K1]">Map</span><span class="delimiter">[</span>K2,K1<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#56301" title="scalala.tensor.TensorSlice.FromKeyMap[K1,K2,V,scalala.tensor.Tensor[K1,V]]" class="keyword">new</a> TensorSlice.<a href="TensorSlice.scala.html#56314" title="scalala.tensor.TensorSlice.FromKeyMap[K1,K2,V,scalala.tensor.Tensor[K1,V]]">FromKeyMap</a><span class="delimiter">[</span>K1, K2, V, Tensor<span class="delimiter">[</span>K1,V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#56307" title="scalala.tensor.Tensor[K1,V]">from</a>, <a href="#56308" title="scala.collection.Map[K2,K1]">keymap</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V](implicit evidence$4: scalala.scalar.Scalar[V])java.lang.Object with scalala.generic.collection.CanSliceVector[scalala.tensor.Tensor[K,V],K,scalala.tensor.Vector[V]]{def apply(from: scalala.tensor.Tensor[K,V],keys: Seq[K]): scalala.tensor.VectorSlice.FromKeySeq[K,V,scalala.tensor.Tensor[K,V]]}" id="56063">canSliceVector</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55858">K</a>, <a title="&gt;: Nothing &lt;: Any" id="55859">V</a>:Scalar<span class="delimiter">]</span> =
  <a href="#56066" title="java.lang.Object with scalala.generic.collection.CanSliceVector[scalala.tensor.Tensor[K,V],K,scalala.tensor.Vector[V]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.generic.collection.CanSliceVector[scalala.tensor.Tensor[K,V],K,scalala.tensor.Vector[V]]" id="56066">CanSliceVector</a><span class="delimiter">[</span>Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span>, K, Vector<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: scalala.tensor.Tensor[K,V], keys: Seq[K])scalala.tensor.VectorSlice.FromKeySeq[K,V,scalala.tensor.Tensor[K,V]]" id="56068">apply</a><span class="delimiter">(</span><a title="scalala.tensor.Tensor[K,V]" id="56069">from</a> : <a href="#18116" title="scalala.tensor.Tensor[K,V]">Tensor</a><span class="delimiter">[</span>K,V<span class="delimiter">]</span>, <a title="Seq[K]" id="56070">keys</a> : <span title="Seq[K]">Seq</span><span class="delimiter">[</span>K<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#56063" title="scalala.tensor.VectorSlice.FromKeySeq[K,V,scalala.tensor.Tensor[K,V]]" class="keyword">new</a> VectorSlice.<a href="VectorSlice.scala.html#56076" title="scalala.tensor.VectorSlice.FromKeySeq[K,V,scalala.tensor.Tensor[K,V]]">FromKeySeq</a><span class="delimiter">[</span>K,V,Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#56069" title="scalala.tensor.Tensor[K,V]">from</a>, <a href="#56070" title="Seq[K]">keys</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V, RV, This, D, That](implicit view: This =&gt; scalala.tensor.Tensor[K,V], implicit d: scalala.tensor.domain.CanGetDomain[This,D], implicit bf: scalala.generic.collection.CanBuildTensorFrom[This,D,K,RV,That], implicit s: scalala.scalar.Scalar[RV])scalala.generic.collection.CanMapValues[This,V,RV,That]" id="55860">canMapValues</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55867">K</a>, <a title="&gt;: Nothing &lt;: Any" id="55868">V</a>, <a title="&gt;: Nothing &lt;: Any" id="55869">RV</a>, <a title="&gt;: Nothing &lt;: Any" id="55870">This</a>, <a title="&gt;: Nothing &lt;: Any" id="55871">D</a>, <a title="&gt;: Nothing &lt;: Any" id="55872">That</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="This =&gt; scalala.tensor.Tensor[K,V]" id="56054">view</a> : This=&gt;Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span>, <a title="scalala.tensor.domain.CanGetDomain[This,D]" id="56055">d</a> : <a href="domain/CanGetDomain.scala.html#19411" title="scalala.tensor.domain.CanGetDomain[This,D]">CanGetDomain</a><span class="delimiter">[</span>This,D<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanBuildTensorFrom[This,D,K,RV,That]" id="56056">bf</a> : <a href="../generic/collection/CanBuildTensorFrom.scala.html#9972" title="scalala.generic.collection.CanBuildTensorFrom[This,D,K,RV,That]">CanBuildTensorFrom</a><span class="delimiter">[</span>This, D, K, RV, That<span class="delimiter">]</span>,
   <a title="scalala.scalar.Scalar[RV]" id="56057">s</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[RV]">Scalar</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../generic/collection/CanMapValues.scala.html#9756" title="scalala.generic.collection.CanMapValues[This,V,RV,That]">CanMapValues</a><span class="delimiter">[</span>This,V,RV,That<span class="delimiter">]</span>
  = <a href="#767168" title="java.lang.Object with scalala.generic.collection.CanMapValues[This,V,RV,That]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.generic.collection.CanMapValues[This,V,RV,That]" id="767168">CanMapValues</a><span class="delimiter">[</span>This,V,RV,That<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: This, fn: V =&gt; RV)That" id="767172">map</a><span class="delimiter">(</span><a title="This" id="767174">from</a> : <a href="#55870" title="This">This</a>, <a title="V =&gt; RV" id="767175">fn</a> : <span class="delimiter">(</span>V=&gt;RV<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.generic.TensorBuilder[K,RV,That]" id="767180">builder</a> = <a href="../generic/collection/CanBuildTensorFrom.scala.html#42169" title="(from: This, domain: D)scalala.tensor.generic.TensorBuilder[K,RV,That]">bf</a><span class="delimiter">(</span><a href="#767174" title="This">from</a>, <a href="#56054" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="D" class="delimiter">[</span><a href="#55871" title="D">D</a><span class="delimiter">]</span><span class="delimiter">)</span>;
      <a href="#56054" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="#42254" title="(fn: (K, V) =&gt; Unit)Unit">foreachPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="767261">k</a>,<a title="V" id="767262">v</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#767261" title="K">k</a><span class="delimiter">)</span> = <a href="#767175" title="(v1: V)RV">fn</a><span class="delimiter">(</span><a href="#767262" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#767180" title="scalala.tensor.generic.TensorBuilder[K,RV,That]">builder</a>.<a href="generic/TensorBuilder.scala.html#42140" title="=&gt; That">result</a>;
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: This, fn: V =&gt; RV)That" id="767173">mapNonZero</a><span class="delimiter">(</span><a title="This" id="767267">from</a> : <a href="#55870" title="This">This</a>, <a title="V =&gt; RV" id="767268">fn</a> : <span class="delimiter">(</span>V=&gt;RV<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.generic.TensorBuilder[K,RV,That]" id="767273">builder</a> = <a href="../generic/collection/CanBuildTensorFrom.scala.html#42169" title="(from: This, domain: D)scalala.tensor.generic.TensorBuilder[K,RV,That]">bf</a><span class="delimiter">(</span><a href="#767267" title="This">from</a>, <a href="#56054" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="D" class="delimiter">[</span><a href="#55871" title="D">D</a><span class="delimiter">]</span><span class="delimiter">)</span>;
      <a href="#56054" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="#42257" title="(fn: (K, V) =&gt; Unit)Boolean">foreachNonZeroPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="767349">k</a>,<a title="V" id="767350">v</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#767349" title="K">k</a><span class="delimiter">)</span> = <a href="#767268" title="(v1: V)RV">fn</a><span class="delimiter">(</span><a href="#767350" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#767273" title="scalala.tensor.generic.TensorBuilder[K,RV,That]">builder</a>.<a href="generic/TensorBuilder.scala.html#42140" title="=&gt; That">result</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V, RV, This, D, That](implicit view: This =&gt; scalala.tensor.Tensor[K,V], implicit d: scalala.tensor.domain.CanGetDomain[This,D], implicit bf: scalala.generic.collection.CanBuildTensorFrom[This,D,K,RV,That], implicit s: scalala.scalar.Scalar[RV])scalala.generic.collection.CanMapKeyValuePairs[This,K,V,RV,That]" id="55873">canMapKeyValuePairs</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55880">K</a>, <a title="&gt;: Nothing &lt;: Any" id="55881">V</a>, <a title="&gt;: Nothing &lt;: Any" id="55882">RV</a>, <a title="&gt;: Nothing &lt;: Any" id="55883">This</a>, <a title="&gt;: Nothing &lt;: Any" id="55884">D</a>, <a title="&gt;: Nothing &lt;: Any" id="55885">That</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="This =&gt; scalala.tensor.Tensor[K,V]" id="56045">view</a> : This=&gt;Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span>, <a title="scalala.tensor.domain.CanGetDomain[This,D]" id="56046">d</a> : <a href="domain/CanGetDomain.scala.html#19411" title="scalala.tensor.domain.CanGetDomain[This,D]">CanGetDomain</a><span class="delimiter">[</span>This,D<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanBuildTensorFrom[This,D,K,RV,That]" id="56047">bf</a> : <a href="../generic/collection/CanBuildTensorFrom.scala.html#9972" title="scalala.generic.collection.CanBuildTensorFrom[This,D,K,RV,That]">CanBuildTensorFrom</a><span class="delimiter">[</span>This, D, K, RV, That<span class="delimiter">]</span>,
   <a title="scalala.scalar.Scalar[RV]" id="56048">s</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[RV]">Scalar</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../generic/collection/CanMapKeyValuePairs.scala.html#10296" title="scalala.generic.collection.CanMapKeyValuePairs[This,K,V,RV,That]">CanMapKeyValuePairs</a><span class="delimiter">[</span>This,K,V,RV,That<span class="delimiter">]</span>
  = <a href="#767357" title="java.lang.Object with scalala.generic.collection.CanMapKeyValuePairs[This,K,V,RV,That]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.generic.collection.CanMapKeyValuePairs[This,K,V,RV,That]" id="767357">CanMapKeyValuePairs</a><span class="delimiter">[</span>This,K,V,RV,That<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: This, fn: (K, V) =&gt; RV)That" id="767361">map</a><span class="delimiter">(</span><a title="This" id="767363">from</a> : <a href="#55883" title="This">This</a>, <a title="(K, V) =&gt; RV" id="767364">fn</a> : <span class="delimiter">(</span><span class="delimiter">(</span>K,V<span class="delimiter">)</span>=&gt;RV<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.generic.TensorBuilder[K,RV,That]" id="767369">builder</a> = <a href="../generic/collection/CanBuildTensorFrom.scala.html#42169" title="(from: This, domain: D)scalala.tensor.generic.TensorBuilder[K,RV,That]">bf</a><span class="delimiter">(</span><a href="#767363" title="This">from</a>, <a href="#56045" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="D" class="delimiter">[</span><a href="#55884" title="D">D</a><span class="delimiter">]</span><span class="delimiter">)</span>;
      <a href="#56045" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="#42254" title="(fn: (K, V) =&gt; Unit)Unit">foreachPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="767447">k</a>,<a title="V" id="767448">v</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#767447" title="K">k</a><span class="delimiter">)</span> = <a href="#767364" title="(v1: K, v2: V)RV">fn</a><span class="delimiter">(</span><a href="#767447" title="K">k</a>,<a href="#767448" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#767369" title="scalala.tensor.generic.TensorBuilder[K,RV,That]">builder</a>.<a href="generic/TensorBuilder.scala.html#42140" title="=&gt; That">result</a>;
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: This, fn: (K, V) =&gt; RV)That" id="767362">mapNonZero</a><span class="delimiter">(</span><a title="This" id="767454">from</a> : <a href="#55883" title="This">This</a>, <a title="(K, V) =&gt; RV" id="767455">fn</a> : <span class="delimiter">(</span><span class="delimiter">(</span>K,V<span class="delimiter">)</span>=&gt;RV<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.generic.TensorBuilder[K,RV,That]" id="767460">builder</a> = <a href="../generic/collection/CanBuildTensorFrom.scala.html#42169" title="(from: This, domain: D)scalala.tensor.generic.TensorBuilder[K,RV,That]">bf</a><span class="delimiter">(</span><a href="#767454" title="This">from</a>, <a href="#56045" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="D" class="delimiter">[</span><a href="#55884" title="D">D</a><span class="delimiter">]</span><span class="delimiter">)</span>;
      <a href="#56045" title="(v1: This)scalala.tensor.Tensor[K,V]">from</a>.<a href="#42257" title="(fn: (K, V) =&gt; Unit)Boolean">foreachNonZeroPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="767535">k</a>,<a title="V" id="767536">v</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#767535" title="K">k</a><span class="delimiter">)</span> = <a href="#767455" title="(v1: K, v2: V)RV">fn</a><span class="delimiter">(</span><a href="#767535" title="K">k</a>,<a href="#767536" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#767460" title="scalala.tensor.generic.TensorBuilder[K,RV,That]">builder</a>.<a href="generic/TensorBuilder.scala.html#42140" title="=&gt; That">result</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V1, V2, A, B](implicit viewA: A =&gt; scalala.tensor.Tensor[K,V1], implicit viewB: B =&gt; scalala.tensor.Tensor[K,V2])scalala.generic.collection.CanJoin[A,B,K,V1,V2]" id="55886">canJoin</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55892">K</a>, <a title="&gt;: Nothing &lt;: Any" id="55893">V1</a>, <a title="&gt;: Nothing &lt;: Any" id="55894">V2</a>, <a title="&gt;: Nothing &lt;: Any" id="55895">A</a>, <a title="&gt;: Nothing &lt;: Any" id="55896">B</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="A =&gt; scalala.tensor.Tensor[K,V1]" id="56040">viewA</a> : A=&gt;Tensor<span class="delimiter">[</span>K,V1<span class="delimiter">]</span>, <a title="B =&gt; scalala.tensor.Tensor[K,V2]" id="56041">viewB</a> : B=&gt;Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../generic/collection/CanJoin.scala.html#9990" title="scalala.generic.collection.CanJoin[A,B,K,V1,V2]">CanJoin</a><span class="delimiter">[</span>A, B, K, V1, V2<span class="delimiter">]</span> =
  <a href="#767544" title="java.lang.Object with scalala.generic.collection.CanJoin[A,B,K,V1,V2]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.generic.collection.CanJoin[A,B,K,V1,V2]" id="767544">CanJoin</a><span class="delimiter">[</span>A, B, K, V1, V2<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[RV](_a: A, _b: B, fn: (K, V1, V2) =&gt; RV)Unit" id="767548">joinAll</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="767550">RV</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="767557">_a</a> : <a href="#55895" title="A">A</a>, <a title="B" id="767558">_b</a> : <a href="#55896" title="B">B</a>, <a title="(K, V1, V2) =&gt; RV" id="767559">fn</a> : <span class="delimiter">(</span>K,V1,V2<span class="delimiter">)</span>=&gt;RV<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V1]" id="767580">a</a> = <a href="#56040" title="(v1: A)scalala.tensor.Tensor[K,V1]">viewA</a><span class="delimiter">(</span><a href="#767557" title="A">_a</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V2]" id="767581">b</a> = <a href="#56041" title="(v1: B)scalala.tensor.Tensor[K,V2]">viewB</a><span class="delimiter">(</span><a href="#767558" title="B">_b</a><span class="delimiter">)</span>;
      <a href="#767580" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="DomainFunction.scala.html#42235" title="(domain: scalala.tensor.domain.Domain[K])Unit">checkDomain</a><span class="delimiter">(</span><a href="#767581" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[K]" id="767582">visited</a> = scala.collection.mutable.<span title="[A](elems: A*)scala.collection.mutable.HashSet[A]">HashSet</span><span title="(elems: K*)scala.collection.mutable.HashSet[K]" class="delimiter">[</span><a href="#55892" title="K">K</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#767580" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42254" title="(fn: (K, V1) =&gt; scala.collection.mutable.HashSet[K])Unit">foreachPair</a><span class="delimiter">{</span><span class="delimiter">(</span><a title="K" id="767619">k</a>,<a title="V1" id="767620">aV</a><span class="delimiter">)</span> =&gt;
        <a href="#767559" title="(v1: K, v2: V1, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#767619" title="K">k</a>,<a href="#767620" title="V1">aV</a>,<a href="#42342" title="(key: K)V2">b</a><span class="delimiter">(</span><a href="#767619" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#767582" title="scala.collection.mutable.HashSet[K]">visited</a> <span title="(elem: K)visited.type">+=</span> <a href="#767619" title="K">k</a>
      <span class="delimiter">}</span>;
      <a href="#767581" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42254" title="(fn: (K, V2) =&gt; Any)Unit">foreachPair</a><span class="delimiter">{</span> <span class="delimiter">(</span><a title="K" id="767739">k</a>,<a title="V2" id="767740">bV</a><span class="delimiter">)</span> =&gt;
        <span title="Any" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#767582" title="(elem: K)Boolean">visited</a><span class="delimiter">(</span><a href="#767739" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#767559" title="(v1: K, v2: V1, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#767739" title="K">k</a>,<a href="#42342" title="(key: K)V1">a</a><span class="delimiter">(</span><a href="#767739" title="K">k</a><span class="delimiter">)</span>,<a href="#767740" title="V2">bV</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[RV](_a: A, _b: B, fn: (K, V1, V2) =&gt; RV)Unit" id="767551">joinEitherNonZero</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="767553">RV</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="767894">_a</a> : <a href="#55895" title="A">A</a>, <a title="B" id="767895">_b</a> : <a href="#55896" title="B">B</a>, <a title="(K, V1, V2) =&gt; RV" id="767896">fn</a> : <span class="delimiter">(</span>K,V1,V2<span class="delimiter">)</span>=&gt;RV<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V1]" id="767917">a</a>  = <a href="#56040" title="(v1: A)scalala.tensor.Tensor[K,V1]">viewA</a><span class="delimiter">(</span><a href="#767894" title="A">_a</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V2]" id="767918">b</a>  = <a href="#56041" title="(v1: B)scalala.tensor.Tensor[K,V2]">viewB</a><span class="delimiter">(</span><a href="#767895" title="B">_b</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="V1" id="767919">aZ</a> = <a href="#767917" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42242" title="=&gt; scalala.scalar.Scalar[V1]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V1">zero</a>;
      <span class="keyword">val</span> <a title="V2" id="767920">bZ</a> = <a href="#767918" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42242" title="=&gt; scalala.scalar.Scalar[V2]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V2">zero</a>;
      <a href="#767917" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="DomainFunction.scala.html#42235" title="(domain: scalala.tensor.domain.Domain[K])Unit">checkDomain</a><span class="delimiter">(</span><a href="#767918" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span>;
      
      <span class="comment">// keys that are visited and are zero (after function application to</span>
      <span class="comment">// catch mutations)</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.HashSet[K]" id="767921">visitedZeros</a> : scala.collection.mutable.<span title="scala.collection.mutable.HashSet[K]">HashSet</span><span class="delimiter">[</span>K<span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>;

      <span class="keyword">val</span> <a title="Boolean" id="767922">wholeDomainVisited</a> = <a href="#767917" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42257" title="(fn: (K, V1) =&gt; Any)Boolean">foreachNonZeroPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="767930">k</a>,<a title="V1" id="767931">aV</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="V2" id="767932">bV</a> = <a href="#42342" title="(key: K)V2">b</a><span class="delimiter">(</span><a href="#767930" title="K">k</a><span class="delimiter">)</span>;
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#767931" title="V1">aV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#767919" title="V1">aZ</a> <span title="(x: Boolean)Boolean">||</span> <a href="#767932" title="V2">bV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#767920" title="V2">bZ</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#767896" title="(v1: K, v2: V1, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#767930" title="K">k</a>, <a href="#767931" title="V1">aV</a>, <a href="#767932" title="V2">bV</a><span class="delimiter">)</span>;
        <span class="delimiter">}</span>
        
        <span class="comment">// if value in a at k is now zero (possibly after mutation), remember</span>
        <span class="comment">// that we visited it</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#42342" title="(key: K)V1">a</a><span class="delimiter">(</span><a href="#767930" title="K">k</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> <a href="#767919" title="V1">aZ</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#767921" title="scala.collection.mutable.HashSet[K]">visitedZeros</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#767921" title="scala.collection.mutable.HashSet[K]">visitedZeros</a> = scala.collection.mutable.<span title="[A](elems: A*)scala.collection.mutable.HashSet[A]">HashSet</span><span title="(elems: K*)scala.collection.mutable.HashSet[K]" class="delimiter">[</span><a href="#55892" title="K">K</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
          <a href="#767921" title="scala.collection.mutable.HashSet[K]">visitedZeros</a> <span title="(elem: K)scala.collection.mutable.HashSet[K]">+=</span> <a href="#767930" title="K">k</a>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>;

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#767922" title="Boolean">wholeDomainVisited</a> <span title="(x: Boolean)Boolean">||</span> <a href="#767917" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#767918" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#767918" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42257" title="(fn: (K, V2) =&gt; Any)Boolean">foreachNonZeroPair</a><span title="Unit" class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="768222">k</a>,<a title="V2" id="768223">bV</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="V1" id="768224">aV</a> = <a href="#42342" title="(key: K)V1">a</a><span class="delimiter">(</span><a href="#768222" title="K">k</a><span class="delimiter">)</span>;
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#768224" title="V1">aV</a> <span title="(x$1: Any)Boolean">==</span> <a href="#767919" title="V1">aZ</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#768223" title="V2">bV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#767920" title="V2">bZ</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#767921" title="scala.collection.mutable.HashSet[K]">visitedZeros</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#767921" title="scala.collection.mutable.HashSet[K]">visitedZeros</a>.<span title="(elem: K)Boolean">contains</span><span class="delimiter">(</span><a href="#768222" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#767896" title="(v1: K, v2: V1, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#768222" title="K">k</a>, <a href="#768224" title="V1">aV</a>, <a href="#768223" title="V2">bV</a><span class="delimiter">)</span>;
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[RV](_a: A, _b: B, fn: (K, V1, V2) =&gt; RV)Unit" id="767554">joinBothNonZero</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="767556">RV</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="768335">_a</a> : <a href="#55895" title="A">A</a>, <a title="B" id="768336">_b</a> : <a href="#55896" title="B">B</a>, <a title="(K, V1, V2) =&gt; RV" id="768337">fn</a> : <span class="delimiter">(</span>K,V1,V2<span class="delimiter">)</span>=&gt;RV<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V1]" id="768358">a</a> = <a href="#56040" title="(v1: A)scalala.tensor.Tensor[K,V1]">viewA</a><span class="delimiter">(</span><a href="#768335" title="A">_a</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.tensor.Tensor[K,V2]" id="768359">b</a> = <a href="#56041" title="(v1: B)scalala.tensor.Tensor[K,V2]">viewB</a><span class="delimiter">(</span><a href="#768336" title="B">_b</a><span class="delimiter">)</span>;
      <a href="#768358" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="DomainFunction.scala.html#42235" title="(domain: scalala.tensor.domain.Domain[K])Unit">checkDomain</a><span class="delimiter">(</span><a href="#768359" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="V1" id="768360">aZ</a> = <a href="#768358" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42242" title="=&gt; scalala.scalar.Scalar[V1]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V1">zero</a>;
      <span class="keyword">val</span> <a title="V2" id="768361">bZ</a> = <a href="#768359" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42242" title="=&gt; scalala.scalar.Scalar[V2]">scalar</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; V2">zero</a>;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#768358" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42249" title="=&gt; Int">nonzeroSize</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#768359" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42249" title="=&gt; Int">nonzeroSize</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#768358" title="scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42257" title="(fn: (K, V1) =&gt; Any)Boolean">foreachNonZeroPair</a><span title="Unit" class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="768373">k</a>,<a title="V1" id="768374">aV</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="V2" id="768375">bV</a> = <a href="#42342" title="(key: K)V2">b</a><span class="delimiter">(</span><a href="#768373" title="K">k</a><span class="delimiter">)</span>;
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#768374" title="V1">aV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#768360" title="V1">aZ</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#768375" title="V2">bV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#768361" title="V2">bZ</a><span class="delimiter">)</span> <a href="#768337" title="(v1: K, v2: V1, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#768373" title="K">k</a>, <a href="#768374" title="V1">aV</a>, <a href="#768375" title="V2">bV</a><span class="delimiter">)</span>;
        <span class="delimiter">}</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#768359" title="scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42257" title="(fn: (K, V2) =&gt; Any)Boolean">foreachNonZeroPair</a><span title="Unit" class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="768489">k</a>,<a title="V2" id="768490">bV</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="V1" id="768491">aV</a> = <a href="#42342" title="(key: K)V1">a</a><span class="delimiter">(</span><a href="#768489" title="K">k</a><span class="delimiter">)</span>;
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#768491" title="V1">aV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#768360" title="V1">aZ</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#768490" title="V2">bV</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#768361" title="V2">bZ</a><span class="delimiter">)</span> <a href="#768337" title="(v1: K, v2: V1, v3: V2)RV">fn</a><span class="delimiter">(</span><a href="#768489" title="K">k</a>, <a href="#768491" title="V1">aV</a>, <a href="#768490" title="V2">bV</a><span class="delimiter">)</span>;
        <span class="delimiter">}</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V, RV, Op &lt;: scalala.operators.OpType, This, That](implicit view: This =&gt; scalala.tensor.Tensor[K,V], implicit op: scalala.operators.UnaryOp[V,Op,RV], implicit bf: scalala.generic.collection.CanMapValues[This,V,RV,That])scalala.operators.UnaryOp[This,Op,That]" id="55897">opTensorUnary</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55904">K</a>,<a title="&gt;: Nothing &lt;: Any" id="55905">V</a>,<a title="&gt;: Nothing &lt;: Any" id="55906">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="55907">Op</a>&lt;:OpType,<a title="&gt;: Nothing &lt;: Any" id="55908">This</a>,<a title="&gt;: Nothing &lt;: Any" id="55909">That</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="This =&gt; scalala.tensor.Tensor[K,V]" id="56033">view</a> : This=&gt;Tensor<span class="delimiter">[</span>K,V<span class="delimiter">]</span>,
   <a title="scalala.operators.UnaryOp[V,Op,RV]" id="56034">op</a> : <a href="../operators/UnaryOp.scala.html#11823" title="scalala.operators.UnaryOp[V,Op,RV]">UnaryOp</a><span class="delimiter">[</span>V,Op,RV<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanMapValues[This,V,RV,That]" id="56035">bf</a> : <a href="../generic/collection/CanMapValues.scala.html#9756" title="scalala.generic.collection.CanMapValues[This,V,RV,That]">CanMapValues</a><span class="delimiter">[</span>This,V,RV,That<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../operators/UnaryOp.scala.html#11823" title="scalala.operators.UnaryOp[This,Op,That]">UnaryOp</a><span class="delimiter">[</span>This,Op,That<span class="delimiter">]</span> = <a href="#768642" title="java.lang.Object with scalala.operators.UnaryOp[This,Op,That]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.UnaryOp[This,Op,That]" id="768642">UnaryOp</a><span class="delimiter">[</span>This,Op,That<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Op" id="768646">opType</a> = <a href="#56034" title="scalala.operators.UnaryOp[V,Op,RV]">op</a>.<a href="../operators/UnaryOp.scala.html#40237" title="=&gt; Op">opType</a>;
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(from: This)That" id="768647">apply</a><span class="delimiter">(</span><a title="This" id="768651">from</a> : <a href="#55908" title="This">This</a><span class="delimiter">)</span> =
      <a href="#56035" title="scalala.generic.collection.CanMapValues[This,V,RV,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45299" title="(from: This, fn: V =&gt; RV)That">map</a><span class="delimiter">(</span><a href="#768651" title="This">from</a>, <a href="#56034" title="scalala.operators.UnaryOp[V,Op,RV]">op</a>.<a href="../operators/UnaryOp.scala.html#40238" title="(t: V)RV">apply</a> _<span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, D, V1, V2, Op &lt;: scalala.operators.OpType, RV, A, B, That](implicit v1: A =&gt; scalala.tensor.Tensor[K,V1], implicit v2: B =&gt; scalala.tensor.Tensor[K,V2], implicit df: scalala.tensor.domain.CanGetDomain[A,D], implicit op: scalala.operators.BinaryOp[V1,V2,Op,RV], implicit jj: scalala.generic.collection.CanJoin[A,B,K,V1,V2], implicit bf: scalala.generic.collection.CanBuildTensorForBinaryOp[A,B,D,K,RV,Op,That])scalala.operators.BinaryOp[A,B,Op,That]" id="55910">opTensorTensor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55920">K</a>,<a title="&gt;: Nothing &lt;: Any" id="55921">D</a>,<a title="&gt;: Nothing &lt;: Any" id="55922">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="55923">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="55924">Op</a>&lt;:OpType,<a title="&gt;: Nothing &lt;: Any" id="55925">RV</a>,<a title="&gt;: Nothing &lt;: Any" id="55926">A</a>,<a title="&gt;: Nothing &lt;: Any" id="55927">B</a>,<a title="&gt;: Nothing &lt;: Any" id="55928">That</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="A =&gt; scalala.tensor.Tensor[K,V1]" id="56020">v1</a> : A=&gt;Tensor<span class="delimiter">[</span>K,V1<span class="delimiter">]</span>, <a title="B =&gt; scalala.tensor.Tensor[K,V2]" id="56021">v2</a> : B=&gt;Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span>,
   <a title="scalala.tensor.domain.CanGetDomain[A,D]" id="56022">df</a> : <a href="domain/CanGetDomain.scala.html#19411" title="scalala.tensor.domain.CanGetDomain[A,D]">CanGetDomain</a><span class="delimiter">[</span>A,D<span class="delimiter">]</span>,
   <a title="scalala.operators.BinaryOp[V1,V2,Op,RV]" id="56023">op</a> : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,Op,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,Op,RV<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanJoin[A,B,K,V1,V2]" id="56024">jj</a> : <a href="../generic/collection/CanJoin.scala.html#9990" title="scalala.generic.collection.CanJoin[A,B,K,V1,V2]">CanJoin</a><span class="delimiter">[</span>A,B,K,V1,V2<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanBuildTensorForBinaryOp[A,B,D,K,RV,Op,That]" id="56025">bf</a> : <a href="../generic/collection/CanBuildTensorForBinaryOp.scala.html#10107" title="scalala.generic.collection.CanBuildTensorForBinaryOp[A,B,D,K,RV,Op,That]">CanBuildTensorForBinaryOp</a><span class="delimiter">[</span>A,B,D,K,RV,Op,That<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[A,B,Op,That]">BinaryOp</a><span class="delimiter">[</span>A,B,Op,That<span class="delimiter">]</span>
  = <a href="#768663" title="java.lang.Object with scalala.operators.BinaryOp[A,B,Op,That]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[A,B,Op,That]" id="768663">BinaryOp</a><span class="delimiter">[</span>A,B,Op,That<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Op" id="768667">opType</a> = <a href="#56023" title="scalala.operators.BinaryOp[V1,V2,Op,RV]">op</a>.<a href="../operators/BinaryOp.scala.html#40075" title="=&gt; Op">opType</a>;
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(a: A, b: B)That" id="768668">apply</a><span class="delimiter">(</span><a title="A" id="768672">a</a> : <a href="#55926" title="A">A</a>, <a title="B" id="768673">b</a> : <a href="#55927" title="B">B</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.tensor.generic.TensorBuilder[K,RV,That]" id="768678">builder</a> = <a href="../generic/collection/CanBuildTensorForBinaryOp.scala.html#42134" title="(a: A, b: B, domain: D)scalala.tensor.generic.TensorBuilder[K,RV,That]">bf</a><span class="delimiter">(</span><a href="#768672" title="A">a</a>,<a href="#768673" title="B">b</a>,<span class="delimiter">(</span><a href="#56020" title="(v1: A)scalala.tensor.Tensor[K,V1]">a</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a> <a href="domain/IterableDomain.scala.html#42420" title="(that: scalala.tensor.domain.IterableDomain[K])scalala.tensor.domain.IterableDomain[K]">union</a> <a href="#56021" title="(v1: B)scalala.tensor.Tensor[K,V2]">b</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="D" class="delimiter">[</span><a href="#55921" title="D">D</a><span class="delimiter">]</span><span class="delimiter">)</span>;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#768667" title="=&gt; Op">opType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../operators/OpType.scala.html#11905" title="object scalala.operators.OpMul">OpMul</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#56024" title="scalala.generic.collection.CanJoin[A,B,K,V1,V2]">jj</a>.<a href="../generic/collection/CanJoin.scala.html#47093" title="(a: A, b: B, fn: (K, V1, V2) =&gt; Unit)Unit">joinBothNonZero</a><span class="delimiter">(</span><a href="#768672" title="A">a</a>,<a href="#768673" title="B">b</a>,<span class="delimiter">(</span><a title="K" id="768766">k</a>,<a title="V1" id="768767">v1</a>,<a title="V2" id="768768">v2</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#768766" title="K">k</a><span class="delimiter">)</span> = <a href="#56023" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768767" title="V1">v1</a>,<a href="#768768" title="V2">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#768667" title="=&gt; Op">opType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../operators/OpType.scala.html#11446" title="object scalala.operators.OpAdd">OpAdd</a> <span title="(x: Boolean)Boolean">||</span> <a href="#768667" title="=&gt; Op">opType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../operators/OpType.scala.html#11191" title="object scalala.operators.OpSub">OpSub</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#56024" title="scalala.generic.collection.CanJoin[A,B,K,V1,V2]">jj</a>.<a href="../generic/collection/CanJoin.scala.html#47096" title="(a: A, b: B, fn: (K, V1, V2) =&gt; Unit)Unit">joinEitherNonZero</a><span class="delimiter">(</span><a href="#768672" title="A">a</a>,<a href="#768673" title="B">b</a>,<span class="delimiter">(</span><a title="K" id="768794">k</a>,<a title="V1" id="768795">v1</a>,<a title="V2" id="768796">v2</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#768794" title="K">k</a><span class="delimiter">)</span> = <a href="#56023" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768795" title="V1">v1</a>,<a href="#768796" title="V2">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#56024" title="scalala.generic.collection.CanJoin[A,B,K,V1,V2]">jj</a>.<a href="../generic/collection/CanJoin.scala.html#47090" title="(a: A, b: B, fn: (K, V1, V2) =&gt; Unit)Unit">joinAll</a><span class="delimiter">(</span><a href="#768672" title="A">a</a>,<a href="#768673" title="B">b</a>,<span class="delimiter">(</span><a title="K" id="768808">k</a>,<a title="V1" id="768809">v1</a>,<a title="V2" id="768810">v2</a><span class="delimiter">)</span> =&gt; <a href="generic/TensorBuilder.scala.html#42139" title="(key: K, value: RV)Unit">builder</a><span class="delimiter">(</span><a href="#768808" title="K">k</a><span class="delimiter">)</span> = <a href="#56023" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768809" title="V1">v1</a>,<a href="#768810" title="V2">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
      <a href="#768678" title="scalala.tensor.generic.TensorBuilder[K,RV,That]">builder</a>.<a href="generic/TensorBuilder.scala.html#42140" title="=&gt; That">result</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V1, V2, Op &lt;: scalala.operators.OpType, RV, This, That](implicit view: This =&gt; scalala.tensor.Tensor[K,V1], implicit op: scalala.operators.BinaryOp[V1,V2,Op,RV], implicit bf: scalala.generic.collection.CanMapValues[This,V1,RV,That], implicit s: scalala.scalar.Scalar[V2])scalala.operators.BinaryOp[This,V2,Op,That]" id="55929">opTensorScalar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55937">K</a>,<a title="&gt;: Nothing &lt;: Any" id="55938">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="55939">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="55940">Op</a>&lt;:OpType,<a title="&gt;: Nothing &lt;: Any" id="55941">RV</a>,<a title="&gt;: Nothing &lt;: Any" id="55942">This</a>,<a title="&gt;: Nothing &lt;: Any" id="55943">That</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="This =&gt; scalala.tensor.Tensor[K,V1]" id="56011">view</a> : This=&gt;Tensor<span class="delimiter">[</span>K,V1<span class="delimiter">]</span>,
   <a title="scalala.operators.BinaryOp[V1,V2,Op,RV]" id="56012">op</a> : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,Op,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,Op,RV<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanMapValues[This,V1,RV,That]" id="56013">bf</a> : <a href="../generic/collection/CanMapValues.scala.html#9756" title="scalala.generic.collection.CanMapValues[This,V1,RV,That]">CanMapValues</a><span class="delimiter">[</span>This,V1,RV,That<span class="delimiter">]</span>,
   <a title="scalala.scalar.Scalar[V2]" id="56014">s</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[This,V2,Op,That]">BinaryOp</a><span class="delimiter">[</span>This,V2,Op,That<span class="delimiter">]</span>
  = <a href="#768818" title="java.lang.Object with scalala.operators.BinaryOp[This,V2,Op,That]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[This,V2,Op,That]" id="768818">BinaryOp</a><span class="delimiter">[</span>This,V2,Op,That<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Op" id="768822">opType</a> = <a href="#56012" title="scalala.operators.BinaryOp[V1,V2,Op,RV]">op</a>.<a href="../operators/BinaryOp.scala.html#40075" title="=&gt; Op">opType</a>;
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(a: This, b: V2)That" id="768823">apply</a><span class="delimiter">(</span><a title="This" id="768827">a</a> : <a href="#55942" title="This">This</a>, <a title="V2" id="768828">b</a> : <a href="#55939" title="V2">V2</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="That" class="keyword">if</span> <span class="delimiter">(</span><a href="#768822" title="=&gt; Op">opType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../operators/OpType.scala.html#11905" title="object scalala.operators.OpMul">OpMul</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#56014" title="scalala.scalar.Scalar[V2]">s</a>.<a href="../scalar/Scalar.scala.html#41066" title="(a: V2)Boolean">isNaN</a><span class="delimiter">(</span><a href="#768828" title="V2">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#56013" title="scalala.generic.collection.CanMapValues[This,V1,RV,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45300" title="(from: This, fn: V1 =&gt; RV)That">mapNonZero</a><span class="delimiter">(</span><a href="#768827" title="This">a</a>, <a title="V1" id="768842">v</a> =&gt; <a href="#56012" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768842" title="V1">v</a>, <a href="#768828" title="V2">b</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#56013" title="scalala.generic.collection.CanMapValues[This,V1,RV,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45299" title="(from: This, fn: V1 =&gt; RV)That">map</a><span class="delimiter">(</span><a href="#768827" title="This">a</a>, <a title="V1" id="768848">v</a> =&gt; <a href="#56012" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768848" title="V1">v</a>, <a href="#768828" title="V2">b</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V1, V2, Op &lt;: scalala.operators.OpType, RV, This, That](implicit view: This =&gt; scalala.tensor.Tensor[K,V2], implicit op: scalala.operators.BinaryOp[V1,V2,Op,RV], implicit bf: scalala.generic.collection.CanMapValues[This,V2,RV,That], implicit s: scalala.scalar.Scalar[V1])scalala.operators.BinaryOp[V1,This,Op,That]" id="55944">opScalarTensor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55952">K</a>,<a title="&gt;: Nothing &lt;: Any" id="55953">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="55954">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="55955">Op</a>&lt;:OpType,<a title="&gt;: Nothing &lt;: Any" id="55956">RV</a>,<a title="&gt;: Nothing &lt;: Any" id="55957">This</a>,<a title="&gt;: Nothing &lt;: Any" id="55958">That</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="This =&gt; scalala.tensor.Tensor[K,V2]" id="56002">view</a> : This=&gt;Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span>,
   <a title="scalala.operators.BinaryOp[V1,V2,Op,RV]" id="56003">op</a> : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,Op,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,Op,RV<span class="delimiter">]</span>,
   <a title="scalala.generic.collection.CanMapValues[This,V2,RV,That]" id="56004">bf</a> : <a href="../generic/collection/CanMapValues.scala.html#9756" title="scalala.generic.collection.CanMapValues[This,V2,RV,That]">CanMapValues</a><span class="delimiter">[</span>This,V2,RV,That<span class="delimiter">]</span>,
   <a title="scalala.scalar.Scalar[V1]" id="56005">s</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V1]">Scalar</a><span class="delimiter">[</span>V1<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,This,Op,That]">BinaryOp</a><span class="delimiter">[</span>V1,This,Op,That<span class="delimiter">]</span>
  = <a href="#768853" title="java.lang.Object with scalala.operators.BinaryOp[V1,This,Op,That]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[V1,This,Op,That]" id="768853">BinaryOp</a><span class="delimiter">[</span>V1,This,Op,That<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Op" id="768857">opType</a> = <a href="#56003" title="scalala.operators.BinaryOp[V1,V2,Op,RV]">op</a>.<a href="../operators/BinaryOp.scala.html#40075" title="=&gt; Op">opType</a>;
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(a: V1, b: This)That" id="768858">apply</a><span class="delimiter">(</span><a title="V1" id="768862">a</a> : <a href="#55953" title="V1">V1</a>, <a title="This" id="768863">b</a> : <a href="#55957" title="This">This</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="That" class="keyword">if</span> <span class="delimiter">(</span><a href="#768857" title="=&gt; Op">opType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../operators/OpType.scala.html#11905" title="object scalala.operators.OpMul">OpMul</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#56005" title="scalala.scalar.Scalar[V1]">s</a>.<a href="../scalar/Scalar.scala.html#41066" title="(a: V1)Boolean">isNaN</a><span class="delimiter">(</span><a href="#768862" title="V1">a</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#56004" title="scalala.generic.collection.CanMapValues[This,V2,RV,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45300" title="(from: This, fn: V2 =&gt; RV)That">mapNonZero</a><span class="delimiter">(</span><a href="#768863" title="This">b</a>, <a title="V2" id="768877">v</a> =&gt; <a href="#56003" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768862" title="V1">a</a>, <a href="#768877" title="V2">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#56004" title="scalala.generic.collection.CanMapValues[This,V2,RV,That]">bf</a>.<a href="../generic/collection/CanMapValues.scala.html#45299" title="(from: This, fn: V2 =&gt; RV)That">map</a><span class="delimiter">(</span><a href="#768863" title="This">b</a>, <a title="V2" id="768883">v</a> =&gt; <a href="#56003" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#768862" title="V1">a</a>, <a href="#768883" title="V2">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V1, V2, A, B, RV](implicit viewA: A =&gt; scalala.tensor.Tensor[K,V1], implicit viewB: B =&gt; scalala.tensor.Tensor[K,V2], implicit mul: scalala.operators.BinaryOp[V1,V2,scalala.operators.OpMul,RV], implicit add: scalala.operators.BinaryOp[RV,RV,scalala.operators.OpAdd,RV], implicit compatible: scalala.operators.CompatibleShape[A,B], implicit s: scalala.scalar.Scalar[RV])scalala.operators.BinaryOp[A,B,scalala.operators.OpMulInner,RV]" id="55959">opTensorInnerProduct</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="55966">K</a>,<a title="&gt;: Nothing &lt;: Any" id="55967">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="55968">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="55969">A</a>,<a title="&gt;: Nothing &lt;: Any" id="55970">B</a>,<a title="&gt;: Nothing &lt;: Any" id="55971">RV</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="A =&gt; scalala.tensor.Tensor[K,V1]" id="55989">viewA</a> : A=&gt;Tensor<span class="delimiter">[</span>K,V1<span class="delimiter">]</span>, <a title="B =&gt; scalala.tensor.Tensor[K,V2]" id="55990">viewB</a>: B=&gt;Tensor<span class="delimiter">[</span>K,V2<span class="delimiter">]</span>,
   <a title="scalala.operators.BinaryOp[V1,V2,scalala.operators.OpMul,RV]" id="55991">mul</a> : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,scalala.operators.OpMul,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,OpMul,RV<span class="delimiter">]</span>, <a title="scalala.operators.BinaryOp[RV,RV,scalala.operators.OpAdd,RV]" id="55992">add</a> : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[RV,RV,scalala.operators.OpAdd,RV]">BinaryOp</a><span class="delimiter">[</span>RV,RV,OpAdd,RV<span class="delimiter">]</span>,
   <a title="scalala.operators.CompatibleShape[A,B]" id="55993">compatible</a> : <a href="../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[A,B]">CompatibleShape</a><span class="delimiter">[</span>A,B<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[RV]" id="55994">s</a> : <a href="../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[RV]">Scalar</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[A,B,scalala.operators.OpMulInner,RV]">BinaryOp</a><span class="delimiter">[</span>A,B,OpMulInner,RV<span class="delimiter">]</span>
  = <a href="#768888" title="java.lang.Object with scalala.operators.BinaryOp[A,B,scalala.operators.OpMulInner,RV]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[A,B,scalala.operators.OpMulInner,RV]" id="768888">BinaryOp</a><span class="delimiter">[</span>A,B,OpMulInner,RV<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpMulInner.type" id="768892">opType</a> = <a href="../operators/OpType.scala.html#11422" title="object scalala.operators.OpMulInner">OpMulInner</a>;
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(a: A, b: B)RV" id="768893">apply</a><span class="delimiter">(</span><a title="A" id="768897">a</a>: <a href="#55969" title="A">A</a>, <a title="B" id="768898">b</a>: <a href="#55970" title="B">B</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#55989" title="(v1: A)scalala.tensor.Tensor[K,V1]">a</a>.<a href="DomainFunction.scala.html#42235" title="(domain: scalala.tensor.domain.Domain[K])Unit">checkDomain</a><span class="delimiter">(</span><a href="#55990" title="(v1: B)scalala.tensor.Tensor[K,V2]">b</a>.<a href="DomainFunction.scala.html#42232" title="=&gt; scalala.tensor.domain.IterableDomain[K]">domain</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="RV" id="768903">sum</a> = <a href="#55994" title="scalala.scalar.Scalar[RV]">s</a>.<a href="../scalar/Scalar.scala.html#41048" title="=&gt; RV">zero</a>;
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#55989" title="(v1: A)scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42249" title="=&gt; Int">nonzeroSize</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#55990" title="(v1: B)scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42249" title="=&gt; Int">nonzeroSize</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#55989" title="(v1: A)scalala.tensor.Tensor[K,V1]">a</a>.<a href="#42257" title="(fn: (K, V1) =&gt; Unit)Boolean">foreachNonZeroPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="769094">k</a>,<a title="V1" id="769095">aV</a><span class="delimiter">)</span> =&gt; <a href="#768903" title="RV">sum</a> = <a href="#55992" title="(v1: RV, v2: RV)RV">add</a><span class="delimiter">(</span><a href="#768903" title="RV">sum</a>, <a href="#55991" title="(v1: V1, v2: V2)RV">mul</a><span class="delimiter">(</span><a href="#769095" title="V1">aV</a>, <a href="#42342" title="(key: K)V2">b</a><span class="delimiter">(</span><a href="#769094" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#55990" title="(v1: B)scalala.tensor.Tensor[K,V2]">b</a>.<a href="#42257" title="(fn: (K, V2) =&gt; Unit)Boolean">foreachNonZeroPair</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="K" id="769413">k</a>,<a title="V2" id="769414">bV</a><span class="delimiter">)</span> =&gt; <a href="#768903" title="RV">sum</a> = <a href="#55992" title="(v1: RV, v2: RV)RV">add</a><span class="delimiter">(</span><a href="#768903" title="RV">sum</a>, <a href="#55991" title="(v1: V1, v2: V2)RV">mul</a><span class="delimiter">(</span><a href="#42342" title="(key: K)V1">a</a><span class="delimiter">(</span><a href="#769413" title="K">k</a><span class="delimiter">)</span>, <a href="#769414" title="V2">bV</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
      <a href="#768903" title="RV">sum</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>