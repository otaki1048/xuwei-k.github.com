<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalala/collection/sparse/SparseArray.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 Copyright 2009 David Hall, Daniel Ramage
 
 Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at 
 
 http://www.apache.org/licenses/LICENSE-2.0
 
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License. 
*/</span>

<span class="keyword">package</span> scalala.collection.sparse;

<span class="keyword">import</span> scala.collection.generic._;
<span class="keyword">import</span> scala.collection.mutable._;

<span class="keyword">import</span> scalala.operators._;
<span class="keyword">import</span> scalala.scalar.Scalar;

<span class="comment">/**
 * &lt;p&gt;Nearly-drop-in replacement for Array[T](length) that does not store
 * default array values.  Internally, the SparseArray data structure
 * stores an array of indexes in packed, sorted order, and a
 * corresponding packed array of values.  Updates are linear in
 * the number of non-zero array elements, while accesses are
 * logarithmic.  This class is not threadsafe for simultaneous
 * reads and writes, but more than one thread can read simultaneously
 * if no threads are writing.&lt;/p&gt;
 *
 * &lt;p&gt;Note that the DefaultArrayValue must be a constant reference -- no
 * clever tricks like creating new instances of type T are supported
 * by the nature of the way this map works.  Otherwise, iterating
 * over the size of the array would cause the SparseArray to become
 * (inefficiently) dense.&lt;/p&gt;
 *
 * @param length The virtual length of the array.
 * @param index The indices of the array, in packed sorted order.
 * @param data The data of the array, in corresponding positions to index.
 * @param used The number of used elements in index and data.
 * @param initialActiveLength The initial length of the sparse data structures
 *   when creating new instances.
 *
 * @author dlwh, dramage
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
@serializable
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class SparseArray[T] extends java.lang.Object with ScalaObject" id="9548">SparseArray</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="37101">T</a><span class="delimiter">]</span>
<a href="#9548" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Int" id="36962">length</a> : <span title="Int">Int</span>, <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Array[Int]" id="36963">index</a> : <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Array[T]" id="36964">data</a> : <span title="Array[T]">Array</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Int" id="36965">used</a> : <span title="Int">Int</span>, <a title="Int" id="36966">initialActiveLength</a> : <span title="Int">Int</span><span class="delimiter">)</span>
<span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassManifest[T]" id="36967">m</a> : <span title="ClassManifest[T]">ClassManifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[T]" id="36968">df</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[T]">DefaultArrayValue</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" id="36864" class="keyword">this</a><span class="delimiter">(</span><a title="Int" id="36972">length</a> : <span title="Int">Int</span>, <a title="Int" id="37099">initialActiveLength</a> : <span title="Int">Int</span> = <span title="Int(3)" class="int">3</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassManifest[T]" id="36974">m</a> : <span title="ClassManifest[T]">ClassManifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[T]" id="36975">d</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[T]">DefaultArrayValue</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#9548" title="SparseArray.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#36972" title="Int">length</a>, <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#37099" title="Int">initialActiveLength</a><span class="delimiter">)</span>, <a href="#36974" title="(len: Int)Array[T]" class="keyword">new</a> Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#37099" title="Int">initialActiveLength</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span>, <a href="#37099" title="Int">initialActiveLength</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#36974" title="ClassManifest[T]">m</a>, <a href="#36975" title="scalala.collection.sparse.DefaultArrayValue[T]">d</a><span class="delimiter">)</span>;

  <a href="#36865" title="()Unit">checkInvariants</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="36865">checkInvariants</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// check rep invariants</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>, <span title="java.lang.String(&quot;Length must be non-negative&quot;)" class="string">&quot;Length must be non-negative&quot;</span><span class="delimiter">)</span>;
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;Used must be &lt;= length and &gt;= 0&quot;)" class="string">&quot;Used must be &lt;= length and &gt;= 0&quot;</span><span class="delimiter">)</span>;
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>, <span title="java.lang.String(&quot;Indexes must be ordered and non-negative&quot;)" class="string">&quot;Indexes must be ordered and non-negative&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="37149">i</a> = <span title="Int(1)" class="int">1</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#37149" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#37156" title="()Unit" class="delimiter">{</a>
        <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#37149" title="Int">i</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#37149" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#37149" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>, <span title="java.lang.String(&quot;Indexes must be ordered and non-negative&quot;)" class="string">&quot;Indexes must be ordered and non-negative&quot;</span><span class="delimiter">)</span>;
        <a href="#37149" title="Int">i</a> <span title="(x: Int)Int">+=</span><span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Default value. */</span>
  <span class="keyword">val</span> <a title="T" id="36866">default</a> = <a href="#36968" title="scalala.collection.sparse.DefaultArrayValue[T]">df</a>.<a href="#36961" title="=&gt; T">value</a>;

  <span class="comment">/** Iterator over used indexes and values */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[(Int, T)]" id="36868">iterator</a> = <span title="=&gt; collection.Iterator.type">Iterator</span>.<span title="(start: Int, end: Int)Iterator[Int]">range</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; (Int, T))Iterator[(Int, T)]">map</span><span class="delimiter">(</span><a title="Int" id="37356">i</a> =&gt; <span title="(_1: Int, _2: T)(Int, T)" class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#37356" title="Int">i</a><span class="delimiter">)</span>,<a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#37356" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>;

  <span class="comment">/** Used indexes. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[Int]" id="36869">indexIterator</a> = <a href="#36963" title="implicit scala.Predef.intArrayOps : (xs: Array[Int])scala.collection.mutable.ArrayOps[Int]">index</a>.<span title="=&gt; Iterator[Int]">iterator</span>.<span title="(n: Int)Iterator[Int]">take</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;

  <span class="comment">/** Used values. */</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[T]" id="36870">valueIterator</a> = <a href="#36964" title="(xs: Array[T])scala.collection.mutable.ArrayOps[T]">data</a>.<span title="=&gt; Iterator[T]">iterator</span>.<span title="(n: Int)Iterator[T]">take</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;

  <span class="comment">/** Key value pairs of non-default entries. */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.Object with Iterator[(Int, T)]" id="36871">activeIterator</a> = <a href="#36869" title="=&gt; Iterator[Int]">indexIterator</a> <span title="(that: Iterator[T])java.lang.Object with Iterator[(Int, T)]">zip</span> <a href="#36870" title="=&gt; Iterator[T]">valueIterator</a>;

  <span class="comment">/** A copy of the keys in this array. */</span>
  <span class="keyword">def</span> <a title="=&gt; Array[Int]" id="36872">indexArray</a> : <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="#36963" title="implicit scala.Predef.intArrayOps : (xs: Array[Int])scala.collection.mutable.ArrayOps[Int]">index</a>.<span title="(n: Int)Array[Int]">take</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;

  <span class="comment">/** A copy of the values in this array. */</span>
  <span class="keyword">def</span> <a title="=&gt; Array[T]" id="36873">valueArray</a> : <span title="Array[T]">Array</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#36964" title="(xs: Array[T])scala.collection.mutable.ArrayOps[T]">data</a>.<span title="(n: Int)Array[T]">take</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;

  <span class="comment">/**
   * Returns the offset into index and data for the requested vector
   * index.  If the requested index is not found, the return value is
   * negative and can be converted into an insertion point with ~rv.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(i: Int)Int" id="36874">findOffset</a><span class="delimiter">(</span><a title="Int" id="38384">i</a> : <span title="Int">Int</span><span class="delimiter">)</span> : <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#38384" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">||</span> <a href="#38384" title="Int">i</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IndexOutOfBoundsException" class="keyword">new</span> <span title="java.lang.IndexOutOfBoundsException">IndexOutOfBoundsException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Index &quot;)" class="string">&quot;Index &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#38384" title="Int">i</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; out of bounds [0,&quot;)" class="string">&quot; out of bounds [0,&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#36965" title="=&gt; Int">used</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>;

    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// empty list; do nothing</span>
      <span title="Nothing" class="keyword">return</span> -<span title="Int(-1)" class="int">1</span>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#38384" title="Int">i</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// special case for end of list - this is a big win for growing sparse arrays</span>
      <span title="Nothing" class="keyword">return</span> <span title="=&gt; Int">~</span><a href="#36965" title="=&gt; Int">used</a>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// regular binary search from begin to end (inclusive)</span>
      <span class="keyword">var</span> <a title="Int" id="38430">begin</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="38431">end</a> = <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>;

      <span class="comment">// Simple optimization: position i can't be after offset i.</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38431" title="Int">end</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#38384" title="Int">i</a><span class="delimiter">)</span>
        <a href="#38431" title="Int">end</a> = <a href="#38384" title="Int">i</a>;

      <span class="keyword">var</span> <a title="Int" id="38432">mid</a> = <span class="delimiter">(</span><a href="#38431" title="Int">end</a> <span title="(x: Int)Int">+</span> <a href="#38430" title="Int">begin</a><span class="delimiter">)</span> <span title="(x: Int)Int">&gt;&gt;</span> <span title="Int(1)" class="int">1</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38430" title="Int">begin</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#38431" title="Int">end</a><span class="delimiter">)</span> <a href="#38433" title="()Unit" class="delimiter">{</a>
        <a href="#38432" title="Int">mid</a> = <span class="delimiter">(</span><a href="#38431" title="Int">end</a> <span title="(x: Int)Int">+</span> <a href="#38430" title="Int">begin</a><span class="delimiter">)</span> <span title="(x: Int)Int">&gt;&gt;</span> <span title="Int(1)" class="int">1</span>;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38432" title="Int">mid</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#38384" title="Int">i</a><span class="delimiter">)</span>
          <a href="#38430" title="Int">begin</a> = <a href="#38432" title="Int">mid</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>;
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38432" title="Int">mid</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <a href="#38384" title="Int">i</a><span class="delimiter">)</span>
          <a href="#38431" title="Int">end</a> = <a href="#38432" title="Int">mid</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>;
        <span class="keyword">else</span>
          <span title="Nothing" class="keyword">return</span> <a href="#38432" title="Int">mid</a>;
      <span class="delimiter">}</span>

      <span class="comment">// no match found, return insertion point</span>
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#38384" title="Int">i</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38432" title="Int">mid</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <span title="=&gt; Int">~</span><a href="#38432" title="Int">mid</a>;       <span class="comment">// Insert here (before mid)</span>
      <span class="keyword">else</span>
        <span title="Nothing" class="keyword">return</span> <span title="=&gt; Int">~</span><span class="delimiter">(</span><a href="#38432" title="Int">mid</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>; <span class="comment">// Insert after mid</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(i: Int)T" id="36875">apply</a><span class="delimiter">(</span><a title="Int" id="38486">i</a> : <span title="Int">Int</span><span class="delimiter">)</span> : <a href="#37101" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="38488">offset</a> = <a href="#36874" title="(i: Int)Int">findOffset</a><span class="delimiter">(</span><a href="#38486" title="Int">i</a><span class="delimiter">)</span>;
    <span title="T" class="keyword">if</span> <span class="delimiter">(</span><a href="#38488" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38488" title="Int">offset</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#36866" title="=&gt; T">default</a>;
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(i: Int)Option[T]" id="36876">get</a><span class="delimiter">(</span><a title="Int" id="38493">i</a>: <span title="Int">Int</span><span class="delimiter">)</span> : <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="38562">offset</a> = <a href="#36874" title="(i: Int)Int">findOffset</a><span class="delimiter">(</span><a href="#38493" title="Int">i</a><span class="delimiter">)</span>;
    <span title="Option[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#38562" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: T)Some[T]">Some</span><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38562" title="Int">offset</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <span title="object None">None</span>;
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(i: Int, value: =&gt; T)T" id="36877">getOrElse</a><span class="delimiter">(</span><a title="Int" id="38613">i</a> : <span title="Int">Int</span>, <a title="=&gt; T" id="38614">value</a> : =&gt;T<span class="delimiter">)</span> : <a href="#37101" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="38616">offset</a> = <a href="#36874" title="(i: Int)Int">findOffset</a><span class="delimiter">(</span><a href="#38613" title="Int">i</a><span class="delimiter">)</span>;
    <span title="T" class="keyword">if</span> <span class="delimiter">(</span><a href="#38616" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38616" title="Int">offset</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#38614" title="=&gt; T">value</a>;
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(i: Int, value: =&gt; T)T" id="36878">getOrElseUpdate</a><span class="delimiter">(</span><a title="Int" id="38621">i</a> : <span title="Int">Int</span>, <a title="=&gt; T" id="38622">value</a> : =&gt;T<span class="delimiter">)</span> : <a href="#37101" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="38624">offset</a> = <a href="#36874" title="(i: Int)Int">findOffset</a><span class="delimiter">(</span><a href="#38621" title="Int">i</a><span class="delimiter">)</span>;
    <span title="T" class="keyword">if</span> <span class="delimiter">(</span><a href="#38624" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38624" title="Int">offset</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="T" id="38629">v</a> = <a href="#38622" title="=&gt; T">value</a>;
      <a href="#36882" title="(i: Int, value: T)Unit">update</a><span class="delimiter">(</span><a href="#38621" title="Int">i</a>,<a href="#38629" title="T">v</a><span class="delimiter">)</span>
      <a href="#38629" title="T">v</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the size of the array. */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="36879">activeLength</a> = <a href="#36965" title="=&gt; Int">used</a>;

  <span class="comment">/** Returns the index of the item stored at the given offset. */</span>
  <span class="keyword">def</span> <a title="(offset: Int)Int" id="36880">indexAt</a><span class="delimiter">(</span><a title="Int" id="38769">offset</a> : <span title="Int">Int</span><span class="delimiter">)</span> : <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#38769" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="java.lang.ArrayIndexOutOfBoundsException" class="keyword">new</span> <span title="java.lang.ArrayIndexOutOfBoundsException">ArrayIndexOutOfBoundsException</span><span class="delimiter">(</span><span class="delimiter">)</span>;
    <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38769" title="Int">offset</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the value of the item stored at the given offset. */</span>
  <span class="keyword">def</span> <a title="(offset: Int)T" id="36881">valueAt</a><span class="delimiter">(</span><a title="Int" id="38782">offset</a> : <span title="Int">Int</span><span class="delimiter">)</span> : <a href="#37101" title="T">T</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#38782" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="java.lang.ArrayIndexOutOfBoundsException" class="keyword">new</span> <span title="java.lang.ArrayIndexOutOfBoundsException">ArrayIndexOutOfBoundsException</span><span class="delimiter">(</span><span class="delimiter">)</span>;
    <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38782" title="Int">offset</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Sets the given value at the given index if the value is not
   * equal to the current default.  The data and
   * index arrays will be grown to support the insertion if
   * necessary.  The growth schedule doubles the amount
   * of allocated memory at each allocation request up until
   * the sparse array contains 1024 values, at which point
   * the growth is additive: an additional n * 1024 spaces will
   * be allocated for n in 1,2,4,8,16.  The largest amount of
   * space added to this vector will be an additional 16*1024*(sizeof(T)+4),
   * which is 196608 bytes at a time for a SparseVector[Double],
   * although more space is needed temporarily while moving to the
   * new arrays.
   */</span>
  <span class="keyword">def</span> <a title="(i: Int, value: T)Unit" id="36882">update</a><span class="delimiter">(</span><a title="Int" id="38630">i</a> : <span title="Int">Int</span>, <a title="T" id="38631">value</a> : <a href="#37101" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="38634">offset</a> = <a href="#36874" title="(i: Int)Int">findOffset</a><span class="delimiter">(</span><a href="#38630" title="Int">i</a><span class="delimiter">)</span>;
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#38634" title="Int">offset</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// found at offset</span>
      <a href="#36964" title="(i: Int, x: T)Unit">data</a><span class="delimiter">(</span><a href="#38634" title="Int">offset</a><span class="delimiter">)</span> = <a href="#38631" title="T">value</a>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#38631" title="T">value</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// need to insert at ~offset</span>
      <span class="keyword">val</span> <a title="Int" id="38641">insertPos</a> = <span title="=&gt; Int">~</span><a href="#38634" title="Int">offset</a>;

      <a href="#36965" title="(x$1: Int)Unit">used</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// need to grow array</span>
        <span class="keyword">val</span> <a title="Int" id="38650">newLength</a> = <span class="delimiter">{</span>
          <span title="Int" class="keyword">if</span>      <span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>     <span class="delimiter">{</span> <span title="Int(4)" class="int">4</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(1024)" class="int">0x0400</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">*</span> <span title="Int(2)" class="int">2</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(2048)" class="int">0x0800</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(1024)" class="int">0x0400</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(4096)" class="int">0x1000</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(2048)" class="int">0x0800</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(8192)" class="int">0x2000</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(4096)" class="int">0x1000</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(16384)" class="int">0x4000</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(8192)" class="int">0x2000</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(16384)" class="int">0x4000</span> <span class="delimiter">}</span>;
        <span class="delimiter">}</span>;

        <span class="comment">// allocate new arrays</span>
        <span class="keyword">val</span> <a title="Array[Int]" id="38651">newIndex</a> = <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#38650" title="Int">newLength</a><span class="delimiter">)</span>;
        <span class="keyword">val</span> <a title="Array[T]" id="38652">newData</a>  = <a href="#36967" title="(len: Int)Array[T]" class="keyword">new</a> Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#38650" title="Int">newLength</a><span class="delimiter">)</span>;

        <span class="comment">// copy existing data into new arrays</span>
        <span title="object java.lang.System">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#36963" title="=&gt; Array[Int]">index</a>, <span title="Int(0)" class="int">0</span>, <a href="#38651" title="Array[Int]">newIndex</a>, <span title="Int(0)" class="int">0</span>, <a href="#38641" title="Int">insertPos</a><span class="delimiter">)</span>;
        <span title="object java.lang.System">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>, <span title="Int(0)" class="int">0</span>, <a href="#38652" title="Array[T]">newData</a>, <span title="Int(0)" class="int">0</span>, <a href="#38641" title="Int">insertPos</a><span class="delimiter">)</span>;
        <span title="object java.lang.System">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#36963" title="=&gt; Array[Int]">index</a>, <a href="#38641" title="Int">insertPos</a>, <a href="#38651" title="Array[Int]">newIndex</a>, <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>;
        <span title="object java.lang.System">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>,  <a href="#38641" title="Int">insertPos</a>, <a href="#38652" title="Array[T]">newData</a>,  <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>;
        
        <span class="comment">// update pointers</span>
        <a href="#36963" title="(x$1: Array[Int])Unit">index</a> = <a href="#38651" title="Array[Int]">newIndex</a>;
        <a href="#36964" title="(x$1: Array[T])Unit">data</a> = <a href="#38652" title="Array[T]">newData</a>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// need to make room for new element mid-array</span>
        <span title="object java.lang.System">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#36963" title="=&gt; Array[Int]">index</a>, <a href="#38641" title="Int">insertPos</a>, <a href="#36963" title="=&gt; Array[Int]">index</a>, <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>;
        <span title="object java.lang.System">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#36964" title="=&gt; Array[T]">data</a>,  <a href="#38641" title="Int">insertPos</a>, <a href="#36964" title="=&gt; Array[T]">data</a>,  <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <a href="#38641" title="Int">insertPos</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      <span class="comment">// assign new value</span>
      <a href="#36963" title="(i: Int, x: Int)Unit">index</a><span class="delimiter">(</span><a href="#38641" title="Int">insertPos</a><span class="delimiter">)</span> = <a href="#38630" title="Int">i</a>;
      <a href="#36964" title="(i: Int, x: T)Unit">data</a><span class="delimiter">(</span><a href="#38641" title="Int">insertPos</a><span class="delimiter">)</span> = <a href="#38631" title="T">value</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Clears this array, resetting to the initial size. */</span>
  <span class="keyword">def</span> <a title="()Unit" id="36883">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#36888" title="(inIndex: Array[Int], inData: Array[T], inUsed: Int)Unit">use</a><span class="delimiter">(</span><span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36966" title="Int">initialActiveLength</a><span class="delimiter">)</span>, <a href="#36967" title="(len: Int)Array[T]" class="keyword">new</a> Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36966" title="Int">initialActiveLength</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Pre-allocate space in this array for all active indexes in other. */</span>
  <span class="keyword">def</span> <a title="[O](other: scalala.collection.sparse.SparseArray[O])Unit" id="36884">reserve</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36886">O</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[O]" id="38800">other</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[O]">SparseArray</a><span class="delimiter">[</span>O<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[T]" id="38803">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36962" title="=&gt; Int">length</a>, <a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">+</span> <a href="#38800" title="scalala.collection.sparse.SparseArray[O]">other</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
    <span class="keyword">var</span> <a title="Int" id="38804">i</a> = <span title="Int(0)" class="int">0</span>;
    <span class="keyword">var</span> <a title="Int" id="38805">j</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38805" title="Int">j</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#38800" title="scalala.collection.sparse.SparseArray[O]">other</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#38806" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="Int" id="38818">indexI</a> = <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38804" title="Int">i</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Int" id="38819">indexJ</a> = <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38805" title="Int">j</a><span class="delimiter">)</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38804" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#38818" title="Int">indexI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#38819" title="Int">indexJ</a><span class="delimiter">)</span> <a href="#38820" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#38818" title="Int">indexI</a><span class="delimiter">)</span> = <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38804" title="Int">i</a><span class="delimiter">)</span>;
        <a href="#38804" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#38819" title="Int">indexJ</a><span class="delimiter">)</span> = <a href="#36875" title="(i: Int)T" class="keyword">this</a><span class="delimiter">(</span><a href="#38819" title="Int">indexJ</a><span class="delimiter">)</span>;
      <a href="#38805" title="Int">j</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38804" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#38807" title="()Unit" class="delimiter">{</a>
      <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38804" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38804" title="Int">i</a><span class="delimiter">)</span>;
      <a href="#38804" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
    <a href="#36888" title="(inIndex: Array[Int], inData: Array[T], inUsed: Int)Unit">use</a><span class="delimiter">(</span><a href="#38803" title="scalala.collection.sparse.SparseArray[T]">rv</a>.<a href="#36963" title="=&gt; Array[Int]">index</a>, <a href="#38803" title="scalala.collection.sparse.SparseArray[T]">rv</a>.<a href="#36964" title="=&gt; Array[T]">data</a>, <a href="#38803" title="scalala.collection.sparse.SparseArray[T]">rv</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Compacts the array by removing all stored default values. */</span>
  <span class="keyword">def</span> <a title="()Unit" id="36887">compact</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="38846">nz</a> = <span class="delimiter">{</span> <span class="comment">// number of non-zeros</span>
      <span class="keyword">var</span> <a title="Int" id="38852">_nz</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="38853">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38853" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#38854" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38853" title="Int">i</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#38852" title="Int">_nz</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
        <a href="#38853" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#38852" title="Int">_nz</a>;
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Array[T]" id="38847">newData</a>  = <a href="#36967" title="(len: Int)Array[T]" class="keyword">new</a> Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#38846" title="Int">nz</a><span class="delimiter">)</span>;
    <span class="keyword">val</span> <a title="Array[Int]" id="38848">newIndex</a> = <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#38846" title="Int">nz</a><span class="delimiter">)</span>;

    <span class="keyword">var</span> <a title="Int" id="38849">i</a> = <span title="Int(0)" class="int">0</span>;
    <span class="keyword">var</span> <a title="Int" id="38850">o</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38849" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#38851" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38849" title="Int">i</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#38847" title="(i: Int, x: T)Unit">newData</a><span class="delimiter">(</span><a href="#38850" title="Int">o</a><span class="delimiter">)</span> = <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38849" title="Int">i</a><span class="delimiter">)</span>;
        <a href="#38848" title="(i: Int, x: Int)Unit">newIndex</a><span class="delimiter">(</span><a href="#38850" title="Int">o</a><span class="delimiter">)</span> = <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38849" title="Int">i</a><span class="delimiter">)</span>;
        <a href="#38850" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#38849" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>

    <a href="#36888" title="(inIndex: Array[Int], inData: Array[T], inUsed: Int)Unit">use</a><span class="delimiter">(</span><a href="#38848" title="Array[Int]">newIndex</a>, <a href="#38847" title="Array[T]">newData</a>, <a href="#38846" title="Int">nz</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="comment">/** Use the given index and data arrays, of which the first inUsed are valid. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(inIndex: Array[Int], inData: Array[T], inUsed: Int)Unit" id="36888">use</a><span class="delimiter">(</span><a title="Array[Int]" id="38791">inIndex</a> : <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, <a title="Array[T]" id="38792">inData</a> : <span title="Array[T]">Array</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Int" id="38793">inUsed</a> : <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="comment">// no need to rep-check since method is private and all callers satisfy</span>
    <span class="comment">// these invariants.</span>

    <a href="#36964" title="(x$1: Array[T])Unit">data</a> = <a href="#38792" title="Array[T]">inData</a>;
    <a href="#36963" title="(x$1: Array[Int])Unit">index</a> = <a href="#38791" title="Array[Int]">inIndex</a>;
    <a href="#36965" title="(x$1: Int)Unit">used</a> = <a href="#38793" title="Int">inUsed</a>;
  <span class="delimiter">}</span>
  
  <span class="comment">/** Sets this array to be a copy of the given other array. */</span>
  <span class="keyword">def</span> <a title="(that: scalala.collection.sparse.SparseArray[T])Unit" id="36889">set</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[T]" id="38887">that</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">!=</span> <a href="#38887" title="scalala.collection.sparse.SparseArray[T]">that</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;SparseArrays must be the same length&quot;)" class="string">&quot;SparseArrays must be the same length&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <a href="#36888" title="(inIndex: Array[Int], inData: Array[T], inUsed: Int)Unit">use</a><span class="delimiter">(</span><a href="#38887" title="scalala.collection.sparse.SparseArray[T]">that</a>.<a href="#36963" title="=&gt; Array[Int]">index</a>.<span title="()Array[Int]">clone</span>, <a href="#38887" title="scalala.collection.sparse.SparseArray[T]">that</a>.<a href="#36964" title="=&gt; Array[T]">data</a>.<span title="()Array[T]">clone</span>, <a href="#38887" title="scalala.collection.sparse.SparseArray[T]">that</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="36890">checkrep</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="=&gt; Array[Int]">index</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">||</span> <a href="#36964" title="=&gt; Array[T]">data</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Index and data must be non-null&quot;)" class="string">&quot;Index and data must be non-null&quot;</span><span class="delimiter">)</span>;
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="=&gt; Array[Int]">index</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">!=</span> <a href="#36964" title="=&gt; Array[T]">data</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Index and data sizes do not match&quot;)" class="string">&quot;Index and data sizes do not match&quot;</span><span class="delimiter">)</span>;
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="=&gt; Array[Int]">index</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Used is greater than provided array&quot;)" class="string">&quot;Used is greater than provided array&quot;</span><span class="delimiter">)</span>;
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">||</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;use inIndex out of range contains illegal offset @ 0&quot;)" class="string">&quot;use inIndex out of range contains illegal offset @ 0&quot;</span><span class="delimiter">)</span>;
    <span class="keyword">var</span> <a title="Int" id="38909">i</a> = <span title="Int(1)" class="int">1</span>;
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38909" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#38953" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38909" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">||</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38909" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Boolean)Boolean">||</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38909" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38909" title="Int">i</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;use inIndex out of range contains illegal offset @ &quot;)" class="string">&quot;use inIndex out of range contains illegal offset @ &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#38909" title="Int">i</a><span class="delimiter">)</span>;
      <a href="#38909" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Maps all values.  If f(this.default) is not equal to the new default
   * value, the result may be an efficiently dense (or almost dense) paired
   * array.
   */</span>
  <span class="keyword">def</span> <a title="[B](f: T =&gt; B)(implicit evidence$1: ClassManifest[B], implicit evidence$2: scalala.collection.sparse.DefaultArrayValue[B])scalala.collection.sparse.SparseArray[B]" id="38984">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36893">B</a>:ClassManifest:DefaultArrayValue<span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; B" id="38982">f</a> : T=&gt;B<span class="delimiter">)</span> : <a href="#9548" title="scalala.collection.sparse.SparseArray[B]">SparseArray</a><span class="delimiter">[</span>B<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="B" id="38989">newDefault</a> = <span title="[T](implicit e: T)T">implicitly</span><a href="#38984" title="(implicit e: scalala.collection.sparse.DefaultArrayValue[B])scalala.collection.sparse.DefaultArrayValue[B]" class="delimiter">[</a><a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[B]">DefaultArrayValue</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="#36961" title="=&gt; B">value</a>;
    <span title="scalala.collection.sparse.SparseArray[B]" class="keyword">if</span> <span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36962" title="=&gt; Int">length</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#38982" title="(v1: T)B">f</a><span class="delimiter">(</span><a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> <a href="#38989" title="B">newDefault</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// some default values but f(default) is still default</span>
      <span class="keyword">val</span> <a title="Array[Int]" id="38996">newIndex</a> = <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Array[B]" id="38997">newData</a> = <a href="#38984" title="(len: Int)Array[B]" class="keyword">new</a> Array<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="38998">i</a> = <span title="Int(0)" class="int">0</span>; <span class="keyword">var</span> <a title="Int" id="38999">o</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#38998" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39000" title="()Unit" class="delimiter">{</a>
        <a href="#38996" title="(i: Int, x: Int)Unit">newIndex</a><span class="delimiter">(</span><a href="#38999" title="Int">o</a><span class="delimiter">)</span> = <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#38998" title="Int">i</a><span class="delimiter">)</span>;
        <span class="keyword">val</span> <a title="B" id="39009">newValue</a> = <a href="#38982" title="(v1: T)B">f</a><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#38998" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39009" title="B">newValue</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#38989" title="B">newDefault</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#38997" title="(i: Int, x: B)Unit">newData</a><span class="delimiter">(</span><a href="#38999" title="Int">o</a><span class="delimiter">)</span> = <a href="#39009" title="B">newValue</a>;
          <a href="#38999" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
        <a href="#38998" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#38984" title="scalala.collection.sparse.SparseArray[B]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[B]">SparseArray</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a>, <a href="#38996" title="Array[Int]">newIndex</a>, <a href="#38997" title="Array[B]">newData</a>, <a href="#38999" title="Int">o</a>, <a href="#36966" title="Int">initialActiveLength</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// no default values stored or f(default) is non-default</span>
      <span class="keyword">val</span> <a title="B" id="39033">newDefault</a> = <a href="#38982" title="(v1: T)B">f</a><span class="delimiter">(</span><a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Array[Int]" id="39034">newIndex</a> = <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Array[B]" id="39035">newData</a> = <a href="#38984" title="(len: Int)Array[B]" class="keyword">new</a> Array<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="39036">i</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="39037">o</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39036" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39039" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39037" title="Int">o</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39036" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#39049" title="()Unit" class="delimiter">{</a>
          <a href="#39034" title="(i: Int, x: Int)Unit">newIndex</a><span class="delimiter">(</span><a href="#39037" title="Int">o</a><span class="delimiter">)</span> = <a href="#39037" title="Int">o</a>;
          <a href="#39035" title="(i: Int, x: B)Unit">newData</a><span class="delimiter">(</span><a href="#39037" title="Int">o</a><span class="delimiter">)</span> = <a href="#39033" title="B">newDefault</a>;
          <a href="#39037" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
        <a href="#39034" title="(i: Int, x: Int)Unit">newIndex</a><span class="delimiter">(</span><a href="#39037" title="Int">o</a><span class="delimiter">)</span> = <a href="#39037" title="Int">o</a>;
        <a href="#39035" title="(i: Int, x: B)Unit">newData</a><span class="delimiter">(</span><a href="#39037" title="Int">o</a><span class="delimiter">)</span> = <a href="#38982" title="(v1: T)B">f</a><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39036" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#39037" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <a href="#39036" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39037" title="Int">o</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#39040" title="()Unit" class="delimiter">{</a>
        <a href="#39034" title="(i: Int, x: Int)Unit">newIndex</a><span class="delimiter">(</span><a href="#39037" title="Int">o</a><span class="delimiter">)</span> = <a href="#39037" title="Int">o</a>;
        <a href="#39035" title="(i: Int, x: B)Unit">newData</a><span class="delimiter">(</span><a href="#39037" title="Int">o</a><span class="delimiter">)</span> = <a href="#39033" title="B">newDefault</a>;
        <a href="#39037" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[B]" id="39038">rv</a> = <a href="#38984" title="scalala.collection.sparse.SparseArray[B]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[B]">SparseArray</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a>, <a href="#39034" title="Array[Int]">newIndex</a>, <a href="#39035" title="Array[B]">newData</a>, <a href="#36962" title="=&gt; Int">length</a>, <a href="#36966" title="Int">initialActiveLength</a><span class="delimiter">)</span>;
      <a href="#39038" title="scalala.collection.sparse.SparseArray[B]">rv</a>.<a href="#36887" title="()Unit">compact</a>;
      <a href="#39038" title="scalala.collection.sparse.SparseArray[B]">rv</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Filter's the array by removing all values for which f is false.
   */</span>
  <span class="keyword">def</span> <a title="(f: T =&gt; Boolean)scalala.collection.sparse.SparseArray[T]" id="36894">filter</a><span class="delimiter">(</span><a title="T =&gt; Boolean" id="39088">f</a> : T=&gt;Boolean<span class="delimiter">)</span> : <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[Int]" id="39090">newIndex</a> = <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
    <span class="keyword">val</span> <a title="Array[T]" id="39091">newData</a> = <a href="#36967" title="(len: Int)Array[T]" class="keyword">new</a> Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span>;
    <span class="keyword">var</span> <a title="Int" id="39092">i</a> = <span title="Int(0)" class="int">0</span>; <span class="keyword">var</span> <a title="Int" id="39093">o</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39092" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39094" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39088" title="(v1: T)Boolean">f</a><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39092" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#39090" title="(i: Int, x: Int)Unit">newIndex</a><span class="delimiter">(</span><a href="#39093" title="Int">o</a><span class="delimiter">)</span> = <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39092" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Int)Int">-</span> <span class="delimiter">(</span><a href="#39092" title="Int">i</a> <span title="(x: Int)Int">-</span> <a href="#39093" title="Int">o</a><span class="delimiter">)</span>;
        <a href="#39091" title="(i: Int, x: T)Unit">newData</a><span class="delimiter">(</span><a href="#39093" title="Int">o</a><span class="delimiter">)</span> = <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39092" title="Int">i</a><span class="delimiter">)</span>;
        <a href="#39093" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#39092" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>

    <span title="scalala.collection.sparse.SparseArray[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#39088" title="(v1: T)Boolean">f</a><span class="delimiter">(</span><a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// if default values are accepted, assume we're full length.</span>
      <span class="keyword">var</span> <a title="Int" id="39124">newLength</a> = <a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Int">-</span> <span class="delimiter">(</span><a href="#39092" title="Int">i</a> <span title="(x: Int)Int">-</span> <a href="#39093" title="Int">o</a><span class="delimiter">)</span>;
      
      <span class="comment">// ... and subtract from that length how many defined tail elements</span>
      <span class="comment">// were filtered ...</span>
      <span class="keyword">var</span> <a title="Int" id="39125">ii</a> = <a href="#36965" title="=&gt; Int">used</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39125" title="Int">ii</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39125" title="Int">ii</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <a href="#39090" title="(i: Int)Int">newIndex</a><span class="delimiter">(</span><a href="#39093" title="Int">o</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39125" title="Int">ii</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <a href="#39124" title="Int">newLength</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#39126" title="()Unit" class="delimiter">{</a>
        <a href="#39125" title="Int">ii</a> <span title="(x: Int)Int">-=</span> <span title="Int(1)" class="int">1</span>;
        <a href="#39124" title="Int">newLength</a> <span title="(x: Int)Int">-=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#36967" title="scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#39124" title="Int">newLength</a>, <a href="#39090" title="Array[Int]">newIndex</a>, <a href="#39091" title="Array[T]">newData</a>, <a href="#39093" title="Int">o</a>, <a href="#36966" title="Int">initialActiveLength</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// if default values are not accepted, return a &quot;dense&quot; array by</span>
      <span class="comment">// setting each position in newIndex consecutively to forget missing</span>
      <span class="comment">// values</span>
      <span class="keyword">val</span> <a title="Int" id="39168">newLength</a> = <a href="#39093" title="Int">o</a>;
      <a href="#36967" title="scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#39168" title="Int">newLength</a>, <span title="object Array">Array</span>.<span title="(start: Int, end: Int)Array[Int]">range</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>,<a href="#39168" title="Int">newLength</a><span class="delimiter">)</span>, <a href="#39091" title="(xs: Array[T])scala.collection.mutable.ArrayOps[T]">newData</a>.<span title="(n: Int)Array[T]">take</span><span class="delimiter">(</span><a href="#39168" title="Int">newLength</a><span class="delimiter">)</span>, <a href="#39168" title="Int">newLength</a>, <a href="#36966" title="Int">initialActiveLength</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Tranforms all elements this array by applying the given function. If
   * f(default) == default, then only updates non-default values.  Otherwise,
   * the map essentially becomes dense -- not so efficient an operation!
   */</span>
  <span class="keyword">def</span> <a title="(f: T =&gt; T)Unit" id="36895">transform</a><span class="delimiter">(</span><a title="T =&gt; T" id="39437">f</a> : T=&gt;T<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="39440">newDefault</a> = <a href="#39437" title="(v1: T)T">f</a><span class="delimiter">(</span><a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span>;
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39440" title="T">newDefault</a> <span title="(x$1: Any)Boolean">==</span> <a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="39442">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39442" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39443" title="()Unit" class="delimiter">{</a>
        <a href="#36964" title="(i: Int, x: T)Unit">data</a><span class="delimiter">(</span><a href="#39442" title="Int">i</a><span class="delimiter">)</span> = <a href="#39437" title="(v1: T)T">f</a><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39442" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#39442" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Array[Int]" id="39454">newIndex</a> = <span title="object Array">Array</span>.<span title="(start: Int, end: Int)Array[Int]">range</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Array[T]" id="39455">newData</a> = <a href="#36967" title="(len: Int)Array[T]" class="keyword">new</a> Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="39456">i</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="39457">o</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39456" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39458" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39457" title="Int">o</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39456" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#39468" title="()Unit" class="delimiter">{</a>
          <a href="#39455" title="(i: Int, x: T)Unit">newData</a><span class="delimiter">(</span><a href="#39457" title="Int">o</a><span class="delimiter">)</span> = <a href="#39440" title="T">newDefault</a>;
          <a href="#39457" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
        <a href="#39455" title="(i: Int, x: T)Unit">newData</a><span class="delimiter">(</span><a href="#39457" title="Int">o</a><span class="delimiter">)</span> = <a href="#39437" title="(v1: T)T">f</a><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39456" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#39457" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <a href="#39456" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39457" title="Int">o</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#39459" title="()Unit" class="delimiter">{</a>
        <a href="#39455" title="(i: Int, x: T)Unit">newData</a><span class="delimiter">(</span><a href="#39457" title="Int">o</a><span class="delimiter">)</span> = <a href="#39440" title="T">newDefault</a>;
        <a href="#39457" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#36888" title="(inIndex: Array[Int], inData: Array[T], inUsed: Int)Unit">use</a><span class="delimiter">(</span><a href="#39454" title="Array[Int]">newIndex</a>, <a href="#39455" title="Array[T]">newData</a>, <a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Applies the given function to each non-default element. */</span>
  <span class="keyword">def</span> <a title="[U](f: (Int, T) =&gt; U)Unit" id="36896">foreachActivePair</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36898">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(Int, T) =&gt; U" id="39495">f</a>: <span class="delimiter">(</span><span class="delimiter">(</span>Int,T<span class="delimiter">)</span> =&gt; U<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="39509">i</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#39509" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39510" title="()Unit" class="delimiter">{</a>
      <a href="#39495" title="(v1: Int, v2: T)U">f</a><span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39509" title="Int">i</a><span class="delimiter">)</span>, <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39509" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#39509" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Applies the given function to each non-default element. */</span>
  <span class="keyword">def</span> <a title="[U](f: T =&gt; U)Unit" id="36899">foreachActiveValue</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36901">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; U" id="39521">f</a>: T =&gt; U<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="39524">i</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#39524" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39525" title="()Unit" class="delimiter">{</a>
      <a href="#39521" title="(v1: T)U">f</a><span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39524" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#39524" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Applies the given function to each non-default element. */</span>
  <span class="keyword">def</span> <a title="[U](f: Int =&gt; U)Unit" id="36902">foreachActiveKey</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36904">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int =&gt; U" id="39535">f</a>: Int =&gt; U<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="39538">i</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#39538" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39539" title="()Unit" class="delimiter">{</a>
      <a href="#39535" title="(v1: Int)U">f</a><span class="delimiter">(</span><a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39538" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#39538" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Array[T]" id="36905">toArray</a> =
    <span title="object Array">Array</span>.<span title="(n: Int)(f: Int =&gt; T)(implicit evidence$14: scala.reflect.ClassManifest[T])Array[T]">tabulate</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span><a href="#36967" title="ClassManifest[T]" class="delimiter">(</a><a href="#36875" title="(i: Int)T">apply</a><span class="delimiter">)</span>;

  <span class="keyword">def</span> <a title="=&gt; List[T]" id="36906">toList</a> =
    <span title="object List">List</span>.<span title="(n: Int)(f: Int =&gt; T)List[T]">tabulate</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#36875" title="(i: Int)T">apply</a><span class="delimiter">)</span>;

  <span class="keyword">def</span> <a title="=&gt; List[T]" id="36907">toIndexedSeq</a> =
    <span title="object List">List</span>.<span title="(n: Int)(f: Int =&gt; T)List[T]">tabulate</span><span class="delimiter">(</span><a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#36875" title="(i: Int)T">apply</a><span class="delimiter">)</span>;

  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Map[Int,T]" id="36908">toMap</a> =
    <span class="delimiter">(</span><a href="#36869" title="=&gt; Iterator[Int]">indexIterator</a> <span title="(that: Iterator[T])java.lang.Object with Iterator[(Int, T)]">zip</span> <a href="#36870" title="=&gt; Iterator[T]">valueIterator</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[(Int, T),(Int, T)])scala.collection.immutable.Map[Int,T]">toMap</span>;

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="36909">hashCode</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="39923">rv</a> = <span title="Int(0)" class="int">0</span>;
    <span class="keyword">var</span> <a title="Int" id="39924">i</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39924" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39925" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39924" title="Int">i</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#39923" title="Int">rv</a> <span title="(x: Int)Int">+=</span> <span title="Int(17)" class="int">17</span><span title="(x: Int)Int">*</span><a href="#39923" title="Int">rv</a> <span title="(x: Int)Int">+</span> <a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39924" title="Int">i</a><span class="delimiter">)</span>.<span title="()Int">hashCode</span><span title="(x: Int)Int">*</span><span title="Int(7)" class="int">7</span> <span title="(x: Int)Int">+</span> <a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39924" title="Int">i</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
      <a href="#39924" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
    <a href="#39923" title="Int">rv</a>;
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(other: Any)Boolean" id="36910">equals</a><span class="delimiter">(</span><a title="Any" id="39954">other</a> : <span title="Any">Any</span><span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <a href="#39954" title="Any">other</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Boolean" id="39956">that</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[_]">SparseArray</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
      <span class="keyword">var</span> <a title="Int" id="39958">thisI</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="39959">thatI</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39958" title="Int">thisI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36965" title="=&gt; Int">used</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#39959" title="Int">thatI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#39960" title="Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39958" title="Int">thisI</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39959" title="Int">thatI</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39958" title="Int">thisI</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36866" title="=&gt; _">default</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>;
          <a href="#39958" title="Int">thisI</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39959" title="Int">thatI</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36963" title="(i: Int)Int">index</a><span class="delimiter">(</span><a href="#39958" title="Int">thisI</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36964" title="(i: Int)_">data</a><span class="delimiter">(</span><a href="#39959" title="Int">thatI</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>;
          <a href="#39959" title="Int">thatI</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span> <span class="comment">// this.index(thisI) == that.index(thatI)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39958" title="Int">thisI</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36964" title="(i: Int)_">data</a><span class="delimiter">(</span><a href="#39959" title="Int">thatI</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>;
          <a href="#39958" title="Int">thisI</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
          <a href="#39959" title="Int">thatI</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39958" title="Int">thisI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39961" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36964" title="(i: Int)T">data</a><span class="delimiter">(</span><a href="#39958" title="Int">thisI</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36866" title="=&gt; _">default</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>;
        <a href="#39958" title="Int">thisI</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#39959" title="Int">thatI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36965" title="=&gt; Int">used</a><span class="delimiter">)</span> <a href="#39962" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39956" title="scalala.collection.sparse.SparseArray[_]">that</a>.<a href="#36964" title="(i: Int)_">data</a><span class="delimiter">(</span><a href="#39959" title="Int">thatI</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> <a href="#9548" title="SparseArray.this.type" class="keyword">this</a>.<a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>;
        <a href="#39959" title="Int">thatI</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <span title="Boolean(true)" class="keyword">true</span>;
    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>;
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalala.collection.sparse.SparseArray" id="41021">SparseArray</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9560" title="scalala.collection.sparse.SparseArrayOps">SparseArrayOps</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T](values: T*)(implicit evidence$3: ClassManifest[T], implicit evidence$4: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" id="40015">apply</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="37084">T</a>:ClassManifest:DefaultArrayValue<span class="delimiter">]</span><span class="delimiter">(</span><a title="T*" id="40013">values</a> : <span title="T*">T</span>*<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[T]" id="40018">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#40013" title="T*">values</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>;
    <span class="keyword">var</span> <a title="Int" id="40019">i</a> = <span title="Int(0)" class="int">0</span>;
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="T" id="40289">v</a> &lt;- <a href="#40013" title="(f: T =&gt; Unit)Unit">values</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#40019" title="Int">i</a><span class="delimiter">)</span> = <a href="#40289" title="T">v</a>;
      <a href="#40019" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
    <a href="#40018" title="scalala.collection.sparse.SparseArray[T]">rv</a>.<a href="#36887" title="()Unit">compact</a>;
    <a href="#40018" title="scalala.collection.sparse.SparseArray[T]">rv</a>;
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a SparseArray filled with the given value.  The value function
   * is called once initially to test if the returned value is equal to the
   * DefaultArrayValue - if so, an empty SparseArray with initialActiveLength
   * non-zero entries is returned.  Otherwise, an inefficient &quot;dense&quot;
   * SparseArray is returned.
   *
   * @author dramage
   */</span>
  <span class="keyword">def</span> <a title="[T](length: Int, initialActiveLength: Int)(value: =&gt; T)(implicit evidence$5: ClassManifest[T], implicit evidence$6: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" id="40310">fill</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="40320">T</a>:ClassManifest:DefaultArrayValue<span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="40306">length</a> : <span title="Int">Int</span>, <a title="Int" id="40318">initialActiveLength</a> : <span title="Int">Int</span> = <span title="Int(3)" class="int">3</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="40308">value</a> : =&gt;T<span class="delimiter">)</span> : <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="scalala.collection.sparse.SparseArray[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#40308" title="=&gt; T">value</a> <span title="(x$1: Any)Boolean">!=</span> <span title="[T](implicit e: T)T">implicitly</span><a href="#40310" title="(implicit e: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.DefaultArrayValue[T]" class="delimiter">[</a><a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[T]">DefaultArrayValue</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="#36961" title="=&gt; T">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[T]" id="40332">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span>length = <a href="#40306" title="Int">length</a>, initialActiveLength = <a href="#40306" title="Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="40333">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#40333" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#40306" title="Int">length</a><span class="delimiter">)</span> <a href="#40334" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#40333" title="Int">i</a><span class="delimiter">)</span> = <a href="#40308" title="=&gt; T">value</a>;
        <a href="#40333" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#40332" title="scalala.collection.sparse.SparseArray[T]">rv</a>;
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span>length = <a href="#40306" title="Int">length</a>, initialActiveLength = <a href="#40306" title="Int">length</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](length: Int)(values: (Int, T)*)(implicit evidence$7: ClassManifest[T], implicit evidence$8: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" id="40361">create</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="37090">T</a>:ClassManifest:DefaultArrayValue<span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="40358">length</a> : <span title="Int">Int</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(Int, T)*" id="40359">values</a> : <span title="(Int, T)*" class="delimiter">(</span>Int,T<span class="delimiter">)</span>*<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[T]" id="40364">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span>length = <a href="#40358" title="Int">length</a>, initialActiveLength = <a href="#40359" title="(Int, T)*">values</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>;
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="40438">k</a>,<a title="T" id="40439">v</a><span class="delimiter">)</span> &lt;- <a href="#40359" title="(f: (Int, T) =&gt; Unit)Unit">values</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#40438" title="Int">k</a><span class="delimiter">)</span> = <a href="#40439" title="T">v</a>;
    <span class="delimiter">}</span>
    <a href="#40364" title="scalala.collection.sparse.SparseArray[T]">rv</a>;
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](length: Int, initialActiveLength: Int)(fn: Int =&gt; T)(implicit evidence$9: ClassManifest[T], implicit evidence$10: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" id="40456">tabulate</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="40461">T</a>:ClassManifest:DefaultArrayValue<span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="40452">length</a> : <span title="Int">Int</span>, <a title="Int" id="40459">initialActiveLength</a> : <span title="Int">Int</span> = <span title="Int(3)" class="int">3</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int =&gt; T" id="40454">fn</a> : <span class="delimiter">(</span>Int =&gt; T<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[T]" id="40462">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[T], implicit d: scalala.collection.sparse.DefaultArrayValue[T])scalala.collection.sparse.SparseArray[T]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[T]">SparseArray</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span>length = <a href="#40452" title="Int">length</a>, initialActiveLength = <a href="#40459" title="Int">initialActiveLength</a><span class="delimiter">)</span>;
    <span class="keyword">var</span> <a title="Int" id="40463">i</a> = <span title="Int(0)" class="int">0</span>;
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#40463" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#40452" title="Int">length</a><span class="delimiter">)</span> <a href="#40464" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="T" id="40486">v</a> = <a href="#40454" title="(v1: Int)T">fn</a><span class="delimiter">(</span><a href="#40463" title="Int">i</a><span class="delimiter">)</span>;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#40486" title="T">v</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#40462" title="scalala.collection.sparse.SparseArray[T]">rv</a>.<a href="#36866" title="=&gt; T">default</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#36882" title="(i: Int, value: T)Unit">rv</a><span class="delimiter">(</span><a href="#40463" title="Int">i</a><span class="delimiter">)</span> = <a href="#40486" title="T">v</a>;
      <span class="delimiter">}</span>
      <a href="#40463" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
    <span class="delimiter">}</span>
    <a href="#40462" title="scalala.collection.sparse.SparseArray[T]">rv</a>.<a href="#36887" title="()Unit">compact</a>;
    <a href="#40462" title="scalala.collection.sparse.SparseArray[T]">rv</a>;
  <span class="delimiter">}</span>
  
  <span class="keyword">class</span> <a title="class RichSparseArray[V] extends java.lang.Object with scalala.operators.MutableNumericOps[scalala.collection.sparse.SparseArray[V]] with ScalaObject" id="37094">RichSparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37095">V</a><span class="delimiter">]</span><a href="#37094" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[V]" id="40979">repr</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../../operators/Ops.scala.html#11706" title="scalala.operators.MutableNumericOps[scalala.collection.sparse.SparseArray[V]]">MutableNumericOps</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span>;
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V](repr: scalala.collection.sparse.SparseArray[V])scalala.collection.sparse.SparseArray.RichSparseArray[V]" id="37096">richSparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37098">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V]" id="40980">repr</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="scalala.collection.sparse.SparseArray.RichSparseArray[V]" class="keyword">new</span> <a href="#37094" title="scalala.collection.sparse.SparseArray.RichSparseArray[V]">RichSparseArray</a><span class="delimiter">(</span><a href="#40980" title="scalala.collection.sparse.SparseArray[V]">repr</a><span class="delimiter">)</span>;
  
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait LowerPrioritySparseArrayOps extends java.lang.Object with ScalaObject" id="9584">LowerPrioritySparseArrayOps</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/** Set sparse array with corresponding values from another array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2](implicit cast: scalala.operators.CanCast[V2,V1], implicit s1: scalala.scalar.Scalar[V1], implicit s2: scalala.scalar.Scalar[V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],scalala.operators.OpSet]" id="41023">OpSetSparseArraySparseArrayCast</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="41026">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="41027">V2</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.CanCast[V2,V1]" id="41040">cast</a> : <a href="../../operators/CanCast.scala.html#12078" title="scalala.operators.CanCast[V2,V1]">CanCast</a><span class="delimiter">[</span>V2,V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V1]" id="41041">s1</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V1]">Scalar</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V2]" id="41042">s2</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],scalala.operators.OpSet]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span>
  = <a href="#41069" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],scalala.operators.OpSet]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],scalala.operators.OpSet]" id="41069">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpSet.type" id="41073">opType</a> = <a href="../../operators/OpType.scala.html#11725" title="object scalala.operators.OpSet">OpSet</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])Unit" id="41074">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41081">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41082">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="41087">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41087" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41081" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41088" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V1)Unit">a</a><span class="delimiter">(</span><a href="#41087" title="Int">i</a><span class="delimiter">)</span> = <a href="#41040" title="(v1: V2)V1">cast</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41087" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41087" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Set sparse array with casted corresponding values from another array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2](implicit cast: scalala.operators.CanCast[V2,V1], implicit s1: scalala.scalar.Scalar[V1], implicit s2: scalala.scalar.Scalar[V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],scalala.operators.OpSet]" id="41028">OpSetSparseArrayArrayCast</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="41031">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="41032">V2</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.CanCast[V2,V1]" id="41104">cast</a> : <a href="../../operators/CanCast.scala.html#12078" title="scalala.operators.CanCast[V2,V1]">CanCast</a><span class="delimiter">[</span>V2,V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V1]" id="41105">s1</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V1]">Scalar</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V2]" id="41106">s2</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],scalala.operators.OpSet]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span>
  = <a href="#41117" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],scalala.operators.OpSet]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],scalala.operators.OpSet]" id="41117">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpSet.type" id="41121">opType</a> = <a href="../../operators/OpType.scala.html#11725" title="object scalala.operators.OpSet">OpSet</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])Unit" id="41122">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41126">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41127">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="41132">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41132" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41126" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41133" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V1)Unit">a</a><span class="delimiter">(</span><a href="#41132" title="Int">i</a><span class="delimiter">)</span> = <a href="#41104" title="(v1: V2)V1">cast</a><span class="delimiter">(</span><a href="#41127" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41132" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41132" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Set array to casted scalar. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2](implicit cast: scalala.operators.CanCast[V2,V1], implicit s1: scalala.scalar.Scalar[V1], implicit s2: scalala.scalar.Scalar[V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,scalala.operators.OpSet]" id="41033">OpSetSparseArrayScalarCast</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="41036">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="41037">V2</a><span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.CanCast[V2,V1]" id="41097">cast</a> : <a href="../../operators/CanCast.scala.html#12078" title="scalala.operators.CanCast[V2,V1]">CanCast</a><span class="delimiter">[</span>V2,V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V1]" id="41098">s1</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V1]">Scalar</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V2]" id="41099">s2</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,scalala.operators.OpSet]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,V2,OpSet<span class="delimiter">]</span>
  = <a href="#41147" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,scalala.operators.OpSet]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,scalala.operators.OpSet]" id="41147">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,V2,OpSet<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpSet.type" id="41151">opType</a> = <a href="../../operators/OpType.scala.html#11725" title="object scalala.operators.OpSet">OpSet</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: V2)Unit" id="41152">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41156">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="V2" id="41157">b</a> : <a href="#41037" title="V2">V2</a><span class="delimiter">)</span> = <span class="delimiter">{</span> 
      <span class="keyword">val</span> <a title="V1" id="41162">v</a> = <a href="#41097" title="(v1: V2)V1">cast</a><span class="delimiter">(</span><a href="#41157" title="V2">b</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41163">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41163" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41156" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41165" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V1)Unit">a</a><span class="delimiter">(</span><a href="#41163" title="Int">i</a><span class="delimiter">)</span> = <a href="#41162" title="V1">v</a>;
        <a href="#41163" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait LowPrioritySparseArrayOps extends java.lang.Object with ScalaObject" id="9632">LowPrioritySparseArrayOps</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/** Update sparse array with corresponding values from another sparse array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,V1], implicit c: scalala.operators.CompatibleShape[V1,V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]" id="36977">OpUpdateSparseArraySparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36981">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="36982">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="36983">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,V1]" id="40260">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,V1]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,V1<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40261">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span>
  = <a href="#41180" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]" id="41180">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41184">opType</a> = <a href="#40260" title="scalala.operators.BinaryOp[V1,V2,O,V1]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])Unit" id="41185">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41191">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41192">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41191" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41192" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;Inputs must be the same length&quot;)" class="string">&quot;Inputs must be the same length&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41197">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41197" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41191" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41205" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V1)Unit">a</a><span class="delimiter">(</span><a href="#41197" title="Int">i</a><span class="delimiter">)</span> = <a href="#40260" title="(v1: V1, v2: V2)V1">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41197" title="Int">i</a><span class="delimiter">)</span>,<a href="#36875" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41197" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41197" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Set array with corresponding values from another array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V](implicit s: scalala.scalar.Scalar[V])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],scalala.collection.sparse.SparseArray[V],scalala.operators.OpSet]" id="36984">OpSetSparseArraySparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36986">V</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.scalar.Scalar[V]" id="40257">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V]">Scalar</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],scalala.collection.sparse.SparseArray[V],scalala.operators.OpSet]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span>
  = <a href="#41222" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],scalala.collection.sparse.SparseArray[V],scalala.operators.OpSet]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],scalala.collection.sparse.SparseArray[V],scalala.operators.OpSet]" id="41222">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpSet.type" id="41226">opType</a> = <a href="../../operators/OpType.scala.html#11725" title="object scalala.operators.OpSet">OpSet</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V], b: scalala.collection.sparse.SparseArray[V])Unit" id="41227">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V]" id="41231">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V]" id="41232">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span> 
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41231" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41232" title="scalala.collection.sparse.SparseArray[V]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;Inputs must be the same length&quot;)" class="string">&quot;Inputs must be the same length&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41237">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41237" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41231" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41244" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V)Unit">a</a><span class="delimiter">(</span><a href="#41237" title="Int">i</a><span class="delimiter">)</span> = <a href="#36875" title="(i: Int)V">b</a><span class="delimiter">(</span><a href="#41237" title="Int">i</a><span class="delimiter">)</span>;
        <a href="#41237" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Update sparse array with corresponding values from another array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,V1], implicit c: scalala.operators.CompatibleShape[V1,V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]" id="36987">OpUpdateSparseArrayArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36991">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="36992">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="36993">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,V1]" id="40252">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,V1]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,V1<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40253">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span>
  = <a href="#41257" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]" id="41257">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41261">opType</a> = <a href="#40252" title="scalala.operators.BinaryOp[V1,V2,O,V1]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])Unit" id="41262">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41266">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41267">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41266" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41267" title="Array[V2]">b</a>.<span title="=&gt; Int">length</span>, <span title="java.lang.String(&quot;Inputs must be the same length&quot;)" class="string">&quot;Inputs must be the same length&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41272">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41272" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41266" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41279" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V1)Unit">a</a><span class="delimiter">(</span><a href="#41272" title="Int">i</a><span class="delimiter">)</span> = <a href="#40252" title="(v1: V1, v2: V2)V1">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41272" title="Int">i</a><span class="delimiter">)</span>,<a href="#41267" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41272" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41272" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Set sparse array with corresponding values from another array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V](implicit s: scalala.scalar.Scalar[V])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],Array[V],scalala.operators.OpSet]" id="36994">OpSetSparseArrayArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="36996">V</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.scalar.Scalar[V]" id="40249">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V]">Scalar</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],Array[V],scalala.operators.OpSet]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,Array<span class="delimiter">[</span>V<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span>
  = <a href="#41296" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],Array[V],scalala.operators.OpSet]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],Array[V],scalala.operators.OpSet]" id="41296">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,Array<span class="delimiter">[</span>V<span class="delimiter">]</span>,OpSet<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpSet.type" id="41300">opType</a> = <a href="../../operators/OpType.scala.html#11725" title="object scalala.operators.OpSet">OpSet</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V], b: Array[V])Unit" id="41301">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V]" id="41305">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span>, <a title="Array[V]" id="41306">b</a> : <span title="Array[V]">Array</span><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span> 
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41305" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41306" title="Array[V]">b</a>.<span title="=&gt; Int">length</span>, <span title="java.lang.String(&quot;Inputs must be the same length&quot;)" class="string">&quot;Inputs must be the same length&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41311">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41311" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41305" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41318" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V)Unit">a</a><span class="delimiter">(</span><a href="#41311" title="Int">i</a><span class="delimiter">)</span> = <a href="#41306" title="(i: Int)V">b</a><span class="delimiter">(</span><a href="#41311" title="Int">i</a><span class="delimiter">)</span>;
        <a href="#41311" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Update sparse array with scalar. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,V1], implicit s: scalala.scalar.Scalar[V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]" id="36997">OpUpdateSparseArrayScalar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37001">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37002">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37003">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,V1]" id="40244">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,V1]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,V1<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V2]" id="40245">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, V2, O<span class="delimiter">]</span>
  = <a href="#41331" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]" id="41331">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, V2, O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41335">opType</a> = <a href="#40244" title="scalala.operators.BinaryOp[V1,V2,O,V1]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: V2)Unit" id="41336">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41340">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="V2" id="41341">b</a> : <a href="#37002" title="V2">V2</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="41346">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41346" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41340" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41347" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: V1)Unit">a</a><span class="delimiter">(</span><a href="#41346" title="Int">i</a><span class="delimiter">)</span> = <a href="#40244" title="(v1: V1, v2: V2)V1">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41346" title="Int">i</a><span class="delimiter">)</span>,<a href="#41341" title="V2">b</a><span class="delimiter">)</span>;
        <a href="#41346" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Set sparse array with scalar. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V](implicit s: scalala.scalar.Scalar[V], implicit dv: scalala.collection.sparse.DefaultArrayValue[V])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],V,scalala.operators.OpSet]" id="37004">OpSetSparseArrayScalar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37006">V</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.scalar.Scalar[V]" id="40239">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V]">Scalar</a><span class="delimiter">[</span>V<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[V]" id="40240">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[V]">DefaultArrayValue</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],V,scalala.operators.OpSet]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,V,OpSet<span class="delimiter">]</span>
  = <a href="#41364" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],V,scalala.operators.OpSet]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V],V,scalala.operators.OpSet]" id="41364">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,V,OpSet<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scalala.operators.OpSet.type" id="41368">opType</a> = <a href="../../operators/OpType.scala.html#11725" title="object scalala.operators.OpSet">OpSet</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V], b: V)Unit" id="41369">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V]" id="41373">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span>, <a title="V" id="41374">b</a> : <a href="#37006" title="V">V</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#41374" title="V">b</a> <span title="(x$1: Any)Boolean">==</span> <a href="#40240" title="scalala.collection.sparse.DefaultArrayValue[V]">dv</a>.<a href="#36961" title="=&gt; V">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#41373" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#36883" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Int" id="41379">i</a> = <span title="Int(0)" class="int">0</span>;
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41379" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41373" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41380" title="()Unit" class="delimiter">{</a>
          <a href="#36882" title="(i: Int, value: V)Unit">a</a><span class="delimiter">(</span><a href="#41379" title="Int">i</a><span class="delimiter">)</span> = <a href="#41374" title="V">b</a>;
          <a href="#41379" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait SparseArrayOps extends java.lang.Object with scalala.collection.sparse.LowPrioritySparseArrayOps with ScalaObject" id="9560">SparseArrayOps</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9632" title="scalala.collection.sparse.LowPrioritySparseArrayOps">LowPrioritySparseArrayOps</a> <span class="delimiter">{</span>

  <span class="comment">//</span>
  <span class="comment">// UnaryOps</span>
  <span class="comment">//</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V, RV, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.UnaryOp[V,O,RV], implicit dv: scalala.collection.sparse.DefaultArrayValue[RV], implicit mf: Manifest[RV])scalala.operators.UnaryOp[scalala.collection.sparse.SparseArray[V],O,scalala.collection.sparse.SparseArray[RV]]" id="37008">UnaryOp</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37012">V</a>,<a title="&gt;: Nothing &lt;: Any" id="37013">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37014">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.UnaryOp[V,O,RV]" id="40114">op</a> : <a href="../../operators/UnaryOp.scala.html#11823" title="scalala.operators.UnaryOp[V,O,RV]">UnaryOp</a><span class="delimiter">[</span>V,O,RV<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[RV]" id="40115">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[RV]">DefaultArrayValue</a><span class="delimiter">[</span>RV<span class="delimiter">]</span>, <a title="Manifest[RV]" id="40116">mf</a> : <span title="Manifest[RV]">Manifest</span><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/UnaryOp.scala.html#11823" title="scalala.operators.UnaryOp[scalala.collection.sparse.SparseArray[V],O,scalala.collection.sparse.SparseArray[RV]]">UnaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span>
  = <a href="#41395" title="java.lang.Object with scalala.operators.UnaryOp[scalala.collection.sparse.SparseArray[V],O,scalala.collection.sparse.SparseArray[RV]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.UnaryOp[scalala.collection.sparse.SparseArray[V],O,scalala.collection.sparse.SparseArray[RV]]" id="41395">UnaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41399">opType</a> = <a href="#40114" title="scalala.operators.UnaryOp[V,O,RV]">op</a>.<a href="../../operators/UnaryOp.scala.html#40237" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V])scalala.collection.sparse.SparseArray[RV]" id="41400">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V]" id="41404">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V]">SparseArray</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#41404" title="scalala.collection.sparse.SparseArray[V]">a</a>.<a href="#38984" title="(f: V =&gt; RV)(implicit evidence$1: ClassManifest[RV], implicit evidence$2: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]">map</a><a href="#40116" title="Manifest[RV]" class="delimiter">(</a><a href="#40114" title="scalala.operators.UnaryOp[V,O,RV]">op</a> <a href="../../operators/UnaryOp.scala.html#40238" title="(t: V)RV">apply</a> <a href="#41417" title="V">_</a><span class="delimiter">)</span>;
  <span class="delimiter">}</span>
  
  <span class="comment">//</span>
  <span class="comment">// BinaryOps</span>
  <span class="comment">//</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, RV, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,RV], implicit s: scalala.scalar.Scalar[V2], implicit dv: scalala.collection.sparse.DefaultArrayValue[RV], implicit cm: ClassManifest[RV])scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],V2,O,scalala.collection.sparse.SparseArray[RV]]" id="37015">BinaryOpSparseArrayScalar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37020">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37021">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="37022">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37023">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,RV]" id="40105">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,RV<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V2]" id="40106">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[RV]" id="40107">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[RV]">DefaultArrayValue</a><span class="delimiter">[</span>RV<span class="delimiter">]</span>, <a title="ClassManifest[RV]" id="40108">cm</a> : <span title="ClassManifest[RV]">ClassManifest</span><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],V2,O,scalala.collection.sparse.SparseArray[RV]]">BinaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, V2, O, SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span>
  = <a href="#41428" title="java.lang.Object with scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],V2,O,scalala.collection.sparse.SparseArray[RV]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],V2,O,scalala.collection.sparse.SparseArray[RV]]" id="41428">BinaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, V2, O, SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41432">opType</a> = <a href="#40105" title="scalala.operators.BinaryOp[V1,V2,O,RV]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: V2)scalala.collection.sparse.SparseArray[RV]" id="41433">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41437">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="V2" id="41438">b</a> : <a href="#37021" title="V2">V2</a><span class="delimiter">)</span> =
      <a href="#41437" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#38984" title="(f: V1 =&gt; RV)(implicit evidence$1: ClassManifest[RV], implicit evidence$2: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]">map</a><a href="#40108" title="ClassManifest[RV]" class="delimiter">(</a><a title="V1" id="41451">v</a> =&gt; <a href="#40105" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41451" title="V1">v</a>, <a href="#41438" title="V2">b</a><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, RV, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,RV], implicit s: scalala.scalar.Scalar[V1], implicit dv: scalala.collection.sparse.DefaultArrayValue[RV], implicit cm: ClassManifest[RV])scalala.operators.BinaryOp[V1,scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="37024">BinaryOpScalarSparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37029">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37030">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="37031">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37032">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,RV]" id="40096">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,RV<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V1]" id="40097">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V1]">Scalar</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[RV]" id="40098">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[RV]">DefaultArrayValue</a><span class="delimiter">[</span>RV<span class="delimiter">]</span>, <a title="ClassManifest[RV]" id="40099">cm</a> : <span title="ClassManifest[RV]">ClassManifest</span><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]">BinaryOp</a><span class="delimiter">[</span>V1, SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O, SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span>
  = <a href="#41463" title="java.lang.Object with scalala.operators.BinaryOp[V1,scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[V1,scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="41463">BinaryOp</a><span class="delimiter">[</span>V1, SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O, SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41467">opType</a> = <a href="#40096" title="scalala.operators.BinaryOp[V1,V2,O,RV]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: V1, b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41468">apply</a><span class="delimiter">(</span><a title="V1" id="41472">a</a> : <a href="#37029" title="V1">V1</a>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41473">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#41473" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#38984" title="(f: V2 =&gt; RV)(implicit evidence$1: ClassManifest[RV], implicit evidence$2: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]">map</a><a href="#40099" title="ClassManifest[RV]" class="delimiter">(</a><a title="V2" id="41486">v</a> =&gt; <a href="#40096" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41472" title="V1">a</a>, <a href="#41486" title="V2">v</a><span class="delimiter">)</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, RV, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,RV], implicit c: scalala.operators.CompatibleShape[V1,V2], implicit dv: scalala.collection.sparse.DefaultArrayValue[RV], implicit cm: ClassManifest[RV])scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="37033">BinaryOpSparseArraySparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37038">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37039">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="37040">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37041">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,RV]" id="40087">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,RV<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40088">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[RV]" id="40089">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[RV]">DefaultArrayValue</a><span class="delimiter">[</span>RV<span class="delimiter">]</span>, <a title="ClassManifest[RV]" id="40090">cm</a> : <span title="ClassManifest[RV]">ClassManifest</span><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]">BinaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span>
  = <a href="#41498" title="java.lang.Object with scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="41498">BinaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41502">opType</a> = <a href="#40087" title="scalala.operators.BinaryOp[V1,V2,O,RV]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41503">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41510">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41511">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// TODO: optimize</span>
      <span title="scalala.collection.sparse.SparseArray[RV]" class="keyword">if</span> <span class="delimiter">(</span><span class="keyword">try</span> <span class="delimiter">{</span> <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41510" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36866" title="=&gt; V1">default</a>, <a href="#41511" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36866" title="=&gt; V2">default</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> <a href="#40089" title="scalala.collection.sparse.DefaultArrayValue[RV]">dv</a>.<a href="#36961" title="=&gt; RV">value</a> <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>; <span class="delimiter">}</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#41505" title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]">outer</a><span class="delimiter">(</span><a href="#41510" title="scalala.collection.sparse.SparseArray[V1]">a</a>, <a href="#41511" title="scalala.collection.sparse.SparseArray[V2]">b</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#41506" title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]">all</a><span class="delimiter">(</span><a href="#41510" title="scalala.collection.sparse.SparseArray[V1]">a</a>, <a href="#41511" title="scalala.collection.sparse.SparseArray[V2]">b</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Where both a and b have non-default values. */</span>
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41504">inner</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41634">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41635">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41634" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41635" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41638">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41634" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41639">aO</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="41640">bO</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41639" title="Int">aO</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41634" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#41640" title="Int">bO</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41635" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span> <a href="#41641" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Int" id="41658">aI</a> = <a href="#41634" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41639" title="Int">aO</a><span class="delimiter">)</span>;
        <span class="keyword">val</span> <a title="Int" id="41659">bI</a> = <a href="#41635" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41640" title="Int">bO</a><span class="delimiter">)</span>;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#41658" title="Int">aI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41659" title="Int">bI</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#41639" title="Int">aO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#41659" title="Int">bI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41658" title="Int">aI</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#41640" title="Int">bO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41658" title="Int">aI</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41634" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36881" title="(offset: Int)V1">valueAt</a><span class="delimiter">(</span><a href="#41639" title="Int">aO</a><span class="delimiter">)</span>, <a href="#41635" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36881" title="(offset: Int)V2">valueAt</a><span class="delimiter">(</span><a href="#41640" title="Int">bO</a><span class="delimiter">)</span><span class="delimiter">)</span>;
          <a href="#41639" title="Int">aO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
          <a href="#41640" title="Int">bO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#41638" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
      
    <span class="comment">/** Where either a or b has non-default values. */</span>
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41505">outer</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41518">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41519">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41522">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a>, scala.math.<span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a>,<a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span><span class="delimiter">)</span>;
  
      <span class="keyword">var</span> <a title="Int" id="41523">aO</a> = <span title="Int(0)" class="int">0</span>;
      <span class="keyword">var</span> <a title="Int" id="41524">bO</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41523" title="Int">aO</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#41524" title="Int">bO</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span> <a href="#41525" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Int" id="41559">aI</a> = <a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41523" title="Int">aO</a><span class="delimiter">)</span>;
        <span class="keyword">val</span> <a title="Int" id="41560">bI</a> = <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41524" title="Int">bO</a><span class="delimiter">)</span>;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#41559" title="Int">aI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41560" title="Int">bI</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41559" title="Int">aI</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36881" title="(offset: Int)V1">valueAt</a><span class="delimiter">(</span><a href="#41523" title="Int">aO</a><span class="delimiter">)</span>, <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36866" title="=&gt; V2">default</a><span class="delimiter">)</span>;
          <a href="#41523" title="Int">aO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#41560" title="Int">bI</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41559" title="Int">aI</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41560" title="Int">bI</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36866" title="=&gt; V1">default</a>, <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36881" title="(offset: Int)V2">valueAt</a><span class="delimiter">(</span><a href="#41524" title="Int">bO</a><span class="delimiter">)</span><span class="delimiter">)</span>;
          <a href="#41524" title="Int">bO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41559" title="Int">aI</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36881" title="(offset: Int)V1">valueAt</a><span class="delimiter">(</span><a href="#41523" title="Int">aO</a><span class="delimiter">)</span>, <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36881" title="(offset: Int)V2">valueAt</a><span class="delimiter">(</span><a href="#41524" title="Int">bO</a><span class="delimiter">)</span><span class="delimiter">)</span>;
          <a href="#41523" title="Int">aO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
          <a href="#41524" title="Int">bO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  
      <span class="comment">// process unpaired remaining from a</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41523" title="Int">aO</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span> <a href="#41526" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Int" id="41591">aI</a> = <a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41523" title="Int">aO</a><span class="delimiter">)</span>;
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41591" title="Int">aI</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36881" title="(offset: Int)V1">valueAt</a><span class="delimiter">(</span><a href="#41523" title="Int">aO</a><span class="delimiter">)</span>, <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36866" title="=&gt; V2">default</a><span class="delimiter">)</span>;
        <a href="#41523" title="Int">aO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
  
      <span class="comment">// process unpaired remaining from b</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41524" title="Int">bO</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span> <a href="#41527" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Int" id="41600">bI</a> = <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41524" title="Int">bO</a><span class="delimiter">)</span>;
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41600" title="Int">bI</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41518" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36866" title="=&gt; V1">default</a>, <a href="#41519" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36881" title="(offset: Int)V2">valueAt</a><span class="delimiter">(</span><a href="#41524" title="Int">bO</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41524" title="Int">bO</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
  
      <a href="#41522" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
    
    <span class="comment">/** All values regardless of whether default or not. */</span>
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41506">all</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41605">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41606">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41605" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41606" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41609">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41605" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a>, <a href="#41605" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
  
      <span class="keyword">var</span> <a title="Int" id="41610">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41610" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41609" title="scalala.collection.sparse.SparseArray[RV]">rv</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41611" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41610" title="Int">i</a><span class="delimiter">)</span> = <a href="#40087" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41610" title="Int">i</a><span class="delimiter">)</span>,<a href="#36875" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41610" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41610" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41609" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, RV, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,RV], implicit c: scalala.operators.CompatibleShape[V1,V2], implicit d2: scalala.collection.sparse.DefaultArrayValue[V2], implicit dv: scalala.collection.sparse.DefaultArrayValue[RV], implicit cm: ClassManifest[RV])scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="37042">BinaryOpSparseArrayArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37047">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37048">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="37049">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37050">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,RV]" id="40076">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,RV<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40077">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span>,
   <a title="scalala.collection.sparse.DefaultArrayValue[V2]" id="40078">d2</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[V2]">DefaultArrayValue</a><span class="delimiter">[</span>V2<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[RV]" id="40079">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[RV]">DefaultArrayValue</a><span class="delimiter">[</span>RV<span class="delimiter">]</span>, <a title="ClassManifest[RV]" id="40080">cm</a> : <span title="ClassManifest[RV]">ClassManifest</span><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O,scalala.collection.sparse.SparseArray[RV]]">BinaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span>
  = <a href="#41690" title="java.lang.Object with scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O,scalala.collection.sparse.SparseArray[RV]]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="41690">BinaryOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>,Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41694">opType</a> = <a href="#40076" title="scalala.operators.BinaryOp[V1,V2,O,RV]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])scalala.collection.sparse.SparseArray[RV]" id="41695">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41702">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41703">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// TODO: optimize</span>
      <a href="#41698" title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])scalala.collection.sparse.SparseArray[RV]">allToSparse</a><span class="delimiter">(</span><a href="#41702" title="scalala.collection.sparse.SparseArray[V1]">a</a>, <a href="#41703" title="Array[V2]">b</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])scalala.collection.sparse.SparseArray[RV]" id="41696">inner</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41748">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41749">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41748" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41749" title="Array[V2]">b</a>.<span title="=&gt; Int">length</span>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41752">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41748" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a>, <a href="#41748" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41753">o</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41753" title="Int">o</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41748" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span> <a href="#41754" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Int" id="41767">i</a> = <a href="#41748" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41753" title="Int">o</a><span class="delimiter">)</span>;
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41767" title="Int">i</a><span class="delimiter">)</span> = <a href="#40076" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41748" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36881" title="(offset: Int)V1">valueAt</a><span class="delimiter">(</span><a href="#41753" title="Int">o</a><span class="delimiter">)</span>, <a href="#41749" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41767" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41753" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41752" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])Array[RV]" id="41697">allToDense</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41778">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41779">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41778" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41779" title="Array[V2]">b</a>.<span title="=&gt; Int">length</span>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Array[RV]" id="41782">rv</a> = <a href="#40080" title="(len: Int)Array[RV]" class="keyword">new</a> Array<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41778" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41783">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41783" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41778" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41784" title="()Unit" class="delimiter">{</a>
        <a href="#41782" title="(i: Int, x: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41783" title="Int">i</a><span class="delimiter">)</span> = <a href="#40076" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41783" title="Int">i</a><span class="delimiter">)</span>, <a href="#41779" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41783" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41783" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41782" title="Array[RV]">rv</a>;
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])scalala.collection.sparse.SparseArray[RV]" id="41698">allToSparse</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41708">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41709">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41708" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41709" title="Array[V2]">b</a>.<span title="=&gt; Int">length</span>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41712">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41708" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a>, <a href="#41708" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41713">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41713" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41708" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41714" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41713" title="Int">i</a><span class="delimiter">)</span> = <a href="#40076" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41713" title="Int">i</a><span class="delimiter">)</span>, <a href="#41709" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41713" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41713" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41712" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, RV, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryOp[V1,V2,O,RV], implicit c: scalala.operators.CompatibleShape[V1,V2], implicit d1: scalala.collection.sparse.DefaultArrayValue[V1], implicit dv: scalala.collection.sparse.DefaultArrayValue[RV], implicit cm: ClassManifest[RV])scalala.operators.BinaryOp[Array[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="37051">BinaryOpArraySparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37056">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37057">V2</a>,<a title="&gt;: Nothing &lt;: Any" id="37058">RV</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37059">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryOp[V1,V2,O,RV]" id="40064">op</a> : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[V1,V2,O,RV]">BinaryOp</a><span class="delimiter">[</span>V1,V2,O,RV<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40065">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span>,
   <a title="scalala.collection.sparse.DefaultArrayValue[V1]" id="40066">d1</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[V1]">DefaultArrayValue</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.DefaultArrayValue[RV]" id="40067">dv</a> : <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[RV]">DefaultArrayValue</a><span class="delimiter">[</span>RV<span class="delimiter">]</span>, <a title="ClassManifest[RV]" id="40068">cm</a> : <span title="ClassManifest[RV]">ClassManifest</span><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryOp.scala.html#11910" title="scalala.operators.BinaryOp[Array[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]">BinaryOp</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>V1<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span>
  = <a href="#41807" title="java.lang.Object with scalala.operators.BinaryOp[Array[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryOp[Array[V1],scalala.collection.sparse.SparseArray[V2],O,scalala.collection.sparse.SparseArray[RV]]" id="41807">BinaryOp</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>V1<span class="delimiter">]</span>,SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>,O,SparseArray<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41811">opType</a> = <a href="#40064" title="scalala.operators.BinaryOp[V1,V2,O,RV]">op</a>.<a href="../../operators/BinaryOp.scala.html#40075" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: Array[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41812">apply</a><span class="delimiter">(</span><a title="Array[V1]" id="41819">a</a> : <span title="Array[V1]">Array</span><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41820">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// TODO: optimize</span>
      <a href="#41815" title="(a: Array[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]">allToSparse</a><span class="delimiter">(</span><a href="#41819" title="Array[V1]">a</a>, <a href="#41820" title="scalala.collection.sparse.SparseArray[V2]">b</a><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(a: Array[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41813">inner</a><span class="delimiter">(</span><a title="Array[V1]" id="41866">a</a> : <span title="Array[V1]">Array</span><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41867">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41866" title="Array[V1]">a</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#41867" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41870">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41867" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <a href="#41867" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41871">o</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41871" title="Int">o</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41867" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36879" title="=&gt; Int">activeLength</a><span class="delimiter">)</span> <a href="#41872" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Int" id="41886">i</a> = <a href="#41867" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36880" title="(offset: Int)Int">indexAt</a><span class="delimiter">(</span><a href="#41871" title="Int">o</a><span class="delimiter">)</span>;
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41886" title="Int">i</a><span class="delimiter">)</span> = <a href="#40064" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41866" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41886" title="Int">i</a><span class="delimiter">)</span>, <a href="#41867" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36881" title="(offset: Int)V2">valueAt</a><span class="delimiter">(</span><a href="#41871" title="Int">o</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41871" title="Int">o</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41870" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(a: Array[V1], b: scalala.collection.sparse.SparseArray[V2])Array[RV]" id="41814">allToDense</a><span class="delimiter">(</span><a title="Array[V1]" id="41897">a</a> : <span title="Array[V1]">Array</span><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41898">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41897" title="Array[V1]">a</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#41898" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="Array[RV]" id="41901">rv</a> = <a href="#40068" title="(len: Int)Array[RV]" class="keyword">new</a> Array<span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41898" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41902">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41902" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41897" title="Array[V1]">a</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#41903" title="()Unit" class="delimiter">{</a>
        <a href="#41901" title="(i: Int, x: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41902" title="Int">i</a><span class="delimiter">)</span> = <a href="#40064" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41897" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41902" title="Int">i</a><span class="delimiter">)</span>, <a href="#36875" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41902" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41902" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41901" title="Array[RV]">rv</a>;
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(a: Array[V1], b: scalala.collection.sparse.SparseArray[V2])scalala.collection.sparse.SparseArray[RV]" id="41815">allToSparse</a><span class="delimiter">(</span><a title="Array[V1]" id="41825">a</a> : <span title="Array[V1]">Array</span><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41826">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41825" title="Array[V1]">a</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#41826" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;arrays have different lengths&quot;)" class="string">&quot;arrays have different lengths&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="scalala.collection.sparse.SparseArray[RV]" id="41829">rv</a> = <a href="#36864" title="(length: Int, initialActiveLength: Int)(implicit m: ClassManifest[RV], implicit d: scalala.collection.sparse.DefaultArrayValue[RV])scalala.collection.sparse.SparseArray[RV]" class="keyword">new</a> <a href="#9548" title="scalala.collection.sparse.SparseArray[RV]">SparseArray</a><span class="delimiter">[</span>RV<span class="delimiter">]</span><span class="delimiter">(</span><a href="#41826" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41830">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41830" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41825" title="Array[V1]">a</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#41831" title="()Unit" class="delimiter">{</a>
        <a href="#36882" title="(i: Int, value: RV)Unit">rv</a><span class="delimiter">(</span><a href="#41830" title="Int">i</a><span class="delimiter">)</span> = <a href="#40064" title="(v1: V1, v2: V2)RV">op</a><span class="delimiter">(</span><a href="#41825" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41830" title="Int">i</a><span class="delimiter">)</span>, <a href="#36875" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41830" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41830" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
      <a href="#41829" title="scalala.collection.sparse.SparseArray[RV]">rv</a>;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Recurse on elements within an array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryUpdateOp[V1,V2,O], implicit c: scalala.operators.CompatibleShape[V1,V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]" id="37060">BinaryUpdateOpRecurseSparseArraySparseArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37064">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37065">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37066">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryUpdateOp[V1,V2,O]" id="40059">op</a> : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[V1,V2,O]">BinaryUpdateOp</a><span class="delimiter">[</span>V1,V2,O<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40060">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span>
  = <a href="#41927" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],scalala.collection.sparse.SparseArray[V2],O]" id="41927">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, SparseArray<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41931">opType</a> = <a href="#40059" title="scalala.operators.BinaryUpdateOp[V1,V2,O]">op</a>.<a href="../../operators/BinaryUpdateOp.scala.html#40053" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: scalala.collection.sparse.SparseArray[V2])Unit" id="41932">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41936">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="scalala.collection.sparse.SparseArray[V2]" id="41937">b</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V2]">SparseArray</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41936" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41937" title="scalala.collection.sparse.SparseArray[V2]">b</a>.<a href="#36962" title="=&gt; Int">length</a>, <span title="java.lang.String(&quot;Inputs must be the same length&quot;)" class="string">&quot;Inputs must be the same length&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41942">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41942" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41936" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41949" title="()Unit" class="delimiter">{</a>
        <a href="#40059" title="(v1: V1, v2: V2)Unit">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41942" title="Int">i</a><span class="delimiter">)</span>,<a href="#36875" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41942" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41942" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Recurse on elements within an array. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryUpdateOp[V1,V2,O], implicit c: scalala.operators.CompatibleShape[V1,V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]" id="37067">BinaryUpdateOpRecurseSparseArrayArray</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37071">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37072">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37073">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryUpdateOp[V1,V2,O]" id="40054">op</a> : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[V1,V2,O]">BinaryUpdateOp</a><span class="delimiter">[</span>V1,V2,O<span class="delimiter">]</span>, <a title="scalala.operators.CompatibleShape[V1,V2]" id="40055">c</a> : <a href="../../operators/Shape.scala.html#10650" title="scalala.operators.CompatibleShape[V1,V2]">CompatibleShape</a><span class="delimiter">[</span>V1,V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span>
  = <a href="#41964" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],Array[V2],O]" id="41964">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, Array<span class="delimiter">[</span>V2<span class="delimiter">]</span>, O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="41968">opType</a> = <a href="#40054" title="scalala.operators.BinaryUpdateOp[V1,V2,O]">op</a>.<a href="../../operators/BinaryUpdateOp.scala.html#40053" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: Array[V2])Unit" id="41969">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="41973">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="Array[V2]" id="41974">b</a> : <span title="Array[V2]">Array</span><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#41973" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <a href="#41974" title="Array[V2]">b</a>.<span title="=&gt; Int">length</span>, <span title="java.lang.String(&quot;Inputs must be the same length&quot;)" class="string">&quot;Inputs must be the same length&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">var</span> <a title="Int" id="41979">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#41979" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#41973" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#41986" title="()Unit" class="delimiter">{</a>
        <a href="#40054" title="(v1: V1, v2: V2)Unit">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#41979" title="Int">i</a><span class="delimiter">)</span>,<a href="#41974" title="(i: Int)V2">b</a><span class="delimiter">(</span><a href="#41979" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#41979" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Recurse on elements. */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[V1, V2, O &lt;: scalala.operators.OpType](implicit op: scalala.operators.BinaryUpdateOp[V1,V2,O], implicit s: scalala.scalar.Scalar[V2])scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]" id="37074">BinaryUpdateOpRecurseSparseArrayScalar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="37078">V1</a>,<a title="&gt;: Nothing &lt;: Any" id="37079">V2</a>,<a title="&gt;: Nothing &lt;: scalala.operators.OpType" id="37080">O</a>&lt;:OpType<span class="delimiter">]</span>
  <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalala.operators.BinaryUpdateOp[V1,V2,O]" id="40048">op</a> : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[V1,V2,O]">BinaryUpdateOp</a><span class="delimiter">[</span>V1,V2,O<span class="delimiter">]</span>, <a title="scalala.scalar.Scalar[V2]" id="40049">s</a> : <a href="../../scalar/Scalar.scala.html#17481" title="scalala.scalar.Scalar[V2]">Scalar</a><span class="delimiter">[</span>V2<span class="delimiter">]</span><span class="delimiter">)</span>
  : <a href="../../operators/BinaryUpdateOp.scala.html#11427" title="scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, V2, O<span class="delimiter">]</span>
  = <a href="#42001" title="java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.operators.BinaryUpdateOp[scalala.collection.sparse.SparseArray[V1],V2,O]" id="42001">BinaryUpdateOp</a><span class="delimiter">[</span>SparseArray<span class="delimiter">[</span>V1<span class="delimiter">]</span>, V2, O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; O" id="42005">opType</a> = <a href="#40048" title="scalala.operators.BinaryUpdateOp[V1,V2,O]">op</a>.<a href="../../operators/BinaryUpdateOp.scala.html#40053" title="=&gt; O">opType</a>;
    <span class="keyword">def</span> <a title="(a: scalala.collection.sparse.SparseArray[V1], b: V2)Unit" id="42006">apply</a><span class="delimiter">(</span><a title="scalala.collection.sparse.SparseArray[V1]" id="42010">a</a> : <a href="#9548" title="scalala.collection.sparse.SparseArray[V1]">SparseArray</a><span class="delimiter">[</span>V1<span class="delimiter">]</span>, <a title="V2" id="42011">b</a> : <a href="#37079" title="V2">V2</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="42016">i</a> = <span title="Int(0)" class="int">0</span>;
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#42016" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#42010" title="scalala.collection.sparse.SparseArray[V1]">a</a>.<a href="#36962" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#42017" title="()Unit" class="delimiter">{</a>
        <a href="#40048" title="(v1: V1, v2: V2)Unit">op</a><span class="delimiter">(</span><a href="#36875" title="(i: Int)V1">a</a><span class="delimiter">(</span><a href="#42016" title="Int">i</a><span class="delimiter">)</span>,<a href="#42011" title="V2">b</a><span class="delimiter">)</span>;
        <a href="#42016" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
<span class="comment">///**</span>
<span class="comment">// * Base class for updating a SparseArray by another SparseArray.  Considers</span>
<span class="comment">// * only non-zeros in the left operand.  Base class of MulInto.</span>
<span class="comment">// *</span>
<span class="comment">// * @author dramage</span>
<span class="comment">// */</span>
<span class="comment">//class SparseArraySparseArrayUpdateLeftNZOp[V1,V2](implicit op : BinaryOp[V1,V2,V1])</span>
<span class="comment">//extends BinaryUpdateOp[SparseArray[V1],SparseArray[V2]] {</span>
<span class="comment">//  def apply(a : SparseArray[V1], b : SparseArray[V2]) = {</span>
<span class="comment">//    if (a.length != b.length) {</span>
<span class="comment">//      throw new DomainException(this.getClass.getSimpleName + &quot;: arrays have different lengths&quot;);</span>
<span class="comment">//    }</span>
<span class="comment">//    var aO = 0;</span>
<span class="comment">//    var bO = 0;</span>
<span class="comment">//    while (aO &lt; a.activeLength &amp;&amp; bO &lt; b.activeLength) {</span>
<span class="comment">//      val aI = a.indexAt(aO);</span>
<span class="comment">//      val bI = b.indexAt(bO);</span>
<span class="comment">//      if (aI &lt; bI) {</span>
<span class="comment">//        a(aI) = op(a.valueAt(aO), b.default);</span>
<span class="comment">//        aO += 1;</span>
<span class="comment">//      } else if (bI &lt; aI) {</span>
<span class="comment">//        bO += 1;</span>
<span class="comment">//      } else {</span>
<span class="comment">//        a(aI) = op(a.valueAt(aO), b.valueAt(bO));</span>
<span class="comment">//        aO += 1;</span>
<span class="comment">//        bO += 1;</span>
<span class="comment">//      }</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    // process unpaired remaining from a</span>
<span class="comment">//    while (aO &lt; a.activeLength) {</span>
<span class="comment">//      val aI = a.indexAt(aO);</span>
<span class="comment">//      a(aI) = op(a.valueAt(aO), b.default);</span>
<span class="comment">//      aO += 1;</span>
<span class="comment">//    }</span>
<span class="comment">//  }</span>
<span class="comment">//}</span>
<span class="comment">//</span>
<span class="comment">///**</span>
<span class="comment">// * Base class for updating a SparseArray by another SparseArray.  Considers</span>
<span class="comment">// * non-zeros in either operand.  Base class of AddInto.</span>
<span class="comment">// *</span>
<span class="comment">// * @author dramage</span>
<span class="comment">// */</span>
<span class="comment">//class SparseArraySparseArrayUpdateEitherNZOp[V1,V2](implicit op : BinaryOp[V1,V2,V1])</span>
<span class="comment">//extends BinaryUpdateOp[SparseArray[V1],SparseArray[V2]] {</span>
<span class="comment">//  def apply(a : SparseArray[V1], b : SparseArray[V2]) = {</span>
<span class="comment">//    if (a.length != b.length) {</span>
<span class="comment">//      throw new DomainException(this.getClass.getSimpleName + &quot;: arrays have different lengths&quot;);</span>
<span class="comment">//    }</span>
<span class="comment">//    </span>
<span class="comment">//    var aO = 0;</span>
<span class="comment">//    var bO = 0;</span>
<span class="comment">//    while (aO &lt; a.activeLength &amp;&amp; bO &lt; b.activeLength) {</span>
<span class="comment">//      val aI = a.indexAt(aO);</span>
<span class="comment">//      val bI = b.indexAt(bO);</span>
<span class="comment">//      if (aI &lt; bI) {</span>
<span class="comment">//        a(aI) = op(a.valueAt(aO), b.default);</span>
<span class="comment">//        aO += 1;</span>
<span class="comment">//      } else if (bI &lt; aI) {</span>
<span class="comment">//        a(bI) = op(a.default, b.valueAt(bO));</span>
<span class="comment">//        bO += 1;</span>
<span class="comment">//      } else {</span>
<span class="comment">//        a(aI) = op(a.valueAt(aO), b.valueAt(bO));</span>
<span class="comment">//        aO += 1;</span>
<span class="comment">//        bO += 1;</span>
<span class="comment">//      }</span>
<span class="comment">//    }</span>
<span class="comment">//    </span>
<span class="comment">//    // process unpaired remaining from a</span>
<span class="comment">//    while (aO &lt; a.activeLength) {</span>
<span class="comment">//      val aI = a.indexAt(aO);</span>
<span class="comment">//      a(aI) = op(a.valueAt(aO), b.default);</span>
<span class="comment">//      aO += 1;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    // process unpaired remaining from b</span>
<span class="comment">//    while (bO &lt; b.activeLength) {</span>
<span class="comment">//      val bI = b.indexAt(bO);</span>
<span class="comment">//      a(bI) = op(a.default, b.valueAt(bO));</span>
<span class="comment">//      bO += 1;</span>
<span class="comment">//    }</span>
<span class="comment">//  }</span>
<span class="comment">//}</span>
<span class="comment">//</span>
<span class="comment">///**</span>
<span class="comment">// * Base class for updating a SparseArray by another SparseArray.  Considers</span>
<span class="comment">// * all values.  Base class of DivInto.</span>
<span class="comment">// *</span>
<span class="comment">// * @author dramage</span>
<span class="comment">// */</span>
<span class="comment">//class SparseArraySparseArrayUpdateAllOp[V1,V2](implicit op : BinaryOp[V1,V2,V1])</span>
<span class="comment">//extends BinaryUpdateOp[SparseArray[V1],SparseArray[V2]] {</span>
<span class="comment">//  def apply(a : SparseArray[V1], b : SparseArray[V2]) = {</span>
<span class="comment">//    if (a.length != b.length) {</span>
<span class="comment">//      throw new DomainException(this.getClass.getSimpleName + &quot;: arrays have different lengths&quot;);</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    /** Optimization: use OuterOp if the default value is itself default */</span>
<span class="comment">//    if (try { op(a.default, b.default) == a.default } catch { case _ =&gt; false; }) {</span>
<span class="comment">//      (new SparseArraySparseArrayUpdateEitherNZOp[V1,V2]).apply(a,b);</span>
<span class="comment">//    } else {</span>
<span class="comment">//      var i = 0;</span>
<span class="comment">//      while (i &lt; a.length) {</span>
<span class="comment">//        a(i) = op(a(i),b(i));</span>
<span class="comment">//        i += 1;</span>
<span class="comment">//      }</span>
<span class="comment">//    }</span>
<span class="comment">//  }</span>
<span class="comment">//}</span>
<span class="comment">//</span>
<span class="comment">//class SparseArrayScalarUpdateOp[V1,B](implicit op : BinaryOp[V1,B,V1], sb : Scalar[B])</span>
<span class="comment">//extends BinaryUpdateOp[SparseArray[V1],B] {</span>
<span class="comment">//  def apply(a : SparseArray[V1], b : B) =</span>
<span class="comment">//    a.transform(v =&gt; op(v, b));</span>
<span class="comment">//}</span>
<span class="delimiter">}</span>


<span class="comment">/**
 * Default value of type T as used by SparseArray.
 * 
 * Note that this is not the same as a general default value for T,
 * say as used by DomainMap, because this value must be null for
 * all references types in order for SparseArray to work as expected.
 * 
 * @author dramage
 */</span>
@serializable
<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait DefaultArrayValue[T] extends java.lang.Object" id="9527">DefaultArrayValue</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="9697">T</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; T" id="36961">value</a> : <a href="#9697" title="T">T</a>;
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue" id="42126">DefaultArrayValue</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.IntDefaultArrayValue" id="42040">IntDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Int]">DefaultArrayValue</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="42076">value</a> = <span title="Int(0)" class="int">0</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.ShortDefaultArrayValue" id="42042">ShortDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Short]">DefaultArrayValue</a><span class="delimiter">[</span>Short<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Short" id="42082">value</a> = <span title="Int(0)" class="int">0</span>.<span title="=&gt; Short">toShort</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.LongDefaultArrayValue" id="42044">LongDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Long]">DefaultArrayValue</a><span class="delimiter">[</span>Long<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="42088">value</a> = <span title="Long(0L)" class="long">0l</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.ByteDefaultArrayValue" id="42046">ByteDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Byte]">DefaultArrayValue</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Byte" id="42094">value</a> = <span title="Int(0)" class="int">0</span>.<span title="=&gt; Byte">toByte</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.CharDefaultArrayValue" id="42048">CharDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Char]">DefaultArrayValue</a><span class="delimiter">[</span>Char<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Char" id="42100">value</a> = <span title="Int(0)" class="int">0</span>.<span title="=&gt; Char">toChar</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.FloatDefaultArrayValue" id="42050">FloatDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Float]">DefaultArrayValue</a><span class="delimiter">[</span>Float<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Float" id="42106">value</a> = <span title="Float(0.0)" class="float">0.0f</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.DoubleDefaultArrayValue" id="42052">DoubleDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Double]">DefaultArrayValue</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Double" id="42112">value</a> = <span title="Double(0.0)" class="double">0.0</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">object</span> <a title="object scalala.collection.sparse.DefaultArrayValue.BooleanDefaultArrayValue" id="42054">BooleanDefaultArrayValue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[Boolean]">DefaultArrayValue</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="42118">value</a> = <span title="Boolean(false)" class="keyword">false</span>;
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="refDefault extends java.lang.Object with scalala.collection.sparse.DefaultArrayValue[AnyRef]" id="42056">refDefault</a> = <a href="#42062" title="java.lang.Object with scalala.collection.sparse.DefaultArrayValue[AnyRef]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalala.collection.sparse.DefaultArrayValue[AnyRef]" id="42062">DefaultArrayValue</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; AnyRef" id="42064">value</a> : <span title="AnyRef">AnyRef</span> = <span title="Null(null)" class="keyword">null</span>;
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef]=&gt; scalala.collection.sparse.DefaultArrayValue[T]" id="42058">ObjectDefaultArrayValue</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="42060">T</a>&lt;:AnyRef<span class="delimiter">]</span> =
    <a href="#42056" title="=&gt; java.lang.Object with scalala.collection.sparse.DefaultArrayValue[AnyRef]">refDefault</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scalala.collection.sparse.DefaultArrayValue[T]" class="delimiter">[</span><a href="#9527" title="scalala.collection.sparse.DefaultArrayValue[T]">DefaultArrayValue</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>;
<span class="delimiter">}</span>


        </pre>
    </body>
</html>