<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>util/net/liftweb/util/BindPlus.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2007-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb 
<span class="keyword">package</span> util 

<span class="keyword">import</span> scala.xml.<span class="delimiter">{</span>NodeSeq, PrefixedAttribute, MetaData<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<span class="delimiter">{</span>bind, BindParam, FuncBindParam, TheBindParam<span class="delimiter">}</span>
<span class="keyword">import</span> common._

<span class="keyword">object</span> <a title="object net.liftweb.util.BindPlus" id="13168">BindPlus</a> <span title="ScalaObject" class="delimiter">{</span>
  
  <span class="keyword">class</span> <a title="class BindableNodeSeq extends java.lang.Object with ScalaObject" id="195416">BindableNodeSeq</a><a href="#195416" title="ScalaObject" class="delimiter">(</a><a title="scala.xml.NodeSeq" id="282923">ns</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(prefix: String, bindParams: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq" id="196483">bind</a><span class="delimiter">(</span><a title="String" id="196519">prefix</a>: <span title="String">String</span>, <a title="net.liftweb.util.Helpers.BindParam*" id="196520">bindParams</a>: <span title="net.liftweb.util.Helpers.BindParam*">BindParam</span>*<span class="delimiter">)</span> = <a href="Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><a href="#196519" title="String">prefix</a>, <a href="#282923" title="scala.xml.NodeSeq">ns</a>, <a href="#196520" title="net.liftweb.util.Helpers.BindParam*">bindParams</a>: _*<span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(prefix: String, nodeFailureXform: net.liftweb.common.Box[scala.xml.NodeSeq =&gt; scala.xml.NodeSeq], paramFailureXform: net.liftweb.common.Box[scala.xml.PrefixedAttribute =&gt; scala.xml.MetaData], bindParams: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq" id="196484">bind</a><span class="delimiter">(</span><a title="String" id="196489">prefix</a>: <span title="String">String</span>, <a title="net.liftweb.common.Box[scala.xml.NodeSeq =&gt; scala.xml.NodeSeq]" id="196490">nodeFailureXform</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq =&gt; scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq =&gt; NodeSeq<span class="delimiter">]</span>,
             <a title="net.liftweb.common.Box[scala.xml.PrefixedAttribute =&gt; scala.xml.MetaData]" id="196491">paramFailureXform</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.PrefixedAttribute =&gt; scala.xml.MetaData]">Box</a><span class="delimiter">[</span>PrefixedAttribute =&gt; MetaData<span class="delimiter">]</span>, <a title="net.liftweb.util.Helpers.BindParam*" id="196492">bindParams</a>: <span title="net.liftweb.util.Helpers.BindParam*">BindParam</span>*<span class="delimiter">)</span> =
      <a href="Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="BindHelpers.scala.html#49009" title="(namespace: String, nodeFailureXform: net.liftweb.common.Box[scala.xml.NodeSeq =&gt; scala.xml.NodeSeq], paramFailureXform: net.liftweb.common.Box[scala.xml.PrefixedAttribute =&gt; scala.xml.MetaData], xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><a href="#196489" title="String">prefix</a>, <a href="#196490" title="net.liftweb.common.Box[scala.xml.NodeSeq =&gt; scala.xml.NodeSeq]">nodeFailureXform</a>, <a href="#196491" title="net.liftweb.common.Box[scala.xml.PrefixedAttribute =&gt; scala.xml.MetaData]">paramFailureXform</a>, <a href="#282923" title="scala.xml.NodeSeq">ns</a>, <a href="#196492" title="net.liftweb.util.Helpers.BindParam*">bindParams</a>: _*<span class="delimiter">)</span>
      
    <span class="keyword">def</span> <a title="(prefix: String, choices: Seq[String])(choice: (Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq))scala.xml.NodeSeq" id="196485">bindSwitch</a><span class="delimiter">(</span><a title="String" id="282924">prefix</a>: <span title="String">String</span>, <a title="Seq[String]" id="282925">choices</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)" id="282926">choice</a>: <span title="(Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)" class="delimiter">(</span>Int, NodeSeq=&gt;NodeSeq<span class="delimiter">)</span><span class="delimiter">)</span> =
      <a href="#13168" title="object net.liftweb.util.BindPlus">BindPlus</a>.<a href="#195418" title="(prefix: String, xml: scala.xml.NodeSeq, choices: Seq[String])(choice: (Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq))scala.xml.NodeSeq">bindSwitch</a><span class="delimiter">(</span><a href="#282924" title="String">prefix</a>, <a href="#282923" title="scala.xml.NodeSeq">ns</a>, <a href="#282925" title="Seq[String]">choices</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#282926" title="(Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)">choice</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Can be used to support a bind-chaining syntax, for use with multiple prefixes.
   * For example:
   * &lt;pre&gt;
   *  xhtml.bind(&quot;prefix1&quot;,
   *    bindParam1,
   *    bindParam2
   *  ).bind(&quot;prefix2&quot;,
   *    bindParam1,
   *    bindParam2
   *  )&lt;/pre&gt;
   * Where bindParam can be the usual arrow -&gt; syntax or any BindParam.
   * Can also be used with the bind overload that takes nodeFailureXform
   * and paramFailureXform arguments, and with bindSwitch.
   * Just import this method, or Util._
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.BindPlus.nodeSeqToBindable : (ns: scala.xml.NodeSeq)net.liftweb.util.BindPlus.BindableNodeSeq" id="195417">nodeSeqToBindable</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="195611">ns</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <a href="#195416" title="net.liftweb.util.BindPlus.BindableNodeSeq">BindableNodeSeq</a> = <span title="net.liftweb.util.BindPlus.BindableNodeSeq" class="keyword">new</span> <a href="#195416" title="net.liftweb.util.BindPlus.BindableNodeSeq">BindableNodeSeq</a><span class="delimiter">(</span><a href="#195611" title="scala.xml.NodeSeq">ns</a><span class="delimiter">)</span>
  
  
  <span class="comment">/**
    Allows one to have parts of the view that are alternatives to each other.
    For example:
    &lt;pre&gt;
      bindSwitch(&quot;prefix&quot;, xhtml, List(&quot;concise&quot;,&quot;detailed&quot;)) {
        if(isInDetailedMode)
          1 -&gt; {(xhtml: NodeSeq) =&gt; detailedBind(xhtml) }
        else
          0 -&gt; {(xhtml: NodeSeq) =&gt; conciseBind(xhtml) }
      }
    &lt;/pre&gt;
    Note that the final parameter is not a function returning a tuple but an actual tuple.
    In this example, curly braces denote an expression that evaluates to the tuple
    which is then passed to bindSwitch.
    You can then include in the view &amp;lt;prefix:concise&amp;gt; and lt;prefix:detailed&amp;gt;
    and only one will be displayed and bound, while the other one will not be outputted.
    Note that this method is also available with the chaining syntax. See nodeSeqToBindable.
    @param prefix The xml prefix of the elements that are alternatives to each other
    @param xml The xml markup containing the alternate view elements
    @param choices A Seq[String] of the labels of the elements that are alternatives to each other
    @param choice A Pair/Tuple2 containing the index in the Seq[String] to use, and a NodeSeq=&gt;NodeSeq to process that element.
  */</span>
  <span class="keyword">def</span> <a title="(prefix: String, xml: scala.xml.NodeSeq, choices: Seq[String])(choice: (Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq))scala.xml.NodeSeq" id="195418">bindSwitch</a><span class="delimiter">(</span><a title="String" id="282929">prefix</a>: <span title="String">String</span>, <a title="scala.xml.NodeSeq" id="282930">xml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span>, <a title="Seq[String]" id="282931">choices</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)" id="282932">choice</a>: <span title="(Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)" class="delimiter">(</span>Int, NodeSeq=&gt;NodeSeq<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="282935">index</a> = <span title="Int(0)" class="int">0</span>
    <a href="BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><a href="#282929" title="String">prefix</a>, <a href="#282930" title="scala.xml.NodeSeq">xml</a>,
         <a href="#282931" title="Seq[String]">choices</a> <span title="(f: String =&gt; (String, scala.xml.NodeSeq with Int =&gt; scala.xml.NodeSeq) with net.liftweb.util.Helpers.BindParam)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],(String, scala.xml.NodeSeq with Int =&gt; scala.xml.NodeSeq) with net.liftweb.util.Helpers.BindParam,Seq[(String, scala.xml.NodeSeq with Int =&gt; scala.xml.NodeSeq) with net.liftweb.util.Helpers.BindParam]])Seq[(String, scala.xml.NodeSeq with Int =&gt; scala.xml.NodeSeq) with net.liftweb.util.Helpers.BindParam]">map</span> <span class="delimiter">{</span><a title="String" id="282968">c</a> =&gt;
           <a href="#282935" title="Int">index</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
           <a href="#282932" title="(Int, scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)">choice</a> <span title="&lt;none&gt; extends (String, scala.xml.NodeSeq with Int =&gt; scala.xml.NodeSeq) with net.liftweb.util.Helpers.BindParam" class="keyword">match</span> <span class="delimiter">{</span>
             <span class="keyword">case</span> <span title="net.liftweb.util.Helpers.FuncBindParam" class="delimiter">(</span><a title="Int" id="282977">i</a>, <a title="scala.xml.NodeSeq =&gt; scala.xml.NodeSeq" id="282978">fn</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#282977" title="Int">i</a> <span title="(x: Int)Boolean">==</span> <a href="#282935" title="Int">index</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span> =&gt; <a href="BindHelpers.scala.html#149798" title="(name: String, value: scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)net.liftweb.util.Helpers.FuncBindParam">FuncBindParam</a><span class="delimiter">(</span><a href="#282968" title="String">c</a>, <a href="#282978" title="scala.xml.NodeSeq =&gt; scala.xml.NodeSeq">fn</a><span class="delimiter">)</span>
             <span class="keyword">case</span> <span title="net.liftweb.util.Helpers.TheBindParam">_</span> =&gt; <a href="BindHelpers.scala.html#149822" title="(name: String, value: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">TheBindParam</a><span class="delimiter">(</span><a href="#282968" title="String">c</a>, <span title="object scala.xml.NodeSeq">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span><span class="delimiter">)</span>
           <span class="delimiter">}</span>
         <span class="delimiter">}</span> : _*
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>