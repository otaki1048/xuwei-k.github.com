<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>util/net/liftweb/util/TimeHelpers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2006-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> util

<span class="keyword">import</span> java.text.SimpleDateFormat
<span class="keyword">import</span> java.util.<span class="delimiter">{</span>TimeZone, Calendar, Date, Locale<span class="delimiter">}</span>
<span class="keyword">import</span> common._
<span class="keyword">import</span> org.joda.time.<span class="delimiter">{</span>DateTime, Duration, Period, PeriodType<span class="delimiter">}</span>

<span class="comment">/**
 * The TimeHelpers object extends the TimeHelpers. It can be imported to access all of the trait functions.
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.util.TimeHelpers" id="13710">TimeHelpers</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#13712" title="net.liftweb.util.TimeHelpers">TimeHelpers</a> <span class="keyword">with</span> <a href="ControlHelpers.scala.html#13217" title="net.liftweb.util.ControlHelpers">ControlHelpers</a> <span class="keyword">with</span> <a href="ClassHelpers.scala.html#13198" title="net.liftweb.util.ClassHelpers">ClassHelpers</a>

<span class="comment">/**
 * The TimeHelpers trait provide functions to create TimeSpans (an object representing an amount of time), to manage date formats
 * or general utility functions (get the date for today, get year/month/day number,...)
 */</span>
<span class="keyword">trait</span> <a title="trait TimeHelpers extends java.lang.Object with ScalaObject" id="13712">TimeHelpers</a> <span title="ScalaObject" class="delimiter">{</span> self: ControlHelpers =&gt;
  <span class="comment">// Logger must be lazy, since we cannot instantiate until after boot is complete</span>
  <span class="keyword">private</span>  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Logger" id="48773">logger</a> = <a href="../../../../common/net/liftweb/common/Logging.scala.html#31889" title="(cls: Class[_])net.liftweb.common.Logger">Logger</a><span class="delimiter">(</span>classOf<span title="java.lang.Class[net.liftweb.util.TimeHelpers](classOf[net.liftweb.util.TimeHelpers])" class="delimiter">[</span>TimeHelpers<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/** private variable allowing the access to all TimeHelpers functions from inside the TimeSpan class */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="&lt;none&gt; extends net.liftweb.util.TimeHelpers with net.liftweb.util.ControlHelpers" id="48774">outer</a> = <a href="#13712" title="&lt;none&gt; extends net.liftweb.util.TimeHelpers with net.liftweb.util.ControlHelpers" class="keyword">this</a>

  <span class="comment">/** transforms a long to a TimeSpanBuilder object. Usage: 3L.seconds returns a TimeSpan of 3000L millis  */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.longToTimeSpanBuilder : (in: Long)TimeHelpers.this.TimeSpanBuilder" id="48776">longToTimeSpanBuilder</a><span class="delimiter">(</span><a title="Long" id="56583">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#320782" title="TimeHelpers.this.TimeSpanBuilder">TimeSpanBuilder</a> = <a href="#320782" title="(len: Long)TimeHelpers.this.TimeSpanBuilder">TimeSpanBuilder</a><span class="delimiter">(</span><a href="#56583" title="Long">in</a><span class="delimiter">)</span>

  <span class="comment">/** transforms an int to a TimeSpanBuilder object. Usage: 3.seconds returns a TimeSpan of 3000L millis  */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.intToTimeSpanBuilder : (in: Int)TimeHelpers.this.TimeSpanBuilder" id="48777">intToTimeSpanBuilder</a><span class="delimiter">(</span><a title="Int" id="56581">in</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#320782" title="TimeHelpers.this.TimeSpanBuilder">TimeSpanBuilder</a> = <a href="#320782" title="(len: Long)TimeHelpers.this.TimeSpanBuilder">TimeSpanBuilder</a><span class="delimiter">(</span><a href="#56581" title="=&gt; Long">in</a><span class="delimiter">)</span>

  <span class="comment">/** transforms a long to a TimeSpan object. Usage: 3000L returns a TimeSpan of 3000L millis  */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.longToTimeSpan : (in: Long)TimeHelpers.this.TimeSpan" id="48778">longToTimeSpan</a><span class="delimiter">(</span><a title="Long" id="56579">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> = <a href="#188664" title="(in: Long)TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#56579" title="Long">in</a><span class="delimiter">)</span>

  <span class="comment">/** transforms an int to a TimeSpan object. Usage: 3000 returns a TimeSpan of 3000L millis  */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.intToTimeSpan : (in: Int)TimeHelpers.this.TimeSpan" id="48779">intToTimeSpan</a><span class="delimiter">(</span><a title="Int" id="56577">in</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> = <a href="#188664" title="(in: Long)TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#56577" title="=&gt; Long">in</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.durToPeriod : (dur: org.joda.time.Duration)org.joda.time.Period" id="48780">durToPeriod</a><span class="delimiter">(</span><a title="org.joda.time.Duration" id="168713">dur</a>: <span title="org.joda.time.Duration">Duration</span><span class="delimiter">)</span>: <span title="org.joda.time.Period">Period</span> = <a href="#168713" title="org.joda.time.Duration">dur</a>.<span title="(x$1: org.joda.time.PeriodType)org.joda.time.Period">toPeriod</span><span class="delimiter">(</span><span title="object org.joda.time.PeriodType">PeriodType</span>.<span title="()org.joda.time.PeriodType">standard</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** class building TimeSpans given an amount (len) and a method specify the time unit  */</span>
  case <span class="keyword">class</span> <a title="class TimeSpanBuilder extends java.lang.Object with ScalaObject with Product with Serializable" id="320782">TimeSpanBuilder</a><a href="#320782" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Long" id="320784">len</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58471">seconds</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="org.joda.time.Period" class="keyword">new</span> <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span>.<span title="(x$1: Int)org.joda.time.Period">plusSeconds</span><span class="delimiter">(</span><a href="#320784" title="=&gt; Long">len</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58472">second</a> = <a href="#58471" title="=&gt; TimeHelpers.this.TimeSpan">seconds</a>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58473">minutes</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="org.joda.time.Period" class="keyword">new</span> <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span>.<span title="(x$1: Int)org.joda.time.Period">plusMinutes</span><span class="delimiter">(</span><a href="#320784" title="=&gt; Long">len</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58474">minute</a> = <a href="#58473" title="=&gt; TimeHelpers.this.TimeSpan">minutes</a>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58475">hours</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span title="object org.joda.time.Duration">Duration</span>.<span title="(x$1: Long)org.joda.time.Duration">standardHours</span><a href="#48780" title="implicit net.liftweb.util.TimeHelpers.durToPeriod : (dur: org.joda.time.Duration)org.joda.time.Period" class="delimiter">(</a><a href="#320784" title="=&gt; Long">len</a><span class="delimiter">)</span>: <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58476">hour</a> = <a href="#58475" title="=&gt; TimeHelpers.this.TimeSpan">hours</a>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58477">days</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span title="object org.joda.time.Duration">Duration</span>.<span title="(x$1: Long)org.joda.time.Duration">standardDays</span><a href="#48780" title="implicit net.liftweb.util.TimeHelpers.durToPeriod : (dur: org.joda.time.Duration)org.joda.time.Period" class="delimiter">(</a><a href="#320784" title="=&gt; Long">len</a><span class="delimiter">)</span>: <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58478">day</a> = <a href="#58477" title="=&gt; TimeHelpers.this.TimeSpan">days</a>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58479">weeks</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span title="object org.joda.time.Duration">Duration</span>.<span title="(x$1: Long)org.joda.time.Duration">standardDays</span><a href="#48780" title="implicit net.liftweb.util.TimeHelpers.durToPeriod : (dur: org.joda.time.Duration)org.joda.time.Period" class="delimiter">(</a><a href="#320784" title="=&gt; Long">len</a> <span title="(x: Long)Long">*</span> <span title="Long(7L)" class="long">7L</span><span class="delimiter">)</span>: <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58480">week</a> = <a href="#58479" title="=&gt; TimeHelpers.this.TimeSpan">weeks</a>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58481">months</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="org.joda.time.Period" class="keyword">new</span> <span title="org.joda.time.Period">Period</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: Int)org.joda.time.Period">plusMonths</span><span class="delimiter">(</span><a href="#320784" title="=&gt; Long">len</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58482">month</a> = <a href="#58481" title="=&gt; TimeHelpers.this.TimeSpan">months</a>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58483">years</a> = <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="org.joda.time.Period" class="keyword">new</span> <span title="org.joda.time.Period">Period</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: Int)org.joda.time.Period">plusYears</span><span class="delimiter">(</span><a href="#320784" title="=&gt; Long">len</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58484">year</a> = <a href="#58483" title="=&gt; TimeHelpers.this.TimeSpan">years</a>
  <span class="delimiter">}</span>

  <span class="comment">/*
  /**
   * transforms a TimeSpan to a date by converting the TimeSpan expressed as millis and creating
   * a Date lasting that number of millis from the Epoch time (see the documentation for java.util.Date)
   */
  implicit def timeSpanToDate(in: TimeSpan): Date = in.date

  /** transforms a TimeSpan to its long value as millis */
  implicit def timeSpanToLong(in: TimeSpan): Long = in.millis
  */</span>

  <span class="comment">/**
   * The TimeSpan class represents an amount of time.
   * It can be translated to a date with the date method. In that case, the number of millis seconds will be used to create a Date
   * object starting from the Epoch time (see the documentation for java.util.Date)
   */</span>
  <span class="keyword">class</span> <a title="class TimeSpan extends java.lang.Object with net.liftweb.util.ConvertableToDate with ScalaObject" id="48784">TimeSpan</a><a href="#48784" title="ScalaObject" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="Either[org.joda.time.DateTime,org.joda.time.Period]" id="188652">dt</a>: <span title="Either[org.joda.time.DateTime,org.joda.time.Period]">Either</span><span class="delimiter">[</span>DateTime, Period<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#13713" title="net.liftweb.util.ConvertableToDate">ConvertableToDate</a> <span class="delimiter">{</span>
    <span class="comment">/** @return a Date as the amount of time represented by the TimeSpan after the Epoch date */</span>

    <span class="keyword">def</span> <a title="(ms: Long)TimeHelpers.this.TimeSpan" id="58447" class="keyword">this</a><span class="delimiter">(</span><a title="Long" id="188651">ms</a>: <span title="Long">Long</span><span class="delimiter">)</span> = 
      <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="&lt;none&gt; extends Product with Serializable with Either[org.joda.time.DateTime,org.joda.time.Period]" class="keyword">if</span> <span class="delimiter">(</span><a href="#188651" title="Long">ms</a> <span title="(x: Long)Boolean">&lt;</span> <span class="long">52L</span> * <span class="long">7L</span> * <span class="long">24L</span> * <span class="long">60L</span> * <span class="long">60L</span> <span title="Long(31449600000L)">*</span> <span class="long">1000L</span><span class="delimiter">)</span> <span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><span title="(x$1: Long)org.joda.time.Period" class="keyword">new</span> <span title="org.joda.time.Period">Period</span><span class="delimiter">(</span><a href="#188651" title="Long">ms</a><span class="delimiter">)</span><span class="delimiter">)</span>
           <span class="keyword">else</span> <span title="(a: org.joda.time.DateTime)Left[org.joda.time.DateTime,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: Long)org.joda.time.DateTime" class="keyword">new</span> <span title="org.joda.time.DateTime">DateTime</span><span class="delimiter">(</span><a href="#188651" title="Long">ms</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="58448">date</a>: <span title="java.util.Date">Date</span> = <a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="java.util.Date" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.util.Date">Left</span><span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321014">datetime</a><span class="delimiter">)</span> =&gt; <span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#321014" title="org.joda.time.DateTime">datetime</a>.<span title="()Long">getMillis</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="java.util.Date">_</span> =&gt; <span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#58452" title="=&gt; Long">millis</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Convert to a Date
     */</span>
    <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="58449">toDate</a>: <span title="java.util.Date">Date</span> = <a href="#58448" title="=&gt; java.util.Date">date</a>
    
    <span class="comment">/**
     * Convert to a JodaTime DateTime
     */</span>
    <span class="keyword">def</span> <a title="=&gt; org.joda.time.DateTime" id="58450">toDateTime</a> = <a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="org.joda.time.DateTime" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="org.joda.time.DateTime">Left</span><span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321029">datetime</a><span class="delimiter">)</span> =&gt; <a href="#321029" title="org.joda.time.DateTime">datetime</a>
      <span class="keyword">case</span> <span title="org.joda.time.DateTime">_</span> =&gt; <span title="(x$1: Long)org.joda.time.DateTime" class="keyword">new</span> <span title="org.joda.time.DateTime">DateTime</span><span class="delimiter">(</span><a href="#58452" title="=&gt; Long">millis</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Long" id="58451">toMillis</a> = <a href="#58452" title="=&gt; Long">millis</a>

    <span class="keyword">def</span> <a title="=&gt; Long" id="58452">millis</a> = <a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="Long" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Long">Left</span><span class="delimiter">(</span><a title="org.joda.time.DateTime" id="317248">datetime</a><span class="delimiter">)</span> =&gt; <a href="#317248" title="org.joda.time.DateTime">datetime</a>.<span title="()Long">getMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Long">Right</span><span class="delimiter">(</span><a title="org.joda.time.Period" id="317250">duration</a><span class="delimiter">)</span> =&gt; <a href="#317250" title="org.joda.time.Period">duration</a>.<span title="()org.joda.time.Duration">toStandardDuration</span>.<span title="()Long">getMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    

    <span class="comment">/** @return a Date as the amount of time represented by the TimeSpan after now */</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58453">later</a>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> = <a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="TimeHelpers.this.TimeSpan" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan">Right</span><span class="delimiter">(</span><a title="org.joda.time.Period" id="321040">duration</a><span class="delimiter">)</span> =&gt; <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(a: org.joda.time.DateTime)Left[org.joda.time.DateTime,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: Long)org.joda.time.DateTime" class="keyword">new</span> <span title="org.joda.time.DateTime">DateTime</span><span class="delimiter">(</span><a href="#48774" title="=&gt; net.liftweb.util.TimeHelpers with net.liftweb.util.ControlHelpers">outer</a>.<a href="#48788" title="=&gt; Long">millis</a><span class="delimiter">)</span>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.DateTime">plus</span><span class="delimiter">(</span><a href="#321040" title="org.joda.time.Period">duration</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan">_</span> =&gt; <a href="#188664" title="(in: Long)TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#58452" title="=&gt; Long">millis</a> <span title="(x: Long)Long">+</span> <a href="#48774" title="=&gt; net.liftweb.util.TimeHelpers with net.liftweb.util.ControlHelpers">outer</a>.<a href="#48788" title="=&gt; Long">millis</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** @return a Date as the amount of time represented by the TimeSpan before now */</span>
    <span class="keyword">def</span> <a title="=&gt; TimeHelpers.this.TimeSpan" id="58454">ago</a>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> = <a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="TimeHelpers.this.TimeSpan" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan">Right</span><span class="delimiter">(</span><a title="org.joda.time.Period" id="321066">duration</a><span class="delimiter">)</span> =&gt; <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(a: org.joda.time.DateTime)Left[org.joda.time.DateTime,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: Long)org.joda.time.DateTime" class="keyword">new</span> <span title="org.joda.time.DateTime">DateTime</span><span class="delimiter">(</span><a href="#48774" title="=&gt; net.liftweb.util.TimeHelpers with net.liftweb.util.ControlHelpers">outer</a>.<a href="#48788" title="=&gt; Long">millis</a><span class="delimiter">)</span>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.DateTime">minus</span><span class="delimiter">(</span><a href="#321066" title="org.joda.time.Period">duration</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan">_</span> =&gt; <a href="#188664" title="(in: Long)TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#48774" title="=&gt; net.liftweb.util.TimeHelpers with net.liftweb.util.ControlHelpers">outer</a>.<a href="#48788" title="=&gt; Long">millis</a> <span title="(x: Long)Long">-</span> <a href="#58452" title="=&gt; Long">millis</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="58455">noTime</a>: <span title="java.util.Date">Date</span> = <span title="TimeHelpers.this.DateExtension" class="keyword">new</span> <a href="#48795" title="TimeHelpers.this.DateExtension">DateExtension</a><span class="delimiter">(</span><a href="#188672" title="implicit net.liftweb.util.ConvertableToDate.toDate : (in: net.liftweb.util.ConvertableToDate)java.util.Date" class="keyword">this</a><span class="delimiter">)</span>.<a href="#56503" title="=&gt; java.util.Date">noTime</a>

    <span class="comment">/** @return a TimeSpan representing the addition of 2 TimeSpans */</span>
    <span class="keyword">def</span> <a title="[B](in: B)(implicit f: B =&gt; TimeHelpers.this.TimeSpan)TimeHelpers.this.TimeSpan" id="58456">+</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="58458">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="B" id="321103">in</a>: <a href="#58458" title="B">B</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="B =&gt; TimeHelpers.this.TimeSpan" id="321104">f</a>: B =&gt; TimeSpan<span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =
      <span title="(_1: Either[org.joda.time.DateTime,org.joda.time.Period], _2: Either[org.joda.time.DateTime,org.joda.time.Period])(Either[org.joda.time.DateTime,org.joda.time.Period], Either[org.joda.time.DateTime,org.joda.time.Period])" class="delimiter">(</span><a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a>, <a href="#321104" title="(v1: B)TimeHelpers.this.TimeSpan">f</a><span class="delimiter">(</span><a href="#321103" title="B">in</a><span class="delimiter">)</span>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a><span class="delimiter">)</span> <span title="TimeHelpers.this.TimeSpan" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321118">p1</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321120">p2</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#321118" title="org.joda.time.Period">p1</a>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.Period">plus</span><a href="#188669" title="implicit net.liftweb.util.TimeHelpers.TimeSpan.periodToTS : (in: org.joda.time.Period)TimeHelpers.this.TimeSpan" class="delimiter">(</a><a href="#321120" title="org.joda.time.Period">p2</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321124">date</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321126">duration</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#321124" title="org.joda.time.DateTime">date</a>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.DateTime">plus</span><a href="#188667" title="implicit net.liftweb.util.TimeHelpers.TimeSpan.dateTimeToTS : (in: org.joda.time.DateTime)TimeHelpers.this.TimeSpan" class="delimiter">(</a><a href="#321126" title="org.joda.time.Period">duration</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321134">duration</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321136">date</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#321136" title="org.joda.time.DateTime">date</a>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.DateTime">plus</span><a href="#188667" title="implicit net.liftweb.util.TimeHelpers.TimeSpan.dateTimeToTS : (in: org.joda.time.DateTime)TimeHelpers.this.TimeSpan" class="delimiter">(</a><a href="#321134" title="org.joda.time.Period">duration</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan">_</span> =&gt; <a href="#188664" title="(in: Long)TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#58452" title="=&gt; Long">millis</a> <span title="(x: Long)Long">+</span> <a href="#321104" title="(v1: B)TimeHelpers.this.TimeSpan">f</a><span class="delimiter">(</span><a href="#321103" title="B">in</a><span class="delimiter">)</span>.<a href="#58452" title="=&gt; Long">millis</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/** @return a TimeSpan representing the addition of 2 TimeSpans */</span>
    <span class="keyword">def</span> <a title="[B](in: B)(implicit f: B =&gt; TimeHelpers.this.TimeSpan)TimeHelpers.this.TimeSpan" id="58459">plus</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="58461">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="B" id="321146">in</a>: <a href="#58461" title="B">B</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="B =&gt; TimeHelpers.this.TimeSpan" id="321147">f</a>: B =&gt; TimeSpan<span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> = <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#58456" title="(in: B)(implicit f: B =&gt; TimeHelpers.this.TimeSpan)TimeHelpers.this.TimeSpan">+</a><span class="delimiter">(</span><a href="#321146" title="B">in</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#321147" title="B =&gt; TimeHelpers.this.TimeSpan">f</a><span class="delimiter">)</span>

    <span class="comment">/** @return a TimeSpan representing the substraction of 2 TimeSpans */</span>
    <span class="keyword">def</span> <a title="[B](in: B)(implicit f: B =&gt; TimeHelpers.this.TimeSpan)TimeHelpers.this.TimeSpan" id="58462">-</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="58464">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="B" id="321158">in</a>: <a href="#58464" title="B">B</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="B =&gt; TimeHelpers.this.TimeSpan" id="321159">f</a>: B =&gt; TimeSpan<span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =
      <span title="(_1: Either[org.joda.time.DateTime,org.joda.time.Period], _2: Either[org.joda.time.DateTime,org.joda.time.Period])(Either[org.joda.time.DateTime,org.joda.time.Period], Either[org.joda.time.DateTime,org.joda.time.Period])" class="delimiter">(</span><a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a>, <a href="#321159" title="(v1: B)TimeHelpers.this.TimeSpan">f</a><span class="delimiter">(</span><a href="#321158" title="B">in</a><span class="delimiter">)</span>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a><span class="delimiter">)</span> <span title="TimeHelpers.this.TimeSpan" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321173">p1</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321175">p2</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#321173" title="org.joda.time.Period">p1</a>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.Period">minus</span><a href="#188669" title="implicit net.liftweb.util.TimeHelpers.TimeSpan.periodToTS : (in: org.joda.time.Period)TimeHelpers.this.TimeSpan" class="delimiter">(</a><a href="#321175" title="org.joda.time.Period">p2</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321179">date</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321181">duration</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#321179" title="org.joda.time.DateTime">date</a>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.DateTime">minus</span><a href="#188667" title="implicit net.liftweb.util.TimeHelpers.TimeSpan.dateTimeToTS : (in: org.joda.time.DateTime)TimeHelpers.this.TimeSpan" class="delimiter">(</a><a href="#321181" title="org.joda.time.Period">duration</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="org.joda.time.Period" id="321189">duration</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321191">date</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#321191" title="org.joda.time.DateTime">date</a>.<span title="(x$1: org.joda.time.ReadablePeriod)org.joda.time.DateTime">minus</span><a href="#188667" title="implicit net.liftweb.util.TimeHelpers.TimeSpan.dateTimeToTS : (in: org.joda.time.DateTime)TimeHelpers.this.TimeSpan" class="delimiter">(</a><a href="#321189" title="org.joda.time.Period">duration</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="TimeHelpers.this.TimeSpan">_</span> =&gt; <a href="#188664" title="(in: Long)TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#58452" title="=&gt; Long">millis</a> <span title="(x: Long)Long">-</span> <a href="#321159" title="(v1: B)TimeHelpers.this.TimeSpan">f</a><span class="delimiter">(</span><a href="#321158" title="B">in</a><span class="delimiter">)</span>.<a href="#58452" title="=&gt; Long">millis</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/** override the equals method so that TimeSpans can be compared to long, int and TimeSpan */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(cmp: Any)Boolean" id="58465">equals</a><span class="delimiter">(</span><a title="Any" id="321201">cmp</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#321201" title="Any">cmp</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Boolean" id="321204">lo</a>: <span title="Long">Long</span> =&gt; <a href="#321204" title="Long">lo</a> <span title="(x: Long)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#58452" title="=&gt; Long">millis</a>
        <span class="keyword">case</span> <a title="Boolean" id="321209">i</a>: <span title="Int">Int</span> =&gt; <a href="#321209" title="Int">i</a> <span title="(x: Long)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#58452" title="=&gt; Long">millis</a>
        <span class="keyword">case</span> <a title="Boolean" id="321214">ti</a>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =&gt; <a href="#321214" title="TimeHelpers.this.TimeSpan">ti</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a>
        <span class="keyword">case</span> <a title="Boolean" id="321219">d</a>: <span title="java.util.Date">Date</span> =&gt; <a href="#321219" title="java.util.Date">d</a>.<span title="()Long">getTime</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Long)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#58452" title="=&gt; Long">millis</a>
        <span class="keyword">case</span> <a title="Boolean" id="321225">dt</a>: <span title="org.joda.time.DateTime">DateTime</span> =&gt; <span title="(a: org.joda.time.DateTime)Left[org.joda.time.DateTime,Nothing]">Left</span><span class="delimiter">(</span><a href="#321225" title="org.joda.time.DateTime">dt</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a>
        <span class="keyword">case</span> <a title="Boolean" id="321235">dur</a>: <span title="org.joda.time.Duration">Duration</span> =&gt; <span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><a href="#48780" title="implicit net.liftweb.util.TimeHelpers.durToPeriod : (dur: org.joda.time.Duration)org.joda.time.Period">dur</a>: <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a>
        <span class="keyword">case</span> <a title="Boolean" id="321245">dur</a>: <span title="org.joda.time.Period">Period</span> =&gt; <span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><a href="#321245" title="org.joda.time.Period">dur</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#48784" title="TimeSpan.this.type" class="keyword">this</a>.<a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** override the toString method to display a readable amount of time */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="58466">toString</a> = <a href="#188652" title="=&gt; Either[org.joda.time.DateTime,org.joda.time.Period]">dt</a> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String">Left</span><span class="delimiter">(</span><a title="org.joda.time.DateTime" id="321259">date</a><span class="delimiter">)</span> =&gt; <a href="#321259" title="org.joda.time.DateTime">date</a>.<span title="()java.lang.String">toString</span>
      <span class="keyword">case</span> <span title="String">Right</span><span class="delimiter">(</span><a title="org.joda.time.Period" id="321321">dur</a><span class="delimiter">)</span> =&gt; <a href="#48785" title="object TimeHelpers.this.TimeSpan">TimeSpan</a>.<a href="#188665" title="(millis: Long)String">format</a><span class="delimiter">(</span><a href="#58452" title="=&gt; Long">millis</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The TimeSpan object provides class represents an amount of time.
   * It can be translated to a date with the date method. In that case, the number of millis seconds will be used to create a Date
   * object starting from the Epoch time (see the documentation for java.util.Date)
   */</span>
  <span class="keyword">object</span> <a title="object TimeHelpers.this.TimeSpan" id="48785">TimeSpan</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="comment">/** time units and values used when converting a total number of millis to those units (see the format function)  */</span>
    <span class="keyword">val</span> <a title="List[(Long, java.lang.String)]" id="188662">scales</a> = <span title="(xs: (Long, java.lang.String)*)List[(Long, java.lang.String)]">List</span><span class="delimiter">(</span><span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><span title="Long(1000L)" class="long">1000L</span>, <span title="java.lang.String(&quot;milli&quot;)" class="string">&quot;milli&quot;</span><span class="delimiter">)</span>, <span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><span title="Long(60L)" class="long">60L</span>, <span title="java.lang.String(&quot;second&quot;)" class="string">&quot;second&quot;</span><span class="delimiter">)</span>, <span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><span title="Long(60L)" class="long">60L</span>, <span title="java.lang.String(&quot;minute&quot;)" class="string">&quot;minute&quot;</span><span class="delimiter">)</span>, <span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><span title="Long(24L)" class="long">24L</span>, <span title="java.lang.String(&quot;hour&quot;)" class="string">&quot;hour&quot;</span><span class="delimiter">)</span>, <span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><span title="Long(7L)" class="long">7L</span>, <span title="java.lang.String(&quot;day&quot;)" class="string">&quot;day&quot;</span><span class="delimiter">)</span>, <span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><span title="Long(10000L)" class="long">10000L</span>, <span title="java.lang.String(&quot;week&quot;)" class="string">&quot;week&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/** explicit constructor for a TimeSpan  */</span>
    <span class="keyword">def</span> <a title="(in: Long)TimeHelpers.this.TimeSpan" id="188664">apply</a><span class="delimiter">(</span><a title="Long" id="320788">in</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="#58447" title="(ms: Long)TimeHelpers.this.TimeSpan" class="keyword">new</a> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><a href="#320788" title="Long">in</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Formats a number of millis to a string representing the number of weeks, days, hours, minutes, seconds, millis
     */</span>
    <span class="keyword">def</span> <a title="(millis: Long)String" id="188665">format</a><span class="delimiter">(</span><a title="Long" id="321322">millis</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(millis: Long)List[(Long, String)]" id="321369">divideInUnits</a><span class="delimiter">(</span><a title="Long" id="321371">millis</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="#188662" title="=&gt; List[(Long, java.lang.String)]">scales</a>.<span title="[B](z: B)(f: (B, (Long, java.lang.String)) =&gt; B)B">foldLeft</span><span title="(z: (Long, List[(Long, String)]))(f: ((Long, List[(Long, String)]), (Long, java.lang.String)) =&gt; (Long, List[(Long, String)]))(Long, List[(Long, String)])" class="delimiter">[</span><span title="(Long, List[(Long, String)])" class="delimiter">(</span>Long, List<span class="delimiter">[</span><span class="delimiter">(</span>Long, String<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="(_1: Long, _2: scala.collection.immutable.Nil.type)(Long, scala.collection.immutable.Nil.type)" class="delimiter">(</span><a href="#321371" title="Long">millis</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">{</span> <span class="delimiter">(</span><a title="(Long, List[(Long, String)])" id="321401">total</a>, <a title="(Long, java.lang.String)" id="321402">div</a><span class="delimiter">)</span> =&gt;
        <span title="(_1: Long, _2: List[(Long, String)])(Long, List[(Long, String)])" class="delimiter">(</span><a href="#321401" title="(Long, List[(Long, String)])">total</a>.<span title="=&gt; Long">_1</span> <span title="(x: Long)Long">/</span> <a href="#321402" title="(Long, java.lang.String)">div</a>.<span title="=&gt; Long">_1</span>, <span title="(_1: Long, _2: java.lang.String)(Long, java.lang.String)" class="delimiter">(</span><a href="#321401" title="(Long, List[(Long, String)])">total</a>.<span title="=&gt; Long">_1</span> <span title="(x: Long)Long">%</span> <a href="#321402" title="(Long, java.lang.String)">div</a>.<span title="=&gt; Long">_1</span>, <a href="#321402" title="(Long, java.lang.String)">div</a>.<span title="=&gt; java.lang.String">_2</span><span class="delimiter">)</span> <a href="#321412" title="(x: (Long, String))List[(Long, String)]">::</a> <a href="#321401" title="(Long, List[(Long, String)])">total</a>.<span title="=&gt; List[(Long, String)]">_2</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<span title="=&gt; List[(Long, String)]">_2</span>
      <span class="keyword">def</span> <a title="(amountUnit: (Long, String))java.lang.String" id="321370">formatAmount</a><span class="delimiter">(</span><a title="(Long, String)" id="321433">amountUnit</a>: <span title="(Long, String)" class="delimiter">(</span>Long, String<span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#321433" title="(Long, String)">amountUnit</a> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="Long" id="321436">amount</a>, <a title="String" id="321437">unit</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#321436" title="Long">amount</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> =&gt; <a href="#321436" title="Long">amount</a> <span title="(x: String)String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#321437" title="String">unit</a>
        <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="Long" id="321448">amount</a>, <a title="String" id="321449">unit</a><span class="delimiter">)</span> =&gt; <a href="#321448" title="Long">amount</a> <span title="(x: String)String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#321449" title="String">unit</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;s&quot;)" class="string">&quot;s&quot;</span>
      <span class="delimiter">}</span>
      <a href="#321369" title="(millis: Long)List[(Long, String)]">divideInUnits</a><span class="delimiter">(</span><a href="#321322" title="Long">millis</a><span class="delimiter">)</span>.<span title="(p: (Long, String) =&gt; Boolean)List[(Long, String)]">filter</span><span class="delimiter">(</span><a href="#321461" title="(Long, String)">_</a>.<span title="=&gt; Long">_1</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="(f: (Long, String) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(Long, String)],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#321370" title="(amountUnit: (Long, String))java.lang.String">formatAmount</a><span class="delimiter">(</span><a href="#321485" title="(Long, String)">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Convert a Date to a TimeSpan
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.TimeSpan.dateToTS : (in: java.util.Date)TimeHelpers.this.TimeSpan" id="188666">dateToTS</a><span class="delimiter">(</span><a title="java.util.Date" id="188682">in</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =
      <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(a: org.joda.time.DateTime)Left[org.joda.time.DateTime,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: Long)org.joda.time.DateTime" class="keyword">new</span> <span title="org.joda.time.DateTime">DateTime</span><span class="delimiter">(</span><a href="#188682" title="java.util.Date">in</a>.<span title="()Long">getTime</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Convert a DateTime to a TimeSpan
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.TimeSpan.dateTimeToTS : (in: org.joda.time.DateTime)TimeHelpers.this.TimeSpan" id="188667">dateTimeToTS</a><span class="delimiter">(</span><a title="org.joda.time.DateTime" id="188680">in</a>: <span title="org.joda.time.DateTime">DateTime</span><span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =
      <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(a: org.joda.time.DateTime)Left[org.joda.time.DateTime,Nothing]">Left</span><span class="delimiter">(</span><a href="#188680" title="org.joda.time.DateTime">in</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Convert a Duration to a TimeSpan
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.TimeSpan.durationToTS : (in: org.joda.time.Duration)TimeHelpers.this.TimeSpan" id="188668">durationToTS</a><span class="delimiter">(</span><a title="org.joda.time.Duration" id="188678">in</a>: <span title="org.joda.time.Duration">Duration</span><span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =
      <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><a href="#48780" title="implicit net.liftweb.util.TimeHelpers.durToPeriod : (dur: org.joda.time.Duration)org.joda.time.Period">in</a>: <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Convert a Period to a TimeSpan
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.TimeSpan.periodToTS : (in: org.joda.time.Period)TimeHelpers.this.TimeSpan" id="188669">periodToTS</a><span class="delimiter">(</span><a title="org.joda.time.Period" id="188676">in</a>: <span title="org.joda.time.Period">Period</span><span class="delimiter">)</span>: <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a> =
      <span title="TimeHelpers.this.TimeSpan" class="keyword">new</span> <a href="#48784" title="TimeHelpers.this.TimeSpan">TimeSpan</a><span class="delimiter">(</span><span title="(b: org.joda.time.Period)Right[Nothing,org.joda.time.Period]">Right</span><span class="delimiter">(</span><a href="#188676" title="org.joda.time.Period">in</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return the current System.nanoTime() */</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="48787">nano</a> = <span title="object java.lang.System">System</span>.<span title="()Long">nanoTime</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** @return the current number of millis: System.currentTimeMillis  */</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="48788">millis</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>

  <span class="comment">/** @return the number of millis corresponding to 'in' seconds */</span>
  <span class="keyword">def</span> <a title="(in: Long)Long" id="48789">seconds</a><span class="delimiter">(</span><a title="Long" id="321555">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#321555" title="Long">in</a> <span title="(x: Long)Long">*</span> <span title="Long(1000L)" class="long">1000L</span>

  <span class="comment">/** @return the number of millis corresponding to 'in' minutes */</span>
  <span class="keyword">def</span> <a title="(in: Long)Long" id="48790">minutes</a><span class="delimiter">(</span><a title="Long" id="321561">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#48789" title="(in: Long)Long">seconds</a><span class="delimiter">(</span><a href="#321561" title="Long">in</a><span class="delimiter">)</span> <span title="(x: Long)Long">*</span> <span title="Long(60L)" class="long">60L</span>

  <span class="comment">/** @return the number of millis corresponding to 'in' hours */</span>
  <span class="keyword">def</span> <a title="(in: Long)Long" id="48791">hours</a><span class="delimiter">(</span><a title="Long" id="321567">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#48790" title="(in: Long)Long">minutes</a><span class="delimiter">(</span><a href="#321567" title="Long">in</a><span class="delimiter">)</span> <span title="(x: Long)Long">*</span> <span title="Long(60L)" class="long">60L</span>

  <span class="comment">/** @return the number of millis corresponding to 'in' days */</span>
  <span class="keyword">def</span> <a title="(in: Long)Long" id="48792">days</a><span class="delimiter">(</span><a title="Long" id="321573">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#48791" title="(in: Long)Long">hours</a><span class="delimiter">(</span><a href="#321573" title="Long">in</a><span class="delimiter">)</span> <span title="(x: Long)Long">*</span> <span title="Long(24L)" class="long">24L</span>

  <span class="comment">/** @return the number of millis corresponding to 'in' weeks */</span>
  <span class="keyword">def</span> <a title="(in: Long)Long" id="48793">weeks</a><span class="delimiter">(</span><a title="Long" id="321579">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#48792" title="(in: Long)Long">days</a><span class="delimiter">(</span><a href="#321579" title="Long">in</a><span class="delimiter">)</span> <span title="(x: Long)Long">*</span> <span title="Long(7L)" class="long">7L</span>

  <span class="comment">/** implicit def used to add the noTime method to the Date class */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.toDateExtension : (d: java.util.Date)TimeHelpers.this.DateExtension" id="48794">toDateExtension</a><span class="delimiter">(</span><a title="java.util.Date" id="56497">d</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> = <span title="TimeHelpers.this.DateExtension" class="keyword">new</span> <a href="#48795" title="TimeHelpers.this.DateExtension">DateExtension</a><span class="delimiter">(</span><a href="#56497" title="java.util.Date">d</a><span class="delimiter">)</span>

  <span class="comment">/** This class adds a noTime method the Date class, in order to get at Date object starting at 00:00 */</span>
  <span class="keyword">class</span> <a title="class DateExtension extends java.lang.Object with ScalaObject" id="48795">DateExtension</a><a href="#48795" title="ScalaObject" class="delimiter">(</a><a title="java.util.Date" id="56504">date</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">/** @returns a Date object starting at 00:00 from date */</span>
    <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="56503">noTime</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.util.Calendar" id="321092">calendar</a> = <span title="object java.util.Calendar">Calendar</span>.<span title="()java.util.Calendar">getInstance</span>
      <a href="#321092" title="java.util.Calendar">calendar</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(11)">HOUR_OF_DAY</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#321092" title="java.util.Calendar">calendar</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(12)">MINUTE</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#321092" title="java.util.Calendar">calendar</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(13)">SECOND</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#321092" title="java.util.Calendar">calendar</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(14)">MILLISECOND</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#321092" title="java.util.Calendar">calendar</a>.<span title="()java.util.Date">getTime</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** implicit def used to add the setXXX methods to the Calendar class */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.TimeHelpers.toCalendarExtension : (c: java.util.Calendar)TimeHelpers.this.CalendarExtension" id="48796">toCalendarExtension</a><span class="delimiter">(</span><a title="java.util.Calendar" id="56269">c</a>: <span title="java.util.Calendar">Calendar</span><span class="delimiter">)</span> = <span title="TimeHelpers.this.CalendarExtension" class="keyword">new</span> <a href="#48797" title="TimeHelpers.this.CalendarExtension">CalendarExtension</a><span class="delimiter">(</span><a href="#56269" title="java.util.Calendar">c</a><span class="delimiter">)</span>

  <span class="comment">/** This class adds the setXXX methods to the Calendar class. Each setter returns the updated Calendar */</span>
  <span class="keyword">class</span> <a title="class CalendarExtension extends java.lang.Object with ScalaObject" id="48797">CalendarExtension</a><a href="#48797" title="ScalaObject" class="delimiter">(</a><a title="java.util.Calendar" id="56281">c</a>: <span title="java.util.Calendar">Calendar</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">/** set the day of the month (1 based) and return the calendar */</span>
    <span class="keyword">def</span> <a title="(d: Int)java.util.Calendar" id="56276">setDay</a><span class="delimiter">(</span><a title="Int" id="321589">d</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#56281" title="java.util.Calendar">c</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(5)">DAY_OF_MONTH</span>, <a href="#321589" title="Int">d</a><span class="delimiter">)</span>; <a href="#56281" title="java.util.Calendar">c</a> <span class="delimiter">}</span>

    <span class="comment">/** set the month (0 based) and return the calendar */</span>
    <span class="keyword">def</span> <a title="(m: Int)java.util.Calendar" id="56277">setMonth</a><span class="delimiter">(</span><a title="Int" id="321594">m</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#56281" title="java.util.Calendar">c</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(2)">MONTH</span>, <a href="#321594" title="Int">m</a><span class="delimiter">)</span>; <a href="#56281" title="java.util.Calendar">c</a> <span class="delimiter">}</span>

    <span class="comment">/** set the year and return the calendar */</span>
    <span class="keyword">def</span> <a title="(y: Int)java.util.Calendar" id="56278">setYear</a><span class="delimiter">(</span><a title="Int" id="321599">y</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#56281" title="java.util.Calendar">c</a>.<span title="(x$1: Int, x$2: Int)Unit">set</span><span class="delimiter">(</span>Calendar.<span title="Int(1)">YEAR</span>, <a href="#321599" title="Int">y</a><span class="delimiter">)</span>; <a href="#56281" title="java.util.Calendar">c</a> <span class="delimiter">}</span>

    <span class="comment">/** set the TimeZone and return the calendar */</span>
    <span class="keyword">def</span> <a title="(tz: java.util.TimeZone)java.util.Calendar" id="56279">setTimezone</a><span class="delimiter">(</span><a title="java.util.TimeZone" id="321604">tz</a>: <span title="java.util.TimeZone">TimeZone</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#56281" title="java.util.Calendar">c</a>.<span title="(x$1: java.util.TimeZone)Unit">setTimeZone</span><span class="delimiter">(</span><a href="#321604" title="java.util.TimeZone">tz</a><span class="delimiter">)</span>; <a href="#56281" title="java.util.Calendar">c</a> <span class="delimiter">}</span>

    <span class="comment">/** set the time to 00:00:00.000 and return the calendar */</span>
    <span class="keyword">def</span> <a title="=&gt; java.util.Calendar" id="56280">noTime</a> = <span class="delimiter">{</span> <a href="#56281" title="java.util.Calendar">c</a>.<span title="(x$1: java.util.Date)Unit">setTime</span><span class="delimiter">(</span><a href="#56281" title="java.util.Calendar">c</a>.<a href="#48794" title="implicit net.liftweb.util.TimeHelpers.toDateExtension : (d: java.util.Date)TimeHelpers.this.DateExtension">getTime</a>.<a href="#56503" title="=&gt; java.util.Date">noTime</a><span class="delimiter">)</span>; <a href="#56281" title="java.util.Calendar">c</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return the date object for now */</span>
  <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="48798">now</a>  = <span title="java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span>

  <span class="comment">/** @return the Calendar object for today (the TimeZone is the local TimeZone). Its time is 00:00:00.000 */</span>
  <span class="keyword">def</span> <a title="=&gt; java.util.Calendar" id="48799">today</a>  = <span title="object java.util.Calendar">Calendar</span>.<a href="#48796" title="implicit net.liftweb.util.TimeHelpers.toCalendarExtension : (c: java.util.Calendar)TimeHelpers.this.CalendarExtension">getInstance</a>.<a href="#56280" title="=&gt; java.util.Calendar">noTime</a>

  <span class="comment">/** @return the current year */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="48800">currentYear</a>: <span title="Int">Int</span> = <span title="object java.util.Calendar">Calendar</span>.<span title="()java.util.Calendar">getInstance</span>.<span title="(x$1: Int)Int">get</span><span class="delimiter">(</span>Calendar.<span title="Int(1)">YEAR</span><span class="delimiter">)</span>

  <span class="comment">/**
   * @deprecated use now instead
   * @return the current time as a Date object
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="48801">timeNow</a> = <span title="java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span>

  <span class="comment">/**
   * @deprecated use today instead
   * @return the current Day as a Date object
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="48802">dayNow</a>: <span title="java.util.Date">Date</span> = <a href="#48777" title="implicit net.liftweb.util.TimeHelpers.intToTimeSpanBuilder : (in: Int)TimeHelpers.this.TimeSpanBuilder" class="int">0</a>.<a href="#58471" title="=&gt; TimeHelpers.this.TimeSpan">seconds</a>.<a href="#58453" title="=&gt; TimeHelpers.this.TimeSpan">later</a>.<a href="#58455" title="=&gt; java.util.Date">noTime</a>

  <span class="comment">/** alias for new Date(millis) */</span>
  <span class="keyword">def</span> <a title="(when: Long)java.util.Date" id="48803">time</a><span class="delimiter">(</span><a title="Long" id="321634">when</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#321634" title="Long">when</a><span class="delimiter">)</span>

  <span class="comment">/** @return the month corresponding to today (0 based, relative to UTC) */</span>
  <span class="keyword">def</span> <a title="(in: java.util.Date)Int" id="48804">month</a><span class="delimiter">(</span><a title="java.util.Date" id="321641">in</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.util.Calendar" id="321643">cal</a> = <span title="object java.util.Calendar">Calendar</span>.<span title="(x$1: java.util.TimeZone)java.util.Calendar">getInstance</span><span class="delimiter">(</span><a href="#48807" title="=&gt; java.util.TimeZone">utc</a><span class="delimiter">)</span>
    <a href="#321643" title="java.util.Calendar">cal</a>.<span title="(x$1: Long)Unit">setTimeInMillis</span><span class="delimiter">(</span><a href="#321641" title="java.util.Date">in</a>.<span title="()Long">getTime</span><span class="delimiter">)</span>
    <a href="#321643" title="java.util.Calendar">cal</a>.<span title="(x$1: Int)Int">get</span><span class="delimiter">(</span>Calendar.<span title="Int(2)">MONTH</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return the year corresponding to today (relative to UTC) */</span>
  <span class="keyword">def</span> <a title="(in: java.util.Date)Int" id="48805">year</a><span class="delimiter">(</span><a title="java.util.Date" id="168704">in</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <span title="Int">Int</span> =  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.util.Calendar" id="321648">cal</a> = <span title="object java.util.Calendar">Calendar</span>.<span title="(x$1: java.util.TimeZone)java.util.Calendar">getInstance</span><span class="delimiter">(</span><a href="#48807" title="=&gt; java.util.TimeZone">utc</a><span class="delimiter">)</span>
    <a href="#321648" title="java.util.Calendar">cal</a>.<span title="(x$1: Long)Unit">setTimeInMillis</span><span class="delimiter">(</span><a href="#168704" title="java.util.Date">in</a>.<span title="()Long">getTime</span><span class="delimiter">)</span>
    <a href="#321648" title="java.util.Calendar">cal</a>.<span title="(x$1: Int)Int">get</span><span class="delimiter">(</span>Calendar.<span title="Int(1)">YEAR</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return the day of month corresponding to the input date (1 based) */</span>
  <span class="keyword">def</span> <a title="(in: java.util.Date)Int" id="48806">day</a><span class="delimiter">(</span><a title="java.util.Date" id="321653">in</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <span title="Int">Int</span> =  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.util.Calendar" id="321655">cal</a> = <span title="object java.util.Calendar">Calendar</span>.<span title="(x$1: java.util.TimeZone)java.util.Calendar">getInstance</span><span class="delimiter">(</span><a href="#48807" title="=&gt; java.util.TimeZone">utc</a><span class="delimiter">)</span>
    <a href="#321655" title="java.util.Calendar">cal</a>.<span title="(x$1: Long)Unit">setTimeInMillis</span><span class="delimiter">(</span><a href="#321653" title="java.util.Date">in</a>.<span title="()Long">getTime</span><span class="delimiter">)</span>
    <a href="#321655" title="java.util.Calendar">cal</a>.<span title="(x$1: Int)Int">get</span><span class="delimiter">(</span>Calendar.<span title="Int(5)">DAY_OF_MONTH</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The UTC TimeZone */</span>
  <span class="keyword">val</span> <a title="java.util.TimeZone" id="48807">utc</a> = <span title="object java.util.TimeZone">TimeZone</span>.<span title="(x$1: java.lang.String)java.util.TimeZone">getTimeZone</span><span class="delimiter">(</span><span title="java.lang.String(&quot;UTC&quot;)" class="string">&quot;UTC&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** @return the number of days since epoch converted from millis */</span>
  <span class="keyword">def</span> <a title="(millis: Long)Long" id="48809">millisToDays</a><span class="delimiter">(</span><a title="Long" id="321660">millis</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#321660" title="Long">millis</a> <span title="(x: Long)Long">/</span> <span class="delimiter">(</span><span class="long">1000L</span> * <span class="long">60L</span> * <span class="long">60L</span> <span title="Long(86400000L)">*</span> <span class="long">24L</span><span class="delimiter">)</span>

  <span class="comment">/** @return the number of days since epoch */</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="48810">daysSinceEpoch</a>: <span title="Long">Long</span> = <a href="#48809" title="(millis: Long)Long">millisToDays</a><span class="delimiter">(</span><a href="#48788" title="=&gt; Long">millis</a><span class="delimiter">)</span>

  <span class="comment">/** @return the time taken to evaluate f in millis and the result */</span>
  <span class="keyword">def</span> <a title="[T](f: =&gt; T)(Long, T)" id="48811">calcTime</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48813">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="63620">f</a>: =&gt; T<span class="delimiter">)</span>: <span title="(Long, T)" class="delimiter">(</span>Long, T<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="321680">start</a> = <a href="#48788" title="=&gt; Long">millis</a>
    <span class="keyword">val</span> <a title="T" id="321681">result</a> = <a href="#63620" title="=&gt; T">f</a>
    <span title="(_1: Long, _2: T)(Long, T)" class="delimiter">(</span><a href="#48788" title="=&gt; Long">millis</a> <span title="(x: Long)Long">-</span> <a href="#321680" title="Long">start</a>, <a href="#321681" title="T">result</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Log a message with the time taken in millis to do something and return the result
   * @return the result
   */</span>
  <span class="keyword">def</span> <a title="[T](msg: String)(f: =&gt; T)T" id="48814">logTime</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48816">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="321692">msg</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="321693">f</a>: =&gt; T<span class="delimiter">)</span>: <a href="#48816" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#321697" title="(Long, T)" class="delimiter">(</a><a href="#321696" title="Long" id="321697">time</a>, <a href="#321696" title="T" id="321698">ret</a><span class="delimiter">)</span> = <a href="#48811" title="(f: =&gt; T)(Long, T)">calcTime</a><span title="(Long, T) @unchecked" class="delimiter">(</span><a href="#321693" title="=&gt; T">f</a><span class="delimiter">)</span>
    <a href="#48772" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31948" title="(msg: =&gt; AnyRef)Unit">info</a><span class="delimiter">(</span><a href="#321692" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; took &quot;)" class="string">&quot; took &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#321697" title="Long">time</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; Milliseconds&quot;)" class="string">&quot; Milliseconds&quot;</span><span class="delimiter">)</span>
    <a href="#321698" title="T">ret</a>
  <span class="delimiter">}</span>

 <span class="comment">/**
   * Call f and log the string returned together with the time taken in millis.
   * @return the second result from f
   */</span>
  <span class="keyword">def</span> <a title="[T](f: =&gt; (String, T))T" id="48817">logTime</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="48819">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; (String, T)" id="321714">f</a>: =&gt; <span class="delimiter">(</span>String,T<span class="delimiter">)</span><span class="delimiter">)</span>: <a href="#48819" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#321718" title="(Long, (String, T))" class="delimiter">(</a><a href="#321717" title="Long" id="321718">time</a>, <a href="#321717" title="(String, T)" id="321719">fret</a><span class="delimiter">)</span> = <a href="#48811" title="(f: =&gt; (String, T))(Long, (String, T))">calcTime</a><span title="(Long, (String, T)) @unchecked" class="delimiter">(</span><a href="#321714" title="=&gt; (String, T)">f</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a href="#321721" title="(String, T)" class="delimiter">(</a><a href="#321720" title="String" id="321721">msg</a>, <a href="#321720" title="T" id="321722">ret</a><span class="delimiter">)</span> = <a href="#321719" title="(String, T)">fret</a>
    <a href="#48772" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31948" title="(msg: =&gt; AnyRef)Unit">info</a><span class="delimiter">(</span><a href="#321721" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; took &quot;)" class="string">&quot; took &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#321718" title="Long">time</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; Milliseconds&quot;)" class="string">&quot; Milliseconds&quot;</span><span class="delimiter">)</span>
    <a href="#321722" title="T">ret</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * @return a standard format HH:mm:ss
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="48820">hourFormat</a> = <span title="(x$1: java.lang.String)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><span title="java.lang.String(&quot;HH:mm:ss&quot;)" class="string">&quot;HH:mm:ss&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * @return the formatted time for a given Date
   */</span>
  <span class="keyword">def</span> <a title="(in: java.util.Date)String" id="48821">hourFormat</a><span class="delimiter">(</span><a title="java.util.Date" id="293487">in</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#48820" title="=&gt; java.text.SimpleDateFormat">hourFormat</a>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#293487" title="java.util.Date">in</a><span class="delimiter">)</span>

  <span class="comment">/** @return a standard format for the date yyyy/MM/dd */</span>
  <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="48822">dateFormatter</a> = <span title="(x$1: java.lang.String)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><span title="java.lang.String(&quot;yyyy/MM/dd&quot;)" class="string">&quot;yyyy/MM/dd&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** @return a format for the time which includes the TimeZone: HH:mm zzz*/</span>
  <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="48823">timeFormatter</a> = <span title="(x$1: java.lang.String)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><span title="java.lang.String(&quot;HH:mm zzz&quot;)" class="string">&quot;HH:mm zzz&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** @return today's date formatted as yyyy/MM/dd */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="48824">formattedDateNow</a> = <a href="#48822" title="=&gt; java.text.SimpleDateFormat">dateFormatter</a>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#48798" title="=&gt; java.util.Date">now</a><span class="delimiter">)</span>

  <span class="comment">/** @return now's time formatted as HH:mm zzz */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="48825">formattedTimeNow</a> = <a href="#48823" title="=&gt; java.text.SimpleDateFormat">timeFormatter</a>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#48798" title="=&gt; java.util.Date">now</a><span class="delimiter">)</span>

  <span class="comment">/** @return a formatter for internet dates (RFC822/1123) including:
   *  the day of week, the month, day of month, time and time zone */</span>
  <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="48826">internetDateFormatter</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.text.SimpleDateFormat" id="267314">ret</a> = <span title="(x$1: java.lang.String, x$2: java.util.Locale)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><span title="java.lang.String(&quot;EEE, d MMM yyyy HH:mm:ss \'GMT\'&quot;)" class="string">&quot;EEE, d MMM yyyy HH:mm:ss 'GMT'&quot;</span>, <span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">US</span><span class="delimiter">)</span>
    <a href="#267314" title="java.text.SimpleDateFormat">ret</a>.<span title="(x$1: java.util.TimeZone)Unit">setTimeZone</span><span class="delimiter">(</span><a href="#48807" title="=&gt; java.util.TimeZone">utc</a><span class="delimiter">)</span>
    <a href="#267314" title="java.text.SimpleDateFormat">ret</a>
  <span class="delimiter">}</span>

  <span class="comment">/** @return a date from a string using the internet format. Return the Epoch date if the parse is unsuccesfull */</span>
  <span class="keyword">def</span> <a title="(dateString: String)net.liftweb.common.Box[java.util.Date]" id="48827">boxParseInternetDate</a><span class="delimiter">(</span><a title="String" id="241881">dateString</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[java.util.Date]">Box</a><span class="delimiter">[</span>Date<span class="delimiter">]</span> = <a href="ControlHelpers.scala.html#48608" title="(f: =&gt; java.util.Date)net.liftweb.common.Box[java.util.Date]">tryo</a> <span class="delimiter">{</span>
    <a href="#48826" title="=&gt; java.text.SimpleDateFormat">internetDateFormatter</a>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#241881" title="String">dateString</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return a date from a string using the internet format. Return the Epoch date if the parse is unsuccesfull */</span>
  <span class="keyword">def</span> <a title="(dateString: String)java.util.Date" id="48828">parseInternetDate</a><span class="delimiter">(</span><a title="String" id="241714">dateString</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="java.util.Date">Date</span> = <a href="ControlHelpers.scala.html#48608" title="(f: =&gt; java.util.Date)net.liftweb.common.Box[java.util.Date]">tryo</a> <span class="delimiter">{</span>
    <a href="#48826" title="=&gt; java.text.SimpleDateFormat">internetDateFormatter</a>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#241714" title="String">dateString</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; java.util.Date)java.util.Date">openOr</a> <span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span>

  <span class="comment">/** @return a date formatted with the internet format */</span>
  <span class="keyword">def</span> <a title="(in: java.util.Date)String" id="48829">toInternetDate</a><span class="delimiter">(</span><a title="java.util.Date" id="241752">in</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#48826" title="=&gt; java.text.SimpleDateFormat">internetDateFormatter</a>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#241752" title="java.util.Date">in</a><span class="delimiter">)</span>

  <span class="comment">/** @return a date formatted with the internet format (from a number of millis) */</span>
  <span class="keyword">def</span> <a title="(in: Long)String" id="48830">toInternetDate</a><span class="delimiter">(</span><a title="Long" id="241750">in</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#48826" title="=&gt; java.text.SimpleDateFormat">internetDateFormatter</a>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#241750" title="Long">in</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** @return the current time as an internet date */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="48831">nowAsInternetDate</a>: <span title="String">String</span> = <a href="#48830" title="(in: Long)String">toInternetDate</a><span class="delimiter">(</span><a href="#48788" title="=&gt; Long">millis</a><span class="delimiter">)</span>

  <span class="comment">/** @return a Full(date) or a failure if the input couldn't be translated to date (or Empty if the input is null)*/</span>
  <span class="keyword">def</span> <a title="(in: Any)net.liftweb.common.Box[java.util.Date]" id="48832">toDate</a><span class="delimiter">(</span><a title="Any" id="159593">in</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[java.util.Date]">Box</a><span class="delimiter">[</span>Date<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#159593" title="Any">in</a> <span title="net.liftweb.common.Box[java.util.Date]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type" class="keyword">null</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
        <span class="keyword">case</span> <a title="net.liftweb.common.Full[java.util.Date]" id="321878">d</a>: <span title="java.util.Date">Date</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.util.Date)net.liftweb.common.Full[java.util.Date]">Full</a><span class="delimiter">(</span><a href="#321878" title="java.util.Date">d</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.common.Full[java.util.Date]" id="321882">lng</a>: <span title="Long">Long</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.util.Date)net.liftweb.common.Full[java.util.Date]">Full</a><span class="delimiter">(</span><span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#321882" title="Long">lng</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.common.Full[java.util.Date]" id="321890">lng</a>: <span title="java.lang.Number">Number</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.util.Date)net.liftweb.common.Full[java.util.Date]">Full</a><span class="delimiter">(</span><span title="(x$1: Long)java.util.Date" class="keyword">new</span> <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#321890" title="java.lang.Number">lng</a>.<span title="()Long">longValue</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">Nil</span> | <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a> | <span title="object None">None</span> | Failure<span class="delimiter">(</span>_, _, _<span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
        <span class="keyword">case</span> <span title="net.liftweb.common.Box[java.util.Date]">Full</span><span class="delimiter">(</span><a title="Any" id="321899">v</a><span class="delimiter">)</span> =&gt; <a href="#48832" title="(in: Any)net.liftweb.common.Box[java.util.Date]">toDate</a><span class="delimiter">(</span><a href="#321899" title="Any">v</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Box[java.util.Date]">Some</span><span class="delimiter">(</span><a title="Any" id="321901">v</a><span class="delimiter">)</span> =&gt; <a href="#48832" title="(in: Any)net.liftweb.common.Box[java.util.Date]">toDate</a><span class="delimiter">(</span><a href="#321901" title="Any">v</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.common.Box[java.util.Date]" id="321906">v</a> :: <a title="List[Any]" id="321907">vs</a> =&gt; <a href="#48832" title="(in: Any)net.liftweb.common.Box[java.util.Date]">toDate</a><span class="delimiter">(</span><a href="#321906" title="Any">v</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.common.Box[java.util.Date]" id="321908">s</a> : <span title="String">String</span> =&gt; <a href="ControlHelpers.scala.html#48608" title="(f: =&gt; java.util.Date)net.liftweb.common.Box[java.util.Date]">tryo</a><span class="delimiter">(</span><a href="#48826" title="=&gt; java.text.SimpleDateFormat">internetDateFormatter</a>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#321908" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[java.util.Date])net.liftweb.common.Box[java.util.Date]">or</a> <a href="ControlHelpers.scala.html#48608" title="(f: =&gt; java.util.Date)net.liftweb.common.Box[java.util.Date]">tryo</a><span class="delimiter">(</span><a href="#48822" title="=&gt; java.text.SimpleDateFormat">dateFormatter</a>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#321908" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.common.Box[java.util.Date]" id="321988">o</a> =&gt; <a href="#48832" title="(in: Any)net.liftweb.common.Box[java.util.Date]">toDate</a><span class="delimiter">(</span><a href="#321988" title="Any">o</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Failure" id="321989">e</a> =&gt; <a href="#48772" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31943" title="(msg: =&gt; AnyRef, t: Throwable)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Error parsing date &quot;)" class="string">&quot;Error parsing date &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#159593" title="Any">in</a>, <a href="#321989" title="java.lang.Throwable">e</a><span class="delimiter">)</span>; <a href="../../../../common/net/liftweb/common/Box.scala.html#37830" title="(msg: String, exception: net.liftweb.common.Box[Throwable], chain: net.liftweb.common.Box[net.liftweb.common.Failure])net.liftweb.common.Failure">Failure</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Bad date: &quot;)" class="string">&quot;Bad date: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#159593" title="Any">in</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.lang.Throwable)net.liftweb.common.Full[java.lang.Throwable]">Full</a><span class="delimiter">(</span><a href="#321989" title="java.lang.Throwable">e</a><span class="delimiter">)</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait ConvertableToDate extends java.lang.Object" id="13713">ConvertableToDate</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; java.util.Date" id="58440">toDate</a>: <span title="java.util.Date">Date</span>
  <span class="keyword">def</span> <a title="=&gt; org.joda.time.DateTime" id="58441">toDateTime</a>: <span title="org.joda.time.DateTime">DateTime</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="58442">millis</a>: <span title="Long">Long</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.util.ConvertableToDate" id="13714">ConvertableToDate</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.ConvertableToDate.toDate : (in: net.liftweb.util.ConvertableToDate)java.util.Date" id="188672">toDate</a><span class="delimiter">(</span><a title="net.liftweb.util.ConvertableToDate" id="188688">in</a>: <a href="#13713" title="net.liftweb.util.ConvertableToDate">ConvertableToDate</a><span class="delimiter">)</span>: <span title="java.util.Date">Date</span> = <a href="#188688" title="net.liftweb.util.ConvertableToDate">in</a>.<a href="#58440" title="=&gt; java.util.Date">toDate</a>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.ConvertableToDate.toDateTime : (in: net.liftweb.util.ConvertableToDate)org.joda.time.DateTime" id="188673">toDateTime</a><span class="delimiter">(</span><a title="net.liftweb.util.ConvertableToDate" id="188686">in</a>: <a href="#13713" title="net.liftweb.util.ConvertableToDate">ConvertableToDate</a><span class="delimiter">)</span>: <span title="org.joda.time.DateTime">DateTime</span> = <a href="#188686" title="net.liftweb.util.ConvertableToDate">in</a>.<a href="#58441" title="=&gt; org.joda.time.DateTime">toDateTime</a>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.util.ConvertableToDate.toMillis : (in: net.liftweb.util.ConvertableToDate)Long" id="188674">toMillis</a><span class="delimiter">(</span><a title="net.liftweb.util.ConvertableToDate" id="188684">in</a>: <a href="#13713" title="net.liftweb.util.ConvertableToDate">ConvertableToDate</a><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#188684" title="net.liftweb.util.ConvertableToDate">in</a>.<a href="#58442" title="=&gt; Long">millis</a>
  
<span class="delimiter">}</span>


        </pre>
    </body>
</html>