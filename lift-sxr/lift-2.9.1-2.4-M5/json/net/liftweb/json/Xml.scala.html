<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>json/net/liftweb/json/Xml.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2009-2010 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> json

<span class="comment">/** Functions to convert between JSON and XML.
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.json.Xml" id="11188">Xml</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> scala.xml._

  <span class="comment">/** Convert given XML to JSON.
   * &lt;p&gt;
   * Following rules are used in conversion.
   * &lt;ul&gt;
   *   &lt;li&gt;XML leaf element is converted to JSON string&lt;/li&gt;
   *   &lt;li&gt;XML parent element is converted to JSON object and its children to JSON fields&lt;/li&gt;
   *   &lt;li&gt;XML elements with same name at same level are converted to JSON array&lt;/li&gt;
   *   &lt;li&gt;XML attributes are converted to JSON fields&lt;/li&gt;
   * &lt;/ul&gt;
   * &lt;p&gt;
   * Example:&lt;pre&gt;
   * scala&gt; val xml =
   *     &amp;lt;users&amp;gt;
   *       &amp;lt;user&amp;gt;
   *         &amp;lt;id&amp;gt;1&amp;lt;/id&amp;gt;
   *         &amp;lt;name&amp;gt;Harry&amp;lt;/name&amp;gt;
   *       &amp;lt;/user&amp;gt;
   *       &amp;lt;user&amp;gt;
   *         &amp;lt;id&amp;gt;2&amp;lt;/id&amp;gt;
   *         &amp;lt;name&amp;gt;David&amp;lt;/name&amp;gt;
   *       &amp;lt;/user&amp;gt;
   *     &amp;lt;/users&amp;gt;   
   *
   * scala&gt; val json = toJson(xml)
   * scala&gt; pretty(render(json))
   * 
   * {
   *   &quot;users&quot;:{
   *     &quot;user&quot;:[{
   *       &quot;id&quot;:&quot;1&quot;,
   *       &quot;name&quot;:&quot;Harry&quot;
   *     },{
   *       &quot;id&quot;:&quot;2&quot;,
   *       &quot;name&quot;:&quot;David&quot;
   *     }]
   *   }
   * }
   * &lt;/pre&gt;
   *
   * Now, the above example has two problems. First, the id is converted to String while
   * we might want it as an Int. This is easy to fix by mapping JString(s) to JInt(s.toInt).
   * The second problem is more subtle. The conversion function decides to use JSON array
   * because there's more than one user-element in XML. Therefore a structurally equivalent
   * XML document which happens to have just one user-element will generate a JSON document
   * without JSON array. This is rarely a desired outcome. These both problems can be fixed
   * by following map function.
   * &lt;pre&gt;
   * json map {
   *   case JField(&quot;id&quot;, JString(s)) =&gt; JField(&quot;id&quot;, JInt(s.toInt))
   *   case JField(&quot;user&quot;, x: JObject) =&gt; JField(&quot;user&quot;, JArray(x :: Nil))
   *   case x =&gt; x 
   * }
   * &lt;/pre&gt;
   */</span>
  <span class="keyword">def</span> <a title="(xml: scala.xml.NodeSeq)net.liftweb.json.package.JValue" id="144588">toJson</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="144593">xml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <a href="JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(node: scala.xml.Node)Boolean" id="144595">empty_?</a><span class="delimiter">(</span><a title="scala.xml.Node" id="144617">node</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <a href="#144617" title="scala.xml.Node">node</a>.<span title="=&gt; Seq[scala.xml.Node]">child</span>.<span title="=&gt; Boolean">isEmpty</span>

    <span class="comment">/* Checks if given node is leaf element. For instance these are considered leafs:
     * &lt;foo&gt;bar&lt;/foo&gt;, &lt;foo&gt;{ doSomething() }&lt;/foo&gt;, etc.
     */</span>
    <span class="keyword">def</span> <a title="(node: scala.xml.Node)Boolean" id="144596">leaf_?</a><span class="delimiter">(</span><a title="scala.xml.Node" id="144623">node</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(n: scala.xml.Node)List[scala.xml.Node]" id="144624">descendant</a><span class="delimiter">(</span><a title="scala.xml.Node" id="144625">n</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span>: <span title="List[scala.xml.Node]">List</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <a href="#144625" title="scala.xml.Node">n</a> <span title="List[scala.xml.Node]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="List[scala.xml.Node]" id="144626">g</a>: <span title="scala.xml.Group">Group</span> =&gt; <a href="#144626" title="scala.xml.Group">g</a>.<span title="=&gt; Seq[scala.xml.Node]">nodes</span>.<span title="=&gt; List[scala.xml.Node]">toList</span>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.xml.Node],scala.xml.Node,List[scala.xml.Node]])List[scala.xml.Node]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,scala.xml.Node,List[scala.xml.Node]]" class="delimiter">(</span><a title="scala.xml.Node" id="144693">x</a> =&gt; <a href="#144693" title="scala.xml.Node">x</a> <a href="#144694" title="(x: scala.xml.Node)List[scala.xml.Node]">::</a> <a href="#144624" title="(n: scala.xml.Node)List[scala.xml.Node]">descendant</a><span class="delimiter">(</span><a href="#144693" title="scala.xml.Node">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="List[scala.xml.Node]">_</span> =&gt; <a href="#144625" title="scala.xml.Node">n</a>.<span title="=&gt; Seq[scala.xml.Node]">child</span>.<span title="=&gt; List[scala.xml.Node]">toList</span>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.xml.Node],scala.xml.Node,List[scala.xml.Node]])List[scala.xml.Node]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,scala.xml.Node,List[scala.xml.Node]]" class="delimiter">{</span> <a title="scala.xml.Node" id="144748">x</a> =&gt; <a href="#144748" title="scala.xml.Node">x</a> <a href="#144749" title="(x: scala.xml.Node)List[scala.xml.Node]">::</a> <a href="#144624" title="(n: scala.xml.Node)List[scala.xml.Node]">descendant</a><span class="delimiter">(</span><a href="#144748" title="scala.xml.Node">x</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span title="=&gt; Boolean">!</span><a href="#144624" title="(n: scala.xml.Node)List[scala.xml.Node]">descendant</a><span class="delimiter">(</span><a href="#144623" title="scala.xml.Node">node</a><span class="delimiter">)</span>.<span title="(p: scala.xml.Node =&gt; Boolean)Option[scala.xml.Node]">find</span><span class="delimiter">(</span><a href="#144788" title="scala.xml.Node">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="scala.xml.Elem">Elem</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(nodeNames: Seq[String])Boolean" id="144597">array_?</a><span class="delimiter">(</span><a title="Seq[String]" id="144832">nodeNames</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#144832" title="Seq[String]">nodeNames</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#144832" title="Seq[String]">nodeNames</a>.<span title="=&gt; List[String]">toList</span>.<span title="=&gt; List[String]">distinct</span>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span>
    <span class="keyword">def</span> <a title="(n: scala.xml.Node)scala.xml.NodeSeq" id="144598">directChildren</a><span class="delimiter">(</span><a title="scala.xml.Node" id="144856">n</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="#144856" title="scala.xml.Node">n</a>.<span title="=&gt; Seq[scala.xml.Node]">child</span>.<span title="(p: scala.xml.Node =&gt; Boolean)Seq[scala.xml.Node]">filter</span><span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq" class="delimiter">(</span><a title="scala.xml.Node" id="144862">c</a> =&gt; <a href="#144862" title="scala.xml.Node">c</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="scala.xml.Elem">Elem</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(n: scala.xml.Node)java.lang.String" id="144599">nameOf</a><span class="delimiter">(</span><a title="scala.xml.Node" id="144865">n</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <span class="delimiter">(</span><span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#144865" title="scala.xml.Node">n</a>.<span title="=&gt; String">prefix</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#144865" title="scala.xml.Node">n</a>.<span title="=&gt; String">prefix</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#144865" title="scala.xml.Node">n</a>.<span title="=&gt; String">label</span>
    <span class="keyword">def</span> <a title="(n: scala.xml.Node)List[(String, XValue)]" id="144600">buildAttrs</a><span class="delimiter">(</span><a title="scala.xml.Node" id="144866">n</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <a href="#144866" title="scala.xml.Node">n</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>.<span title="(f: scala.xml.MetaData =&gt; (String, XValue))(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scala.xml.MetaData],(String, XValue),Iterable[(String, XValue)]])Iterable[(String, XValue)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,(String, XValue),Iterable[(String, XValue)]]" class="delimiter">(</span><span class="delimiter">(</span>a: <span title="scala.xml.MetaData">MetaData</span><span class="delimiter">)</span> =&gt; <span title="(_1: String, _2: XValue)(String, XValue)" class="delimiter">(</span><a href="#144892" title="scala.xml.MetaData">a</a>.<span title="=&gt; String">key</span>, <a href="#144899" title="(value: String)XValue">XValue</a><span class="delimiter">(</span><a href="#144892" title="scala.xml.MetaData">a</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">value</span>.<span title="=&gt; String">text</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; List[(String, XValue)]">toList</span>

    <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait XElem extends java.lang.Object" id="144601">XElem</a>
    case <span class="keyword">class</span> <a title="class XValue extends java.lang.Object with XElem with ScalaObject with Product with Serializable" id="144899">XValue</a><a href="#144899" title="ScalaObject" class="delimiter">(</a><a title="String" id="144906">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#144601" title="XElem">XElem</a>
    case <span class="keyword">class</span> <a title="class XLeaf extends java.lang.Object with XElem with ScalaObject with Product with Serializable" id="145045">XLeaf</a><a href="#145045" title="ScalaObject" class="delimiter">(</a><a title="(String, XElem)" id="145413">value</a>: <span title="(String, XElem)" class="delimiter">(</span>String, XElem<span class="delimiter">)</span>, <a title="List[(String, XValue)]" id="145414">attrs</a>: <span title="List[(String, XValue)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, XValue<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#144601" title="XElem">XElem</a>
    case <span class="keyword">class</span> <a title="class XNode extends java.lang.Object with XElem with ScalaObject with Product with Serializable" id="145119">XNode</a><a href="#145119" title="ScalaObject" class="delimiter">(</a><a title="List[(String, XElem)]" id="145444">fields</a>: <span title="List[(String, XElem)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, XElem<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#144601" title="XElem">XElem</a>
    case <span class="keyword">class</span> <a title="class XArray extends java.lang.Object with XElem with ScalaObject with Product with Serializable" id="145182">XArray</a><a href="#145182" title="ScalaObject" class="delimiter">(</a><a title="List[XElem]" id="145686">elems</a>: <span title="List[XElem]">List</span><span class="delimiter">[</span>XElem<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#144601" title="XElem">XElem</a>

    <span class="keyword">def</span> <a title="(x: XElem)net.liftweb.json.package.JValue" id="144614">toJValue</a><span class="delimiter">(</span><a title="XElem" id="145225">x</a>: <a href="#144601" title="XElem">XElem</a><span class="delimiter">)</span>: <a href="JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a> = <a href="#145225" title="XElem">x</a> <span title="net.liftweb.json.package.JValue" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JString">XValue</span><span class="delimiter">(</span><a title="String" id="145226">s</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#50133" title="(s: String)net.liftweb.json.JsonAST.JString">JString</a><span class="delimiter">(</span><a href="#145226" title="String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.package.JValue">XLeaf</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="145231">name</a>, <a title="XElem" id="145232">value</a><span class="delimiter">)</span>, <a title="List[(String, XValue)]" id="145233">attrs</a><span class="delimiter">)</span> =&gt; <span title="(_1: XElem, _2: List[(String, XValue)])(XElem, List[(String, XValue)])" class="delimiter">(</span><a href="#145232" title="XElem">value</a>, <a href="#145233" title="List[(String, XValue)]">attrs</a><span class="delimiter">)</span> <span title="net.liftweb.json.package.JValue" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.json.package.JValue" class="delimiter">(</span>_, <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt; <a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">(</span><a href="#145232" title="XElem">value</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JObject" class="delimiter">(</span>XValue<span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>, <a title="List[(String, XValue)]" id="145244">xs</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#51392" title="(obj: List[net.liftweb.json.JsonAST.JField])net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">(</span><a href="#144615" title="(xs: List[(String, XElem)])List[net.liftweb.json.JsonAST.JField]">mkFields</a><span class="delimiter">(</span><a href="#145244" title="List[(String, XValue)]">xs</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JObject" class="delimiter">(</span>_, <a title="List[(String, XValue)]" id="145336">xs</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#51392" title="(obj: List[net.liftweb.json.JsonAST.JField])net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">(</span><a href="JsonAST.scala.html#50050" title="(name: String, value: net.liftweb.json.JsonAST.JValue)net.liftweb.json.JsonAST.JField">JField</a><span class="delimiter">(</span><a href="#145231" title="String">name</a>, <a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">(</span><a href="#145232" title="XElem">value</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145341" title="(x: net.liftweb.json.JsonAST.JField)List[net.liftweb.json.JsonAST.JField]">::</a> <a href="#144615" title="(xs: List[(String, XElem)])List[net.liftweb.json.JsonAST.JField]">mkFields</a><span class="delimiter">(</span><a href="#145336" title="List[(String, XValue)]">xs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JObject">XNode</span><span class="delimiter">(</span><a title="List[(String, XElem)]" id="145355">xs</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#51392" title="(obj: List[net.liftweb.json.JsonAST.JField])net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">(</span><a href="#144615" title="(xs: List[(String, XElem)])List[net.liftweb.json.JsonAST.JField]">mkFields</a><span class="delimiter">(</span><a href="#145355" title="List[(String, XElem)]">xs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JArray">XArray</span><span class="delimiter">(</span><a title="List[XElem]" id="145360">elems</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#51423" title="(arr: List[net.liftweb.json.JsonAST.JValue])net.liftweb.json.JsonAST.JArray">JArray</a><span class="delimiter">(</span><a href="#145360" title="List[XElem]">elems</a>.<span title="(f: XElem =&gt; net.liftweb.json.package.JValue)(implicit bf: scala.collection.generic.CanBuildFrom[List[XElem],net.liftweb.json.package.JValue,List[net.liftweb.json.JsonAST.JValue]])List[net.liftweb.json.JsonAST.JValue]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.json.package.JValue,List[net.liftweb.json.package.JValue]]" class="delimiter">(</span><a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(xs: List[(String, XElem)])List[net.liftweb.json.JsonAST.JField]" id="144615">mkFields</a><span class="delimiter">(</span><a title="List[(String, XElem)]" id="145249">xs</a>: <span title="List[(String, XElem)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, XElem<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> = 
      <a href="#145249" title="List[(String, XElem)]">xs</a>.<span title="(f: (String, XElem) =&gt; scala.collection.GenTraversableOnce[net.liftweb.json.JsonAST.JField])(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, XElem)],net.liftweb.json.JsonAST.JField,List[net.liftweb.json.JsonAST.JField]])List[net.liftweb.json.JsonAST.JField]">flatMap</span> <a href="#145266" title="List[net.liftweb.json.JsonAST.JField]" class="delimiter">{</a> <span class="keyword">case</span> <span title="List[net.liftweb.json.JsonAST.JField]" class="delimiter">(</span><a title="String" id="145269">name</a>, <a title="XElem" id="145270">value</a><span class="delimiter">)</span> =&gt; <span title="(_1: XElem, _2: net.liftweb.json.package.JValue)(XElem, net.liftweb.json.package.JValue)" class="delimiter">(</span><a href="#145270" title="XElem">value</a>, <a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">(</span><a href="#145270" title="XElem">value</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="List[net.liftweb.json.JsonAST.JField]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="comment">// This special case is needed to flatten nested objects which resulted from</span>
        <span class="comment">// XML attributes. Flattening keeps transformation more predicatable.  </span>
        <span class="comment">// &lt;a&gt;&lt;foo id=&quot;1&quot;&gt;x&lt;/foo&gt;&lt;/a&gt; -&gt; {&quot;a&quot;:{&quot;foo&quot;:{&quot;foo&quot;:&quot;x&quot;,&quot;id&quot;:&quot;1&quot;}}} vs</span>
        <span class="comment">// &lt;a&gt;&lt;foo id=&quot;1&quot;&gt;x&lt;/foo&gt;&lt;/a&gt; -&gt; {&quot;a&quot;:{&quot;foo&quot;:&quot;x&quot;,&quot;id&quot;:&quot;1&quot;}}</span>
        <span class="keyword">case</span> <span title="List[net.liftweb.json.JsonAST.JField]" class="delimiter">(</span>XLeaf<span class="delimiter">(</span><a title="(String, XElem)" id="145279">v</a>, <a title="(String, XValue)" id="145286">x</a> :: <a title="List[(String, XValue)]" id="145287">xs</a><span class="delimiter">)</span>, <a title="net.liftweb.json.package.JObject" id="145288">o</a>: <a href="JsonAST.scala.html#48530" title="net.liftweb.json.package.JObject">JObject</a><span class="delimiter">)</span> =&gt; <a href="#145288" title="net.liftweb.json.package.JObject">o</a>.<a href="JsonAST.scala.html#50169" title="=&gt; List[net.liftweb.json.JsonAST.JField]">obj</a>
        <span class="keyword">case</span> <span title="List[net.liftweb.json.JsonAST.JField]" class="delimiter">(</span>_, <a title="net.liftweb.json.package.JValue" id="145291">json</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#50050" title="(name: String, value: net.liftweb.json.JsonAST.JValue)net.liftweb.json.JsonAST.JField">JField</a><span class="delimiter">(</span><a href="#145269" title="String">name</a>, <a href="#145291" title="net.liftweb.json.package.JValue">json</a><span class="delimiter">)</span> <a href="#145292" title="(x: net.liftweb.json.JsonAST.JField)List[net.liftweb.json.JsonAST.JField]">::</a> <span title="object Nil">Nil</span> <span class="delimiter">}</span><span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(xml: scala.xml.NodeSeq)List[XElem]" id="144616">buildNodes</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="145410">xml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <span title="List[XElem]">List</span><span class="delimiter">[</span>XElem<span class="delimiter">]</span> = <a href="#145410" title="scala.xml.NodeSeq">xml</a> <span title="List[XElem]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="List[XElem]" id="145411">n</a>: <span title="scala.xml.Node">Node</span> =&gt;
        <span title="List[XElem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#144595" title="(node: scala.xml.Node)Boolean">empty_?</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145045" title="(value: (String, XElem), attrs: List[(String, XValue)])XLeaf">XLeaf</a><span class="delimiter">(</span><span title="(_1: java.lang.String, _2: XValue)(java.lang.String, XValue)" class="delimiter">(</span><a href="#144599" title="(n: scala.xml.Node)java.lang.String">nameOf</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span>, <a href="#144899" title="(value: String)XValue">XValue</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#144600" title="(n: scala.xml.Node)List[(String, XValue)]">buildAttrs</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145412" title="(x: XLeaf)List[XLeaf]">::</a> <span title="object Nil">Nil</span>
        <span class="keyword">else</span> <span title="List[XElem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#144596" title="(node: scala.xml.Node)Boolean">leaf_?</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145045" title="(value: (String, XElem), attrs: List[(String, XValue)])XLeaf">XLeaf</a><span class="delimiter">(</span><span title="(_1: java.lang.String, _2: XValue)(java.lang.String, XValue)" class="delimiter">(</span><a href="#144599" title="(n: scala.xml.Node)java.lang.String">nameOf</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span>, <a href="#144899" title="(value: String)XValue">XValue</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a>.<span title="=&gt; String">text</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#144600" title="(n: scala.xml.Node)List[(String, XValue)]">buildAttrs</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145432" title="(x: XLeaf)List[XLeaf]">::</a> <span title="object Nil">Nil</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.xml.NodeSeq" id="145442">children</a> = <a href="#144598" title="(n: scala.xml.Node)scala.xml.NodeSeq">directChildren</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span>
          <a href="#145119" title="(fields: List[(String, XElem)])XNode">XNode</a><span class="delimiter">(</span><a href="#144600" title="(n: scala.xml.Node)List[(String, XValue)]">buildAttrs</a><span class="delimiter">(</span><a href="#145411" title="scala.xml.Node">n</a><span class="delimiter">)</span> <a href="#145448" title="(prefix: List[(java.lang.String, XElem)])List[(java.lang.String, XElem)]">:::</a> <a href="#145442" title="scala.xml.NodeSeq">children</a>.<span title="(f: scala.xml.Node =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,java.lang.String,scala.collection.immutable.Seq[java.lang.String]])scala.collection.immutable.Seq[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq.Coll,java.lang.String,scala.collection.immutable.Seq[java.lang.String]]" class="delimiter">(</span><a href="#144599" title="(n: scala.xml.Node)java.lang.String">nameOf</a><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span>.<span title="(that: scala.collection.GenIterable[XElem])(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],(java.lang.String, XElem),List[(java.lang.String, XElem)]])List[(java.lang.String, XElem)]">zip</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(java.lang.String, XElem),List[(java.lang.String, XElem)]]" class="delimiter">(</span><a href="#144616" title="(xml: scala.xml.NodeSeq)List[XElem]">buildNodes</a><span class="delimiter">(</span><a href="#145442" title="scala.xml.NodeSeq">children</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145443" title="(x: XNode)List[XNode]">::</a> <span title="object Nil">Nil</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="List[XElem]" id="145634">nodes</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> =&gt; 
        <span class="keyword">val</span> <a title="scala.collection.immutable.Seq[String]" id="145635">allLabels</a> = <a href="#145634" title="scala.xml.NodeSeq">nodes</a>.<span title="(f: scala.xml.Node =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,String,scala.collection.immutable.Seq[String]])scala.collection.immutable.Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq.Coll,String,scala.collection.immutable.Seq[String]]" class="delimiter">(</span><a href="#145652" title="scala.xml.Node">_</a>.<span title="=&gt; String">label</span><span class="delimiter">)</span>
        <span title="List[XElem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#144597" title="(nodeNames: Seq[String])Boolean">array_?</a><span class="delimiter">(</span><a href="#145635" title="scala.collection.immutable.Seq[String]">allLabels</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="XArray" id="145685">arr</a> = <a href="#145182" title="(elems: List[XElem])XArray">XArray</a><span class="delimiter">(</span><a href="#145634" title="scala.xml.NodeSeq">nodes</a>.<span title="=&gt; List[scala.xml.Node]">toList</span>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[XElem])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.xml.Node],XElem,List[XElem]])List[XElem]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,XElem,List[XElem]]" class="delimiter">{</span> <a title="scala.xml.Node" id="145709">n</a> =&gt; 
            <span title="List[XElem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#144596" title="(node: scala.xml.Node)Boolean">leaf_?</a><span class="delimiter">(</span><a href="#145709" title="scala.xml.Node">n</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#145709" title="scala.xml.Node">n</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#144899" title="(value: String)XValue">XValue</a><span class="delimiter">(</span><a href="#145709" title="scala.xml.Node">n</a>.<span title="=&gt; String">text</span><span class="delimiter">)</span> <a href="#145717" title="(x: XValue)List[XValue]">::</a> <span title="object Nil">Nil</span>
            <span class="keyword">else</span> <a href="#144616" title="(xml: scala.xml.NodeSeq)List[XElem]">buildNodes</a><span class="delimiter">(</span><a href="#145709" title="scala.xml.Node">n</a><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <a href="#145045" title="(value: (String, XElem), attrs: List[(String, XValue)])XLeaf">XLeaf</a><span class="delimiter">(</span><span title="(_1: String, _2: XArray)(String, XArray)" class="delimiter">(</span><a href="#145635" title="(idx: Int)String">allLabels</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="#145685" title="XArray">arr</a><span class="delimiter">)</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span> <a href="#145751" title="(x: XLeaf)List[XLeaf]">::</a> <span title="object Nil">Nil</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#145634" title="scala.xml.NodeSeq">nodes</a>.<span title="=&gt; List[scala.xml.Node]">toList</span>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[XElem])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.xml.Node],XElem,List[XElem]])List[XElem]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,XElem,List[XElem]]" class="delimiter">(</span><a href="#144616" title="(xml: scala.xml.NodeSeq)List[XElem]">buildNodes</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <a href="#144616" title="(xml: scala.xml.NodeSeq)List[XElem]">buildNodes</a><span class="delimiter">(</span><a href="#144593" title="scala.xml.NodeSeq">xml</a><span class="delimiter">)</span> <span title="net.liftweb.json.package.JValue" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#145848" title="net.liftweb.json.package.JValue">List</a><span class="delimiter">(</span><a title="XLeaf" id="145859">x</a> @ XLeaf<span class="delimiter">(</span>_, _ :: _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">(</span><a href="#145859" title="XLeaf">x</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#145865" title="net.liftweb.json.JsonAST.JObject">List</a><span class="delimiter">(</span><a title="XElem" id="145876">x</a><span class="delimiter">)</span> =&gt; <a href="JsonAST.scala.html#51392" title="(obj: List[net.liftweb.json.JsonAST.JField])net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">(</span><a href="JsonAST.scala.html#50050" title="(name: String, value: net.liftweb.json.JsonAST.JValue)net.liftweb.json.JsonAST.JField">JField</a><span class="delimiter">(</span><a href="#144599" title="(n: scala.xml.Node)java.lang.String">nameOf</a><span class="delimiter">(</span><a href="#144593" title="scala.xml.NodeSeq">xml</a>.<span title="=&gt; scala.xml.Node">head</span><span class="delimiter">)</span>, <a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">(</span><a href="#145876" title="XElem">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#145881" title="(x: net.liftweb.json.JsonAST.JField)List[net.liftweb.json.JsonAST.JField]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.json.JsonAST.JArray" id="145905">x</a> =&gt; <a href="JsonAST.scala.html#51423" title="(arr: List[net.liftweb.json.JsonAST.JValue])net.liftweb.json.JsonAST.JArray">JArray</a><span class="delimiter">(</span><a href="#145905" title="List[XElem]">x</a>.<span title="(f: XElem =&gt; net.liftweb.json.package.JValue)(implicit bf: scala.collection.generic.CanBuildFrom[List[XElem],net.liftweb.json.package.JValue,List[net.liftweb.json.JsonAST.JValue]])List[net.liftweb.json.JsonAST.JValue]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.json.package.JValue,List[net.liftweb.json.package.JValue]]" class="delimiter">(</span><a href="#144614" title="(x: XElem)net.liftweb.json.package.JValue">toJValue</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Convert given JSON to XML.
   * &lt;p&gt;
   * Following rules are used in conversion.
   * &lt;ul&gt;
   *   &lt;li&gt;JSON primitives are converted to XML leaf elements&lt;/li&gt;
   *   &lt;li&gt;JSON objects are converted to XML elements&lt;/li&gt;
   *   &lt;li&gt;JSON arrays are recursively converted to XML elements&lt;/li&gt;
   * &lt;/ul&gt;
   * &lt;p&gt;
   * Use &lt;code&gt;map&lt;/code&gt; function to preprocess JSON before conversion to adjust
   * the end result. For instance a common conversion is to encode arrays as comma
   * separated Strings since XML does not have array type.
   * &lt;p&gt;&lt;pre&gt;
   * toXml(json map {
   *   case JField(&quot;nums&quot;,JArray(ns)) =&gt; JField(&quot;nums&quot;,JString(ns.map(_.values).mkString(&quot;,&quot;)))
   *   case x =&gt; x
   * })
   * &lt;/pre&gt;
   */</span>
  <span class="keyword">def</span> <a title="(json: net.liftweb.json.package.JValue)scala.xml.NodeSeq" id="144589">toXml</a><span class="delimiter">(</span><a title="net.liftweb.json.package.JValue" id="145955">json</a>: <a href="JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq" id="145957">toXml</a><span class="delimiter">(</span><a title="String" id="145958">name</a>: <span title="String">String</span>, <a title="net.liftweb.json.package.JValue" id="145959">json</a>: <a href="JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="#145959" title="net.liftweb.json.package.JValue">json</a> <span title="scala.xml.NodeSeq" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.Xml.XmlNode">JObject</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JField]" id="145961">fields</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.json.Xml.XmlNode" class="keyword">new</span> <a href="#144590" title="net.liftweb.json.Xml.XmlNode">XmlNode</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#145961" title="List[net.liftweb.json.JsonAST.JField]">fields</a> <span title="(f: net.liftweb.json.JsonAST.JField =&gt; scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.json.JsonAST.JField],scala.xml.Node,Seq[scala.xml.Node]])Seq[scala.xml.Node]">flatMap</span> <span class="delimiter">{</span> <a title="net.liftweb.json.JsonAST.JField" id="145994">f</a> =&gt; <a href="#145957" title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq">toXml</a><span class="delimiter">(</span><a href="#145994" title="net.liftweb.json.JsonAST.JField">f</a>.<a href="JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#145994" title="net.liftweb.json.JsonAST.JField">f</a>.<a href="JsonAST.scala.html#50114" title="=&gt; net.liftweb.json.JsonAST.JValue">value</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scala.xml.NodeSeq">JArray</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JValue]" id="146024">xs</a><span class="delimiter">)</span> =&gt; <a href="#146024" title="List[net.liftweb.json.JsonAST.JValue]">xs</a> <span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">flatMap</span> <span class="delimiter">{</span> <a title="net.liftweb.json.JsonAST.JValue" id="146075">v</a> =&gt; <a href="#145957" title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq">toXml</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#146075" title="net.liftweb.json.JsonAST.JValue">v</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.Xml.XmlNode">JField</span><span class="delimiter">(</span><a title="String" id="146108">n</a>, <a title="net.liftweb.json.JsonAST.JValue" id="146109">v</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.json.Xml.XmlNode" class="keyword">new</span> <a href="#144590" title="net.liftweb.json.Xml.XmlNode">XmlNode</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#145957" title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq">toXml</a><span class="delimiter">(</span><a href="#146108" title="String">n</a>, <a href="#146109" title="net.liftweb.json.JsonAST.JValue">v</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.Xml.XmlElem">JInt</span><span class="delimiter">(</span><a title="BigInt" id="146110">x</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.json.Xml.XmlElem" class="keyword">new</span> <a href="#144591" title="net.liftweb.json.Xml.XmlElem">XmlElem</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#146110" title="BigInt">x</a>.<span title="()String">toString</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.Xml.XmlElem">JDouble</span><span class="delimiter">(</span><a title="Double" id="146120">x</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.json.Xml.XmlElem" class="keyword">new</span> <a href="#144591" title="net.liftweb.json.Xml.XmlElem">XmlElem</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#146120" title="Double">x</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.Xml.XmlElem">JString</span><span class="delimiter">(</span><a title="String" id="146121">x</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.json.Xml.XmlElem" class="keyword">new</span> <a href="#144591" title="net.liftweb.json.Xml.XmlElem">XmlElem</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#146121" title="String">x</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.Xml.XmlElem">JBool</span><span class="delimiter">(</span><a title="Boolean" id="146122">x</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.json.Xml.XmlElem" class="keyword">new</span> <a href="#144591" title="net.liftweb.json.Xml.XmlElem">XmlElem</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <a href="#146122" title="Boolean">x</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="package.scala.html#15382" title="net.liftweb.json.Xml.XmlElem">JNull</a> =&gt; <span title="net.liftweb.json.Xml.XmlElem" class="keyword">new</span> <a href="#144591" title="net.liftweb.json.Xml.XmlElem">XmlElem</a><span class="delimiter">(</span><a href="#145958" title="String">name</a>, <span title="java.lang.String(&quot;null&quot;)" class="string">&quot;null&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="package.scala.html#15380" title="scala.xml.Text">JNothing</a> =&gt; <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#145955" title="net.liftweb.json.package.JValue">json</a> <span title="scala.xml.NodeSeq" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scala.xml.NodeSeq">JField</span><span class="delimiter">(</span><a title="String" id="146127">n</a>, <a title="net.liftweb.json.JsonAST.JValue" id="146128">v</a><span class="delimiter">)</span> =&gt; <a href="#145957" title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq">toXml</a><span class="delimiter">(</span><a href="#146127" title="String">n</a>, <a href="#146128" title="net.liftweb.json.JsonAST.JValue">v</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scala.xml.NodeSeq">JObject</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JField]" id="146130">fields</a><span class="delimiter">)</span> =&gt; <a href="#146130" title="List[net.liftweb.json.JsonAST.JField]">fields</a> <span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">flatMap</span> <span class="delimiter">{</span> <a title="net.liftweb.json.JsonAST.JField" id="146181">f</a> =&gt; <a href="#145957" title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq">toXml</a><span class="delimiter">(</span><a href="#146181" title="net.liftweb.json.JsonAST.JField">f</a>.<a href="JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#146181" title="net.liftweb.json.JsonAST.JField">f</a>.<a href="JsonAST.scala.html#50114" title="=&gt; net.liftweb.json.JsonAST.JValue">value</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="scala.xml.NodeSeq" id="146212">x</a> =&gt; <a href="#145957" title="(name: String, json: net.liftweb.json.package.JValue)scala.xml.NodeSeq">toXml</a><span class="delimiter">(</span><span title="java.lang.String(&quot;root&quot;)" class="string">&quot;root&quot;</span>, <a href="#146212" title="net.liftweb.json.package.JValue">x</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>json<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class XmlNode extends scala.xml.Elem with ScalaObject" id="144590">XmlNode</a><a href="#144590" title="ScalaObject" class="delimiter">(</a><a title="String" id="145967">name</a>: <span title="String">String</span>, <a title="Seq[scala.xml.Node]" id="145968">children</a>: <span title="Seq[scala.xml.Node]">Seq</span><span class="delimiter">[</span>Node<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="scala.xml.Elem">Elem</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#145967" title="String">name</a>, xml.<span title="object scala.xml.Null">Null</span>, <span title="object scala.xml.TopScope">TopScope</span>, <a href="#145968" title="Seq[scala.xml.Node]">children</a> :_*<span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>json<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class XmlElem extends scala.xml.Elem with ScalaObject" id="144591">XmlElem</a><a href="#144591" title="ScalaObject" class="delimiter">(</a><a title="String" id="146116">name</a>: <span title="String">String</span>, <a title="String" id="146117">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="scala.xml.Elem">Elem</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#146116" title="String">name</a>, xml.<span title="object scala.xml.Null">Null</span>, <span title="object scala.xml.TopScope">TopScope</span>, <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><a href="#146117" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>