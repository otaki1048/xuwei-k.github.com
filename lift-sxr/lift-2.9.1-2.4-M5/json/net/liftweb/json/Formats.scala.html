<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>json/net/liftweb/json/Formats.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2009-2010 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> json

<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Date, TimeZone<span class="delimiter">}</span>

<span class="comment">/** Formats to use when converting JSON.
 * Formats are usually configured by using an implicit parameter:
 * &lt;pre&gt;
 * implicit val formats = net.liftweb.json.DefaultFormats
 * &lt;/pre&gt;
 */</span>
<span class="keyword">trait</span> <a title="trait Formats extends java.lang.Object with ScalaObject" id="11107">Formats</a> <span title="ScalaObject" class="delimiter">{</span> self: Formats =&gt;
  <span class="keyword">val</span> <a title="=&gt; net.liftweb.json.DateFormat" id="53132">dateFormat</a>: <a href="#11108" title="net.liftweb.json.DateFormat">DateFormat</a>
  <span class="keyword">val</span> <a title="net.liftweb.json.TypeHints" id="53133">typeHints</a>: <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a> = <a href="#131862" title="object net.liftweb.json.NoTypeHints">NoTypeHints</a>
  <span class="keyword">val</span> <a title="List[net.liftweb.json.Serializer[_]]" id="53135">customSerializers</a>: <span title="List[net.liftweb.json.Serializer[_]]">List</span><span class="delimiter">[</span>Serializer<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="object Nil">Nil</span>
  <span class="keyword">val</span> <a title="List[(Class[_], net.liftweb.json.FieldSerializer[_])]" id="53137">fieldSerializers</a>: <span title="List[(Class[_], net.liftweb.json.FieldSerializer[_])]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, FieldSerializer<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The name of the field in JSON where type hints are added (jsonClass by default)
   */</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="53139">typeHintFieldName</a> = <span title="java.lang.String(&quot;jsonClass&quot;)" class="string">&quot;jsonClass&quot;</span>

  <span class="comment">/**
   * Parameter name reading strategy. By deafult 'paranamer' is used.
   */</span>
  <span class="keyword">val</span> <a title="net.liftweb.json.ParameterNameReader" id="53141">parameterNameReader</a>: <a href="Meta.scala.html#11167" title="net.liftweb.json.ParameterNameReader">ParameterNameReader</a> = <a href="Meta.scala.html#11168" title="object net.liftweb.json.Meta">Meta</a>.<a href="Meta.scala.html#53206" title="object net.liftweb.json.Meta.ParanamerReader">ParanamerReader</a>

  <span class="comment">/**
   * Adds the specified type hints to this formats.
   */</span>
  <span class="keyword">def</span> <a title="(extraHints: net.liftweb.json.TypeHints)net.liftweb.json.Formats" id="53143">+</a> <span class="delimiter">(</span><a title="net.liftweb.json.TypeHints" id="130709">extraHints</a>: <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a><span class="delimiter">)</span>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a> = <a href="#130711" title="java.lang.Object with net.liftweb.json.Formats{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.json.Formats" id="130711">Formats</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.json.DateFormat" id="130715">dateFormat</a> = <a href="#11107" title="Formats.this.type">Formats</a>.<span class="keyword">this</span>.<a href="#53132" title="=&gt; net.liftweb.json.DateFormat">dateFormat</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="java.lang.String" id="130717">typeHintFieldName</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53139" title="=&gt; java.lang.String">typeHintFieldName</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.ParameterNameReader" id="130719">parameterNameReader</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53141" title="=&gt; net.liftweb.json.ParameterNameReader">parameterNameReader</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.TypeHints" id="130721">typeHints</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53133" title="=&gt; net.liftweb.json.TypeHints">typeHints</a> <a href="#121829" title="(hints: net.liftweb.json.TypeHints)net.liftweb.json.TypeHints">+</a> <a href="#130709" title="net.liftweb.json.TypeHints">extraHints</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[net.liftweb.json.Serializer[_]]" id="130723">customSerializers</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53135" title="=&gt; List[net.liftweb.json.Serializer[_]]">customSerializers</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[(Class[_], net.liftweb.json.FieldSerializer[_])]" id="130725">fieldSerializers</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53137" title="=&gt; List[(Class[_], net.liftweb.json.FieldSerializer[_])]">fieldSerializers</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Adds the specified custom serializer to this formats.
   */</span>
  <span class="keyword">def</span> <a title="(newSerializer: net.liftweb.json.Serializer[_])net.liftweb.json.Formats" id="53144">+</a> <span class="delimiter">(</span><a title="net.liftweb.json.Serializer[_]" id="130731">newSerializer</a>: <a href="#11109" title="net.liftweb.json.Serializer[_]">Serializer</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a> = <a href="#130736" title="java.lang.Object with net.liftweb.json.Formats{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.json.Formats" id="130736">Formats</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.json.DateFormat" id="130740">dateFormat</a> = <a href="#11107" title="Formats.this.type">Formats</a>.<span class="keyword">this</span>.<a href="#53132" title="=&gt; net.liftweb.json.DateFormat">dateFormat</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="java.lang.String" id="130742">typeHintFieldName</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53139" title="=&gt; java.lang.String">typeHintFieldName</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.ParameterNameReader" id="130744">parameterNameReader</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53141" title="=&gt; net.liftweb.json.ParameterNameReader">parameterNameReader</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.TypeHints" id="130746">typeHints</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53133" title="=&gt; net.liftweb.json.TypeHints">typeHints</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[net.liftweb.json.Serializer[_]]" id="130748">customSerializers</a> = <a href="#130731" title="net.liftweb.json.Serializer[_]">newSerializer</a> <a href="#130752" title="(x: net.liftweb.json.Serializer[_])List[net.liftweb.json.Serializer[_]]">::</a> <a href="#11107" title="Formats.this.type">self</a>.<a href="#53135" title="=&gt; List[net.liftweb.json.Serializer[_]]">customSerializers</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[(Class[_], net.liftweb.json.FieldSerializer[_])]" id="130750">fieldSerializers</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53137" title="=&gt; List[(Class[_], net.liftweb.json.FieldSerializer[_])]">fieldSerializers</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Adds the specified custom serializers to this formats.
   */</span>
  <span class="keyword">def</span> <a title="(newSerializers: Traversable[net.liftweb.json.Serializer[_]])net.liftweb.json.Formats" id="53145">++</a> <span class="delimiter">(</span><a title="Traversable[net.liftweb.json.Serializer[_]]" id="130767">newSerializers</a>: <span title="Traversable[net.liftweb.json.Serializer[_]]">Traversable</span><span class="delimiter">[</span>Serializer<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a> =
    <a href="#130767" title="Traversable[net.liftweb.json.Serializer[_]]">newSerializers</a>.<span title="(z: net.liftweb.json.Formats)(op: (net.liftweb.json.Formats, net.liftweb.json.Serializer[_]) =&gt; net.liftweb.json.Formats)net.liftweb.json.Formats">foldLeft</span><span class="delimiter">(</span><a href="#11107" title="net.liftweb.json.Formats" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#130784" title="net.liftweb.json.Formats">_</a> <a href="#53144" title="(newSerializer: net.liftweb.json.Serializer[_])net.liftweb.json.Formats">+</a> <a href="#130785" title="net.liftweb.json.Serializer[_]">_</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Adds a field serializer for a given type to this formats.
   */</span>
  <span class="keyword">def</span> <a title="[A](newSerializer: net.liftweb.json.FieldSerializer[A])(implicit mf: Manifest[A])net.liftweb.json.Formats" id="53146">+</a> <span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="53148">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.json.FieldSerializer[A]" id="130788">newSerializer</a>: <a href="FieldSerializer.scala.html#11099" title="net.liftweb.json.FieldSerializer[A]">FieldSerializer</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Manifest[A]" id="130789">mf</a>: <span title="Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a> = <a href="#130808" title="java.lang.Object with net.liftweb.json.Formats{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.json.Formats" id="130808">Formats</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.json.DateFormat" id="130812">dateFormat</a> = <a href="#11107" title="Formats.this.type">Formats</a>.<span class="keyword">this</span>.<a href="#53132" title="=&gt; net.liftweb.json.DateFormat">dateFormat</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="java.lang.String" id="130814">typeHintFieldName</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53139" title="=&gt; java.lang.String">typeHintFieldName</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.ParameterNameReader" id="130816">parameterNameReader</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53141" title="=&gt; net.liftweb.json.ParameterNameReader">parameterNameReader</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.TypeHints" id="130818">typeHints</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53133" title="=&gt; net.liftweb.json.TypeHints">typeHints</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[net.liftweb.json.Serializer[_]]" id="130820">customSerializers</a> = <a href="#11107" title="Formats.this.type">self</a>.<a href="#53135" title="=&gt; List[net.liftweb.json.Serializer[_]]">customSerializers</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[(Class[_], net.liftweb.json.FieldSerializer[_])]" id="130822">fieldSerializers</a> = <span title="(_1: java.lang.Class[_$1], _2: net.liftweb.json.FieldSerializer[A])(java.lang.Class[_$1], net.liftweb.json.FieldSerializer[A])" class="delimiter">(</span><a href="#130789" title="Manifest[A]">mf</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#130788" title="net.liftweb.json.FieldSerializer[A]">newSerializer</a><span class="delimiter">)</span> <a href="#130824" title="(x: (Class[_], net.liftweb.json.FieldSerializer[_]))List[(Class[_], net.liftweb.json.FieldSerializer[_])]">::</a> <a href="#11107" title="Formats.this.type">self</a>.<a href="#53137" title="=&gt; List[(Class[_], net.liftweb.json.FieldSerializer[_])]">fieldSerializers</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>json<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(clazz: Class[_])Option[net.liftweb.json.FieldSerializer[_]]" id="53149">fieldSerializer</a><span class="delimiter">(</span><a title="Class[_]" id="123758">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[net.liftweb.json.FieldSerializer[_]]">Option</span><span class="delimiter">[</span>FieldSerializer<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#11112" title="object net.liftweb.json.ClassDelta">ClassDelta</a>._

    <span class="keyword">val</span> <a title="scala.math.Ordering[(java.lang.Class[_], net.liftweb.json.FieldSerializer[_])]" id="130850">ord</a> = <span title="[T](implicit ord: scala.math.Ordering[T])scala.math.Ordering[T]">Ordering</span><span title="(implicit ord: scala.math.Ordering[Int])scala.math.Ordering[Int]" class="delimiter">[</span><span title="Int">Int</span><span class="delimiter">]</span>.<span title="[U](f: U =&gt; Int)scala.math.Ordering[U]">on</span><span title="(f: (Class[_], net.liftweb.json.FieldSerializer[_]) =&gt; Int)scala.math.Ordering[(Class[_], net.liftweb.json.FieldSerializer[_])]" class="delimiter">[</span><span title="(Class[_], net.liftweb.json.FieldSerializer[_])" class="delimiter">(</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, FieldSerializer<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="(Class[_], net.liftweb.json.FieldSerializer[_])" id="130911">x</a> =&gt; <a href="#121835" title="(class1: Class[_], class2: Class[_])Int">delta</a><span class="delimiter">(</span><a href="#130911" title="(Class[_], net.liftweb.json.FieldSerializer[_])">x</a>.<span title="=&gt; Class[_]">_1</span>, <a href="#123758" title="Class[_]">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#53137" title="=&gt; List[(Class[_], net.liftweb.json.FieldSerializer[_])]">fieldSerializers</a> <span title="(p: (Class[_], net.liftweb.json.FieldSerializer[_]) =&gt; Boolean)List[(Class[_], net.liftweb.json.FieldSerializer[_])]">filter</span> <span class="delimiter">(</span><a href="#130926" title="(Class[_], net.liftweb.json.FieldSerializer[_])">_</a>.<span title="=&gt; Class[_]">_1</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#123758" title="Class[_]">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Option[net.liftweb.json.FieldSerializer[_]]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="None.type">Nil</span> =&gt; <span title="object None">None</span>
      <span class="keyword">case</span> <a title="Some[net.liftweb.json.FieldSerializer[_$3]]" id="130930">xs</a>  =&gt; <span title="(x: net.liftweb.json.FieldSerializer[_$3])Some[net.liftweb.json.FieldSerializer[_$3]]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#130930" title="List[(Class[_], net.liftweb.json.FieldSerializer[_])]">xs</a> <span title="(implicit cmp: Ordering[(Class[_], net.liftweb.json.FieldSerializer[_])])(Class[_], net.liftweb.json.FieldSerializer[_])">min</span> <a href="#130850" title="scala.math.Ordering[(java.lang.Class[_], net.liftweb.json.FieldSerializer[_])]">ord</a><span class="delimiter">)</span>.<span title="=&gt; net.liftweb.json.FieldSerializer[_]">_2</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit format: net.liftweb.json.Formats)PartialFunction[Any,net.liftweb.json.package.JValue]" id="53150">customSerializer</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="121880">format</a>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span> =
    <a href="#53135" title="=&gt; List[net.liftweb.json.Serializer[_]]">customSerializers</a>.<span title="(z: PartialFunction[Any,net.liftweb.json.package.JValue])(f: (PartialFunction[Any,net.liftweb.json.package.JValue], net.liftweb.json.Serializer[_]) =&gt; PartialFunction[Any,net.liftweb.json.package.JValue])PartialFunction[Any,net.liftweb.json.package.JValue]">foldLeft</span><span class="delimiter">(</span><span title="(elems: (Any, Nothing)*)scala.collection.immutable.Map[Any,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="PartialFunction[Any,net.liftweb.json.package.JValue]">PartialFunction</span><span class="delimiter">[</span>Any, JValue<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="PartialFunction[Any,net.liftweb.json.package.JValue]" id="121906">acc</a>, <a title="net.liftweb.json.Serializer[_]" id="121907">x</a><span class="delimiter">)</span> =&gt;
      <a href="#121906" title="PartialFunction[Any,net.liftweb.json.package.JValue]">acc</a>.<span title="(that: PartialFunction[Any,net.liftweb.json.package.JValue])PartialFunction[Any,net.liftweb.json.package.JValue]">orElse</span><span class="delimiter">(</span><a href="#121907" title="net.liftweb.json.Serializer[_]">x</a>.<a href="#75546" title="(implicit format: net.liftweb.json.Formats)PartialFunction[Any,net.liftweb.json.package.JValue]">serialize</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit format: net.liftweb.json.Formats)PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any]" id="53151">customDeserializer</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="128928">format</a>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span> =
    <a href="#53135" title="=&gt; List[net.liftweb.json.Serializer[_]]">customSerializers</a>.<span title="(z: PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any])(f: (PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any], net.liftweb.json.Serializer[_]) =&gt; PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any])PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any]">foldLeft</span><span class="delimiter">(</span><span title="(elems: ((net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue), Nothing)*)scala.collection.immutable.Map[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any]">PartialFunction</span><span class="delimiter">[</span><span class="delimiter">(</span>TypeInfo, JValue<span class="delimiter">)</span>, Any<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any]" id="128952">acc</a>, <a title="net.liftweb.json.Serializer[_]" id="128953">x</a><span class="delimiter">)</span> =&gt;
      <a href="#128952" title="PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any]">acc</a>.<span title="(that: PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any])PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),Any]">orElse</span><span class="delimiter">(</span><a href="#128953" title="net.liftweb.json.Serializer[_]">x</a>.<a href="#75545" title="(implicit format: net.liftweb.json.Formats)PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.JsonAST.JValue),Any]">deserialize</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Conversions between String and Date.
 */</span>
<span class="keyword">trait</span> <a title="trait DateFormat extends java.lang.Object" id="11108">DateFormat</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(s: String)Option[java.util.Date]" id="78673">parse</a><span class="delimiter">(</span><a title="String" id="78675">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[java.util.Date]">Option</span><span class="delimiter">[</span>Date<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(d: java.util.Date)String" id="78674">format</a><span class="delimiter">(</span><a title="java.util.Date" id="78710">d</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span>: <span title="String">String</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Serializer[A] extends java.lang.Object" id="11109">Serializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="11110">A</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(implicit format: net.liftweb.json.Formats)PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),A]" id="75545">deserialize</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="75570">format</a>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),A]">PartialFunction</span><span class="delimiter">[</span><span class="delimiter">(</span>TypeInfo, JValue<span class="delimiter">)</span>, A<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(implicit format: net.liftweb.json.Formats)PartialFunction[Any,net.liftweb.json.package.JValue]" id="75546">serialize</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="75731">format</a>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="PartialFunction[Any,net.liftweb.json.package.JValue]">PartialFunction</span><span class="delimiter">[</span>Any, JValue<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/** Type hints can be used to alter the default conversion rules when converting
 * Scala instances into JSON and vice versa. Type hints must be used when converting
 * class which is not supported by default (for instance when class is not a case class).
 * &lt;p&gt;
 * Example:&lt;pre&gt;
 * class DateTime(val time: Long)
 *
 * val hints = new ShortTypeHints(classOf[DateTime] :: Nil) {
 *   override def serialize: PartialFunction[Any, JObject] = {
 *     case t: DateTime =&gt; JObject(JField(&quot;t&quot;, JInt(t.time)) :: Nil)
 *   }
 *
 *   override def deserialize: PartialFunction[(String, JObject), Any] = {
 *     case (&quot;DateTime&quot;, JObject(JField(&quot;t&quot;, JInt(t)) :: Nil)) =&gt; new DateTime(t.longValue)
 *   }
 * }
 * implicit val formats = DefaultFormats.withHints(hints)
 * &lt;/pre&gt;
 */</span>
<span class="keyword">trait</span> <a title="trait TypeHints extends java.lang.Object with ScalaObject" id="11111">TypeHints</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#11112" title="object net.liftweb.json.ClassDelta">ClassDelta</a>._

  <span class="keyword">val</span> <a title="=&gt; List[Class[_]]" id="121822">hints</a>: <span title="List[Class[_]]">List</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/** Return hint for given type.
   */</span>
  <span class="keyword">def</span> <a title="(clazz: Class[_])String" id="121823">hintFor</a><span class="delimiter">(</span><a title="Class[_]" id="121833">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span>

  <span class="comment">/** Return type for given hint.
   */</span>
  <span class="keyword">def</span> <a title="(hint: String)Option[Class[_]]" id="121824">classFor</a><span class="delimiter">(</span><a title="String" id="128723">hint</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(clazz: Class[_])Boolean" id="121825">containsHint_?</a><span class="delimiter">(</span><a title="Class[_]" id="121847">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#121822" title="=&gt; List[Class[_]]">hints</a> <span title="(p: Class[_] =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#121858" title="Class[_]">_</a> <span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span> <a href="#121847" title="Class[_]">clazz</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; PartialFunction[(String, net.liftweb.json.package.JObject),Any]" id="121826">deserialize</a>: <span title="PartialFunction[(String, net.liftweb.json.package.JObject),Any]">PartialFunction</span><span class="delimiter">[</span><span class="delimiter">(</span>String, JObject<span class="delimiter">)</span>, Any<span class="delimiter">]</span> = <span title="(elems: ((String, net.liftweb.json.package.JObject), Nothing)*)scala.collection.immutable.Map[(String, net.liftweb.json.package.JObject),Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,net.liftweb.json.package.JObject]" id="121827">serialize</a>: <span title="PartialFunction[Any,net.liftweb.json.package.JObject]">PartialFunction</span><span class="delimiter">[</span>Any, JObject<span class="delimiter">]</span> = <span title="(elems: (Any, Nothing)*)scala.collection.immutable.Map[Any,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.json.TypeHints]" id="121828">components</a>: <span title="List[net.liftweb.json.TypeHints]">List</span><span class="delimiter">[</span>TypeHints<span class="delimiter">]</span> = <span title="(xs: net.liftweb.json.TypeHints*)List[net.liftweb.json.TypeHints]">List</span><span class="delimiter">(</span><a href="#11111" title="net.liftweb.json.TypeHints" class="keyword">this</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Adds the specified type hints to this type hints.
   */</span>
  <span class="keyword">def</span> <a title="(hints: net.liftweb.json.TypeHints)net.liftweb.json.TypeHints" id="121829">+</a> <span class="delimiter">(</span><a title="net.liftweb.json.TypeHints" id="130727">hints</a>: <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a><span class="delimiter">)</span>: <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a> = <a href="#130993" title="(components: List[net.liftweb.json.TypeHints])TypeHints.this.CompositeTypeHints">CompositeTypeHints</a><span class="delimiter">(</span><a href="#130727" title="net.liftweb.json.TypeHints">hints</a>.<a href="#121828" title="=&gt; List[net.liftweb.json.TypeHints]">components</a> <a href="#131010" title="(prefix: List[net.liftweb.json.TypeHints])List[net.liftweb.json.TypeHints]">:::</a> <a href="#121828" title="=&gt; List[net.liftweb.json.TypeHints]">components</a><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>TypeHints<span class="delimiter">]</span> case <span class="keyword">class</span> <a title="class CompositeTypeHints extends java.lang.Object with net.liftweb.json.TypeHints with ScalaObject with Product with Serializable" id="130993">CompositeTypeHints</a><a href="#130993" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="List[net.liftweb.json.TypeHints]" id="131006">components</a>: <span title="List[net.liftweb.json.TypeHints]">List</span><span class="delimiter">[</span>TypeHints<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[Class[_]]" id="130998">hints</a>: <span title="List[Class[_]]">List</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#131006" title="=&gt; List[net.liftweb.json.TypeHints]">components</a>.<span title="(f: net.liftweb.json.TypeHints =&gt; scala.collection.GenTraversableOnce[Class[_]])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.json.TypeHints],Class[_],List[Class[_]]])List[Class[_]]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Class[_],List[Class[_]]]" class="delimiter">(</span><a href="#131065" title="net.liftweb.json.TypeHints">_</a>.<a href="#121822" title="=&gt; List[Class[_]]">hints</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Chooses most specific class.
     */</span>
    <span class="keyword">def</span> <a title="(clazz: Class[_])String" id="131000">hintFor</a><span class="delimiter">(</span><a title="Class[_]" id="131105">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#131006" title="=&gt; List[net.liftweb.json.TypeHints]">components</a>.<span title="(p: net.liftweb.json.TypeHints =&gt; Boolean)List[net.liftweb.json.TypeHints]">filter</span><span class="delimiter">(</span><a href="#131113" title="net.liftweb.json.TypeHints">_</a>.<a href="#121825" title="(clazz: Class[_])Boolean">containsHint_?</a><span class="delimiter">(</span><a href="#131105" title="Class[_]">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: net.liftweb.json.TypeHints =&gt; (java.lang.String, java.lang.Class[_$12]) forSome { type _$12 })(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.json.TypeHints],(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 },List[(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }]])List[(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 },List[(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }]]" class="delimiter">(</span><a title="net.liftweb.json.TypeHints" id="131139">th</a> =&gt; <span title="(_1: String, _2: Class[_$12])(String, Class[_$12])" class="delimiter">(</span><a href="#131139" title="net.liftweb.json.TypeHints">th</a>.<a href="#121823" title="(clazz: Class[_])String">hintFor</a><span class="delimiter">(</span><a href="#131105" title="Class[_]">clazz</a><span class="delimiter">)</span>, <a href="#131139" title="net.liftweb.json.TypeHints">th</a>.<a href="#121824" title="(hint: String)Option[Class[_]]">classFor</a><span class="delimiter">(</span><a href="#131139" title="net.liftweb.json.TypeHints">th</a>.<a href="#121823" title="(clazz: Class[_])String">hintFor</a><span class="delimiter">(</span><a href="#131105" title="Class[_]">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; Class[_])Class[_]">getOrElse</span><span class="delimiter">(</span><span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;hintFor/classFor not invertible for &quot;)" class="string">&quot;hintFor/classFor not invertible for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#131139" title="net.liftweb.json.TypeHints">th</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(lt: ((java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }, (java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }) =&gt; Boolean)List[(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }]">sort</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }" id="131194">x</a>, <a title="(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }" id="131195">y</a><span class="delimiter">)</span> =&gt; <a href="#121835" title="(class1: Class[_], class2: Class[_])Int">delta</a><span class="delimiter">(</span><a href="#131194" title="(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }">x</a>.<span title="(=&gt; java.lang.Class[_$12]) forSome { type _$12 }">_2</span>, <a href="#131105" title="Class[_]">clazz</a><span class="delimiter">)</span> <span title="(x: Int)Int">-</span> <a href="#121835" title="(class1: Class[_], class2: Class[_])Int">delta</a><span class="delimiter">(</span><a href="#131195" title="(java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }">y</a>.<span title="(=&gt; java.lang.Class[_$12]) forSome { type _$12 }">_2</span>, <a href="#131105" title="Class[_]">clazz</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="=&gt; (java.lang.String, java.lang.Class[_$12]) forSome { type _$12 }">head</span>.<span title="=&gt; java.lang.String">_1</span>

    <span class="keyword">def</span> <a title="(hint: String)Option[Class[_]]" id="131001">classFor</a><span class="delimiter">(</span><a title="String" id="131219">hint</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(h: net.liftweb.json.TypeHints)Boolean" id="131225">hasClass</a><span class="delimiter">(</span><a title="net.liftweb.json.TypeHints" id="131226">h</a>: <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a><span class="delimiter">)</span> =
        scala.util.control.<span title="object scala.util.control.Exception">Exception</span>.<span title="util.control.Exception.Catch[Nothing]">allCatch</span> <span title="(body: =&gt; Option[Class[_]])Option[Option[Class[_]]]">opt</span> <span class="delimiter">(</span><a href="#131226" title="net.liftweb.json.TypeHints">h</a>.<a href="#121824" title="(hint: String)Option[Class[_]]">classFor</a><span class="delimiter">(</span><a href="#131219" title="String">hint</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(f: Option[Class[_]] =&gt; Boolean)Option[Boolean]">map</span> <span class="delimiter">(</span><a href="#131549" title="Option[Class[_]]">_</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

      <a href="#131006" title="=&gt; List[net.liftweb.json.TypeHints]">components</a> <span title="(p: net.liftweb.json.TypeHints =&gt; Boolean)Option[net.liftweb.json.TypeHints]">find</span> <span class="delimiter">(</span><a href="#131225" title="(h: net.liftweb.json.TypeHints)Boolean">hasClass</a><span class="delimiter">)</span> <span title="(f: net.liftweb.json.TypeHints =&gt; Option[Class[_]])Option[Class[_]]">flatMap</span> <span class="delimiter">(</span><a href="#131567" title="net.liftweb.json.TypeHints">_</a>.<a href="#121824" title="(hint: String)Option[Class[_]]">classFor</a><span class="delimiter">(</span><a href="#131219" title="String">hint</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[(String, net.liftweb.json.package.JObject),Any]" id="131002">deserialize</a>: <span title="PartialFunction[(String, net.liftweb.json.package.JObject),Any]">PartialFunction</span><span class="delimiter">[</span><span class="delimiter">(</span>String, JObject<span class="delimiter">)</span>, Any<span class="delimiter">]</span> = <a href="#131006" title="=&gt; List[net.liftweb.json.TypeHints]">components</a>.<span title="[B](z: B)(f: (B, net.liftweb.json.TypeHints) =&gt; B)B">foldLeft</span><span title="(z: PartialFunction[(String, net.liftweb.json.package.JObject),Any])(f: (PartialFunction[(String, net.liftweb.json.package.JObject),Any], net.liftweb.json.TypeHints) =&gt; PartialFunction[(String, net.liftweb.json.package.JObject),Any])PartialFunction[(String, net.liftweb.json.package.JObject),Any]" class="delimiter">[</span><span title="PartialFunction[(String, net.liftweb.json.package.JObject),Any]">PartialFunction</span><span class="delimiter">[</span><span class="delimiter">(</span>String, JObject<span class="delimiter">)</span>,Any<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="(elems: ((String, net.liftweb.json.package.JObject), Nothing)*)scala.collection.immutable.Map[(String, net.liftweb.json.package.JObject),Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="PartialFunction[(String, net.liftweb.json.package.JObject),Any]" id="131599">result</a>, <a title="net.liftweb.json.TypeHints" id="131600">cur</a><span class="delimiter">)</span> =&gt; <a href="#131599" title="PartialFunction[(String, net.liftweb.json.package.JObject),Any]">result</a>.<span title="(that: PartialFunction[(String, net.liftweb.json.package.JObject),Any])PartialFunction[(String, net.liftweb.json.package.JObject),Any]">orElse</span><span class="delimiter">(</span><a href="#131600" title="net.liftweb.json.TypeHints">cur</a>.<a href="#121826" title="=&gt; PartialFunction[(String, net.liftweb.json.package.JObject),Any]">deserialize</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,net.liftweb.json.package.JObject]" id="131003">serialize</a>: <span title="PartialFunction[Any,net.liftweb.json.package.JObject]">PartialFunction</span><span class="delimiter">[</span>Any, JObject<span class="delimiter">]</span> = <a href="#131006" title="=&gt; List[net.liftweb.json.TypeHints]">components</a>.<span title="[B](z: B)(f: (B, net.liftweb.json.TypeHints) =&gt; B)B">foldLeft</span><span title="(z: PartialFunction[Any,net.liftweb.json.package.JObject])(f: (PartialFunction[Any,net.liftweb.json.package.JObject], net.liftweb.json.TypeHints) =&gt; PartialFunction[Any,net.liftweb.json.package.JObject])PartialFunction[Any,net.liftweb.json.package.JObject]" class="delimiter">[</span><span title="PartialFunction[Any,net.liftweb.json.package.JObject]">PartialFunction</span><span class="delimiter">[</span>Any, JObject<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="(elems: (Any, Nothing)*)scala.collection.immutable.Map[Any,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="PartialFunction[Any,net.liftweb.json.package.JObject]" id="131623">result</a>, <a title="net.liftweb.json.TypeHints" id="131624">cur</a><span class="delimiter">)</span> =&gt; <a href="#131623" title="PartialFunction[Any,net.liftweb.json.package.JObject]">result</a>.<span title="(that: PartialFunction[Any,net.liftweb.json.package.JObject])PartialFunction[Any,net.liftweb.json.package.JObject]">orElse</span><span class="delimiter">(</span><a href="#131624" title="net.liftweb.json.TypeHints">cur</a>.<a href="#121827" title="=&gt; PartialFunction[Any,net.liftweb.json.package.JObject]">serialize</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>json<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object net.liftweb.json.ClassDelta" id="11112">ClassDelta</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(class1: Class[_], class2: Class[_])Int" id="121835">delta</a><span class="delimiter">(</span><a title="Class[_]" id="130912">class1</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="Class[_]" id="130913">class2</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#130913" title="Class[_]">class2</a><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span>
    <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getInterfaces</span>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#130913" title="Class[_]">class2</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span>
    <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#130913" title="Class[_]">class2</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getInterfaces</span>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span>
    <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#130913" title="Class[_]">class2</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#121835" title="(class1: Class[_], class2: Class[_])Int">delta</a><span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a>, <a href="#130913" title="Class[_]">class2</a>.<span title="(()java.lang.Class[_ &gt;: _$18]) forSome { type _$18; type _$18 }">getSuperclass</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#130913" title="Class[_]">class2</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#121835" title="(class1: Class[_], class2: Class[_])Int">delta</a><span class="delimiter">(</span><a href="#130912" title="Class[_]">class1</a>.<span title="(()java.lang.Class[_ &gt;: _$17]) forSome { type _$17; type _$17 }">getSuperclass</span>, <a href="#130913" title="Class[_]">class2</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Don\'t call delta unless one class is assignable from the other&quot;)" class="string">&quot;Don't call delta unless one class is assignable from the other&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Do not use any type hints.
 */</span>
case <span class="keyword">object</span> <a href="#131857" title="object net.liftweb.json.NoTypeHints" id="131862">NoTypeHints</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="scala.collection.immutable.Nil.type" id="128995">hints</a> = <span title="object Nil">Nil</span>
  <span class="keyword">def</span> <a title="(clazz: Class[_])Nothing" id="128997">hintFor</a><span class="delimiter">(</span><a title="Class[_]" id="131842">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;NoTypeHints does not provide any type hints.&quot;)" class="string">&quot;NoTypeHints does not provide any type hints.&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(hint: String)None.type" id="128998">classFor</a><span class="delimiter">(</span><a title="String" id="131848">hint</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="object None">None</span>
<span class="delimiter">}</span>

<span class="comment">/** Use short class name as a type hint.
 */</span>
case <span class="keyword">class</span> <a title="class ShortTypeHints extends java.lang.Object with net.liftweb.json.TypeHints with ScalaObject with Product with Serializable" id="132757">ShortTypeHints</a><a href="#132757" title="ScalaObject" class="delimiter">(</a><a title="List[Class[_]]" id="132749">hints</a>: <span title="List[Class[_]]">List</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(clazz: Class[_])java.lang.String" id="131867">hintFor</a><span class="delimiter">(</span><a title="Class[_]" id="131882">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#131882" title="Class[_]">clazz</a>.<span title="()java.lang.String">getName</span>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#131882" title="Class[_]">clazz</a>.<span title="()java.lang.String">getName</span>.<span title="(x$1: java.lang.String)Int">lastIndexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span><span title="(x: Int)Int">+</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(hint: String)Option[Class[_]]" id="131868">classFor</a><span class="delimiter">(</span><a title="String" id="131898">hint</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#132749" title="=&gt; List[Class[_]]">hints</a> <span title="(p: Class[_] =&gt; Boolean)Option[Class[_]]">find</span> <span class="delimiter">(</span><a href="#131867" title="(clazz: Class[_])java.lang.String">hintFor</a><span class="delimiter">(</span><a href="#131907" title="Class[_]">_</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#131898" title="String">hint</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** Use full class name as a type hint.
 */</span>
case <span class="keyword">class</span> <a title="class FullTypeHints extends java.lang.Object with net.liftweb.json.TypeHints with ScalaObject with Product with Serializable" id="132742">FullTypeHints</a><a href="#132742" title="ScalaObject" class="delimiter">(</a><a title="List[Class[_]]" id="132734">hints</a>: <span title="List[Class[_]]">List</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(clazz: Class[_])java.lang.String" id="131980">hintFor</a><span class="delimiter">(</span><a title="Class[_]" id="131995">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#131995" title="Class[_]">clazz</a>.<span title="()java.lang.String">getName</span>
  <span class="keyword">def</span> <a title="(hint: String)Some[java.lang.Class[?0]] forSome { type ?0 }" id="131981">classFor</a><span class="delimiter">(</span><a title="String" id="132001">hint</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="(x: java.lang.Class[?0])Some[java.lang.Class[?0]]">Some</span><span class="delimiter">(</span><span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span>.<span title="(x$1: java.lang.String)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#132001" title="String">hint</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** Default date format is UTC time.
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.json.DefaultFormats" id="11122">DefaultFormats</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11124" title="net.liftweb.json.DefaultFormats">DefaultFormats</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="net.liftweb.json.ThreadLocal[java.text.SimpleDateFormat]" id="53160">losslessDate</a> = <span title="net.liftweb.json.ThreadLocal[java.text.SimpleDateFormat]" class="keyword">new</span> <a href="#11125" title="net.liftweb.json.ThreadLocal[java.text.SimpleDateFormat]">ThreadLocal</a><span class="delimiter">(</span><span title="(x$1: java.lang.String)java.text.SimpleDateFormat" class="keyword">new</span> java.text.<span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><span title="java.lang.String(&quot;yyyy-MM-dd\'T\'HH:mm:ss.SSS\'Z\'&quot;)" class="string">&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="java.util.TimeZone" id="53162">UTC</a> = <span title="object java.util.TimeZone">TimeZone</span>.<span title="(x$1: java.lang.String)java.util.TimeZone">getTimeZone</span><span class="delimiter">(</span><span title="java.lang.String(&quot;UTC&quot;)" class="string">&quot;UTC&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DefaultFormats extends java.lang.Object with net.liftweb.json.Formats with ScalaObject" id="11124">DefaultFormats</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11107" title="net.liftweb.json.Formats">Formats</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> java.text.<span class="delimiter">{</span>ParseException, SimpleDateFormat<span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="dateFormat extends java.lang.Object with net.liftweb.json.DateFormat" id="53154">dateFormat</a> = <a href="#132582" title="java.lang.Object with net.liftweb.json.DateFormat{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.json.DateFormat" id="132582">DateFormat</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: String)Option[java.util.Date]" id="132584">parse</a><span class="delimiter">(</span><a title="String" id="132587">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="(x: java.util.Date)Some[java.util.Date]">Some</span><span class="delimiter">(</span><a href="#132586" title="=&gt; java.text.SimpleDateFormat">formatter</a>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#132587" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="None.type" id="132619">e</a>: <span title="java.text.ParseException">ParseException</span> =&gt; <span title="object None">None</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(d: java.util.Date)java.lang.String" id="132585">format</a><span class="delimiter">(</span><a title="java.util.Date" id="132624">d</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> = <a href="#132586" title="=&gt; java.text.SimpleDateFormat">formatter</a>.<span title="(x$1: java.util.Date)java.lang.String">format</span><span class="delimiter">(</span><a href="#132624" title="java.util.Date">d</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="132586">formatter</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.text.SimpleDateFormat" id="132595">f</a> = <a href="#53156" title="=&gt; java.text.SimpleDateFormat">dateFormatter</a>
      <a href="#132595" title="java.text.SimpleDateFormat">f</a>.<span title="(x$1: java.util.TimeZone)Unit">setTimeZone</span><span class="delimiter">(</span><a href="#11122" title="object net.liftweb.json.DefaultFormats">DefaultFormats</a>.<a href="#53162" title="=&gt; java.util.TimeZone">UTC</a><span class="delimiter">)</span>
      <a href="#132595" title="java.text.SimpleDateFormat">f</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="53156">dateFormatter</a> = <span title="(x$1: java.lang.String)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><span title="java.lang.String(&quot;yyyy-MM-dd\'T\'HH:mm:ss\'Z\'&quot;)" class="string">&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** Lossless date format includes milliseconds too.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.Object with net.liftweb.json.DefaultFormats" id="53157">lossless</a> = <a href="#132683" title="java.lang.Object with net.liftweb.json.DefaultFormats" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.json.DefaultFormats" id="132683">DefaultFormats</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.text.SimpleDateFormat" id="132685">dateFormatter</a> = <a href="#11122" title="object net.liftweb.json.DefaultFormats">DefaultFormats</a>.<a href="#132077" title="()java.text.SimpleDateFormat">losslessDate</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Default formats with given &lt;code&gt;TypeHint&lt;/code&gt;s.
   */</span>
  <span class="keyword">def</span> <a title="(hints: net.liftweb.json.TypeHints)java.lang.Object with net.liftweb.json.DefaultFormats" id="53158">withHints</a><span class="delimiter">(</span><a title="net.liftweb.json.TypeHints" id="132703">hints</a>: <a href="#11111" title="net.liftweb.json.TypeHints">TypeHints</a><span class="delimiter">)</span> = <a href="#132706" title="java.lang.Object with net.liftweb.json.DefaultFormats{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.json.DefaultFormats" id="132706">DefaultFormats</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="net.liftweb.json.TypeHints" id="132708">typeHints</a> = <a href="#132703" title="net.liftweb.json.TypeHints">hints</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>json<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ThreadLocal[A] extends java.lang.ThreadLocal[A] with () =&gt; A with ScalaObject" id="11125">ThreadLocal</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="11126">A</a><span class="delimiter">]</span><a href="#11125" title="ScalaObject" class="delimiter">(</a><a title="=&gt; A" id="132079">init</a>: =&gt; A<span class="delimiter">)</span> <span class="keyword">extends</span> java.lang.<span title="java.lang.ThreadLocal[A]">ThreadLocal</span><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="keyword">with</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; A<span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()A" id="132076">initialValue</a> = <a href="#132079" title="=&gt; A">init</a>
  <span class="keyword">def</span> <a title="()A" id="132077">apply</a> = <a href="#11125" title="()A">get</a>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class CustomSerializer[A] extends java.lang.Object with net.liftweb.json.Serializer[A] with ScalaObject" id="11127">CustomSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="11128">A</a>: Manifest<span class="delimiter">]</span><span class="delimiter">(</span>
  <a title="net.liftweb.json.Formats =&gt; (PartialFunction[net.liftweb.json.package.JValue,A], PartialFunction[Any,net.liftweb.json.package.JValue])" id="78423">ser</a>: Formats =&gt; <span class="delimiter">(</span>PartialFunction<span class="delimiter">[</span>JValue, A<span class="delimiter">]</span>, PartialFunction<span class="delimiter">[</span>Any, JValue<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#11109" title="net.liftweb.json.Serializer[A]">Serializer</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.lang.Class[_]" id="76180">Class</a> = <span title="[T](implicit e: T)T">implicitly</span><a href="#76178" title="(implicit e: Manifest[A])Manifest[A]" class="delimiter">[</a><span title="Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; java.lang.Class[_]">erasure</span>

  <span class="keyword">def</span> <a title="(implicit format: net.liftweb.json.Formats)PartialFunction[(net.liftweb.json.TypeInfo, net.liftweb.json.package.JValue),A]" id="76182">deserialize</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="78350">format</a>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span> = <a href="#78354" title="A" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="A" class="delimiter">(</span>TypeInfo<span class="delimiter">(</span><a href="#76180" title="=&gt; java.lang.Class[_]">Class</a>, _<span class="delimiter">)</span>, <a title="net.liftweb.json.package.JValue" id="78363">json</a><span class="delimiter">)</span> =&gt; 
      <span title="A" class="keyword">if</span> <span class="delimiter">(</span><a href="#78423" title="(v1: net.liftweb.json.Formats)(PartialFunction[net.liftweb.json.package.JValue,A], PartialFunction[Any,net.liftweb.json.package.JValue])">ser</a><span class="delimiter">(</span><a href="#78350" title="net.liftweb.json.Formats">format</a><span class="delimiter">)</span>.<span title="=&gt; PartialFunction[net.liftweb.json.package.JValue,A]">_1</span>.<span title="(x: net.liftweb.json.package.JValue)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#78363" title="net.liftweb.json.package.JValue">json</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#78423" title="(v1: net.liftweb.json.Formats)(PartialFunction[net.liftweb.json.package.JValue,A], PartialFunction[Any,net.liftweb.json.package.JValue])">ser</a><span class="delimiter">(</span><a href="#78350" title="net.liftweb.json.Formats">format</a><span class="delimiter">)</span>.<span title="(v1: net.liftweb.json.package.JValue)A">_1</span><span class="delimiter">(</span><a href="#78363" title="net.liftweb.json.package.JValue">json</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <a href="Meta.scala.html#75722" title="(msg: String)net.liftweb.json.MappingException" class="keyword">new</a> <a href="Meta.scala.html#11170" title="net.liftweb.json.MappingException">MappingException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Can\'t convert &quot;)" class="string">&quot;Can't convert &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#78363" title="net.liftweb.json.package.JValue">json</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#76180" title="=&gt; java.lang.Class[_]">Class</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit format: net.liftweb.json.Formats)PartialFunction[Any,net.liftweb.json.package.JValue]" id="76183">serialize</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="78345">format</a>: <a href="#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span> = <a href="#78423" title="(v1: net.liftweb.json.Formats)(PartialFunction[net.liftweb.json.package.JValue,A], PartialFunction[Any,net.liftweb.json.package.JValue])">ser</a><span class="delimiter">(</span><a href="#78345" title="net.liftweb.json.Formats">format</a><span class="delimiter">)</span>.<span title="=&gt; PartialFunction[Any,net.liftweb.json.package.JValue]">_2</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>