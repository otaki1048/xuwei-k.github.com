<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>testkit/net/liftweb/mocks/MockHttpServletRequest.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2008-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> mocks

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>BufferedReader,ByteArrayInputStream,InputStreamReader<span class="delimiter">}</span>
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> java.security.Principal
<span class="keyword">import</span> java.text.ParseException
<span class="keyword">import</span> java.util.Date
<span class="keyword">import</span> java.util.Locale
<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Enumeration =&gt; JEnum<span class="delimiter">}</span>
<span class="keyword">import</span> java.util.<span class="delimiter">{</span>HashMap =&gt; JHash<span class="delimiter">}</span>
<span class="keyword">import</span> javax.servlet._
<span class="keyword">import</span> javax.servlet.http._

<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.xml.NodeSeq

<span class="comment">// Lift imports</span>
<span class="keyword">import</span> common.<span class="delimiter">{</span>Box,Empty<span class="delimiter">}</span>
<span class="keyword">import</span> util.Helpers

<span class="keyword">import</span> json.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#11132" title="object net.liftweb.json.JsonAST">JsonAST</a>._

<span class="comment">/**
 * A Mock ServletRequest. Change its state to create the request you are
 * interested in. At the very least, you will need to change method and path.
 *
 * There are several things that aren't supported:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;getRequestDispatcher - returns null always&lt;/li&gt;
 *   &lt;li&gt;getRequestedSessionId - always returns null. The related
 *       isRequestedSessionId... methods similarly all return false&lt;/li&gt;
 *   &lt;li&gt;getRealPath - simply returns the input string&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * @author Steve Jenson (stevej@pobox.com)
 * @author Derek Chen-Becker
 *
 * @param url The URL to extract from
 * @param contextPath The context path for this request. Defaults to &quot;&quot; per the Servlet API.
 * 
 */</span>
<span class="keyword">class</span> <a title="class MockHttpServletRequest extends java.lang.Object with javax.servlet.http.HttpServletRequest with ScalaObject" id="12997">MockHttpServletRequest</a><a href="#12997" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="264806">url</a> : <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>, <span class="keyword">var</span> <a title="String" id="264807">contextPath</a> : <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span> <span class="delimiter">{</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use the \&quot;attributes\&quot; var instead&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Map[String,java.lang.Object]" id="264507">attr</a> = <a href="#264510" title="=&gt; Map[String,java.lang.Object]">attributes</a>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use the \&quot;attributes\&quot; var instead&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(attrs: Map[String,java.lang.Object])Unit" id="264508">attr_=</a> <span class="delimiter">(</span><a title="Map[String,java.lang.Object]" id="264814">attrs</a> : <span title="Map[String,java.lang.Object]">Map</span><span class="delimiter">[</span>String,Object<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#264510" title="(x$1: Map[String,java.lang.Object])Unit">attributes</a> = <a href="#264814" title="Map[String,java.lang.Object]">attrs</a>
  
  <span class="keyword">var</span> <a title="Map[String,java.lang.Object]" id="264510">attributes</a>: <span title="Map[String,java.lang.Object]">Map</span><span class="delimiter">[</span>String, Object<span class="delimiter">]</span> = <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="String" id="264513">authType</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="comment">/**
   * The character encoding of the request.
   *
   * Defaults to UTF-8. Note that this differs from the default
   * encoding per the HTTP spec (ISO-8859-1), so you
   * will need to change this if you need something
   * other than UTF-8.
   */</span>
  <span class="keyword">var</span> <a title="String" id="264516">charEncoding</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span> <span class="comment">// HTTP's default encoding</span>

  <span class="comment">/** The raw body of the request. */</span>
  <span class="keyword">var</span> <a title="Array[Byte]" id="264519">body</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span title="(xs: Byte*)(implicit evidence$2: scala.reflect.ClassManifest[Byte])Array[Byte]">Array</span><span title="=&gt; scala.reflect.AnyValManifest[Byte]" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Sets the body to the given string. The content
   * type is set to &quot;text/plain&quot;.
   * 
   * Note that the String will be converted to bytes
   * based on the current setting of charEncoding.
   */</span>
  <span class="keyword">def</span> <a title="(s: String)Unit" id="264521">body_=</a> <span class="delimiter">(</span><a title="String" id="264841">s</a> : <span title="String">String</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> = <a href="#264522" title="(s: String, contentType: String)Unit">body_=</a><span class="delimiter">(</span><a href="#264841" title="String">s</a>, <span title="java.lang.String(&quot;text/plain&quot;)" class="string">&quot;text/plain&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Sets the body to the given string and content type.
   *
   * Note that the String will be converted to bytes
   * based on the current setting of charEncoding.
   */</span>
  <span class="keyword">def</span> <a title="(s: String, contentType: String)Unit" id="264522">body_=</a> <span class="delimiter">(</span><a title="String" id="264859">s</a> : <span title="String">String</span>, <a title="String" id="264860">contentType</a> : <span title="String">String</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#264519" title="(x$1: Array[Byte])Unit">body</a> = <a href="#264859" title="String">s</a>.<span title="(x$1: java.lang.String)Array[Byte]">getBytes</span><span class="delimiter">(</span><a href="#264516" title="=&gt; String">charEncoding</a><span class="delimiter">)</span>
    <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a>.<a href="#264528" title="(x$1: String)Unit">contentType</a> = <a href="#264860" title="String">contentType</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Sets the body to the given elements. Also sets
   * the contentType to &quot;text/xml&quot;
   * 
   * Note that the elements will be converted to bytes
   * based on the current setting of charEncoding.
   */</span>
  <span class="keyword">def</span> <a title="(nodes: scala.xml.NodeSeq)Unit" id="264523">body_=</a> <span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="264857">nodes</a> : <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> = <a href="#264524" title="(nodes: scala.xml.NodeSeq, contentType: String)Unit">body_=</a><span class="delimiter">(</span><a href="#264857" title="scala.xml.NodeSeq">nodes</a>, <span title="java.lang.String(&quot;text/xml&quot;)" class="string">&quot;text/xml&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Sets the body to the given elements and content type.
   * 
   * Note that the elements will be converted to bytes
   * based on the current setting of charEncoding.
   */</span>
  <span class="keyword">def</span> <a title="(nodes: scala.xml.NodeSeq, contentType: String)Unit" id="264524">body_=</a> <span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="264854">nodes</a> : <span title="scala.xml.NodeSeq">NodeSeq</span>, <a title="String" id="264855">contentType</a> : <span title="String">String</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#264519" title="(x$1: Array[Byte])Unit">body</a> = <a href="#264854" title="scala.xml.NodeSeq">nodes</a>.<span title="()String">toString</span>.<span title="(x$1: java.lang.String)Array[Byte]">getBytes</span><span class="delimiter">(</span><a href="#264516" title="=&gt; String">charEncoding</a><span class="delimiter">)</span>
    <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a>.<a href="#264528" title="(x$1: String)Unit">contentType</a> = <a href="#264855" title="String">contentType</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Sets the body to the given json value. Also
   * sets the contentType to &quot;application/json&quot;
   */</span>
  <span class="keyword">def</span> <a title="(jval: net.liftweb.json.JsonAST.JValue)Unit" id="264525">body_=</a> <span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JValue" id="264850">jval</a> : <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.JsonAST.JValue">JValue</a><span class="delimiter">)</span> : <span title="Unit">Unit</span> = <a href="#264526" title="(jval: net.liftweb.json.JsonAST.JValue, contentType: String)Unit">body_=</a><span class="delimiter">(</span><a href="#264850" title="net.liftweb.json.JsonAST.JValue">jval</a>, <span title="java.lang.String(&quot;application/json&quot;)" class="string">&quot;application/json&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Sets the body to the given json value and content type.
   */</span>
  <span class="keyword">def</span> <a title="(jval: net.liftweb.json.JsonAST.JValue, contentType: String)Unit" id="264526">body_=</a> <span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JValue" id="264847">jval</a> : <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.JsonAST.JValue">JValue</a>, <a title="String" id="264848">contentType</a> : <span title="String">String</span><span class="delimiter">)</span> : <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> json.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#11137" title="object net.liftweb.json.JsonDSL">JsonDSL</a>._
    <span class="keyword">import</span> json.Printer
    <a href="#264519" title="(x$1: Array[Byte])Unit">body</a> = <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#11140" title="object net.liftweb.json.Printer">Printer</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#51358" title="(d: scala.text.Document)String">pretty</a><span class="delimiter">(</span><a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48536" title="(value: net.liftweb.json.JsonAST.JValue)scala.text.Document">render</a><span class="delimiter">(</span><a href="#264847" title="net.liftweb.json.JsonAST.JValue">jval</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Array[Byte]">getBytes</span><span class="delimiter">(</span><a href="#264516" title="=&gt; String">charEncoding</a><span class="delimiter">)</span>
    <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a>.<a href="#264528" title="(x$1: String)Unit">contentType</a> = <a href="#264848" title="String">contentType</a>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="String" id="264528">contentType</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">var</span> <a title="List[javax.servlet.http.Cookie]" id="264531">cookies</a>: <span title="List[javax.servlet.http.Cookie]">List</span><span class="delimiter">[</span>Cookie<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="keyword">var</span> <a title="Map[String,List[String]]" id="264534">headers</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The port that this request was received on. You should
   * probably change serverPort as well if you change this.
   */</span>
  <span class="keyword">var</span> <a title="Int" id="264537">localPort</a> = <span title="Int(80)" class="int">80</span>

  <span class="comment">/**
   * The local address that the request was received on.
   *
   * If you change this you should probably change localName
   * and serverName as well.
   */</span>
  <span class="keyword">var</span> <a title="String" id="264540">localAddr</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;127.0.0.1&quot;)" class="string">&quot;127.0.0.1&quot;</span>

  <span class="comment">/**
   * The local hostname that the request was received on.
   *
   * If you change this you should probably change localAddr
   * and serverName as well.
   */</span>
  <span class="keyword">var</span> <a title="String" id="264543">localName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;localhost&quot;)" class="string">&quot;localhost&quot;</span>

  <span class="comment">/**
   * The preferred locales for the client, in decreasing order
   * of preference. If not set, the default locale will be
   * used.
   */</span>
  <span class="keyword">var</span> <a title="List[java.util.Locale]" id="264546">locales</a> : <span title="List[java.util.Locale]">List</span><span class="delimiter">[</span>Locale<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="keyword">var</span> <a title="String" id="264549">method</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;GET&quot;)" class="string">&quot;GET&quot;</span>

  <span class="comment">/**
   * The query parameters for the request. There are two main
   * ways to set this List, either by modifying the parameters
   * var directly, or by assigning to queryString, which will
   * parse the provided string into GET parameters.
   */</span>
  <span class="keyword">var</span> <a title="List[(String, String)]" id="264552">parameters</a> : <span title="List[(String, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String,String<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use the \&quot;parameters\&quot; var instead&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Map[String,String]" id="264554">parameterMap</a> = <span title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]">Map</span><span class="delimiter">(</span><a href="#264552" title="=&gt; List[(String, String)]">parameters</a> : _*<span class="delimiter">)</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use the \&quot;parameters\&quot; var instead&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(params: Map[String,List[String]])Unit" id="264555">parameterMap_=</a> <span class="delimiter">(</span><a title="Map[String,List[String]]" id="264923">params</a> : <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#264552" title="(x$1: List[(String, String)])Unit">parameters</a> = <a href="#264923" title="Map[String,List[String]]">params</a>.<span title="=&gt; List[(String, List[String])]">toList</span>.<span title="(f: (String, List[String]) =&gt; scala.collection.GenTraversableOnce[(String, String)])(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, List[String])],(String, String),List[(String, String)]])List[(String, String)]">flatMap</span> <a href="#264948" title="List[(String, String)]" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="List[(String, String)]" class="delimiter">(</span><a title="String" id="264951">key</a>,<a title="List[String]" id="264952">values</a><span class="delimiter">)</span> =&gt; <a href="#264952" title="List[String]">values</a>.<span title="(f: String =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, String),List[(String, String)]])List[(String, String)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(String, String),List[(String, String)]]" class="delimiter">{</span><span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#264951" title="String">key</a>,<a href="#264969" title="String">_</a><span class="delimiter">)</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="String" id="264557">path</a> : <span title="String">String</span> = <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>

  <span class="keyword">var</span> <a title="String" id="264560">pathInfo</a> : <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">var</span> <a title="java.lang.String" id="264563">protocol</a> = <span title="java.lang.String(&quot;HTTP/1.0&quot;)" class="string">&quot;HTTP/1.0&quot;</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="264565">queryString</a> : <span title="String">String</span> =
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#264549" title="=&gt; String">method</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;GET&quot;)" class="string">&quot;GET&quot;</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#264552" title="=&gt; List[(String, String)]">parameters</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#264552" title="=&gt; List[(String, String)]">parameters</a>.<span title="(f: (String, String) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><a href="#265057" title="java.lang.String" class="delimiter">{</a> <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="String" id="265060">k</a>,<a title="String" id="265061">v</a><span class="delimiter">)</span> =&gt; <a href="#265060" title="String">k</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;=&quot;)" class="string">&quot;=&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#265061" title="String">v</a> <span class="delimiter">}</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&amp;&quot;)" class="string">&quot;&amp;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(q: String)Unit" id="264566">queryString_=</a> <span class="delimiter">(</span><a title="String" id="265092">q</a> : <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#265092" title="String">q</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#265092" title="String">q</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[(String, String)]" id="265102">newParams</a> = <span title="[A](elems: A*)scala.collection.mutable.ListBuffer[A]">ListBuffer</span><span title="(elems: (String, String)*)scala.collection.mutable.ListBuffer[(String, String)]" class="delimiter">[</span><span title="(String, String)" class="delimiter">(</span>String,String<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#265092" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">q</a>.<span title="(separator: Char)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="Char(\'&amp;\')" class="char">'&amp;'</span><span class="delimiter">)</span>.<span title="(f: String =&gt; scala.collection.mutable.ListBuffer[(String, String)])Unit">foreach</span> <span class="delimiter">{</span> 
        <a title="String" id="265845">pair</a> =&gt; <a href="#265845" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">pair</a>.<span title="(separator: Char)Array[String]">split</span><span class="delimiter">(</span><span title="Char(\'=\')" class="char">'='</span><span class="delimiter">)</span> <span title="newParams.type" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#265869" title="newParams.type">Array</a><span class="delimiter">(</span><a title="String" id="265875">key</a>,<a title="String" id="265876">value</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            <span class="comment">// Append to the current key's value</span>
            <a href="#265102" title="scala.collection.mutable.ListBuffer[(String, String)]">newParams</a> <span title="(x: (String, String))newParams.type">+=</span> <a href="#265875" title="(x: String)ArrowAssoc[String]">key</a> <span title="(y: String)(String, String)">-&gt;</span> <a href="#265876" title="String">value</a>
          <span class="delimiter">}</span>
          <span class="keyword">case</span> <a title="Nothing" id="265902">invalid</a> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Invalid query string: \&quot;&quot;)" class="string">&quot;Invalid query string: \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#265092" title="String">q</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      
      <a href="#264552" title="(x$1: List[(String, String)])Unit">parameters</a> = <a href="#265102" title="scala.collection.mutable.ListBuffer[(String, String)]">newParams</a>.<span title="=&gt; List[(String, String)]">toList</span>
      <a href="#264549" title="(x$1: String)Unit">method</a> = <span title="java.lang.String(&quot;GET&quot;)" class="string">&quot;GET&quot;</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="Int" id="264568">remotePort</a> = <span title="Int(80)" class="int">80</span>

  <span class="comment">/**
   * The hostname of the client that sent the request.
   *
   * If you change this you should probably change remoteAddr
   * as well.
   */</span>
  <span class="keyword">var</span> <a title="String" id="264571">remoteHost</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="comment">/**
   * The address of the client that sent the request.
   *
   * If you change this you should probably change remoteHost
   * as well.
   */</span>
  <span class="keyword">var</span> <a title="String" id="264574">remoteAddr</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="comment">// Default to the root URI</span>
  <span class="keyword">var</span> <a title="String" id="264577">requestUri</a> : <span title="String">String</span> = <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>

  <span class="keyword">var</span> <a title="String" id="264580">user</a> : <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">var</span> <a title="Set[String]" id="264583">userRoles</a> : <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(elems: String*)scala.collection.immutable.Set[String]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">var</span> <a title="java.security.Principal" id="264586">userPrincipal</a> : <span title="java.security.Principal">Principal</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">var</span> <a title="java.lang.String" id="264589">scheme</a> = <span title="java.lang.String(&quot;http&quot;)" class="string">&quot;http&quot;</span>

  <span class="comment">/**
   * Indicates whether the request is being handled by a
   * secure protocol (e.g. HTTPS). If you set the scheme
   * to https you should set this to true.
   */</span>
  <span class="keyword">var</span> <a title="Boolean" id="264592">secure</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">var</span> <a title="String" id="264595">serverName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;localhost&quot;)" class="string">&quot;localhost&quot;</span>

  <span class="comment">/**
   * The port that this request was received on. You should
   * probably change localPort as well if you change this.
   */</span>
  <span class="keyword">var</span> <a title="Int" id="264598">serverPort</a> = <span title="Int(80)" class="int">80</span>

  <span class="comment">// Defaults to &quot;&quot; for servlet matching &quot;/*&quot;</span>
  <span class="keyword">var</span> <a title="String" id="264601">servletPath</a> : <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="keyword">var</span> <a title="javax.servlet.http.HttpSession" id="264604">session</a> : <span title="javax.servlet.http.HttpSession">HttpSession</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="comment">// BEGIN PRIMARY CONSTRUCTOR LOGIC</span>
  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#264807" title="=&gt; String">contextPath</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#264807" title="(index: Int)Char">contextPath</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">!=</span> <span title="Char(\'/\')" class="char">'/'</span> <span title="(x: Boolean)Boolean">||</span> <a href="#264807" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">contextPath</a>.<span title="=&gt; Char">last</span> <span title="(x: Char)Boolean">==</span> <span title="Char(\'/\')" class="char">'/'</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Context path must be empty, or must start with a \'/\' and not end with a \'/\': &quot;)" class="string">&quot;Context path must be empty, or must start with a '/' and not end with a '/': &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#264807" title="=&gt; String">contextPath</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#264806" title="=&gt; String">url</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#264608" title="(url: String)Unit">processUrl</a><span class="delimiter">(</span><a href="#264806" title="=&gt; String">url</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// END PRIMARY CONSTRUCTOR</span>

  <span class="comment">/**
   * Construct a new mock request for the given URL. See processUrl
   * for limitations.
   *
   * @param url The URL to extract from
   */</span>
  <span class="keyword">def</span> <a title="(url: java.net.URL)net.liftweb.mocks.MockHttpServletRequest" id="264606" class="keyword">this</a><span class="delimiter">(</span><a title="java.net.URL" id="266040">url</a> : <span title="java.net.URL">URL</span><span class="delimiter">)</span> = <span title="Unit" class="delimiter">{</span>
    <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#264609" title="(url: java.net.URL)Unit">processUrl</a><span class="delimiter">(</span><a href="#266040" title="java.net.URL">url</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Construct a new mock request for the given URL. See processUrl
   * for limitations.
   *
   * @param url The URL to extract from
   * @param contextPath The servlet context of the request.
   */</span>
  <span class="keyword">def</span> <a title="(url: java.net.URL, contextPath: String)net.liftweb.mocks.MockHttpServletRequest" id="264607" class="keyword">this</a><span class="delimiter">(</span><a title="java.net.URL" id="266047">url</a> : <span title="java.net.URL">URL</span>, <a title="String" id="266048">contextPath</a> : <span title="String">String</span><span class="delimiter">)</span> = <span title="Unit" class="delimiter">{</span>
    <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> : <span title="String">String</span>, <a href="#266048" title="String">contextPath</a><span class="delimiter">)</span>
    <a href="#264609" title="(url: java.net.URL)Unit">processUrl</a><span class="delimiter">(</span><a href="#266047" title="java.net.URL">url</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Set fields based on the given url string. If the
   * url begins with &quot;http&quot; it is assumed to be a full URL, and is
   * processed with processUrl(URL). If the url begins with &quot;/&quot; then it's
   * assumed to be only the path and query string.
   *
   * @param url The URL to extract from
   */</span>
  <span class="keyword">def</span> <a title="(url: String)Unit" id="264608">processUrl</a> <span class="delimiter">(</span><a title="String" id="266036">url</a> : <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#266036" title="String">url</a>.<span title="()java.lang.String">toLowerCase</span>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;http&quot;)" class="string">&quot;http&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#264609" title="(url: java.net.URL)Unit">processUrl</a><span class="delimiter">(</span><span title="(x$1: java.lang.String)java.net.URL" class="keyword">new</span> <span title="java.net.URL">URL</span><span class="delimiter">(</span><a href="#266036" title="String">url</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#266036" title="String">url</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#264610" title="(path: String)java.lang.String">computeRealPath</a><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</span><a href="#266036" title="String">url</a><span class="delimiter">)</span>.<span title="(separator: Char)Array[String]">split</span><span class="delimiter">(</span><span title="Char(\'?\')" class="char">'?'</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#266172" title="Unit">Array</a><span class="delimiter">(</span><a title="String" id="266178">path</a>, <a title="String" id="266179">query</a><span class="delimiter">)</span> =&gt; <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a>.<a href="#264557" title="(x$1: String)Unit">path</a> = <a href="#266178" title="String">path</a>; <a href="#264566" title="(q: String)Unit">queryString</a> = <a href="#266179" title="String">query</a>
        <span class="keyword">case</span> <a href="#266180" title="Unit">Array</a><span class="delimiter">(</span><a title="String" id="266186">path</a><span class="delimiter">)</span> =&gt; <a href="#12997" title="MockHttpServletRequest.this.type" class="keyword">this</a>.<a href="#264557" title="(x$1: String)Unit">path</a> = <a href="#266186" title="String">path</a>; <a href="#264566" title="(q: String)Unit">queryString</a> = <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;too many \'?\' in URL : &quot;)" class="string">&quot;too many '?' in URL : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#266036" title="String">url</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Could not process url: \&quot;%s\&quot;&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#266036" title="String">url</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Set fields based on the given URL. There are several limitations:
   *
   * &lt;ol&gt;
   *   &lt;li&gt;The host portion is used to set localAddr, localHost and serverName. You will
   *       need to manually set these if you want different behavior.&lt;/li&gt;
   *   &lt;li&gt;The userinfo field isn't processed. If you want to mock BASIC authentication,
   *       use the addBasicAuth method&lt;/li&gt;
   * &lt;/ol&gt;
   * 
   * @param url The URL to extract from
   * @param contextPath The servlet context of the request. Defaults to &quot;&quot;
   */</span>
  <span class="keyword">def</span> <a title="(url: java.net.URL)Unit" id="264609">processUrl</a> <span class="delimiter">(</span><a title="java.net.URL" id="266034">url</a> : <span title="java.net.URL">URL</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Deconstruct the URL to set values</span>
    <a href="#266034" title="java.net.URL">url</a>.<span title="()java.lang.String">getProtocol</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit" class="string">&quot;http&quot;</span> =&gt; <a href="#264589" title="(x$1: java.lang.String)Unit">scheme</a> = <span title="java.lang.String(&quot;http&quot;)" class="string">&quot;http&quot;</span>; <a href="#264592" title="(x$1: Boolean)Unit">secure</a> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">case</span> <span title="Unit" class="string">&quot;https&quot;</span> =&gt; <a href="#264589" title="(x$1: java.lang.String)Unit">scheme</a> = <span title="java.lang.String(&quot;https&quot;)" class="string">&quot;https&quot;</span>; <a href="#264592" title="(x$1: Boolean)Unit">secure</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <a title="Nothing" id="266198">other</a> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unsupported protocol: &quot;)" class="string">&quot;Unsupported protocol: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#266198" title="java.lang.String">other</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#264543" title="(x$1: String)Unit">localName</a> = <a href="#266034" title="java.net.URL">url</a>.<span title="()java.lang.String">getHost</span>
    <a href="#264540" title="(x$1: String)Unit">localAddr</a> = <a href="#264543" title="=&gt; String">localName</a>
    <a href="#264595" title="(x$1: String)Unit">serverName</a> = <a href="#264543" title="=&gt; String">localName</a>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#266034" title="java.net.URL">url</a>.<span title="()Int">getPort</span> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#264537" title="(x$1: Int)Unit">localPort</a> = <span title="Int(80)" class="int">80</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#264537" title="(x$1: Int)Unit">localPort</a> = <a href="#266034" title="java.net.URL">url</a>.<span title="()Int">getPort</span>
    <span class="delimiter">}</span>

    <a href="#264598" title="(x$1: Int)Unit">serverPort</a> = <a href="#264537" title="=&gt; Int">localPort</a>

    <a href="#264557" title="(x$1: String)Unit">path</a> = <a href="#264610" title="(path: String)java.lang.String">computeRealPath</a><span class="delimiter">(</span><a href="#266034" title="java.net.URL">url</a>.<span title="()java.lang.String">getPath</span><span class="delimiter">)</span>

    <a href="#264566" title="(q: String)Unit">queryString</a> = <a href="#266034" title="java.net.URL">url</a>.<span title="()java.lang.String">getQuery</span>

    
  <span class="delimiter">}</span>

  <span class="comment">/** Compute the path portion after the contextPath */</span>
  <span class="keyword">def</span> <a title="(path: String)java.lang.String" id="264610">computeRealPath</a> <span class="delimiter">(</span><a title="String" id="266134">path</a> : <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span> 
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span> <a href="#266134" title="String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#264807" title="=&gt; String">contextPath</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Path \&quot;%s\&quot; doesn't begin with context path \&quot;%s\&quot;!&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#266134" title="String">path</a>, <a href="#264807" title="=&gt; String">contextPath</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#266134" title="String">path</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#264807" title="=&gt; String">contextPath</a>.<span title="()Int">length</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Adds an &quot;Authorization&quot; header, per RFC1945.
   */</span>
  <span class="keyword">def</span> <a title="(user: String, pass: String)Unit" id="264611">addBasicAuth</a> <span class="delimiter">(</span><a title="String" id="266208">user</a> : <span title="String">String</span>, <a title="String" id="266209">pass</a> : <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="266211">hashedCredentials</a> =
      <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/SecurityHelpers.scala.html#48921" title="(in: Array[Byte])String">base64Encode</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#266208" title="String">user</a>  <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#266209" title="String">pass</a><span class="delimiter">)</span>.<span title="()Array[Byte]">getBytes</span><span class="delimiter">)</span>
    <a href="#264534" title="(x$1: Map[String,List[String]])Unit">headers</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+=</span> <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;Authorization&quot;</span> <span title="(y: List[java.lang.String])(java.lang.String, List[java.lang.String])">-&gt;</span> <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Basic &quot;)" class="string">&quot;Basic &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#266211" title="String">hashedCredentials</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// ServletRequest methods</span>

  <span class="keyword">def</span> <a title="(key: String)java.lang.Object" id="264612">getAttribute</a><span class="delimiter">(</span><a title="String" id="266303">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="java.lang.Object">Object</span> = <a href="#264507" title="=&gt; Map[String,java.lang.Object]">attr</a>.<span title="(key: String)Option[java.lang.Object]">get</span><span class="delimiter">(</span><a href="#266303" title="String">key</a><span class="delimiter">)</span>.<span title="(default: =&gt; java.lang.Object)java.lang.Object">getOrElse</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()java.util.Enumeration[java.lang.Object]" id="264613">getAttributeNames</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.util.Enumeration[java.lang.Object]">JEnum</span><span class="delimiter">[</span>Object<span class="delimiter">]</span> = <a href="#264507" title="=&gt; Map[String,java.lang.Object]">attr</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="(i: Iterator[java.lang.Object])java.util.Enumeration[java.lang.Object]">iterator</span>

  <span class="keyword">def</span> <a title="()String" id="264614">getCharacterEncoding</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264516" title="=&gt; String">charEncoding</a>

  <span class="keyword">def</span> <a title="()Int" id="264615">getContentLength</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#264519" title="=&gt; Array[Byte]">body</a>.<span title="=&gt; Int">length</span>

  <span class="keyword">def</span> <a title="()String" id="264616">getContentType</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264528" title="=&gt; String">contentType</a>

  <span class="keyword">def</span> <a title="()javax.servlet.ServletInputStream" id="264617">getInputStream</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="javax.servlet.ServletInputStream">ServletInputStream</span> = <span class="delimiter">{</span>
    <span title="net.liftweb.mocks.MockServletInputStream" class="keyword">new</span> <a href="MockServletContext.scala.html#13042" title="net.liftweb.mocks.MockServletInputStream">MockServletInputStream</a><span class="delimiter">(</span><span title="java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#264519" title="=&gt; Array[Byte]">body</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()String" id="264618">getLocalAddr</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264540" title="=&gt; String">localAddr</a>

  <span class="keyword">def</span> <a title="()java.util.Locale" id="264619">getLocale</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.util.Locale">Locale</span> = <a href="#264546" title="=&gt; List[java.util.Locale]">locales</a>.<span title="=&gt; Option[java.util.Locale]">headOption</span>.<span title="(default: =&gt; java.util.Locale)java.util.Locale">getOrElse</span><span class="delimiter">(</span><span title="object java.util.Locale">Locale</span>.<span title="()java.util.Locale">getDefault</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()java.util.Enumeration[java.lang.Object]" id="264620">getLocales</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.util.Enumeration[java.lang.Object]">JEnum</span><span class="delimiter">[</span>Object<span class="delimiter">]</span> = <a href="#264546" title="=&gt; List[java.util.Locale]">locales</a>.<span title="(i: Iterator[java.lang.Object])java.util.Enumeration[java.lang.Object]">iterator</span>
  
  <span class="keyword">def</span> <a title="()String" id="264621">getLocalName</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264543" title="=&gt; String">localName</a>

  <span class="keyword">def</span> <a title="()Int" id="264622">getLocalPort</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#264537" title="=&gt; Int">localPort</a>
  
  <span class="keyword">def</span> <a title="(key: String)String" id="264623">getParameter</a><span class="delimiter">(</span><a title="String" id="266361">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = 
    <a href="#264552" title="=&gt; List[(String, String)]">parameters</a>.<span title="(p: (String, String) =&gt; Boolean)Option[(String, String)]">find</span><span class="delimiter">(</span><a href="#266371" title="(String, String)">_</a>.<span title="=&gt; String">_1</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#266361" title="String">key</a><span class="delimiter">)</span>.<span title="(f: (String, String) =&gt; String)Option[String]">map</span><span class="delimiter">(</span><a href="#266380" title="(String, String)">_</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="()java.util.Map[java.lang.Object,java.lang.Object]" id="264624">getParameterMap</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.util.<span title="java.util.Map[java.lang.Object,java.lang.Object]">Map</span><span class="delimiter">[</span>Object, Object<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// Build a new map based on the parameters List</span>
    <span class="keyword">var</span> <a title="scala.collection.immutable.Map[String,List[String]]" id="266388">newMap</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, List[String])*)scala.collection.immutable.Map[String,List[String]]" class="delimiter">[</span><span title="String">String</span>,<span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(d: String =&gt; List[String])scala.collection.immutable.Map[String,List[String]]">withDefault</span><span class="delimiter">(</span><a title="String" id="266396">ignore</a> =&gt; <span title="object Nil">Nil</span><span class="delimiter">)</span>

    <a href="#264552" title="=&gt; List[(String, String)]">parameters</a>.<span title="(f: (String, String) =&gt; Unit)Unit">foreach</span> <a href="#266419" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="String" id="266422">k</a>,<a title="String" id="266423">v</a><span class="delimiter">)</span> =&gt; <a href="#266388" title="scala.collection.immutable.Map[String,List[String]]">newMap</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+=</span> <a href="#266422" title="(x: String)ArrowAssoc[String]">k</a> <span title="(y: List[String])(String, List[String])">-&gt;</span> <span class="delimiter">(</span><a href="#266388" title="(key: String)List[String]">newMap</a><span class="delimiter">(</span><a href="#266422" title="String">k</a><span class="delimiter">)</span> <a href="#266504" title="(prefix: List[String])List[String]">:::</a> <a href="#266423" title="String">v</a> <a href="#266522" title="(x: String)List[String]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="comment">// Ugly, but it works and keeps order</span>
    <span class="delimiter">}</span>

    <span title="(m: scala.collection.Map[java.lang.Object,java.lang.Object])java.util.Map[java.lang.Object,java.lang.Object]">asMap</span><span class="delimiter">(</span><a href="#266388" title="scala.collection.immutable.Map[String,List[String]]">newMap</a>.<span title="(f: (String, List[String]) =&gt; (String, Array[String]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,List[String]],(String, Array[String]),scala.collection.immutable.Map[String,Array[String]]])scala.collection.immutable.Map[String,Array[String]]">map</span><a href="#266675" title="(String, Array[String])" class="delimiter">{</a><span class="keyword">case</span> <span title="(String, Array[String])" class="delimiter">(</span><a title="String" id="266678">k</a>,<a title="List[String]" id="266679">v</a><span class="delimiter">)</span> =&gt; <span title="(_1: String, _2: Array[String])(String, Array[String])" class="delimiter">(</span><a href="#266678" title="String">k</a>,<a href="#266679" title="List[String]">v</a>.<span title="(implicit evidence$1: ClassManifest[String])Array[String]">toArray</span><span class="delimiter">)</span><span class="delimiter">}</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Map[java.lang.Object,java.lang.Object]" class="delimiter">[</span><span title="Map[java.lang.Object,java.lang.Object]">Map</span><span class="delimiter">[</span>Object,Object<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()java.util.Enumeration[java.lang.Object]" id="264625">getParameterNames</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.util.Enumeration[java.lang.Object]">JEnum</span><span class="delimiter">[</span>Object<span class="delimiter">]</span> = 
    <a href="#264552" title="=&gt; List[(String, String)]">parameters</a>.<span title="(f: (String, String) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#266808" title="(String, String)">_</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">distinct</span>.<span title="(i: Iterator[java.lang.Object])java.util.Enumeration[java.lang.Object]">iterator</span>

  <span class="keyword">def</span> <a title="(key: String)Array[String]" id="264626">getParameterValues</a><span class="delimiter">(</span><a title="String" id="266846">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = 
    <a href="#264552" title="=&gt; List[(String, String)]">parameters</a>.<span title="(p: (String, String) =&gt; Boolean)List[(String, String)]">filter</span><span class="delimiter">(</span><a href="#266853" title="(String, String)">_</a>.<span title="=&gt; String">_1</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#266846" title="String">key</a><span class="delimiter">)</span>.<span title="(f: (String, String) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#266877" title="(String, String)">_</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span>.<span title="(implicit evidence$1: ClassManifest[String])Array[String]">toArray</span>

  <span class="keyword">def</span> <a title="()String" id="264627">getProtocol</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264563" title="=&gt; java.lang.String">protocol</a>
  
  <span class="keyword">def</span> <a title="()java.io.BufferedReader" id="264628">getReader</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.io.BufferedReader">BufferedReader</span> = 
    <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="(x$1: java.io.InputStream, x$2: java.lang.String)java.io.InputStreamReader" class="keyword">new</span> <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><span title="java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#264519" title="=&gt; Array[Byte]">body</a><span class="delimiter">)</span>, <a href="#264516" title="=&gt; String">charEncoding</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(s: String)String" id="264629">getRealPath</a><span class="delimiter">(</span><a title="String" id="267016">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#267016" title="String">s</a>

  <span class="keyword">def</span> <a title="()String" id="264630">getRemoteAddr</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264574" title="=&gt; String">remoteAddr</a>

  <span class="keyword">def</span> <a title="()String" id="264631">getRemoteHost</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264571" title="=&gt; String">remoteHost</a>

  <span class="keyword">def</span> <a title="()Int" id="264632">getRemotePort</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#264568" title="=&gt; Int">remotePort</a>

  <span class="keyword">def</span> <a title="(s: String)javax.servlet.RequestDispatcher" id="264633">getRequestDispatcher</a><span class="delimiter">(</span><a title="String" id="267021">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.servlet.RequestDispatcher">RequestDispatcher</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="()String" id="264634">getScheme</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264589" title="=&gt; java.lang.String">scheme</a>

  <span class="keyword">def</span> <a title="()String" id="264635">getServerName</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264595" title="=&gt; String">serverName</a>

  <span class="keyword">def</span> <a title="()Int" id="264636">getServerPort</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#264598" title="=&gt; Int">serverPort</a>

  <span class="keyword">def</span> <a title="()Boolean" id="264637">isSecure</a> = <a href="#264592" title="=&gt; Boolean">secure</a>

  <span class="keyword">def</span> <a title="(key: String)Unit" id="264638">removeAttribute</a><span class="delimiter">(</span><a title="String" id="267035">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#264508" title="(attrs: Map[String,java.lang.Object])Unit">attr</a> <span title="(key: String)scala.collection.immutable.Map[String,java.lang.Object]">-=</span> <a href="#267035" title="String">key</a>

  <span class="keyword">def</span> <a title="(key: String, value: java.lang.Object)Unit" id="264639">setAttribute</a><span class="delimiter">(</span><a title="String" id="267052">key</a>: <span title="String">String</span>, <a title="java.lang.Object" id="267053">value</a>: <span title="java.lang.Object">Object</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#264508" title="(attrs: Map[String,java.lang.Object])Unit">attr</a> <span title="(kv: (String, java.lang.Object))scala.collection.immutable.Map[String,java.lang.Object]">+=</span> <span class="delimiter">(</span><a href="#267052" title="(x: String)ArrowAssoc[String]">key</a> <span title="(y: java.lang.Object)(String, java.lang.Object)">-&gt;</span> <a href="#267053" title="java.lang.Object">value</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(enc: String)Unit" id="264640">setCharacterEncoding</a><span class="delimiter">(</span><a title="String" id="267147">enc</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#264516" title="(x$1: String)Unit">charEncoding</a> = <a href="#267147" title="String">enc</a>

  <span class="comment">// HttpServletRequest methods</span>
  <span class="keyword">def</span> <a title="()String" id="264641">getAuthType</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264513" title="=&gt; String">authType</a>

  <span class="keyword">def</span> <a title="()String" id="264642">getContextPath</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264807" title="=&gt; String">contextPath</a>

  <span class="keyword">def</span> <a title="()Array[javax.servlet.http.Cookie]" id="264643">getCookies</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Array[javax.servlet.http.Cookie]">Array</span><span class="delimiter">[</span>Cookie<span class="delimiter">]</span> = <a href="#264531" title="=&gt; List[javax.servlet.http.Cookie]">cookies</a>.<span title="(implicit evidence$1: ClassManifest[javax.servlet.http.Cookie])Array[javax.servlet.http.Cookie]">toArray</span>

  <span class="keyword">def</span> <a title="(h: String)Long" id="264644">getDateHeader</a><span class="delimiter">(</span><a title="String" id="267174">h</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="PartialFunction[Throwable,net.liftweb.common.Box[Long]]" id="267176">handler</a> : <span title="PartialFunction[Throwable,net.liftweb.common.Box[Long]]">PartialFunction</span><span class="delimiter">[</span>Throwable,Box<span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#267178" title="net.liftweb.common.Box[Long]" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Empty.type" id="267179">pe</a> : <span title="java.text.ParseException">ParseException</span> =&gt; <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Could not parse the date for %s : \&quot;%s\&quot;&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#267174" title="String">h</a>, <a href="#264645" title="(h: String)String">getHeader</a><span class="delimiter">(</span><a href="#267174" title="String">h</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/ControlHelpers.scala.html#48605" title="(handler: PartialFunction[Throwable,net.liftweb.common.Box[Long]], f: =&gt; net.liftweb.common.Box[Long])net.liftweb.common.Box[net.liftweb.common.Box[Long]]">tryo</a><span class="delimiter">(</span><a href="#267176" title="PartialFunction[Throwable,net.liftweb.common.Box[Long]]">handler</a>,<span class="delimiter">{</span>
      <span class="comment">// Have to use internetDateFormatter directly since parseInternetDate returns the epoch date on failure</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28636" title="(in: String)net.liftweb.common.Box[String]">!!</a><span class="delimiter">(</span><a href="#264645" title="(h: String)String">getHeader</a><span class="delimiter">(</span><a href="#267174" title="String">h</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; Long)net.liftweb.common.Box[Long]">map</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/TimeHelpers.scala.html#48826" title="=&gt; java.text.SimpleDateFormat">internetDateFormatter</a>.<span title="(x$1: java.lang.String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#267310" title="String">_</a><span class="delimiter">)</span>.<span title="()Long">getTime</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.common.Box[Long] =&gt; net.liftweb.common.Box[Long])net.liftweb.common.Box[Long]">flatMap</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[Long]" id="267338">x</a> =&gt; <a href="#267338" title="net.liftweb.common.Box[Long]">x</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Long)Long">openOr</a> -<span title="Long(-1L)" class="long">1L</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(h: String)String" id="264645">getHeader</a><span class="delimiter">(</span><a title="String" id="267187">h</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264534" title="=&gt; Map[String,List[String]]">headers</a>.<span title="(key: String)Option[List[String]]">get</span><span class="delimiter">(</span><a href="#267187" title="String">h</a><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="String" id="267354">v</a> :: _<span class="delimiter">)</span> =&gt; <a href="#267354" title="String">v</a>
    <span class="keyword">case</span> <span title="Null(null)">_</span> =&gt; <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()java.util.Enumeration[java.lang.Object]" id="264646">getHeaderNames</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.util.Enumeration[java.lang.Object]">JEnum</span><span class="delimiter">[</span>Object<span class="delimiter">]</span> = <a href="#264534" title="=&gt; Map[String,List[String]]">headers</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="(i: Iterator[java.lang.Object])java.util.Enumeration[java.lang.Object]">iterator</span>

  <span class="keyword">def</span> <a title="(s: String)java.util.Enumeration[java.lang.Object]" id="264647">getHeaders</a><span class="delimiter">(</span><a title="String" id="267362">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="java.util.Enumeration[java.lang.Object]">JEnum</span><span class="delimiter">[</span>Object<span class="delimiter">]</span> =
    <a href="#264534" title="=&gt; Map[String,List[String]]">headers</a>.<span title="(key: String, default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><a href="#267362" title="String">s</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span>.<span title="(i: Iterator[java.lang.Object])java.util.Enumeration[java.lang.Object]">iterator</span>

  <span class="keyword">def</span> <a title="(h: String)Int" id="264648">getIntHeader</a><span class="delimiter">(</span><a title="String" id="267380">h</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28636" title="(in: String)net.liftweb.common.Box[String]">!!</a><span class="delimiter">(</span><a href="#264645" title="(h: String)String">getHeader</a><span class="delimiter">(</span><a href="#267380" title="String">h</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; Int)net.liftweb.common.Box[Int]">map</a><span class="delimiter">(</span><a href="#267388" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Int)Int">openOr</a> -<span title="Int(-1)" class="int">1</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()String" id="264649">getMethod</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264549" title="=&gt; String">method</a>

  <span class="keyword">def</span> <a title="()String" id="264650">getPathInfo</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264560" title="=&gt; String">pathInfo</a>

  <span class="keyword">def</span> <a title="()String" id="264651">getPathTranslated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264557" title="=&gt; String">path</a>

  <span class="keyword">def</span> <a title="()String" id="264652">getQueryString</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264565" title="=&gt; String">queryString</a>

  <span class="keyword">def</span> <a title="()String" id="264653">getRemoteUser</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264580" title="=&gt; String">user</a>

  <span class="keyword">def</span> <a title="()String" id="264654">getRequestedSessionId</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
  
  <span class="keyword">def</span> <a title="()String" id="264655">getRequestURI</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264807" title="=&gt; String">contextPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#264557" title="=&gt; String">path</a>

  <span class="keyword">def</span> <a title="()java.lang.StringBuffer" id="264656">getRequestURL</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.lang.StringBuffer">StringBuffer</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.StringBuffer" id="267406">buffer</a> = <span title="(x$1: java.lang.String)java.lang.StringBuffer" class="keyword">new</span> <span title="java.lang.StringBuffer">StringBuffer</span><span class="delimiter">(</span><a href="#264589" title="=&gt; java.lang.String">scheme</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;://&quot;)" class="string">&quot;://&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#264543" title="=&gt; String">localName</a><span class="delimiter">)</span>
    
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#264537" title="=&gt; Int">localPort</a> <span title="(x: Int)Boolean">!=</span> <span title="Int(80)" class="int">80</span><span class="delimiter">)</span> <a href="#267406" title="java.lang.StringBuffer">buffer</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#264537" title="=&gt; Int">localPort</a><span class="delimiter">)</span>
    
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#264807" title="=&gt; String">contextPath</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#267406" title="java.lang.StringBuffer">buffer</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><a href="#264807" title="=&gt; String">contextPath</a><span class="delimiter">)</span>

    <a href="#267406" title="java.lang.StringBuffer">buffer</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><a href="#264557" title="=&gt; String">path</a><span class="delimiter">)</span>

    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#264565" title="=&gt; String">queryString</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#267406" title="java.lang.StringBuffer">buffer</a>.<span title="(x$1: java.lang.String)java.lang.StringBuffer">append</span><span class="delimiter">(</span><span title="java.lang.String(&quot;?&quot;)" class="string">&quot;?&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#264565" title="=&gt; String">queryString</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#267406" title="java.lang.StringBuffer">buffer</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()String" id="264657">getServletPath</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#264601" title="=&gt; String">servletPath</a>

  <span class="keyword">def</span> <a title="()javax.servlet.http.HttpSession" id="264658">getSession</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="javax.servlet.http.HttpSession">HttpSession</span> = <a href="#264659" title="(create: Boolean)javax.servlet.http.HttpSession">getSession</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(create: Boolean)javax.servlet.http.HttpSession" id="264659">getSession</a><span class="delimiter">(</span><a title="Boolean" id="267464">create</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="javax.servlet.http.HttpSession">HttpSession</span> = <span class="delimiter">{</span>
   <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#264604" title="=&gt; javax.servlet.http.HttpSession">session</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#267464" title="Boolean">create</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#264604" title="(x$1: javax.servlet.http.HttpSession)Unit">session</a> = <span title="net.liftweb.mocks.MockHttpSession" class="keyword">new</span> <a href="MockServletContext.scala.html#13044" title="net.liftweb.mocks.MockHttpSession">MockHttpSession</a>
    <span class="delimiter">}</span>
    <a href="#264604" title="=&gt; javax.servlet.http.HttpSession">session</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()java.security.Principal" id="264660">getUserPrincipal</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.security.<span title="java.security.Principal">Principal</span> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="()Boolean" id="264661">isRequestedSessionIdFromURL</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="()Boolean" id="264662">isRequestedSessionIdFromUrl</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="()Boolean" id="264663">isRequestedSessionIdFromCookie</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="()Boolean" id="264664">isRequestedSessionIdValid</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="(user: String)Boolean" id="264665">isUserInRole</a><span class="delimiter">(</span><a title="String" id="267507">user</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * A utility method to set the given header to an RFC1123 date
   * based on the given long value (epoch seconds).
   */</span>
  <span class="keyword">def</span> <a title="(s: String, l: Long)Unit" id="264666">setDateHeader</a><span class="delimiter">(</span><a title="String" id="267509">s</a>: <span title="String">String</span>, <a title="Long" id="267510">l</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#264534" title="(x$1: Map[String,List[String]])Unit">headers</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+=</span> <span class="delimiter">(</span><a href="#267509" title="(x: String)ArrowAssoc[String]">s</a> <span title="(y: List[String])(String, List[String])">-&gt;</span> <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/TimeHelpers.scala.html#48830" title="(in: Long)String">toInternetDate</a><span class="delimiter">(</span><a href="#267510" title="Long">l</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>