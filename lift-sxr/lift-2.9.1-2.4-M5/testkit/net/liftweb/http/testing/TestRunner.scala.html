<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>testkit/net/liftweb/http/testing/TestRunner.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2008-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> http
<span class="keyword">package</span> testing

<span class="keyword">import</span> net.liftweb.util.<a href="../../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._
<span class="keyword">import</span> net.liftweb.common.<span class="delimiter">{</span> Box, Full, Empty, Failure<span class="delimiter">}</span>
<span class="keyword">import</span> net.liftweb.util.<span class="delimiter">{</span>Helpers<span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer

<span class="keyword">class</span> <a title="class TestRunner extends java.lang.Object with ScalaObject" id="12964">TestRunner</a><a href="#12964" title="ScalaObject" class="delimiter">(</a><a title="net.liftweb.common.Box[() =&gt; Any]" id="262528">clearDB</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[() =&gt; Any]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">]</span>, <a title="net.liftweb.common.Box[() =&gt; Any]" id="262529">setupDB</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[() =&gt; Any]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">]</span>,<a title="List[String =&gt; Any]" id="262530">beforeAssertListeners</a>: <span title="List[String =&gt; Any]">List</span><span class="delimiter">[</span>String =&gt; Any<span class="delimiter">]</span>,  <a title="List[(String, Boolean) =&gt; Any]" id="262531">afterAssertListeners</a>: <span title="List[(String, Boolean) =&gt; Any]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, Boolean<span class="delimiter">)</span> =&gt; Any<span class="delimiter">]</span>,
    <a title="List[String =&gt; Any]" id="262532">beforeTestListeners</a>: <span title="List[String =&gt; Any]">List</span><span class="delimiter">[</span>String =&gt; Any<span class="delimiter">]</span>, <a title="List[(String, Boolean, net.liftweb.common.Box[Throwable], List[java.lang.StackTraceElement]) =&gt; Any]" id="262533">afterTestListeners</a>: <span title="List[(String, Boolean, net.liftweb.common.Box[Throwable], List[java.lang.StackTraceElement]) =&gt; Any]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, Boolean, Box<span class="delimiter">[</span>Throwable<span class="delimiter">]</span>, List<span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.http.testing.TestRunner.fToItem : (f: () =&gt; Any)net.liftweb.http.testing.Item" id="259921">fToItem</a><span class="delimiter">(</span><a title="() =&gt; Any" id="262534">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">)</span>: <a href="#12969" title="net.liftweb.http.testing.Item">Item</a> = <a href="#262557" title="(f: () =&gt; Any)net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><a href="#262534" title="() =&gt; Any">f</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](what: List[net.liftweb.http.testing.Item])(() =&gt; net.liftweb.http.testing.TestResults, (String, () =&gt; T) =&gt; T)" id="259922">setup</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="259924">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="List[net.liftweb.http.testing.Item]" id="262631">what</a>: <span title="List[net.liftweb.http.testing.Item]">List</span><span class="delimiter">[</span>Item<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(() =&gt; net.liftweb.http.testing.TestResults, (String, () =&gt; T) =&gt; T)" class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; TestResults, <span class="delimiter">(</span>String,<span class="delimiter">(</span><span class="delimiter">)</span> =&gt; T<span class="delimiter">)</span> =&gt; T<span class="delimiter">)</span>  = <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]" id="262633">log</a> = <span title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]">ListBuffer</span><span class="delimiter">[</span>Tracker<span class="delimiter">]</span>

   <span class="keyword">def</span> <a title="(name: String)Unit" id="262634">beforeAssert</a><span class="delimiter">(</span><a title="String" id="262640">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#12964" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <a href="#262633" title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]">log</a> <span title="(x: net.liftweb.http.testing.Tracker)log.type">+=</span> <a href="#264322" title="(name: String, isAssert: Boolean, isBegin: Boolean, success: Boolean, exception: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])net.liftweb.http.testing.Tracker">Tracker</a><span class="delimiter">(</span><a href="#262640" title="String">name</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#262530" title="List[String =&gt; Any]">beforeAssertListeners</a>.<span title="(f: String =&gt; Any =&gt; Any)Unit">foreach</span><span class="delimiter">(</span><a href="#262717" title="(v1: String)Any">_</a><span class="delimiter">(</span><a href="#262640" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(name: String, success: Boolean)Unit" id="262635">afterAssert</a><span class="delimiter">(</span><a title="String" id="262721">name</a>: <span title="String">String</span>, <a title="Boolean" id="262722">success</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#12964" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <a href="#262633" title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]">log</a> <span title="(x: net.liftweb.http.testing.Tracker)log.type">+=</span> <a href="#264322" title="(name: String, isAssert: Boolean, isBegin: Boolean, success: Boolean, exception: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])net.liftweb.http.testing.Tracker">Tracker</a><span class="delimiter">(</span><a href="#262721" title="String">name</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#262722" title="Boolean">success</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#262531" title="List[(String, Boolean) =&gt; Any]">afterAssertListeners</a>.<span title="(f: (String, Boolean) =&gt; Any =&gt; Any)Unit">foreach</span><span class="delimiter">(</span><a href="#262746" title="(v1: String, v2: Boolean)Any">_</a><span class="delimiter">(</span><a href="#262721" title="String">name</a>, <a href="#262722" title="Boolean">success</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(name: String, f: () =&gt; T)T" id="262636">applyAssert</a><span class="delimiter">(</span><a title="String" id="262751">name</a>: <span title="String">String</span>, <a title="() =&gt; T" id="262752">f</a>:<span class="delimiter">(</span><span class="delimiter">)</span> =&gt; T<span class="delimiter">)</span>: <a href="#259924" title="T">T</a> = <a href="#12964" title="(x$1: T)T">synchronized</a> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Boolean" id="262755">success</a> = <span title="Boolean(false)" class="keyword">false</span>
      <a href="#262634" title="(name: String)Unit">beforeAssert</a><span class="delimiter">(</span><a href="#262751" title="String">name</a><span class="delimiter">)</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="T" id="262756">ret</a> = <a href="#262752" title="()T">f</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#262755" title="Boolean">success</a> = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#262756" title="T">ret</a>
      <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
        <a href="#262635" title="(name: String, success: Boolean)Unit">afterAssert</a><span class="delimiter">(</span><a href="#262751" title="String">name</a>, <a href="#262755" title="Boolean">success</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(name: String)Unit" id="262637">beforeTest</a><span class="delimiter">(</span><a title="String" id="262758">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#262633" title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]">log</a> <span title="(x: net.liftweb.http.testing.Tracker)log.type">+=</span> <a href="#264322" title="(name: String, isAssert: Boolean, isBegin: Boolean, success: Boolean, exception: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])net.liftweb.http.testing.Tracker">Tracker</a><span class="delimiter">(</span><a href="#262758" title="String">name</a>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#262532" title="List[String =&gt; Any]">beforeTestListeners</a>.<span title="(f: String =&gt; Any =&gt; Any)Unit">foreach</span><span class="delimiter">(</span><a href="#262780" title="(v1: String)Any">_</a><span class="delimiter">(</span><a href="#262758" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(name: String, success: Boolean, excp: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])Unit" id="262638">afterTest</a><span class="delimiter">(</span><a title="String" id="262783">name</a>: <span title="String">String</span>, <a title="Boolean" id="262784">success</a>: <span title="Boolean">Boolean</span>, <a title="net.liftweb.common.Box[Throwable]" id="262785">excp</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Throwable]">Box</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span>, <a title="List[java.lang.StackTraceElement]" id="262786">trace</a>: <span title="List[java.lang.StackTraceElement]">List</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#262633" title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]">log</a> <span title="(x: net.liftweb.http.testing.Tracker)log.type">+=</span> <a href="#264322" title="(name: String, isAssert: Boolean, isBegin: Boolean, success: Boolean, exception: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])net.liftweb.http.testing.Tracker">Tracker</a><span class="delimiter">(</span><a href="#262783" title="String">name</a>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#262784" title="Boolean">success</a>, <a href="#262785" title="net.liftweb.common.Box[Throwable]">excp</a>, <a href="#262786" title="List[java.lang.StackTraceElement]">trace</a><span class="delimiter">)</span>
      <a href="#262533" title="List[(String, Boolean, net.liftweb.common.Box[Throwable], List[java.lang.StackTraceElement]) =&gt; Any]">afterTestListeners</a>.<span title="(f: (String, Boolean, net.liftweb.common.Box[Throwable], List[java.lang.StackTraceElement]) =&gt; Any =&gt; Any)Unit">foreach</span><span class="delimiter">(</span><a href="#262808" title="(v1: String, v2: Boolean, v3: net.liftweb.common.Box[Throwable], v4: List[java.lang.StackTraceElement])Any">_</a><span class="delimiter">(</span><a href="#262783" title="String">name</a>, <a href="#262784" title="Boolean">success</a>, <a href="#262785" title="net.liftweb.common.Box[Throwable]">excp</a>, <a href="#262786" title="List[java.lang.StackTraceElement]">trace</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>



  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.testing.TestResults" id="262639">run</a>: <a href="#264326" title="net.liftweb.http.testing.TestResults">TestResults</a> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="262820">doResetDB</a> <span class="delimiter">{</span>
      <a href="#262528" title="net.liftweb.common.Box[() =&gt; Any]">clearDB</a>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: () =&gt; Any =&gt; Any)Unit">foreach</a><span class="delimiter">(</span><a href="#262827" title="()Any">_</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#262529" title="net.liftweb.common.Box[() =&gt; Any]">setupDB</a>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: () =&gt; Any =&gt; Any)Unit">foreach</a><span class="delimiter">(</span><a href="#262833" title="()Any">_</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#262820" title="=&gt; Unit">doResetDB</a>


    <span class="keyword">def</span> <a title="(testItem: net.liftweb.http.testing.Item)Unit" id="262821">runASingleTest</a><span class="delimiter">(</span><a title="net.liftweb.http.testing.Item" id="262835">testItem</a>: <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#262637" title="(name: String)Unit">beforeTest</a><span class="delimiter">(</span><a href="#262835" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262571" title="=&gt; String">name</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="java.lang.StackTraceElement" id="262836">myTrace</a> = <span class="delimiter">(</span><span class="keyword">try</span><span class="delimiter">{</span><span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span><span class="keyword">case</span> <a title="java.lang.Throwable" id="262845">e</a> =&gt; <a href="#262845" title="java.lang.Throwable">e</a><span class="delimiter">}</span><span class="delimiter">)</span>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span>.<span title="=&gt; List[java.lang.StackTraceElement]">tail</span>.<span title="=&gt; java.lang.StackTraceElement">head</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#262835" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262572" title="=&gt; Boolean">resetDB</a><span class="delimiter">)</span> <a href="#262820" title="=&gt; Unit">doResetDB</a>
      <span class="keyword">val</span> <a href="#262838" title="(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Box[java.lang.Throwable] with Serializable)" class="delimiter">(</a><a href="#262837" title="Boolean" id="262838">success</a>, <a href="#262837" title="List[java.lang.StackTraceElement]" id="262839">trace</a>, <a href="#262837" title="&lt;none&gt; extends net.liftweb.common.Box[java.lang.Throwable] with Serializable" id="262840">excp</a><span class="delimiter">)</span> = <span title="(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Box[java.lang.Throwable] with Serializable) @unchecked" class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#262835" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262551" title="(cnt: Int)() =&gt; Any">getFunc</a><span title="()Any" class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="(_1: Boolean, _2: scala.collection.immutable.Nil.type, _3: net.liftweb.common.Empty.type)(Boolean, scala.collection.immutable.Nil.type, net.liftweb.common.Empty.type)" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <span title="object Nil">Nil</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Full[java.lang.Throwable])" id="262986">e</a> =&gt;
        <span class="keyword">def</span> <a title="(ex: Throwable, base: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]" id="262987">combineStack</a><span class="delimiter">(</span><a title="Throwable" id="262989">ex</a>: <span title="Throwable">Throwable</span>,<a title="List[java.lang.StackTraceElement]" id="262990">base</a>: <span title="List[java.lang.StackTraceElement]">List</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[java.lang.StackTraceElement]">List</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span> = <a href="#262989" title="Throwable">ex</a> <span title="List[java.lang.StackTraceElement]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="List[java.lang.StackTraceElement]" class="keyword">null</span> =&gt; <a href="#262990" title="List[java.lang.StackTraceElement]">base</a>
          <span class="keyword">case</span> <a title="List[java.lang.StackTraceElement]" id="262991">e</a> =&gt; <a href="#262987" title="(ex: Throwable, base: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]">combineStack</a><span class="delimiter">(</span><a href="#262991" title="Throwable">e</a>.<span title="()java.lang.Throwable">getCause</span>,<a href="#262991" title="Throwable">e</a>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span> <a href="#262992" title="(prefix: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]">:::</a> <a href="#262990" title="List[java.lang.StackTraceElement]">base</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[java.lang.StackTraceElement]" id="262988">trace</a> = <a href="#262987" title="(ex: Throwable, base: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]">combineStack</a><span class="delimiter">(</span><a href="#262986" title="java.lang.Throwable">e</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span>.<span title="(p: java.lang.StackTraceElement =&gt; Boolean)List[java.lang.StackTraceElement]">takeWhile</span><span class="delimiter">(</span><a title="java.lang.StackTraceElement" id="263122">e</a> =&gt; <a href="#263122" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getClassName</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#262836" title="java.lang.StackTraceElement">myTrace</a>.<span title="()java.lang.String">getClassName</span> <span title="(x: Boolean)Boolean">||</span> <a href="#263122" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getFileName</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#262836" title="java.lang.StackTraceElement">myTrace</a>.<span title="()java.lang.String">getFileName</span> <span title="(x: Boolean)Boolean">||</span> <a href="#263122" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getMethodName</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#262836" title="java.lang.StackTraceElement">myTrace</a>.<span title="()java.lang.String">getMethodName</span><span class="delimiter">)</span>.<span title="(n: Int)List[java.lang.StackTraceElement]">dropRight</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <span title="(_1: Boolean, _2: List[java.lang.StackTraceElement], _3: net.liftweb.common.Full[java.lang.Throwable])(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Full[java.lang.Throwable])" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#262988" title="List[java.lang.StackTraceElement]">trace</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.lang.Throwable)net.liftweb.common.Full[java.lang.Throwable]">Full</a><span class="delimiter">(</span><a href="#262986" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#262638" title="(name: String, success: Boolean, excp: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])Unit">afterTest</a><span class="delimiter">(</span><a href="#262835" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262571" title="=&gt; String">name</a>, <a href="#262838" title="Boolean">success</a>, <a href="#262840" title="&lt;none&gt; extends net.liftweb.common.Box[java.lang.Throwable] with Serializable">excp</a>, <a href="#262839" title="List[java.lang.StackTraceElement]">trace</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(testItem: net.liftweb.http.testing.Item, cnt: Int)Unit" id="262822">runForkTest</a><span class="delimiter">(</span><a title="net.liftweb.http.testing.Item" id="263240">testItem</a>: <a href="#12969" title="net.liftweb.http.testing.Item">Item</a>, <a title="Int" id="263241">cnt</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[java.lang.Thread]" id="263242">threads</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="263377">n</a> &lt;- <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#263241" title="Int">cnt</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; java.lang.Thread)(implicit bf: scala.collection.generic.CanBuildFrom[List[Int],java.lang.Thread,List[java.lang.Thread]])List[java.lang.Thread]">toList</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.Thread" id="263378">thread</a> = <span title="(x$1: java.lang.Runnable)java.lang.Thread" class="keyword">new</span> <span title="java.lang.Thread">Thread</span><span class="delimiter">(</span><a href="#263383" title="java.lang.Object with java.lang.Runnable" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with java.lang.Runnable" id="263383">Runnable</a> <span class="delimiter">{</span><span class="keyword">def</span> <a title="()Unit" id="263385">run</a> <span class="delimiter">{</span>
      <a href="#262637" title="(name: String)Unit">beforeTest</a><span class="delimiter">(</span><a href="#263240" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262571" title="=&gt; String">name</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; thread &quot;)" class="string">&quot; thread &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#263377" title="Int">n</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="java.lang.StackTraceElement" id="263390">myTrace</a> = <span class="delimiter">(</span><span class="keyword">try</span><span class="delimiter">{</span><span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span><span class="keyword">case</span> <a title="java.lang.Throwable" id="263399">e</a> =&gt; <a href="#263399" title="java.lang.Throwable">e</a><span class="delimiter">}</span><span class="delimiter">)</span>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span>.<span title="=&gt; List[java.lang.StackTraceElement]">tail</span>.<span title="=&gt; java.lang.StackTraceElement">head</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#263240" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262572" title="=&gt; Boolean">resetDB</a><span class="delimiter">)</span> <a href="#262820" title="=&gt; Unit">doResetDB</a>
      <span class="keyword">val</span> <a href="#263392" title="(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Box[java.lang.Throwable] with Serializable)" class="delimiter">(</a><a href="#263391" title="Boolean" id="263392">success</a>, <a href="#263391" title="List[java.lang.StackTraceElement]" id="263393">trace</a>, <a href="#263391" title="&lt;none&gt; extends net.liftweb.common.Box[java.lang.Throwable] with Serializable" id="263394">excp</a><span class="delimiter">)</span> = <span title="(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Box[java.lang.Throwable] with Serializable) @unchecked" class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#263240" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262551" title="(cnt: Int)() =&gt; Any">getFunc</a><span title="()Any" class="delimiter">(</span><a href="#263377" title="Int">n</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="(_1: Boolean, _2: scala.collection.immutable.Nil.type, _3: net.liftweb.common.Empty.type)(Boolean, scala.collection.immutable.Nil.type, net.liftweb.common.Empty.type)" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <span title="object Nil">Nil</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Full[java.lang.Throwable])" id="263514">e</a> =&gt;
        <span class="keyword">def</span> <a title="(ex: Throwable, base: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]" id="263515">combineStack</a><span class="delimiter">(</span><a title="Throwable" id="263517">ex</a>: <span title="Throwable">Throwable</span>,<a title="List[java.lang.StackTraceElement]" id="263518">base</a>: <span title="List[java.lang.StackTraceElement]">List</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[java.lang.StackTraceElement]">List</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span> = <a href="#263517" title="Throwable">ex</a> <span title="List[java.lang.StackTraceElement]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="List[java.lang.StackTraceElement]" class="keyword">null</span> =&gt; <a href="#263518" title="List[java.lang.StackTraceElement]">base</a>
          <span class="keyword">case</span> <a title="List[java.lang.StackTraceElement]" id="263519">e</a> =&gt; <a href="#263515" title="(ex: Throwable, base: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]">combineStack</a><span class="delimiter">(</span><a href="#263519" title="Throwable">e</a>.<span title="()java.lang.Throwable">getCause</span>,<a href="#263519" title="Throwable">e</a>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span> <a href="#263520" title="(prefix: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]">:::</a> <a href="#263518" title="List[java.lang.StackTraceElement]">base</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[java.lang.StackTraceElement]" id="263516">trace</a> = <a href="#263515" title="(ex: Throwable, base: List[java.lang.StackTraceElement])List[java.lang.StackTraceElement]">combineStack</a><span class="delimiter">(</span><a href="#263514" title="java.lang.Throwable">e</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span>.<span title="(p: java.lang.StackTraceElement =&gt; Boolean)List[java.lang.StackTraceElement]">takeWhile</span><span class="delimiter">(</span><a title="java.lang.StackTraceElement" id="263639">e</a> =&gt; <a href="#263639" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getClassName</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#263390" title="java.lang.StackTraceElement">myTrace</a>.<span title="()java.lang.String">getClassName</span> <span title="(x: Boolean)Boolean">||</span> <a href="#263639" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getFileName</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#263390" title="java.lang.StackTraceElement">myTrace</a>.<span title="()java.lang.String">getFileName</span> <span title="(x: Boolean)Boolean">||</span> <a href="#263639" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getMethodName</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#263390" title="java.lang.StackTraceElement">myTrace</a>.<span title="()java.lang.String">getMethodName</span><span class="delimiter">)</span>.<span title="(n: Int)List[java.lang.StackTraceElement]">dropRight</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <span title="(_1: Boolean, _2: List[java.lang.StackTraceElement], _3: net.liftweb.common.Full[java.lang.Throwable])(Boolean, List[java.lang.StackTraceElement], net.liftweb.common.Full[java.lang.Throwable])" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#263516" title="List[java.lang.StackTraceElement]">trace</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.lang.Throwable)net.liftweb.common.Full[java.lang.Throwable]">Full</a><span class="delimiter">(</span><a href="#263514" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#262638" title="(name: String, success: Boolean, excp: net.liftweb.common.Box[Throwable], trace: List[java.lang.StackTraceElement])Unit">afterTest</a><span class="delimiter">(</span><a href="#263240" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262571" title="=&gt; String">name</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; thread &quot;)" class="string">&quot; thread &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#263377" title="Int">n</a>, <a href="#263392" title="Boolean">success</a>, <a href="#263394" title="&lt;none&gt; extends net.liftweb.common.Box[java.lang.Throwable] with Serializable">excp</a>, <a href="#263393" title="List[java.lang.StackTraceElement]">trace</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
        <a href="#263378" title="java.lang.Thread">thread</a>.<span title="()Unit">start</span>
        <a href="#263378" title="java.lang.Thread">thread</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(in: List[java.lang.Thread])Unit" id="263243">waitAll</a><span class="delimiter">(</span><a title="List[java.lang.Thread]" id="263784">in</a>: <span title="List[java.lang.Thread]">List</span><span class="delimiter">[</span>Thread<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#263784" title="List[java.lang.Thread]">in</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Nil</span> =&gt;
          <span class="keyword">case</span> <a title="Unit" id="263789">x</a> :: <a title="List[java.lang.Thread]" id="263790">xs</a> =&gt; <a href="#263789" title="java.lang.Thread">x</a>.<span title="()Unit">join</span>; <a href="#263243" title="(in: List[java.lang.Thread])Unit">waitAll</a><span class="delimiter">(</span><a href="#263790" title="List[java.lang.Thread]">xs</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="#263243" title="(in: List[java.lang.Thread])Unit">waitAll</a><span class="delimiter">(</span><a href="#263242" title="List[java.lang.Thread]">threads</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#262631" title="List[net.liftweb.http.testing.Item]">what</a>.<span title="(f: net.liftweb.http.testing.Item =&gt; Unit)Unit">foreach</span><span class="delimiter">{</span>
      <a title="net.liftweb.http.testing.Item" id="263812">testItem</a> =&gt;

      <a href="#263812" title="net.liftweb.http.testing.Item">testItem</a>.<a href="#262574" title="=&gt; Int">forkCnt</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit" class="int">0</span> =&gt; <a href="#262821" title="(testItem: net.liftweb.http.testing.Item)Unit">runASingleTest</a><span class="delimiter">(</span><a href="#263812" title="net.liftweb.http.testing.Item">testItem</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="263813">n</a> =&gt; <a href="#262822" title="(testItem: net.liftweb.http.testing.Item, cnt: Int)Unit">runForkTest</a><span class="delimiter">(</span><a href="#263812" title="net.liftweb.http.testing.Item">testItem</a>, <a href="#263813" title="Int">n</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>


    <span class="delimiter">}</span>
    <a href="#264326" title="(res: List[net.liftweb.http.testing.Tracker])net.liftweb.http.testing.TestResults">TestResults</a><span class="delimiter">(</span><a href="#262633" title="scala.collection.mutable.ListBuffer[net.liftweb.http.testing.Tracker]">log</a>.<span title="=&gt; List[net.liftweb.http.testing.Tracker]">toList</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span title="(_1: () =&gt; net.liftweb.http.testing.TestResults, _2: (String, () =&gt; T) =&gt; T)(() =&gt; net.liftweb.http.testing.TestResults, (String, () =&gt; T) =&gt; T)" class="delimiter">(</span><a href="#262639" title="=&gt; net.liftweb.http.testing.TestResults">run</a> _, <a href="#262636" title="(name: String, f: () =&gt; T)T">applyAssert</a> _<span class="delimiter">)</span>
<span class="delimiter">}</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class TestResults extends java.lang.Object with ScalaObject with Product with Serializable" id="264326">TestResults</a><a href="#264326" title="ScalaObject" class="delimiter">(</a><a title="List[net.liftweb.http.testing.Tracker]" id="263819">res</a>: <span title="List[net.liftweb.http.testing.Tracker]">List</span><span class="delimiter">[</span>Tracker<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="262818">stats</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[net.liftweb.http.testing.Tracker]" id="263839">rev</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="=&gt; List[net.liftweb.http.testing.Tracker]">reverse</span>
    <span class="keyword">val</span> <a title="Long" id="263840">start</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="(f: net.liftweb.http.testing.Tracker =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.testing.Tracker],Long,List[Long]])List[Long]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Long,List[Long]]" class="delimiter">(</span><a href="#263863" title="net.liftweb.http.testing.Tracker">_</a>.<a href="#262671" title="=&gt; Long">at</a><span class="delimiter">)</span>.<span title="(f: (Long, Long) =&gt; Long)Long">reduceLeft</span><span class="delimiter">(</span><span class="delimiter">(</span>a: <span title="Long">Long</span>, b: <span title="Long">Long</span><span class="delimiter">)</span> =&gt; <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#263909" title="Long">a</a> <span title="(x: Long)Boolean">&lt;</span> <a href="#263910" title="Long">b</a><span class="delimiter">)</span> <a href="#263909" title="Long">a</a> <span class="keyword">else</span> <a href="#263910" title="Long">b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Long" id="263841">end</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="(f: net.liftweb.http.testing.Tracker =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.testing.Tracker],Long,List[Long]])List[Long]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Long,List[Long]]" class="delimiter">(</span><a href="#263926" title="net.liftweb.http.testing.Tracker">_</a>.<a href="#262671" title="=&gt; Long">at</a><span class="delimiter">)</span>.<span title="(f: (Long, Long) =&gt; Long)Long">reduceLeft</span><span class="delimiter">(</span><span class="delimiter">(</span>a: <span title="Long">Long</span>, b: <span title="Long">Long</span><span class="delimiter">)</span> =&gt; <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#263968" title="Long">a</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#263969" title="Long">b</a><span class="delimiter">)</span> <a href="#263968" title="Long">a</a> <span class="keyword">else</span> <a href="#263969" title="Long">b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="263842">assertCnt</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="(p: net.liftweb.http.testing.Tracker =&gt; Boolean)List[net.liftweb.http.testing.Tracker]">filter</span><span class="delimiter">(</span><a title="net.liftweb.http.testing.Tracker" id="263978">a</a> =&gt; <a href="#263978" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262680" title="=&gt; Boolean">isAssert</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#263978" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262681" title="=&gt; Boolean">isBegin</a><span class="delimiter">)</span>.<span title="=&gt; Int">length</span>
    <span class="keyword">val</span> <a title="Int" id="263843">testCnt</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="(p: net.liftweb.http.testing.Tracker =&gt; Boolean)List[net.liftweb.http.testing.Tracker]">filter</span><span class="delimiter">(</span><a title="net.liftweb.http.testing.Tracker" id="263985">a</a> =&gt; <a href="#263985" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262673" title="=&gt; Boolean">isTest</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#263985" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262681" title="=&gt; Boolean">isBegin</a><span class="delimiter">)</span>.<span title="=&gt; Int">length</span>
    <span class="keyword">val</span> <a title="List[net.liftweb.http.testing.Tracker]" id="263844">failedAsserts</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="(p: net.liftweb.http.testing.Tracker =&gt; Boolean)List[net.liftweb.http.testing.Tracker]">filter</span><span class="delimiter">(</span><a title="net.liftweb.http.testing.Tracker" id="263991">a</a> =&gt; <a href="#263991" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262680" title="=&gt; Boolean">isAssert</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#263991" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262682" title="=&gt; Boolean">success</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[net.liftweb.http.testing.Tracker]" id="263845">failedTests</a> = <a href="#263819" title="=&gt; List[net.liftweb.http.testing.Tracker]">res</a>.<span title="(p: net.liftweb.http.testing.Tracker =&gt; Boolean)List[net.liftweb.http.testing.Tracker]">filter</span><span class="delimiter">(</span><a title="net.liftweb.http.testing.Tracker" id="263993">a</a> =&gt; <a href="#263993" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262673" title="=&gt; Boolean">isTest</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#263993" title="net.liftweb.http.testing.Tracker">a</a>.<a href="#262682" title="=&gt; Boolean">success</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.lang.String" id="263846">append</a> = <span title="(_1: List[net.liftweb.http.testing.Tracker], _2: List[net.liftweb.http.testing.Tracker])(List[net.liftweb.http.testing.Tracker], List[net.liftweb.http.testing.Tracker])" class="delimiter">(</span><a href="#263845" title="List[net.liftweb.http.testing.Tracker]">failedTests</a>, <a href="#263844" title="List[net.liftweb.http.testing.Tracker]">failedAsserts</a><span class="delimiter">)</span> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)" class="delimiter">(</span><a title="List[net.liftweb.http.testing.Tracker]" id="264002">ft</a>,<a title="List[net.liftweb.http.testing.Tracker]" id="264003">fa</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#264002" title="List[net.liftweb.http.testing.Tracker]">ft</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#264003" title="List[net.liftweb.http.testing.Tracker]">fa</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="List[net.liftweb.http.testing.Tracker]" id="264016">ft</a>, <a title="List[net.liftweb.http.testing.Tracker]" id="264017">fa</a><span class="delimiter">)</span> =&gt;
        <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#264016" title="List[net.liftweb.http.testing.Tracker]">ft</a>.<span title="=&gt; Int">length</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; Failed Tests:\012&quot;)" class="string">&quot; Failed Tests:\n&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#264016" title="List[net.liftweb.http.testing.Tracker]">ft</a>.<span title="(f: net.liftweb.http.testing.Tracker =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.testing.Tracker],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a title="net.liftweb.http.testing.Tracker" id="264034">v</a> =&gt; <a href="#264034" title="net.liftweb.http.testing.Tracker">v</a>.<a href="#262679" title="=&gt; String">name</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#264034" title="net.liftweb.http.testing.Tracker">v</a>.<a href="#262683" title="=&gt; net.liftweb.common.Box[Throwable]">exception</a>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; Throwable">open_!</a>.<span title="()java.lang.String">getMessage</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; \012&quot;)" class="string">&quot; \n&quot;</span><span title="(x$1: Any)java.lang.String">+</span>
          <a href="#264034" title="net.liftweb.http.testing.Tracker">v</a>.<a href="#262684" title="=&gt; List[java.lang.StackTraceElement]">trace</a>.<span title="(f: java.lang.StackTraceElement =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.StackTraceElement],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a title="java.lang.StackTraceElement" id="264051">st</a> =&gt; <span title="java.lang.String(&quot;           &quot;)" class="string">&quot;           &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#264051" title="java.lang.StackTraceElement">st</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span title="java.lang.String(&quot;Ran &quot;)" class="string">&quot;Ran &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#263843" title="Int">testCnt</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; tests and &quot;)" class="string">&quot; tests and &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#263842" title="Int">assertCnt</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; asserts in &quot;)" class="string">&quot; asserts in &quot;</span><span title="(x$1: Any)java.lang.String">+</span><span class="delimiter">(</span><a href="#263841" title="Long">end</a> <span title="(x: Long)Long">-</span> <a href="#263840" title="Long">start</a><span class="delimiter">)</span><span title="(x: Long)Long">/</span><span title="Long(1000L)" class="long">1000L</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; seconds&quot;)" class="string">&quot; seconds&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#263846" title="java.lang.String">append</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class TestFailureError extends java.lang.Error with ScalaObject" id="12968">TestFailureError</a><a href="#12968" title="ScalaObject" class="delimiter">(</a><a title="String" id="264185">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> java.lang.<span title="java.lang.Error">Error</span><span class="delimiter">(</span><a href="#264185" title="String">msg</a><span class="delimiter">)</span>

<span class="keyword">class</span> <a title="class Item extends java.lang.Object with ScalaObject" id="12969">Item</a><a href="#12969" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="262571">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Boolean" id="262572">resetDB</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="net.liftweb.common.Box[() =&gt; Any]" id="262573">func</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[() =&gt; Any]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="Int" id="262574">forkCnt</a>: <span title="Int">Int</span>, <a title="net.liftweb.common.Box[Int =&gt; Any]" id="262575">forkFunc</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Int =&gt; Any]">Box</a><span class="delimiter">[</span>Int =&gt; Any<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(cnt: Int)() =&gt; Any" id="262551">getFunc</a><span class="delimiter">(</span><a title="Int" id="262957">cnt</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="(_1: net.liftweb.common.Box[() =&gt; Any], _2: net.liftweb.common.Box[Int =&gt; Any])(net.liftweb.common.Box[() =&gt; Any], net.liftweb.common.Box[Int =&gt; Any])" class="delimiter">(</span><a href="#262573" title="=&gt; net.liftweb.common.Box[() =&gt; Any]">func</a>, <a href="#262575" title="net.liftweb.common.Box[Int =&gt; Any]">forkFunc</a><span class="delimiter">)</span> <span title="() =&gt; Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="() =&gt; Any" class="delimiter">(</span>Full<span class="delimiter">(</span><a title="() =&gt; Any" id="262969">f</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <a href="#262969" title="() =&gt; Any">f</a>
      <span class="keyword">case</span> <span title="() =&gt; Any" class="delimiter">(</span>_, Full<span class="delimiter">(</span><a title="Int =&gt; Any" id="262973">cf</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#262973" title="(v1: Int)Any">cf</a><span class="delimiter">(</span><a href="#262957" title="Int">cnt</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="() =&gt; Unit">_</span> =&gt; <span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.http.testing.Item" id="12970">Item</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="262554">_cnt</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Int" id="262556">cnt</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="(x$1: Int)Int">synchronized</span> <span class="delimiter">{</span>
    <a href="#262554" title="(x$1: Int)Unit">_cnt</a> = <a href="#262554" title="=&gt; Int">_cnt</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
    <a href="#262554" title="=&gt; Int">_cnt</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: () =&gt; Any)net.liftweb.http.testing.Item" id="262557">apply</a><span class="delimiter">(</span><a title="() =&gt; Any" id="262621">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">)</span> = <span title="net.liftweb.http.testing.Item" class="keyword">new</span> <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Test &quot;)" class="string">&quot;Test &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#262556" title="()Int">cnt</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>,<a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: () =&gt; Any)net.liftweb.common.Full[() =&gt; Any]">Full</a><span class="delimiter">(</span><a href="#262621" title="() =&gt; Any">f</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String, f: () =&gt; Any)net.liftweb.http.testing.Item" id="262558">apply</a><span class="delimiter">(</span><a title="String" id="262614">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="262615">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">)</span> = <span title="net.liftweb.http.testing.Item" class="keyword">new</span> <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><a href="#262614" title="String">name</a>, <span title="Boolean(false)" class="keyword">false</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: () =&gt; Any)net.liftweb.common.Full[() =&gt; Any]">Full</a><span class="delimiter">(</span><a href="#262615" title="() =&gt; Any">f</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String, resetDB: Boolean, f: () =&gt; Any)net.liftweb.http.testing.Item" id="262559">apply</a><span class="delimiter">(</span><a title="String" id="262606">name</a>: <span title="String">String</span>, <a title="Boolean" id="262607">resetDB</a>: <span title="Boolean">Boolean</span>, <a title="() =&gt; Any" id="262608">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any<span class="delimiter">)</span> = <span title="net.liftweb.http.testing.Item" class="keyword">new</span> <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><a href="#262606" title="String">name</a>, <a href="#262607" title="Boolean">resetDB</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: () =&gt; Any)net.liftweb.common.Full[() =&gt; Any]">Full</a><span class="delimiter">(</span><a href="#262608" title="() =&gt; Any">f</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(theCnt: Int, f: Int =&gt; Any)net.liftweb.http.testing.Item" id="262560">apply</a><span class="delimiter">(</span><a title="Int" id="262587">theCnt</a>: <span title="Int">Int</span>, <a title="Int =&gt; Any" id="262588">f</a>: Int =&gt; Any<span class="delimiter">)</span> = <span title="net.liftweb.http.testing.Item" class="keyword">new</span> <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Test &quot;)" class="string">&quot;Test &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#262556" title="()Int">cnt</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <a href="#262587" title="Int">theCnt</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Int =&gt; Any)net.liftweb.common.Full[Int =&gt; Any]">Full</a><span class="delimiter">(</span><a href="#262588" title="Int =&gt; Any">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String, theCnt: Int, f: Int =&gt; Any)net.liftweb.http.testing.Item" id="262561">apply</a><span class="delimiter">(</span><a title="String" id="262579">name</a>: <span title="String">String</span>, <a title="Int" id="262580">theCnt</a>: <span title="Int">Int</span>, <a title="Int =&gt; Any" id="262581">f</a>: Int =&gt; Any<span class="delimiter">)</span> = <span title="net.liftweb.http.testing.Item" class="keyword">new</span> <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><a href="#262579" title="String">name</a>, <span title="Boolean(false)" class="keyword">false</span>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <a href="#262580" title="Int">theCnt</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Int =&gt; Any)net.liftweb.common.Full[Int =&gt; Any]">Full</a><span class="delimiter">(</span><a href="#262581" title="Int =&gt; Any">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String, resetDB: Boolean, theCnt: Int, f: Int =&gt; Any)net.liftweb.http.testing.Item" id="262562">apply</a><span class="delimiter">(</span><a title="String" id="262565">name</a>: <span title="String">String</span>, <a title="Boolean" id="262566">resetDB</a>: <span title="Boolean">Boolean</span>, <a title="Int" id="262567">theCnt</a>: <span title="Int">Int</span>, <a title="Int =&gt; Any" id="262568">f</a>: Int =&gt; Any<span class="delimiter">)</span> = <span title="net.liftweb.http.testing.Item" class="keyword">new</span> <a href="#12969" title="net.liftweb.http.testing.Item">Item</a><span class="delimiter">(</span><a href="#262565" title="String">name</a>, <a href="#262566" title="Boolean">resetDB</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <a href="#262567" title="Int">theCnt</a>, <a href="../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Int =&gt; Any)net.liftweb.common.Full[Int =&gt; Any]">Full</a><span class="delimiter">(</span><a href="#262568" title="Int =&gt; Any">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class Tracker extends java.lang.Object with ScalaObject with Product with Serializable" id="264322">Tracker</a><a href="#264322" title="ScalaObject" class="delimiter">(</a><a title="String" id="262679">name</a>: <span title="String">String</span>, <a title="Boolean" id="262680">isAssert</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="262681">isBegin</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="262682">success</a>: <span title="Boolean">Boolean</span>,
    <a title="net.liftweb.common.Box[Throwable]" id="262683">exception</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Throwable]">Box</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span>, <a title="List[java.lang.StackTraceElement]" id="262684">trace</a>: <span title="List[java.lang.StackTraceElement]">List</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="Long" id="262671">at</a> = <a href="../../../../../util/net/liftweb/util/TimeHelpers.scala.html#48788" title="=&gt; Long">millis</a>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="262673">isTest</a> = <span title="=&gt; Boolean">!</span><a href="#262680" title="=&gt; Boolean">isAssert</a>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>