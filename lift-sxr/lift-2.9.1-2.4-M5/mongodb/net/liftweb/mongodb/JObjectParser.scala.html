<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>mongodb/net/liftweb/mongodb/JObjectParser.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2010-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> mongodb

<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._

<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Date, UUID<span class="delimiter">}</span>
<span class="keyword">import</span> java.util.regex.Pattern

<span class="keyword">import</span> net.liftweb.json._
<span class="keyword">import</span> net.liftweb.common.Box

<span class="keyword">import</span> com.mongodb.<span class="delimiter">{</span>BasicDBObject, BasicDBList, DBObject<span class="delimiter">}</span>
<span class="keyword">import</span> org.bson.types.ObjectId

<span class="keyword">object</span> <a title="object net.liftweb.mongodb.JObjectParser" id="12286">JObjectParser</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/*
  * Parse a JObject into a DBObject
  */</span>
  <span class="keyword">def</span> <a title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject" id="202238">parse</a><span class="delimiter">(</span><a title="net.liftweb.json.package.JObject" id="202243">jo</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.package.JObject">JObject</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="202244">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="com.mongodb.DBObject">DBObject</span> =
    <a href="#202241" title="object net.liftweb.mongodb.JObjectParser.Parser">Parser</a>.<a href="#211322" title="(jo: net.liftweb.json.package.JObject, formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><span class="delimiter">(</span><a href="#202243" title="net.liftweb.json.package.JObject">jo</a>, <a href="#202244" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>

  <span class="comment">/*
  * Serialize a DBObject into a JObject
  */</span>
  <span class="keyword">def</span> <a title="(a: Any)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue" id="202239">serialize</a><span class="delimiter">(</span><a title="Any" id="206827">a</a>: <span title="Any">Any</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.json.Formats" id="206828">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a> = <a href="#202240" title="(a: Any, formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue">serialize</a><span class="delimiter">(</span><a href="#206827" title="Any">a</a>, <a href="#206828" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(a: Any, formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue" id="202240">serialize</a><span class="delimiter">(</span><a title="Any" id="211336">a</a>: <span title="Any">Any</span>, <a title="net.liftweb.json.Formats" id="211337">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Meta.scala.html#12309" title="object net.liftweb.mongodb.Meta">Meta</a>.<a href="Meta.scala.html#199468" title="object net.liftweb.mongodb.Meta.Reflection">Reflection</a>._
    <a href="#211336" title="Any">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span> <span title="net.liftweb.json.package.JValue" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JNull.type" class="keyword">null</span> =&gt; <a href="../../../../json/net/liftweb/json/package.scala.html#15382" title="=&gt; net.liftweb.json.JsonAST.JNull.type">JNull</a>
      <span class="keyword">case</span> <a title="&lt;none&gt; extends Product with net.liftweb.json.JsonAST.JValue with Serializable" id="211341">x</a> <span class="keyword">if</span> <a href="Meta.scala.html#199483" title="(clazz: Class[_])Boolean">primitive_?</a><span class="delimiter">(</span><a href="#211341" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span> =&gt; <a href="Meta.scala.html#199484" title="(a: Any)Product with net.liftweb.json.JsonAST.JValue with Serializable{type Values &gt;: String with BigInt with Double with Boolean}">primitive2jvalue</a><span class="delimiter">(</span><a href="#211341" title="AnyRef">x</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.json.JsonAST.JObject" id="211345">x</a> <span class="keyword">if</span> <a href="Meta.scala.html#199487" title="(clazz: Class[_])Boolean">datetype_?</a><span class="delimiter">(</span><a href="#211345" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span> =&gt; <a href="Meta.scala.html#199488" title="(a: Any)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.JsonAST.JObject">datetype2jvalue</a><span class="delimiter">(</span><a href="#211345" title="AnyRef">x</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#211337" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.json.package.JValue" id="211349">x</a> <span class="keyword">if</span> <a href="Meta.scala.html#199492" title="(clazz: Class[_])Boolean">mongotype_?</a><span class="delimiter">(</span><a href="#211349" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span> =&gt; <a href="Meta.scala.html#199493" title="(a: Any)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue">mongotype2jvalue</a><span class="delimiter">(</span><a href="#211349" title="AnyRef">x</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#211337" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.json.JsonAST.JArray" id="211353">x</a>: <span title="com.mongodb.BasicDBList">BasicDBList</span> =&gt; <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#51423" title="(arr: List[net.liftweb.json.JsonAST.JValue])net.liftweb.json.JsonAST.JArray">JArray</a><span class="delimiter">(</span><a href="#211353" title="(l: java.util.List[java.lang.Object])scala.collection.mutable.Buffer[java.lang.Object]">x</a>.<span title="=&gt; List[java.lang.Object]">toList</span>.<span title="(f: java.lang.Object =&gt; net.liftweb.json.package.JValue)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.Object],net.liftweb.json.package.JValue,List[net.liftweb.json.JsonAST.JValue]])List[net.liftweb.json.JsonAST.JValue]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.json.package.JValue,List[net.liftweb.json.package.JValue]]" class="delimiter">(</span> <a title="java.lang.Object" id="211556">x</a> =&gt; <a href="#202240" title="(a: Any, formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue">serialize</a><span class="delimiter">(</span><a href="#211556" title="java.lang.Object">x</a>, <a href="#211337" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.json.JsonAST.JObject" id="211590">x</a>: <span title="com.mongodb.BasicDBObject">BasicDBObject</span> =&gt; <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#51392" title="(obj: List[net.liftweb.json.JsonAST.JField])net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">(</span>
        <a href="#211590" title="com.mongodb.BasicDBObject">x</a>.<span title="(s: java.util.Set[java.lang.String])scala.collection.mutable.Set[java.lang.String]">keySet</span>.<span title="=&gt; List[java.lang.String]">toList</span>.<span title="(f: java.lang.String =&gt; net.liftweb.json.JsonAST.JField)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],net.liftweb.json.JsonAST.JField,List[net.liftweb.json.JsonAST.JField]])List[net.liftweb.json.JsonAST.JField]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.json.JsonAST.JField,List[net.liftweb.json.JsonAST.JField]]" class="delimiter">{</span> <a title="java.lang.String" id="211760">f</a> =&gt;
          <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50050" title="(name: String, value: net.liftweb.json.JsonAST.JValue)net.liftweb.json.JsonAST.JField">JField</a><span class="delimiter">(</span><a href="#211760" title="java.lang.String">f</a>.<span title="()java.lang.String">toString</span>, <a href="#202240" title="(a: Any, formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue">serialize</a><span class="delimiter">(</span><a href="#211590" title="com.mongodb.BasicDBObject">x</a>.<span title="(x$1: java.lang.String)java.lang.Object">get</span><span class="delimiter">(</span><a href="#211760" title="java.lang.String">f</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <a href="#211337" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.json.JsonAST.JNothing.type" id="211806">x</a> =&gt; <span class="delimiter">{</span>
        <a href="../../../../json/net/liftweb/json/package.scala.html#15380" title="=&gt; net.liftweb.json.JsonAST.JNothing.type">JNothing</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="object net.liftweb.mongodb.JObjectParser.Parser" id="202241">Parser</a> <span title="ScalaObject" class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(jo: net.liftweb.json.package.JObject, formats: net.liftweb.json.Formats)com.mongodb.DBObject" id="211322">parse</a><span class="delimiter">(</span><a title="net.liftweb.json.package.JObject" id="211329">jo</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.package.JObject">JObject</a>, <a title="net.liftweb.json.Formats" id="211330">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="com.mongodb.DBObject">DBObject</span> = <span class="delimiter">{</span>
      <a href="#211324" title="(obj: List[net.liftweb.json.package.JField], formats: net.liftweb.json.Formats)com.mongodb.BasicDBObject">parseObject</a><span class="delimiter">(</span><a href="#211329" title="net.liftweb.json.package.JObject">jo</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50169" title="=&gt; List[net.liftweb.json.JsonAST.JField]">obj</a>, <a href="#211330" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(arr: List[net.liftweb.json.package.JValue], formats: net.liftweb.json.Formats)com.mongodb.BasicDBList" id="211323">parseArray</a><span class="delimiter">(</span><a title="List[net.liftweb.json.package.JValue]" id="211811">arr</a>: <span title="List[net.liftweb.json.package.JValue]">List</span><span class="delimiter">[</span>JValue<span class="delimiter">]</span>, <a title="net.liftweb.json.Formats" id="211812">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="com.mongodb.BasicDBList">BasicDBList</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="com.mongodb.BasicDBList" id="211814">dbl</a> = <span title="com.mongodb.BasicDBList" class="keyword">new</span> <span title="com.mongodb.BasicDBList">BasicDBList</span>
      <a href="#211327" title="(xs: List[net.liftweb.json.package.JValue])List[net.liftweb.json.package.JValue]">trimArr</a><span class="delimiter">(</span><a href="#211811" title="List[net.liftweb.json.package.JValue]">arr</a><span class="delimiter">)</span>.<span title="(f: net.liftweb.json.package.JValue =&gt; AnyVal)Unit">foreach</span> <span class="delimiter">{</span> <a title="net.liftweb.json.package.JValue" id="211851">a</a> =&gt;
        <a href="#211851" title="net.liftweb.json.package.JValue">a</a> <span title="AnyVal" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Boolean">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$oid&quot;)" class="string">&quot;$oid&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="211859">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><span title="object org.bson.types.ObjectId">ObjectId</span>.<span title="(x$1: java.lang.String)Boolean">isValid</span><span class="delimiter">(</span><a href="#211859" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><span title="(x$1: java.lang.String)org.bson.types.ObjectId" class="keyword">new</span> <span title="org.bson.types.ObjectId">ObjectId</span><span class="delimiter">(</span><a href="#211859" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Boolean">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$regex&quot;)" class="string">&quot;$regex&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="211884">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$flags&quot;)" class="string">&quot;$flags&quot;</span>, JInt<span class="delimiter">(</span><a title="BigInt" id="211891">f</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt;
            <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><span title="object java.util.regex.Pattern">Pattern</span>.<span title="(x$1: java.lang.String, x$2: Int)java.util.regex.Pattern">compile</span><span class="delimiter">(</span><a href="#211884" title="String">s</a>, <a href="#211891" title="BigInt">f</a>.<span title="()Int">intValue</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$dt&quot;)" class="string">&quot;$dt&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="211903">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt;
            <a href="#211812" title="net.liftweb.json.Formats">formats</a>.<a href="../../../../json/net/liftweb/json/Formats.scala.html#53132" title="=&gt; net.liftweb.json.DateFormat">dateFormat</a>.<a href="../../../../json/net/liftweb/json/Formats.scala.html#78673" title="(s: String)Option[java.util.Date]">parse</a><span class="delimiter">(</span><a href="#211903" title="String">s</a><span class="delimiter">)</span> <span title="(f: java.util.Date =&gt; Boolean)Unit">foreach</span> <span class="delimiter">{</span> <a title="java.util.Date" id="211908">d</a> =&gt; <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><a href="#211908" title="java.util.Date">d</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <span class="keyword">case</span> <span title="Boolean">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$uuid&quot;)" class="string">&quot;$uuid&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="211919">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt;
            <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><span title="object java.util.UUID">UUID</span>.<span title="(x$1: java.lang.String)java.util.UUID">fromString</span><span class="delimiter">(</span><a href="#211919" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Boolean">JArray</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JValue]" id="211923">arr</a><span class="delimiter">)</span> =&gt; <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><a href="#211323" title="(arr: List[net.liftweb.json.package.JValue], formats: net.liftweb.json.Formats)com.mongodb.BasicDBList">parseArray</a><span class="delimiter">(</span><a href="#211923" title="List[net.liftweb.json.JsonAST.JValue]">arr</a>, <a href="#211812" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Boolean">JObject</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JField]" id="211927">jo</a><span class="delimiter">)</span> =&gt; <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><a href="#211324" title="(obj: List[net.liftweb.json.package.JField], formats: net.liftweb.json.Formats)com.mongodb.BasicDBObject">parseObject</a><span class="delimiter">(</span><a href="#211927" title="List[net.liftweb.json.JsonAST.JField]">jo</a>, <a href="#211812" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Boolean" id="211930">jv</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a> =&gt; <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>.<span title="(x$1: java.lang.Object)Boolean">add</span><span class="delimiter">(</span><a href="#211325" title="(jv: net.liftweb.json.package.JValue, formats: net.liftweb.json.Formats)java.lang.Object">renderValue</a><span class="delimiter">(</span><a href="#211930" title="net.liftweb.json.JsonAST.JValue">jv</a>, <a href="#211812" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#211814" title="com.mongodb.BasicDBList">dbl</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(obj: List[net.liftweb.json.package.JField], formats: net.liftweb.json.Formats)com.mongodb.BasicDBObject" id="211324">parseObject</a><span class="delimiter">(</span><a title="List[net.liftweb.json.package.JField]" id="211808">obj</a>: <span title="List[net.liftweb.json.package.JField]">List</span><span class="delimiter">[</span>JField<span class="delimiter">]</span>, <a title="net.liftweb.json.Formats" id="211809">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="com.mongodb.BasicDBObject">BasicDBObject</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="com.mongodb.BasicDBObject" id="211951">dbo</a> = <span title="com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span>
      <a href="#211328" title="(xs: List[net.liftweb.json.package.JField])List[net.liftweb.json.package.JField]">trimObj</a><span class="delimiter">(</span><a href="#211808" title="List[net.liftweb.json.package.JField]">obj</a><span class="delimiter">)</span>.<span title="(f: net.liftweb.json.package.JField =&gt; Any)Unit">foreach</span> <span class="delimiter">{</span> <a title="net.liftweb.json.package.JField" id="212084">jf</a> =&gt;
        <a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50114" title="=&gt; net.liftweb.json.JsonAST.JValue">value</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="java.lang.Object">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$oid&quot;)" class="string">&quot;$oid&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="212092">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><span title="object org.bson.types.ObjectId">ObjectId</span>.<span title="(x$1: java.lang.String)Boolean">isValid</span><span class="delimiter">(</span><a href="#212092" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <span title="(x$1: java.lang.String)org.bson.types.ObjectId" class="keyword">new</span> <span title="org.bson.types.ObjectId">ObjectId</span><span class="delimiter">(</span><a href="#212092" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="java.lang.Object">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$regex&quot;)" class="string">&quot;$regex&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="212110">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$flags&quot;)" class="string">&quot;$flags&quot;</span>, JInt<span class="delimiter">(</span><a title="BigInt" id="212117">f</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt;
            <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <span title="object java.util.regex.Pattern">Pattern</span>.<span title="(x$1: java.lang.String, x$2: Int)java.util.regex.Pattern">compile</span><span class="delimiter">(</span><a href="#212110" title="String">s</a>, <a href="#212117" title="BigInt">f</a>.<span title="()Int">intValue</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$dt&quot;)" class="string">&quot;$dt&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="212127">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt;
            <a href="#211809" title="net.liftweb.json.Formats">formats</a>.<a href="../../../../json/net/liftweb/json/Formats.scala.html#53132" title="=&gt; net.liftweb.json.DateFormat">dateFormat</a>.<a href="../../../../json/net/liftweb/json/Formats.scala.html#78673" title="(s: String)Option[java.util.Date]">parse</a><span class="delimiter">(</span><a href="#212127" title="String">s</a><span class="delimiter">)</span> <span title="(f: java.util.Date =&gt; java.lang.Object)Unit">foreach</span> <span class="delimiter">{</span> <a title="java.util.Date" id="212131">d</a> =&gt; <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#212131" title="java.util.Date">d</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <span class="keyword">case</span> <span title="java.lang.Object">JObject</span><span class="delimiter">(</span>JField<span class="delimiter">(</span><span title="java.lang.String(&quot;$uuid&quot;)" class="string">&quot;$uuid&quot;</span>, JString<span class="delimiter">(</span><a title="String" id="212140">s</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt;
            <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <span title="object java.util.UUID">UUID</span>.<span title="(x$1: java.lang.String)java.util.UUID">fromString</span><span class="delimiter">(</span><a href="#212140" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="java.lang.Object">JArray</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JValue]" id="212142">arr</a><span class="delimiter">)</span> =&gt; <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#211323" title="(arr: List[net.liftweb.json.package.JValue], formats: net.liftweb.json.Formats)com.mongodb.BasicDBList">parseArray</a><span class="delimiter">(</span><a href="#212142" title="List[net.liftweb.json.JsonAST.JValue]">arr</a>, <a href="#211809" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="java.lang.Object">JObject</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JField]" id="212144">jo</a><span class="delimiter">)</span> =&gt; <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#211324" title="(obj: List[net.liftweb.json.package.JField], formats: net.liftweb.json.Formats)com.mongodb.BasicDBObject">parseObject</a><span class="delimiter">(</span><a href="#212144" title="List[net.liftweb.json.JsonAST.JField]">jo</a>, <a href="#211809" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="java.lang.Object" id="212145">jv</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a> =&gt; <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#212084" title="net.liftweb.json.package.JField">jf</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#211325" title="(jv: net.liftweb.json.package.JValue, formats: net.liftweb.json.Formats)java.lang.Object">renderValue</a><span class="delimiter">(</span><a href="#212145" title="net.liftweb.json.JsonAST.JValue">jv</a>, <a href="#211809" title="net.liftweb.json.Formats">formats</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#211951" title="com.mongodb.BasicDBObject">dbo</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(jv: net.liftweb.json.package.JValue, formats: net.liftweb.json.Formats)java.lang.Object" id="211325">renderValue</a><span class="delimiter">(</span><a title="net.liftweb.json.package.JValue" id="211933">jv</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.package.JValue">JValue</a>, <a title="net.liftweb.json.Formats" id="211934">formats</a>: <a href="../../../../json/net/liftweb/json/Formats.scala.html#11107" title="net.liftweb.json.Formats">Formats</a><span class="delimiter">)</span>: <span title="java.lang.Object">Object</span> = <a href="#211933" title="net.liftweb.json.package.JValue">jv</a> <span title="java.lang.Object" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.Boolean">JBool</span><span class="delimiter">(</span><a title="Boolean" id="212155">b</a><span class="delimiter">)</span> =&gt; java.lang.<span title="object java.lang.Boolean">Boolean</span>.<span title="(x$1: Boolean)java.lang.Boolean">valueOf</span><span class="delimiter">(</span><a href="#212155" title="Boolean">b</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="java.lang.Object">JInt</span><span class="delimiter">(</span><a title="BigInt" id="212160">n</a><span class="delimiter">)</span> =&gt; <a href="#211326" title="(i: BigInt)java.lang.Object">renderInteger</a><span class="delimiter">(</span><a href="#212160" title="BigInt">n</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="java.lang.Double">JDouble</span><span class="delimiter">(</span><a title="Double" id="212163">n</a><span class="delimiter">)</span> =&gt; <span title="java.lang.Double" class="keyword">new</span> java.lang.<span title="java.lang.Double">Double</span><span class="delimiter">(</span><a href="#212163" title="Double">n</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../../../json/net/liftweb/json/package.scala.html#15382" title="Null(null)">JNull</a> =&gt; <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">case</span> <a href="../../../../json/net/liftweb/json/package.scala.html#15380" title="Nothing">JNothing</a> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;can\'t render \'nothing\'&quot;)" class="string">&quot;can't render 'nothing'&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;null&quot;)">JString</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;null&quot;)" class="string">&quot;null&quot;</span>
      <span class="keyword">case</span> <span title="org.bson.types.ObjectId">JString</span><span class="delimiter">(</span><a title="String" id="212168">s</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><span title="object org.bson.types.ObjectId">ObjectId</span>.<span title="(x$1: java.lang.String)Boolean">isValid</span><span class="delimiter">(</span><a href="#212168" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x$1: java.lang.String)org.bson.types.ObjectId" class="keyword">new</span> <span title="org.bson.types.ObjectId">ObjectId</span><span class="delimiter">(</span><a href="#212168" title="String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="String">JString</span><span class="delimiter">(</span><a title="String" id="212173">s</a><span class="delimiter">)</span> =&gt; <a href="#212173" title="String">s</a>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">_</span> =&gt;  <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="delimiter">}</span>

    <span class="comment">// FIXME: This is not ideal.</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(i: BigInt)java.lang.Object" id="211326">renderInteger</a><span class="delimiter">(</span><a title="BigInt" id="212161">i</a>: <span title="BigInt">BigInt</span><span class="delimiter">)</span>: <span title="java.lang.Object">Object</span> = <span class="delimiter">{</span>
      <span title="java.lang.Object" class="keyword">if</span> <span class="delimiter">(</span><a href="#212161" title="BigInt">i</a> <span title="(that: scala.math.BigInt)Boolean">&lt;=</span> java.lang.Integer.<span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt">MAX_VALUE</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#212161" title="BigInt">i</a> <span title="(that: scala.math.BigInt)Boolean">&gt;=</span> java.lang.Integer.<span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt">MIN_VALUE</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="java.lang.Integer" class="keyword">new</span> java.lang.<span title="java.lang.Integer">Integer</span><span class="delimiter">(</span><a href="#212161" title="BigInt">i</a>.<span title="()Int">intValue</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span title="java.lang.Object" class="keyword">if</span> <span class="delimiter">(</span><a href="#212161" title="BigInt">i</a> <span title="(that: scala.math.BigInt)Boolean">&lt;=</span> java.lang.Long.<span title="implicit scala.math.BigInt.long2bigInt : (l: Long)scala.math.BigInt">MAX_VALUE</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#212161" title="BigInt">i</a> <span title="(that: scala.math.BigInt)Boolean">&gt;=</span> java.lang.Long.<span title="implicit scala.math.BigInt.long2bigInt : (l: Long)scala.math.BigInt">MIN_VALUE</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="java.lang.Long" class="keyword">new</span> java.lang.<span title="java.lang.Long">Long</span><span class="delimiter">(</span><a href="#212161" title="BigInt">i</a>.<span title="()Long">longValue</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#212161" title="BigInt">i</a>.<span title="()String">toString</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(xs: List[net.liftweb.json.package.JValue])List[net.liftweb.json.package.JValue]" id="211327">trimArr</a><span class="delimiter">(</span><a title="List[net.liftweb.json.package.JValue]" id="211815">xs</a>: <span title="List[net.liftweb.json.package.JValue]">List</span><span class="delimiter">[</span>JValue<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#211815" title="List[net.liftweb.json.package.JValue]">xs</a>.<span title="(p: net.liftweb.json.package.JValue =&gt; Boolean)List[net.liftweb.json.package.JValue]">filter</span><span class="delimiter">(</span><a href="#211821" title="net.liftweb.json.package.JValue">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../json/net/liftweb/json/package.scala.html#15380" title="=&gt; net.liftweb.json.JsonAST.JNothing.type">JNothing</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(xs: List[net.liftweb.json.package.JField])List[net.liftweb.json.package.JField]" id="211328">trimObj</a><span class="delimiter">(</span><a title="List[net.liftweb.json.package.JField]" id="212048">xs</a>: <span title="List[net.liftweb.json.package.JField]">List</span><span class="delimiter">[</span>JField<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#212048" title="List[net.liftweb.json.package.JField]">xs</a>.<span title="(p: net.liftweb.json.package.JField =&gt; Boolean)List[net.liftweb.json.package.JField]">filter</span><span class="delimiter">(</span><a href="#212054" title="net.liftweb.json.package.JField">_</a>.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#50114" title="=&gt; net.liftweb.json.JsonAST.JValue">value</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../json/net/liftweb/json/package.scala.html#15380" title="=&gt; net.liftweb.json.JsonAST.JNothing.type">JNothing</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>