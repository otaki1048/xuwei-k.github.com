<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>mongodb/net/liftweb/mongodb/MongoDocument.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2010-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb 
<span class="keyword">package</span> mongodb 

<span class="keyword">import</span> json.<a href="../../../../json/net/liftweb/json/JsonAST.scala.html#11132" title="object net.liftweb.json.JsonAST">JsonAST</a>.JObject

<span class="keyword">import</span> java.util.UUID

<span class="keyword">import</span> com.mongodb._
<span class="keyword">import</span> org.bson.types.ObjectId

<span class="comment">/*
* extend case class with this trait
*/</span>
<span class="keyword">trait</span> <a title="trait MongoDocument[BaseDocument] extends java.lang.Object with net.liftweb.mongodb.JsonObject[BaseDocument] with ScalaObject" id="12342">MongoDocument</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="12343">BaseDocument</a><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="JsonObject.scala.html#12295" title="net.liftweb.mongodb.JsonObject[BaseDocument]">JsonObject</a><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> <span class="delimiter">{</span>
  self: BaseDocument =&gt;

  <span class="keyword">def</span> <a title="=&gt; Any" id="213623">_id</a>: <span title="Any">Any</span>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.mongodb.MongoDocumentMeta[BaseDocument]" id="213624">meta</a>: <a href="#12344" title="net.liftweb.mongodb.MongoDocumentMeta[BaseDocument]">MongoDocumentMeta</a><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; Unit" id="213625">delete</a> <span class="delimiter">{</span>
    <a href="#213624" title="=&gt; net.liftweb.mongodb.MongoDocumentMeta[BaseDocument]">meta</a>.<a href="MongoMeta.scala.html#200713" title="(k: String, v: Any)Unit">delete</a><span class="delimiter">(</span><span title="java.lang.String(&quot;_id&quot;)" class="string">&quot;_id&quot;</span>, <a href="#213623" title="=&gt; Any">_id</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Unit" id="213626">save</a> = <a href="#213624" title="=&gt; net.liftweb.mongodb.MongoDocumentMeta[BaseDocument]">meta</a>.<a href="#213652" title="(in: BaseDocument)Unit">save</a><span class="delimiter">(</span><a href="#12342" title="&lt;none&gt; extends net.liftweb.mongodb.MongoDocument[BaseDocument] with BaseDocument" class="keyword">this</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Option[net.liftweb.mongodb.MongoRef]" id="213627">getRef</a>: <span title="Option[net.liftweb.mongodb.MongoRef]">Option</span><span class="delimiter">[</span>MongoRef<span class="delimiter">]</span> = <a href="#213623" title="=&gt; Any">_id</a> <span title="Option[net.liftweb.mongodb.MongoRef]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Some[net.liftweb.mongodb.MongoRef]" id="213678">oid</a>: <span title="org.bson.types.ObjectId">ObjectId</span> =&gt; <span title="(x: net.liftweb.mongodb.MongoRef)Some[net.liftweb.mongodb.MongoRef]">Some</span><span class="delimiter">(</span><a href="JsonObject.scala.html#212246" title="(ref: String, id: org.bson.types.ObjectId)net.liftweb.mongodb.MongoRef">MongoRef</a><span class="delimiter">(</span><a href="#213624" title="=&gt; net.liftweb.mongodb.MongoDocumentMeta[BaseDocument]">meta</a>.<a href="MongoMeta.scala.html#200700" title="=&gt; String">collectionName</a>, <a href="#213678" title="org.bson.types.ObjectId">oid</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/*
* extend case class companion objects with this trait
*/</span>
<span class="keyword">trait</span> <a title="trait MongoDocumentMeta[BaseDocument] extends net.liftweb.mongodb.JsonObjectMeta[BaseDocument] with net.liftweb.mongodb.MongoMeta[BaseDocument] with ScalaObject" id="12344">MongoDocumentMeta</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="12345">BaseDocument</a><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="JsonObject.scala.html#12297" title="net.liftweb.mongodb.JsonObjectMeta[BaseDocument]">JsonObjectMeta</a><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> <span class="keyword">with</span> <a href="MongoMeta.scala.html#12354" title="net.liftweb.mongodb.MongoMeta[BaseDocument]">MongoMeta</a><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(dbo: com.mongodb.DBObject)BaseDocument" id="213637">create</a><span class="delimiter">(</span><a title="com.mongodb.DBObject" id="213686">dbo</a>: <span title="com.mongodb.DBObject">DBObject</span><span class="delimiter">)</span>: <a href="#12345" title="BaseDocument">BaseDocument</a> = <span class="delimiter">{</span>
    <a href="JsonObject.scala.html#206680" title="(in: net.liftweb.json.JsonAST.JObject)(implicit formats: net.liftweb.json.Formats)BaseDocument">create</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202239" title="(a: Any)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue">serialize</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#213686" title="com.mongodb.DBObject">dbo</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="net.liftweb.json.JsonAST.JObject" class="delimiter">[</span><a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Find a single row by a qry, using a DBObject.
  */</span>
  <span class="keyword">def</span> <a title="(qry: com.mongodb.DBObject)Option[BaseDocument]" id="213638">find</a><span class="delimiter">(</span><a title="com.mongodb.DBObject" id="213695">qry</a>: <span title="com.mongodb.DBObject">DBObject</span><span class="delimiter">)</span>: <span title="Option[BaseDocument]">Option</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="Mongo.scala.html#12333" title="object net.liftweb.mongodb.MongoDB">MongoDB</a>.<a href="Mongo.scala.html#200776" title="(name: net.liftweb.mongodb.MongoIdentifier, collectionName: String)(f: com.mongodb.DBCollection =&gt; Option[BaseDocument])Option[BaseDocument]">useCollection</a><span class="delimiter">(</span><a href="MongoMeta.scala.html#200701" title="=&gt; net.liftweb.mongodb.MongoIdentifier">mongoIdentifier</a>, <a href="MongoMeta.scala.html#200700" title="=&gt; String">collectionName</a><span class="delimiter">)</span> <span class="delimiter">(</span> <a title="com.mongodb.DBCollection" id="213711">coll</a> =&gt;
      <a href="#213711" title="com.mongodb.DBCollection">coll</a>.<span title="(x$1: com.mongodb.DBObject)com.mongodb.DBObject">findOne</span><span class="delimiter">(</span><a href="#213695" title="com.mongodb.DBObject">qry</a><span class="delimiter">)</span> <span title="Option[BaseDocument]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="None.type" class="keyword">null</span> =&gt; <span title="object None">None</span>
        <span class="keyword">case</span> <a title="Some[BaseDocument]" id="213716">dbo</a> =&gt; <span class="delimiter">{</span>
          <span title="(x: BaseDocument)Some[BaseDocument]">Some</span><span class="delimiter">(</span><a href="#213637" title="(dbo: com.mongodb.DBObject)BaseDocument">create</a><span class="delimiter">(</span><a href="#213716" title="com.mongodb.DBObject">dbo</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Find a single document by _id using a String.
  */</span>
  <span class="keyword">def</span> <a title="(s: String)Option[BaseDocument]" id="213639">find</a><span class="delimiter">(</span><a title="String" id="213728">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[BaseDocument]">Option</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <span title="Option[BaseDocument]" class="keyword">if</span> <span class="delimiter">(</span><span title="object org.bson.types.ObjectId">ObjectId</span>.<span title="(x$1: java.lang.String)Boolean">isValid</span><span class="delimiter">(</span><a href="#213728" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#213638" title="(qry: com.mongodb.DBObject)Option[BaseDocument]">find</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_id&quot;)" class="string">&quot;_id&quot;</span>, <span title="(x$1: java.lang.String)org.bson.types.ObjectId" class="keyword">new</span> <span title="org.bson.types.ObjectId">ObjectId</span><span class="delimiter">(</span><a href="#213728" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="#213638" title="(qry: com.mongodb.DBObject)Option[BaseDocument]">find</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_id&quot;)" class="string">&quot;_id&quot;</span>, <a href="#213728" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
  * Find a single document by _id using an ObjectId.
  */</span>
  <span class="keyword">def</span> <a title="(oid: org.bson.types.ObjectId)Option[BaseDocument]" id="213640">find</a><span class="delimiter">(</span><a title="org.bson.types.ObjectId" id="213741">oid</a>: <span title="org.bson.types.ObjectId">ObjectId</span><span class="delimiter">)</span>: <span title="Option[BaseDocument]">Option</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <a href="#213638" title="(qry: com.mongodb.DBObject)Option[BaseDocument]">find</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_id&quot;)" class="string">&quot;_id&quot;</span>, <a href="#213741" title="org.bson.types.ObjectId">oid</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
  * Find a single document by _id using a UUID.
  */</span>
  <span class="keyword">def</span> <a title="(uuid: java.util.UUID)Option[BaseDocument]" id="213641">find</a><span class="delimiter">(</span><a title="java.util.UUID" id="213739">uuid</a>: <span title="java.util.UUID">UUID</span><span class="delimiter">)</span>: <span title="Option[BaseDocument]">Option</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <a href="#213638" title="(qry: com.mongodb.DBObject)Option[BaseDocument]">find</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_id&quot;)" class="string">&quot;_id&quot;</span>, <a href="#213739" title="java.util.UUID">uuid</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
  * Find a single document by a qry using String, Any inputs
  */</span>
  <span class="keyword">def</span> <a title="(k: String, v: Any)Option[BaseDocument]" id="213642">find</a><span class="delimiter">(</span><a title="String" id="213736">k</a>: <span title="String">String</span>, <a title="Any" id="213737">v</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Option[BaseDocument]">Option</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <a href="#213638" title="(qry: com.mongodb.DBObject)Option[BaseDocument]">find</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><a href="#213736" title="String">k</a>, <a href="#213737" title="Any">v</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
  * Find a single document by a qry using a json query
  */</span>
  <span class="keyword">def</span> <a title="(json: net.liftweb.json.JsonAST.JObject)Option[BaseDocument]" id="213643">find</a><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JObject" id="213734">json</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">)</span>: <span title="Option[BaseDocument]">Option</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <a href="#213638" title="(qry: com.mongodb.DBObject)Option[BaseDocument]">find</a><span class="delimiter">(</span><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202238" title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#213734" title="net.liftweb.json.JsonAST.JObject">json</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
  * Find all documents in this collection
  */</span>
  <span class="keyword">def</span> <a title="=&gt; List[BaseDocument]" id="213644">findAll</a>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._

    <a href="Mongo.scala.html#12333" title="object net.liftweb.mongodb.MongoDB">MongoDB</a>.<a href="Mongo.scala.html#200776" title="(name: net.liftweb.mongodb.MongoIdentifier, collectionName: String)(f: com.mongodb.DBCollection =&gt; List[BaseDocument])List[BaseDocument]">useCollection</a><span class="delimiter">(</span><a href="MongoMeta.scala.html#200701" title="=&gt; net.liftweb.mongodb.MongoIdentifier">mongoIdentifier</a>, <a href="MongoMeta.scala.html#200700" title="=&gt; String">collectionName</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="com.mongodb.DBCollection" id="214288">coll</a> =&gt; <span class="delimiter">{</span>
      <span class="comment">/** Mongo Cursors are both Iterable and Iterator, 
       * so we need to reduce ambiguity for implicits 
       */</span>
      <span class="delimiter">(</span><a href="#214288" title="com.mongodb.DBCollection">coll</a>.<span title="(i: java.util.Iterator[com.mongodb.DBObject])Iterator[com.mongodb.DBObject]">find</span>: <span title="Iterator[com.mongodb.DBObject]">Iterator</span><span class="delimiter">[</span>DBObject<span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: com.mongodb.DBObject =&gt; BaseDocument)Iterator[BaseDocument]">map</span><span class="delimiter">(</span><a href="#213637" title="(dbo: com.mongodb.DBObject)BaseDocument">create</a><span class="delimiter">)</span>.<span title="=&gt; List[BaseDocument]">toList</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Find all documents using a DBObject query.
  */</span>
  <span class="keyword">def</span> <a title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213645">findAll</a><span class="delimiter">(</span><a title="com.mongodb.DBObject" id="214313">qry</a>: <span title="com.mongodb.DBObject">DBObject</span>, <a title="Option[com.mongodb.DBObject]" id="214314">sort</a>: <span title="Option[com.mongodb.DBObject]">Option</span><span class="delimiter">[</span>DBObject<span class="delimiter">]</span>, <a title="net.liftweb.mongodb.FindOption*" id="214315">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._

    <span class="keyword">val</span> <a title="List[net.liftweb.mongodb.FindOption]" id="214318">findOpts</a> = <a href="#214315" title="net.liftweb.mongodb.FindOption*">opts</a>.<span title="=&gt; List[net.liftweb.mongodb.FindOption]">toList</span>

    <a href="Mongo.scala.html#12333" title="object net.liftweb.mongodb.MongoDB">MongoDB</a>.<a href="Mongo.scala.html#200776" title="(name: net.liftweb.mongodb.MongoIdentifier, collectionName: String)(f: com.mongodb.DBCollection =&gt; List[BaseDocument])List[BaseDocument]">useCollection</a><span class="delimiter">(</span><a href="MongoMeta.scala.html#200701" title="=&gt; net.liftweb.mongodb.MongoIdentifier">mongoIdentifier</a>, <a href="MongoMeta.scala.html#200700" title="=&gt; String">collectionName</a><span class="delimiter">)</span> <span class="delimiter">(</span> <a title="com.mongodb.DBCollection" id="214334">coll</a> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="com.mongodb.DBCursor" id="214335">cur</a> = <a href="#214334" title="com.mongodb.DBCollection">coll</a>.<span title="(x$1: com.mongodb.DBObject)com.mongodb.DBCursor">find</span><span class="delimiter">(</span><a href="#214313" title="com.mongodb.DBObject">qry</a><span class="delimiter">)</span>.<span title="(x$1: Int)com.mongodb.DBCursor">limit</span><span class="delimiter">(</span>
        <a href="#214318" title="List[net.liftweb.mongodb.FindOption]">findOpts</a>.<span title="(p: net.liftweb.mongodb.FindOption =&gt; Boolean)Option[net.liftweb.mongodb.FindOption]">find</span><span class="delimiter">(</span><a href="#214344" title="net.liftweb.mongodb.FindOption">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="MongoMeta.scala.html#12357" title="net.liftweb.mongodb.Limit">Limit</a><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: net.liftweb.mongodb.FindOption =&gt; Int)Option[Int]">map</span><span class="delimiter">(</span><a title="net.liftweb.mongodb.FindOption" id="214349">x</a> =&gt; <a href="#214349" title="net.liftweb.mongodb.FindOption">x</a>.<a href="MongoMeta.scala.html#202986" title="=&gt; Int">value</a><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>.<span title="(x$1: Int)com.mongodb.DBCursor">skip</span><span class="delimiter">(</span>
        <a href="#214318" title="List[net.liftweb.mongodb.FindOption]">findOpts</a>.<span title="(p: net.liftweb.mongodb.FindOption =&gt; Boolean)Option[net.liftweb.mongodb.FindOption]">find</span><span class="delimiter">(</span><a href="#214355" title="net.liftweb.mongodb.FindOption">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="MongoMeta.scala.html#12360" title="net.liftweb.mongodb.Skip">Skip</a><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: net.liftweb.mongodb.FindOption =&gt; Int)Option[Int]">map</span><span class="delimiter">(</span><a title="net.liftweb.mongodb.FindOption" id="214359">x</a> =&gt; <a href="#214359" title="net.liftweb.mongodb.FindOption">x</a>.<a href="MongoMeta.scala.html#202986" title="=&gt; Int">value</a><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
      <a href="#214314" title="Option[com.mongodb.DBObject]">sort</a>.<span title="(f: com.mongodb.DBObject =&gt; com.mongodb.DBCursor)Unit">foreach</span><span class="delimiter">(</span> <a title="com.mongodb.DBObject" id="214368">s</a> =&gt; <a href="#214335" title="com.mongodb.DBCursor">cur</a>.<span title="(x$1: com.mongodb.DBObject)com.mongodb.DBCursor">sort</span><span class="delimiter">(</span><a href="#214368" title="com.mongodb.DBObject">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">/** Mongo Cursors are both Iterable and Iterator, 
       * so we need to reduce ambiguity for implicits 
       */</span>
      <span class="delimiter">(</span><a href="#214335" title="(i: java.util.Iterator[com.mongodb.DBObject])Iterator[com.mongodb.DBObject]">cur</a>: <span title="Iterator[com.mongodb.DBObject]">Iterator</span><span class="delimiter">[</span>DBObject<span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: com.mongodb.DBObject =&gt; BaseDocument)Iterator[BaseDocument]">map</span><span class="delimiter">(</span><a href="#213637" title="(dbo: com.mongodb.DBObject)BaseDocument">create</a><span class="delimiter">)</span>.<span title="=&gt; List[BaseDocument]">toList</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Find all documents using a DBObject query.
  */</span>
  <span class="keyword">def</span> <a title="(qry: com.mongodb.DBObject, opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213646">findAll</a><span class="delimiter">(</span><a title="com.mongodb.DBObject" id="214391">qry</a>: <span title="com.mongodb.DBObject">DBObject</span>, <a title="net.liftweb.mongodb.FindOption*" id="214392">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <a href="#213645" title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]">findAll</a><span class="delimiter">(</span><a href="#214391" title="com.mongodb.DBObject">qry</a>, <span title="object None">None</span>, <a href="#214392" title="net.liftweb.mongodb.FindOption*">opts</a> :_*<span class="delimiter">)</span>

  <span class="comment">/**
  * Find all documents using a DBObject query with sort
  */</span>
  <span class="keyword">def</span> <a title="(qry: com.mongodb.DBObject, sort: com.mongodb.DBObject, opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213647">findAll</a><span class="delimiter">(</span><a title="com.mongodb.DBObject" id="214414">qry</a>: <span title="com.mongodb.DBObject">DBObject</span>, <a title="com.mongodb.DBObject" id="214415">sort</a>: <span title="com.mongodb.DBObject">DBObject</span>, <a title="net.liftweb.mongodb.FindOption*" id="214416">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <a href="#213645" title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]">findAll</a><span class="delimiter">(</span><a href="#214414" title="com.mongodb.DBObject">qry</a>, <span title="(x: com.mongodb.DBObject)Some[com.mongodb.DBObject]">Some</span><span class="delimiter">(</span><a href="#214415" title="com.mongodb.DBObject">sort</a><span class="delimiter">)</span>, <a href="#214416" title="net.liftweb.mongodb.FindOption*">opts</a> :_*<span class="delimiter">)</span>

  <span class="comment">/**
  * Find all documents using a JObject query
  */</span>
  <span class="keyword">def</span> <a title="(qry: net.liftweb.json.JsonAST.JObject, opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213648">findAll</a><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JObject" id="214411">qry</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a>, <a title="net.liftweb.mongodb.FindOption*" id="214412">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <a href="#213645" title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]">findAll</a><span class="delimiter">(</span><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202238" title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#214411" title="net.liftweb.json.JsonAST.JObject">qry</a><span class="delimiter">)</span>, <span title="object None">None</span>, <a href="#214412" title="net.liftweb.mongodb.FindOption*">opts</a> :_*<span class="delimiter">)</span>

  <span class="comment">/**
  * Find all documents using a JObject query with sort
  */</span>
  <span class="keyword">def</span> <a title="(qry: net.liftweb.json.JsonAST.JObject, sort: net.liftweb.json.JsonAST.JObject, opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213649">findAll</a><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JObject" id="214407">qry</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a>, <a title="net.liftweb.json.JsonAST.JObject" id="214408">sort</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a>, <a title="net.liftweb.mongodb.FindOption*" id="214409">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <a href="#213645" title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]">findAll</a><span class="delimiter">(</span><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202238" title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#214407" title="net.liftweb.json.JsonAST.JObject">qry</a><span class="delimiter">)</span>, <span title="(x: com.mongodb.DBObject)Some[com.mongodb.DBObject]">Some</span><span class="delimiter">(</span><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202238" title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#214408" title="net.liftweb.json.JsonAST.JObject">sort</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#214409" title="net.liftweb.mongodb.FindOption*">opts</a> :_*<span class="delimiter">)</span>

  <span class="comment">/**
  * Find all documents using a k, v query
  */</span>
  <span class="keyword">def</span> <a title="(k: String, o: Any, opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213650">findAll</a><span class="delimiter">(</span><a title="String" id="214403">k</a>: <span title="String">String</span>, <a title="Any" id="214404">o</a>: <span title="Any">Any</span>, <a title="net.liftweb.mongodb.FindOption*" id="214405">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <a href="#213645" title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]">findAll</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><a href="#214403" title="String">k</a>, <a href="#214404" title="Any">o</a><span class="delimiter">)</span>, <span title="object None">None</span>, <a href="#214405" title="net.liftweb.mongodb.FindOption*">opts</a> :_*<span class="delimiter">)</span>

  <span class="comment">/**
  * Find all documents using a k, v query with JObject sort
  */</span>
  <span class="keyword">def</span> <a title="(k: String, o: Any, sort: net.liftweb.json.JsonAST.JObject, opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]" id="213651">findAll</a><span class="delimiter">(</span><a title="String" id="214398">k</a>: <span title="String">String</span>, <a title="Any" id="214399">o</a>: <span title="Any">Any</span>, <a title="net.liftweb.json.JsonAST.JObject" id="214400">sort</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a>, <a title="net.liftweb.mongodb.FindOption*" id="214401">opts</a>: <span title="net.liftweb.mongodb.FindOption*">FindOption</span>*<span class="delimiter">)</span>: <span title="List[BaseDocument]">List</span><span class="delimiter">[</span>BaseDocument<span class="delimiter">]</span> =
    <a href="#213645" title="(qry: com.mongodb.DBObject, sort: Option[com.mongodb.DBObject], opts: net.liftweb.mongodb.FindOption*)List[BaseDocument]">findAll</a><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: Any)com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span><span class="delimiter">(</span><a href="#214398" title="String">k</a>, <a href="#214399" title="Any">o</a><span class="delimiter">)</span>, <span title="(x: com.mongodb.DBObject)Some[com.mongodb.DBObject]">Some</span><span class="delimiter">(</span><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202238" title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#214400" title="net.liftweb.json.JsonAST.JObject">sort</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#214401" title="net.liftweb.mongodb.FindOption*">opts</a> :_*<span class="delimiter">)</span>

  <span class="comment">/*
  * Save a document to the db
  */</span>
  <span class="keyword">def</span> <a title="(in: BaseDocument)Unit" id="213652">save</a><span class="delimiter">(</span><a title="BaseDocument" id="213673">in</a>: <a href="#12345" title="BaseDocument">BaseDocument</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="Mongo.scala.html#12333" title="object net.liftweb.mongodb.MongoDB">MongoDB</a>.<a href="Mongo.scala.html#200770" title="(name: net.liftweb.mongodb.MongoIdentifier)(f: com.mongodb.DB =&gt; Unit)Unit">use</a><span class="delimiter">(</span><a href="MongoMeta.scala.html#200701" title="=&gt; net.liftweb.mongodb.MongoIdentifier">mongoIdentifier</a><span class="delimiter">)</span> <span class="delimiter">(</span> <a title="com.mongodb.DB" id="214688">db</a> =&gt; <span class="delimiter">{</span>
      <a href="#213653" title="(in: BaseDocument, db: com.mongodb.DB)Unit">save</a><span class="delimiter">(</span><a href="#213673" title="BaseDocument">in</a>, <a href="#214688" title="com.mongodb.DB">db</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
  * Save a document to the db using the given Mongo instance
  */</span>
  <span class="keyword">def</span> <a title="(in: BaseDocument, db: com.mongodb.DB)Unit" id="213653">save</a><span class="delimiter">(</span><a title="BaseDocument" id="213668">in</a>: <a href="#12345" title="BaseDocument">BaseDocument</a>, <a title="com.mongodb.DB" id="213669">db</a>: <span title="com.mongodb.DB">DB</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#213669" title="com.mongodb.DB">db</a>.<span title="(x$1: java.lang.String)com.mongodb.DBCollection">getCollection</span><span class="delimiter">(</span><a href="MongoMeta.scala.html#200700" title="=&gt; String">collectionName</a><span class="delimiter">)</span>.<span title="(x$1: com.mongodb.DBObject)com.mongodb.WriteResult">save</span><span title="Unit" class="delimiter">(</span><a href="JObjectParser.scala.html#12286" title="object net.liftweb.mongodb.JObjectParser">JObjectParser</a>.<a href="JObjectParser.scala.html#202238" title="(jo: net.liftweb.json.package.JObject)(implicit formats: net.liftweb.json.Formats)com.mongodb.DBObject">parse</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="JsonObject.scala.html#206681" title="(in: BaseDocument)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.JsonAST.JObject">toJObject</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#213668" title="BaseDocument">in</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
  * Update document with a JObject query using the given Mongo instance
  */</span>
  <span class="keyword">def</span> <a title="(qry: net.liftweb.json.JsonAST.JObject, newbd: BaseDocument, db: com.mongodb.DB, opts: net.liftweb.mongodb.UpdateOption*)Unit" id="213654">update</a><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JObject" id="214766">qry</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a>, <a title="BaseDocument" id="214767">newbd</a>: <a href="#12345" title="BaseDocument">BaseDocument</a>, <a title="com.mongodb.DB" id="214768">db</a>: <span title="com.mongodb.DB">DB</span>, <a title="net.liftweb.mongodb.UpdateOption*" id="214769">opts</a>: <span title="net.liftweb.mongodb.UpdateOption*">UpdateOption</span>*<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="MongoMeta.scala.html#200720" title="(qry: net.liftweb.json.JsonAST.JObject, newobj: net.liftweb.json.JsonAST.JObject, db: com.mongodb.DB, opts: net.liftweb.mongodb.UpdateOption*)Unit">update</a><span class="delimiter">(</span><a href="#214766" title="net.liftweb.json.JsonAST.JObject">qry</a>, <a href="JsonObject.scala.html#206681" title="(in: BaseDocument)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.JsonAST.JObject">toJObject</a><a href="MongoMeta.scala.html#199265" title="=&gt; net.liftweb.json.Formats" class="delimiter">(</a><a href="#214767" title="BaseDocument">newbd</a><span class="delimiter">)</span>, <a href="#214768" title="com.mongodb.DB">db</a>, <a href="#214769" title="net.liftweb.mongodb.UpdateOption*">opts</a> :_*<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
  * Update document with a JObject query
  */</span>
  <span class="keyword">def</span> <a title="(qry: net.liftweb.json.JsonAST.JObject, newbd: BaseDocument, opts: net.liftweb.mongodb.UpdateOption*)Unit" id="213655">update</a><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JObject" id="214772">qry</a>: <a href="../../../../json/net/liftweb/json/JsonAST.scala.html#48530" title="net.liftweb.json.JsonAST.JObject">JObject</a>, <a title="BaseDocument" id="214773">newbd</a>: <a href="#12345" title="BaseDocument">BaseDocument</a>, <a title="net.liftweb.mongodb.UpdateOption*" id="214774">opts</a>: <span title="net.liftweb.mongodb.UpdateOption*">UpdateOption</span>*<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="Mongo.scala.html#12333" title="object net.liftweb.mongodb.MongoDB">MongoDB</a>.<a href="Mongo.scala.html#200770" title="(name: net.liftweb.mongodb.MongoIdentifier)(f: com.mongodb.DB =&gt; Unit)Unit">use</a><span class="delimiter">(</span><a href="MongoMeta.scala.html#200701" title="=&gt; net.liftweb.mongodb.MongoIdentifier">mongoIdentifier</a><span class="delimiter">)</span> <span class="delimiter">(</span> <a title="com.mongodb.DB" id="214804">db</a> =&gt; <span class="delimiter">{</span>
      <a href="#213654" title="(qry: net.liftweb.json.JsonAST.JObject, newbd: BaseDocument, db: com.mongodb.DB, opts: net.liftweb.mongodb.UpdateOption*)Unit">update</a><span class="delimiter">(</span><a href="#214772" title="net.liftweb.json.JsonAST.JObject">qry</a>, <a href="#214773" title="BaseDocument">newbd</a>, <a href="#214804" title="com.mongodb.DB">db</a>, <a href="#214774" title="net.liftweb.mongodb.UpdateOption*">opts</a> :_*<span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>