<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>mapper/net/liftweb/mapper/OneToMany.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2006-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> mapper


<span class="comment">/**
 * Add this trait to a Mapper for managed one-to-many support
 * For example: class Contact extends LongKeyedMapper[Contact] with OneToMany[Long, Contact] { ... }
 * @tparam K the type of the primary key
 * @tparam T the mapper type
 * @author nafg
 */</span>
<span class="keyword">trait</span> <a title="trait OneToMany[K, T &lt;: net.liftweb.mapper.KeyedMapper[K,T]] extends java.lang.Object with net.liftweb.mapper.KeyedMapper[K,T] with ScalaObject" id="11803">OneToMany</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="11804">K</a>,<a title="&gt;: Nothing &lt;: net.liftweb.mapper.KeyedMapper[K,T]" id="11805">T</a>&lt;:KeyedMapper<span class="delimiter">[</span>K, T<span class="delimiter">]</span><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="Mapper.scala.html#11643" title="net.liftweb.mapper.KeyedMapper[K,T]">KeyedMapper</a><span class="delimiter">[</span>K,T<span class="delimiter">]</span> <span class="delimiter">{</span> <span class="keyword">this</span>: T =&gt;
  <span class="keyword">private</span><span class="delimiter">[</span>mapper<span class="delimiter">]</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[OneToMany.this.MappedOneToManyBase[_]]" id="186869">oneToManyFields</a>: <span title="List[OneToMany.this.MappedOneToManyBase[_]]">List</span><span class="delimiter">[</span>MappedOneToManyBase<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#11803" title="net.liftweb.mapper.FieldFinder[OneToMany.this.MappedOneToManyBase[_]]" class="keyword">new</a> <a href="FieldFinder.scala.html#11265" title="net.liftweb.mapper.FieldFinder[OneToMany.this.MappedOneToManyBase[_]]">FieldFinder</a><span class="delimiter">[</span>MappedOneToManyBase<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span>
      <a href="Mapper.scala.html#147133" title="=&gt; net.liftweb.mapper.KeyedMetaMapper[K,T]">getSingleton</a>,
      net.liftweb.common.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31889" title="(cls: Class[_])net.liftweb.common.Logger">Logger</a><span class="delimiter">(</span>classOf<span title="java.lang.Class[net.liftweb.mapper.OneToMany[K,T]](classOf[net.liftweb.mapper.OneToMany])" class="delimiter">[</span>OneToMany<span class="delimiter">[</span>K,T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>.<a href="FieldFinder.scala.html#153545" title="=&gt; List[java.lang.reflect.Method]">accessorMethods</a> <span title="(f: java.lang.reflect.Method =&gt; OneToMany.this.MappedOneToManyBase[_])(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.reflect.Method],OneToMany.this.MappedOneToManyBase[_],List[OneToMany.this.MappedOneToManyBase[_]]])List[OneToMany.this.MappedOneToManyBase[_]]">map</span> <span class="delimiter">(</span><a href="#187040" title="java.lang.reflect.Method">_</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T" class="keyword">this</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="OneToMany.this.MappedOneToManyBase[_$3]" class="delimiter">[</span><a href="#186881" title="OneToMany.this.MappedOneToManyBase[_]">MappedOneToManyBase</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * An override for save to propagate the save to all children
   * of this parent.
   * Returns false as soon as the parent or a one-to-many field returns false.
   * If they are all successful returns true.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Boolean" id="186870">save</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="187157">ret</a> = <a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T" class="keyword">super</a>.<a href="Mapper.scala.html#147084" title="()Boolean">save</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#186868" title="=&gt; List[OneToMany.this.MappedOneToManyBase[_]]">oneToManyFields</a>.<span title="(p: OneToMany.this.MappedOneToManyBase[_] =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#187166" title="OneToMany.this.MappedOneToManyBase[_]">_</a>.<a href="#186952" title="=&gt; Boolean">save</a><span class="delimiter">)</span>
    <a href="#187157" title="Boolean">ret</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * An override for delete_! to propagate the deletion
   * to all children of one-to-many fields implementing Cascade.
   * Returns false as soon as the parent or a one-to-many field returns false.
   * If they are all successful returns true.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="186871">delete_!</a> = <a href="../../../../db/net/liftweb/db/DB.scala.html#60272" title="implicit net.liftweb.db.DB1.db1ToDb : (in: net.liftweb.db.DB1)net.liftweb.db.DB">DB</a>.<a href="../../../../db/net/liftweb/db/DB.scala.html#60371" title="(name: net.liftweb.db.ConnectionIdentifier)(f: net.liftweb.db.SuperConnection =&gt; Boolean)Boolean">use</a><span class="delimiter">(</span><a href="Mapper.scala.html#147079" title="=&gt; net.liftweb.mapper.package.ConnectionIdentifier">connectionIdentifier</a><span class="delimiter">)</span><span class="delimiter">{</span><a title="net.liftweb.db.SuperConnection" id="187295">_</a> =&gt;
    <span title="Boolean" class="keyword">if</span><span class="delimiter">(</span><a href="#186868" title="=&gt; List[OneToMany.this.MappedOneToManyBase[_]]">oneToManyFields</a>.<span title="(p: OneToMany.this.MappedOneToManyBase[_] =&gt; Boolean)Boolean">forall</span><a href="#187302" title="Boolean" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Boolean" id="187304">f</a>: <a href="#186885" title="OneToMany.this.Cascade[_]">Cascade</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt; <a href="#187304" title="&lt;none&gt; extends OneToMany.this.MappedOneToManyBase[_$1] with OneToMany.this.Cascade[_]">f</a>.<a href="#187311" title="=&gt; Boolean">delete_!</a>
      <span class="keyword">case</span> <span title="Boolean(true)">_</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
      <a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T" class="keyword">super</a>.<a href="Mapper.scala.html#147091" title="=&gt; Boolean">delete_!</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="../../../../db/net/liftweb/db/DB.scala.html#60272" title="implicit net.liftweb.db.DB1.db1ToDb : (in: net.liftweb.db.DB1)net.liftweb.db.DB">DB</a>.<a href="../../../../db/net/liftweb/db/DB.scala.html#60349" title="(name: net.liftweb.db.ConnectionIdentifier)Unit">rollback</a><span class="delimiter">(</span><a href="Mapper.scala.html#147079" title="=&gt; net.liftweb.mapper.package.ConnectionIdentifier">connectionIdentifier</a><span class="delimiter">)</span>
      <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * This implicit allows a MappedForeignKey to be used as foreignKey function.
   * Returns a function that takes a Mapper and looks up the actualField of field on the Mapper.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, O &lt;: net.liftweb.mapper.Mapper[O], T &lt;: net.liftweb.mapper.KeyedMapper[K,T]](field: net.liftweb.mapper.MappedForeignKey[K,O,T])O =&gt; net.liftweb.mapper.MappedForeignKey[K,O,T]" id="186872">foreignKey</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="186876">K</a>, <a title="&gt;: Nothing &lt;: net.liftweb.mapper.Mapper[O]" id="186877">O</a>&lt;:Mapper<span class="delimiter">[</span>O<span class="delimiter">]</span>, <a title="&gt;: Nothing &lt;: net.liftweb.mapper.KeyedMapper[K,T]" id="186878">T</a>&lt;:KeyedMapper<span class="delimiter">[</span>K,T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.mapper.MappedForeignKey[K,O,T]" id="186909">field</a>: <a href="MappedForeignKey.scala.html#11449" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">MappedForeignKey</a><span class="delimiter">[</span>K,O,T<span class="delimiter">]</span><span class="delimiter">)</span>: O=&gt;MappedForeignKey<span class="delimiter">[</span>K,O,T<span class="delimiter">]</span> =
    <a href="#186909" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">field</a>.<a href="MappedField.scala.html#147394" title="(actual: O)net.liftweb.mapper.MappedField[K,O]">actualField</a><span class="delimiter">(</span><a href="#187431" title="O">_</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="net.liftweb.mapper.MappedForeignKey[K,O,T]" class="delimiter">[</span><a href="MappedForeignKey.scala.html#11449" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">MappedForeignKey</a><span class="delimiter">[</span>K,O,T<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Simple OneToMany support for children from the same table
   */</span>
  <span class="keyword">class</span> <a title="class MappedOneToMany[O &lt;: net.liftweb.mapper.Mapper[O]] extends OneToMany.this.MappedOneToManyBase[O] with ScalaObject" id="186879">MappedOneToMany</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: net.liftweb.mapper.Mapper[O]" id="186880">O</a> &lt;: Mapper<span class="delimiter">[</span>O<span class="delimiter">]</span><span class="delimiter">]</span><a href="#186879" title="ScalaObject" class="delimiter">(</a><a title="net.liftweb.mapper.MetaMapper[O]" id="187468">meta</a>: <a href="MetaMapper.scala.html#11668" title="net.liftweb.mapper.MetaMapper[O]">MetaMapper</a><span class="delimiter">[</span>O<span class="delimiter">]</span>, <a title="net.liftweb.mapper.MappedForeignKey[K,O,T]" id="187469">foreign</a>: <a href="MappedForeignKey.scala.html#11449" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">MappedForeignKey</a><span class="delimiter">[</span>K,O,T<span class="delimiter">]</span>, <a title="net.liftweb.mapper.QueryParam[O]*" id="187470">qp</a>: <span title="net.liftweb.mapper.QueryParam[O]*">QueryParam</span><span class="delimiter">[</span>O<span class="delimiter">]</span>*<span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="#186881" title="OneToMany.this.MappedOneToManyBase[O]">MappedOneToManyBase</a><span class="delimiter">[</span>O<span class="delimiter">]</span><span class="delimiter">(</span>
      <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[O]" id="187478">ret</a> = <a href="#187468" title="net.liftweb.mapper.MetaMapper[O]">meta</a>.<a href="MetaMapper.scala.html#146823" title="(by: net.liftweb.mapper.QueryParam[O]*)List[O]">findAll</a><span class="delimiter">(</span><a href="MetaMapper.scala.html#155049" title="(field: net.liftweb.mapper.MappedField[K,O], value: net.liftweb.mapper.MappedField[K,T] with net.liftweb.mapper.IndexedField[K])(implicit evidence$5: net.liftweb.mapper.MappedField[K,T] with net.liftweb.mapper.IndexedField[K] =&gt; K)net.liftweb.mapper.Cmp[O,K]">By</a><a href="MappedField.scala.html#155491" title="(in: net.liftweb.mapper.MappedField[K,T])K" class="delimiter">(</a><a href="#187469" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">foreign</a>, <a href="Mapper.scala.html#147132" title="=&gt; net.liftweb.mapper.MappedField[K,T] with net.liftweb.mapper.IndexedField[K]">primaryKeyField</a><span class="delimiter">)</span> <a href="#187482" title="(x: net.liftweb.mapper.QueryParam[O])List[net.liftweb.mapper.QueryParam[O]]">::</a> <a href="#187470" title="net.liftweb.mapper.QueryParam[O]*">qp</a>.<span title="=&gt; List[net.liftweb.mapper.QueryParam[O]]">toList</span> : _*<span class="delimiter">)</span>
        <span class="keyword">for</span><span class="delimiter">(</span><a title="O" id="187643">child</a> &lt;- <a href="#187478" title="(f: O =&gt; Unit)Unit">ret</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#187469" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">foreign</a>.<a href="MappedField.scala.html#147394" title="(actual: O)net.liftweb.mapper.MappedField[K,O]">actualField</a><span class="delimiter">(</span><a href="#187643" title="O">child</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="net.liftweb.mapper.MappedForeignKey[K,O,T]" class="delimiter">[</span><a href="MappedForeignKey.scala.html#11449" title="net.liftweb.mapper.MappedForeignKey[K,O,T]">MappedForeignKey</a><span class="delimiter">[</span>K,O,T<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="MappedForeignKey.scala.html#155170" title="(obj: net.liftweb.common.Box[T])Unit">primeObj</a><span class="delimiter">(</span>net.liftweb.common.<a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: T)net.liftweb.common.Full[T]">Full</a><span class="delimiter">(</span><a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T">OneToMany</a>.<span class="keyword">this</span> : <a href="#11805" title="T">T</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#187478" title="List[O]">ret</a>
      <span class="delimiter">}</span>,
      <a href="#186872" title="(field: net.liftweb.mapper.MappedForeignKey[K,O,T])O =&gt; net.liftweb.mapper.MappedForeignKey[K,O,T]">foreign</a>
    <span class="delimiter">)</span>

  <span class="comment">/**
   * This is the base class to use for fields that represent one-to-many or parent-child relationships.
   * Maintains a list of children, tracking pending additions and deletions, and
   * keeping their foreign key pointed to this mapper.
   * Implements Buffer, so the children can be managed as one.
   * Most users will use MappedOneToMany, however to support children from multiple tables
   * it is necessary to use MappedOneToManyBase.
   * @param reloadFunc A function that returns a sequence of children from storage.
   * @param foreign A function that gets the MappedForeignKey on the child that refers to this parent
   */</span>
  <span class="keyword">class</span> <a title="class MappedOneToManyBase[O &lt;: net.liftweb.mapper.Mapper[_]] extends java.lang.Object with scala.collection.mutable.Buffer[O] with ScalaObject" id="186881">MappedOneToManyBase</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: net.liftweb.mapper.Mapper[_]" id="186882">O</a> &lt;: Mapper<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><a href="#186881" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="() =&gt; Seq[O]" id="187471">reloadFunc</a>: <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;Seq<span class="delimiter">[</span>O<span class="delimiter">]</span>,
                                      <span class="keyword">val</span> <a title="O =&gt; net.liftweb.mapper.MappedForeignKey[K, _, T]" id="187472">foreign</a>: O =&gt; MappedForeignKey<span class="delimiter">[</span>K,_,T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> scala.collection.mutable.<span title="scala.collection.mutable.Buffer[O]">Buffer</span><span class="delimiter">[</span>O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="186926">inited</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[O]" id="186929">_delegate</a>: <span title="List[O]">List</span><span class="delimiter">[</span>O<span class="delimiter">]</span> = _
    <span class="comment">/**
     * children that were added before the parent was ever saved
    */</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[O]" id="186932">unlinked</a>: <span title="List[O]">List</span><span class="delimiter">[</span>O<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[O]" id="186934">delegate</a>: <span title="List[O]">List</span><span class="delimiter">[</span>O<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#186926" title="=&gt; Boolean">inited</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#186951" title="=&gt; Unit">refresh</a>
        <a href="#186926" title="(x$1: Boolean)Unit">inited</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
      <a href="#186929" title="=&gt; List[O]">_delegate</a>
    <span class="delimiter">}</span>
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(d: List[O])Unit" id="186935">delegate_=</a><span class="delimiter">(</span><a title="List[O]" id="187247">d</a>: <span title="List[O]">List</span><span class="delimiter">[</span>O<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#186929" title="(x$1: List[O])Unit">_delegate</a> = <a href="#187247" title="List[O]">d</a>

    <span class="comment">/**
     * Takes ownership of e. Sets e's foreign key to our primary key
     */</span>
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(e: O)O" id="186936">own</a><span class="delimiter">(</span><a title="O" id="187675">e</a>: <a href="#186882" title="O">O</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#187675" title="O">e</a><span class="delimiter">)</span> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Any" id="187680">f</a>: <a href="#187683" title="MappedOneToManyBase extends net.liftweb.mapper.MappedLongForeignKey[O,T] with net.liftweb.mapper.MappedForeignKey[_,_,T]">MappedLongForeignKey</a><span class="delimiter">[</span>O,T<span class="delimiter">]</span> <span class="keyword">with</span> MappedForeignKey<span class="delimiter">[</span>_,_,T<span class="delimiter">]</span> =&gt;
          <a href="#187680" title="&lt;none&gt; extends net.liftweb.mapper.MappedForeignKey[K,_$5,T] with net.liftweb.mapper.MappedLongForeignKey[O,T] with net.liftweb.mapper.MappedForeignKey[_,_,T]">f</a>.<a href="MappedForeignKey.scala.html#155178" title="(v: T)Any">apply</a><span class="delimiter">(</span><a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T">OneToMany</a>.<span class="keyword">this</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="K" id="187780">f</a> =&gt;
          <a href="#187780" title="net.liftweb.mapper.MappedForeignKey[K,_$5,T]">f</a>.<a href="MappedField.scala.html#147418" title="(value: K)K">set</a><span class="delimiter">(</span><a href="#11803" title="OneToMany.this.type">OneToMany</a>.<span class="keyword">this</span>.<a href="MappedField.scala.html#155491" title="(in: net.liftweb.mapper.MappedField[K,T])K">primaryKeyField</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#11803" title="OneToMany.this.type">OneToMany</a>.<span class="keyword">this</span>.<a href="Mapper.scala.html#147107" title="=&gt; Boolean">saved_?</a><span class="delimiter">)</span>
         <a href="#186932" title="(x$1: List[O])Unit">unlinked</a> <span title="(x: O)List[O]">::=</span> <a href="#187675" title="O">e</a>
      <a href="#187675" title="O">e</a>
    <span class="delimiter">}</span>
    <span class="comment">/**
     * Relinquishes ownership of e. Resets e's foreign key to its default value.
     */</span>
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(e: O)O" id="186937">unown</a><span class="delimiter">(</span><a title="O" id="187878">e</a>: <a href="#186882" title="O">O</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="net.liftweb.mapper.MappedForeignKey[K, _, T]" id="187881">f</a> = <a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#187878" title="O">e</a><span class="delimiter">)</span>
      <a href="#187881" title="net.liftweb.mapper.MappedForeignKey[K, _, T]">f</a>.<a href="MappedField.scala.html#147418" title="(value: K)K">set</a><span class="delimiter">(</span><a href="#187881" title="net.liftweb.mapper.MappedForeignKey[K, _, T]">f</a>.<a href="MappedField.scala.html#147388" title="=&gt; K">defaultValue</a><span class="delimiter">)</span>
      <a href="#186932" title="(x$1: List[O])Unit">unlinked</a> = <a href="#186932" title="=&gt; List[O]">unlinked</a> <span title="(p: O =&gt; Boolean)List[O]">filter</span> <span class="delimiter">{</span><a href="#187878" title="O">e</a>.<a href="#187891" title="(x$1: AnyRef)Boolean">ne</a><span class="delimiter">}</span>
      <a href="#187878" title="O">e</a>
    <span class="delimiter">}</span>
    <span class="comment">/**
     * Returns the backing List
     */</span>
    <span class="keyword">def</span> <a title="=&gt; List[O]" id="186938">all</a> = <a href="#186934" title="=&gt; List[O]">delegate</a>

    <span class="comment">// 2.8: return this</span>
    <span class="keyword">def</span> <a title="(elem: O)MappedOneToManyBase.this.type" id="186939">+=</a><span class="delimiter">(</span><a title="O" id="187895">elem</a>: <a href="#186882" title="O">O</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> = <a href="#186934" title="=&gt; List[O]">delegate</a> <span title="(that: scala.collection.GenTraversableOnce[O])(implicit bf: scala.collection.generic.CanBuildFrom[List[O],O,List[O]])List[O]">++</span> <span title="(xs: O*)List[O]">List</span><span class="delimiter">(</span><a href="#186936" title="(e: O)O">own</a><span class="delimiter">(</span><a href="#187895" title="O">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#186881" title="MappedOneToManyBase.this.type" class="keyword">this</a>
    <span class="delimiter">}</span>
    <span class="comment">// 2.7</span>
    <span class="comment">//def readOnly = all</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="186940">length</a> = <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="=&gt; Int">length</span>
    <span class="comment">// 2.7</span>
    <span class="comment">//def elements = delegate.elements</span>
    <span class="comment">// 2.8</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[O]" id="186941">iterator</a> = <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="=&gt; Iterator[O]">iterator</span>
    <span class="keyword">def</span> <a title="(n: Int)O" id="186942">apply</a><span class="delimiter">(</span><a title="Int" id="188010">n</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#186934" title="(n: Int)O">delegate</a><span class="delimiter">(</span><a href="#188010" title="Int">n</a><span class="delimiter">)</span>

    <span class="comment">// 2.7</span>
    <span class="comment">/* def +:(elem: O) = {
      delegate ::= own(elem)
      this
    } */</span>
    <span class="comment">// 2.8</span>
    <span class="keyword">def</span> <a title="(elem: O)MappedOneToManyBase.this.type" id="186943">+=:</a><span class="delimiter">(</span><a title="O" id="188023">elem</a>: <a href="#186882" title="O">O</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> <span title="(x: O)List[O]">::=</span> <a href="#186936" title="(e: O)O">own</a><span class="delimiter">(</span><a href="#188023" title="O">elem</a><span class="delimiter">)</span>
      <a href="#186881" title="MappedOneToManyBase.this.type" class="keyword">this</a>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[B &gt;: O](e: B)Int" id="186944">indexOf</a><span class="delimiter">[</span><a title="&gt;: O &lt;: Any" id="186946">B</a> &gt;: O<span class="delimiter">]</span><span class="delimiter">(</span><a title="B" id="188032">e</a>: <a href="#186946" title="B">B</a><span class="delimiter">)</span>: <span title="Int">Int</span> =
      <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(p: O =&gt; Boolean)Int">indexWhere</span><span class="delimiter">(</span><a href="#188032" title="B">e</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><a href="#188058" title="AnyRef" class="delimiter">[</a><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<a href="#188060" title="(x$1: AnyRef)Boolean">eq</a><span class="delimiter">)</span>

    <span class="comment">// 2.7</span>
    <span class="comment">// def insertAll(n: Int, iter: Iterable[O]) {</span>
    <span class="comment">// 2.8</span>
    <span class="keyword">def</span> <a title="(n: Int, iter: Traversable[O])Unit" id="186947">insertAll</a><span class="delimiter">(</span><a title="Int" id="188061">n</a>: <span title="Int">Int</span>, <a title="Traversable[O]" id="188062">iter</a>: <span title="Traversable[O]">Traversable</span><span class="delimiter">[</span>O<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#188067" title="(List[O], List[O])" class="delimiter">(</a><a href="#188066" title="List[O]" id="188067">before</a>, <a href="#188066" title="List[O]" id="188068">after</a><span class="delimiter">)</span> = <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(n: Int)(List[O], List[O])">splitAt</span><span title="(List[O], List[O]) @unchecked" class="delimiter">(</span><a href="#188061" title="Int">n</a><span class="delimiter">)</span>
      <a href="#188062" title="Traversable[O]">iter</a> <span title="(f: O =&gt; O)Unit">foreach</span> <a href="#186936" title="(e: O)O">own</a>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> = <a href="#188067" title="List[O]">before</a> <span title="(that: scala.collection.GenTraversableOnce[O])(implicit bf: scala.collection.generic.CanBuildFrom[List[O],O,List[O]])List[O]">++</span> <a href="#188062" title="Traversable[O]">iter</a> <span title="(that: scala.collection.GenTraversableOnce[O])(implicit bf: scala.collection.generic.CanBuildFrom[List[O],O,List[O]])List[O]">++</span> <a href="#188068" title="List[O]">after</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(n: Int, newelem: O)Unit" id="186948">update</a><span class="delimiter">(</span><a title="Int" id="188211">n</a>: <span title="Int">Int</span>, <a title="O" id="188212">newelem</a>: <a href="#186882" title="O">O</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#186937" title="(e: O)O">unown</a><span class="delimiter">(</span><a href="#186934" title="(n: Int)O">delegate</a><span class="delimiter">(</span><a href="#188211" title="Int">n</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a href="#188223" title="(List[O], List[O])" class="delimiter">(</a><a href="#188222" title="List[O]" id="188223">before</a>, <a href="#188222" title="List[O]" id="188224">after</a><span class="delimiter">)</span> = <span title="(_1: List[O], _2: List[O])(List[O], List[O])" class="delimiter">(</span><a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(n: Int)List[O]">take</span><span class="delimiter">(</span><a href="#188211" title="Int">n</a><span class="delimiter">)</span>, <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(n: Int)List[O]">drop</span><span class="delimiter">(</span><a href="#188211" title="Int">n</a><span title="(x: Int)Int">+</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> = <a href="#188223" title="List[O]">before</a> <span title="(that: scala.collection.GenTraversableOnce[O])(implicit bf: scala.collection.generic.CanBuildFrom[List[O],O,List[O]])List[O]">++</span> <span title="(xs: O*)List[O]">List</span><span class="delimiter">(</span><a href="#186936" title="(e: O)O">own</a><span class="delimiter">(</span><a href="#188212" title="O">newelem</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[O])(implicit bf: scala.collection.generic.CanBuildFrom[List[O],O,List[O]])List[O]">++</span> <a href="#188224" title="List[O]">after</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(n: Int)O" id="186949">remove</a><span class="delimiter">(</span><a title="Int" id="188374">n</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="O" id="188379">e</a> = <a href="#186937" title="(e: O)O">unown</a><span class="delimiter">(</span><a href="#186934" title="(n: Int)O">delegate</a><span class="delimiter">(</span><a href="#188374" title="Int">n</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> = <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(p: O =&gt; Boolean)List[O]">filterNot</span><span class="delimiter">(</span><a href="#188379" title="O">e</a> <a href="#188393" title="(x$1: AnyRef)Boolean">eq</a><span class="delimiter">)</span>
      <a href="#188379" title="O">e</a>
    <span class="delimiter">}</span>


    <span class="keyword">def</span> <a title="()Unit" id="186950">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="=&gt; Int">length</span><span title="(x: Int)Boolean">&gt;</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
        <a href="#186949" title="(n: Int)O">remove</a><a href="#188395" title="()Unit" class="delimiter">(</a><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Reloads the children from storage.
     * NOTE: This may leave children in an inconsistent state.
     * It is recommended to call save or clear() before calling refresh.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Unit" id="186951">refresh</a> <span class="delimiter">{</span>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> = <a href="#187471" title="()Seq[O]">reloadFunc</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; List[O]">toList</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="Mapper.scala.html#147107" title="=&gt; Boolean">saved_?</a><span class="delimiter">)</span>
        <a href="#186932" title="(x$1: List[O])Unit">unlinked</a> = <span title="object Nil">Nil</span>
      <span class="keyword">else</span>
        <a href="#186932" title="(x$1: List[O])Unit">unlinked</a> = <a href="#186929" title="=&gt; List[O]">_delegate</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Saves this &quot;field,&quot; i.e., all the children it represents.
     * Returns false as soon as save on a child returns false.
     * Returns true if all children were saved successfully.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="186952">save</a> = <span class="delimiter">{</span>
      <a href="#186932" title="=&gt; List[O]">unlinked</a> <span title="(f: O =&gt; Any)Unit">foreach</span> <span class="delimiter">{</span><a title="O" id="187195">u</a> =&gt;
        <span class="keyword">val</span> <a title="net.liftweb.mapper.MappedForeignKey[K, _, T]" id="187198">f</a> = <a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#187195" title="O">u</a><span class="delimiter">)</span>
        <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#187198" title="net.liftweb.mapper.MappedForeignKey[K, _, T]">f</a>.<a href="MappedForeignKey.scala.html#155168" title="=&gt; net.liftweb.common.Box[T]">obj</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: T =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#187208" title="T">_</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T">OneToMany</a>.<span class="keyword">this</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="comment">// obj is Empty or this</span>
          <a href="#187198" title="net.liftweb.mapper.MappedForeignKey[K, _, T]">f</a>.<a href="MappedForeignKey.scala.html#155178" title="(v: T)Any">apply</a><span class="delimiter">(</span><a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T">OneToMany</a>.<span class="keyword">this</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#186932" title="(x$1: List[O])Unit">unlinked</a> = <span title="object Nil">Nil</span>
      <a href="#186935" title="(d: List[O])Unit">delegate</a> = <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(p: O =&gt; Boolean)List[O]">filter</span> <span class="delimiter">{</span><a title="O" id="187256">e</a> =&gt;
          <a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#187256" title="O">e</a><span class="delimiter">)</span>.<a href="MappedField.scala.html#147450" title="=&gt; K">is</a> <span title="(x$1: Any)Boolean">==</span> <a href="#11803" title="OneToMany.this.type">OneToMany</a>.<span class="keyword">this</span>.<a href="Mapper.scala.html#147132" title="=&gt; net.liftweb.mapper.MappedField[K,T] with net.liftweb.mapper.IndexedField[K]">primaryKeyField</a>.<a href="MappedField.scala.html#147450" title="=&gt; K">is</a> <span title="(x: Boolean)Boolean">||</span>
            <a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#187256" title="O">e</a><span class="delimiter">)</span>.<a href="MappedForeignKey.scala.html#155168" title="=&gt; net.liftweb.common.Box[T]">obj</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: T =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#187265" title="T">_</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#11803" title="&lt;none&gt; extends net.liftweb.mapper.OneToMany[K,T] with T">OneToMany</a>.<span class="keyword">this</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="comment">// obj is this but not Empty</span>
      <span class="delimiter">}</span>
      <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(p: O =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#187278" title="O">_</a>.<a href="Mapper.scala.html#147084" title="()Boolean">save</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="186953">toString</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="188413">c</a> = <a href="#186881" title="()java.lang.Class[_]">getClass</a>.<span title="()java.lang.String">getSimpleName</span>
      <span class="keyword">val</span> <a title="Int" id="188414">l</a> = <a href="#188413" title="java.lang.String">c</a>.<span title="(x$1: java.lang.String)Int">lastIndexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
      <a href="#188413" title="java.lang.String">c</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#188413" title="java.lang.String">c</a>.<span title="(x$1: java.lang.String, x$2: Int)Int">lastIndexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>,<a href="#188414" title="Int">l</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span title="(x: Int)Int">+</span><span title="Int(1)" class="int">1</span>, <a href="#188414" title="Int">l</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;[&quot;)" class="string">&quot;[&quot;</span>,<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>,<span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Adds behavior to delete orphaned fields before save.
   */</span>
  <span class="keyword">trait</span> <a title="trait Owned[O &lt;: net.liftweb.mapper.Mapper[_]] extends OneToMany.this.MappedOneToManyBase[O] with ScalaObject" id="186883">Owned</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: net.liftweb.mapper.Mapper[_]" id="186884">O</a>&lt;:Mapper<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="#186881" title="OneToMany.this.MappedOneToManyBase[O]">MappedOneToManyBase</a><span class="delimiter">[</span>O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="List[O]" id="188439">removed</a>: <span title="List[O]">List</span><span class="delimiter">[</span>O<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(e: O)O" id="188441">unown</a><span class="delimiter">(</span><a title="O" id="188471">e</a>: <a href="#186884" title="O">O</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#188439" title="(x$1: List[O])Unit">removed</a> = <a href="#188471" title="O">e</a> <a href="#188475" title="(x: O)List[O]">::</a> <a href="#188439" title="=&gt; List[O]">removed</a>
      <a href="#186883" title="OneToMany.this.Owned[O]" class="keyword">super</a>.<a href="#186937" title="(e: O)O">unown</a><span class="delimiter">(</span><a href="#188471" title="O">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(e: O)O" id="188442">own</a><span class="delimiter">(</span><a title="O" id="188483">e</a>: <a href="#186884" title="O">O</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#188439" title="(x$1: List[O])Unit">removed</a> = <a href="#188439" title="=&gt; List[O]">removed</a> <span title="(p: O =&gt; Boolean)List[O]">filter</span> <span class="delimiter">{</span><a href="#188483" title="O">e</a> <a href="#188496" title="(x$1: AnyRef)Boolean">ne</a><span class="delimiter">}</span>
      <a href="#186883" title="OneToMany.this.Owned[O]" class="keyword">super</a>.<a href="#186936" title="(e: O)O">own</a><span class="delimiter">(</span><a href="#188483" title="O">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="188443">save</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[O]" id="188502">unowned</a> = <a href="#188439" title="=&gt; List[O]">removed</a>.<span title="(p: O =&gt; Boolean)List[O]">filter</span><span class="delimiter">{</span> <a title="O" id="188508">e</a> =&gt;
        <span class="keyword">val</span> <a title="net.liftweb.mapper.MappedForeignKey[K, _, T]" id="188509">f</a> = <a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#188508" title="O">e</a><span class="delimiter">)</span>
        <a href="#188509" title="net.liftweb.mapper.MappedForeignKey[K, _, T]">f</a>.<a href="MappedField.scala.html#147450" title="=&gt; K">is</a> <span title="(x$1: Any)Boolean">==</span> <a href="#188509" title="net.liftweb.mapper.MappedForeignKey[K, _, T]">f</a>.<a href="MappedField.scala.html#147388" title="=&gt; K">defaultValue</a>
      <span class="delimiter">}</span>
      <a href="#188502" title="List[O]">unowned</a> <span title="(f: O =&gt; Boolean)Unit">foreach</span> <span class="delimiter">{</span><a href="#188532" title="O">_</a>.<a href="Mapper.scala.html#147091" title="=&gt; Boolean">delete_!</a><span class="delimiter">}</span>
      <a href="#186883" title="OneToMany.this.Owned[O]" class="keyword">super</a>.<a href="#186952" title="=&gt; Boolean">save</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Trait that indicates that the children represented
   * by this field should be deleted when the parent is deleted.
   */</span>
  <span class="keyword">trait</span> <a title="trait Cascade[O &lt;: net.liftweb.mapper.Mapper[_]] extends OneToMany.this.MappedOneToManyBase[O] with ScalaObject" id="186885">Cascade</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: net.liftweb.mapper.Mapper[_]" id="186886">O</a>&lt;:Mapper<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="#186881" title="OneToMany.this.MappedOneToManyBase[O]">MappedOneToManyBase</a><span class="delimiter">[</span>O<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="187311">delete_!</a> = <span class="delimiter">{</span>
      <a href="#186934" title="=&gt; List[O]">delegate</a>.<span title="(p: O =&gt; Boolean)Boolean">forall</span> <span class="delimiter">{</span> <a title="O" id="187373">e</a> =&gt;
          <span title="Boolean" class="keyword">if</span><span class="delimiter">(</span><a href="#187472" title="(v1: O)net.liftweb.mapper.MappedForeignKey[K, _, T]">foreign</a><span class="delimiter">(</span><a href="#187373" title="O">e</a><span class="delimiter">)</span>.<a href="MappedField.scala.html#147450" title="=&gt; K">is</a> <span title="(x$1: Any)Boolean">==</span>
            <a href="#11803" title="OneToMany.this.type">OneToMany</a>.<span class="keyword">this</span>.<a href="Mapper.scala.html#147132" title="=&gt; net.liftweb.mapper.MappedField[K,T] with net.liftweb.mapper.IndexedField[K]">primaryKeyField</a>.<a href="MappedField.scala.html#147450" title="=&gt; K">is</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#187373" title="O">e</a>.<a href="Mapper.scala.html#147091" title="=&gt; Boolean">delete_!</a>
            <span class="delimiter">}</span>
          <span class="keyword">else</span>
            <span title="Boolean(true)" class="keyword">true</span> <span class="comment">// doesn't constitute a failure</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>