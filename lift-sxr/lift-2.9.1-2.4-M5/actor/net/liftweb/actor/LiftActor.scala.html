<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>actor/net/liftweb/actor/LiftActor.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2009-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> actor

<span class="keyword">import</span> common._

<span class="keyword">trait</span> <a title="trait ILAExecute extends java.lang.Object" id="10548">ILAExecute</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(f: () =&gt; Unit)Unit" id="31103">execute</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="31106">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="()Unit" id="31104">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.actor.LAScheduler" id="10549">LAScheduler</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../common/net/liftweb/common/Logging.scala.html#10717" title="net.liftweb.common.Loggable">Loggable</a> <span class="delimiter">{</span>
  @volatile
  <span class="keyword">var</span> <a title="Boolean" id="19849">onSameThread</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * Set this variable to the number of threads to allocate in the thread pool
   */</span>
  @volatile <span class="keyword">var</span> <a title="Int" id="19852">threadPoolSize</a> = <span title="Int(16)" class="int">16</span> <span class="comment">// issue 194</span>

  @volatile <span class="keyword">var</span> <a title="Int" id="19855">maxThreadPoolSize</a> = <a href="#19852" title="=&gt; Int">threadPoolSize</a> <span title="(x: Int)Int">*</span> <span title="Int(25)" class="int">25</span>

  <span class="comment">/**
   * If it's Full, then create a ArrayBlockingQueue
   * otherwith create a LinkedBlockingQueue.  Default
   * to Full(200000)
   */</span>
  @volatile <span class="keyword">var</span> <a title="net.liftweb.common.Box[Int]" id="19858">blockingQueueSize</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Int]">Box</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Int)net.liftweb.common.Full[Int]">Full</a><span class="delimiter">(</span><span title="Int(200000)" class="int">200000</span><span class="delimiter">)</span>

  @volatile
  <span class="keyword">var</span> <a title="() =&gt; net.liftweb.actor.ILAExecute" id="19861">createExecutor</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; ILAExecute = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <a href="#31122" title="java.lang.Object with net.liftweb.actor.ILAExecute{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.actor.ILAExecute" id="31122">ILAExecute</a> <span class="delimiter">{</span>
      <span class="keyword">import</span> java.util.concurrent._

      <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.util.concurrent.ThreadPoolExecutor" id="31127">es</a> = <span class="comment">// Executors.newFixedThreadPool(threadPoolSize)</span>
        <span title="java.util.concurrent.ThreadPoolExecutor" class="keyword">new</span> <span title="java.util.concurrent.ThreadPoolExecutor">ThreadPoolExecutor</span><span class="delimiter">(</span><a href="#19852" title="=&gt; Int">threadPoolSize</a>, 
                               <a href="#19855" title="=&gt; Int">maxThreadPoolSize</a>,
                               <span title="Long(60L)" class="int">60</span>,
                               TimeUnit.<span title="java.util.concurrent.TimeUnit(value SECONDS)">SECONDS</span>,
                               <a href="#19858" title="=&gt; net.liftweb.common.Box[Int]">blockingQueueSize</a> <span title="java.util.concurrent.BlockingQueue[java.lang.Runnable]" class="keyword">match</span> <span class="delimiter">{</span>
                                 <span class="keyword">case</span> <span title="java.util.concurrent.ArrayBlockingQueue[java.lang.Runnable]">Full</span><span class="delimiter">(</span><a title="Int" id="31418">x</a><span class="delimiter">)</span> =&gt; 
                                   <span title="java.util.concurrent.ArrayBlockingQueue[java.lang.Runnable]" class="keyword">new</span> <span title="java.util.concurrent.ArrayBlockingQueue[java.lang.Runnable]">ArrayBlockingQueue</span><span class="delimiter">(</span><a href="#31418" title="Int">x</a><span class="delimiter">)</span>
                                 <span class="keyword">case</span> <span title="java.util.concurrent.LinkedBlockingQueue[java.lang.Runnable]">_</span> =&gt; <span title="java.util.concurrent.LinkedBlockingQueue[java.lang.Runnable]" class="keyword">new</span> <span title="java.util.concurrent.LinkedBlockingQueue[java.lang.Runnable]">LinkedBlockingQueue</span>
                               <span class="delimiter">}</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(f: () =&gt; Unit)Unit" id="31129">execute</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="31131">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      <a href="#31127" title="=&gt; java.util.concurrent.ThreadPoolExecutor">es</a>.<span title="(x$1: java.lang.Runnable)Unit">execute</span><span class="delimiter">(</span><a href="#31873" title="java.lang.Object with java.lang.Runnable" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with java.lang.Runnable" id="31873">Runnable</a><span class="delimiter">{</span><span class="keyword">def</span> <a title="()Unit" id="31877">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="#31131" title="()Unit">f</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Unit" id="31881">e</a>: <span title="Exception">Exception</span> =&gt; <a href="../../../../common/net/liftweb/common/Logging.scala.html#19845" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31961" title="(msg: =&gt; AnyRef, t: Throwable)Unit">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Lift Actor Scheduler&quot;)" class="string">&quot;Lift Actor Scheduler&quot;</span>, <a href="#31881" title="Exception">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">}</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="()Unit" id="31130">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
        <a href="#31127" title="=&gt; java.util.concurrent.ThreadPoolExecutor">es</a>.<span title="()Unit">shutdown</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @volatile
  <span class="keyword">var</span> <a title="net.liftweb.actor.ILAExecute" id="19864">exec</a>: <a href="#10548" title="net.liftweb.actor.ILAExecute">ILAExecute</a> = _

  <span class="keyword">def</span> <a title="(f: () =&gt; Unit)Unit" id="19866">execute</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="19868">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#19864" title="=&gt; net.liftweb.actor.ILAExecute">exec</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#19864" title="(x$1: net.liftweb.actor.ILAExecute)Unit">exec</a> = <a href="#19861" title="()net.liftweb.actor.ILAExecute">createExecutor</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#19864" title="=&gt; net.liftweb.actor.ILAExecute">exec</a>.<a href="#31103" title="(f: () =&gt; Unit)Unit">execute</a><span class="delimiter">(</span><a href="#19868" title="() =&gt; Unit">f</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="19867">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#19864" title="=&gt; net.liftweb.actor.ILAExecute">exec</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#19864" title="=&gt; net.liftweb.actor.ILAExecute">exec</a>.<a href="#31104" title="()Unit">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <a href="#19864" title="(x$1: net.liftweb.actor.ILAExecute)Unit">exec</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait SpecializedLiftActor[T] extends java.lang.Object with net.liftweb.common.SimpleActor[T] with ScalaObject" id="10551">SpecializedLiftActor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="10552">T</a><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../common/net/liftweb/common/SimpleActor.scala.html#10731" title="net.liftweb.common.SimpleActor[T]">SimpleActor</a><span class="delimiter">[</span>T<span class="delimiter">]</span>  <span class="delimiter">{</span>
  @volatile <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="29493">processing</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="SpecializedLiftActor.this.MailboxItem" id="29494">baseMailbox</a>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a> = <span title="SpecializedLiftActor.this.SpecialMailbox" class="keyword">new</span> <a href="#29499" title="SpecializedLiftActor.this.SpecialMailbox">SpecialMailbox</a>
  @volatile <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="List[T]" id="29495">msgList</a>: <span title="List[T]">List</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
  @volatile <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="List[T]" id="29496">priorityMsgList</a>: <span title="List[T]">List</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
  @volatile <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="Int" id="29497">startCnt</a> = <span title="Int(0)" class="int">0</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class MailboxItem extends java.lang.Object with ScalaObject" id="29498">MailboxItem</a><a href="#29498" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="T" id="32432">item</a>: <a href="#10552" title="T">T</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="SpecializedLiftActor.this.MailboxItem" id="32358">next</a>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a> = _
    <span class="keyword">var</span> <a title="SpecializedLiftActor.this.MailboxItem" id="32361">prev</a>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a> = _

    <span class="comment">/*
    def find(f: MailboxItem =&gt; Boolean): Box[MailboxItem] =
    if (f(this)) Full(this) else next.find(f)
    */</span>

    <span class="keyword">def</span> <a title="()Unit" id="32363">remove</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="SpecializedLiftActor.this.MailboxItem" id="32447">newPrev</a> = <a href="#32361" title="=&gt; SpecializedLiftActor.this.MailboxItem">prev</a>
      <a href="#32361" title="=&gt; SpecializedLiftActor.this.MailboxItem">prev</a>.<a href="#32358" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">next</a> = <a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>
      <a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>.<a href="#32361" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">prev</a> = <a href="#32361" title="=&gt; SpecializedLiftActor.this.MailboxItem">prev</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(newItem: SpecializedLiftActor.this.MailboxItem)SpecializedLiftActor.this.MailboxItem" id="32364">insertAfter</a><span class="delimiter">(</span><a title="SpecializedLiftActor.this.MailboxItem" id="32382">newItem</a>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a><span class="delimiter">)</span>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a> = <span class="delimiter">{</span>
      <a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>.<a href="#32361" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">prev</a> = <a href="#32382" title="SpecializedLiftActor.this.MailboxItem">newItem</a>
      <a href="#32382" title="SpecializedLiftActor.this.MailboxItem">newItem</a>.<a href="#32361" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">prev</a> = <a href="#29498" title="SpecializedLiftActor.this.MailboxItem" class="keyword">this</a>
      <a href="#32382" title="SpecializedLiftActor.this.MailboxItem">newItem</a>.<a href="#32358" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">next</a> = <a href="#29498" title="MailboxItem.this.type" class="keyword">this</a>.<a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>
      <a href="#32358" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">next</a> = <a href="#32382" title="SpecializedLiftActor.this.MailboxItem">newItem</a>
      <a href="#32382" title="SpecializedLiftActor.this.MailboxItem">newItem</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(newItem: SpecializedLiftActor.this.MailboxItem)SpecializedLiftActor.this.MailboxItem" id="32365">insertBefore</a><span class="delimiter">(</span><a title="SpecializedLiftActor.this.MailboxItem" id="32386">newItem</a>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a><span class="delimiter">)</span>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a> = <span class="delimiter">{</span>
      <a href="#32361" title="=&gt; SpecializedLiftActor.this.MailboxItem">prev</a>.<a href="#32358" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">next</a> = <a href="#32386" title="SpecializedLiftActor.this.MailboxItem">newItem</a>
      <a href="#32386" title="SpecializedLiftActor.this.MailboxItem">newItem</a>.<a href="#32361" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">prev</a> = <a href="#29498" title="MailboxItem.this.type" class="keyword">this</a>.<a href="#32361" title="=&gt; SpecializedLiftActor.this.MailboxItem">prev</a>
      <a href="#32386" title="SpecializedLiftActor.this.MailboxItem">newItem</a>.<a href="#32358" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">next</a> = <a href="#29498" title="SpecializedLiftActor.this.MailboxItem" class="keyword">this</a>
      <a href="#32361" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">prev</a> = <a href="#32386" title="SpecializedLiftActor.this.MailboxItem">newItem</a>
      <a href="#32386" title="SpecializedLiftActor.this.MailboxItem">newItem</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class SpecialMailbox extends SpecializedLiftActor.this.MailboxItem with ScalaObject" id="29499">SpecialMailbox</a> <a href="#29499" title="ScalaObject" class="keyword">extends</a> <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#10552" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// override def find(f: MailboxItem =&gt; Boolean): Box[MailboxItem] = Empty</span>
    <a href="#32358" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">next</a> = <a href="#29499" title="SpecializedLiftActor.this.SpecialMailbox" class="keyword">this</a>
    <a href="#32361" title="(x$1: SpecializedLiftActor.this.MailboxItem)Unit">prev</a> = <a href="#29499" title="SpecializedLiftActor.this.SpecialMailbox" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(start: SpecializedLiftActor.this.MailboxItem, f: SpecializedLiftActor.this.MailboxItem =&gt; Boolean)net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]" id="29500">findMailboxItem</a><span class="delimiter">(</span><a title="SpecializedLiftActor.this.MailboxItem" id="32507">start</a>: <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a>, <a title="SpecializedLiftActor.this.MailboxItem =&gt; Boolean" id="32508">f</a>: MailboxItem =&gt; Boolean<span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]">Box</a><span class="delimiter">[</span>MailboxItem<span class="delimiter">]</span> =
    <a href="#32507" title="SpecializedLiftActor.this.MailboxItem">start</a> <span title="net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Empty.type" id="32552">x</a>: <a href="#29499" title="SpecializedLiftActor.this.SpecialMailbox">SpecialMailbox</a> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Full[SpecializedLiftActor.this.MailboxItem]" id="32553">x</a> <span class="keyword">if</span> <a href="#32508" title="(v1: SpecializedLiftActor.this.MailboxItem)Boolean">f</a><span class="delimiter">(</span><a href="#32553" title="SpecializedLiftActor.this.MailboxItem">x</a><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: SpecializedLiftActor.this.MailboxItem)net.liftweb.common.Full[SpecializedLiftActor.this.MailboxItem]">Full</a><span class="delimiter">(</span><a href="#32553" title="SpecializedLiftActor.this.MailboxItem">x</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]" id="32558">x</a> =&gt; <a href="#29500" title="(start: SpecializedLiftActor.this.MailboxItem, f: SpecializedLiftActor.this.MailboxItem =&gt; Boolean)net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]">findMailboxItem</a><span class="delimiter">(</span><a href="#32558" title="SpecializedLiftActor.this.MailboxItem">x</a>.<a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>, <a href="#32508" title="SpecializedLiftActor.this.MailboxItem =&gt; Boolean">f</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Send a message to the Actor.  This call will always succeed
   * and return almost immediately.  The message will be processed
   * asynchronously.  This is a Java-callable alias for !.
   */</span>
  <span class="keyword">def</span> <a title="(msg: T)Unit" id="29501">send</a><span class="delimiter">(</span><a title="T" id="32559">msg</a>: <a href="#10552" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#10551" title="SpecializedLiftActor.this.type" class="keyword">this</a> <a href="#29502" title="(msg: T)Unit">!</a> <a href="#32559" title="T">msg</a>

  <span class="comment">/**
   * Send a message to the Actor.  This call will always succeed
   * and return almost immediately.  The message will be processed
   * asynchronously.
   */</span>
  <span class="keyword">def</span> <a title="(msg: T)Unit" id="29502">!</a><span class="delimiter">(</span><a title="T" id="29525">msg</a>: <a href="#10552" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="() =&gt; Unit" id="32562">toDo</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: () =&gt; Unit)() =&gt; Unit">synchronized</span> <span class="delimiter">{</span>
      <a href="#29495" title="List[T]">msgList</a> <span title="(x: T)List[T]">::=</span> <a href="#29525" title="T">msg</a>
      <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#29493" title="Boolean">processing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#10549" title="object net.liftweb.actor.LAScheduler">LAScheduler</a>.<a href="#19849" title="=&gt; Boolean">onSameThread</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#29493" title="Boolean">processing</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#29504" title="(ignoreProcessing: Boolean)Unit">processMailbox</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#29497" title="Int">startCnt</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#29497" title="Int">startCnt</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#10549" title="object net.liftweb.actor.LAScheduler">LAScheduler</a>.<a href="#19866" title="(f: () =&gt; Unit)Unit">execute</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#29504" title="(ignoreProcessing: Boolean)Unit">processMailbox</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
          <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#32562" title="()Unit">toDo</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This method inserts the message at the head of the mailbox
   * It's protected because this functionality may or may not want
   * to be exposed'
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: T)Unit" id="29503">insertMsgAtHeadOfQueue_!</a><span class="delimiter">(</span><a title="T" id="32589">msg</a>: <a href="#10552" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
     <span class="keyword">val</span> <a title="() =&gt; Unit" id="32591">toDo</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: () =&gt; Unit)() =&gt; Unit">synchronized</span> <span class="delimiter">{</span>
      <a href="#10551" title="SpecializedLiftActor.this.type" class="keyword">this</a>.<a href="#29496" title="List[T]">priorityMsgList</a> <span title="(x: T)List[T]">::=</span> <a href="#32589" title="T">msg</a>
      <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#29493" title="Boolean">processing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#10549" title="object net.liftweb.actor.LAScheduler">LAScheduler</a>.<a href="#19849" title="=&gt; Boolean">onSameThread</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#29493" title="Boolean">processing</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#29504" title="(ignoreProcessing: Boolean)Unit">processMailbox</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#29497" title="Int">startCnt</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#29497" title="Int">startCnt</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#10549" title="object net.liftweb.actor.LAScheduler">LAScheduler</a>.<a href="#19866" title="(f: () =&gt; Unit)Unit">execute</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#29504" title="(ignoreProcessing: Boolean)Unit">processMailbox</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
          <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#32591" title="()Unit">toDo</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ignoreProcessing: Boolean)Unit" id="29504">processMailbox</a><span class="delimiter">(</span><a title="Boolean" id="32573">ignoreProcessing</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#29506" title="(f: =&gt; Unit)Unit">around</a> <span class="delimiter">{</span>
      <a href="#29509" title="(ignoreProcessing: Boolean)Unit">proc2</a><span class="delimiter">(</span><a href="#32573" title="Boolean">ignoreProcessing</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="comment">/**
 * A list of LoanWrappers that will be executed around the evaluation of mailboxes
 */</span>
<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.common.CommonLoanWrapper]" id="29505">aroundLoans</a>: <span title="List[net.liftweb.common.CommonLoanWrapper]">List</span><span class="delimiter">[</span>CommonLoanWrapper<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

<span class="comment">/**
 * You can wrap calls around the evaluation of the mailbox.  This allows you to set up
 * the environment
 */</span>
<span class="keyword">protected</span> <span class="keyword">def</span> <a title="[R](f: =&gt; R)R" id="29506">around</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="29508">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; R" id="32614">f</a>: =&gt; R<span class="delimiter">)</span>: <a href="#29508" title="R">R</a> = <a href="#29505" title="=&gt; List[net.liftweb.common.CommonLoanWrapper]">aroundLoans</a> <span title="R" class="keyword">match</span> <span class="delimiter">{</span>
  <span class="keyword">case</span> <span title="R">Nil</span> =&gt; <a href="#32614" title="=&gt; R">f</a>
  <span class="keyword">case</span> <a title="R" id="32627">xs</a> =&gt; <a href="../../../../common/net/liftweb/common/LoanWrapper.scala.html#32629" title="(lst: List[net.liftweb.common.CommonLoanWrapper])(f: =&gt; R)R">CommonLoanWrapper</a><span class="delimiter">(</span><a href="#32627" title="List[net.liftweb.common.CommonLoanWrapper]">xs</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#32614" title="=&gt; R">f</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ignoreProcessing: Boolean)Unit" id="29509">proc2</a><span class="delimiter">(</span><a title="Boolean" id="32619">ignoreProcessing</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Boolean" id="32670">clearProcessing</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#32619" title="Boolean">ignoreProcessing</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#29493" title="Boolean">processing</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>
      <a href="#29493" title="Boolean">processing</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#29497" title="Int">startCnt</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#29497" title="Int">startCnt</a> = <span title="Int(0)" class="int">0</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="PartialFunction[Throwable,Unit]" id="32671">eh</a> = <a href="#29514" title="=&gt; PartialFunction[Throwable,Unit]">exceptionHandler</a>

    <span class="keyword">def</span> <a title="()Unit" id="32672">putListIntoMB</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#29496" title="List[T]">priorityMsgList</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#29496" title="List[T]">priorityMsgList</a>.<span title="(z: SpecializedLiftActor.this.MailboxItem)(f: (T, SpecializedLiftActor.this.MailboxItem) =&gt; SpecializedLiftActor.this.MailboxItem)SpecializedLiftActor.this.MailboxItem">foldRight</span><span class="delimiter">(</span><a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="T" id="32719">msg</a>, <a title="SpecializedLiftActor.this.MailboxItem" id="32720">mb</a><span class="delimiter">)</span> =&gt; <a href="#32720" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32364" title="(newItem: SpecializedLiftActor.this.MailboxItem)SpecializedLiftActor.this.MailboxItem">insertAfter</a><span class="delimiter">(</span><span title="SpecializedLiftActor.this.MailboxItem" class="keyword">new</span> <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a><span class="delimiter">(</span><a href="#32719" title="T">msg</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#29496" title="List[T]">priorityMsgList</a> = <span title="object Nil">Nil</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#29495" title="List[T]">msgList</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#29495" title="List[T]">msgList</a>.<span title="(z: SpecializedLiftActor.this.MailboxItem)(f: (SpecializedLiftActor.this.MailboxItem, T) =&gt; SpecializedLiftActor.this.MailboxItem)SpecializedLiftActor.this.MailboxItem">foldLeft</span><span class="delimiter">(</span><a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="SpecializedLiftActor.this.MailboxItem" id="32741">mb</a>, <a title="T" id="32742">msg</a><span class="delimiter">)</span> =&gt; <a href="#32741" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32365" title="(newItem: SpecializedLiftActor.this.MailboxItem)SpecializedLiftActor.this.MailboxItem">insertBefore</a><span class="delimiter">(</span><span title="SpecializedLiftActor.this.MailboxItem" class="keyword">new</span> <a href="#29498" title="SpecializedLiftActor.this.MailboxItem">MailboxItem</a><span class="delimiter">(</span><a href="#32742" title="T">msg</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#29495" title="List[T]">msgList</a> = <span title="object Nil">Nil</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <a href="#32743" title="()Unit" class="delimiter">{</a>
        <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
          <a href="#32672" title="()Unit">putListIntoMB</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

            <span class="keyword">var</span> <a title="Boolean" id="32744">keepOnDoingHighPriory</a> = <span title="Boolean(true)" class="keyword">true</span>

            <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#32744" title="Boolean">keepOnDoingHighPriory</a><span class="delimiter">)</span> <a href="#32746" title="()Unit" class="delimiter">{</a>
              <span class="keyword">val</span> <a title="net.liftweb.common.Box[PartialFunction[T,Unit]]" id="32750">hiPriPfBox</a> = <a href="#29513" title="=&gt; net.liftweb.common.Box[PartialFunction[T,Unit]]">highPriorityReceive</a>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#32750" title="net.liftweb.common.Box[PartialFunction[T,Unit]]">hiPriPfBox</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="PartialFunction[T,Unit]" id="32755">hiPriPf</a> = <a href="#32750" title="net.liftweb.common.Box[PartialFunction[T,Unit]]">hiPriPfBox</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; PartialFunction[T,Unit]">open_!</a>
                <a href="#29500" title="(start: SpecializedLiftActor.this.MailboxItem, f: SpecializedLiftActor.this.MailboxItem =&gt; Boolean)net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]">findMailboxItem</a><span class="delimiter">(</span><a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>, <a title="SpecializedLiftActor.this.MailboxItem" id="32759">mb</a> =&gt; <a href="#29510" title="(f: T =&gt; Boolean)(v: T)Boolean">testTranslate</a><span class="delimiter">(</span><a href="#32755" title="PartialFunction[T,Unit]">hiPriPf</a>.<a href="#32765" title="(x: T)Boolean">isDefinedAt</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#32759" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32432" title="=&gt; T">item</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Unit">Full</span><span class="delimiter">(</span><a title="SpecializedLiftActor.this.MailboxItem" id="32767">mb</a><span class="delimiter">)</span> =&gt;
                    <a href="#32767" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32363" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="keyword">try</span> <span class="delimiter">{</span>
                      <a href="#29511" title="(f: T =&gt; Unit)(v: T)Unit">execTranslate</a><span class="delimiter">(</span><a href="#32755" title="PartialFunction[T,Unit]">hiPriPf</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#32767" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32432" title="=&gt; T">item</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <a title="Unit" id="32771">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#32671" title="PartialFunction[Throwable,Unit]">eh</a>.<span title="(x: Throwable)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#32771" title="Exception">e</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#32671" title="(v1: Throwable)Unit">eh</a><span class="delimiter">(</span><a href="#32771" title="Exception">e</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
                    <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
                      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#29495" title="List[T]">msgList</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                        <a href="#32744" title="Boolean">keepOnDoingHighPriory</a> = <span title="Boolean(false)" class="keyword">false</span>
                      <span class="delimiter">}</span>
                      <span class="keyword">else</span> <span class="delimiter">{</span>
                        <a href="#32672" title="()Unit">putListIntoMB</a><span class="delimiter">(</span><span class="delimiter">)</span>
                      <span class="delimiter">}</span>
                    <span class="delimiter">}</span>
                <span class="delimiter">}</span> <span class="delimiter">}</span>
              <span class="keyword">else</span> <span class="delimiter">{</span><a href="#32744" title="Boolean">keepOnDoingHighPriory</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">}</span>
            <span class="delimiter">}</span>

            <span class="keyword">val</span> <a title="PartialFunction[T,Unit]" id="32745">pf</a> = <a href="#29512" title="=&gt; PartialFunction[T,Unit]">messageHandler</a>

        <a href="#29500" title="(start: SpecializedLiftActor.this.MailboxItem, f: SpecializedLiftActor.this.MailboxItem =&gt; Boolean)net.liftweb.common.Box[SpecializedLiftActor.this.MailboxItem]">findMailboxItem</a><span class="delimiter">(</span><a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<a href="#32358" title="=&gt; SpecializedLiftActor.this.MailboxItem">next</a>, <a title="SpecializedLiftActor.this.MailboxItem" id="32781">mb</a> =&gt; <a href="#29510" title="(f: T =&gt; Boolean)(v: T)Boolean">testTranslate</a><span class="delimiter">(</span><a href="#32745" title="PartialFunction[T,Unit]">pf</a>.<a href="#32784" title="(x: T)Boolean">isDefinedAt</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#32781" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32432" title="=&gt; T">item</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Full</span><span class="delimiter">(</span><a title="SpecializedLiftActor.this.MailboxItem" id="32786">mb</a><span class="delimiter">)</span> =&gt;
            <a href="#32786" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32363" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">try</span> <span class="delimiter">{</span>
              <a href="#29511" title="(f: T =&gt; Unit)(v: T)Unit">execTranslate</a><span class="delimiter">(</span><a href="#32745" title="PartialFunction[T,Unit]">pf</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#32786" title="SpecializedLiftActor.this.MailboxItem">mb</a>.<a href="#32432" title="=&gt; T">item</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a title="Unit" id="32787">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#32671" title="PartialFunction[Throwable,Unit]">eh</a>.<span title="(x: Throwable)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#32787" title="Exception">e</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#32671" title="(v1: Throwable)Unit">eh</a><span class="delimiter">(</span><a href="#32787" title="Exception">e</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
            <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#29495" title="List[T]">msgList</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#29493" title="Boolean">processing</a> = <span title="Boolean(false)" class="keyword">false</span>
                <a href="#32670" title="Boolean">clearProcessing</a> = <span title="Boolean(false)" class="keyword">false</span>
                <span title="Nothing" class="keyword">return</span>
              <span class="delimiter">}</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <a href="#32672" title="()Unit">putListIntoMB</a><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="32793">e</a> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#32671" title="PartialFunction[Throwable,Unit]">eh</a>.<span title="(x: Throwable)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#32793" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#32671" title="(v1: Throwable)Unit">eh</a><span class="delimiter">(</span><a href="#32793" title="java.lang.Throwable">e</a><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <a href="#32793" title="java.lang.Throwable">e</a>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#32670" title="Boolean">clearProcessing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#29494" title="SpecializedLiftActor.this.MailboxItem">baseMailbox</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
          <a href="#29493" title="Boolean">processing</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(f: T =&gt; Boolean)(v: T)Boolean" id="29510">testTranslate</a><span class="delimiter">(</span><a title="T =&gt; Boolean" id="32760">f</a>: T =&gt; Boolean<span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="32761">v</a>: <a href="#10552" title="T">T</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#32760" title="(v1: T)Boolean">f</a><span class="delimiter">(</span><a href="#32761" title="T">v</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(f: T =&gt; Unit)(v: T)Unit" id="29511">execTranslate</a><span class="delimiter">(</span><a title="T =&gt; Unit" id="32768">f</a>: T =&gt; Unit<span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="32769">v</a>: <a href="#10552" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#32768" title="(v1: T)Unit">f</a><span class="delimiter">(</span><a href="#32769" title="T">v</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[T,Unit]" id="29512">messageHandler</a>: <span title="PartialFunction[T,Unit]">PartialFunction</span><span class="delimiter">[</span>T, Unit<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[PartialFunction[T,Unit]]" id="29513">highPriorityReceive</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[PartialFunction[T,Unit]]">Box</a><span class="delimiter">[</span>PartialFunction<span class="delimiter">[</span>T, Unit<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Throwable,Unit]" id="29514">exceptionHandler</a>: <span title="PartialFunction[Throwable,Unit]">PartialFunction</span><span class="delimiter">[</span>Throwable, Unit<span class="delimiter">]</span> = <a href="#32800" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Unit" id="32801">e</a> =&gt; <a href="#10553" title="object net.liftweb.actor.ActorLogger">ActorLogger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31961" title="(msg: =&gt; AnyRef, t: Throwable)Unit">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Actor threw an exception&quot;)" class="string">&quot;Actor threw an exception&quot;</span>, <a href="#32801" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.actor.ActorLogger" id="10553">ActorLogger</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../common/net/liftweb/common/Logging.scala.html#10715" title="net.liftweb.common.Logger">Logger</a> <span class="delimiter">{</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class MsgWithResp extends java.lang.Object with ScalaObject with Product with Serializable" id="35422">MsgWithResp</a><a href="#35422" title="ScalaObject" class="delimiter">(</a><a title="Any" id="32931">msg</a>: <span title="Any">Any</span>, <a title="net.liftweb.actor.LAFuture[Any]" id="32932">future</a>: <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>

<span class="keyword">trait</span> <a title="trait LiftActor extends java.lang.Object with net.liftweb.actor.SpecializedLiftActor[Any] with net.liftweb.common.GenericActor[Any] with net.liftweb.common.ForwardableActor[Any,Any] with ScalaObject" id="10558">LiftActor</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#10551" title="net.liftweb.actor.SpecializedLiftActor[Any]">SpecializedLiftActor</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
<span class="keyword">with</span> <a href="../../../../common/net/liftweb/common/SimpleActor.scala.html#10737" title="net.liftweb.common.GenericActor[Any]">GenericActor</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
<span class="keyword">with</span> <a href="../../../../common/net/liftweb/common/SimpleActor.scala.html#10740" title="net.liftweb.common.ForwardableActor[Any,Any]">ForwardableActor</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span> <span class="delimiter">{</span>
  @volatile
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="net.liftweb.actor.LAFuture[Any]" id="32897">responseFuture</a>: <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>



  <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(msg: Any, forwardTo: net.liftweb.common.TypedActor[Any,Any])Unit" id="32898">forwardMessageTo</a><span class="delimiter">(</span><a title="Any" id="32921">msg</a>: <span title="Any">Any</span>, <a title="net.liftweb.common.TypedActor[Any,Any]" id="32922">forwardTo</a>: <a href="../../../../common/net/liftweb/common/SimpleActor.scala.html#10734" title="net.liftweb.common.TypedActor[Any,Any]">TypedActor</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#32897" title="net.liftweb.actor.LAFuture[Any]">responseFuture</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#32922" title="net.liftweb.common.TypedActor[Any,Any]">forwardTo</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="32928">la</a>: <a href="#10558" title="net.liftweb.actor.LiftActor">LiftActor</a> =&gt; <a href="#32928" title="net.liftweb.actor.LiftActor">la</a> <a href="#29502" title="(msg: Any)Unit">!</a> <a href="#35422" title="(msg: Any, future: net.liftweb.actor.LAFuture[Any])net.liftweb.actor.MsgWithResp">MsgWithResp</a><span class="delimiter">(</span><a href="#32921" title="Any">msg</a>, <a href="#32897" title="net.liftweb.actor.LAFuture[Any]">responseFuture</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="32938">other</a> =&gt;
          <a href="#32909" title="(v: Any)Unit">reply</a><span class="delimiter">(</span><a href="#32938" title="net.liftweb.common.TypedActor[Any,Any]">other</a> <a href="../../../../common/net/liftweb/common/SimpleActor.scala.html#32911" title="(param: Any)Any">!?</a> <a href="#32921" title="Any">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#32922" title="net.liftweb.common.TypedActor[Any,Any]">forwardTo</a> <a href="../../../../common/net/liftweb/common/SimpleActor.scala.html#29491" title="(param: Any)Unit">!</a> <a href="#32921" title="Any">msg</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Send a message to the Actor and get an LAFuture
  * that will contain the reply (if any) from the message.
  * This method calls !&amp;lt; and is here for Java compatibility
  */</span>
  <span class="keyword">def</span> <a title="(msg: Any)net.liftweb.actor.LAFuture[Any]" id="32899">sendAndGetFuture</a><span class="delimiter">(</span><a title="Any" id="32952">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#32900" title="(msg: Any)net.liftweb.actor.LAFuture[Any]">!&lt;</a> <a href="#32952" title="Any">msg</a>

  <span class="comment">/**
  * Send a message to the Actor and get an LAFuture
  * that will contain the reply (if any) from the message
  */</span>
  <span class="keyword">def</span> <a title="(msg: Any)net.liftweb.actor.LAFuture[Any]" id="32900">!&lt;</a><span class="delimiter">(</span><a title="Any" id="32954">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.actor.LAFuture[Any]" id="32956">future</a> = <span title="net.liftweb.actor.LAFuture[Any]" class="keyword">new</span> <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
    <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#29502" title="(msg: Any)Unit">!</a> <a href="#35422" title="(msg: Any, future: net.liftweb.actor.LAFuture[Any])net.liftweb.actor.MsgWithResp">MsgWithResp</a><span class="delimiter">(</span><a href="#32954" title="Any">msg</a>, <a href="#32956" title="net.liftweb.actor.LAFuture[Any]">future</a><span class="delimiter">)</span>
    <a href="#32956" title="net.liftweb.actor.LAFuture[Any]">future</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Send a message to the Actor and wait for
  * the actor to process the message and reply.
  * This method is the Java callable version of !?.
  */</span>
  <span class="keyword">def</span> <a title="(msg: Any)Any" id="32901">sendAndGetReply</a><span class="delimiter">(</span><a title="Any" id="32959">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#32902" title="(msg: Any)Any">!?</a> <a href="#32959" title="Any">msg</a>
  
  <span class="comment">/**
  * Send a message to the Actor and wait for
  * the actor to process the message and reply.
  */</span>
  <span class="keyword">def</span> <a title="(msg: Any)Any" id="32902">!?</a><span class="delimiter">(</span><a title="Any" id="32961">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.actor.LAFuture[Any]" id="32971">future</a> = <span title="net.liftweb.actor.LAFuture[Any]" class="keyword">new</span> <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
    <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#29502" title="(msg: Any)Unit">!</a> <a href="#35422" title="(msg: Any, future: net.liftweb.actor.LAFuture[Any])net.liftweb.actor.MsgWithResp">MsgWithResp</a><span class="delimiter">(</span><a href="#32961" title="Any">msg</a>, <a href="#32971" title="net.liftweb.actor.LAFuture[Any]">future</a><span class="delimiter">)</span>
    <a href="#32971" title="net.liftweb.actor.LAFuture[Any]">future</a>.<a href="LAFuture.scala.html#15445" title="=&gt; Any">get</a>
  <span class="delimiter">}</span>


  <span class="comment">/**
  * Send a message to the Actor and wait for
  * up to timeout milliseconds for
  * the actor to process the message and reply.
  * This method is the Java callable version of !?.
  */</span>
  <span class="keyword">def</span> <a title="(timeout: Long, msg: Any)Any" id="32903">sendAndGetReply</a><span class="delimiter">(</span><a title="Long" id="32974">timeout</a>: <span title="Long">Long</span>, <a title="Any" id="32975">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <a href="#10558" title="LiftActor.this.type" class="keyword">this</a>.<a href="#32904" title="(timeout: Long, message: Any)net.liftweb.common.Box[Any]">!?</a><span class="delimiter">(</span><a href="#32974" title="Long">timeout</a>, <a href="#32975" title="Any">msg</a><span class="delimiter">)</span>

  <span class="comment">/**
  * Send a message to the Actor and wait for
  * up to timeout milliseconds for
  * the actor to process the message and reply.
  */</span>
  <span class="keyword">def</span> <a title="(timeout: Long, message: Any)net.liftweb.common.Box[Any]" id="32904">!?</a><span class="delimiter">(</span><a title="Long" id="32965">timeout</a>: <span title="Long">Long</span>, <a title="Any" id="32966">message</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Any]">Box</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> =
    <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#32905" title="(msg: Any, timeout: Long)net.liftweb.common.Box[Any]">!!</a> <span class="delimiter">(</span><a href="#32966" title="Any">message</a>, <a href="#32965" title="Long">timeout</a><span class="delimiter">)</span>


    <span class="comment">/**
    * Send a message to the Actor and wait for
    * up to timeout milliseconds for
    * the actor to process the message and reply.
    */</span>
  <span class="keyword">def</span> <a title="(msg: Any, timeout: Long)net.liftweb.common.Box[Any]" id="32905">!!</a><span class="delimiter">(</span><a title="Any" id="32985">msg</a>: <span title="Any">Any</span>, <a title="Long" id="32986">timeout</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Any]">Box</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.actor.LAFuture[Any]" id="32998">future</a> = <span title="net.liftweb.actor.LAFuture[Any]" class="keyword">new</span> <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
    <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#29502" title="(msg: Any)Unit">!</a> <a href="#35422" title="(msg: Any, future: net.liftweb.actor.LAFuture[Any])net.liftweb.actor.MsgWithResp">MsgWithResp</a><span class="delimiter">(</span><a href="#32985" title="Any">msg</a>, <a href="#32998" title="net.liftweb.actor.LAFuture[Any]">future</a><span class="delimiter">)</span>
    <a href="#32998" title="net.liftweb.actor.LAFuture[Any]">future</a>.<a href="LAFuture.scala.html#15447" title="(timeout: Long)net.liftweb.common.Box[Any]">get</a><span class="delimiter">(</span><a href="#32986" title="Long">timeout</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Send a message to the Actor and wait for
  * the actor to process the message and reply.
  */</span>
  <span class="keyword">def</span> <a title="(msg: Any)net.liftweb.common.Box[Any]" id="32906">!!</a><span class="delimiter">(</span><a title="Any" id="32992">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Any]">Box</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.actor.LAFuture[Any]" id="33001">future</a> = <span title="net.liftweb.actor.LAFuture[Any]" class="keyword">new</span> <a href="LAFuture.scala.html#10526" title="net.liftweb.actor.LAFuture[Any]">LAFuture</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
    <a href="#10558" title="LiftActor.this.type" class="keyword">this</a> <a href="#29502" title="(msg: Any)Unit">!</a> <a href="#35422" title="(msg: Any, future: net.liftweb.actor.LAFuture[Any])net.liftweb.actor.MsgWithResp">MsgWithResp</a><span class="delimiter">(</span><a href="#32992" title="Any">msg</a>, <a href="#33001" title="net.liftweb.actor.LAFuture[Any]">future</a><span class="delimiter">)</span>
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Any)net.liftweb.common.Full[Any]">Full</a><span class="delimiter">(</span><a href="#33001" title="net.liftweb.actor.LAFuture[Any]">future</a>.<a href="LAFuture.scala.html#15445" title="=&gt; Any">get</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(f: Any =&gt; Boolean)(v: Any)Boolean" id="32907">testTranslate</a><span class="delimiter">(</span><a title="Any =&gt; Boolean" id="33007">f</a>: Any =&gt; Boolean<span class="delimiter">)</span><span class="delimiter">(</span><a title="Any" id="33008">v</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#33008" title="Any">v</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Boolean">MsgWithResp</span><span class="delimiter">(</span><a title="Any" id="33013">msg</a>, _<span class="delimiter">)</span> =&gt; <a href="#33007" title="(v1: Any)Boolean">f</a><span class="delimiter">(</span><a href="#33013" title="Any">msg</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Boolean" id="33015">v</a> =&gt; <a href="#33007" title="(v1: Any)Boolean">f</a><span class="delimiter">(</span><a href="#33015" title="Any">v</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(f: Any =&gt; Unit)(v: Any)Unit" id="32908">execTranslate</a><span class="delimiter">(</span><a title="Any =&gt; Unit" id="33016">f</a>: Any =&gt; Unit<span class="delimiter">)</span><span class="delimiter">(</span><a title="Any" id="33017">v</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#33017" title="Any">v</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Unit">MsgWithResp</span><span class="delimiter">(</span><a title="Any" id="33022">msg</a>, <a title="net.liftweb.actor.LAFuture[Any]" id="33023">future</a><span class="delimiter">)</span> =&gt;
      <a href="#32897" title="net.liftweb.actor.LAFuture[Any]">responseFuture</a> = <a href="#33023" title="net.liftweb.actor.LAFuture[Any]">future</a>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#33016" title="(v1: Any)Unit">f</a><span class="delimiter">(</span><a href="#33022" title="Any">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
        <a href="#32897" title="net.liftweb.actor.LAFuture[Any]">responseFuture</a> = <span title="Null(null)" class="keyword">null</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <a title="Unit" id="33025">v</a> =&gt; <a href="#33016" title="(v1: Any)Unit">f</a><span class="delimiter">(</span><a href="#33025" title="Any">v</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * The Actor should call this method with a reply
  * to the message
  */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(v: Any)Unit" id="32909">reply</a><span class="delimiter">(</span><a title="Any" id="32939">v</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#32897" title="net.liftweb.actor.LAFuture[Any]">responseFuture</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#32897" title="net.liftweb.actor.LAFuture[Any]">responseFuture</a>.<a href="LAFuture.scala.html#15444" title="(value: Any)Unit">satisfy</a><span class="delimiter">(</span><a href="#32939" title="Any">v</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">import</span> java.lang.reflect._

<span class="keyword">object</span> <a title="object net.liftweb.actor.LiftActorJ" id="10560">LiftActorJ</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Map[Class[_],net.liftweb.actor.DispatchVendor]" id="33029">methods</a>: <span title="Map[Class[_],net.liftweb.actor.DispatchVendor]">Map</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, DispatchVendor<span class="delimiter">]</span> = <span title="(elems: (Class[_], Nothing)*)scala.collection.immutable.Map[Class[_],Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(what: net.liftweb.actor.LiftActorJ)PartialFunction[Any,Unit]" id="33031">calculateHandler</a><span class="delimiter">(</span><a title="net.liftweb.actor.LiftActorJ" id="33330">what</a>: <a href="#10563" title="net.liftweb.actor.LiftActorJ">LiftActorJ</a><span class="delimiter">)</span>: <span title="PartialFunction[Any,Unit]">PartialFunction</span><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span> = 
    <span title="(x$1: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">synchronized</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.Class[_ &lt;: net.liftweb.actor.LiftActorJ]" id="33334">clz</a> = <a href="#33330" title="net.liftweb.actor.LiftActorJ">what</a>.<span title="()java.lang.Class[_]">getClass</span>
      <a href="#33029" title="=&gt; Map[Class[_],net.liftweb.actor.DispatchVendor]">methods</a>.<span title="(key: Class[_])Option[net.liftweb.actor.DispatchVendor]">get</span><span class="delimiter">(</span><a href="#33334" title="java.lang.Class[_ &lt;: net.liftweb.actor.LiftActorJ]">clz</a><span class="delimiter">)</span> <span title="PartialFunction[Any,Unit]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="PartialFunction[Any,Unit]">Some</span><span class="delimiter">(</span><a title="net.liftweb.actor.DispatchVendor" id="33659">pf</a><span class="delimiter">)</span> =&gt; <a href="#33659" title="net.liftweb.actor.DispatchVendor">pf</a>.<a href="#33259" title="(actor: net.liftweb.actor.LiftActorJ)PartialFunction[Any,Unit]">vend</a><span class="delimiter">(</span><a href="#33330" title="net.liftweb.actor.LiftActorJ">what</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="PartialFunction[Any,Unit]">_</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="net.liftweb.actor.DispatchVendor" id="33660">pf</a> = <a href="#33034" title="(clz: Class[_])net.liftweb.actor.DispatchVendor">buildPF</a><span class="delimiter">(</span><a href="#33334" title="java.lang.Class[_ &lt;: net.liftweb.actor.LiftActorJ]">clz</a><span class="delimiter">)</span>
          <a href="#33029" title="(x$1: Map[Class[_],net.liftweb.actor.DispatchVendor])Unit">methods</a> <span title="(kv: (Class[_], net.liftweb.actor.DispatchVendor))scala.collection.immutable.Map[Class[_],net.liftweb.actor.DispatchVendor]">+=</span> <a href="#33334" title="(x: java.lang.Class[?0])ArrowAssoc[java.lang.Class[?0]]">clz</a> <span title="(y: net.liftweb.actor.DispatchVendor)(java.lang.Class[?0], net.liftweb.actor.DispatchVendor)">-&gt;</span> <a href="#33660" title="net.liftweb.actor.DispatchVendor">pf</a>
          <a href="#33660" title="net.liftweb.actor.DispatchVendor">pf</a>.<a href="#33259" title="(actor: net.liftweb.actor.LiftActorJ)PartialFunction[Any,Unit]">vend</a><span class="delimiter">(</span><a href="#33330" title="net.liftweb.actor.LiftActorJ">what</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clz: Class[_])List[Class[_]]" id="33032">getBaseClasses</a><span class="delimiter">(</span><a title="Class[_]" id="34040">clz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Class[_]]">List</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#34040" title="Class[_]">clz</a> <span title="List[Class[_]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type" class="keyword">null</span> =&gt; <span title="object Nil">Nil</span>
    <span class="keyword">case</span> <a title="List[Class[_]]" id="34051">clz</a> =&gt; <a href="#34051" title="Class[_$2]">clz</a> <a href="#34052" title="(x: Class[_])List[Class[_]]">::</a> <a href="#33032" title="(clz: Class[_])List[Class[_]]">getBaseClasses</a><span class="delimiter">(</span><a href="#34051" title="Class[_$2]">clz</a>.<span title="()java.lang.Class[_ &gt;: _$2]">getSuperclass</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(in: java.lang.reflect.Method)Boolean" id="33033">receiver</a><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="34072">in</a>: <span title="java.lang.reflect.Method">Method</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#34072" title="java.lang.reflect.Method">in</a>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <span class="delimiter">(</span><a href="#34072" title="java.lang.reflect.Method">in</a>.<span title="(x$1: java.lang.Class[net.liftweb.actor.JavaActorBase.Receive])net.liftweb.actor.JavaActorBase.Receive">getAnnotation</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[net.liftweb.actor.JavaActorBase.Receive](classOf[net.liftweb.actor.JavaActorBase$$Receive])" class="delimiter">[</span>JavaActorBase.Receive<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clz: Class[_])net.liftweb.actor.DispatchVendor" id="33034">buildPF</a><span class="delimiter">(</span><a title="Class[_]" id="33661">clz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10562" title="net.liftweb.actor.DispatchVendor">DispatchVendor</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[java.lang.reflect.Method]" id="34197">methods</a> = <a href="#33032" title="(clz: Class[_])List[Class[_]]">getBaseClasses</a><span class="delimiter">(</span><a href="#33661" title="Class[_]">clz</a><span class="delimiter">)</span>.
    <span title="(f: Class[_] =&gt; scala.collection.GenTraversableOnce[java.lang.reflect.Method])(implicit bf: scala.collection.generic.CanBuildFrom[List[Class[_]],java.lang.reflect.Method,List[java.lang.reflect.Method]])List[java.lang.reflect.Method]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.reflect.Method,List[java.lang.reflect.Method]]" class="delimiter">(</span><a href="#34232" title="Class[_]">_</a>.<span title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getDeclaredMethods</span>.<span title="=&gt; List[java.lang.reflect.Method]">toList</span>.<span title="(p: java.lang.reflect.Method =&gt; Boolean)List[java.lang.reflect.Method]">filter</span><span class="delimiter">(</span><a href="#33033" title="(in: java.lang.reflect.Method)Boolean">receiver</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Map[Class[_],java.lang.reflect.Method]" id="34198">clzMap</a>: <span title="Map[Class[_],java.lang.reflect.Method]">Map</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Method<span class="delimiter">]</span> = 
      <span title="(elems: (Class[_], java.lang.reflect.Method)*)scala.collection.immutable.Map[Class[_],java.lang.reflect.Method]">Map</span><span class="delimiter">(</span><a href="#34197" title="List[java.lang.reflect.Method]">methods</a>.<span title="(f: java.lang.reflect.Method =&gt; (java.lang.Class[?0], java.lang.reflect.Method) forSome { type ?0 })(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.reflect.Method],(java.lang.Class[?0], java.lang.reflect.Method) forSome { type ?0 },List[(java.lang.Class[?0], java.lang.reflect.Method) forSome { type ?0 }]])List[(java.lang.Class[?0], java.lang.reflect.Method) forSome { type ?0 }]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(java.lang.Class[?0], java.lang.reflect.Method) forSome { type ?0 },List[(java.lang.Class[?0], java.lang.reflect.Method) forSome { type ?0 }]]" class="delimiter">{</span><a title="java.lang.reflect.Method" id="34781">m</a> =&gt; 
        <a href="#34781" title="java.lang.reflect.Method">m</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="comment">// access private and protected methods</span>
        <a href="#34781" title="java.lang.reflect.Method">m</a>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(i: Int)java.lang.Class[_]">apply</span><span title="(x: java.lang.Class[?0])ArrowAssoc[java.lang.Class[?0]]" class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(y: java.lang.reflect.Method)(java.lang.Class[?0], java.lang.reflect.Method)">-&gt;</span> <a href="#34781" title="java.lang.reflect.Method">m</a><span class="delimiter">}</span> :_*<span class="delimiter">)</span>

    <span title="net.liftweb.actor.DispatchVendor" class="keyword">new</span> <a href="#10562" title="net.liftweb.actor.DispatchVendor">DispatchVendor</a><span class="delimiter">(</span><a href="#34198" title="Map[Class[_],java.lang.reflect.Method]">clzMap</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class DispatchVendor extends java.lang.Object with ScalaObject" id="10562">DispatchVendor</a><a href="#10562" title="ScalaObject" class="delimiter">(</a><a title="Map[Class[_],java.lang.reflect.Method]" id="34842">map</a>: <span title="Map[Class[_],java.lang.reflect.Method]">Map</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Method<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Map[Class[_],Option[java.lang.reflect.Method]]" id="33257">baseMap</a>: <span title="Map[Class[_],Option[java.lang.reflect.Method]]">Map</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span><span class="delimiter">]</span> = 
    <span title="(elems: (Class[_], Some[java.lang.reflect.Method])*)scala.collection.immutable.Map[Class[_],Some[java.lang.reflect.Method]]">Map</span><span class="delimiter">(</span><a href="#34842" title="Map[Class[_],java.lang.reflect.Method]">map</a>.<span title="(f: (Class[_], java.lang.reflect.Method) =&gt; (java.lang.Class[_0], Some[java.lang.reflect.Method]) forSome { type _0 })(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[Class[_],java.lang.reflect.Method],(java.lang.Class[_0], Some[java.lang.reflect.Method]) forSome { type _0 },scala.collection.immutable.Iterable[(java.lang.Class[_0], Some[java.lang.reflect.Method]) forSome { type _0 }]])scala.collection.immutable.Iterable[(java.lang.Class[_0], Some[java.lang.reflect.Method]) forSome { type _0 }]">map</span><a href="#34886" title="(java.lang.Class[_0], Some[java.lang.reflect.Method])" class="delimiter">{</a><span class="keyword">case</span> <span title="(java.lang.Class[_0], Some[java.lang.reflect.Method])" class="delimiter">(</span><a title="java.lang.Class[_]" id="34889">k</a>,<a title="java.lang.reflect.Method" id="34897">v</a><span class="delimiter">)</span> =&gt; <span title="(_1: java.lang.Class[_0], _2: Some[java.lang.reflect.Method])(java.lang.Class[_0], Some[java.lang.reflect.Method])" class="delimiter">(</span><a href="#34889" title="java.lang.Class[_]">k</a>, <span title="(x: java.lang.reflect.Method)Some[java.lang.reflect.Method]">Some</span><span class="delimiter">(</span><a href="#34897" title="java.lang.reflect.Method">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span>.<span title="=&gt; List[(java.lang.Class[_0], Some[java.lang.reflect.Method]) forSome { type _0 }]">toList</span> :_*<span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(actor: net.liftweb.actor.LiftActorJ)PartialFunction[Any,Unit]" id="33259">vend</a><span class="delimiter">(</span><a title="net.liftweb.actor.LiftActorJ" id="33262">actor</a>: <a href="#10563" title="net.liftweb.actor.LiftActorJ">LiftActorJ</a><span class="delimiter">)</span>: <span title="PartialFunction[Any,Unit]">PartialFunction</span><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span> =
    <a href="#35124" title="java.lang.Object with PartialFunction[Any,Unit]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with PartialFunction[Any,Unit]" id="35124">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Map[Class[_],Option[java.lang.reflect.Method]]" id="35133">theMap</a>: <span title="Map[Class[_],Option[java.lang.reflect.Method]]">Map</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#33257" title="=&gt; Map[Class[_],Option[java.lang.reflect.Method]]">baseMap</a>

      <span class="keyword">def</span> <a title="(clz: Class[_])Option[java.lang.reflect.Method]" id="35135">findClass</a><span class="delimiter">(</span><a title="Class[_]" id="35164">clz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[java.lang.reflect.Method]">Option</span><span class="delimiter">[</span>Method<span class="delimiter">]</span> = 
        <a href="#35133" title="=&gt; Map[Class[_],Option[java.lang.reflect.Method]]">theMap</a>.<span title="(p: (Class[_], Option[java.lang.reflect.Method]) =&gt; Boolean)Option[(Class[_], Option[java.lang.reflect.Method])]">find</span><span class="delimiter">(</span><a href="#35190" title="(Class[_], Option[java.lang.reflect.Method])">_</a>.<span title="=&gt; Class[_]">_1</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#35164" title="Class[_]">clz</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: (Class[_], Option[java.lang.reflect.Method]) =&gt; Option[java.lang.reflect.Method])Option[java.lang.reflect.Method]">flatMap</span><span class="delimiter">(</span><a href="#35197" title="(Class[_], Option[java.lang.reflect.Method])">_</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_2</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(v: Any)Boolean" id="35136">isDefinedAt</a><span class="delimiter">(</span><a title="Any" id="35138">v</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.Class[_ &lt;: java.lang.Object]" id="35199">clz</a> = <a href="#35138" title="Any">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.Object" class="delimiter">[</span><span title="java.lang.Object">Object</span><span class="delimiter">]</span>.<span title="()java.lang.Class[_]">getClass</span>
        <a href="#35133" title="=&gt; Map[Class[_],Option[java.lang.reflect.Method]]">theMap</a>.<span title="(key: Class[_])Option[Option[java.lang.reflect.Method]]">get</span><span class="delimiter">(</span><a href="#35199" title="java.lang.Class[_ &lt;: java.lang.Object]">clz</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Boolean(true)">Some</span><span class="delimiter">(</span>Some<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
          <span class="keyword">case</span> <span title="Boolean">None</span> =&gt; <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Option[java.lang.reflect.Method]" id="35215">answer</a> = <a href="#35135" title="(clz: Class[_])Option[java.lang.reflect.Method]">findClass</a><span class="delimiter">(</span><a href="#35199" title="java.lang.Class[_ &lt;: java.lang.Object]">clz</a><span class="delimiter">)</span>
            <a href="#35133" title="(x$1: Map[Class[_],Option[java.lang.reflect.Method]])Unit">theMap</a> <span title="(kv: (Class[_], Option[java.lang.reflect.Method]))scala.collection.immutable.Map[Class[_],Option[java.lang.reflect.Method]]">+=</span> <a href="#35199" title="(x: java.lang.Class[?0])ArrowAssoc[java.lang.Class[?0]]">clz</a> <span title="(y: Option[java.lang.reflect.Method])(java.lang.Class[?0], Option[java.lang.reflect.Method])">-&gt;</span> <a href="#35215" title="Option[java.lang.reflect.Method]">answer</a>
            <a href="#35215" title="Option[java.lang.reflect.Method]">answer</a>.<span title="=&gt; Boolean">isDefined</span>
          <span class="delimiter">}</span>
          <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(v: Any)Unit" id="35137">apply</a><span class="delimiter">(</span><a title="Any" id="35141">v</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.Object" id="35336">o</a>: <span title="java.lang.Object">Object</span> = <a href="#35141" title="Any">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.Object" class="delimiter">[</span><span title="java.lang.Object">Object</span><span class="delimiter">]</span>
        <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="35337">meth</a> = <a href="#35133" title="(key: Class[_])Option[java.lang.reflect.Method]">theMap</a><span class="delimiter">(</span><a href="#35336" title="java.lang.Object">o</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span>.<span title="=&gt; java.lang.reflect.Method">get</span>
        <a href="#35337" title="java.lang.reflect.Method">meth</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><a href="#33262" title="net.liftweb.actor.LiftActorJ">actor</a>, <a href="#35336" title="java.lang.Object">o</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit" class="keyword">null</span> =&gt; 
          <span class="keyword">case</span> <a title="Unit" id="35358">x</a> =&gt; <a href="#33262" title="net.liftweb.actor.LiftActorJ">actor</a>.<a href="#33042" title="(v: Any)Unit">internalReply</a><span class="delimiter">(</span><a href="#35358" title="java.lang.Object">x</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Java versions of Actors should subclass this method.
 * Methods decorated with the @Receive annotation
 * will receive messages of that type.
 */</span>
<span class="keyword">class</span> <a title="class LiftActorJ extends net.liftweb.actor.JavaActorBase with net.liftweb.actor.LiftActor with ScalaObject" id="10563">LiftActorJ</a> <a href="#10563" title="ScalaObject" class="keyword">extends</a> <a href="JavaActorBase.java.html#10167" title="net.liftweb.actor.JavaActorBase">JavaActorBase</a> <span class="keyword">with</span> <a href="#10558" title="net.liftweb.actor.LiftActor">LiftActor</a> <span class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="PartialFunction[Any,Unit]" id="33039">_messageHandler</a>: <span title="PartialFunction[Any,Unit]">PartialFunction</span><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span> =
    <a href="#33040" title="=&gt; PartialFunction[Any,Unit]">calculateJavaMessageHandler</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="33040">calculateJavaMessageHandler</a> = <a href="#10560" title="object net.liftweb.actor.LiftActorJ">LiftActorJ</a>.<a href="#33031" title="(what: net.liftweb.actor.LiftActorJ)PartialFunction[Any,Unit]">calculateHandler</a><span class="delimiter">(</span><a href="#10563" title="net.liftweb.actor.LiftActorJ" class="keyword">this</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="33041">messageHandler</a> = <a href="#33038" title="=&gt; PartialFunction[Any,Unit]">_messageHandler</a>

  <span class="keyword">private</span><span class="delimiter">[</span>actor<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(v: Any)Unit" id="33042">internalReply</a><span class="delimiter">(</span><a title="Any" id="35359">v</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#32909" title="(v: Any)Unit">reply</a><span class="delimiter">(</span><a href="#35359" title="Any">v</a><span class="delimiter">)</span>  
<span class="delimiter">}</span>

        </pre>
    </body>
</html>