<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>mongodb-record/net/liftweb/mongodb/record/field/MongoMapField.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2010-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> mongodb
<span class="keyword">package</span> record
<span class="keyword">package</span> field

<span class="keyword">import</span> scala.xml.NodeSeq

<span class="keyword">import</span> net.liftweb.common.<span class="delimiter">{</span>Box, Empty, Failure, Full<span class="delimiter">}</span>
<span class="keyword">import</span> net.liftweb.http.js.<a href="../../../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#14910" title="object net.liftweb.http.js.JE">JE</a>.<span class="delimiter">{</span>JsNull, JsRaw<span class="delimiter">}</span>
<span class="keyword">import</span> net.liftweb.json.<a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#11132" title="object net.liftweb.json.JsonAST">JsonAST</a>._
<span class="keyword">import</span> net.liftweb.json.<span class="delimiter">{</span>JsonParser, Printer<span class="delimiter">}</span>
<span class="keyword">import</span> net.liftweb.record._
<span class="keyword">import</span> net.liftweb.util.<a href="../../../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.tryo

<span class="keyword">import</span> com.mongodb._

<span class="keyword">class</span> <a title="class MongoMapField[OwnerType &lt;: net.liftweb.mongodb.record.BsonRecord[OwnerType], MapValueType] extends java.lang.Object with net.liftweb.record.Field[Map[String,MapValueType],OwnerType] with net.liftweb.record.MandatoryTypedField[Map[String,MapValueType]] with net.liftweb.mongodb.record.field.MongoFieldFlavor[Map[String,MapValueType]] with ScalaObject" id="12128">MongoMapField</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: net.liftweb.mongodb.record.BsonRecord[OwnerType]" id="12129">OwnerType</a> &lt;: BsonRecord<span class="delimiter">[</span>OwnerType<span class="delimiter">]</span>, <a title="&gt;: Nothing &lt;: Any" id="12130">MapValueType</a><span class="delimiter">]</span><a href="#12128" title="ScalaObject" class="delimiter">(</a><a title="OwnerType" id="208250">rec</a>: <a href="#12129" title="OwnerType">OwnerType</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../../../../../../record/net/liftweb/record/Field.scala.html#12459" title="net.liftweb.record.Field[Map[String,MapValueType],OwnerType]">Field</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span>, OwnerType<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../../../../../record/net/liftweb/record/Field.scala.html#12455" title="net.liftweb.record.MandatoryTypedField[Map[String,MapValueType]]">MandatoryTypedField</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">with</span> <a href="MongoFieldFlavor.scala.html#12092" title="net.liftweb.mongodb.record.field.MongoFieldFlavor[Map[String,MapValueType]]">MongoFieldFlavor</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#12309" title="object net.liftweb.mongodb.Meta">Meta</a>.<a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199468" title="object net.liftweb.mongodb.Meta.Reflection">Reflection</a>._

  <span class="keyword">def</span> <a title="=&gt; OwnerType" id="208239">owner</a> = <a href="#208250" title="OwnerType">rec</a>

  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Map[java.lang.String,MapValueType]" id="208240">defaultValue</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, MapValueType)*)scala.collection.immutable.Map[String,MapValueType]" class="delimiter">[</span><span title="String">String</span>, <a href="#12130" title="MapValueType">MapValueType</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(in: Any)net.liftweb.common.Box[Map[String,MapValueType]]" id="208241">setFromAny</a><span class="delimiter">(</span><a title="Any" id="208258">in</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Map[String,MapValueType]]">Box</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#208258" title="Any">in</a> <span title="net.liftweb.common.Box[Map[String,MapValueType]]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[Map[String,MapValueType]]" id="208260">dbo</a>: <span title="com.mongodb.DBObject">DBObject</span> =&gt; <a href="#208247" title="(dbo: com.mongodb.DBObject)net.liftweb.common.Box[Map[String,MapValueType]]">setFromDBObject</a><span class="delimiter">(</span><a href="#208260" title="com.mongodb.DBObject">dbo</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[MongoMapField.this.MyType]" id="208263">map</a>: <span title="Map[String,MapValueType]">Map</span><span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Map[String,MapValueType])net.liftweb.common.Full[Map[String,MapValueType]]">Full</a><span class="delimiter">(</span><a href="#208263" title="Map[String,MapValueType]">map</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]">Some</span><span class="delimiter">(</span><a title="Map[String,MapValueType]" id="208279">map</a>: <span title="Map[String,MapValueType]">Map</span><span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Map[String,MapValueType])net.liftweb.common.Full[Map[String,MapValueType]]">Full</a><span class="delimiter">(</span><a href="#208279" title="Map[String,MapValueType]">map</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]">Full</span><span class="delimiter">(</span><a title="Map[String,MapValueType]" id="208284">map</a>: <span title="Map[String,MapValueType]">Map</span><span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Map[String,MapValueType])net.liftweb.common.Full[Map[String,MapValueType]]">Full</a><span class="delimiter">(</span><a href="#208284" title="Map[String,MapValueType]">map</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]" class="delimiter">(</span><a title="Map[String,MapValueType]" id="208292">map</a>: <span title="Map[String,MapValueType]">Map</span><span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">)</span> :: _ =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Map[String,MapValueType])net.liftweb.common.Full[Map[String,MapValueType]]">Full</a><span class="delimiter">(</span><a href="#208292" title="Map[String,MapValueType]">map</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[Map[String,MapValueType]]" id="208296">s</a>: <span title="String">String</span> =&gt; <a href="#208243" title="(in: String)net.liftweb.common.Box[Map[String,MapValueType]]">setFromString</a><span class="delimiter">(</span><a href="#208296" title="String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[Map[String,MapValueType]]">Some</span><span class="delimiter">(</span><a title="String" id="208300">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#208243" title="(in: String)net.liftweb.common.Box[Map[String,MapValueType]]">setFromString</a><span class="delimiter">(</span><a href="#208300" title="String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[Map[String,MapValueType]]">Full</span><span class="delimiter">(</span><a title="String" id="208302">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#208243" title="(in: String)net.liftweb.common.Box[Map[String,MapValueType]]">setFromString</a><span class="delimiter">(</span><a href="#208302" title="String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]" class="keyword">null</span>|<span title="object None">None</span>|<a href="../../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../record/net/liftweb/record/Field.scala.html#59141" title="=&gt; net.liftweb.common.Box[MongoMapField.this.MyType]">defaultValueBox</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[MongoMapField.this.MyType]" id="208303">f</a>: <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="#208303" title="net.liftweb.common.Failure">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[Map[String,MapValueType]]" id="208304">o</a> =&gt; <a href="#208243" title="(in: String)net.liftweb.common.Box[Map[String,MapValueType]]">setFromString</a><span class="delimiter">(</span><a href="#208304" title="Any">o</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(jvalue: net.liftweb.json.JsonAST.JValue)net.liftweb.common.Box[MongoMapField.this.MyType]" id="208242">setFromJValue</a><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JValue" id="208305">jvalue</a>: <a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.JsonAST.JValue">JValue</a><span class="delimiter">)</span> = <a href="#208305" title="net.liftweb.json.JsonAST.JValue">jvalue</a> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#48511" title="net.liftweb.common.Box[MongoMapField.this.MyType]">JNothing</a>|<a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#48513" title="object net.liftweb.json.JsonAST.JNull">JNull</a> <span class="keyword">if</span> <a href="../../../../../../record/net/liftweb/record/Field.scala.html#59132" title="=&gt; Boolean">optional_?</a> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]">JObject</span><span class="delimiter">(</span><a title="List[net.liftweb.json.JsonAST.JField]" id="208309">obj</a><span class="delimiter">)</span> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.collection.immutable.Map[String,MapValueType])net.liftweb.common.Full[scala.collection.immutable.Map[String,MapValueType]]">Full</a><span class="delimiter">(</span>
      <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, MapValueType)])scala.collection.immutable.Map[String,MapValueType]">++</span> <a href="#208309" title="List[net.liftweb.json.JsonAST.JField]">obj</a>.<span title="(f: net.liftweb.json.JsonAST.JField =&gt; (String, MapValueType))(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.json.JsonAST.JField],(String, MapValueType),scala.collection.GenTraversableOnce[(String, MapValueType)]])scala.collection.GenTraversableOnce[(String, MapValueType)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(String, MapValueType),List[(String, MapValueType)]]" class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JField" id="208384">jf</a> =&gt; <span title="(_1: String, _2: MapValueType)(String, MapValueType)" class="delimiter">(</span><a href="#208384" title="net.liftweb.json.JsonAST.JField">jf</a>.<a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#50112" title="=&gt; String">name</a>, <a href="#208384" title="net.liftweb.json.JsonAST.JField">jf</a>.<a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#50114" title="=&gt; net.liftweb.json.JsonAST.JValue">value</a>.<a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#50088" title="=&gt; jf.value.Values">values</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="MapValueType" class="delimiter">[</span><a href="#12130" title="MapValueType">MapValueType</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="net.liftweb.common.Box[MongoMapField.this.MyType]" id="208432">other</a> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../record/net/liftweb/record/Field.scala.html#12471" title="object net.liftweb.record.FieldHelpers">FieldHelpers</a>.<a href="../../../../../../record/net/liftweb/record/Field.scala.html#55623" title="(what: String, notA: AnyRef)net.liftweb.common.Failure">expectedA</a><span class="delimiter">(</span><span title="java.lang.String(&quot;JObject&quot;)" class="string">&quot;JObject&quot;</span>, <a href="#208432" title="net.liftweb.json.JsonAST.JValue">other</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(in: String)net.liftweb.common.Box[Map[String,MapValueType]]" id="208243">setFromString</a><span class="delimiter">(</span><a title="String" id="208297">in</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Map[String,MapValueType]]">Box</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="../../../../../../util/net/liftweb/util/ControlHelpers.scala.html#48608" title="(f: =&gt; net.liftweb.json.package.JValue)net.liftweb.common.Box[net.liftweb.json.package.JValue]">tryo</a><span class="delimiter">(</span><a href="../../../../../../json/net/liftweb/json/JsonParser.scala.html#11146" title="object net.liftweb.json.JsonParser">JsonParser</a>.<a href="../../../../../../json/net/liftweb/json/JsonParser.scala.html#54535" title="(s: String)net.liftweb.json.package.JValue">parse</a><span class="delimiter">(</span><a href="#208297" title="String">in</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="net.liftweb.common.Box[Map[String,MapValueType]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Box[MongoMapField.this.MyType]">Full</span><span class="delimiter">(</span><a title="net.liftweb.json.JsonAST.JValue" id="208484">jv</a>: <a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#48510" title="net.liftweb.json.JsonAST.JValue">JValue</a><span class="delimiter">)</span> =&gt; <a href="#208242" title="(jvalue: net.liftweb.json.JsonAST.JValue)net.liftweb.common.Box[MongoMapField.this.MyType]">setFromJValue</a><span class="delimiter">(</span><a href="#208484" title="net.liftweb.json.JsonAST.JValue">jv</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="net.liftweb.common.Box[MongoMapField.this.MyType]" id="208485">f</a>: <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="#208485" title="net.liftweb.common.Failure">f</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="net.liftweb.common.Box[MongoMapField.this.MyType]" id="208486">other</a> =&gt; <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#37829" title="(msg: String)net.liftweb.common.Failure">Failure</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Error parsing String into a JValue: &quot;)" class="string">&quot;Error parsing String into a JValue: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#208297" title="String">in</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[scala.xml.NodeSeq]" id="208244">toForm</a>: <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.json.JsonAST.JObject" id="208245">asJValue</a> = <a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#51392" title="(obj: List[net.liftweb.json.JsonAST.JField])net.liftweb.json.JsonAST.JObject">JObject</a><span class="delimiter">(</span><a href="../../../../../../record/net/liftweb/record/Field.scala.html#59136" title="=&gt; MongoMapField.this.MyType">value</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="(f: String =&gt; net.liftweb.json.JsonAST.JField)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[String],net.liftweb.json.JsonAST.JField,Iterable[net.liftweb.json.JsonAST.JField]])Iterable[net.liftweb.json.JsonAST.JField]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,net.liftweb.json.JsonAST.JField,Iterable[net.liftweb.json.JsonAST.JField]]" class="delimiter">{</span>
    <a title="String" id="208519">k</a> =&gt;
      <a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#50050" title="(name: String, value: net.liftweb.json.JsonAST.JValue)net.liftweb.json.JsonAST.JField">JField</a><span class="delimiter">(</span><a href="#208519" title="String">k</a>, <a href="../../../../../../record/net/liftweb/record/Field.scala.html#59136" title="(key: String)MapValueType">value</a><span class="delimiter">(</span><a href="#208519" title="String">k</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span> <span title="net.liftweb.json.JsonAST.JValue" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="&lt;none&gt; extends Product with net.liftweb.json.JsonAST.JValue with Serializable" id="208546">x</a> <span class="keyword">if</span> <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199483" title="(clazz: Class[_])Boolean">primitive_?</a><span class="delimiter">(</span><a href="#208546" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span> =&gt; <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199484" title="(a: Any)Product with net.liftweb.json.JsonAST.JValue with Serializable{type Values &gt;: String with BigInt with Double with Boolean}">primitive2jvalue</a><span class="delimiter">(</span><a href="#208546" title="AnyRef">x</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.json.package.JValue" id="208550">x</a> <span class="keyword">if</span> <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199492" title="(clazz: Class[_])Boolean">mongotype_?</a><span class="delimiter">(</span><a href="#208550" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span> =&gt; <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199493" title="(a: Any)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.package.JValue">mongotype2jvalue</a><span class="delimiter">(</span><a href="#208550" title="AnyRef">x</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#208239" title="=&gt; OwnerType">owner</a>.<a href="../BsonRecord.scala.html#199178" title="=&gt; net.liftweb.mongodb.record.BsonMetaRecord[OwnerType]">meta</a>.<a href="../../../../../../mongodb/net/liftweb/mongodb/MongoMeta.scala.html#199264" title="=&gt; net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="net.liftweb.json.JsonAST.JObject" id="208555">x</a> <span class="keyword">if</span> <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199487" title="(clazz: Class[_])Boolean">datetype_?</a><span class="delimiter">(</span><a href="#208555" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span> =&gt; <a href="../../../../../../mongodb/net/liftweb/mongodb/Meta.scala.html#199488" title="(a: Any)(implicit formats: net.liftweb.json.Formats)net.liftweb.json.JsonAST.JObject">datetype2jvalue</a><span class="delimiter">(</span><a href="#208555" title="AnyRef">x</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#208239" title="=&gt; OwnerType">owner</a>.<a href="../BsonRecord.scala.html#199178" title="=&gt; net.liftweb.mongodb.record.BsonMetaRecord[OwnerType]">meta</a>.<a href="../../../../../../mongodb/net/liftweb/mongodb/MongoMeta.scala.html#199264" title="=&gt; net.liftweb.json.Formats">formats</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.json.JsonAST.JNothing.type">_</span> =&gt; <a href="../../../../../../json/net/liftweb/json/JsonAST.scala.html#48511" title="object net.liftweb.json.JsonAST.JNothing">JNothing</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>.<span title="=&gt; List[net.liftweb.json.JsonAST.JField]">toList</span><span class="delimiter">)</span>

  <span class="comment">/*
  * Convert this field's value into a DBObject so it can be stored in Mongo.
  */</span>
  <span class="keyword">def</span> <a title="=&gt; com.mongodb.DBObject" id="208246">asDBObject</a>: <span title="com.mongodb.DBObject">DBObject</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="com.mongodb.BasicDBObject" id="208594">dbo</a> = <span title="com.mongodb.BasicDBObject" class="keyword">new</span> <span title="com.mongodb.BasicDBObject">BasicDBObject</span>
    <a href="../../../../../../record/net/liftweb/record/Field.scala.html#59136" title="=&gt; MongoMapField.this.MyType">value</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="(f: String =&gt; java.lang.Object)Unit">foreach</span> <span class="delimiter">{</span> <a title="String" id="208718">k</a> =&gt;
      <a href="#208594" title="com.mongodb.BasicDBObject">dbo</a>.<span title="(x$1: java.lang.String, x$2: Any)java.lang.Object">put</span><span class="delimiter">(</span><a href="#208718" title="String">k</a>.<span title="()java.lang.String">toString</span>, <a href="../../../../../../record/net/liftweb/record/Field.scala.html#59136" title="=&gt; MongoMapField.this.MyType">value</a>.<span title="(key: String, default: =&gt; Any)Any">getOrElse</span><span class="delimiter">(</span><a href="#208718" title="String">k</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#208594" title="com.mongodb.BasicDBObject">dbo</a>
  <span class="delimiter">}</span>

  <span class="comment">// set this field's value using a DBObject returned from Mongo.</span>
  <span class="keyword">def</span> <a title="(dbo: com.mongodb.DBObject)net.liftweb.common.Box[Map[String,MapValueType]]" id="208247">setFromDBObject</a><span class="delimiter">(</span><a title="com.mongodb.DBObject" id="208261">dbo</a>: <span title="com.mongodb.DBObject">DBObject</span><span class="delimiter">)</span>: <a href="../../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Map[String,MapValueType]]">Box</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, MapValueType<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._

    <a href="../../../../../../record/net/liftweb/record/Field.scala.html#49816" title="(in: net.liftweb.common.Box[MongoMapField.this.MyType])net.liftweb.common.Box[MongoMapField.this.MyType]">setBox</a><span class="delimiter">(</span><a href="../../../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.collection.immutable.Map[String,MapValueType])net.liftweb.common.Full[scala.collection.immutable.Map[String,MapValueType]]">Full</a><span class="delimiter">(</span>
      <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, MapValueType)])scala.collection.immutable.Map[String,MapValueType]">++</span> <a href="#208261" title="com.mongodb.DBObject">dbo</a>.<span title="(s: java.util.Set[java.lang.String])scala.collection.mutable.Set[java.lang.String]">keySet</span>.<span title="(f: java.lang.String =&gt; (java.lang.String, MapValueType))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Set[java.lang.String],(java.lang.String, MapValueType),scala.collection.GenTraversableOnce[(String, MapValueType)]])scala.collection.GenTraversableOnce[(String, MapValueType)]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Set.Coll,(java.lang.String, MapValueType),scala.collection.mutable.Set[(java.lang.String, MapValueType)]]" class="delimiter">{</span>
        <a title="java.lang.String" id="209145">k</a> =&gt; <span title="(_1: java.lang.String, _2: MapValueType)(java.lang.String, MapValueType)" class="delimiter">(</span><a href="#209145" title="java.lang.String">k</a>.<span title="()java.lang.String">toString</span>, <a href="#208261" title="com.mongodb.DBObject">dbo</a>.<span title="(x$1: java.lang.String)java.lang.Object">get</span><span class="delimiter">(</span><a href="#209145" title="java.lang.String">k</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="MapValueType" class="delimiter">[</span><a href="#12130" title="MapValueType">MapValueType</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>