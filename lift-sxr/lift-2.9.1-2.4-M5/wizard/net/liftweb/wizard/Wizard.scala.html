<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>wizard/net/liftweb/wizard/Wizard.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2009-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> wizard

<span class="keyword">import</span> net.liftweb._
<span class="keyword">import</span> http._
<span class="keyword">import</span> js._
<span class="keyword">import</span> <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#14916" title="object net.liftweb.http.js.JsCmds">JsCmds</a>._

<span class="keyword">import</span> common._
<span class="keyword">import</span> util._
<span class="keyword">import</span> db._
<span class="keyword">import</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._
<span class="keyword">import</span> scala.xml._
<span class="keyword">import</span> scala.reflect.Manifest

<span class="keyword">object</span> <a title="object net.liftweb.wizard.WizardRules" id="15373">WizardRules</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Factory.scala.html#14169" title="net.liftweb.http.Factory">Factory</a> <span class="keyword">with</span> <a href="../../../../webkit/net/liftweb/http/LiftRules.scala.html#14410" title="net.liftweb.http.FormVendor">FormVendor</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="net.liftweb.wizard.WizardRules.FactoryMaker[List[net.liftweb.db.ConnectionIdentifier]]" id="483727">dbConnectionsForTransaction</a>: <a href="../../../../webkit/net/liftweb/http/Factory.scala.html#147868" title="net.liftweb.wizard.WizardRules.FactoryMaker[List[net.liftweb.db.ConnectionIdentifier]]">FactoryMaker</a><span class="delimiter">[</span>List<span class="delimiter">[</span>ConnectionIdentifier<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#483740" title="net.liftweb.wizard.WizardRules.FactoryMaker[List[net.liftweb.db.ConnectionIdentifier]]" class="keyword">new</a> <a title="anonymous class $anon extends net.liftweb.wizard.WizardRules.FactoryMaker[List[net.liftweb.db.ConnectionIdentifier]]" id="483740">FactoryMaker</a><span class="delimiter">[</span>List<span class="delimiter">[</span>ConnectionIdentifier<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="delimiter">{</span><span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](implicit man: scala.reflect.Manifest[T])scala.reflect.Manifest[T]" id="483729">m</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="483731">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="483799">man</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#483799" title="scala.reflect.Manifest[T]">man</a>

  <span class="keyword">val</span> <a title="net.liftweb.wizard.WizardRules.FactoryMaker[List[String]]" id="483732">allTemplatePath</a>: <a href="../../../../webkit/net/liftweb/http/Factory.scala.html#147868" title="net.liftweb.wizard.WizardRules.FactoryMaker[List[String]]">FactoryMaker</a><span class="delimiter">[</span>List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#483802" title="net.liftweb.wizard.WizardRules.FactoryMaker[List[String]]" class="keyword">new</a> <a title="anonymous class $anon extends net.liftweb.wizard.WizardRules.FactoryMaker[List[String]]" id="483802">FactoryMaker</a><span class="delimiter">[</span>List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;templates-hidden&quot;)" class="string">&quot;templates-hidden&quot;</span>, <span title="java.lang.String(&quot;wizard-all&quot;)" class="string">&quot;wizard-all&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span><span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object net.liftweb.wizard.WizardRules.currentWizards" id="483734">currentWizards</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14760" title="net.liftweb.http.SessionVar[Set[String]]">SessionVar</a><span class="delimiter">[</span>Set<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="(elems: String*)scala.collection.immutable.Set[String]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">def</span> <a title="()String" id="483736">registerWizardSession</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49522" title="(f: =&gt; String)String">synchronizeForSession</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="483864">ret</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
      <a href="#483734" title="object net.liftweb.wizard.WizardRules.currentWizards">currentWizards</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Set[String])Set[String]">set</a><span class="delimiter">(</span><a href="#483734" title="object net.liftweb.wizard.WizardRules.currentWizards">currentWizards</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Set[String]">is</a> <span title="(elem: String)scala.collection.immutable.Set[String]">+</span> <a href="#483864" title="String">ret</a><span class="delimiter">)</span>
      <a href="#483864" title="String">ret</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(id: String)Boolean" id="483737">isValidWizardSession</a><span class="delimiter">(</span><a title="String" id="483879">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49522" title="(f: =&gt; Boolean)Boolean">synchronizeForSession</a> <span class="delimiter">{</span>
      <a href="#483734" title="object net.liftweb.wizard.WizardRules.currentWizards">currentWizards</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Set[String]">is</a>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#483879" title="String">id</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(id: String)Unit" id="483738">deregisterWizardSession</a><span class="delimiter">(</span><a title="String" id="483888">id</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49522" title="(f: =&gt; Set[String])Set[String]">synchronizeForSession</a> <span title="Unit" class="delimiter">{</span>
      <a href="#483734" title="object net.liftweb.wizard.WizardRules.currentWizards">currentWizards</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Set[String])Set[String]">set</a><span class="delimiter">(</span><a href="#483734" title="object net.liftweb.wizard.WizardRules.currentWizards">currentWizards</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Set[String]">is</a> <span title="(elem: String)scala.collection.immutable.Set[String]">-</span> <a href="#483888" title="String">id</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A wizard allows you to create a multi-screen set of input forms
 * with back-button support and state support
 */</span>
<span class="keyword">trait</span> <a title="trait Wizard extends java.lang.Object with net.liftweb.http.StatefulSnippet with net.liftweb.http.Factory with net.liftweb.http.ScreenWizardRendered with ScalaObject" id="15375">Wizard</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/StatefulSnippet.scala.html#14713" title="net.liftweb.http.StatefulSnippet">StatefulSnippet</a> <span class="keyword">with</span> <a href="../../../../webkit/net/liftweb/http/Factory.scala.html#14169" title="net.liftweb.http.Factory">Factory</a> <span class="keyword">with</span> <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#14426" title="net.liftweb.http.ScreenWizardRendered">ScreenWizardRendered</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; PartialFunction[String,scala.xml.NodeSeq =&gt; scala.xml.NodeSeq]" id="483907">dispatch</a> = <a href="#483988" title="scala.xml.NodeSeq =&gt; scala.xml.NodeSeq" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="scala.xml.NodeSeq =&gt; scala.xml.NodeSeq">_</span> =&gt; <a title="scala.xml.NodeSeq" id="483990">template</a> =&gt; <span class="delimiter">{</span>
      <a href="#483908" title="object Wizard.this._defaultXml">_defaultXml</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: scala.xml.NodeSeq)scala.xml.NodeSeq">set</a><span class="delimiter">(</span><a href="#483990" title="scala.xml.NodeSeq">template</a><span class="delimiter">)</span>
      <a href="#15375" title="Wizard.this.type" class="keyword">this</a>.<a href="#483937" title="=&gt; scala.xml.NodeSeq">toForm</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Holds the template passed via the snippet for the duration
   * of the request
   */</span>
  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this._defaultXml" id="483908">_defaultXml</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14776" title="net.liftweb.http.TransientRequestVar[scala.xml.NodeSeq]">TransientRequestVar</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span><span class="delimiter">(</span><span title="object scala.xml.NodeSeq">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="483993">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * the NodeSeq passed as a parameter when the snippet was invoked
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="483910">defaultXml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="#483908" title="object Wizard.this._defaultXml">_defaultXml</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75377" title="=&gt; scala.xml.NodeSeq">get</a>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.wizard.Wizard.elemInABox : (in: scala.xml.Elem)net.liftweb.common.Box[scala.xml.Elem]" id="483911">elemInABox</a><span class="delimiter">(</span><a title="scala.xml.Elem" id="484004">in</a>: <span title="scala.xml.Elem">Elem</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Elem]">Box</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#484004" title="scala.xml.Elem">in</a><span class="delimiter">)</span>

  @volatile <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="List[Wizard.this.Screen]" id="483912">_screenList</a>: <span title="List[Wizard.this.Screen]">List</span><span class="delimiter">[</span>Screen<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Wizard.this.ScreenVars" id="483913">ScreenVars</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14776" title="net.liftweb.http.TransientRequestVar[Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]]">TransientRequestVar</a><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, <span class="delimiter">(</span>NonCleanAnyVar<span class="delimiter">[</span>_<span class="delimiter">]</span>, Any<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484036">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.CurrentScreen" id="483915">CurrentScreen</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[net.liftweb.common.Box[Wizard.this.Screen]]">WizardVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>Screen<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.Screen]" id="484072">screen</a> = <a href="#483953" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">calcFirstScreen</a>
    <a href="#484072" title="net.liftweb.common.Box[Wizard.this.Screen]">screen</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#484079" title="Wizard.this.Screen">_</a>.<a href="#484019" title="(from: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionIntoFrom</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#484072" title="net.liftweb.common.Box[Wizard.this.Screen]">screen</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#484086" title="Wizard.this.Screen">_</a>.<a href="#484028" title="()Unit">enterScreen</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#484072" title="net.liftweb.common.Box[Wizard.this.Screen]">screen</a>
  <span class="delimiter">}</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484066">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Wizard.this.PrevSnapshot" id="483917">PrevSnapshot</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14776" title="net.liftweb.http.TransientRequestVar[net.liftweb.common.Box[Wizard.this.WizardSnapshot]]">TransientRequestVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>WizardSnapshot<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484091">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.Referer" id="483919">Referer</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[String]">WizardVar</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373461" title="=&gt; String">calcReferer</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484115">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.Ajax_?" id="483921">Ajax_?</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[Boolean]">WizardVar</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373462" title="=&gt; Boolean">calcAjax</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484122">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A unique GUID for the form... this allows us to do an Ajax SetHtml
   * to replace the form
   */</span>
  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.FormGUID" id="483923">FormGUID</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[String]">WizardVar</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484129">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * What to do when the Screen is done.  By default, will
   * do a redirect back to Whence, but you can change this behavior,
   * for example, put up some other Ajax thing or alternatively,
   * remove the form from the screen.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.AjaxOnDone" id="483925">AjaxOnDone</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[net.liftweb.http.js.JsCmd]">WizardVar</a><span class="delimiter">[</span>JsCmd<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373459" title="=&gt; net.liftweb.http.js.JsCmd">calcAjaxOnDone</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484138">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.OnFirstScreen" id="483927">OnFirstScreen</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14776" title="net.liftweb.http.TransientRequestVar[Boolean]">TransientRequestVar</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484145">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Wizard.this.FirstTime" id="483929">FirstTime</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[Boolean]">WizardVar</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484152">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Wizard.this.CurrentSession" id="483931">CurrentSession</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[String]">WizardVar</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">(</span><a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483736" title="()String">registerWizardSession</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484162">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object Wizard.this.VisitedScreens" id="483933">VisitedScreens</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[Vector[Wizard.this.Screen]]">WizardVar</a><span class="delimiter">[</span>Vector<span class="delimiter">[</span>Screen<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="484172">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(screen: net.liftweb.http.AbstractScreen)net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]" id="483935">noticeTypeToAttr</a><span class="delimiter">(</span><a title="net.liftweb.http.AbstractScreen" id="484180">screen</a>: <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#14425" title="net.liftweb.http.AbstractScreen">AbstractScreen</a><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]">Box</a><span class="delimiter">[</span>NoticeType.Value =&gt; MetaData<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#484180" title="net.liftweb.http.AbstractScreen">screen</a>.<a href="../../../../util/net/liftweb/util/Maker.scala.html#146661" title="[T](implicit man: scala.reflect.Manifest[T])net.liftweb.common.Box[T]">inject</a><span title="(implicit man: scala.reflect.Manifest[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData])net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]" class="delimiter">[</span>NoticeType.Value =&gt; MetaData<span class="delimiter">]</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData])net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]">or</a>
      <a href="../../../../util/net/liftweb/util/Maker.scala.html#146661" title="[T](implicit man: scala.reflect.Manifest[T])net.liftweb.common.Box[T]">inject</a><span title="(implicit man: scala.reflect.Manifest[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData])net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]" class="delimiter">[</span>NoticeType.Value =&gt; MetaData<span class="delimiter">]</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData])net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]">or</a>
      <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="../../../../util/net/liftweb/util/Maker.scala.html#146661" title="[T](implicit man: scala.reflect.Manifest[T])net.liftweb.common.Box[T]">inject</a><span title="(implicit man: scala.reflect.Manifest[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData])net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]" class="delimiter">[</span>NoticeType.Value =&gt; MetaData<span class="delimiter">]</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData])net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]">or</a>
      <a href="#484180" title="net.liftweb.http.AbstractScreen">screen</a>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369592" title="(screen: net.liftweb.http.AbstractScreen)net.liftweb.common.Box[net.liftweb.http.NoticeType.Value =&gt; scala.xml.MetaData]">noticeTypeToAttr</a><span class="delimiter">(</span><a href="#484180" title="net.liftweb.http.AbstractScreen">screen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Override this method to do setup the first time the
   * screen is entered
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="483936">localSetup</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>

  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="483937">toForm</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">is</a> <span class="comment">// initialize</span>
    <a href="#483919" title="object Wizard.this.Referer">Referer</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a> <span class="comment">// touch to capture the referer</span>
    <a href="#483921" title="object Wizard.this.Ajax_?">Ajax_?</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Boolean">is</a> <span class="comment">// capture the Ajax state</span>
    <a href="#483931" title="object Wizard.this.CurrentSession">CurrentSession</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a>
    <a href="#483923" title="object Wizard.this.FormGUID">FormGUID</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[Boolean, _])Boolean">FirstTime</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#483929" title="object Wizard.this.FirstTime">FirstTime</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Boolean)Boolean">set</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

      <a href="#483936" title="()Unit">localSetup</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373464" title="=&gt; Boolean">ajaxForms_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Wizard.this.WizardSnapshot" id="484334">localSnapshot</a> = <a href="#483959" title="=&gt; Wizard.this.WizardSnapshot">createSnapshot</a>
        <span class="comment">// val notices = S.getAllNotices</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49371" title="(where: String, func: () =&gt; Unit)Nothing">seeOther</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="comment">// S.appendNotices(notices)</span>
          <a href="#484334" title="Wizard.this.WizardSnapshot">localSnapshot</a>.<a href="#484112" title="()Unit">restore</a>
        <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="scala.xml.NodeSeq" id="484316">form</a> = <a href="#483939" title="()scala.xml.NodeSeq">renderHtml</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="scala.xml.NodeSeq" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373464" title="=&gt; Boolean">ajaxForms_?</a><span class="delimiter">)</span> <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373448" title="(in: scala.xml.NodeSeq)scala.xml.Elem">wrapInDiv</a><span class="delimiter">(</span><a href="#484316" title="scala.xml.NodeSeq">form</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#484316" title="scala.xml.NodeSeq">form</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(id: String)String" id="483938">submitOrAjax</a><span class="delimiter">(</span><a title="String" id="484357">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> =
    <span class="delimiter">(</span><span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373464" title="=&gt; Boolean">ajaxForms_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#14660" title="object net.liftweb.http.SHtml">SHtml</a>.<a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#152728" title="(in: net.liftweb.http.js.JsExp)net.liftweb.http.js.JsExp">makeAjaxCall</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="../../../../webkit/net/liftweb/http/LiftRules.scala.html#158871" title="=&gt; net.liftweb.http.js.JSArtifacts">jsArtifacts</a>.<a href="../../../../webkit/net/liftweb/http/js/JSArtifacts.scala.html#327564" title="(id: String)net.liftweb.http.js.JsExp">serialize</a><span class="delimiter">(</span><a href="#484357" title="String">id</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#58016" title="=&gt; String">toJsCmd</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="java.lang.String(&quot;document.getElementById(&quot;)" class="string">&quot;document.getElementById(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48858" title="implicit net.liftweb.util.StringHelpers.stringToSuper : (in: String)net.liftweb.util.SuperString">id</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#58436" title="=&gt; String">encJs</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).submit()&quot;)" class="string">&quot;).submit()&quot;</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()scala.xml.NodeSeq" id="483939">renderHtml</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="484366">nextId</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
    <span class="keyword">val</span> <a title="String" id="484367">prevId</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
    <span class="keyword">val</span> <a title="String" id="484368">cancelId</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>

    <span class="keyword">val</span> <a title="Wizard.this.Screen" id="484369">theScreen</a>: <a href="#483967" title="Wizard.this.Screen">Screen</a> = <a href="#483958" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">currentScreen</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Wizard.this.Screen)Wizard.this.Screen">openOr</a> <span class="delimiter">{</span>
      <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483738" title="(id: String)Unit">deregisterWizardSession</a><span class="delimiter">(</span><a href="#483931" title="object Wizard.this.CurrentSession">CurrentSession</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a><span class="delimiter">)</span>
      <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49368" title="(where: String)Nothing">seeOther</a><span class="delimiter">(</span><a href="#483919" title="object Wizard.this.Referer">Referer</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a><span class="delimiter">)</span> <span class="comment">// this should never happen</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a href="#484371" title="(net.liftweb.common.Box[scala.xml.Elem] with Serializable, net.liftweb.common.Box[scala.xml.Elem] with Serializable)" class="delimiter">(</a><a href="#484370" title="&lt;none&gt; extends net.liftweb.common.Box[scala.xml.Elem] with Serializable" id="484371">nextButton</a>, <a href="#484370" title="&lt;none&gt; extends net.liftweb.common.Box[scala.xml.Elem] with Serializable" id="484372">finishButton</a><span class="delimiter">)</span> =
      <span title="(net.liftweb.common.Box[scala.xml.Elem] with Serializable, net.liftweb.common.Box[scala.xml.Elem] with Serializable)" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="#484018" title="=&gt; Boolean">isLastScreen</a><span class="delimiter">)</span>
        <span title="(_1: net.liftweb.common.Full[scala.xml.Elem], _2: net.liftweb.common.Empty.type)(net.liftweb.common.Full[scala.xml.Elem], net.liftweb.common.Empty.type)" class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="#484013" title="=&gt; scala.xml.Elem">nextButton</a> <span title="(updates: scala.xml.MetaData)scala.xml.Elem">%</span>
          <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;onclick&quot;</a> <a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49054" title="implicit net.liftweb.util.HttpHelpers.pairToUnprefixed : (in: (String, Any))scala.xml.MetaData">-&gt;</a> <a href="#483938" title="(id: String)String">submitOrAjax</a><span class="delimiter">(</span><a href="#484366" title="String">nextId</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <span title="(_1: net.liftweb.common.Empty.type, _2: net.liftweb.common.Full[scala.xml.Elem])(net.liftweb.common.Empty.type, net.liftweb.common.Full[scala.xml.Elem])" class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="#484016" title="=&gt; scala.xml.Elem">finishButton</a> <span title="(updates: scala.xml.MetaData)scala.xml.Elem">%</span>
          <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;onclick&quot;</a> <a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49054" title="implicit net.liftweb.util.HttpHelpers.pairToUnprefixed : (in: (String, Any))scala.xml.MetaData">-&gt;</a> <a href="#483938" title="(id: String)String">submitOrAjax</a><span class="delimiter">(</span><a href="#484366" title="String">nextId</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="net.liftweb.common.Box[scala.xml.Elem]" id="484373">prevButton</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Elem]">Box</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span> = <span title="net.liftweb.common.Box[scala.xml.Elem]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[Boolean, _])Boolean">OnFirstScreen</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="keyword">else</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="#484014" title="=&gt; scala.xml.Elem">prevButton</a> <span title="(updates: scala.xml.MetaData)scala.xml.Elem">%</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;onclick&quot;</a> <a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49054" title="implicit net.liftweb.util.HttpHelpers.pairToUnprefixed : (in: (String, Any))scala.xml.MetaData">-&gt;</a> <a href="#483938" title="(id: String)String">submitOrAjax</a><span class="delimiter">(</span><a href="#484367" title="String">prevId</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.xml.Elem" id="484374">cancelButton</a>: <span title="scala.xml.Elem">Elem</span> = <a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="#484015" title="=&gt; scala.xml.Elem">cancelButton</a> <span title="(updates: scala.xml.MetaData)scala.xml.Elem">%</span>
      <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;onclick&quot;</a> <a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49054" title="implicit net.liftweb.util.HttpHelpers.pairToUnprefixed : (in: (String, Any))scala.xml.MetaData">-&gt;</a> <a href="#483938" title="(id: String)String">submitOrAjax</a><span class="delimiter">(</span><a href="#484368" title="String">cancelId</a><span class="delimiter">)</span><span class="delimiter">)</span>


    <span class="keyword">val</span> <a title="String" id="484375">url</a> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a>

    <span class="keyword">val</span> <a title="List[net.liftweb.http.ScreenFieldInfo]" id="484376">extraFields</a>: <span title="List[net.liftweb.http.ScreenFieldInfo]">List</span><span class="delimiter">[</span>ScreenFieldInfo<span class="delimiter">]</span> =
      <span title="List[net.liftweb.http.ScreenFieldInfo]" class="keyword">if</span> <span class="delimiter">(</span><a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="#484022" title="=&gt; Boolean">confirmScreen_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>

        <span class="keyword">for</span> <span class="delimiter">{</span>
          <a title="Wizard.this.Screen" id="484863">screen</a> &lt;- <a href="#483933" title="object Wizard.this.VisitedScreens">VisitedScreens</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Vector[Wizard.this.Screen]">is</a>.<span title="(f: Wizard.this.Screen =&gt; scala.collection.GenTraversableOnce[net.liftweb.http.ScreenFieldInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[Wizard.this.Screen],net.liftweb.http.ScreenFieldInfo,List[net.liftweb.http.ScreenFieldInfo]])List[net.liftweb.http.ScreenFieldInfo]">toList</span>
          <a title="net.liftweb.util.ConfirmField" id="484926">field</a> &lt;- <a href="#484863" title="Wizard.this.Screen">screen</a>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369499" title="=&gt; List[net.liftweb.util.BaseField]">screenFields</a>.<span title="(pf: PartialFunction[net.liftweb.util.BaseField,net.liftweb.util.ConfirmField])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.util.BaseField],net.liftweb.util.ConfirmField,List[net.liftweb.util.ConfirmField]])List[net.liftweb.util.ConfirmField]">collect</span> <a href="#484879" title="(f: net.liftweb.util.ConfirmField =&gt; net.liftweb.http.ScreenFieldInfo)(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.util.ConfirmField],net.liftweb.http.ScreenFieldInfo,List[net.liftweb.http.ScreenFieldInfo]])List[net.liftweb.http.ScreenFieldInfo]" class="delimiter">{</a>
            <span class="keyword">case</span> <a title="net.liftweb.util.ConfirmField" id="484880">c</a>: <a href="../../../../util/net/liftweb/util/BaseField.scala.html#13087" title="net.liftweb.util.ConfirmField">ConfirmField</a> =&gt; <a href="#484880" title="net.liftweb.util.ConfirmField">c</a>
          <span class="delimiter">}</span> <span class="keyword">if</span> <a href="#484926" title="net.liftweb.util.ConfirmField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49782" title="=&gt; Boolean">show_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#484926" title="net.liftweb.util.ConfirmField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#269968" title="=&gt; Boolean">onConfirm_?</a>
        <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#374073" title="(field: net.liftweb.util.FieldIdentifier, text: scala.xml.NodeSeq, help: net.liftweb.common.Box[scala.xml.NodeSeq], input: net.liftweb.common.Box[scala.xml.NodeSeq])net.liftweb.http.ScreenFieldInfo">ScreenFieldInfo</a><span class="delimiter">(</span><a href="#484926" title="net.liftweb.util.ConfirmField">field</a>, <a href="#484926" title="net.liftweb.util.ConfirmField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49769" title="=&gt; scala.xml.NodeSeq">displayHtml</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>,
          <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#484926" title="net.liftweb.util.ConfirmField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49771" title="=&gt; scala.xml.NodeSeq">asHtml</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="object Nil">Nil</span>

    <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373449" title="(currentScreenNumber: net.liftweb.common.Box[scala.xml.NodeSeq], screenCount: net.liftweb.common.Box[scala.xml.NodeSeq], wizardTop: net.liftweb.common.Box[scala.xml.Elem], screenTop: net.liftweb.common.Box[scala.xml.Elem], fields: List[net.liftweb.http.ScreenFieldInfo], prev: net.liftweb.common.Box[scala.xml.Elem], cancel: net.liftweb.common.Box[scala.xml.Elem], next: net.liftweb.common.Box[scala.xml.Elem], finish: net.liftweb.common.Box[scala.xml.Elem], screenBottom: net.liftweb.common.Box[scala.xml.Elem], wizardBottom: net.liftweb.common.Box[scala.xml.Elem], nextId: (String, () =&gt; net.liftweb.http.js.JsCmd), prevId: net.liftweb.common.Box[(String, () =&gt; net.liftweb.http.js.JsCmd)], cancelId: (String, () =&gt; net.liftweb.http.js.JsCmd), theScreen: net.liftweb.http.AbstractScreen, ajax_?: Boolean)scala.xml.NodeSeq">renderAll</a><span class="delimiter">(</span>
      <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">is</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Wizard.this.Screen =&gt; scala.xml.Text)net.liftweb.common.Box[scala.xml.Text]">map</a><span class="delimiter">(</span><a title="Wizard.this.Screen" id="484996">s</a> =&gt; <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#484996" title="Wizard.this.Screen">s</a>.<a href="#484010" title="=&gt; Int">myScreenNum</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span class="comment">//currentScreenNumber: Box[NodeSeq],</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Text)net.liftweb.common.Full[scala.xml.Text]">Full</a><span class="delimiter">(</span><span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><a href="#483950" title="=&gt; Int">screenCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span class="comment">//screenCount: Box[NodeSeq],</span>
      <a href="#483943" title="=&gt; net.liftweb.common.Box[scala.xml.Elem]">wizardTop</a>, <span class="comment">// wizardTop: Box[Elem],</span>
      <a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369501" title="=&gt; net.liftweb.common.Box[scala.xml.Elem]">screenTop</a>, <span class="comment">//screenTop: Box[Elem],</span>
      <a href="#484376" title="List[net.liftweb.http.ScreenFieldInfo]">extraFields</a> <a href="#485012" title="(prefix: List[net.liftweb.http.ScreenFieldInfo])List[net.liftweb.http.ScreenFieldInfo]">:::</a>
        <a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369499" title="=&gt; List[net.liftweb.util.BaseField]">screenFields</a>.<span title="(f: net.liftweb.util.BaseField =&gt; scala.collection.GenTraversableOnce[net.liftweb.http.ScreenFieldInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.util.BaseField],net.liftweb.http.ScreenFieldInfo,List[net.liftweb.http.ScreenFieldInfo]])List[net.liftweb.http.ScreenFieldInfo]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.http.ScreenFieldInfo,List[net.liftweb.http.ScreenFieldInfo]]" class="delimiter">(</span><a title="net.liftweb.util.BaseField" id="485032">f</a> =&gt;
          <span title="List[net.liftweb.http.ScreenFieldInfo]" class="keyword">if</span> <span class="delimiter">(</span><a href="#485032" title="net.liftweb.util.BaseField">f</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49782" title="=&gt; Boolean">show_?</a><span class="delimiter">)</span> <span title="(xs: net.liftweb.http.ScreenFieldInfo*)List[net.liftweb.http.ScreenFieldInfo]">List</span><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#374073" title="(field: net.liftweb.util.FieldIdentifier, text: scala.xml.NodeSeq, help: net.liftweb.common.Box[scala.xml.NodeSeq], input: net.liftweb.common.Box[scala.xml.NodeSeq])net.liftweb.http.ScreenFieldInfo">ScreenFieldInfo</a><span class="delimiter">(</span><a href="#485032" title="net.liftweb.util.BaseField">f</a>, <a href="#485032" title="net.liftweb.util.BaseField">f</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49769" title="=&gt; scala.xml.NodeSeq">displayHtml</a>, <a href="#485032" title="net.liftweb.util.BaseField">f</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49780" title="=&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">helpAsHtml</a>, <a href="#485032" title="net.liftweb.util.BaseField">f</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49781" title="=&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">toForm</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>, <span class="comment">//fields: List[ScreenFieldInfo],</span>
      <a href="#484373" title="net.liftweb.common.Box[scala.xml.Elem]">prevButton</a>, <span class="comment">// prev: Box[Elem],</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#484374" title="scala.xml.Elem">cancelButton</a><span class="delimiter">)</span>, <span class="comment">// cancel: Box[Elem],</span>
      <a href="#484371" title="&lt;none&gt; extends net.liftweb.common.Box[scala.xml.Elem] with Serializable">nextButton</a>, <span class="comment">// next: Box[Elem],</span>
      <a href="#484372" title="&lt;none&gt; extends net.liftweb.common.Box[scala.xml.Elem] with Serializable">finishButton</a>, <span class="comment">//finish: Box[Elem],</span>
      <a href="#484369" title="Wizard.this.Screen">theScreen</a>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369502" title="=&gt; net.liftweb.common.Box[scala.xml.Elem]">screenBottom</a>, <span class="comment">// screenBottom: Box[Elem],</span>
      <a href="#483944" title="=&gt; net.liftweb.common.Box[scala.xml.Elem]">wizardBottom</a>, <span class="comment">//wizardBottom: Box[Elem],</span>
      <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">nextId</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: () =&gt; net.liftweb.http.js.JsCmd)(String, () =&gt; net.liftweb.http.js.JsCmd)">-&gt;</a> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#15375" title="Wizard.this.type" class="keyword">this</a>.<a href="#483961" title="()net.liftweb.http.js.JsCmd">nextScreen</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="comment">// if (currentScreen.isEmpty) S.seeOther(Referer.is)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>, <span class="comment">// nextId: (String, () =&gt; Unit),</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: (String, () =&gt; net.liftweb.http.js.JsCmd))net.liftweb.common.Full[(String, () =&gt; net.liftweb.http.js.JsCmd)]">Full</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">prevId</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: () =&gt; net.liftweb.http.js.JsCmd)(String, () =&gt; net.liftweb.http.js.JsCmd)">-&gt;</a> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#15375" title="Wizard.this.type" class="keyword">this</a>.<a href="#483962" title="()net.liftweb.http.js.JsCmd">prevScreen</a>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span class="comment">// prevId: Box[(String, () =&gt; Unit)],</span>
      <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">cancelId</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: () =&gt; net.liftweb.http.js.JsCmd)(String, () =&gt; net.liftweb.http.js.JsCmd)">-&gt;</a> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483738" title="(id: String)Unit">deregisterWizardSession</a><span class="delimiter">(</span><a href="#483931" title="object Wizard.this.CurrentSession">CurrentSession</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a><span class="delimiter">)</span>; <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373463" title="()net.liftweb.http.js.JsCmd">redirectBack</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>, <span class="comment">//cancelId: (String, () =&gt; Unit),</span>
      <a href="#484369" title="Wizard.this.Screen">theScreen</a>, <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373464" title="=&gt; Boolean">ajaxForms_?</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[String]" id="483940">allTemplatePath</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483732" title="=&gt; net.liftweb.wizard.WizardRules.FactoryMaker[List[String]]">allTemplatePath</a>.<a href="../../../../webkit/net/liftweb/http/Factory.scala.html#159330" title="=&gt; List[String]">vend</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="483941">allTemplate</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="../../../../webkit/net/liftweb/http/package.scala.html#15426" title="=&gt; net.liftweb.http.Templates.type">TemplateFinder</a>.<a href="../../../../webkit/net/liftweb/http/Templates.scala.html#342664" title="(places: List[String])net.liftweb.common.Box[scala.xml.NodeSeq]">findAnyTemplate</a><span class="delimiter">(</span><a href="#483940" title="=&gt; List[String]">allTemplatePath</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">openOr</a> <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373451" title="=&gt; scala.xml.NodeSeq">allTemplateNodeSeq</a>

  <span class="comment">/**
   * What additional attributes should be put on the
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.xml.MetaData" id="483942">formAttrs</a>: <span title="scala.xml.MetaData">MetaData</span> = scala.xml.<span title="object scala.xml.Null">Null</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[scala.xml.Elem]" id="483943">wizardTop</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Elem]">Box</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[Nothing])net.liftweb.common.Box[Nothing]">None</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[scala.xml.Elem]" id="483944">wizardBottom</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Elem]">Box</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[Nothing])net.liftweb.common.Box[Nothing]">None</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(from: net.liftweb.common.Box[Wizard.this.Screen], to: net.liftweb.common.Box[Wizard.this.Screen])Unit" id="483945">doTransition</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[Wizard.this.Screen]" id="485652">from</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span>, <a title="net.liftweb.common.Box[Wizard.this.Screen]" id="485653">to</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#485653" title="net.liftweb.common.Box[Wizard.this.Screen]">to</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#485659" title="Wizard.this.Screen">_</a>.<a href="#484028" title="()Unit">enterScreen</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span title="(_1: net.liftweb.common.Box[Wizard.this.Screen], _2: net.liftweb.common.Box[Wizard.this.Screen])(net.liftweb.common.Box[Wizard.this.Screen], net.liftweb.common.Box[Wizard.this.Screen])" class="delimiter">(</span><a href="#485652" title="net.liftweb.common.Box[Wizard.this.Screen]">from</a>, <a href="#485653" title="net.liftweb.common.Box[Wizard.this.Screen]">to</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Full<span class="delimiter">(</span><a title="Wizard.this.Screen" id="485670">old</a><span class="delimiter">)</span>, Full<span class="delimiter">(</span><a title="Wizard.this.Screen" id="485672">cur</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#485670" title="Wizard.this.Screen">old</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#485672" title="Wizard.this.Screen">cur</a> =&gt; <span title="Unit" class="delimiter">{</span>
        <span class="comment">/* do nothing */</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Full<span class="delimiter">(</span><a title="Wizard.this.Screen" id="485676">old</a><span class="delimiter">)</span>, Full<span class="delimiter">(</span><a title="Wizard.this.Screen" id="485678">cur</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#485676" title="Wizard.this.Screen">old</a>.<a href="#484020" title="(to: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionOutOfTo</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Wizard.this.Screen)net.liftweb.common.Full[Wizard.this.Screen]">Full</a><span class="delimiter">(</span><a href="#485678" title="Wizard.this.Screen">cur</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#485678" title="Wizard.this.Screen">cur</a>.<a href="#484019" title="(from: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionIntoFrom</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Wizard.this.Screen)net.liftweb.common.Full[Wizard.this.Screen]">Full</a><span class="delimiter">(</span><a href="#485676" title="Wizard.this.Screen">old</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>Full<span class="delimiter">(</span><a title="Wizard.this.Screen" id="485690">old</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <a href="#485690" title="Wizard.this.Screen">old</a>.<a href="#484020" title="(to: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionOutOfTo</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span>_, Full<span class="delimiter">(</span><a title="Wizard.this.Screen" id="485694">cur</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#485694" title="Wizard.this.Screen">cur</a>.<a href="#484019" title="(from: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionIntoFrom</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class WizardSnapshot extends java.lang.Object with Wizard.this.Snapshot with ScalaObject" id="483946">WizardSnapshot</a><a href="#483946" title="ScalaObject" class="delimiter">(</a><span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]" id="484341">screenVars</a>: <span title="Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">Map</span><span class="delimiter">[</span>String, <span class="delimiter">(</span>NonCleanAnyVar<span class="delimiter">[</span>_<span class="delimiter">]</span>, Any<span class="delimiter">)</span><span class="delimiter">]</span>,
                       <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.Screen]" id="484342">currentScreen</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span>,
                       <span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.WizardSnapshot]" id="484343">snapshot</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.WizardSnapshot]">Box</a><span class="delimiter">[</span>WizardSnapshot<span class="delimiter">]</span>,
                       <span class="keyword">private</span> <span class="keyword">val</span> <a title="Boolean" id="484344">firstScreen</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373452" title="Wizard.this.Snapshot">Snapshot</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()Unit" id="484112">restore</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../webkit/net/liftweb/http/StatefulSnippet.scala.html#193188" title="()Unit">registerThisSnippet</a><span class="delimiter">(</span><span class="delimiter">)</span>;
      <a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)])Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">set</a><span class="delimiter">(</span><a href="#484341" title="=&gt; Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">screenVars</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75379" title="=&gt; Boolean">set_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#483945" title="(from: net.liftweb.common.Box[Wizard.this.Screen], to: net.liftweb.common.Box[Wizard.this.Screen])Unit">doTransition</a><span class="delimiter">(</span><a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75377" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">get</a>, <a href="#484342" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">currentScreen</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#484342" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">currentScreen</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#485715" title="Wizard.this.Screen">_</a>.<a href="#484019" title="(from: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionIntoFrom</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#484342" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">currentScreen</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#485720" title="Wizard.this.Screen">_</a>.<a href="#484028" title="()Unit">enterScreen</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: net.liftweb.common.Box[Wizard.this.Screen])net.liftweb.common.Box[Wizard.this.Screen]">set</a><span class="delimiter">(</span><a href="#484342" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">currentScreen</a><span class="delimiter">)</span>
      <a href="#483917" title="object Wizard.this.PrevSnapshot">PrevSnapshot</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: net.liftweb.common.Box[Wizard.this.WizardSnapshot])net.liftweb.common.Box[Wizard.this.WizardSnapshot]">set</a><span class="delimiter">(</span><a href="#484343" title="=&gt; net.liftweb.common.Box[Wizard.this.WizardSnapshot]">snapshot</a><span class="delimiter">)</span>
      <a href="#483927" title="object Wizard.this.OnFirstScreen">OnFirstScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Boolean)Boolean">set</a><span class="delimiter">(</span><a href="#484344" title="=&gt; Boolean">firstScreen</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483737" title="(id: String)Boolean">isValidWizardSession</a><span class="delimiter">(</span><a href="#483931" title="object Wizard.this.CurrentSession">CurrentSession</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49368" title="(where: String)Nothing">seeOther</a><span class="delimiter">(</span><a href="#483919" title="object Wizard.this.Referer">Referer</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a><span class="delimiter">)</span> <span class="comment">// FIXME Wizard</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(screen: Wizard.this.Screen)Unit" id="483947">_register</a><span class="delimiter">(</span><a title="Wizard.this.Screen" id="485733">screen</a>: <a href="#483967" title="Wizard.this.Screen">Screen</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#483912" title="List[Wizard.this.Screen]">_screenList</a> = <a href="#483912" title="List[Wizard.this.Screen]">_screenList</a> <a href="#485735" title="(prefix: List[Wizard.this.Screen])List[Wizard.this.Screen]">:::</a> <span title="(xs: Wizard.this.Screen*)List[Wizard.this.Screen]">List</span><span class="delimiter">(</span><a href="#485733" title="Wizard.this.Screen">screen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.db.ConnectionIdentifier]" id="483948">dbConnections</a>: <span title="List[net.liftweb.db.ConnectionIdentifier]">List</span><span class="delimiter">[</span>ConnectionIdentifier<span class="delimiter">]</span> = <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483727" title="=&gt; net.liftweb.wizard.WizardRules.FactoryMaker[List[net.liftweb.db.ConnectionIdentifier]]">dbConnectionsForTransaction</a>.<a href="../../../../webkit/net/liftweb/http/Factory.scala.html#159330" title="=&gt; List[net.liftweb.db.ConnectionIdentifier]">vend</a>

  <span class="comment">/**
   * The ordered list of Screens
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[Wizard.this.Screen]" id="483949">screens</a>: <span title="List[Wizard.this.Screen]">List</span><span class="delimiter">[</span>Screen<span class="delimiter">]</span> = <a href="#483912" title="List[Wizard.this.Screen]">_screenList</a>

  <span class="comment">/**
   * Total number of screens in the wizard
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Int" id="483951">screenCount</a> = <a href="#483949" title="=&gt; List[Wizard.this.Screen]">screens</a>.<span title="=&gt; Int">size</span>

  <span class="comment">/**
   * Given the current screen, what's the next screen?
   */</span>
  <span class="keyword">def</span> <a title="(which: Wizard.this.Screen)net.liftweb.common.Box[Wizard.this.Screen]" id="483952">calcScreenAfter</a><span class="delimiter">(</span><a title="Wizard.this.Screen" id="485763">which</a>: <a href="#483967" title="Wizard.this.Screen">Screen</a><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span> =
    <a href="#483949" title="=&gt; List[Wizard.this.Screen]">screens</a>.<span title="(p: Wizard.this.Screen =&gt; Boolean)List[Wizard.this.Screen]">dropWhile</span><span class="delimiter">(</span><a href="#485771" title="Wizard.this.Screen">_</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#485763" title="Wizard.this.Screen">which</a><span class="delimiter">)</span>.<span title="(n: Int)List[Wizard.this.Screen]">drop</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[Wizard.this.Screen])net.liftweb.common.Box[Wizard.this.Screen]">headOption</a>


  <span class="comment">/**
   * What's the first screen in this wizard
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]" id="483953">calcFirstScreen</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span> = <a href="#483949" title="=&gt; List[Wizard.this.Screen]">screens</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[Wizard.this.Screen])net.liftweb.common.Box[Wizard.this.Screen]">headOption</a>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="483954">nextButton</a>: <span title="scala.xml.Elem">Elem</span> = &lt;<a title="scala.xml.Elem" id="485785">button</a>&gt;
    <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Next&quot;)" class="string">&quot;Next&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
  &lt;/button&gt;

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="483955">prevButton</a>: <span title="scala.xml.Elem">Elem</span> = &lt;<a title="scala.xml.Elem" id="485792">button</a>&gt;
    <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Previous&quot;)" class="string">&quot;Previous&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
  &lt;/button&gt;

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="483956">cancelButton</a>: <span title="scala.xml.Elem">Elem</span> = &lt;<a title="scala.xml.Elem" id="485799">button</a>&gt;
    <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Cancel&quot;)" class="string">&quot;Cancel&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
  &lt;/button&gt;

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="483957">finishButton</a>: <span title="scala.xml.Elem">Elem</span> = &lt;<a title="scala.xml.Elem" id="485806">button</a>&gt;
    <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Finish&quot;)" class="string">&quot;Finish&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
  &lt;/button&gt;

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]" id="483958">currentScreen</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span> = <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">is</a>

  <span class="keyword">def</span> <a title="=&gt; Wizard.this.WizardSnapshot" id="483959">createSnapshot</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.Screen]" id="484338">cs</a> = <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">is</a>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.WizardSnapshot]" id="484339">prev</a> = <a href="#483917" title="object Wizard.this.PrevSnapshot">PrevSnapshot</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[Wizard.this.WizardSnapshot]">is</a>
    <span class="keyword">val</span> <a title="Boolean" id="484340">onFirst</a> = <a href="#483927" title="object Wizard.this.OnFirstScreen">OnFirstScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Boolean">is</a>
    <span title="Wizard.this.WizardSnapshot" class="keyword">new</span> <a href="#483946" title="Wizard.this.WizardSnapshot">WizardSnapshot</a><span class="delimiter">(</span><a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">is</a>, <a href="#484338" title="net.liftweb.common.Box[Wizard.this.Screen]">cs</a>, <a href="#484339" title="net.liftweb.common.Box[Wizard.this.WizardSnapshot]">prev</a>, <a href="#484340" title="Boolean">onFirst</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This method will be called within a transactional block when the last screen is completed
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="483960">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="()net.liftweb.http.js.JsCmd" id="483961">nextScreen</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#14913" title="net.liftweb.http.js.JsCmd">JsCmd</a> = <span class="delimiter">{</span>
    <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="Wizard.this.Screen" id="485815">screen</a> &lt;- <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Wizard.this.Screen =&gt; net.liftweb.http.js.JsCmd)net.liftweb.common.Box[net.liftweb.http.js.JsCmd]">is</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <a href="#485815" title="Wizard.this.Screen">screen</a>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369512" title="=&gt; List[net.liftweb.util.FieldError]">validate</a> <span title="net.liftweb.http.js.JsCmd" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.http.js.JsCmd">Nil</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Wizard.this.WizardSnapshot" id="485816">snapshot</a> = <a href="#483959" title="=&gt; Wizard.this.WizardSnapshot">createSnapshot</a>
          <a href="#483917" title="object Wizard.this.PrevSnapshot">PrevSnapshot</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: net.liftweb.common.Box[Wizard.this.WizardSnapshot])net.liftweb.common.Box[Wizard.this.WizardSnapshot]">set</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Wizard.this.WizardSnapshot)net.liftweb.common.Full[Wizard.this.WizardSnapshot]">Full</a><span class="delimiter">(</span><a href="#485816" title="Wizard.this.WizardSnapshot">snapshot</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.Screen]" id="485817">nextScreen</a> = <a href="#485815" title="Wizard.this.Screen">screen</a>.<a href="#484017" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">nextScreen</a>
          <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">is</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Vector[Wizard.this.Screen])Unit">foreach</a> <span class="delimiter">{</span>
            <a title="Wizard.this.Screen" id="485827">s</a> =&gt; <a href="#483933" title="object Wizard.this.VisitedScreens">VisitedScreens</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Vector[Wizard.this.Screen])Vector[Wizard.this.Screen]">set</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[Vector[Wizard.this.Screen], _])Vector[Wizard.this.Screen]">VisitedScreens</a> <span title="(elem: Wizard.this.Screen)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[Wizard.this.Screen],Wizard.this.Screen,Vector[Wizard.this.Screen]])Vector[Wizard.this.Screen]">:+</span> <a href="#485827" title="Wizard.this.Screen">s</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#483945" title="(from: net.liftweb.common.Box[Wizard.this.Screen], to: net.liftweb.common.Box[Wizard.this.Screen])Unit">doTransition</a><span class="delimiter">(</span><a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75377" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">get</a>, <a href="#485817" title="net.liftweb.common.Box[Wizard.this.Screen]">nextScreen</a><span class="delimiter">)</span>
          <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: net.liftweb.common.Box[Wizard.this.Screen])net.liftweb.common.Box[Wizard.this.Screen]">set</a><span class="delimiter">(</span><a href="#485817" title="net.liftweb.common.Box[Wizard.this.Screen]">nextScreen</a><span class="delimiter">)</span>
          <a href="#483927" title="object Wizard.this.OnFirstScreen">OnFirstScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Boolean)Boolean">set</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

          <a href="#485817" title="net.liftweb.common.Box[Wizard.this.Screen]">nextScreen</a> <span title="net.liftweb.http.js.JsCmd" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="net.liftweb.http.js.JsCmd">Empty</a> =&gt;
              <span class="keyword">def</span> <a title="(in: List[net.liftweb.db.ConnectionIdentifier])Unit" id="485979">useAndFinish</a><span class="delimiter">(</span><a title="List[net.liftweb.db.ConnectionIdentifier]" id="485980">in</a>: <span title="List[net.liftweb.db.ConnectionIdentifier]">List</span><span class="delimiter">[</span>ConnectionIdentifier<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#485980" title="List[net.liftweb.db.ConnectionIdentifier]">in</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Unit">Nil</span> =&gt; <span class="delimiter">{</span>
                    <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="#483738" title="(id: String)Unit">deregisterWizardSession</a><span class="delimiter">(</span><a href="#483931" title="object Wizard.this.CurrentSession">CurrentSession</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; String">is</a><span class="delimiter">)</span>
                    <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[Vector[Wizard.this.Screen], _])Vector[Wizard.this.Screen]">VisitedScreens</a>.<span title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span>
                      <a title="Wizard.this.Screen" id="486126">s</a> =&gt; <a href="#486126" title="Wizard.this.Screen">s</a>.<a href="#484026" title="()Unit">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                    <a href="#483960" title="()Unit">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
                    <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[Vector[Wizard.this.Screen], _])Vector[Wizard.this.Screen]">VisitedScreens</a>.<span title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span>
                      <a title="Wizard.this.Screen" id="486274">s</a> =&gt; <a href="#486274" title="Wizard.this.Screen">s</a>.<a href="#484027" title="()Unit">postFinish</a><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>

                  <span class="keyword">case</span> <a title="Unit" id="486281">x</a> :: <a title="List[net.liftweb.db.ConnectionIdentifier]" id="486282">xs</a> =&gt; <a href="../../../../db/net/liftweb/db/DB.scala.html#60272" title="implicit net.liftweb.db.DB1.db1ToDb : (in: net.liftweb.db.DB1)net.liftweb.db.DB">DB</a>.<a href="../../../../db/net/liftweb/db/DB.scala.html#60371" title="(name: net.liftweb.db.ConnectionIdentifier)(f: net.liftweb.db.SuperConnection =&gt; Unit)Unit">use</a><span class="delimiter">(</span><a href="#486281" title="net.liftweb.db.ConnectionIdentifier">x</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <a title="net.liftweb.db.SuperConnection" id="486290">conn</a> =&gt;
                      <a href="#485979" title="(in: List[net.liftweb.db.ConnectionIdentifier])Unit">useAndFinish</a><span class="delimiter">(</span><a href="#486282" title="List[net.liftweb.db.ConnectionIdentifier]">xs</a><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
              <a href="#485979" title="(in: List[net.liftweb.db.ConnectionIdentifier])Unit">useAndFinish</a><span class="delimiter">(</span><a href="#483948" title="=&gt; List[net.liftweb.db.ConnectionIdentifier]">dbConnections</a><span class="delimiter">)</span>
              <span title="net.liftweb.http.js.JsCmd" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#373464" title="=&gt; Boolean">ajaxForms_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#483925" title="object Wizard.this.AjaxOnDone">AjaxOnDone</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.http.js.JsCmd">is</a>
              <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#146481" title="=&gt; net.liftweb.http.js.JsCmd">Noop</a>
              <span class="delimiter">}</span>

            <span class="keyword">case</span> <span title="net.liftweb.http.js.JsCmds.SetHtml">_</span> =&gt; <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#379041" title="(uid: String, content: scala.xml.NodeSeq)net.liftweb.http.js.JsCmds.SetHtml">SetHtml</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[String, _])String">FormGUID</a>, <a href="#483939" title="()scala.xml.NodeSeq">renderHtml</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">case</span> <a title="net.liftweb.http.js.JsCmds.SetHtml" id="486310">xs</a> =&gt; <span class="delimiter">{</span>
          <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49552" title="(vi: List[net.liftweb.util.FieldError])Unit">error</a><span class="delimiter">(</span><a href="#486310" title="List[net.liftweb.util.FieldError]">xs</a><span class="delimiter">)</span>
          <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#379041" title="(uid: String, content: scala.xml.NodeSeq)net.liftweb.http.js.JsCmds.SetHtml">SetHtml</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[String, _])String">FormGUID</a>, <a href="#483939" title="()scala.xml.NodeSeq">renderHtml</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; net.liftweb.http.js.JsCmd)net.liftweb.http.js.JsCmd">openOr</a> <a href="#483925" title="object Wizard.this.AjaxOnDone">AjaxOnDone</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.http.js.JsCmd">is</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()net.liftweb.http.js.JsCmd" id="483962">prevScreen</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#14913" title="net.liftweb.http.js.JsCmd">JsCmd</a> = <span class="delimiter">{</span>
    <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="Wizard.this.WizardSnapshot" id="486340">snapshot</a> &lt;- <a href="#483917" title="object Wizard.this.PrevSnapshot">PrevSnapshot</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Wizard.this.WizardSnapshot =&gt; net.liftweb.http.js.JsCmds.SetHtml)net.liftweb.common.Box[net.liftweb.http.js.JsCmds.SetHtml]">is</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="net.liftweb.common.Box[Wizard.this.Screen]" id="486341">cur</a> = <span title="net.liftweb.common.Box[Wizard.this.Screen]" class="keyword">if</span> <span class="delimiter">(</span><a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75379" title="=&gt; Boolean">set_?</a><span class="delimiter">)</span> <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75377" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">get</a> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <a href="#486340" title="Wizard.this.WizardSnapshot">snapshot</a>.<a href="#484112" title="()Unit">restore</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75379" title="=&gt; Boolean">set_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#483945" title="(from: net.liftweb.common.Box[Wizard.this.Screen], to: net.liftweb.common.Box[Wizard.this.Screen])Unit">doTransition</a><span class="delimiter">(</span><a href="#486341" title="net.liftweb.common.Box[Wizard.this.Screen]">cur</a>, <a href="#483915" title="object Wizard.this.CurrentScreen">CurrentScreen</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75377" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">get</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#486341" title="net.liftweb.common.Box[Wizard.this.Screen]">cur</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#486346" title="Wizard.this.Screen">_</a>.<a href="#484019" title="(from: net.liftweb.common.Box[Wizard.this.Screen])Unit">transitionIntoFrom</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#486341" title="net.liftweb.common.Box[Wizard.this.Screen]">cur</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: Wizard.this.Screen =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#486351" title="Wizard.this.Screen">_</a>.<a href="#484028" title="()Unit">enterScreen</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#379041" title="(uid: String, content: scala.xml.NodeSeq)net.liftweb.http.js.JsCmds.SetHtml">SetHtml</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[String, _])String">FormGUID</a>, <a href="#483939" title="()scala.xml.NodeSeq">renderHtml</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; net.liftweb.http.js.JsCmd)net.liftweb.http.js.JsCmd">openOr</a> <a href="#483925" title="object Wizard.this.AjaxOnDone">AjaxOnDone</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.http.js.JsCmd">is</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](implicit man: scala.reflect.Manifest[T])net.liftweb.common.Box[(T, T =&gt; Any) =&gt; scala.xml.NodeSeq]" id="483963">vendForm</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="483965">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="486374">man</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[(T, T =&gt; Any) =&gt; scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span>T, T =&gt; Any<span class="delimiter">)</span> =&gt; NodeSeq<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="comment">/**
   * By default, are all the fields on all the screen in this wizard on the confirm screen?
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="483966">onConfirm_?</a> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="comment">/**
   * Define a screen within this wizard
   */</span>
  <span class="keyword">trait</span> <a title="trait Screen extends java.lang.Object with net.liftweb.http.AbstractScreen with ScalaObject" id="483967">Screen</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#14425" title="net.liftweb.http.AbstractScreen">AbstractScreen</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="484010">myScreenNum</a> = <a href="#483949" title="=&gt; List[Wizard.this.Screen]">screens</a>.<span title="=&gt; Int">length</span>

    <span class="comment">/**
     * The name of the screen.  Override this to change the screen name
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="484012">screenName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;Screen &quot;)" class="string">&quot;Screen &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#484010" title="=&gt; Int">myScreenNum</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="484013">nextButton</a>: <span title="scala.xml.Elem">Elem</span> = <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483954" title="=&gt; scala.xml.Elem">nextButton</a>

    <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="484014">prevButton</a>: <span title="scala.xml.Elem">Elem</span> = <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483955" title="=&gt; scala.xml.Elem">prevButton</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="484015">cancelButton</a>: <span title="scala.xml.Elem">Elem</span> = <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483956" title="=&gt; scala.xml.Elem">cancelButton</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="484016">finishButton</a>: <span title="scala.xml.Elem">Elem</span> = <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483957" title="=&gt; scala.xml.Elem">finishButton</a>

    <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]" id="484017">nextScreen</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span> = <a href="#483952" title="(which: Wizard.this.Screen)net.liftweb.common.Box[Wizard.this.Screen]">calcScreenAfter</a><span class="delimiter">(</span><a href="#483967" title="Wizard.this.Screen" class="keyword">this</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="484018">isLastScreen</a> = <a href="#484017" title="=&gt; net.liftweb.common.Box[Wizard.this.Screen]">nextScreen</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27013" title="=&gt; Boolean">isEmpty</a>

    <span class="comment">/**
     * A notification that we are transitioning into
     * this screen.  Override this method to perform
     * some screen-specific actions
     *
     * @param from the screen we're coming from
     */</span>
    <span class="keyword">def</span> <a title="(from: net.liftweb.common.Box[Wizard.this.Screen])Unit" id="484019">transitionIntoFrom</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[Wizard.this.Screen]" id="484080">from</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * A notification that we are transitioning out of
     * this screen.  Override this method to perform
     * some screen-specific actions
     *
     * @param to the screen we're transitioning to
     */</span>
    <span class="keyword">def</span> <a title="(to: net.liftweb.common.Box[Wizard.this.Screen])Unit" id="484020">transitionOutOfTo</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[Wizard.this.Screen]" id="485679">to</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Wizard.this.Screen]">Box</a><span class="delimiter">[</span>Screen<span class="delimiter">]</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * By default, are all the fields on this screen on the confirm screen?
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="484021">onConfirm_?</a> = <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483966" title="=&gt; Boolean">onConfirm_?</a>


    <span class="comment">/**
     * Is this screen a confirm screen?
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="484022">confirmScreen_?</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="comment">/**
     * Define a field within the screen
     */</span>
    <span class="keyword">trait</span> <a title="trait Field extends java.lang.Object with Screen.this.Field with net.liftweb.util.ConfirmField with ScalaObject" id="484023">Field</a> <span title="ScalaObject" class="keyword">extends</span> <span class="keyword">super</span>.<a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369532" title="Screen.this.Field">Field</a> <span class="keyword">with</span> <a href="../../../../util/net/liftweb/util/BaseField.scala.html#13087" title="net.liftweb.util.ConfirmField">ConfirmField</a> <span class="delimiter">{</span>
      <span class="comment">/**
       * Is this field on the confirm screen
       */</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="486393">onConfirm_?</a> = <a href="#483967" title="Screen.this.type">Screen</a>.<span class="keyword">this</span>.<a href="#484021" title="=&gt; Boolean">onConfirm_?</a>

      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(what: scala.reflect.Manifest[Field.this.ValueType])net.liftweb.common.Box[(Field.this.ValueType, Field.this.ValueType =&gt; Any) =&gt; scala.xml.NodeSeq]" id="486394">otherFuncVendors</a><span class="delimiter">(</span><a title="scala.reflect.Manifest[Field.this.ValueType]" id="486400">what</a>: <span title="scala.reflect.Manifest[Field.this.ValueType]">Manifest</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>:
      <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[(Field.this.ValueType, Field.this.ValueType =&gt; Any) =&gt; scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span>ValueType, ValueType =&gt; Any<span class="delimiter">)</span> =&gt; NodeSeq<span class="delimiter">]</span> =
        <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483963" title="(implicit man: scala.reflect.Manifest[Field.this.ValueType])net.liftweb.common.Box[(Field.this.ValueType, Field.this.ValueType =&gt; Any) =&gt; scala.xml.NodeSeq]">vendForm</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369991" title="=&gt; scala.reflect.Manifest[Field.this.ValueType]">manifest</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[(Field.this.ValueType, Field.this.ValueType =&gt; Any) =&gt; scala.xml.NodeSeq])net.liftweb.common.Box[(Field.this.ValueType, Field.this.ValueType =&gt; Any) =&gt; scala.xml.NodeSeq]">or</a> <a href="#15373" title="object net.liftweb.wizard.WizardRules">WizardRules</a>.<a href="../../../../webkit/net/liftweb/http/LiftRules.scala.html#159278" title="(implicit man: scala.reflect.Manifest[Field.this.ValueType])net.liftweb.common.Box[(Field.this.ValueType, Field.this.ValueType =&gt; Any) =&gt; scala.xml.NodeSeq]">vendForm</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369991" title="=&gt; scala.reflect.Manifest[Field.this.ValueType]">manifest</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483947" title="(screen: Wizard.this.Screen)Unit">_register</a><span class="delimiter">(</span><a href="#483967" title="Wizard.this.Screen" class="keyword">this</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Screen.this._touched" id="484024">_touched</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#483971" title="Wizard.this.WizardVar[Boolean]">WizardVar</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="486419">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * override this method if there's a screen-specific thing
     * to do on finish.  This method is called before the main Wizard's
     * finish method
     */</span>
    <span class="keyword">def</span> <a title="()Unit" id="484026">finish</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * override this method if there's a screen-specific thing
     * to do on finish.  This method is executed after the main Wizards
     * finish() method.
     */</span>
    <span class="keyword">def</span> <a title="()Unit" id="484027">postFinish</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">def</span> <a title="()Unit" id="484028">enterScreen</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[Boolean, _])Boolean">_touched</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#484024" title="object Screen.this._touched">_touched</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Boolean)Boolean">set</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <a href="../../../../webkit/net/liftweb/http/LiftScreen.scala.html#369500" title="()Unit">localSetup</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](dflt: =&gt; T)net.liftweb.util.NonCleanAnyVar[T]" id="484029">vendAVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="484031">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="486453">dflt</a>: =&gt; T<span class="delimiter">)</span>: <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13069" title="net.liftweb.util.NonCleanAnyVar[T]">NonCleanAnyVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#15375" title="Wizard.this.type">Wizard</a>.<span class="keyword">this</span>.<a href="#483968" title="[T](dflt: =&gt; T)net.liftweb.util.NonCleanAnyVar[T]">vendAVar</a><span title="(dflt: =&gt; T)net.liftweb.util.NonCleanAnyVar[T]" class="delimiter">[</span><a href="#484031" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#486453" title="=&gt; T">dflt</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](dflt: =&gt; T)net.liftweb.util.NonCleanAnyVar[T]" id="483968">vendAVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="483970">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="486458">dflt</a>: =&gt; T<span class="delimiter">)</span>: <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13069" title="net.liftweb.util.NonCleanAnyVar[T]">NonCleanAnyVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#486462" title="Wizard.this.WizardVar[T]" class="keyword">new</a> <a title="anonymous class $anon extends Wizard.this.WizardVar[T]" id="486462">WizardVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#486458" title="=&gt; T">dflt</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="486471">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48846" title="(size: Int)String">randomString</a><span class="delimiter">(</span><span title="Int(20)" class="int">20</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Keep request-local information around without the nastiness of naming session variables
   * or the type-unsafety of casting the results.
   * RequestVars share their value through the scope of the current HTTP
   * request. They have no value at the beginning of request servicing
   * and their value is discarded at the end of request processing. They
   * are helpful to share values across many snippets.
   *
   * @param dflt - the default value of the session variable
   */</span>
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class WizardVar[T] extends net.liftweb.util.NonCleanAnyVar[T] with ScalaObject" id="483971">WizardVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="483972">T</a><span class="delimiter">]</span><a href="#483971" title="ScalaObject" class="delimiter">(</a><a title="=&gt; T" id="484070">dflt</a>: =&gt; T<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13069" title="net.liftweb.util.NonCleanAnyVar[T]">NonCleanAnyVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#484070" title="=&gt; T">dflt</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)net.liftweb.common.Box[T]" id="484056">findFunc</a><span class="delimiter">(</span><a title="String" id="486477">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486480" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#486477" title="String">name</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String, value: T)Unit" id="484057">setFunc</a><span class="delimiter">(</span><a title="String" id="486490">name</a>: <span title="String">String</span>, <a title="T" id="486491">value</a>: <a href="#483972" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486483" title="(name: String, from: Wizard.this.WizardVar[_], value: T)Unit">set</a><span class="delimiter">(</span><a href="#486490" title="String">name</a>, <a href="#483971" title="Wizard.this.WizardVar[T]" class="keyword">this</a>, <a href="#486491" title="T">value</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Unit" id="484058">clearFunc</a><span class="delimiter">(</span><a title="String" id="486517">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486486" title="(name: String)Unit">clear</a><span class="delimiter">(</span><a href="#486517" title="String">name</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="484059">wasInitialized</a><span class="delimiter">(</span><a title="String" id="486521">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="486523">bn</a> = <a href="#486521" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;_inited_?&quot;)" class="string">&quot;_inited_?&quot;</span>
      <span class="keyword">val</span> <a title="Boolean" id="486524">old</a>: <span title="Boolean">Boolean</span> = <a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486480" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#486523" title="java.lang.String">bn</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
      <a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486483" title="(name: String, from: Wizard.this.WizardVar[_], value: Boolean)Unit">set</a><span class="delimiter">(</span><a href="#486523" title="java.lang.String">bn</a>, <a href="#483971" title="Wizard.this.WizardVar[T]" class="keyword">this</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <a href="#486524" title="Boolean">old</a>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="484060">testWasSet</a><span class="delimiter">(</span><a title="String" id="486543">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="486545">bn</a> = <a href="#486543" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;_inited_?&quot;)" class="string">&quot;_inited_?&quot;</span>
      <a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486480" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#486543" title="String">name</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#483973" title="object Wizard.this.WizardVarHandler">WizardVarHandler</a>.<a href="#486480" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#486545" title="java.lang.String">bn</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Different Vars require different mechanisms for synchronization. This method implements
     * the Var specific synchronization mechanism
     */</span>
    <span class="keyword">def</span> <a title="[F](f: =&gt; F)F" id="484061">doSync</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="484063">F</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; F" id="486551">f</a>: =&gt; F<span class="delimiter">)</span>: <a href="#484063" title="F">F</a> = <a href="#486551" title="=&gt; F">f</a>

    <span class="comment">// no sync necessary for RequestVars... always on the same thread</span>
  <span class="delimiter">}</span>


  <span class="keyword">private</span><span class="delimiter">[</span>wizard<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object Wizard.this.WizardVarHandler" id="483973">WizardVarHandler</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[T](name: String)net.liftweb.common.Box[T]" id="486480">get</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="486482">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="486487">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">is</a>.<span title="(key: String)Option[(net.liftweb.util.NonCleanAnyVar[_], Any)]">get</span><span class="delimiter">(</span><a href="#486487" title="String">name</a><span class="delimiter">)</span>.<span title="(f: (net.liftweb.util.NonCleanAnyVar[_], Any) =&gt; T)Option[T]">map</span><a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[T])net.liftweb.common.Box[T]" class="delimiter">(</a><a href="#486569" title="(net.liftweb.util.NonCleanAnyVar[_], Any)">_</a>.<span title="=&gt; Any">_2</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#486482" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>


    <span class="keyword">def</span> <a title="[T](name: String, from: Wizard.this.WizardVar[_], value: T)Unit" id="486483">set</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="486485">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="486495">name</a>: <span title="String">String</span>, <a title="Wizard.this.WizardVar[_]" id="486496">from</a>: <a href="#483971" title="Wizard.this.WizardVar[_]">WizardVar</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="T" id="486497">value</a>: <a href="#486485" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      <a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)])Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">set</a><span title="Unit" class="delimiter">(</span><a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">is</a> <span title="(kv: (String, (net.liftweb.util.NonCleanAnyVar[_], Any)))scala.collection.immutable.Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">+</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">name</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: (Wizard.this.WizardVar[_$3], T))(String, (Wizard.this.WizardVar[_$3], T))">-&gt;</a> <span class="delimiter">(</span><a href="#486496" title="Wizard.this.WizardVar[_]">from</a>, <a href="#486497" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(name: String)Unit" id="486486">clear</a><span class="delimiter">(</span><a title="String" id="486519">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      <a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)])Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">set</a><span title="Unit" class="delimiter">(</span><a href="#483913" title="object Wizard.this.ScreenVars">ScreenVars</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">is</a> <span title="(key: String)scala.collection.immutable.Map[String,(net.liftweb.util.NonCleanAnyVar[_], Any)]">-</span> <a href="#486519" title="String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>