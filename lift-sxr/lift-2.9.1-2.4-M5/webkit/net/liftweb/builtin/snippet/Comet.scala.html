<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>webkit/net/liftweb/builtin/snippet/Comet.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2007-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> builtin
<span class="keyword">package</span> snippet

<span class="keyword">import</span> scala.xml._
<span class="keyword">import</span> net.liftweb.http._
<span class="keyword">import</span> net.liftweb.util._
<span class="keyword">import</span> net.liftweb.common._

<span class="keyword">import</span> <a href="../../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._

<span class="keyword">object</span> <a title="object net.liftweb.builtin.snippet.Comet" id="13846">Comet</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../http/StatefulSnippet.scala.html#14717" title="net.liftweb.http.DispatchSnippet">DispatchSnippet</a> <span class="keyword">with</span> <a href="../../../../../common/net/liftweb/common/Logging.scala.html#10718" title="net.liftweb.common.LazyLoggable">LazyLoggable</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.builtin.snippet.Comet.DispatchIt" id="325320">dispatch</a> : <span title="net.liftweb.builtin.snippet.Comet.DispatchIt">DispatchIt</span> = <a href="#325328" title="scala.xml.NodeSeq =&gt; scala.xml.NodeSeq" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="scala.xml.NodeSeq =&gt; scala.xml.NodeSeq">_</span> =&gt; <a href="#325321" title="(kids: scala.xml.NodeSeq)scala.xml.NodeSeq">render</a> _
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(kids: scala.xml.NodeSeq)scala.xml.NodeSeq" id="325321">render</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="325329">kids</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> : <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>

    <a href="../../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../../util/net/liftweb/util/Props.scala.html#151332" title="=&gt; Boolean">inGAE</a> <span title="scala.xml.NodeSeq" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scala.xml.Text" class="keyword">true</span> =&gt; <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Comet Disabled in Google App Engine&quot;)" class="string">&quot;Comet Disabled in Google App Engine&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scala.xml.NodeSeq">_</span> =&gt;  <a href="#325323" title="(kids: scala.xml.NodeSeq)scala.xml.NodeSeq">buildComet</a><span class="delimiter">(</span><a href="#325329" title="scala.xml.NodeSeq">kids</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(timeb: net.liftweb.common.Box[Long], xml: scala.xml.NodeSeq, cometActor: net.liftweb.http.LiftCometActor, spanId: String)scala.xml.NodeSeq" id="325322">buildSpan</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[Long]" id="325337">timeb</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Long]">Box</a><span class="delimiter">[</span>Long<span class="delimiter">]</span>, <a title="scala.xml.NodeSeq" id="325338">xml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span>, <a title="net.liftweb.http.LiftCometActor" id="325339">cometActor</a>: <a href="../../http/CometActor.scala.html#14092" title="net.liftweb.http.LiftCometActor">LiftCometActor</a>, <a title="String" id="325340">spanId</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> =
  <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><a href="#325339" title="net.liftweb.http.LiftCometActor">cometActor</a>.<a href="../../http/CometActor.scala.html#325351" title="=&gt; scala.xml.Elem">parentTag</a>.<span title="=&gt; String">prefix</span>, <a href="#325339" title="net.liftweb.http.LiftCometActor">cometActor</a>.<a href="../../http/CometActor.scala.html#325351" title="=&gt; scala.xml.Elem">parentTag</a>.<span title="=&gt; String">label</span>, <a href="#325339" title="net.liftweb.http.LiftCometActor">cometActor</a>.<a href="../../http/CometActor.scala.html#325351" title="=&gt; scala.xml.Elem">parentTag</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>,
       <a href="#325339" title="net.liftweb.http.LiftCometActor">cometActor</a>.<a href="../../http/CometActor.scala.html#325351" title="=&gt; scala.xml.Elem">parentTag</a>.<span title="=&gt; scala.xml.NamespaceBinding">scope</span>, <span title="(nodes: Seq[scala.xml.Node])scala.xml.Group">Group</span><span class="delimiter">(</span><a href="#325338" title="scala.xml.NodeSeq">xml</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(updates: scala.xml.MetaData)scala.xml.Elem">%</span>
  <span class="delimiter">(</span><span title="scala.xml.UnprefixedAttribute" class="keyword">new</span> <span title="scala.xml.UnprefixedAttribute">UnprefixedAttribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;id&quot;)" class="string">&quot;id&quot;</span>, <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><a href="#325340" title="String">spanId</a><span class="delimiter">)</span>, <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(updates: scala.xml.MetaData)scala.xml.Elem">%</span>
  <span class="delimiter">(</span><a href="#325337" title="net.liftweb.common.Box[Long]">timeb</a>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27026" title="(p: Long =&gt; Boolean)net.liftweb.common.Box[Long]">filter</a><span class="delimiter">(</span><a href="#325376" title="Long">_</a> <span title="(x: Long)Boolean">&gt;</span> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Long =&gt; scala.xml.PrefixedAttribute)net.liftweb.common.Box[scala.xml.PrefixedAttribute]">map</a><span class="delimiter">(</span><a title="Long" id="325385">time</a> =&gt; <span class="delimiter">(</span><span title="scala.xml.PrefixedAttribute" class="keyword">new</span> <span title="scala.xml.PrefixedAttribute">PrefixedAttribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;lift&quot;)" class="string">&quot;lift&quot;</span>, <span title="java.lang.String(&quot;when&quot;)" class="string">&quot;when&quot;</span>, <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><a href="#325385" title="Long">time</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.MetaData)scala.xml.MetaData">openOr</a> <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span>
    
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(kids: scala.xml.NodeSeq)scala.xml.NodeSeq" id="325323">buildComet</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="325335">kids</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> : <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="326236">theType</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../http/S.scala.html#49449" title="object net.liftweb.http.S.attr">attr</a>.<a href="../../http/S.scala.html#196164" title="(key: String)Option[scala.xml.NodeSeq]">~</a><span class="delimiter">(</span><span title="java.lang.String(&quot;type&quot;)" class="string">&quot;type&quot;</span><span class="delimiter">)</span>.<span title="(f: scala.xml.NodeSeq =&gt; String)Option[String]">map</span><a href="../../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[String])net.liftweb.common.Box[String]" class="delimiter">(</a><a href="#326243" title="scala.xml.NodeSeq">_</a>.<span title="=&gt; String">text</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="326237">name</a>: <a href="../../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../../util/net/liftweb/util/BindHelpers.scala.html#196136" title="(key: String)net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info]">currentAttr</a><span class="delimiter">(</span><span title="java.lang.String(&quot;name&quot;)" class="string">&quot;name&quot;</span><span class="delimiter">)</span> <a href="../../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info])net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info]">or</a>
    <a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../../util/net/liftweb/util/BindHelpers.scala.html#196136" title="(key: String)net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info]">currentAttr</a><span class="delimiter">(</span><span title="java.lang.String(&quot;metaname&quot;)" class="string">&quot;metaname&quot;</span><span class="delimiter">)</span>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.S.currentAttr.Info =&gt; net.liftweb.common.Box[String])net.liftweb.common.Box[String]">flatMap</a><span class="delimiter">(</span><a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../http/S.scala.html#49536" title="(n: String)net.liftweb.common.Box[String]">param</a><span class="delimiter">)</span> <a href="../../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info])net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info]">or</a>
    <a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../../util/net/liftweb/util/BindHelpers.scala.html#196136" title="(key: String)net.liftweb.common.Box[net.liftweb.http.S.currentAttr.Info]">currentAttr</a><span class="delimiter">(</span><span title="java.lang.String(&quot;randomname&quot;)" class="string">&quot;randomname&quot;</span><span class="delimiter">)</span>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.S.currentAttr.Info =&gt; String)net.liftweb.common.Box[String]">map</a><span class="delimiter">(</span><a title="net.liftweb.http.S.currentAttr.Info" id="326361">ignore</a> =&gt; <a href="../../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a><span class="delimiter">)</span>


    <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span><a title="net.liftweb.http.LiftSession" id="326370">ctx</a> &lt;- <a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.LiftSession =&gt; scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">session</a><span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#326370" title="net.liftweb.http.LiftSession">ctx</a>.<a href="../../http/LiftSession.scala.html#230327" title="=&gt; Boolean">stateful_?</a><span class="delimiter">)</span> 
        <span title="Nothing" class="keyword">throw</span> <span title="net.liftweb.http.StateInStatelessException" class="keyword">new</span> <a href="../../http/Templates.scala.html#14737" title="net.liftweb.http.StateInStatelessException">StateInStatelessException</a><span class="delimiter">(</span>
          <span title="java.lang.String(&quot;Lift does not support Comet for stateless requests&quot;)" class="string">&quot;Lift does not support Comet for stateless requests&quot;</span><span class="delimiter">)</span>

       <span class="keyword">try</span> <span class="delimiter">{</span>
         <a href="#326370" title="net.liftweb.http.LiftSession">ctx</a>.<a href="../../http/LiftSession.scala.html#230316" title="(theType: net.liftweb.common.Box[String], name: net.liftweb.common.Box[String], defaultXml: scala.xml.NodeSeq, attributes: Map[String,String])net.liftweb.common.Box[net.liftweb.http.LiftCometActor]">findComet</a><span class="delimiter">(</span><a href="#326236" title="net.liftweb.common.Box[String]">theType</a>, <a href="#326237" title="net.liftweb.common.Box[String]">name</a>, <a href="#325335" title="scala.xml.NodeSeq">kids</a>, <a href="../../http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../http/S.scala.html#49442" title="=&gt; Map[String,String]">attrsFlattenToMap</a><span class="delimiter">)</span>.<a href="../../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.LiftCometActor =&gt; scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">map</a> <span class="delimiter">{</span>
           <a title="net.liftweb.http.LiftCometActor" id="326407">c</a> =&gt; <span class="delimiter">{</span>
             <span class="comment">// Update the view on each page load in dev mode</span>
             <span class="comment">// this make development easier</span>
             <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../../util/net/liftweb/util/Props.scala.html#151319" title="=&gt; Boolean">devMode</a><span class="delimiter">)</span> <span class="delimiter">{</span>
               <a href="#326407" title="net.liftweb.http.LiftCometActor">c</a> <a href="../../../../../common/net/liftweb/common/SimpleActor.scala.html#29491" title="(param: Any)Unit">!</a> <a href="../../http/CometActor.scala.html#326411" title="(xml: scala.xml.NodeSeq)net.liftweb.http.UpdateDefaultXml">UpdateDefaultXml</a><span class="delimiter">(</span><a href="#325335" title="scala.xml.NodeSeq">kids</a><span class="delimiter">)</span>
             <span class="delimiter">}</span>
             
             <span class="delimiter">(</span><a href="#326407" title="net.liftweb.http.LiftCometActor">c</a>.<a href="../../../../../common/net/liftweb/common/SimpleActor.scala.html#32912" title="(timeout: Long, message: Any)net.liftweb.common.Box[Any]">!?</a><span class="delimiter">(</span><span title="Long(26600L)" class="long">26600L</span>, <a href="../../http/CometActor.scala.html#14108" title="object net.liftweb.http.AskRender">AskRender</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="scala.xml.NodeSeq" class="keyword">match</span> <span class="delimiter">{</span>
               <span class="keyword">case</span> <span title="scala.xml.NodeSeq">Full</span><span class="delimiter">(</span>AnswerRender<span class="delimiter">(</span><a title="net.liftweb.http.XmlOrJsCmd" id="326509">response</a>, _, <a title="Long" id="326510">when</a>, _<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#326407" title="net.liftweb.http.LiftCometActor">c</a>.<a href="../../http/CometActor.scala.html#325349" title="=&gt; Boolean">hasOuter</a> =&gt;
                 <a href="#325322" title="(timeb: net.liftweb.common.Box[Long], xml: scala.xml.NodeSeq, cometActor: net.liftweb.http.LiftCometActor, spanId: String)scala.xml.NodeSeq">buildSpan</a><span class="delimiter">(</span><a href="../../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <a href="#326407" title="net.liftweb.http.LiftCometActor">c</a>.<a href="../../http/CometActor.scala.html#325350" title="(time: Long, xml: scala.xml.NodeSeq)scala.xml.NodeSeq">buildSpan</a><span class="delimiter">(</span><a href="#326510" title="Long">when</a>, <a href="#326509" title="net.liftweb.http.XmlOrJsCmd">response</a>.<a href="../../http/CometActor.scala.html#326487" title="=&gt; scala.xml.NodeSeq">inSpan</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">++</span> <a href="#326509" title="net.liftweb.http.XmlOrJsCmd">response</a>.<a href="../../http/CometActor.scala.html#326488" title="=&gt; scala.xml.NodeSeq">outSpan</a>, <a href="#326407" title="net.liftweb.http.LiftCometActor">c</a>, <a href="#326407" title="net.liftweb.http.LiftCometActor">c</a>.<a href="../../http/CometActor.scala.html#325343" title="=&gt; String">uniqueId</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;_outer&quot;)" class="string">&quot;_outer&quot;</span><span class="delimiter">)</span>
               
               <span class="keyword">case</span> <span title="scala.xml.NodeSeq">Full</span><span class="delimiter">(</span>AnswerRender<span class="delimiter">(</span><a title="net.liftweb.http.XmlOrJsCmd" id="326565">response</a>, _, <a title="Long" id="326566">when</a>, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                 <a href="#326407" title="net.liftweb.http.LiftCometActor">c</a>.<a href="../../http/CometActor.scala.html#325350" title="(time: Long, xml: scala.xml.NodeSeq)scala.xml.NodeSeq">buildSpan</a><span class="delimiter">(</span><a href="#326566" title="Long">when</a>, <a href="#326565" title="net.liftweb.http.XmlOrJsCmd">response</a>.<a href="../../http/CometActor.scala.html#326487" title="=&gt; scala.xml.NodeSeq">inSpan</a><span class="delimiter">)</span>
               
               <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; 
                 <span title="Nothing" class="keyword">throw</span> <span title="net.liftweb.builtin.snippet.CometTimeoutException" class="keyword">new</span> <a href="#13849" title="net.liftweb.builtin.snippet.CometTimeoutException">CometTimeoutException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;type: &quot;)" class="string">&quot;type: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#326236" title="net.liftweb.common.Box[String]">theType</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; name: &quot;)" class="string">&quot; name: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#326237" title="net.liftweb.common.Box[String]">name</a><span class="delimiter">)</span>
             <span class="delimiter">}</span><span class="delimiter">}</span><span class="delimiter">}</span> <a href="../../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">openOr</a> <span class="delimiter">{</span>
               <span title="Nothing" class="keyword">throw</span> <span title="net.liftweb.builtin.snippet.CometNotFoundException" class="keyword">new</span> <a href="#13850" title="net.liftweb.builtin.snippet.CometNotFoundException">CometNotFoundException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;type: &quot;)" class="string">&quot;type: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#326236" title="net.liftweb.common.Box[String]">theType</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; name: &quot;)" class="string">&quot; name: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#326237" title="net.liftweb.common.Box[String]">name</a><span class="delimiter">)</span>
             <span class="delimiter">}</span>
         
       <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
         <span class="keyword">case</span> <a title="Nothing" id="326587">e</a>: <a href="../../http/Templates.scala.html#14736" title="net.liftweb.http.SnippetFailureException">SnippetFailureException</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#326587" title="net.liftweb.http.SnippetFailureException">e</a>
         <span class="keyword">case</span> <a title="scala.xml.NodeSeq" id="326588">e</a>: <span title="Exception">Exception</span> =&gt; <a href="../../../../../common/net/liftweb/common/Logging.scala.html#43091" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../../common/net/liftweb/common/Logging.scala.html#31961" title="(msg: =&gt; AnyRef, t: Throwable)Unit">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Failed to find a comet actor&quot;)" class="string">&quot;Failed to find a comet actor&quot;</span>, <a href="#326588" title="Exception">e</a><span class="delimiter">)</span>; <a href="#325335" title="scala.xml.NodeSeq">kids</a>
       <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">openOr</a> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="net.liftweb.builtin.snippet.CometNotFoundException" class="keyword">new</span> <a href="#13850" title="net.liftweb.builtin.snippet.CometNotFoundException">CometNotFoundException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Session not found. type: &quot;)" class="string">&quot;Session not found. type: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#326236" title="net.liftweb.common.Box[String]">theType</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; name: &quot;)" class="string">&quot; name: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#326237" title="net.liftweb.common.Box[String]">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class CometFailureException extends net.liftweb.http.SnippetFailureException with ScalaObject" id="13848">CometFailureException</a><a href="#13848" title="ScalaObject" class="delimiter">(</a><a title="String" id="326602">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../http/Templates.scala.html#14736" title="net.liftweb.http.SnippetFailureException">SnippetFailureException</a><span class="delimiter">(</span><a href="#326602" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="326570">buildStackTrace</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> = &lt;<a title="scala.xml.Elem" id="326608">div</a>&gt;<span class="delimiter">{</span><a href="#326602" title="String">msg</a><span class="delimiter">}</span>&lt;/div&gt; <span title="(that: scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">++</span> <a href="#13848" title="net.liftweb.builtin.snippet.CometFailureException" class="keyword">super</a>.<a href="../../http/Templates.scala.html#326383" title="=&gt; scala.xml.NodeSeq">buildStackTrace</a>
<span class="delimiter">}</span>
<span class="keyword">class</span> <a title="class CometTimeoutException extends net.liftweb.builtin.snippet.CometFailureException with ScalaObject" id="13849">CometTimeoutException</a><a href="#13849" title="ScalaObject" class="delimiter">(</a><a title="String" id="326575">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#13848" title="net.liftweb.builtin.snippet.CometFailureException">CometFailureException</a><span class="delimiter">(</span><a href="#326575" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value" id="326574">snippetFailure</a>: LiftRules.SnippetFailures.<span title="net.liftweb.http.LiftRules.SnippetFailures.Value">Value</span> = 
    <a href="../../http/LiftRules.scala.html#14376" title="object net.liftweb.http.LiftRules">LiftRules</a>.<a href="../../http/LiftRules.scala.html#158809" title="object net.liftweb.http.LiftRules.SnippetFailures">SnippetFailures</a>.<a href="../../http/LiftRules.scala.html#326671" title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value">CometTimeout</a>


<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class CometNotFoundException extends net.liftweb.builtin.snippet.CometFailureException with ScalaObject" id="13850">CometNotFoundException</a><a href="#13850" title="ScalaObject" class="delimiter">(</a><a title="String" id="326585">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#13848" title="net.liftweb.builtin.snippet.CometFailureException">CometFailureException</a><span class="delimiter">(</span><a href="#326585" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value" id="326584">snippetFailure</a>: LiftRules.SnippetFailures.<span title="net.liftweb.http.LiftRules.SnippetFailures.Value">Value</span> = 
    <a href="../../http/LiftRules.scala.html#14376" title="object net.liftweb.http.LiftRules">LiftRules</a>.<a href="../../http/LiftRules.scala.html#158809" title="object net.liftweb.http.LiftRules.SnippetFailures">SnippetFailures</a>.<a href="../../http/LiftRules.scala.html#326673" title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value">CometNotFound</a>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>