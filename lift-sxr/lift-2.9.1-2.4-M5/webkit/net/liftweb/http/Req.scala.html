<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>webkit/net/liftweb/http/Req.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2007-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> http

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>InputStream, ByteArrayInputStream, File, FileInputStream,
                       FileOutputStream<span class="delimiter">}</span>
<span class="keyword">import</span> scala.xml._

<span class="keyword">import</span> common._
<span class="keyword">import</span> json._
<span class="keyword">import</span> util._
<span class="keyword">import</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._
<span class="keyword">import</span> http.provider._
<span class="keyword">import</span> sitemap._


<span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator" id="14541">UserAgentCalculator</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#14169" title="net.liftweb.http.Factory">Factory</a> <span class="delimiter">{</span>
  <span class="comment">/**
   * The default regular expression for IE
   */</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="185926">iePattern</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;MSIE ([0-9]+)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="comment">/**
   * You can change the mechanism by which the user agent for IE
   * is calculated by doing the Factory thing with this object
   */</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator.ieCalcFunction" id="185928">ieCalcFunction</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#147868" title="net.liftweb.http.UserAgentCalculator.FactoryMaker[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">FactoryMaker</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; 
    Box<span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Maker.scala.html#150948" title="(value: net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double])net.liftweb.util.Vendor[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">defaultIeCalcFunction</a> _<span class="delimiter">)</span>

  <span class="comment">/**
   * The built-in mechanism for calculating IE
   */</span>
  <span class="keyword">def</span> <a title="(userAgent: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]" id="185930">defaultIeCalcFunction</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[String]" id="405446">userAgent</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = 
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="405538">ua</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; (String, java.util.regex.Matcher))net.liftweb.common.Box[(String, java.util.regex.Matcher)]">userAgent</a>
      <a title="java.util.regex.Matcher" id="405539">m</a> = <a href="#185926" title="=&gt; scala.util.matching.Regex">iePattern</a>.<span title="=&gt; java.util.regex.Pattern">pattern</span>.<span title="(x$1: java.lang.CharSequence)java.util.regex.Matcher">matcher</span><span class="delimiter">(</span><a href="#405538" title="String">ua</a><span class="delimiter">)</span>
      <a title="Double" id="405548">ver</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Double)net.liftweb.common.Box[Double]" class="keyword">if</a> <span class="delimiter">(</span><a href="#405539" title="java.util.regex.Matcher">m</a>.<span title="()Boolean">find</span><span class="delimiter">)</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BasicTypesHelpers.scala.html#49099" title="(in: String)net.liftweb.common.Box[Double]">asDouble</a><span class="delimiter">(</span><a href="#405539" title="java.util.regex.Matcher">m</a>.<span title="(x$1: Int)java.lang.String">group</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#405548" title="Double">ver</a>

  <span class="comment">/**
   * The default regular expression for Safari
   */</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="185931">safariPattern</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;Version.([0-9]+)[.0-9]+ ([^S])*Safari\/&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="comment">/**
   * You can change the mechanism by which the user agent for Safari
   * is calculated by doing the Factory thing with this object
   */</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator.safariCalcFunction" id="185933">safariCalcFunction</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#147868" title="net.liftweb.http.UserAgentCalculator.FactoryMaker[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">FactoryMaker</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; 
    Box<span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Maker.scala.html#150948" title="(value: net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double])net.liftweb.util.Vendor[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">defaultSafariCalcFunction</a> _<span class="delimiter">)</span>

  <span class="comment">/**
   * The built-in mechanism for calculating Safari
   */</span>
  <span class="keyword">def</span> <a title="(userAgent: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]" id="185935">defaultSafariCalcFunction</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[String]" id="405555">userAgent</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = 
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="405643">ua</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; (String, java.util.regex.Matcher))net.liftweb.common.Box[(String, java.util.regex.Matcher)]">userAgent</a>
      <a title="java.util.regex.Matcher" id="405644">m</a> = <a href="#185931" title="=&gt; scala.util.matching.Regex">safariPattern</a>.<span title="=&gt; java.util.regex.Pattern">pattern</span>.<span title="(x$1: java.lang.CharSequence)java.util.regex.Matcher">matcher</span><span class="delimiter">(</span><a href="#405643" title="String">ua</a><span class="delimiter">)</span>
      <a title="Double" id="405653">ver</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Double)net.liftweb.common.Box[Double]" class="keyword">if</a> <span class="delimiter">(</span><a href="#405644" title="java.util.regex.Matcher">m</a>.<span title="()Boolean">find</span><span class="delimiter">)</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BasicTypesHelpers.scala.html#49099" title="(in: String)net.liftweb.common.Box[Double]">asDouble</a><span class="delimiter">(</span><a href="#405644" title="java.util.regex.Matcher">m</a>.<span title="(x$1: Int)java.lang.String">group</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#405653" title="Double">ver</a>

  <span class="comment">/**
   * The default regular expression for Firefox
   */</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="185936">firefoxPattern</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;Firefox.([1-9][0-9]*\.[0-9])&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="comment">/**
   * You can change the mechanism by which the user agent for Firefox
   * is calculated by doing the Factory thing with this object
   */</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator.firefoxCalcFunction" id="185938">firefoxCalcFunction</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#147868" title="net.liftweb.http.UserAgentCalculator.FactoryMaker[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">FactoryMaker</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; 
    Box<span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Maker.scala.html#150948" title="(value: net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double])net.liftweb.util.Vendor[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">defaultFirefoxCalcFunction</a> _<span class="delimiter">)</span>

  <span class="comment">/**
   * The built-in mechanism for calculating Firefox
   */</span>
  <span class="keyword">def</span> <a title="(userAgent: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]" id="185940">defaultFirefoxCalcFunction</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[String]" id="405660">userAgent</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = 
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="405748">ua</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; (String, java.util.regex.Matcher))net.liftweb.common.Box[(String, java.util.regex.Matcher)]">userAgent</a>
      <a title="java.util.regex.Matcher" id="405749">m</a> = <a href="#185936" title="=&gt; scala.util.matching.Regex">firefoxPattern</a>.<span title="=&gt; java.util.regex.Pattern">pattern</span>.<span title="(x$1: java.lang.CharSequence)java.util.regex.Matcher">matcher</span><span class="delimiter">(</span><a href="#405748" title="String">ua</a><span class="delimiter">)</span>
      <a title="Double" id="405758">ver</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Double)net.liftweb.common.Box[Double]" class="keyword">if</a> <span class="delimiter">(</span><a href="#405749" title="java.util.regex.Matcher">m</a>.<span title="()Boolean">find</span><span class="delimiter">)</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BasicTypesHelpers.scala.html#49099" title="(in: String)net.liftweb.common.Box[Double]">asDouble</a><span class="delimiter">(</span><a href="#405749" title="java.util.regex.Matcher">m</a>.<span title="(x$1: Int)java.lang.String">group</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#405758" title="Double">ver</a>

  <span class="comment">/**
   * The default regular expression for Chrome
   */</span>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="185941">chromePattern</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;Chrome.([1-9][0-9]*\.[0-9])&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="comment">/**
   * You can change the mechanism by which the user agent for Chrome
   * is calculated by doing the Factory thing with this object
   */</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator.chromeCalcFunction" id="185943">chromeCalcFunction</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#147868" title="net.liftweb.http.UserAgentCalculator.FactoryMaker[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">FactoryMaker</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; 
    Box<span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Maker.scala.html#150948" title="(value: net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double])net.liftweb.util.Vendor[net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]]">defaultChromeCalcFunction</a> _<span class="delimiter">)</span>

  <span class="comment">/**
   * You can change the mechanism by which Lift calculates
   * if the User-Agent represents an iPhone.  Put your
   * special calculation function in here
   */</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator.iPhoneCalcFunction" id="185945">iPhoneCalcFunction</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#147868" title="net.liftweb.http.UserAgentCalculator.FactoryMaker[net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean]]">FactoryMaker</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; 
    Boolean<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Maker.scala.html#150948" title="(value: net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean])net.liftweb.util.Vendor[net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean]]">Empty</a><span class="delimiter">)</span>

  <span class="comment">/**
   * You can change the mechanism by which Lift calculates
   * if the User-Agent represents an iPad.  Put your
   * special calculation function in here
   */</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.UserAgentCalculator.iPadCalcFunction" id="185947">iPadCalcFunction</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Factory.scala.html#147868" title="net.liftweb.http.UserAgentCalculator.FactoryMaker[net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean]]">FactoryMaker</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; 
    Boolean<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Maker.scala.html#150948" title="(value: net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean])net.liftweb.util.Vendor[net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean]]">Empty</a><span class="delimiter">)</span>


  <span class="comment">/**
   * The built-in mechanism for calculating Chrome
   */</span>
  <span class="keyword">def</span> <a title="(userAgent: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]" id="185949">defaultChromeCalcFunction</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[String]" id="405765">userAgent</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = 
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="405991">ua</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; (String, java.util.regex.Matcher))net.liftweb.common.Box[(String, java.util.regex.Matcher)]">userAgent</a>
      <a title="java.util.regex.Matcher" id="405992">m</a> = <a href="#185941" title="=&gt; scala.util.matching.Regex">chromePattern</a>.<span title="=&gt; java.util.regex.Pattern">pattern</span>.<span title="(x$1: java.lang.CharSequence)java.util.regex.Matcher">matcher</span><span class="delimiter">(</span><a href="#405991" title="String">ua</a><span class="delimiter">)</span>
      <a title="Double" id="406001">ver</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Double)net.liftweb.common.Box[Double]" class="keyword">if</a> <span class="delimiter">(</span><a href="#405992" title="java.util.regex.Matcher">m</a>.<span title="()Boolean">find</span><span class="delimiter">)</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BasicTypesHelpers.scala.html#49099" title="(in: String)net.liftweb.common.Box[Double]">asDouble</a><span class="delimiter">(</span><a href="#405992" title="java.util.regex.Matcher">m</a>.<span title="(x$1: Int)java.lang.String">group</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#406001" title="Double">ver</a>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait UserAgentCalculator extends java.lang.Object with ScalaObject" id="14543">UserAgentCalculator</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[Int]" id="149248">ieVersion</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Int]">Box</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="#14541" title="object net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>.<a href="#185928" title="object net.liftweb.http.UserAgentCalculator.ieCalcFunction">ieCalcFunction</a>.<a href="Factory.scala.html#159330" title="=&gt; net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]">vend</a>.<span title="(v1: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]">apply</span><span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Int)net.liftweb.common.Box[Int]">map</a><span class="delimiter">(</span><a href="#406073" title="Double">_</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149250">isIE6</a>: <span title="Boolean">Boolean</span> = <a href="#149247" title="=&gt; net.liftweb.common.Box[Int]">ieVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406079" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(6)" class="int">6</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149252">isIE7</a>: <span title="Boolean">Boolean</span> = <a href="#149247" title="=&gt; net.liftweb.common.Box[Int]">ieVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406091" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(7)" class="int">7</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149254">isIE8</a>: <span title="Boolean">Boolean</span> = <a href="#149247" title="=&gt; net.liftweb.common.Box[Int]">ieVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406103" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149256">isIE9</a>: <span title="Boolean">Boolean</span> = <a href="#149247" title="=&gt; net.liftweb.common.Box[Int]">ieVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406115" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(9)" class="int">9</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149258">isIE</a> = <a href="#149247" title="=&gt; net.liftweb.common.Box[Int]">ieVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406009" title="Int">_</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(6)" class="int">6</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[Int]" id="149260">safariVersion</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Int]">Box</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> = 
    <a href="#14541" title="object net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>.<a href="#185933" title="object net.liftweb.http.UserAgentCalculator.safariCalcFunction">safariCalcFunction</a>.<a href="Factory.scala.html#159330" title="=&gt; net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]">vend</a>.<span title="(v1: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]">apply</span><span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Int)net.liftweb.common.Box[Int]">map</a><span class="delimiter">(</span><a href="#406128" title="Double">_</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149261">isSafari2</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149263">isSafari3</a>: <span title="Boolean">Boolean</span> = <a href="#149259" title="=&gt; net.liftweb.common.Box[Int]">safariVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406136" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149265">isSafari4</a>: <span title="Boolean">Boolean</span> = <a href="#149259" title="=&gt; net.liftweb.common.Box[Int]">safariVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406148" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149267">isSafari5</a>: <span title="Boolean">Boolean</span> = <a href="#149259" title="=&gt; net.liftweb.common.Box[Int]">safariVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406160" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149268">isSafari3_+</a> = <a href="#149259" title="=&gt; net.liftweb.common.Box[Int]">safariVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Int =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#358284" title="Int">_</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149269">isSafari</a> = <a href="#149259" title="=&gt; net.liftweb.common.Box[Int]">safariVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a>

  <span class="comment">/**
   * Is the Req coming from an iPhone
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149271">isIPhone</a>: <span title="Boolean">Boolean</span> = 
    <a href="#14541" title="object net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>.<a href="#185945" title="object net.liftweb.http.UserAgentCalculator.iPhoneCalcFunction">iPhoneCalcFunction</a>.<a href="Factory.scala.html#159330" title="=&gt; net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean]">vend</a>.
  <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.common.Box[String] =&gt; Boolean =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406176" title="net.liftweb.common.Box[String] =&gt; Boolean">_</a>.<span title="(v1: net.liftweb.common.Box[String])Boolean">apply</span><span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> 
    <a href="#149269" title="=&gt; Boolean">isSafari</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="String" id="406185">s</a> =&gt; 
      <a href="#406185" title="String">s</a>.<span title="(x$1: java.lang.String)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;(iPhone&quot;)" class="string">&quot;(iPhone&quot;</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Is the Req coming from an iPad
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149273">isIPad</a>: <span title="Boolean">Boolean</span> = 
    <a href="#14541" title="object net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>.<a href="#185947" title="object net.liftweb.http.UserAgentCalculator.iPadCalcFunction">iPadCalcFunction</a>.<a href="Factory.scala.html#159330" title="=&gt; net.liftweb.common.Box[net.liftweb.common.Box[String] =&gt; Boolean]">vend</a>.
  <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.common.Box[String] =&gt; Boolean =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406203" title="net.liftweb.common.Box[String] =&gt; Boolean">_</a>.<span title="(v1: net.liftweb.common.Box[String])Boolean">apply</span><span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> 
  <a href="#149269" title="=&gt; Boolean">isSafari</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="String" id="406212">s</a> =&gt;
    <a href="#406212" title="String">s</a>.<span title="(x$1: java.lang.String)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;(iPad&quot;)" class="string">&quot;(iPad&quot;</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[Double]" id="149275">firefoxVersion</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = 
    <a href="#14541" title="object net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>.<a href="#185938" title="object net.liftweb.http.UserAgentCalculator.firefoxCalcFunction">firefoxCalcFunction</a>.<a href="Factory.scala.html#159330" title="=&gt; net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]">vend</a>.<span title="(v1: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]">apply</span><span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149277">isFirefox2</a>: <span title="Boolean">Boolean</span> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406231">v</a> =&gt; <a href="#406231" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(2.0)" class="double">2d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406231" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(3.0)" class="double">3d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149279">isFirefox3</a>: <span title="Boolean">Boolean</span> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406247">v</a> =&gt; <a href="#406247" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(3.0)" class="double">3d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406247" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(3.5)" class="double">3.5d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149281">isFirefox35</a>: <span title="Boolean">Boolean</span> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406263">v</a> =&gt; <a href="#406263" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(3.5)" class="double">3.5d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406263" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(3.6)" class="double">3.6d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149283">isFirefox36</a>: <span title="Boolean">Boolean</span> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406279">v</a> =&gt; <a href="#406279" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(3.6)" class="double">3.6d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406279" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(4.0)" class="double">4d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149285">isFirefox40</a>: <span title="Boolean">Boolean</span> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406295">v</a> =&gt; <a href="#406295" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(4.0)" class="double">4d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149286">isFirefox35_+</a> : <span title="Boolean">Boolean</span> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#406307" title="Double">_</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(3.5)" class="double">3.5d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149287">isFirefox</a> = <a href="#149274" title="=&gt; net.liftweb.common.Box[Double]">firefoxVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a>


  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[Double]" id="149289">chromeVersion</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = 
    <a href="#14541" title="object net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>.<a href="#185943" title="object net.liftweb.http.UserAgentCalculator.chromeCalcFunction">chromeCalcFunction</a>.<a href="Factory.scala.html#159330" title="=&gt; net.liftweb.common.Box[String] =&gt; net.liftweb.common.Box[Double]">vend</a>.<span title="(v1: net.liftweb.common.Box[String])net.liftweb.common.Box[Double]">apply</span><span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149291">isChrome2</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406022">v</a> =&gt; <a href="#406022" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(2.0)" class="double">2d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406022" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(3.0)" class="double">3d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149293">isChrome3</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406038">v</a> =&gt; <a href="#406038" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(3.0)" class="double">3d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406038" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(4.0)" class="double">4d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149295">isChrome4</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="406054">v</a> =&gt; <a href="#406054" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(4.0)" class="double">4d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406054" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(5.0)" class="double">5d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149297">isChrome5</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="349899">v</a> =&gt; <a href="#349899" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(5.0)" class="double">5d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#349899" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(6.0)" class="double">6d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149299">isChrome6</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="Double" id="349917">v</a> =&gt; <a href="#349917" title="Double">v</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(6.0)" class="double">6d</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#349917" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(7.0)" class="double">7d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149300">isChrome3_+</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Double =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#358266" title="Double">_</a> <span title="(x: Double)Boolean">&gt;=</span> <span title="Double(3.0)" class="double">3d</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149301">isChrome</a> = <a href="#149288" title="=&gt; net.liftweb.common.Box[Double]">chromeVersion</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149303">isOpera9</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">(</span><a href="#149305" title="=&gt; net.liftweb.common.Box[String]">userAgent</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a title="String" id="406326">s</a> =&gt; <a href="#406326" title="String">s</a>.<span title="(x$1: java.lang.String)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Opera/9.&quot;)" class="string">&quot;Opera/9.&quot;</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149304">isOpera</a> = <a href="#149302" title="=&gt; Boolean">isOpera9</a>

  <span class="comment">/**
   * What's the user agent?
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[String]" id="149305">userAgent</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span>
<span class="delimiter">}</span>

@serializable
<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait ParamHolder extends java.lang.Object" id="14544">ParamHolder</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="349700">name</a>: <span title="String">String</span>
<span class="delimiter">}</span>
@serializable
<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class NormalParamHolder extends java.lang.Object with net.liftweb.http.ParamHolder with ScalaObject with Product with Serializable" id="412181">NormalParamHolder</a><a href="#412181" title="ScalaObject" class="delimiter">(</a><a title="String" id="412176">name</a>: <span title="String">String</span>, <a title="String" id="412177">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14544" title="net.liftweb.http.ParamHolder">ParamHolder</a>

<span class="comment">/**
 * A FileParamHolder contains a file uploaded via a multipart
 * form.
 *
 * @param name The name of the form field for this file
 * @param mimeType the mime type, as specified in the Content-Type field
 * @param fileName The local filename on the client
 */</span>
@serializable
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class FileParamHolder extends java.lang.Object with net.liftweb.http.ParamHolder with ScalaObject" id="14548">FileParamHolder</a><a href="#14548" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="406420">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="406421">mimeType</a>: <span title="String">String</span>,
                               <span class="keyword">val</span> <a title="String" id="406422">fileName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14544" title="net.liftweb.http.ParamHolder">ParamHolder</a>
<span class="delimiter">{</span>
  <span class="comment">/**
   * Returns the contents of the uploaded file as a Byte array.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Array[Byte]" id="349711">file</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>

  <span class="comment">/**
   * Returns an input stream that can be used to read the
   * contents of the uploaded file.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.InputStream" id="349712">fileStream</a>: <span title="java.io.InputStream">InputStream</span>

  <span class="comment">/**
   * Returns the length of the uploaded file.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="349713">length</a> : <span title="Long">Long</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * This FileParamHolder stores the uploaded file directly into memory.
 *
 * @param name The name of the form field for this file
 * @param mimeType the mime type, as specified in the Content-Type field
 * @param fileName The local filename on the client
 * @param file The contents of the uploaded file in a byte array
 */</span>
<span class="keyword">class</span> <a title="class InMemFileParamHolder extends net.liftweb.http.FileParamHolder with ScalaObject" id="14549">InMemFileParamHolder</a><a href="#14549" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="365165">name</a>: <span title="String">String</span>, <span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="365166">mimeType</a>: <span title="String">String</span>,
                           <span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="365167">fileName</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Array[Byte]" id="365168">file</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span>
<a href="#14548" title="net.liftweb.http.FileParamHolder">FileParamHolder</a><span class="delimiter">(</span><a href="#365165" title="String">name</a>, <a href="#365166" title="String">mimeType</a>, <a href="#365167" title="String">fileName</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
  <span class="comment">/**
   * Returns an input stream that can be used to read the
   * contents of the uploaded file.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.InputStream" id="365163">fileStream</a>: <span title="java.io.InputStream">InputStream</span> = <span title="java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#365168" title="=&gt; Array[Byte]">file</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns the length of the uploaded file.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="365164">length</a> : <span title="Long">Long</span> = <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#365168" title="=&gt; Array[Byte]">file</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Long(0L)" class="int">0</span> <span class="keyword">else</span> <a href="#365168" title="=&gt; Array[Byte]">file</a>.<span title="=&gt; Long">length</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * This FileParamHolder stores the uploaded file in a
 * temporary file on disk.
 *
 * @param name The name of the form field for this file
 * @param mimeType the mime type, as specified in the Content-Type field
 * @param fileName The local filename on the client
 * @param localFile The local copy of the uploaded file
 */</span>
<span class="keyword">class</span> <a title="class OnDiskFileParamHolder extends net.liftweb.http.FileParamHolder with ScalaObject" id="14550">OnDiskFileParamHolder</a><a href="#14550" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="406466">name</a>: <span title="String">String</span>, <span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="406467">mimeType</a>: <span title="String">String</span>,
                            <span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="406468">fileName</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="java.io.File" id="406469">localFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="keyword">extends</span>
<a href="#14548" title="net.liftweb.http.FileParamHolder">FileParamHolder</a><span class="delimiter">(</span><a href="#406466" title="String">name</a>, <a href="#406467" title="String">mimeType</a>, <a href="#406468" title="String">fileName</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
  <span class="comment">/**
   * Returns an input stream that can be used to read the
   * contents of the uploaded file.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.InputStream" id="406457">fileStream</a>: <span title="java.io.InputStream">InputStream</span> = <span title="(x$1: java.io.File)java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#406469" title="=&gt; java.io.File">localFile</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns the contents of the uploaded file as a Byte array.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Array[Byte]" id="406458">file</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/IoHelpers.scala.html#49075" title="(in: java.io.InputStream)Array[Byte]">readWholeStream</a><span class="delimiter">(</span><a href="#406457" title="=&gt; java.io.InputStream">fileStream</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns the length of the uploaded file.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="406459">length</a> : <span title="Long">Long</span> = <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#406469" title="=&gt; java.io.File">localFile</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Long(0L)" class="int">0</span> <span class="keyword">else</span> <a href="#406469" title="=&gt; java.io.File">localFile</a>.<span title="()Long">length</span>

  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="406460">finalize</a> <span class="delimiter">{</span>
    <a href="../../../../util/net/liftweb/util/ControlHelpers.scala.html#48608" title="(f: =&gt; Boolean)net.liftweb.common.Box[Boolean]">tryo</a><span title="Unit" class="delimiter">(</span><a href="#406469" title="=&gt; java.io.File">localFile</a>.<span title="()Boolean">delete</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.http.OnDiskFileParamHolder" id="14551">OnDiskFileParamHolder</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(n: String, mt: String, fn: String, inputStream: java.io.InputStream)net.liftweb.http.OnDiskFileParamHolder" id="406526">apply</a><span class="delimiter">(</span><a title="String" id="406528">n</a>: <span title="String">String</span>, <a title="String" id="406529">mt</a>: <span title="String">String</span>, <a title="String" id="406530">fn</a>: <span title="String">String</span>, <a title="java.io.InputStream" id="406531">inputStream</a>: <span title="java.io.InputStream">InputStream</span><span class="delimiter">)</span>: <a href="#14550" title="net.liftweb.http.OnDiskFileParamHolder">OnDiskFileParamHolder</a> =
  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.File" id="406533">file</a>: <span title="java.io.File">File</span> = <span title="object java.io.File">File</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.io.File">createTempFile</span><span class="delimiter">(</span><span title="java.lang.String(&quot;lift_mime&quot;)" class="string">&quot;lift_mime&quot;</span>, <span title="java.lang.String(&quot;upload&quot;)" class="string">&quot;upload&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.io.FileOutputStream" id="406534">fos</a> = <span title="(x$1: java.io.File)java.io.FileOutputStream" class="keyword">new</span> <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#406533" title="java.io.File">file</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[Byte]" id="406535">ba</a> = <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(8192)" class="int">8192</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()Unit" id="406536">doUpload</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#406531" title="java.io.InputStream">inputStream</a>.<span title="(x$1: Array[Byte])Int">read</span><span class="delimiter">(</span><a href="#406535" title="Array[Byte]">ba</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="406572">x</a> <span class="keyword">if</span> <a href="#406572" title="Int">x</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> =&gt;
        <span class="keyword">case</span> <span title="Unit" class="int">0</span> =&gt; <a href="#406536" title="()Unit">doUpload</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="406577">x</a> =&gt; <a href="#406534" title="java.io.FileOutputStream">fos</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#406535" title="Array[Byte]">ba</a>, <span title="Int(0)" class="int">0</span>, <a href="#406577" title="Int">x</a><span class="delimiter">)</span>; <a href="#406536" title="()Unit">doUpload</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>

    <a href="#406536" title="()Unit">doUpload</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#406531" title="java.io.InputStream">inputStream</a>.<span title="()Unit">close</span>
    <a href="#406534" title="java.io.FileOutputStream">fos</a>.<span title="()Unit">close</span>
    <span title="net.liftweb.http.OnDiskFileParamHolder" class="keyword">new</span> <a href="#14550" title="net.liftweb.http.OnDiskFileParamHolder">OnDiskFileParamHolder</a><span class="delimiter">(</span><a href="#406528" title="String">n</a>, <a href="#406529" title="String">mt</a>, <a href="#406530" title="String">fn</a>, <a href="#406533" title="java.io.File">file</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.http.FileParamHolder" id="406604">FileParamHolder</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(n: String, mt: String, fn: String, file: Array[Byte])net.liftweb.http.FileParamHolder" id="390229">apply</a><span class="delimiter">(</span><a title="String" id="406581">n</a>: <span title="String">String</span>, <a title="String" id="406582">mt</a>: <span title="String">String</span>, <a title="String" id="406583">fn</a>: <span title="String">String</span>, <a title="Array[Byte]" id="406584">file</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14548" title="net.liftweb.http.FileParamHolder">FileParamHolder</a> =
  <span title="net.liftweb.http.InMemFileParamHolder" class="keyword">new</span> <a href="#14549" title="net.liftweb.http.InMemFileParamHolder">InMemFileParamHolder</a><span class="delimiter">(</span><a href="#406581" title="String">n</a>, <a href="#406582" title="String">mt</a>, <a href="#406583" title="String">fn</a>, <a href="#406584" title="Array[Byte]">file</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(in: Any)Option[(String, String, String, Array[Byte])]" id="390230">unapply</a><span class="delimiter">(</span><a title="Any" id="406586">in</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Option[(String, String, String, Array[Byte])]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String, String, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#406586" title="Any">in</a> <span title="Option[(String, String, String, Array[Byte])]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Some[(String, String, String, Array[Byte])]" id="406588">f</a>: <a href="#14548" title="net.liftweb.http.FileParamHolder">FileParamHolder</a> =&gt; <span title="(x: (String, String, String, Array[Byte]))Some[(String, String, String, Array[Byte])]">Some</span><span class="delimiter">(</span><span title="(_1: String, _2: String, _3: String, _4: Array[Byte])(String, String, String, Array[Byte])" class="delimiter">(</span><a href="#406588" title="net.liftweb.http.FileParamHolder">f</a>.<a href="#406420" title="=&gt; String">name</a>, <a href="#406588" title="net.liftweb.http.FileParamHolder">f</a>.<a href="#406421" title="=&gt; String">mimeType</a>, <a href="#406588" title="net.liftweb.http.FileParamHolder">f</a>.<a href="#406422" title="=&gt; String">fileName</a>, <a href="#406588" title="net.liftweb.http.FileParamHolder">f</a>.<a href="#349711" title="=&gt; Array[Byte]">file</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A Thread-global containing the current Req.  Set very, very early
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.CurrentReq" id="14555">CurrentReq</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[net.liftweb.http.Req]">ThreadGlobal</a><span class="delimiter">[</span>Req<span class="delimiter">]</span>

<span class="comment">/**
 * A ThreadGlobal containing the low-level HTTPRequest and HTTPResponse instances
 * Set very, very early.
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.CurrentHTTPReqResp" id="14557">CurrentHTTPReqResp</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[(net.liftweb.http.provider.HTTPRequest, net.liftweb.http.provider.HTTPResponse)]">ThreadGlobal</a><span class="delimiter">[</span><span class="delimiter">(</span>HTTPRequest, HTTPResponse<span class="delimiter">)</span><span class="delimiter">]</span>

<span class="keyword">private</span> <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class AvoidGAL extends java.lang.Object with ScalaObject with Product with Serializable" id="412172">AvoidGAL</a><a href="#412172" title="ScalaObject" class="delimiter">(</a><a title="() =&gt; net.liftweb.http.ParamCalcInfo" id="412130">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; ParamCalcInfo<span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.http.ParamCalcInfo" id="406613">thunk</a>: <a href="#412119" title="net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a> = <a href="#412130" title="()net.liftweb.http.ParamCalcInfo">func</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Helper object for constructing Req instances
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.Req" id="14562">Req</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">object</span> <a title="object net.liftweb.http.Req.NilPath" id="406685">NilPath</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.lang.String" id="185910">localHostName</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> java.net._
    <span title="object java.net.InetAddress">InetAddress</span>.<span title="()java.net.InetAddress">getLocalHost</span>.<span title="()java.lang.String">getHostName</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(original: net.liftweb.http.Req, rewrite: List[net.liftweb.http.LiftRules.RewritePF])net.liftweb.http.Req" id="185911">apply</a><span class="delimiter">(</span><a title="net.liftweb.http.Req" id="406686">original</a>: <a href="#14573" title="net.liftweb.http.Req">Req</a>, <a title="List[net.liftweb.http.LiftRules.RewritePF]" id="406687">rewrite</a>: <span title="List[net.liftweb.http.LiftRules.RewritePF]">List</span><span class="delimiter">[</span>LiftRules.RewritePF<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14573" title="net.liftweb.http.Req">Req</a> = 
    <span class="keyword">this</span>.<a href="#185912" title="(original: net.liftweb.http.Req, rewrite: List[net.liftweb.http.LiftRules.RewritePF], statelessTest: List[net.liftweb.http.LiftRules.StatelessTestPF], otherStatelessTest: List[net.liftweb.http.LiftRules.StatelessReqTestPF])net.liftweb.http.Req">apply</a><span class="delimiter">(</span><a href="#406686" title="net.liftweb.http.Req">original</a>, <a href="#406687" title="List[net.liftweb.http.LiftRules.RewritePF]">rewrite</a>, <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(original: net.liftweb.http.Req, rewrite: List[net.liftweb.http.LiftRules.RewritePF], statelessTest: List[net.liftweb.http.LiftRules.StatelessTestPF], otherStatelessTest: List[net.liftweb.http.LiftRules.StatelessReqTestPF])net.liftweb.http.Req" id="185912">apply</a><span class="delimiter">(</span><a title="net.liftweb.http.Req" id="406701">original</a>: <a href="#14573" title="net.liftweb.http.Req">Req</a>, <a title="List[net.liftweb.http.LiftRules.RewritePF]" id="406702">rewrite</a>: <span title="List[net.liftweb.http.LiftRules.RewritePF]">List</span><span class="delimiter">[</span>LiftRules.RewritePF<span class="delimiter">]</span>, <a title="List[net.liftweb.http.LiftRules.StatelessTestPF]" id="406703">statelessTest</a>: <span title="List[net.liftweb.http.LiftRules.StatelessTestPF]">List</span><span class="delimiter">[</span>LiftRules.StatelessTestPF<span class="delimiter">]</span>,
            <a title="List[net.liftweb.http.LiftRules.StatelessReqTestPF]" id="406704">otherStatelessTest</a>: <span title="List[net.liftweb.http.LiftRules.StatelessReqTestPF]">List</span><span class="delimiter">[</span>LiftRules.StatelessReqTestPF<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14573" title="net.liftweb.http.Req">Req</a> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse" id="406706">processRewrite</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="406710">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>, <a title="Map[String,String]" id="406711">params</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a> =
    <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#13548" title="object net.liftweb.util.NamedPF">NamedPF</a>.<a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185585" title="(value: net.liftweb.http.RewriteRequest, lst: Seq[PartialFunction[net.liftweb.http.RewriteRequest,net.liftweb.http.RewriteResponse]])net.liftweb.common.Box[net.liftweb.http.RewriteResponse]">applyBox</a><span class="delimiter">(</span><a href="#412115" title="(path: net.liftweb.http.ParsePath, requestType: net.liftweb.http.RequestType, httpRequest: net.liftweb.http.provider.HTTPRequest)net.liftweb.http.RewriteRequest">RewriteRequest</a><span class="delimiter">(</span><a href="#406710" title="net.liftweb.http.ParsePath">path</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a><span class="delimiter">)</span>, <a href="#406702" title="List[net.liftweb.http.LiftRules.RewritePF]">rewrite</a><span class="delimiter">)</span> <span title="net.liftweb.http.RewriteResponse" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.RewriteResponse">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.RewriteResponse" id="406749">resp</a>@RewriteResponse<span class="delimiter">(</span>_, _, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#406749" title="net.liftweb.http.RewriteResponse">resp</a>
      <span class="keyword">case</span> <span title="net.liftweb.http.RewriteResponse">_</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10583" title="net.liftweb.common.EmptyBox">EmptyBox</a> =&gt; <a href="#216939" title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#406710" title="net.liftweb.http.ParsePath">path</a>, <a href="#406711" title="Map[String,String]">params</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.RewriteResponse">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.RewriteResponse" id="406785">resp</a><span class="delimiter">)</span> =&gt; <a href="#406706" title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse">processRewrite</a><span class="delimiter">(</span><a href="#406785" title="net.liftweb.http.RewriteResponse">resp</a>.<a href="#216944" title="=&gt; net.liftweb.http.ParsePath">path</a>, <a href="#406711" title="Map[String,String]">params</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, String)])scala.collection.immutable.Map[String,String]">++</span> <a href="#406785" title="net.liftweb.http.RewriteResponse">resp</a>.<a href="#216945" title="=&gt; Map[String,String]">params</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="net.liftweb.http.RewriteResponse" id="406707">rewritten</a> = <a href="#406706" title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse">processRewrite</a><span class="delimiter">(</span><a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[java.lang.String]" id="406708">wholePath</a> = <a href="#406707" title="net.liftweb.http.RewriteResponse">rewritten</a>.<a href="#216944" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="#216857" title="=&gt; List[java.lang.String]">wholePath</a>


    <span class="keyword">val</span> <a title="net.liftweb.common.Box[Boolean]" id="406709">stateless</a> =  <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#13548" title="object net.liftweb.util.NamedPF">NamedPF</a>.<a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185585" title="(value: net.liftweb.http.StatelessReqTest, lst: Seq[PartialFunction[net.liftweb.http.StatelessReqTest,Boolean]])net.liftweb.common.Box[Boolean]">applyBox</a><span class="delimiter">(</span><a href="LiftRules.scala.html#356681" title="(path: List[String], httpReq: net.liftweb.http.provider.HTTPRequest)net.liftweb.http.StatelessReqTest">StatelessReqTest</a><span class="delimiter">(</span><a href="#406708" title="List[java.lang.String]">wholePath</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a><span class="delimiter">)</span>, <a href="#406704" title="List[net.liftweb.http.LiftRules.StatelessReqTestPF]">otherStatelessTest</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[Boolean])net.liftweb.common.Box[Boolean]">or</a>
      <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#13548" title="object net.liftweb.util.NamedPF">NamedPF</a>.<a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185585" title="(value: List[java.lang.String], lst: Seq[PartialFunction[List[java.lang.String],Boolean]])net.liftweb.common.Box[Boolean]">applyBox</a><span class="delimiter">(</span><a href="#406708" title="List[java.lang.String]">wholePath</a>, <a href="#406703" title="List[net.liftweb.http.LiftRules.StatelessTestPF]">statelessTest</a><span class="delimiter">)</span>

    <span title="net.liftweb.http.Req" class="keyword">new</span> <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">(</span><a href="#406707" title="net.liftweb.http.RewriteResponse">rewritten</a>.<a href="#216944" title="=&gt; net.liftweb.http.ParsePath">path</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328131" title="=&gt; String">contextPath</a>, 
            <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>,
            <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328135" title="=&gt; Long">nanoStart</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328136" title="=&gt; Long">nanoEnd</a>, 
            <a href="#406709" title="net.liftweb.common.Box[Boolean]">stateless</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#149160" title="=&gt; Boolean">stateless_?</a>,
            <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328138" title="=&gt; () =&gt; net.liftweb.http.ParamCalcInfo">paramCalculator</a>, <a href="#406701" title="net.liftweb.http.Req">original</a>.<a href="#328139" title="=&gt; Map[String,String]">addlParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, String)])scala.collection.immutable.Map[String,String]">++</span> <a href="#406707" title="net.liftweb.http.RewriteResponse">rewritten</a>.<a href="#216945" title="=&gt; Map[String,String]">params</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(request: net.liftweb.http.provider.HTTPRequest, rewrite: List[net.liftweb.http.LiftRules.RewritePF], nanoStart: Long)net.liftweb.http.Req" id="185913">apply</a><span class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPRequest" id="406697">request</a>: <a href="provider/HTTPRequest.scala.html#15082" title="net.liftweb.http.provider.HTTPRequest">HTTPRequest</a>, <a title="List[net.liftweb.http.LiftRules.RewritePF]" id="406698">rewrite</a>: <span title="List[net.liftweb.http.LiftRules.RewritePF]">List</span><span class="delimiter">[</span>LiftRules.RewritePF<span class="delimiter">]</span>,  <a title="Long" id="406699">nanoStart</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#14573" title="net.liftweb.http.Req">Req</a> =
    <span class="keyword">this</span>.<a href="#185914" title="(request: net.liftweb.http.provider.HTTPRequest, rewrite: List[net.liftweb.http.LiftRules.RewritePF], statelessTest: List[net.liftweb.http.LiftRules.StatelessTestPF], otherStatelessTest: List[net.liftweb.http.LiftRules.StatelessReqTestPF], nanoStart: Long)net.liftweb.http.Req">apply</a><span class="delimiter">(</span><a href="#406697" title="net.liftweb.http.provider.HTTPRequest">request</a>, <a href="#406698" title="List[net.liftweb.http.LiftRules.RewritePF]">rewrite</a>, <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <a href="#406699" title="Long">nanoStart</a><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(request: net.liftweb.http.provider.HTTPRequest, rewrite: List[net.liftweb.http.LiftRules.RewritePF], statelessTest: List[net.liftweb.http.LiftRules.StatelessTestPF], otherStatelessTest: List[net.liftweb.http.LiftRules.StatelessReqTestPF], nanoStart: Long)net.liftweb.http.Req" id="185914">apply</a><span class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPRequest" id="406691">request</a>: <a href="provider/HTTPRequest.scala.html#15082" title="net.liftweb.http.provider.HTTPRequest">HTTPRequest</a>, <a title="List[net.liftweb.http.LiftRules.RewritePF]" id="406692">rewrite</a>: <span title="List[net.liftweb.http.LiftRules.RewritePF]">List</span><span class="delimiter">[</span>LiftRules.RewritePF<span class="delimiter">]</span>, <a title="List[net.liftweb.http.LiftRules.StatelessTestPF]" id="406693">statelessTest</a>: <span title="List[net.liftweb.http.LiftRules.StatelessTestPF]">List</span><span class="delimiter">[</span>LiftRules.StatelessTestPF<span class="delimiter">]</span>,
            <a title="List[net.liftweb.http.LiftRules.StatelessReqTestPF]" id="406694">otherStatelessTest</a>: <span title="List[net.liftweb.http.LiftRules.StatelessReqTestPF]">List</span><span class="delimiter">[</span>LiftRules.StatelessReqTestPF<span class="delimiter">]</span>, <a title="Long" id="406695">nanoStart</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#14573" title="net.liftweb.http.Req">Req</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.http.RequestType" id="406986">reqType</a> = <a href="RequestType.scala.html#407003" title="(req: net.liftweb.http.provider.HTTPRequest)net.liftweb.http.RequestType">RequestType</a><span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="406987">contextPath</a> = <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159060" title="()net.liftweb.common.Box[String]">calculateContextPath</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; String)String">openOr</a> <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216867" title="=&gt; String">contextPath</a>
    <span class="keyword">val</span> <a title="java.lang.String" id="406988">turi</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216870" title="=&gt; String">uri</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#406987" title="String">contextPath</a>.<span title="()Int">length</span><span class="delimiter">)</span> <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216870" title="=&gt; String">uri</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#406987" title="String">contextPath</a>.<span title="()Int">length</span><span class="delimiter">)</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="406989">tmpUri</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#406988" title="java.lang.String">turi</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#406988" title="java.lang.String">turi</a> <span class="keyword">else</span> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>

    <span class="keyword">val</span> <a title="net.liftweb.http.ParsePath" id="406990">tmpPath</a> = <a href="#185917" title="(in: String)net.liftweb.http.ParsePath">parsePath</a><span class="delimiter">(</span><a href="#406989" title="java.lang.String">tmpUri</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse" id="406991">processRewrite</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="407026">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>, <a title="Map[String,String]" id="407027">params</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a> =
    <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#13548" title="object net.liftweb.util.NamedPF">NamedPF</a>.<a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185585" title="(value: net.liftweb.http.RewriteRequest, lst: Seq[PartialFunction[net.liftweb.http.RewriteRequest,net.liftweb.http.RewriteResponse]])net.liftweb.common.Box[net.liftweb.http.RewriteResponse]">applyBox</a><span class="delimiter">(</span><a href="#412115" title="(path: net.liftweb.http.ParsePath, requestType: net.liftweb.http.RequestType, httpRequest: net.liftweb.http.provider.HTTPRequest)net.liftweb.http.RewriteRequest">RewriteRequest</a><span class="delimiter">(</span><a href="#407026" title="net.liftweb.http.ParsePath">path</a>, <a href="#406986" title="net.liftweb.http.RequestType">reqType</a>, <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a><span class="delimiter">)</span>, <a href="#406692" title="List[net.liftweb.http.LiftRules.RewritePF]">rewrite</a><span class="delimiter">)</span> <span title="net.liftweb.http.RewriteResponse" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.RewriteResponse">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.RewriteResponse" id="407044">resp</a>@RewriteResponse<span class="delimiter">(</span>_, _, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#407044" title="net.liftweb.http.RewriteResponse">resp</a>
      <span class="keyword">case</span> <span title="net.liftweb.http.RewriteResponse">_</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10583" title="net.liftweb.common.EmptyBox">EmptyBox</a> =&gt; <a href="#216939" title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#407026" title="net.liftweb.http.ParsePath">path</a>, <a href="#407027" title="Map[String,String]">params</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.RewriteResponse">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.RewriteResponse" id="407054">resp</a><span class="delimiter">)</span> =&gt; <a href="#406991" title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse">processRewrite</a><span class="delimiter">(</span><a href="#407054" title="net.liftweb.http.RewriteResponse">resp</a>.<a href="#216944" title="=&gt; net.liftweb.http.ParsePath">path</a>, <a href="#407027" title="Map[String,String]">params</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, String)])scala.collection.immutable.Map[String,String]">++</span> <a href="#407054" title="net.liftweb.http.RewriteResponse">resp</a>.<a href="#216945" title="=&gt; Map[String,String]">params</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// val (uri, path, localSingleParams) = processRewrite(tmpUri, tmpPath, TreeMap.empty)</span>
    <span class="keyword">val</span> <a title="net.liftweb.http.RewriteResponse" id="406992">rewritten</a> = <a href="#406991" title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse">processRewrite</a><span class="delimiter">(</span><a href="#406990" title="net.liftweb.http.ParsePath">tmpPath</a>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Map[String,List[String]]" id="406993">localParams</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="(elems: (String, List[String])*)scala.collection.immutable.Map[String,List[String]]">Map</span><span class="delimiter">(</span><a href="#406992" title="net.liftweb.http.RewriteResponse">rewritten</a>.<a href="#216945" title="=&gt; Map[String,String]">params</a>.<span title="=&gt; List[(String, String)]">toList</span>.<span title="(f: (String, String) =&gt; (String, List[String]))(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],(String, List[String]),List[(String, List[String])]])List[(String, List[String])]">map</span> <a href="#407144" title="(String, List[String])" class="delimiter">{</a><span class="keyword">case</span> <span title="(String, List[String])" class="delimiter">(</span><a title="String" id="407147">name</a>, <a title="String" id="407148">value</a><span class="delimiter">)</span> =&gt; <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">name</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: List[String])(String, List[String])">-&gt;</a> <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="#407148" title="String">value</a><span class="delimiter">)</span><span class="delimiter">}</span>: _*<span class="delimiter">)</span>

    <span class="comment">// val session = request.getSession</span>
    <span class="comment">//  val body = ()</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,List[String]]" id="406994">eMap</a> = <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="406995">contentType</a> = <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216869" title="=&gt; net.liftweb.common.Box[String]">contentType</a>

    <span class="comment">//    val (paramNames: List[String], params: Map[String, List[String]], files: List[FileParamHolder], body: Box[Array[Byte]]) =</span>

          
    <span class="comment">// calculate the query parameters</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(List[String], Map[String,List[String]])" id="406997">queryStringParam</a>:  <span title="(List[String], Map[String,List[String]])" class="delimiter">(</span>List<span class="delimiter">[</span>String<span class="delimiter">]</span>, Map<span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[(String, String)]" id="407226">params</a>: <span title="List[(String, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> =
        <span class="keyword">for</span> <span class="delimiter">{</span>
          <a title="String" id="407250">queryString</a> &lt;- <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216872" title="=&gt; net.liftweb.common.Box[String]">queryString</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27051" title="(f: String =&gt; scala.collection.GenTraversableOnce[(java.lang.String, java.lang.String)])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(java.lang.String, java.lang.String),List[(String, String)]])List[(String, String)]">toList</a>
          <a title="java.lang.String" id="407432">nameVal</a> &lt;- <a href="#407250" title="String">queryString</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;&amp;&quot;)" class="string">&quot;&amp;&quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span>.<span title="(f: java.lang.String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#407375" title="java.lang.String">_</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span>.<span title="(p: java.lang.String =&gt; Boolean)List[java.lang.String]">filter</span><span title="(f: java.lang.String =&gt; scala.collection.GenTraversableOnce[(java.lang.String, java.lang.String)])(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],(java.lang.String, java.lang.String),List[(java.lang.String, java.lang.String)]])List[(java.lang.String, java.lang.String)]" class="delimiter">(</span><a href="#407408" title="java.lang.String">_</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <span class="delimiter">(</span><a title="java.lang.String" id="407644">name</a>, <a title="java.lang.String" id="407645">value</a><span class="delimiter">)</span> &lt;- <a href="#407432" title="java.lang.String">nameVal</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;=&quot;)" class="string">&quot;=&quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: (java.lang.String, java.lang.String) =&gt; (java.lang.String, java.lang.String))net.liftweb.common.Box[(java.lang.String, java.lang.String)]" class="keyword">match</a> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">Nil</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
            <span class="keyword">case</span> <a title="net.liftweb.common.Full[(java.lang.String, java.lang.String)]" id="407542">n</a> :: <a title="java.lang.String" id="407547">v</a> :: _ =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: (java.lang.String, java.lang.String))net.liftweb.common.Full[(java.lang.String, java.lang.String)]">Full</a><span class="delimiter">(</span><span title="(_1: java.lang.String, _2: java.lang.String)(java.lang.String, java.lang.String)" class="delimiter">(</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49042" title="(in: String)java.lang.String">urlDecode</a><span class="delimiter">(</span><a href="#407542" title="java.lang.String">n</a><span class="delimiter">)</span>, <a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49042" title="(in: String)java.lang.String">urlDecode</a><span class="delimiter">(</span><a href="#407547" title="java.lang.String">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a title="net.liftweb.common.Full[(java.lang.String, java.lang.String)]" id="407561">n</a> :: _ =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: (java.lang.String, java.lang.String))net.liftweb.common.Full[(java.lang.String, java.lang.String)]">Full</a><span class="delimiter">(</span><span title="(_1: java.lang.String, _2: java.lang.String)(java.lang.String, java.lang.String)" class="delimiter">(</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49042" title="(in: String)java.lang.String">urlDecode</a><span class="delimiter">(</span><a href="#407561" title="java.lang.String">n</a><span class="delimiter">)</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">}</span> <span class="keyword">yield</span> <span title="(_1: java.lang.String, _2: java.lang.String)(java.lang.String, java.lang.String)" class="delimiter">(</span><a href="#407644" title="java.lang.String">name</a>, <a href="#407645" title="java.lang.String">value</a><span class="delimiter">)</span>
            
            <span class="keyword">val</span> <a title="List[String]" id="407227">names</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#407226" title="List[(String, String)]">params</a>.<span title="(f: (String, String) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#407760" title="(String, String)">_</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">distinct</span>
      <span class="keyword">val</span> <a title="Map[String,List[String]]" id="407228">nvp</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#407226" title="List[(String, String)]">params</a>.<span title="(z: scala.collection.immutable.Map[String,List[String]])(f: (scala.collection.immutable.Map[String,List[String]], (String, String)) =&gt; scala.collection.immutable.Map[String,List[String]])scala.collection.immutable.Map[String,List[String]]">foldLeft</span><span class="delimiter">(</span><span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, List[String])*)scala.collection.immutable.Map[String,List[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#407807" title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">(</span><a title="scala.collection.immutable.Map[String,List[String]]" id="407817">map</a>, <span class="delimiter">(</span><a title="String" id="407820">name</a>, <a title="String" id="407821">value</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#407817" title="scala.collection.immutable.Map[String,List[String]]">map</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">name</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: List[String])(String, List[String])">-&gt;</a> <span class="delimiter">(</span><a href="#407817" title="scala.collection.immutable.Map[String,List[String]]">map</a>.<span title="(key: String, default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><a href="#407820" title="String">name</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span> <a href="#407899" title="(prefix: List[String])List[String]">:::</a> <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="#407821" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <span title="(_1: List[String], _2: Map[String,List[String]])(List[String], Map[String,List[String]])" class="delimiter">(</span><a href="#407227" title="List[String]">names</a>, <a href="#407228" title="Map[String,List[String]]">nvp</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// make this a thunk so it only gets calculated once</span>
    <span class="keyword">val</span> <a title="net.liftweb.http.AvoidGAL" id="406998">paramCalcInfo</a>: <a href="#412172" title="net.liftweb.http.AvoidGAL">AvoidGAL</a> = <span title="net.liftweb.http.AvoidGAL" class="keyword">new</span> <a href="#412172" title="net.liftweb.http.AvoidGAL">AvoidGAL</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="comment">// post/put of XML or JSON... eagerly read the stream</span>
      <span title="net.liftweb.http.ParamCalcInfo" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#406986" title="net.liftweb.http.RequestType">reqType</a>.<a href="RequestType.scala.html#149310" title="=&gt; Boolean">post_?</a> <span title="(x: Boolean)Boolean">||</span>
           <a href="#406986" title="net.liftweb.http.RequestType">reqType</a>.<a href="RequestType.scala.html#149313" title="=&gt; Boolean">put_?</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#406995" title="net.liftweb.common.Box[String]">contentType</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27073" title="(dflt: =&gt; Boolean)(f: String =&gt; Boolean)Boolean">dmap</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">{</span>
	<a href="#407958" title="String">_</a>.<span title="()java.lang.String">toLowerCase</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
	  <span class="keyword">case</span> <a title="Boolean" id="407961">x</a> =&gt; 
	    <a href="#407961" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;text/xml&quot;)" class="string">&quot;text/xml&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> 
	    <a href="#407961" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;application/xml&quot;)" class="string">&quot;application/xml&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> 
	  <a href="#407961" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;text/json&quot;)" class="string">&quot;text/json&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
	  <a href="#407961" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;application/json&quot;)" class="string">&quot;application/json&quot;</span><span class="delimiter">)</span>
	<span class="delimiter">}</span><span class="delimiter">}</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#412119" title="(paramNames: List[String], params: Map[String,List[String]], uploadedFiles: List[net.liftweb.http.FileParamHolder], body: net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a><span class="delimiter">(</span><a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; List[String]">_1</span>, 
                      <a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; Map[String,List[String]]">_2</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, List[String])])scala.collection.immutable.Map[String,List[String]]">++</span> <a href="#406993" title="Map[String,List[String]]">localParams</a>, 
                      <span title="object Nil">Nil</span>, 
                      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.BodyOrInputStream)net.liftweb.common.Full[net.liftweb.http.BodyOrInputStream]">Full</a><span class="delimiter">(</span><a href="#412123" title="(is: java.io.InputStream)net.liftweb.http.BodyOrInputStream">BodyOrInputStream</a><span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216890" title="=&gt; java.io.InputStream">inputStream</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="comment">// it's multipart</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="net.liftweb.http.ParamCalcInfo" class="keyword">if</span> <span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a> <a href="provider/HTTPRequest.scala.html#216891" title="=&gt; Boolean">multipartContent_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[net.liftweb.http.ParamHolder]" id="408052">allInfo</a> = <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a> <a href="provider/HTTPRequest.scala.html#216892" title="=&gt; List[net.liftweb.http.ParamHolder]">extractFiles</a>
        
        <span class="keyword">val</span> <a title="List[net.liftweb.http.NormalParamHolder]" id="408053">normal</a>: <span title="List[net.liftweb.http.NormalParamHolder]">List</span><span class="delimiter">[</span>NormalParamHolder<span class="delimiter">]</span> = 
          <a href="#408052" title="List[net.liftweb.http.ParamHolder]">allInfo</a>.<span title="(f: net.liftweb.http.ParamHolder =&gt; scala.collection.GenTraversableOnce[net.liftweb.http.NormalParamHolder])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.ParamHolder],net.liftweb.http.NormalParamHolder,List[net.liftweb.http.NormalParamHolder]])List[net.liftweb.http.NormalParamHolder]">flatMap</span> <a href="#408085" title="List[net.liftweb.http.NormalParamHolder]" class="delimiter">{</a>
            <span class="keyword">case</span> <a title="List[net.liftweb.http.NormalParamHolder]" id="408086">v</a>: <a href="#412181" title="net.liftweb.http.NormalParamHolder">NormalParamHolder</a> =&gt; <span title="(xs: net.liftweb.http.NormalParamHolder*)List[net.liftweb.http.NormalParamHolder]">List</span><span class="delimiter">(</span><a href="#408086" title="net.liftweb.http.NormalParamHolder">v</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span><span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="List[net.liftweb.http.FileParamHolder]" id="408054">files</a>: <span title="List[net.liftweb.http.FileParamHolder]">List</span><span class="delimiter">[</span>FileParamHolder<span class="delimiter">]</span> = <a href="#408052" title="List[net.liftweb.http.ParamHolder]">allInfo</a>.<span title="(f: net.liftweb.http.ParamHolder =&gt; scala.collection.GenTraversableOnce[net.liftweb.http.FileParamHolder])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.ParamHolder],net.liftweb.http.FileParamHolder,List[net.liftweb.http.FileParamHolder]])List[net.liftweb.http.FileParamHolder]">flatMap</span> <a href="#408144" title="List[net.liftweb.http.FileParamHolder]" class="delimiter">{</a>
          <span class="keyword">case</span> <a title="List[net.liftweb.http.FileParamHolder]" id="408145">v</a>: <a href="#14548" title="net.liftweb.http.FileParamHolder">FileParamHolder</a> =&gt; <span title="(xs: net.liftweb.http.FileParamHolder*)List[net.liftweb.http.FileParamHolder]">List</span><span class="delimiter">(</span><a href="#408145" title="net.liftweb.http.FileParamHolder">v</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span><span class="delimiter">}</span>
        
        <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,List[String]]" id="408055">params</a> = <a href="#408053" title="List[net.liftweb.http.NormalParamHolder]">normal</a>.<span title="(z: scala.collection.immutable.Map[String,List[String]])(f: (scala.collection.immutable.Map[String,List[String]], net.liftweb.http.NormalParamHolder) =&gt; scala.collection.immutable.Map[String,List[String]])scala.collection.immutable.Map[String,List[String]]">foldLeft</span><span class="delimiter">(</span><a href="#406994" title="scala.collection.immutable.Map[String,List[String]]">eMap</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.collection.immutable.Map[String,List[String]]" id="408197">a</a>, <a title="net.liftweb.http.NormalParamHolder" id="408198">b</a><span class="delimiter">)</span> =&gt;
          <a href="#408197" title="scala.collection.immutable.Map[String,List[String]]">a</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span><a href="#408198" title="net.liftweb.http.NormalParamHolder">b</a>.<a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">name</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: List[String])(String, List[String])">-&gt;</a> <span class="delimiter">(</span><a href="#408197" title="scala.collection.immutable.Map[String,List[String]]">a</a>.<span title="(key: String, default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><a href="#408198" title="net.liftweb.http.NormalParamHolder">b</a>.<a href="#412176" title="=&gt; String">name</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span> <a href="#408276" title="(prefix: List[String])List[String]">:::</a> <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="#408198" title="net.liftweb.http.NormalParamHolder">b</a>.<a href="#412177" title="=&gt; String">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        
        <a href="#412119" title="(paramNames: List[String], params: Map[String,List[String]], uploadedFiles: List[net.liftweb.http.FileParamHolder], body: net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; List[String]">_1</span> <a href="#408315" title="(prefix: List[String])List[String]">:::</a> 
                       <a href="#408053" title="List[net.liftweb.http.NormalParamHolder]">normal</a>.<span title="(f: net.liftweb.http.NormalParamHolder =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.NormalParamHolder],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#408332" title="net.liftweb.http.NormalParamHolder">_</a>.<a href="#412176" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">distinct</span>,
                      <a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; Map[String,List[String]]">_2</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, List[String])])scala.collection.immutable.Map[String,List[String]]">++</span> <a href="#406993" title="Map[String,List[String]]">localParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, List[String])])scala.collection.immutable.Map[String,List[String]]">++</span>
                      <a href="#408055" title="scala.collection.immutable.Map[String,List[String]]">params</a>, <a href="#408054" title="List[net.liftweb.http.FileParamHolder]">files</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
        <span class="comment">// it's a GET</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="net.liftweb.http.ParamCalcInfo" class="keyword">if</span> <span class="delimiter">(</span><a href="#406986" title="net.liftweb.http.RequestType">reqType</a>.<a href="RequestType.scala.html#149311" title="=&gt; Boolean">get_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#412119" title="(paramNames: List[String], params: Map[String,List[String]], uploadedFiles: List[net.liftweb.http.FileParamHolder], body: net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a><span class="delimiter">(</span><a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; List[String]">_1</span>,
                      <a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; Map[String,List[String]]">_2</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, List[String])])scala.collection.immutable.Map[String,List[String]]">++</span> <a href="#406993" title="Map[String,List[String]]">localParams</a>, <span title="object Nil">Nil</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="net.liftweb.http.ParamCalcInfo" class="keyword">if</span> <span class="delimiter">(</span><a href="#406995" title="net.liftweb.common.Box[String]">contentType</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27073" title="(dflt: =&gt; Boolean)(f: String =&gt; Boolean)Boolean">dmap</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#408558" title="String">_</a>.<span title="()java.lang.String">toLowerCase</span>.
                                         <span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;application/x-www-form-urlencoded&quot;)" class="string">&quot;application/x-www-form-urlencoded&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,List[String]]" id="408563">params</a> = <a href="#406993" title="Map[String,List[String]]">localParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, List[String])])scala.collection.immutable.Map[String,List[String]]">++</span> <span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216874" title="=&gt; List[net.liftweb.http.provider.HTTPParam]">params</a>.<span title="(lt: (net.liftweb.http.provider.HTTPParam, net.liftweb.http.provider.HTTPParam) =&gt; Boolean)List[net.liftweb.http.provider.HTTPParam]">sortWith</span>
                                     <span class="delimiter">{</span><span class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPParam" id="408601">s1</a>, <a title="net.liftweb.http.provider.HTTPParam" id="408602">s2</a><span class="delimiter">)</span> =&gt; <a href="#408601" title="net.liftweb.http.provider.HTTPParam">s1</a>.<a href="provider/HTTPParam.scala.html#364980" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">name</a> <span title="(that: String)Boolean">&lt;</span> <a href="#408602" title="net.liftweb.http.provider.HTTPParam">s2</a>.<a href="provider/HTTPParam.scala.html#364980" title="=&gt; String">name</a><span class="delimiter">}</span><span class="delimiter">)</span>.
                                           <span title="(f: net.liftweb.http.provider.HTTPParam =&gt; (String, List[String]))(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.provider.HTTPParam],(String, List[String]),List[(String, List[String])]])List[(String, List[String])]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(String, List[String]),List[(String, List[String])]]" class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPParam" id="408665">n</a> =&gt; <span title="(_1: String, _2: List[String])(String, List[String])" class="delimiter">(</span><a href="#408665" title="net.liftweb.http.provider.HTTPParam">n</a>.<a href="provider/HTTPParam.scala.html#364980" title="=&gt; String">name</a>, <a href="#408665" title="net.liftweb.http.provider.HTTPParam">n</a>.<a href="provider/HTTPParam.scala.html#364982" title="=&gt; List[String]">values</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#412119" title="(paramNames: List[String], params: Map[String,List[String]], uploadedFiles: List[net.liftweb.http.FileParamHolder], body: net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a><span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a> <a href="provider/HTTPRequest.scala.html#216875" title="=&gt; List[String]">paramNames</a>, <a href="#408563" title="scala.collection.immutable.Map[String,List[String]]">params</a>, <span title="object Nil">Nil</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#412119" title="(paramNames: List[String], params: Map[String,List[String]], uploadedFiles: List[net.liftweb.http.FileParamHolder], body: net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a><span class="delimiter">(</span><a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; List[String]">_1</span>, 
                      <a href="#406996" title="=&gt; (List[String], Map[String,List[String]])">queryStringParam</a>.<span title="=&gt; Map[String,List[String]]">_2</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, List[String])])scala.collection.immutable.Map[String,List[String]]">++</span> <a href="#406993" title="Map[String,List[String]]">localParams</a>, 
                      <span title="object Nil">Nil</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.BodyOrInputStream)net.liftweb.common.Full[net.liftweb.http.BodyOrInputStream]">Full</a><span class="delimiter">(</span><a href="#412123" title="(is: java.io.InputStream)net.liftweb.http.BodyOrInputStream">BodyOrInputStream</a><span class="delimiter">(</span><a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a> <a href="provider/HTTPRequest.scala.html#216890" title="=&gt; java.io.InputStream">inputStream</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>


    <span class="keyword">val</span> <a title="() =&gt; net.liftweb.http.ParamCalcInfo" id="406999">paramCalculator</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; ParamCalcInfo = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <a href="#406998" title="net.liftweb.http.AvoidGAL">paramCalcInfo</a>.<a href="#406612" title="=&gt; net.liftweb.http.ParamCalcInfo">thunk</a>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[java.lang.String]" id="407000">wholePath</a> = <a href="#406992" title="net.liftweb.http.RewriteResponse">rewritten</a>.<a href="#216944" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="#216857" title="=&gt; List[java.lang.String]">wholePath</a>

    <span class="keyword">val</span> <a title="net.liftweb.common.Box[Boolean]" id="407001">stateless</a> =  <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#13548" title="object net.liftweb.util.NamedPF">NamedPF</a>.<a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185585" title="(value: net.liftweb.http.StatelessReqTest, lst: Seq[PartialFunction[net.liftweb.http.StatelessReqTest,Boolean]])net.liftweb.common.Box[Boolean]">applyBox</a><span class="delimiter">(</span><a href="LiftRules.scala.html#356681" title="(path: List[String], httpReq: net.liftweb.http.provider.HTTPRequest)net.liftweb.http.StatelessReqTest">StatelessReqTest</a><span class="delimiter">(</span><a href="#407000" title="List[java.lang.String]">wholePath</a>, <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a><span class="delimiter">)</span>, <a href="#406694" title="List[net.liftweb.http.LiftRules.StatelessReqTestPF]">otherStatelessTest</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[Boolean])net.liftweb.common.Box[Boolean]">or</a>
      <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#13548" title="object net.liftweb.util.NamedPF">NamedPF</a>.<a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185585" title="(value: List[java.lang.String], lst: Seq[PartialFunction[List[java.lang.String],Boolean]])net.liftweb.common.Box[Boolean]">applyBox</a><span class="delimiter">(</span><a href="#407000" title="List[java.lang.String]">wholePath</a>, <a href="#406693" title="List[net.liftweb.http.LiftRules.StatelessTestPF]">statelessTest</a><span class="delimiter">)</span>

    <span title="net.liftweb.http.Req" class="keyword">new</span> <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">(</span><a href="#406992" title="net.liftweb.http.RewriteResponse">rewritten</a>.<a href="#216944" title="=&gt; net.liftweb.http.ParsePath">path</a>, <a href="#406987" title="String">contextPath</a>, <a href="#406986" title="net.liftweb.http.RequestType">reqType</a>,
            <a href="#406995" title="net.liftweb.common.Box[String]">contentType</a>, <a href="#406691" title="net.liftweb.http.provider.HTTPRequest">request</a>, <a href="#406695" title="Long">nanoStart</a>,
            <span title="object java.lang.System">System</span>.<span title="()Long">nanoTime</span>, <a href="#407001" title="net.liftweb.common.Box[Boolean]">stateless</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>, <a href="#406999" title="() =&gt; net.liftweb.http.ParamCalcInfo">paramCalculator</a>, <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(uri: String)String" id="185915">fixURI</a><span class="delimiter">(</span><a title="String" id="408844">uri</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#408844" title="String">uri</a> <span title="(x$1: java.lang.String)Int">indexOf</span> <span title="java.lang.String(&quot;;jsessionid&quot;)" class="string">&quot;;jsessionid&quot;</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String">-</span><span class="int">1</span> =&gt; <a href="#408844" title="String">uri</a>
    <span class="keyword">case</span> <a title="java.lang.String" id="408851">x</a>@_ =&gt; <a href="#408844" title="String">uri</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#408851" title="Int">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Create a nil request... useful for testing
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.Req" id="185916">nil</a> = <span title="net.liftweb.http.Req" class="keyword">new</span> <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">(</span><a href="#406685" title="object net.liftweb.http.Req.NilPath">NilPath</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a href="RequestType.scala.html#14590" title="object net.liftweb.http.GetRequest">GetRequest</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>, <span title="Null(null)" class="keyword">null</span>,
                    <span title="object java.lang.System">System</span>.<span title="()Long">nanoTime</span>, <span title="object java.lang.System">System</span>.<span title="()Long">nanoTime</span>, <span title="Boolean(false)" class="keyword">false</span>,
                    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#412119" title="(paramNames: List[String], params: Map[String,List[String]], uploadedFiles: List[net.liftweb.http.FileParamHolder], body: net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])net.liftweb.http.ParamCalcInfo">ParamCalcInfo</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>, <span title="object Nil">Nil</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>, <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(in: String)net.liftweb.http.ParsePath" id="185917">parsePath</a><span class="delimiter">(</span><a title="String" id="407024">in</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="408854">p1</a> = <a href="#185915" title="(uri: String)String">fixURI</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#407024" title="String">in</a> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span><span class="keyword">case</span> <span title="java.lang.String(&quot;/&quot;)" class="keyword">null</span> =&gt; <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>; <span class="keyword">case</span> <a title="java.lang.String(&quot;/&quot;)" id="408861">s</a> <span class="keyword">if</span> <a href="#408861" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> =&gt; <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>; <span class="keyword">case</span> <a title="String" id="408867">s</a> =&gt; <a href="#408867" title="String">s</a><span class="delimiter">}</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/+&quot;)" class="string">&quot;/+&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="408855">front</a> = <a href="#408854" title="String">p1</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="408856">back</a> = <a href="#408854" title="String">p1</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#408854" title="String">p1</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[java.lang.String]" id="408857">orgLst</a> = <a href="#408854" title="String">p1</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/$&quot;)" class="string">&quot;/$&quot;</span>, <span title="java.lang.String(&quot;/index&quot;)" class="string">&quot;/index&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span>.
    <span title="=&gt; List[java.lang.String]">toList</span>.<span title="(f: java.lang.String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#408998" title="java.lang.String">_</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span>.<span title="(p: java.lang.String =&gt; Boolean)List[java.lang.String]">filter</span><span class="delimiter">(</span><a href="#409031" title="java.lang.String">_</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a href="#408859" title="(List[java.lang.String], java.lang.String)" class="delimiter">(</a><a href="#408858" title="List[java.lang.String]" id="408859">lst</a>, <a href="#408858" title="java.lang.String" id="408860">suffix</a><span class="delimiter">)</span> = <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185580" title="(value: List[java.lang.String], lst: Seq[PartialFunction[List[java.lang.String],(List[java.lang.String], java.lang.String)]])(List[java.lang.String], java.lang.String)">NamedPF</a><span title="(List[java.lang.String], java.lang.String) @unchecked" class="delimiter">(</span><a href="#408857" title="List[java.lang.String]">orgLst</a>, <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159204" title="=&gt; net.liftweb.http.LiftRules#RulesSeq[PartialFunction[List[java.lang.String],(List[java.lang.String], java.lang.String)]]">suffixSplitters</a>.<a href="LiftRules.scala.html#185552" title="=&gt; List[PartialFunction[List[java.lang.String],(List[java.lang.String], java.lang.String)]]">toList</a><span class="delimiter">)</span>

    <a href="#412111" title="(partPath: List[String], suffix: String, absolute: Boolean, endSlash: Boolean)net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><a href="#408859" title="List[java.lang.String]">lst</a>.<span title="(f: java.lang.String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],java.lang.String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49042" title="(in: String)java.lang.String">urlDecode</a><span class="delimiter">)</span>, <a href="#408860" title="java.lang.String">suffix</a>, <a href="#408855" title="Boolean">front</a>, <a href="#408856" title="Boolean">back</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="(String, Seq[scala.xml.Node], Boolean, net.liftweb.common.Box[String =&gt; String]) =&gt; scala.xml.Text" id="185919">fixHref</a> = <a href="#185921" title="(contextPath: String, v: Seq[scala.xml.Node], fixURL: Boolean, rewrite: net.liftweb.common.Box[String =&gt; String])scala.xml.Text">_fixHref</a> _

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(contextPath: String, v: Seq[scala.xml.Node], fixURL: Boolean, rewrite: net.liftweb.common.Box[String =&gt; String])scala.xml.Text" id="185921">_fixHref</a><span class="delimiter">(</span><a title="String" id="350487">contextPath</a>: <span title="String">String</span>, <a title="Seq[scala.xml.Node]" id="350488">v</a>: <span title="Seq[scala.xml.Node]">Seq</span><span class="delimiter">[</span>Node<span class="delimiter">]</span>, <a title="Boolean" id="350489">fixURL</a>: <span title="Boolean">Boolean</span>, <a title="net.liftweb.common.Box[String =&gt; String]" id="350490">rewrite</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String =&gt; String]">Box</a><span class="delimiter">[</span>String =&gt; String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.xml.Text">Text</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="409149">hv</a> = <a href="#350488" title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">v</a>.<span title="=&gt; String">text</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="409150">updated</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#409149" title="String">hv</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                      <span title="=&gt; Boolean">!</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159034" title="=&gt; net.liftweb.http.LiftRules#FactoryMaker[java.lang.String =&gt; Boolean]">excludePathFromContextPathRewriting</a>.<a href="Factory.scala.html#159330" title="(v1: java.lang.String)Boolean">vend</a><span class="delimiter">(</span><a href="#409149" title="String">hv</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#350487" title="String">contextPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#409149" title="String">hv</a> <span class="keyword">else</span> <a href="#409149" title="String">hv</a>

    <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#350489" title="Boolean">fixURL</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#350490" title="net.liftweb.common.Box[String =&gt; String]">rewrite</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
             <span title="=&gt; Boolean">!</span><a href="#409150" title="java.lang.String">updated</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;mailto:&quot;)" class="string">&quot;mailto:&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
             <span title="=&gt; Boolean">!</span><a href="#409150" title="java.lang.String">updated</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;javascript:&quot;)" class="string">&quot;javascript:&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
             <span title="=&gt; Boolean">!</span><a href="#409150" title="java.lang.String">updated</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;http://&quot;)" class="string">&quot;http://&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
             <span title="=&gt; Boolean">!</span><a href="#409150" title="java.lang.String">updated</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;https://&quot;)" class="string">&quot;https://&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
             <span title="=&gt; Boolean">!</span><a href="#409150" title="java.lang.String">updated</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;#&quot;)" class="string">&quot;#&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
         <a href="#350490" title="net.liftweb.common.Box[String =&gt; String]">rewrite</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; String =&gt; String">open_!</a>.<span title="(v1: String)String">apply</span><span class="delimiter">(</span><a href="#409150" title="java.lang.String">updated</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#409150" title="java.lang.String">updated</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Corrects the HTML content,such as applying context path to URI's, session information if cookies are disabled etc.
   */</span>
  <span class="keyword">def</span> <a title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq" id="185922">fixHtml</a><span class="delimiter">(</span><a title="String" id="400091">contextPath</a>: <span title="String">String</span>, <a title="scala.xml.NodeSeq" id="400092">in</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[String =&gt; String]" id="409176">rewrite</a> = <a href="#14583" title="object net.liftweb.http.URLRewriter">URLRewriter</a>.<a href="#350484" title="=&gt; net.liftweb.common.Box[String =&gt; String]">rewriteFunc</a>

    <span class="keyword">def</span> <a title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData" id="409177">fixAttrs</a><span class="delimiter">(</span><a title="String" id="409179">toFix</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="409180">attrs</a>: <span title="scala.xml.MetaData">MetaData</span>, <a title="Boolean" id="409181">fixURL</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="scala.xml.MetaData">MetaData</span> = <span class="delimiter">{</span>
      <span title="scala.xml.MetaData" class="keyword">if</span> <span class="delimiter">(</span><a href="#409180" title="scala.xml.MetaData">attrs</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span> <span title="object scala.xml.Null">Null</span>
      <span class="keyword">else</span> <span title="scala.xml.MetaData" class="keyword">if</span> <span class="delimiter">(</span><a href="#409180" title="scala.xml.MetaData">attrs</a>.<span title="=&gt; String">key</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#409179" title="String">toFix</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="scala.xml.UnprefixedAttribute" class="keyword">new</span> <span title="scala.xml.UnprefixedAttribute">UnprefixedAttribute</span><span class="delimiter">(</span><a href="#409179" title="String">toFix</a>, <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185919" title="(v1: String, v2: Seq[scala.xml.Node], v3: Boolean, v4: net.liftweb.common.Box[String =&gt; String])scala.xml.Text">fixHref</a><span class="delimiter">(</span><a href="#400091" title="String">contextPath</a>, <a href="#409180" title="scala.xml.MetaData">attrs</a>.<span title="=&gt; Seq[scala.xml.Node]">value</span>, <a href="#409181" title="Boolean">fixURL</a>, <a href="#409176" title="net.liftweb.common.Box[String =&gt; String]">rewrite</a><span class="delimiter">)</span>, <a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><a href="#409179" title="String">toFix</a>, <a href="#409180" title="scala.xml.MetaData">attrs</a>.<span title="=&gt; scala.xml.MetaData">next</span>, <a href="#409181" title="Boolean">fixURL</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#409180" title="scala.xml.MetaData">attrs</a>.<span title="(next: scala.xml.MetaData)scala.xml.MetaData">copy</span><span class="delimiter">(</span><a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><a href="#409179" title="String">toFix</a>, <a href="#409180" title="scala.xml.MetaData">attrs</a>.<span title="=&gt; scala.xml.MetaData">next</span>, <a href="#409181" title="Boolean">fixURL</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq" id="409178">_fixHtml</a><span class="delimiter">(</span><a title="String" id="409199">contextPath</a>: <span title="String">String</span>, <a title="scala.xml.NodeSeq" id="409200">in</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
      <a href="#409200" title="scala.xml.NodeSeq">in</a>.<span title="(f: scala.xml.Node =&gt; scala.xml.Node)(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">map</span> <span title="=&gt; scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq.Coll,scala.xml.Node,scala.xml.NodeSeq]" class="delimiter">{</span>
        <a title="scala.xml.Node" id="409217">v</a> =&gt;
        <a href="#409217" title="scala.xml.Node">v</a> <span title="scala.xml.Node" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="scala.xml.Group">Group</span><span class="delimiter">(</span><a title="Seq[scala.xml.Node]" id="409218">nodes</a><span class="delimiter">)</span> =&gt; <span title="(nodes: Seq[scala.xml.Node])scala.xml.Group">Group</span><span class="delimiter">(</span><a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#409199" title="String">contextPath</a>, <a href="#409218" title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">nodes</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="scala.xml.Elem" id="409223">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#409223" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;form&quot;)" class="string">&quot;form&quot;</span> =&gt; <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">prefix</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">label</span>, <a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><span title="java.lang.String(&quot;action&quot;)" class="string">&quot;action&quot;</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.NamespaceBinding">scope</span>, <a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#409199" title="String">contextPath</a>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">child</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="scala.xml.Elem" id="409230">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#409230" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;script&quot;)" class="string">&quot;script&quot;</span> =&gt; <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">prefix</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">label</span>, <a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><span title="java.lang.String(&quot;src&quot;)" class="string">&quot;src&quot;</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.NamespaceBinding">scope</span>, <a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#409199" title="String">contextPath</a>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">child</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="scala.xml.Elem" id="409237">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#409237" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;a&quot;)" class="string">&quot;a&quot;</span> =&gt; <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">prefix</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">label</span>, <a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><span title="java.lang.String(&quot;href&quot;)" class="string">&quot;href&quot;</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.NamespaceBinding">scope</span>, <a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#409199" title="String">contextPath</a>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">child</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="scala.xml.Elem" id="409244">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#409244" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;link&quot;)" class="string">&quot;link&quot;</span> =&gt; <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">prefix</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">label</span>, <a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><span title="java.lang.String(&quot;href&quot;)" class="string">&quot;href&quot;</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.NamespaceBinding">scope</span>, <a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#409199" title="String">contextPath</a>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">child</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="scala.xml.Elem" id="409251">e</a>: <span title="scala.xml.Elem">Elem</span> =&gt; <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">prefix</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; String">label</span>, <a href="#409177" title="(toFix: String, attrs: scala.xml.MetaData, fixURL: Boolean)scala.xml.MetaData">fixAttrs</a><span class="delimiter">(</span><span title="java.lang.String(&quot;src&quot;)" class="string">&quot;src&quot;</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="=&gt; scala.xml.NamespaceBinding">scope</span>, <a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#409199" title="String">contextPath</a>, <a href="#409217" title="scala.xml.Node">v</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">child</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="scala.xml.Node">_</span> =&gt; <a href="#409217" title="scala.xml.Node">v</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#409178" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">_fixHtml</a><span class="delimiter">(</span><a href="#400091" title="String">contextPath</a>, <a href="#400092" title="scala.xml.NodeSeq">in</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>liftweb<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(in: net.liftweb.http.Req)net.liftweb.http.XhtmlResponse" id="185923">defaultCreateNotFound</a><span class="delimiter">(</span><a title="net.liftweb.http.Req" id="409273">in</a>: <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">)</span> =
  <a href="LiftResponse.scala.html#355533" title="(out: scala.xml.Node, __docType: net.liftweb.common.Box[String], _headers: List[(String, String)], cookies: List[net.liftweb.http.provider.HTTPCookie], code: Int, renderInIEMode: Boolean)net.liftweb.http.XhtmlResponse">XhtmlResponse</a><span class="delimiter">(</span><span class="delimiter">(</span>&lt;<a title="scala.xml.Elem" id="409276">html</a>&gt; &lt;<a title="scala.xml.Elem" id="409277">body</a>&gt;<span title="scala.xml.Text">The</span> Requested URL <span class="delimiter">{</span><a href="#409273" title="net.liftweb.http.Req">in</a>.<a href="#328131" title="=&gt; String">contextPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#409273" title="net.liftweb.http.Req">in</a>.<a href="#149224" title="=&gt; String">uri</a><span class="delimiter">}</span> was not found on <span class="keyword">this</span> server&lt;/body&gt; &lt;/html&gt;<span class="delimiter">)</span>,
                <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#158909" title="=&gt; net.liftweb.http.LiftRules#FactoryMaker[net.liftweb.http.Req =&gt; net.liftweb.common.Box[java.lang.String]]">docType</a>.<a href="Factory.scala.html#159330" title="(v1: net.liftweb.http.Req)net.liftweb.common.Box[java.lang.String]">vend</a><span class="delimiter">(</span><a href="#409273" title="net.liftweb.http.Req">in</a><span class="delimiter">)</span>, <span title="(xs: net.liftweb.util.Helpers.TheStrBindParam*)List[net.liftweb.util.Helpers.TheStrBindParam]">List</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;Content-Type&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;text/html; charset=utf-8&quot;)" class="string">&quot;text/html; charset=utf-8&quot;</span><span class="delimiter">)</span>, <span title="object Nil">Nil</span>, <span title="Int(404)" class="int">404</span>, <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49324" title="=&gt; Boolean">ieMode</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(in: net.liftweb.http.Req)Option[(List[String], String, net.liftweb.http.RequestType)]" id="185924">unapply</a><span class="delimiter">(</span><a title="net.liftweb.http.Req" id="409330">in</a>: <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">)</span>: <span title="Option[(List[String], String, net.liftweb.http.RequestType)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>List<span class="delimiter">[</span>String<span class="delimiter">]</span>, String, RequestType<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="(x: (List[String], String, net.liftweb.http.RequestType))Some[(List[String], String, net.liftweb.http.RequestType)]">Some</span><span class="delimiter">(</span><span title="(_1: List[String], _2: String, _3: net.liftweb.http.RequestType)(List[String], String, net.liftweb.http.RequestType)" class="delimiter">(</span><a href="#409330" title="net.liftweb.http.Req">in</a>.<a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="#216963" title="=&gt; List[String]">partPath</a>, <a href="#409330" title="net.liftweb.http.Req">in</a>.<a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="#216964" title="=&gt; String">suffix</a>, <a href="#409330" title="net.liftweb.http.Req">in</a>.<a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Holds either the body or the request input stream, depending on which was requested first
 */</span>
<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class BodyOrInputStream extends java.lang.Object with ScalaObject with Product with Serializable" id="412123">BodyOrInputStream</a><a href="#412123" title="ScalaObject" class="delimiter">(</a><a title="java.io.InputStream" id="408043">is</a>: <span title="java.io.InputStream">InputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="328111">calc</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[Array[Byte]]" id="328114">body</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Array[Byte]]">Box</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#412123" title="(x$1: net.liftweb.common.Box[Array[Byte]])net.liftweb.common.Box[Array[Byte]]">synchronized</a> <span class="delimiter">{</span>
    <span title="net.liftweb.common.Box[Array[Byte]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#328111" title="=&gt; Boolean">calc</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#328111" title="(x$1: Boolean)Unit">calc</a> = <span title="Boolean(true)" class="keyword">true</span>
      <a href="../../../../util/net/liftweb/util/ControlHelpers.scala.html#48608" title="(f: =&gt; Array[Byte])net.liftweb.common.Box[Array[Byte]]">tryo</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/IoHelpers.scala.html#49075" title="(in: java.io.InputStream)Array[Byte]">readWholeStream</a><span class="delimiter">(</span><a href="#408043" title="=&gt; java.io.InputStream">is</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[java.io.InputStream]" id="328116">stream</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[java.io.InputStream]">Box</a><span class="delimiter">[</span>InputStream<span class="delimiter">]</span> = <a href="#412123" title="(x$1: net.liftweb.common.Box[java.io.InputStream])net.liftweb.common.Box[java.io.InputStream]">synchronized</a> <span class="delimiter">{</span>
    <span title="net.liftweb.common.Box[java.io.InputStream]" class="keyword">if</span> <span class="delimiter">(</span><a href="#328111" title="=&gt; Boolean">calc</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#328111" title="(x$1: Boolean)Unit">calc</a> = <span title="Boolean(true)" class="keyword">true</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.io.InputStream)net.liftweb.common.Full[java.io.InputStream]">Full</a><span class="delimiter">(</span><a href="#408043" title="=&gt; java.io.InputStream">is</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class ParamCalcInfo extends java.lang.Object with ScalaObject with Product with Serializable" id="412119">ParamCalcInfo</a><a href="#412119" title="ScalaObject" class="delimiter">(</a><a title="List[String]" id="349683">paramNames</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                               <a title="Map[String,List[String]]" id="349684">params</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>,
                               <a title="List[net.liftweb.http.FileParamHolder]" id="349685">uploadedFiles</a>: <span title="List[net.liftweb.http.FileParamHolder]">List</span><span class="delimiter">[</span>FileParamHolder<span class="delimiter">]</span>,
                               <a title="net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream]" id="349686">body</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream]">Box</a><span class="delimiter">[</span>BodyOrInputStream<span class="delimiter">]</span><span class="delimiter">)</span>


<span class="comment">/**
 * Holds information about the content type and subtype including
 * the q parameter and extension information.
 */</span>
<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class ContentType extends java.lang.Object with Ordered[net.liftweb.http.ContentType] with ScalaObject with Product with Serializable" id="409686">ContentType</a><a href="#409686" title="ScalaObject" class="delimiter">(</a><a title="String" id="410226">theType</a>: <span title="String">String</span>, 
                             <a title="String" id="410227">subtype</a>: <span title="String">String</span>, 
                             <a title="Int" id="410228">order</a>: <span title="Int">Int</span>,
                             <a title="net.liftweb.common.Box[Double]" id="410229">q</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span>, 
                             <a title="List[(String, String)]" id="410230">extension</a>: <span title="List[(String, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="Ordered[net.liftweb.http.ContentType]">Ordered</span><span class="delimiter">[</span>ContentType<span class="delimiter">]</span>
  <span class="delimiter">{</span>
    <span class="comment">/**
     * Compares this to another ContentType instance based on the q
     * and if the q matches, compare based on specialization (* vs.
     * explicit and then order.
     */</span>
    <span class="keyword">def</span> <a title="(that: net.liftweb.http.ContentType)Int" id="380236">compare</a><span class="delimiter">(</span><a title="net.liftweb.http.ContentType" id="409528">that</a>: <a href="#409686" title="net.liftweb.http.ContentType">ContentType</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">(</span><span class="delimiter">(</span><a href="#409528" title="net.liftweb.http.ContentType">that</a>.<a href="#410229" title="=&gt; net.liftweb.common.Box[Double]">q</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="implicit scala.LowPriorityImplicits.doubleWrapper : (x: Double)scala.runtime.RichDouble">openOr</a> <span title="Double(1.0)" class="double">1d</span><span class="delimiter">)</span> <span title="(y: Double)Int">compare</span> <span class="delimiter">(</span><a href="#410229" title="=&gt; net.liftweb.common.Box[Double]">q</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Double)Double">openOr</a> <span title="Double(1.0)" class="double">1d</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Int" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Int" class="int">0</span> =&gt; 
        <span class="keyword">def</span> <a title="=&gt; Int" id="409558">doDefault</a> = <span class="delimiter">{</span>
          <a href="#410228" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">order</a> <span title="(y: Int)Int">compare</span> <a href="#409528" title="net.liftweb.http.ContentType">that</a>.<a href="#410228" title="=&gt; Int">order</a>
        <span class="delimiter">}</span>

        <span title="(_1: String, _2: String, _3: String, _4: String)(String, String, String, String)" class="delimiter">(</span><a href="#410226" title="=&gt; String">theType</a>, <a href="#409528" title="net.liftweb.http.ContentType">that</a>.<a href="#410226" title="=&gt; String">theType</a>, <a href="#410227" title="=&gt; String">subtype</a>, <a href="#409528" title="net.liftweb.http.ContentType">that</a>.<a href="#410227" title="=&gt; String">subtype</a><span class="delimiter">)</span> <span title="Int" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Int" class="delimiter">(</span><span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, _, _<span class="delimiter">)</span> =&gt; <a href="#409558" title="=&gt; Int">doDefault</a>
          <span class="keyword">case</span> <span title="Int(1)" class="delimiter">(</span><span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, _, _, _<span class="delimiter">)</span> =&gt; <span title="Int(1)" class="int">1</span>
          <span class="keyword">case</span> <span title="Int(-1)" class="delimiter">(</span>_, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, _, _<span class="delimiter">)</span> =&gt; -<span title="Int(-1)" class="int">1</span>
          <span class="keyword">case</span> <span title="Int" class="delimiter">(</span>_, _, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span> =&gt; <a href="#409558" title="=&gt; Int">doDefault</a>
          <span class="keyword">case</span> <span title="Int(1)" class="delimiter">(</span>_, _, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, _<span class="delimiter">)</span> =&gt; <span title="Int(1)" class="int">1</span>
          <span class="keyword">case</span> <span title="Int(-1)" class="delimiter">(</span>_, _, _, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span> =&gt; -<span title="Int(-1)" class="int">1</span>
          <span class="keyword">case</span> <span title="Int">_</span> =&gt; <a href="#409558" title="=&gt; Int">doDefault</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Int" id="409621">x</a> =&gt; <a href="#409621" title="Int">x</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Does this ContentType match the String including
     * wildcard support
     */</span>
    <span class="keyword">def</span> <a title="(contentType: (String, String))Boolean" id="380237">matches</a><span class="delimiter">(</span><a title="(String, String)" id="380240">contentType</a>: <span title="(String, String)" class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span class="delimiter">(</span><a href="#410226" title="=&gt; String">theType</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#410226" title="=&gt; String">theType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#380240" title="(String, String)">contentType</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <span class="delimiter">(</span><a href="#410227" title="=&gt; String">subtype</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span title="(x: Boolean)Boolean">||</span> <a href="#410227" title="=&gt; String">subtype</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#380240" title="(String, String)">contentType</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span>
    
    <span class="comment">/**
     * Is it a wildcard
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="380238">wildCard_?</a> = <a href="#410226" title="=&gt; String">theType</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#410227" title="=&gt; String">subtype</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
  <span class="delimiter">}</span>

<span class="comment">/**
 * The ContentType companion object that has helper methods
 * for parsing Accept headers and other things that
 * contain multiple ContentType information.
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.ContentType" id="410241">ContentType</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/**
   * Parse the String into a series of ContentType instances,
   * returning the multiple ContentType instances
   */</span>
  <span class="keyword">def</span> <a title="(str: String)List[net.liftweb.http.ContentType]" id="409680">parse</a><span class="delimiter">(</span><a title="String" id="409754">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="List[net.liftweb.http.ContentType]">List</span><span class="delimiter">[</span>ContentType<span class="delimiter">]</span> = 
    <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="java.lang.String" id="409882">part</a>, <a title="Int" id="409883">index</a><span class="delimiter">)</span> &lt;- <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48858" title="implicit net.liftweb.util.StringHelpers.stringToSuper : (in: String)net.liftweb.util.SuperString">str</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#58434" title="(sep: Char)List[String]">charSplit</a><span class="delimiter">(</span><span title="Char(\',\')" class="char">','</span><span class="delimiter">)</span>.
      <span title="(f: String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#409777" title="String">_</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span>.<a href="#409855" title="(f: (java.lang.String, Int) =&gt; scala.collection.GenTraversableOnce[net.liftweb.http.ContentType])(implicit bf: scala.collection.generic.CanBuildFrom[List[(java.lang.String, Int)],net.liftweb.http.ContentType,List[net.liftweb.http.ContentType]])List[net.liftweb.http.ContentType]">zipWithIndex</a> <span class="comment">// split at comma</span>
      <a title="net.liftweb.http.ContentType" id="409891">content</a> &lt;- <a href="#409685" title="(content: String, index: Int)net.liftweb.common.Box[net.liftweb.http.ContentType]">parseIt</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.ContentType =&gt; net.liftweb.http.ContentType)net.liftweb.common.Box[net.liftweb.http.ContentType]" class="delimiter">(</a><a href="#409882" title="java.lang.String">part</a>, <a href="#409883" title="Int">index</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#409891" title="net.liftweb.http.ContentType">content</a><span class="delimiter">)</span>.<span title="(lt: (net.liftweb.http.ContentType, net.liftweb.http.ContentType) =&gt; Boolean)List[net.liftweb.http.ContentType]">sortWith</span><span class="delimiter">(</span><a href="#409965" title="net.liftweb.http.ContentType">_</a> <span title="(that: net.liftweb.http.ContentType)Boolean">&lt;</span> <a href="#409966" title="net.liftweb.http.ContentType">_</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object net.liftweb.http.ContentType.TwoType" id="409681">TwoType</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(in: String)Option[(String, String)]" id="409969">unapply</a><span class="delimiter">(</span><a title="String" id="409971">in</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[(String, String)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = 
      <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48858" title="implicit net.liftweb.util.StringHelpers.stringToSuper : (in: String)net.liftweb.util.SuperString">in</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#58434" title="(sep: Char)List[String]">charSplit</a><span class="delimiter">(</span><span title="Char(\'/\')" class="char">'/'</span><span class="delimiter">)</span> <span title="Option[(String, String)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Some[net.liftweb.util.Helpers.TheStrBindParam]" id="409979">a</a> :: <a title="String" id="409984">b</a> :: <span title="object Nil">Nil</span> =&gt; <span title="(x: net.liftweb.util.Helpers.TheStrBindParam)Some[net.liftweb.util.Helpers.TheStrBindParam]">Some</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">a</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <a href="#409984" title="String">b</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object net.liftweb.http.ContentType.EqualsSplit" id="409683">EqualsSplit</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: String)java.lang.String" id="410030">removeQuotes</a><span class="delimiter">(</span><a title="String" id="410033">s</a>: <span title="String">String</span><span class="delimiter">)</span> = 
      <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#410033" title="String">s</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#410033" title="String">s</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#410033" title="String">s</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <a href="#410033" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#410033" title="String">s</a>

    <span class="keyword">def</span> <a title="(in: String)Option[(String, String)]" id="410031">unapply</a><span class="delimiter">(</span><a title="String" id="410044">in</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[(String, String)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48858" title="implicit net.liftweb.util.StringHelpers.stringToSuper : (in: String)net.liftweb.util.SuperString">in</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#58433" title="(sep: String)List[String]">roboSplit</a><span class="delimiter">(</span><span title="java.lang.String(&quot;=&quot;)" class="string">&quot;=&quot;</span><span class="delimiter">)</span> <span title="Option[(String, String)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Some[net.liftweb.util.Helpers.TheStrBindParam]" id="410052">a</a> :: <a title="String" id="410057">b</a> :: <span title="object Nil">Nil</span> =&gt; <span title="(x: net.liftweb.util.Helpers.TheStrBindParam)Some[net.liftweb.util.Helpers.TheStrBindParam]">Some</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">a</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <a href="#410030" title="(s: String)java.lang.String">removeQuotes</a><span class="delimiter">(</span><a href="#410057" title="String">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(content: String, index: Int)net.liftweb.common.Box[net.liftweb.http.ContentType]" id="409685">parseIt</a><span class="delimiter">(</span><a title="String" id="409884">content</a>: <span title="String">String</span>, <a title="Int" id="409885">index</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.ContentType]">Box</a><span class="delimiter">[</span>ContentType<span class="delimiter">]</span> = <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48858" title="implicit net.liftweb.util.StringHelpers.stringToSuper : (in: String)net.liftweb.util.SuperString">content</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#58433" title="(sep: String)List[String]">roboSplit</a><span class="delimiter">(</span><span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span> <span title="net.liftweb.common.Box[net.liftweb.http.ContentType]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#409969" title="net.liftweb.common.Full[net.liftweb.http.ContentType]">TwoType</a><span class="delimiter">(</span><a title="String" id="410109">typ</a>, <a title="String" id="410110">subType</a><span class="delimiter">)</span> :: <a title="List[String]" id="410111">xs</a> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[(String, String)]" id="410112">kv</a> = <a href="#410111" title="List[String]">xs</a>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[(String, String)])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, String),List[(String, String)]])List[(String, String)]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(String, String),List[(String, String)]]" class="delimiter">(</span><a href="#409683" title="object net.liftweb.http.ContentType.EqualsSplit">EqualsSplit</a>.<a href="#410031" title="(xo: Option[(String, String)])Iterable[(String, String)]">unapply</a><span class="delimiter">)</span> <span class="comment">// get the key/value pairs</span>
      <span class="keyword">val</span> <a title="net.liftweb.common.Box[Double]" id="410113">q</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Double]">Box</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = <a href="../../../../util/net/liftweb/util/ListHelpers.scala.html#48877" title="(in: Seq[(String, String)])(_f: (String, String) =&gt; net.liftweb.common.Box[Double])net.liftweb.common.Box[Double]">first</a><span class="delimiter">(</span><a href="#410112" title="List[(String, String)]">kv</a><span class="delimiter">)</span><a href="#410213" title="net.liftweb.common.Box[Double]" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="net.liftweb.common.Box[Double]" class="delimiter">(</span><a title="String" id="410216">k</a>, <a title="String" id="410217">v</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#410216" title="String">k</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;q&quot;)" class="string">&quot;q&quot;</span> =&gt; <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BasicTypesHelpers.scala.html#49099" title="(in: String)net.liftweb.common.Box[Double]">asDouble</a><span class="delimiter">(</span><a href="#410217" title="String">v</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="delimiter">}</span>
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.ContentType)net.liftweb.common.Full[net.liftweb.http.ContentType]">Full</a><span class="delimiter">(</span><a href="#409686" title="(theType: String, subtype: String, order: Int, q: net.liftweb.common.Box[Double], extension: List[(String, String)])net.liftweb.http.ContentType">ContentType</a><span class="delimiter">(</span><a href="#410109" title="String">typ</a>, <a href="#410110" title="String">subType</a>, <a href="#409885" title="Int">index</a>, <a href="#410113" title="net.liftweb.common.Box[Double]">q</a>, <a href="#410112" title="List[(String, String)]">kv</a>.<span title="(p: (String, String) =&gt; Boolean)List[(String, String)]">filter</span><span class="delimiter">{</span><a href="#410235" title="(String, String)">_</a>.<span title="=&gt; String">_1</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;q&quot;)" class="string">&quot;q&quot;</span><span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>



<span class="comment">/**
 * Contains request information
 */</span>
<span class="keyword">class</span> <a title="class Req extends java.lang.Object with net.liftweb.util.HasParams with net.liftweb.http.UserAgentCalculator with ScalaObject" id="14573">Req</a><a href="#14573" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="net.liftweb.http.ParsePath" id="328130">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>,
          <span class="keyword">val</span> <a title="String" id="328131">contextPath</a>: <span title="String">String</span>,
          <span class="keyword">val</span> <a title="net.liftweb.http.RequestType" id="328132">requestType</a>: <a href="RequestType.scala.html#14589" title="net.liftweb.http.RequestType">RequestType</a>,
          <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="328133">contentType</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span>,
          <span class="keyword">val</span> <a title="net.liftweb.http.provider.HTTPRequest" id="328134">request</a>: <a href="provider/HTTPRequest.scala.html#15082" title="net.liftweb.http.provider.HTTPRequest">HTTPRequest</a>,
          <span class="keyword">val</span> <a title="Long" id="328135">nanoStart</a>: <span title="Long">Long</span>,
          <span class="keyword">val</span> <a title="Long" id="328136">nanoEnd</a>: <span title="Long">Long</span>,
          <a title="Boolean" id="328137">_stateless_?</a> : <span title="Boolean">Boolean</span>,
          <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">val</span> <a title="() =&gt; net.liftweb.http.ParamCalcInfo" id="328138">paramCalculator</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; ParamCalcInfo,
          <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Map[String,String]" id="328139">addlParams</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/JsonCmd.scala.html#13405" title="net.liftweb.util.HasParams">HasParams</a> <span class="keyword">with</span> <a href="#14543" title="net.liftweb.http.UserAgentCalculator">UserAgentCalculator</a>
<span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="149157">toString</a> = <span title="java.lang.String(&quot;Req(&quot;)" class="string">&quot;Req(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#149179" title="=&gt; List[String]">paramNames</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#149194" title="=&gt; Map[String,List[String]]">params</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a> <span title="(x$1: Any)java.lang.String">+</span>
  <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328131" title="=&gt; String">contextPath</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>

  <span class="keyword">def</span> <a title="(_path: net.liftweb.http.ParsePath, _contextPath: String, _requestType: net.liftweb.http.RequestType, _contentType: net.liftweb.common.Box[String], _request: net.liftweb.http.provider.HTTPRequest, _nanoStart: Long, _nanoEnd: Long, _paramCalculator: () =&gt; net.liftweb.http.ParamCalcInfo, _addlParams: Map[String,String])net.liftweb.http.Req" id="149158" class="keyword">this</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="328121">_path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>,
           <a title="String" id="328122">_contextPath</a>: <span title="String">String</span>,
          <a title="net.liftweb.http.RequestType" id="328123">_requestType</a>: <a href="RequestType.scala.html#14589" title="net.liftweb.http.RequestType">RequestType</a>,
          <a title="net.liftweb.common.Box[String]" id="328124">_contentType</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span>,
          <a title="net.liftweb.http.provider.HTTPRequest" id="328125">_request</a>: <a href="provider/HTTPRequest.scala.html#15082" title="net.liftweb.http.provider.HTTPRequest">HTTPRequest</a>,
          <a title="Long" id="328126">_nanoStart</a>: <span title="Long">Long</span>,
          <a title="Long" id="328127">_nanoEnd</a>: <span title="Long">Long</span>,
          <a title="() =&gt; net.liftweb.http.ParamCalcInfo" id="328128">_paramCalculator</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; ParamCalcInfo,
          <a title="Map[String,String]" id="328129">_addlParams</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#14573" title="Req.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#328121" title="net.liftweb.http.ParsePath">_path</a>,
                                                   <a href="#328122" title="String">_contextPath</a>,
                                                   <a href="#328123" title="net.liftweb.http.RequestType">_requestType</a>,
                                                   <a href="#328124" title="net.liftweb.common.Box[String]">_contentType</a>,
                                                   <a href="#328125" title="net.liftweb.http.provider.HTTPRequest">_request</a>,
                                                   <a href="#328126" title="Long">_nanoStart</a>,
                                                   <a href="#328127" title="Long">_nanoEnd</a>,
                                                   <span title="Boolean(false)" class="keyword">false</span>,
                                                   <a href="#328128" title="() =&gt; net.liftweb.http.ParamCalcInfo">_paramCalculator</a>,
                                                   <a href="#328129" title="Map[String,String]">_addlParams</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Build a new Req, except it has a different path.
   * Useful for creating Reqs with sub-paths
   */</span>
  <span class="keyword">def</span> <a title="(newPath: net.liftweb.http.ParsePath)net.liftweb.http.Req" id="149159">withNewPath</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="410506">newPath</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">)</span>: <a href="#14573" title="net.liftweb.http.Req">Req</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.http.Req" id="410508">outer</a> = <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a>

    <a href="#410509" title="net.liftweb.http.Req{}" class="keyword">new</a> <a href="#14573" title="anonymous class $anon extends net.liftweb.http.Req" id="410509">Req</a><span class="delimiter">(</span><a href="#410506" title="net.liftweb.http.ParsePath">newPath</a>,
            <a href="#328131" title="=&gt; String">contextPath</a>,
            <a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>,
            <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>,
            <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>,
            <a href="#328135" title="=&gt; Long">nanoStart</a>,
            <a href="#328136" title="=&gt; Long">nanoEnd</a>,
            <a href="#328137" title="Boolean">_stateless_?</a>,
            <a href="#328138" title="=&gt; () =&gt; net.liftweb.http.ParamCalcInfo">paramCalculator</a>,
            <a href="#328139" title="=&gt; Map[String,String]">addlParams</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[net.liftweb.json.JsonAST.JValue]" id="410514">json</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.json.JsonAST.JValue]">Box</a><span class="delimiter">[</span>JsonAST.JValue<span class="delimiter">]</span> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149199" title="=&gt; net.liftweb.common.Box[net.liftweb.json.JsonAST.JValue]">json</a>

      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[scala.xml.Elem]" id="410516">xml</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Elem]">Box</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149206" title="=&gt; net.liftweb.common.Box[scala.xml.Elem]">xml</a>

      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]" id="410518">location</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">Box</a><span class="delimiter">[</span>Loc<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149208" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">location</a>

      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.CompleteMenu" id="410520">buildMenu</a>: <a href="../sitemap/Loc.scala.html#15293" title="net.liftweb.sitemap.CompleteMenu">CompleteMenu</a> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149211" title="=&gt; net.liftweb.sitemap.CompleteMenu">buildMenu</a>

      <span class="comment">/**
       * the accept header
       */</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="410522">accepts</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149233" title="=&gt; net.liftweb.common.Box[String]">accepts</a>
    
      <span class="comment">/**
       * What is the content type in order of preference by the requestor
       * calculated via the Accept header
       */</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[net.liftweb.http.ContentType]" id="410524">weightedAccept</a>: <span title="List[net.liftweb.http.ContentType]">List</span><span class="delimiter">[</span>ContentType<span class="delimiter">]</span> = 
        <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>

      <span class="comment">/**
       * Returns true if the request accepts XML
       */</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="410526">acceptsXml_?</a> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149237" title="=&gt; Boolean">acceptsXml_?</a>

      <span class="comment">/**
       * Returns true if the request accepts JSON
       */</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="410528">acceptsJson_?</a> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149239" title="=&gt; Boolean">acceptsJson_?</a>

      <span class="comment">/**
       * Is the Accepts Header * / *
       */</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="410530">acceptsStarStar</a> : <span title="Boolean">Boolean</span> = <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149241" title="=&gt; Boolean">acceptsStarStar</a>

      <span class="comment">/**
       * Returns true if the request accepts JavaScript
       */</span>
      <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="410532">acceptsJavaScript_?</a> = 
        <a href="#410508" title="net.liftweb.http.Req">outer</a>.<a href="#149243" title="=&gt; Boolean">acceptsJavaScript_?</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Should the request be treated as stateless (no session created for it)?
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149161">stateless_?</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="328146">ret</a> = <a href="#328137" title="Boolean">_stateless_?</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#149208" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">location</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.sitemap.Loc[_] =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#328153" title="net.liftweb.sitemap.Loc[_]">_</a>.<a href="../sitemap/Loc.scala.html#215909" title="=&gt; Boolean">stateless_?</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <a href="#328146" title="Boolean">ret</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if the content-type is text/xml or application/xml
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149162">xml_?</a> = <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27073" title="(dflt: =&gt; Boolean)(f: String =&gt; Boolean)Boolean">dmap</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">{</span>
    <a href="#410559" title="String">_</a>.<span title="()java.lang.String">toLowerCase</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Boolean(true)" id="410562">x</a> <span class="keyword">if</span> <a href="#410562" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;text/xml&quot;)" class="string">&quot;text/xml&quot;</span><span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <a title="Boolean(true)" id="410565">x</a> <span class="keyword">if</span> <a href="#410565" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;application/xml&quot;)" class="string">&quot;application/xml&quot;</span><span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if the content-type is text/json or application/json
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149163">json_?</a> = <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27073" title="(dflt: =&gt; Boolean)(f: String =&gt; Boolean)Boolean">dmap</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">{</span>
    <a href="#410583" title="String">_</a>.<span title="()java.lang.String">toLowerCase</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Boolean(true)" id="410586">x</a> <span class="keyword">if</span> <a href="#410586" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;text/json&quot;)" class="string">&quot;text/json&quot;</span><span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <a title="Boolean(true)" id="410589">x</a> <span class="keyword">if</span> <a href="#410589" title="java.lang.String">x</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;application/json&quot;)" class="string">&quot;application/json&quot;</span><span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Make the servlet session go away
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="149164">destroyServletSession</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="net.liftweb.http.provider.HTTPRequest" id="410599">httpReq</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.provider.HTTPRequest =&gt; Unit)Unit">!!</a> <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>
    <span class="delimiter">}</span> <a href="#410599" title="net.liftweb.http.provider.HTTPRequest">httpReq</a>.<a href="provider/HTTPRequest.scala.html#216877" title="()Unit">destroyServletSession</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.Req" id="149165">snapshot</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.http.ParamCalcInfo" id="328086">paramCalc</a> = <a href="#328138" title="()net.liftweb.http.ParamCalcInfo">paramCalculator</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#328086" title="net.liftweb.http.ParamCalcInfo">paramCalc</a>.<a href="#349686" title="=&gt; net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream]">body</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.BodyOrInputStream =&gt; net.liftweb.common.Box[Array[Byte]])net.liftweb.common.Box[net.liftweb.common.Box[Array[Byte]]]">map</a><span class="delimiter">(</span><a href="#328105" title="net.liftweb.http.BodyOrInputStream">_</a>.<a href="#328113" title="=&gt; net.liftweb.common.Box[Array[Byte]]">body</a><span class="delimiter">)</span> <span class="comment">// make sure we grab the body</span>
    <span title="net.liftweb.http.Req" class="keyword">new</span> <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">(</span><a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a>,
            <a href="#328131" title="=&gt; String">contextPath</a>,
            <a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>,
            <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>,
            <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216895" title="=&gt; net.liftweb.http.provider.HTTPRequest">snapshot</a>,
            <a href="#328135" title="=&gt; Long">nanoStart</a>,
            <a href="#328136" title="=&gt; Long">nanoEnd</a>,
            <a href="#149160" title="=&gt; Boolean">stateless_?</a>,
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#328086" title="net.liftweb.http.ParamCalcInfo">paramCalc</a>,
            <a href="#328139" title="=&gt; Map[String,String]">addlParams</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="149166">section</a> = <a href="#149173" title="(n: Int)String">path</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span><span class="keyword">case</span> <span title="java.lang.String(&quot;default&quot;)" class="keyword">null</span> =&gt; <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span>; <span class="keyword">case</span> <a title="String" id="410258">s</a> =&gt; <a href="#410258" title="String">s</a><span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="149168">view</a> = <a href="#149173" title="(n: Int)String">path</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span><span class="keyword">case</span> <span title="java.lang.String(&quot;index&quot;)" class="keyword">null</span> =&gt; <span title="java.lang.String(&quot;index&quot;)" class="string">&quot;index&quot;</span>; <span class="keyword">case</span> <a title="String" id="410263">s</a>@_ =&gt; <a href="#410263" title="String">s</a><span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="149170">id</a> = <a href="#149172" title="(n: Int)java.lang.String">pathParam</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(n: Int)java.lang.String" id="149172">pathParam</a><span class="delimiter">(</span><a title="Int" id="410264">n</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="#216857" title="=&gt; List[java.lang.String]">wholePath</a>.<span title="(n: Int)List[java.lang.String]">drop</span><span class="delimiter">(</span><a href="#410264" title="Int">n</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<span title="=&gt; Option[java.lang.String]">headOption</span> <span title="(default: =&gt; java.lang.String)java.lang.String">getOrElse</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="keyword">def</span> <a title="(n: Int)String" id="149173">path</a><span class="delimiter">(</span><a title="Int" id="230068">n</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#328130" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="#216857" title="=&gt; List[java.lang.String]">wholePath</a>.<span title="(n: Int)List[java.lang.String]">drop</span><span class="delimiter">(</span><a href="#230068" title="Int">n</a><span class="delimiter">)</span>.<span title="=&gt; Option[java.lang.String]">headOption</span> <span title="(default: =&gt; java.lang.String)java.lang.String">getOrElse</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="keyword">def</span> <a title="(n: String)net.liftweb.common.Box[String]" id="149174">param</a><span class="delimiter">(</span><a title="String" id="236372">n</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <a href="#149194" title="=&gt; Map[String,List[String]]">params</a>.<span title="(key: String)Option[List[String]]">get</span><span class="delimiter">(</span><a href="#236372" title="String">n</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Full[String]">Some</span><span class="delimiter">(</span><a title="String" id="410616">s</a> :: _<span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: String)net.liftweb.common.Full[String]">Full</a><span class="delimiter">(</span><a href="#410616" title="String">s</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
  <span class="delimiter">}</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[(String, String)]" id="149176">headers</a>: <span title="List[(String, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> =
  <span class="keyword">for</span> <span class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPParam" id="410645">h</a> &lt;- <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216866" title="(f: net.liftweb.http.provider.HTTPParam =&gt; scala.collection.GenTraversableOnce[(String, String)])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.provider.HTTPParam],(String, String),List[(String, String)]])List[(String, String)]">headers</a>;
       <a title="String" id="410662">p</a> &lt;- <a href="#410645" title="net.liftweb.http.provider.HTTPParam">h</a>.<a href="provider/HTTPParam.scala.html#364982" title="(f: String =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, String),List[(String, String)]])List[(String, String)]">values</a>
  <span class="delimiter">)</span> <span class="keyword">yield</span> <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#410645" title="net.liftweb.http.provider.HTTPParam">h</a> <a href="provider/HTTPParam.scala.html#364980" title="=&gt; String">name</a>, <a href="#410662" title="String">p</a><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(name: String)List[String]" id="149177">headers</a><span class="delimiter">(</span><a title="String" id="410723">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#149175" title="=&gt; List[(String, String)]">headers</a>.<span title="(p: (String, String) =&gt; Boolean)List[(String, String)]">filter</span><span class="delimiter">(</span><a href="#410732" title="(String, String)">_</a>.<span title="=&gt; String">_1</span>.<span title="(x$1: java.lang.String)Boolean">equalsIgnoreCase</span><span class="delimiter">(</span><a href="#410723" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: (String, String) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#410752" title="(String, String)">_</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: String)net.liftweb.common.Box[String]" id="149178">header</a><span class="delimiter">(</span><a title="String" id="410780">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#149177" title="(name: String)List[String]">headers</a><span class="delimiter">(</span><a href="#410780" title="String">name</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="net.liftweb.common.Full[String]" id="410798">x</a> :: _ =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: String)net.liftweb.common.Full[String]">Full</a><span class="delimiter">(</span><a href="#410798" title="String">x</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Get the name of the params
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[String]" id="149179">paramNames</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#149186" title="=&gt; List[String]">_paramNames</a>

  <span class="comment">/**
   * the raw parameters, use params
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Map[String,List[String]]" id="149180">_params</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#149188" title="=&gt; Map[String,List[String]]">__params</a>

  <span class="comment">/**
   * The uploaded files
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.http.FileParamHolder]" id="149181">uploadedFiles</a>: <span title="List[net.liftweb.http.FileParamHolder]">List</span><span class="delimiter">[</span>FileParamHolder<span class="delimiter">]</span> = <a href="#149190" title="=&gt; List[net.liftweb.http.FileParamHolder]">_uploadedFiles</a>

  <span class="comment">/**
   * The POST or PUT body.  This will be empty if the content
   * type is application/x-www-form-urlencoded or a multipart mime.
   * It will also be empty if rawInputStream is accessed
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[Array[Byte]]" id="149182">body</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Array[Byte]]">Box</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#149192" title="=&gt; net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream]">_body</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.BodyOrInputStream =&gt; net.liftweb.common.Box[Array[Byte]])net.liftweb.common.Box[Array[Byte]]">flatMap</a><span class="delimiter">(</span><a href="#410810" title="net.liftweb.http.BodyOrInputStream">_</a>.<a href="#328113" title="=&gt; net.liftweb.common.Box[Array[Byte]]">body</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The raw input stream of a POST or PUT that is not
   * application/x-www-form-urlencoded or a multipart mime
   * and if this method is called before the body method.
   * Remember to close the stream when done.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[java.io.InputStream]" id="149183">rawInputStream</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[java.io.InputStream]">Box</a><span class="delimiter">[</span>InputStream<span class="delimiter">]</span> = <a href="#149192" title="=&gt; net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream]">_body</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.BodyOrInputStream =&gt; net.liftweb.common.Box[java.io.InputStream])net.liftweb.common.Box[java.io.InputStream]">flatMap</a><span class="delimiter">(</span><a href="#410817" title="net.liftweb.http.BodyOrInputStream">_</a>.<a href="#328115" title="=&gt; net.liftweb.common.Box[java.io.InputStream]">stream</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> ParamCalcInfo<a href="#149187" title="(List[String], Map[String,List[String]], List[net.liftweb.http.FileParamHolder], net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream])" id="149185" class="delimiter">(</a><a href="#149184" title="List[String]" id="149187">_paramNames</a> <span class="comment">/*: List[String]*/</span>,
            <a href="#149184" title="Map[String,List[String]]" id="149189">__params</a> <span class="comment">/*: Map[String, List[String]]*/</span>,
            <a href="#149184" title="List[net.liftweb.http.FileParamHolder]" id="149191">_uploadedFiles</a> <span class="comment">/*: List[FileParamHolder]*/</span>,
            <a href="#149184" title="net.liftweb.common.Box[net.liftweb.http.BodyOrInputStream]" id="149193">_body</a> <span class="comment">/*: Box[BodyOrInputStream]*/</span><span class="delimiter">)</span> = <a href="#412119" title="net.liftweb.http.ParamCalcInfo @unchecked" class="delimiter">{</a>
    <span class="keyword">val</span> <a title="net.liftweb.http.ParamCalcInfo" id="410281">ret</a> = <a href="#328138" title="()net.liftweb.http.ParamCalcInfo">paramCalculator</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#410281" title="net.liftweb.http.ParamCalcInfo">ret</a>
  <span class="delimiter">}</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[String,List[String]]" id="149195">params</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#328139" title="=&gt; Map[String,String]">addlParams</a>.<span title="(z: Map[String,List[String]])(op: (Map[String,List[String]], (String, String)) =&gt; Map[String,List[String]])Map[String,List[String]]">foldLeft</span><span class="delimiter">(</span><a href="#149180" title="=&gt; Map[String,List[String]]">_params</a><span class="delimiter">)</span><a href="#410831" title="Map[String,List[String]]" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="scala.collection.immutable.Map[String,List[String]]" class="delimiter">(</span><a title="Map[String,List[String]]" id="410841">map</a>, <span class="delimiter">(</span><a title="String" id="410844">key</a>, <a title="String" id="410845">value</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#410841" title="Map[String,List[String]]">map</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc">key</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58395" title="(in: List[String])(String, List[String])">-&gt;</a> <span class="delimiter">(</span><a href="#410845" title="String">value</a> <a href="#410923" title="(x: String)List[String]">::</a> <a href="#410841" title="Map[String,List[String]]">map</a>.<span title="(key: String, default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><a href="#410844" title="String">key</a>, <span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[net.liftweb.http.provider.HTTPCookie]" id="149197">cookies</a> = <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216861" title="=&gt; List[net.liftweb.http.provider.HTTPCookie]">cookies</a> <span title="List[net.liftweb.http.provider.HTTPCookie]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type" class="keyword">null</span> =&gt; <span title="object Nil">Nil</span>
    <span class="keyword">case</span> <a title="List[net.liftweb.http.provider.HTTPCookie]" id="410300">ca</a> =&gt; <a href="#410300" title="List[net.liftweb.http.provider.HTTPCookie]">ca</a>.<span title="=&gt; List[net.liftweb.http.provider.HTTPCookie]">toList</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Get the session ID if there is one without creating on
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[String]" id="149198">sessionId</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="net.liftweb.http.provider.HTTPRequest" id="410962">httpRequest</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.provider.HTTPRequest =&gt; net.liftweb.common.Box[String])net.liftweb.common.Box[String]">!!</a> <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>
      <a title="String" id="410967">sid</a> &lt;- <a href="#410962" title="net.liftweb.http.provider.HTTPRequest">httpRequest</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; String)net.liftweb.common.Box[String]">sessionId</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#410967" title="String">sid</a>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[net.liftweb.json.JsonAST.JValue]" id="149200">json</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.json.JsonAST.JValue]">Box</a><span class="delimiter">[</span>JsonAST.JValue<span class="delimiter">]</span> = 
    <span title="net.liftweb.common.Box[net.liftweb.json.JsonAST.JValue]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#149163" title="=&gt; Boolean">json_?</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="keyword">else</span> <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">import</span> java.io._

      <span class="keyword">def</span> <a title="=&gt; scala.util.matching.Regex" id="410971">r</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;; *charset=(.*)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
      <span class="keyword">def</span> <a title="=&gt; scala.util.matching.Regex" id="410972">r2</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;[^=]*$&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

      <span class="keyword">def</span> <a title="=&gt; String" id="410973">charSet</a>: <span title="String">String</span> = <a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: String =&gt; net.liftweb.common.Box[String])net.liftweb.common.Box[String]">flatMap</a><a href="../../../../common/net/liftweb/common/Box.scala.html#28630" title="(in: net.liftweb.common.Box[String])Option[String]" class="delimiter">(</a><a title="String" id="410984">ct</a> =&gt; <a href="#410971" title="=&gt; scala.util.matching.Regex">r</a>.<span title="(source: java.lang.CharSequence)Option[String]">findFirstIn</span><span class="delimiter">(</span><a href="#410984" title="String">ct</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Option[String])Option[String]">flatMap</span><a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[String])net.liftweb.common.Box[String]" class="delimiter">(</a><a href="#410972" title="=&gt; scala.util.matching.Regex">r2</a>.<a href="#410990" title="(source: java.lang.CharSequence)Option[String]">findFirstIn</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span><span class="delimiter">)</span>
      
      <a href="#149182" title="=&gt; net.liftweb.common.Box[Array[Byte]]">body</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Array[Byte] =&gt; net.liftweb.json.package.JValue)net.liftweb.common.Box[net.liftweb.json.package.JValue]">map</a><span class="delimiter">(</span><a title="Array[Byte]" id="411028">b</a> =&gt; 
        <a href="../../../../json/net/liftweb/json/JsonParser.scala.html#11146" title="object net.liftweb.json.JsonParser">JsonParser</a>.<a href="../../../../json/net/liftweb/json/JsonParser.scala.html#54536" title="(s: java.io.Reader, closeAutomatically: Boolean)net.liftweb.json.package.JValue">parse</a><span class="delimiter">(</span><span title="(x$1: java.io.InputStream, x$2: java.lang.String)java.io.InputStreamReader" class="keyword">new</span> 
                         <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><span title="java.io.ByteArrayInputStream" class="keyword">new</span> 
                                           <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#411028" title="Array[Byte]">b</a><span class="delimiter">)</span>, <a href="#410973" title="=&gt; String">charSet</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="411046">e</a>: <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13350" title="net.liftweb.util.LiftFlowOfControlException">LiftFlowOfControlException</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#411046" title="net.liftweb.util.LiftFlowOfControlException">e</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Failure" id="411047">e</a>: <span title="Exception">Exception</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#37830" title="(msg: String, exception: net.liftweb.common.Box[Throwable], chain: net.liftweb.common.Box[net.liftweb.common.Failure])net.liftweb.common.Failure">Failure</a><span class="delimiter">(</span><a href="#411047" title="Exception">e</a>.<span title="()java.lang.String">getMessage</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Exception)net.liftweb.common.Full[Exception]">Full</a><span class="delimiter">(</span><a href="#411047" title="Exception">e</a><span class="delimiter">)</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.http.provider.HTTPRequest]" id="149201">containerRequest</a> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#28636" title="(in: net.liftweb.http.provider.HTTPRequest)net.liftweb.common.Box[net.liftweb.http.provider.HTTPRequest]">!!</a> <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>
    <span class="comment">/**
   * The hostname to which the request was sent. This is taken from the &quot;Host&quot; HTTP header, or if that
   * does not exist, the DNS name or IP address of the server.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="149203">hostName</a>: <span title="String">String</span> = <a href="#149201" title="=&gt; net.liftweb.common.Box[net.liftweb.http.provider.HTTPRequest]">containerRequest</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.provider.HTTPRequest =&gt; String)net.liftweb.common.Box[String]">map</a><span class="delimiter">(</span><a href="#411067" title="net.liftweb.http.provider.HTTPRequest">_</a>.<a href="provider/HTTPRequest.scala.html#216882" title="=&gt; String">serverName</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; String)String">openOr</a> <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185909" title="=&gt; java.lang.String">localHostName</a>

  <span class="comment">/**
   * The host and path of the request up to and including the context path. This does
   * not include the template path or query string.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="149205">hostAndPath</a>: <span title="String">String</span> =
    <a href="#149201" title="=&gt; net.liftweb.common.Box[net.liftweb.http.provider.HTTPRequest]">containerRequest</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.provider.HTTPRequest =&gt; java.lang.String)net.liftweb.common.Box[java.lang.String]">map</a><span class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPRequest" id="411079">r</a> =&gt; <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#411079" title="net.liftweb.http.provider.HTTPRequest">r</a>.<a href="provider/HTTPRequest.scala.html#216883" title="=&gt; String">scheme</a>, <a href="#411079" title="net.liftweb.http.provider.HTTPRequest">r</a>.<a href="provider/HTTPRequest.scala.html#216884" title="=&gt; Int">serverPort</a><span class="delimiter">)</span> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><span title="java.lang.String(&quot;http&quot;)" class="string">&quot;http&quot;</span>, <span title="Int(80)" class="int">80</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;http://&quot;)" class="string">&quot;http://&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#411079" title="net.liftweb.http.provider.HTTPRequest">r</a>.<a href="provider/HTTPRequest.scala.html#216882" title="=&gt; String">serverName</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328131" title="=&gt; String">contextPath</a>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><span title="java.lang.String(&quot;https&quot;)" class="string">&quot;https&quot;</span>, <span title="Int(443)" class="int">443</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;https://&quot;)" class="string">&quot;https://&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#411079" title="net.liftweb.http.provider.HTTPRequest">r</a>.<a href="provider/HTTPRequest.scala.html#216882" title="=&gt; String">serverName</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328131" title="=&gt; String">contextPath</a>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="String" id="411096">sch</a>, <a title="Int" id="411097">port</a><span class="delimiter">)</span> =&gt; <a href="#411096" title="String">sch</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;://&quot;)" class="string">&quot;://&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#411079" title="net.liftweb.http.provider.HTTPRequest">r</a>.<a href="provider/HTTPRequest.scala.html#216882" title="=&gt; String">serverName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#411097" title="Int">port</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#328131" title="=&gt; String">contextPath</a>
    <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; java.lang.String)java.lang.String">openOr</a> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>


  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[scala.xml.Elem]" id="149207">xml</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Elem]">Box</a><span class="delimiter">[</span>Elem<span class="delimiter">]</span> = <span title="net.liftweb.common.Box[scala.xml.Elem]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#149162" title="=&gt; Boolean">xml_?</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
  <span class="keyword">else</span> 
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">import</span> java.io._
      <a href="#149182" title="=&gt; net.liftweb.common.Box[Array[Byte]]">body</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Array[Byte] =&gt; scala.xml.Elem)net.liftweb.common.Box[scala.xml.Elem]">map</a><span class="delimiter">(</span><a title="Array[Byte]" id="411109">b</a> =&gt; <span title="object scala.xml.XML">XML</span>.<span title="(is: java.io.InputStream)scala.xml.Elem">load</span><span class="delimiter">(</span><span title="java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#411109" title="Array[Byte]">b</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="411160">e</a>: <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13350" title="net.liftweb.util.LiftFlowOfControlException">LiftFlowOfControlException</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#411160" title="net.liftweb.util.LiftFlowOfControlException">e</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Failure" id="411161">e</a>: <span title="Exception">Exception</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#37830" title="(msg: String, exception: net.liftweb.common.Box[Throwable], chain: net.liftweb.common.Box[net.liftweb.common.Failure])net.liftweb.common.Failure">Failure</a><span class="delimiter">(</span><a href="#411161" title="Exception">e</a>.<span title="()java.lang.String">getMessage</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Exception)net.liftweb.common.Full[Exception]">Full</a><span class="delimiter">(</span><a href="#411161" title="Exception">e</a><span class="delimiter">)</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * The SiteMap Loc associated with this Req
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]" id="149209">location</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">Box</a><span class="delimiter">[</span>Loc<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159027" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.SiteMap]">siteMap</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.sitemap.SiteMap =&gt; net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]])net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">flatMap</a><span class="delimiter">(</span><a href="#411178" title="net.liftweb.sitemap.SiteMap">_</a>.<a href="../sitemap/SiteMap.scala.html#227719" title="(req: net.liftweb.http.Req)net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">findLoc</a><span class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Test the current SiteMap Loc for access control to insure
   * that this Req is allowed to access the page
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Either[Boolean,net.liftweb.common.Box[net.liftweb.http.LiftResponse]]" id="149210">testLocation</a>: <span title="Either[Boolean,net.liftweb.common.Box[net.liftweb.http.LiftResponse]]">Either</span><span class="delimiter">[</span>Boolean, Box<span class="delimiter">[</span>LiftResponse<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Either[Boolean,net.liftweb.common.Box[net.liftweb.http.LiftResponse]]" class="keyword">if</span> <span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159027" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.SiteMap]">siteMap</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27013" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="(a: Boolean)Left[Boolean,Nothing]">Left</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#149208" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">location</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.sitemap.Loc[_] =&gt; Either[Boolean,net.liftweb.common.Box[() =&gt; net.liftweb.http.LiftResponse]])net.liftweb.common.Box[Either[Boolean,net.liftweb.common.Box[() =&gt; net.liftweb.http.LiftResponse]]]">map</a><span class="delimiter">(</span><a href="#411210" title="net.liftweb.sitemap.Loc[_]">_</a>.<a href="../sitemap/Loc.scala.html#215923" title="=&gt; Either[Boolean,net.liftweb.common.Box[() =&gt; net.liftweb.http.LiftResponse]]">testAccess</a><span class="delimiter">)</span> <span title="Either[Boolean,net.liftweb.common.Box[net.liftweb.http.LiftResponse]]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Left[Boolean,Nothing]">Full</span><span class="delimiter">(</span>Left<span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(a: Boolean)Left[Boolean,Nothing]">Left</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Right[Nothing,net.liftweb.common.Full[net.liftweb.http.LiftResponse]]">Full</span><span class="delimiter">(</span>Right<span class="delimiter">(</span>Full<span class="delimiter">(</span><a title="() =&gt; net.liftweb.http.LiftResponse" id="411223">resp</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <span class="keyword">object</span> <a title="object theResp" id="411224">theResp</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Vars.scala.html#14774" title="net.liftweb.http.RequestVar[net.liftweb.http.LiftResponse]">RequestVar</a><span class="delimiter">(</span><a href="#411223" title="() =&gt; net.liftweb.http.LiftResponse">resp</a>.<span title="()net.liftweb.http.LiftResponse">apply</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="(b: net.liftweb.common.Full[net.liftweb.http.LiftResponse])Right[Nothing,net.liftweb.common.Full[net.liftweb.http.LiftResponse]]">Right</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.LiftResponse)net.liftweb.common.Full[net.liftweb.http.LiftResponse]">Full</a><span class="delimiter">(</span><a href="#411224" title="object theResp">theResp</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.http.LiftResponse">is</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Right[Nothing,net.liftweb.common.Empty.type]">_</span> =&gt; <span title="(b: net.liftweb.common.Empty.type)Right[Nothing,net.liftweb.common.Empty.type]">Right</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.CompleteMenu" id="149212">buildMenu</a>: <a href="../sitemap/Loc.scala.html#15293" title="net.liftweb.sitemap.CompleteMenu">CompleteMenu</a> = <a href="#149208" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Loc[_]]">location</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.sitemap.Loc[_] =&gt; net.liftweb.sitemap.CompleteMenu)net.liftweb.common.Box[net.liftweb.sitemap.CompleteMenu]">map</a><span class="delimiter">(</span><a href="#411250" title="net.liftweb.sitemap.Loc[_]">_</a>.<a href="../sitemap/Loc.scala.html#215945" title="=&gt; net.liftweb.sitemap.CompleteMenu">buildMenu</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; net.liftweb.sitemap.CompleteMenu)net.liftweb.sitemap.CompleteMenu">openOr</a>
  <a href="../sitemap/Loc.scala.html#411260" title="(lines: Seq[net.liftweb.sitemap.MenuItem])net.liftweb.sitemap.CompleteMenu">CompleteMenu</a><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](f: T)T" id="149213">initIfUnitted</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="149215">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="411268">f</a>: <a href="#149215" title="T">T</a><span class="delimiter">)</span>: <a href="#149215" title="T">T</a> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a> <span title="T" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="T">Full</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#411268" title="T">f</a>
    <span class="keyword">case</span> <span title="T">_</span> =&gt; <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49379" title="(request: net.liftweb.http.Req)(f: =&gt; T)T">statelessInit</a><span class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#411268" title="T">f</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * Computer the Not Found via a Template
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: net.liftweb.http.ParsePath)net.liftweb.http.LiftResponse" id="149216">notFoundViaTemplate</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="411278">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">)</span>: <a href="LiftResponse.scala.html#14269" title="net.liftweb.http.LiftResponse">LiftResponse</a> = <span class="delimiter">{</span>
    <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#149213" title="(f: net.liftweb.http.LiftResponse)net.liftweb.http.LiftResponse">initIfUnitted</a> <span class="delimiter">{</span>
      <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
        <a title="net.liftweb.http.LiftSession" id="411308">session</a> &lt;- <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.LiftSession =&gt; (net.liftweb.http.LiftSession, net.liftweb.common.Box[scala.xml.NodeSeq]))net.liftweb.common.Box[(net.liftweb.http.LiftSession, net.liftweb.common.Box[scala.xml.NodeSeq])]">session</a>
        <a title="net.liftweb.common.Box[scala.xml.NodeSeq]" id="411309">template</a> =  <a href="Templates.scala.html#342662" title="(places: List[String])net.liftweb.common.Box[scala.xml.NodeSeq]">Templates</a><span class="delimiter">(</span><a href="#411278" title="net.liftweb.http.ParsePath">path</a>.<a href="#216963" title="=&gt; List[String]">partPath</a><span class="delimiter">)</span>
        <a title="net.liftweb.http.LiftResponse" id="411314">resp</a> &lt;- <a href="#411308" title="net.liftweb.http.LiftSession">session</a>.<a href="LiftSession.scala.html#230248" title="(template: net.liftweb.common.Box[scala.xml.NodeSeq], request: net.liftweb.http.Req, path: net.liftweb.http.ParsePath, code: Int)net.liftweb.common.Box[net.liftweb.http.LiftResponse]">processTemplate</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.LiftResponse =&gt; net.liftweb.http.LiftResponse)net.liftweb.common.Box[net.liftweb.http.LiftResponse]" class="delimiter">(</a><a href="#411309" title="net.liftweb.common.Box[scala.xml.NodeSeq]">template</a>, <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a>, <a href="#411278" title="net.liftweb.http.ParsePath">path</a>, <span title="Int(404)" class="int">404</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#411314" title="net.liftweb.http.LiftResponse">resp</a><span class="delimiter">)</span> <span title="net.liftweb.http.LiftResponse" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftResponse" id="411318">resp</a><span class="delimiter">)</span> =&gt; <a href="#411318" title="net.liftweb.http.LiftResponse">resp</a>
        <span class="keyword">case</span> <span title="net.liftweb.http.XhtmlResponse">_</span> =&gt; <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185923" title="(in: net.liftweb.http.Req)net.liftweb.http.XhtmlResponse">defaultCreateNotFound</a><span class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.LiftResponse" id="149217">createNotFound</a>: <a href="LiftResponse.scala.html#14269" title="net.liftweb.http.LiftResponse">LiftResponse</a> = 
    <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185580" title="(value: (net.liftweb.http.Req, net.liftweb.common.Empty.type), lst: Seq[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Empty.type),net.liftweb.http.NotFound]])net.liftweb.http.NotFound">NamedPF</a><span class="delimiter">(</span><span title="(_1: net.liftweb.http.Req, _2: net.liftweb.common.Empty.type)(net.liftweb.http.Req, net.liftweb.common.Empty.type)" class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>, <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159137" title="=&gt; net.liftweb.http.LiftRules#RulesSeq[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Box[net.liftweb.common.Failure]),net.liftweb.http.NotFound]]">uriNotFound</a>.<a href="LiftRules.scala.html#185552" title="=&gt; List[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Box[net.liftweb.common.Failure]),net.liftweb.http.NotFound]]">toList</a><span class="delimiter">)</span> <span title="net.liftweb.http.LiftResponse" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="LiftRules.scala.html#14380" title="net.liftweb.http.XhtmlResponse">DefaultNotFound</a> =&gt; <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185923" title="(in: net.liftweb.http.Req)net.liftweb.http.XhtmlResponse">defaultCreateNotFound</a><span class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">NotFoundAsTemplate</span><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="411381">path</a><span class="delimiter">)</span> =&gt; <a href="#149216" title="(path: net.liftweb.http.ParsePath)net.liftweb.http.LiftResponse">notFoundViaTemplate</a><span class="delimiter">(</span><a href="#411381" title="net.liftweb.http.ParsePath">path</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">NotFoundAsResponse</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftResponse" id="411382">resp</a><span class="delimiter">)</span> =&gt; <a href="#411382" title="net.liftweb.http.LiftResponse">resp</a>
      <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">NotFoundAsNode</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="411383">node</a><span class="delimiter">)</span> =&gt; <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159125" title="(v1: (Any, List[(String, String)], List[net.liftweb.http.provider.HTTPCookie], net.liftweb.http.Req))net.liftweb.http.LiftResponse">convertResponse</a><span title="(_1: (scala.xml.NodeSeq, Int), _2: List[(String, String)], _3: List[net.liftweb.http.provider.HTTPCookie], _4: net.liftweb.http.Req)((scala.xml.NodeSeq, Int), List[(String, String)], List[net.liftweb.http.provider.HTTPCookie], net.liftweb.http.Req)" class="delimiter">(</span><span title="(_1: scala.xml.NodeSeq, _2: Int)(scala.xml.NodeSeq, Int)" class="delimiter">(</span><a href="#411383" title="scala.xml.NodeSeq">node</a>, <span title="Int(404)" class="int">404</span><span class="delimiter">)</span>,
        <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49405" title="(in: List[(String, String)])List[(String, String)]">getHeaders</a><span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159119" title="(v1: (scala.xml.NodeSeq, net.liftweb.http.Req))List[(String, String)]">defaultHeaders</a><span class="delimiter">(</span><span title="(_1: scala.xml.NodeSeq, _2: net.liftweb.http.Req)(scala.xml.NodeSeq, net.liftweb.http.Req)" class="delimiter">(</span><a href="#411383" title="scala.xml.NodeSeq">node</a>, <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
        <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49317" title="=&gt; List[net.liftweb.http.provider.HTTPCookie]">responseCookies</a>,
        <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(f: net.liftweb.common.Failure)net.liftweb.http.LiftResponse" id="149218">createNotFound</a><span class="delimiter">(</span><a title="net.liftweb.common.Failure" id="359123">f</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a><span class="delimiter">)</span>: <a href="LiftResponse.scala.html#14269" title="net.liftweb.http.LiftResponse">LiftResponse</a> = 
    <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185580" title="(value: (net.liftweb.http.Req, net.liftweb.common.Full[net.liftweb.common.Failure]), lst: Seq[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Full[net.liftweb.common.Failure]),net.liftweb.http.NotFound]])net.liftweb.http.NotFound">NamedPF</a><span class="delimiter">(</span><span title="(_1: net.liftweb.http.Req, _2: net.liftweb.common.Full[net.liftweb.common.Failure])(net.liftweb.http.Req, net.liftweb.common.Full[net.liftweb.common.Failure])" class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.common.Failure)net.liftweb.common.Full[net.liftweb.common.Failure]">Full</a><span class="delimiter">(</span><a href="#359123" title="net.liftweb.common.Failure">f</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159137" title="=&gt; net.liftweb.http.LiftRules#RulesSeq[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Box[net.liftweb.common.Failure]),net.liftweb.http.NotFound]]">uriNotFound</a>.<a href="LiftRules.scala.html#185552" title="=&gt; List[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Box[net.liftweb.common.Failure]),net.liftweb.http.NotFound]]">toList</a><span class="delimiter">)</span> <span title="net.liftweb.http.LiftResponse" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="LiftRules.scala.html#14380" title="net.liftweb.http.XhtmlResponse">DefaultNotFound</a> =&gt; <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185923" title="(in: net.liftweb.http.Req)net.liftweb.http.XhtmlResponse">defaultCreateNotFound</a><span class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">NotFoundAsTemplate</span><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="411463">path</a><span class="delimiter">)</span> =&gt; <a href="#149216" title="(path: net.liftweb.http.ParsePath)net.liftweb.http.LiftResponse">notFoundViaTemplate</a><span class="delimiter">(</span><a href="#411463" title="net.liftweb.http.ParsePath">path</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">NotFoundAsResponse</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftResponse" id="411464">resp</a><span class="delimiter">)</span> =&gt; <a href="#411464" title="net.liftweb.http.LiftResponse">resp</a>
      <span class="keyword">case</span> <span title="net.liftweb.http.LiftResponse">NotFoundAsNode</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="411465">node</a><span class="delimiter">)</span> =&gt; <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159125" title="(v1: (Any, List[(String, String)], List[net.liftweb.http.provider.HTTPCookie], net.liftweb.http.Req))net.liftweb.http.LiftResponse">convertResponse</a><span title="(_1: (scala.xml.NodeSeq, Int), _2: List[(String, String)], _3: List[net.liftweb.http.provider.HTTPCookie], _4: net.liftweb.http.Req)((scala.xml.NodeSeq, Int), List[(String, String)], List[net.liftweb.http.provider.HTTPCookie], net.liftweb.http.Req)" class="delimiter">(</span><span title="(_1: scala.xml.NodeSeq, _2: Int)(scala.xml.NodeSeq, Int)" class="delimiter">(</span><a href="#411465" title="scala.xml.NodeSeq">node</a>, <span title="Int(404)" class="int">404</span><span class="delimiter">)</span>,
        <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49405" title="(in: List[(String, String)])List[(String, String)]">getHeaders</a><span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159119" title="(v1: (scala.xml.NodeSeq, net.liftweb.http.Req))List[(String, String)]">defaultHeaders</a><span class="delimiter">(</span><span title="(_1: scala.xml.NodeSeq, _2: net.liftweb.http.Req)(scala.xml.NodeSeq, net.liftweb.http.Req)" class="delimiter">(</span><a href="#411465" title="scala.xml.NodeSeq">node</a>, <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
        <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49317" title="=&gt; List[net.liftweb.http.provider.HTTPCookie]">responseCookies</a>,
        <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>


  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(f: net.liftweb.http.ParsePath =&gt; net.liftweb.common.Box[net.liftweb.http.LiftResponse])net.liftweb.common.Box[net.liftweb.http.LiftResponse]" id="149219">createNotFound</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath =&gt; net.liftweb.common.Box[net.liftweb.http.LiftResponse]" id="359121">f</a>: <span class="delimiter">(</span>ParsePath<span class="delimiter">)</span> =&gt; Box<span class="delimiter">[</span>LiftResponse<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.LiftResponse]">Box</a><span class="delimiter">[</span>LiftResponse<span class="delimiter">]</span> = 
    <a href="../../../../util/net/liftweb/util/NamedPartialFunction.scala.html#185580" title="(value: (net.liftweb.http.Req, net.liftweb.common.Empty.type), lst: Seq[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Empty.type),net.liftweb.http.NotFound]])net.liftweb.http.NotFound">NamedPF</a><span class="delimiter">(</span><span title="(_1: net.liftweb.http.Req, _2: net.liftweb.common.Empty.type)(net.liftweb.http.Req, net.liftweb.common.Empty.type)" class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>, <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159137" title="=&gt; net.liftweb.http.LiftRules#RulesSeq[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Box[net.liftweb.common.Failure]),net.liftweb.http.NotFound]]">uriNotFound</a>.<a href="LiftRules.scala.html#185552" title="=&gt; List[PartialFunction[(net.liftweb.http.Req, net.liftweb.common.Box[net.liftweb.common.Failure]),net.liftweb.http.NotFound]]">toList</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[net.liftweb.http.LiftResponse]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="LiftRules.scala.html#14380" title="net.liftweb.common.Full[net.liftweb.http.XhtmlResponse]">DefaultNotFound</a> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.XhtmlResponse)net.liftweb.common.Full[net.liftweb.http.XhtmlResponse]">Full</a><span class="delimiter">(</span><a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185923" title="(in: net.liftweb.http.Req)net.liftweb.http.XhtmlResponse">defaultCreateNotFound</a><span class="delimiter">(</span><a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Full[net.liftweb.http.LiftResponse]">NotFoundAsResponse</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftResponse" id="411545">resp</a><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.LiftResponse)net.liftweb.common.Full[net.liftweb.http.LiftResponse]">Full</a><span class="delimiter">(</span><a href="#411545" title="net.liftweb.http.LiftResponse">resp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[net.liftweb.http.LiftResponse]">NotFoundAsTemplate</span><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="411549">path</a><span class="delimiter">)</span> =&gt; 
         <span class="keyword">val</span> <a title="net.liftweb.http.Req" id="411550">newReq</a> = <span title="net.liftweb.http.Req" class="keyword">new</span> <a href="#14573" title="net.liftweb.http.Req">Req</a><span class="delimiter">(</span><a href="#411549" title="net.liftweb.http.ParsePath">path</a>, 
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328131" title="=&gt; String">contextPath</a>, 
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>, 
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328133" title="=&gt; net.liftweb.common.Box[String]">contentType</a>, 
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>,
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328135" title="=&gt; Long">nanoStart</a>, 
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328136" title="=&gt; Long">nanoEnd</a>, 
                              <span title="Boolean(true)" class="keyword">true</span>,
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328138" title="=&gt; () =&gt; net.liftweb.http.ParamCalcInfo">paramCalculator</a>, 
                              <a href="#14573" title="Req.this.type" class="keyword">this</a>.<a href="#328139" title="=&gt; Map[String,String]">addlParams</a><span class="delimiter">)</span>
         <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49423" title="(req: net.liftweb.http.Req)(f: =&gt; net.liftweb.common.Box[net.liftweb.http.LiftResponse])net.liftweb.common.Box[net.liftweb.http.LiftResponse]">withReq</a><span class="delimiter">(</span><a href="#411550" title="net.liftweb.http.Req">newReq</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#359121" title="(v1: net.liftweb.http.ParsePath)net.liftweb.common.Box[net.liftweb.http.LiftResponse]">f</a><span class="delimiter">(</span><a href="#411549" title="net.liftweb.http.ParsePath">path</a><span class="delimiter">)</span>
         <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Full[net.liftweb.http.LiftResponse]">NotFoundAsNode</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="411564">node</a><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.LiftResponse)net.liftweb.common.Full[net.liftweb.http.LiftResponse]">Full</a><span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159125" title="(v1: (Any, List[(String, String)], List[net.liftweb.http.provider.HTTPCookie], net.liftweb.http.Req))net.liftweb.http.LiftResponse">convertResponse</a><span title="(_1: (scala.xml.NodeSeq, Int), _2: List[(String, String)], _3: List[net.liftweb.http.provider.HTTPCookie], _4: net.liftweb.http.Req)((scala.xml.NodeSeq, Int), List[(String, String)], List[net.liftweb.http.provider.HTTPCookie], net.liftweb.http.Req)" class="delimiter">(</span><span title="(_1: scala.xml.NodeSeq, _2: Int)(scala.xml.NodeSeq, Int)" class="delimiter">(</span><a href="#411564" title="scala.xml.NodeSeq">node</a>, <span title="Int(404)" class="int">404</span><span class="delimiter">)</span>,
        <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49405" title="(in: List[(String, String)])List[(String, String)]">getHeaders</a><span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159119" title="(v1: (scala.xml.NodeSeq, net.liftweb.http.Req))List[(String, String)]">defaultHeaders</a><span class="delimiter">(</span><span title="(_1: scala.xml.NodeSeq, _2: net.liftweb.http.Req)(scala.xml.NodeSeq, net.liftweb.http.Req)" class="delimiter">(</span><a href="#411564" title="scala.xml.NodeSeq">node</a>, <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
        <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49317" title="=&gt; List[net.liftweb.http.provider.HTTPCookie]">responseCookies</a>,
        <a href="#14573" title="net.liftweb.http.Req" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149220">post_?</a> = <a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>.<a href="RequestType.scala.html#149310" title="=&gt; Boolean">post_?</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149221">get_?</a> = <a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>.<a href="RequestType.scala.html#149311" title="=&gt; Boolean">get_?</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149222">put_?</a> = <a href="#328132" title="=&gt; net.liftweb.http.RequestType">requestType</a>.<a href="RequestType.scala.html#149313" title="=&gt; Boolean">put_?</a>

  <span class="keyword">def</span> <a title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq" id="149223">fixHtml</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="411604">in</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185922" title="(contextPath: String, in: scala.xml.NodeSeq)scala.xml.NodeSeq">fixHtml</a><span class="delimiter">(</span><a href="#328131" title="=&gt; String">contextPath</a>, <a href="#411604" title="scala.xml.NodeSeq">in</a><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="149225">uri</a>: <span title="String">String</span> = <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="java.lang.String(&quot;Outside HTTP Request (e.g., on Actor)&quot;)" class="keyword">null</span> =&gt; <span title="java.lang.String(&quot;Outside HTTP Request (e.g., on Actor)&quot;)" class="string">&quot;Outside HTTP Request (e.g., on Actor)&quot;</span>
    <span class="keyword">case</span> <a title="java.lang.String" id="411606">request</a> =&gt;
      <span class="keyword">val</span> <a title="net.liftweb.common.Box[java.lang.String]" id="411607">ret</a> = <span class="keyword">for</span> <span class="delimiter">{</span><a title="String" id="411615">uri</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28633" title="(in: String)net.liftweb.common.Box[String]">legacyNullTest</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: String =&gt; net.liftweb.common.Box[java.lang.String])net.liftweb.common.Box[java.lang.String]" class="delimiter">(</a><a href="#411606" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216870" title="=&gt; String">uri</a><span class="delimiter">)</span>
                     <a title="String" id="411622">cp</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28633" title="(in: String)net.liftweb.common.Box[String]">legacyNullTest</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: String =&gt; net.liftweb.common.Box[java.lang.String])net.liftweb.common.Box[java.lang.String]" class="delimiter">(</a><a href="#328131" title="=&gt; String">contextPath</a><span class="delimiter">)</span>
                     <a title="java.lang.String" id="411734">part</a> &lt;- <span class="delimiter">(</span><a href="#411606" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216870" title="=&gt; String">uri</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#411622" title="String">cp</a>.<span title="()Int">length</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: java.lang.String =&gt; java.lang.String)net.liftweb.common.Box[java.lang.String]" class="keyword">match</a> <span class="delimiter">{</span>
                              <span class="keyword">case</span> <span title="net.liftweb.common.Full[java.lang.String]" class="keyword">true</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.lang.String)net.liftweb.common.Full[java.lang.String]">Full</a><span class="delimiter">(</span><a href="#411606" title="net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216870" title="=&gt; String">uri</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#411622" title="String">cp</a>.<span title="()Int">length</span><span class="delimiter">)</span><span class="delimiter">)</span>
                              <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">}</span><span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
           <a href="#411734" title="java.lang.String">part</a> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;&quot;</span> =&gt; <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>
            <span class="keyword">case</span> <a title="String" id="411735">x</a> =&gt; <a href="#14562" title="object net.liftweb.http.Req">Req</a>.<a href="#185915" title="(uri: String)String">fixURI</a><span class="delimiter">(</span><a href="#411735" title="java.lang.String">x</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#411607" title="net.liftweb.common.Box[java.lang.String]">ret</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; java.lang.String)java.lang.String">openOr</a> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The IP address of the request
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="149226">remoteAddr</a>: <span title="String">String</span> = <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216879" title="=&gt; String">remoteAddress</a>

  <span class="comment">/**
   * Parse the if-modified-since header and return the milliseconds since epoch
   * of the parsed date.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[java.util.Date]" id="149228">ifModifiedSince</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[java.util.Date]">Box</a><span class="delimiter">[</span>java.util.Date<span class="delimiter">]</span> =
  <span class="keyword">for</span><span class="delimiter">{</span><a title="net.liftweb.http.provider.HTTPRequest" id="411753">req</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.provider.HTTPRequest =&gt; net.liftweb.common.Box[java.util.Date])net.liftweb.common.Box[java.util.Date]">!!</a> <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>
      <a title="String" id="411758">ims</a> &lt;- <a href="#411753" title="net.liftweb.http.provider.HTTPRequest">req</a>.<a href="provider/HTTPRequest.scala.html#216864" title="(name: String)net.liftweb.common.Box[String]">header</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: String =&gt; net.liftweb.common.Box[java.util.Date])net.liftweb.common.Box[java.util.Date]" class="delimiter">(</a><span title="java.lang.String(&quot;if-modified-since&quot;)" class="string">&quot;if-modified-since&quot;</span><span class="delimiter">)</span>
      <a title="java.util.Date" id="411763">id</a> &lt;- <a href="../../../../util/net/liftweb/util/TimeHelpers.scala.html#48827" title="(dateString: String)net.liftweb.common.Box[java.util.Date]">boxParseInternetDate</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: java.util.Date =&gt; java.util.Date)net.liftweb.common.Box[java.util.Date]" class="delimiter">(</a><a href="#411758" title="String">ims</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#411763" title="java.util.Date">id</a>

  <span class="keyword">def</span> <a title="(when: Long)Boolean" id="149229">testIfModifiedSince</a><span class="delimiter">(</span><a title="Long" id="411767">when</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">(</span><a href="#411767" title="Long">when</a> <span title="(x: Long)Boolean">==</span> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
  <span class="delimiter">(</span><span class="delimiter">(</span><a href="#411767" title="Long">when</a> <span title="(x: Long)Long">/</span> <span title="Long(1000L)" class="long">1000L</span><span class="delimiter">)</span> <span title="(x: Long)Boolean">&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#149227" title="=&gt; net.liftweb.common.Box[java.util.Date]">ifModifiedSince</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: java.util.Date =&gt; Long)net.liftweb.common.Box[Long]">map</a><span class="delimiter">(</span><a href="#411785" title="java.util.Date">_</a>.<span title="()Long">getTime</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Long)Long">openOr</a> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <span title="(x: Long)Long">/</span> <span title="Long(1000L)" class="long">1000L</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(lastModified: Long, headers: (String, String)*)net.liftweb.common.Box[net.liftweb.http.LiftResponse]" id="149230">testFor304</a><span class="delimiter">(</span><a title="Long" id="365203">lastModified</a>: <span title="Long">Long</span>, <a title="(String, String)*" id="365204">headers</a>: <span title="(String, String)*" class="delimiter">(</span>String, String<span class="delimiter">)</span>*<span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.LiftResponse]">Box</a><span class="delimiter">[</span>LiftResponse<span class="delimiter">]</span> =
  <span title="net.liftweb.common.Box[net.liftweb.http.LiftResponse]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#149229" title="(when: Long)Boolean">testIfModifiedSince</a><span class="delimiter">(</span><a href="#365203" title="Long">lastModified</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.InMemoryResponse)net.liftweb.common.Full[net.liftweb.http.InMemoryResponse]">Full</a><span class="delimiter">(</span><a href="LiftResponse.scala.html#351633" title="(data: Array[Byte], headers: List[(String, String)], cookies: List[net.liftweb.http.provider.HTTPCookie], code: Int)net.liftweb.http.InMemoryResponse">InMemoryResponse</a><span class="delimiter">(</span><span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="#365204" title="(String, String)*">headers</a>.<span title="=&gt; List[(String, String)]">toList</span>, <span title="object Nil">Nil</span>, <span title="Int(304)" class="int">304</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">else</span>
  <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="comment">/**
   * The user agent of the browser that sent the request
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="149232">userAgent</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> =
  <span class="keyword">for</span> <span class="delimiter">(</span><a title="net.liftweb.http.provider.HTTPRequest" id="411812">r</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28633" title="(in: net.liftweb.http.provider.HTTPRequest)net.liftweb.common.Box[net.liftweb.http.provider.HTTPRequest]">legacyNullTest</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.provider.HTTPRequest =&gt; net.liftweb.common.Box[String])net.liftweb.common.Box[String]" class="delimiter">(</a><a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a><span class="delimiter">)</span>;
       <a title="String" id="411817">uah</a> &lt;- <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216864" title="(name: String)net.liftweb.common.Box[String]">header</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; String)net.liftweb.common.Box[String]" class="delimiter">(</a><span title="java.lang.String(&quot;User-Agent&quot;)" class="string">&quot;User-Agent&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">yield</span> <a href="#411817" title="String">uah</a>


  <span class="comment">/**
   * the accept header
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="149234">accepts</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#328134" title="=&gt; net.liftweb.http.provider.HTTPRequest">request</a>.<a href="provider/HTTPRequest.scala.html#216866" title="=&gt; List[net.liftweb.http.provider.HTTPParam]">headers</a>.<span title="=&gt; List[net.liftweb.http.provider.HTTPParam]">toList</span>.
    <span title="(p: net.liftweb.http.provider.HTTPParam =&gt; Boolean)List[net.liftweb.http.provider.HTTPParam]">filter</span><span class="delimiter">(</span><a href="#411828" title="net.liftweb.http.provider.HTTPParam">_</a>.<a href="provider/HTTPParam.scala.html#364980" title="=&gt; String">name</a> <span title="(x$1: java.lang.String)Boolean">equalsIgnoreCase</span> <span title="java.lang.String(&quot;accept&quot;)" class="string">&quot;accept&quot;</span><span class="delimiter">)</span>.<span title="(f: net.liftweb.http.provider.HTTPParam =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.provider.HTTPParam],String,List[String]])List[String]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#411848" title="net.liftweb.http.provider.HTTPParam">_</a>.<a href="provider/HTTPParam.scala.html#364982" title="=&gt; List[String]">values</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">Nil</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Full[String]" id="411876">xs</a> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: String)net.liftweb.common.Full[String]">Full</a><span class="delimiter">(</span><a href="#411876" title="List[String]">xs</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
    
  <span class="comment">/**
   * What is the content type in order of preference by the requestor
   * calculated via the Accept header
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[net.liftweb.http.ContentType]" id="149236">weightedAccept</a>: <span title="List[net.liftweb.http.ContentType]">List</span><span class="delimiter">[</span>ContentType<span class="delimiter">]</span> = <a href="#149233" title="=&gt; net.liftweb.common.Box[String]">accepts</a> <span title="List[net.liftweb.http.ContentType]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="List[net.liftweb.http.ContentType]">Full</span><span class="delimiter">(</span><a title="String" id="411883">a</a><span class="delimiter">)</span> =&gt; <a href="#410241" title="object net.liftweb.http.ContentType">ContentType</a>.<a href="#409680" title="(str: String)List[net.liftweb.http.ContentType]">parse</a><span class="delimiter">(</span><a href="#411883" title="String">a</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if the request accepts XML
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149238">acceptsXml_?</a> =
    <span class="delimiter">(</span><a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>.<span title="(p: net.liftweb.http.ContentType =&gt; Boolean)Option[net.liftweb.http.ContentType]">find</span><span class="delimiter">(</span><a href="#410310" title="net.liftweb.http.ContentType">_</a>.<a href="#380237" title="(contentType: (String, String))Boolean">matches</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;text&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;xml&quot;)" class="string">&quot;xml&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[net.liftweb.http.ContentType])Option[net.liftweb.http.ContentType]">orElse</span>
     <a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>.<span title="(p: net.liftweb.http.ContentType =&gt; Boolean)Option[net.liftweb.http.ContentType]">find</span><span class="delimiter">(</span><a href="#410357" title="net.liftweb.http.ContentType">_</a>.<a href="#380237" title="(contentType: (String, String))Boolean">matches</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;application&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;xml&quot;)" class="string">&quot;xml&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>

  <span class="comment">/**
   * Returns true if the request accepts JSON
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149240">acceptsJson_?</a> =
    <span class="delimiter">(</span><a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>.<span title="(p: net.liftweb.http.ContentType =&gt; Boolean)Option[net.liftweb.http.ContentType]">find</span><span class="delimiter">(</span><a href="#410401" title="net.liftweb.http.ContentType">_</a>.<a href="#380237" title="(contentType: (String, String))Boolean">matches</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;text&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;json&quot;)" class="string">&quot;json&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[net.liftweb.http.ContentType])Option[net.liftweb.http.ContentType]">orElse</span>
     <a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>.<span title="(p: net.liftweb.http.ContentType =&gt; Boolean)Option[net.liftweb.http.ContentType]">find</span><span class="delimiter">(</span><a href="#410446" title="net.liftweb.http.ContentType">_</a>.<a href="#380237" title="(contentType: (String, String))Boolean">matches</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;application&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;json&quot;)" class="string">&quot;json&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>

  <span class="comment">/**
   * Is the Accepts Header * / *
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149242">acceptsStarStar</a> : <span title="Boolean">Boolean</span> = <a href="#149233" title="=&gt; net.liftweb.common.Box[String]">accepts</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: String =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#411888" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;*/*&quot;)" class="string">&quot;*/*&quot;</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * Returns true if the request accepts JavaScript
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="149244">acceptsJavaScript_?</a> = 
    <span class="delimiter">(</span><a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>.<span title="(p: net.liftweb.http.ContentType =&gt; Boolean)Option[net.liftweb.http.ContentType]">find</span><span class="delimiter">(</span><a href="#380219" title="net.liftweb.http.ContentType">_</a>.<a href="#380237" title="(contentType: (String, String))Boolean">matches</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;text&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;javascript&quot;)" class="string">&quot;javascript&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[net.liftweb.http.ContentType])Option[net.liftweb.http.ContentType]">orElse</span>
     <a href="#149235" title="=&gt; List[net.liftweb.http.ContentType]">weightedAccept</a>.<span title="(p: net.liftweb.http.ContentType =&gt; Boolean)Option[net.liftweb.http.ContentType]">find</span><span class="delimiter">(</span><a href="#380290" title="net.liftweb.http.ContentType">_</a>.<a href="#380237" title="(contentType: (String, String))Boolean">matches</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;application&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58380" title="(in: String)net.liftweb.util.Helpers.TheStrBindParam">-&gt;</a> <span title="java.lang.String(&quot;javascript&quot;)" class="string">&quot;javascript&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.
    <span title="=&gt; Boolean">isDefined</span>

  <span class="keyword">def</span> <a title="(uri: String)String" id="149245">updateWithContextPath</a><span class="delimiter">(</span><a title="String" id="411899">uri</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#411899" title="String">uri</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#328131" title="=&gt; String">contextPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#411899" title="String">uri</a> <span class="keyword">else</span> <a href="#411899" title="String">uri</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * This case class is used for pattern matching.  See LiftRules.statelessRewrite and LiftRules.statefulRewrite
 */</span>
<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class RewriteRequest extends java.lang.Object with ScalaObject with Product with Serializable" id="412115">RewriteRequest</a><a href="#412115" title="ScalaObject" class="delimiter">(</a><a title="net.liftweb.http.ParsePath" id="406716">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>, <a title="net.liftweb.http.RequestType" id="406717">requestType</a>: <a href="RequestType.scala.html#14589" title="net.liftweb.http.RequestType">RequestType</a>, <a title="net.liftweb.http.provider.HTTPRequest" id="406718">httpRequest</a>: <a href="provider/HTTPRequest.scala.html#15082" title="net.liftweb.http.provider.HTTPRequest">HTTPRequest</a><span class="delimiter">)</span>

<span class="comment">/**
 * The representation of an URI path
 */</span>
@serializable
case <span class="keyword">class</span> <a title="class ParsePath extends java.lang.Object with ScalaObject with Product with Serializable" id="412111">ParsePath</a><a href="#412111" title="ScalaObject" class="delimiter">(</a><a title="List[String]" id="216963">partPath</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="String" id="216964">suffix</a>: <span title="String">String</span>, <a title="Boolean" id="216965">absolute</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="216966">endSlash</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(cnt: Int)net.liftweb.http.ParsePath" id="216856">drop</a><span class="delimiter">(</span><a title="Int" id="411955">cnt</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#412111" title="(partPath: List[String], suffix: String, absolute: Boolean, endSlash: Boolean)net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><a href="#216963" title="=&gt; List[String]">partPath</a>.<span title="(n: Int)List[String]">drop</span><span class="delimiter">(</span><a href="#411955" title="Int">cnt</a><span class="delimiter">)</span>, <a href="#216964" title="=&gt; String">suffix</a>, <a href="#216965" title="=&gt; Boolean">absolute</a>, <a href="#216966" title="=&gt; Boolean">endSlash</a><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[java.lang.String]" id="216858">wholePath</a> = 
    <span title="List[java.lang.String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#216964" title="=&gt; String">suffix</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#216963" title="=&gt; List[String]">partPath</a>.<span title="(n: Int)List[String]">dropRight</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#217016" title="(prefix: List[java.lang.String])List[java.lang.String]">:::</a> <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#216963" title="=&gt; List[String]">partPath</a> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">Nil</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">case</span> <a title="String" id="217023">xs</a> =&gt; <a href="#217023" title="List[String]">xs</a>.<span title="=&gt; String">last</span><span class="delimiter">}</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#216964" title="=&gt; String">suffix</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#216963" title="=&gt; List[String]">partPath</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class RewriteResponse extends java.lang.Object with ScalaObject with Product with Serializable" id="216940">RewriteResponse</a><a href="#216940" title="ScalaObject" class="delimiter">(</a><a title="net.liftweb.http.ParsePath" id="216944">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>, 
                                 <a title="Map[String,String]" id="216945">params</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>,
                                 <a title="Boolean" id="216946">stopRewriting</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>

<span class="comment">/**
 * Maintains the context of resolving the URL when cookies are disabled from container. It maintains
 * low coupling such as code within request processing is not aware of the actual response that
 * ancodes the URL.
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.RewriteResponse" id="412092">RewriteResponse</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(path: List[String], params: Map[String,String])net.liftweb.http.RewriteResponse" id="216935">apply</a><span class="delimiter">(</span><a title="List[String]" id="217004">path</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Map[String,String]" id="217005">params</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="net.liftweb.http.RewriteResponse" class="keyword">new</span> <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#412111" title="(partPath: List[String], suffix: String, absolute: Boolean, endSlash: Boolean)net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><a href="#217004" title="List[String]">path</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>, <a href="#217005" title="Map[String,String]">params</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(path: List[String])net.liftweb.http.RewriteResponse" id="216936">apply</a><span class="delimiter">(</span><a title="List[String]" id="216994">path</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="net.liftweb.http.RewriteResponse" class="keyword">new</span> <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#412111" title="(partPath: List[String], suffix: String, absolute: Boolean, endSlash: Boolean)net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><a href="#216994" title="List[String]">path</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(path: List[String], stopRewriting: Boolean)net.liftweb.http.RewriteResponse" id="216937">apply</a><span class="delimiter">(</span><a title="List[String]" id="216983">path</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Boolean" id="216984">stopRewriting</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = 
    <span title="net.liftweb.http.RewriteResponse" class="keyword">new</span> <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#412111" title="(partPath: List[String], suffix: String, absolute: Boolean, endSlash: Boolean)net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><a href="#216983" title="List[String]">path</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>,
                        <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>, <a href="#216984" title="Boolean">stopRewriting</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(path: List[String], suffix: String)net.liftweb.http.RewriteResponse" id="216938">apply</a><span class="delimiter">(</span><a title="List[String]" id="216955">path</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="String" id="216956">suffix</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="net.liftweb.http.RewriteResponse" class="keyword">new</span> <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#412111" title="(partPath: List[String], suffix: String, absolute: Boolean, endSlash: Boolean)net.liftweb.http.ParsePath">ParsePath</a><span class="delimiter">(</span><a href="#216955" title="List[String]">path</a>, <a href="#216956" title="String">suffix</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(path: net.liftweb.http.ParsePath, params: Map[String,String])net.liftweb.http.RewriteResponse" id="216939">apply</a><span class="delimiter">(</span><a title="net.liftweb.http.ParsePath" id="216948">path</a>: <a href="#412111" title="net.liftweb.http.ParsePath">ParsePath</a>, <a title="Map[String,String]" id="216949">params</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="net.liftweb.http.RewriteResponse" class="keyword">new</span> <a href="#216940" title="net.liftweb.http.RewriteResponse">RewriteResponse</a><span class="delimiter">(</span><a href="#216948" title="net.liftweb.http.ParsePath">path</a>, <a href="#216949" title="Map[String,String]">params</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.http.URLRewriter" id="14583">URLRewriter</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.liftweb.util.ThreadGlobal[String =&gt; String]" id="350479">funcHolder</a> = <span title="net.liftweb.util.ThreadGlobal[String =&gt; String]" class="keyword">new</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[String =&gt; String]">ThreadGlobal</a><span class="delimiter">[</span><span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; String<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="[R](f: String =&gt; String)(block: =&gt; R)R" id="350481">doWith</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="350483">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String =&gt; String" id="412094">f</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; String<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; R" id="412095">block</a>: =&gt; R<span class="delimiter">)</span>: <a href="#350483" title="R">R</a> = <span class="delimiter">{</span>
    <a href="#350479" title="=&gt; net.liftweb.util.ThreadGlobal[String =&gt; String]">funcHolder</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: String =&gt; String)(f: =&gt; R)R">doWith</a><span class="delimiter">(</span><a href="#412094" title="String =&gt; String">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#412095" title="=&gt; R">block</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[String =&gt; String]" id="350484">rewriteFunc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String =&gt; String]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; String<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28633" title="(in: String =&gt; String)net.liftweb.common.Box[String =&gt; String]">legacyNullTest</a><span class="delimiter">(</span><a href="#350479" title="=&gt; net.liftweb.util.ThreadGlobal[String =&gt; String]">funcHolder</a> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; String =&gt; String">value</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>