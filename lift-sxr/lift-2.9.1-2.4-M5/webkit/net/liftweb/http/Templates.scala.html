<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>webkit/net/liftweb/http/Templates.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2007-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb 
<span class="keyword">package</span> http 

<span class="keyword">import</span> common._
<span class="keyword">import</span> java.util.Locale
<span class="keyword">import</span> scala.xml._
<span class="keyword">import</span> util._
<span class="keyword">import</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._
<span class="keyword">import</span> java.io.InputStream

<span class="comment">/**
 * Contains functions for obtaining templates
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.Templates" id="14730">Templates</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[String]" id="342657">suffixes</a> = <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159206" title="=&gt; List[String]">templateSuffixes</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(part: List[String], last: String, what: net.liftweb.http.LiftRules.ViewDispatchPF)net.liftweb.common.Box[scala.xml.NodeSeq]" id="342659">checkForLiftView</a><span class="delimiter">(</span><a title="List[String]" id="438250">part</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="String" id="438251">last</a>: <span title="String">String</span>, <a title="net.liftweb.http.LiftRules.ViewDispatchPF" id="438252">what</a>: LiftRules.<span title="net.liftweb.http.LiftRules.ViewDispatchPF">ViewDispatchPF</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#438252" title="net.liftweb.http.LiftRules.ViewDispatchPF">what</a>.<span title="(x: List[String])Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#438250" title="List[String]">part</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#438252" title="(v1: List[String])Either[() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq],net.liftweb.http.LiftView]">what</a><span class="delimiter">(</span><a href="#438250" title="List[String]">part</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]">Right</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftView" id="438257">lv</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#438257" title="net.liftweb.http.LiftView">lv</a>.<a href="LiftSession.scala.html#402717" title="=&gt; PartialFunction[String,() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]]">dispatch</a>.<span title="(x: String)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#438251" title="String">last</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#438257" title="net.liftweb.http.LiftView">lv</a>.<a href="LiftSession.scala.html#402717" title="(v1: String)() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">dispatch</a><span title="()net.liftweb.common.Box[scala.xml.NodeSeq]" class="delimiter">(</span><a href="#438251" title="String">last</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
        <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(whole: List[String], what: net.liftweb.http.LiftRules.ViewDispatchPF)net.liftweb.common.Box[scala.xml.NodeSeq]" id="342660">checkForFunc</a><span class="delimiter">(</span><a title="List[String]" id="438260">whole</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="net.liftweb.http.LiftRules.ViewDispatchPF" id="438261">what</a>: LiftRules.<span title="net.liftweb.http.LiftRules.ViewDispatchPF">ViewDispatchPF</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#438261" title="net.liftweb.http.LiftRules.ViewDispatchPF">what</a>.<span title="(x: List[String])Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#438260" title="List[String]">whole</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#438261" title="(v1: List[String])Either[() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq],net.liftweb.http.LiftView]">what</a><span class="delimiter">(</span><a href="#438260" title="List[String]">whole</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]">Left</span><span class="delimiter">(</span><a title="() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]" id="438266">func</a><span class="delimiter">)</span> =&gt; <a href="#438266" title="()net.liftweb.common.Box[scala.xml.NodeSeq]">func</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(whole: List[String], part: List[String], last: String, what: List[net.liftweb.http.LiftRules.ViewDispatchPF])net.liftweb.common.Box[scala.xml.NodeSeq]" id="342661">findInViews</a><span class="delimiter">(</span><a title="List[String]" id="438267">whole</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="List[String]" id="438268">part</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                          <a title="String" id="438269">last</a>: <span title="String">String</span>,
                          <a title="List[net.liftweb.http.LiftRules.ViewDispatchPF]" id="438270">what</a>: <span title="List[net.liftweb.http.LiftRules.ViewDispatchPF]">List</span><span class="delimiter">[</span>LiftRules.ViewDispatchPF<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <a href="#438270" title="List[net.liftweb.http.LiftRules.ViewDispatchPF]">what</a> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">Nil</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Box[scala.xml.NodeSeq]" id="438278">x</a> :: <a title="List[net.liftweb.http.LiftRules.ViewDispatchPF]" id="438279">xs</a> =&gt;
        <span class="delimiter">(</span><a href="#342659" title="(part: List[String], last: String, what: net.liftweb.http.LiftRules.ViewDispatchPF)net.liftweb.common.Box[scala.xml.NodeSeq]">checkForLiftView</a><span class="delimiter">(</span><a href="#438268" title="List[String]">part</a>, <a href="#438269" title="String">last</a>, <a href="#438278" title="net.liftweb.http.LiftRules.ViewDispatchPF">x</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27043" title="(alternative: =&gt; net.liftweb.common.Box[scala.xml.NodeSeq])net.liftweb.common.Box[scala.xml.NodeSeq]">or</a> <a href="#342660" title="(whole: List[String], what: net.liftweb.http.LiftRules.ViewDispatchPF)net.liftweb.common.Box[scala.xml.NodeSeq]">checkForFunc</a><span class="delimiter">(</span><a href="#438267" title="List[String]">whole</a>, <a href="#438278" title="net.liftweb.http.LiftRules.ViewDispatchPF">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.NodeSeq]">Full</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="438286">ret</a><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#438286" title="scala.xml.NodeSeq">ret</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]">_</span> =&gt; <a href="#342661" title="(whole: List[String], part: List[String], last: String, what: List[net.liftweb.http.LiftRules.ViewDispatchPF])net.liftweb.common.Box[scala.xml.NodeSeq]">findInViews</a><span class="delimiter">(</span><a href="#438267" title="List[String]">whole</a>, <a href="#438268" title="List[String]">part</a>, <a href="#438269" title="String">last</a>, <a href="#438279" title="List[net.liftweb.http.LiftRules.ViewDispatchPF]">xs</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Given a list of paths (e.g. List(&quot;foo&quot;, &quot;index&quot;)),
   * find the template.  This method runs checkForContentId
   * on any found templates.  To get the raw template,
   * use findRawTemplate
   * @param places - the path to look in
   *
   * @return the template if it can be found
   */</span>
  <span class="keyword">def</span> <a title="(places: List[String])net.liftweb.common.Box[scala.xml.NodeSeq]" id="342662">apply</a><span class="delimiter">(</span><a title="List[String]" id="342674">places</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = 
    <a href="#342663" title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]">apply</a><span class="delimiter">(</span><a href="#342674" title="List[String]">places</a>, <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49322" title="=&gt; java.util.Locale">locale</a><span class="delimiter">)</span>


  <span class="comment">/**
   * Given a list of paths (e.g. List(&quot;foo&quot;, &quot;index&quot;)),
   * find the template.  This method runs checkForContentId
   * on any found templates.  To get the raw template,
   * use findRawTemplate
   * @param places - the path to look in
   * @param locale the locale of the template
   *
   * @return the template if it can be found
   */</span>
  <span class="keyword">def</span> <a title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]" id="342663">apply</a><span class="delimiter">(</span><a title="List[String]" id="342671">places</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="java.util.Locale" id="342672">locale</a>: <span title="java.util.Locale">Locale</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = 
    <a href="#342667" title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]">findRawTemplate</a><span class="delimiter">(</span><a href="#342671" title="List[String]">places</a>, <a href="#342672" title="java.util.Locale">locale</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">map</a><span class="delimiter">(</span><a href="#342666" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">checkForContentId</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Given a list of paths (e.g. List(&quot;foo&quot;, &quot;index&quot;)),
   * find the template.
   * @param places - the path to look in
   *
   * @return the template if it can be found
   */</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;use apply&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(places: List[String])net.liftweb.common.Box[scala.xml.NodeSeq]" id="342664">findAnyTemplate</a><span class="delimiter">(</span><a title="List[String]" id="438305">places</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <a href="#342667" title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]">findRawTemplate</a><span class="delimiter">(</span><a href="#438305" title="List[String]">places</a>, <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49322" title="=&gt; java.util.Locale">locale</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Given a list of paths (e.g. List(&quot;foo&quot;, &quot;index&quot;)),
   * find the template.
   * @param places - the path to look in
   * @param locale - the locale of the template to search for
   *
   * @return the template if it can be found
   */</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;use apply&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]" id="342665">findAnyTemplate</a><span class="delimiter">(</span><a title="List[String]" id="438307">places</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="java.util.Locale" id="438308">locale</a>: <span title="java.util.Locale">Locale</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = <a href="#342667" title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]">findRawTemplate</a><span class="delimiter">(</span><a href="#438307" title="List[String]">places</a>, <a href="#438308" title="java.util.Locale">locale</a><span class="delimiter">)</span>


  <span class="comment">/**
   * Check to see if the template is marked designer friendly
   * and lop off the stuff before the first surround
   */</span>
  <span class="keyword">def</span> <a title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq" id="342666">checkForContentId</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="388369">in</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(in: scala.xml.MetaData)Option[scala.xml.PrefixedAttribute]" id="438310">df</a><span class="delimiter">(</span><a title="scala.xml.MetaData" id="438311">in</a>: <span title="scala.xml.MetaData">MetaData</span><span class="delimiter">)</span>: <span title="Option[scala.xml.PrefixedAttribute]">Option</span><span class="delimiter">[</span>PrefixedAttribute<span class="delimiter">]</span> = <a href="#438311" title="scala.xml.MetaData">in</a> <span title="Option[scala.xml.PrefixedAttribute]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="None.type">Null</span> =&gt; <span title="object None">None</span>
      <span class="keyword">case</span> <a title="Some[scala.xml.PrefixedAttribute]" id="438312">p</a>: <span title="scala.xml.PrefixedAttribute">PrefixedAttribute</span> 
      <span class="keyword">if</span> <span class="delimiter">(</span><a href="#438312" title="scala.xml.PrefixedAttribute">p</a>.<span title="=&gt; String">pre</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;l&quot;)" class="string">&quot;l&quot;</span> <span title="(x: Boolean)Boolean">||</span> <a href="#438312" title="scala.xml.PrefixedAttribute">p</a>.<span title="=&gt; String">pre</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;lift&quot;)" class="string">&quot;lift&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
      <span class="delimiter">(</span><a href="#438312" title="scala.xml.PrefixedAttribute">p</a>.<span title="=&gt; String">key</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;content_id&quot;)" class="string">&quot;content_id&quot;</span><span class="delimiter">)</span> =&gt; <span title="(x: scala.xml.PrefixedAttribute)Some[scala.xml.PrefixedAttribute]">Some</span><span class="delimiter">(</span><a href="#438312" title="scala.xml.PrefixedAttribute">p</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Option[scala.xml.PrefixedAttribute]" id="438328">n</a> =&gt; <a href="#438310" title="(in: scala.xml.MetaData)Option[scala.xml.PrefixedAttribute]">df</a><span class="delimiter">(</span><a href="#438328" title="scala.xml.MetaData">n</a>.<span title="=&gt; scala.xml.MetaData">next</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    
    <a href="#388369" title="scala.xml.NodeSeq">in</a>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[scala.xml.PrefixedAttribute])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.PrefixedAttribute,scala.collection.immutable.Seq[scala.xml.PrefixedAttribute]])scala.collection.immutable.Seq[scala.xml.PrefixedAttribute]">flatMap</span> <a href="#438345" title="Iterable[scala.xml.PrefixedAttribute]" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Iterable[scala.xml.PrefixedAttribute]" id="438346">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#438346" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;html&quot;)" class="string">&quot;html&quot;</span> =&gt; <a href="#438310" title="(in: scala.xml.MetaData)Option[scala.xml.PrefixedAttribute]">df</a><span title="(xo: Option[scala.xml.PrefixedAttribute])Iterable[scala.xml.PrefixedAttribute]" class="delimiter">(</span><a href="#438346" title="scala.xml.Elem">e</a>.<span title="=&gt; scala.xml.MetaData">attributes</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Iterable[Nothing]">_</span> =&gt; <span title="(xo: Option[Nothing])Iterable[Nothing]">None</span>
    <span class="delimiter">}</span>.<span title="(f: scala.xml.PrefixedAttribute =&gt; scala.collection.GenTraversableOnce[scala.xml.Elem])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[scala.xml.PrefixedAttribute],scala.xml.Elem,scala.collection.immutable.Seq[scala.xml.Elem]])scala.collection.immutable.Seq[scala.xml.Elem]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq.Coll,scala.xml.Elem,scala.collection.immutable.Seq[scala.xml.Elem]]" class="delimiter">{</span>
      <a title="scala.xml.PrefixedAttribute" id="438512">md</a> =&gt; <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49022" title="(nodes: Seq[scala.xml.Node], id: String)Option[scala.xml.Elem]">findId</a><span title="(xo: Option[scala.xml.Elem])Iterable[scala.xml.Elem]" class="delimiter">(</span><a href="#388369" title="scala.xml.NodeSeq">in</a>, <a href="#438512" title="scala.xml.PrefixedAttribute">md</a>.<span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">value</span>.<span title="=&gt; String">text</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<span title="=&gt; Option[scala.xml.Elem]">headOption</span> <span title="(alternative: =&gt; Option[scala.xml.Elem])Option[scala.xml.Elem]">orElse</span> 
    <a href="#388369" title="scala.xml.NodeSeq">in</a>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,java.lang.String,scala.collection.immutable.Seq[java.lang.String]])scala.collection.immutable.Seq[java.lang.String]">flatMap</span> <a href="#438643" title="Iterable[java.lang.String]" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Seq[java.lang.String]" id="438644">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#438644" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;html&quot;)" class="string">&quot;html&quot;</span> =&gt;
        <a href="#438644" title="scala.xml.Elem">e</a>.<span title="=&gt; scala.xml.Node*">child</span>.<span title="(f: scala.xml.Node =&gt; scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[scala.xml.Node],java.lang.String,Seq[java.lang.String]])Seq[java.lang.String]">flatMap</span> <a href="#438665" title="Iterable[java.lang.String]" class="delimiter">{</a>
          <span class="keyword">case</span> <a title="Iterable[java.lang.String]" id="438666">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <a href="#438666" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;body&quot;)" class="string">&quot;body&quot;</span> =&gt; <span class="delimiter">{</span>
            <a href="#438666" title="scala.xml.Elem">e</a>.<span title="(key: String)Option[Seq[scala.xml.Node]]">attribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;class&quot;)" class="string">&quot;class&quot;</span><span class="delimiter">)</span>.<span title="(f: Seq[scala.xml.Node] =&gt; Option[java.lang.String])Option[java.lang.String]">flatMap</span> <span title="(xo: Option[java.lang.String])Iterable[java.lang.String]" class="delimiter">{</span>
              <a title="Seq[scala.xml.Node]" id="438677">ns</a> =&gt; <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="List[String]" id="438678">clz</a> = <a href="#438677" title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">ns</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48858" title="implicit net.liftweb.util.StringHelpers.stringToSuper : (in: String)net.liftweb.util.SuperString">text</a>.<a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#58434" title="(sep: Char)List[String]">charSplit</a><span class="delimiter">(</span><span title="Char(\' \')" class="char">' '</span><span class="delimiter">)</span>
                <a href="#438678" title="List[String]">clz</a>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.lang.String,List[java.lang.String]])List[java.lang.String]">flatMap</span> <a href="#438703" title="Iterable[java.lang.String]" class="delimiter">{</a>
                  <span class="keyword">case</span> <a title="Iterable[java.lang.String]" id="438704">s</a> <span class="keyword">if</span> <a href="#438704" title="String">s</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;lift:content_id=&quot;)" class="string">&quot;lift:content_id=&quot;</span><span class="delimiter">)</span> =&gt;
                    <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span title="(xo: Option[java.lang.String])Iterable[java.lang.String]" class="delimiter">(</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49042" title="(in: String)java.lang.String">urlDecode</a><span class="delimiter">(</span><a href="#438704" title="String">s</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><span title="java.lang.String(&quot;lift:content_id=&quot;)" class="string">&quot;lift:content_id=&quot;</span>.<span title="()Int">length</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Iterable[Nothing]">_</span> =&gt; <span title="(xo: Option[Nothing])Iterable[Nothing]">None</span>
                <span class="delimiter">}</span>.<span title="=&gt; Option[java.lang.String]">headOption</span>
                
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Iterable[Nothing]">_</span> =&gt; <span title="(xo: Option[Nothing])Iterable[Nothing]">None</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="Iterable[Nothing]">_</span> =&gt; <span title="(xo: Option[Nothing])Iterable[Nothing]">None</span>
    <span class="delimiter">}</span>.<span title="(f: java.lang.String =&gt; scala.collection.GenTraversableOnce[scala.xml.Elem])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[java.lang.String],scala.xml.Elem,scala.collection.immutable.Seq[scala.xml.Elem]])scala.collection.immutable.Seq[scala.xml.Elem]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq.Coll,scala.xml.Elem,scala.collection.immutable.Seq[scala.xml.Elem]]" class="delimiter">{</span>
      <a title="java.lang.String" id="443058">id</a> =&gt; <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49022" title="(nodes: Seq[scala.xml.Node], id: String)Option[scala.xml.Elem]">findId</a><span title="(xo: Option[scala.xml.Elem])Iterable[scala.xml.Elem]" class="delimiter">(</span><a href="#388369" title="scala.xml.NodeSeq">in</a>, <a href="#443058" title="java.lang.String">id</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<span title="=&gt; Option[scala.xml.Elem]">headOption</span> <span title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">getOrElse</span> <a href="#388369" title="scala.xml.NodeSeq">in</a>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * Given a list of paths (e.g. List(&quot;foo&quot;, &quot;index&quot;)),
   * find the template.
   * @param places - the path to look in
   * @param locale - the locale of the template to search for
   *
   * @return the template if it can be found
   */</span>
  <span class="keyword">def</span> <a title="(places: List[String], locale: java.util.Locale)net.liftweb.common.Box[scala.xml.NodeSeq]" id="342667">findRawTemplate</a><span class="delimiter">(</span><a title="List[String]" id="438296">places</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="java.util.Locale" id="438297">locale</a>: <span title="java.util.Locale">Locale</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">/*
     From a Scala coding standpoint, this method is ugly.  It's also a performance
     hotspot that needed some tuning.  I've made the code very imperative and
     tried to make sure there are no anonymous functions created in this method.
     The few extra lines of code and the marginal reduction in readibility should
     yield better performance.  Please don't change this method without chatting with
     me first.  Thanks!  DPP
     */</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]]" id="443169">lrCache</a> = <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159239" title="=&gt; net.liftweb.common.Box[net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]]">templateCache</a>
    <span class="keyword">val</span> <a title="net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]" id="443170">cache</a> = <span title="net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#443169" title="net.liftweb.common.Box[net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]]">lrCache</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#443169" title="net.liftweb.common.Box[net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]]">lrCache</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]">open_!</a> <span class="keyword">else</span> <a href="../../../../util/net/liftweb/util/TemplateCache.scala.html#13690" title="object net.liftweb.util.NoCache">NoCache</a>

    <span class="keyword">val</span> <a title="java.io.InputStream =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]" id="443171">parserFunction</a>: InputStream =&gt; Box<span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = 
      <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49325" title="=&gt; net.liftweb.http.HtmlProperties">htmlProperties</a>.<a href="HtmlProperties.scala.html#349009" title="=&gt; java.io.InputStream =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">htmlParser</a>

    <span class="keyword">val</span> <a title="(java.util.Locale, List[String])" id="443172">key</a> = <span title="(_1: java.util.Locale, _2: List[String])(java.util.Locale, List[String])" class="delimiter">(</span><a href="#438297" title="java.util.Locale">locale</a>, <a href="#438296" title="List[String]">places</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[scala.xml.NodeSeq]" id="443173">tr</a> = <a href="#443170" title="net.liftweb.util.TemplateCache[(java.util.Locale, List[String]),scala.xml.NodeSeq]">cache</a>.<a href="../../../../util/net/liftweb/util/TemplateCache.scala.html#320666" title="(key: (java.util.Locale, List[String]))net.liftweb.common.Box[scala.xml.NodeSeq]">get</a><span class="delimiter">(</span><a href="#443172" title="(java.util.Locale, List[String])">key</a><span class="delimiter">)</span>

    <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#443173" title="net.liftweb.common.Box[scala.xml.NodeSeq]">tr</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#443173" title="net.liftweb.common.Box[scala.xml.NodeSeq]">tr</a>
    <span class="keyword">else</span>
      <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[String]" id="443185">part</a> = <a href="#438296" title="List[String]">places</a>.<span title="(n: Int)List[String]">dropRight</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="443186">last</a> = <a href="#438296" title="List[String]">places</a>.<span title="=&gt; String">last</span>

        <a href="#342661" title="(whole: List[String], part: List[String], last: String, what: List[net.liftweb.http.LiftRules.ViewDispatchPF])net.liftweb.common.Box[scala.xml.NodeSeq]">findInViews</a><span class="delimiter">(</span><a href="#438296" title="List[String]">places</a>, <a href="#443185" title="List[String]">part</a>, <a href="#443186" title="String">last</a>, <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#158969" title="=&gt; net.liftweb.http.LiftRules#RulesSeq[PartialFunction[List[java.lang.String],Either[() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq],net.liftweb.http.LiftView]]]">viewDispatch</a>.<a href="LiftRules.scala.html#185552" title="=&gt; List[PartialFunction[List[java.lang.String],Either[() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq],net.liftweb.http.LiftView]]]">toList</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.NodeSeq]">Full</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="443194">lv</a><span class="delimiter">)</span> =&gt;
            <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#443194" title="scala.xml.NodeSeq">lv</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]">_</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="443198">pls</a> = <a href="#438296" title="List[String]">places</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Iterator[String]" id="443199">se</a> = <a href="#342657" title="=&gt; List[String]">suffixes</a>.<span title="=&gt; Iterator[String]">iterator</span>
            <span class="keyword">val</span> <a title="List[java.lang.String]" id="443200">sl</a> = <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#438297" title="java.util.Locale">locale</a>.<span title="()java.lang.String">toString</span>, <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#438297" title="java.util.Locale">locale</a>.<span title="()java.lang.String">getLanguage</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

            <span class="keyword">var</span> <a title="Boolean" id="443201">found</a> = <span title="Boolean(false)" class="keyword">false</span>
            <span class="keyword">var</span> <a title="scala.xml.NodeSeq" id="443202">ret</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span title="Null(null)" class="keyword">null</span>

            <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#443201" title="Boolean">found</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#443199" title="Iterator[String]">se</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#443203" title="()Unit" class="delimiter">{</a>
              <span class="keyword">val</span> <a title="String" id="443213">s</a> = <a href="#443199" title="Iterator[String]">se</a>.<span title="()String">next</span>
              <span class="keyword">val</span> <a title="Iterator[java.lang.String]" id="443214">le</a> = <a href="#443200" title="List[java.lang.String]">sl</a>.<span title="=&gt; Iterator[java.lang.String]">iterator</span>
              <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#443201" title="Boolean">found</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#443214" title="Iterator[java.lang.String]">le</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#443215" title="()Unit" class="delimiter">{</a>
                <span class="keyword">val</span> <a title="java.lang.String" id="443216">p</a> = <a href="#443214" title="Iterator[java.lang.String]">le</a>.<span title="()java.lang.String">next</span>
                <span class="keyword">val</span> <a title="java.lang.String" id="443217">name</a> = <a href="#443198" title="String">pls</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#443216" title="java.lang.String">p</a> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#443213" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#443213" title="String">s</a> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
                <span class="keyword">import</span> scala.xml.dtd.ValidationException
                <span class="keyword">val</span> <a title="net.liftweb.common.Box[scala.xml.NodeSeq]" id="443219">xmlb</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
                  <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159087" title="(name: String)(f: java.io.InputStream =&gt; net.liftweb.common.Box[scala.xml.NodeSeq])net.liftweb.common.Box[net.liftweb.common.Box[scala.xml.NodeSeq]]">doWithResource</a><span class="delimiter">(</span><a href="#443217" title="java.lang.String">name</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#443171" title="java.io.InputStream =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">parserFunction</a> <span class="delimiter">}</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
                    <span class="keyword">case</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]">Full</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[scala.xml.NodeSeq]" id="443235">seq</a><span class="delimiter">)</span> =&gt; <a href="#443235" title="net.liftweb.common.Box[scala.xml.NodeSeq]">seq</a>
                    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
                  <span class="delimiter">}</span>
                <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <a title="Nothing" id="443236">e</a>: <span title="scala.xml.dtd.ValidationException">ValidationException</span> <span class="keyword">if</span> <a href="../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../util/net/liftweb/util/Props.scala.html#151319" title="=&gt; Boolean">devMode</a> <span title="(x: Boolean)Boolean">|</span> <a href="../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../util/net/liftweb/util/Props.scala.html#151321" title="=&gt; Boolean">testMode</a> =&gt;
                    <span title="Nothing" class="keyword">return</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#48940" title="(body: scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">errorDiv</a><span class="delimiter">(</span>&lt;<a title="scala.xml.Elem" id="443237">div</a>&gt;<span title="scala.xml.Text">Error</span> locating template: &lt;<a title="scala.xml.Elem" id="443238">b</a>&gt;<span class="delimiter">{</span><a href="#443217" title="java.lang.String">name</a><span class="delimiter">}</span>&lt;/b&gt;&lt;<span title="scala.xml.Elem">br</span>/&gt;
                      Message: &lt;<a title="scala.xml.Elem" id="443239">b</a>&gt;<span class="delimiter">{</span><a href="#443236" title="scala.xml.dtd.ValidationException">e</a>.<span title="()java.lang.String">getMessage</span><span class="delimiter">}</span>&lt;/b&gt;&lt;<span title="scala.xml.Elem">br</span>/&gt;
                      <span class="delimiter">{</span>
                      &lt;<a title="scala.xml.Elem" id="443240">pre</a>&gt;<span class="delimiter">{</span><a href="#443236" title="scala.xml.dtd.ValidationException">e</a>.<span title="()java.lang.String">toString</span><span class="delimiter">}</span><span class="delimiter">{</span><a href="#443236" title="scala.xml.dtd.ValidationException">e</a>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="(f: java.lang.StackTraceElement =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[java.lang.StackTraceElement],java.lang.String,Array[java.lang.String]])Array[java.lang.String]">map</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><a href="#443686" title="java.lang.StackTraceElement">_</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/pre&gt;
                      <span class="delimiter">}</span>
                    &lt;/div&gt;<span class="delimiter">)</span>

                  <span class="keyword">case</span> <a title="net.liftweb.common.Empty.type" id="443855">e</a>: <span title="scala.xml.dtd.ValidationException">ValidationException</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
                <span class="delimiter">}</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#443219" title="net.liftweb.common.Box[scala.xml.NodeSeq]">xmlb</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#443201" title="Boolean">found</a> = <span title="Boolean(true)" class="keyword">true</span>
                  <a href="#443202" title="scala.xml.NodeSeq">ret</a> = <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/TemplateCache.scala.html#320668" title="(key: (java.util.Locale, List[String]), node: scala.xml.NodeSeq)scala.xml.NodeSeq">cache</a><span class="delimiter">(</span><a href="#443172" title="(java.util.Locale, List[String])">key</a><span class="delimiter">)</span> = <a href="#443219" title="net.liftweb.common.Box[scala.xml.NodeSeq]">xmlb</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; scala.xml.NodeSeq">open_!</a><span class="delimiter">)</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#443219" title="net.liftweb.common.Box[scala.xml.NodeSeq]">xmlb</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
                           <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../util/net/liftweb/util/Props.scala.html#151319" title="=&gt; Boolean">devMode</a> <span title="(x: Boolean)Boolean">|</span> <a href="../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../util/net/liftweb/util/Props.scala.html#151321" title="=&gt; Boolean">testMode</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="String" id="443858">msg</a> = <a href="#443219" title="net.liftweb.common.Box[scala.xml.NodeSeq]">xmlb</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="net.liftweb.common.Failure" class="delimiter">[</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a><span class="delimiter">]</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#37795" title="=&gt; String">msg</a>
                  <span class="keyword">val</span> <a title="net.liftweb.common.Box[Throwable]" id="443859">e</a> = <a href="#443219" title="net.liftweb.common.Box[scala.xml.NodeSeq]">xmlb</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="net.liftweb.common.Failure" class="delimiter">[</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a><span class="delimiter">]</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#37797" title="=&gt; net.liftweb.common.Box[Throwable]">exception</a>
                  <span title="Nothing" class="keyword">return</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#48940" title="(body: scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">errorDiv</a><span class="delimiter">(</span>&lt;<a title="scala.xml.Elem" id="443860">div</a>&gt;<span title="scala.xml.Text">Error</span> locating template: &lt;<a title="scala.xml.Elem" id="443861">b</a>&gt;<span class="delimiter">{</span><a href="#443217" title="java.lang.String">name</a><span class="delimiter">}</span>&lt;/b&gt;&lt;<span title="scala.xml.Elem">br</span>/&gt;<span title="scala.xml.Text">Message</span>: &lt;<a title="scala.xml.Elem" id="443862">b</a>&gt;<span class="delimiter">{</span><a href="#443858" title="String">msg</a><span class="delimiter">}</span>&lt;/b&gt;&lt;<span title="scala.xml.Elem">br</span>/&gt;<span class="delimiter">{</span>
                  <span class="delimiter">{</span>
                    <a href="#443859" title="net.liftweb.common.Box[Throwable]">e</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <span title="scala.xml.Elem">Full</span><span class="delimiter">(</span><a title="Throwable" id="443864">e</a><span class="delimiter">)</span> =&gt;
                        &lt;<a title="scala.xml.Elem" id="443865">pre</a>&gt;<span class="delimiter">{</span><a href="#443864" title="Throwable">e</a>.<span title="()java.lang.String">toString</span><span class="delimiter">}</span><span class="delimiter">{</span><a href="#443864" title="Throwable">e</a>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="(f: java.lang.StackTraceElement =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[java.lang.StackTraceElement],java.lang.String,Array[java.lang.String]])Array[java.lang.String]">map</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><a href="#444311" title="java.lang.StackTraceElement">_</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/pre&gt;
                      <span class="keyword">case</span> <span title="scala.xml.NodeSeq">_</span> =&gt; <span title="object scala.xml.NodeSeq">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span><span class="delimiter">}</span>
                  &lt;/div&gt;<span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>

            <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#443201" title="Boolean">found</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#443202" title="scala.xml.NodeSeq">ret</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="#342668" title="(places: List[String])net.liftweb.common.Box[scala.xml.NodeSeq]">lookForClasses</a><span class="delimiter">(</span><a href="#438296" title="List[String]">places</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(places: List[String])net.liftweb.common.Box[scala.xml.NodeSeq]" id="342668">lookForClasses</a><span class="delimiter">(</span><a title="List[String]" id="444483">places</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.NodeSeq]">Box</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#444486" title="(String, String)" class="delimiter">(</a><a href="#444485" title="String" id="444486">controller</a>, <a href="#444485" title="String" id="444487">action</a><span class="delimiter">)</span> = <a href="#444483" title="List[String]">places</a> <span title="(String, String)" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="(String, String)" id="444494">ctl</a> :: <a title="String" id="444499">act</a> :: _ =&gt; <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#444494" title="String">ctl</a>, <a href="#444499" title="String">act</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="(String, java.lang.String)" id="444510">ctl</a> :: _ =&gt; <span title="(_1: String, _2: java.lang.String)(String, java.lang.String)" class="delimiter">(</span><a href="#444510" title="String">ctl</a>, <span title="java.lang.String(&quot;index&quot;)" class="string">&quot;index&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(java.lang.String, java.lang.String)">Nil</span> =&gt; <span title="(_1: java.lang.String, _2: java.lang.String)(java.lang.String, java.lang.String)" class="delimiter">(</span><span title="java.lang.String(&quot;default_template&quot;)" class="string">&quot;default_template&quot;</span>, <span title="java.lang.String(&quot;index&quot;)" class="string">&quot;index&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="List[String =&gt; String]" id="444488">trans</a> = <span title="[A](xs: A*)List[A]">List</span><span title="(xs: String =&gt; String*)List[String =&gt; String]" class="delimiter">[</span>String =&gt; String<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="444539">n</a> =&gt; <a href="#444539" title="String">n</a>, <a title="String" id="444541">n</a> =&gt; <a href="../../../../util/net/liftweb/util/StringHelpers.scala.html#48841" title="(name: String)String">camelify</a><span class="delimiter">(</span><a href="#444541" title="String">n</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="444489">toTry</a> = <a href="#444488" title="List[String =&gt; String]">trans</a>.<span title="(f: String =&gt; String =&gt; scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String =&gt; String],java.lang.String,List[java.lang.String]])List[java.lang.String]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a title="String =&gt; String" id="444558">f</a> =&gt; <span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159077" title="(end: String)List[java.lang.String]">buildPackage</a><span class="delimiter">(</span><span title="java.lang.String(&quot;view&quot;)" class="string">&quot;view&quot;</span><span class="delimiter">)</span> <a href="#444559" title="(prefix: List[java.lang.String])List[java.lang.String]">:::</a> <span class="delimiter">(</span><span title="java.lang.String(&quot;lift.app.view&quot;)" class="string">&quot;lift.app.view&quot;</span> <a href="#444562" title="(x: java.lang.String)List[java.lang.String]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#444594" title="java.lang.String">_</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#444558" title="(v1: String)String">f</a><span class="delimiter">(</span><a href="#444486" title="String">controller</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../../../util/net/liftweb/util/ListHelpers.scala.html#48877" title="(in: Seq[java.lang.String])(_f: java.lang.String =&gt; net.liftweb.common.Box[scala.xml.NodeSeq])net.liftweb.common.Box[scala.xml.NodeSeq]">first</a><span class="delimiter">(</span><a href="#444489" title="List[java.lang.String]">toTry</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="java.lang.String" id="444668">clsName</a> =&gt;
              <span class="keyword">try</span> <span class="delimiter">{</span>
                <a href="../../../../util/net/liftweb/util/ControlHelpers.scala.html#48602" title="(ignore: List[Class[_]], onError: net.liftweb.common.Box[Throwable =&gt; Unit])(f: =&gt; Class[AnyRef])net.liftweb.common.Box[Class[AnyRef]]">tryo</a><span class="delimiter">(</span><span title="(xs: java.lang.Class[java.lang.ClassNotFoundException]*)List[java.lang.Class[java.lang.ClassNotFoundException]]">List</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[java.lang.ClassNotFoundException](classOf[java.lang.ClassNotFoundException])" class="delimiter">[</span>ClassNotFoundException<span class="delimiter">]</span><span class="delimiter">)</span>, <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#444668" title="java.lang.String">clsName</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[AnyRef]" class="delimiter">[</span><span title="Class[AnyRef]">Class</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: Class[AnyRef] =&gt; net.liftweb.common.Box[scala.xml.NodeSeq])net.liftweb.common.Box[scala.xml.NodeSeq]">flatMap</a> <span class="delimiter">{</span>
                  <a title="Class[AnyRef]" id="444815">c</a> =&gt;
                          <span class="delimiter">(</span><a href="#444815" title="Class[AnyRef]">c</a>.<span title="()AnyRef">newInstance</span> <span title="java.lang.Object" class="keyword">match</span> <span class="delimiter">{</span>
                            <span class="keyword">case</span> <a title="java.lang.Object" id="444816">inst</a>: <a href="LiftSession.scala.html#14499" title="net.liftweb.http.InsecureLiftView">InsecureLiftView</a> =&gt; <a href="#444815" title="Class[AnyRef]">c</a>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><a href="#444487" title="String">action</a><span class="delimiter">)</span>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><a href="#444816" title="net.liftweb.http.InsecureLiftView">inst</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <a title="net.liftweb.common.Box[scala.xml.NodeSeq]" id="444817">inst</a>: <a href="LiftSession.scala.html#14500" title="net.liftweb.http.LiftView">LiftView</a> <span class="keyword">if</span> <a href="#444817" title="net.liftweb.http.LiftView">inst</a>.<a href="LiftSession.scala.html#402717" title="=&gt; PartialFunction[String,() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]]">dispatch</a>.<span title="(x: String)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#444487" title="String">action</a><span class="delimiter">)</span> =&gt; <a href="#444817" title="net.liftweb.http.LiftView">inst</a>.<a href="LiftSession.scala.html#402717" title="(v1: String)() =&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">dispatch</a><span title="()net.liftweb.common.Box[scala.xml.NodeSeq]" class="delimiter">(</span><a href="#444487" title="String">action</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
                          <span class="delimiter">}</span><span class="delimiter">)</span> <span title="net.liftweb.common.Box[scala.xml.NodeSeq]" class="keyword">match</span> <span class="delimiter">{</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type" class="keyword">null</span> | <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a> | <span title="object None">None</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
                            <span class="keyword">case</span> <a title="net.liftweb.common.Full[scala.xml.Group]" id="444820">n</a>: <span title="scala.xml.Group">Group</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Group)net.liftweb.common.Full[scala.xml.Group]">Full</a><span class="delimiter">(</span><a href="#444820" title="scala.xml.Group">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <a title="net.liftweb.common.Full[scala.xml.Elem]" id="444824">n</a>: <span title="scala.xml.Elem">Elem</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#444824" title="scala.xml.Elem">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <a title="net.liftweb.common.Full[scala.xml.NodeSeq]" id="444828">s</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#444828" title="scala.xml.NodeSeq">s</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.Group]">Some</span><span class="delimiter">(</span><a title="scala.xml.Group" id="444833">n</a>: <span title="scala.xml.Group">Group</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Group)net.liftweb.common.Full[scala.xml.Group]">Full</a><span class="delimiter">(</span><a href="#444833" title="scala.xml.Group">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.Elem]">Some</span><span class="delimiter">(</span><a title="scala.xml.Elem" id="444838">n</a>: <span title="scala.xml.Elem">Elem</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#444838" title="scala.xml.Elem">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.NodeSeq]">Some</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="444843">n</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#444843" title="scala.xml.NodeSeq">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.NodeSeq]">Some</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Helpers.scala.html#294716" title="(any: Any)Option[Seq[scala.xml.Node]]">SafeNodeSeq</a><span class="delimiter">(</span><a title="Seq[scala.xml.Node]" id="444849">n</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#444849" title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.Group]">Full</span><span class="delimiter">(</span><a title="scala.xml.Group" id="444856">n</a>: <span title="scala.xml.Group">Group</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Group)net.liftweb.common.Full[scala.xml.Group]">Full</a><span class="delimiter">(</span><a href="#444856" title="scala.xml.Group">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.Elem]">Full</span><span class="delimiter">(</span><a title="scala.xml.Elem" id="444861">n</a>: <span title="scala.xml.Elem">Elem</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.Elem)net.liftweb.common.Full[scala.xml.Elem]">Full</a><span class="delimiter">(</span><a href="#444861" title="scala.xml.Elem">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.NodeSeq]">Full</span><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="444866">n</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#444866" title="scala.xml.NodeSeq">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Full[scala.xml.NodeSeq]">Full</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Helpers.scala.html#294716" title="(any: Any)Option[Seq[scala.xml.Node]]">SafeNodeSeq</a><span class="delimiter">(</span><a title="Seq[scala.xml.Node]" id="444872">n</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.xml.NodeSeq)net.liftweb.common.Full[scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#444872" title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq">n</a><span class="delimiter">)</span>
                            <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
                          <span class="delimiter">}</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a title="Nothing" id="444879">ite</a>: java.lang.reflect.<span title="java.lang.reflect.InvocationTargetException">InvocationTargetException</span> =&gt; 
                  <span title="Nothing" class="keyword">throw</span> <a href="#444879" title="java.lang.reflect.InvocationTargetException">ite</a>.<span title="()java.lang.Throwable">getCause</span>
                <span class="keyword">case</span> <a title="net.liftweb.common.Empty.type" id="444880">e</a>: <span title="java.lang.NoClassDefFoundError">NoClassDefFoundError</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
              <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
* A case class that contains the information necessary to set up a CometActor
*/</span>
<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class CometCreationInfo extends java.lang.Object with ScalaObject with Product with Serializable" id="445895">CometCreationInfo</a><a href="#445895" title="ScalaObject" class="delimiter">(</a><a title="String" id="401419">contType</a>: <span title="String">String</span>,
                                   <a title="net.liftweb.common.Box[String]" id="401420">name</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                                   <a title="scala.xml.NodeSeq" id="401421">defaultXml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span>,
                                   <a title="Map[String,String]" id="401422">attributes</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>,
                                   <a title="net.liftweb.http.LiftSession" id="401423">session</a>: <a href="LiftSession.scala.html#14496" title="net.liftweb.http.LiftSession">LiftSession</a><span class="delimiter">)</span>

<span class="comment">/**
 * Throw this exception if there's a catostrophic failure executing
 * a snippet
 */</span>
<span class="keyword">class</span> <a title="class SnippetExecutionException extends net.liftweb.http.SnippetFailureException with ScalaObject" id="14735">SnippetExecutionException</a><a href="#14735" title="ScalaObject" class="delimiter">(</a><a title="String" id="327203">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14736" title="net.liftweb.http.SnippetFailureException">SnippetFailureException</a><span class="delimiter">(</span><a href="#327203" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value" id="327202">snippetFailure</a> = <a href="LiftRules.scala.html#14376" title="object net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#158809" title="object net.liftweb.http.LiftRules.SnippetFailures">SnippetFailures</a>.<a href="LiftRules.scala.html#326675" title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value">ExecutionFailure</a> 
<span class="delimiter">}</span>

<span class="comment">/**
 * An abstract exception that may be thrown during page rendering.
 * The exception is caught and the appropriate report of a SnippetError
 * is generated
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SnippetFailureException extends net.liftweb.util.LiftFlowOfControlException with ScalaObject" id="14736">SnippetFailureException</a><a href="#14736" title="ScalaObject" class="delimiter">(</a><a title="String" id="326603">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13350" title="net.liftweb.util.LiftFlowOfControlException">LiftFlowOfControlException</a><span class="delimiter">(</span><a href="#326603" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value" id="326382">snippetFailure</a>: LiftRules.SnippetFailures.<span title="net.liftweb.http.LiftRules.SnippetFailures.Value">Value</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="326383">buildStackTrace</a>: <span title="scala.xml.NodeSeq">NodeSeq</span> = 
    <a href="#14736" title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</a>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span>.<span title="(p: java.lang.StackTraceElement =&gt; Boolean)List[java.lang.StackTraceElement]">dropWhile</span> 
  <span class="delimiter">{</span>
    <a title="java.lang.StackTraceElement" id="445242">e</a> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="445243">cn</a> = <a href="#445242" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getClassName</span>
      <a href="#445243" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;net.liftweb.http&quot;)" class="string">&quot;net.liftweb.http&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <a href="#445243" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;net.liftweb.common&quot;)" class="string">&quot;net.liftweb.common&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <a href="#445243" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;net.liftweb.util&quot;)" class="string">&quot;net.liftweb.util&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>.<span title="(p: java.lang.StackTraceElement =&gt; Boolean)List[java.lang.StackTraceElement]">filter</span> <span class="delimiter">{</span>
    <a title="java.lang.StackTraceElement" id="445255">e</a> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="445256">cn</a> = <a href="#445255" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getClassName</span>
      <span title="=&gt; Boolean">!</span><a href="#445256" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.lang&quot;)" class="string">&quot;java.lang&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span title="=&gt; Boolean">!</span><a href="#445256" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;sun.&quot;)" class="string">&quot;sun.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>.<span title="(n: Int)List[java.lang.StackTraceElement]">take</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span>.<span title="(f: java.lang.StackTraceElement =&gt; scala.xml.Elem)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.StackTraceElement],scala.xml.Elem,List[scala.xml.Elem]])List[scala.xml.Elem]">map</span><span title="implicit scala.xml.NodeSeq.seqToNodeSeq : (s: Seq[scala.xml.Node])scala.xml.NodeSeq" class="delimiter">{</span>
      <a title="java.lang.StackTraceElement" id="445282">e</a> =&gt;
      &lt;<a title="scala.xml.Elem" id="445283">code</a>&gt;&lt;<a title="scala.xml.Elem" id="445284">span</a>&gt;&lt;<span title="scala.xml.Elem">br</span>/&gt;<span class="delimiter">{</span><a href="#445282" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">toString</span><span class="delimiter">}</span>&lt;/span&gt;&lt;/code&gt;
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class StateInStatelessException extends net.liftweb.http.SnippetFailureException with ScalaObject" id="14737">StateInStatelessException</a><a href="#14737" title="ScalaObject" class="delimiter">(</a><a title="String" id="326388">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14736" title="net.liftweb.http.SnippetFailureException">SnippetFailureException</a><span class="delimiter">(</span><a href="#326388" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value" id="326387">snippetFailure</a>: LiftRules.SnippetFailures.<span title="net.liftweb.http.LiftRules.SnippetFailures.Value">Value</span> = 
    <a href="LiftRules.scala.html#14376" title="object net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#158809" title="object net.liftweb.http.LiftRules.SnippetFailures">SnippetFailures</a>.<a href="LiftRules.scala.html#326669" title="=&gt; net.liftweb.http.LiftRules.SnippetFailures.Value">StateInStateless</a>
<span class="delimiter">}</span>



  <span class="comment">/**
   * Holds a pair of parameters
   */</span>
  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class ParamPair extends java.lang.Object with ScalaObject with Product with Serializable" id="445891">ParamPair</a><a href="#445891" title="ScalaObject" class="delimiter">(</a><a title="Any" id="397380">v</a>: <span title="Any">Any</span>, <a title="Class[_]" id="397381">clz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * a trait that defines some ways of constructing an instance
   */</span>
  <span class="keyword">private</span> <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait ConstructorType extends java.lang.Object" id="14741">ConstructorType</a>
  
  <span class="comment">/**
   * A unit constructor... just pass in null
   */</span>
  <span class="keyword">private</span> <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class UnitConstructor extends java.lang.Object with net.liftweb.http.ConstructorType with ScalaObject with Product with Serializable" id="445829">UnitConstructor</a><a href="#445829" title="ScalaObject" class="delimiter">(</a><a title="java.lang.reflect.Constructor[_]" id="387342">c</a>: java.lang.reflect.<span title="java.lang.reflect.Constructor[_]">Constructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14741" title="net.liftweb.http.ConstructorType">ConstructorType</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[T]=&gt; T" id="387337">makeOne</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="387339">T</a><span class="delimiter">]</span>: <a href="#387339" title="T">T</a> = <a href="#387342" title="=&gt; java.lang.reflect.Constructor[_]">c</a>.<span title="(x$1: &lt;repeated...&gt;[java.lang.Object])Any">newInstance</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#387339" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A parameter and session constructor
   */</span>
  <span class="keyword">private</span> <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class PAndSessionConstructor extends java.lang.Object with net.liftweb.http.ConstructorType with ScalaObject with Product with Serializable" id="445771">PAndSessionConstructor</a><a href="#445771" title="ScalaObject" class="delimiter">(</a><a title="java.lang.reflect.Constructor[_]" id="387755">c</a>: java.lang.reflect.<span title="java.lang.reflect.Constructor[_]">Constructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14741" title="net.liftweb.http.ConstructorType">ConstructorType</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[T](p: Any, s: net.liftweb.http.LiftSession)T" id="387750">makeOne</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="387752">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Any" id="388364">p</a>: <span title="Any">Any</span>, <a title="net.liftweb.http.LiftSession" id="388365">s</a>: <a href="LiftSession.scala.html#14496" title="net.liftweb.http.LiftSession">LiftSession</a><span class="delimiter">)</span>: <a href="#387752" title="T">T</a> = 
      <a href="#387755" title="=&gt; java.lang.reflect.Constructor[_]">c</a>.<span title="(x$1: &lt;repeated...&gt;[java.lang.Object])Any">newInstance</span><span class="delimiter">(</span><a href="#388364" title="Any">p</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.Object" class="delimiter">[</span><span title="java.lang.Object">Object</span><span class="delimiter">]</span>, <a href="#388365" title="net.liftweb.http.LiftSession">s</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#387752" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A parameter constructor
   */</span>
  <span class="keyword">private</span> <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class PConstructor extends java.lang.Object with net.liftweb.http.ConstructorType with ScalaObject with Product with Serializable" id="445709">PConstructor</a><a href="#445709" title="ScalaObject" class="delimiter">(</a><a title="java.lang.reflect.Constructor[_]" id="388124">c</a>: java.lang.reflect.<span title="java.lang.reflect.Constructor[_]">Constructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14741" title="net.liftweb.http.ConstructorType">ConstructorType</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[T](p: Any)T" id="388119">makeOne</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="388121">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Any" id="388360">p</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="#388121" title="T">T</a> = 
      <a href="#388124" title="=&gt; java.lang.reflect.Constructor[_]">c</a>.<span title="(x$1: &lt;repeated...&gt;[java.lang.Object])Any">newInstance</span><span class="delimiter">(</span><a href="#388360" title="Any">p</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.Object" class="delimiter">[</span><span title="java.lang.Object">Object</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#388121" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>


        </pre>
    </body>
</html>