<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>webkit/net/liftweb/http/Vars.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2007-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> http

<span class="keyword">import</span> net.liftweb.common._
<span class="keyword">import</span> net.liftweb.util._
<span class="keyword">import</span> <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._
<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, ListBuffer<span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.Callable

<span class="comment">/**
 * The bridge between Scala *Vars implementations and
 * the 
 */</span>
<span class="keyword">class</span> <a title="class VarsJBridge extends java.lang.Object with ScalaObject" id="14759">VarsJBridge</a> <a href="#14759" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="[T](default: T, e: Exception)net.liftweb.http.SessionVar[T]" id="445900">vendSessionVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="445902">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="445907">default</a>: <a href="#445902" title="T">T</a>, <a title="Exception" id="445908">e</a>: <span title="Exception">Exception</span><span class="delimiter">)</span>: <a href="#14760" title="net.liftweb.http.SessionVar[T]">SessionVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#445903" title="(default: java.util.concurrent.Callable[T], e: Exception)net.liftweb.http.SessionVar[T]">vendSessionVar</a><span class="delimiter">(</span><a href="#445929" title="java.lang.Object with java.util.concurrent.Callable[T]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with java.util.concurrent.Callable[T]" id="445929">Callable</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="()T" id="445931">call</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#445907" title="T">default</a>
    <span class="delimiter">}</span>, <a href="#445908" title="Exception">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](default: java.util.concurrent.Callable[T], e: Exception)net.liftweb.http.SessionVar[T]" id="445903">vendSessionVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="445905">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.concurrent.Callable[T]" id="445916">default</a>: <span title="java.util.concurrent.Callable[T]">Callable</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Exception" id="445917">e</a>: <span title="Exception">Exception</span><span class="delimiter">)</span>: <a href="#14760" title="net.liftweb.http.SessionVar[T]">SessionVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#445958" title="net.liftweb.http.SessionVar[T]{}" class="keyword">new</a> <a title="anonymous class $anon extends net.liftweb.http.SessionVar[T]" id="445958">SessionVar</a><span class="delimiter">(</span><a href="#445916" title="java.util.concurrent.Callable[T]">default</a>.<span title="()T">call</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">val</span> <a title="java.lang.String" id="445975">__nameSalt</a> = <a href="#445917" title="Exception">e</a>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span>.<span title="(i: Int)java.lang.StackTraceElement">apply</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A typesafe container for data with a lifetime nominally equivalent to the
 * lifetime of HttpSession attributes.
 *
 * &lt;code&gt;
 * object MySnippetCompanion {
 *   object mySessionVar extends SessionVar[String](&quot;hello&quot;)
 * }
 * &lt;/code&gt;
 *
 * The standard pattern is to create a singleton object extending SessionVar instead
 * of creating an instance variable of a concrete SessionVar subclass. This is preferred
 * because SessionVar will use the name of its instantiating class for part of its state
 * maintenance mechanism.
 *
 * If you find it necessary to create a SessionVar subclass of which there may be more
 * than one instance, it is necessary to override the __nameSalt() method to return
 * a unique salt value for each instance to prevent name collisions.
 *
 * Note: SessionVars can be used within CometActors
 *
 * @param dflt - the default value to be returned if none was set prior to
 * requesting a value to be returned from the container
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SessionVar[T] extends net.liftweb.util.AnyVar[T,net.liftweb.http.SessionVar[T]] with net.liftweb.common.LazyLoggable with ScalaObject" id="14760">SessionVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14761">T</a><span class="delimiter">]</span><a href="#14760" title="ScalaObject" class="delimiter">(</a><a title="=&gt; T" id="150603">dflt</a>: =&gt; T<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13063" title="net.liftweb.util.AnyVar[T,net.liftweb.http.SessionVar[T]]">AnyVar</a><span class="delimiter">[</span>T, SessionVar<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#150603" title="=&gt; T">dflt</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../../../../common/net/liftweb/common/Logging.scala.html#10718" title="net.liftweb.common.LazyLoggable">LazyLoggable</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)net.liftweb.common.Box[T]" id="149358">findFunc</a><span class="delimiter">(</span><a title="String" id="340280">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a> <span title="net.liftweb.common.Box[T]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Box[Nothing]">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="445990">s</a><span class="delimiter">)</span> =&gt; <a href="#445990" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230262" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#340280" title="String">name</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159066" title="=&gt; Boolean">throwOnOutOfScopeVarAccess</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalAccessException" class="keyword">new</span> <span title="java.lang.IllegalAccessException">IllegalAccessException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Access to SessionVar outside a request or comet actor scope&quot;)" class="string">&quot;Access to SessionVar outside a request or comet actor scope&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#149364" title="=&gt; Boolean">showWarningWhenAccessedOutOfSessionScope_?</a><span class="delimiter">)</span>
        <a href="../../../../common/net/liftweb/common/Logging.scala.html#43091" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31954" title="(msg: =&gt; AnyRef)Unit">warn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Getting a SessionVar &quot;)" class="string">&quot;Getting a SessionVar &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#340280" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; outside session scope&quot;)" class="string">&quot; outside session scope&quot;</span><span class="delimiter">)</span> <span class="comment">// added warning per issue 188</span>

      <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Stateless session enforcement is new to Lift, but there
   * are some legacy issues in WebKit and allowing for a SessionVar
   * to be &quot;magic&quot; (settable even in stateless sessions) seems to be
   * an efficient, yet somewhat hacky, way around the issue
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>liftweb<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="149359">magicSessionVar_?</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String, value: T)Unit" id="149360">setFunc</a><span class="delimiter">(</span><a title="String" id="340273">name</a>: <span title="String">String</span>, <a title="T" id="340274">value</a>: <a href="#14761" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="comment">// If we're in a stateless session, don't allow SessionVar setting</span>
    <span class="keyword">case</span> <span title="Nothing">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446006">s</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#149359" title="=&gt; Boolean">magicSessionVar_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#446006" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230327" title="=&gt; Boolean">stateful_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75370" title="=&gt; Boolean">settingDefault_?</a> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="net.liftweb.http.StateInStatelessException" class="keyword">new</span> <a href="Templates.scala.html#14737" title="net.liftweb.http.StateInStatelessException">StateInStatelessException</a><span class="delimiter">(</span><span class="string">&quot;setting a SessionVar in a &quot;</span> <span title="java.lang.String(&quot;setting a SessionVar in a stateless session: &quot;)">+</span>
        <span class="string">&quot;stateless session: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#14760" title="()java.lang.Class[_]">getClass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="Unit">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446009">s</a><span class="delimiter">)</span> =&gt; <a href="#446009" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230259" title="(name: String, value: T)Unit">set</a><span class="delimiter">(</span><a href="#340273" title="String">name</a>, <a href="#340274" title="T">value</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159066" title="=&gt; Boolean">throwOnOutOfScopeVarAccess</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalAccessException" class="keyword">new</span> <span title="java.lang.IllegalAccessException">IllegalAccessException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Access to SessionVar outside a request or comet actor scope&quot;)" class="string">&quot;Access to SessionVar outside a request or comet actor scope&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#149364" title="=&gt; Boolean">showWarningWhenAccessedOutOfSessionScope_?</a><span class="delimiter">)</span>
        <a href="../../../../common/net/liftweb/common/Logging.scala.html#43091" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31954" title="(msg: =&gt; AnyRef)Unit">warn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Setting a SessionVar &quot;)" class="string">&quot;Setting a SessionVar &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#340273" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#340274" title="T">value</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; outside session scope&quot;)" class="string">&quot; outside session scope&quot;</span><span class="delimiter">)</span> <span class="comment">// added warning per issue 188</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Different Vars require different mechanisms for synchronization.  This method implements
   * the Var specific synchronization mechanism
   */</span>
  <span class="keyword">def</span> <a title="[F](f: =&gt; F)F" id="149361">doSync</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="149363">F</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; F" id="340259">f</a>: =&gt; F<span class="delimiter">)</span>: <a href="#149363" title="F">F</a> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a> <span title="F" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="F">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446022">s</a><span class="delimiter">)</span> =&gt;
      <span class="comment">// lock the session while the Var-specific lock object is found/created</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="446023">lockName</a> = <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75359" title="=&gt; java.lang.String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269301" title="=&gt; java.lang.String">lockSuffix</a>
      <span class="keyword">val</span> <a title="AnyRef" id="446024">lockObj</a> = <a href="#446022" title="net.liftweb.http.LiftSession">s</a>.<span title="(x$1: AnyRef)AnyRef">synchronized</span> <span class="delimiter">{</span>
        <a href="#446022" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230262" title="[T](name: String)net.liftweb.common.Box[T]">get</a><span title="(name: String)net.liftweb.common.Box[AnyRef]" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#446023" title="java.lang.String">lockName</a><span class="delimiter">)</span> <span title="AnyRef" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="AnyRef">Full</span><span class="delimiter">(</span><a title="AnyRef" id="446028">lock</a><span class="delimiter">)</span> =&gt; <a href="#446028" title="AnyRef">lock</a>
          <span class="keyword">case</span> <span title="java.lang.Object">_</span> =&gt; <span class="keyword">val</span> <a title="java.lang.Object" id="446029">lock</a> = <span title="java.lang.Object" class="keyword">new</span> <span title="java.lang.Object">AnyRef</span>
          <a href="#446022" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230259" title="(name: String, value: java.lang.Object)Unit">set</a><span class="delimiter">(</span><a href="#446023" title="java.lang.String">lockName</a>, <a href="#446029" title="java.lang.Object">lock</a><span class="delimiter">)</span>
          <a href="#446029" title="java.lang.Object">lock</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// execute the query in the scope of the lock obj</span>
      <a href="#446024" title="AnyRef">lockObj</a>.<span title="(x$1: F)F">synchronized</span> <span class="delimiter">{</span>
        <a href="#340259" title="=&gt; F">f</a>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="F">_</span> =&gt; <a href="#340259" title="=&gt; F">f</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="149364">showWarningWhenAccessedOutOfSessionScope_?</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Unit" id="149365">clearFunc</a><span class="delimiter">(</span><a title="String" id="340269">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#446043" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230265" title="(name: String)Unit">unset</a><span class="delimiter">(</span><a href="#340269" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="149366">wasInitialized</a><span class="delimiter">(</span><a title="String" id="340267">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446045">bn</a> = <a href="#340267" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <span class="keyword">val</span> <a title="Boolean" id="446046">old</a>: <span title="Boolean">Boolean</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.LiftSession =&gt; net.liftweb.common.Box[Nothing])net.liftweb.common.Box[Nothing]">flatMap</a><span class="delimiter">(</span><a href="#446051" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230262" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446045" title="java.lang.String">bn</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
    <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#446062" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230259" title="(name: String, value: Boolean)Unit">set</a><span class="delimiter">(</span><a href="#446045" title="java.lang.String">bn</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#446046" title="Boolean">old</a>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="149367">testWasSet</a><span class="delimiter">(</span><a title="String" id="340265">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446069">bn</a> = <a href="#340265" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.LiftSession =&gt; net.liftweb.common.Box[Nothing])net.liftweb.common.Box[Nothing]">flatMap</a><span class="delimiter">(</span><a href="#446073" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230262" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#340265" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.LiftSession =&gt; net.liftweb.common.Box[Nothing])net.liftweb.common.Box[Nothing]">flatMap</a><span class="delimiter">(</span><a href="#446079" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230262" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446069" title="java.lang.String">bn</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(in: net.liftweb.http.LiftSession =&gt; Unit)Unit" id="149368">registerCleanupFunc</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession =&gt; Unit" id="340256">in</a>: LiftSession =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#446088" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230231" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">addSessionCleanup</a><span class="delimiter">(</span><a href="#340256" title="net.liftweb.http.LiftSession =&gt; Unit">in</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">type</span> <a title="net.liftweb.http.LiftSession" id="149369">CleanUpParam</a> = <a href="LiftSession.scala.html#14496" title="net.liftweb.http.LiftSession">LiftSession</a>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait HasLogUnreadVal extends java.lang.Object" id="14762">HasLogUnreadVal</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="75418">logUnreadVal</a>: <span title="Boolean">Boolean</span>
<span class="delimiter">}</span>


<span class="comment">/**
 * A typesafe container for data with a lifetime nominally equivalent to the
 * lifetime of HttpSession attributes.  This alternative to SessionVar
 * keeps data in the container's session and must be serializable to
 * support session migration.  Use SessionVars unless you are using
 * MigratoryLiftSessions.
 *
 * &lt;code&gt;
 * object MySnippetCompanion {
 *   object mySessionVar extends ContainerVar[String](&quot;hello&quot;)
 * }
 * &lt;/code&gt;
 *
 * The standard pattern is to create a singleton object extending ContainerVar instead
 * of creating an instance variable of a concrete ContainerVar subclass. This is preferred
 * because ContainerVar will use the name of its instantiating class for part of its state
 * maintenance mechanism.
 *
 * If you find it necessary to create a ContainerVar subclass of which there may be more
 * than one instance, it is necessary to override the __nameSalt() method to return
 * a unique salt value for each instance to prevent name collisions.
 *
 * @param dflt - the default value to be returned if none was set prior to
 * requesting a value to be returned from the container
 * @param containerSerializer -- an implicit parameter that keeps us honest
 * about only storing things that can be actually serialized.  Lift
 * provides a subset of these.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ContainerVar[T] extends net.liftweb.util.AnyVar[T,net.liftweb.http.ContainerVar[T]] with net.liftweb.common.LazyLoggable with ScalaObject" id="14763">ContainerVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14764">T</a><span class="delimiter">]</span><a href="#14763" title="ScalaObject" class="delimiter">(</a><a title="=&gt; T" id="446114">dflt</a>: =&gt; T<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.http.ContainerSerializer[T]" id="446115">containerSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[T]">ContainerSerializer</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13063" title="net.liftweb.util.AnyVar[T,net.liftweb.http.ContainerVar[T]]">AnyVar</a><span class="delimiter">[</span>T, ContainerVar<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#446114" title="=&gt; T">dflt</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../../../../common/net/liftweb/common/Logging.scala.html#10718" title="net.liftweb.common.LazyLoggable">LazyLoggable</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)net.liftweb.common.Box[T]" id="446096">findFunc</a><span class="delimiter">(</span><a title="String" id="446117">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a> <span title="net.liftweb.common.Box[T]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Box[T]">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446120">session</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <a href="#446098" title="(session: net.liftweb.http.LiftSession, name: String)net.liftweb.common.Box[Any]">localGet</a><span class="delimiter">(</span><a href="#446120" title="net.liftweb.http.LiftSession">session</a>, <a href="#446117" title="String">name</a><span class="delimiter">)</span> <span title="net.liftweb.common.Box[T]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Full[T]">Full</span><span class="delimiter">(</span><a title="Array[Byte]" id="446125">array</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: T)net.liftweb.common.Full[T]">Full</a><span class="delimiter">(</span><a href="#446115" title="net.liftweb.http.ContainerSerializer[T]">containerSerializer</a>.<a href="#446113" title="(in: Array[Byte])T">deserialize</a><span class="delimiter">(</span><a href="#446125" title="Array[Byte]">array</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#446103" title="=&gt; Boolean">showWarningWhenAccessedOutOfSessionScope_?</a><span class="delimiter">)</span>
        <a href="../../../../common/net/liftweb/common/Logging.scala.html#43091" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31954" title="(msg: =&gt; AnyRef)Unit">warn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Getting a SessionVar &quot;)" class="string">&quot;Getting a SessionVar &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#446117" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; outside session scope&quot;)" class="string">&quot; outside session scope&quot;</span><span class="delimiter">)</span> <span class="comment">// added warning per issue 188</span>

      <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(session: net.liftweb.http.LiftSession, name: String, value: Any)Unit" id="446097">localSet</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446135">session</a>: <a href="LiftSession.scala.html#14496" title="net.liftweb.http.LiftSession">LiftSession</a>, <a title="String" id="446136">name</a>: <span title="String">String</span>, <a title="Any" id="446137">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="net.liftweb.http.provider.HTTPSession" id="446143">httpSession</a> &lt;- <a href="#446135" title="net.liftweb.http.LiftSession">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.provider.HTTPSession =&gt; Unit)Unit">httpSession</a>
    <span class="delimiter">}</span> <a href="#446143" title="net.liftweb.http.provider.HTTPSession">httpSession</a>.<a href="provider/HTTPSession.scala.html#357309" title="(name: String, value: Any)Unit">setAttribute</a><span class="delimiter">(</span><a href="#446136" title="String">name</a>, <a href="#446137" title="Any">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(session: net.liftweb.http.LiftSession, name: String)net.liftweb.common.Box[Any]" id="446098">localGet</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446121">session</a>: <a href="LiftSession.scala.html#14496" title="net.liftweb.http.LiftSession">LiftSession</a>, <a title="String" id="446122">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[Any]">Box</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="net.liftweb.http.provider.HTTPSession" id="446149">httpSession</a> &lt;- <a href="#446121" title="net.liftweb.http.LiftSession">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.provider.HTTPSession =&gt; net.liftweb.common.Box[Any])net.liftweb.common.Box[Any]">httpSession</a>
      <a title="Any" id="446157">attr</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a> <a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: Any =&gt; Any)net.liftweb.common.Box[Any]">!!</a> <a href="#446149" title="net.liftweb.http.provider.HTTPSession">httpSession</a>.<a href="provider/HTTPSession.scala.html#357310" title="(name: String)Any">attribute</a><span class="delimiter">(</span><a href="#446122" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#446157" title="Any">attr</a>
  <span class="delimiter">}</span>


  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String, value: T)Unit" id="446099">setFunc</a><span class="delimiter">(</span><a title="String" id="446160">name</a>: <span title="String">String</span>, <a title="T" id="446161">value</a>: <a href="#14764" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="comment">// If we're in a stateless session, don't allow SessionVar setting</span>
    <span class="keyword">case</span> <span title="Nothing">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446166">s</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#446166" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230328" title="=&gt; Boolean">allowContainerState_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#446166" title="net.liftweb.http.LiftSession">s</a>.<a href="LiftSession.scala.html#230327" title="=&gt; Boolean">stateful_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75370" title="=&gt; Boolean">settingDefault_?</a> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="net.liftweb.http.StateInStatelessException" class="keyword">new</span> <a href="Templates.scala.html#14737" title="net.liftweb.http.StateInStatelessException">StateInStatelessException</a><span class="delimiter">(</span><span class="string">&quot;setting a SessionVar in a &quot;</span> <span title="java.lang.String(&quot;setting a SessionVar in a stateless session: &quot;)">+</span>
        <span class="string">&quot;stateless session: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#14763" title="()java.lang.Class[_]">getClass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="Unit">Full</span><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446169">session</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <a href="#446097" title="(session: net.liftweb.http.LiftSession, name: String, value: Any)Unit">localSet</a><span class="delimiter">(</span><a href="#446169" title="net.liftweb.http.LiftSession">session</a>, <a href="#446160" title="String">name</a>, <a href="#446115" title="net.liftweb.http.ContainerSerializer[T]">containerSerializer</a>.<a href="#446112" title="(in: T)Array[Byte]">serialize</a><span class="delimiter">(</span><a href="#446161" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#446103" title="=&gt; Boolean">showWarningWhenAccessedOutOfSessionScope_?</a><span class="delimiter">)</span>
        <a href="../../../../common/net/liftweb/common/Logging.scala.html#43091" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31954" title="(msg: =&gt; AnyRef)Unit">warn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Setting a ContainerVar &quot;)" class="string">&quot;Setting a ContainerVar &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#446160" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#446161" title="T">value</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; outside session scope&quot;)" class="string">&quot; outside session scope&quot;</span><span class="delimiter">)</span> <span class="comment">// added warning per issue 188</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Different Vars require different mechanisms for synchronization.  This method implements
   * the Var specific synchronization mechanism.
   *
   * In the case of ContainerVar, we synchronize on the ContainerVar
   * instance itself.
   */</span>
  <span class="keyword">def</span> <a title="[F](f: =&gt; F)F" id="446100">doSync</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="446102">F</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; F" id="446174">f</a>: =&gt; F<span class="delimiter">)</span>: <a href="#446102" title="F">F</a> = <a href="#14763" title="ContainerVar.this.type" class="keyword">this</a>.<span title="(x$1: F)F">synchronized</span><span class="delimiter">(</span><a href="#446174" title="=&gt; F">f</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="446103">showWarningWhenAccessedOutOfSessionScope_?</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Unit" id="446104">clearFunc</a><span class="delimiter">(</span><a title="String" id="446182">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="net.liftweb.http.LiftSession" id="446188">session</a> &lt;- <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">session</a>
      <a title="net.liftweb.http.provider.HTTPSession" id="446193">httpSession</a> &lt;- <a href="#446188" title="net.liftweb.http.LiftSession">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.provider.HTTPSession =&gt; Unit)Unit">httpSession</a>
    <span class="delimiter">}</span> <a href="#446193" title="net.liftweb.http.provider.HTTPSession">httpSession</a>.<a href="provider/HTTPSession.scala.html#357311" title="(name: String)Unit">removeAttribute</a><span class="delimiter">(</span><a href="#446182" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="446105">wasInitialized</a><span class="delimiter">(</span><a title="String" id="446196">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446198">bn</a> = <a href="#446196" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <span class="keyword">val</span> <a title="Boolean" id="446199">old</a>: <span title="Boolean">Boolean</span> = <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.LiftSession =&gt; net.liftweb.common.Box[Boolean])net.liftweb.common.Box[Boolean]">flatMap</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446204">s</a> =&gt; <a href="#446098" title="(session: net.liftweb.http.LiftSession, name: String)net.liftweb.common.Box[Any]">localGet</a><span class="delimiter">(</span><a href="#446204" title="net.liftweb.http.LiftSession">s</a>, <a href="#446198" title="java.lang.String">bn</a><span class="delimiter">)</span> <span title="&lt;none&gt; extends net.liftweb.common.Box[Boolean] with Serializable" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Full[Boolean]">Full</span><span class="delimiter">(</span><a title="Boolean" id="446206">b</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Boolean)net.liftweb.common.Full[Boolean]">Full</a><span class="delimiter">(</span><a href="#446206" title="Boolean">b</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
    <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446317">s</a> =&gt; <a href="#446097" title="(session: net.liftweb.http.LiftSession, name: String, value: Any)Unit">localSet</a><span class="delimiter">(</span><a href="#446317" title="net.liftweb.http.LiftSession">s</a>, <a href="#446198" title="java.lang.String">bn</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#446199" title="Boolean">old</a>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="446106">testWasSet</a><span class="delimiter">(</span><a title="String" id="446319">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446321">bn</a> = <a href="#446319" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.LiftSession =&gt; net.liftweb.common.Box[Any])net.liftweb.common.Box[Any]">flatMap</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446326">s</a> =&gt; <a href="#446098" title="(session: net.liftweb.http.LiftSession, name: String)net.liftweb.common.Box[Any]">localGet</a><span class="delimiter">(</span><a href="#446326" title="net.liftweb.http.LiftSession">s</a>, <a href="#446319" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a> <span title="(x: Boolean)Boolean">||</span>
      <span class="delimiter">(</span><a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: net.liftweb.http.LiftSession =&gt; net.liftweb.common.Box[Boolean])net.liftweb.common.Box[Boolean]">flatMap</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession" id="446331">s</a> =&gt; <a href="#446098" title="(session: net.liftweb.http.LiftSession, name: String)net.liftweb.common.Box[Any]">localGet</a><span class="delimiter">(</span><a href="#446331" title="net.liftweb.http.LiftSession">s</a>, <a href="#446321" title="java.lang.String">bn</a><span class="delimiter">)</span> <span title="&lt;none&gt; extends net.liftweb.common.Box[Boolean] with Serializable" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Full[Boolean]">Full</span><span class="delimiter">(</span><a title="Boolean" id="446333">b</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: Boolean)net.liftweb.common.Full[Boolean]">Full</a><span class="delimiter">(</span><a href="#446333" title="Boolean">b</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">_</span> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
      <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(in: net.liftweb.http.LiftSession =&gt; Unit)Unit" id="446107">registerCleanupFunc</a><span class="delimiter">(</span><a title="net.liftweb.http.LiftSession =&gt; Unit" id="446440">in</a>: LiftSession =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#446447" title="net.liftweb.http.LiftSession">_</a>.<a href="LiftSession.scala.html#230231" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">addSessionCleanup</a><span class="delimiter">(</span><a href="#446440" title="net.liftweb.http.LiftSession =&gt; Unit">in</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">type</span> <a title="net.liftweb.http.LiftSession" id="446108">CleanUpParam</a> = <a href="LiftSession.scala.html#14496" title="net.liftweb.http.LiftSession">LiftSession</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * A trait that provides *actual* serialization of a type so that
 * the type can be stored into a container's session and be migrated across
 * servers
 */</span>
<span class="keyword">trait</span> <a title="trait ContainerSerializer[T] extends java.lang.Object" id="14765">ContainerSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14766">T</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(in: T)Array[Byte]" id="446112">serialize</a><span class="delimiter">(</span><a title="T" id="446170">in</a>: <a href="#14766" title="T">T</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(in: Array[Byte])T" id="446113">deserialize</a><span class="delimiter">(</span><a title="Array[Byte]" id="446128">in</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14766" title="T">T</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object net.liftweb.http.ContainerSerializer" id="14767">ContainerSerializer</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">import</span> java.util.Date
  <span class="keyword">import</span> org.joda.time.DateTime

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T]=&gt; net.liftweb.http.ContainerSerializer[T]" id="446453">buildSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="446455">T</a><span class="delimiter">]</span>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[T]">ContainerSerializer</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#446489" title="java.lang.Object with net.liftweb.http.ContainerSerializer[T]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.liftweb.http.ContainerSerializer[T]" id="446489">ContainerSerializer</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>

      <span class="keyword">import</span> java.io._

      <span class="keyword">def</span> <a title="(in: T)Array[Byte]" id="446494">serialize</a><span class="delimiter">(</span><a title="T" id="446496">in</a>: <a href="#446455" title="T">T</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="446503">bos</a> = <span title="java.io.ByteArrayOutputStream" class="keyword">new</span> <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.ObjectOutputStream" id="446504">oos</a> = <span title="java.io.ObjectOutputStream" class="keyword">new</span> <span title="java.io.ObjectOutputStream">ObjectOutputStream</span><span class="delimiter">(</span><a href="#446503" title="java.io.ByteArrayOutputStream">bos</a><span class="delimiter">)</span>
        <a href="#446504" title="java.io.ObjectOutputStream">oos</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#446496" title="T">in</a><span class="delimiter">)</span>
        <a href="#446504" title="java.io.ObjectOutputStream">oos</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#446503" title="java.io.ByteArrayOutputStream">bos</a>.<span title="()Array[Byte]">toByteArray</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(in: Array[Byte])T" id="446495">deserialize</a><span class="delimiter">(</span><a title="Array[Byte]" id="446499">in</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#446455" title="T">T</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.ByteArrayInputStream" id="446515">bis</a> = <span title="java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#446499" title="Array[Byte]">in</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.ObjectInputStream" id="446516">ois</a> = <span title="java.io.ObjectInputStream" class="keyword">new</span> <span title="java.io.ObjectInputStream">ObjectInputStream</span><span class="delimiter">(</span><a href="#446515" title="java.io.ByteArrayInputStream">bis</a><span class="delimiter">)</span>
        <a href="#446516" title="java.io.ObjectInputStream">ois</a>.<span title="()java.lang.Object">readObject</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#446455" title="T">T</a><span class="delimiter">]</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[java.lang.Object]" id="446456">objectSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[java.lang.Object]">ContainerSerializer</a><span class="delimiter">[</span>Object<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[java.lang.Object]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Int]" id="446458">intSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Int]">ContainerSerializer</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Int]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Long]" id="446460">longSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Long]">ContainerSerializer</a><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Long]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Char]" id="446462">charSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Char]">ContainerSerializer</a><span class="delimiter">[</span>Char<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Char]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Short]" id="446464">shortSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Short]">ContainerSerializer</a><span class="delimiter">[</span>Short<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Short]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Byte]" id="446466">byteSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Byte]">ContainerSerializer</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Byte]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Float]" id="446468">floatSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Float]">ContainerSerializer</a><span class="delimiter">[</span>Float<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Float]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Double]" id="446470">doubleSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Double]">ContainerSerializer</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Double]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[Boolean]" id="446472">booleanSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Boolean]">ContainerSerializer</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Boolean]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[java.util.Date]" id="446474">dateSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[java.util.Date]">ContainerSerializer</a><span class="delimiter">[</span>Date<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[java.util.Date]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[String]" id="446476">stringSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[String]">ContainerSerializer</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[String]">buildSerializer</a>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="net.liftweb.http.ContainerSerializer[org.joda.time.DateTime]" id="446478">jodaDateSerializer</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[org.joda.time.DateTime]">ContainerSerializer</a><span class="delimiter">[</span>DateTime<span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[org.joda.time.DateTime]">buildSerializer</a>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tc: net.liftweb.http.ContainerSerializer[T])net.liftweb.http.ContainerSerializer[Array[T]]" id="446480">arraySerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="446482">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.http.ContainerSerializer[T]" id="446511">tc</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[T]">ContainerSerializer</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[Array[T]]">ContainerSerializer</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[Array[T]]">buildSerializer</a>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit tc: net.liftweb.http.ContainerSerializer[T])net.liftweb.http.ContainerSerializer[List[T]]" id="446483">listSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="446485">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="net.liftweb.http.ContainerSerializer[T]" id="446508">tc</a>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[T]">ContainerSerializer</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14765" title="net.liftweb.http.ContainerSerializer[List[T]]">ContainerSerializer</a><span class="delimiter">[</span>List<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#446453" title="net.liftweb.http.ContainerSerializer[List[T]]">buildSerializer</a>

<span class="delimiter">}</span>

<span class="comment">/**
 * Create case objects that implement this trait and use the case objects to denote
 * specific SnapshotGroups for RequestVars
 */</span>
<span class="keyword">trait</span> <a title="trait RequestVarSnapshotGroup extends java.lang.Object" id="14769">RequestVarSnapshotGroup</a>

<span class="comment">/**
 * This subclass of RequestVars that allow the specification of a RequestVarSnapshotGroup.
 * You can create a snapshot of all the members of this group in RequestVar.snapshot
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SnapshotRequestVar[T] extends net.liftweb.http.RequestVar[T] with ScalaObject" id="14770">SnapshotRequestVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14771">T</a><span class="delimiter">]</span><a href="#14770" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="net.liftweb.http.RequestVarSnapshotGroup" id="446545">group</a>: <a href="#14769" title="net.liftweb.http.RequestVarSnapshotGroup">RequestVarSnapshotGroup</a>, <a title="=&gt; T" id="446546">d</a>: =&gt; T<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14774" title="net.liftweb.http.RequestVar[T]">RequestVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#446546" title="=&gt; T">d</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * The Snapshot group this requestvar is part of
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.http.RequestVarSnapshotGroup]" id="446541">snapshotGroup</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.RequestVarSnapshotGroup]">Box</a><span class="delimiter">[</span>RequestVarSnapshotGroup<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.RequestVarSnapshotGroup)net.liftweb.common.Full[net.liftweb.http.RequestVarSnapshotGroup]">Full</a><span class="delimiter">(</span><a href="#446545" title="=&gt; net.liftweb.http.RequestVarSnapshotGroup">group</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * The companion object to RequestVars
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.http.RequestVar" id="14772">RequestVar</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/**
   * Given a RequestVarSnapshotGroup, generate a function that will snapshot all the RequestVars in
   * that group.  When the function is run, the RequestVars will be set to the value they held
   * when they were snapshotted
   */</span>
  <span class="keyword">def</span> <a title="(group: net.liftweb.http.RequestVarSnapshotGroup)() =&gt; Unit" id="228421">snapshot</a><span class="delimiter">(</span><a title="net.liftweb.http.RequestVarSnapshotGroup" id="446556">group</a>: <a href="#14769" title="net.liftweb.http.RequestVarSnapshotGroup">RequestVarSnapshotGroup</a><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">{</span>
    <span class="comment">// capture the restore functions</span>
    <span class="keyword">val</span> <a title="List[() =&gt; Unit]" id="446558">funcs</a> = <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398178" title="(grp: net.liftweb.http.RequestVarSnapshotGroup)List[net.liftweb.http.RequestVarHandler.MyType]">instancesOfGroup</a><span class="delimiter">(</span><a href="#446556" title="net.liftweb.http.RequestVarSnapshotGroup">group</a><span class="delimiter">)</span>.<span title="(f: net.liftweb.http.RequestVarHandler.MyType =&gt; () =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.http.RequestVarHandler.MyType],() =&gt; Unit,List[() =&gt; Unit]])List[() =&gt; Unit]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,() =&gt; Unit,List[() =&gt; Unit]]" class="delimiter">(</span><a href="#446586" title="net.liftweb.http.RequestVarHandler.MyType">_</a>.<a href="#171736" title="()() =&gt; Unit">snapshot</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// return a function that applies all the restore functions</span>
    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#446558" title="List[() =&gt; Unit]">funcs</a>.<span title="(f: () =&gt; Unit =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#446651" title="() =&gt; Unit">_</a>.<span title="()Unit">apply</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A typesafe container for data with a lifetime nominally equivalent to the
 * lifetime of a page rendered by an HTTP request.
 * RequestVars maintain their value throughout the duration of the current HTTP
 * request and any callbacks for servicing AJAX calls associated with the rendered page.
 * RequestVar instances have no value at the beginning of request servicing (excluding
 * AJAX callbacks) and their value is discarded at the end of request processing.
 * They are commonly used to share values across many snippets. Basic usage:
 *
 * &lt;code&gt;
 * object MySnippetCompanion {
 *   object myRequestVar extends RequestVar[String](&quot;hello&quot;)
 * }
 * &lt;/code&gt;
 *
 * The standard pattern is to create a singleton object extending RequestVar instead
 * of creating an instance variable of a concrete RequestVar subclass. This is preferred
 * because RequestVar will use the name of its instantiating class for part of its state
 * maintenance mechanism.
 *
 * If you find it necessary to create a RequestVar subclass of which there may be more
 * than one instance, it is necessary to override the __nameSalt() method to return
 * a unique salt value for each instance to prevent name collisions.
 *
 * @param dflt - the default value to be returned if none was set prior to
 * requesting a value to be returned from the container
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class RequestVar[T] extends net.liftweb.util.AnyVar[T,net.liftweb.http.RequestVar[T]] with net.liftweb.http.HasLogUnreadVal with ScalaObject" id="14774">RequestVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14775">T</a><span class="delimiter">]</span><a href="#14774" title="ScalaObject" class="delimiter">(</a><a title="=&gt; T" id="172924">dflt</a>: =&gt; T<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13063" title="net.liftweb.util.AnyVar[T,net.liftweb.http.RequestVar[T]]">AnyVar</a><span class="delimiter">[</span>T, RequestVar<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#172924" title="=&gt; T">dflt</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#14762" title="net.liftweb.http.HasLogUnreadVal">HasLogUnreadVal</a> <span class="delimiter">{</span>
  <span class="keyword">type</span> <a title="net.liftweb.common.Box[net.liftweb.http.LiftSession]" id="171734">CleanUpParam</a> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.LiftSession]">Box</a><span class="delimiter">[</span>LiftSession<span class="delimiter">]</span>

  <span class="comment">/**
   * Is this RequestVar a member of a snapshot group?  If so, specify the group here
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.http.RequestVarSnapshotGroup]" id="171735">snapshotGroup</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.RequestVarSnapshotGroup]">Box</a><span class="delimiter">[</span>RequestVarSnapshotGroup<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="comment">/**
   * Return a function that, when applied, will set the value of the RequestVar to its
   * current value
   */</span>
  <span class="keyword">def</span> <a title="()() =&gt; Unit" id="171736">snapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">{</span>
    <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75379" title="=&gt; Boolean">set_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="T" id="446656">v</a> = <a href="#14774" title="RequestVar.this.type" class="keyword">this</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75377" title="=&gt; T">get</a>
      <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#14774" title="RequestVar.this.type" class="keyword">this</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: T)T">set</a><span title="Unit" class="delimiter">(</span><a href="#446656" title="T">v</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#14774" title="RequestVar.this.type" class="keyword">this</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75383" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)net.liftweb.common.Box[T]" id="171737">findFunc</a><span class="delimiter">(</span><a title="String" id="446661">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446661" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String, value: T)Unit" id="171738">setFunc</a><span class="delimiter">(</span><a title="String" id="446666">name</a>: <span title="String">String</span>, <a title="T" id="446667">value</a>: <a href="#14775" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398168" title="(name: String, from: net.liftweb.http.RequestVarHandler.MyType, value: T)Unit">set</a><span class="delimiter">(</span><a href="#446666" title="String">name</a>, <a href="#14774" title="net.liftweb.http.RequestVar[T]" class="keyword">this</a>, <a href="#446667" title="T">value</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Unit" id="171739">clearFunc</a><span class="delimiter">(</span><a title="String" id="446691">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398171" title="(name: String)Unit">clear</a><span class="delimiter">(</span><a href="#446691" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="171740">wasInitialized</a><span class="delimiter">(</span><a title="String" id="446695">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446697">bn</a> = <a href="#446695" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <span class="keyword">val</span> <a title="Boolean" id="446698">old</a>: <span title="Boolean">Boolean</span> = <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446697" title="java.lang.String">bn</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
    <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398168" title="(name: String, from: net.liftweb.http.RequestVarHandler.MyType, value: Boolean)Unit">set</a><span class="delimiter">(</span><a href="#446697" title="java.lang.String">bn</a>, <a href="#14774" title="net.liftweb.http.RequestVar[T]" class="keyword">this</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <a href="#446698" title="Boolean">old</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Different Vars require different mechanisms for synchronization.  This method implements
   * the Var specific synchronization mechanism
   */</span>
  <span class="keyword">def</span> <a title="[F](f: =&gt; F)F" id="171741">doSync</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="171743">F</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; F" id="446715">f</a>: =&gt; F<span class="delimiter">)</span>: <a href="#171743" title="F">F</a> = <a href="#446715" title="=&gt; F">f</a>

  <span class="comment">// no sync necessary for RequestVars... always on the same thread</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="171744">testWasSet</a><span class="delimiter">(</span><a title="String" id="446720">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446722">bn</a> = <a href="#446720" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446720" title="String">name</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446722" title="java.lang.String">bn</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Generate a function that will take a snapshot of the current RequestVars
   * such that they can be restored
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T]()() =&gt; T =&gt; T" id="171745">generateSnapshotRestorer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="171747">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="() =&gt; T =&gt; T">Function1</span><span class="delimiter">[</span>Function0<span class="delimiter">[</span>T<span class="delimiter">]</span>, T<span class="delimiter">]</span> = <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398161" title="()() =&gt; T =&gt; T">generateSnapshotRestorer</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(in: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit)Unit" id="171748">registerCleanupFunc</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit" id="348684">in</a>: Box<span class="delimiter">[</span>LiftSession<span class="delimiter">]</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#14779" title="object net.liftweb.http.RequestVarHandler">RequestVarHandler</a>.<a href="#398172" title="(f: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit)Unit">addCleanupFunc</a><span class="delimiter">(</span><a href="#348684" title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit">in</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This defines whether or not Lift will log when a RequestVar is set but then not read within
   * the same request cycle. Change this to false to turn off logging. Logging can also be turned
   * off globally via LiftRules.logUnreadRequestVars.
   *
   * @see LiftRules#logUnreadRequestVars
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="171749">logUnreadVal</a> = <span title="Boolean(true)" class="keyword">true</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A typesafe container for data with a lifetime strictly equal to the processing of a single
 * HTTP request. Unlike ordinary RequestVar instances, TransientRequestVars will not maintain
 * data for servicing of AJAX callbacks from a rendered page. This is useful in cases where
 * the value stored within the RequestVar cannot safely be used across multiple requests; an
 * example of such a value is a JTA UserTransaction which has a lifecycle strictly coupled
 * to the actul HTTP request handling by the enclosing container.
 *
 * @param dflt - the default value to be returned if none was set prior to
 * requesting a value to be returned from the container
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TransientRequestVar[T] extends net.liftweb.util.AnyVar[T,net.liftweb.http.TransientRequestVar[T]] with net.liftweb.http.HasLogUnreadVal with ScalaObject" id="14776">TransientRequestVar</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14777">T</a><span class="delimiter">]</span><a href="#14776" title="ScalaObject" class="delimiter">(</a><a title="=&gt; T" id="75419">dflt</a>: =&gt; T<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13063" title="net.liftweb.util.AnyVar[T,net.liftweb.http.TransientRequestVar[T]]">AnyVar</a><span class="delimiter">[</span>T, TransientRequestVar<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#75419" title="=&gt; T">dflt</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#14762" title="net.liftweb.http.HasLogUnreadVal">HasLogUnreadVal</a> <span class="delimiter">{</span>
  <span class="keyword">type</span> <a title="net.liftweb.common.Box[net.liftweb.http.LiftSession]" id="75403">CleanUpParam</a> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.LiftSession]">Box</a><span class="delimiter">[</span>LiftSession<span class="delimiter">]</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)net.liftweb.common.Box[T]" id="75404">findFunc</a><span class="delimiter">(</span><a title="String" id="389904">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#389904" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String, value: T)Unit" id="75405">setFunc</a><span class="delimiter">(</span><a title="String" id="389897">name</a>: <span title="String">String</span>, <a title="T" id="389898">value</a>: <a href="#14777" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398168" title="(name: String, from: net.liftweb.http.TransientRequestVarHandler.MyType, value: T)Unit">set</a><span class="delimiter">(</span><a href="#389897" title="String">name</a>, <a href="#14776" title="net.liftweb.http.TransientRequestVar[T]" class="keyword">this</a>, <a href="#389898" title="T">value</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Unit" id="75406">clearFunc</a><span class="delimiter">(</span><a title="String" id="389893">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398171" title="(name: String)Unit">clear</a><span class="delimiter">(</span><a href="#389893" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="75407">wasInitialized</a><span class="delimiter">(</span><a title="String" id="389891">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446753">bn</a> = <a href="#389891" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <span class="keyword">val</span> <a title="Boolean" id="446754">old</a>: <span title="Boolean">Boolean</span> = <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446753" title="java.lang.String">bn</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>
    <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398168" title="(name: String, from: net.liftweb.http.TransientRequestVarHandler.MyType, value: Boolean)Unit">set</a><span class="delimiter">(</span><a href="#446753" title="java.lang.String">bn</a>, <a href="#14776" title="net.liftweb.http.TransientRequestVar[T]" class="keyword">this</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <a href="#446754" title="Boolean">old</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="75408">testWasSet</a><span class="delimiter">(</span><a title="String" id="389889">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="446769">bn</a> = <a href="#389889" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a>
    <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#389889" title="String">name</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398165" title="(name: String)net.liftweb.common.Box[Nothing]">get</a><span class="delimiter">(</span><a href="#446769" title="java.lang.String">bn</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Different Vars require different mechanisms for synchronization.  This method implements
   * the Var specific synchronization mechanism
   */</span>
  <span class="keyword">def</span> <a title="[F](f: =&gt; F)F" id="75409">doSync</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="75411">F</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; F" id="389883">f</a>: =&gt; F<span class="delimiter">)</span>: <a href="#75411" title="F">F</a> = <a href="#389883" title="=&gt; F">f</a>

  <span class="comment">// no sync necessary for RequestVars... always on the same thread</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(in: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit)Unit" id="75412">registerCleanupFunc</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit" id="389880">in</a>: Box<span class="delimiter">[</span>LiftSession<span class="delimiter">]</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#14781" title="object net.liftweb.http.TransientRequestVarHandler">TransientRequestVarHandler</a>.<a href="#398172" title="(f: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit)Unit">addCleanupFunc</a><span class="delimiter">(</span><a href="#389880" title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit">in</a><span class="delimiter">)</span>

  <span class="comment">/**
   * This defines whether or not Lift will log when a RequestVar is set but then not read within
   * the same request cycle. Change this to false to turn off logging. Logging can also be turned
   * off globally via LiftRules.logUnreadRequestVars.
   *
   * @see LiftRules#logUnreadRequestVars
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="75413">logUnreadVal</a> = <span title="Boolean(false)" class="keyword">false</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait CleanRequestVarOnSessionTransition extends java.lang.Object" id="14778">CleanRequestVarOnSessionTransition</a> <span title="java.lang.Object" class="delimiter">{</span>
  self: RequestVar<span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object net.liftweb.http.RequestVarHandler" id="14779">RequestVarHandler</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14783" title="net.liftweb.http.CoreRequestVarHandler">CoreRequestVarHandler</a> <span class="delimiter">{</span>
  <span class="keyword">type</span> <a title="net.liftweb.http.RequestVar[_]" id="398177">MyType</a> = <a href="#14774" title="net.liftweb.http.RequestVar[_]">RequestVar</a><span class="delimiter">[</span>_<span class="delimiter">]</span>


  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(grp: net.liftweb.http.RequestVarSnapshotGroup)List[net.liftweb.http.RequestVarHandler.MyType]" id="398178">instancesOfGroup</a><span class="delimiter">(</span><a title="net.liftweb.http.RequestVarSnapshotGroup" id="446559">grp</a>: <a href="#14769" title="net.liftweb.http.RequestVarSnapshotGroup">RequestVarSnapshotGroup</a><span class="delimiter">)</span>: <span title="List[net.liftweb.http.RequestVarHandler.MyType]">List</span><span class="delimiter">[</span>MyType<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="net.liftweb.common.Full[net.liftweb.http.RequestVarSnapshotGroup]" id="446778">cmp</a> = <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.http.RequestVarSnapshotGroup)net.liftweb.common.Full[net.liftweb.http.RequestVarSnapshotGroup]">Full</a><span class="delimiter">(</span><a href="#446559" title="net.liftweb.http.RequestVarSnapshotGroup">grp</a><span class="delimiter">)</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="scala.collection.mutable.HashMap[String,(net.liftweb.http.RequestVarHandler.MyType, Any, Boolean)]" id="446818">bs</a> &lt;- <a href="#398164" title="=&gt; net.liftweb.common.Box[scala.collection.mutable.HashMap[String,(net.liftweb.http.RequestVarHandler.MyType, Any, Boolean)]]">backingStore</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27051" title="(f: scala.collection.mutable.HashMap[String,(net.liftweb.http.RequestVarHandler.MyType, Any, Boolean)] =&gt; scala.collection.GenTraversableOnce[net.liftweb.http.RequestVar[_]])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.collection.mutable.HashMap[String,(net.liftweb.http.RequestVarHandler.MyType, Any, Boolean)]],net.liftweb.http.RequestVar[_],List[net.liftweb.http.RequestVarHandler.MyType]])List[net.liftweb.http.RequestVarHandler.MyType]">toList</a>
      <span class="delimiter">(</span><a title="net.liftweb.http.RequestVar[_]" id="446874">rv</a>, _, _<span class="delimiter">)</span> &lt;- <a href="#446818" title="scala.collection.mutable.HashMap[String,(net.liftweb.http.RequestVarHandler.MyType, Any, Boolean)]">bs</a>.<a href="#446828" title="(f: (net.liftweb.http.RequestVarHandler.MyType, Any, Boolean) =&gt; net.liftweb.http.RequestVar[_])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[(net.liftweb.http.RequestVarHandler.MyType, Any, Boolean)],net.liftweb.http.RequestVar[_],Iterable[net.liftweb.http.RequestVar[_]]])Iterable[net.liftweb.http.RequestVar[_]]">values</a> <span class="keyword">if</span> <a href="#446874" title="net.liftweb.http.RequestVar[_]">rv</a>.<a href="#171735" title="=&gt; net.liftweb.common.Box[net.liftweb.http.RequestVarSnapshotGroup]">snapshotGroup</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#446778" title="net.liftweb.common.Full[net.liftweb.http.RequestVarSnapshotGroup]">cmp</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#446874" title="net.liftweb.http.RequestVar[_]">rv</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object net.liftweb.http.TransientRequestVarHandler" id="14781">TransientRequestVarHandler</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14783" title="net.liftweb.http.CoreRequestVarHandler">CoreRequestVarHandler</a> <span class="delimiter">{</span>
  <span class="keyword">type</span> <a title="net.liftweb.http.TransientRequestVar[_]" id="417886">MyType</a> = <a href="#14776" title="net.liftweb.http.TransientRequestVar[_]">TransientRequestVar</a><span class="delimiter">[</span>_<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait CoreRequestVarHandler extends java.lang.Object with ScalaObject" id="14783">CoreRequestVarHandler</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: net.liftweb.http.HasLogUnreadVal" id="398150">MyType</a> &lt;: HasLogUnreadVal

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.liftweb.common.Logger" id="398151">logger</a> = <a href="../../../../common/net/liftweb/common/Logging.scala.html#31889" title="(cls: Class[_])net.liftweb.common.Logger">Logger</a><span class="delimiter">(</span>classOf<span title="java.lang.Class[net.liftweb.http.CoreRequestVarHandler](classOf[net.liftweb.http.CoreRequestVarHandler])" class="delimiter">[</span>CoreRequestVarHandler<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="comment">// This maps from the RV name to (RV instance, value, set-but-not-read flag)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]" id="398153">vals</a>: <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">ThreadGlobal</a><span class="delimiter">[</span>HashMap<span class="delimiter">[</span>String, <span class="delimiter">(</span>MyType, Any, Boolean<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span> = <span title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]" class="keyword">new</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">ThreadGlobal</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]" id="398155">cleanup</a>: <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">ThreadGlobal</a><span class="delimiter">[</span>ListBuffer<span class="delimiter">[</span>Box<span class="delimiter">[</span>LiftSession<span class="delimiter">]</span> =&gt; Unit<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]" class="keyword">new</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">ThreadGlobal</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.liftweb.util.ThreadGlobal[String]" id="398157">isIn</a>: <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[String]">ThreadGlobal</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="net.liftweb.util.ThreadGlobal[String]" class="keyword">new</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[String]">ThreadGlobal</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]" id="398159">sessionThing</a>: <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">ThreadGlobal</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>LiftSession<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]" class="keyword">new</span> <a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#13699" title="net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">ThreadGlobal</a>

  <span class="comment">/**
   * Generate a function that will take a snapshot of the current RequestVars
   * such that they can be restored
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T]()() =&gt; T =&gt; T" id="398161">generateSnapshotRestorer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="398163">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="() =&gt; T =&gt; T">Function1</span><span class="delimiter">[</span>Function0<span class="delimiter">[</span>T<span class="delimiter">]</span>, T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]" id="446992">myVals</a> = <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">value</a>
    <span class="keyword">val</span> <a title="net.liftweb.common.Box[net.liftweb.http.LiftSession]" id="446993">mySessionThing</a> = <a href="#398159" title="=&gt; net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">sessionThing</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">value</a>

    <a title="() =&gt; T" id="446995">f</a> =&gt; <a href="#398157" title="=&gt; net.liftweb.util.ThreadGlobal[String]">isIn</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: String)(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><span title="java.lang.String(&quot;in&quot;)" class="string">&quot;in&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span>
      <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)])(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><a href="#446992" title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">myVals</a><span class="delimiter">)</span><span class="delimiter">(</span>
        <a href="#398155" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">cleanup</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit])(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><span title="scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">ListBuffer</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#398159" title="=&gt; net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">sessionThing</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: net.liftweb.common.Box[net.liftweb.http.LiftSession])(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><a href="#446993" title="net.liftweb.common.Box[net.liftweb.http.LiftSession]">mySessionThing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="T" id="447017">ret</a>: <a href="#398163" title="T">T</a> = <a href="#446995" title="()T">f</a><span class="delimiter">(</span><span class="delimiter">)</span>

            <a href="#398155" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">cleanup</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">value</a>.<span title="=&gt; List[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">toList</span>.<span title="(f: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit =&gt; net.liftweb.common.Box[Unit])Unit">foreach</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit" id="447048">clean</a> =&gt; <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/ControlHelpers.scala.html#48608" title="(f: =&gt; Unit)net.liftweb.common.Box[Unit]">tryo</a><span class="delimiter">(</span><a href="#447048" title="(v1: net.liftweb.common.Box[net.liftweb.http.LiftSession])Unit">clean</a><span class="delimiter">(</span><a href="#398159" title="=&gt; net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">sessionThing</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="#447017" title="T">ret</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]" id="398164">backingStore</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">Box</a><span class="delimiter">[</span>HashMap<span class="delimiter">[</span>String, <span class="delimiter">(</span>MyType, Any, Boolean<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">value</a> <span title="net.liftweb.common.Box[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="net.liftweb.common.Box[Nothing]" class="keyword">null</span> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159066" title="=&gt; Boolean">throwOnOutOfScopeVarAccess</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalAccessException" class="keyword">new</span> <span title="java.lang.IllegalAccessException">IllegalAccessException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Access to Var outside a request or comet actor scope&quot;)" class="string">&quot;Access to Var outside a request or comet actor scope&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="../../../../common/net/liftweb/common/Box.scala.html#28627" title="(in: Option[Nothing])net.liftweb.common.Box[Nothing]">None</a>
      <span class="keyword">case</span> <a title="net.liftweb.common.Full[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]" id="447107">x</a> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)])net.liftweb.common.Full[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">Full</a><span class="delimiter">(</span><a href="#447107" title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">x</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](name: String)net.liftweb.common.Box[T]" id="398165">get</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="398167">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="446663">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[T]">Box</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]" id="447115">ht</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)] =&gt; net.liftweb.common.Box[T])net.liftweb.common.Box[T]">backingStore</a>
      <span class="delimiter">(</span><a title="CoreRequestVarHandler.this.MyType" id="447136">rvInstance</a>, <a title="Any" id="447137">value</a>, <a title="Boolean" id="447138">unread</a><span class="delimiter">)</span> &lt;- <a href="#447115" title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">ht</a>.<span title="(key: String)Option[(CoreRequestVarHandler.this.MyType, Any, Boolean)]">get</span><a href="#447121" title="(f: (CoreRequestVarHandler.this.MyType, Any, Boolean) =&gt; T)Option[T]" class="delimiter">(</a><a href="#446663" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#447138" title="Boolean">unread</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// Flag the variable as no longer being set-but-unread</span>
        <a href="#447115" title="(key: String, value: (CoreRequestVarHandler.this.MyType, Any, Boolean))Unit">ht</a><span class="delimiter">(</span><a href="#446663" title="String">name</a><span class="delimiter">)</span> = <span title="(_1: CoreRequestVarHandler.this.MyType, _2: T, _3: Boolean)(CoreRequestVarHandler.this.MyType, T, Boolean)" class="delimiter">(</span><a href="#447136" title="CoreRequestVarHandler.this.MyType">rvInstance</a>: <a href="#398150" title="CoreRequestVarHandler.this.MyType">MyType</a>, <a href="#447137" title="Any">value</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#398167" title="T">T</a><span class="delimiter">]</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#447137" title="Any">value</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#398167" title="T">T</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](name: String, from: CoreRequestVarHandler.this.MyType, value: T)Unit" id="398168">set</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="398170">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="446671">name</a>: <span title="String">String</span>, <a title="CoreRequestVarHandler.this.MyType" id="446672">from</a>: <a href="#398150" title="CoreRequestVarHandler.this.MyType">MyType</a>, <a title="T" id="446673">value</a>: <a href="#398170" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]" id="447163">ht</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)] =&gt; Unit)Unit">backingStore</a><span class="delimiter">)</span>
      <a href="#447163" title="(key: String, value: (CoreRequestVarHandler.this.MyType, Any, Boolean))Unit">ht</a><span class="delimiter">(</span><a href="#446671" title="String">name</a><span class="delimiter">)</span> = <span title="(_1: CoreRequestVarHandler.this.MyType, _2: T, _3: Boolean)(CoreRequestVarHandler.this.MyType, T, Boolean)" class="delimiter">(</span><a href="#446672" title="CoreRequestVarHandler.this.MyType">from</a>, <a href="#446673" title="T">value</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(name: String)Unit" id="398171">clear</a><span class="delimiter">(</span><a title="String" id="446693">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]" id="447181">ht</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)] =&gt; scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)])Unit">backingStore</a><span class="delimiter">)</span>
      <a href="#447181" title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">ht</a> <span title="(key: String)ht.type">-=</span> <a href="#446693" title="String">name</a>

  <span class="keyword">private</span><span class="delimiter">[</span>http<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(f: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit)Unit" id="398172">addCleanupFunc</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit" id="446729">f</a>: Box<span class="delimiter">[</span>LiftSession<span class="delimiter">]</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]" id="447201">cu</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#10572" title="object net.liftweb.common.Box">Box</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#28633" title="(in: scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit])net.liftweb.common.Box[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">legacyNullTest</a><a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit] =&gt; scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit])Unit" class="delimiter">(</a><a href="#398155" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">cleanup</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#447201" title="scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">cu</a> <span title="(x: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit)cu.type">+=</span> <a href="#446729" title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit">f</a>

  <span class="keyword">def</span> <a title="[T](session: net.liftweb.common.Box[net.liftweb.http.LiftSession], f: =&gt; T)T" id="398173">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="398175">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.http.LiftSession]" id="417887">session</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.http.LiftSession]">Box</a><span class="delimiter">[</span>LiftSession<span class="delimiter">]</span>, <a title="=&gt; T" id="417888">f</a>: =&gt; T<span class="delimiter">)</span>: <a href="#398175" title="T">T</a> = <span class="delimiter">{</span>
    <span title="T" class="keyword">if</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;in&quot;)" class="string">&quot;in&quot;</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#398157" title="=&gt; net.liftweb.util.ThreadGlobal[String]">isIn</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; String">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]" id="447220">tv</a> = <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">value</a>

      <span class="comment">// remove all the session variables that are CleanRequestVarOnSessionTransition</span>
      <span class="keyword">val</span> <a title="Iterable[String]" id="447221">toRemove</a>: <span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#447220" title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">tv</a>.<span title="(f: (String, (CoreRequestVarHandler.this.MyType, Any, Boolean)) =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)],String,Iterable[String]])Iterable[String]">flatMap</span> <a href="#447238" title="List[String]" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="List[String]" class="delimiter">(</span><a title="String" id="447241">name</a>, <span class="delimiter">(</span><a title="&lt;none&gt; extends net.liftweb.http.HasLogUnreadVal with net.liftweb.http.CleanRequestVarOnSessionTransition" id="447245">it</a>: <a href="#14778" title="net.liftweb.http.CleanRequestVarOnSessionTransition">CleanRequestVarOnSessionTransition</a>, _, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="#447241" title="String">name</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
      <span class="delimiter">}</span>

      <a href="#447221" title="Iterable[String]">toRemove</a>.<span title="(f: String =&gt; scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)])Unit">foreach</span><span class="delimiter">(</span><a title="String" id="447307">n</a> =&gt; <a href="#447220" title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">tv</a> <span title="(key: String)tv.type">-=</span> <a href="#447307" title="String">n</a><span class="delimiter">)</span>


      <a href="#398159" title="=&gt; net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">sessionThing</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51272" title="(v: net.liftweb.common.Box[net.liftweb.http.LiftSession])net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">set</a><span class="delimiter">(</span><a href="#417887" title="net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a><span class="delimiter">)</span>
      <a href="#417888" title="=&gt; T">f</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#398157" title="=&gt; net.liftweb.util.ThreadGlobal[String]">isIn</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: String)(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><span title="java.lang.String(&quot;in&quot;)" class="string">&quot;in&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span>
        <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)])(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><span title="()scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">HashMap</span><span class="delimiter">)</span><span class="delimiter">(</span>
          <a href="#398155" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">cleanup</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit])(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><span title="scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">ListBuffer</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#398159" title="=&gt; net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">sessionThing</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51274" title="(x: net.liftweb.common.Box[net.liftweb.http.LiftSession])(f: =&gt; T)T">doWith</a><span class="delimiter">(</span><a href="#417887" title="net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="T" id="447342">ret</a>: <a href="#398175" title="T">T</a> = <a href="#417888" title="=&gt; T">f</a>

              <a href="#398155" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]]">cleanup</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.ListBuffer[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">value</a>.<span title="=&gt; List[net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit]">toList</span>.<span title="(f: net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit =&gt; net.liftweb.common.Box[Unit])Unit">foreach</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.http.LiftSession] =&gt; Unit" id="447365">clean</a> =&gt; <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/ControlHelpers.scala.html#48608" title="(f: =&gt; Unit)net.liftweb.common.Box[Unit]">tryo</a><span class="delimiter">(</span><a href="#447365" title="(v1: net.liftweb.common.Box[net.liftweb.http.LiftSession])Unit">clean</a><span class="delimiter">(</span><a href="#398159" title="=&gt; net.liftweb.util.ThreadGlobal[net.liftweb.common.Box[net.liftweb.http.LiftSession]]">sessionThing</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Props.scala.html#13579" title="object net.liftweb.util.Props">Props</a>.<a href="../../../../util/net/liftweb/util/Props.scala.html#151319" title="=&gt; Boolean">devMode</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="LiftRules.scala.html#158817" title="implicit net.liftweb.http.LiftRulesMocker.toLiftRules : (in: net.liftweb.http.LiftRulesMocker)net.liftweb.http.LiftRules">LiftRules</a>.<a href="LiftRules.scala.html#159250" title="=&gt; Boolean">logUnreadRequestVars</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="=&gt; scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]">value</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="(p: String =&gt; Boolean)Iterable[String]">filter</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#447416" title="String">_</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269297" title="=&gt; java.lang.String">varPrefix</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;net.liftweb&quot;)" class="string">&quot;net.liftweb&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  .<span title="(p: String =&gt; Boolean)Iterable[String]">filter</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#447424" title="String">_</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269299" title="=&gt; java.lang.String">initedSuffix</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  .<span title="(f: String =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="String" id="447449">key</a> =&gt; <a href="#398153" title="=&gt; net.liftweb.util.ThreadGlobal[scala.collection.mutable.HashMap[String,(CoreRequestVarHandler.this.MyType, Any, Boolean)]]">vals</a>.<a href="../../../../util/net/liftweb/util/ThreadGlobal.scala.html#51270" title="(key: String)(CoreRequestVarHandler.this.MyType, Any, Boolean)">value</a><span class="delimiter">(</span><a href="#447449" title="String">key</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="CoreRequestVarHandler.this.MyType" id="447474">rv</a>, _, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#447474" title="CoreRequestVarHandler.this.MyType">rv</a>.<a href="#75418" title="=&gt; Boolean">logUnreadVal</a> =&gt; <a href="#398151" title="=&gt; net.liftweb.common.Logger">logger</a>.<a href="../../../../common/net/liftweb/common/Logging.scala.html#31954" title="(msg: =&gt; AnyRef)Unit">warn</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;RequestVar %s was set but not read&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#447449" title="String">key</a>.<span title="(x$1: java.lang.CharSequence, x$2: java.lang.CharSequence)java.lang.String">replace</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13056" title="object net.liftweb.util.VarConstants">VarConstants</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#269297" title="=&gt; java.lang.String">varPrefix</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
                <span class="delimiter">}</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>

              <a href="#447342" title="T">ret</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="keyword">object</span> <a title="object net.liftweb.http.AnyVar" id="14784">AnyVar</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](in: net.liftweb.http.SessionVar[T])T" id="447494">whatSessionVarIs</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="447496">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.http.SessionVar[T]" id="447504">in</a>: <a href="#14760" title="net.liftweb.http.SessionVar[T]">SessionVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#447496" title="T">T</a> = <a href="#447504" title="net.liftweb.http.SessionVar[T]">in</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; T">is</a>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](in: net.liftweb.http.RequestVar[T])T" id="447497">whatRequestVarIs</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="447499">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.http.RequestVar[T]" id="447507">in</a>: <a href="#14774" title="net.liftweb.http.RequestVar[T]">RequestVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#447499" title="T">T</a> = <a href="#447507" title="net.liftweb.http.RequestVar[T]">in</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; T">is</a>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](in: net.liftweb.http.TransientRequestVar[T])T" id="447500">whatTransientRequestVarIs</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="447502">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.http.TransientRequestVar[T]" id="447510">in</a>: <a href="#14776" title="net.liftweb.http.TransientRequestVar[T]">TransientRequestVar</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#447502" title="T">T</a> = <a href="#447510" title="net.liftweb.http.TransientRequestVar[T]">in</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; T">is</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Memoize a value for the duration of the user's session
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SessionMemoize[K, V] extends java.lang.Object with net.liftweb.util.MemoizeVar[K,V] with ScalaObject" id="14786">SessionMemoize</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14787">K</a>, <a title="&gt;: Nothing &lt;: Any" id="14788">V</a><span class="delimiter">]</span> <a href="#14786" title="ScalaObject" class="keyword">extends</a> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13060" title="net.liftweb.util.MemoizeVar[K,V]">MemoizeVar</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object SessionMemoize.this.coreVar" id="447514">coreVar</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14760" title="net.liftweb.http.SessionVar[net.liftweb.util.LRU[K,net.liftweb.common.Box[V]]]">SessionVar</a><span class="delimiter">[</span>LRU<span class="delimiter">[</span>K, Box<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#185017" title="=&gt; net.liftweb.util.LRU[K,net.liftweb.common.Box[V]]">buildLRU</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="447518">__nameSalt</a> = <a href="#14786" title="SessionMemoize.this.type">SessionMemoize</a>.<span class="keyword">this</span>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#185025" title="=&gt; String">__nameSalt</a>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Memoize a value for the duration of the current request (and subsequent Ajax requests made as a result of viewing the page)
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class RequestMemoize[K, V] extends java.lang.Object with net.liftweb.util.MemoizeVar[K,V] with ScalaObject" id="14789">RequestMemoize</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14790">K</a>, <a title="&gt;: Nothing &lt;: Any" id="14791">V</a><span class="delimiter">]</span> <a href="#14789" title="ScalaObject" class="keyword">extends</a> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13060" title="net.liftweb.util.MemoizeVar[K,V]">MemoizeVar</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object RequestMemoize.this.coreVar" id="185029">coreVar</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14774" title="net.liftweb.http.RequestVar[net.liftweb.util.LRU[K,net.liftweb.common.Box[V]]]">RequestVar</a><span class="delimiter">[</span>LRU<span class="delimiter">[</span>K, Box<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#185017" title="=&gt; net.liftweb.util.LRU[K,net.liftweb.common.Box[V]]">buildLRU</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="447526">__nameSalt</a> = <a href="#14789" title="RequestMemoize.this.type">RequestMemoize</a>.<span class="keyword">this</span>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#185025" title="=&gt; String">__nameSalt</a>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Memoize a value for the duration of the current HTTP request
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TransientRequestMemoize[K, V] extends java.lang.Object with net.liftweb.util.MemoizeVar[K,V] with ScalaObject" id="14792">TransientRequestMemoize</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14793">K</a>, <a title="&gt;: Nothing &lt;: Any" id="14794">V</a><span class="delimiter">]</span> <a href="#14792" title="ScalaObject" class="keyword">extends</a> <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#13060" title="net.liftweb.util.MemoizeVar[K,V]">MemoizeVar</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object TransientRequestMemoize.this.coreVar" id="447533">coreVar</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14776" title="net.liftweb.http.TransientRequestVar[net.liftweb.util.LRU[K,net.liftweb.common.Box[V]]]">TransientRequestVar</a><span class="delimiter">[</span>LRU<span class="delimiter">[</span>K, Box<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#185017" title="=&gt; net.liftweb.util.LRU[K,net.liftweb.common.Box[V]]">buildLRU</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="447537">__nameSalt</a> = <a href="#14792" title="TransientRequestMemoize.this.type">TransientRequestMemoize</a>.<span class="keyword">this</span>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#185025" title="=&gt; String">__nameSalt</a>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>