<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>common/net/liftweb/common/CombinableBox.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2010-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb 
<span class="keyword">package</span> common

<span class="comment">/**
 * &lt;p&gt;
 * Via an HList containing a Collection of Box[things], either generate an
 * HList of the things or a List[Failure]
 * &lt;/p&gt;
 *
 *
 */</span>
<span class="keyword">object</span> <a title="object net.liftweb.common.CombinableBox" id="10608">CombinableBox</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> <a href="HList.scala.html#10685" title="object net.liftweb.common.HLists">HLists</a>._

  <span class="keyword">type</span> <a title="[A]Either[List[net.liftweb.common.Failure],A]" id="39247">Result</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39248">A</a><span class="delimiter">]</span> = <span title="Either[List[net.liftweb.common.Failure],A]">Either</span><span class="delimiter">[</span>List<span class="delimiter">[</span>Failure<span class="delimiter">]</span>, A<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.common.CombinableBox.emptyBoxToFailure : (eb: net.liftweb.common.EmptyBox)net.liftweb.common.Failure" id="39249">emptyBoxToFailure</a><span class="delimiter">(</span><a title="net.liftweb.common.EmptyBox" id="39288">eb</a>: <a href="Box.scala.html#10583" title="net.liftweb.common.EmptyBox">EmptyBox</a><span class="delimiter">)</span>: <a href="Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a> = <a href="#39288" title="net.liftweb.common.EmptyBox">eb</a> <span title="net.liftweb.common.Failure" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Failure" class="delimiter">(</span><a title="net.liftweb.common.Failure" id="39290">f</a>: <a href="Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a><span class="delimiter">)</span> =&gt; <a href="#39290" title="net.liftweb.common.Failure">f</a>
    <span class="keyword">case</span> <a href="Box.scala.html#10581" title="net.liftweb.common.Failure">Empty</a>        =&gt; <a href="Box.scala.html#37829" title="(msg: String)net.liftweb.common.Failure">Failure</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty&quot;)" class="string">&quot;Empty&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](in: net.liftweb.common.Box[A])net.liftweb.common.CombinableBox.CombinableBox[A,net.liftweb.common.HLists.HNil]" id="39250">boxToCombinableBox</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39252">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[A]" id="39297">in</a>: <a href="Box.scala.html#10575" title="net.liftweb.common.Box[A]">Box</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#39707" title="net.liftweb.common.CombinableBox.CombinableBox[A,net.liftweb.common.HLists.HNil]">CombinableBox</a><span class="delimiter">[</span>A, HNil<span class="delimiter">]</span> = <a href="#39707" title="(rhs: net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.HNil]])net.liftweb.common.CombinableBox.CombinableBox[A,net.liftweb.common.HLists.HNil]">CombinableBox</a><span class="delimiter">(</span><a href="#39297" title="net.liftweb.common.Box[A]">in</a> <span title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.HNil]]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Right[Nothing,net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HNil]]">Full</span><span class="delimiter">(</span><a title="A" id="39345">a</a><span class="delimiter">)</span>      =&gt; <span title="(b: net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HNil])Right[Nothing,net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HNil]]">Right</span><span class="delimiter">(</span><a href="#39345" title="A">a</a> <a href="HList.scala.html#39339" title="(v: A)net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HNil]">:+:</a> <a href="HList.scala.html#39276" title="=&gt; net.liftweb.common.HLists.HNil">HNil</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Left[List[net.liftweb.common.Failure],Nothing]" class="delimiter">(</span><a title="net.liftweb.common.Failure" id="39412">f</a>: <a href="Box.scala.html#10586" title="net.liftweb.common.Failure">Failure</a><span class="delimiter">)</span> =&gt; <span title="(a: List[net.liftweb.common.Failure])Left[List[net.liftweb.common.Failure],Nothing]">Left</span><span class="delimiter">(</span><a href="#39412" title="net.liftweb.common.Failure">f</a> <a href="#39416" title="(x: net.liftweb.common.Failure)List[net.liftweb.common.Failure]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Left[List[net.liftweb.common.Failure],Nothing]">_</span>            =&gt; <span title="(a: List[net.liftweb.common.Failure])Left[List[net.liftweb.common.Failure],Nothing]">Left</span><span class="delimiter">(</span><a href="Box.scala.html#37829" title="(msg: String)net.liftweb.common.Failure">Failure</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty&quot;)" class="string">&quot;Empty&quot;</span><span class="delimiter">)</span> <a href="#39426" title="(x: net.liftweb.common.Failure)List[net.liftweb.common.Failure]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](in: net.liftweb.common.Boxable[A])net.liftweb.common.CombinableBox.CombinableBox[A,net.liftweb.common.HLists.HNil]" id="39253">boxableToCombinableBox</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39255">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.Boxable[A]" id="39438">in</a>: <a href="Box.scala.html#10589" title="net.liftweb.common.Boxable[A]">Boxable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#39707" title="net.liftweb.common.CombinableBox.CombinableBox[A,net.liftweb.common.HLists.HNil]">CombinableBox</a><span class="delimiter">[</span>A, HNil<span class="delimiter">]</span> = <a href="#39438" title="net.liftweb.common.Boxable[A]">in</a>.<a href="#39250" title="(in: net.liftweb.common.Box[A])net.liftweb.common.CombinableBox.CombinableBox[A,net.liftweb.common.HLists.HNil]">asBox</a>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A, B &lt;: net.liftweb.common.HLists.HList](in: net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,B]])net.liftweb.common.CombinableBox.CombinableBox[A,B]" id="39256">boxCombinationToCombinableBox</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39259">A</a>, <a title="&gt;: Nothing &lt;: net.liftweb.common.HLists.HList" id="39260">B</a> &lt;: HList<span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,B]]" id="39446">in</a>: <span title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,B]]">Result</span><span class="delimiter">[</span>A :+: B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#39707" title="net.liftweb.common.CombinableBox.CombinableBox[A,B]">CombinableBox</a><span class="delimiter">[</span>A, B<span class="delimiter">]</span> =
    <a href="#39707" title="(rhs: net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,B]])net.liftweb.common.CombinableBox.CombinableBox[A,B]">CombinableBox</a><span class="delimiter">(</span><a href="#39446" title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,B]]">in</a><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](result: net.liftweb.common.CombinableBox.Result[A])net.liftweb.common.Box[A]" id="39261">resultToBox</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39263">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.CombinableBox.Result[A]" id="39443">result</a>: <span title="net.liftweb.common.CombinableBox.Result[A]">Result</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Box.scala.html#10575" title="net.liftweb.common.Box[A]">Box</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#39443" title="net.liftweb.common.CombinableBox.Result[A]">result</a> <span title="net.liftweb.common.Box[A]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Empty.type">Left</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt; <a href="Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>
    <span class="keyword">case</span> <span title="net.liftweb.common.Failure">Left</span><span class="delimiter">(</span><a title="net.liftweb.common.Failure" id="39464">f</a> :: <span title="object Nil">Nil</span><span class="delimiter">)</span> =&gt; <a href="#39464" title="net.liftweb.common.Failure">f</a>
    <span class="keyword">case</span> <span title="net.liftweb.common.ParamFailure[net.liftweb.common.CombinableBox.FailureList]">Left</span><span class="delimiter">(</span><a title="List[net.liftweb.common.Failure]" id="39466">f</a><span class="delimiter">)</span> =&gt; <span title="net.liftweb.common.ParamFailure[net.liftweb.common.CombinableBox.FailureList]" class="keyword">new</span> <a href="Box.scala.html#10587" title="net.liftweb.common.ParamFailure[net.liftweb.common.CombinableBox.FailureList]">ParamFailure</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Multiple Failures&quot;)" class="string">&quot;Multiple Failures&quot;</span>,
                                     <a href="Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>,
                                     <a href="Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>,
                                     <a href="#39711" title="(failures: List[net.liftweb.common.Failure])net.liftweb.common.CombinableBox.FailureList">FailureList</a><span class="delimiter">(</span><a href="#39466" title="List[net.liftweb.common.Failure]">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="net.liftweb.common.Full[A]">Right</span><span class="delimiter">(</span><a title="A" id="39493">x</a><span class="delimiter">)</span> =&gt; <a href="Box.scala.html#27086" title="(value: A)net.liftweb.common.Full[A]">Full</a><span class="delimiter">(</span><a href="#39493" title="A">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
 
  <span class="comment">/**
   * If the Failure is going to be condensed, generate a FailureList
   */</span>
  <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class FailureList extends java.lang.Object with ScalaObject with Product with Serializable" id="39711">FailureList</a><a href="#39711" title="ScalaObject" class="delimiter">(</a><a title="List[net.liftweb.common.Failure]" id="39484">failures</a>: <span title="List[net.liftweb.common.Failure]">List</span><span class="delimiter">[</span>Failure<span class="delimiter">]</span><span class="delimiter">)</span>



  <span class="comment">/**
   * The place where the results are accumulated
   */</span>
  <span class="keyword">final</span> case <span class="keyword">class</span> <a title="class CombinableBox[B, C &lt;: net.liftweb.common.HLists.HList] extends java.lang.Object with ScalaObject with Product with Serializable" id="39707">CombinableBox</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39320">B</a>, <a title="&gt;: Nothing &lt;: net.liftweb.common.HLists.HList" id="39321">C</a> &lt;: HList<span class="delimiter">]</span><a href="#39707" title="ScalaObject" class="delimiter">(</a><a title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[B,C]]" id="39327">rhs</a>: <span title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[B,C]]">Result</span><span class="delimiter">[</span>B :+: C<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[A](lhs: net.liftweb.common.Boxable[A])net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.:+:[B,C]]]" id="39304">:&amp;:</a> <span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39306">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.Boxable[A]" id="39543">lhs</a>: <a href="Box.scala.html#10589" title="net.liftweb.common.Boxable[A]">Boxable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.:+:[B,C]]]">Result</span><span class="delimiter">[</span>A :+: B :+: C<span class="delimiter">]</span> = <a href="#39707" title="CombinableBox.this.type" class="keyword">this</a>.<a href="#39307" title="(lhs: net.liftweb.common.Box[A])net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.:+:[B,C]]]">:&amp;:</a><span class="delimiter">(</span><a href="#39543" title="net.liftweb.common.Boxable[A]">lhs</a>.<a href="Box.scala.html#38829" title="=&gt; net.liftweb.common.Box[A]">asBox</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[A](lhs: net.liftweb.common.Box[A])net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.:+:[B,C]]]" id="39307">:&amp;:</a> <span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="39309">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[A]" id="39548">lhs</a>: <a href="Box.scala.html#10575" title="net.liftweb.common.Box[A]">Box</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.:+:[B,C]]]">Result</span><span class="delimiter">[</span>A :+: B :+: C<span class="delimiter">]</span> =
      <span title="(_1: net.liftweb.common.Box[A], _2: net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[B,C]])(net.liftweb.common.Box[A], net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[B,C]])" class="delimiter">(</span><a href="#39548" title="net.liftweb.common.Box[A]">lhs</a>, <a href="#39327" title="=&gt; net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[B,C]]">rhs</a><span class="delimiter">)</span> <span title="net.liftweb.common.CombinableBox.Result[net.liftweb.common.HLists.:+:[A,net.liftweb.common.HLists.:+:[B,C]]]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Left[List[net.liftweb.common.Failure],Nothing]" class="delimiter">(</span><a title="net.liftweb.common.EmptyBox" id="39572">failure</a>: <a href="Box.scala.html#10583" title="net.liftweb.common.EmptyBox">EmptyBox</a>, Left<span class="delimiter">(</span><a title="List[net.liftweb.common.Failure]" id="39574">failures</a><span class="delimiter">)</span>  <span class="delimiter">)</span> =&gt; <span title="(a: List[net.liftweb.common.Failure])Left[List[net.liftweb.common.Failure],Nothing]">Left</span><span class="delimiter">(</span><a href="#39572" title="net.liftweb.common.EmptyBox">failure</a> <a href="#39249" title="(x: net.liftweb.common.Failure)List[net.liftweb.common.Failure]">::</a> <a href="#39574" title="List[net.liftweb.common.Failure]">failures</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Left[List[net.liftweb.common.Failure],Nothing]" class="delimiter">(</span><a title="net.liftweb.common.EmptyBox" id="39587">failure</a>: <a href="Box.scala.html#10583" title="net.liftweb.common.EmptyBox">EmptyBox</a>, _               <span class="delimiter">)</span> =&gt; <span title="(a: List[net.liftweb.common.Failure])Left[List[net.liftweb.common.Failure],Nothing]">Left</span><span class="delimiter">(</span><a href="#39587" title="net.liftweb.common.EmptyBox">failure</a> <a href="#39249" title="(x: net.liftweb.common.Failure)List[net.liftweb.common.Failure]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Left[List[net.liftweb.common.Failure],Nothing]" class="delimiter">(</span>_,                 Left<span class="delimiter">(</span><a title="List[net.liftweb.common.Failure]" id="39601">failures</a><span class="delimiter">)</span>  <span class="delimiter">)</span> =&gt; <span title="(a: List[net.liftweb.common.Failure])Left[List[net.liftweb.common.Failure],Nothing]">Left</span><span class="delimiter">(</span><a href="#39601" title="List[net.liftweb.common.Failure]">failures</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Right[Nothing,net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HCons[B,C]]]" class="delimiter">(</span>Full<span class="delimiter">(</span><a title="A" id="39609">success</a><span class="delimiter">)</span>,     Right<span class="delimiter">(</span><a title="net.liftweb.common.HLists.:+:[B,C]" id="39611">successes</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(b: net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HCons[B,C]])Right[Nothing,net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HCons[B,C]]]">Right</span><span class="delimiter">(</span><a href="#39609" title="A">success</a> <a href="HList.scala.html#39370" title="(v: A)net.liftweb.common.HLists.HCons[A,net.liftweb.common.HLists.HCons[B,C]]">:+:</a> <a href="#39611" title="net.liftweb.common.HLists.:+:[B,C]">successes</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


        </pre>
    </body>
</html>