<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>proto/net/liftweb/proto/ProtoUser.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2006-2011 WorldWide Conferencing, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> net.liftweb
<span class="keyword">package</span> proto

<span class="keyword">import</span> net.liftweb.http._
<span class="keyword">import</span> js._
<span class="keyword">import</span> <a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#14916" title="object net.liftweb.http.js.JsCmds">JsCmds</a>._
<span class="keyword">import</span> scala.xml.<span class="delimiter">{</span>NodeSeq, Node, Text, Elem<span class="delimiter">}</span>
<span class="keyword">import</span> scala.xml.transform._
<span class="keyword">import</span> net.liftweb.sitemap._
<span class="keyword">import</span> net.liftweb.sitemap.<a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#15291" title="object net.liftweb.sitemap.Loc">Loc</a>._
<span class="keyword">import</span> net.liftweb.util.<a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>._
<span class="keyword">import</span> net.liftweb.util._
<span class="keyword">import</span> net.liftweb.common._
<span class="keyword">import</span> net.liftweb.util.<a href="../../../../util/net/liftweb/util/Mailer.scala.html#13493" title="object net.liftweb.util.Mailer">Mailer</a>._
<span class="keyword">import</span> <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>._

<span class="comment">/**
 * A prototypical user class with abstractions to the underlying storage
 */</span>
<span class="keyword">trait</span> <a title="trait ProtoUser extends java.lang.Object with ScalaObject" id="12418">ProtoUser</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/**
   * The underlying record for the User
   */</span>
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: Any" id="147206">TheUserType</a>

  <span class="comment">/**
   * Bridges from TheUserType to methods used in this class
   */</span>
  <span class="keyword">protected</span> <span class="keyword">trait</span> <a title="trait UserBridge extends java.lang.Object with ScalaObject" id="147207">UserBridge</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="comment">/**
     * Convert the user's primary key to a String
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="148642">userIdAsString</a>: <span title="String">String</span>

    <span class="comment">/**
     * Return the user's first name
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="148643">getFirstName</a>: <span title="String">String</span>

    <span class="comment">/**
     * Return the user's last name
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="148644">getLastName</a>: <span title="String">String</span>

    <span class="comment">/**
     * Get the user's email
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="148645">getEmail</a>: <span title="String">String</span>

    <span class="comment">/**
     * Is the user a superuser
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="148646">superUser_?</a> : <span title="Boolean">Boolean</span>

    <span class="comment">/**
     * Has the user been validated?
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="148647">validated_?</a> : <span title="Boolean">Boolean</span>

    <span class="comment">/**
     * Does the supplied password match the actual password?
     */</span>
    <span class="keyword">def</span> <a title="(toTest: net.liftweb.common.Box[String])Boolean" id="148648">testPassword</a><span class="delimiter">(</span><a title="net.liftweb.common.Box[String]" id="149348">toTest</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>

    <span class="comment">/**
     * Set the validation flag on the user and return the user
     */</span>
    <span class="keyword">def</span> <a title="(validation: Boolean)ProtoUser.this.TheUserType" id="148649">setValidated</a><span class="delimiter">(</span><a title="Boolean" id="189907">validation</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>

    <span class="comment">/**
     * Set the unique ID for this user to a new value
     */</span>
    <span class="keyword">def</span> <a title="()ProtoUser.this.TheUserType" id="148650">resetUniqueId</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>

    <span class="comment">/**
     * Return the unique ID for the user
     */</span>
    <span class="keyword">def</span> <a title="()String" id="148651">getUniqueId</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span>

    <span class="comment">/**
     * Validate the user
     */</span>
    <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.util.FieldError]" id="148652">validate</a>: <span title="List[net.liftweb.util.FieldError]">List</span><span class="delimiter">[</span>FieldError<span class="delimiter">]</span>

    <span class="comment">/**
     * Given a list of string, set the password
     */</span>
    <span class="keyword">def</span> <a title="(in: List[String])ProtoUser.this.TheUserType" id="148653">setPasswordFromListString</a><span class="delimiter">(</span><a title="List[String]" id="189955">in</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>

    <span class="comment">/**
     * Save the user to backing store
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="148654">save</a>: <span title="Boolean">Boolean</span>

    <span class="comment">/**
     * Get a nice name for the user
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="148655">niceName</a>: <span title="String">String</span> = <span title="(_1: String, _2: String, _3: String)(String, String, String)" class="delimiter">(</span><a href="#148643" title="=&gt; String">getFirstName</a>, <a href="#148644" title="=&gt; String">getLastName</a>, <a href="#148645" title="=&gt; String">getEmail</a><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="String" id="227770">f</a>, <a title="String" id="227771">l</a>, <a title="String" id="227772">e</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#227770" title="String">f</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#227771" title="String">l</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#227770" title="String">f</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#227771" title="String">l</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#227772" title="String">e</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="String" id="227784">f</a>, _, <a title="String" id="227785">e</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#227784" title="String">f</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#227784" title="String">f</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#227785" title="String">e</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span>_, <a title="String" id="227793">l</a>, <a title="String" id="227794">e</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#227793" title="String">l</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#227793" title="String">l</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#227794" title="String">e</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span class="keyword">case</span> <span title="String" class="delimiter">(</span>_, _, <a title="String" id="227802">e</a><span class="delimiter">)</span> =&gt; <a href="#227802" title="String">e</a>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Get a short name for the user
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="148656">shortName</a>: <span title="String">String</span> = <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#148643" title="=&gt; String">getFirstName</a>, <a href="#148644" title="=&gt; String">getLastName</a><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="String" id="227813">f</a>, <a title="String" id="227814">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#227813" title="String">f</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#227814" title="String">l</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#227813" title="String">f</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#227814" title="String">l</a>
      <span class="keyword">case</span> <span title="String" class="delimiter">(</span><a title="String" id="227825">f</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#227825" title="String">f</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#227825" title="String">f</a>
      <span class="keyword">case</span> <span title="String" class="delimiter">(</span>_, <a title="String" id="227832">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#227832" title="String">l</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#227832" title="String">l</a>
      <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#148645" title="=&gt; String">getEmail</a>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Get an email link
     */</span>
    <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="148657">niceNameWEmailLink</a> = &lt;<a title="scala.xml.MetaData" id="227859">a</a> href=<span class="delimiter">{</span><span title="java.lang.String(&quot;mailto:&quot;)" class="string">&quot;mailto:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49043" title="(in: String)java.lang.String">urlEncode</a><span class="delimiter">(</span><a href="#148645" title="=&gt; String">getEmail</a><span class="delimiter">)</span><span class="delimiter">}</span>&gt;<span class="delimiter">{</span><a href="#148655" title="=&gt; String">niceName</a><span class="delimiter">}</span>&lt;/a&gt;

  <span class="delimiter">}</span>

  <span class="comment">/**
   * Convert an instance of TheUserType to the Bridge trait
   */</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge" id="147208">typeToBridge</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="148639">in</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <a href="#147207" title="ProtoUser.this.UserBridge">UserBridge</a>

  <span class="comment">/**
   * Get a nice name for the user
   */</span>
  <span class="keyword">def</span> <a title="(inst: ProtoUser.this.TheUserType)String" id="147209">niceName</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="227860">inst</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">inst</a>.<a href="#148655" title="=&gt; String">niceName</a>

  <span class="comment">/**
   * Get a nice name for the user
   */</span>
  <span class="keyword">def</span> <a title="(inst: ProtoUser.this.TheUserType)String" id="147210">shortName</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="227874">inst</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">inst</a>.<a href="#148656" title="=&gt; String">shortName</a>

  <span class="comment">/**
   * Get an email link for the user
   */</span>
  <span class="keyword">def</span> <a title="(inst: ProtoUser.this.TheUserType)scala.xml.Elem" id="147211">niceNameWEmailLink</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="227880">inst</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <span title="scala.xml.Elem">Elem</span> = <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">inst</a>.<a href="#148657" title="=&gt; scala.xml.Elem">niceNameWEmailLink</a>

  <span class="comment">/**
   * A generic representation of a field.  For example, this represents the
   * abstract &quot;name&quot; field and is used along with an instance of TheCrudType
   * to compute the BaseField that is the &quot;name&quot; field on the specific instance
   * of TheCrudType
   */</span>
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: Any" id="147212">FieldPointerType</a>

  <span class="comment">/**
   * Based on a FieldPointer, build a FieldPointerBridge
   */</span>
  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit net.liftweb.proto.ProtoUser.buildFieldBridge : (from: ProtoUser.this.FieldPointerType)ProtoUser.this.FieldPointerBridge" id="147213">buildFieldBridge</a><span class="delimiter">(</span><a title="ProtoUser.this.FieldPointerType" id="148658">from</a>: <a href="#147212" title="ProtoUser.this.FieldPointerType">FieldPointerType</a><span class="delimiter">)</span>: <a href="#147214" title="ProtoUser.this.FieldPointerBridge">FieldPointerBridge</a>
  
  <span class="keyword">protected</span> <span class="keyword">trait</span> <a title="trait FieldPointerBridge extends java.lang.Object" id="147214">FieldPointerBridge</a> <span title="java.lang.Object" class="delimiter">{</span>
    <span class="comment">/**
     * What is the display name of this field?
     */</span>
    <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="148660">displayHtml</a>: <span title="scala.xml.NodeSeq">NodeSeq</span>

    <span class="comment">/**
     * Does this represent a pointer to a Password field
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="148661">isPasswordField_?</a> : <span title="Boolean">Boolean</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The list of fields presented to the user at sign-up
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[ProtoUser.this.FieldPointerType]" id="147215">signupFields</a>: <span title="List[ProtoUser.this.FieldPointerType]">List</span><span class="delimiter">[</span>FieldPointerType<span class="delimiter">]</span>


  <span class="comment">/**
   * The list of fields presented to the user for editing
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[ProtoUser.this.FieldPointerType]" id="147216">editFields</a>: <span title="List[ProtoUser.this.FieldPointerType]">List</span><span class="delimiter">[</span>FieldPointerType<span class="delimiter">]</span>

  <span class="comment">/**
   * What template are you going to wrap the various nodes in
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[scala.xml.Node]" id="147217">screenWrap</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[scala.xml.Node]">Box</a><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="comment">/**
   * The base path for the user related URLs.  Override this
   * method to change the base path
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[String]" id="147218">basePath</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="java.lang.String(&quot;user_mgt&quot;)" class="string">&quot;user_mgt&quot;</span> <a href="#227891" title="(x: java.lang.String)List[java.lang.String]">::</a> <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The path suffix for the sign up screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="147219">signUpSuffix</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;sign_up&quot;)" class="string">&quot;sign_up&quot;</span>

  <span class="comment">/**
   * The computed path for the sign up screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147221">signUpPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147219" title="=&gt; String">signUpSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the login screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147222">loginSuffix</a> = <span title="java.lang.String(&quot;login&quot;)" class="string">&quot;login&quot;</span>

  <span class="comment">/**
   * The computed path for the login screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147224">loginPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147222" title="=&gt; java.lang.String">loginSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the lost password screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147225">lostPasswordSuffix</a> = <span title="java.lang.String(&quot;lost_password&quot;)" class="string">&quot;lost_password&quot;</span>

  <span class="comment">/**
   * The computed path for the lost password screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147227">lostPasswordPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147225" title="=&gt; java.lang.String">lostPasswordSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the reset password screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147228">passwordResetSuffix</a> = <span title="java.lang.String(&quot;reset_password&quot;)" class="string">&quot;reset_password&quot;</span>

  <span class="comment">/**
   * The computed path for the reset password screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147230">passwordResetPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147228" title="=&gt; java.lang.String">passwordResetSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the change password screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147231">changePasswordSuffix</a> = <span title="java.lang.String(&quot;change_password&quot;)" class="string">&quot;change_password&quot;</span>

  <span class="comment">/**
   * The computed path for change password screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147233">changePasswordPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147231" title="=&gt; java.lang.String">changePasswordSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the logout screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147234">logoutSuffix</a> = <span title="java.lang.String(&quot;logout&quot;)" class="string">&quot;logout&quot;</span>

  <span class="comment">/**
   * The computed pat for logout
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147236">logoutPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147234" title="=&gt; java.lang.String">logoutSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the edit screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147237">editSuffix</a> = <span title="java.lang.String(&quot;edit&quot;)" class="string">&quot;edit&quot;</span>

  <span class="comment">/**
   * The computed path for the edit screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147239">editPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147237" title="=&gt; java.lang.String">editSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The path suffix for the validate user screen
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147240">validateUserSuffix</a> = <span title="java.lang.String(&quot;validate_user&quot;)" class="string">&quot;validate_user&quot;</span>

  <span class="comment">/**
   * The calculated path to the user validation screen
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[String]" id="147242">validateUserPath</a> = <a href="#147249" title="(end: String)List[String]">thePath</a><span class="delimiter">(</span><a href="#147240" title="=&gt; java.lang.String">validateUserSuffix</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The application's home page
   */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147243">homePage</a> = <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>

  <span class="comment">/**
   * If you want to redirect a user to a different page after login,
   * put the page here
   */</span>
  <span class="keyword">object</span> <a title="object ProtoUser.this.loginRedirect" id="147244">loginRedirect</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14760" title="net.liftweb.http.SessionVar[net.liftweb.common.Box[String]]">SessionVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="149372">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A helper class that holds menu items for the path
   */</span>
  case <span class="keyword">class</span> <a title="class MenuItem extends java.lang.Object with ScalaObject with Product with Serializable" id="227953">MenuItem</a><a href="#227953" title="ScalaObject" class="delimiter">(</a><a title="String" id="230082">name</a>: <span title="String">String</span>, <a title="List[String]" id="230083">path</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                      <a title="Boolean" id="230084">loggedIn</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="227916">endOfPath</a> = <a href="#230083" title="=&gt; List[String]">path</a>.<span title="=&gt; String">last</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="227918">pathStr</a>: <span title="String">String</span> = <a href="#230083" title="=&gt; List[String]">path</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="227920">display</a> = <a href="#230082" title="=&gt; String">name</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Boolean(false)" class="keyword">null</span> | <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">case</span> <span title="Boolean(true)">_</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Calculate the path given a suffix by prepending the basePath to the suffix
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(end: String)List[String]" id="147249">thePath</a><span class="delimiter">(</span><a title="String" id="148617">end</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#147218" title="=&gt; List[String]">basePath</a> <a href="#228004" title="(prefix: List[String])List[String]">:::</a> <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="#148617" title="String">end</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Return the URL of the &quot;login&quot; page
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="147250">loginPageURL</a> = <a href="#147223" title="=&gt; List[String]">loginPath</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>,<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Inverted loggedIn_?
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="147251">notLoggedIn_?</a> = <span title="=&gt; Boolean">!</span><a href="#147306" title="=&gt; Boolean">loggedIn_?</a>

  <span class="comment">/**
   * A Menu.LocParam to test if the user is logged in
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.Loc.If" id="147253">testLogginIn</a> = <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147306" title="=&gt; Boolean">loggedIn_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;must.be.logged.in&quot;)" class="string">&quot;must.be.logged.in&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> ;

  <span class="comment">/**
   * A Menu.LocParam to test if the user is a super user
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.Loc.If" id="147255">testSuperUser</a> = <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147257" title="=&gt; Boolean">superUser_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;must.be.super.user&quot;)" class="string">&quot;must.be.super.user&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * A Menu.LocParam for testing if the user is logged in and if they're not,
   * redirect them to the login page
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.sitemap.Loc.If" id="147256">loginFirst</a> = <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span>
    <a href="#147306" title="=&gt; Boolean">loggedIn_?</a> _,
    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="keyword">import</span> net.liftweb.http.<span class="delimiter">{</span>RedirectWithState, RedirectState<span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="net.liftweb.common.Box[String]" id="228033">uri</a> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49361" title="=&gt; net.liftweb.common.Box[String]">uriAndQueryString</a>
      <a href="../../../../webkit/net/liftweb/http/LiftResponse.scala.html#228037" title="(uri: String, state: net.liftweb.http.RedirectState, cookies: net.liftweb.http.provider.HTTPCookie*)net.liftweb.http.RedirectWithState">RedirectWithState</a><span class="delimiter">(</span>
        <a href="#147250" title="=&gt; String">loginPageURL</a>,
        <a href="../../../../webkit/net/liftweb/http/LiftResponse.scala.html#228076" title="(f: () =&gt; Unit, msgs: (String, net.liftweb.http.NoticeType.Value)*)net.liftweb.http.RedirectState">RedirectState</a><span class="delimiter">(</span> <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;<span class="delimiter">{</span><a href="#147244" title="object ProtoUser.this.loginRedirect">loginRedirect</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75378" title="(what: net.liftweb.common.Box[String])net.liftweb.common.Box[String]">set</a><span title="Unit" class="delimiter">(</span><a href="#228033" title="net.liftweb.common.Box[String]">uri</a><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">)</span>

  <span class="comment">/**
   * Is there a user logged in and are they a superUser?
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="147257">superUser_?</a> : <span title="Boolean">Boolean</span> = <a href="#147318" title="=&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType]">currentUser</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: ProtoUser.this.TheUserType =&gt; Boolean)net.liftweb.common.Box[Boolean]">map</a><span class="delimiter">(</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">_</a>.<a href="#148646" title="=&gt; Boolean">superUser_?</a><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; Boolean)Boolean">openOr</a> <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * The menu item for login (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147258">loginMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Login&quot;)" class="string">&quot;Login&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216074" title="implicit net.liftweb.sitemap.Loc.Link.strLstToLink : (in: Seq[String])net.liftweb.sitemap.Loc.Link[Unit]">loginPath</a>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;login&quot;)" class="string">&quot;login&quot;</span><span class="delimiter">)</span>, <a href="#147260" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">loginMenuLocParams</a> <a href="#228146" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>


  <span class="comment">/**
   * If you want to include a LocParam (e.g. LocGroup) on all the
   * User menus, add them here
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147259">globalUserLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The LocParams for the menu item for login.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147260">loginMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147251" title="=&gt; Boolean">notLoggedIn_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;already.logged.in&quot;)" class="string">&quot;already.logged.in&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228183" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="#147343" title="=&gt; scala.xml.NodeSeq">login</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228189" title="(x: net.liftweb.sitemap.Loc.Template)List[net.liftweb.sitemap.Loc.Template]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * If you have more than 1 ProtoUser in your application, you'll need to distinguish the menu names.
   * Do so by changing the menu name suffix so that there are no name clashes
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="147261">menuNameSuffix</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * The menu item for logout (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147262">logoutMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Logout&quot;)" class="string">&quot;Logout&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216074" title="implicit net.liftweb.sitemap.Loc.Link.strLstToLink : (in: Seq[String])net.liftweb.sitemap.Loc.Link[Unit]">logoutPath</a>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;logout&quot;)" class="string">&quot;logout&quot;</span><span class="delimiter">)</span>, <a href="#147263" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">logoutMenuLocParams</a> <a href="#228240" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The LocParams for the menu item for logout.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147263">logoutMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="#147365" title="=&gt; Nothing">logout</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228262" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="#147252" title="=&gt; net.liftweb.sitemap.Loc.If">testLogginIn</a> <a href="#228273" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The menu item for creating the user/sign up (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147264">createUserMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;CreateUser&quot;)" class="string">&quot;CreateUser&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216074" title="implicit net.liftweb.sitemap.Loc.Link.strLstToLink : (in: Seq[String])net.liftweb.sitemap.Loc.Link[Unit]">signUpPath</a>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;sign.up&quot;)" class="string">&quot;sign.up&quot;</span><span class="delimiter">)</span>, <a href="#147265" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">createUserMenuLocParams</a> <a href="#228319" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The LocParams for the menu item for creating the user/sign up.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147265">createUserMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq], _])net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq]">signupFunc</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: () =&gt; scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">map</a><span class="delimiter">(</span><a href="#228455" title="()scala.xml.NodeSeq">_</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">openOr</a> <a href="#147330" title="=&gt; scala.xml.NodeSeq">signup</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228341" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147251" title="=&gt; Boolean">notLoggedIn_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;logout.first&quot;)" class="string">&quot;logout.first&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228578" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The menu item for lost password (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147266">lostPasswordMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;LostPassword&quot;)" class="string">&quot;LostPassword&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216074" title="implicit net.liftweb.sitemap.Loc.Link.strLstToLink : (in: Seq[String])net.liftweb.sitemap.Loc.Link[Unit]">lostPasswordPath</a>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;lost.password&quot;)" class="string">&quot;lost.password&quot;</span><span class="delimiter">)</span>, <a href="#147267" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">lostPasswordMenuLocParams</a> <a href="#228629" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// not logged in</span>

  <span class="comment">/**
   * The LocParams for the menu item for lost password.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147267">lostPasswordMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="#147351" title="=&gt; scala.xml.NodeSeq">lostPassword</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228651" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147251" title="=&gt; Boolean">notLoggedIn_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;logout.first&quot;)" class="string">&quot;logout.first&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228787" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The menu item for resetting the password (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147268">resetPasswordMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ResetPassword&quot;)" class="string">&quot;ResetPassword&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216075" title="implicit net.liftweb.sitemap.Loc.Link.strPairToLink : (in: (Seq[String], Boolean))net.liftweb.sitemap.Loc.Link[Unit]" class="delimiter">(</a><a href="#147229" title="=&gt; List[String]">passwordResetPath</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;reset.password&quot;)" class="string">&quot;reset.password&quot;</span><span class="delimiter">)</span>, <a href="#147269" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">resetPasswordMenuLocParams</a> <a href="#228844" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">//not Logged in</span>

  <span class="comment">/**
   * The LocParams for the menu item for resetting the password.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147269">resetPasswordMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146614" title="object net.liftweb.sitemap.Loc.Hidden">Hidden</a> <a href="#228860" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="#147354" title="(id: String)scala.xml.NodeSeq">passwordReset</a><span class="delimiter">(</span><a href="#147294" title="=&gt; String">snarfLastItem</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#228862" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147251" title="=&gt; Boolean">notLoggedIn_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;logout.first&quot;)" class="string">&quot;logout.first&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#229143" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The menu item for editing the user (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147270">editUserMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;EditUser&quot;)" class="string">&quot;EditUser&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216074" title="implicit net.liftweb.sitemap.Loc.Link.strLstToLink : (in: Seq[String])net.liftweb.sitemap.Loc.Link[Unit]">editPath</a>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;edit.user&quot;)" class="string">&quot;edit.user&quot;</span><span class="delimiter">)</span>, <a href="#147271" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">editUserMenuLocParams</a> <a href="#229199" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The LocParams for the menu item for editing the user.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147271">editUserMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq], _])net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq]">editFunc</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: () =&gt; scala.xml.NodeSeq =&gt; scala.xml.NodeSeq)net.liftweb.common.Box[scala.xml.NodeSeq]">map</a><span class="delimiter">(</span><a href="#229322" title="()scala.xml.NodeSeq">_</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">openOr</a> <a href="#147363" title="=&gt; scala.xml.NodeSeq">edit</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#229221" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="#147252" title="=&gt; net.liftweb.sitemap.Loc.If">testLogginIn</a> <a href="#229433" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The menu item for changing password (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147272">changePasswordMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ChangePassword&quot;)" class="string">&quot;ChangePassword&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216074" title="implicit net.liftweb.sitemap.Loc.Link.strLstToLink : (in: Seq[String])net.liftweb.sitemap.Loc.Link[Unit]">changePasswordPath</a>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;change.password&quot;)" class="string">&quot;change.password&quot;</span><span class="delimiter">)</span>, <a href="#147273" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">changePasswordMenuLocParams</a> <a href="#229479" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The LocParams for the menu item for changing password.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147273">changePasswordMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="#147357" title="=&gt; scala.xml.NodeSeq">changePassword</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#229501" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="#147252" title="=&gt; net.liftweb.sitemap.Loc.If">testLogginIn</a> <a href="#229758" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * The menu item for validating a user (make this &quot;Empty&quot; to disable)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="147274">validateUserMenuLoc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]">Box</a><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
    <a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: net.liftweb.sitemap.Menu)net.liftweb.common.Full[net.liftweb.sitemap.Menu]">Full</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#215843" title="(loc: net.liftweb.sitemap.Loc[_], convertableKids: net.liftweb.sitemap.ConvertableToMenu*)net.liftweb.sitemap.Menu">Menu</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146535" title="(name: String, link: net.liftweb.sitemap.Loc.Link[Unit], text: net.liftweb.sitemap.Loc.LinkText[Unit], params: List[net.liftweb.sitemap.Loc.LocParam[Unit]])net.liftweb.sitemap.Loc[Unit]">Loc</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ValidateUser&quot;)" class="string">&quot;ValidateUser&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#147261" title="=&gt; String">menuNameSuffix</a>, <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216075" title="implicit net.liftweb.sitemap.Loc.Link.strPairToLink : (in: (Seq[String], Boolean))net.liftweb.sitemap.Loc.Link[Unit]" class="delimiter">(</a><a href="#147241" title="=&gt; List[String]">validateUserPath</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216088" title="(in: =&gt; String)net.liftweb.sitemap.Loc.LinkText[Unit]" class="delimiter">(</a><span title="java.lang.String(&quot;validate.user&quot;)" class="string">&quot;validate.user&quot;</span><span class="delimiter">)</span>, <a href="#147275" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">validateUserMenuLocParams</a> <a href="#229810" title="(prefix: List[net.liftweb.sitemap.Loc.LocParam[Unit]])List[net.liftweb.sitemap.Loc.LocParam[Unit]]">:::</a> <a href="#147259" title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]">globalUserLocParams</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The LocParams for the menu item for validating a user.
   * Overwrite in order to add custom LocParams. Attention: Not calling super will change the default behavior!
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Loc.LocParam[Unit]]" id="147275">validateUserMenuLocParams</a>: <span title="List[net.liftweb.sitemap.Loc.LocParam[Unit]]">List</span><span class="delimiter">[</span>LocParam<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146614" title="object net.liftweb.sitemap.Loc.Hidden">Hidden</a> <a href="#229826" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#216029" title="(template: () =&gt; scala.xml.NodeSeq)net.liftweb.sitemap.Loc.Template">Template</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#147368" title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq">wrapIt</a><span class="delimiter">(</span><a href="#147335" title="(id: String)scala.xml.NodeSeq">validateUser</a><span class="delimiter">(</span><a href="#147294" title="=&gt; String">snarfLastItem</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#229827" title="(x: Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any])List[Product with Serializable with net.liftweb.sitemap.Loc.LocParam[Any]]">::</a>
    <a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#227637" title="(test: () =&gt; Boolean, failMsg: () =&gt; net.liftweb.http.LiftResponse)net.liftweb.sitemap.Loc.If">If</a><span class="delimiter">(</span><a href="#147251" title="=&gt; Boolean">notLoggedIn_?</a> _, <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146652" title="implicit net.liftweb.sitemap.Loc.strToFailMsg : (in: =&gt; String)() =&gt; net.liftweb.http.LiftResponse" class="delimiter">(</a><span title="java.lang.String(&quot;logout.first&quot;)" class="string">&quot;logout.first&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#229831" title="(x: net.liftweb.sitemap.Loc.If)List[net.liftweb.sitemap.Loc.If]">::</a>
    <span title="object Nil">Nil</span>

  <span class="comment">/**
   * An alias for the sitemap property
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[net.liftweb.sitemap.Menu]" id="147276">menus</a>: <span title="List[net.liftweb.sitemap.Menu]">List</span><span class="delimiter">[</span>Menu<span class="delimiter">]</span> = <a href="#147290" title="=&gt; List[net.liftweb.sitemap.Menu]">sitemap</a> <span class="comment">// issue 182</span>

  <span class="comment">/**
   * Insert this LocParam into your menu if you want the
   * User's menu items to be inserted at the same level
   * and after the item
   */</span>
  <span class="keyword">final</span> case <span class="keyword">object</span> <a href="#229872" title="object ProtoUser.this.AddUserMenusAfter" id="229875">AddUserMenusAfter</a> <span title="ScalaObject" class="keyword">extends</span> Loc.<a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146543" title="net.liftweb.sitemap.Loc.LocParam[Any]">LocParam</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>

  <span class="comment">/**
   * replace the menu that has this LocParam with the User's menu
   * items
   */</span>
  <span class="keyword">final</span> case <span class="keyword">object</span> <a href="#229883" title="object ProtoUser.this.AddUserMenusHere" id="229886">AddUserMenusHere</a> <span title="ScalaObject" class="keyword">extends</span> Loc.<a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146543" title="net.liftweb.sitemap.Loc.LocParam[Any]">LocParam</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>

  <span class="comment">/**
   * Insert this LocParam into your menu if you want the
   * User's menu items to be children of that menu
   */</span>
  <span class="keyword">final</span> case <span class="keyword">object</span> <a href="#229894" title="object ProtoUser.this.AddUserMenusUnder" id="229897">AddUserMenusUnder</a> <span title="ScalaObject" class="keyword">extends</span> Loc.<a href="../../../../webkit/net/liftweb/sitemap/Loc.scala.html#146543" title="net.liftweb.sitemap.Loc.LocParam[Any]">LocParam</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.SiteMap.UnapplyLocMatcher" id="147284">AfterUnapply</a> = <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#15343" title="object net.liftweb.sitemap.SiteMap">SiteMap</a>.<a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#227688" title="(matchFunc: net.liftweb.sitemap.Loc.LocParam[_] =&gt; Boolean)net.liftweb.sitemap.SiteMap.UnapplyLocMatcher">buildMenuMatcher</a><span class="delimiter">(</span><a href="#227731" title="net.liftweb.sitemap.Loc.LocParam[_]">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#229875" title="object ProtoUser.this.AddUserMenusAfter">AddUserMenusAfter</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.SiteMap.UnapplyLocMatcher" id="147286">HereUnapply</a> = <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#15343" title="object net.liftweb.sitemap.SiteMap">SiteMap</a>.<a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#227688" title="(matchFunc: net.liftweb.sitemap.Loc.LocParam[_] =&gt; Boolean)net.liftweb.sitemap.SiteMap.UnapplyLocMatcher">buildMenuMatcher</a><span class="delimiter">(</span><a href="#227738" title="net.liftweb.sitemap.Loc.LocParam[_]">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#229886" title="object ProtoUser.this.AddUserMenusHere">AddUserMenusHere</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="net.liftweb.sitemap.SiteMap.UnapplyLocMatcher" id="147288">UnderUnapply</a> = <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#15343" title="object net.liftweb.sitemap.SiteMap">SiteMap</a>.<a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#227688" title="(matchFunc: net.liftweb.sitemap.Loc.LocParam[_] =&gt; Boolean)net.liftweb.sitemap.SiteMap.UnapplyLocMatcher">buildMenuMatcher</a><span class="delimiter">(</span><a href="#227745" title="net.liftweb.sitemap.Loc.LocParam[_]">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#229897" title="object ProtoUser.this.AddUserMenusUnder">AddUserMenusUnder</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The SiteMap mutator function
   */</span>
  <span class="keyword">def</span> <a title="=&gt; net.liftweb.sitemap.SiteMap =&gt; net.liftweb.sitemap.SiteMap" id="147289">sitemapMutator</a>: SiteMap =&gt; SiteMap = <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#15343" title="object net.liftweb.sitemap.SiteMap">SiteMap</a>.<a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#227684" title="(pf: PartialFunction[net.liftweb.sitemap.Menu,List[net.liftweb.sitemap.Menu]])(or: net.liftweb.sitemap.SiteMap =&gt; net.liftweb.sitemap.SiteMap)net.liftweb.sitemap.SiteMap =&gt; net.liftweb.sitemap.SiteMap">sitemapMutator</a> <a href="#229906" title="List[net.liftweb.sitemap.Menu]" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#229899" title="List[net.liftweb.sitemap.Menu]">AfterUnapply</a><span class="delimiter">(</span><a title="net.liftweb.sitemap.Menu" id="229909">menu</a><span class="delimiter">)</span> =&gt; <a href="#229909" title="net.liftweb.sitemap.Menu">menu</a> <a href="#229910" title="(x: net.liftweb.sitemap.Menu)List[net.liftweb.sitemap.Menu]">::</a> <a href="#147290" title="=&gt; List[net.liftweb.sitemap.Menu]">sitemap</a>
    <span class="keyword">case</span> <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#229899" title="List[net.liftweb.sitemap.Menu]">HereUnapply</a><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#147290" title="=&gt; List[net.liftweb.sitemap.Menu]">sitemap</a>
    <span class="keyword">case</span> <a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#229899" title="List[net.liftweb.sitemap.Menu]">UnderUnapply</a><span class="delimiter">(</span><a title="net.liftweb.sitemap.Menu" id="229918">menu</a><span class="delimiter">)</span> =&gt; <span title="(xs: net.liftweb.sitemap.Menu*)List[net.liftweb.sitemap.Menu]">List</span><span class="delimiter">(</span><a href="#229918" title="net.liftweb.sitemap.Menu">menu</a>.<a href="../../../../webkit/net/liftweb/sitemap/Menu.scala.html#148435" title="(f: List[net.liftweb.sitemap.Menu] =&gt; List[net.liftweb.sitemap.Menu])net.liftweb.sitemap.Menu">rebuild</a><span class="delimiter">(</span><a href="#229928" title="List[net.liftweb.sitemap.Menu]">_</a> <a href="#229929" title="(prefix: List[net.liftweb.sitemap.Menu])List[net.liftweb.sitemap.Menu]">:::</a> <a href="#147290" title="=&gt; List[net.liftweb.sitemap.Menu]">sitemap</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#15343" title="object net.liftweb.sitemap.SiteMap">SiteMap</a>.<a href="../../../../webkit/net/liftweb/sitemap/SiteMap.scala.html#227686" title="(menus: List[net.liftweb.sitemap.Menu])net.liftweb.sitemap.SiteMap =&gt; net.liftweb.sitemap.SiteMap">addMenusAtEndMutator</a><span class="delimiter">(</span><a href="#147290" title="=&gt; List[net.liftweb.sitemap.Menu]">sitemap</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[net.liftweb.sitemap.Menu]" id="147291">sitemap</a>: <span title="List[net.liftweb.sitemap.Menu]">List</span><span class="delimiter">[</span>Menu<span class="delimiter">]</span> =
  <span title="(xs: net.liftweb.common.Box[net.liftweb.sitemap.Menu]*)List[net.liftweb.common.Box[net.liftweb.sitemap.Menu]]">List</span><span class="delimiter">(</span><a href="#147258" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">loginMenuLoc</a>, <a href="#147262" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">logoutMenuLoc</a>, <a href="#147264" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">createUserMenuLoc</a>,
       <a href="#147266" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">lostPasswordMenuLoc</a>, <a href="#147268" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">resetPasswordMenuLoc</a>,
       <a href="#147270" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">editUserMenuLoc</a>, <a href="#147272" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">changePasswordMenuLoc</a>,
       <a href="#147274" title="=&gt; net.liftweb.common.Box[net.liftweb.sitemap.Menu]">validateUserMenuLoc</a><span class="delimiter">)</span>.<span title="(implicit asTraversable: net.liftweb.common.Box[net.liftweb.sitemap.Menu] =&gt; scala.collection.TraversableOnce[net.liftweb.sitemap.Menu])List[net.liftweb.sitemap.Menu]">flatten</span><span class="delimiter">(</span><a title="net.liftweb.common.Box[net.liftweb.sitemap.Menu]" id="229951">a</a> =&gt; <a href="../../../../common/net/liftweb/common/Box.scala.html#28624" title="(in: net.liftweb.common.Box[net.liftweb.sitemap.Menu])Iterable[net.liftweb.sitemap.Menu]">a</a><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="=&gt; Boolean" id="147292">skipEmailValidation</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; List[scala.xml.Node]" id="147293">userMenu</a>: <span title="List[scala.xml.Node]">List</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="229995">li</a> = <a href="#147306" title="=&gt; Boolean">loggedIn_?</a>
    <a href="#147295" title="=&gt; List[ProtoUser.this.MenuItem]">ItemList</a>.
    <span title="(p: ProtoUser.this.MenuItem =&gt; Boolean)List[ProtoUser.this.MenuItem]">filter</span><span class="delimiter">(</span><a title="ProtoUser.this.MenuItem" id="229999">i</a> =&gt; <a href="#229999" title="ProtoUser.this.MenuItem">i</a>.<a href="#227919" title="=&gt; Boolean">display</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#229999" title="ProtoUser.this.MenuItem">i</a>.<a href="#230084" title="=&gt; Boolean">loggedIn</a> <span title="(x: Boolean)Boolean">==</span> <a href="#229995" title="Boolean">li</a><span class="delimiter">)</span>.
    <span title="(f: ProtoUser.this.MenuItem =&gt; scala.xml.Elem)(implicit bf: scala.collection.generic.CanBuildFrom[List[ProtoUser.this.MenuItem],scala.xml.Elem,List[scala.xml.Node]])List[scala.xml.Node]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,scala.xml.Elem,List[scala.xml.Elem]]" class="delimiter">(</span><a title="ProtoUser.this.MenuItem" id="230027">i</a> =&gt; <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="230033">a</a> href=<span class="delimiter">{</span><a href="#230027" title="ProtoUser.this.MenuItem">i</a>.<a href="#227917" title="=&gt; String">pathStr</a><span class="delimiter">}</span>&gt;<span class="delimiter">{</span><a href="#230027" title="ProtoUser.this.MenuItem">i</a>.<a href="#230082" title="=&gt; String">name</a><span class="delimiter">}</span>&lt;/a&gt;<span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="147294">snarfLastItem</a>: <span title="String">String</span> =
  <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">(</span><a title="net.liftweb.http.Req" id="230065">r</a> &lt;- <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: net.liftweb.http.Req =&gt; java.lang.String)net.liftweb.common.Box[java.lang.String]">request</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#230065" title="net.liftweb.http.Req">r</a>.<a href="../../../../webkit/net/liftweb/http/Req.scala.html#149137" title="=&gt; net.liftweb.http.ParsePath">path</a>.<a href="../../../../webkit/net/liftweb/http/Req.scala.html#216857" title="=&gt; List[java.lang.String]">wholePath</a>.<span title="=&gt; java.lang.String">last</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; java.lang.String)java.lang.String">openOr</a> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ProtoUser.this.MenuItem]" id="147296">ItemList</a>: <span title="List[ProtoUser.this.MenuItem]">List</span><span class="delimiter">[</span>MenuItem<span class="delimiter">]</span> =
  <span title="(xs: ProtoUser.this.MenuItem*)List[ProtoUser.this.MenuItem]">List</span><span class="delimiter">(</span><a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up&quot;)" class="string">&quot;sign.up&quot;</span><span class="delimiter">)</span>, <a href="#147220" title="=&gt; List[String]">signUpPath</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;log.in&quot;)" class="string">&quot;log.in&quot;</span><span class="delimiter">)</span>, <a href="#147223" title="=&gt; List[String]">loginPath</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;lost.password&quot;)" class="string">&quot;lost.password&quot;</span><span class="delimiter">)</span>, <a href="#147226" title="=&gt; List[String]">lostPasswordPath</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a href="#147229" title="=&gt; List[String]">passwordResetPath</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;change.password&quot;)" class="string">&quot;change.password&quot;</span><span class="delimiter">)</span>, <a href="#147232" title="=&gt; List[String]">changePasswordPath</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;log.out&quot;)" class="string">&quot;log.out&quot;</span><span class="delimiter">)</span>, <a href="#147235" title="=&gt; List[String]">logoutPath</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;edit.profile&quot;)" class="string">&quot;edit.profile&quot;</span><span class="delimiter">)</span>, <a href="#147238" title="=&gt; List[String]">editPath</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>,
       <a href="#227953" title="(name: String, path: List[String], loggedIn: Boolean)ProtoUser.this.MenuItem">MenuItem</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a href="#147241" title="=&gt; List[String]">validateUserPath</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="List[ProtoUser.this.TheUserType =&gt; Unit]" id="147298">onLogIn</a>: <span title="List[ProtoUser.this.TheUserType =&gt; Unit]">List</span><span class="delimiter">[</span>TheUserType =&gt; Unit<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="keyword">var</span> <a title="List[net.liftweb.common.Box[ProtoUser.this.TheUserType] =&gt; Unit]" id="147301">onLogOut</a>: <span title="List[net.liftweb.common.Box[ProtoUser.this.TheUserType] =&gt; Unit]">List</span><span class="delimiter">[</span>Box<span class="delimiter">[</span>TheUserType<span class="delimiter">]</span> =&gt; Unit<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

  <span class="comment">/**
   * This function is given a chance to log in a user
   * programmatically when needed
   */</span>
  <span class="keyword">var</span> <a title="net.liftweb.common.Box[() =&gt; Unit]" id="147304">autologinFunc</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[() =&gt; Unit]">Box</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span>=&gt;Unit<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="147306">loggedIn_?</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#147314" title="=&gt; net.liftweb.common.Box[String]">currentUserId</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="() =&gt; Unit" id="227665">f</a> &lt;- <a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: () =&gt; Unit =&gt; Unit)Unit">autologinFunc</a><span class="delimiter">)</span> <a href="#227665" title="()Unit">f</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#147314" title="=&gt; net.liftweb.common.Box[String]">currentUserId</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27014" title="=&gt; Boolean">isDefined</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(id: String)Unit" id="147307">logUserIdIn</a><span class="delimiter">(</span><a title="String" id="230117">id</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#147315" title="object ProtoUser.this.curUser">curUser</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75383" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75381" title="(what: net.liftweb.common.Box[String])net.liftweb.common.Box[String]">curUserId</a><span title="Unit" class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: String)net.liftweb.common.Full[String]">Full</a><span class="delimiter">(</span><a href="#230117" title="String">id</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(who: ProtoUser.this.TheUserType, postLogin: () =&gt; Nothing)Nothing" id="147308">logUserIn</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="149475">who</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>, <a title="() =&gt; Nothing" id="149476">postLogin</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Nothing<span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <span title="Nothing" class="keyword">if</span> <span class="delimiter">(</span><a href="#147341" title="=&gt; Boolean">destroySessionOnLogin</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; net.liftweb.http.LiftSession">open_!</a>.<a href="../../../../webkit/net/liftweb/http/LiftSession.scala.html#230254" title="(continuation: () =&gt; Nothing)Nothing">destroySessionAndContinueInNewSession</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#147309" title="(who: ProtoUser.this.TheUserType)Unit">logUserIn</a><span class="delimiter">(</span><a href="#149475" title="ProtoUser.this.TheUserType">who</a><span class="delimiter">)</span>
        <a href="#149476" title="()Nothing">postLogin</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#147309" title="(who: ProtoUser.this.TheUserType)Unit">logUserIn</a><span class="delimiter">(</span><a href="#149475" title="ProtoUser.this.TheUserType">who</a><span class="delimiter">)</span>
      <a href="#149476" title="()Nothing">postLogin</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(who: ProtoUser.this.TheUserType)Unit" id="147309">logUserIn</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="149385">who</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#147312" title="object ProtoUser.this.curUserId">curUserId</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75383" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#147315" title="object ProtoUser.this.curUser">curUser</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75383" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75381" title="(what: net.liftweb.common.Box[String])net.liftweb.common.Box[String]">curUserId</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: String)net.liftweb.common.Full[String]">Full</a><span class="delimiter">(</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">who</a>.<a href="#148642" title="=&gt; String">userIdAsString</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75381" title="(what: net.liftweb.common.Box[ProtoUser.this.TheUserType])net.liftweb.common.Box[ProtoUser.this.TheUserType]">curUser</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: ProtoUser.this.TheUserType)net.liftweb.common.Full[ProtoUser.this.TheUserType]">Full</a><span class="delimiter">(</span><a href="#149385" title="ProtoUser.this.TheUserType">who</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#147298" title="=&gt; List[ProtoUser.this.TheUserType =&gt; Unit]">onLogIn</a>.<span title="(f: ProtoUser.this.TheUserType =&gt; Unit =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#230379" title="(v1: ProtoUser.this.TheUserType)Unit">_</a><span class="delimiter">(</span><a href="#149385" title="ProtoUser.this.TheUserType">who</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Unit" id="147310">logoutCurrentUser</a> = <a href="#147311" title="()Unit">logUserOut</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="147311">logUserOut</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#147301" title="=&gt; List[net.liftweb.common.Box[ProtoUser.this.TheUserType] =&gt; Unit]">onLogOut</a>.<span title="(f: net.liftweb.common.Box[ProtoUser.this.TheUserType] =&gt; Unit =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#230407" title="(v1: net.liftweb.common.Box[ProtoUser.this.TheUserType])Unit">_</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/AnyVar.scala.html#228423" title="(in: net.liftweb.util.AnyVar[net.liftweb.common.Box[ProtoUser.this.TheUserType], _])net.liftweb.common.Box[ProtoUser.this.TheUserType]">curUser</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#147312" title="object ProtoUser.this.curUserId">curUserId</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75383" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#147315" title="object ProtoUser.this.curUser">curUser</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75383" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49382" title="=&gt; net.liftweb.common.Box[net.liftweb.http.LiftSession]">session</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27031" title="(f: net.liftweb.http.LiftSession =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#230429" title="net.liftweb.http.LiftSession">_</a>.<a href="../../../../webkit/net/liftweb/http/LiftSession.scala.html#230232" title="()Unit">destroySession</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object ProtoUser.this.curUserId" id="147312">curUserId</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14760" title="net.liftweb.http.SessionVar[net.liftweb.common.Box[String]]">SessionVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="230126">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[String]" id="147314">currentUserId</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#147312" title="object ProtoUser.this.curUserId">curUserId</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[String]">is</a>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object ProtoUser.this.curUser" id="147315">curUser</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14774" title="net.liftweb.http.RequestVar[net.liftweb.common.Box[ProtoUser.this.TheUserType]]">RequestVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span>TheUserType<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#147314" title="=&gt; net.liftweb.common.Box[String]">currentUserId</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: String =&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType])net.liftweb.common.Box[ProtoUser.this.TheUserType]">flatMap</a><span class="delimiter">(</span><a href="#147317" title="(id: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]">userFromStringId</a><span class="delimiter">)</span><span class="delimiter">)</span>  <span class="keyword">with</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14778" title="net.liftweb.http.CleanRequestVarOnSessionTransition">CleanRequestVarOnSessionTransition</a>  <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="230121">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * Given a String representing the User ID, find the user
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(id: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]" id="147317">userFromStringId</a><span class="delimiter">(</span><a title="String" id="190132">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[ProtoUser.this.TheUserType]">Box</a><span class="delimiter">[</span>TheUserType<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType]" id="147318">currentUser</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[ProtoUser.this.TheUserType]">Box</a><span class="delimiter">[</span>TheUserType<span class="delimiter">]</span> = <a href="#147315" title="object ProtoUser.this.curUser">curUser</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType]">is</a>

  <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType)scala.xml.Elem" id="147319">signupXhtml</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="228504">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="228516">form</a> method=<span title="scala.xml.Text" class="string">&quot;post&quot;</span> action=<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a><span class="delimiter">}</span>&gt;&lt;<a title="scala.xml.Elem" id="228517">table</a>&gt;&lt;<a title="scala.xml.Elem" id="228518">tr</a>&gt;&lt;<a title="scala.xml.MetaData" id="228524">td</a>
              colspan=<span title="scala.xml.Text" class="string">&quot;2&quot;</span>&gt;<span class="delimiter">{</span> <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up&quot;)" class="string">&quot;sign.up&quot;</span><span class="delimiter">)</span> <span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
          <span class="delimiter">{</span><a href="#147367" title="(user: ProtoUser.this.TheUserType, ignorePassword: Boolean, fields: List[ProtoUser.this.FieldPointerType])scala.xml.NodeSeq">localForm</a><span class="delimiter">(</span><a href="#228504" title="ProtoUser.this.TheUserType">user</a>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#147215" title="=&gt; List[ProtoUser.this.FieldPointerType]">signupFields</a><span class="delimiter">)</span><span class="delimiter">}</span>
          &lt;<a title="scala.xml.Elem" id="228533">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="228534">td</a>&gt;&amp;nbsp;&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="228535">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:submit/&gt;&lt;/td&gt;&lt;/tr&gt;
                                        &lt;/table&gt;&lt;/form&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType, validationLink: String)scala.xml.Elem" id="147320">signupMailBody</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="230456">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>, <a title="String" id="230457">validationLink</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="scala.xml.Elem">Elem</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.Elem" id="230459">html</a>&gt;
        &lt;<a title="scala.xml.Elem" id="230460">head</a>&gt;
          &lt;<a title="scala.xml.Elem" id="230461">title</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up.confirmation&quot;)" class="string">&quot;sign.up.confirmation&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/title&gt;
        &lt;/head&gt;
        &lt;<a title="scala.xml.Elem" id="230466">body</a>&gt;
          &lt;<a title="scala.xml.Elem" id="230467">p</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;dear&quot;)" class="string">&quot;dear&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span> <span class="delimiter">{</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148643" title="=&gt; String">getFirstName</a><span class="delimiter">}</span>,
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up.validation.link&quot;)" class="string">&quot;sign.up.validation.link&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
            &lt;<span title="scala.xml.Elem">br</span>/&gt;&lt;<a title="scala.xml.MetaData" id="230485">a</a> href=<span class="delimiter">{</span><a href="#230457" title="String">validationLink</a><span class="delimiter">}</span>&gt;<span class="delimiter">{</span><a href="#230457" title="String">validationLink</a><span class="delimiter">}</span>&lt;/a&gt;
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;thank.you&quot;)" class="string">&quot;thank.you&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
          &lt;/p&gt;
        &lt;/body&gt;
     &lt;/html&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="147321">signupMailSubject</a> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up.confirmation&quot;)" class="string">&quot;sign.up.confirmation&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Send validation email to the user.  The XHTML version of the mail
   * body is generated by calling signupMailBody.  You can customize the
   * mail sent to users by override generateValidationEmailBodies to
   * send non-HTML mail or alternative mail bodies.
   */</span>
  <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType)Unit" id="147322">sendValidationEmail</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="230497">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="230499">resetLink</a> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49474" title="=&gt; String">hostAndPath</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#147241" title="=&gt; List[String]">validateUserPath</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49043" title="(in: String)java.lang.String">urlEncode</a><span class="delimiter">(</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148651" title="()String">getUniqueId</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="String" id="230500">email</a>: <span title="String">String</span> = <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148645" title="=&gt; String">getEmail</a>

    <span class="keyword">val</span> <a title="scala.xml.Elem" id="230501">msgXml</a> = <a href="#147320" title="(user: ProtoUser.this.TheUserType, validationLink: String)scala.xml.Elem">signupMailBody</a><span class="delimiter">(</span><a href="#230497" title="ProtoUser.this.TheUserType">user</a>, <a href="#230499" title="java.lang.String">resetLink</a><span class="delimiter">)</span>

    <a href="../../../../util/net/liftweb/util/Mailer.scala.html#13493" title="object net.liftweb.util.Mailer">Mailer</a>.<a href="../../../../util/net/liftweb/util/Mailer.scala.html#146760" title="(from: net.liftweb.util.Mailer.From, subject: net.liftweb.util.Mailer.Subject, rest: net.liftweb.util.Mailer.MailTypes*)Unit">sendMail</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#230523" title="(address: String, name: net.liftweb.common.Box[String])net.liftweb.util.Mailer.From">From</a><span class="delimiter">(</span><a href="#147332" title="=&gt; java.lang.String">emailFrom</a><span class="delimiter">)</span>,<a href="../../../../util/net/liftweb/util/Mailer.scala.html#230550" title="(subject: String)net.liftweb.util.Mailer.Subject">Subject</a><span class="delimiter">(</span><a href="#147321" title="=&gt; String">signupMailSubject</a><span class="delimiter">)</span>,
                    <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#230564" title="(address: String, name: net.liftweb.common.Box[String])net.liftweb.util.Mailer.To">To</a><span class="delimiter">(</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148645" title="=&gt; String">getEmail</a><span class="delimiter">)</span> <a href="#230561" title="(x: net.liftweb.util.Mailer.MailTypes)List[net.liftweb.util.Mailer.MailTypes]">::</a> 
                     <a href="#147323" title="(user: ProtoUser.this.TheUserType, resetLink: String)List[net.liftweb.util.Mailer.MailBodyType]">generateValidationEmailBodies</a><span class="delimiter">(</span><a href="#230497" title="ProtoUser.this.TheUserType">user</a>, <a href="#230499" title="java.lang.String">resetLink</a><span class="delimiter">)</span> <a href="#230586" title="(prefix: List[net.liftweb.util.Mailer.MailTypes])List[net.liftweb.util.Mailer.MailTypes]">:::</a>
                     <span class="delimiter">(</span><a href="#147333" title="=&gt; net.liftweb.common.Box[String]">bccEmail</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27051" title="=&gt; List[String]">toList</a>.<span title="(f: String =&gt; net.liftweb.util.Mailer.BCC)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],net.liftweb.util.Mailer.BCC,List[net.liftweb.util.Mailer.BCC]])List[net.liftweb.util.Mailer.BCC]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.util.Mailer.BCC,List[net.liftweb.util.Mailer.BCC]]" class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#230614" title="(address: String, name: net.liftweb.common.Box[String])net.liftweb.util.Mailer.BCC">BCC</a><span class="delimiter">(</span><a href="#230611" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> :_* <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Generate the mail bodies to send with the valdiation link.
   * By default, just an HTML mail body is generated by calling signupMailBody
   * but you can send additional or alternative mail by override this method.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType, resetLink: String)List[net.liftweb.util.Mailer.MailBodyType]" id="147323">generateValidationEmailBodies</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="230587">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>,
                                              <a title="String" id="230588">resetLink</a>: <span title="String">String</span><span class="delimiter">)</span>:
  <span title="List[net.liftweb.util.Mailer.MailBodyType]">List</span><span class="delimiter">[</span>MailBodyType<span class="delimiter">]</span> = <span title="(xs: net.liftweb.util.Mailer.MailBodyType*)List[net.liftweb.util.Mailer.MailBodyType]">List</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#146712" title="implicit net.liftweb.util.Mailer.xmlToMailBodyType : (html: scala.xml.NodeSeq)net.liftweb.util.Mailer.MailBodyType">xmlToMailBodyType</a><span class="delimiter">(</span><a href="#147320" title="(user: ProtoUser.this.TheUserType, validationLink: String)scala.xml.Elem">signupMailBody</a><span class="delimiter">(</span><a href="#230587" title="ProtoUser.this.TheUserType">user</a>, <a href="#230588" title="String">resetLink</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">object</span> <a title="object ProtoUser.this.signupFunc" id="147324">signupFunc</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14774" title="net.liftweb.http.RequestVar[net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq]]">RequestVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; NodeSeq<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="228345">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * Override this method to do something else after the user signs up
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(theUser: ProtoUser.this.TheUserType, func: () =&gt; Nothing)Nothing" id="147326">actionsAfterSignup</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="228474">theUser</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>, <a title="() =&gt; Nothing" id="228475">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Nothing<span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">theUser</a>.<a href="#148649" title="(validation: Boolean)ProtoUser.this.TheUserType">setValidated</a><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge" class="delimiter">(</a><a href="#147292" title="=&gt; Boolean">skipEmailValidation</a><span class="delimiter">)</span>.<a href="#148650" title="()ProtoUser.this.TheUserType">resetUniqueId</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">theUser</a>.<a href="#148654" title="=&gt; Boolean">save</a>
    <span title="Nothing" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#147292" title="=&gt; Boolean">skipEmailValidation</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#147322" title="(user: ProtoUser.this.TheUserType)Unit">sendValidationEmail</a><span class="delimiter">(</span><a href="#228474" title="ProtoUser.this.TheUserType">theUser</a><span class="delimiter">)</span>
      <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up.message&quot;)" class="string">&quot;sign.up.message&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#228475" title="()Nothing">func</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#147308" title="(who: ProtoUser.this.TheUserType, postLogin: () =&gt; Nothing)Nothing">logUserIn</a><span class="delimiter">(</span><a href="#228474" title="ProtoUser.this.TheUserType">theUser</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>      
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;welcome&quot;)" class="string">&quot;welcome&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#228475" title="()Nothing">func</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Override this method to validate the user signup (eg by adding captcha verification)
   */</span>
  <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType)List[net.liftweb.util.FieldError]" id="147327">validateSignup</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="228472">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <span title="List[net.liftweb.util.FieldError]">List</span><span class="delimiter">[</span>FieldError<span class="delimiter">]</span> = <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148652" title="=&gt; List[net.liftweb.util.FieldError]">validate</a>

  <span class="comment">/**
   * Create a new instance of the User
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()ProtoUser.this.TheUserType" id="147328">createNewUserInstance</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>

  <span class="comment">/**
   * If there's any mutation to do to the user on creation for
   * signup, override this method and mutate the user.  This can
   * be used to pull query parameters from the request and assign
   * certain fields. . Issue #722
   *
   * @param user the user to mutate
   * @return the mutated user
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType)ProtoUser.this.TheUserType" id="147329">mutateUserOnSignup</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="228468">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a> = <a href="#228468" title="ProtoUser.this.TheUserType">user</a>
  
  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="147330">signup</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="ProtoUser.this.TheUserType" id="228464">theUser</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a> = <a href="#147329" title="(user: ProtoUser.this.TheUserType)ProtoUser.this.TheUserType">mutateUserOnSignup</a><span class="delimiter">(</span><a href="#147328" title="()ProtoUser.this.TheUserType">createNewUserInstance</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="228465">theName</a> = <a href="#147220" title="=&gt; List[String]">signUpPath</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="()Unit" id="228466">testSignup</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#147327" title="(user: ProtoUser.this.TheUserType)List[net.liftweb.util.FieldError]">validateSignup</a><span class="delimiter">(</span><a href="#228464" title="ProtoUser.this.TheUserType">theUser</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Nothing">Nil</span> =&gt;
          <a href="#147326" title="(theUser: ProtoUser.this.TheUserType, func: () =&gt; Nothing)Nothing">actionsAfterSignup</a><span class="delimiter">(</span><a href="#228464" title="ProtoUser.this.TheUserType">theUser</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <a title="Unit" id="228480">xs</a> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49552" title="(vi: List[net.liftweb.util.FieldError])Unit">error</a><span class="delimiter">(</span><a href="#228480" title="List[net.liftweb.util.FieldError]">xs</a><span class="delimiter">)</span> ; <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75381" title="(what: net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq])net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq]">signupFunc</a><span title="Unit" class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: () =&gt; scala.xml.NodeSeq)net.liftweb.common.Full[() =&gt; scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#228467" title="=&gt; scala.xml.NodeSeq">innerSignup</a> _<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="228467">innerSignup</a> = <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span>,
                           <a href="#147319" title="(user: ProtoUser.this.TheUserType)scala.xml.Elem">signupXhtml</a><span class="delimiter">(</span><a href="#228464" title="ProtoUser.this.TheUserType">theUser</a><span class="delimiter">)</span>,
                           <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;submit&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="#147331" title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq">signupSubmitButton</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sign.up&quot;)" class="string">&quot;sign.up&quot;</span><span class="delimiter">)</span>, <a href="#228466" title="()Unit">testSignup</a> _<span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#228467" title="=&gt; scala.xml.NodeSeq">innerSignup</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq" id="147331">signupSubmitButton</a><span class="delimiter">(</span><a title="String" id="228561">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="228564">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#147345" title="(name: String, func: () =&gt; Any)scala.xml.Elem">standardSubmitButton</a><span class="delimiter">(</span><a href="#228561" title="String">name</a>, <a href="#228564" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="147332">emailFrom</a> = <span title="java.lang.String(&quot;noreply@&quot;)" class="string">&quot;noreply@&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49473" title="=&gt; String">hostName</a>

  <span class="keyword">def</span> <a title="=&gt; net.liftweb.common.Box[String]" id="147333">bccEmail</a>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[String]">Box</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a>

  <span class="keyword">def</span> <a title="(page: String)Boolean" id="147334">testLoggedIn</a><span class="delimiter">(</span><a title="String" id="230824">page</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
  <a href="#147295" title="=&gt; List[ProtoUser.this.MenuItem]">ItemList</a>.<span title="(p: ProtoUser.this.MenuItem =&gt; Boolean)List[ProtoUser.this.MenuItem]">filter</span><span class="delimiter">(</span><a href="#230827" title="ProtoUser.this.MenuItem">_</a>.<a href="#227915" title="=&gt; String">endOfPath</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#230824" title="String">page</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Boolean(true)" id="230836">x</a> :: <a title="List[ProtoUser.this.MenuItem]" id="230837">xs</a> <span class="keyword">if</span> <a href="#230836" title="ProtoUser.this.MenuItem">x</a>.<a href="#230084" title="=&gt; Boolean">loggedIn</a> <span title="(x: Boolean)Boolean">==</span> <a href="#147306" title="=&gt; Boolean">loggedIn_?</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(id: String)scala.xml.NodeSeq" id="147335">validateUser</a><span class="delimiter">(</span><a title="String" id="229829">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="#147340" title="(id: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]">findUserByUniqueId</a><span class="delimiter">(</span><a href="#229829" title="String">id</a><span class="delimiter">)</span> <span title="scala.xml.NodeSeq" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Nothing">Full</span><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="230843">user</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148647" title="=&gt; Boolean">validated_?</a> =&gt;
      <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148649" title="(validation: Boolean)ProtoUser.this.TheUserType">setValidated</a><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge" class="delimiter">(</a><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>.<a href="#148650" title="()ProtoUser.this.TheUserType">resetUniqueId</a><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge" class="delimiter">(</a><span class="delimiter">)</span>.<a href="#148654" title="=&gt; Boolean">save</a>
      <a href="#147308" title="(who: ProtoUser.this.TheUserType, postLogin: () =&gt; Nothing)Nothing">logUserIn</a><span class="delimiter">(</span><a href="#230843" title="ProtoUser.this.TheUserType">user</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;account.validated&quot;)" class="string">&quot;account.validated&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49540" title="(n: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;invalid.validation.link&quot;)" class="string">&quot;invalid.validation.link&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * How do we prompt the user for the username.  By default,
   * it's S.??(&quot;email.address&quot;), you can can change it to something else
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="147336">userNameFieldString</a>: <span title="String">String</span> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;email.address&quot;)" class="string">&quot;email.address&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The string that's generated when the user name is not found.  By
   * default: S.??(&quot;email.address.not.found&quot;)
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="147337">userNameNotFoundString</a>: <span title="String">String</span> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;email.address.not.found&quot;)" class="string">&quot;email.address.not.found&quot;</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="147338">loginXhtml</a> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="148543">form</a> method=<span title="scala.xml.Text" class="string">&quot;post&quot;</span> action=<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a><span class="delimiter">}</span>&gt;&lt;<a title="scala.xml.Elem" id="148564">table</a>&gt;&lt;<a title="scala.xml.Elem" id="148565">tr</a>&gt;&lt;<a title="scala.xml.MetaData" id="148571">td</a>
              colspan=<span title="scala.xml.Text" class="string">&quot;2&quot;</span>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;log.in&quot;)" class="string">&quot;log.in&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="148598">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="148599">td</a>&gt;<span class="delimiter">{</span><a href="#147336" title="=&gt; String">userNameFieldString</a><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="148602">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:email /&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="148603">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="148604">td</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="148609">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:password /&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="148610">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="148611">td</a>&gt;&lt;<a title="scala.xml.MetaData" id="148962">a</a> href=<span class="delimiter">{</span><a href="#147226" title="=&gt; List[String]">lostPasswordPath</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
                &gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;recover.password&quot;)" class="string">&quot;recover.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/a&gt;&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="148967">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:submit /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
     &lt;/form&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Given an username (probably email address), find the user
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(username: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]" id="147339">findUserByUserName</a><span class="delimiter">(</span><a title="String" id="149332">username</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[ProtoUser.this.TheUserType]">Box</a><span class="delimiter">[</span>TheUserType<span class="delimiter">]</span>

  <span class="comment">/**
   * Given a unique id, find the user
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(id: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]" id="147340">findUserByUniqueId</a><span class="delimiter">(</span><a title="String" id="190055">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[ProtoUser.this.TheUserType]">Box</a><span class="delimiter">[</span>TheUserType<span class="delimiter">]</span>

  <span class="comment">/**
   * By default, destroy the session on login.
   * Change this is some of the session information needs to
   * be preserved.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="147341">destroySessionOnLogin</a> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="comment">/**
   * If there's any state that you want to capture pre-login
   * to be set post-login (the session is destroyed),
   * then set the state here.  Just make a function
   * that captures the state... that function will be applied
   * post login.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()() =&gt; Unit" id="147342">capturePreLoginState</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="147343">login</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49342" title="=&gt; Boolean">post_?</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49536" title="(n: String)net.liftweb.common.Box[String]">param</a><span class="delimiter">(</span><span title="java.lang.String(&quot;username&quot;)" class="string">&quot;username&quot;</span><span class="delimiter">)</span>.
      <a href="../../../../common/net/liftweb/common/Box.scala.html#27023" title="(f: String =&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType])net.liftweb.common.Box[ProtoUser.this.TheUserType]">flatMap</a><span class="delimiter">(</span><a title="String" id="149331">username</a> =&gt; <a href="#147339" title="(username: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]">findUserByUserName</a><span class="delimiter">(</span><a href="#149331" title="String">username</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Nothing">Full</span><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="149336">user</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148647" title="=&gt; Boolean">validated_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148648" title="(toTest: net.liftweb.common.Box[String])Boolean">testPassword</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49536" title="(n: String)net.liftweb.common.Box[String]">param</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="() =&gt; Unit" id="149352">preLoginState</a> = <a href="#147342" title="()() =&gt; Unit">capturePreLoginState</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="String" id="149353">redir</a> = <a href="#147244" title="object ProtoUser.this.loginRedirect">loginRedirect</a>.<a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75375" title="=&gt; net.liftweb.common.Box[String]">is</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="String">Full</span><span class="delimiter">(</span><a title="String" id="149374">url</a><span class="delimiter">)</span> =&gt;
                <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75381" title="(what: net.liftweb.common.Box[String])net.liftweb.common.Box[String]">loginRedirect</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span>
              <a href="#149374" title="String">url</a>
              <span class="keyword">case</span> <span title="java.lang.String">_</span> =&gt;
                <a href="#147243" title="=&gt; java.lang.String">homePage</a>
            <span class="delimiter">}</span>

            <a href="#147308" title="(who: ProtoUser.this.TheUserType, postLogin: () =&gt; Nothing)Nothing">logUserIn</a><span class="delimiter">(</span><a href="#149336" title="ProtoUser.this.TheUserType">user</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
              <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;logged.in&quot;)" class="string">&quot;logged.in&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

              <a href="#149352" title="()Unit">preLoginState</a><span class="delimiter">(</span><span class="delimiter">)</span>

              <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#149353" title="String">redir</a><span class="delimiter">)</span>
            <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">Full</span><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="149505">user</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148647" title="=&gt; Boolean">validated_?</a> =&gt;
          <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49540" title="(n: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;account.validation.error&quot;)" class="string">&quot;account.validation.error&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49540" title="(n: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;invalid.credentials&quot;)" class="string">&quot;invalid.credentials&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span>, <a href="#147338" title="=&gt; scala.xml.Elem">loginXhtml</a>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;email&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/js/JsCommands.scala.html#150028" title="(in: scala.xml.Elem)scala.xml.NodeSeq">FocusOnLoad</a><span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="150031">input</a> <span class="keyword">type</span>=<span title="scala.xml.Text" class="string">&quot;text&quot;</span> name=<span title="scala.xml.Text" class="string">&quot;username&quot;</span>/&gt;<span class="delimiter">)</span><span class="delimiter">)</span>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;password&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58383" title="(in: scala.xml.Node)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="150091">input</a> <span class="keyword">type</span>=<span title="scala.xml.Text" class="string">&quot;password&quot;</span> name=<span title="scala.xml.Text" class="string">&quot;password&quot;</span>/&gt;<span class="delimiter">)</span>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;submit&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="#147344" title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq">loginSubmitButton</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;log.in&quot;)" class="string">&quot;log.in&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq" id="147344">loginSubmitButton</a><span class="delimiter">(</span><a title="String" id="150151">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="150154">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#147345" title="(name: String, func: () =&gt; Any)scala.xml.Elem">standardSubmitButton</a><span class="delimiter">(</span><a href="#150151" title="String">name</a>, <a href="#150154" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.Elem" id="147345">standardSubmitButton</a><span class="delimiter">(</span><a title="String" id="230819">name</a>: <span title="String">String</span>,  <a title="() =&gt; Any" id="230823">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#14660" title="object net.liftweb.http.SHtml">SHtml</a>.<a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#152863" title="(value: String, func: () =&gt; Any, attrs: net.liftweb.http.SHtml.ElemAttr*)scala.xml.Elem">submit</a><span class="delimiter">(</span><a href="#230819" title="String">name</a>, <a href="#230823" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="147346">lostPasswordXhtml</a> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="228672">form</a> method=<span title="scala.xml.Text" class="string">&quot;post&quot;</span> action=<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a><span class="delimiter">}</span>&gt;
        &lt;<a title="scala.xml.Elem" id="228673">table</a>&gt;&lt;<a title="scala.xml.Elem" id="228674">tr</a>&gt;&lt;<a title="scala.xml.MetaData" id="228680">td</a>
              colspan=<span title="scala.xml.Text" class="string">&quot;2&quot;</span>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;enter.email&quot;)" class="string">&quot;enter.email&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="228685">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="228686">td</a>&gt;<span class="delimiter">{</span><a href="#147336" title="=&gt; String">userNameFieldString</a><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="228687">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:email /&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="228688">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="228689">td</a>&gt;&amp;nbsp;&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="228690">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:submit /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;/table&gt;
     &lt;/form&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType, resetLink: String)scala.xml.Elem" id="147347">passwordResetMailBody</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="230966">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>, <a title="String" id="230967">resetLink</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="scala.xml.Elem">Elem</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.Elem" id="230969">html</a>&gt;
        &lt;<a title="scala.xml.Elem" id="230970">head</a>&gt;
          &lt;<a title="scala.xml.Elem" id="230971">title</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;reset.password.confirmation&quot;)" class="string">&quot;reset.password.confirmation&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/title&gt;
        &lt;/head&gt;
        &lt;<a title="scala.xml.Elem" id="230976">body</a>&gt;
          &lt;<a title="scala.xml.Elem" id="230977">p</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;dear&quot;)" class="string">&quot;dear&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span> <span class="delimiter">{</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148643" title="=&gt; String">getFirstName</a><span class="delimiter">}</span>,
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;click.reset.link&quot;)" class="string">&quot;click.reset.link&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
            &lt;<span title="scala.xml.Elem">br</span>/&gt;&lt;<a title="scala.xml.MetaData" id="230993">a</a> href=<span class="delimiter">{</span><a href="#230967" title="String">resetLink</a><span class="delimiter">}</span>&gt;<span class="delimiter">{</span><a href="#230967" title="String">resetLink</a><span class="delimiter">}</span>&lt;/a&gt;
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            &lt;<span title="scala.xml.Elem">br</span>/&gt;
            <span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;thank.you&quot;)" class="string">&quot;thank.you&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>
          &lt;/p&gt;
        &lt;/body&gt;
     &lt;/html&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Generate the mail bodies to send with the password reset link.
   * By default, just an HTML mail body is generated by calling
   * passwordResetMailBody
   * but you can send additional or alternative mail by overriding this method.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType, resetLink: String)List[net.liftweb.util.Mailer.MailBodyType]" id="147348">generateResetEmailBodies</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="230998">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>,
                                         <a title="String" id="230999">resetLink</a>: <span title="String">String</span><span class="delimiter">)</span>:
  <span title="List[net.liftweb.util.Mailer.MailBodyType]">List</span><span class="delimiter">[</span>MailBodyType<span class="delimiter">]</span> = 
    <span title="(xs: net.liftweb.util.Mailer.MailBodyType*)List[net.liftweb.util.Mailer.MailBodyType]">List</span><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#146712" title="implicit net.liftweb.util.Mailer.xmlToMailBodyType : (html: scala.xml.NodeSeq)net.liftweb.util.Mailer.MailBodyType">xmlToMailBodyType</a><span class="delimiter">(</span><a href="#147347" title="(user: ProtoUser.this.TheUserType, resetLink: String)scala.xml.Elem">passwordResetMailBody</a><span class="delimiter">(</span><a href="#230998" title="ProtoUser.this.TheUserType">user</a>, <a href="#230999" title="String">resetLink</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="=&gt; String" id="147349">passwordResetEmailSubject</a> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;reset.password.request&quot;)" class="string">&quot;reset.password.request&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Send password reset email to the user.  The XHTML version of the mail
   * body is generated by calling passwordResetMailBody.  You can customize the
   * mail sent to users by overriding generateResetEmailBodies to
   * send non-HTML mail or alternative mail bodies.
   */</span>
  <span class="keyword">def</span> <a title="(email: String)Unit" id="147350">sendPasswordReset</a><span class="delimiter">(</span><a title="String" id="228716">email</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#147339" title="(username: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]">findUserByUserName</a><span class="delimiter">(</span><a href="#228716" title="String">email</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Nothing">Full</span><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="231016">user</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148647" title="=&gt; Boolean">validated_?</a> =&gt;
        <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148650" title="()ProtoUser.this.TheUserType">resetUniqueId</a><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge" class="delimiter">(</a><span class="delimiter">)</span>.<a href="#148654" title="=&gt; Boolean">save</a>
        <span class="keyword">val</span> <a title="java.lang.String" id="231019">resetLink</a> = <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49474" title="=&gt; String">hostAndPath</a><span title="(x$1: Any)java.lang.String">+</span>
        <a href="#147229" title="=&gt; List[String]">passwordResetPath</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49043" title="(in: String)java.lang.String">urlEncode</a><span class="delimiter">(</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148651" title="()String">getUniqueId</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="String" id="231020">email</a>: <span title="String">String</span> = <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148645" title="=&gt; String">getEmail</a>

        <a href="../../../../util/net/liftweb/util/Mailer.scala.html#13493" title="object net.liftweb.util.Mailer">Mailer</a>.<a href="../../../../util/net/liftweb/util/Mailer.scala.html#146760" title="(from: net.liftweb.util.Mailer.From, subject: net.liftweb.util.Mailer.Subject, rest: net.liftweb.util.Mailer.MailTypes*)Unit">sendMail</a><span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#230523" title="(address: String, name: net.liftweb.common.Box[String])net.liftweb.util.Mailer.From">From</a><span class="delimiter">(</span><a href="#147332" title="=&gt; java.lang.String">emailFrom</a><span class="delimiter">)</span>,<a href="../../../../util/net/liftweb/util/Mailer.scala.html#230550" title="(subject: String)net.liftweb.util.Mailer.Subject">Subject</a><span class="delimiter">(</span><a href="#147349" title="=&gt; String">passwordResetEmailSubject</a><span class="delimiter">)</span>,
                        <span class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#230564" title="(address: String, name: net.liftweb.common.Box[String])net.liftweb.util.Mailer.To">To</a><span class="delimiter">(</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148645" title="=&gt; String">getEmail</a><span class="delimiter">)</span> <a href="#231033" title="(x: net.liftweb.util.Mailer.MailTypes)List[net.liftweb.util.Mailer.MailTypes]">::</a>
                         <a href="#147348" title="(user: ProtoUser.this.TheUserType, resetLink: String)List[net.liftweb.util.Mailer.MailBodyType]">generateResetEmailBodies</a><span class="delimiter">(</span><a href="#231016" title="ProtoUser.this.TheUserType">user</a>, <a href="#231019" title="java.lang.String">resetLink</a><span class="delimiter">)</span> <a href="#231038" title="(prefix: List[net.liftweb.util.Mailer.MailTypes])List[net.liftweb.util.Mailer.MailTypes]">:::</a>
                         <span class="delimiter">(</span><a href="#147333" title="=&gt; net.liftweb.common.Box[String]">bccEmail</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27051" title="=&gt; List[String]">toList</a>.<span title="(f: String =&gt; net.liftweb.util.Mailer.BCC)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],net.liftweb.util.Mailer.BCC,List[net.liftweb.util.Mailer.BCC]])List[net.liftweb.util.Mailer.BCC]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,net.liftweb.util.Mailer.BCC,List[net.liftweb.util.Mailer.BCC]]" class="delimiter">(</span><a href="../../../../util/net/liftweb/util/Mailer.scala.html#230614" title="(address: String, name: net.liftweb.common.Box[String])net.liftweb.util.Mailer.BCC">BCC</a><span class="delimiter">(</span><a href="#231058" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> :_*<span class="delimiter">)</span>

        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password.reset.email.sent&quot;)" class="string">&quot;password.reset.email.sent&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Nothing">Full</span><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="231119">user</a><span class="delimiter">)</span> =&gt;
        <a href="#147322" title="(user: ProtoUser.this.TheUserType)Unit">sendValidationEmail</a><span class="delimiter">(</span><a href="#231119" title="ProtoUser.this.TheUserType">user</a><span class="delimiter">)</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;account.validation.resent&quot;)" class="string">&quot;account.validation.resent&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49540" title="(n: String)Unit">error</a><span class="delimiter">(</span><a href="#147337" title="=&gt; String">userNameNotFoundString</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="147351">lostPassword</a> = <span class="delimiter">{</span>
    <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span>, <a href="#147346" title="=&gt; scala.xml.Elem">lostPasswordXhtml</a>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;email&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58383" title="(in: scala.xml.Node)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#14660" title="object net.liftweb.http.SHtml">SHtml</a>.<a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#152842" title="(value: String, func: String =&gt; Any, attrs: net.liftweb.http.SHtml.ElemAttr*)scala.xml.Elem">text</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a href="#147350" title="(email: String)Unit">sendPasswordReset</a> _<span class="delimiter">)</span>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;submit&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="#147352" title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq">lostPasswordSubmitButton</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;send.it&quot;)" class="string">&quot;send.it&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq" id="147352">lostPasswordSubmitButton</a><span class="delimiter">(</span><a title="String" id="228761">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="228764">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#147345" title="(name: String, func: () =&gt; Any)scala.xml.Elem">standardSubmitButton</a><span class="delimiter">(</span><a href="#228761" title="String">name</a>, <a href="#228764" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="147353">passwordResetXhtml</a> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="228996">form</a> method=<span title="scala.xml.Text" class="string">&quot;post&quot;</span> action=<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a><span class="delimiter">}</span>&gt;
        &lt;<a title="scala.xml.Elem" id="228997">table</a>&gt;&lt;<a title="scala.xml.Elem" id="228998">tr</a>&gt;&lt;<a title="scala.xml.MetaData" id="229004">td</a> colspan=<span title="scala.xml.Text" class="string">&quot;2&quot;</span>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;reset.your.password&quot;)" class="string">&quot;reset.your.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229009">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229010">td</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;enter.your.new.password&quot;)" class="string">&quot;enter.your.new.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229015">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:pwd/&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229016">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229017">td</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;repeat.your.new.password&quot;)" class="string">&quot;repeat.your.new.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229022">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:pwd/&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229023">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229024">td</a>&gt;&amp;nbsp;&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229025">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:submit/&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;/table&gt;
     &lt;/form&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(id: String)scala.xml.NodeSeq" id="147354">passwordReset</a><span class="delimiter">(</span><a title="String" id="228864">id</a>: <span title="String">String</span><span class="delimiter">)</span> =
  <a href="#147340" title="(id: String)net.liftweb.common.Box[ProtoUser.this.TheUserType]">findUserByUniqueId</a><span class="delimiter">(</span><a href="#228864" title="String">id</a><span class="delimiter">)</span> <span title="scala.xml.NodeSeq" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="scala.xml.NodeSeq">Full</span><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="228868">user</a><span class="delimiter">)</span> =&gt;
      <span class="keyword">def</span> <a title="()Unit" id="228869">finishSet</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148652" title="=&gt; List[net.liftweb.util.FieldError]">validate</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Nothing">Nil</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password.changed&quot;)" class="string">&quot;password.changed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148654" title="=&gt; Boolean">save</a>
            <a href="#147308" title="(who: ProtoUser.this.TheUserType, postLogin: () =&gt; Nothing)Nothing">logUserIn</a><span class="delimiter">(</span><a href="#228868" title="ProtoUser.this.TheUserType">user</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <a title="Unit" id="228967">xs</a> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49552" title="(vi: List[net.liftweb.util.FieldError])Unit">error</a><span class="delimiter">(</span><a href="#228967" title="List[net.liftweb.util.FieldError]">xs</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148650" title="()ProtoUser.this.TheUserType">resetUniqueId</a><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge" class="delimiter">(</a><span class="delimiter">)</span>.<a href="#148654" title="=&gt; Boolean">save</a>

      <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span>, <a href="#147353" title="=&gt; scala.xml.Elem">passwordResetXhtml</a>,
           <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;pwd&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58383" title="(in: scala.xml.Node)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#14660" title="object net.liftweb.http.SHtml">SHtml</a>.<a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#152828" title="(value: String, func: net.liftweb.http.S.AFuncHolder, attrs: net.liftweb.http.SHtml.ElemAttr*)scala.xml.Elem">password_*</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,<span class="delimiter">(</span>p: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
          <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148653" title="(in: List[String])ProtoUser.this.TheUserType">setPasswordFromListString</a><span class="delimiter">(</span><a href="#229059" title="List[String]">p</a><span class="delimiter">)</span><span class="delimiter">)</span>,
           <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;submit&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="#147355" title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq">resetPasswordSubmitButton</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;set.password&quot;)" class="string">&quot;set.password&quot;</span><span class="delimiter">)</span>, <a href="#228869" title="()Unit">finishSet</a> _<span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49540" title="(n: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password.link.invalid&quot;)" class="string">&quot;password.link.invalid&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq" id="147355">resetPasswordSubmitButton</a><span class="delimiter">(</span><a title="String" id="229106">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="229109">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#147345" title="(name: String, func: () =&gt; Any)scala.xml.Elem">standardSubmitButton</a><span class="delimiter">(</span><a href="#229106" title="String">name</a>, <a href="#229109" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.Elem" id="147356">changePasswordXhtml</a> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="229564">form</a> method=<span title="scala.xml.Text" class="string">&quot;post&quot;</span> action=<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a><span class="delimiter">}</span>&gt;
        &lt;<a title="scala.xml.Elem" id="229565">table</a>&gt;&lt;<a title="scala.xml.Elem" id="229566">tr</a>&gt;&lt;<a title="scala.xml.MetaData" id="229572">td</a> colspan=<span title="scala.xml.Text" class="string">&quot;2&quot;</span>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;change.password&quot;)" class="string">&quot;change.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229577">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229578">td</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;old.password&quot;)" class="string">&quot;old.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229583">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:old_pwd /&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229584">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229585">td</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;new.password&quot;)" class="string">&quot;new.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229590">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:new_pwd /&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229591">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229592">td</a>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;repeat.password&quot;)" class="string">&quot;repeat.password&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229597">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:new_pwd /&gt;&lt;/td&gt;&lt;/tr&gt;
          &lt;<a title="scala.xml.Elem" id="229598">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229599">td</a>&gt;&amp;nbsp;&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229600">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:submit /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;/table&gt;
     &lt;/form&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="147357">changePassword</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="ProtoUser.this.TheUserType" id="229506">user</a> = <a href="#147318" title="=&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType]">currentUser</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; ProtoUser.this.TheUserType">open_!</a> <span class="comment">// we can do this because the logged in test has happened</span>
    <span class="keyword">var</span> <a title="java.lang.String" id="229507">oldPassword</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">var</span> <a title="List[String]" id="229508">newPassword</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

    <span class="keyword">def</span> <a title="()Unit" id="229509">testAndSet</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148648" title="(toTest: net.liftweb.common.Box[String])Boolean">testPassword</a><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: java.lang.String)net.liftweb.common.Full[java.lang.String]">Full</a><span class="delimiter">(</span><a href="#229507" title="java.lang.String">oldPassword</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49540" title="(n: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;wrong.old.password&quot;)" class="string">&quot;wrong.old.password&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148653" title="(in: List[String])ProtoUser.this.TheUserType">setPasswordFromListString</a><span class="delimiter">(</span><a href="#229508" title="List[String]">newPassword</a><span class="delimiter">)</span>
        <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148652" title="=&gt; List[net.liftweb.util.FieldError]">validate</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Nothing">Nil</span> =&gt; <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">user</a>.<a href="#148654" title="=&gt; Boolean">save</a>; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password.changed&quot;)" class="string">&quot;password.changed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Unit" id="229543">xs</a> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49552" title="(vi: List[net.liftweb.util.FieldError])Unit">error</a><span class="delimiter">(</span><a href="#229543" title="List[net.liftweb.util.FieldError]">xs</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span>, <a href="#147356" title="=&gt; scala.xml.Elem">changePasswordXhtml</a>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;old_pwd&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58383" title="(in: scala.xml.Node)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#14660" title="object net.liftweb.http.SHtml">SHtml</a>.<a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#152858" title="(value: String, func: String =&gt; Any, attrs: net.liftweb.http.SHtml.ElemAttr*)scala.xml.Elem">password</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a title="String" id="229634">s</a> =&gt; <a href="#229507" title="java.lang.String">oldPassword</a> = <a href="#229634" title="String">s</a><span class="delimiter">)</span>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;new_pwd&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58383" title="(in: scala.xml.Node)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#14660" title="object net.liftweb.http.SHtml">SHtml</a>.<a href="../../../../webkit/net/liftweb/http/SHtml.scala.html#152828" title="(value: String, func: net.liftweb.http.S.AFuncHolder, attrs: net.liftweb.http.SHtml.ElemAttr*)scala.xml.Elem">password_*</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a href="../../../../webkit/net/liftweb/http/S.scala.html#229677" title="(func: List[String] =&gt; Any)net.liftweb.http.S.AFuncHolder">LFuncHolder</a><span class="delimiter">(</span><a title="List[String]" id="229691">s</a> =&gt; <a href="#229508" title="List[String]">newPassword</a> = <a href="#229691" title="List[String]">s</a><span class="delimiter">)</span><span class="delimiter">)</span>,
         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;submit&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="#147358" title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq">changePasswordSubmitButton</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;change&quot;)" class="string">&quot;change&quot;</span><span class="delimiter">)</span>, <a href="#229509" title="()Unit">testAndSet</a> _<span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq" id="147358">changePasswordSubmitButton</a><span class="delimiter">(</span><a title="String" id="229733">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="229736">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#147345" title="(name: String, func: () =&gt; Any)scala.xml.Elem">standardSubmitButton</a><span class="delimiter">(</span><a href="#229733" title="String">name</a>, <a href="#229736" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType)scala.xml.Elem" id="147359">editXhtml</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="229363">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="229375">form</a> method=<span title="scala.xml.Text" class="string">&quot;post&quot;</span> action=<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49359" title="=&gt; String">uri</a><span class="delimiter">}</span>&gt;
        &lt;<a title="scala.xml.Elem" id="229376">table</a>&gt;&lt;<a title="scala.xml.Elem" id="229377">tr</a>&gt;&lt;<a title="scala.xml.MetaData" id="229383">td</a> colspan=<span title="scala.xml.Text" class="string">&quot;2&quot;</span>&gt;<span class="delimiter">{</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;edit&quot;)" class="string">&quot;edit&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
          <span class="delimiter">{</span><a href="#147367" title="(user: ProtoUser.this.TheUserType, ignorePassword: Boolean, fields: List[ProtoUser.this.FieldPointerType])scala.xml.NodeSeq">localForm</a><span class="delimiter">(</span><a href="#229363" title="ProtoUser.this.TheUserType">user</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#147216" title="=&gt; List[ProtoUser.this.FieldPointerType]">editFields</a><span class="delimiter">)</span><span class="delimiter">}</span>
          &lt;<a title="scala.xml.Elem" id="229388">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="229389">td</a>&gt;&amp;nbsp;&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="229390">td</a>&gt;&lt;<span title="scala.xml.Elem">user</span>:submit/&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;/table&gt;
     &lt;/form&gt;<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="object ProtoUser.this.editFunc" id="147360">editFunc</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../../webkit/net/liftweb/http/Vars.scala.html#14774" title="net.liftweb.http.RequestVar[net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq]]">RequestVar</a><span class="delimiter">[</span>Box<span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; NodeSeq<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#10581" title="object net.liftweb.common.Empty">Empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="229225">__nameSalt</a> = <a href="../../../../util/net/liftweb/util/Helpers.scala.html#13346" title="object net.liftweb.util.Helpers">Helpers</a>.<a href="../../../../util/net/liftweb/util/HttpHelpers.scala.html#49067" title="=&gt; String">nextFuncName</a>
  <span class="delimiter">}</span>


  <span class="comment">/**
   * If there's any mutation to do to the user on retrieval for
   * editting, override this method and mutate the user.  This can
   * be used to pull query parameters from the request and assign
   * certain fields. Issue #722
   *
   * @param user the user to mutate
   * @return the mutated user
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType)ProtoUser.this.TheUserType" id="147362">mutateUserOnEdit</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="229333">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a><span class="delimiter">)</span>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a> = <a href="#229333" title="ProtoUser.this.TheUserType">user</a>

  <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="147363">edit</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="ProtoUser.this.TheUserType" id="229329">theUser</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a> = 
      <a href="#147362" title="(user: ProtoUser.this.TheUserType)ProtoUser.this.TheUserType">mutateUserOnEdit</a><span class="delimiter">(</span><a href="#147318" title="=&gt; net.liftweb.common.Box[ProtoUser.this.TheUserType]">currentUser</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27015" title="=&gt; ProtoUser.this.TheUserType">open_!</a><span class="delimiter">)</span> <span class="comment">// we know we're logged in</span>

    <span class="keyword">val</span> <a title="String" id="229330">theName</a> = <a href="#147238" title="=&gt; List[String]">editPath</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="()Unit" id="229331">testEdit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">theUser</a>.<a href="#148652" title="=&gt; List[net.liftweb.util.FieldError]">validate</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Nothing">Nil</span> =&gt;
          <a href="#147208" title="implicit net.liftweb.proto.ProtoUser.typeToBridge : (in: ProtoUser.this.TheUserType)ProtoUser.this.UserBridge">theUser</a>.<a href="#148654" title="=&gt; Boolean">save</a>
          <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49544" title="(n: String)Unit">notice</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;profile.updated&quot;)" class="string">&quot;profile.updated&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <a title="Unit" id="229353">xs</a> =&gt; <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49552" title="(vi: List[net.liftweb.util.FieldError])Unit">error</a><span class="delimiter">(</span><a href="#229353" title="List[net.liftweb.util.FieldError]">xs</a><span class="delimiter">)</span> ; <a href="../../../../util/net/liftweb/util/AnyVar.scala.html#75381" title="(what: net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq])net.liftweb.common.Box[() =&gt; scala.xml.NodeSeq]">editFunc</a><span title="Unit" class="delimiter">(</span><a href="../../../../common/net/liftweb/common/Box.scala.html#27086" title="(value: () =&gt; scala.xml.NodeSeq)net.liftweb.common.Full[() =&gt; scala.xml.NodeSeq]">Full</a><span class="delimiter">(</span><a href="#229332" title="=&gt; scala.xml.NodeSeq">innerEdit</a> _<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; scala.xml.NodeSeq" id="229332">innerEdit</a> = <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49008" title="(namespace: String, xml: scala.xml.NodeSeq, params: net.liftweb.util.Helpers.BindParam*)scala.xml.NodeSeq">bind</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span>, <a href="#147359" title="(user: ProtoUser.this.TheUserType)scala.xml.Elem">editXhtml</a><span class="delimiter">(</span><a href="#229329" title="ProtoUser.this.TheUserType">theUser</a><span class="delimiter">)</span>,
                         <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#49003" title="implicit net.liftweb.util.BindHelpers.strToSuperArrowAssoc : (in: String)net.liftweb.util.Helpers.SuperArrowAssoc" class="string">&quot;submit&quot;</a> <a href="../../../../util/net/liftweb/util/BindHelpers.scala.html#58381" title="(in: scala.xml.NodeSeq)net.liftweb.util.Helpers.TheBindParam">-&gt;</a> <a href="#147364" title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq">editSubmitButton</a><span class="delimiter">(</span><a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49354" title="(str: String)String">??</a><span class="delimiter">(</span><span title="java.lang.String(&quot;edit&quot;)" class="string">&quot;edit&quot;</span><span class="delimiter">)</span>, <a href="#229331" title="()Unit">testEdit</a> _<span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#229332" title="=&gt; scala.xml.NodeSeq">innerEdit</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, func: () =&gt; Any)scala.xml.NodeSeq" id="147364">editSubmitButton</a><span class="delimiter">(</span><a title="String" id="229416">name</a>: <span title="String">String</span>, <a title="() =&gt; Any" id="229419">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <a href="#147345" title="(name: String, func: () =&gt; Any)scala.xml.Elem">standardSubmitButton</a><span class="delimiter">(</span><a href="#229416" title="String">name</a>, <a href="#229419" title="() =&gt; Any">func</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Nothing" id="147365">logout</a> = <span class="delimiter">{</span>
    <a href="#147310" title="=&gt; Unit">logoutCurrentUser</a>
    <a href="../../../../webkit/net/liftweb/http/S.scala.html#14641" title="object net.liftweb.http.S">S</a>.<a href="../../../../webkit/net/liftweb/http/S.scala.html#49366" title="(where: String)Nothing">redirectTo</a><span class="delimiter">(</span><a href="#147243" title="=&gt; java.lang.String">homePage</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Given an instance of TheCrudType and FieldPointerType, convert
   * that to an actual instance of a BaseField on the instance of TheCrudType
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(instance: ProtoUser.this.TheUserType, pointer: ProtoUser.this.FieldPointerType)net.liftweb.common.Box[net.liftweb.util.BaseField]" id="147366">computeFieldFromPointer</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="189963">instance</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>, <a title="ProtoUser.this.FieldPointerType" id="189964">pointer</a>: <a href="#147212" title="ProtoUser.this.FieldPointerType">FieldPointerType</a><span class="delimiter">)</span>: <a href="../../../../common/net/liftweb/common/Box.scala.html#10575" title="net.liftweb.common.Box[net.liftweb.util.BaseField]">Box</a><span class="delimiter">[</span>BaseField<span class="delimiter">]</span>



  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(user: ProtoUser.this.TheUserType, ignorePassword: Boolean, fields: List[ProtoUser.this.FieldPointerType])scala.xml.NodeSeq" id="147367">localForm</a><span class="delimiter">(</span><a title="ProtoUser.this.TheUserType" id="228529">user</a>: <a href="#147206" title="ProtoUser.this.TheUserType">TheUserType</a>, <a title="Boolean" id="228530">ignorePassword</a>: <span title="Boolean">Boolean</span>, <a title="List[ProtoUser.this.FieldPointerType]" id="228531">fields</a>: <span title="List[ProtoUser.this.FieldPointerType]">List</span><span class="delimiter">[</span>FieldPointerType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="ProtoUser.this.FieldPointerType" id="231289">pointer</a> &lt;- <a href="#228531" title="(f: ProtoUser.this.FieldPointerType =&gt; scala.collection.GenTraversableOnce[scala.xml.Elem])(implicit bf: scala.collection.generic.CanBuildFrom[List[ProtoUser.this.FieldPointerType],scala.xml.Elem,List[scala.xml.Elem]])List[scala.xml.Elem]">fields</a>
      <a title="net.liftweb.util.BaseField" id="231306">field</a> &lt;- <a href="#147366" title="(instance: ProtoUser.this.TheUserType, pointer: ProtoUser.this.FieldPointerType)net.liftweb.common.Box[net.liftweb.util.BaseField]">computeFieldFromPointer</a><span class="delimiter">(</span><a href="#228529" title="ProtoUser.this.TheUserType">user</a>, <a href="#231289" title="ProtoUser.this.FieldPointerType">pointer</a><span class="delimiter">)</span>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27051" title="(f: net.liftweb.util.BaseField =&gt; scala.collection.GenTraversableOnce[scala.xml.Elem])(implicit bf: scala.collection.generic.CanBuildFrom[List[net.liftweb.util.BaseField],scala.xml.Elem,List[scala.xml.Elem]])List[scala.xml.Elem]">toList</a>
      <span class="keyword">if</span> <a href="#231306" title="net.liftweb.util.BaseField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49782" title="=&gt; Boolean">show_?</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#228530" title="Boolean">ignorePassword</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#147213" title="implicit net.liftweb.proto.ProtoUser.buildFieldBridge : (from: ProtoUser.this.FieldPointerType)ProtoUser.this.FieldPointerBridge">pointer</a>.<a href="#148661" title="=&gt; Boolean">isPasswordField_?</a><span class="delimiter">)</span>
      <a title="scala.xml.NodeSeq" id="231326">form</a> &lt;- <a href="#231306" title="net.liftweb.util.BaseField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49781" title="=&gt; net.liftweb.common.Box[scala.xml.NodeSeq]">toForm</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27051" title="(f: scala.xml.NodeSeq =&gt; scala.xml.Elem)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.xml.NodeSeq],scala.xml.Elem,List[scala.xml.Elem]])List[scala.xml.Elem]">toList</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> &lt;<a title="scala.xml.Elem" id="231327">tr</a>&gt;&lt;<a title="scala.xml.Elem" id="231328">td</a>&gt;<span class="delimiter">{</span><a href="#231306" title="net.liftweb.util.BaseField">field</a>.<a href="../../../../util/net/liftweb/util/BaseField.scala.html#49770" title="=&gt; String">displayName</a><span class="delimiter">}</span>&lt;/td&gt;&lt;<a title="scala.xml.Elem" id="231329">td</a>&gt;<span class="delimiter">{</span><a href="#231326" title="scala.xml.NodeSeq">form</a><span class="delimiter">}</span>&lt;/td&gt;&lt;/tr&gt;
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(in: scala.xml.NodeSeq)scala.xml.NodeSeq" id="147368">wrapIt</a><span class="delimiter">(</span><a title="scala.xml.NodeSeq" id="228192">in</a>: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> =
  <a href="#147217" title="=&gt; net.liftweb.common.Box[scala.xml.Node]">screenWrap</a>.<a href="../../../../common/net/liftweb/common/Box.scala.html#27020" title="(f: scala.xml.Node =&gt; scala.xml.Node)net.liftweb.common.Box[scala.xml.Node]">map</a><span class="delimiter">(</span><span title="scala.xml.transform.RuleTransformer" class="keyword">new</span> <span title="scala.xml.transform.RuleTransformer">RuleTransformer</span><span class="delimiter">(</span><a href="#231434" title="scala.xml.transform.RewriteRule" class="keyword">new</a> <a title="anonymous class $anon extends scala.xml.transform.RewriteRule" id="231434">RewriteRule</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(n: scala.xml.Node)Seq[scala.xml.Node]" id="231446">transform</a><span class="delimiter">(</span><a title="scala.xml.Node" id="231448">n</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <a href="#231448" title="scala.xml.Node">n</a> <span title="Seq[scala.xml.Node]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="scala.xml.NodeSeq" id="231453">e</a>: <span title="scala.xml.Elem">Elem</span> <span class="keyword">if</span> <span title="java.lang.String(&quot;bind&quot;)" class="string">&quot;bind&quot;</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#231453" title="scala.xml.Elem">e</a>.<span title="=&gt; String">label</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="java.lang.String(&quot;lift&quot;)" class="string">&quot;lift&quot;</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#231453" title="scala.xml.Elem">e</a>.<span title="=&gt; String">prefix</span> =&gt; <a href="#228192" title="scala.xml.NodeSeq">in</a>
          <span class="keyword">case</span> <span title="scala.xml.Node">_</span> =&gt; <a href="#231448" title="scala.xml.Node">n</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../common/net/liftweb/common/Box.scala.html#27017" title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">openOr</a> <a href="#228192" title="scala.xml.NodeSeq">in</a>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>