<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/concurrent/Future.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

<span class="keyword">package</span> scala.concurrent



<span class="keyword">import</span> java.util.concurrent.<span class="delimiter">{</span> ConcurrentLinkedQueue, TimeUnit, Callable <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.<span title="java.util.concurrent.TimeUnit.type">TimeUnit</span>.<span class="delimiter">{</span> NANOSECONDS =&gt; NANOS, MILLISECONDS â‡’ MILLIS <span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.<span class="delimiter">{</span> Iterable =&gt; JIterable <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.<span class="delimiter">{</span> LinkedList =&gt; JLinkedList <span class="delimiter">}</span>
<span class="keyword">import</span> java.<span class="delimiter">{</span> lang =&gt; jl <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.atomic.<span class="delimiter">{</span> AtomicReferenceFieldUpdater, AtomicInteger, AtomicBoolean <span class="delimiter">}</span>

<span class="keyword">import</span> scala.concurrent.util.Duration
<span class="keyword">import</span> scala.concurrent.impl.NonFatal
<span class="keyword">import</span> scala.Option

<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.collection.mutable.Stack
<span class="keyword">import</span> scala.collection.mutable.Builder
<span class="keyword">import</span> scala.collection.generic.CanBuildFrom
<span class="keyword">import</span> <a href="../language.scala.html#2216" title="language.type">language</a>.higherKinds



/** The trait that represents futures.
 *
 *  Asynchronous computations that yield futures are created with the `future` call:
 *
 *  {{{
 *  val s = &quot;Hello&quot;
 *  val f: Future[String] = future {
 *    s + &quot; future!&quot;
 *  }
 *  f onSuccess {
 *    case msg =&gt; println(msg)
 *  }
 *  }}}
 *
 *  @author  Philipp Haller, Heather Miller, Aleksandar Prokopec, Viktor Klang
 *
 *  @define multipleCallbacks
 *  Multiple callbacks may be registered; there is no guarantee that they will be
 *  executed in a particular order.
 *
 *  @define caughtThrowables
 *  The future may contain a throwable object and this means that the future failed.
 *  Futures obtained through combinators have the same exception as the future they were obtained from.
 *  The following throwable objects are not contained in the future:
 *  - `Error` - errors are not contained within futures
 *  - `InterruptedException` - not contained within futures
 *  - all `scala.util.control.ControlThrowable` except `NonLocalReturnControl` - not contained within futures
 *
 *  Instead, the future is completed with a ExecutionException with one of the exceptions above
 *  as the cause.
 *  If a future is failed with a `scala.runtime.NonLocalReturnControl`,
 *  it is completed with a value instead from that throwable instead instead.
 *
 *  @define nonDeterministic
 *  Note: using this method yields nondeterministic dataflow programs.
 *
 *  @define forComprehensionExamples
 *  Example:
 *
 *  {{{
 *  val f = future { 5 }
 *  val g = future { 3 }
 *  val h = for {
 *    x: Int &lt;- f // returns Future(5)
 *    y: Int &lt;- g // returns Future(5)
 *  } yield x + y
 *  }}}
 *
 *  is translated to:
 *
 *  {{{
 *  f flatMap { (x: Int) =&gt; g map { (y: Int) =&gt; x + y } }
 *  }}}
 */
<span class="keyword">trait</span> <a title="trait Future[+T] extends Object with scala.concurrent.Awaitable[T]" id="16707">Future</a><span class="delimiter">[</span>+<a title="" id="16873">T</a><span class="delimiter">]</span> <a href="../Unit.scala.html#2389" title="Unit" class="keyword">extends</a> <a href="Awaitable.scala.html#16521" title="scala.concurrent.Awaitable[T]">Awaitable</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>

  /* Callbacks */

  /** When this future is completed successfully (i.e. with a value),
   *  apply the provided partial function to the value if the partial function
   *  is defined at that value.
   *
   *  If the future has already been completed with a value,
   *  this will either be applied immediately or be scheduled asynchronously.
   *
   *  $multipleCallbacks
   */
  <span class="keyword">def</span> <a title="[U](pf: PartialFunction[T,U])Future.this.type" id="405479">onSuccess</a><span class="delimiter">[</span><a title="" id="405481">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[T,U]" id="405890">pf</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[T,U]">PartialFunction</a><span class="delimiter">[</span>T, U<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <a href="#405485" title="(func: Either[Throwable,T] =&gt; Any)Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],Any] with Serializable" id="405899" class="delimiter">{</a>
    <span class="keyword">case</span> Left<a href="#405912" title="Any" id="405913" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; // do nothing
    <span class="keyword">case</span> Right<a href="#405912" title="Any" id="405914" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt; <a href="#405915" title="(x: Any)Any" class="keyword">if</a> <span class="delimiter">(</span><a href="#405890" title="PartialFunction[T,U]">pf</a> <a href="../PartialFunction.scala.html#59566" title="(x: T)Boolean">isDefinedAt</a> v<span class="delimiter">)</span> <a href="../Function1.scala.html#59555" title="(v1: T)U">pf</a><span class="delimiter">(</span>v<span class="delimiter">)</span> <span class="keyword">else</span> <span title="Unit" class="delimiter">{</span> /*do nothing*/ <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** When this future is completed with a failure (i.e. with a throwable),
   *  apply the provided callback to the throwable.
   *
   *  $caughtThrowables
   *
   *  If the future has already been completed with a failure,
   *  this will either be applied immediately or be scheduled asynchronously.
   *
   *  Will not be called in case that the future is completed with a value.
   *
   *  $multipleCallbacks
   */
  <span class="keyword">def</span> <a title="[U](callback: PartialFunction[Throwable,U])Future.this.type" id="405482">onFailure</a><span class="delimiter">[</span><a title="" id="405484">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Throwable,U]" id="405931">callback</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[Throwable,U]">PartialFunction</a><span class="delimiter">[</span>Throwable, U<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <a href="#405485" title="(func: Either[Throwable,T] =&gt; Any)Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],Any] with Serializable" id="405937" class="delimiter">{</a>
    <span class="keyword">case</span> Left<a href="#405950" title="Any" id="405951" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#405953" title="(x: Any)Any" class="keyword">if</a> <span class="delimiter">(</span><a href="ConcurrentPackageObject.scala.html#56856" title="(t: Throwable)Boolean">isFutureThrowable</a><span class="delimiter">(</span>t<span class="delimiter">)</span> <a href="../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#405931" title="PartialFunction[Throwable,U]">callback</a>.<a href="../PartialFunction.scala.html#59566" title="(x: Throwable)Boolean">isDefinedAt</a><span class="delimiter">(</span>t<span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Function1.scala.html#59555" title="(v1: Throwable)U">callback</a><span class="delimiter">(</span>t<span class="delimiter">)</span> <span class="keyword">else</span> <span title="Unit" class="delimiter">{</span> /*do nothing*/ <span class="delimiter">}</span>
    <span class="keyword">case</span> Right<a href="#405950" title="Any" id="405952" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt; // do nothing
  <span class="delimiter">}</span>

  /** When this future is completed, either through an exception, or a value,
   *  apply the provided function.
   *
   *  If the future has already been completed,
   *  this will either be applied immediately or be scheduled asynchronously.
   *
   *  $multipleCallbacks
   */
  <span class="keyword">def</span> <a title="[U](func: Either[Throwable,T] =&gt; U)Future.this.type" id="405485">onComplete</a><span class="delimiter">[</span><a title="" id="405487">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Either[Throwable,T] =&gt; U" id="405893">func</a>: Either<span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> =&gt; U<span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>


  /* Miscellaneous */

  /** Creates a new promise.
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[S]=&gt; scala.concurrent.Promise[S]" id="405488">newPromise</a><span class="delimiter">[</span><a title="" id="405490">S</a><span class="delimiter">]</span>: <a href="Promise.scala.html#16689" title="scala.concurrent.Promise[S]">Promise</a><span class="delimiter">[</span>S<span class="delimiter">]</span>

  /** Returns whether the future has already been completed with
   *  a value or an exception.
   *
   *  $nonDeterministic
   *
   *  @return    `true` if the future is already completed, `false` otherwise
   */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="405491">isCompleted</a>: <a href="../Boolean.scala.html#2218" title="Boolean">Boolean</a>

  /** The value of this `Future`.
   *
   *  If the future is not completed the returned value will be `None`.
   *  If the future is completed the value will be `Some(Success(t))`
   *  if it contains a valid result, or `Some(Failure(error))` if it contains
   *  an exception.
   */
  <span class="keyword">def</span> <a title="=&gt; Option[Either[Throwable,T]]" id="405492">value</a>: <a href="../Option.scala.html#1510" title="Option[Either[Throwable,T]]">Option</a><span class="delimiter">[</span>Either<span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span><span class="delimiter">]</span>


  /* Projections */

  /** Returns a failed projection of this future.
   *
   *  The failed projection is a future holding a value of type `Throwable`.
   *
   *  It is completed with a value which is the throwable of the original future
   *  in case the original future is failed.
   *
   *  It is failed with a `NoSuchElementException` if the original future is completed successfully.
   *
   *  Blocking on this future returns a value if the original future is completed with an exception
   *  and throws a corresponding exception if the original future fails.
   */
  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.Future[Throwable]" id="405493">failed</a>: <a href="#16707" title="scala.concurrent.Future[Throwable]">Future</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[Throwable]" id="405977">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[Throwable]" class="delimiter">[</span><span title="Throwable">Throwable</span><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[Throwable])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="405981" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#405993" title="p.type" id="405994" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#405977" title="scala.concurrent.Promise[Throwable]">p</a> <a href="#405996" title="(x: p.type)p.type">success</a> t
      <span class="keyword">case</span> Right<a href="#405993" title="p.type" id="405995" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt; <a href="#405977" title="scala.concurrent.Promise[Throwable]">p</a> <a href="#405996" title="(x: p.type)p.type">failure</a> <span class="delimiter">(</span><span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#56968" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;Future.failed not completed with a throwable. Instead completed with: &quot;)" class="string">&quot;Future.failed not completed with a throwable. Instead completed with: &quot;</span> <span title="(x$1: Any)String">+</span> v<span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#405977" title="scala.concurrent.Promise[Throwable]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[Throwable]">future</a>
  <span class="delimiter">}</span>


  /* Monadic operations */

  /** Asynchronously processes the value in the future once the value becomes available.
   *
   *  Will not be called if the future fails.
   */
  <span class="keyword">def</span> <a title="[U](f: T =&gt; U)Unit" id="405494">foreach</a><span class="delimiter">[</span><a title="" id="405496">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; U" id="406012">f</a>: T =&gt; U<span class="delimiter">)</span>: <a href="../Unit.scala.html#2389" title="Unit">Unit</a> = <a href="#405485" title="(func: Either[Throwable,T] =&gt; Any)Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],Any] with Serializable" id="406018" class="delimiter">{</a>
    <span class="keyword">case</span> Right<a href="#406029" title="Any" id="406030" class="delimiter">(</a>r<span class="delimiter">)</span> =&gt; <a href="../Function1.scala.html#59555" title="(v1: T)U">f</a><a href="#406033" title="(x: Any)Any" class="delimiter">(</a>r<span class="delimiter">)</span>
    <span class="keyword">case</span> Left<a href="#406029" title="Any" id="406032" class="delimiter">(</a>_<span class="delimiter">)</span>  =&gt; // do nothing
  <span class="delimiter">}</span>

  /** Creates a new future by applying a function to the successful result of
   *  this future. If this future is completed with an exception then the new
   *  future will also contain this exception.
   *
   *  $forComprehensionExample
   */
  <span class="keyword">def</span> <a title="[S](f: T =&gt; S)scala.concurrent.Future[S]" id="405497">map</a><span class="delimiter">[</span><a title="" id="405499">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; S" id="406049">f</a>: T =&gt; S<span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="406052">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#405499" title="S">S</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[S])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406056" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406084" title="p.type" id="406085" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#406052" title="scala.concurrent.Promise[S]">p</a> <a href="#406087" title="(x: p.type)p.type">failure</a> t
      <span class="keyword">case</span> Right<a href="#406084" title="p.type" id="406086" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt;
        <a href="#406087" title="(x: p.type)p.type" id="406075" class="keyword">try</a> <a href="#406052" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#405577" title="(v: S)p.type">success</a> <a href="../Function1.scala.html#59555" title="(v1: T)S">f</a><span class="delimiter">(</span>v<span class="delimiter">)</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="impl/NonFatal.scala.html#406065" title="Option[Throwable]" id="406082">NonFatal</a><span class="delimiter">(</span>t<span class="delimiter">)</span> =&gt; <a href="#406052" title="scala.concurrent.Promise[S]">p</a> <a href="#406078" title="(x: p.type)p.type">complete</a> <a href="ConcurrentPackageObject.scala.html#56860" title="(throwable: Throwable)Either[Throwable,Nothing]">resolver</a><span class="delimiter">(</span>t<span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#406052" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new future by applying a function to the successful result of
   *  this future, and returns the result of the function as the new future.
   *  If this future is completed with an exception then the new future will
   *  also contain this exception.
   *
   *  $forComprehensionExample
   */
  <span class="keyword">def</span> <a title="[S](f: T =&gt; scala.concurrent.Future[S])scala.concurrent.Future[S]" id="405500">flatMap</a><span class="delimiter">[</span><a title="" id="405502">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; scala.concurrent.Future[S]" id="406103">f</a>: T =&gt; Future<span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="406106">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#405502" title="S">S</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; Object)Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],Object] with Serializable" id="406110" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406181" title="Object" id="406182" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#406106" title="scala.concurrent.Promise[S]">p</a> <a href="#406184" title="(x: Object)Object">failure</a> t
      <span class="keyword">case</span> Right<a href="#406181" title="Object" id="406183" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt;
        <a href="#406184" title="(x: Object)Object" id="406172" class="keyword">try</a> <span class="delimiter">{</span>
          <a href="../Function1.scala.html#59555" title="(v1: T)scala.concurrent.Future[S]">f</a><span class="delimiter">(</span>v<span class="delimiter">)</span> <a href="#405485" title="(func: Either[Throwable,S] =&gt; scala.concurrent.Promise[S])scala.concurrent.Future[S]">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,S],p.type] with Serializable" id="406124" class="delimiter">{</a>
            <span class="keyword">case</span> Left<a href="#406134" title="p.type" id="406135" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#406106" title="scala.concurrent.Promise[S]">p</a> <a href="#406137" title="(x: p.type)p.type">failure</a> t
            <span class="keyword">case</span> Right<a href="#406134" title="p.type" id="406136" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt; <a href="#406106" title="scala.concurrent.Promise[S]">p</a> <a href="#406137" title="(x: p.type)p.type">success</a> v
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="impl/NonFatal.scala.html#406065" title="Option[Throwable]" id="406179">NonFatal</a><span class="delimiter">(</span>t<span class="delimiter">)</span> =&gt; <a href="#406106" title="scala.concurrent.Promise[S]">p</a> <a href="#406175" title="(x: Object)Object">complete</a> <a href="ConcurrentPackageObject.scala.html#56860" title="(throwable: Throwable)Either[Throwable,Nothing]">resolver</a><span class="delimiter">(</span>t<span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#406106" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new future by filtering the value of the current future with a predicate.
   *
   *  If the current future contains a value which satisfies the predicate, the new future will also hold that value.
   *  Otherwise, the resulting future will fail with a `NoSuchElementException`.
   *
   *  If the current future fails, then the resulting future also fails.
   *
   *  Example:
   *  {{{
   *  val f = future { 5 }
   *  val g = f filter { _ % 2 == 1 }
   *  val h = f filter { _ % 2 == 0 }
   *  await(g, 0) // evaluates to 5
   *  await(h, 0) // throw a NoSuchElementException
   *  }}}
   */
  <span class="keyword">def</span> <a title="(pred: T =&gt; Boolean)scala.concurrent.Future[T]" id="405503">filter</a><span class="delimiter">(</span><a title="T =&gt; Boolean" id="406200">pred</a>: T =&gt; Boolean<span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[T]" id="406202">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[T]" class="delimiter">[</span><a href="#16873" title="T">T</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[T])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406206" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406232" title="p.type" id="406233" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#406202" title="scala.concurrent.Promise[T]">p</a> <a href="#406235" title="(x: p.type)p.type">failure</a> t
      <span class="keyword">case</span> Right<a href="#406232" title="p.type" id="406234" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt;
        <a href="#406235" title="(x: p.type)p.type" id="406223" class="keyword">try</a> <span class="delimiter">{</span>
          <span title="p.type" class="keyword">if</span> <span class="delimiter">(</span><a href="../Function1.scala.html#59555" title="(v1: T)Boolean">pred</a><span class="delimiter">(</span>v<span class="delimiter">)</span><span class="delimiter">)</span> <a href="#406202" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#405577" title="(v: T)p.type">success</a> v
          <span class="keyword">else</span> <a href="#406202" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#405579" title="(t: Throwable)p.type">failure</a> <span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#56968" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;Future.filter predicate is not satisfied by: &quot;)" class="string">&quot;Future.filter predicate is not satisfied by: &quot;</span> <span title="(x$1: Any)String">+</span> v<span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="impl/NonFatal.scala.html#406065" title="Option[Throwable]" id="406230">NonFatal</a><span class="delimiter">(</span>t<span class="delimiter">)</span> =&gt; <a href="#406202" title="scala.concurrent.Promise[T]">p</a> <a href="#406226" title="(x: p.type)p.type">complete</a> <a href="ConcurrentPackageObject.scala.html#56860" title="(throwable: Throwable)Either[Throwable,Nothing]">resolver</a><span class="delimiter">(</span>t<span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#406202" title="scala.concurrent.Promise[T]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[T]">future</a>
  <span class="delimiter">}</span>

  /** Used by for-comprehensions.
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(p: T =&gt; Boolean)scala.concurrent.Future[T]" id="405504">withFilter</a><span class="delimiter">(</span><a title="T =&gt; Boolean" id="406251">p</a>: T =&gt; Boolean<span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#405503" title="(pred: T =&gt; Boolean)scala.concurrent.Future[T]">filter</a><span class="delimiter">(</span><a href="#406251" title="T =&gt; Boolean">p</a><span class="delimiter">)</span>
  // final def withFilter(p: T =&gt; Boolean) = new FutureWithFilter[T](this, p)

  // final class FutureWithFilter[+S](self: Future[S], p: S =&gt; Boolean) {
  //   def foreach(f: S =&gt; Unit): Unit = self filter p foreach f
  //   def map[R](f: S =&gt; R) = self filter p map f
  //   def flatMap[R](f: S =&gt; Future[R]) = self filter p flatMap f
  //   def withFilter(q: S =&gt; Boolean): FutureWithFilter[S] = new FutureWithFilter[S](self, x =&gt; p(x) &amp;&amp; q(x))
  // }

  /** Creates a new future by mapping the value of the current future, if the given partial function is defined at that value.
   *
   *  If the current future contains a value for which the partial function is defined, the new future will also hold that value.
   *  Otherwise, the resulting future will fail with a `NoSuchElementException`.
   *
   *  If the current future fails, then the resulting future also fails.
   *
   *  Example:
   *  {{{
   *  val f = future { -5 }
   *  val g = f collect {
   *    case x if x &lt; 0 =&gt; -x
   *  }
   *  val h = f collect {
   *    case x if x &gt; 0 =&gt; x * 2
   *  }
   *  await(g, 0) // evaluates to 5
   *  await(h, 0) // throw a NoSuchElementException
   *  }}}
   */
  <span class="keyword">def</span> <a title="[S](pf: PartialFunction[T,S])scala.concurrent.Future[S]" id="405505">collect</a><span class="delimiter">[</span><a title="" id="405507">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[T,S]" id="406253">pf</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[T,S]">PartialFunction</a><span class="delimiter">[</span>T, S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="406256">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#405507" title="S">S</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[S])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406260" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406287" title="p.type" id="406288" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#406256" title="scala.concurrent.Promise[S]">p</a> <a href="#406290" title="(x: p.type)p.type">failure</a> t
      <span class="keyword">case</span> Right<a href="#406287" title="p.type" id="406289" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt;
        <a href="#406290" title="(x: p.type)p.type" id="406278" class="keyword">try</a> <span class="delimiter">{</span>
          <span title="p.type" class="keyword">if</span> <span class="delimiter">(</span><a href="#406253" title="PartialFunction[T,S]">pf</a>.<a href="../PartialFunction.scala.html#59566" title="(x: T)Boolean">isDefinedAt</a><span class="delimiter">(</span>v<span class="delimiter">)</span><span class="delimiter">)</span> <a href="#406256" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#405577" title="(v: S)p.type">success</a> <a href="../Function1.scala.html#59555" title="(v1: T)S">pf</a><span class="delimiter">(</span>v<span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#406256" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#405579" title="(t: Throwable)p.type">failure</a> <span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#56968" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;Future.collect partial function is not defined at: &quot;)" class="string">&quot;Future.collect partial function is not defined at: &quot;</span> <span title="(x$1: Any)String">+</span> v<span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="impl/NonFatal.scala.html#406065" title="Option[Throwable]" id="406285">NonFatal</a><span class="delimiter">(</span>t<span class="delimiter">)</span> =&gt; <a href="#406256" title="scala.concurrent.Promise[S]">p</a> <a href="#406281" title="(x: p.type)p.type">complete</a> <a href="ConcurrentPackageObject.scala.html#56860" title="(throwable: Throwable)Either[Throwable,Nothing]">resolver</a><span class="delimiter">(</span>t<span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#406256" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new future that will handle any matching throwable that this
   *  future might contain. If there is no match, or if this future contains
   *  a valid result then the new future will contain the same.
   *
   *  Example:
   *
   *  {{{
   *  future (6 / 0) recover { case e: ArithmeticException â‡’ 0 } // result: 0
   *  future (6 / 0) recover { case e: NotFoundException   â‡’ 0 } // result: exception
   *  future (6 / 2) recover { case e: ArithmeticException â‡’ 0 } // result: 3
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](pf: PartialFunction[Throwable,U])scala.concurrent.Future[U]" id="405508">recover</a><span class="delimiter">[</span><a title=" &gt;: T" id="405510">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Throwable,U]" id="406306">pf</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[Throwable,U]">PartialFunction</a><span class="delimiter">[</span>Throwable, U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="406309">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#405510" title="U">U</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[U])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406313" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406337" title="p.type" id="406338" class="delimiter">(</a>t<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#406306" title="PartialFunction[Throwable,U]">pf</a> <a href="../PartialFunction.scala.html#59566" title="(x: Throwable)Boolean">isDefinedAt</a> t =&gt;
        <a href="#406339" title="(x: p.type)p.type" id="406327" class="keyword">try</a> <span class="delimiter">{</span> <a href="#406309" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#405577" title="(v: U)p.type">success</a> <a href="../Function1.scala.html#59555" title="(v1: Throwable)U">pf</a><span class="delimiter">(</span>t<span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a href="impl/NonFatal.scala.html#406065" title="Option[Throwable]" id="406334">NonFatal</a><span class="delimiter">(</span>t<span class="delimiter">)</span> =&gt; <a href="#406309" title="scala.concurrent.Promise[U]">p</a> <a href="#406330" title="(x: p.type)p.type">complete</a> <a href="ConcurrentPackageObject.scala.html#56860" title="(throwable: Throwable)Either[Throwable,Nothing]">resolver</a><span class="delimiter">(</span>t<span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">case</span> otherwise =&gt; <a href="#406309" title="scala.concurrent.Promise[U]">p</a> <a href="#406339" title="(x: p.type)p.type">complete</a> otherwise
    <span class="delimiter">}</span>

    <a href="#406309" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new future that will handle any matching throwable that this
   *  future might contain by assigning it a value of another future.
   *
   *  If there is no match, or if this future contains
   *  a valid result then the new future will contain the same result.
   *
   *  Example:
   *
   *  {{{
   *  val f = future { Int.MaxValue }
   *  future (6 / 0) recoverWith { case e: ArithmeticException =&gt; f } // result: Int.MaxValue
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](pf: PartialFunction[Throwable,scala.concurrent.Future[U]])scala.concurrent.Future[U]" id="405511">recoverWith</a><span class="delimiter">[</span><a title=" &gt;: T" id="405513">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Throwable,scala.concurrent.Future[U]]" id="406355">pf</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[Throwable,scala.concurrent.Future[U]]">PartialFunction</a><span class="delimiter">[</span>Throwable, Future<span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="406358">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#405513" title="U">U</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[U])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406362" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406387" title="p.type" id="406388" class="delimiter">(</a>t<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#406355" title="PartialFunction[Throwable,scala.concurrent.Future[U]]">pf</a> <a href="../PartialFunction.scala.html#59566" title="(x: Throwable)Boolean">isDefinedAt</a> t =&gt;
        <a href="#406389" title="(x: p.type)p.type" id="406377" class="keyword">try</a> <span class="delimiter">{</span>
          <a href="#406358" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#405576" title="(other: scala.concurrent.Future[U])p.type">completeWith</a> <a href="../Function1.scala.html#59555" title="(v1: Throwable)scala.concurrent.Future[U]">pf</a><span class="delimiter">(</span>t<span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="impl/NonFatal.scala.html#406065" title="Option[Throwable]" id="406384">NonFatal</a><span class="delimiter">(</span>t<span class="delimiter">)</span> =&gt; <a href="#406358" title="scala.concurrent.Promise[U]">p</a> <a href="#406380" title="(x: p.type)p.type">complete</a> <a href="ConcurrentPackageObject.scala.html#56860" title="(throwable: Throwable)Either[Throwable,Nothing]">resolver</a><span class="delimiter">(</span>t<span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> otherwise =&gt; <a href="#406358" title="scala.concurrent.Promise[U]">p</a> <a href="#406389" title="(x: p.type)p.type">complete</a> otherwise
    <span class="delimiter">}</span>

    <a href="#406358" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>

  /** Zips the values of `this` and `that` future, and creates
   *  a new future holding the tuple of their results.
   *
   *  If `this` future fails, the resulting future is failed
   *  with the throwable stored in `this`.
   *  Otherwise, if `that` future fails, the resulting future is failed
   *  with the throwable stored in `that`.
   */
  <span class="keyword">def</span> <a title="[U](that: scala.concurrent.Future[U])scala.concurrent.Future[(T, U)]" id="405514">zip</a><span class="delimiter">[</span><a title="" id="405516">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Future[U]" id="406405">that</a>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[(T, U)]">Future</a><span class="delimiter">[</span><span class="delimiter">(</span>T, U<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[(T, U)]" id="406408">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[(T, U)]" class="delimiter">[</span><a href="../Tuple2.scala.html#1222" title="(T, U)" class="delimiter">(</a>T, U<span class="delimiter">)</span><span class="delimiter">]</span>

    <a href="#16707" title="Future.this.type" class="keyword">this</a> <a href="#405485" title="(func: Either[Throwable,T] =&gt; Object)Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],Object] with Serializable" id="406412" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406505" title="Object" id="406506" class="delimiter">(</a>t<span class="delimiter">)</span>  =&gt; <a href="#406408" title="scala.concurrent.Promise[(T, U)]">p</a> <a href="#406508" title="(x: Object)Object">failure</a> t
      <span class="keyword">case</span> Right<a href="#406505" title="Object" id="406507" class="delimiter">(</a>r<span class="delimiter">)</span> =&gt; <a href="#406405" title="scala.concurrent.Future[U]">that</a> <a href="#406508" title="(x: Object)Object">onSuccess</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[U,p.type] with Serializable" id="406441" class="delimiter">{</a>
        <span class="keyword">case</span> r2 =&gt; <a href="#406408" title="scala.concurrent.Promise[(T, U)]">p</a> <a href="#406437" title="(x: B1)B1">success</a> <span class="delimiter">(</span><a href="../Tuple2.scala.html#63804" title="(_1: T, _2: A1)(T, A1)" class="delimiter">(</a>r, r2<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#406405" title="scala.concurrent.Future[U]">that</a> <a href="#405482" title="(callback: PartialFunction[Throwable,scala.concurrent.Promise[(T, U)]])that.type">onFailure</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,p.type] with Serializable" id="406539" class="delimiter">{</a>
      <span class="keyword">case</span> f =&gt; <a href="#406408" title="scala.concurrent.Promise[(T, U)]">p</a> <a href="#406535" title="(x: B1)B1">failure</a> f
    <span class="delimiter">}</span>

    <a href="#406408" title="scala.concurrent.Promise[(T, U)]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[(T, U)]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new future which holds the result of this future if it was completed successfully, or, if not,
   *  the result of the `that` future if `that` is completed successfully.
   *  If both futures are failed, the resulting future holds the throwable object of the first future.
   *
   *  Using this method will not cause concurrent programs to become nondeterministic.
   *
   *  Example:
   *  {{{
   *  val f = future { sys.error(&quot;failed&quot;) }
   *  val g = future { 5 }
   *  val h = f fallbackTo g
   *  await(h, 0) // evaluates to 5
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](that: scala.concurrent.Future[U])scala.concurrent.Future[U]" id="405517">fallbackTo</a><span class="delimiter">[</span><a title=" &gt;: T" id="405519">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Future[U]" id="406590">that</a>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="406593">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#405519" title="U">U</a><span class="delimiter">]</span>
    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[U])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406597" class="delimiter">{</a>
      <span class="keyword">case</span> r @ Right<a href="#406604" title="p.type" id="406606" class="delimiter">(</a>_<span class="delimiter">)</span> â‡’ <a href="#406593" title="scala.concurrent.Promise[U]">p</a> <a href="#406607" title="(x: p.type)p.type">complete</a> r
      <span class="keyword">case</span> _            â‡’ <a href="#406593" title="scala.concurrent.Promise[U]">p</a> <a href="#406607" title="(x: p.type)p.type">completeWith</a> <a href="#406590" title="scala.concurrent.Future[U]">that</a>
    <span class="delimiter">}</span>
    <a href="#406593" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new `Future[S]` which is completed with this `Future`'s result if
   *  that conforms to `S`'s erased type or a `ClassCastException` otherwise.
   */
  <span class="keyword">def</span> <a title="[S](implicit tag: ClassTag[S])scala.concurrent.Future[S]" id="405520">mapTo</a><span class="delimiter">[</span><a title="" id="405522">S</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassTag[S]" id="406623">tag</a>: <a href="../reflect/ClassTag.scala.html#3399" title="ClassTag[S]">ClassTag</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> java.<span class="delimiter">{</span> lang =&gt; jl <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[Class[_],Class[_]]" id="406627">toBoxed</a> = <a href="../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (Class[_], Class[_])*)scala.collection.immutable.Map[Class[_],Class[_]]" class="delimiter">[</span><span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span>
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Boolean])ArrowAssoc[Class[Boolean]]" class="delimiter">[</a>Boolean<span class="delimiter">]</span> <a href="../Predef.scala.html#63591" title="(y: Class[Boolean])(Class[Boolean], Class[Boolean])">-&gt;</a> classOf<span title="Class[Boolean](classOf[java.lang.Boolean])" class="delimiter">[</span>jl.Boolean<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Byte])ArrowAssoc[Class[Byte]]" class="delimiter">[</a>Byte<span class="delimiter">]</span>    <a href="../Predef.scala.html#63591" title="(y: Class[Byte])(Class[Byte], Class[Byte])">-&gt;</a> classOf<span title="Class[Byte](classOf[java.lang.Byte])" class="delimiter">[</span>jl.Byte<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Char])ArrowAssoc[Class[Char]]" class="delimiter">[</a>Char<span class="delimiter">]</span>    <a href="../Predef.scala.html#63591" title="(y: Class[Character])(Class[Char], Class[Character])">-&gt;</a> classOf<span title="Class[Character](classOf[java.lang.Character])" class="delimiter">[</span>jl.Character<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Short])ArrowAssoc[Class[Short]]" class="delimiter">[</a>Short<span class="delimiter">]</span>   <a href="../Predef.scala.html#63591" title="(y: Class[Short])(Class[Short], Class[Short])">-&gt;</a> classOf<span title="Class[Short](classOf[java.lang.Short])" class="delimiter">[</span>jl.Short<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Int])ArrowAssoc[Class[Int]]" class="delimiter">[</a>Int<span class="delimiter">]</span>     <a href="../Predef.scala.html#63591" title="(y: Class[Integer])(Class[Int], Class[Integer])">-&gt;</a> classOf<span title="Class[Integer](classOf[java.lang.Integer])" class="delimiter">[</span>jl.Integer<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Long])ArrowAssoc[Class[Long]]" class="delimiter">[</a>Long<span class="delimiter">]</span>    <a href="../Predef.scala.html#63591" title="(y: Class[Long])(Class[Long], Class[Long])">-&gt;</a> classOf<span title="Class[Long](classOf[java.lang.Long])" class="delimiter">[</span>jl.Long<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Float])ArrowAssoc[Class[Float]]" class="delimiter">[</a>Float<span class="delimiter">]</span>   <a href="../Predef.scala.html#63591" title="(y: Class[Float])(Class[Float], Class[Float])">-&gt;</a> classOf<span title="Class[Float](classOf[java.lang.Float])" class="delimiter">[</span>jl.Float<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Double])ArrowAssoc[Class[Double]]" class="delimiter">[</a>Double<span class="delimiter">]</span>  <a href="../Predef.scala.html#63591" title="(y: Class[Double])(Class[Double], Class[Double])">-&gt;</a> classOf<span title="Class[Double](classOf[java.lang.Double])" class="delimiter">[</span>jl.Double<span class="delimiter">]</span>,
      classOf<a href="../Predef.scala.html#8484" title="(x: Class[Unit])ArrowAssoc[Class[Unit]]" class="delimiter">[</a>Unit<span class="delimiter">]</span>    <a href="../Predef.scala.html#63591" title="(y: Class[scala.runtime.BoxedUnit])(Class[Unit], Class[scala.runtime.BoxedUnit])">-&gt;</a> classOf<span title="Class[scala.runtime.BoxedUnit](classOf[scala.runtime.BoxedUnit])" class="delimiter">[</span>scala.runtime.BoxedUnit<span class="delimiter">]</span>
    <span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(c: Class[_])Class[_]" id="406628">boxedType</a><span class="delimiter">(</span><a title="Class[_]" id="406838">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="Class[_$2]" class="keyword">if</span> <span class="delimiter">(</span><a href="#406838" title="Class[_]">c</a>.<span title="()Boolean">isPrimitive</span><span class="delimiter">)</span> <a href="../collection/MapLike.scala.html#78420" title="(key: Class[_])Class[_]">toBoxed</a><span class="delimiter">(</span><a href="#406838" title="Class[_]">c</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#406838" title="Class[_]">c</a>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="406629">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#405522" title="S">S</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; scala.concurrent.Promise[S])Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],p.type] with Serializable" id="406887" class="delimiter">{</a>
      <span class="keyword">case</span> <a href="#406908" title="p.type" id="406912">l</a>: Left<span class="delimiter">[</span>Throwable, _<span class="delimiter">]</span> =&gt; <a href="#406629" title="scala.concurrent.Promise[S]">p</a> <a href="#406913" title="(x: p.type)p.type">complete</a> l.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Either[Throwable,S]" class="delimiter">[</span><a href="../Either.scala.html#2035" title="Either[Throwable,S]">Either</a><span class="delimiter">[</span>Throwable, S<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">case</span> Right<a href="#406908" title="p.type" id="406911" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt;
        <a href="#406629" title="scala.concurrent.Promise[S]">p</a> <a href="#406913" title="(x: p.type)p.type">complete</a> <span class="delimiter">(</span><span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="../Either.scala.html#76870" title="(b: S)Right[Nothing,S]">Right</a><span class="delimiter">(</span><a href="#406628" title="(c: Class[_])Class[_]">boxedType</a><span class="delimiter">(</span><a href="#406623" title="ClassTag[S]">tag</a>.<a href="../reflect/ErasureTag.scala.html#63445" title="=&gt; Class[_]">erasure</a><span class="delimiter">)</span>.<span title="(x$1: Any)_$4">cast</span><span class="delimiter">(</span>t<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="S" class="delimiter">[</span><a href="#405522" title="S">S</a><span class="delimiter">]</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Left[ClassCastException,Nothing]" id="406901">e</a>: <span title="ClassCastException">ClassCastException</span> =&gt; <a href="../Either.scala.html#76827" title="(a: ClassCastException)Left[ClassCastException,Nothing]">Left</a><span class="delimiter">(</span><a href="#406901" title="ClassCastException">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#406629" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>

  /** Applies the side-effecting function to the result of this future, and returns
   *  a new future with the result of this future.
   *
   *  This method allows one to enforce that the callbacks are executed in a
   *  specified order.
   *
   *  Note that if one of the chained `andThen` callbacks throws
   *  an exception, that exception is not propagated to the subsequent `andThen`
   *  callbacks. Instead, the subsequent `andThen` callbacks are given the original
   *  value of this future.
   *
   *  The following example prints out `5`:
   *
   *  {{{
   *  val f = future { 5 }
   *  f andThen {
   *    case r =&gt; sys.error(&quot;runtime exception&quot;)
   *  } andThen {
   *    case Failure(t) =&gt; println(t)
   *    case Success(v) =&gt; println(v)
   *  }
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U](pf: PartialFunction[Either[Throwable,T],U])scala.concurrent.Future[T]" id="405523">andThen</a><span class="delimiter">[</span><a title="" id="405525">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Either[Throwable,T],U]" id="406929">pf</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[Either[Throwable,T],U]">PartialFunction</a><span class="delimiter">[</span>Either<span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span>, U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[T]" id="406932">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[T]" class="delimiter">[</span><a href="#16873" title="T">T</a><span class="delimiter">]</span>

    <a href="#405485" title="(func: Either[Throwable,T] =&gt; Any)Future.this.type">onComplete</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[Either[Throwable,T],Any] with Serializable" id="406936" class="delimiter">{</a>
      <span class="keyword">case</span> r =&gt;
        <a href="#406949" title="(x: Any)Any" class="keyword">try</a> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#406929" title="PartialFunction[Either[Throwable,T],U]">pf</a> <a href="../PartialFunction.scala.html#59566" title="(x: Either[Throwable,T])Boolean">isDefinedAt</a> r<span class="delimiter">)</span> <a href="../Function1.scala.html#59555" title="(v1: Either[Throwable,T])U">pf</a><span class="delimiter">(</span>r<span class="delimiter">)</span>
        <span class="keyword">finally</span> <a href="#406932" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#405574" title="(result: Either[Throwable,T])p.type">complete</a> r
    <span class="delimiter">}</span>

    <a href="#406932" title="scala.concurrent.Promise[T]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[T]">future</a>
  <span class="delimiter">}</span>

  /** Creates a new future which holds the result of either this future or `that` future, depending on
   *  which future was completed first.
   *
   *  $nonDeterministic
   *
   *  Example:
   *  {{{
   *  val f = future { sys.error(&quot;failed&quot;) }
   *  val g = future { 5 }
   *  val h = f either g
   *  await(h, 0) // evaluates to either 5 or throws a runtime exception
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](that: scala.concurrent.Future[U])scala.concurrent.Future[U]" id="405526">either</a><span class="delimiter">[</span><a title=" &gt;: T" id="405528">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Future[U]" id="406964">that</a>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="406967">p</a> = <a href="#405488" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#405528" title="U">U</a><span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="PartialFunction[Either[Throwable,U], _]" id="406968">completePromise</a>: <a href="../PartialFunction.scala.html#217" title="PartialFunction[Either[Throwable,U], _]">PartialFunction</a><span class="delimiter">[</span>Either<span class="delimiter">[</span>Throwable, U<span class="delimiter">]</span>, _<span class="delimiter">]</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Either[Throwable,U],Boolean] with Serializable" id="406996" class="delimiter">{</a>
      <span class="keyword">case</span> Left<a href="#406988" title="B1" id="407006" class="delimiter">(</a>t<span class="delimiter">)</span> =&gt; <a href="#406967" title="scala.concurrent.Promise[U]">p</a> <a href="#406991" title="(x: B1)B1">tryFailure</a> t
      <span class="keyword">case</span> Right<a href="#406988" title="B1" id="407007" class="delimiter">(</a>v<span class="delimiter">)</span> =&gt; <a href="#406967" title="scala.concurrent.Promise[U]">p</a> <a href="#406991" title="(x: B1)B1">trySuccess</a> v
    <span class="delimiter">}</span>

    <a href="#16707" title="Future.this.type" class="keyword">this</a> <a href="#405485" title="(func: Either[Throwable,T] =&gt; _$5)Future.this.type">onComplete</a> <a href="#406968" title="PartialFunction[Either[Throwable,U], _]">completePromise</a>
    <a href="#406964" title="scala.concurrent.Future[U]">that</a> <a href="#405485" title="(func: Either[Throwable,U] =&gt; _$5)that.type">onComplete</a> <a href="#406968" title="PartialFunction[Either[Throwable,U], _]">completePromise</a>

    <a href="#406967" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>



/** Future companion object.
 *
 *  @define nonDeterministic
 *  Note: using this method yields nondeterministic dataflow programs.
 */
<span class="keyword">object</span> <a title="scala.concurrent.Future.type" id="16708">Future</a> <a href="#16709" title="scala.concurrent.Future.type" class="delimiter">{</a>
 /** Starts an asynchronous computation and returns a `Future` object with the result of that computation.
  *
  *  The result becomes available once the asynchronous computation is completed.
  *
  *  @tparam T       the type of the result
  *  @param body     the asychronous computation
  *  @param execctx  the execution context on which the future is run
  *  @return         the `Future` holding the result of the computation
  */
  <span class="keyword">def</span> <a title="[T](body: =&gt; T)(implicit execctx: scala.concurrent.ExecutionContext)scala.concurrent.Future[T]" id="405531">apply</a><span class="delimiter">[</span><a title="" id="405533">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="405564">body</a>: =&gt;T<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="405565">execctx</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = impl.<a href="impl/Future.scala.html#405678" title="(body: =&gt; T)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.impl.Future[T]">Future</a><a href="#405565" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="#405564" title="=&gt; T">body</a><span class="delimiter">)</span>

  <span class="keyword">import</span> scala.collection.mutable.Builder
  <span class="keyword">import</span> scala.collection.generic.CanBuildFrom

  /** Simple version of `Futures.traverse`. Transforms a `Traversable[Future[A]]` into a `Future[Traversable[A]]`.
   *  Useful for reducing many `Future`s into a single `Future`.
   */
  <span class="keyword">def</span> <a title="[A, M[_] &lt;: Traversable[_]](in: M[scala.concurrent.Future[A]])(implicit cbf: scala.collection.generic.CanBuildFrom[M[scala.concurrent.Future[A]],A,M[A]], implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[M[A]]" id="405536">sequence</a><span class="delimiter">[</span><a title="" id="405539">A</a>, <a title="[_] &lt;: Traversable[_]" id="405540">M</a><span class="delimiter">[</span><a title="" id="407066">_</a><span class="delimiter">]</span> &lt;: Traversable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="M[scala.concurrent.Future[A]]" id="407063">in</a>: <a href="#405540" title="M[scala.concurrent.Future[A]]">M</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.collection.generic.CanBuildFrom[M[scala.concurrent.Future[A]],A,M[A]]" id="407064">cbf</a>: <a href="../collection/generic/CanBuildFrom.scala.html#11076" title="scala.collection.generic.CanBuildFrom[M[scala.concurrent.Future[A]],A,M[A]]">CanBuildFrom</a><span class="delimiter">[</span>M<span class="delimiter">[</span>Future<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, A, M<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scala.concurrent.ExecutionContext" id="407065">executor</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[M[A]]">Future</a><span class="delimiter">[</span>M<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#407063" title="M[scala.concurrent.Future[A]]">in</a>.<a href="../collection/TraversableOnce.scala.html#59113" title="(z: scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]])(op: (scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]], Any) =&gt; scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]])scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]]">foldLeft</a><span class="delimiter">(</span><a href="Promise.scala.html#16690" title="scala.concurrent.Promise.type">Promise</a>.<a href="Promise.scala.html#405590" title="(result: scala.collection.mutable.Builder[A,M[A]])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[scala.collection.mutable.Builder[A,M[A]]]">successful</a><a href="#407065" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="../collection/generic/CanBuildFrom.scala.html#60758" title="(from: M[scala.concurrent.Future[A]])scala.collection.mutable.Builder[A,M[A]]">cbf</a><span class="delimiter">(</span><a href="#407063" title="M[scala.concurrent.Future[A]]">in</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]]">future</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]]" id="407100">fr</a>, <a title="Any" id="407101">fa</a><span class="delimiter">)</span> =&gt; <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.Builder[A,M[A]]" id="407106">r</a> &lt;- <a href="#405500" title="(f: scala.collection.mutable.Builder[A,M[A]] =&gt; scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]])scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]]">fr</a>; <a title="A" id="407111">a</a> &lt;- <a href="#407101" title="Any">fa</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><a href="#405497" title="(f: A =&gt; scala.collection.mutable.Builder[A,M[A]])scala.concurrent.Future[scala.collection.mutable.Builder[A,M[A]]]" class="delimiter">[</a><a href="#16707" title="scala.concurrent.Future[A]">Future</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">(</span><a href="#407106" title="scala.collection.mutable.Builder[A,M[A]]">r</a> <a href="../collection/mutable/Builder.scala.html#60916" title="(elem: A)r.type">+=</a> <a href="#407111" title="A">a</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <a href="#405497" title="(f: scala.collection.mutable.Builder[A,M[A]] =&gt; M[A])scala.concurrent.Future[M[A]]">map</a> <span class="delimiter">(</span><a href="#407125" title="scala.collection.mutable.Builder[A,M[A]]">_</a>.<a href="../collection/mutable/Builder.scala.html#60918" title="()M[A]">result</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Returns a `Future` to the result of the first future in the list that is completed.
   */
  <span class="keyword">def</span> <a title="[T](futures: Traversable[scala.concurrent.Future[T]])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[T]" id="405541">firstCompletedOf</a><span class="delimiter">[</span><a title="" id="405543">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[scala.concurrent.Future[T]]" id="407127">futures</a>: <a href="../collection/Traversable.scala.html#5662" title="Traversable[scala.concurrent.Future[T]]">Traversable</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="407128">executor</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[T]" id="407130">p</a> = <a href="Promise.scala.html#405584" title="[T]()(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[T]">Promise</a><span title="()(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[T]" class="delimiter">[</span><a href="#405543" title="T">T</a><span class="delimiter">]</span><a href="#407128" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Either[Throwable,T] =&gt; Unit" id="407131">completeFirst</a>: Either<span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> =&gt; Unit = <a href="#407130" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#405575" title="(result: Either[Throwable,T])Boolean">tryComplete</a> <a href="#407133" title="Either[Throwable,T]">_</a>
    <a href="#407127" title="Traversable[scala.concurrent.Future[T]]">futures</a>.<a href="../collection/generic/GenericTraversableTemplate.scala.html#59363" title="(f: scala.concurrent.Future[T] =&gt; scala.concurrent.Future[T])Unit">foreach</a><span class="delimiter">(</span><a href="#407150" title="scala.concurrent.Future[T]">_</a> <a href="#405485" title="(func: Either[Throwable,T] =&gt; Unit)x$3.type">onComplete</a> <a href="#407131" title="Either[Throwable,T] =&gt; Unit">completeFirst</a><span class="delimiter">)</span>

    <a href="#407130" title="scala.concurrent.Promise[T]">p</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[T]">future</a>
  <span class="delimiter">}</span>

  /** Returns a `Future` that will hold the optional result of the first `Future` with a result that matches the predicate.
   */
  <span class="keyword">def</span> <a title="[T](futures: Traversable[scala.concurrent.Future[T]])(predicate: T =&gt; Boolean)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[Option[T]]" id="405544">find</a><span class="delimiter">[</span><a title="" id="405546">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[scala.concurrent.Future[T]]" id="407160">futures</a>: <a href="../collection/Traversable.scala.html#5662" title="Traversable[scala.concurrent.Future[T]]">Traversable</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="T =&gt; Boolean" id="407161">predicate</a>: T =&gt; Boolean<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="407162">executor</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[Option[T]]">Future</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="scala.concurrent.Future[Option[T]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#407160" title="Traversable[scala.concurrent.Future[T]]">futures</a>.<a href="../collection/TraversableLike.scala.html#58949" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="Promise.scala.html#16690" title="scala.concurrent.Promise.type">Promise</a>.<a href="Promise.scala.html#405590" title="[T](result: T)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[T]">successful</a><span title="(result: Option[T])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[Option[T]]" class="delimiter">[</span><a href="../Option.scala.html#1510" title="Option[T]">Option</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><a href="#407162" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="../Option.scala.html#2498" title="None.type">None</a><span class="delimiter">)</span>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[Option[T]]">future</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.concurrent.Promise[Option[T]]" id="407166">result</a> = <a href="Promise.scala.html#405584" title="[T]()(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[T]">Promise</a><span title="()(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[Option[T]]" class="delimiter">[</span><a href="../Option.scala.html#1510" title="Option[T]">Option</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><a href="#407162" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicInteger" id="407167">ref</a> = <span title="java.util.concurrent.atomic.AtomicInteger" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicInteger">AtomicInteger</span><span class="delimiter">(</span><a href="#407160" title="Traversable[scala.concurrent.Future[T]]">futures</a>.<a href="../collection/TraversableOnce.scala.html#59101" title="=&gt; Int">size</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Either[Throwable,T] =&gt; Unit" id="407168">search</a>: Either<span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> =&gt; Unit = <a title="Either[Throwable,T]" id="407172">v</a> =&gt; <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#407172" title="Either[Throwable,T]">v</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> Right<a href="#407186" title="Unit" id="407187" class="delimiter">(</a>r<span class="delimiter">)</span> =&gt; <a href="#407188" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="../Function1.scala.html#59555" title="(v1: T)Boolean">predicate</a><span class="delimiter">(</span>r<span class="delimiter">)</span><span class="delimiter">)</span> <a href="#407166" title="scala.concurrent.Promise[Option[T]]">result</a> <a href="Promise.scala.html#405575" title="(result: Either[Throwable,Option[T]])Boolean">tryComplete</a> <a href="../Either.scala.html#76870" title="(b: Some[T])Right[Nothing,Some[T]]">Right</a><span class="delimiter">(</span><a href="../Option.scala.html#64111" title="(x: T)Some[T]">Some</a><span class="delimiter">(</span>r<span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> _        =&gt;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#407167" title="java.util.concurrent.atomic.AtomicInteger">ref</a>.<span title="()Int">decrementAndGet</span> <a href="../Int.scala.html#57891" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="#407166" title="scala.concurrent.Promise[Option[T]]">result</a> <a href="Promise.scala.html#405575" title="(result: Either[Throwable,Option[T]])Boolean">tryComplete</a> <a href="../Either.scala.html#76870" title="(b: None.type)Right[Nothing,None.type]">Right</a><span class="delimiter">(</span><a href="../Option.scala.html#2498" title="None.type">None</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#407160" title="Traversable[scala.concurrent.Future[T]]">futures</a>.<a href="../collection/generic/GenericTraversableTemplate.scala.html#59363" title="(f: scala.concurrent.Future[T] =&gt; scala.concurrent.Future[T])Unit">foreach</a><span class="delimiter">(</span><a href="#407217" title="scala.concurrent.Future[T]">_</a> <a href="#405485" title="(func: Either[Throwable,T] =&gt; Unit)x$4.type">onComplete</a> <a href="#407168" title="Either[Throwable,T] =&gt; Unit">search</a><span class="delimiter">)</span>

      <a href="#407166" title="scala.concurrent.Promise[Option[T]]">result</a>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[Option[T]]">future</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** A non-blocking fold over the specified futures, with the start value of the given zero.
   *  The fold is performed on the thread where the last future is completed,
   *  the result will be the first failure of any of the futures, or any failure in the actual fold,
   *  or the result of the fold.
   *
   *  Example:
   *  {{{
   *    val result = Await.result(Future.fold(futures)(0)(_ + _), 5 seconds)
   *  }}}
   */
  <span class="keyword">def</span> <a title="[T, R](futures: Traversable[scala.concurrent.Future[T]])(zero: R)(foldFun: (R, T) =&gt; R)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[R]" id="405547">fold</a><span class="delimiter">[</span><a title="" id="405550">T</a>, <a title="" id="405551">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[scala.concurrent.Future[T]]" id="407227">futures</a>: <a href="../collection/Traversable.scala.html#5662" title="Traversable[scala.concurrent.Future[T]]">Traversable</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="R" id="407228">zero</a>: <a href="#405551" title="R">R</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="(R, T) =&gt; R" id="407229">foldFun</a>: <span class="delimiter">(</span>R, T<span class="delimiter">)</span> =&gt; R<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="407230">executor</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[R]">Future</a><span class="delimiter">[</span>R<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="scala.concurrent.Future[R]" class="keyword">if</span> <span class="delimiter">(</span><a href="#407227" title="Traversable[scala.concurrent.Future[T]]">futures</a>.<a href="../collection/TraversableLike.scala.html#58949" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="Promise.scala.html#16690" title="scala.concurrent.Promise.type">Promise</a>.<a href="Promise.scala.html#405590" title="(result: R)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[R]">successful</a><a href="#407230" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="#407228" title="R">zero</a><span class="delimiter">)</span>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[R]">future</a>
    <span class="keyword">else</span> <a href="#405536" title="(in: Traversable[scala.concurrent.Future[T]])(implicit cbf: scala.collection.generic.CanBuildFrom[Traversable[scala.concurrent.Future[T]],T,Traversable[T]], implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[Traversable[T]]">sequence</a><a href="../collection/Traversable.scala.html#64434" title="scala.collection.generic.CanBuildFrom[scala.collection.Traversable.Coll,T,Traversable[T]]" class="delimiter">(</a><a href="#407227" title="Traversable[scala.concurrent.Future[T]]">futures</a><span class="delimiter">)</span>.<a href="#405497" title="(f: Traversable[T] =&gt; R)scala.concurrent.Future[R]">map</a><span class="delimiter">(</span><a href="#407268" title="Traversable[T]">_</a>.<a href="../collection/TraversableOnce.scala.html#59113" title="(z: R)(op: (R, T) =&gt; R)R">foldLeft</a><span class="delimiter">(</span><a href="#407228" title="R">zero</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#407229" title="(R, T) =&gt; R">foldFun</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Initiates a fold over the supplied futures where the fold-zero is the result value of the `Future` that's completed first.
   *
   *  Example:
   *  {{{
   *    val result = Await.result(Futures.reduce(futures)(_ + _), 5 seconds)
   *  }}}
   */
  <span class="keyword">def</span> <a title="[T, R &gt;: T](futures: Traversable[scala.concurrent.Future[T]])(op: (R, T) =&gt; R)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[R]" id="405552">reduce</a><span class="delimiter">[</span><a title="" id="405555">T</a>, <a title=" &gt;: T" id="405556">R</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[scala.concurrent.Future[T]]" id="407281">futures</a>: <a href="../collection/Traversable.scala.html#5662" title="Traversable[scala.concurrent.Future[T]]">Traversable</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(R, T) =&gt; R" id="407282">op</a>: <span class="delimiter">(</span>R, T<span class="delimiter">)</span> =&gt; R<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="407283">executor</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[R]">Future</a><span class="delimiter">[</span>R<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="scala.concurrent.Future[R]" class="keyword">if</span> <span class="delimiter">(</span><a href="#407281" title="Traversable[scala.concurrent.Future[T]]">futures</a>.<a href="../collection/TraversableLike.scala.html#58949" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="Promise.scala.html#405584" title="[T]()(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[T]">Promise</a><a href="#407283" title="()(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[R]" class="delimiter">[</a><a href="#405556" title="R">R</a><span class="delimiter">]</span>.<a href="Promise.scala.html#405579" title="(t: Throwable)scala.concurrent.Promise[R]">failure</a><span class="delimiter">(</span><span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#56968" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;reduce attempted on empty collection&quot;)" class="string">&quot;reduce attempted on empty collection&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[R]">future</a>
    <span class="keyword">else</span> <a href="#405536" title="(in: Traversable[scala.concurrent.Future[T]])(implicit cbf: scala.collection.generic.CanBuildFrom[Traversable[scala.concurrent.Future[T]],T,Traversable[T]], implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[Traversable[T]]">sequence</a><a href="../collection/Traversable.scala.html#64434" title="scala.collection.generic.CanBuildFrom[scala.collection.Traversable.Coll,T,Traversable[T]]" class="delimiter">(</a><a href="#407281" title="Traversable[scala.concurrent.Future[T]]">futures</a><span class="delimiter">)</span>.<a href="#405497" title="(f: Traversable[T] =&gt; R)scala.concurrent.Future[R]">map</a><span class="delimiter">(</span><a href="#407322" title="Traversable[T]">_</a> <a href="../collection/TraversableOnce.scala.html#59119" title="(op: (R, T) =&gt; R)R">reduceLeft</a> <a href="#407282" title="(R, T) =&gt; R">op</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Transforms a `Traversable[A]` into a `Future[Traversable[B]]` using the provided function `A =&gt; Future[B]`.
   *  This is useful for performing a parallel map. For example, to apply a function to all items of a list
   *  in parallel:
   *
   *  {{{
   *    val myFutureList = Future.traverse(myList)(x =&gt; Future(myFunc(x)))
   *  }}}
   */
  <span class="keyword">def</span> <a title="[A, B, M[_] &lt;: Traversable[_]](in: M[A])(fn: A =&gt; scala.concurrent.Future[B])(implicit cbf: scala.collection.generic.CanBuildFrom[M[A],B,M[B]], implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[M[B]]" id="405557">traverse</a><span class="delimiter">[</span><a title="" id="405561">A</a>, <a title="" id="405562">B</a>, <a title="[_] &lt;: Traversable[_]" id="405563">M</a><span class="delimiter">[</span><a title="" id="407334">_</a><span class="delimiter">]</span> &lt;: Traversable<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="M[A]" id="407330">in</a>: <a href="#405563" title="M[A]">M</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A =&gt; scala.concurrent.Future[B]" id="407331">fn</a>: A =&gt; Future<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.collection.generic.CanBuildFrom[M[A],B,M[B]]" id="407332">cbf</a>: <a href="../collection/generic/CanBuildFrom.scala.html#11076" title="scala.collection.generic.CanBuildFrom[M[A],B,M[B]]">CanBuildFrom</a><span class="delimiter">[</span>M<span class="delimiter">[</span>A<span class="delimiter">]</span>, B, M<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scala.concurrent.ExecutionContext" id="407333">executor</a>: <a href="ExecutionContext.scala.html#16554" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16707" title="scala.concurrent.Future[M[B]]">Future</a><span class="delimiter">[</span>M<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#407330" title="M[A]">in</a>.<a href="../collection/TraversableOnce.scala.html#59113" title="(z: scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]])(op: (scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]], Any) =&gt; scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]])scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]]">foldLeft</a><span class="delimiter">(</span><a href="Promise.scala.html#16690" title="scala.concurrent.Promise.type">Promise</a>.<a href="Promise.scala.html#405590" title="(result: scala.collection.mutable.Builder[B,M[B]])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Promise[scala.collection.mutable.Builder[B,M[B]]]">successful</a><a href="#407333" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="../collection/generic/CanBuildFrom.scala.html#60758" title="(from: M[A])scala.collection.mutable.Builder[B,M[B]]">cbf</a><span class="delimiter">(</span><a href="#407330" title="M[A]">in</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="Promise.scala.html#405573" title="=&gt; scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]]">future</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]]" id="407365">fr</a>, <a title="Any" id="407366">a</a><span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a title="scala.concurrent.Future[B]" id="407367">fb</a> = <a href="../Function1.scala.html#59555" title="(v1: A)scala.concurrent.Future[B]">fn</a><span class="delimiter">(</span><a href="#407366" title="Any">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A" class="delimiter">[</span><a href="#405561" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.Builder[B,M[B]]" id="407373">r</a> &lt;- <a href="#405500" title="(f: scala.collection.mutable.Builder[B,M[B]] =&gt; scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]])scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]]">fr</a>; <a title="B" id="407378">b</a> &lt;- <a href="#405497" title="(f: B =&gt; scala.collection.mutable.Builder[B,M[B]])scala.concurrent.Future[scala.collection.mutable.Builder[B,M[B]]]">fb</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">(</span><a href="#407373" title="scala.collection.mutable.Builder[B,M[B]]">r</a> <a href="../collection/mutable/Builder.scala.html#60916" title="(elem: B)r.type">+=</a> <a href="#407378" title="B">b</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<a href="#405497" title="(f: scala.collection.mutable.Builder[B,M[B]] =&gt; M[B])scala.concurrent.Future[M[B]]">map</a><span class="delimiter">(</span><a href="#407392" title="scala.collection.mutable.Builder[B,M[B]]">_</a>.<a href="../collection/mutable/Builder.scala.html#60918" title="()M[B]">result</a><span class="delimiter">)</span>

<span class="delimiter">}</span>




        </pre>
    </body>
</html>