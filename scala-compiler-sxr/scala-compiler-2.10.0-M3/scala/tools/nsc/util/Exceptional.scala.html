<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/util/Exceptional.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">import</span> java.util.concurrent.ExecutionException
<span class="keyword">import</span> java.lang.reflect.<span class="delimiter">{</span> InvocationTargetException, UndeclaredThrowableException <span class="delimiter">}</span>
<span class="keyword">import</span> io.<span class="delimiter">{</span> Sources, Fileish <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.util.<a href="../../util/StringOps.scala.html#52941" title="scala.tools.util.StringOps.type">StringOps</a>._
<span class="keyword">import</span> <a href="../../../language.scala.html#2216" title="language.type">language</a>.implicitConversions

/** A simple throwable wrapper so it looks more like a parade of
 *  glittering frame-shaped beauties than the other thing.
 */
<span class="keyword">class</span> <a title="class Exceptional extends Object" id="52032">Exceptional</a><a href="#52032" title="scala.tools.nsc.util.Exceptional" class="delimiter">(</a><span class="keyword">val</span> <a title="Throwable" id="648903">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.tools.nsc.util.ScalaPrefs" id="648904">prefs</a>: <a href="ScalaPrefs.scala.html#52062" title="scala.tools.nsc.util.ScalaPrefs">ScalaPrefs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="scala.tools.nsc.util.Exceptional.Calibrated" id="648874">formatter</a>  = <a href="#648904" title="scala.tools.nsc.util.ScalaPrefs">prefs</a>.<a href="#1190978" title="(ex: Throwable)scala.tools.nsc.util.Exceptional.Calibrated">exceptionFormatter</a><span class="delimiter">(</span><a href="#648903" title="=&gt; Throwable">ex</a><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="Throwable" id="648876">unwrapped</a>  = <a href="#52033" title="scala.tools.nsc.util.Exceptional.type">Exceptional</a>.<a href="#648865" title="(x: Throwable)Throwable">unwrap</a><span class="delimiter">(</span><a href="#648903" title="=&gt; Throwable">ex</a><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table" id="648878">table</a>      = <a href="#648874" title="=&gt; scala.tools.nsc.util.Exceptional.Calibrated">formatter</a>.<a href="#1190990" title="(ex: Throwable)scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table">newTable</a><span class="delimiter">(</span><a href="#648876" title="=&gt; Throwable">unwrapped</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="648880">rawTrace</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#648876" title="=&gt; Throwable">unwrapped</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="648881">isScanDone</a> = <a href="#648904" title="scala.tools.nsc.util.ScalaPrefs">prefs</a>.<a href="ScalaPrefs.scala.html#648905" title="=&gt; scala.tools.nsc.io.Sources">codeSources</a>.<a href="../../../Function0.scala.html#68359" title="()Boolean">isDone</a><span class="delimiter">(</span><span class="delimiter">)</span>

  /** Block until the scanning is complete. */
  <span class="keyword">def</span> <a title="()Exceptional.this.type" id="648882">force</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span>
    <a href="#648904" title="scala.tools.nsc.util.ScalaPrefs">prefs</a>.<a href="ScalaPrefs.scala.html#648905" title="=&gt; scala.tools.nsc.io.Sources">codeSources</a>.<a href="../../../Function0.scala.html#68359" title="()Unit">force</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#52032" title="Exceptional.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>

  /** Stack frame contexts are only shown as long as this is true. */
  <span class="keyword">def</span> <a title="(frame: scala.tools.nsc.util.JavaStackFrame)Boolean" id="648883">spanFn</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.JavaStackFrame" id="922038">frame</a>: <a href="JavaStackFrame.scala.html#51621" title="scala.tools.nsc.util.JavaStackFrame">JavaStackFrame</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>

  /** The result of this will be printed before a context trace. */
  <span class="keyword">def</span> <a title="=&gt; String" id="648884">contextPrelude</a>: <span title="String">String</span> =
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#648881" title="=&gt; Boolean">isScanDone</a> <a href="../../../Boolean.scala.html#58724" title="(x: Boolean)Boolean">||</a> <a href="#648904" title="scala.tools.nsc.util.ScalaPrefs">prefs</a>.<a href="ScalaPrefs.scala.html#648905" title="=&gt; scala.tools.nsc.io.Sources">codeSources</a>.<a href="../io/Sources.scala.html#911908" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">else</span> <span title="String(&quot;/* Still scanning source path: there may be more momentarily. */\n&quot;)" class="string">&quot;/* Still scanning source path: there may be more momentarily. */\n&quot;</span>

  /** Frames with surrounding context. */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]" id="648885">contextFrames</a>     = <a href="#648891" title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]">toList</a> <a href="../../../collection/immutable/List.scala.html#63671" title="(p: scala.tools.nsc.util.JavaStackFrame =&gt; Boolean)List[scala.tools.nsc.util.JavaStackFrame]">takeWhile</a> <a href="#648883" title="(frame: scala.tools.nsc.util.JavaStackFrame)Boolean">spanFn</a>
  <span class="keyword">def</span> <a title="()String" id="648886">contextHead</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span>     = <a href="#648887" title="()List[String]">contextElems</a>.<a href="../../../collection/TraversableLike.scala.html#59011" title="=&gt; Option[String]">headOption</a> <a href="../../../Option.scala.html#63814" title="(default: =&gt; String)String">getOrElse</a> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
  <span class="keyword">def</span> <a title="()List[String]" id="648887">contextElems</a><span class="delimiter">(</span><span class="delimiter">)</span>            = <a href="#648885" title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]">contextFrames</a> <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: scala.tools.nsc.util.JavaStackFrame =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.util.JavaStackFrame],String,List[String]])List[String]">map</a> <a href="#648874" title="=&gt; scala.tools.nsc.util.Exceptional.Calibrated">formatter</a>.<a href="#1190991" title="(frame: scala.tools.nsc.util.JavaStackFrame)String">inContext</a>
  <span class="keyword">def</span> <a title="()String" id="648888">context</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span>         = <a href="#648889" title="(num: Int)String">context</a><span class="delimiter">(</span><a href="#648890" title="=&gt; Int">length</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(num: Int)String" id="648889">context</a><span class="delimiter">(</span><a title="Int" id="648919">num</a>: <a href="../../../Int.scala.html#508" title="Int">Int</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#648884" title="=&gt; String">contextPrelude</a> <span title="(x$1: Any)String">+</span> <a href="../../util/StringOps.scala.html#467952" title="(xs: Seq[String], sep: String, orElse: String)String">ojoinOr</a><span class="delimiter">(</span><a href="#648885" title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]">contextFrames</a> <a href="../../../collection/immutable/List.scala.html#63666" title="(n: Int)List[scala.tools.nsc.util.JavaStackFrame]">take</a> <a href="#648919" title="Int">num</a> <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: scala.tools.nsc.util.JavaStackFrame =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.util.JavaStackFrame],String,Seq[String]])Seq[String]">map</a> <a href="#648874" title="=&gt; scala.tools.nsc.util.Exceptional.Calibrated">formatter</a>.<a href="#1190991" title="(frame: scala.tools.nsc.util.JavaStackFrame)String">inContext</a>, <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span>, <span title="String(&quot;No stack trace.&quot;)" class="string">&quot;No stack trace.&quot;</span><span class="delimiter">)</span>

  /** Exceptional doesn't extend Seq because it turns out to be super
   *  annoying in the repl: tab-completion sees all the Seq methods.
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="648890">length</a>            = <a href="#648891" title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]">toList</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#76164" title="=&gt; Int">length</a>
  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]" id="648891">toList</a>            = <a href="#648878" title="=&gt; scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table">table</a>.<a href="../../../collection/TraversableOnce.scala.html#59174" title="=&gt; List[scala.tools.nsc.util.JavaStackFrame]">toList</a>
  <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.util.JavaStackFrame]" id="648892">iterator</a>          = <a href="#648878" title="=&gt; scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table">table</a>.<a href="TableDef.scala.html#531828" title="=&gt; Iterator[scala.tools.nsc.util.JavaStackFrame]">iterator</a>
  <span class="keyword">def</span> <a title="(index: Int)scala.tools.nsc.util.JavaStackFrame" id="648893">apply</a><span class="delimiter">(</span><a title="Int" id="1191144">index</a>: <a href="../../../Int.scala.html#508" title="Int">Int</a><span class="delimiter">)</span> = <a href="TableDef.scala.html#531829" title="(index: Int)scala.tools.nsc.util.JavaStackFrame">table</a><span class="delimiter">(</span><a href="#1191144" title="Int">index</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; List[Throwable]" id="648894">causes</a>  = <a href="#52033" title="scala.tools.nsc.util.Exceptional.type">Exceptional</a>.<a href="#648864" title="(x: Throwable)List[Throwable]">causes</a><span class="delimiter">(</span><a href="#648903" title="=&gt; Throwable">ex</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="648895">summary</a> = <a href="#648876" title="=&gt; Throwable">unwrapped</a>.<span title="()String">toString</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n  at &quot;)" class="string">&quot;\n  at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#648893" title="(index: Int)scala.tools.nsc.util.JavaStackFrame">apply</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="JavaStackFrame.scala.html#922057" title="=&gt; String">shortNameString</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: Any)Unit" id="648896">println</a><span class="delimiter">(</span><a title="Any" id="1191399">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../../Console.scala.html#227" title="Console.type">Console</a> <a href="../../../Console.scala.html#64301" title="(x: Any)Unit">println</a> <a href="#1191399" title="Any">msg</a>
    <a href="../../../Console.scala.html#227" title="Console.type">Console</a>.<a href="../../../Console.scala.html#64299" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="648897">show</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#2389" title="Unit">Unit</a>         = <a href="#648896" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#648888" title="()String">context</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(num: Int)Unit" id="648898">show</a><span class="delimiter">(</span><a title="Int" id="963719">num</a>: <a href="../../../Int.scala.html#508" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#2389" title="Unit">Unit</a> = <a href="#648896" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#648889" title="(num: Int)String">context</a><span class="delimiter">(</span><a href="#963719" title="Int">num</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="648899">showCauses</a><span class="delimiter">(</span><span class="delimiter">)</span>         = <a href="#648896" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#648903" title="=&gt; Throwable">ex</a> <a href="../../../collection/immutable/List.scala.html#63643" title="(x: Throwable)List[Throwable]">::</a> <a href="#648894" title="=&gt; List[Throwable]">causes</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#59189" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;\n  caused by -&gt; &quot;)" class="string">&quot;\n  caused by -&gt; &quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="648900">showTable</a><span class="delimiter">(</span><span class="delimiter">)</span>          = <a href="#648896" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#648878" title="=&gt; scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table">table</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="648901">showSummary</a><span class="delimiter">(</span><span class="delimiter">)</span>        = <a href="#648896" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#648895" title="=&gt; String">summary</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="648902">toString</a> = <a href="#648895" title="=&gt; String">summary</a>
<span class="delimiter">}</span>


<span title="Object" class="keyword">object</span> <a title="scala.tools.nsc.util.Exceptional.type" id="52033">Exceptional</a> <a href="#52034" title="scala.tools.nsc.util.Exceptional.type" class="delimiter">{</a>
  <span class="keyword">type</span> <a title="[+T]PartialFunction[Throwable,T]" id="648845">Catcher</a><span class="delimiter">[</span>+<a title="" id="648846">T</a><span class="delimiter">]</span> = <a href="../../../PartialFunction.scala.html#217" title="PartialFunction[Throwable,T]">PartialFunction</a><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span>

  /** Creates an exception handler which will only ever catch the given
   *  number of exceptions (if the given pf is defined there) and after
   *  that will disable itself.
   */
  <span class="keyword">def</span> <a title="[T](numCatches: Int)(pf: scala.tools.nsc.util.Exceptional.Catcher[T])scala.tools.nsc.util.Exceptional.Catcher[T]" id="648847">expiringHandler</a><span class="delimiter">[</span><a title="" id="648849">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="1098712">numCatches</a>: <a href="../../../Int.scala.html#508" title="Int">Int</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.tools.nsc.util.Exceptional.Catcher[T]" id="1098713">pf</a>: <a href="../../../PartialFunction.scala.html#217" title="scala.tools.nsc.util.Exceptional.Catcher[T]">Catcher</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../PartialFunction.scala.html#217" title="scala.tools.nsc.util.Exceptional.Catcher[T]">Catcher</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="1191423">remaining</a> = <a href="#1098712" title="Int">numCatches</a>;
    <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,T] with Serializable" id="1191450" class="delimiter">{</a> <span class="keyword">case</span> <a href="#1191444" title="B1" id="1191459">ex</a>: Throwable <span class="keyword">if</span> <a href="#1191423" title="Int">remaining</a> <a href="../../../Int.scala.html#57919" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1098713" title="scala.tools.nsc.util.Exceptional.Catcher[T]">pf</a>.<a href="../../../PartialFunction.scala.html#59566" title="(x: Throwable)Boolean">isDefinedAt</a><span class="delimiter">(</span>ex<span class="delimiter">)</span> =&gt;
        <a href="#1191423" title="Int">remaining</a> <a href="../../../Int.scala.html#57955" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>
        <a href="../../../Function1.scala.html#59555" title="(v1: Throwable)T">pf</a><span class="delimiter">(</span>ex<span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** The Throwable =&gt; Exceptional implicit plus the associated factory. */
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.util.Exceptional.throwableToExceptional : (ex: Throwable)(implicit prefs: scala.tools.nsc.util.ScalaPrefs)scala.tools.nsc.util.Exceptional" id="648850">throwableToExceptional</a><span class="delimiter">(</span><a title="Throwable" id="1191173">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.tools.nsc.util.ScalaPrefs" id="1191174">prefs</a>: <a href="ScalaPrefs.scala.html#52062" title="scala.tools.nsc.util.ScalaPrefs">ScalaPrefs</a><span class="delimiter">)</span>: <a href="#52032" title="scala.tools.nsc.util.Exceptional">Exceptional</a> = <a href="#648851" title="(ex: Throwable)(implicit prefs: scala.tools.nsc.util.ScalaPrefs)scala.tools.nsc.util.Exceptional">apply</a><span class="delimiter">(</span><a href="#1191173" title="Throwable">ex</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1191174" title="scala.tools.nsc.util.ScalaPrefs">prefs</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(ex: Throwable)(implicit prefs: scala.tools.nsc.util.ScalaPrefs)scala.tools.nsc.util.Exceptional" id="648851">apply</a><span class="delimiter">(</span><a title="Throwable" id="648866">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.tools.nsc.util.ScalaPrefs" id="648867">prefs</a>: <a href="ScalaPrefs.scala.html#52062" title="scala.tools.nsc.util.ScalaPrefs">ScalaPrefs</a><span class="delimiter">)</span> = <span title="scala.tools.nsc.util.Exceptional" class="keyword">new</span> <a href="#52032" title="scala.tools.nsc.util.Exceptional">Exceptional</a><span class="delimiter">(</span><a href="#648866" title="Throwable">ex</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#648867" title="scala.tools.nsc.util.ScalaPrefs">prefs</a><span class="delimiter">)</span>

  /** Some handy functions. */
  <span class="keyword">def</span> <a title="()Array[scala.tools.nsc.util.JavaStackFrame]" id="648852">stack</a><span class="delimiter">(</span><span class="delimiter">)</span>  = <a href="JavaStackFrame.scala.html#51622" title="scala.tools.nsc.util.JavaStackFrame.type">JavaStackFrame</a> <a href="JavaStackFrame.scala.html#1191040" title="(xs: Array[StackTraceElement])Array[scala.tools.nsc.util.JavaStackFrame]">frames</a> <span class="delimiter">(</span><span class="delimiter">(</span><span title="Throwable" class="keyword">new</span> <a href="../../../package.scala.html#56957" title="Throwable">Throwable</a><span class="delimiter">)</span>.<a href="../../../Predef.scala.html#8521" title="(xs: Array[StackTraceElement])scala.collection.mutable.ArrayOps[StackTraceElement]">getStackTrace</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#60126" title="(p: StackTraceElement =&gt; Boolean)Array[StackTraceElement]">dropWhile</a> <a href="#648863" title="(ste: StackTraceElement)Boolean">isLocal</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="648853">showme</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#648851" title="(ex: Throwable)(implicit prefs: scala.tools.nsc.util.ScalaPrefs)scala.tools.nsc.util.Exceptional">apply</a><a href="ScalaPrefs.scala.html#648908" title="scala.tools.nsc.util.ScalaPrefs.DefaultScalaPrefs.type" class="delimiter">(</a><span title="Throwable" class="keyword">new</span> <a href="../../../package.scala.html#56957" title="Throwable">Throwable</a><span class="delimiter">)</span>.<a href="#648897" title="()Unit">show</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="648854">showstack</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#648851" title="(ex: Throwable)(implicit prefs: scala.tools.nsc.util.ScalaPrefs)scala.tools.nsc.util.Exceptional">apply</a><a href="ScalaPrefs.scala.html#648908" title="scala.tools.nsc.util.ScalaPrefs.DefaultScalaPrefs.type" class="delimiter">(</a><span title="Throwable" class="keyword">new</span> <a href="../../../package.scala.html#56957" title="Throwable">Throwable</a><span class="delimiter">)</span>.<a href="#648900" title="()Unit">showTable</a><span class="delimiter">(</span><span class="delimiter">)</span>

  /** A frame formatter with more refined aesthetics than the default.
   *  Come, let us be civilized.
   */
  <span class="keyword">object</span> <a title="scala.tools.nsc.util.Exceptional.ScalaFormat.type" id="648855">ScalaFormat</a> <a href="#648856" title="scala.tools.nsc.util.Exceptional.ScalaFormat.type" class="keyword">extends</a> <a href="TableDef.scala.html#51876" title="scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">TableDef</a><span class="delimiter">[</span>JavaStackFrame<span class="delimiter">]</span> <span class="delimiter">{</span>
      <a href="TableDef.scala.html#531795" title="(pair: (String, scala.tools.nsc.util.JavaStackFrame =&gt; Any))scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">&gt;&gt;</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#8484" title="(x: String)ArrowAssoc[String]" class="string">&quot;file&quot;</a>    <a href="../../../Predef.scala.html#63591" title="(y: scala.tools.nsc.util.JavaStackFrame =&gt; String)(String, scala.tools.nsc.util.JavaStackFrame =&gt; String)">-&gt;</a> <span class="delimiter">(</span><a href="#1191727" title="scala.tools.nsc.util.JavaStackFrame">_</a>.<a href="JavaStackFrame.scala.html#922045" title="=&gt; String">fileName</a><span class="delimiter">)</span><span class="delimiter">)</span>   <a href="TableDef.scala.html#531797" title="(sep: String)scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">&gt;+</a> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span>
      <a href="TableDef.scala.html#531796" title="(pair: (String, scala.tools.nsc.util.JavaStackFrame =&gt; Any))scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">&lt;&lt;</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#8484" title="(x: String)ArrowAssoc[String]" class="string">&quot;line&quot;</a>    <a href="../../../Predef.scala.html#63591" title="(y: scala.tools.nsc.util.JavaStackFrame =&gt; Int)(String, scala.tools.nsc.util.JavaStackFrame =&gt; Int)">-&gt;</a> <span class="delimiter">(</span><a href="#1191746" title="scala.tools.nsc.util.JavaStackFrame">_</a>.<a href="JavaStackFrame.scala.html#922046" title="=&gt; Int">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="TableDef.scala.html#531795" title="(pair: (String, scala.tools.nsc.util.JavaStackFrame =&gt; Any))scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">&gt;&gt;</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#8484" title="(x: String)ArrowAssoc[String]" class="string">&quot;class&quot;</a>   <a href="../../../Predef.scala.html#63591" title="(y: scala.tools.nsc.util.JavaStackFrame =&gt; String)(String, scala.tools.nsc.util.JavaStackFrame =&gt; String)">-&gt;</a> <span class="delimiter">(</span><a href="#1191764" title="scala.tools.nsc.util.JavaStackFrame">_</a>.<a href="JavaStackFrame.scala.html#922052" title="=&gt; String">shortestName</a><span class="delimiter">)</span><span class="delimiter">)</span>  <a href="TableDef.scala.html#531797" title="(sep: String)scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">&gt;+</a> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span>
      <a href="TableDef.scala.html#531796" title="(pair: (String, scala.tools.nsc.util.JavaStackFrame =&gt; Any))scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]">&lt;&lt;</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#8484" title="(x: String)ArrowAssoc[String]" class="string">&quot;method&quot;</a>  <a href="../../../Predef.scala.html#63591" title="(y: scala.tools.nsc.util.JavaStackFrame =&gt; String)(String, scala.tools.nsc.util.JavaStackFrame =&gt; String)">-&gt;</a> <span class="delimiter">(</span><a href="#1191784" title="scala.tools.nsc.util.JavaStackFrame">_</a>.<a href="JavaStackFrame.scala.html#922044" title="=&gt; String">methodName</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait Calibrated extends Object" id="648857">Calibrated</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(ex: Throwable)scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table" id="1190990">newTable</a><span class="delimiter">(</span><a title="Throwable" id="1190992">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: TableDef<span class="delimiter">[</span>JavaStackFrame<span class="delimiter">]</span>#<a href="TableDef.scala.html#531812" title="scala.tools.nsc.util.TableDef[scala.tools.nsc.util.JavaStackFrame]#Table">Table</a>
    <span class="keyword">def</span> <a title="(frame: scala.tools.nsc.util.JavaStackFrame)String" id="1190991">inContext</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.JavaStackFrame" id="1191031">frame</a>: <a href="JavaStackFrame.scala.html#51621" title="scala.tools.nsc.util.JavaStackFrame">JavaStackFrame</a><span class="delimiter">)</span>: <span title="String">String</span>
  <span class="delimiter">}</span>
  <span class="keyword">trait</span> <a title="trait Formatter extends Object with Throwable =&gt; scala.tools.nsc.util.Exceptional.Calibrated" id="648858">Formatter</a> <span class="keyword">extends</span> <span class="delimiter">(</span>Throwable =&gt; Calibrated<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(ex: Throwable)scala.tools.nsc.util.Exceptional.Calibrated" id="1190978">apply</a><span class="delimiter">(</span><a title="Throwable" id="1190980">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <a href="#648857" title="scala.tools.nsc.util.Exceptional.Calibrated">Calibrated</a>
  <span class="delimiter">}</span>
  <span class="keyword">object</span> <a title="scala.tools.nsc.util.Exceptional.Formatter.type" id="648859">Formatter</a> <a href="#648860" title="scala.tools.nsc.util.Exceptional.Formatter.type" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(implicit prefs: scala.tools.nsc.util.ScalaPrefs)scala.tools.nsc.util.Exceptional.Formatter" id="1191791">apply</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.tools.nsc.util.ScalaPrefs" id="1191793">prefs</a>: <a href="ScalaPrefs.scala.html#52062" title="scala.tools.nsc.util.ScalaPrefs">ScalaPrefs</a><span class="delimiter">)</span>: <a href="#648858" title="scala.tools.nsc.util.Exceptional.Formatter">Formatter</a> = <a href="#1191794" title="scala.tools.nsc.util.Exceptional.Formatter" class="keyword">new</a> <a title="anonymous class $anon extends Object with scala.tools.nsc.util.Exceptional.Formatter" id="1191794">Formatter</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(ex: Throwable)scala.tools.nsc.util.Exceptional.Calibrated{def newTable(ex: Throwable): scala.tools.nsc.util.Exceptional.ScalaFormat.Table}" id="1191796">apply</a><span class="delimiter">(</span><a title="Throwable" id="1191800">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> = <a href="#1191805" title="scala.tools.nsc.util.Exceptional.Calibrated" class="keyword">new</a> <a title="anonymous class $anon extends Object with scala.tools.nsc.util.Exceptional.Calibrated" id="1191805">Calibrated</a> <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(ex: Throwable)scala.tools.nsc.util.Exceptional.ScalaFormat.Table" id="1191807">newTable</a><span class="delimiter">(</span><a title="Throwable" id="1191811">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>          = <span title="scala.tools.nsc.util.Exceptional.ScalaFormat.Table" class="keyword">new</span> <a href="#648855" title="scala.tools.nsc.util.Exceptional.ScalaFormat.type">ScalaFormat</a>.<a href="TableDef.scala.html#531812" title="scala.tools.nsc.util.Exceptional.ScalaFormat.Table">Table</a><span class="delimiter">(</span><a href="JavaStackFrame.scala.html#51622" title="scala.tools.nsc.util.JavaStackFrame.type">JavaStackFrame</a> <a href="../../../LowPriorityImplicits.scala.html#8350" title="(xs: Array[scala.tools.nsc.util.JavaStackFrame])scala.collection.mutable.WrappedArray[scala.tools.nsc.util.JavaStackFrame]">frames</a> <a href="#1191811" title="Throwable">ex</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(frame: scala.tools.nsc.util.JavaStackFrame)String" id="1191808">inContext</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.JavaStackFrame" id="1191849">frame</a>: <a href="JavaStackFrame.scala.html#51621" title="scala.tools.nsc.util.JavaStackFrame">JavaStackFrame</a><span class="delimiter">)</span> = <span title="scala.tools.nsc.util.FrameContext" class="keyword">new</span> <a href="JavaStackFrame.scala.html#51483" title="scala.tools.nsc.util.FrameContext">FrameContext</a><span class="delimiter">(</span><a href="#1191849" title="scala.tools.nsc.util.JavaStackFrame">frame</a>, <a href="#1191793" title="scala.tools.nsc.util.ScalaPrefs">prefs</a>.<a href="ScalaPrefs.scala.html#648905" title="=&gt; scala.tools.nsc.io.Sources">codeSources</a><span class="delimiter">)</span> <a href="JavaStackFrame.scala.html#1191867" title="()String">toString</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Java stack traces have the interesting property of using only the name
   *  of the file, no paths.  This makes it a bit of a gamble to try to associate
   *  a stack frame with a specific file.  Witness the heuristic.
   */
  <span class="keyword">def</span> <a title="(sources: scala.tools.nsc.io.Sources, frame: scala.tools.nsc.util.JavaStackFrame)List[scala.tools.nsc.io.Fileish]" id="648861">locateSources</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Sources" id="1192138">sources</a>: <a href="../io/Sources.scala.html#40655" title="scala.tools.nsc.io.Sources">Sources</a>, <a title="scala.tools.nsc.util.JavaStackFrame" id="1192139">frame</a>: <a href="JavaStackFrame.scala.html#51621" title="scala.tools.nsc.util.JavaStackFrame">JavaStackFrame</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#12322" title="List[scala.tools.nsc.io.Fileish]">List</a><span class="delimiter">[</span>Fileish<span class="delimiter">]</span> = <span class="delimiter">{</span>
    // if only one has a matching path, that's fairly sure to be the one
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.io.Fileish]" id="1192140">matches</a> = <a href="../io/Sources.scala.html#911906" title="(name: String)List[scala.tools.nsc.io.Fileish]">sources</a><span class="delimiter">(</span><a href="#1192139" title="scala.tools.nsc.util.JavaStackFrame">frame</a>.<a href="JavaStackFrame.scala.html#922045" title="=&gt; String">fileName</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58981" title="(p: scala.tools.nsc.io.Fileish =&gt; Boolean)List[scala.tools.nsc.io.Fileish]">filter</a> <span class="delimiter">(</span><a href="#1192150" title="scala.tools.nsc.io.Fileish">_</a>.<a href="../io/Fileish.scala.html#966040" title="=&gt; String">pkgFromPath</a> <span title="(x$1: String)Boolean">endsWith</span> <a href="#1192139" title="scala.tools.nsc.util.JavaStackFrame">frame</a>.<a href="JavaStackFrame.scala.html#922048" title="=&gt; String">pkgName</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1192140" title="List[scala.tools.nsc.io.Fileish]">matches</a>.<a href="../../../collection/IterableLike.scala.html#59464" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#58724" title="(x: Boolean)Boolean">||</a> <a href="#1192140" title="List[scala.tools.nsc.io.Fileish]">matches</a>.<a href="../../../collection/TraversableLike.scala.html#59012" title="=&gt; List[scala.tools.nsc.io.Fileish]">tail</a>.<a href="../../../collection/IterableLike.scala.html#59464" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="#1192140" title="List[scala.tools.nsc.io.Fileish]">matches</a>

    // otherwise we'll drink them in and look for a package name
    <a href="#1192140" title="List[scala.tools.nsc.io.Fileish]">matches</a> <a href="../../../collection/TraversableLike.scala.html#58981" title="(p: scala.tools.nsc.io.Fileish =&gt; Boolean)List[scala.tools.nsc.io.Fileish]">filter</a> <span class="delimiter">(</span><a href="#1192158" title="scala.tools.nsc.io.Fileish">_</a>.<a href="../io/Fileish.scala.html#966042" title="=&gt; String">pkgFromSource</a> <span title="(x$1: String)Boolean">endsWith</span> <a href="#1192139" title="scala.tools.nsc.util.JavaStackFrame">frame</a>.<a href="JavaStackFrame.scala.html#922048" title="=&gt; String">pkgName</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Right now this punts if more than one match and it accepts the first at random.
   */
  <span class="keyword">def</span> <a title="(sources: scala.tools.nsc.io.Sources, frame: scala.tools.nsc.util.JavaStackFrame)Option[scala.tools.nsc.io.Fileish]" id="648862">locateSource</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Sources" id="1191874">sources</a>: <a href="../io/Sources.scala.html#40655" title="scala.tools.nsc.io.Sources">Sources</a>, <a title="scala.tools.nsc.util.JavaStackFrame" id="1191875">frame</a>: <a href="JavaStackFrame.scala.html#51621" title="scala.tools.nsc.util.JavaStackFrame">JavaStackFrame</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#1510" title="Option[scala.tools.nsc.io.Fileish]">Option</a><span class="delimiter">[</span>Fileish<span class="delimiter">]</span> =
    <a href="#648861" title="(sources: scala.tools.nsc.io.Sources, frame: scala.tools.nsc.util.JavaStackFrame)List[scala.tools.nsc.io.Fileish]">locateSources</a><span class="delimiter">(</span><a href="#1191874" title="scala.tools.nsc.io.Sources">sources</a>, <a href="#1191875" title="scala.tools.nsc.util.JavaStackFrame">frame</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#59011" title="=&gt; Option[scala.tools.nsc.io.Fileish]">headOption</a>

  <span class="keyword">def</span> <a title="(ste: StackTraceElement)Boolean" id="648863">isLocal</a><span class="delimiter">(</span><a title="StackTraceElement" id="1191694">ste</a>: <span title="StackTraceElement">StackTraceElement</span><span class="delimiter">)</span> = <a href="#1191694" title="StackTraceElement">ste</a>.<span title="()String">getClassName</span> <span title="(x$1: String)Boolean">startsWith</span> <span class="keyword">this</span>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span>
  <span class="keyword">def</span> <a title="(x: Throwable)List[Throwable]" id="648864">causes</a><span class="delimiter">(</span><a title="Throwable" id="1191170">x</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#12322" title="List[Throwable]">List</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <a href="#1191170" title="Throwable">x</a>.<a href="#1192165" title="()Throwable">getCause</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#1192165" title="List[Throwable]" id="1192168" class="keyword">null</a> =&gt; <a href="#1192169" title="(x: List[Throwable])List[Throwable]">Nil</a>
    <span class="keyword">case</span> ex   =&gt; <a href="#1191170" title="Throwable">x</a> <a href="#1192169" title="(x: List[Throwable])List[Throwable]">::</a> <a href="#648864" title="(x: Throwable)List[Throwable]">causes</a><span class="delimiter">(</span>ex<span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(x: Throwable)Throwable" id="648865">unwrap</a><span class="delimiter">(</span><a title="Throwable" id="665801">x</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Throwable">Throwable</span> = <a href="#665801" title="Throwable">x</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span>  _: InvocationTargetException |
          _: ExceptionInInitializerError |
          _: UndeclaredThrowableException |
          _: ExecutionException
            <span class="keyword">if</span> <a href="#665801" title="Throwable">x</a>.<span title="()Throwable">getCause</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> =&gt;
              <a href="#648865" title="(x: Throwable)Throwable">unwrap</a><a href="#1192188" title="(x: Throwable)Throwable" class="delimiter">(</a><a href="#665801" title="Throwable">x</a>.<span title="()Throwable">getCause</span><span class="delimiter">)</span>

    <span class="keyword">case</span> _ =&gt; <a href="#1192188" title="(x: Throwable)Throwable">x</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>