<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/LambdaLift.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> <a href="../symtab/package.scala.html#57302" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> util.TreeSet
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.LinkedHashMap

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LambdaLift extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform" id="44971">LambdaLift</a> <a href="#44971" title="scala.tools.nsc.transform.LambdaLift" class="keyword">extends</a> <a href="InfoTransform.scala.html#44650" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../SubComponent.scala.html#641784" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#441641" title="LambdaLift.this.global.definitions.type">definitions</a>._

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="651606">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;lambdalift&quot;)" class="string">&quot;lambdalift&quot;</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="LambdaLift.this.global.TypeMap" id="651608">lifted</a> = <a href="#1056236" title="LambdaLift.this.global.TypeMap" class="keyword">new</a> <a href="../../../reflect/internal/Types.scala.html#441429" title="anonymous class $anon extends LambdaLift.this.global.TypeMap" id="1056236">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type" id="1056238">apply</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Type" id="1056239">tp</a>: <a href="../../../reflect/internal/Types.scala.html#441242" title="LambdaLift.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#441242" title="LambdaLift.this.global.Type">Type</a> = <a href="#1056239" title="LambdaLift.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> TypeRef<a href="#1056303" title="LambdaLift.this.global.Type" id="1056307" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#441258" title="LambdaLift.this.global.Type" id="1056312">NoPrefix</a>, sym, <a href="../../../collection/immutable/List.scala.html#11552" title="LambdaLift.this.global.Type" id="1056313">Nil</a><span class="delimiter">)</span> <span class="keyword">if</span> sym.<a href="../../../reflect/internal/Symbols.scala.html#443231" title="=&gt; Boolean">isClass</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a>sym.<a href="../../../reflect/internal/Symbols.scala.html#443287" title="=&gt; Boolean">isPackageClass</a> =&gt;
        <a href="../../../reflect/internal/Types.scala.html#441371" title="(pre: LambdaLift.this.global.Type, sym: LambdaLift.this.global.Symbol, args: List[LambdaLift.this.global.Type])LambdaLift.this.global.Type">typeRef</a><a href="#1056314" title="(x: LambdaLift.this.global.Type)LambdaLift.this.global.Type" class="delimiter">(</a><a href="#1056238" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type">apply</a><span class="delimiter">(</span>sym.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443480" title="=&gt; LambdaLift.this.global.Symbol">enclClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#443485" title="=&gt; LambdaLift.this.global.Type">thisType</a><span class="delimiter">)</span>, sym, <a href="../../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
      <span class="keyword">case</span> ClassInfoType<a href="#1056303" title="LambdaLift.this.global.Type" id="1056311" class="delimiter">(</a>parents, decls, clazz<span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[LambdaLift.this.global.Type]" id="1056262">parents1</a> = parents <a href="../../../collection/immutable/List.scala.html#63652" title="(f: LambdaLift.this.global.Type =&gt; LambdaLift.this.global.Type)List[LambdaLift.this.global.Type]">mapConserve</a> <a href="#1056236" title="LambdaLift.this.global.TypeMap" class="keyword">this</a>
        <span title="LambdaLift.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056262" title="List[LambdaLift.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> parents<span class="delimiter">)</span> <a href="#1056239" title="LambdaLift.this.global.Type">tp</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#453477" title="(parents: List[LambdaLift.this.global.Type], decls: LambdaLift.this.global.Scope, typeSymbol: LambdaLift.this.global.Symbol)LambdaLift.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#1056262" title="List[LambdaLift.this.global.Type]">parents1</a>, decls, clazz<span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <a href="../../../reflect/internal/Types.scala.html#460841" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type">mapOver</a><a href="#1056314" title="(x: LambdaLift.this.global.Type)LambdaLift.this.global.Type" class="delimiter">(</a><a href="#1056239" title="LambdaLift.this.global.Type">tp</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol, tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type" id="651610">transformInfo</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056346">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a>, <a title="LambdaLift.this.global.Type" id="1056347">tp</a>: <a href="../../../reflect/internal/Types.scala.html#441242" title="LambdaLift.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#441242" title="LambdaLift.this.global.Type">Type</a> =
    <span title="LambdaLift.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056346" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443263" title="=&gt; Boolean">isCapturedVariable</a><span class="delimiter">)</span> <a href="../../../reflect/internal/CapturedVariables.scala.html#441942" title="(vble: LambdaLift.this.global.Symbol, tpe: LambdaLift.this.global.Type, erasedTypes: Boolean)LambdaLift.this.global.Type">capturedVariableType</a><span class="delimiter">(</span><a href="#1056346" title="LambdaLift.this.global.Symbol">sym</a>, tpe = <a href="../../../reflect/internal/Types.scala.html#460839" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type">lifted</a><span class="delimiter">(</span><a href="#1056347" title="LambdaLift.this.global.Type">tp</a><span class="delimiter">)</span>, erasedTypes = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#460839" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type">lifted</a><span class="delimiter">(</span><a href="#1056347" title="LambdaLift.this.global.Type">tp</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: LambdaLift.this.global.CompilationUnit)LambdaLift.this.global.Transformer" id="651611">newTransformer</a><span class="delimiter">(</span><a title="LambdaLift.this.global.CompilationUnit" id="1056381">unit</a>: <a href="../CompilationUnits.scala.html#559797" title="LambdaLift.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#559848" title="LambdaLift.this.global.Transformer">Transformer</a> =
    <span title="LambdaLift.this.LambdaLifter" class="keyword">new</span> <a href="#651612" title="LambdaLift.this.LambdaLifter">LambdaLifter</a><span class="delimiter">(</span><a href="#1056381" title="LambdaLift.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class LambdaLifter extends LambdaLift.this.global.explicitOuter.OuterPathTransformer" id="651612">LambdaLifter</a><a href="#651612" title="LambdaLift.this.LambdaLifter" class="delimiter">(</a><a title="LambdaLift.this.global.CompilationUnit" id="1056427">unit</a>: <a href="../CompilationUnits.scala.html#559797" title="LambdaLift.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../Global.scala.html#559599" title="LambdaLift.this.global.explicitOuter.type">explicitOuter</a>.<a href="ExplicitOuter.scala.html#650975" title="LambdaLift.this.global.explicitOuter.OuterPathTransformer">OuterPathTransformer</a><span class="delimiter">(</span><a href="#1056427" title="LambdaLift.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    /** A map storing free variables of functions and classes */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]" id="1056387">free</a> = <span title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]" class="keyword">new</span> <a href="../../../collection/mutable/LinkedHashMap.scala.html#13150" title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, SymSet<span class="delimiter">]</span>

    /** A map storing the free variable proxies of functions and classes */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]]" id="1056389">proxies</a> = <span title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]]" class="keyword">new</span> <a href="../../../collection/mutable/LinkedHashMap.scala.html#13150" title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span>

    /** A hashtable storing calls between functions */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]" id="1056391">called</a> = <span title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]" class="keyword">new</span> <a href="../../../collection/mutable/LinkedHashMap.scala.html#13150" title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, SymSet<span class="delimiter">]</span>

    /** The set of symbols that need to be renamed. */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]" id="1056393">renamable</a> = <a href="#1056408" title="=&gt; scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">newSymSet</a>

    // (trait, name) -&gt; owner
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name),LambdaLift.this.global.Symbol]" id="1056395">localTraits</a>      = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</a><span title="(elems: ((LambdaLift.this.global.Symbol, LambdaLift.this.global.Name), LambdaLift.this.global.Symbol)*)scala.collection.mutable.HashMap[(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name),LambdaLift.this.global.Symbol]" class="delimiter">[</span><a href="../../../Tuple2.scala.html#1222" title="(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name)" class="delimiter">(</a>Symbol, Name<span class="delimiter">)</span>, <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    // (owner, name) -&gt; implClass
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name),LambdaLift.this.global.Symbol]" id="1056397">localImplClasses</a> = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</a><span title="(elems: ((LambdaLift.this.global.Symbol, LambdaLift.this.global.Name), LambdaLift.this.global.Symbol)*)scala.collection.mutable.HashMap[(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name),LambdaLift.this.global.Symbol]" class="delimiter">[</span><a href="../../../Tuple2.scala.html#1222" title="(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name)" class="delimiter">(</a>Symbol, Name<span class="delimiter">)</span>, <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

    /** A flag to indicate whether new free variables have been found */
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="1056400">changedFreeVars</a>: <a href="../../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = _

    /** Buffers for lifted out classes and methods */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]" id="1056402">liftedDefs</a> = <span title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]" class="keyword">new</span> <a href="../../../collection/mutable/LinkedHashMap.scala.html#13150" title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>

    /** True if we are transforming under a ReferenceToBoxed node */
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="1056405">isBoxedRef</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">private</span> <span class="keyword">type</span> <a title="scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]" id="1056407">SymSet</a> = <a href="../util/TreeSet.scala.html#51657" title="scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">TreeSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]" id="1056408">newSymSet</a> = <span title="scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]" class="keyword">new</span> <a href="../util/TreeSet.scala.html#51657" title="scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">TreeSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">(</span><a href="#1056432" title="LambdaLift.this.global.Symbol">_</a> <a href="../../../reflect/internal/Symbols.scala.html#443466" title="(that: LambdaLift.this.global.Symbol)Boolean">isLess</a> <a href="#1056433" title="LambdaLift.this.global.Symbol">_</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet], sym: LambdaLift.this.global.Symbol)LambdaLifter.this.SymSet" id="1056409">symSet</a><span class="delimiter">(</span><a title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]" id="1056528">f</a>: <a href="../../../collection/mutable/LinkedHashMap.scala.html#13150" title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, SymSet<span class="delimiter">]</span>, <a title="LambdaLift.this.global.Symbol" id="1056529">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../util/TreeSet.scala.html#51657" title="LambdaLifter.this.SymSet">SymSet</a> =
      <a href="#1056528" title="scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">f</a>.<a href="../../../collection/mutable/MapLike.scala.html#78517" title="(key: LambdaLift.this.global.Symbol, op: =&gt; LambdaLifter.this.SymSet)LambdaLifter.this.SymSet">getOrElseUpdate</a><span class="delimiter">(</span><a href="#1056529" title="LambdaLift.this.global.Symbol">sym</a>, <a href="#1056408" title="=&gt; scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">newSymSet</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol)Boolean" id="1056410">isSameOwnerEnclosure</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056637">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#1056637" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/api/Trees.scala.html#438841" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">logicallyEnclosingMember</a>

    /** Mark symbol `sym` as being free in `enclosure`, unless `sym`
     *  is defined in `enclosure` or there is a class between `enclosure`s owner
     *  and the owner of `sym`.
     *  Return `true` if there is no class between `enclosure` and
     *  the owner of sym.
     *  pre: sym.isLocal, (enclosure.isMethod || enclosure.isClass)
     *
     *  The idea of `markFree` is illustrated with an example:
     *
     *  def f(x: int) = {
     *    class C {
     *      class D {
     *        val y = x
     *      }
     *    }
     *  }
     *
     *  In this case `x` is free in the primary constructor of class `C`.
     *  but it is not free in `D`, because after lambda lift the code would be transformed
     *  as follows:
     *
     *  def f(x$0: int) {
     *    class C(x$0: int) {
     *      val x$1 = x$0
     *      class D {
     *        val y = outer.x$1
     *      }
     *    }
     *  }
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol, enclosure: LambdaLift.this.global.Symbol)Boolean" id="1056411">markFree</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056562">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a>, <a title="LambdaLift.this.global.Symbol" id="1056563">enclosure</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;mark free: &quot;)" class="string">&quot;mark free: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; of &quot;)" class="string">&quot; of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; marked free in &quot;)" class="string">&quot; marked free in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a><span class="delimiter">)</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a><span class="delimiter">)</span> <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a>.<a href="../../../reflect/internal/Symbols.scala.html#443287" title="=&gt; Boolean">isPackageClass</a> <a href="../../../Boolean.scala.html#58724" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1056411" title="(sym: LambdaLift.this.global.Symbol, enclosure: LambdaLift.this.global.Symbol)Boolean">markFree</a><span class="delimiter">(</span><a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>, <a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a>.<a href="../../../reflect/internal/Symbols.scala.html#443330" title="=&gt; LambdaLift.this.global.Symbol">skipConstructor</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="LambdaLifter.this.SymSet" id="1056648">ss</a> = <a href="#1056409" title="(f: scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet], sym: LambdaLift.this.global.Symbol)LambdaLifter.this.SymSet">symSet</a><span class="delimiter">(</span><a href="#1056387" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">free</a>, <a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a><span class="delimiter">)</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="../../../reflect/internal/util/Set.scala.html#514462" title="(x: LambdaLift.this.global.Symbol)Boolean">ss</a><span class="delimiter">(</span><a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#1056648" title="LambdaLifter.this.SymSet">ss</a> <a href="../util/TreeSet.scala.html#1044475" title="(x: LambdaLift.this.global.Symbol)Unit">addEntry</a> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>
          <a href="#1056393" title="=&gt; scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">renamable</a> <a href="../util/TreeSet.scala.html#1044475" title="(x: LambdaLift.this.global.Symbol)Unit">addEntry</a> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>
          <a href="../Global.scala.html#559745" title="(op: =&gt; Any)Any">beforePickler</a> <span class="delimiter">{</span>
            // The param symbol in the MethodType should not be renamed, only the symbol in scope. This way,
            // parameter names for named arguments are not changed. Example: without cloning the MethodType,
            //     def closure(x: Int) = { () =&gt; x }
            // would have the signature
            //     closure: (x$1: Int)() =&gt; Int
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#443630" title="=&gt; Boolean">isParameter</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#442008" title="=&gt; List[List[LambdaLift.this.global.Symbol]]">paramss</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#76170" title="(p: List[LambdaLift.this.global.Symbol] =&gt; Boolean)Boolean">exists</a><span class="delimiter">(</span><a href="#1056668" title="List[LambdaLift.this.global.Symbol]">_</a> <a href="../../../collection/SeqLike.scala.html#59768" title="(elem: Any)Boolean">contains</a> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a> <a href="../../../reflect/internal/Symbols.scala.html#443430" title="(f: LambdaLift.this.global.Type =&gt; LambdaLift.this.global.Type)LambdaLift.this.global.Symbol">modifyInfo</a> <span class="delimiter">(</span><a href="#1056673" title="LambdaLift.this.global.Type">_</a> <a href="../../../reflect/internal/Types.scala.html#442070" title="(owner: LambdaLift.this.global.Symbol)LambdaLift.this.global.Type">cloneInfo</a> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#1056400" title="(x$1: Boolean)Unit">changedFreeVars</a> = <span title="Boolean(true)" class="keyword">true</span>
          <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is free in &quot;)" class="string">&quot; is free in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a><span class="delimiter">)</span>;
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443276" title="=&gt; Boolean">isVariable</a><span class="delimiter">)</span> <a href="#1056562" title="LambdaLift.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#443305" title="(mask: Long)sym.type">setFlag</a> <span title="Long(65536L)">CAPTURED</span>
        <span class="delimiter">}</span>
        <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1056563" title="LambdaLift.this.global.Symbol">enclosure</a>.<a href="../../../reflect/internal/Symbols.scala.html#443231" title="=&gt; Boolean">isClass</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol, owner: LambdaLift.this.global.Symbol)Unit" id="1056412">markCalled</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056564">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a>, <a title="LambdaLift.this.global.Symbol" id="1056565">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;mark called: &quot;)" class="string">&quot;mark called: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056564" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; of &quot;)" class="string">&quot; of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056564" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is called by &quot;)" class="string">&quot; is called by &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056565" title="LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span>
      <a href="#1056409" title="(f: scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet], sym: LambdaLift.this.global.Symbol)LambdaLifter.this.SymSet">symSet</a><span class="delimiter">(</span><a href="#1056391" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">called</a>, <a href="#1056565" title="LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span> <a href="../util/TreeSet.scala.html#1044475" title="(x: LambdaLift.this.global.Symbol)Unit">addEntry</a> <a href="#1056564" title="LambdaLift.this.global.Symbol">sym</a>
    <span class="delimiter">}</span>

    /** The traverse function */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="LambdaLift.this.global.Traverser" id="1056413">freeVarTraverser</a> = <a href="#1056439" title="LambdaLift.this.global.Traverser" class="keyword">new</a> <a href="../../../reflect/api/Trees.scala.html#23760" title="anonymous class $anon extends LambdaLift.this.global.Traverser" id="1056439">Traverser</a> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: LambdaLift.this.global.Tree)Unit" id="1056441">traverse</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1056442">tree</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
       <span class="keyword">try</span> <span class="delimiter">{</span> //debug
        <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1056445">sym</a> = <a href="#1056442" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>;
        <a href="#1056442" title="LambdaLift.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> ClassDef<a href="#1056586" title="Any" id="1056592" class="delimiter">(</a>_, _, _, _<span class="delimiter">)</span> =&gt;
            <a href="../../../collection/mutable/MapLike.scala.html#78496" title="(key: LambdaLift.this.global.Symbol, value: List[LambdaLift.this.global.Tree])Unit">liftedDefs</a><span class="delimiter">(</span><a href="#1056442" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a><span class="delimiter">)</span> = <a href="../../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type">Nil</a>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              // Don't rename implementation classes independently of their interfaces. If
              // the interface is to be renamed, then we will rename the implementation
              // class at that time. You'd think we could call &quot;.implClass&quot; on the trait
              // rather than collecting them in another map, but that seems to fail for
              // exactly the traits being renamed here (i.e. defined in methods.)
              //
              // !!! - it makes no sense to have methods like &quot;implClass&quot; and
              // &quot;companionClass&quot; which fail for an arbitrary subset of nesting
              // arrangements, and then have separate methods which attempt to compensate
              // for that failure. There should be exactly one method for any given
              // entity which always gives the right answer.
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443243" title="=&gt; Boolean">isImplClass</a><span class="delimiter">)</span>
                <a href="../../../collection/mutable/HashMap.scala.html#79209" title="(key: (LambdaLift.this.global.Symbol, LambdaLift.this.global.Name), value: LambdaLift.this.global.Symbol)Unit">localImplClasses</a><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#63804" title="(_1: LambdaLift.this.global.Symbol, _2: LambdaLift.this.global.TypeName)(LambdaLift.this.global.Symbol, LambdaLift.this.global.TypeName)" class="delimiter">(</a><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>, <a href="../../../reflect/internal/StdNames.scala.html#441756" title="LambdaLift.this.global.tpnme.type">tpnme</a>.<a href="../../../reflect/internal/StdNames.scala.html#449282" title="(implname: LambdaLift.this.global.Name)LambdaLift.this.global.TypeName">interfaceName</a><span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <a href="#1056393" title="=&gt; scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">renamable</a> <a href="../util/TreeSet.scala.html#1044475" title="(x: LambdaLift.this.global.Symbol)Unit">addEntry</a> <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443249" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span>
                  <a href="../../../collection/mutable/HashMap.scala.html#79209" title="(key: (LambdaLift.this.global.Symbol, LambdaLift.this.global.Name), value: LambdaLift.this.global.Symbol)Unit">localTraits</a><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#63804" title="(_1: LambdaLift.this.global.Symbol, _2: sym.NameType)(LambdaLift.this.global.Symbol, sym.NameType)" class="delimiter">(</a><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>, <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> DefDef<a href="#1056586" title="Any" id="1056600" class="delimiter">(</a>_, _, _, _, _, _<span class="delimiter">)</span> =&gt;
            <a href="#1056607" title="(x: Any)Any" class="keyword">if</a> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#1056393" title="=&gt; scala.tools.nsc.util.TreeSet[LambdaLift.this.global.Symbol]">renamable</a> <a href="../util/TreeSet.scala.html#1044475" title="(x: LambdaLift.this.global.Symbol)Unit">addEntry</a> <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>
              <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#443305" title="(mask: Long)sym.type">setFlag</a> <span class="delimiter">(</span>PrivateLocal <span title="Long(524324L)">|</span> FINAL<span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443350" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#1056409" title="(f: scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet], sym: LambdaLift.this.global.Symbol)LambdaLifter.this.SymSet">symSet</a><span class="delimiter">(</span><a href="#1056391" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">called</a>, <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../util/TreeSet.scala.html#1044475" title="(x: LambdaLift.this.global.Symbol)Unit">addEntry</a> <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> Ident<a href="#1056586" title="Any" id="1056602" class="delimiter">(</a>name<span class="delimiter">)</span> =&gt;
            <a href="#1056607" title="(x: Any)Any" class="keyword">if</a> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#441152" title="=&gt; LambdaLift.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="../Global.scala.html#559534" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span>name <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#441764" title="LambdaLift.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#445910" title="=&gt; LambdaLift.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1056561">owner</a> = <a href="../../../reflect/api/Trees.scala.html#433532" title="=&gt; LambdaLift.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a>
              <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443229" title="=&gt; Boolean">isTerm</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443282" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span> <a href="#1056411" title="(sym: LambdaLift.this.global.Symbol, enclosure: LambdaLift.this.global.Symbol)Boolean">markFree</a><span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>, <a href="#1056561" title="LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443282" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span> <a href="#1056412" title="(sym: LambdaLift.this.global.Symbol, owner: LambdaLift.this.global.Symbol)Unit">markCalled</a><span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>, <a href="#1056561" title="LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span>
                //symSet(called, owner) addEntry sym
            <span class="delimiter">}</span>
          <span class="keyword">case</span> Select<a href="#1056586" title="Any" id="1056606" class="delimiter">(</a>_, _<span class="delimiter">)</span> =&gt;
            <a href="#1056607" title="(x: Any)Any" class="keyword">if</a> <span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443265" title="=&gt; Boolean">isConstructor</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span>
              <a href="#1056412" title="(sym: LambdaLift.this.global.Symbol, owner: LambdaLift.this.global.Symbol)Unit">markCalled</a><span class="delimiter">(</span><a href="#1056445" title="LambdaLift.this.global.Symbol">sym</a>, <a href="../../../reflect/api/Trees.scala.html#433532" title="=&gt; LambdaLift.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt;
        <span class="delimiter">}</span>
        <a href="#1056439" title="LambdaLift.this.global.Traverser" class="keyword">super</a>.<a href="../../../reflect/api/Trees.scala.html#433535" title="(tree: LambdaLift.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1056442" title="LambdaLift.this.global.Tree">tree</a><span class="delimiter">)</span>
       <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>//debug
         <span class="keyword">case</span> <a title="Nothing" id="1056616">ex</a>: <span title="Throwable">Throwable</span> =&gt;
           <a href="../../../Console.scala.html#227" title="Console.type">Console</a>.<a href="../../../Console.scala.html#64301" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;exception when traversing &quot;)" class="string">&quot;exception when traversing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1056442" title="LambdaLift.this.global.Tree">tree</a><span class="delimiter">)</span>
           <span title="Nothing" class="keyword">throw</span> <a href="#1056616" title="Throwable">ex</a>
       <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** Compute free variables map `fvs`.
     *  Also assign unique names to all
     *  value/variable/let that are free in some function or class, and to
     *  all class/function symbols that are owned by some function.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="1056415">computeFreeVars</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1056413" title="=&gt; LambdaLift.this.global.Traverser">freeVarTraverser</a>.<a href="../../../reflect/api/Trees.scala.html#433535" title="(tree: LambdaLift.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1056427" title="LambdaLift.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#560800" title="=&gt; LambdaLift.this.global.Tree">body</a><span class="delimiter">)</span>

      <a href="#1056694" title="Unit" class="keyword">do</a> <span class="delimiter">{</span>
        <a href="#1056400" title="(x$1: Boolean)Unit">changedFreeVars</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056716">caller</a> &lt;- <a href="#1056391" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">called</a>.<a href="../../../collection/IterableLike.scala.html#59458" title="(f: LambdaLift.this.global.Symbol =&gt; Unit)Unit">keys</a> ; <a title="LambdaLift.this.global.Symbol" id="1056752">callee</a> &lt;- <a href="../../../collection/MapLike.scala.html#78420" title="(key: LambdaLift.this.global.Symbol)LambdaLifter.this.SymSet">called</a><a href="../../../reflect/internal/util/Set.scala.html#514459" title="(f: LambdaLift.this.global.Symbol =&gt; Unit)Unit" class="delimiter">(</a><a href="#1056716" title="LambdaLift.this.global.Symbol">caller</a><span class="delimiter">)</span> ; <a title="LambdaLifter.this.SymSet" id="1056760">fvs</a> &lt;- <a href="#1056387" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">free</a> <a href="../../../Option.scala.html#63839" title="(f: LambdaLifter.this.SymSet =&gt; Unit)Unit">get</a> <a href="#1056752" title="LambdaLift.this.global.Symbol">callee</a> ; <a title="LambdaLift.this.global.Symbol" id="1056765">fv</a> &lt;- <a href="../../../reflect/internal/util/Set.scala.html#514459" title="(f: LambdaLift.this.global.Symbol =&gt; Boolean)Unit">fvs</a><span class="delimiter">)</span>
          <a href="#1056411" title="(sym: LambdaLift.this.global.Symbol, enclosure: LambdaLift.this.global.Symbol)Boolean">markFree</a><span class="delimiter">(</span><a href="#1056765" title="LambdaLift.this.global.Symbol">fv</a>, <a href="#1056716" title="LambdaLift.this.global.Symbol">caller</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">while</span> <span class="delimiter">(</span><a href="#1056400" title="=&gt; Boolean">changedFreeVars</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol)Unit" id="1056692">renameSym</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056770">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="sym.NameType" id="1056771">originalName</a> = <a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a>
        <span class="keyword">val</span> <a title="String" id="1056772">base</a> = <a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../Predef.scala.html#8576" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <a href="../../../runtime/StringAdd.scala.html#60949" title="(other: String)String">+</a> <a href="../../../reflect/internal/StdNames.scala.html#441764" title="LambdaLift.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#445842" title="=&gt; String">NAME_JOIN_STRING</a> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443323" title="=&gt; Boolean">isAnonymousFunction</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443282" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span>
            <a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../Predef.scala.html#8576" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <a href="../../../runtime/StringAdd.scala.html#60949" title="(other: String)String">+</a> <a href="../../../reflect/internal/StdNames.scala.html#441764" title="LambdaLift.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#445842" title="=&gt; String">NAME_JOIN_STRING</a>
          <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="delimiter">)</span>
        <a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#443169" title="(name: LambdaLift.this.global.Name)sym.type">setName</a> <span class="delimiter">(</span>
          <span title="LambdaLift.this.global.Name" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#444125" title="=&gt; Boolean">isTypeName</a><span class="delimiter">)</span> <a href="#1056427" title="LambdaLift.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#560799" title="(prefix: String)LambdaLift.this.global.TypeName">freshTypeName</a><span class="delimiter">(</span><a href="#1056772" title="String">base</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#1056427" title="LambdaLift.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#560798" title="(prefix: String)LambdaLift.this.global.TermName">freshTermName</a><span class="delimiter">(</span><a href="#1056772" title="String">base</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>
        <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;renaming in %s: %s =&gt; %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443562" title="=&gt; String">fullLocationString</a>, <a href="#1056771" title="sym.NameType">originalName</a>, <a href="#1056770" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      /** Rename a trait's interface and implementation class in coordinated fashion.
       */
      <span class="keyword">def</span> <a title="(traitSym: LambdaLift.this.global.Symbol, implSym: LambdaLift.this.global.Symbol)Unit" id="1056693">renameTrait</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056814">traitSym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a>, <a title="LambdaLift.this.global.Symbol" id="1056815">implSym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="implSym.NameType" id="1056816">originalImplName</a> = <a href="#1056815" title="LambdaLift.this.global.Symbol">implSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; implSym.NameType">name</a>
        <a href="#1056692" title="(sym: LambdaLift.this.global.Symbol)Unit">renameSym</a><span class="delimiter">(</span><a href="#1056814" title="LambdaLift.this.global.Symbol">traitSym</a><span class="delimiter">)</span>
        <a href="#1056815" title="LambdaLift.this.global.Symbol">implSym</a> <a href="../../../reflect/internal/Symbols.scala.html#443169" title="(name: LambdaLift.this.global.Name)implSym.type">setName</a> <a href="../../../reflect/internal/StdNames.scala.html#441756" title="LambdaLift.this.global.tpnme.type">tpnme</a>.<a href="../../../reflect/internal/StdNames.scala.html#449281" title="(name: LambdaLift.this.global.Name)LambdaLift.this.global.TypeName">implClassName</a><span class="delimiter">(</span><a href="#1056814" title="LambdaLift.this.global.Symbol">traitSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; traitSym.NameType">name</a><span class="delimiter">)</span>

        <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;renaming impl class in step with %s: %s =&gt; %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1056814" title="LambdaLift.this.global.Symbol">traitSym</a>, <a href="#1056816" title="implSym.NameType">originalImplName</a>, <a href="#1056815" title="LambdaLift.this.global.Symbol">implSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; implSym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">for</span> <span class="delimiter">(</span>sym &lt;- <a href="../../../reflect/internal/util/Set.scala.html#514459" title="(f: LambdaLift.this.global.Symbol =&gt; Unit)Unit">renamable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        // If we renamed a trait from Foo to Foo$1, we must rename the implementation
        // class from Foo$class to Foo$1$class.  (Without special consideration it would
        // become Foo$class$1 instead.) Since the symbols are being renamed out from
        // under us, and there's no reliable link between trait symbol and impl symbol,
        // we have maps from ((trait, name)) -&gt; owner and ((owner, name)) -&gt; impl.
        <a href="#1056395" title="=&gt; scala.collection.mutable.HashMap[(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name),LambdaLift.this.global.Symbol]">localTraits</a> <a href="../../../collection/mutable/HashMap.scala.html#79210" title="(key: (LambdaLift.this.global.Symbol, LambdaLift.this.global.Name))Option[LambdaLift.this.global.Symbol]">remove</a> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#63804" title="(_1: LambdaLift.this.global.Symbol, _2: sym.NameType)(LambdaLift.this.global.Symbol, sym.NameType)" class="delimiter">(</a><a href="#1056829" title="LambdaLift.this.global.Symbol">sym</a>, <a href="#1056829" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../../Option.scala.html#2498" title="Unit" id="1056862">None</a>        =&gt; <a href="#1056692" title="(sym: LambdaLift.this.global.Symbol)Unit">renameSym</a><a href="#1056863" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1056829" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span class="keyword">case</span> Some<a href="#1056859" title="Unit" id="1056861" class="delimiter">(</a>owner<span class="delimiter">)</span> =&gt;
            <a href="#1056397" title="=&gt; scala.collection.mutable.HashMap[(LambdaLift.this.global.Symbol, LambdaLift.this.global.Name),LambdaLift.this.global.Symbol]">localImplClasses</a> <a href="#1056863" title="(x: Unit)Unit">remove</a> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#63804" title="(_1: LambdaLift.this.global.Symbol, _2: sym.NameType)(LambdaLift.this.global.Symbol, sym.NameType)" class="delimiter">(</a>owner, <a href="#1056829" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> Some<a href="#1056851" title="Unit" id="1056852" class="delimiter">(</a>implSym<span class="delimiter">)</span>  =&gt; <a href="#1056693" title="(traitSym: LambdaLift.this.global.Symbol, implSym: LambdaLift.this.global.Symbol)Unit">renameTrait</a><a href="#1056853" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1056829" title="LambdaLift.this.global.Symbol">sym</a>, implSym<span class="delimiter">)</span>
              <span class="keyword">case</span> _              =&gt; <a href="#1056692" title="(sym: LambdaLift.this.global.Symbol)Unit">renameSym</a><a href="#1056853" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1056829" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span> // pure interface, no impl class
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="../SubComponent.scala.html#641805" title="(op: =&gt; Unit)Unit">afterOwnPhase</a> <span class="delimiter">{</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span>owner, freeValues<span class="delimiter">)</span> &lt;- <a href="#1056387" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">free</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#76166" title="(f: ((LambdaLift.this.global.Symbol, LambdaLifter.this.SymSet)) =&gt; Unit)Unit">toList</a><span class="delimiter">)</span> <a href="#1057014" title="(x: Unit)Unit" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="Int" id="1056916">newFlags</a> = <span title="Int(2097152)">SYNTHETIC</span> <a href="../../../Int.scala.html#57933" title="(x: Int)Int">|</a> <span class="delimiter">(</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span>owner.<a href="../../../reflect/internal/Symbols.scala.html#443231" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> PARAMACCESSOR <span title="Int(537395204)">|</span> PrivateLocal <span class="keyword">else</span> <span title="Int(8192)">PARAM</span> <span class="delimiter">)</span>
          <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;free var proxy: %s, %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span>owner.<a href="../../../reflect/internal/Symbols.scala.html#443562" title="=&gt; String">fullLocationString</a>, freeValues.<a href="../../../reflect/internal/util/Set.scala.html#514465" title="=&gt; List[LambdaLift.this.global.Symbol]">toList</a>.<a href="../../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../../collection/mutable/MapLike.scala.html#78496" title="(key: LambdaLift.this.global.Symbol, value: List[LambdaLift.this.global.Symbol])Unit">proxies</a><span class="delimiter">(</span>owner<span class="delimiter">)</span> =
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1056956">fv</a> &lt;- freeValues.<a href="../../../collection/TraversableLike.scala.html#58971" title="(f: LambdaLift.this.global.Symbol =&gt; LambdaLift.this.global.TermSymbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.Symbol],LambdaLift.this.global.TermSymbol,List[LambdaLift.this.global.Symbol]])List[LambdaLift.this.global.Symbol]">toList</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="LambdaLift.this.global.TermSymbol" id="1056957">proxy</a> = owner.<a href="../../../reflect/internal/Symbols.scala.html#443173" title="(name: LambdaLift.this.global.TermName, pos: LambdaLift.this.global.Position, newFlags: Long)LambdaLift.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="#1056956" title="LambdaLift.this.global.Symbol">fv</a>.<a href="../../../reflect/internal/Names.scala.html#440756" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: LambdaLift.this.global.Name)LambdaLift.this.global.TermName">name</a>, owner.<a href="../../../reflect/internal/Symbols.scala.html#443167" title="=&gt; LambdaLift.this.global.Position">pos</a>, <a href="../../../Int.scala.html#57875" title="=&gt; Long">newFlags</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#443429" title="(info: LambdaLift.this.global.Type)LambdaLift.this.global.TermSymbol">setInfo</a> <a href="#1056956" title="LambdaLift.this.global.Symbol">fv</a>.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span>owner.<a href="../../../reflect/internal/Symbols.scala.html#443231" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> owner.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#442019" title="=&gt; LambdaLift.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#447331" title="(sym: LambdaLift.this.global.TermSymbol)LambdaLift.this.global.TermSymbol">enter</a> <a href="#1056957" title="LambdaLift.this.global.TermSymbol">proxy</a>
              <a href="#1056957" title="LambdaLift.this.global.TermSymbol">proxy</a>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Symbol" id="1056416">proxy</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1057030">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(enclosure: LambdaLift.this.global.Symbol)LambdaLift.this.global.Symbol" id="1057031">searchIn</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1057032">enclosure</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057032" title="LambdaLift.this.global.Symbol">enclosure</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../reflect/internal/Symbols.scala.html#441152" title="=&gt; LambdaLift.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <a href="../../../package.scala.html#56967" title="IllegalArgumentException">IllegalArgumentException</a><span class="delimiter">(</span><span title="String(&quot;Could not find proxy for &quot;)" class="string">&quot;Could not find proxy for &quot;</span><span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443568" title="=&gt; String">defString</a> <span title="(x$1: Any)String">+</span><span title="String(&quot; in &quot;)" class="string">&quot; in &quot;</span><span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443381" title="=&gt; List[LambdaLift.this.global.Symbol]">ownerChain</a> <span title="(x$1: Any)String">+</span><span title="String(&quot; (currentOwner= &quot;)" class="string">&quot; (currentOwner= &quot;</span><span title="(x$1: Any)String">+</span> <a href="../../../reflect/api/Trees.scala.html#438841" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentOwner</a> <span title="(x$1: Any)String">+</span><span title="String(&quot; )&quot;)" class="string">&quot; )&quot;</span><span class="delimiter">)</span>
        <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;searching for &quot;)" class="string">&quot;searching for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;) in &quot;)" class="string">&quot;) in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057032" title="LambdaLift.this.global.Symbol">enclosure</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057032" title="LambdaLift.this.global.Symbol">enclosure</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="List[LambdaLift.this.global.Symbol]" id="1057033">ps</a> = <span class="delimiter">(</span><a href="#1056389" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]]">proxies</a> <a href="../../../collection/mutable/LinkedHashMap.scala.html#292389" title="(key: LambdaLift.this.global.Symbol)Option[List[LambdaLift.this.global.Symbol]]">get</a> <a href="#1057032" title="LambdaLift.this.global.Symbol">enclosure</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#63849" title="=&gt; List[List[LambdaLift.this.global.Symbol]]">toList</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#59386" title="(implicit asTraversable: List[LambdaLift.this.global.Symbol] =&gt; scala.collection.GenTraversableOnce[LambdaLift.this.global.Symbol])List[LambdaLift.this.global.Symbol]">flatten</a> <a href="../../../collection/TraversableLike.scala.html#58981" title="(p: LambdaLift.this.global.Symbol =&gt; Boolean)List[LambdaLift.this.global.Symbol]">filter</a> <span class="delimiter">(</span><a href="#1057084" title="LambdaLift.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; x$6.NameType">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span>
        <span title="LambdaLift.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057033" title="List[LambdaLift.this.global.Symbol]">ps</a>.<a href="../../../collection/IterableLike.scala.html#59464" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#1057031" title="(enclosure: LambdaLift.this.global.Symbol)LambdaLift.this.global.Symbol">searchIn</a><span class="delimiter">(</span><a href="#1057032" title="LambdaLift.this.global.Symbol">enclosure</a>.<a href="../../../reflect/internal/Symbols.scala.html#443330" title="=&gt; LambdaLift.this.global.Symbol">skipConstructor</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#1057033" title="List[LambdaLift.this.global.Symbol]">ps</a>.<a href="../../../collection/IterableLike.scala.html#59473" title="=&gt; LambdaLift.this.global.Symbol">head</a>
      <span class="delimiter">}</span>
      <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;proxy &quot;)" class="string">&quot;proxy &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; from &quot;)" class="string">&quot; from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/api/Trees.scala.html#438841" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443381" title="=&gt; List[LambdaLift.this.global.explicitOuter.global.Symbol]">ownerChain</a>.<a href="../../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443505" title="=&gt; LambdaLift.this.global.Symbol">logicallyEnclosingMember</a><span class="delimiter">)</span>

      <span title="LambdaLift.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#1056410" title="(sym: LambdaLift.this.global.Symbol)Boolean">isSameOwnerEnclosure</a><span class="delimiter">(</span><a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#1057030" title="LambdaLift.this.global.Symbol">sym</a>
      <span class="keyword">else</span> <a href="#1057031" title="(enclosure: LambdaLift.this.global.Symbol)LambdaLift.this.global.Symbol">searchIn</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#438841" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentOwner</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Select" id="1056417">memberRef</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1057094">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1057095">clazz</a> = <a href="#1057094" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443480" title="=&gt; LambdaLift.this.global.Symbol">enclClass</a>
      //Console.println(&quot;memberRef from &quot;+currentClass+&quot; to &quot;+sym+&quot; in &quot;+clazz)
      <span class="keyword">val</span> <a title="LambdaLift.this.global.gen.global.Tree" id="1057096">qual</a> = <span title="LambdaLift.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057095" title="LambdaLift.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/api/Trees.scala.html#438845" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentClass</a><span class="delimiter">)</span> <a href="../Global.scala.html#559498" title="LambdaLift.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#500041" title="(sym: LambdaLift.this.global.gen.global.Symbol)LambdaLift.this.global.gen.global.Tree">mkAttributedThis</a><span class="delimiter">(</span><a href="#1057095" title="LambdaLift.this.global.Symbol">clazz</a><span class="delimiter">)</span>
                 <span class="keyword">else</span> <span class="delimiter">{</span>
                   <a href="#1057094" title="LambdaLift.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#443306" title="(mask: Long)sym.type">resetFlag</a><span class="delimiter">(</span>LOCAL <span title="Long(524292L)">|</span> PRIVATE<span class="delimiter">)</span>
                   <span title="LambdaLift.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057095" title="LambdaLift.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#443359" title="=&gt; Boolean">isStaticOwner</a><span class="delimiter">)</span> <a href="../Global.scala.html#559498" title="LambdaLift.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#500031" title="(tpe: LambdaLift.this.global.gen.global.Type)LambdaLift.this.global.gen.global.Tree">mkAttributedQualifier</a><span class="delimiter">(</span><a href="#1057095" title="LambdaLift.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#443485" title="=&gt; LambdaLift.this.global.Type">thisType</a><span class="delimiter">)</span>
                   <span class="keyword">else</span> <a href="ExplicitOuter.scala.html#1051975" title="(base: LambdaLift.this.global.explicitOuter.global.Tree, from: LambdaLift.this.global.explicitOuter.global.Symbol, to: LambdaLift.this.global.explicitOuter.global.Symbol)LambdaLift.this.global.explicitOuter.global.Tree">outerPath</a><span class="delimiter">(</span><a href="ExplicitOuter.scala.html#1051973" title="=&gt; LambdaLift.this.global.explicitOuter.global.Tree">outerValue</a>, <a href="../../../reflect/api/Trees.scala.html#438845" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#443492" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">outerClass</a>, <a href="#1057095" title="LambdaLift.this.global.Symbol">clazz</a><span class="delimiter">)</span>
                 <span class="delimiter">}</span>
      <a href="../../../reflect/internal/Trees.scala.html#441840" title="(qualifier: LambdaLift.this.global.Tree, sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Select">Select</a><span class="delimiter">(</span><a href="#1057096" title="LambdaLift.this.global.gen.global.Tree">qual</a>, <a href="#1057094" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../reflect/api/Trees.scala.html#425062" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Select">setType</a> <a href="#1057094" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443425" title="=&gt; LambdaLift.this.global.Type">tpe</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.gen.global.Tree" id="1056418">proxyRef</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1057145">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1057146">psym</a> = <a href="#1056416" title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Symbol">proxy</a><span class="delimiter">(</span><a href="#1057145" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span>
      <span title="LambdaLift.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057146" title="LambdaLift.this.global.Symbol">psym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span> <a href="../Global.scala.html#559498" title="LambdaLift.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#500042" title="(sym: LambdaLift.this.global.gen.global.Symbol)LambdaLift.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#1057146" title="LambdaLift.this.global.Symbol">psym</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#1056417" title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Select">memberRef</a><span class="delimiter">(</span><a href="#1057146" title="LambdaLift.this.global.Symbol">psym</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pos: LambdaLift.this.global.Position, sym: LambdaLift.this.global.Symbol, args: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]" id="1056419">addFreeArgs</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Position" id="1057149">pos</a>: <a href="../util/Position.scala.html#52230" title="LambdaLift.this.global.Position">Position</a>, <a title="LambdaLift.this.global.Symbol" id="1057150">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a>, <a title="List[LambdaLift.this.global.Tree]" id="1057151">args</a>: <a href="../../../collection/immutable/List.scala.html#12322" title="List[LambdaLift.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#1056387" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,LambdaLifter.this.SymSet]">free</a> <a href="../../../collection/mutable/LinkedHashMap.scala.html#292389" title="(key: LambdaLift.this.global.Symbol)Option[LambdaLifter.this.SymSet]">get</a> <a href="#1057150" title="LambdaLift.this.global.Symbol">sym</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<a href="#1057280" title="List[LambdaLift.this.global.Tree]" id="1057281" class="delimiter">(</a>fvs<span class="delimiter">)</span> =&gt; <a href="#1057151" title="List[LambdaLift.this.global.Tree]">args</a> <a href="#1057282" title="(x: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">++</a> <span class="delimiter">(</span>fvs.<a href="../../../reflect/internal/util/Set.scala.html#514465" title="=&gt; List[LambdaLift.this.global.Symbol]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: LambdaLift.this.global.Symbol =&gt; LambdaLift.this.global.gen.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.Symbol],LambdaLift.this.global.gen.global.Tree,List[LambdaLift.this.global.gen.global.Tree]])List[LambdaLift.this.global.gen.global.Tree]">map</a> <span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1057202">fv</a> =&gt; <a href="../../../reflect/internal/Positions.scala.html#441889" title="(pos: LambdaLift.this.global.Position)(tree: LambdaLift.this.global.gen.global.Tree)LambdaLift.this.global.gen.global.Tree">atPos</a><span class="delimiter">(</span><a href="#1057149" title="LambdaLift.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1056418" title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.gen.global.Tree">proxyRef</a><span class="delimiter">(</span><a href="#1057202" title="LambdaLift.this.global.Symbol">fv</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _         =&gt; <a href="#1057282" title="(x: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">args</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: LambdaLift.this.global.Tree, sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Tree" id="1056420">addFreeParams</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1057287">tree</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a>, <a title="LambdaLift.this.global.Symbol" id="1057288">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a> = <a href="#1056389" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]]">proxies</a>.<a href="../../../collection/mutable/LinkedHashMap.scala.html#292389" title="(key: LambdaLift.this.global.Symbol)Option[List[LambdaLift.this.global.Symbol]]">get</a><a href="../../../Option.scala.html#64115" title="=&gt; List[LambdaLift.this.global.Symbol]" class="delimiter">(</a><a href="#1057288" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#1057595" title="LambdaLift.this.global.Tree" id="1057596" class="delimiter">(</a>ps<span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[LambdaLift.this.global.ValDef]" id="1057294">freeParams</a> = ps <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: LambdaLift.this.global.Symbol =&gt; LambdaLift.this.global.ValDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.Symbol],LambdaLift.this.global.ValDef,List[LambdaLift.this.global.ValDef]])List[LambdaLift.this.global.ValDef]">map</a> <span class="delimiter">(</span><a title="LambdaLift.this.global.Symbol" id="1057311">p</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#441818" title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#1057311" title="LambdaLift.this.global.Symbol">p</a><span class="delimiter">)</span> <a href="../../../reflect/api/Trees.scala.html#425044" title="(newpos: scala.tools.nsc.util.Position)LambdaLift.this.global.ValDef">setPos</a> <a href="#1057287" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a> <a href="../../../reflect/api/Trees.scala.html#425062" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.ValDef">setType</a> <a href="../../../reflect/internal/Types.scala.html#441256" title="LambdaLift.this.global.NoType.type">NoType</a><span class="delimiter">)</span>
        <a href="#1057287" title="LambdaLift.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> DefDef<a href="#1057572" title="LambdaLift.this.global.Tree" id="1057580" class="delimiter">(</a>_, _, _, vparams <a title="LambdaLift.this.global.Tree" id="1057582">::</a> _, _, _<span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="List[LambdaLift.this.global.Symbol]" id="1057382">addParams</a> = <a href="../../../reflect/internal/Symbols.scala.html#441157" title="(syms: List[LambdaLift.this.global.Symbol])List[LambdaLift.this.global.Symbol]">cloneSymbols</a><span class="delimiter">(</span>ps<span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58971" title="(f: LambdaLift.this.global.Symbol =&gt; LambdaLift.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.Symbol],LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]])List[LambdaLift.this.global.Symbol]">map</a><a href="../../../collection/immutable/List.scala.html#63282" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Symbol]]" class="delimiter">(</a><a href="#1057403" title="LambdaLift.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#443305" title="(mask: Long)x$7.type">setFlag</a><span class="delimiter">(</span><span title="Long(8192L)">PARAM</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#1057288" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443434" title="(info: LambdaLift.this.global.Type)LambdaLift.this.global.Symbol">updateInfo</a><span class="delimiter">(</span>
              <a href="../../../reflect/internal/Types.scala.html#460839" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type">lifted</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#448348" title="(params: List[LambdaLift.this.global.Symbol], resultType: LambdaLift.this.global.Type)LambdaLift.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#1057288" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#442009" title="=&gt; List[LambdaLift.this.global.Symbol]">params</a> <a href="../../../collection/immutable/List.scala.html#63646" title="(prefix: List[LambdaLift.this.global.Symbol])List[LambdaLift.this.global.Symbol]">:::</a> <a href="#1057382" title="List[LambdaLift.this.global.Symbol]">addParams</a>, <a href="#1057288" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#442002" title="=&gt; LambdaLift.this.global.Type">resultType</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="../SubComponent.scala.html#641784" title="=&gt; scala.tools.nsc.Global">copyDefDef</a><a href="../../../reflect/api/Trees.scala.html#436057" title="LambdaLift.this.global.Modifiers" id="1057548" class="delimiter">(</a><a href="#1057287" title="LambdaLift.this.global.Tree" id="1057469">tree</a><span class="delimiter">)</span><span class="delimiter">(</span>vparamss = <a href="../../../collection/immutable/List.scala.html#63291" title="(xs: List[LambdaLift.this.global.ValDef]*)List[List[LambdaLift.this.global.ValDef]]">List</a><a title="List[List[LambdaLift.this.global.ValDef]]" id="1057543" class="delimiter">(</a>vparams <a href="../../../collection/immutable/List.scala.html#63655" title="(that: scala.collection.GenTraversableOnce[LambdaLift.this.global.ValDef])(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.ValDef],LambdaLift.this.global.ValDef,List[LambdaLift.this.global.ValDef]])List[LambdaLift.this.global.ValDef]">++</a> <a href="#1057294" title="List[LambdaLift.this.global.ValDef]">freeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> ClassDef<a href="#1057572" title="LambdaLift.this.global.Tree" id="1057588" class="delimiter">(</a>_, _, _, _<span class="delimiter">)</span> =&gt;
            // Disabled attempt to to add getters to freeParams
            // this does not work yet. Problem is that local symbols need local names
            // and references to local symbols need to be transformed into
            // method calls to setters.
            // def paramGetter(param: Symbol): Tree = {
            //   val getter = param.newGetter setFlag TRANS_FLAG resetFlag PARAMACCESSOR // mark because we have to add them to interface
            //   sym.info.decls.enter(getter)
            //   val rhs = Select(gen.mkAttributedThis(sym), param) setType param.tpe
            //   DefDef(getter, rhs) setPos tree.pos setType NoType
            // }
            // val newDefs = if (sym.isTrait) freeParams ::: (ps map paramGetter) else freeParams
            <a href="../../../reflect/api/Trees.scala.html#23756" title="(cdef: LambdaLift.this.global.Tree)(applyToImpl: LambdaLift.this.global.Template =&gt; LambdaLift.this.global.Template)LambdaLift.this.global.ClassDef">deriveClassDef</a><span class="delimiter">(</span><a href="#1057287" title="LambdaLift.this.global.Tree">tree</a><span class="delimiter">)</span><a href="#1057589" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a title="LambdaLift.this.global.Template" id="1057558">impl</a> =&gt; <a href="../../../reflect/api/Trees.scala.html#23755" title="(templ: LambdaLift.this.global.Tree)(applyToBody: List[LambdaLift.this.global.Tree] =&gt; List[LambdaLift.this.global.Tree])LambdaLift.this.global.Template">deriveTemplate</a><span class="delimiter">(</span><a href="#1057558" title="LambdaLift.this.global.Template">impl</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1057562" title="List[LambdaLift.this.global.Tree]">_</a> <a href="../../../collection/immutable/List.scala.html#63646" title="(prefix: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">:::</a> <a href="#1057294" title="List[LambdaLift.this.global.ValDef]">freeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="../../../Option.scala.html#2498" title="LambdaLift.this.global.Tree" id="1057598">None</a> =&gt;
        <a href="#1057599" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">tree</a>
    <span class="delimiter">}</span>

/*  Something like this will be necessary to eliminate the implementation
 *  restiction from paramGetter above:
 *  We need to pass getters to the interface of an implementation class.
    private def fixTraitGetters(lifted: List[Tree]): List[Tree] =
      for (stat &lt;- lifted) yield stat match {
        case ClassDef(mods, name, tparams, templ @ Template(parents, self, body))
        if stat.symbol.isTrait &amp;&amp; !stat.symbol.isImplClass =&gt;
          val iface = stat.symbol
          lifted.find(l =&gt; l.symbol.isImplClass &amp;&amp; l.symbol.toInterface == iface) match {
            case Some(implDef) =&gt;
              val impl = implDef.symbol
              val implGetters = impl.info.decls.toList filter (_ hasFlag TRANS_FLAG)
              if (implGetters.nonEmpty) {
                val ifaceGetters = implGetters map { ig =&gt;
                  ig resetFlag TRANS_FLAG
                  val getter = ig cloneSymbol iface setFlag DEFERRED
                  iface.info.decls enter getter
                  getter
                }
                val ifaceGetterDefs = ifaceGetters map (DefDef(_, EmptyTree) setType NoType)
                treeCopy.ClassDef(
                  stat, mods, name, tparams,
                  treeCopy.Template(templ, parents, self, body ::: ifaceGetterDefs))
              } else
                stat
            case None =&gt;
              stat
          }
        case _ =&gt;
          stat
      }
*/
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" id="1056421">liftDef</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1057607">tree</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1057608">sym</a> = <a href="#1057607" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1057609">oldOwner</a> = <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443351" title="=&gt; Boolean">isAuxiliaryConstructor</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443282" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span>  // # bug 1909
    	  <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#443305" title="(mask: Long)sym.type">setFlag</a> <span title="Long(8388608L)">STATIC</span>
      <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443380" title="(owner: LambdaLift.this.global.Symbol)Unit">owner</a> = <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443480" title="=&gt; LambdaLift.this.global.Symbol">enclClass</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443231" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443380" title="(owner: LambdaLift.this.global.Symbol)Unit">owner</a> = <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443514" title="=&gt; LambdaLift.this.global.Symbol">toInterface</a>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443282" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span> <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#443305" title="(mask: Long)sym.type">setFlag</a> <span title="Long(17179869184L)">LIFTED</span>
      <a href="../../../collection/mutable/MapLike.scala.html#78496" title="(key: LambdaLift.this.global.Symbol, value: List[LambdaLift.this.global.Tree])Unit">liftedDefs</a><span class="delimiter">(</span><a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#63643" title="(x: LambdaLift.this.global.Tree)List[LambdaLift.this.global.Tree]">::=</a> <a href="#1057607" title="LambdaLift.this.global.Tree">tree</a>
      <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#442019" title="=&gt; LambdaLift.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#447334" title="(sym: LambdaLift.this.global.Symbol)Unit">enterUnique</a> <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>
      <a href="../Global.scala.html#559553" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;lifted: &quot;)" class="string">&quot;lifted: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; from &quot;)" class="string">&quot; from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057609" title="LambdaLift.this.global.Symbol">oldOwner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057608" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443379" title="=&gt; LambdaLift.this.global.Symbol">owner</a><span class="delimiter">)</span>
      <a href="../../../reflect/api/Trees.scala.html#23577" title="LambdaLift.this.global.EmptyTree.type">EmptyTree</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: LambdaLift.this.global.Tree, isBoxedRef: Boolean)LambdaLift.this.global.Tree" id="1056422">postTransform</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1057690">tree</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a>, <a title="Boolean" id="1057692">isBoxedRef</a>: <a href="../../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LambdaLift.this.global.Symbol" id="1057693">sym</a> = <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>
      <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ClassDef<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058162" class="delimiter">(</a>_, _, _, _<span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="LambdaLift.this.global.Tree" id="1057700">tree1</a> = <a href="#1056420" title="(tree: LambdaLift.this.global.Tree, sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Tree">addFreeParams</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span title="LambdaLift.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span> <a href="#1056421" title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">liftDef</a><span class="delimiter">(</span><a href="#1057700" title="LambdaLift.this.global.Tree">tree1</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#1057700" title="LambdaLift.this.global.Tree">tree1</a>
        <span class="keyword">case</span> DefDef<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058170" class="delimiter">(</a>_, _, _, _, _, _<span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="LambdaLift.this.global.Tree" id="1057709">tree1</a> = <a href="#1056420" title="(tree: LambdaLift.this.global.Tree, sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Tree">addFreeParams</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span title="LambdaLift.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a><span class="delimiter">)</span> <a href="#1056421" title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">liftDef</a><span class="delimiter">(</span><a href="#1057709" title="LambdaLift.this.global.Tree">tree1</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#1057709" title="LambdaLift.this.global.Tree">tree1</a>
        <span class="keyword">case</span> ValDef<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058172" class="delimiter">(</a>mods, name, tpt, rhs<span class="delimiter">)</span> =&gt;
          <a href="#1058203" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="keyword">if</a> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443263" title="=&gt; Boolean">isCapturedVariable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="LambdaLift.this.global.TypeTree" id="1057720">tpt1</a> = <a href="../../../reflect/api/Trees.scala.html#23746" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443425" title="=&gt; LambdaLift.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="../../../reflect/api/Trees.scala.html#425044" title="(newpos: scala.tools.nsc.util.Position)LambdaLift.this.global.TypeTree">setPos</a> tpt.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a>
            /* Creating a constructor argument if one isn't present. */
            <span class="keyword">val</span> <a title="LambdaLift.this.global.gen.global.Tree" id="1057721">constructorArg</a> = <span title="LambdaLift.this.global.gen.global.Tree">rhs</span> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../../reflect/api/Trees.scala.html#23577" title="LambdaLift.this.global.gen.global.Tree" id="1057779">EmptyTree</a> =&gt;
                <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443482" title="=&gt; LambdaLift.this.global.Symbol">primaryConstructor</a>.<a href="../../../reflect/internal/Symbols.scala.html#443427" title="=&gt; LambdaLift.this.global.Type">info</a>.<a href="#1057780" title="(x: LambdaLift.this.global.gen.global.Tree)LambdaLift.this.global.gen.global.Tree">paramTypes</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#60838" title="Option[List[LambdaLift.this.global.Type]]" id="1057770">List</a><span class="delimiter">(</span>tp<span class="delimiter">)</span> =&gt; <a href="../Global.scala.html#559498" title="LambdaLift.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#500056" title="(tp: LambdaLift.this.global.gen.global.Type)LambdaLift.this.global.gen.global.Tree">mkZero</a><a href="#1057755" title="(x: LambdaLift.this.global.gen.global.Tree)LambdaLift.this.global.gen.global.Tree" class="delimiter">(</a>tp<span class="delimiter">)</span>
                  <span class="keyword">case</span> _        =&gt;
                    <a href="../Global.scala.html#559552" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;Couldn\'t determine how to properly construct &quot;)" class="string">&quot;Couldn't determine how to properly construct &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span>
                    rhs
                <span class="delimiter">}</span>
              <span class="keyword">case</span> arg =&gt; <a href="#1057780" title="(x: LambdaLift.this.global.gen.global.Tree)LambdaLift.this.global.gen.global.Tree">arg</a>
            <span class="delimiter">}</span>
            /** Wrap expr argument in new *Ref(..) constructor, but make
             *  sure that Try expressions stay at toplevel.
             */
            <span class="keyword">def</span> <a title="(expr: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" id="1057722">refConstr</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1057788">expr</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a> = <a href="#1057788" title="LambdaLift.this.global.Tree">expr</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> Try<a href="#1057895" title="LambdaLift.this.global.Tree" id="1057897" class="delimiter">(</a>block, catches, finalizer<span class="delimiter">)</span> =&gt;
                <a href="../../../reflect/api/Trees.scala.html#428112" title="(block: LambdaLift.this.global.Tree, catches: List[LambdaLift.this.global.CaseDef], finalizer: LambdaLift.this.global.Tree)LambdaLift.this.global.Try">Try</a><a href="#1057898" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a href="#1057722" title="(expr: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">refConstr</a><span class="delimiter">(</span>block<span class="delimiter">)</span>, catches <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: LambdaLift.this.global.CaseDef =&gt; LambdaLift.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.CaseDef],LambdaLift.this.global.CaseDef,List[LambdaLift.this.global.CaseDef]])List[LambdaLift.this.global.CaseDef]">map</a> <a href="#1057723" title="(cdef: LambdaLift.this.global.CaseDef)LambdaLift.this.global.CaseDef">refConstrCase</a>, finalizer<span class="delimiter">)</span>
              <span class="keyword">case</span> _ =&gt;
                <a href="../../../reflect/internal/Trees.scala.html#441835" title="(tpe: LambdaLift.this.global.Type, args: LambdaLift.this.global.Tree*)LambdaLift.this.global.Tree">New</a><a href="#1057898" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443425" title="=&gt; LambdaLift.this.global.Type">tpe</a>, <a href="#1057788" title="LambdaLift.this.global.Tree">expr</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <span class="keyword">def</span> <a title="(cdef: LambdaLift.this.global.CaseDef)LambdaLift.this.global.CaseDef" id="1057723">refConstrCase</a><span class="delimiter">(</span><a title="LambdaLift.this.global.CaseDef" id="1057832">cdef</a>: <a href="../../../reflect/api/Trees.scala.html#23628" title="LambdaLift.this.global.CaseDef">CaseDef</a><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23628" title="LambdaLift.this.global.CaseDef">CaseDef</a> =
              <a href="../../../reflect/api/Trees.scala.html#427318" title="(pat: LambdaLift.this.global.Tree, guard: LambdaLift.this.global.Tree, body: LambdaLift.this.global.Tree)LambdaLift.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#1057832" title="LambdaLift.this.global.CaseDef">cdef</a>.<a href="../../../reflect/api/Trees.scala.html#427322" title="=&gt; LambdaLift.this.global.Tree">pat</a>, <a href="#1057832" title="LambdaLift.this.global.CaseDef">cdef</a>.<a href="../../../reflect/api/Trees.scala.html#427324" title="=&gt; LambdaLift.this.global.Tree">guard</a>, <a href="#1057722" title="(expr: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">refConstr</a><span class="delimiter">(</span><a href="#1057832" title="LambdaLift.this.global.CaseDef">cdef</a>.<a href="../../../reflect/api/Trees.scala.html#427326" title="=&gt; LambdaLift.this.global.Tree">body</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../../reflect/api/Trees.scala.html#438839" title="=&gt; LambdaLift.this.global.explicitOuter.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#428287" title="(tree: LambdaLift.this.global.explicitOuter.global.Tree, mods: LambdaLift.this.global.explicitOuter.global.Modifiers, name: LambdaLift.this.global.explicitOuter.global.Name, tpt: LambdaLift.this.global.explicitOuter.global.Tree, rhs: LambdaLift.this.global.explicitOuter.global.Tree)LambdaLift.this.global.explicitOuter.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, mods, name, <a href="#1057720" title="LambdaLift.this.global.TypeTree">tpt1</a>, <a href="../Global.scala.html#559643" title="LambdaLift.this.global.typer.type">typer</a>.<a href="../typechecker/Typers.scala.html#560769" title="(pos: LambdaLift.this.global.analyzer.global.Position)(tree: LambdaLift.this.global.analyzer.global.Tree)LambdaLift.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span>rhs.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#1057722" title="(expr: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">refConstr</a><span class="delimiter">(</span><a href="#1057721" title="LambdaLift.this.global.gen.global.Tree">constructorArg</a><span class="delimiter">)</span>
            <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>
        <span class="keyword">case</span> Return<a href="#1058156" title="Boolean" id="1058175" class="delimiter">(</a>Block<a title="LambdaLift.this.global.Tree" id="1058177" class="delimiter">(</a>stats, value<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#427284" title="(stats: List[LambdaLift.this.global.Tree], expr: LambdaLift.this.global.Tree)LambdaLift.this.global.Block">Block</a><span class="delimiter">(</span>stats, <a href="../../../reflect/api/Trees.scala.html#438839" title="=&gt; LambdaLift.this.global.explicitOuter.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#428305" title="(tree: LambdaLift.this.global.explicitOuter.global.Tree, expr: LambdaLift.this.global.explicitOuter.global.Tree)LambdaLift.this.global.explicitOuter.global.Return">Return</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, value<span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/api/Trees.scala.html#425062" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Block">setType</a> <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425060" title="=&gt; LambdaLift.this.global.Type">tpe</a> <a href="#1058203" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">setPos</a> <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a>
        <span class="keyword">case</span> Return<span class="delimiter">(</span>expr<span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#559533" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/api/Trees.scala.html#438844" title="=&gt; LambdaLift.this.global.explicitOuter.global.Symbol">currentMethod</a>, <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>
        <span class="keyword">case</span> Apply<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058181" class="delimiter">(</a>fn, args<span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#438839" title="=&gt; LambdaLift.this.global.explicitOuter.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#428311" title="(tree: LambdaLift.this.global.explicitOuter.global.Tree, fun: LambdaLift.this.global.explicitOuter.global.Tree, args: List[LambdaLift.this.global.explicitOuter.global.Tree])LambdaLift.this.global.explicitOuter.global.Apply">Apply</a><a href="#1058203" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, fn, <a href="#1056419" title="(pos: LambdaLift.this.global.Position, sym: LambdaLift.this.global.Symbol, args: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">addFreeArgs</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a>, <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>, args<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> Assign<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058184" class="delimiter">(</a>Apply<a title="LambdaLift.this.global.Tree" id="1058188" class="delimiter">(</a>TypeApply<a title="LambdaLift.this.global.Tree" id="1058191" class="delimiter">(</a>sel @ Select<a title="LambdaLift.this.global.Tree" id="1058194" class="delimiter">(</a>qual, _<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a href="../../../collection/generic/SeqFactory.scala.html#60838" title="Option[List[LambdaLift.this.global.Tree]]" id="1058213">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, rhs<span class="delimiter">)</span> =&gt;
          // eliminate casts introduced by selecting a captured variable field
          // on the lhs of an assignment.
          <a href="../Global.scala.html#559534" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span>sel.<a href="../../../reflect/api/Trees.scala.html#427232" title="=&gt; LambdaLift.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#442579" title="=&gt; LambdaLift.this.global.MethodSymbol">Object_asInstanceOf</a><span class="delimiter">)</span>
          <a href="../../../reflect/api/Trees.scala.html#438839" title="=&gt; LambdaLift.this.global.explicitOuter.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#428301" title="(tree: LambdaLift.this.global.explicitOuter.global.Tree, lhs: LambdaLift.this.global.explicitOuter.global.Tree, rhs: LambdaLift.this.global.explicitOuter.global.Tree)LambdaLift.this.global.explicitOuter.global.Assign">Assign</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, qual, rhs<span class="delimiter">)</span>
        <span class="keyword">case</span> Ident<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058199" class="delimiter">(</a>name<span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="LambdaLift.this.global.gen.global.Tree" id="1058033">tree1</a> =
            <span title="LambdaLift.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#441152" title="=&gt; LambdaLift.this.global.NoSymbol">NoSymbol</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443229" title="=&gt; Boolean">isTerm</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443285" title="=&gt; Boolean">isLabel</a><span class="delimiter">)</span>
              <span title="LambdaLift.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443282" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span>
                <a href="../../../reflect/internal/Positions.scala.html#441889" title="(pos: LambdaLift.this.global.Position)(tree: LambdaLift.this.global.Select)LambdaLift.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1056417" title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.Select">memberRef</a><span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="LambdaLift.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443362" title="=&gt; Boolean">isLocal</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1056410" title="(sym: LambdaLift.this.global.Symbol)Boolean">isSameOwnerEnclosure</a><span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="../../../reflect/internal/Positions.scala.html#441889" title="(pos: LambdaLift.this.global.Position)(tree: LambdaLift.this.global.gen.global.Tree)LambdaLift.this.global.gen.global.Tree">atPos</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1056418" title="(sym: LambdaLift.this.global.Symbol)LambdaLift.this.global.gen.global.Tree">proxyRef</a><span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>
            <span class="keyword">else</span> <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>
          <span title="LambdaLift.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443263" title="=&gt; Boolean">isCapturedVariable</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1057692" title="Boolean">isBoxedRef</a><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Positions.scala.html#441889" title="(pos: LambdaLift.this.global.Position)(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425042" title="=&gt; LambdaLift.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="LambdaLift.this.global.Type" id="1058057">tp</a> = <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425060" title="=&gt; LambdaLift.this.global.Type">tpe</a>
              <span class="keyword">val</span> <a title="LambdaLift.this.global.analyzer.global.Tree" id="1058058">elemTree</a> = <a href="../Global.scala.html#559643" title="LambdaLift.this.global.typer.type">typer</a> <a href="../typechecker/Typers.scala.html#560768" title="(tree: LambdaLift.this.global.analyzer.global.Tree)LambdaLift.this.global.analyzer.global.Tree">typed</a> <a href="../../../reflect/api/Trees.scala.html#427925" title="(qualifier: LambdaLift.this.global.Tree, name: LambdaLift.this.global.Name)LambdaLift.this.global.Select">Select</a><span class="delimiter">(</span><a href="#1058033" title="LambdaLift.this.global.gen.global.Tree">tree1</a> <a href="../../../reflect/api/Trees.scala.html#425062" title="(tp: LambdaLift.this.global.gen.global.Type)tree1.type">setType</a> <a href="#1057693" title="LambdaLift.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#443425" title="=&gt; LambdaLift.this.global.Type">tpe</a>, <a href="../../../reflect/internal/StdNames.scala.html#441764" title="LambdaLift.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#446499" title="=&gt; LambdaLift.this.global.nme.NameType">elem</a><span class="delimiter">)</span>
              <span title="LambdaLift.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1058058" title="LambdaLift.this.global.analyzer.global.Tree">elemTree</a>.<a href="../../../reflect/api/Trees.scala.html#425060" title="=&gt; LambdaLift.this.global.analyzer.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#441986" title="=&gt; LambdaLift.this.global.analyzer.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#1058057" title="LambdaLift.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#441986" title="=&gt; LambdaLift.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <a href="../Global.scala.html#559498" title="LambdaLift.this.global.gen.type">gen</a>.<a href="../Global.scala.html#575499" title="(tree: LambdaLift.this.global.Tree, pt: LambdaLift.this.global.Type)LambdaLift.this.global.Tree">mkAttributedCast</a><span class="delimiter">(</span><a href="#1058058" title="LambdaLift.this.global.analyzer.global.Tree">elemTree</a>, <a href="#1058057" title="LambdaLift.this.global.Type">tp</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#1058058" title="LambdaLift.this.global.analyzer.global.Tree">elemTree</a>
            <span class="delimiter">}</span>
          <span class="keyword">else</span> <a href="#1058033" title="LambdaLift.this.global.gen.global.Tree">tree1</a>
        <span class="keyword">case</span> Block<a href="#1058156" title="LambdaLift.this.global.Tree" id="1058201" class="delimiter">(</a>stats, expr0<span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a href="#1058140" title="(x: (List[LambdaLift.this.global.Tree], List[LambdaLift.this.global.Tree]))(List[LambdaLift.this.global.Tree], List[LambdaLift.this.global.Tree])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#61506" title="List[LambdaLift.this.global.Tree]" id="1058105">lzyVals</a>, <a href="../../../Tuple2.scala.html#61508" title="List[LambdaLift.this.global.Tree]" id="1058106">rest</a><span class="delimiter">)</span> = stats <a href="../../../collection/TraversableLike.scala.html#58988" title="(p: LambdaLift.this.global.Tree =&gt; Boolean)(List[LambdaLift.this.global.Tree], List[LambdaLift.this.global.Tree])">partition</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[LambdaLift.this.global.Tree,Boolean] with Serializable" id="1058110" class="delimiter">{</a>
            <span class="keyword">case</span> <a href="#1058114" title="Boolean" id="1058116">stat</a>: ValDef =&gt; stat.<a href="../../../reflect/api/Trees.scala.html#427232" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/HasFlags.scala.html#443593" title="=&gt; Boolean">isLazy</a> <a href="#1058117" title="(x: Boolean)Boolean">||</a> stat.<a href="../../../reflect/api/Trees.scala.html#427232" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#443355" title="=&gt; Boolean">isModuleVar</a>
            <span class="keyword">case</span> _            =&gt; <a href="#1058117" title="(x: Boolean)Boolean" class="keyword">false</a>
          <span class="delimiter">}</span>
          <span title="LambdaLift.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1058105" title="List[LambdaLift.this.global.Tree]">lzyVals</a>.<a href="../../../collection/IterableLike.scala.html#59464" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>
          <span class="keyword">else</span> <a href="../../../reflect/api/Trees.scala.html#438839" title="=&gt; LambdaLift.this.global.explicitOuter.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#428293" title="(tree: LambdaLift.this.global.explicitOuter.global.Tree, stats: List[LambdaLift.this.global.explicitOuter.global.Tree], expr: LambdaLift.this.global.explicitOuter.global.Tree)LambdaLift.this.global.explicitOuter.global.Block">Block</a><span class="delimiter">(</span><a href="#1057690" title="LambdaLift.this.global.Tree">tree</a>, <a href="#1058105" title="List[LambdaLift.this.global.Tree]">lzyVals</a> <a href="../../../collection/immutable/List.scala.html#63646" title="(prefix: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">:::</a> <a href="#1058106" title="List[LambdaLift.this.global.Tree]">rest</a>, expr0<span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#1058203" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.explicitOuter.global.Tree" id="1056423">preTransform</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1058220">tree</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#651612" title="LambdaLift.this.LambdaLifter" class="keyword">super</a>.<a href="ExplicitOuter.scala.html#1051976" title="(tree: LambdaLift.this.global.explicitOuter.global.Tree)LambdaLift.this.global.explicitOuter.global.Tree">transform</a><span class="delimiter">(</span><a href="#1058220" title="LambdaLift.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../../reflect/api/Trees.scala.html#425062" title="(tp: LambdaLift.this.global.explicitOuter.global.Type)LambdaLift.this.global.explicitOuter.global.Tree">setType</a> <a href="../../../reflect/internal/Types.scala.html#460839" title="(tp: LambdaLift.this.global.Type)LambdaLift.this.global.Type">lifted</a><span class="delimiter">(</span><a href="#1058220" title="LambdaLift.this.global.Tree">tree</a>.<a href="../../../reflect/api/Trees.scala.html#425060" title="=&gt; LambdaLift.this.global.Type">tpe</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" id="1056424">transform</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1058239">tree</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a> = <a href="#1058239" title="LambdaLift.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Select<a href="#1058259" title="LambdaLift.this.global.Tree" id="1058262" class="delimiter">(</a>ReferenceToBoxed<a title="LambdaLift.this.global.Tree" id="1058264" class="delimiter">(</a>idt<span class="delimiter">)</span>, elem<span class="delimiter">)</span> <span class="keyword">if</span> elem <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#441764" title="LambdaLift.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#446499" title="=&gt; LambdaLift.this.global.nme.NameType">elem</a> =&gt;
        <a href="#1056422" title="(tree: LambdaLift.this.global.Tree, isBoxedRef: Boolean)LambdaLift.this.global.Tree">postTransform</a><a href="#1058267" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a href="#1056423" title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.explicitOuter.global.Tree">preTransform</a><span class="delimiter">(</span>idt<span class="delimiter">)</span>, isBoxedRef = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span class="keyword">case</span> ReferenceToBoxed<a href="#1058259" title="LambdaLift.this.global.Tree" id="1058266" class="delimiter">(</a>idt<span class="delimiter">)</span> =&gt;
        <a href="#1056422" title="(tree: LambdaLift.this.global.Tree, isBoxedRef: Boolean)LambdaLift.this.global.Tree">postTransform</a><a href="#1058267" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a href="#1056423" title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.explicitOuter.global.Tree">preTransform</a><span class="delimiter">(</span>idt<span class="delimiter">)</span>, isBoxedRef = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <a href="#1056422" title="(tree: LambdaLift.this.global.Tree, isBoxedRef: Boolean)LambdaLift.this.global.Tree">postTransform</a><a href="#1058267" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a href="#1056423" title="(tree: LambdaLift.this.global.Tree)LambdaLift.this.global.explicitOuter.global.Tree">preTransform</a><span class="delimiter">(</span><a href="#1058239" title="LambdaLift.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Transform statements and add lifted definitions to them. */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[LambdaLift.this.global.Tree], exprOwner: LambdaLift.this.global.Symbol)List[LambdaLift.this.global.Tree]" id="1056425">transformStats</a><span class="delimiter">(</span><a title="List[LambdaLift.this.global.Tree]" id="1058273">stats</a>: <a href="../../../collection/immutable/List.scala.html#12322" title="List[LambdaLift.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="LambdaLift.this.global.Symbol" id="1058274">exprOwner</a>: <a href="../../../reflect/internal/Symbols.scala.html#441132" title="LambdaLift.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#12322" title="List[LambdaLift.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(stat: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" id="1058277">addLifted</a><span class="delimiter">(</span><a title="LambdaLift.this.global.Tree" id="1058278">stat</a>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/api/Trees.scala.html#23570" title="LambdaLift.this.global.Tree">Tree</a> = <a href="#1058278" title="LambdaLift.this.global.Tree">stat</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ClassDef<a href="#1058378" title="LambdaLift.this.global.Tree" id="1058384" class="delimiter">(</a>_, _, _, _<span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="List[LambdaLift.this.global.Tree]" id="1058285">lifted</a> = <a href="#1056402" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]">liftedDefs</a> <a href="../../../collection/mutable/LinkedHashMap.scala.html#292389" title="(key: LambdaLift.this.global.Symbol)Option[List[LambdaLift.this.global.Tree]]">get</a> <a href="#1058278" title="LambdaLift.this.global.Tree">stat</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<a href="#1058332" title="List[LambdaLift.this.global.Tree]" id="1058333" class="delimiter">(</a>xs<span class="delimiter">)</span> =&gt; xs <a href="#1058334" title="(x: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">reverseMap</a> <a href="#1058277" title="(stat: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">addLifted</a>
            <span class="keyword">case</span> _        =&gt; <a href="../Global.scala.html#559552" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;unexpectedly no lifted defs for &quot;)" class="string">&quot;unexpectedly no lifted defs for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1058278" title="LambdaLift.this.global.Tree">stat</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a><span class="delimiter">)</span> ; <a href="../../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type">Nil</a>
          <span class="delimiter">}</span>
          <span class="keyword">try</span> <a href="../../../reflect/api/Trees.scala.html#23756" title="(cdef: LambdaLift.this.global.Tree)(applyToImpl: LambdaLift.this.global.Template =&gt; LambdaLift.this.global.Template)LambdaLift.this.global.ClassDef">deriveClassDef</a><span class="delimiter">(</span><a href="#1058278" title="LambdaLift.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="LambdaLift.this.global.Template" id="1058340">impl</a> =&gt; <a href="../../../reflect/api/Trees.scala.html#23755" title="(templ: LambdaLift.this.global.Tree)(applyToBody: List[LambdaLift.this.global.Tree] =&gt; List[LambdaLift.this.global.Tree])LambdaLift.this.global.Template">deriveTemplate</a><span class="delimiter">(</span><a href="#1058340" title="LambdaLift.this.global.Template">impl</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1058342" title="List[LambdaLift.this.global.Tree]">_</a> <a href="../../../collection/immutable/List.scala.html#63646" title="(prefix: List[LambdaLift.this.global.Tree])List[LambdaLift.this.global.Tree]">:::</a> <a href="#1058285" title="List[LambdaLift.this.global.Tree]">lifted</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">finally</span> <a href="#1056402" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]">liftedDefs</a> <a href="../../../collection/mutable/LinkedHashMap.scala.html#292394" title="(key: LambdaLift.this.global.Symbol)LambdaLifter.this.liftedDefs.type">-=</a> <a href="#1058278" title="LambdaLift.this.global.Tree">stat</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>

        <span class="keyword">case</span> DefDef<a href="#1058378" title="LambdaLift.this.global.Tree" id="1058392" class="delimiter">(</a>_, _, _, _, _, Block<a title="LambdaLift.this.global.Tree" id="1058395" class="delimiter">(</a><a href="../../../collection/immutable/List.scala.html#11552" title="LambdaLift.this.global.Tree" id="1058397">Nil</a>, expr<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#1058278" title="LambdaLift.this.global.Tree">stat</a>.<a href="../../../reflect/api/Trees.scala.html#425064" title="=&gt; LambdaLift.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#443265" title="=&gt; Boolean">isConstructor</a> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#23753" title="(ddef: LambdaLift.this.global.Tree)(applyToRhs: LambdaLift.this.global.Tree =&gt; LambdaLift.this.global.Tree)LambdaLift.this.global.DefDef">deriveDefDef</a><span class="delimiter">(</span><a href="#1058278" title="LambdaLift.this.global.Tree">stat</a><span class="delimiter">)</span><a href="#1058398" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree" class="delimiter">(</a><a title="LambdaLift.this.global.Tree" id="1058376">_</a> =&gt; expr<span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#1058398" title="(x: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">stat</a>
      <span class="delimiter">}</span>
      <a href="#651612" title="LambdaLift.this.LambdaLifter" class="keyword">super</a>.<a href="../../../reflect/api/Trees.scala.html#438856" title="(stats: List[LambdaLift.this.global.explicitOuter.global.Tree], exprOwner: LambdaLift.this.global.explicitOuter.global.Symbol)List[LambdaLift.this.global.explicitOuter.global.Tree]">transformStats</a><span class="delimiter">(</span><a href="#1058273" title="List[LambdaLift.this.global.Tree]">stats</a>, <a href="#1058274" title="LambdaLift.this.global.Symbol">exprOwner</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: LambdaLift.this.global.explicitOuter.global.Tree =&gt; LambdaLift.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[LambdaLift.this.global.explicitOuter.global.Tree],LambdaLift.this.global.Tree,List[LambdaLift.this.global.Tree]])List[LambdaLift.this.global.Tree]">map</a> <a href="#1058277" title="(stat: LambdaLift.this.global.Tree)LambdaLift.this.global.Tree">addLifted</a>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(unit: LambdaLift.this.global.CompilationUnit)Unit" id="1056426">transformUnit</a><span class="delimiter">(</span><a title="LambdaLift.this.global.CompilationUnit" id="1058460">unit</a>: <a href="../CompilationUnits.scala.html#559797" title="LambdaLift.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1056415" title="()Unit">computeFreeVars</a>
      <a href="../SubComponent.scala.html#641805" title="(op: =&gt; Unit)Unit">afterOwnPhase</a><span class="delimiter">(</span><a href="#651612" title="LambdaLift.this.LambdaLifter" class="keyword">super</a>.<a href="../ast/Trees.scala.html#564436" title="(unit: LambdaLift.this.global.explicitOuter.global.CompilationUnit)Unit">transformUnit</a><span class="delimiter">(</span><a href="#1058460" title="LambdaLift.this.global.CompilationUnit">unit</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../Global.scala.html#559533" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#1056402" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]">liftedDefs</a>.<a href="../../../collection/MapLike.scala.html#78416" title="=&gt; Boolean">isEmpty</a>, <a href="#1056402" title="=&gt; scala.collection.mutable.LinkedHashMap[LambdaLift.this.global.Symbol,List[LambdaLift.this.global.Tree]]">liftedDefs</a>.<a href="../../../collection/MapLike.scala.html#78426" title="=&gt; Iterable[LambdaLift.this.global.Symbol]">keys</a> <a href="../../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> // class LambdaLifter

<span class="delimiter">}</span>

        </pre>
    </body>
</html>