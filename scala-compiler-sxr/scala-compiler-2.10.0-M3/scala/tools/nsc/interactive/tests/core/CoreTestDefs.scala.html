<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/tests/core/CoreTestDefs.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive
<span class="keyword">package</span> tests.core

<span class="keyword">import</span> scala.tools.nsc.util.Position
<span class="keyword">import</span> scala.tools.nsc.interactive.tests.core._

/** Set of core test definitions that are executed for each test run. */
<span class="keyword">private</span><span class="delimiter">[</span>tests<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait CoreTestDefs extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerRequestsWorkingMode" id="37153">CoreTestDefs</a>
	<a href="../../../../../Unit.scala.html#2389" title="Unit" class="keyword">extends</a> <a href="PresentationCompilerRequestsWorkingMode.scala.html#37111" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerRequestsWorkingMode">PresentationCompilerRequestsWorkingMode</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> scala.tools.nsc.interactive.Global

  /** Ask the presentation compiler for completion at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class CompletionAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskCompletionAt" id="891158">CompletionAction</a><a href="#891158" title="CoreTestDefs.this.CompletionAction" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="891190">compiler</a>: <a href="../../Global.scala.html#35923" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#37150" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#36979" title="scala.tools.nsc.interactive.tests.core.AskCompletionAt">AskCompletionAt</a> <span class="delimiter">{</span>

    <span class="keyword">object</span> <a title="CompletionAction.this.MemberPrinter.type" id="891182">MemberPrinter</a> <a href="#891183" title="CompletionAction.this.MemberPrinter.type" class="delimiter">{</a>
      <span class="keyword">def</span> <a title="(member: CompletionAction.this.compiler.Member)String" id="896156">apply</a><span class="delimiter">(</span><a title="CompletionAction.this.compiler.Member" id="896158">member</a>: compiler.<a href="../../CompilerControl.scala.html#663418" title="CompletionAction.this.compiler.Member">Member</a><span class="delimiter">)</span>: <span title="String">String</span> =
        <span title="String(&quot;`&quot;)" class="string">&quot;`&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#896158" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#871053" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443559" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#896158" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#871054" title="=&gt; CompletionAction.this.compiler.Type">tpe</a>.<a href="../../../../../reflect/internal/Types.scala.html#442076" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`&quot;)" class="string">&quot;`&quot;</span>
    <span class="delimiter">}</span>

    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.tests.core.CompletionMarker.type" id="891184">marker</a> = <a href="TestMarker.scala.html#37172" title="scala.tools.nsc.interactive.tests.core.CompletionMarker.type">CompletionMarker</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="891186">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../../Function1.scala.html#59555" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]]) =&gt; (((scala.tools.nsc.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit) =&gt; Unit)">askAllSources</a><a href="../../../../../Function1.scala.html#59555" title="(v1: scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]])((scala.tools.nsc.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit) =&gt; Unit" class="delimiter">(</a><a href="#891184" title="=&gt; scala.tools.nsc.interactive.tests.core.CompletionMarker.type">marker</a><span class="delimiter">)</span> <a href="../../../../../Function1.scala.html#59555" title="(v1: (scala.tools.nsc.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit)Unit" class="delimiter">{</a> <a title="scala.tools.nsc.util.Position" id="896201">pos</a> =&gt;
        <a href="AskCommand.scala.html#891189" title="(pos: scala.tools.nsc.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]]">askCompletionAt</a><a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">(</a><a href="#896201" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="896206">pos</a>, <a title="List[CompletionAction.this.compiler.Member]" id="896207">members</a><span class="delimiter">)</span> =&gt;
        <a href="PresentationCompilerTestDef.scala.html#891176" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
          <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] aksTypeCompletion at &quot;)" class="string">&quot;[response] aksTypeCompletion at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#891177" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#896206" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          // we skip getClass because it changed signature between 1.5 and 1.6, so there is no
          // universal check file that we can provide for this to work
          <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;retrieved %d members&quot;</a>.<a href="../../../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#896207" title="List[CompletionAction.this.compiler.Member]">members</a>.<a href="../../../../../collection/SeqLike.scala.html#59711" title="=&gt; Int">size</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#891190" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a> <a href="../../CompilerControl.scala.html#663414" title="(op: () =&gt; Unit)Unit">ask</a> <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="List[CompletionAction.this.compiler.Member]" id="896217">filtered</a> = <a href="#896207" title="List[CompletionAction.this.compiler.Member]">members</a>.<a href="../../../../../collection/TraversableLike.scala.html#58982" title="(p: CompletionAction.this.compiler.Member =&gt; Boolean)List[CompletionAction.this.compiler.Member]">filterNot</a><span class="delimiter">(</span><a title="CompletionAction.this.compiler.Member" id="896221">member</a> =&gt; <a href="#896221" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#871053" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; member.sym.NameType">name</a>.<a href="../../../../../Function1.scala.html#59562" title="()String">toString</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;getClass&quot;)" class="string">&quot;getClass&quot;</span> <a href="../../../../../Boolean.scala.html#58724" title="(x: Boolean)Boolean">||</a> <a href="#896221" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#871053" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443265" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span>
            <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#896217" title="List[CompletionAction.this.compiler.Member]">filtered</a>.<a href="../../../../../collection/TraversableLike.scala.html#58971" title="(f: CompletionAction.this.compiler.Member =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[CompletionAction.this.compiler.Member],String,List[String]])List[String]">map</a><a href="../../../../../collection/immutable/List.scala.html#63282" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><a href="#896156" title="(member: CompletionAction.this.compiler.Member)String">MemberPrinter</a><span class="delimiter">(</span><a href="#896244" title="CompletionAction.this.compiler.Member">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../../collection/SeqLike.scala.html#59827" title="(f: String =&gt; String)(implicit ord: scala.math.Ordering[String])List[String]">sortBy</a><a href="../../../../../math/Ordering.scala.html#72476" title="scala.math.Ordering.String.type" class="delimiter">(</a><a href="#896278" title="String">_</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Ask the presentation compiler for type info at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class TypeAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskTypeAt" id="891159">TypeAction</a><a href="#891159" title="CoreTestDefs.this.TypeAction" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="891201">compiler</a>: <a href="../../Global.scala.html#35923" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#37150" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#37195" title="scala.tools.nsc.interactive.tests.core.AskTypeAt">AskTypeAt</a> <span class="delimiter">{</span>

    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.tests.core.TypeMarker.type" id="891195">marker</a> = <a href="TestMarker.scala.html#37079" title="scala.tools.nsc.interactive.tests.core.TypeMarker.type">TypeMarker</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="891197">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../../Function1.scala.html#59555" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree]) =&gt; (((scala.tools.nsc.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit)">askAllSources</a><a href="../../../../../Function1.scala.html#59555" title="(v1: scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree])((scala.tools.nsc.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit" class="delimiter">(</a><a href="#891195" title="=&gt; scala.tools.nsc.interactive.tests.core.TypeMarker.type">marker</a><span class="delimiter">)</span> <a href="../../../../../Function1.scala.html#59555" title="(v1: (scala.tools.nsc.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit)Unit" class="delimiter">{</a> <a title="scala.tools.nsc.util.Position" id="896346">pos</a> =&gt;
        <a href="AskCommand.scala.html#891200" title="(pos: scala.tools.nsc.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree]">askTypeAt</a><a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">(</a><a href="#896346" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="896350">pos</a>, <a title="TypeAction.this.compiler.Tree" id="896351">tree</a><span class="delimiter">)</span> =&gt;
        <a href="PresentationCompilerTestDef.scala.html#891176" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
          <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] askTypeAt at &quot;)" class="string">&quot;[response] askTypeAt at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#891177" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#896350" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#891201" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../CompilerControl.scala.html#663414" title="(op: () =&gt; Unit)Unit">ask</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#896351" title="TypeAction.this.compiler.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Ask the presentation compiler for hyperlink at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class HyperlinkAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskTypeAt with scala.tools.nsc.interactive.tests.core.AskCompletionAt" id="891160">HyperlinkAction</a><a href="#891160" title="CoreTestDefs.this.HyperlinkAction" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="891209">compiler</a>: <a href="../../Global.scala.html#35923" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#37150" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#37195" title="scala.tools.nsc.interactive.tests.core.AskTypeAt">AskTypeAt</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#36979" title="scala.tools.nsc.interactive.tests.core.AskCompletionAt">AskCompletionAt</a> <span class="delimiter">{</span>

    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.tests.core.HyperlinkMarker.type" id="891206">marker</a> = <a href="TestMarker.scala.html#37130" title="scala.tools.nsc.interactive.tests.core.HyperlinkMarker.type">HyperlinkMarker</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="891208">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../../Function1.scala.html#59555" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree]) =&gt; (((scala.tools.nsc.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit)">askAllSources</a><a href="../../../../../Function1.scala.html#59555" title="(v1: scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree])((scala.tools.nsc.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit" class="delimiter">(</a><a href="#891206" title="=&gt; scala.tools.nsc.interactive.tests.core.HyperlinkMarker.type">marker</a><span class="delimiter">)</span> <a href="../../../../../Function1.scala.html#59555" title="(v1: (scala.tools.nsc.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit)Unit" class="delimiter">{</a> <a title="scala.tools.nsc.util.Position" id="896364">pos</a> =&gt;
        <a href="AskCommand.scala.html#891200" title="(pos: scala.tools.nsc.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree]">askTypeAt</a><span class="delimiter">(</span><a href="#896364" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="Reporter.scala.html#37025" title="scala.tools.nsc.interactive.tests.core.NullReporter.type">NullReporter</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="896370">pos</a>, <a title="HyperlinkAction.this.compiler.Tree" id="896371">tree</a><span class="delimiter">)</span> =&gt;
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#891209" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#441152" title="=&gt; HyperlinkAction.this.compiler.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;\nNo symbol is associated with tree: &quot;)" class="string">&quot;\nNo symbol is associated with tree: &quot;</span><span title="(x$1: Any)String">+</span><a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;\naskHyperlinkPos for `&quot;)" class="string">&quot;\naskHyperlinkPos for `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; HyperlinkAction.this.compiler.Symbol#NameType">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;` at &quot;)" class="string">&quot;` at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#891177" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#896370" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#896370" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../../util/Position.scala.html#445352" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../../util/SourceFile.scala.html#561659" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../../io/AbstractFile.scala.html#561676" title="=&gt; String">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]" id="896377">r</a> = <span title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]" class="keyword">new</span> <a href="../../Response.scala.html#36451" title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]">Response</a><span class="delimiter">[</span>Position<span class="delimiter">]</span>
          // `tree.symbol.sourceFile` was discovered to be null when testing using virtpatmat on the akka presentation test, where a position had shifted to point to `Int`
          // askHyperlinkPos for `Int` at (73,19) pi.scala --&gt; class Int in package scala has null sourceFile!
          <span class="keyword">val</span> <a title="String" id="896378">treePath</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443536" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443536" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a>.<a href="../../../io/AbstractFile.scala.html#561677" title="=&gt; String">path</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">val</span> <a title="String" id="896379">treeName</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443536" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443536" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a>.<a href="../../../io/AbstractFile.scala.html#561676" title="=&gt; String">name</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">val</span> <a title="Unit" id="896380">sourceFile</a> = <a href="../../../../../Predef.scala.html#8521" title="(xs: Array[scala.tools.nsc.util.SourceFile])scala.collection.mutable.ArrayOps[scala.tools.nsc.util.SourceFile]">sourceFiles</a>.<a href="../../../../../collection/IndexedSeqOptimized.scala.html#60084" title="(p: scala.tools.nsc.util.SourceFile =&gt; Boolean)Option[scala.tools.nsc.util.SourceFile]">find</a><a href="../../../../../Option.scala.html#64115" title="=&gt; scala.tools.nsc.util.SourceFile" class="delimiter">(</a><a href="#896664" title="scala.tools.nsc.util.SourceFile">_</a>.<a href="../../../util/SourceFile.scala.html#561670" title="=&gt; String">path</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#896378" title="String">treePath</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<a href="#896700" title="Unit" id="896701" class="delimiter">(</a>source<span class="delimiter">)</span> =&gt;
              <a href="#891209" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../CompilerControl.scala.html#663402" title="(sym: HyperlinkAction.this.compiler.Symbol, source: scala.tools.nsc.util.SourceFile, response: HyperlinkAction.this.compiler.Response[HyperlinkAction.this.compiler.Position])Unit">askLinkPos</a><span class="delimiter">(</span><a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>, source, <a href="#896377" title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]">r</a><span class="delimiter">)</span>
              <a href="#896377" title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]">r</a>.<a href="../../Response.scala.html#663662" title="=&gt; Either[scala.tools.nsc.util.Position,Throwable]">get</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> Left<a href="#896691" title="Unit" id="896692" class="delimiter">(</a>pos<span class="delimiter">)</span> =&gt;
                  <span class="keyword">val</span> <a title="HyperlinkAction.this.compiler.Position" id="896679">resolvedPos</a> = <span title="HyperlinkAction.this.compiler.Position" class="keyword">if</span> <span class="delimiter">(</span><a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443167" title="=&gt; HyperlinkAction.this.compiler.Position">pos</a>.<a href="../../../util/Position.scala.html#445353" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443167" title="=&gt; HyperlinkAction.this.compiler.Position">pos</a> <span class="keyword">else</span> pos
                  <a href="PresentationCompilerTestDef.scala.html#891176" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
                    <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] found askHyperlinkPos for `&quot;)" class="string">&quot;[response] found askHyperlinkPos for `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443152" title="=&gt; HyperlinkAction.this.compiler.Symbol#NameType">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;` at &quot;)" class="string">&quot;` at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#891177" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#896679" title="HyperlinkAction.this.compiler.Position">resolvedPos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#896371" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/api/Trees.scala.html#425064" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#443536" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a>.<a href="../../../io/AbstractFile.scala.html#561676" title="=&gt; String">name</a><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> Right<a href="#896691" title="Unit" id="896693" class="delimiter">(</a>ex<span class="delimiter">)</span> =&gt;
                  ex.<span title="()Unit">printStackTrace</span><a href="#896694" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a href="../../../../../Option.scala.html#2498" title="Unit" id="896703">None</a> =&gt;
              <a href="TestSettings.scala.html#891135" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#891224" title="(msg: Any)Unit">println</a><a href="#896704" title="(x: Unit)Unit" class="delimiter">(</a><span title="String(&quot;[error] could not locate sourcefile `&quot;)" class="string">&quot;[error] could not locate sourcefile `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#896379" title="String">treeName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`.&quot;)" class="string">&quot;`.&quot;</span> <span title="(x$1: Any)String">+</span>
                <span title="String(&quot;Hint: Does the looked up definition come form a binary?&quot;)" class="string">&quot;Hint: Does the looked up definition come form a binary?&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span title="Unit" class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>