<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/ToolBoxes.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc

<span class="keyword">import</span> util.ScalaClassLoader

<span class="keyword">trait</span> <a title="trait ToolBoxes extends Object" id="28258">ToolBoxes</a> <a href="../../Unit.scala.html#2389" title="Unit" class="delimiter">{</a> self: Global =&gt;

  <span class="keyword">def</span> <a title="(frontEnd: ToolBoxes.this.FrontEnd, options: String)ToolBoxes.this.ToolBox" id="559791">mkToolBox</a><span class="delimiter">(</span><a title="ToolBoxes.this.FrontEnd" id="564594">frontEnd</a>: <a href="../../reflect/api/FrontEnds.scala.html#23875" title="ToolBoxes.this.FrontEnd">FrontEnd</a> = <a href="../../reflect/api/FrontEnds.scala.html#23877" title="()ToolBoxes.this.FrontEnd">mkSilentFrontEnd</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="String" id="564595">options</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span title="ToolBoxes.this.ToolBox" class="keyword">new</span> <a href="#559792" title="ToolBoxes.this.ToolBox">ToolBox</a><span class="delimiter">(</span><a href="#564594" title="ToolBoxes.this.FrontEnd">frontEnd</a>, <a href="#564595" title="String">options</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class ToolBox extends Object with ToolBoxes.this.AbsToolBox" id="559792">ToolBox</a><a href="#559792" title="ToolBoxes.this.ToolBox" class="delimiter">(</a><span class="keyword">val</span> <a title="ToolBoxes.this.FrontEnd" id="564620">frontEnd</a>: <a href="../../reflect/api/FrontEnds.scala.html#23875" title="ToolBoxes.this.FrontEnd">FrontEnd</a>, <span class="keyword">val</span> <a title="String" id="564621">options</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../reflect/api/ToolBoxes.scala.html#23872" title="ToolBoxes.this.AbsToolBox">AbsToolBox</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tree0: ToolBoxes.this.Tree, pt: ToolBoxes.this.Type, freeTypes: Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type], silent: Boolean, withImplicitViewsDisabled: Boolean, withMacrosDisabled: Boolean)ToolBoxes.this.Tree" id="564603">typeCheck</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="668949">tree0</a>: <a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="ToolBoxes.this.Type" id="668962">pt</a>: <a href="../../reflect/internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a> = <a href="../../reflect/internal/Types.scala.html#441251" title="ToolBoxes.this.WildcardType.type">WildcardType</a>, <a title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" id="668963">freeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">Map</a><span class="delimiter">[</span>FreeType, Type<span class="delimiter">]</span> = <a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxes.this.FreeType, ToolBoxes.this.Type)*)scala.collection.immutable.Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" class="delimiter">[</span><a href="../../reflect/internal/Symbols.scala.html#441149" title="ToolBoxes.this.FreeType">FreeType</a>, <a href="../../reflect/internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Boolean" id="668964">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="668965">withImplicitViewsDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="668966">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="ToolBoxes.this.Tree" id="668968">tree</a> = <a href="../../reflect/internal/FreeVars.scala.html#441194" title="(tree0: ToolBoxes.this.Tree, subs: Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type])ToolBoxes.this.Tree">substituteFreeTypes</a><span class="delimiter">(</span><a href="#668949" title="ToolBoxes.this.Tree">tree0</a>, <a href="#668963" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">freeTypes</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBoxes.this.typer.type" id="668969">currentTyper</a> = <a href="Global.scala.html#559643" title="ToolBoxes.this.typer.type">typer</a>
      <span class="keyword">val</span> <a title="=&gt; ToolBoxes.this.Tree =&gt; ToolBoxes.this.Tree" id="668970">wrapper1</a> = <span title="=&gt; ToolBoxes.this.Tree =&gt; ToolBoxes.this.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#668965" title="Boolean">withImplicitViewsDisabled</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#668969" title="ToolBoxes.this.typer.type">currentTyper</a>.<a href="typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxes.this.analyzer.Context">context</a>.<a href="typechecker/Contexts.scala.html#560952" title="[T](op: =&gt; T)T">withImplicitsEnabled</a><a href="#668993" title="(op: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree" class="delimiter">[</a><a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span> <span class="keyword">else</span> <span class="delimiter">(</span><a href="#668969" title="ToolBoxes.this.typer.type">currentTyper</a>.<a href="typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxes.this.analyzer.Context">context</a>.<a href="typechecker/Contexts.scala.html#560955" title="[T](op: =&gt; T)T">withImplicitsDisabled</a><a href="#668998" title="(op: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree" class="delimiter">[</a><a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="=&gt; ToolBoxes.this.Tree =&gt; ToolBoxes.this.Tree" id="668971">wrapper2</a> = <span title="=&gt; ToolBoxes.this.Tree =&gt; ToolBoxes.this.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#668966" title="Boolean">withMacrosDisabled</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#668969" title="ToolBoxes.this.typer.type">currentTyper</a>.<a href="typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxes.this.analyzer.Context">context</a>.<a href="typechecker/Contexts.scala.html#560961" title="[T](op: =&gt; T)T">withMacrosEnabled</a><a href="#669003" title="(op: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree" class="delimiter">[</a><a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span> <span class="keyword">else</span> <span class="delimiter">(</span><a href="#668969" title="ToolBoxes.this.typer.type">currentTyper</a>.<a href="typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxes.this.analyzer.Context">context</a>.<a href="typechecker/Contexts.scala.html#560964" title="[T](op: =&gt; T)T">withMacrosDisabled</a><a href="#669008" title="(op: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree" class="delimiter">[</a><a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(tree: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree" id="668972">wrapper</a> <span class="delimiter">(</span><a title="=&gt; ToolBoxes.this.Tree" id="669010">tree</a>: =&gt; Tree<span class="delimiter">)</span> = <a href="../../Function1.scala.html#59555" title="(v1: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree">wrapper1</a><span class="delimiter">(</span><a href="../../Function1.scala.html#59555" title="(v1: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree">wrapper2</a><span class="delimiter">(</span><a href="#669010" title="=&gt; ToolBoxes.this.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#668972" title="(tree: =&gt; ToolBoxes.this.Tree)ToolBoxes.this.Tree">wrapper</a><span class="delimiter">(</span><a href="#668969" title="ToolBoxes.this.typer.type">currentTyper</a>.<a href="typechecker/Typers.scala.html#560686" title="(op: ToolBoxes.this.analyzer.Typer =&gt; ToolBoxes.this.analyzer.global.Tree, reportAmbiguousErrors: Boolean, newtree: ToolBoxes.this.analyzer.global.Tree)ToolBoxes.this.analyzer.SilentResult[ToolBoxes.this.analyzer.global.Tree]">silent</a><a href="#669069" title="ToolBoxes.this.analyzer.SilentTypeError" class="delimiter">(</a><a href="#669021" title="ToolBoxes.this.analyzer.Typer">_</a>.<a href="typechecker/Typers.scala.html#560765" title="(tree: ToolBoxes.this.analyzer.global.Tree, mode: Int, pt: ToolBoxes.this.analyzer.global.Type)ToolBoxes.this.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#668968" title="ToolBoxes.this.Tree">tree</a>, analyzer.<span title="Int(1)">EXPRmode</span>, <a href="#668962" title="ToolBoxes.this.Type">pt</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> analyzer.SilentResultValue<a href="#669064" title="ToolBoxes.this.Tree" id="669066" class="delimiter">(</a>result<span class="delimiter">)</span> =&gt;
          <a href="#669070" title="(x: ToolBoxes.this.Tree)ToolBoxes.this.Tree">result</a>
        <span class="keyword">case</span> error @ analyzer.SilentTypeError<a href="#669064" title="ToolBoxes.this.Tree" id="669069" class="delimiter">(</a>_<span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#668964" title="Boolean">silent</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#669059" title="ToolBox.this.ToolBoxError" class="keyword">new</a> <a href="#564617" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#559792" title="ToolBoxes.this.ToolBox" class="keyword">this</a>, <a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;reflective typecheck has failed: %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span>error.<a href="typechecker/Typers.scala.html#562853" title="=&gt; ToolBoxes.this.analyzer.AbsTypeError">err</a>.<a href="typechecker/ContextErrors.scala.html#562862" title="=&gt; String">errMsg</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../reflect/api/Trees.scala.html#23577" title="ToolBoxes.this.EmptyTree.type">EmptyTree</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(pt: ToolBoxes.this.Type, silent: Boolean, withMacrosDisabled: Boolean)ToolBoxes.this.Tree" id="564604">inferImplicitValue</a><span class="delimiter">(</span><a title="ToolBoxes.this.Type" id="669075">pt</a>: <a href="../../reflect/internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a>, <a title="Boolean" id="669082">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="669083">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a> =
      // todo. implement this
      <a href="../../Predef.scala.html#8470" title="=&gt; Nothing">???</a>

    <span class="keyword">def</span> <a title="(tree: ToolBoxes.this.Tree, from: ToolBoxes.this.Type, to: ToolBoxes.this.Type, silent: Boolean, withMacrosDisabled: Boolean, reportAmbiguous: Boolean)ToolBoxes.this.Tree" id="564605">inferImplicitView</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="669084">tree</a>: <a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="ToolBoxes.this.Type" id="669085">from</a>: <a href="../../reflect/internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a>, <a title="ToolBoxes.this.Type" id="669086">to</a>: <a href="../../reflect/internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a>, <a title="Boolean" id="669097">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="669098">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="669099">reportAmbiguous</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a> =
      // todo. implement this
      <a href="../../Predef.scala.html#8470" title="=&gt; Nothing">???</a>

    <span class="keyword">def</span> <a title="[T &lt;: ToolBoxes.this.Tree](tree: T)T" id="564606">resetAllAttrs</a><span class="delimiter">[</span><a title=" &lt;: ToolBoxes.this.Tree" id="564608">T</a> &lt;: Tree<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="669100">tree</a>: <a href="#564608" title="T">T</a><span class="delimiter">)</span>: <a href="#564608" title="T">T</a> =
      <a href="#28258" title="ToolBoxes.this.type">self</a>.<a href="ast/Trees.scala.html#559852" title="(x: T, leaveAlone: ToolBoxes.this.Tree =&gt; Boolean)T">resetAllAttrs</a><span class="delimiter">(</span><a href="#669100" title="T">tree</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="[T &lt;: ToolBoxes.this.Tree](tree: T)T" id="564609">resetLocalAttrs</a><span class="delimiter">[</span><a title=" &lt;: ToolBoxes.this.Tree" id="564611">T</a> &lt;: Tree<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="669119">tree</a>: <a href="#564611" title="T">T</a><span class="delimiter">)</span>: <a href="#564611" title="T">T</a> =
      <a href="#28258" title="ToolBoxes.this.type">self</a>.<a href="ast/Trees.scala.html#559855" title="(x: T, leaveAlone: ToolBoxes.this.Tree =&gt; Boolean)T">resetLocalAttrs</a><span class="delimiter">(</span><a href="#669119" title="T">tree</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(tree0: ToolBoxes.this.Tree, freeTypes: Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type])Any" id="564612">runExpr</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="564627">tree0</a>: <a href="../../reflect/api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" id="564632">freeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">Map</a><span class="delimiter">[</span>FreeType, Type<span class="delimiter">]</span> = <a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxes.this.FreeType, ToolBoxes.this.Type)*)scala.collection.immutable.Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" class="delimiter">[</span><a href="../../reflect/internal/Symbols.scala.html#441149" title="ToolBoxes.this.FreeType">FreeType</a>, <a href="../../reflect/internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="ToolBoxes.this.Tree" id="669139">tree</a> = <a href="../../reflect/internal/FreeVars.scala.html#441194" title="(tree0: ToolBoxes.this.Tree, subs: Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type])ToolBoxes.this.Tree">substituteFreeTypes</a><span class="delimiter">(</span><a href="#564627" title="ToolBoxes.this.Tree">tree0</a>, <a href="#564632" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">freeTypes</a><span class="delimiter">)</span>
      // need to reset the tree, otherwise toolbox will refuse to work with it
      // upd. this has to be done by the user himself, otherwise we run into troubles. see SI-5713
//      tree = resetAllAttrs(tree0.duplicate)
      <span class="keyword">val</span> <a title="ToolBox.this.libraryClasspathMirror.Tree" id="669140">imported</a> = <a href="#564613" title="=&gt; ToolBox.this.libraryClasspathMirror.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../../reflect/api/Importers.scala.html#425122" title="(tree: ToolBox.this.importer.from.Tree)ToolBox.this.libraryClasspathMirror.Tree">importTree</a><span class="delimiter">(</span><a href="#669139" title="ToolBoxes.this.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.libraryClasspathMirror.ToolBox" id="669141">toolBox</a> = <a href="#564615" title="=&gt; scala.reflect.runtime.Mirror">libraryClasspathMirror</a>.<a href="../../reflect/runtime/ToolBoxes.scala.html#591665" title="(frontEnd: ToolBox.this.libraryClasspathMirror.FrontEnd, options: String)ToolBox.this.libraryClasspathMirror.ToolBox">mkToolBox</a><span class="delimiter">(</span><a href="#564620" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ToolBox.this.libraryClasspathMirror.FrontEnd" class="delimiter">[</span>libraryClasspathMirror.<a href="../../reflect/api/FrontEnds.scala.html#23875" title="ToolBox.this.libraryClasspathMirror.FrontEnd">FrontEnd</a><span class="delimiter">]</span>, <a href="#564621" title="=&gt; String">options</a><span class="delimiter">)</span>
      <a href="#669203" title="Any" id="669198" class="keyword">try</a> <a href="#669141" title="ToolBox.this.libraryClasspathMirror.ToolBox">toolBox</a>.<a href="../../reflect/runtime/ToolBoxes.scala.html#594742" title="(tree: ToolBox.this.libraryClasspathMirror.Tree, freeTypes: Map[ToolBox.this.libraryClasspathMirror.FreeType,ToolBox.this.libraryClasspathMirror.Type])Any">runExpr</a><span class="delimiter">(</span><a href="#669140" title="ToolBox.this.libraryClasspathMirror.Tree">imported</a><span class="delimiter">)</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../Boolean.scala.html#58725" title="Any" id="669201">ex</a>: toolBox.ToolBoxError =&gt;
          <a href="#669203" title="(x: Any)Any" class="keyword">throw</a> <span title="ToolBox.this.ToolBoxError" class="keyword">new</span> <a href="#564617" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#559792" title="ToolBoxes.this.ToolBox" class="keyword">this</a>, ex.<a href="../../reflect/runtime/ToolBoxes.scala.html#596448" title="=&gt; String">message</a>, ex.<a href="../../reflect/runtime/ToolBoxes.scala.html#596450" title="=&gt; Throwable">cause</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    // [Eugene] how do I make this work without casts?
    // private lazy val importer = libraryClasspathMirror.mkImporter(self)
    <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ToolBox extends ToolBox.this.libraryClasspathMirror.Importer" id="564614">importer</a> = <a href="#564615" title="=&gt; scala.reflect.runtime.Mirror">libraryClasspathMirror</a>.<a href="../../reflect/internal/Importers.scala.html#441903" title="(from0: scala.reflect.api.Universe)ToolBox.this.libraryClasspathMirror.Importer{val from: from0.type}">mkImporter</a><span class="delimiter">(</span><a href="#28258" title="scala.tools.nsc.Global">self</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ToolBox extends ToolBox.this.libraryClasspathMirror.Importer" class="delimiter">[</span>libraryClasspathMirror.<a href="#669181" title="ToolBox extends ToolBox.this.libraryClasspathMirror.Importer">Importer</a> <span class="delimiter">{</span> <span class="keyword">val</span> from: self.<span class="keyword">type</span> <span class="delimiter">}</span><span class="delimiter">]</span>

    <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.reflect.runtime.Mirror" id="564616">libraryClasspathMirror</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#28258" title="ToolBoxes.this.type">self</a>.<a href="Global.scala.html#559775" title="=&gt; Boolean">forMSIL</a><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)UnsupportedOperationException" class="keyword">new</span> <a href="../../package.scala.html#56966" title="UnsupportedOperationException">UnsupportedOperationException</a><span class="delimiter">(</span><span title="String(&quot;Scala reflection not available on this platform&quot;)" class="string">&quot;Scala reflection not available on this platform&quot;</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="ClassLoader" id="669148">libraryClassLoader</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[java.net.URL]" id="669153">classpath</a> = <a href="#28258" title="ToolBoxes.this.type">self</a>.<a href="Global.scala.html#559495" title="=&gt; scala.tools.nsc.util.ClassPath[ToolBoxes.this.platform.BinaryRepr]">classPath</a>.<a href="util/ClassPath.scala.html#642554" title="=&gt; List[java.net.URL]">asURLs</a>
        <span class="keyword">var</span> <a title="ClassLoader" id="669154">loader</a>: <span title="ClassLoader">ClassLoader</span> = <a href="util/ScalaClassLoader.scala.html#51982" title="scala.tools.nsc.util.ScalaClassLoader.type">ScalaClassLoader</a>.<a href="util/ScalaClassLoader.scala.html#576090" title="(urls: Seq[java.net.URL], parent: ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a><span class="delimiter">(</span><a href="#669153" title="List[java.net.URL]">classpath</a>, <a href="#28258" title="ToolBoxes.this.type">self</a>.<span title="()Class[_]">getClass</span>.<span title="()ClassLoader">getClassLoader</span><span class="delimiter">)</span>

        // [Eugene] a heuristic to detect REPL
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#28258" title="ToolBoxes.this.type">self</a>.<a href="Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="settings/ScalaSettings.scala.html#467582" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">exposeEmptyPackage</a>.<a href="settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">import</span> scala.tools.nsc.interpreter._
          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="669168">virtualDirectory</a> = <a href="#28258" title="ToolBoxes.this.type">self</a>.<a href="Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="settings/MutableSettings.scala.html#467280" title="=&gt; scala.tools.nsc.Settings#OutputDirs">outputDirs</a>.<a href="settings/MutableSettings.scala.html#598972" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">getSingleOutput</a>.<a href="../../Option.scala.html#63813" title="=&gt; scala.tools.nsc.io.AbstractFile">get</a>
          <a href="#669154" title="ClassLoader">loader</a> = <a href="#669169" title="scala.tools.nsc.interpreter.AbstractFileClassLoader" class="keyword">new</a> <a href="interpreter/AbstractFileClassLoader.scala.html#38448" title="anonymous class $anon extends scala.tools.nsc.interpreter.AbstractFileClassLoader" id="669169">AbstractFileClassLoader</a><span class="delimiter">(</span><a href="#669168" title="scala.tools.nsc.io.AbstractFile">virtualDirectory</a>, <a href="#669154" title="ClassLoader">loader</a><span class="delimiter">)</span> <span class="delimiter">{</span><span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <a href="#669154" title="ClassLoader">loader</a>
      <span class="delimiter">}</span>

      <span title="scala.reflect.runtime.Mirror" class="keyword">new</span> scala.reflect.runtime.<a href="../../reflect/runtime/Mirror.scala.html#24615" title="scala.reflect.runtime.Mirror">Mirror</a><span class="delimiter">(</span><a href="#669148" title="ClassLoader">libraryClassLoader</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class ToolBoxError extends Throwable" id="564617">ToolBoxError</a><a href="#564617" title="ToolBox.this.ToolBoxError" class="delimiter">(</a><span class="keyword">val</span> <a title="ToolBoxes.this.ToolBox" id="669054">toolBox</a>: <a href="#559792" title="ToolBoxes.this.ToolBox">ToolBox</a>, <span class="keyword">val</span> <a title="String" id="669055">message</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Throwable" id="669059">cause</a>: <span title="Throwable">Throwable</span> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../package.scala.html#56957" title="Throwable">Throwable</a><span class="delimiter">(</span><a href="#669055" title="String">message</a>, <a href="#669059" title="Throwable">cause</a><span class="delimiter">)</span>

    <span class="keyword">object</span> <a title="ToolBox.this.ToolBoxError.type" id="669226">ToolBoxError</a> <a href="#564619" title="ToolBox.this.ToolBoxError.type" class="keyword">extends</a> <a href="../../reflect/api/ToolBoxes.scala.html#426844" title="ToolBox.this.ToolBoxErrorExtractor">ToolBoxErrorExtractor</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(error: ToolBox.this.ToolBoxError)Option[(ToolBoxes.this.ToolBox, String)]" id="669058">unapply</a><span class="delimiter">(</span><a title="ToolBox.this.ToolBoxError" id="669215">error</a>: <a href="#564617" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1510" title="Option[(ToolBoxes.this.ToolBox, String)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>ToolBox, String<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="../../Option.scala.html#64111" title="(x: (ToolBoxes.this.ToolBox, String))Some[(ToolBoxes.this.ToolBox, String)]">Some</a><span class="delimiter">(</span><a href="../../Tuple2.scala.html#63804" title="(_1: ToolBoxes.this.ToolBox, _2: String)(ToolBoxes.this.ToolBox, String)" class="delimiter">(</a><a href="#669215" title="ToolBox.this.ToolBoxError">error</a>.<a href="#669054" title="=&gt; ToolBoxes.this.ToolBox">toolBox</a>, <a href="#669215" title="ToolBox.this.ToolBoxError">error</a>.<a href="#669055" title="=&gt; String">message</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>
        </pre>
    </body>
</html>