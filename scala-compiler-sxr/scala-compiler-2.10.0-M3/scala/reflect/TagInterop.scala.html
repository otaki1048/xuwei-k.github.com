<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/TagInterop.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect

<span class="keyword">import</span> scala.runtime.<a href="../runtime/ScalaRunTime.scala.html#3971" title="scala.runtime.ScalaRunTime.type">ScalaRunTime</a>._
<span class="keyword">import</span> <a href="package.scala.html#57100" title="=&gt; scala.reflect.api.Mirror">mirror</a>._
<span class="keyword">import</span> <a href="api/StandardDefinitions.scala.html#23820" title="=&gt; scala.reflect.mirror.AbsDefinitions">definitions</a>._

<span class="keyword">object</span> <a title="scala.reflect.TagInterop.type" id="3184">TagInterop</a> <a href="#3185" title="scala.reflect.TagInterop.type" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="[T](tag: scala.reflect.ArrayTag[T])scala.reflect.ClassManifest[T]" id="431304">arrayTagToClassManifest</a><span class="delimiter">[</span><a title="" id="431306">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.reflect.ArrayTag[T]" id="431314">tag</a>: <a href="ArrayTag.scala.html#3321" title="scala.reflect.ArrayTag[T]">ArrayTag</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="ClassManifest.scala.html#3123" title="scala.reflect.ClassManifest[T]">ClassManifest</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[_]" id="431316">erasure</a> = <a href="../runtime/ScalaRunTime.scala.html#58893" title="(schematic: Any)Class[_]">arrayElementClass</a><span class="delimiter">(</span><a href="#431314" title="scala.reflect.ArrayTag[T]">tag</a><span class="delimiter">)</span>
    <span title="scala.reflect.ClassManifest[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#431316" title="Class[_]">erasure</a>.<span title="()Boolean">isArray</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Class[_]" id="431319">elementClass</a> = <a href="../runtime/ScalaRunTime.scala.html#58893" title="(schematic: Any)Class[_]">arrayElementClass</a><span class="delimiter">(</span><a href="#431316" title="Class[_]">erasure</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.reflect.ClassManifest[Nothing]" id="431320">elementManifest</a> = <a href="#431304" title="(tag: scala.reflect.ArrayTag[Nothing])scala.reflect.ClassManifest[Nothing]">arrayTagToClassManifest</a><span class="delimiter">(</span><a href="ClassTag.scala.html#61898" title="(erasure1: Class[_])scala.reflect.ClassTag[Nothing]">ClassTag</a><span class="delimiter">(</span><a href="#431319" title="Class[_]">elementClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="ClassManifest.scala.html#3124" title="scala.reflect.ClassManifest.type">ClassManifest</a>.<a href="ClassManifest.scala.html#61786" title="(arg: scala.reflect.OptManifest[_])scala.reflect.ClassManifest[Array[Nothing]]">arrayType</a><span class="delimiter">(</span><a href="#431320" title="scala.reflect.ClassManifest[Nothing]">elementManifest</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.reflect.ClassManifest[T]" class="delimiter">[</span><a href="ClassManifest.scala.html#3123" title="scala.reflect.ClassManifest[T]">ClassManifest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="ClassManifest.scala.html#3124" title="scala.reflect.ClassManifest.type">ClassManifest</a>.<a href="ClassManifest.scala.html#61771" title="(clazz: Class[T])scala.reflect.ClassManifest[T]">fromClass</a><span class="delimiter">(</span><a href="#431316" title="Class[_]">erasure</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](tag: scala.reflect.ConcreteTypeTag[T])scala.reflect.Manifest[T]" id="431307">concreteTypeTagToManifest</a><span class="delimiter">[</span><a title="" id="431309">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.reflect.ConcreteTypeTag[T]" id="431339">tag</a>: <a href="api/TypeTags.scala.html#23829" title="scala.reflect.ConcreteTypeTag[T]">ConcreteTypeTag</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Manifest.scala.html#3147" title="scala.reflect.Manifest[T]">Manifest</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    // todo. reproduce manifest generation code here. toolboxes are too slow.
    <span class="keyword">val</span> <a title="scala.reflect.mirror.Symbol" id="431341">implicitly</a> = <a href="api/StandardDefinitions.scala.html#425498" title="=&gt; scala.reflect.mirror.ModuleSymbol">PredefModule</a>.<a href="api/Symbols.scala.html#424624" title="=&gt; scala.reflect.mirror.Type">typeSignature</a>.<a href="api/Types.scala.html#424803" title="(name: scala.reflect.mirror.Name)scala.reflect.mirror.Symbol">member</a><span class="delimiter">(</span><a href="api/Names.scala.html#23557" title="(s: String)scala.reflect.mirror.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;implicitly&quot;)" class="string">&quot;implicitly&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.reflect.mirror.Type" id="431342">taggedTpe</a> = <a href="api/Types.scala.html#23538" title="(tycon: scala.reflect.mirror.Type, args: List[scala.reflect.mirror.Type])scala.reflect.mirror.Type">appliedType</a><span class="delimiter">(</span><a href="api/TreeBuildUtil.scala.html#23851" title="(fullName: String)scala.reflect.mirror.Symbol">staticClass</a><span class="delimiter">(</span><span title="String(&quot;scala.reflect.Manifest&quot;)" class="string">&quot;scala.reflect.Manifest&quot;</span><span class="delimiter">)</span>.<a href="api/Symbols.scala.html#424667" title="=&gt; scala.reflect.mirror.Type">asTypeConstructor</a>, <a href="../collection/immutable/List.scala.html#63291" title="(xs: reflect.mirror.Type*)List[reflect.mirror.Type]">List</a><span class="delimiter">(</span><a href="#431339" title="scala.reflect.ConcreteTypeTag[T]">tag</a>.<a href="api/TypeTags.scala.html#63454" title="=&gt; reflect.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.reflect.mirror.TypeApply" id="431343">materializer</a> = <a href="api/Trees.scala.html#429629" title="(fun: scala.reflect.mirror.Tree, args: List[scala.reflect.mirror.Tree])scala.reflect.mirror.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="api/Trees.scala.html#23714" title="(sym: scala.reflect.mirror.Symbol)scala.reflect.mirror.Ident">Ident</a><span class="delimiter">(</span><a href="#431341" title="scala.reflect.mirror.Symbol">implicitly</a><span class="delimiter">)</span>, <a href="../collection/immutable/List.scala.html#63291" title="(xs: scala.reflect.mirror.TypeTree*)List[scala.reflect.mirror.TypeTree]">List</a><span class="delimiter">(</span><a href="api/Trees.scala.html#23746" title="(tp: scala.reflect.mirror.Type)scala.reflect.mirror.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#431342" title="scala.reflect.mirror.Type">taggedTpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="api/ToolBoxes.scala.html#23871" title="(frontEnd: scala.reflect.mirror.FrontEnd, options: String)scala.reflect.mirror.AbsToolBox">mkToolBox</a><a title="scala.reflect.mirror.AbsToolBox" id="431389" class="delimiter">(</a><span class="delimiter">)</span>.<a href="api/ToolBoxes.scala.html#429939" title="Map[scala.reflect.mirror.FreeType,scala.reflect.mirror.Type]" id="431391">runExpr</a><span class="delimiter">(</span><a href="#431343" title="scala.reflect.mirror.TypeApply" id="431390">materializer</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.reflect.Manifest[T]" class="delimiter">[</span><a href="Manifest.scala.html#3147" title="scala.reflect.Manifest[T]">Manifest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="scala.reflect.Manifest[T]" id="431392">ex</a>: <span title="Throwable">Throwable</span> =&gt; <a href="Manifest.scala.html#3148" title="scala.reflect.Manifest.type">Manifest</a>.<a href="Manifest.scala.html#61830" title="(clazz: Class[_])scala.reflect.Manifest[Nothing]">classType</a><span class="delimiter">(</span><a href="#431339" title="scala.reflect.ConcreteTypeTag[T]">tag</a>.<a href="ErasureTag.scala.html#63445" title="=&gt; Class[_]">erasure</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.reflect.Manifest[T]" class="delimiter">[</span><a href="Manifest.scala.html#3147" title="scala.reflect.Manifest[T]">Manifest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](tag: scala.reflect.Manifest[T])scala.reflect.ConcreteTypeTag[T]" id="431310">manifestToConcreteTypeTag</a><span class="delimiter">[</span><a title="" id="431312">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.reflect.Manifest[T]" id="431409">tag</a>: <a href="Manifest.scala.html#3147" title="scala.reflect.Manifest[T]">Manifest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="api/TypeTags.scala.html#23829" title="scala.reflect.ConcreteTypeTag[T]">ConcreteTypeTag</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.reflect.mirror.Type" id="431411">tpe</a> =
      <span title="scala.reflect.mirror.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#431409" title="scala.reflect.Manifest[T]">tag</a>.<a href="Manifest.scala.html#63432" title="=&gt; List[scala.reflect.Manifest[_]]">typeArguments</a>.<a href="../collection/IterableLike.scala.html#59464" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="api/Mirror.scala.html#63427" title="(clazz: Class[_])scala.reflect.mirror.Type">classToType</a><span class="delimiter">(</span><a href="#431409" title="scala.reflect.Manifest[T]">tag</a>.<a href="ClassManifest.scala.html#63384" title="=&gt; Class[_]">erasure</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="api/Types.scala.html#23538" title="(tycon: scala.reflect.mirror.Type, args: List[scala.reflect.mirror.Type])scala.reflect.mirror.Type">appliedType</a><span class="delimiter">(</span><a href="api/Mirror.scala.html#63427" title="(clazz: Class[_])scala.reflect.mirror.Type">classToType</a><span class="delimiter">(</span><a href="#431409" title="scala.reflect.Manifest[T]">tag</a>.<a href="ClassManifest.scala.html#63384" title="=&gt; Class[_]">erasure</a><span class="delimiter">)</span>.<a href="api/Types.scala.html#424811" title="=&gt; scala.reflect.mirror.Type">typeConstructor</a>, <a href="#431409" title="scala.reflect.Manifest[T]">tag</a>.<a href="Manifest.scala.html#63432" title="=&gt; List[scala.reflect.Manifest[_]]">typeArguments</a> <a href="../collection/TraversableLike.scala.html#58971" title="(f: scala.reflect.Manifest[_] =&gt; reflect.mirror.ConcreteTypeTag[_])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.reflect.Manifest[_]],reflect.mirror.ConcreteTypeTag[_],List[reflect.mirror.ConcreteTypeTag[_]]])List[reflect.mirror.ConcreteTypeTag[_]]">map</a> <span class="delimiter">(</span><a href="#431310" title="(tag: scala.reflect.Manifest[_$1])scala.reflect.ConcreteTypeTag[_$1]">manifestToConcreteTypeTag</a><span class="delimiter">(</span><a href="#431440" title="scala.reflect.Manifest[_]">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../collection/TraversableLike.scala.html#58971" title="(f: reflect.mirror.ConcreteTypeTag[_] =&gt; reflect.mirror.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[reflect.mirror.ConcreteTypeTag[_]],reflect.mirror.Type,List[scala.reflect.mirror.Type]])List[scala.reflect.mirror.Type]">map</a> <span class="delimiter">(</span><a href="#431601" title="reflect.mirror.ConcreteTypeTag[_]">_</a>.<a href="api/TypeTags.scala.html#63454" title="=&gt; reflect.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="api/TypeTags.scala.html#63540" title="(tpe1: reflect.mirror.Type, erasure1: Class[_])reflect.mirror.ConcreteTypeTag[T]">ConcreteTypeTag</a><span class="delimiter">(</span><a href="#431411" title="scala.reflect.mirror.Type">tpe</a>, <a href="#431409" title="scala.reflect.Manifest[T]">tag</a>.<a href="ClassManifest.scala.html#63384" title="=&gt; Class[_]">erasure</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>
        </pre>
    </body>
</html>