<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/makro/Context.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect.makro

<span class="keyword">import</span> <a href="../../language.scala.html#2216" title="language.type">language</a>.<a href="../../language.scala.html#57442" title="language.experimental.type">experimental</a>.macros

// todo. introduce context hierarchy
// the most lightweight context should just expose the stuff from the SIP
// the full context should include all traits from scala.reflect.makro (and probably reside in scala-compiler.jar)

<span class="keyword">trait</span> <a title="trait Context extends Object with scala.reflect.makro.Aliases with scala.reflect.makro.CapturedVariables with scala.reflect.makro.Enclosures with scala.reflect.makro.Infrastructure with scala.reflect.makro.Names with scala.reflect.makro.Reifiers with scala.reflect.makro.FrontEnds with scala.reflect.makro.Settings with scala.reflect.makro.Symbols with scala.reflect.makro.Typers with scala.reflect.makro.Util" id="23207">Context</a> <a href="../../Unit.scala.html#2389" title="Unit" class="keyword">extends</a> <a href="Aliases.scala.html#23237" title="scala.reflect.makro.Aliases">Aliases</a>
                 <span class="keyword">with</span> <a href="CapturedVariables.scala.html#23240" title="scala.reflect.makro.CapturedVariables">CapturedVariables</a>
                 <span class="keyword">with</span> <a href="Enclosures.scala.html#23255" title="scala.reflect.makro.Enclosures">Enclosures</a>
                 <span class="keyword">with</span> <a href="Infrastructure.scala.html#23252" title="scala.reflect.makro.Infrastructure">Infrastructure</a>
                 <span class="keyword">with</span> <a href="Names.scala.html#23261" title="scala.reflect.makro.Names">Names</a>
                 <span class="keyword">with</span> <a href="Reifiers.scala.html#23204" title="scala.reflect.makro.Reifiers">Reifiers</a>
                 <span class="keyword">with</span> <a href="FrontEnds.scala.html#23228" title="scala.reflect.makro.FrontEnds">FrontEnds</a>
                 <span class="keyword">with</span> <a href="Settings.scala.html#23243" title="scala.reflect.makro.Settings">Settings</a>
                 <span class="keyword">with</span> <a href="Symbols.scala.html#23234" title="scala.reflect.makro.Symbols">Symbols</a>
                 <span class="keyword">with</span> <a href="Typers.scala.html#23222" title="scala.reflect.makro.Typers">Typers</a>
                 <span class="keyword">with</span> <a href="Util.scala.html#23216" title="scala.reflect.makro.Util">Util</a> <span class="delimiter">{</span>

  /** The mirror that corresponds to the compile-time universe */
  <span class="keyword">val</span> <a title="=&gt; scala.reflect.api.Universe" id="69295">mirror</a>: scala.reflect.api.<a href="../api/Universe.scala.html#18225" title="scala.reflect.api.Universe">Universe</a>

  /** The type of the prefix tree from which the macro is selected */
  <span class="keyword">type</span> <a title="" id="69296">PrefixType</a>

  /** The prefix tree from which the macro is selected */
  <span class="keyword">val</span> <a title="=&gt; Context.this.Expr[Context.this.PrefixType]" id="69297">prefix</a>: <a href="../api/Exprs.scala.html#23423" title="Context.this.Expr[Context.this.PrefixType]">Expr</a><span class="delimiter">[</span>PrefixType<span class="delimiter">]</span>

  /** Alias to the underlying mirror's reify */
  <span class="keyword">def</span> <a title="[T](expr: T)Context.this.Expr[T]" id="69298">reify</a><span class="delimiter">[</span><a title="" id="69300">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="557638">expr</a>: <a href="#69300" title="T">T</a><span class="delimiter">)</span>: <a href="../api/Exprs.scala.html#23423" title="Context.this.Expr[T]">Expr</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = macro <a href="#23208" title="scala.reflect.makro.Context.type">Context</a>.<a href="#557642" title="[T](cc: scala.reflect.makro.Context{type PrefixType = scala.reflect.makro.Context})(expr: cc.Expr[T])cc.Expr[cc.prefix.value.Expr[T]]">reify</a><span title="(cc: scala.reflect.makro.Context{type PrefixType = scala.reflect.makro.Context})(expr: cc.Expr[T])cc.Expr[cc.prefix.value.Expr[T]]" class="delimiter">[</span><a href="#69300" title="T">T</a><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="scala.reflect.makro.Context.type" id="23208">Context</a> <a href="#23209" title="scala.reflect.makro.Context.type" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="[T](cc: scala.reflect.makro.Context{type PrefixType = scala.reflect.makro.Context})(expr: cc.Expr[T])cc.Expr[cc.prefix.value.Expr[T]]" id="557642">reify</a><span class="delimiter">[</span><a title="" id="557644">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Context extends scala.reflect.makro.Context" id="557645">cc</a>: <a href="#557647" title="Context extends scala.reflect.makro.Context">Context</a><span class="delimiter">{</span> <span class="keyword">type</span> PrefixType = Context <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="cc.Expr[T]" id="557646">expr</a>: cc.<a href="../api/Exprs.scala.html#23423" title="cc.Expr[T]">Expr</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: cc.<a href="../api/Exprs.scala.html#23423" title="cc.Expr[cc.prefix.value.Expr[T]]">Expr</a><span class="delimiter">[</span>cc.prefix.value.Expr<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#557645" title="Context extends scala.reflect.makro.Context">cc</a>.<a href="#69295" title="=&gt; scala.reflect.api.Universe">mirror</a>._
    <span class="keyword">import</span> scala.reflect.makro.internal._
    // [Eugene] how do I typecheck this without undergoing this tiresome (and, in general, incorrect) procedure?
    <span class="keyword">val</span> <a title="cc.mirror.Tree" id="557659">prefix</a>: <a href="../api/Trees.scala.html#23570" title="cc.mirror.Tree">Tree</a> = <a href="../api/Trees.scala.html#427925" title="(qualifier: cc.mirror.Tree, name: cc.mirror.Name)cc.mirror.Select">Select</a><span class="delimiter">(</span><a href="#557645" title="Context extends scala.reflect.makro.Context">cc</a>.<a href="#69297" title="=&gt; cc.Expr[cc.PrefixType]">prefix</a>.<a href="../api/Exprs.scala.html#23434" title="=&gt; cc.mirror.Tree">tree</a>, <a href="../api/Names.scala.html#23557" title="(s: String)cc.mirror.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;mirror&quot;)" class="string">&quot;mirror&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="cc.mirror.Type" id="557660">prefixTpe</a> = <a href="#557645" title="Context extends scala.reflect.makro.Context">cc</a>.<a href="Typers.scala.html#69375" title="(tree: cc.Tree, pt: cc.Type, silent: Boolean, withImplicitViewsDisabled: Boolean, withMacrosDisabled: Boolean)cc.Tree">typeCheck</a><span class="delimiter">(</span><a href="../api/Trees.scala.html#429629" title="(fun: cc.mirror.Tree, args: List[cc.mirror.Tree])cc.mirror.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="../api/Trees.scala.html#427925" title="(qualifier: cc.mirror.Tree, name: cc.mirror.Name)cc.mirror.Select">Select</a><span class="delimiter">(</span><a href="#557659" title="cc.mirror.Tree">prefix</a>, <a href="../api/Names.scala.html#23557" title="(s: String)cc.mirror.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;asInstanceOf&quot;)" class="string">&quot;asInstanceOf&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#63291" title="(xs: cc.mirror.SingletonTypeTree*)List[cc.mirror.SingletonTypeTree]">List</a><span class="delimiter">(</span><a href="../api/Trees.scala.html#436950" title="(ref: cc.mirror.Tree)cc.mirror.SingletonTypeTree">SingletonTypeTree</a><span class="delimiter">(</span><a href="#557659" title="cc.mirror.Tree">prefix</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../api/Trees.scala.html#425060" title="=&gt; cc.mirror.Type">tpe</a>
    <a href="#557659" title="cc.mirror.Tree">prefix</a> <a href="../api/Trees.scala.html#425062" title="(tp: cc.mirror.Type)prefix.type">setType</a> <a href="#557660" title="cc.mirror.Type">prefixTpe</a>
    <a href="#557645" title="Context extends scala.reflect.makro.Context">cc</a>.<a href="../api/Exprs.scala.html#431889" title="(tree: cc.mirror.Tree)(implicit evidence$1: cc.mirror.TypeTag[Nothing])cc.mirror.Expr[Nothing]">Expr</a><a href="../api/TypeTags.scala.html#63495" title="=&gt; cc.mirror.TypeTag[Nothing]" class="delimiter">(</a><a href="internal/Utils.scala.html#57096" title="implicit scala.reflect.makro.internal.package.context2utils : (c0: scala.reflect.makro.Context)scala.reflect.makro.internal.Utils{val c: c0.type}">cc</a>.<a href="internal/Utils.scala.html#69290" title="((prefix: _2635.c.mirror.Tree, expr: _2635.c.mirror.Tree)_2635.c.mirror.Tree) forSome { val _2635: scala.reflect.makro.internal.Utils{val c: scala.reflect.makro.Context.&lt;refinement&gt;.type} }">materializeExpr</a><span class="delimiter">(</span><a href="#557659" title="cc.mirror.Tree">prefix</a>, <a href="#557646" title="cc.Expr[T]">expr</a>.<a href="../api/Exprs.scala.html#23434" title="=&gt; cc.mirror.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>