<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/internal/transform/UnCurry.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect
<span class="keyword">package</span> internal
<span class="keyword">package</span> transform

<span class="keyword">import</span> <a href="../Flags.scala.html#20545" title="scala.reflect.internal.Flags.type">Flags</a>._

<span class="keyword">trait</span> <a title="trait UnCurry extends Object" id="22881">UnCurry</a> <a href="../../../Unit.scala.html#2389" title="Unit" class="delimiter">{</a>

  <span class="keyword">val</span> <a title="=&gt; scala.reflect.internal.SymbolTable" id="460993">global</a>: <a href="../SymbolTable.scala.html#20373" title="scala.reflect.internal.SymbolTable">SymbolTable</a>
  <span class="keyword">import</span> <a href="#460993" title="=&gt; scala.reflect.internal.SymbolTable">global</a>._
  <span class="keyword">import</span> <a href="../Definitions.scala.html#441641" title="UnCurry.this.global.definitions.type">definitions</a>._

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="460996">expandAlias</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="553019">tp</a>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a> = <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#553019" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#441972" title="=&gt; Boolean">isHigherKinded</a><span class="delimiter">)</span> <a href="#553019" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#442017" title="=&gt; UnCurry.this.global.Type">normalize</a> <span class="keyword">else</span> <a href="#553019" title="UnCurry.this.global.Type">tp</a>

  <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="460997">uncurry</a>: <a href="../Types.scala.html#441429" title="UnCurry.this.global.TypeMap">TypeMap</a> = <a href="#553095" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#441429" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="553095">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="553097">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="553102">tp0</a>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="553108">tp</a> = <a href="#460996" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#553102" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#553108" title="UnCurry.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> MethodType<a href="#553262" title="Boolean" id="553265" class="delimiter">(</a>params, MethodType<a title="UnCurry.this.global.Type" id="553267" class="delimiter">(</a>params1, restpe<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#553097" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#448348" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>params <a href="../../../collection/immutable/List.scala.html#63646" title="(prefix: List[UnCurry.this.global.Symbol])List[UnCurry.this.global.Symbol]">:::</a> params1, restpe<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> MethodType<span class="delimiter">(</span>params, ExistentialType<a title="UnCurry.this.global.Type" id="553272" class="delimiter">(</a>tparams, restpe @ MethodType<a title="UnCurry.this.global.Type" id="553276" class="delimiter">(</a>_, _<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../../Predef.scala.html#8460" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="String(&quot;unexpected curried method types with intervening existential&quot;)" class="string">&quot;unexpected curried method types with intervening existential&quot;</span><span class="delimiter">)</span>
          <a href="#553102" title="UnCurry.this.global.Type">tp0</a>
        <span class="keyword">case</span> MethodType<span class="delimiter">(</span>h <a title="UnCurry.this.global.Type" id="553280">::</a> t, restpe<span class="delimiter">)</span> <span class="keyword">if</span> h.<a href="../HasFlags.scala.html#443592" title="=&gt; Boolean">isImplicit</a> =&gt;
          <a href="#553097" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#448348" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>h.<a href="../Symbols.scala.html#443475" title="=&gt; UnCurry.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a>.<a href="../Symbols.scala.html#443306" title="(mask: Long)h.TypeOfClonedSymbol">resetFlag</a><span class="delimiter">(</span><span title="Long(512L)">IMPLICIT</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#63643" title="(x: UnCurry.this.global.Symbol)List[UnCurry.this.global.Symbol]">::</a> t, restpe<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> NullaryMethodType<a href="#553262" title="UnCurry.this.global.Type" id="553282" class="delimiter">(</a>restpe<span class="delimiter">)</span> =&gt;
          <a href="#553097" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#448348" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<a href="../../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>, restpe<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<a href="#553262" title="Boolean" id="553286" class="delimiter">(</a>pre, <a href="../Definitions.scala.html#442297" title="UnCurry.this.global.Type" id="553310">ByNameParamClass</a>, arg <a title="UnCurry.this.global.Type" id="553290">::</a> <a href="../../../collection/immutable/List.scala.html#11552" title="UnCurry.this.global.Type" id="553311">Nil</a><span class="delimiter">)</span> =&gt;
          <a href="#553097" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Definitions.scala.html#442481" title="(formals: List[UnCurry.this.global.Type], restpe: UnCurry.this.global.Type)UnCurry.this.global.Type">functionType</a><span class="delimiter">(</span>List<a href="../../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>, arg<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<span class="delimiter">(</span>pre, <a href="../Definitions.scala.html#442303" title="UnCurry.this.global.Type" id="553312">RepeatedParamClass</a>, arg <a title="UnCurry.this.global.Type" id="553299">::</a> <a href="../../../collection/immutable/List.scala.html#11552" title="UnCurry.this.global.Type" id="553313">Nil</a><span class="delimiter">)</span> =&gt;
          <a href="#553097" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Definitions.scala.html#442516" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">seqType</a><span class="delimiter">(</span>arg<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<span class="delimiter">(</span>pre, <a href="../Definitions.scala.html#442301" title="UnCurry.this.global.Type" id="553314">JavaRepeatedParamClass</a>, arg <a title="UnCurry.this.global.Type" id="553308">::</a> <a href="../../../collection/immutable/List.scala.html#11552" title="UnCurry.this.global.Type" id="553315">Nil</a><span class="delimiter">)</span> =&gt;
          <a href="#553097" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Definitions.scala.html#442510" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span>
            <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../Types.scala.html#441595" title="(tp: UnCurry.this.global.Type)Boolean">isUnboundedGeneric</a><span class="delimiter">(</span>arg<span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Definitions.scala.html#442179" title="=&gt; UnCurry.this.global.ClassSymbol">ObjectClass</a>.<a href="../Symbols.scala.html#443721" title="=&gt; UnCurry.this.global.Type">tpe</a> <span class="keyword">else</span> arg<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#460996" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><a href="#553318" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#460841" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#553108" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="460999">uncurryType</a> = <a href="#553009" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#441429" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="553009">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="553011">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="553012">tp0</a>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="553018">tp</a> = <a href="#460996" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#553012" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#553018" title="UnCurry.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ClassInfoType<a href="#553063" title="UnCurry.this.global.Type" id="553065" class="delimiter">(</a>parents, decls, clazz<span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="List[UnCurry.this.global.Type]" id="553026">parents1</a> = parents <a href="../../../collection/immutable/List.scala.html#63652" title="(f: UnCurry.this.global.Type =&gt; UnCurry.this.global.Type)List[UnCurry.this.global.Type]">mapConserve</a> <a href="#460997" title="=&gt; UnCurry.this.global.TypeMap">uncurry</a>
          <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#553026" title="List[UnCurry.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> parents<span class="delimiter">)</span> <a href="#553018" title="UnCurry.this.global.Type">tp</a>
          <span class="keyword">else</span> <a href="../Types.scala.html#453477" title="(parents: List[UnCurry.this.global.Type], decls: UnCurry.this.global.Scope, typeSymbol: UnCurry.this.global.Symbol)UnCurry.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#553026" title="List[UnCurry.this.global.Type]">parents1</a>, decls, clazz<span class="delimiter">)</span> // @MAT normalize in decls??
        <span class="keyword">case</span> PolyType<a href="#553063" title="UnCurry.this.global.Type" id="553069" class="delimiter">(</a>_, _<span class="delimiter">)</span> =&gt;
          <a href="../Types.scala.html#460841" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><a href="#553070" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="#553018" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#553070" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type">tp</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** - return symbol's transformed type,
   *  - if symbol is a def parameter with transformed type T, return () =&gt; T
   *
   * @MAT: starting with this phase, the info of every symbol will be normalized
   */
  <span class="keyword">def</span> <a title="(sym: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="461001">transformInfo</a><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="461129">sym</a>: <a href="../Symbols.scala.html#441132" title="UnCurry.this.global.Symbol">Symbol</a>, <a title="UnCurry.this.global.Type" id="461130">tp</a>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#441242" title="UnCurry.this.global.Type">Type</a> =
    <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#461129" title="UnCurry.this.global.Symbol">sym</a>.<a href="../Symbols.scala.html#443230" title="=&gt; Boolean">isType</a><span class="delimiter">)</span> <a href="../Types.scala.html#460839" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurryType</a><span class="delimiter">(</span><a href="#461130" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../Types.scala.html#460839" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurry</a><span class="delimiter">(</span><a href="#461130" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
<span title="Object" class="delimiter">}</span>
        </pre>
    </body>
</html>