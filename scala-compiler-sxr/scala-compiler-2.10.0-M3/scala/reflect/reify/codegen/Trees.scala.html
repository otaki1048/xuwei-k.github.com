<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/reify/codegen/Trees.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect.reify
<span class="keyword">package</span> codegen

<span class="keyword">trait</span> <a title="trait Trees extends Object" id="24245">Trees</a> <a href="../../../Unit.scala.html#2389" title="Unit" class="delimiter">{</a>
  self: Reifier =&gt;

  <span class="keyword">import</span> <a href="../Reifier.scala.html#563316" title="=&gt; scala.tools.nsc.Global">mirror</a>._
  <span class="keyword">import</span> <a href="../../internal/Definitions.scala.html#441641" title="Trees.this.mirror.definitions.type">definitions</a>._
  <span class="keyword">import</span> <a href="../../../tools/nsc/ast/Trees.scala.html#559838" title="Trees.this.mirror.treeInfo.type">treeInfo</a>._
  <span class="keyword">import</span> scala.reflect.api.Modifier

  // unfortunately, these are necessary to reify AnnotatedTypes
  // I'd gladly got rid of them, but I don't fancy making a metaprogramming API that doesn't work with annotated types
  <span class="keyword">var</span> <a title="Boolean" id="563408">reifyTreeSymbols</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">var</span> <a title="Boolean" id="563411">reifyTreeTypes</a> = <span title="Boolean(false)" class="keyword">false</span>

  /**
   *  Reify a tree.
   *  For internal use only, use ``reified'' instead.
   */
  <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563413">reifyTree</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571674">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <span class="delimiter">{</span>
    <a href="../../../tools/nsc/Global.scala.html#559533" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>, <span title="String(&quot;tree is null&quot;)" class="string">&quot;tree is null&quot;</span><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../internal/Trees.scala.html#441814" title="implicit scala.reflect.internal.Trees.TreeOps : (tree: Trees.this.mirror.Tree)Trees.this.mirror.TreeOps">tree</a>.<a href="../../internal/Trees.scala.html#443953" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span>
      <a href="../Errors.scala.html#563289" title="(reifee: Any)Nothing">CannotReifyErroneousReifee</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Trees.this.mirror.Tree" id="571675">splicedTree</a> = <a href="#563415" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">spliceTree</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#571675" title="Trees.this.mirror.Tree">splicedTree</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../api/Trees.scala.html#23577" title="Trees.this.mirror.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="#571675" title="Trees.this.mirror.Tree">splicedTree</a>

    // the idea behind the new reincarnation of reifier is a simple maxim:
    //
    //   never call ``reifyType'' to reify a tree
    //
    // this works because the stuff we are reifying was once represented with trees only
    // and lexical scope information can be fully captured by reifying symbols
    //
    // to enable this idyll, we work hard in the ``Reshape'' phase
    // which replaces all types with equivalent trees and works around non-idempotencies of the typechecker
    //
    // why bother? because this brings method to the madness
    // the first prototype of reification reified all types and symbols for all trees =&gt; this quickly became unyieldy
    // the second prototype reified external types, but avoided reifying local ones =&gt; this created an ugly irregularity
    // current approach is uniform and compact
    <span class="keyword">var</span> <a title="Trees.this.mirror.Tree" id="571676">rtree</a> = <a href="#571674" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../Reifier.scala.html#563316" title="=&gt; scala.tools.nsc.Global">mirror</a>.<a href="../../api/Trees.scala.html#23577" title="Trees.this.mirror.Tree" id="571837">EmptyTree</a> =&gt;
        <a href="Util.scala.html#563452" title="(x: Product)Trees.this.mirror.Tree">reifyMirrorObject</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../api/Trees.scala.html#23577" title="Trees.this.mirror.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../Reifier.scala.html#563316" title="=&gt; scala.tools.nsc.Global">mirror</a>.<a href="../../internal/Trees.scala.html#441819" title="Trees.this.mirror.Tree" id="571838">emptyValDef</a> =&gt;
        <a href="Util.scala.html#563454" title="(name: String)Trees.this.mirror.Tree">mirrorSelect</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#441748" title="implicit scala.reflect.internal.StdNames.lowerTermNames : (n: Trees.this.mirror.TermName)String">emptyValDef</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#504676" title="Option[(Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.TermName, Trees.this.mirror.treeInfo.global.Tree, Long, String)]" id="571845">FreeDef</a><span class="delimiter">(</span>_, _, _, _, _<span class="delimiter">)</span> =&gt;
        <a href="#563418" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyNestedFreeDef</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505243" title="Option[(Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.TermName)]" id="571847">FreeRef</a><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
        <a href="#563419" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyNestedFreeRef</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505549" title="Option[Trees.this.mirror.treeInfo.global.Tree]" id="571849">BoundTerm</a><span class="delimiter">(</span>tree<span class="delimiter">)</span> =&gt;
        <a href="#563416" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyBoundTerm</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a>tree<span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505579" title="Option[Trees.this.mirror.treeInfo.global.Tree]" id="571851">BoundType</a><span class="delimiter">(</span>tree<span class="delimiter">)</span> =&gt;
        <a href="#563417" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyBoundType</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a>tree<span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505439" title="Option[(Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree)]" id="571853">NestedExpr</a><span class="delimiter">(</span>_, _, _<span class="delimiter">)</span> =&gt;
        <a href="#563420" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyNestedExpr</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> Literal<a href="#571814" title="Trees.this.mirror.Tree" id="571833" class="delimiter">(</a>const @ Constant<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        // [Eugene] was necessary when we reified erasures as normalized tycons
        // now, when we do existentialAbstraction on normalizations, everything works great
        // todo. find an explanation
//        if (const.tag == ClazzTag) {
////          def preprocess(tpe: Type): Type = tpe.typeSymbol match {
////            case ArrayClass =&gt; appliedType(ArrayClass, preprocess(tpe.typeArgs.head))
////            case _ =&gt; tpe.typeConstructor
////          }
////          val tpe = preprocess(const.typeValue)
//          val tpe = const.typeValue
//          var reified = reify(tpe)
//          reified = mirrorCall(nme.Literal, mirrorCall(nme.Constant, reified))
////          val skolems = ClassClass.typeParams map (_ =&gt; newTypeName(typer.context.unit.fresh.newName(&quot;_$&quot;)))
////          var existential = mirrorCall(nme.AppliedTypeTree, mirrorCall(nme.TypeTree, reify(ClassClass.typeConstructor)), mkList(skolems map (skolem =&gt; mirrorCall(nme.Ident, reify(skolem)))))
////          existential = mirrorCall(nme.ExistentialTypeTree, existential, reify(skolems map (skolem =&gt; TypeDef(Modifiers(Set(Modifier.deferred: Modifier)), skolem, Nil, TypeBoundsTree(Ident(NothingClass) setType NothingClass.tpe, Ident(AnyClass) setType AnyClass.tpe)))))
////          reified = mirrorCall(nme.TypeApply, mirrorCall(nme.Select, reified, reify(nme.asInstanceOf_)), mkList(List(existential)))
//          // why is this required??
////          reified = mirrorCall(nme.TypeApply, mirrorCall(nme.Select, reified, reify(nme.asInstanceOf_)), mkList(List(mirrorCall(nme.TypeTree, reify(appliedType(ClassClass.tpe, List(AnyClass.tpe)))))))
//          reified
//        } else {
//          mirrorCall(nme.Literal, reifyProduct(const))
//        }
        <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446383" title="=&gt; Trees.this.mirror.nme.NameType">Literal</a>, <a href="Util.scala.html#563449" title="(x: Product)Trees.this.mirror.Tree">reifyProduct</a><span class="delimiter">(</span>const<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> Import<a href="#571814" title="Trees.this.mirror.Tree" id="571836" class="delimiter">(</a>expr, selectors<span class="delimiter">)</span> =&gt;
        <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446381" title="=&gt; Trees.this.mirror.nme.NameType">Import</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>expr<span class="delimiter">)</span>, <a href="Util.scala.html#563460" title="(args: List[Trees.this.mirror.Tree])Trees.this.mirror.Tree">mkList</a><span class="delimiter">(</span>selectors <a href="../../../collection/TraversableLike.scala.html#58971" title="(f: Trees.this.mirror.ImportSelector =&gt; Trees.this.mirror.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Trees.this.mirror.ImportSelector],Trees.this.mirror.Tree,List[Trees.this.mirror.Tree]])List[Trees.this.mirror.Tree]">map</a> <a href="Util.scala.html#563449" title="(x: Product)Trees.this.mirror.Tree">reifyProduct</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <a href="Util.scala.html#563449" title="(x: Product)Trees.this.mirror.Tree">reifyProduct</a><a href="#571839" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    // usually we don't reify symbols/types, because they can be re-inferred during subsequent reflective compilation
    // however, reification of AnnotatedTypes is special. see ``reifyType'' to find out why.
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#563408" title="=&gt; Boolean">reifyTreeSymbols</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#571674" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425067" title="=&gt; Boolean">hasSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;reifying symbol %s for tree %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425064" title="=&gt; Trees.this.mirror.Symbol">symbol</a>, <a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#571676" title="Trees.this.mirror.Tree">rtree</a> = <a href="../../api/Trees.scala.html#427174" title="(fun: Trees.this.mirror.Tree, args: List[Trees.this.mirror.Tree])Trees.this.mirror.Apply">Apply</a><span class="delimiter">(</span><a href="../../api/Trees.scala.html#427925" title="(qualifier: Trees.this.mirror.Tree, name: Trees.this.mirror.Name)Trees.this.mirror.Select">Select</a><span class="delimiter">(</span><a href="#571676" title="Trees.this.mirror.Tree">rtree</a>, <a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446673" title="=&gt; Trees.this.mirror.nme.NameType">setSymbol</a><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.Tree*)List[Trees.this.mirror.Tree]">List</a><span class="delimiter">(</span><a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425064" title="=&gt; Trees.this.mirror.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#563411" title="=&gt; Boolean">reifyTreeTypes</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#571674" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;reifying type %s for tree %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.Type">tpe</a>, <a href="#571674" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#571676" title="Trees.this.mirror.Tree">rtree</a> = <a href="../../api/Trees.scala.html#427174" title="(fun: Trees.this.mirror.Tree, args: List[Trees.this.mirror.Tree])Trees.this.mirror.Apply">Apply</a><span class="delimiter">(</span><a href="../../api/Trees.scala.html#427925" title="(qualifier: Trees.this.mirror.Tree, name: Trees.this.mirror.Name)Trees.this.mirror.Select">Select</a><span class="delimiter">(</span><a href="#571676" title="Trees.this.mirror.Tree">rtree</a>, <a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446675" title="=&gt; Trees.this.mirror.nme.NameType">setType</a><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.Tree*)List[Trees.this.mirror.Tree]">List</a><span class="delimiter">(</span><a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#571674" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#571676" title="Trees.this.mirror.Tree">rtree</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(m: Trees.this.mirror.Modifiers)Trees.this.mirror.Tree" id="563414">reifyModifiers</a><span class="delimiter">(</span><a title="Trees.this.mirror.Modifiers" id="571978">m</a>: mirror.<a href="../../internal/Trees.scala.html#441805" title="Trees.this.mirror.Modifiers">Modifiers</a><span class="delimiter">)</span> =
    <a href="Util.scala.html#563456" title="(name: String, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><span title="String(&quot;modifiersFromInternalFlags&quot;)" class="string">&quot;modifiersFromInternalFlags&quot;</span>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#571978" title="Trees.this.mirror.Modifiers">m</a>.<a href="../../internal/Trees.scala.html#471497" title="=&gt; Long">flags</a><span class="delimiter">)</span>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#571978" title="Trees.this.mirror.Modifiers">m</a>.<a href="../../internal/Trees.scala.html#471499" title="=&gt; Trees.this.mirror.Name">privateWithin</a><span class="delimiter">)</span>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#571978" title="Trees.this.mirror.Modifiers">m</a>.<a href="../../internal/Trees.scala.html#471501" title="=&gt; List[Trees.this.mirror.Tree]">annotations</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563415">spliceTree</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571694">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <span class="delimiter">{</span>
    <a href="#571694" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#504195" title="Option[Trees.this.mirror.treeInfo.global.Tree]" id="572370">EvalSplice</a><span class="delimiter">(</span>splicee<span class="delimiter">)</span> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;splicing eval &quot;)" class="string">&quot;splicing eval &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#571694" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>

        // see ``Metalevels'' for more info about metalevel breaches
        // and about how we deal with splices that contain them
        <span title="Trees.this.mirror.Tree" class="keyword">if</span> <span class="delimiter">(</span>splicee <a href="../../api/Trees.scala.html#425081" title="(p: Trees.this.mirror.treeInfo.global.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="Trees.this.mirror.treeInfo.global.Tree" id="571993">sub</a> =&gt; <a href="#571993" title="Trees.this.mirror.treeInfo.global.Tree">sub</a>.<a href="../../api/Trees.scala.html#425067" title="=&gt; Boolean">hasSymbol</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#571993" title="Trees.this.mirror.treeInfo.global.Tree">sub</a>.<a href="../../api/Trees.scala.html#425064" title="=&gt; Trees.this.mirror.treeInfo.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../internal/Symbols.scala.html#441152" title="=&gt; Trees.this.mirror.NoSymbol">NoSymbol</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#571993" title="Trees.this.mirror.treeInfo.global.Tree">sub</a>.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563562" title="=&gt; Int">metalevel</a> <a href="../../../Int.scala.html#57919" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;splicing has failed: cannot splice when facing a metalevel breach&quot;)" class="string">&quot;splicing has failed: cannot splice when facing a metalevel breach&quot;</span><span class="delimiter">)</span>
          <a href="../../api/Trees.scala.html#23577" title="Trees.this.mirror.EmptyTree.type">EmptyTree</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;splicing has succeeded&quot;)" class="string">&quot;splicing has succeeded&quot;</span><span class="delimiter">)</span>
          <span class="keyword">var</span> <a title="Trees.this.mirror.Select" id="572007">splice</a> = <a href="../../api/Trees.scala.html#427925" title="(qualifier: Trees.this.mirror.Tree, name: Trees.this.mirror.Name)Trees.this.mirror.Select">Select</a><span class="delimiter">(</span>splicee, <a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446705" title="=&gt; Trees.this.mirror.nme.NameType">tree</a><span class="delimiter">)</span>
          <a href="#572007" title="Trees.this.mirror.Select">splice</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#504512" title="Option[(Trees.this.mirror.treeInfo.global.Tree, List[Trees.this.mirror.treeInfo.global.Tree], Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree)]" id="572356">InlinedTreeSplice</a><span class="delimiter">(</span>_, inlinedSymbolTable, tree, _<span class="delimiter">)</span> =&gt;
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;inlining the splicee&quot;)" class="string">&quot;inlining the splicee&quot;</span><span class="delimiter">)</span>
              // all free vars local to the enclosing reifee should've already been inlined by ``Metalevels''
              inlinedSymbolTable <a href="../../../collection/TraversableLike.scala.html#58983" title="(pf: PartialFunction[Trees.this.mirror.treeInfo.global.Tree,Unit])(implicit bf: scala.collection.generic.CanBuildFrom[List[Trees.this.mirror.treeInfo.global.Tree],Unit,List[Unit]])List[Unit]">collect</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Trees.this.mirror.treeInfo.global.Tree,Unit] with Serializable" id="572075" class="delimiter">{</a> <span class="keyword">case</span> freedef @ <a href="../../internal/TreeInfo.scala.html#504676" title="Option[(Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.TermName, Trees.this.mirror.treeInfo.global.Tree, Long, String)]" id="572096">FreeDef</a><span class="delimiter">(</span>_, _, binding, _, _<span class="delimiter">)</span> <span class="keyword">if</span> binding.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a> =&gt; <a href="../../../tools/nsc/Global.scala.html#559533" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><a href="#572069" title="(x: B1)B1" class="delimiter">(</a><span title="Boolean(false)" class="keyword">false</span>, freedef<span class="delimiter">)</span> <span class="delimiter">}</span>
              <a href="Symbols.scala.html#563360" title="(newSymbolTable: List[Trees.this.mirror.Tree])Unit">symbolTable</a> <a href="../../../collection/immutable/List.scala.html#63655" title="(that: scala.collection.GenTraversableOnce[Trees.this.mirror.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Trees.this.mirror.Tree],Trees.this.mirror.Tree,List[Trees.this.mirror.Tree]])List[Trees.this.mirror.Tree]">++=</a> inlinedSymbolTable
              tree
            <span class="keyword">case</span> tree =&gt;
              // we need to preserve types of exprs, because oftentimes they cannot be inferred later
              // this circumvents regular reification scheme, therefore we go the extra mile here
              <a href="#572240" title="Trees.this.mirror.Transformer" class="keyword">new</a> <a href="../../../tools/nsc/ast/Trees.scala.html#559848" title="anonymous class $anon extends Trees.this.mirror.Transformer" id="572240">Transformer</a> <span class="delimiter">{</span>
                <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="572242">transform</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="572243">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span> = <a href="#572240" title="Trees.this.mirror.Transformer" class="keyword">super</a>.<a href="../../api/Trees.scala.html#438847" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">transform</a><span class="delimiter">(</span><a href="#572243" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505439" title="Option[(Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree)]" id="572338">NestedExpr</a><span class="delimiter">(</span>factory, tree, typetag<span class="delimiter">)</span> =&gt;
                    <span class="keyword">val</span> <a title="Trees.this.mirror.TypeApply" id="572252">typedFactory</a> = <a href="../../api/Trees.scala.html#429629" title="(fun: Trees.this.mirror.Tree, args: List[Trees.this.mirror.Tree])Trees.this.mirror.TypeApply">TypeApply</a><span class="delimiter">(</span>factory, <a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.TypeTree*)List[Trees.this.mirror.TypeTree]">List</a><span class="delimiter">(</span><a href="../../api/Trees.scala.html#23746" title="(tp: Trees.this.mirror.Type)Trees.this.mirror.TypeTree">TypeTree</a><span class="delimiter">(</span>typetag.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.treeInfo.global.Type">tpe</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#76165" title="(n: Int)Trees.this.mirror.treeInfo.global.Type">typeArgs</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <a href="../../api/Trees.scala.html#427174" title="(fun: Trees.this.mirror.Tree, args: List[Trees.this.mirror.Tree])Trees.this.mirror.Apply">Apply</a><span class="delimiter">(</span><a href="../../api/Trees.scala.html#427174" title="(fun: Trees.this.mirror.Tree, args: List[Trees.this.mirror.Tree])Trees.this.mirror.Apply">Apply</a><span class="delimiter">(</span><a href="#572252" title="Trees.this.mirror.TypeApply">typedFactory</a>, <a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.treeInfo.global.Tree*)List[Trees.this.mirror.treeInfo.global.Tree]">List</a><span class="delimiter">(</span>tree<span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.treeInfo.global.Tree*)List[Trees.this.mirror.treeInfo.global.Tree]">List</a><span class="delimiter">(</span>typetag<span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> _ =&gt;
                    <a href="#572330" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree">tree</a>
                <span class="delimiter">}</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>.<a href="#572242" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">transform</a><a href="#572349" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a>tree<span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#504222" title="Option[Trees.this.mirror.treeInfo.global.Tree]" id="572372">ValueSplice</a><span class="delimiter">(</span>splicee<span class="delimiter">)</span> =&gt;
        // todo. implement this
        <a href="#572366" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree">???</a>
      <span class="keyword">case</span> _ =&gt;
        <a href="#572366" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree">EmptyTree</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563416">reifyBoundTerm</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571717">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <a href="#571717" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> tree @ This<a href="#572519" title="Boolean" id="572522" class="delimiter">(</a>_<span class="delimiter">)</span> <span class="keyword">if</span> tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../internal/Symbols.scala.html#441152" title="=&gt; Trees.this.mirror.NoSymbol">NoSymbol</a> =&gt;
      <a href="#572543" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><span title="String(&quot;unexpected: bound term that doesn\'t have a symbol: &quot;)" class="string">&quot;unexpected: bound term that doesn't have a symbol: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../api/TreePrinters.scala.html#23837" title="(tree: Trees.this.mirror.Tree)String">showRaw</a><span class="delimiter">(</span>tree<span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> tree @ This<span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a>.<a href="../../internal/Symbols.scala.html#443231" title="=&gt; Boolean">isClass</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a>.<a href="../../internal/Symbols.scala.html#443245" title="=&gt; Boolean">isModuleClass</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a>tree.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a> =&gt;
      <span class="keyword">val</span> <a title="Trees.this.mirror.Symbol" id="572397">sym</a> = tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;This for %s, reified as freeVar&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#572397" title="Trees.this.mirror.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;Free: &quot;)" class="string">&quot;Free: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#572397" title="Trees.this.mirror.Symbol">sym</a><span class="delimiter">)</span>
      <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a>, <a href="Symbols.scala.html#563348" title="(sym: Trees.this.mirror.Symbol, value: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyFreeTerm</a><span class="delimiter">(</span><a href="#572397" title="Trees.this.mirror.Symbol">sym</a>, <a href="../../internal/Trees.scala.html#441838" title="(sym: Trees.this.mirror.Symbol)Trees.this.mirror.Tree">This</a><span class="delimiter">(</span><a href="#572397" title="Trees.this.mirror.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> tree @ This<span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a>tree.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;This for %s, reified as This&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446409" title="=&gt; Trees.this.mirror.nme.NameType">This</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> tree @ This<span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> tree.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a> =&gt;
      <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><a href="#572543" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446409" title="=&gt; Trees.this.mirror.nme.NameType">This</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#428048" title="=&gt; Trees.this.mirror.TypeName">qual</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> tree @ Ident<a href="#572519" title="Boolean" id="572534" class="delimiter">(</a>_<span class="delimiter">)</span> <span class="keyword">if</span> tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../internal/Symbols.scala.html#441152" title="=&gt; Trees.this.mirror.NoSymbol">NoSymbol</a> =&gt;
      // this sometimes happens, e.g. for binds that don't have a body
      // or for untyped code generated during previous phases
      // (see a comment in Reifiers about the latter, starting with &quot;why do we resetAllAttrs?&quot;)
      <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><a href="#572543" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427673" title="=&gt; Trees.this.mirror.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> tree @ Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a>tree.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a> =&gt;
      <a href="#572543" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="keyword">if</a> <span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a>.<a href="../../internal/Symbols.scala.html#443276" title="=&gt; Boolean">isVariable</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a>.<a href="../../internal/Symbols.scala.html#443379" title="=&gt; Trees.this.mirror.Symbol">owner</a>.<a href="../../internal/Symbols.scala.html#443229" title="=&gt; Boolean">isTerm</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../internal/CapturedVariables.scala.html#441939" title="(vble: Trees.this.mirror.Symbol)Unit">captureVariable</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a><span class="delimiter">)</span> // Note order dependency: captureVariable needs to come before reification here.
        <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446405" title="=&gt; Trees.this.mirror.nme.NameType">Select</a>, <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446499" title="=&gt; Trees.this.mirror.nme.NameType">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427232" title="=&gt; Trees.this.mirror.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> tree @ Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> tree.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a> =&gt;
      <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><a href="#572543" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>tree.<a href="../../api/Trees.scala.html#427673" title="=&gt; Trees.this.mirror.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _ =&gt;
      <a href="#572543" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;internal error: %s (%s, %s) is not supported&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#571717" title="Trees.this.mirror.Tree">tree</a>, <a href="#571717" title="Trees.this.mirror.Tree">tree</a>.<a href="../../../Product.scala.html#23431" title="=&gt; String">productPrefix</a>, <a href="#571717" title="Trees.this.mirror.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563417">reifyBoundType</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571722">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="572554">reifyBoundType</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="572555">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#572555" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><span title="String(&quot;unexpected: bound type that doesn\'t have a tpe: &quot;)" class="string">&quot;unexpected: bound type that doesn't have a tpe: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../api/TreePrinters.scala.html#23837" title="(tree: Trees.this.mirror.Tree)String">showRaw</a><span class="delimiter">(</span><a href="#572555" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span title="Trees.this.mirror.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#572555" title="Trees.this.mirror.Tree">tree</a>.<a href="../phases/Calculate.scala.html#563297" title="implicit scala.reflect.reify.phases.Calculate.RichSymbol : (sym: Trees.this.mirror.Symbol)Trees.this.RichSymbol">symbol</a>.<a href="../phases/Calculate.scala.html#563563" title="=&gt; Boolean">isLocalToReifee</a><span class="delimiter">)</span>
        <a href="Util.scala.html#563449" title="(x: Product)Trees.this.mirror.Tree">reifyProduct</a><span class="delimiter">(</span><a href="#572555" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Trees.this.mirror.Symbol" id="572571">sym0</a> = <a href="#572555" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425064" title="=&gt; Trees.this.mirror.Symbol">symbol</a>
        <span class="keyword">val</span> <a title="Trees.this.mirror.Symbol" id="572572">sym</a> = <a href="#572571" title="Trees.this.mirror.Symbol">sym0</a>.<a href="../../internal/Symbols.scala.html#443376" title="=&gt; Trees.this.mirror.Symbol">dealias</a>
        <span class="keyword">val</span> <a title="Trees.this.mirror.Type" id="572573">tpe0</a> = <a href="#572555" title="Trees.this.mirror.Tree">tree</a>.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.Type">tpe</a>
        <span class="keyword">val</span> <a title="Trees.this.mirror.Type" id="572574">tpe</a> = <a href="#572573" title="Trees.this.mirror.Type">tpe0</a>.<a href="../../internal/Types.scala.html#442018" title="=&gt; Trees.this.mirror.Type">dealias</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;reifying bound type %s (underlying type is %s, dealiased is %s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#572571" title="Trees.this.mirror.Symbol">sym0</a>, <a href="#572573" title="Trees.this.mirror.Type">tpe0</a>, <a href="#572574" title="Trees.this.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span title="Trees.this.mirror.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#572574" title="Trees.this.mirror.Type">tpe</a>.<a href="../../internal/Types.scala.html#441969" title="=&gt; Boolean">isSpliceable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Trees.this.mirror.Tree" id="572580">spliced</a> = <a href="Types.scala.html#563392" title="(tpe: Trees.this.mirror.Type)Trees.this.mirror.Tree">spliceType</a><span class="delimiter">(</span><a href="#572574" title="Trees.this.mirror.Type">tpe</a><span class="delimiter">)</span>
          <span title="Trees.this.mirror.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#572580" title="Trees.this.mirror.Tree">spliced</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../api/Trees.scala.html#23577" title="Trees.this.mirror.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;splicing failed: reify as is&quot;)" class="string">&quot;splicing failed: reify as is&quot;</span><span class="delimiter">)</span>
            <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446421" title="=&gt; Trees.this.mirror.nme.NameType">TypeTree</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#572574" title="Trees.this.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#572580" title="Trees.this.mirror.Tree">spliced</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505331" title="Option[Trees.this.mirror.treeInfo.global.TermName]" id="572628">TypeRefToFreeType</a><span class="delimiter">(</span>freeType<span class="delimiter">)</span> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;splicing returned a free type: &quot;)" class="string">&quot;splicing returned a free type: &quot;</span> <span title="(x$1: Any)String">+</span> freeType<span class="delimiter">)</span>
                <a href="../../api/Trees.scala.html#427669" title="(name: Trees.this.mirror.Name)Trees.this.mirror.Ident">Ident</a><span class="delimiter">(</span>freeType<span class="delimiter">)</span>
              <span class="keyword">case</span> _ =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;splicing succeeded: &quot;)" class="string">&quot;splicing succeeded: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#572580" title="Trees.this.mirror.Tree">spliced</a><span class="delimiter">)</span>
                <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446421" title="=&gt; Trees.this.mirror.nme.NameType">TypeTree</a>, <a href="#572580" title="Trees.this.mirror.Tree">spliced</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Trees.this.mirror.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#572572" title="Trees.this.mirror.Symbol">sym</a>.<a href="../../internal/Symbols.scala.html#443375" title="=&gt; Boolean">isLocatable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;tpe is locatable: reify as Ident(%s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#572572" title="Trees.this.mirror.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#572572" title="Trees.this.mirror.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;tpe is an alias, but not a locatable: reify as TypeTree(%s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#572574" title="Trees.this.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446421" title="=&gt; Trees.this.mirror.nme.NameType">TypeTree</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="#572574" title="Trees.this.mirror.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#571722" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Select<a href="#572671" title="Trees.this.mirror.Tree" id="572675" class="delimiter">(</a>_, _<span class="delimiter">)</span> =&gt;
        <a href="#572554" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyBoundType</a><a href="#572683" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571722" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> SelectFromTypeTree<a href="#572671" title="Trees.this.mirror.Tree" id="572679" class="delimiter">(</a>_, _<span class="delimiter">)</span> =&gt;
        <a href="#572554" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyBoundType</a><a href="#572683" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571722" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> Ident<a href="#572671" title="Trees.this.mirror.Tree" id="572682" class="delimiter">(</a>_<span class="delimiter">)</span> =&gt;
        <a href="#572554" title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree">reifyBoundType</a><a href="#572683" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="delimiter">(</a><a href="#571722" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <a href="#572683" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;internal error: %s (%s, %s) is not supported&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#571722" title="Trees.this.mirror.Tree">tree</a>, <a href="#571722" title="Trees.this.mirror.Tree">tree</a>.<a href="../../../Product.scala.html#23431" title="=&gt; String">productPrefix</a>, <a href="#571722" title="Trees.this.mirror.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563418">reifyNestedFreeDef</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571708">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;nested free def: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../api/TreePrinters.scala.html#23837" title="(tree: Trees.this.mirror.Tree)String">showRaw</a><span class="delimiter">(</span><a href="#571708" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="Util.scala.html#563449" title="(x: Product)Trees.this.mirror.Tree">reifyProduct</a><span class="delimiter">(</span><a href="#571708" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563419">reifyNestedFreeRef</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571712">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <a href="#571712" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> Apply<a href="#572758" title="Trees.this.mirror.Tree" id="572762" class="delimiter">(</a>Select<a title="Trees.this.mirror.Tree" id="572764" class="delimiter">(</a>mrRef @ Ident<a title="Trees.this.mirror.Tree" id="572767" class="delimiter">(</a>_<span class="delimiter">)</span>, ident<span class="delimiter">)</span>, <a href="../../../collection/generic/SeqFactory.scala.html#60838" title="Option[List[Trees.this.mirror.Tree]]" id="572787">List</a><span class="delimiter">(</span>Ident<a title="Trees.this.mirror.Tree" id="572773" class="delimiter">(</a>name: TermName<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> ident <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446379" title="=&gt; Trees.this.mirror.nme.NameType">Ident</a> <a href="../../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> name.<a href="../../internal/Names.scala.html#444147" title="(prefix: Trees.this.mirror.Name)Boolean">startsWith</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446187" title="=&gt; Trees.this.mirror.nme.NameType">MIRROR_FREE_PREFIX</a><span class="delimiter">)</span> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;nested free ref: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../api/TreePrinters.scala.html#23837" title="(tree: Trees.this.mirror.Tree)String">showRaw</a><span class="delimiter">(</span><a href="#571712" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="Util.scala.html#563449" title="(x: Product)Trees.this.mirror.Tree">reifyProduct</a><span class="delimiter">(</span><a href="#571712" title="Trees.this.mirror.Tree">tree</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _ =&gt;
      <a href="#572776" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;internal error: %s (%s, %s) is not supported&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#571712" title="Trees.this.mirror.Tree">tree</a>, <a href="#571712" title="Trees.this.mirror.Tree">tree</a>.<a href="../../../Product.scala.html#23431" title="=&gt; String">productPrefix</a>, <a href="#571712" title="Trees.this.mirror.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Trees.this.mirror.Tree)Trees.this.mirror.Tree" id="563420">reifyNestedExpr</a><span class="delimiter">(</span><a title="Trees.this.mirror.Tree" id="571726">tree</a>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../api/Trees.scala.html#23570" title="Trees.this.mirror.Tree">Tree</a> = <a href="#571726" title="Trees.this.mirror.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../../internal/TreeInfo.scala.html#505439" title="Option[(Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree, Trees.this.mirror.treeInfo.global.Tree)]" id="572881">NestedExpr</a><span class="delimiter">(</span>factory, tree, typetag<span class="delimiter">)</span> =&gt;
      // we need to preserve types of exprs, because oftentimes they cannot be inferred later
      // this circumvents regular reification scheme, therefore we go through this crazy dance
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Util.scala.html#563438" title="=&gt; Boolean">reifyDebug</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;nested expr: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../api/TreePrinters.scala.html#23837" title="(tree: Trees.this.mirror.Tree)String">showRaw</a><span class="delimiter">(</span>tree<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Trees.this.mirror.Tree" id="572798">rtype</a> = <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446421" title="=&gt; Trees.this.mirror.nme.NameType">TypeTree</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>typetag.<a href="../../api/Trees.scala.html#425060" title="=&gt; Trees.this.mirror.treeInfo.global.Type">tpe</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#76165" title="(n: Int)Trees.this.mirror.treeInfo.global.Type">typeArgs</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Trees.this.mirror.Tree" id="572799">rfactory</a> = <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446417" title="=&gt; Trees.this.mirror.nme.NameType">TypeApply</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span>factory<span class="delimiter">)</span>, <a href="Util.scala.html#563460" title="(args: List[Trees.this.mirror.Tree])Trees.this.mirror.Tree">mkList</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.Tree*)List[Trees.this.mirror.Tree]">List</a><span class="delimiter">(</span><a href="#572798" title="Trees.this.mirror.Tree">rtype</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Trees.this.mirror.Tree" id="572800">rexpr</a> = <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446363" title="=&gt; Trees.this.mirror.nme.NameType">Apply</a>, <a href="#572799" title="Trees.this.mirror.Tree">rfactory</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.treeInfo.global.Tree*)List[Trees.this.mirror.treeInfo.global.Tree]">List</a><span class="delimiter">(</span>tree<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Trees.this.mirror.Tree" id="572801">rwrapped</a> = <a href="Util.scala.html#563455" title="(name: Trees.this.mirror.TermName, args: Trees.this.mirror.Tree*)Trees.this.mirror.Tree">mirrorCall</a><span class="delimiter">(</span><a href="../../internal/StdNames.scala.html#441764" title="Trees.this.mirror.nme.type">nme</a>.<a href="../../internal/StdNames.scala.html#446363" title="=&gt; Trees.this.mirror.nme.NameType">Apply</a>, <a href="#572800" title="Trees.this.mirror.Tree">rexpr</a>, <a href="../phases/Reify.scala.html#563374" title="(reifee: Any)Trees.this.mirror.Tree">reify</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#63291" title="(xs: Trees.this.mirror.treeInfo.global.Tree*)List[Trees.this.mirror.treeInfo.global.Tree]">List</a><span class="delimiter">(</span>typetag<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#572801" title="Trees.this.mirror.Tree">rwrapped</a>
    <span class="keyword">case</span> _ =&gt;
      <a href="#572872" title="(x: Trees.this.mirror.Tree)Trees.this.mirror.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;internal error: %s (%s, %s) is not supported&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#571726" title="Trees.this.mirror.Tree">tree</a>, <a href="#571726" title="Trees.this.mirror.Tree">tree</a>.<a href="../../../Product.scala.html#23431" title="=&gt; String">productPrefix</a>, <a href="#571726" title="Trees.this.mirror.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>
        </pre>
    </body>
</html>