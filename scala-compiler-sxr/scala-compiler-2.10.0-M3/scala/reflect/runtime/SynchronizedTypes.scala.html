<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/runtime/SynchronizedTypes.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect
<span class="keyword">package</span> runtime

/** This trait overrides methods in reflect.internal, bracketing
 *  them in synchronized { ... } to make them thread-safe
 */
<span class="keyword">trait</span> <a title="trait SynchronizedTypes extends Object with scala.reflect.internal.Types" id="24627">SynchronizedTypes</a> <a href="../../Unit.scala.html#2389" title="Unit" class="keyword">extends</a> internal.<a href="../internal/Types.scala.html#19179" title="scala.reflect.internal.Types">Types</a> <span class="delimiter">{</span> self: SymbolTable =&gt;

  // No sharing of map objects:
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; SynchronizedTypes.this.CommonOwnerMap" id="576026">commonOwnerMap</a> = <span title="SynchronizedTypes.this.CommonOwnerMap" class="keyword">new</span> <a href="../internal/Types.scala.html#441474" title="SynchronizedTypes.this.CommonOwnerMap">CommonOwnerMap</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Object" id="576027">uniqueLock</a> = <span title="Object" class="keyword">new</span> <span title="Object">Object</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[T &lt;: SynchronizedTypes.this.Type](tp: T)T" id="576029">unique</a><span class="delimiter">[</span><a title=" &lt;: SynchronizedTypes.this.Type" id="576031">T</a> &lt;: Type<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="594499">tp</a>: <a href="#576031" title="T">T</a><span class="delimiter">)</span>: <a href="#576031" title="T">T</a> = <a href="#576027" title="=&gt; Object">uniqueLock</a>.<span title="(x$1: T)T">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441408" title="(tp: T)T">unique</a><span class="delimiter">(</span><a href="#594499" title="T">tp</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class SynchronizedUndoLog extends SynchronizedTypes.this.UndoLog" id="576032">SynchronizedUndoLog</a> <a href="#576032" title="SynchronizedTypes.this.SynchronizedUndoLog" class="keyword">extends</a> <a href="../internal/Types.scala.html#441234" title="SynchronizedTypes.this.UndoLog">UndoLog</a> <span class="delimiter">{</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="594516">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> =
      <a href="#576032" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span> <a href="#576032" title="SynchronizedTypes.this.SynchronizedUndoLog" class="keyword">super</a>.<a href="../internal/Types.scala.html#514536" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[T](block: =&gt; T)T" id="594517">undo</a><span class="delimiter">[</span><a title="" id="594519">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="594525">block</a>: =&gt; T<span class="delimiter">)</span>: <a href="#594519" title="T">T</a> =
      <a href="#576032" title="(x$1: T)T">synchronized</a> <span class="delimiter">{</span> <a href="#576032" title="SynchronizedTypes.this.SynchronizedUndoLog" class="keyword">super</a>.<a href="../internal/Types.scala.html#514538" title="(block: =&gt; T)T">undo</a><span class="delimiter">(</span><a href="#594525" title="=&gt; T">block</a><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(block: =&gt; Boolean)Boolean" id="594520">undoUnless</a><span class="delimiter">(</span><a title="=&gt; Boolean" id="594535">block</a>: =&gt; Boolean<span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> =
      <a href="#576032" title="(x$1: Boolean)Boolean">synchronized</a> <span class="delimiter">{</span> <a href="#576032" title="SynchronizedTypes.this.SynchronizedUndoLog" class="keyword">super</a>.<a href="../internal/Types.scala.html#514541" title="(block: =&gt; Boolean)Boolean">undoUnless</a><span class="delimiter">(</span><a href="#594535" title="=&gt; Boolean">block</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; SynchronizedTypes.this.SynchronizedUndoLog" id="576033">newUndoLog</a> = <span title="SynchronizedTypes.this.SynchronizedUndoLog" class="keyword">new</span> <a href="#576032" title="SynchronizedTypes.this.SynchronizedUndoLog">SynchronizedUndoLog</a>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.NonClassTypeRef, clazz: SynchronizedTypes.this.Symbol)SynchronizedTypes.this.Type" id="576034">baseTypeOfNonClassTypeRef</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.NonClassTypeRef" id="594542">tpe</a>: <a href="../internal/Types.scala.html#441304" title="SynchronizedTypes.this.NonClassTypeRef">NonClassTypeRef</a>, <a title="SynchronizedTypes.this.Symbol" id="594543">clazz</a>: <a href="../internal/Symbols.scala.html#441132" title="SynchronizedTypes.this.Symbol">Symbol</a><span class="delimiter">)</span> =
    <a href="#24627" title="(x$1: SynchronizedTypes.this.Type)SynchronizedTypes.this.Type">synchronized</a> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441305" title="(tpe: SynchronizedTypes.this.NonClassTypeRef, clazz: SynchronizedTypes.this.Symbol)SynchronizedTypes.this.Type">baseTypeOfNonClassTypeRef</a><span class="delimiter">(</span><a href="#594542" title="SynchronizedTypes.this.NonClassTypeRef">tpe</a>, <a href="#594543" title="SynchronizedTypes.this.Symbol">clazz</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Object" id="576035">subsametypeLock</a> = <span title="Object" class="keyword">new</span> <span title="Object">Object</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tp1: SynchronizedTypes.this.Type, tp2: SynchronizedTypes.this.Type)Boolean" id="576037">isSameType</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.Type" id="594554">tp1</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a>, <a title="SynchronizedTypes.this.Type" id="594555">tp2</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> =
    <a href="#576035" title="=&gt; Object">subsametypeLock</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441495" title="(tp1: SynchronizedTypes.this.Type, tp2: SynchronizedTypes.this.Type)Boolean">isSameType</a><span class="delimiter">(</span><a href="#594554" title="SynchronizedTypes.this.Type">tp1</a>, <a href="#594555" title="SynchronizedTypes.this.Type">tp2</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tp1: SynchronizedTypes.this.Type, tp2: SynchronizedTypes.this.Type)Boolean" id="576038">isDifferentType</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.Type" id="594565">tp1</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a>, <a title="SynchronizedTypes.this.Type" id="594566">tp2</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> =
    <a href="#576035" title="=&gt; Object">subsametypeLock</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441496" title="(tp1: SynchronizedTypes.this.Type, tp2: SynchronizedTypes.this.Type)Boolean">isDifferentType</a><span class="delimiter">(</span><a href="#594565" title="SynchronizedTypes.this.Type">tp1</a>, <a href="#594566" title="SynchronizedTypes.this.Type">tp2</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tp1: SynchronizedTypes.this.Type, tp2: SynchronizedTypes.this.Type, depth: Int)Boolean" id="576039">isSubType</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.Type" id="594576">tp1</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a>, <a title="SynchronizedTypes.this.Type" id="594577">tp2</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a>, <a title="Int" id="594578">depth</a>: <a href="../../Int.scala.html#508" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> =
    <a href="#576035" title="=&gt; Object">subsametypeLock</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441513" title="(tp1: SynchronizedTypes.this.Type, tp2: SynchronizedTypes.this.Type, depth: Int)Boolean">isSubType</a><span class="delimiter">(</span><a href="#594576" title="SynchronizedTypes.this.Type">tp1</a>, <a href="#594577" title="SynchronizedTypes.this.Type">tp2</a>, <a href="#594578" title="Int">depth</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Object" id="576040">lubglbLock</a> = <span title="Object" class="keyword">new</span> <span title="Object">Object</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ts: List[SynchronizedTypes.this.Type])SynchronizedTypes.this.Type" id="576042">glb</a><span class="delimiter">(</span><a title="List[SynchronizedTypes.this.Type]" id="584527">ts</a>: <a href="../../collection/immutable/List.scala.html#12322" title="List[SynchronizedTypes.this.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a> =
    <a href="#576040" title="=&gt; Object">lubglbLock</a>.<span title="(x$1: SynchronizedTypes.this.Type)SynchronizedTypes.this.Type">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441568" title="(ts: List[SynchronizedTypes.this.Type])SynchronizedTypes.this.Type">glb</a><span class="delimiter">(</span><a href="#584527" title="List[SynchronizedTypes.this.Type]">ts</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ts: List[SynchronizedTypes.this.Type])SynchronizedTypes.this.Type" id="576043">lub</a><span class="delimiter">(</span><a title="List[SynchronizedTypes.this.Type]" id="589994">ts</a>: <a href="../../collection/immutable/List.scala.html#12322" title="List[SynchronizedTypes.this.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a> =
    <a href="#576040" title="=&gt; Object">lubglbLock</a>.<span title="(x$1: SynchronizedTypes.this.Type)SynchronizedTypes.this.Type">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441559" title="(ts: List[SynchronizedTypes.this.Type])SynchronizedTypes.this.Type">lub</a><span class="delimiter">(</span><a href="#589994" title="List[SynchronizedTypes.this.Type]">ts</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Object" id="576044">indentLock</a> = <span title="Object" class="keyword">new</span> <span title="Object">Object</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](op: String, p: (SynchronizedTypes.this.Type, T) =&gt; Boolean, tp1: SynchronizedTypes.this.Type, arg2: T)Boolean" id="576046">explain</a><span class="delimiter">[</span><a title="" id="576048">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="594613">op</a>: <span title="String">String</span>, <a title="(SynchronizedTypes.this.Type, T) =&gt; Boolean" id="594614">p</a>: <span class="delimiter">(</span>Type, T<span class="delimiter">)</span> =&gt; Boolean, <a title="SynchronizedTypes.this.Type" id="594615">tp1</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a>, <a title="T" id="594616">arg2</a>: <a href="#576048" title="T">T</a><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="#576044" title="=&gt; Object">indentLock</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441587" title="(op: String, p: (SynchronizedTypes.this.Type, T) =&gt; Boolean, tp1: SynchronizedTypes.this.Type, arg2: T)Boolean">explain</a><span class="delimiter">(</span><a href="#594613" title="String">op</a>, <a href="#594614" title="(SynchronizedTypes.this.Type, T) =&gt; Boolean">p</a>, <a href="#594615" title="SynchronizedTypes.this.Type">tp1</a>, <a href="#594616" title="T">arg2</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Object" id="576049">toStringLock</a> = <span title="Object" class="keyword">new</span> <span title="Object">Object</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.Type)String" id="576051">typeToString</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.Type" id="594651">tpe</a>: <a href="../internal/Types.scala.html#441242" title="SynchronizedTypes.this.Type">Type</a><span class="delimiter">)</span>: <span title="String">String</span> =
    <a href="#576049" title="=&gt; Object">toStringLock</a>.<span title="(x$1: String)String">synchronized</span><span class="delimiter">(</span><a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441605" title="(tpe: SynchronizedTypes.this.Type)String">typeToString</a><span class="delimiter">(</span><a href="#594651" title="SynchronizedTypes.this.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

  /* The idea of caches is as follows.
   * When in reflexive mode, a cache is either null, or one sentinal
   * value representing undefined or the final defined
   * value. Hence, we can ask in non-synchronized ode whether the cache field
   * is non null and different from the sentinel (if a sentinel exists).
   * If that's true, the cache value is current.
   * Otherwise we arrive in one of the defined... methods listed below
   * which go through all steps in synchronized mode.
   */

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.SingleType)Unit" id="576052">defineUnderlyingOfSingleType</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.SingleType" id="594659">tpe</a>: <a href="../internal/Types.scala.html#441264" title="SynchronizedTypes.this.SingleType">SingleType</a><span class="delimiter">)</span> =
    <a href="#594659" title="SynchronizedTypes.this.SingleType">tpe</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441268" title="(tpe: SynchronizedTypes.this.SingleType)Unit">defineUnderlyingOfSingleType</a><span class="delimiter">(</span><a href="#594659" title="SynchronizedTypes.this.SingleType">tpe</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.CompoundType)Unit" id="576053">defineBaseTypeSeqOfCompoundType</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.CompoundType" id="594668">tpe</a>: <a href="../internal/Types.scala.html#441277" title="SynchronizedTypes.this.CompoundType">CompoundType</a><span class="delimiter">)</span> =
    <a href="#594668" title="SynchronizedTypes.this.CompoundType">tpe</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441278" title="(tpe: SynchronizedTypes.this.CompoundType)Unit">defineBaseTypeSeqOfCompoundType</a><span class="delimiter">(</span><a href="#594668" title="SynchronizedTypes.this.CompoundType">tpe</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.CompoundType)Unit" id="576054">defineBaseClassesOfCompoundType</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.CompoundType" id="594677">tpe</a>: <a href="../internal/Types.scala.html#441277" title="SynchronizedTypes.this.CompoundType">CompoundType</a><span class="delimiter">)</span> =
    <a href="#594677" title="SynchronizedTypes.this.CompoundType">tpe</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441279" title="(tpe: SynchronizedTypes.this.CompoundType)Unit">defineBaseClassesOfCompoundType</a><span class="delimiter">(</span><a href="#594677" title="SynchronizedTypes.this.CompoundType">tpe</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.TypeRef)Unit" id="576055">defineParentsOfTypeRef</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.TypeRef" id="594686">tpe</a>: <a href="../internal/Types.scala.html#441308" title="SynchronizedTypes.this.TypeRef">TypeRef</a><span class="delimiter">)</span> =
    <a href="#594686" title="SynchronizedTypes.this.TypeRef">tpe</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441311" title="(tpe: SynchronizedTypes.this.TypeRef)Unit">defineParentsOfTypeRef</a><span class="delimiter">(</span><a href="#594686" title="SynchronizedTypes.this.TypeRef">tpe</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: SynchronizedTypes.this.TypeRef)Unit" id="576056">defineBaseTypeSeqOfTypeRef</a><span class="delimiter">(</span><a title="SynchronizedTypes.this.TypeRef" id="594695">tpe</a>: <a href="../internal/Types.scala.html#441308" title="SynchronizedTypes.this.TypeRef">TypeRef</a><span class="delimiter">)</span> =
    <a href="#594695" title="SynchronizedTypes.this.TypeRef">tpe</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span> <a href="#24627" title="scala.reflect.runtime.SymbolTable" class="keyword">super</a>.<a href="../internal/Types.scala.html#441312" title="(tpe: SynchronizedTypes.this.TypeRef)Unit">defineBaseTypeSeqOfTypeRef</a><span class="delimiter">(</span><a href="#594695" title="SynchronizedTypes.this.TypeRef">tpe</a><span class="delimiter">)</span> <span class="delimiter">}</span>

<span class="delimiter">}</span>
        </pre>
    </body>
</html>