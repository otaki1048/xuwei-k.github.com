<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/runtime/ToolBoxes.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect
<span class="keyword">package</span> runtime

<span class="keyword">import</span> scala.tools.nsc.reporters._
<span class="keyword">import</span> scala.tools.nsc.ReflectGlobal
<span class="keyword">import</span> scala.tools.nsc.CompilerCommand
<span class="keyword">import</span> scala.tools.nsc.Global
<span class="keyword">import</span> scala.tools.nsc.typechecker.Modes
<span class="keyword">import</span> scala.tools.nsc.io.VirtualDirectory
<span class="keyword">import</span> scala.tools.nsc.interpreter.AbstractFileClassLoader
<span class="keyword">import</span> scala.tools.nsc.util.FreshNameCreator
<span class="keyword">import</span> scala.reflect.internal.Flags
<span class="keyword">import</span> scala.tools.nsc.util.<span class="delimiter">{</span>NoSourceFile, NoFile<span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.<span class="delimiter">{</span>Class =&gt; jClass<span class="delimiter">}</span>
<span class="keyword">import</span> scala.compat.<a href="../../compat/Platform.scala.html#16515" title="scala.compat.Platform.type">Platform</a>.EOL

<span class="keyword">trait</span> <a title="trait ToolBoxes extends Object" id="24912">ToolBoxes</a> <a href="../../Unit.scala.html#2389" title="Unit" class="keyword">extends</a> <span class="delimiter">{</span> self: Universe =&gt;

  <span class="keyword">def</span> <a title="(frontEnd: ToolBoxes.this.FrontEnd, options: String)ToolBoxes.this.ToolBox" id="591665">mkToolBox</a><span class="delimiter">(</span><a title="ToolBoxes.this.FrontEnd" id="594710">frontEnd</a>: <a href="../api/FrontEnds.scala.html#23875" title="ToolBoxes.this.FrontEnd">FrontEnd</a> = <a href="../api/FrontEnds.scala.html#23877" title="()ToolBoxes.this.FrontEnd">mkSilentFrontEnd</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="String" id="594711">options</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span title="ToolBoxes.this.ToolBox" class="keyword">new</span> <a href="#591666" title="ToolBoxes.this.ToolBox">ToolBox</a><span class="delimiter">(</span><a href="#594710" title="ToolBoxes.this.FrontEnd">frontEnd</a>, <a href="#594711" title="String">options</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class ToolBox extends Object with ToolBoxes.this.AbsToolBox" id="591666">ToolBox</a><a href="#591666" title="ToolBoxes.this.ToolBox" class="delimiter">(</a><span class="keyword">val</span> <a title="ToolBoxes.this.FrontEnd" id="594746">frontEnd</a>: <a href="../api/FrontEnds.scala.html#23875" title="ToolBoxes.this.FrontEnd">FrontEnd</a>, <span class="keyword">val</span> <a title="String" id="594747">options</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../api/ToolBoxes.scala.html#23872" title="ToolBoxes.this.AbsToolBox">AbsToolBox</a> <span class="delimiter">{</span>

    <span class="keyword">class</span> <a title="class ToolBoxGlobal extends scala.tools.nsc.ReflectGlobal" id="594719">ToolBoxGlobal</a><a href="#594719" title="ToolBox.this.ToolBoxGlobal" class="delimiter">(</a><a title="scala.tools.nsc.Settings" id="594787">settings</a>: scala.tools.nsc.<a href="../../tools/nsc/Settings.scala.html#28189" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.reporters.Reporter" id="594788">reporter</a>: <a href="../../tools/nsc/reporters/Reporter.scala.html#42553" title="scala.tools.nsc.reporters.Reporter">Reporter</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="../../tools/nsc/ReflectGlobal.scala.html#27982" title="scala.tools.nsc.ReflectGlobal">ReflectGlobal</a><span class="delimiter">(</span><a href="#594787" title="scala.tools.nsc.Settings">settings</a>, <a href="#594788" title="scala.tools.nsc.reporters.Reporter">reporter</a>, <a href="#591666" title="ToolBox.this.type">ToolBox</a>.<span class="keyword">this</span>.<a href="#594730" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">import</span> <a href="../internal/Definitions.scala.html#441641" title="ToolBoxGlobal.this.definitions.type">definitions</a>._

      <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.tools.nsc.util.SimpleTracer" id="594769">trace</a> = scala.tools.nsc.util.<a href="../../tools/nsc/util/package.scala.html#57338" title="=&gt; scala.tools.nsc.util.SimpleTracer">trace</a> <a href="../../tools/nsc/util/SimpleTracer.scala.html#563200" title="(enabled: Boolean)scala.tools.nsc.util.SimpleTracer">when</a> <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467500" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">debug</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a>

      <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="String(&quot;wrapper&quot;)" id="594771">wrapperMethodName</a> = <span title="String(&quot;wrapper&quot;)" class="string">&quot;wrapper&quot;</span>

      <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="594774">wrapCount</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="()ToolBoxGlobal.this.TermName" id="594776">nextWrapperModuleName</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <a href="#594774" title="(x$1: Int)Unit">wrapCount</a> <a href="../../Int.scala.html#57948" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <a href="SynchronizedOps.scala.html#576003" title="(s: String)ToolBoxGlobal.this.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;__wrapper$&quot;)" class="string">&quot;__wrapper$&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594774" title="=&gt; Int">wrapCount</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(expr: ToolBoxGlobal.this.Tree)Unit" id="594777">verifyExpr</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="596427">expr</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../Unit.scala.html#2389" title="Unit">Unit</a> = <span class="delimiter">{</span>
        // Previously toolboxes used to typecheck their inputs before compiling.
        // Actually, the initial demo by Martin first typechecked the reified tree,
        // then ran it, which typechecked it again, and only then launched the
        // reflective compiler.
        //
        // However, as observed in https://issues.scala-lang.org/browse/SI-5464
        // current implementation typechecking is not always idempotent.
        // That's why we cannot allow inputs of toolboxes to be typechecked,
        // at least not until the aforementioned issue is closed.
        <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.Tree]" id="596428">typed</a> = <a href="#596427" title="ToolBoxGlobal.this.Tree">expr</a> <a href="../api/Trees.scala.html#425076" title="(f: ToolBoxGlobal.this.Tree =&gt; Boolean)List[ToolBoxGlobal.this.Tree]">filter</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="596432">t</a> =&gt; <a href="#596432" title="ToolBoxGlobal.this.Tree">t</a>.<a href="../api/Trees.scala.html#425060" title="=&gt; ToolBoxGlobal.this.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#596432" title="ToolBoxGlobal.this.Tree">t</a>.<a href="../api/Trees.scala.html#425060" title="=&gt; ToolBoxGlobal.this.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../internal/Types.scala.html#441256" title="ToolBoxGlobal.this.NoType.type">NoType</a> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596432" title="ToolBoxGlobal.this.Tree">t</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../api/Trees.scala.html#23743" title="ToolBoxGlobal.this.TypeTree">TypeTree</a><span class="delimiter">]</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596428" title="List[ToolBoxGlobal.this.Tree]">typed</a>.<a href="../../collection/IterableLike.scala.html#59464" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#596458" title="ToolBox.this.ToolBoxError" class="keyword">new</a> <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#591666" title="ToolBoxes.this.ToolBox">ToolBox</a>.<span class="keyword">this</span>, <span title="String(&quot;reflective toolbox has failed: cannot operate on trees that are already typed&quot;)" class="string">&quot;reflective toolbox has failed: cannot operate on trees that are already typed&quot;</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.FreeType]" id="596429">freeTypes</a> = <a href="#594719" title="ToolBoxGlobal.this.type" class="keyword">this</a>.<a href="../internal/FreeVars.scala.html#441193" title="(tree: ToolBoxGlobal.this.Tree)List[ToolBoxGlobal.this.FreeType]">freeTypes</a><span class="delimiter">(</span><a href="#596427" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#596429" title="List[ToolBoxGlobal.this.FreeType]">freeTypes</a>.<a href="../../collection/LinearSeqOptimized.scala.html#76164" title="=&gt; Int">length</a> <a href="../../Int.scala.html#57919" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="String" id="596465">msg</a> = <span title="String(&quot;reflective toolbox has failed:&quot;)" class="string">&quot;reflective toolbox has failed:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a>
          <a href="#596465" title="String">msg</a> <span title="(x$1: Any)String">+=</span> <span title="String(&quot;unresolved free type variables (namely: &quot;)" class="string">&quot;unresolved free type variables (namely: &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#596429" title="List[ToolBoxGlobal.this.FreeType]">freeTypes</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ToolBoxGlobal.this.FreeType =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[ToolBoxGlobal.this.FreeType],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeType" id="596490">ft</a> =&gt; <a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#596490" title="ToolBoxGlobal.this.FreeType">ft</a>.<a href="../internal/Symbols.scala.html#443692" title="=&gt; ToolBoxGlobal.this.TypeName">name</a>, <a href="#596490" title="ToolBoxGlobal.this.FreeType">ft</a>.<a href="../internal/Symbols.scala.html#466311" title="=&gt; String">origin</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;). &quot;)" class="string">&quot;). &quot;</span>
          <a href="#596465" title="String">msg</a> <span title="(x$1: Any)String">+=</span> <span title="String(&quot;have you forgot to use TypeTag annotations for type parameters external to a reifee? &quot;)" class="string">&quot;have you forgot to use TypeTag annotations for type parameters external to a reifee? &quot;</span>
          <a href="#596465" title="String">msg</a> <span title="(x$1: Any)String">+=</span> <span title="String(&quot;if you have troubles tracking free type variables, consider using -Xlog-free-types&quot;)" class="string">&quot;if you have troubles tracking free type variables, consider using -Xlog-free-types&quot;</span>
          <span title="Nothing" class="keyword">throw</span> <a href="#596458" title="ToolBox.this.ToolBoxError" class="keyword">new</a> <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#591666" title="ToolBoxes.this.ToolBox">ToolBox</a>.<span class="keyword">this</span>, <a href="#596465" title="String">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(expr0: ToolBoxGlobal.this.Tree, pt: ToolBoxGlobal.this.Type, silent: Boolean, withImplicitViewsDisabled: Boolean, withMacrosDisabled: Boolean)ToolBoxGlobal.this.Tree" id="594778">typeCheckExpr</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="596528">expr0</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a>, <a title="ToolBoxGlobal.this.Type" id="596529">pt</a>: <a href="../internal/Types.scala.html#441242" title="ToolBoxGlobal.this.Type">Type</a>, <a title="Boolean" id="596533">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="596534">withImplicitViewsDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="596535">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a> = <span class="delimiter">{</span>
        <a href="#594777" title="(expr: ToolBoxGlobal.this.Tree)Unit">verifyExpr</a><span class="delimiter">(</span><a href="#596528" title="ToolBoxGlobal.this.Tree">expr0</a><span class="delimiter">)</span>

        // need to wrap the expr, because otherwise you won't be able to typecheck macros against something that contains free vars
        // [Eugene] get rid of the copy/paste w.r.t compileExpr
        <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.FreeTerm]" id="596536">freeTerms</a> = <a href="#594719" title="ToolBoxGlobal.this.type" class="keyword">this</a>.<a href="../internal/FreeVars.scala.html#441192" title="(tree: ToolBoxGlobal.this.Tree)List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a><span class="delimiter">(</span><a href="#596528" title="ToolBoxGlobal.this.Tree">expr0</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]" id="596537">freeTermNames</a> = collection.mutable.<a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.TermName)*)scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]" class="delimiter">[</span><a href="../internal/Symbols.scala.html#441132" title="ToolBoxGlobal.this.Symbol">Symbol</a>, <a href="../internal/Names.scala.html#440798" title="ToolBoxGlobal.this.TermName">TermName</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#596536" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/LinearSeqOptimized.scala.html#76166" title="(f: ToolBoxGlobal.this.FreeTerm =&gt; scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName])Unit">foreach</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeTerm" id="596568">ft</a> =&gt; <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="String" id="596569">name</a> = <a href="#596568" title="ToolBoxGlobal.this.FreeTerm">ft</a>.<a href="../internal/Symbols.scala.html#449046" title="=&gt; ToolBoxGlobal.this.TermName">name</a>.<a href="../../Function1.scala.html#59562" title="()String">toString</a>
          <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.FreeTerm]" id="596570">namesakes</a> = <a href="#596536" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/immutable/List.scala.html#63671" title="(p: ToolBoxGlobal.this.FreeTerm =&gt; Boolean)List[ToolBoxGlobal.this.FreeTerm]">takeWhile</a> <span class="delimiter">(</span><a href="#596578" title="ToolBoxGlobal.this.FreeTerm">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#596568" title="ToolBoxGlobal.this.FreeTerm">ft</a><span class="delimiter">)</span> <a href="../../collection/TraversableLike.scala.html#58981" title="(p: ToolBoxGlobal.this.FreeTerm =&gt; Boolean)List[ToolBoxGlobal.this.FreeTerm]">filter</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeTerm" id="596592">ft2</a> =&gt; <a href="#596568" title="ToolBoxGlobal.this.FreeTerm">ft</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#596592" title="ToolBoxGlobal.this.FreeTerm">ft2</a> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#596568" title="ToolBoxGlobal.this.FreeTerm">ft</a>.<a href="../internal/Symbols.scala.html#449046" title="=&gt; ToolBoxGlobal.this.TermName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#596592" title="ToolBoxGlobal.this.FreeTerm">ft2</a>.<a href="../internal/Symbols.scala.html#449046" title="=&gt; ToolBoxGlobal.this.TermName">name</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#596570" title="List[ToolBoxGlobal.this.FreeTerm]">namesakes</a>.<a href="../../collection/LinearSeqOptimized.scala.html#76164" title="=&gt; Int">length</a> <a href="../../Int.scala.html#57919" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#596569" title="String">name</a> <span title="(x$1: Any)String">+=</span> <span class="delimiter">(</span><span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#596570" title="List[ToolBoxGlobal.this.FreeTerm]">namesakes</a>.<a href="../../collection/LinearSeqOptimized.scala.html#76164" title="=&gt; Int">length</a> <a href="../../Int.scala.html#57948" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#596537" title="scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]">freeTermNames</a> <a href="../../collection/mutable/MapLike.scala.html#78497" title="(kv: (ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.TermName))freeTermNames.type">+=</a> <span class="delimiter">(</span><a href="../../Predef.scala.html#8484" title="(x: ToolBoxGlobal.this.FreeTerm)ArrowAssoc[ToolBoxGlobal.this.FreeTerm]">ft</a> <a href="../../Predef.scala.html#63591" title="(y: ToolBoxGlobal.this.TermName)(ToolBoxGlobal.this.FreeTerm, ToolBoxGlobal.this.TermName)">-&gt;</a> <a href="SynchronizedOps.scala.html#576003" title="(s: String)ToolBoxGlobal.this.TermName">newTermName</a><span class="delimiter">(</span><a href="#596569" title="String">name</a> <span title="(x$1: Any)String">+</span> <a href="../internal/StdNames.scala.html#441764" title="ToolBoxGlobal.this.nme.type">nme</a>.<a href="../internal/StdNames.scala.html#446191" title="=&gt; ToolBoxGlobal.this.nme.NameType">MIRROR_FREE_VALUE_SUFFIX</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
        <span class="keyword">var</span> <a title="ToolBoxGlobal.this.Tree" id="596538">expr</a> = <a href="#596643" title="ToolBoxGlobal.this.Transformer" class="keyword">new</a> <a href="../../tools/nsc/ast/Trees.scala.html#559848" title="anonymous class $anon extends ToolBoxGlobal.this.Transformer" id="596643">Transformer</a> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" id="596645">transform</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="596646">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a> =
            <span title="ToolBoxGlobal.this.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425067" title="=&gt; Boolean">hasSymbol</a> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a>.<a href="../internal/Symbols.scala.html#443279" title="=&gt; Boolean">isFreeTerm</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> Ident<a href="#596699" title="ToolBoxGlobal.this.Tree" id="596702" class="delimiter">(</a>_<span class="delimiter">)</span> =&gt;
                  <a href="../api/Trees.scala.html#427669" title="(name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.Ident">Ident</a><a href="#596703" title="(x: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">(</a><a href="../../collection/MapLike.scala.html#78420" title="(key: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.TermName">freeTermNames</a><span class="delimiter">(</span><a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="keyword">case</span> _ =&gt;
                  <a href="#596703" title="(x: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;internal error: %s (%s, %s) is not supported&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a>, <a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../../Product.scala.html#23431" title="=&gt; String">productPrefix</a>, <a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#596643" title="ToolBoxGlobal.this.Transformer" class="keyword">super</a>.<a href="../api/Trees.scala.html#438847" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">transform</a><span class="delimiter">(</span><a href="#596646" title="ToolBoxGlobal.this.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>.<a href="#596645" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">transform</a><span class="delimiter">(</span><a href="#596528" title="ToolBoxGlobal.this.Tree">expr0</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.ValDef]" id="596539">dummies</a> = <a href="#596536" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ToolBoxGlobal.this.FreeTerm =&gt; ToolBoxGlobal.this.ValDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[ToolBoxGlobal.this.FreeTerm],ToolBoxGlobal.this.ValDef,List[ToolBoxGlobal.this.ValDef]])List[ToolBoxGlobal.this.ValDef]">map</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeTerm" id="596728">freeTerm</a> =&gt; <a href="../api/Trees.scala.html#428215" title="(mods: ToolBoxGlobal.this.Modifiers, name: ToolBoxGlobal.this.TermName, tpt: ToolBoxGlobal.this.Tree, rhs: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.ValDef">ValDef</a><span class="delimiter">(</span><a href="../internal/Trees.scala.html#441811" title="=&gt; ToolBoxGlobal.this.Modifiers">NoMods</a>, <a href="../../collection/MapLike.scala.html#78420" title="(key: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.TermName">freeTermNames</a><span class="delimiter">(</span><a href="#596728" title="ToolBoxGlobal.this.FreeTerm">freeTerm</a><span class="delimiter">)</span>, <a href="../api/Trees.scala.html#23746" title="(tp: ToolBoxGlobal.this.Type)ToolBoxGlobal.this.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#596728" title="ToolBoxGlobal.this.FreeTerm">freeTerm</a>.<a href="../internal/Symbols.scala.html#443427" title="=&gt; ToolBoxGlobal.this.Type">info</a><span class="delimiter">)</span>, <a href="../api/Trees.scala.html#427925" title="(qualifier: ToolBoxGlobal.this.Tree, name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.Select">Select</a><span class="delimiter">(</span><a href="../internal/Trees.scala.html#441842" title="(sym: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.Ident">Ident</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#442235" title="=&gt; ToolBoxGlobal.this.ModuleSymbol">PredefModule</a><span class="delimiter">)</span>, <a href="SynchronizedOps.scala.html#576003" title="(s: String)ToolBoxGlobal.this.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;$qmark$qmark$qmark&quot;)" class="string">&quot;$qmark$qmark$qmark&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#596538" title="ToolBoxGlobal.this.Tree">expr</a> = <a href="../api/Trees.scala.html#427284" title="(stats: List[ToolBoxGlobal.this.Tree], expr: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Block">Block</a><span class="delimiter">(</span><a href="#596539" title="List[ToolBoxGlobal.this.ValDef]">dummies</a>, <a href="#596538" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span>

        // [Eugene] how can we implement that?
        // !!! Why is this is in the empty package? If it's only to make
        // it inaccessible then please put it somewhere designed for that
        // rather than polluting the empty package with synthetics.
        <span class="keyword">val</span> <a title="ToolBoxGlobal.this.ClassSymbol" id="596540">ownerClass</a>    = <a href="../internal/Definitions.scala.html#442146" title="ToolBoxGlobal.this.definitions.EmptyPackageClass.type">EmptyPackageClass</a>.<a href="../internal/Symbols.scala.html#443207" title="(name: ToolBoxGlobal.this.TypeName, parents: List[ToolBoxGlobal.this.Type], scope: ToolBoxGlobal.this.Scope, pos: ToolBoxGlobal.this.Position, newFlags: Long)ToolBoxGlobal.this.ClassSymbol">newClassWithInfo</a><span class="delimiter">(</span><a href="SynchronizedOps.scala.html#576004" title="(s: String)ToolBoxGlobal.this.TypeName">newTypeName</a><span class="delimiter">(</span><span title="String(&quot;&lt;expression-owner&gt;&quot;)" class="string">&quot;&lt;expression-owner&gt;&quot;</span><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.Type*)List[ToolBoxGlobal.this.Type]">List</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#442179" title="=&gt; ToolBoxGlobal.this.ClassSymbol">ObjectClass</a>.<a href="../internal/Symbols.scala.html#443721" title="=&gt; ToolBoxGlobal.this.Type">tpe</a><span class="delimiter">)</span>, <a href="SynchronizedOps.scala.html#576007" title="=&gt; ToolBoxGlobal.this.Scope with ToolBoxGlobal.this.SynchronizedScope">newScope</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="ToolBoxGlobal.this.TermSymbol" id="596541">owner</a>         = <a href="#596540" title="ToolBoxGlobal.this.ClassSymbol">ownerClass</a>.<a href="../internal/Symbols.scala.html#443176" title="(pos: ToolBoxGlobal.this.Position)ToolBoxGlobal.this.TermSymbol">newLocalDummy</a><span class="delimiter">(</span><a href="#596538" title="ToolBoxGlobal.this.Tree">expr</a>.<a href="../api/Trees.scala.html#425042" title="=&gt; ToolBoxGlobal.this.Position">pos</a><span class="delimiter">)</span>
        <span class="keyword">var</span> <a title="ToolBoxGlobal.this.analyzer.Typer" id="596542">currentTyper</a>  = <a href="../../tools/nsc/Global.scala.html#559643" title="ToolBoxGlobal.this.typer.type">typer</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560767" title="(tree: ToolBoxGlobal.this.analyzer.global.Tree, owner: ToolBoxGlobal.this.analyzer.global.Symbol)ToolBoxGlobal.this.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#596538" title="ToolBoxGlobal.this.Tree">expr</a>, <a href="#596541" title="ToolBoxGlobal.this.TermSymbol">owner</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="=&gt; ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Tree" id="596543">wrapper1</a>      = <span title="=&gt; ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596534" title="Boolean">withImplicitViewsDisabled</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#596542" title="ToolBoxGlobal.this.analyzer.Typer">currentTyper</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxGlobal.this.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#560952" title="[T](op: =&gt; T)T">withImplicitsEnabled</a><a href="#596912" title="(op: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">[</a><a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span> <span class="keyword">else</span> <span class="delimiter">(</span><a href="#596542" title="ToolBoxGlobal.this.analyzer.Typer">currentTyper</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxGlobal.this.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#560955" title="[T](op: =&gt; T)T">withImplicitsDisabled</a><a href="#596917" title="(op: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">[</a><a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="=&gt; ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Tree" id="596544">wrapper2</a>      = <span title="=&gt; ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596535" title="Boolean">withMacrosDisabled</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#596542" title="ToolBoxGlobal.this.analyzer.Typer">currentTyper</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxGlobal.this.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#560961" title="[T](op: =&gt; T)T">withMacrosEnabled</a><a href="#596922" title="(op: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">[</a><a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span> <span class="keyword">else</span> <span class="delimiter">(</span><a href="#596542" title="ToolBoxGlobal.this.analyzer.Typer">currentTyper</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxGlobal.this.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#560964" title="[T](op: =&gt; T)T">withMacrosDisabled</a><a href="#596927" title="(op: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">[</a><a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">]</span> _<span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(tree: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" id="596545">wrapper</a>       <span class="delimiter">(</span><a title="=&gt; ToolBoxGlobal.this.Tree" id="596929">tree</a>: =&gt; Tree<span class="delimiter">)</span> = <a href="../../Function1.scala.html#59555" title="(v1: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">wrapper1</a><span class="delimiter">(</span><a href="../../Function1.scala.html#59555" title="(v1: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">wrapper2</a><span class="delimiter">(</span><a href="#596929" title="=&gt; ToolBoxGlobal.this.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <a href="../internal/SymbolTable.scala.html#440595" title="(p: scala.reflect.internal.Phase)Unit">phase</a> = <span class="delimiter">(</span><span title="ToolBoxGlobal.this.Run" class="keyword">new</span> <a href="../../tools/nsc/Global.scala.html#559768" title="ToolBoxGlobal.this.Run">Run</a><span class="delimiter">)</span>.<a href="../../tools/nsc/Global.scala.html#561319" title="=&gt; scala.tools.nsc.Phase">typerPhase</a> // need to set a phase to something &lt;= typerPhase, otherwise implicits in typedSelect will be disabled
        <a href="#596542" title="ToolBoxGlobal.this.analyzer.Typer">currentTyper</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560636" title="=&gt; ToolBoxGlobal.this.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#560943" title="()Unit">setReportErrors</a><span class="delimiter">(</span><span class="delimiter">)</span> // need to manually set context mode, otherwise typer.silent will throw exceptions
        <a href="#594788" title="scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../tools/nsc/reporters/Reporter.scala.html#467877" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <a href="../../tools/nsc/util/SimpleTracer.scala.html#563196" title="(msg: String)(value: String)String">trace</a><span class="delimiter">(</span><a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;typing (implicit views = %s, macros = %s): &quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596534" title="Boolean">withImplicitViewsDisabled</a>, <a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596535" title="Boolean">withMacrosDisabled</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#594781" title="(tree: ToolBoxGlobal.this.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String">showAttributed</a><span class="delimiter">(</span><a href="#596538" title="ToolBoxGlobal.this.Tree">expr</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#596545" title="(tree: =&gt; ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">wrapper</a><span class="delimiter">(</span><a href="#596542" title="ToolBoxGlobal.this.analyzer.Typer" id="596963">currentTyper</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#562769" title="Boolean" id="596981">silent</a><a href="../../tools/nsc/typechecker/Typers.scala.html#562820" title="=&gt; ToolBoxGlobal.this.analyzer.global.Tree" class="delimiter">(</a><a href="#596965" title="ToolBoxGlobal.this.analyzer.Typer">_</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#560765" title="(tree: ToolBoxGlobal.this.analyzer.global.Tree, mode: Int, pt: ToolBoxGlobal.this.analyzer.global.Type)ToolBoxGlobal.this.analyzer.global.Tree">typed</a><a title="ToolBoxGlobal.this.analyzer.Typer =&gt; ToolBoxGlobal.this.analyzer.global.Tree" id="596979" class="delimiter">(</a><a href="#596538" title="ToolBoxGlobal.this.Tree">expr</a>, analyzer.<span title="Int(1)">EXPRmode</span>, <a href="#596529" title="ToolBoxGlobal.this.Type">pt</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> analyzer.SilentResultValue<a href="#597369" title="ToolBoxGlobal.this.Tree" id="597371" class="delimiter">(</a>result<span class="delimiter">)</span> =&gt;
            <a href="../../tools/nsc/util/SimpleTracer.scala.html#563196" title="(msg: String)(value: String)String">trace</a><span class="delimiter">(</span><span title="String(&quot;success: &quot;)" class="string">&quot;success: &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#594781" title="(tree: ToolBoxGlobal.this.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String">showAttributed</a><span class="delimiter">(</span>result, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">var</span> Block<a href="#597011" title="(List[ToolBoxGlobal.this.Tree], ToolBoxGlobal.this.Tree)" id="597013" class="delimiter">(</a><a href="../../Tuple2.scala.html#61506" title="List[ToolBoxGlobal.this.Tree]" id="596985">dummies</a>, <a href="../../Tuple2.scala.html#61508" title="ToolBoxGlobal.this.Tree" id="596986">unwrapped</a><span class="delimiter">)</span> = <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.analyzer.global.Tree @unchecked">result</a>
            <span class="keyword">var</span> <a title="scala.collection.mutable.Map[ToolBoxGlobal.this.TermName,ToolBoxGlobal.this.Symbol]" id="596987">reversedFreeTermNames</a> = <a href="#596537" title="scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]">freeTermNames</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ((ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.TermName)) =&gt; (ToolBoxGlobal.this.TermName, ToolBoxGlobal.this.Symbol))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName],(ToolBoxGlobal.this.TermName, ToolBoxGlobal.this.Symbol),scala.collection.mutable.Map[ToolBoxGlobal.this.TermName,ToolBoxGlobal.this.Symbol]])scala.collection.mutable.Map[ToolBoxGlobal.this.TermName,ToolBoxGlobal.this.Symbol]">map</a> <span class="delimiter">(</span><a href="#597034" title="(ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.TermName)">_</a>.<a href="../../Tuple2.scala.html#61512" title="=&gt; (ToolBoxGlobal.this.TermName, ToolBoxGlobal.this.Symbol)">swap</a><span class="delimiter">)</span>
            // todo. also fixup singleton types
            <a href="#596986" title="ToolBoxGlobal.this.Tree">unwrapped</a> = <a href="#597153" title="ToolBoxGlobal.this.Transformer" class="keyword">new</a> <a href="../../tools/nsc/ast/Trees.scala.html#559848" title="anonymous class $anon extends ToolBoxGlobal.this.Transformer" id="597153">Transformer</a> <span class="delimiter">{</span>
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" id="597155">transform</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="597156">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a> =
                <a href="#597156" title="ToolBoxGlobal.this.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> Ident<a href="#597208" title="ToolBoxGlobal.this.Tree" id="597210" class="delimiter">(</a>name<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#596987" title="scala.collection.mutable.Map[ToolBoxGlobal.this.TermName,ToolBoxGlobal.this.Symbol]">reversedFreeTermNames</a> <a href="../../collection/MapLike.scala.html#78421" title="(key: ToolBoxGlobal.this.TermName)Boolean">contains</a> <a href="../internal/Names.scala.html#440756" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.TermName">name</a> =&gt;
                    <a href="../internal/Trees.scala.html#441842" title="(sym: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.Ident">Ident</a><span class="delimiter">(</span><a href="../../collection/MapLike.scala.html#78420" title="(key: ToolBoxGlobal.this.TermName)ToolBoxGlobal.this.Symbol">reversedFreeTermNames</a><span class="delimiter">(</span><a href="../internal/Names.scala.html#440756" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#597211" title="(x: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">setType</a> <a href="#597156" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425060" title="=&gt; ToolBoxGlobal.this.Type">tpe</a>
                  <span class="keyword">case</span> _ =&gt;
                    <a href="#597153" title="ToolBoxGlobal.this.Transformer" class="keyword">super</a>.<a href="../api/Trees.scala.html#438847" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">transform</a><a href="#597211" title="(x: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">(</a><a href="#597156" title="ToolBoxGlobal.this.Tree">tree</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
            <span class="delimiter">}</span>.<a href="#597155" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">transform</a><span class="delimiter">(</span><a href="#596986" title="ToolBoxGlobal.this.Tree">unwrapped</a><span class="delimiter">)</span>
            <span title="ToolBoxGlobal.this.TreeTypeSubstituter" class="keyword">new</span> <a href="../internal/Trees.scala.html#441854" title="ToolBoxGlobal.this.TreeTypeSubstituter">TreeTypeSubstituter</a><span class="delimiter">(</span><a href="#596985" title="List[ToolBoxGlobal.this.Tree]">dummies</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[ToolBoxGlobal.this.Tree],ToolBoxGlobal.this.Symbol,List[ToolBoxGlobal.this.Symbol]])List[ToolBoxGlobal.this.Symbol]">map</a> <span class="delimiter">(</span><a href="#597244" title="ToolBoxGlobal.this.Tree">_</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a><span class="delimiter">)</span>, <a href="#596985" title="List[ToolBoxGlobal.this.Tree]">dummies</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[ToolBoxGlobal.this.Tree],ToolBoxGlobal.this.Type,List[ToolBoxGlobal.this.Type]])List[ToolBoxGlobal.this.Type]">map</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="597296">dummy</a> =&gt; <a href="../internal/Types.scala.html#461424" title="(pre: ToolBoxGlobal.this.Type, sym: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.Type">SingleType</a><span class="delimiter">(</span><a href="../internal/Types.scala.html#441258" title="ToolBoxGlobal.this.NoPrefix.type">NoPrefix</a>, <a href="../../collection/MapLike.scala.html#78420" title="(key: ToolBoxGlobal.this.TermName)ToolBoxGlobal.this.Symbol">reversedFreeTermNames</a><span class="delimiter">(</span><a href="#597296" title="ToolBoxGlobal.this.Tree">dummy</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a>.<a href="../internal/Names.scala.html#440756" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../internal/Trees.scala.html#467210" title="(tree: ToolBoxGlobal.this.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#596986" title="ToolBoxGlobal.this.Tree">unwrapped</a><span class="delimiter">)</span>
            <a href="#596986" title="ToolBoxGlobal.this.Tree">unwrapped</a>
          <span class="keyword">case</span> error @ analyzer.SilentTypeError<a href="#597369" title="ToolBoxGlobal.this.Tree" id="597374" class="delimiter">(</a>_<span class="delimiter">)</span> =&gt;
            <a href="../../tools/nsc/util/SimpleTracer.scala.html#563196" title="(msg: String)(value: String)String">trace</a><span class="delimiter">(</span><span title="String(&quot;failed: &quot;)" class="string">&quot;failed: &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span>error.<a href="../../tools/nsc/typechecker/Typers.scala.html#562853" title="=&gt; ToolBoxGlobal.this.analyzer.AbsTypeError">err</a>.<a href="../../tools/nsc/typechecker/ContextErrors.scala.html#562862" title="=&gt; String">errMsg</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#58721" title="=&gt; Boolean">!</a><a href="#596533" title="Boolean">silent</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#596458" title="ToolBox.this.ToolBoxError" class="keyword">new</a> <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#591666" title="ToolBoxes.this.ToolBox">ToolBox</a>.<span class="keyword">this</span>, <a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;reflective typecheck has failed: %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span>error.<a href="../../tools/nsc/typechecker/Typers.scala.html#562853" title="=&gt; ToolBoxGlobal.this.analyzer.AbsTypeError">err</a>.<a href="../../tools/nsc/typechecker/ContextErrors.scala.html#562862" title="=&gt; String">errMsg</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../api/Trees.scala.html#23577" title="ToolBoxGlobal.this.EmptyTree.type">EmptyTree</a>
        <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(expr: ToolBoxGlobal.this.Tree)(Object, java.lang.reflect.Method)" id="594779">compileExpr</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="597380">expr</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../Tuple2.scala.html#1222" title="(Object, java.lang.reflect.Method)" class="delimiter">(</a>Object, java.lang.reflect.Method<span class="delimiter">)</span> = <span class="delimiter">{</span>
        <a href="#594777" title="(expr: ToolBoxGlobal.this.Tree)Unit">verifyExpr</a><span class="delimiter">(</span><a href="#597380" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(expr0: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" id="597381">wrapExpr</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="597392">expr0</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a> = <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Symbol" id="597393">defOwner</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="597404">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../internal/Symbols.scala.html#441132" title="ToolBoxGlobal.this.Symbol">Symbol</a> = <a href="#597404" title="ToolBoxGlobal.this.Tree">tree</a> <a href="../api/Trees.scala.html#425080" title="(p: ToolBoxGlobal.this.Tree =&gt; Boolean)Option[ToolBoxGlobal.this.Tree]">find</a> <span class="delimiter">(</span><a href="#597407" title="ToolBoxGlobal.this.Tree">_</a>.<a href="../api/Trees.scala.html#425068" title="=&gt; Boolean">isDef</a><span class="delimiter">)</span> <a href="../../Option.scala.html#63820" title="(f: ToolBoxGlobal.this.Tree =&gt; ToolBoxGlobal.this.Symbol)Option[ToolBoxGlobal.this.Symbol]">map</a> <span class="delimiter">(</span><a href="#597412" title="ToolBoxGlobal.this.Tree">_</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<a href="#597425" title="ToolBoxGlobal.this.Symbol" id="597426" class="delimiter">(</a>sym<span class="delimiter">)</span> <span class="keyword">if</span> sym <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> sym <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../internal/Symbols.scala.html#441152" title="=&gt; ToolBoxGlobal.this.NoSymbol">NoSymbol</a> =&gt; sym.<a href="#597427" title="(x: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.Symbol">owner</a>
            <span class="keyword">case</span> _ =&gt; <a href="#597427" title="(x: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.Symbol">NoSymbol</a>
          <span class="delimiter">}</span>

          <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.FreeTerm]" id="597394">freeTerms</a> = <a href="#594719" title="ToolBoxGlobal.this.type" class="keyword">this</a>.<a href="../internal/FreeVars.scala.html#441192" title="(tree: ToolBoxGlobal.this.Tree)List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a><span class="delimiter">(</span><a href="#597392" title="ToolBoxGlobal.this.Tree">expr0</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]" id="597395">freeTermNames</a> = collection.mutable.<a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.TermName)*)scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]" class="delimiter">[</span><a href="../internal/Symbols.scala.html#441132" title="ToolBoxGlobal.this.Symbol">Symbol</a>, <a href="../internal/Names.scala.html#440798" title="ToolBoxGlobal.this.TermName">TermName</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#597394" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/LinearSeqOptimized.scala.html#76166" title="(f: ToolBoxGlobal.this.FreeTerm =&gt; scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName])Unit">foreach</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeTerm" id="597452">ft</a> =&gt; <span class="delimiter">{</span>
            <span class="keyword">var</span> <a title="String" id="597453">name</a> = <a href="#597452" title="ToolBoxGlobal.this.FreeTerm">ft</a>.<a href="../internal/Symbols.scala.html#449046" title="=&gt; ToolBoxGlobal.this.TermName">name</a>.<a href="../../Function1.scala.html#59562" title="()String">toString</a>
            <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.FreeTerm]" id="597454">namesakes</a> = <a href="#597394" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/immutable/List.scala.html#63671" title="(p: ToolBoxGlobal.this.FreeTerm =&gt; Boolean)List[ToolBoxGlobal.this.FreeTerm]">takeWhile</a> <span class="delimiter">(</span><a href="#597462" title="ToolBoxGlobal.this.FreeTerm">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#597452" title="ToolBoxGlobal.this.FreeTerm">ft</a><span class="delimiter">)</span> <a href="../../collection/TraversableLike.scala.html#58981" title="(p: ToolBoxGlobal.this.FreeTerm =&gt; Boolean)List[ToolBoxGlobal.this.FreeTerm]">filter</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeTerm" id="597472">ft2</a> =&gt; <a href="#597452" title="ToolBoxGlobal.this.FreeTerm">ft</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#597472" title="ToolBoxGlobal.this.FreeTerm">ft2</a> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#597452" title="ToolBoxGlobal.this.FreeTerm">ft</a>.<a href="../internal/Symbols.scala.html#449046" title="=&gt; ToolBoxGlobal.this.TermName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#597472" title="ToolBoxGlobal.this.FreeTerm">ft2</a>.<a href="../internal/Symbols.scala.html#449046" title="=&gt; ToolBoxGlobal.this.TermName">name</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#597454" title="List[ToolBoxGlobal.this.FreeTerm]">namesakes</a>.<a href="../../collection/LinearSeqOptimized.scala.html#76164" title="=&gt; Int">length</a> <a href="../../Int.scala.html#57919" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#597453" title="String">name</a> <span title="(x$1: Any)String">+=</span> <span class="delimiter">(</span><span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#597454" title="List[ToolBoxGlobal.this.FreeTerm]">namesakes</a>.<a href="../../collection/LinearSeqOptimized.scala.html#76164" title="=&gt; Int">length</a> <a href="../../Int.scala.html#57948" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#597395" title="scala.collection.mutable.Map[ToolBoxGlobal.this.Symbol,ToolBoxGlobal.this.TermName]">freeTermNames</a> <a href="../../collection/mutable/MapLike.scala.html#78497" title="(kv: (ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.TermName))freeTermNames.type">+=</a> <span class="delimiter">(</span><a href="../../Predef.scala.html#8484" title="(x: ToolBoxGlobal.this.FreeTerm)ArrowAssoc[ToolBoxGlobal.this.FreeTerm]">ft</a> <a href="../../Predef.scala.html#63591" title="(y: ToolBoxGlobal.this.TermName)(ToolBoxGlobal.this.FreeTerm, ToolBoxGlobal.this.TermName)">-&gt;</a> <a href="SynchronizedOps.scala.html#576003" title="(s: String)ToolBoxGlobal.this.TermName">newTermName</a><span class="delimiter">(</span><a href="#597453" title="String">name</a> <span title="(x$1: Any)String">+</span> <a href="../internal/StdNames.scala.html#441764" title="ToolBoxGlobal.this.nme.type">nme</a>.<a href="../internal/StdNames.scala.html#446191" title="=&gt; ToolBoxGlobal.this.nme.NameType">MIRROR_FREE_VALUE_SUFFIX</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="ToolBoxGlobal.this.Tree" id="597396">expr</a> = <a href="#597523" title="ToolBoxGlobal.this.Transformer" class="keyword">new</a> <a href="../../tools/nsc/ast/Trees.scala.html#559848" title="anonymous class $anon extends ToolBoxGlobal.this.Transformer" id="597523">Transformer</a> <span class="delimiter">{</span>
            <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" id="597525">transform</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="597526">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a> =
              <span title="ToolBoxGlobal.this.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425067" title="=&gt; Boolean">hasSymbol</a> <a href="../../Boolean.scala.html#58725" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a>.<a href="../internal/Symbols.scala.html#443279" title="=&gt; Boolean">isFreeTerm</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> Ident<a href="#597604" title="ToolBoxGlobal.this.Tree" id="597607" class="delimiter">(</a>_<span class="delimiter">)</span> =&gt;
                    <a href="../api/Trees.scala.html#427174" title="(fun: ToolBoxGlobal.this.Tree, args: List[ToolBoxGlobal.this.Tree])ToolBoxGlobal.this.Apply">Apply</a><a href="#597608" title="(x: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="delimiter">(</a><a href="../api/Trees.scala.html#427669" title="(name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.Ident">Ident</a><span class="delimiter">(</span><a href="../../collection/MapLike.scala.html#78420" title="(key: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.TermName">freeTermNames</a><span class="delimiter">(</span><a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>, List<a href="../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> _ =&gt;
                    <a href="#597608" title="(x: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree" class="keyword">throw</a> <span title="(x$1: String)Error" class="keyword">new</span> <a href="../../package.scala.html#56959" title="Error">Error</a><span class="delimiter">(</span><a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;internal error: %s (%s, %s) is not supported&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a>, <a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../../Product.scala.html#23431" title="=&gt; String">productPrefix</a>, <a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                <a href="#597523" title="ToolBoxGlobal.this.Transformer" class="keyword">super</a>.<a href="../api/Trees.scala.html#438847" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">transform</a><span class="delimiter">(</span><a href="#597526" title="ToolBoxGlobal.this.Tree">tree</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>.<a href="#597525" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">transform</a><span class="delimiter">(</span><a href="#597392" title="ToolBoxGlobal.this.Tree">expr0</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="ToolBoxGlobal.this.ModuleSymbol" id="597397">obj</a> = <a href="../internal/Definitions.scala.html#442146" title="ToolBoxGlobal.this.definitions.EmptyPackageClass.type">EmptyPackageClass</a>.<a href="../internal/Symbols.scala.html#443183" title="(name: ToolBoxGlobal.this.TermName, pos: ToolBoxGlobal.this.Position, newFlags: Long)ToolBoxGlobal.this.ModuleSymbol">newModule</a><span class="delimiter">(</span><a href="#594776" title="()ToolBoxGlobal.this.TermName">nextWrapperModuleName</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="ToolBoxGlobal.this.ClassInfoType" id="597398">minfo</a> = <a href="../internal/Types.scala.html#453477" title="(parents: List[ToolBoxGlobal.this.Type], decls: ToolBoxGlobal.this.Scope, typeSymbol: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.Type*)List[ToolBoxGlobal.this.Type]">List</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#442179" title="=&gt; ToolBoxGlobal.this.ClassSymbol">ObjectClass</a>.<a href="../internal/Symbols.scala.html#443721" title="=&gt; ToolBoxGlobal.this.Type">tpe</a><span class="delimiter">)</span>, <a href="SynchronizedOps.scala.html#576007" title="=&gt; ToolBoxGlobal.this.Scope with ToolBoxGlobal.this.SynchronizedScope">newScope</a>, <a href="#597397" title="ToolBoxGlobal.this.ModuleSymbol">obj</a>.<a href="../internal/Symbols.scala.html#449103" title="=&gt; ToolBoxGlobal.this.Symbol">moduleClass</a><span class="delimiter">)</span>
          <a href="#597397" title="ToolBoxGlobal.this.ModuleSymbol">obj</a>.<a href="../internal/Symbols.scala.html#449103" title="=&gt; ToolBoxGlobal.this.Symbol">moduleClass</a> <a href="../internal/Symbols.scala.html#443429" title="(info: ToolBoxGlobal.this.Type)ToolBoxGlobal.this.Symbol">setInfo</a> <a href="#597398" title="ToolBoxGlobal.this.ClassInfoType">minfo</a>
          <a href="#597397" title="ToolBoxGlobal.this.ModuleSymbol">obj</a> <a href="../internal/Symbols.scala.html#443429" title="(info: ToolBoxGlobal.this.Type)obj.type">setInfo</a> <a href="#597397" title="ToolBoxGlobal.this.ModuleSymbol">obj</a>.<a href="../internal/Symbols.scala.html#449103" title="=&gt; ToolBoxGlobal.this.Symbol">moduleClass</a>.<a href="../internal/Symbols.scala.html#443425" title="=&gt; ToolBoxGlobal.this.Type">tpe</a>
          <span class="keyword">val</span> <a title="ToolBoxGlobal.this.MethodSymbol" id="597399">meth</a> = <a href="#597397" title="ToolBoxGlobal.this.ModuleSymbol">obj</a>.<a href="../internal/Symbols.scala.html#449103" title="ToolBoxGlobal.this.Symbol" id="597644">moduleClass</a>.<a href="../internal/Symbols.scala.html#453573" title="ToolBoxGlobal.this.Position" id="597653">newMethod</a><span class="delimiter">(</span><a href="SynchronizedOps.scala.html#576003" title="(s: String)ToolBoxGlobal.this.TermName">newTermName</a><a title="ToolBoxGlobal.this.TermName" id="597651" class="delimiter">(</a><span title="String(&quot;wrapper&quot;)">wrapperMethodName</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(fv: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.TermSymbol" id="597400">makeParam</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Symbol" id="597654">fv</a>: <a href="../internal/Symbols.scala.html#441132" title="ToolBoxGlobal.this.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
            // [Eugene] conventional way of doing this?
            <span class="keyword">val</span> <a title="ToolBoxGlobal.this.Type" id="597655">underlying</a> = <a href="#597654" title="ToolBoxGlobal.this.Symbol">fv</a>.<a href="../internal/Symbols.scala.html#443425" title="=&gt; ToolBoxGlobal.this.Type">tpe</a>.<a href="../internal/Types.scala.html#442002" title="=&gt; ToolBoxGlobal.this.Type">resultType</a>
            <span class="keyword">val</span> <a title="ToolBoxGlobal.this.Type" id="597656">tpe</a> = <a href="../internal/Types.scala.html#441377" title="(tycon: ToolBoxGlobal.this.Type, args: List[ToolBoxGlobal.this.Type])ToolBoxGlobal.this.Type">appliedType</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#441641" title="ToolBoxGlobal.this.definitions.type">definitions</a>.<a href="../../Array.scala.html#57450" title="(i: Int)ToolBoxGlobal.this.Symbol">FunctionClass</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../internal/Symbols.scala.html#443425" title="=&gt; ToolBoxGlobal.this.Type">tpe</a>, <a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.Type*)List[ToolBoxGlobal.this.Type]">List</a><span class="delimiter">(</span><a href="#597655" title="ToolBoxGlobal.this.Type">underlying</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#597399" title="ToolBoxGlobal.this.MethodSymbol">meth</a>.<a href="../internal/Symbols.scala.html#443175" title="(name: ToolBoxGlobal.this.TermName, pos: ToolBoxGlobal.this.Position, newFlags: Long)ToolBoxGlobal.this.TermSymbol">newValueParameter</a><span class="delimiter">(</span><a href="../../collection/MapLike.scala.html#78420" title="(key: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.TermName">freeTermNames</a><span class="delimiter">(</span><a href="#597654" title="ToolBoxGlobal.this.Symbol">fv</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../internal/Symbols.scala.html#443429" title="(info: ToolBoxGlobal.this.Type)ToolBoxGlobal.this.TermSymbol">setInfo</a> <a href="#597656" title="ToolBoxGlobal.this.Type">tpe</a>
          <span class="delimiter">}</span>
          <a href="#597399" title="ToolBoxGlobal.this.MethodSymbol">meth</a> <a href="../internal/Symbols.scala.html#443429" title="(info: ToolBoxGlobal.this.Type)meth.type">setInfo</a> <a href="../internal/Types.scala.html#448348" title="(params: List[ToolBoxGlobal.this.Symbol], resultType: ToolBoxGlobal.this.Type)ToolBoxGlobal.this.MethodType">MethodType</a><span class="delimiter">(</span><a href="#597394" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ToolBoxGlobal.this.FreeTerm =&gt; ToolBoxGlobal.this.TermSymbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[ToolBoxGlobal.this.FreeTerm],ToolBoxGlobal.this.TermSymbol,List[ToolBoxGlobal.this.Symbol]])List[ToolBoxGlobal.this.Symbol]">map</a> <a href="#597400" title="(fv: ToolBoxGlobal.this.Symbol)ToolBoxGlobal.this.TermSymbol">makeParam</a>, <a href="../internal/Definitions.scala.html#442175" title="=&gt; ToolBoxGlobal.this.ClassSymbol">AnyClass</a>.<a href="../internal/Symbols.scala.html#443721" title="=&gt; ToolBoxGlobal.this.Type">tpe</a><span class="delimiter">)</span>
          <a href="#597398" title="ToolBoxGlobal.this.ClassInfoType">minfo</a>.<a href="../internal/Types.scala.html#453483" title="=&gt; ToolBoxGlobal.this.Scope">decls</a> <a href="../internal/Scopes.scala.html#447331" title="(sym: ToolBoxGlobal.this.MethodSymbol)ToolBoxGlobal.this.MethodSymbol">enter</a> <a href="#597399" title="ToolBoxGlobal.this.MethodSymbol">meth</a>
          <a href="../../tools/nsc/util/SimpleTracer.scala.html#563196" title="(msg: String)(value: (ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.MethodSymbol))(ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.MethodSymbol)">trace</a><span class="delimiter">(</span><span title="String(&quot;wrapping &quot;)" class="string">&quot;wrapping &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#597393" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Symbol">defOwner</a><a href="../../Predef.scala.html#8484" title="(x: ToolBoxGlobal.this.Symbol)ArrowAssoc[ToolBoxGlobal.this.Symbol]" class="delimiter">(</a><a href="#597396" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#63591" title="(y: ToolBoxGlobal.this.MethodSymbol)(ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.MethodSymbol)">-&gt;</a> <a href="#597399" title="ToolBoxGlobal.this.MethodSymbol">meth</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="ToolBoxGlobal.this.DefDef" id="597401">methdef</a> = <a href="../internal/Trees.scala.html#441824" title="(sym: ToolBoxGlobal.this.Symbol, rhs: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.DefDef">DefDef</a><span class="delimiter">(</span><a href="#597399" title="ToolBoxGlobal.this.MethodSymbol">meth</a>, <a href="../internal/Trees.scala.html#441814" title="implicit scala.reflect.internal.Trees.TreeOps : (tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.TreeOps">expr</a> <a href="../internal/Trees.scala.html#443957" title="(pairs: (ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.Symbol)*)ToolBoxGlobal.this.Tree">changeOwner</a> <span class="delimiter">(</span><a href="#597393" title="(tree: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Symbol">defOwner</a><a href="../../Predef.scala.html#8484" title="(x: ToolBoxGlobal.this.Symbol)ArrowAssoc[ToolBoxGlobal.this.Symbol]" class="delimiter">(</a><a href="#597396" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#63591" title="(y: ToolBoxGlobal.this.MethodSymbol)(ToolBoxGlobal.this.Symbol, ToolBoxGlobal.this.MethodSymbol)">-&gt;</a> <a href="#597399" title="ToolBoxGlobal.this.MethodSymbol">meth</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="ToolBoxGlobal.this.ModuleDef" id="597402">moduledef</a> = <a href="../internal/Trees.scala.html#441816" title="(sym: ToolBoxGlobal.this.Symbol, impl: ToolBoxGlobal.this.Template)ToolBoxGlobal.this.ModuleDef">ModuleDef</a><span class="delimiter">(</span>
              <a href="#597397" title="ToolBoxGlobal.this.ModuleSymbol">obj</a>,
              <a href="../../tools/nsc/ast/Trees.scala.html#559836" title="(parents: List[ToolBoxGlobal.this.Tree], self: ToolBoxGlobal.this.ValDef, constrMods: ToolBoxGlobal.this.Modifiers, vparamss: List[List[ToolBoxGlobal.this.ValDef]], argss: List[List[ToolBoxGlobal.this.Tree]], body: List[ToolBoxGlobal.this.Tree], superPos: ToolBoxGlobal.this.Position)ToolBoxGlobal.this.Template">Template</a><span class="delimiter">(</span>
                  <a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.TypeTree*)List[ToolBoxGlobal.this.TypeTree]">List</a><span class="delimiter">(</span><a href="../api/Trees.scala.html#23746" title="(tp: ToolBoxGlobal.this.Type)ToolBoxGlobal.this.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#442179" title="=&gt; ToolBoxGlobal.this.ClassSymbol">ObjectClass</a>.<a href="../internal/Symbols.scala.html#443721" title="=&gt; ToolBoxGlobal.this.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../internal/Trees.scala.html#441819" title="ToolBoxGlobal.this.emptyValDef.type">emptyValDef</a>,
                  <a href="../internal/Trees.scala.html#441811" title="=&gt; ToolBoxGlobal.this.Modifiers">NoMods</a>,
                  List<a href="../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>,
                  <a href="../../collection/immutable/List.scala.html#63291" title="(xs: List[Nothing]*)List[List[Nothing]]">List</a><span class="delimiter">(</span>List<a href="../../collection/immutable/List.scala.html#11552" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.DefDef*)List[ToolBoxGlobal.this.DefDef]">List</a><span class="delimiter">(</span><a href="#597401" title="ToolBoxGlobal.this.DefDef">methdef</a><span class="delimiter">)</span>,
                  <a href="../internal/Positions.scala.html#441880" title="=&gt; tools.nsc.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../tools/nsc/util/SimpleTracer.scala.html#563196" title="(msg: String)(value: String)String">trace</a><span class="delimiter">(</span><span title="String(&quot;wrapped: &quot;)" class="string">&quot;wrapped: &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#594781" title="(tree: ToolBoxGlobal.this.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String">showAttributed</a><span class="delimiter">(</span><a href="#597402" title="ToolBoxGlobal.this.ModuleDef">moduledef</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">var</span> <a title="ToolBoxGlobal.this.ModuleDef" id="597403">cleanedUp</a> = <a href="../../tools/nsc/ast/Trees.scala.html#559855" title="(x: ToolBoxGlobal.this.ModuleDef, leaveAlone: ToolBoxGlobal.this.Tree =&gt; Boolean)ToolBoxGlobal.this.ModuleDef">resetLocalAttrs</a><span class="delimiter">(</span><a href="#597402" title="ToolBoxGlobal.this.ModuleDef">moduledef</a><span class="delimiter">)</span>
          <a href="../../tools/nsc/util/SimpleTracer.scala.html#563196" title="(msg: String)(value: String)String">trace</a><span class="delimiter">(</span><span title="String(&quot;cleaned up: &quot;)" class="string">&quot;cleaned up: &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#594781" title="(tree: ToolBoxGlobal.this.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String">showAttributed</a><span class="delimiter">(</span><a href="#597403" title="ToolBoxGlobal.this.ModuleDef">cleanedUp</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#597403" title="ToolBoxGlobal.this.ModuleDef">cleanedUp</a>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="ToolBoxGlobal.this.Tree" id="597382">mdef</a> = <a href="#597381" title="(expr0: ToolBoxGlobal.this.Tree)ToolBoxGlobal.this.Tree">wrapExpr</a><span class="delimiter">(</span><a href="#597380" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="ToolBoxGlobal.this.PackageDef" id="597383">pdef</a> = <a href="../api/Trees.scala.html#434059" title="(pid: ToolBoxGlobal.this.RefTree, stats: List[ToolBoxGlobal.this.Tree])ToolBoxGlobal.this.PackageDef">PackageDef</a><span class="delimiter">(</span><a href="../api/Trees.scala.html#427669" title="(name: ToolBoxGlobal.this.Name)ToolBoxGlobal.this.Ident">Ident</a><span class="delimiter">(</span><a href="../internal/StdNames.scala.html#441764" title="ToolBoxGlobal.this.nme.type">nme</a>.<a href="../internal/StdNames.scala.html#445852" title="=&gt; ToolBoxGlobal.this.nme.NameType">EMPTY_PACKAGE_NAME</a><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.Tree*)List[ToolBoxGlobal.this.Tree]">List</a><span class="delimiter">(</span><a href="#597382" title="ToolBoxGlobal.this.Tree">mdef</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="ToolBoxGlobal.this.CompilationUnit" id="597384">unit</a> = <span title="ToolBoxGlobal.this.CompilationUnit" class="keyword">new</span> <a href="../../tools/nsc/CompilationUnits.scala.html#559797" title="ToolBoxGlobal.this.CompilationUnit">CompilationUnit</a><span class="delimiter">(</span><a href="../../tools/nsc/util/SourceFile.scala.html#52069" title="scala.tools.nsc.util.NoSourceFile.type">NoSourceFile</a><span class="delimiter">)</span>
        <a href="#597384" title="ToolBoxGlobal.this.CompilationUnit">unit</a>.<a href="../../tools/nsc/CompilationUnits.scala.html#560801" title="(x$1: ToolBoxGlobal.this.Tree)Unit">body</a> = <a href="#597383" title="ToolBoxGlobal.this.PackageDef">pdef</a>

        <span class="keyword">val</span> <a title="ToolBoxGlobal.this.Run" id="597385">run</a> = <span title="ToolBoxGlobal.this.Run" class="keyword">new</span> <a href="../../tools/nsc/Global.scala.html#559768" title="ToolBoxGlobal.this.Run">Run</a>
        <a href="#594788" title="scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../tools/nsc/reporters/Reporter.scala.html#467877" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#597385" title="ToolBoxGlobal.this.Run">run</a>.<a href="../../tools/nsc/Global.scala.html#561363" title="(units: List[ToolBoxGlobal.this.CompilationUnit], fromPhase: scala.tools.nsc.Phase)Unit">compileUnits</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#63291" title="(xs: ToolBoxGlobal.this.CompilationUnit*)List[ToolBoxGlobal.this.CompilationUnit]">List</a><span class="delimiter">(</span><a href="#597384" title="ToolBoxGlobal.this.CompilationUnit">unit</a><span class="delimiter">)</span>, <a href="#597385" title="ToolBoxGlobal.this.Run">run</a>.<a href="../../tools/nsc/Global.scala.html#561317" title="=&gt; scala.tools.nsc.Phase">namerPhase</a><span class="delimiter">)</span>
        <a href="#594782" title="()Unit">throwIfErrors</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="String" id="597386">className</a> = <a href="#597382" title="ToolBoxGlobal.this.Tree">mdef</a>.<a href="../api/Trees.scala.html#425064" title="=&gt; ToolBoxGlobal.this.Symbol">symbol</a>.<a href="../internal/Symbols.scala.html#443398" title="=&gt; String">fullName</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467500" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">debug</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;generated: &quot;)" class="string">&quot;generated: &quot;</span><span title="(x$1: Any)String">+</span><a href="#597386" title="String">className</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(className: String)String" id="597387">moduleFileName</a><span class="delimiter">(</span><a title="String" id="598131">className</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#598131" title="String">className</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
        <span class="keyword">val</span> <a title="Class[_]" id="597388">jclazz</a> = <span title="Class.type">jClass</span>.<span title="(x$1: String, x$2: Boolean, x$3: ClassLoader)Class[_]">forName</span><span class="delimiter">(</span><a href="#597387" title="(className: String)String">moduleFileName</a><span class="delimiter">(</span><a href="#597386" title="String">className</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="../../tools/nsc/ReflectGlobal.scala.html#594756" title="=&gt; ClassLoader">classLoader</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="597389">jmeth</a> = <a href="#597388" title="Class[_]">jclazz</a>.<a href="../../Predef.scala.html#8521" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getDeclaredMethods</a>.<a href="../../collection/IndexedSeqOptimized.scala.html#60084" title="(p: java.lang.reflect.Method =&gt; Boolean)Option[java.lang.reflect.Method]">find</a><span class="delimiter">(</span><a href="#598396" title="java.lang.reflect.Method">_</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;wrapper&quot;)">wrapperMethodName</span><span class="delimiter">)</span>.<a href="../../Option.scala.html#63813" title="=&gt; java.lang.reflect.Method">get</a>
        <span class="keyword">val</span> <a title="java.lang.reflect.Field" id="597390">jfield</a> = <a href="#597388" title="Class[_]">jclazz</a>.<a href="../../Predef.scala.html#8521" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">getDeclaredFields</a>.<a href="../../collection/IndexedSeqOptimized.scala.html#60084" title="(p: java.lang.reflect.Field =&gt; Boolean)Option[java.lang.reflect.Field]">find</a><span class="delimiter">(</span><a href="#598662" title="java.lang.reflect.Field">_</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../NameTransformer.scala.html#3394" title="scala.reflect.NameTransformer.type">NameTransformer</a>.<a href="../NameTransformer.scala.html#77848" title="=&gt; String">MODULE_INSTANCE_NAME</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#63813" title="=&gt; java.lang.reflect.Field">get</a>
        <span class="keyword">val</span> <a title="Object" id="597391">singleton</a> = <a href="#597390" title="java.lang.reflect.Field">jfield</a>.<span title="(x$1: Any)Object">get</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <a href="../../Tuple2.scala.html#63804" title="(_1: Object, _2: java.lang.reflect.Method)(Object, java.lang.reflect.Method)" class="delimiter">(</a><a href="#597391" title="Object">singleton</a>, <a href="#597389" title="java.lang.reflect.Method">jmeth</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(expr: ToolBoxGlobal.this.Tree, freeTypes: Map[ToolBoxGlobal.this.TypeName,ToolBoxGlobal.this.Type])Any" id="594780">runExpr</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="598674">expr</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a>, <a title="Map[ToolBoxGlobal.this.TypeName,ToolBoxGlobal.this.Type]" id="598676">freeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBoxGlobal.this.TypeName,ToolBoxGlobal.this.Type]">Map</a><span class="delimiter">[</span>TypeName, Type<span class="delimiter">]</span> = <a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxGlobal.this.TypeName, ToolBoxGlobal.this.Type)*)scala.collection.immutable.Map[ToolBoxGlobal.this.TypeName,ToolBoxGlobal.this.Type]" class="delimiter">[</span><a href="../internal/Names.scala.html#440799" title="ToolBoxGlobal.this.TypeName">TypeName</a>, <a href="../internal/Types.scala.html#441242" title="ToolBoxGlobal.this.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[ToolBoxGlobal.this.FreeTerm]" id="598678">freeTerms</a> = <a href="#594719" title="ToolBoxGlobal.this.type" class="keyword">this</a>.<a href="../internal/FreeVars.scala.html#441192" title="(tree: ToolBoxGlobal.this.Tree)List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a><span class="delimiter">(</span><a href="#598674" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span> // need to calculate them here, because later on they will be erased
        <span class="keyword">val</span> <a title="List[() =&gt; Any]" id="598679">thunks</a> = <a href="#598678" title="List[ToolBoxGlobal.this.FreeTerm]">freeTerms</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ToolBoxGlobal.this.FreeTerm =&gt; (() =&gt; Any))(implicit bf: scala.collection.generic.CanBuildFrom[List[ToolBoxGlobal.this.FreeTerm],() =&gt; Any,List[() =&gt; Any]])List[() =&gt; Any]">map</a> <span class="delimiter">(</span><a title="ToolBoxGlobal.this.FreeTerm" id="598699">fte</a> =&gt; <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#598699" title="ToolBoxGlobal.this.FreeTerm">fte</a>.<a href="../internal/Symbols.scala.html#466277" title="=&gt; Any">value</a><span class="delimiter">)</span> // need to be lazy in order not to distort evaluation order

        // @odersky writes: Not sure we will be able to drop this. I forgot the reason why we dereference () functions,
        // but there must have been one. So I propose to leave old version in comments to be resurrected if the problem resurfaces.
        // @Eugene writes: this dates back to the days when one could only reify functions
        // hence, blocks were translated into nullary functions, so
        // presumably, it was useful to immediately evaluate them to get the result of a block
//        val result = jmeth.invoke(singleton, freeTerms map (sym =&gt; sym.asInstanceOf[FreeTermVar].value.asInstanceOf[AnyRef]): _*)
//        if (etpe.typeSymbol != FunctionClass(0)) result
//        else {
//          val applyMeth = result.getClass.getMethod(&quot;apply&quot;)
//          applyMeth.invoke(result)
//        }
        <span class="keyword">val</span> <a href="#598740" title="(x: (Object, java.lang.reflect.Method))(Object, java.lang.reflect.Method)" class="delimiter">(</a><a href="../../Tuple2.scala.html#61506" title="Object" id="598681">singleton</a>, <a href="../../Tuple2.scala.html#61508" title="java.lang.reflect.Method" id="598682">jmeth</a><span class="delimiter">)</span> = <a href="#594779" title="(expr: ToolBoxGlobal.this.Tree)(Object, java.lang.reflect.Method)">compileExpr</a><a href="../../Tuple2.scala.html#1222" title="(Object, java.lang.reflect.Method) @unchecked" class="delimiter">(</a><a href="#598674" title="ToolBoxGlobal.this.Tree">expr</a><span class="delimiter">)</span>
        <a href="#598682" title="java.lang.reflect.Method">jmeth</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><a href="#598681" title="Object">singleton</a>, <a href="#598679" title="List[() =&gt; Any]">thunks</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: (() =&gt; Any) =&gt; AnyRef)(implicit bf: scala.collection.generic.CanBuildFrom[List[() =&gt; Any],AnyRef,List[AnyRef]])List[AnyRef]">map</a> <span class="delimiter">(</span><a href="#598760" title="() =&gt; Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(tree: ToolBoxGlobal.this.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String" id="594781">showAttributed</a><span class="delimiter">(</span><a title="ToolBoxGlobal.this.Tree" id="596947">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxGlobal.this.Tree">Tree</a>, <a title="Boolean" id="596951">printTypes</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="596952">printIds</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="596953">printKinds</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Boolean" id="598788">saved1</a> = <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467454" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">printtypes</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a>
        <span class="keyword">val</span> <a title="Boolean" id="598789">saved2</a> = <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467681" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">uniqid</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a>
        <span class="keyword">val</span> <a title="Boolean" id="598790">saved3</a> = <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a>
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467454" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">printtypes</a>.<a href="../internal/settings/MutableSettings.scala.html#456450" title="(arg: ToolBoxGlobal.this.settings.printtypes.T)Unit">value</a> = <a href="#596951" title="Boolean">printTypes</a>
          <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467681" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">uniqid</a>.<a href="../internal/settings/MutableSettings.scala.html#456450" title="(arg: ToolBoxGlobal.this.settings.uniqid.T)Unit">value</a> = <a href="#596952" title="Boolean">printIds</a>
          <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../internal/settings/MutableSettings.scala.html#456450" title="(arg: ToolBoxGlobal.this.settings.Yshowsymkinds.T)Unit">value</a> = <a href="#596953" title="Boolean">printKinds</a>
          <a href="#596947" title="ToolBoxGlobal.this.Tree">tree</a>.<a href="../api/Trees.scala.html#425088" title="()String">toString</a>
        <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
          <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467454" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">printtypes</a>.<a href="../internal/settings/MutableSettings.scala.html#456450" title="(arg: ToolBoxGlobal.this.settings.printtypes.T)Unit">value</a> = <a href="#598788" title="Boolean">saved1</a>
          <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467681" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">uniqid</a>.<a href="../internal/settings/MutableSettings.scala.html#456450" title="(arg: ToolBoxGlobal.this.settings.uniqid.T)Unit">value</a> = <a href="#598789" title="Boolean">saved2</a>
          <a href="#594787" title="scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/ScalaSettings.scala.html#467542" title="=&gt; ToolBoxGlobal.this.settings.BooleanSetting">Yshowsymkinds</a>.<a href="../internal/settings/MutableSettings.scala.html#456450" title="(arg: ToolBoxGlobal.this.settings.Yshowsymkinds.T)Unit">value</a> = <a href="#598790" title="Boolean">saved3</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // reporter doesn't accumulate errors, but the front-end does
      <span class="keyword">def</span> <a title="()Unit" id="594782">throwIfErrors</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<a href="../api/FrontEnds.scala.html#425400" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="String" id="597999">msg</a> = <span title="String(&quot;reflective compilation has failed: &quot;)" class="string">&quot;reflective compilation has failed: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a> <span title="(x$1: Any)String">+</span> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a>
          <a href="#597999" title="String">msg</a> <span title="(x$1: Any)String">+=</span> <a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<a href="../api/FrontEnds.scala.html#425405" title="=&gt; scala.collection.mutable.LinkedHashSet[ToolBox.this.frontEnd.Info]">infos</a> <a href="../../collection/SetLike.scala.html#71313" title="(f: ToolBox.this.frontEnd.Info =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.LinkedHashSet[ToolBox.this.frontEnd.Info],String,scala.collection.mutable.LinkedHashSet[String]])scala.collection.mutable.LinkedHashSet[String]">map</a> <span class="delimiter">(</span><a href="#598024" title="ToolBox.this.frontEnd.Info">_</a>.<a href="../api/FrontEnds.scala.html#431992" title="=&gt; String">msg</a><span class="delimiter">)</span> <a href="../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a>
          <span title="Nothing" class="keyword">throw</span> <a href="#596458" title="ToolBox.this.ToolBoxError" class="keyword">new</a> <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#591666" title="ToolBoxes.this.ToolBox">ToolBox</a>.<span class="keyword">this</span>, <a href="#597999" title="String">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    // todo. is not going to work with quoted arguments with embedded whitespaces
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Array[String]" id="594721">arguments</a> = <a href="#594747" title="=&gt; String">options</a>.<span title="(x$1: String)Array[String]">split</span><span class="delimiter">(</span><span title="String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="594723">virtualDirectory</a> =
      <span class="delimiter">(</span><a href="../../Predef.scala.html#8521" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">arguments</a> <a href="../../Predef.scala.html#8521" title="(xs: Array[(String, String)])scala.collection.mutable.ArrayOps[(String, String)]">zip</a> <a href="../../Predef.scala.html#8521" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">arguments</a>.<a href="../../LowPriorityImplicits.scala.html#8350" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">tail</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8521" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">collect</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[(String, String),String] with Serializable" id="596182" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="#596181" title="B1" id="596192" class="string">&quot;-d&quot;</a>, dir<span class="delimiter">)</span> =&gt; <a href="#596178" title="(x: B1)B1">dir</a> <span class="delimiter">}</span> <a href="../../collection/TraversableLike.scala.html#59014" title="=&gt; Option[String]">lastOption</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<a href="#596399" title="scala.tools.nsc.io.AbstractFile" id="596400" class="delimiter">(</a>outDir<span class="delimiter">)</span> =&gt; scala.tools.nsc.io.<a href="../../tools/nsc/io/AbstractFile.scala.html#41085" title="scala.tools.nsc.io.AbstractFile.type">AbstractFile</a>.<a href="../../tools/nsc/io/AbstractFile.scala.html#596338" title="(path: scala.tools.nsc.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a><a href="#596403" title="(x: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile" class="delimiter">(</a><a href="../../tools/nsc/io/Path.scala.html#480277" title="implicit scala.tools.nsc.io.Path.string2path : (s: String)scala.tools.nsc.io.Path">outDir</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../Option.scala.html#2498" title="scala.tools.nsc.io.AbstractFile" id="596402">None</a> =&gt; <a href="#596403" title="(x: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile" class="keyword">new</a> <a href="../../tools/nsc/io/VirtualDirectory.scala.html#40772" title="scala.tools.nsc.io.VirtualDirectory">VirtualDirectory</a><span class="delimiter">(</span><span title="String(&quot;(memory)&quot;)" class="string">&quot;(memory)&quot;</span>, <a href="../../Option.scala.html#2498" title="None.type">None</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ToolBox.this.ToolBoxGlobal" id="594725">compiler</a>: <a href="#594719" title="ToolBox.this.ToolBoxGlobal">ToolBoxGlobal</a> = <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="String =&gt; Unit" id="598799">errorFn</a>: String =&gt; Unit = <a title="String" id="598803">msg</a> =&gt; <a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<a href="../api/FrontEnds.scala.html#425407" title="(pos: ToolBoxes.this.Position, msg: String, severity: ToolBox.this.frontEnd.Severity)Unit">log</a><span class="delimiter">(</span><a href="../internal/Positions.scala.html#441880" title="=&gt; tools.nsc.util.NoPosition.type">NoPosition</a>, <a href="#598803" title="String">msg</a>, <a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<a href="../api/FrontEnds.scala.html#425398" title="=&gt; ToolBox.this.frontEnd.Severity">ERROR</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="598800">command</a> = <a href="../../tools/nsc/CompilerCommand.scala.html#598813" title="(arguments: List[String], error: String =&gt; Unit)scala.tools.nsc.CompilerCommand" class="keyword">new</a> <a href="../../tools/nsc/CompilerCommand.scala.html#28351" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="../../Predef.scala.html#8521" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">arguments</a>.<a href="../../collection/TraversableOnce.scala.html#59174" title="=&gt; List[String]">toList</a>, <a href="#598799" title="String =&gt; Unit">errorFn</a><span class="delimiter">)</span>
        <a href="#598800" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../tools/nsc/CompilerCommand.scala.html#598810" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467280" title="=&gt; command.settings.OutputDirs">outputDirs</a> <a href="../../tools/nsc/settings/MutableSettings.scala.html#598973" title="(dir: scala.tools.nsc.io.AbstractFile)Unit">setSingleOutput</a> <a href="#594722" title="=&gt; scala.tools.nsc.io.AbstractFile">virtualDirectory</a>
        <span class="keyword">val</span> <a title="ToolBox.this.ToolBoxGlobal" id="598801">instance</a> = <span title="ToolBox.this.ToolBoxGlobal" class="keyword">new</span> <a href="#594719" title="ToolBox.this.ToolBoxGlobal">ToolBoxGlobal</a><span class="delimiter">(</span><a href="#598800" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../tools/nsc/CompilerCommand.scala.html#598810" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#598984" title="ToolBoxes.this.FrontEndToReporterProxy{}" class="keyword">new</a> <a href="../internal/FrontEnds.scala.html#441932" title="anonymous class $anon extends ToolBoxes.this.FrontEndToReporterProxy" id="598984">FrontEndToReporterProxy</a><span class="delimiter">(</span><a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="598986">settings</a> = <a href="#598800" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../tools/nsc/CompilerCommand.scala.html#598810" title="=&gt; scala.tools.nsc.Settings">settings</a> <span class="delimiter">}</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<a href="../api/FrontEnds.scala.html#425400" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="String" id="598992">msg</a> = <span title="String(&quot;reflective compilation has failed: cannot initialize the compiler: &quot;)" class="string">&quot;reflective compilation has failed: cannot initialize the compiler: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a> <span title="(x$1: Any)String">+</span> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a>
          <a href="#598992" title="String">msg</a> <span title="(x$1: Any)String">+=</span> <a href="#594746" title="=&gt; ToolBoxes.this.FrontEnd">frontEnd</a>.<a href="../api/FrontEnds.scala.html#425405" title="=&gt; scala.collection.mutable.LinkedHashSet[ToolBox.this.frontEnd.Info]">infos</a> <a href="../../collection/SetLike.scala.html#71313" title="(f: ToolBox.this.frontEnd.Info =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.LinkedHashSet[ToolBox.this.frontEnd.Info],String,scala.collection.mutable.LinkedHashSet[String]])scala.collection.mutable.LinkedHashSet[String]">map</a> <span class="delimiter">(</span><a href="#599015" title="ToolBox.this.frontEnd.Info">_</a>.<a href="../api/FrontEnds.scala.html#431992" title="=&gt; String">msg</a><span class="delimiter">)</span> <a href="../../collection/TraversableOnce.scala.html#59190" title="(sep: String)String">mkString</a> <a href="../../compat/Platform.scala.html#67813" title="=&gt; String">EOL</a>
          <span title="Nothing" class="keyword">throw</span> <a href="#596458" title="ToolBox.this.ToolBoxError" class="keyword">new</a> <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#591666" title="ToolBoxes.this.ToolBox" class="keyword">this</a>, <a href="#598992" title="String">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#598801" title="ToolBox.this.ToolBoxGlobal">instance</a>.<a href="../internal/SymbolTable.scala.html#440595" title="(p: scala.reflect.internal.Phase)Unit">phase</a> = <span class="delimiter">(</span><span title="instance.Run" class="keyword">new</span> <a href="#598801" title="ToolBox.this.ToolBoxGlobal">instance</a>.<a href="../../tools/nsc/Global.scala.html#559768" title="instance.Run">Run</a><span class="delimiter">)</span>.<a href="../../tools/nsc/Global.scala.html#561319" title="=&gt; scala.tools.nsc.Phase">typerPhase</a> // need to manually set a phase, because otherwise TypeHistory will crash
        <a href="#598801" title="ToolBox.this.ToolBoxGlobal">instance</a>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="599054">ex</a>: <span title="Throwable">Throwable</span> =&gt;
          <span class="keyword">var</span> <a title="String" id="599055">msg</a> = <a href="../../Predef.scala.html#8578" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;reflective compilation has failed: cannot initialize the compiler due to %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#60730" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#599054" title="Throwable">ex</a>.<span title="()String">toString</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="ToolBox.this.ToolBoxError" class="keyword">new</span> <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">(</span><a href="#591666" title="ToolBoxes.this.ToolBox" class="keyword">this</a>, <a href="#599055" title="String">msg</a>, <a href="#599054" title="Throwable">ex</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    // @Eugene: how do I make this work without casts?
    // lazy val importer = compiler.mkImporter(self)
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ToolBox extends ToolBox.this.compiler.Importer" id="594727">importer</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../internal/Importers.scala.html#441903" title="(from0: scala.reflect.api.Universe)ToolBox.this.compiler.Importer{val from: from0.type}">mkImporter</a><span class="delimiter">(</span><a href="#24912" title="scala.reflect.runtime.Universe">self</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ToolBox extends ToolBox.this.compiler.Importer" class="delimiter">[</span>compiler.<a href="#599067" title="ToolBox extends ToolBox.this.compiler.Importer">Importer</a> <span class="delimiter">{</span> <span class="keyword">val</span> from: self.<span class="keyword">type</span> <span class="delimiter">}</span><span class="delimiter">]</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Importer extends ToolBox.this.importer.from.Importer" id="594729">exporter</a> = <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425119" title="=&gt; ToolBox.this.importer.from.Importer{val from: ToolBox.this.compiler.type}">reverse</a>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.AbstractFileClassLoader" id="594731">classLoader</a> = <span title="scala.tools.nsc.interpreter.AbstractFileClassLoader" class="keyword">new</span> <a href="../../tools/nsc/interpreter/AbstractFileClassLoader.scala.html#38448" title="scala.tools.nsc.interpreter.AbstractFileClassLoader">AbstractFileClassLoader</a><span class="delimiter">(</span><a href="#594722" title="=&gt; scala.tools.nsc.io.AbstractFile">virtualDirectory</a>, <a href="#24912" title="ToolBoxes.this.type">self</a>.<a href="JavaToScala.scala.html#575935" title="=&gt; ClassLoader">classLoader</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(tree: ToolBoxes.this.Tree, expectedType: ToolBoxes.this.Type, freeTypes: Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type], silent: Boolean, withImplicitViewsDisabled: Boolean, withMacrosDisabled: Boolean)ToolBoxes.this.Tree" id="594732">typeCheck</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="599072">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="ToolBoxes.this.Type" id="599085">expectedType</a>: <a href="../internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a> = <a href="../internal/Types.scala.html#441251" title="ToolBoxes.this.WildcardType.type">WildcardType</a>, <a title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" id="599086">freeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">Map</a><span class="delimiter">[</span>FreeType, Type<span class="delimiter">]</span> = <a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxes.this.FreeType, ToolBoxes.this.Type)*)scala.collection.immutable.Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" class="delimiter">[</span><a href="../internal/Symbols.scala.html#441149" title="ToolBoxes.this.FreeType">FreeType</a>, <a href="../internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Boolean" id="599087">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="599088">withImplicitViewsDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="599089">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467685" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;typing &quot;)" class="string">&quot;typing &quot;</span><span title="(x$1: Any)String">+</span><a href="#599072" title="ToolBoxes.this.Tree">tree</a><span title="(x$1: Any)String">+</span><span title="String(&quot;, expectedType = &quot;)" class="string">&quot;, expectedType = &quot;</span><span title="(x$1: Any)String">+</span><a href="#599085" title="ToolBoxes.this.Type">expectedType</a><span title="(x$1: Any)String">+</span><span title="String(&quot;, freeTypes = &quot;)" class="string">&quot;, freeTypes = &quot;</span><span title="(x$1: Any)String">+</span><a href="#599086" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">freeTypes</a><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="ToolBox.this.compiler.Tree" id="599091">ctree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.importer.from.Tree)ToolBox.this.compiler.Tree">importTree</a><span class="delimiter">(</span><a href="#599072" title="ToolBoxes.this.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="ToolBox.this.compiler.Type" id="599092">cexpectedType</a>: compiler.<a href="../internal/Types.scala.html#441242" title="ToolBox.this.compiler.Type">Type</a> = <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425121" title="(tpe: ToolBox.this.importer.from.Type)ToolBox.this.compiler.Type">importType</a><span class="delimiter">(</span><a href="#599085" title="ToolBoxes.this.Type">expectedType</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467685" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;substituting &quot;)" class="string">&quot;substituting &quot;</span><span title="(x$1: Any)String">+</span><a href="#599091" title="ToolBox.this.compiler.Tree">ctree</a><span title="(x$1: Any)String">+</span><span title="String(&quot;, expectedType = &quot;)" class="string">&quot;, expectedType = &quot;</span><span title="(x$1: Any)String">+</span><a href="#599085" title="ToolBoxes.this.Type">expectedType</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]" id="599093">cfreeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">Map</a><span class="delimiter">[</span>compiler.FreeType, compiler.Type<span class="delimiter">]</span> = <a href="#599086" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">freeTypes</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ((ToolBoxes.this.FreeType, ToolBoxes.this.Type)) =&gt; (ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type],(ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type),Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]])Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">map</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[(ToolBoxes.this.FreeType, ToolBoxes.this.Type),(ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type)] with Serializable" id="599126" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span>k, v<span class="delimiter">)</span> =&gt; <a href="#599141" title="(x: (ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type))(ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type)" class="delimiter">(</a><a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425120" title="(sym: ToolBox.this.importer.from.Symbol)ToolBox.this.compiler.Symbol">importSymbol</a><span class="delimiter">(</span>k<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ToolBox.this.compiler.FreeType" class="delimiter">[</span>compiler.<a href="../internal/Symbols.scala.html#441149" title="ToolBox.this.compiler.FreeType">FreeType</a><span class="delimiter">]</span>, <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425121" title="(tpe: ToolBox.this.importer.from.Type)ToolBox.this.compiler.Type">importType</a><span class="delimiter">(</span>v<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#599091" title="ToolBox.this.compiler.Tree">ctree</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../internal/FreeVars.scala.html#441194" title="(tree0: ToolBox.this.compiler.Tree, subs: Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type])ToolBox.this.compiler.Tree">substituteFreeTypes</a><span class="delimiter">(</span><a href="#599091" title="ToolBox.this.compiler.Tree">ctree</a>, <a href="#599093" title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">cfreeTypes</a><span class="delimiter">)</span>
      <a href="#599092" title="ToolBox.this.compiler.Type">cexpectedType</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../internal/FreeVars.scala.html#441195" title="(tpe0: ToolBox.this.compiler.Type, subs: Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type])ToolBox.this.compiler.Type">substituteFreeTypes</a><span class="delimiter">(</span><a href="#599092" title="ToolBox.this.compiler.Type">cexpectedType</a>, <a href="#599093" title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">cfreeTypes</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467685" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;typing &quot;)" class="string">&quot;typing &quot;</span><span title="(x$1: Any)String">+</span><a href="#599091" title="ToolBox.this.compiler.Tree">ctree</a><span title="(x$1: Any)String">+</span><span title="String(&quot;, expectedType = &quot;)" class="string">&quot;, expectedType = &quot;</span><span title="(x$1: Any)String">+</span><a href="#599085" title="ToolBoxes.this.Type">expectedType</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.compiler.Tree" id="599094">ttree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="#594778" title="(expr0: ToolBox.this.compiler.Tree, pt: ToolBox.this.compiler.Type, silent: Boolean, withImplicitViewsDisabled: Boolean, withMacrosDisabled: Boolean)ToolBox.this.compiler.Tree">typeCheckExpr</a><span class="delimiter">(</span><a href="#599091" title="ToolBox.this.compiler.Tree">ctree</a>, <a href="#599092" title="ToolBox.this.compiler.Type">cexpectedType</a>, silent = <a href="#599087" title="Boolean">silent</a>, withImplicitViewsDisabled = <a href="#599088" title="Boolean">withImplicitViewsDisabled</a>, withMacrosDisabled = <a href="#599089" title="Boolean">withMacrosDisabled</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.importer.from.Tree" id="599095">rmttree</a> = <a href="#594728" title="=&gt; ToolBox.this.importer.from.Importer{val from: ToolBox.this.compiler.type}">exporter</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.exporter.from.Tree)ToolBox.this.importer.from.Tree">importTree</a><span class="delimiter">(</span><a href="#599094" title="ToolBox.this.compiler.Tree">ttree</a><span class="delimiter">)</span>
      <a href="#599095" title="ToolBox.this.importer.from.Tree">rmttree</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(pt: ToolBoxes.this.Type, silent: Boolean, withMacrosDisabled: Boolean)ToolBoxes.this.Tree" id="594733">inferImplicitValue</a><span class="delimiter">(</span><a title="ToolBoxes.this.Type" id="599218">pt</a>: <a href="../internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a>, <a title="Boolean" id="599225">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="599226">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a> =
      // todo. implement this
      <a href="../../Predef.scala.html#8470" title="=&gt; Nothing">???</a>

    <span class="keyword">def</span> <a title="(tree: ToolBoxes.this.Tree, from: ToolBoxes.this.Type, to: ToolBoxes.this.Type, silent: Boolean, withMacrosDisabled: Boolean, reportAmbiguous: Boolean)ToolBoxes.this.Tree" id="594734">inferImplicitView</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="599227">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="ToolBoxes.this.Type" id="599228">from</a>: <a href="../internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a>, <a title="ToolBoxes.this.Type" id="599229">to</a>: <a href="../internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a>, <a title="Boolean" id="599240">silent</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="599241">withMacrosDisabled</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="599242">reportAmbiguous</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a> =
      // todo. implement this
      <a href="../../Predef.scala.html#8470" title="=&gt; Nothing">???</a>

    <span class="keyword">def</span> <a title="[T &lt;: ToolBoxes.this.Tree](tree: T)T" id="594735">resetAllAttrs</a><span class="delimiter">[</span><a title=" &lt;: ToolBoxes.this.Tree" id="594737">T</a> &lt;: Tree<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="599243">tree</a>: <a href="#594737" title="T">T</a><span class="delimiter">)</span>: <a href="#594737" title="T">T</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="ToolBox.this.compiler.Tree" id="599250">ctree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.importer.from.Tree)ToolBox.this.compiler.Tree">importTree</a><span class="delimiter">(</span><a href="#599243" title="T">tree</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.compiler.Tree" id="599251">ttree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/ast/Trees.scala.html#559852" title="(x: ToolBox.this.compiler.Tree, leaveAlone: ToolBox.this.compiler.Tree =&gt; Boolean)ToolBox.this.compiler.Tree">resetAllAttrs</a><span class="delimiter">(</span><a href="#599250" title="ToolBox.this.compiler.Tree">ctree</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.importer.from.Tree" id="599252">rmttree</a> = <a href="#594728" title="=&gt; ToolBox.this.importer.from.Importer{val from: ToolBox.this.compiler.type}">exporter</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.exporter.from.Tree)ToolBox.this.importer.from.Tree">importTree</a><span class="delimiter">(</span><a href="#599251" title="ToolBox.this.compiler.Tree">ttree</a><span class="delimiter">)</span>
      <a href="#599252" title="ToolBox.this.importer.from.Tree">rmttree</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#594737" title="T">T</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="[T &lt;: ToolBoxes.this.Tree](tree: T)T" id="594738">resetLocalAttrs</a><span class="delimiter">[</span><a title=" &lt;: ToolBoxes.this.Tree" id="594740">T</a> &lt;: Tree<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="599267">tree</a>: <a href="#594740" title="T">T</a><span class="delimiter">)</span>: <a href="#594740" title="T">T</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="ToolBox.this.compiler.Tree" id="599274">ctree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.importer.from.Tree)ToolBox.this.compiler.Tree">importTree</a><span class="delimiter">(</span><a href="#599267" title="T">tree</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.compiler.Tree" id="599275">ttree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/ast/Trees.scala.html#559855" title="(x: ToolBox.this.compiler.Tree, leaveAlone: ToolBox.this.compiler.Tree =&gt; Boolean)ToolBox.this.compiler.Tree">resetLocalAttrs</a><span class="delimiter">(</span><a href="#599274" title="ToolBox.this.compiler.Tree">ctree</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ToolBox.this.importer.from.Tree" id="599276">rmttree</a> = <a href="#594728" title="=&gt; ToolBox.this.importer.from.Importer{val from: ToolBox.this.compiler.type}">exporter</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.exporter.from.Tree)ToolBox.this.importer.from.Tree">importTree</a><span class="delimiter">(</span><a href="#599275" title="ToolBox.this.compiler.Tree">ttree</a><span class="delimiter">)</span>
      <a href="#599276" title="ToolBox.this.importer.from.Tree">rmttree</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#594740" title="T">T</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(tree: ToolBoxes.this.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String" id="594741">showAttributed</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="599291">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="Boolean" id="599296">printTypes</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="599297">printIds</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>, <a title="Boolean" id="599298">printKinds</a>: <a href="../../Boolean.scala.html#2218" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <span title="String">String</span> =
      <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="#594781" title="(tree: ToolBox.this.compiler.Tree, printTypes: Boolean, printIds: Boolean, printKinds: Boolean)String">showAttributed</a><span class="delimiter">(</span><a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.importer.from.Tree)ToolBox.this.compiler.Tree">importTree</a><span class="delimiter">(</span><a href="#599291" title="ToolBoxes.this.Tree">tree</a><span class="delimiter">)</span>, <a href="#599296" title="Boolean">printTypes</a>, <a href="#599297" title="Boolean">printIds</a>, <a href="#599298" title="Boolean">printKinds</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(tree: ToolBoxes.this.Tree, freeTypes: Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type])Any" id="594742">runExpr</a><span class="delimiter">(</span><a title="ToolBoxes.this.Tree" id="599304">tree</a>: <a href="../api/Trees.scala.html#23570" title="ToolBoxes.this.Tree">Tree</a>, <a title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" id="599309">freeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">Map</a><span class="delimiter">[</span>FreeType, Type<span class="delimiter">]</span> = <a href="../../collection/generic/GenMapFactory.scala.html#61654" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (ToolBoxes.this.FreeType, ToolBoxes.this.Type)*)scala.collection.immutable.Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]" class="delimiter">[</span><a href="../internal/Symbols.scala.html#441149" title="ToolBoxes.this.FreeType">FreeType</a>, <a href="../internal/Types.scala.html#441242" title="ToolBoxes.this.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467685" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;running &quot;)" class="string">&quot;running &quot;</span><span title="(x$1: Any)String">+</span><a href="#599304" title="ToolBoxes.this.Tree">tree</a><span title="(x$1: Any)String">+</span><span title="String(&quot;, freeTypes = &quot;)" class="string">&quot;, freeTypes = &quot;</span><span title="(x$1: Any)String">+</span><a href="#599309" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">freeTypes</a><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="ToolBox.this.compiler.Tree" id="599311">ctree</a>: compiler.<a href="../api/Trees.scala.html#23570" title="ToolBox.this.compiler.Tree">Tree</a> = <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425122" title="(tree: ToolBox.this.importer.from.Tree)ToolBox.this.compiler.Tree">importTree</a><span class="delimiter">(</span><a href="#599304" title="ToolBoxes.this.Tree">tree</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467685" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;substituting &quot;)" class="string">&quot;substituting &quot;</span><span title="(x$1: Any)String">+</span><a href="#599311" title="ToolBox.this.compiler.Tree">ctree</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]" id="599312">cfreeTypes</a>: <a href="../../collection/immutable/Map.scala.html#11605" title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">Map</a><span class="delimiter">[</span>compiler.FreeType, compiler.Type<span class="delimiter">]</span> = <a href="#599309" title="Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type]">freeTypes</a> <a href="../../collection/TraversableLike.scala.html#58971" title="(f: ((ToolBoxes.this.FreeType, ToolBoxes.this.Type)) =&gt; (ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[ToolBoxes.this.FreeType,ToolBoxes.this.Type],(ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type),Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]])Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">map</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractFunction1[(ToolBoxes.this.FreeType, ToolBoxes.this.Type),(ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type)] with Serializable" id="599341" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span>k, v<span class="delimiter">)</span> =&gt; <a href="#599355" title="(x: (ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type))(ToolBox.this.compiler.FreeType, ToolBox.this.compiler.Type)" class="delimiter">(</a><a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425120" title="(sym: ToolBox.this.importer.from.Symbol)ToolBox.this.compiler.Symbol">importSymbol</a><span class="delimiter">(</span>k<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ToolBox.this.compiler.FreeType" class="delimiter">[</span>compiler.<a href="../internal/Symbols.scala.html#441149" title="ToolBox.this.compiler.FreeType">FreeType</a><span class="delimiter">]</span>, <a href="#594726" title="=&gt; ToolBox.this.compiler.Importer{val from: ToolBoxes.this.type}">importer</a>.<a href="../api/Importers.scala.html#425121" title="(tpe: ToolBox.this.importer.from.Type)ToolBox.this.compiler.Type">importType</a><span class="delimiter">(</span>v<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#599311" title="ToolBox.this.compiler.Tree">ctree</a> = <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../internal/FreeVars.scala.html#441194" title="(tree0: ToolBox.this.compiler.Tree, subs: Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type])ToolBox.this.compiler.Tree">substituteFreeTypes</a><span class="delimiter">(</span><a href="#599311" title="ToolBox.this.compiler.Tree">ctree</a>, <a href="#599312" title="Map[ToolBox.this.compiler.FreeType,ToolBox.this.compiler.Type]">cfreeTypes</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="../../tools/nsc/Global.scala.html#559485" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../tools/nsc/settings/StandardScalaSettings.scala.html#467685" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../../tools/nsc/settings/MutableSettings.scala.html#467820" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#8489" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;running &quot;)" class="string">&quot;running &quot;</span><span title="(x$1: Any)String">+</span><a href="#599311" title="ToolBox.this.compiler.Tree">ctree</a><span class="delimiter">)</span>
      <a href="#594724" title="=&gt; ToolBox.this.ToolBoxGlobal">compiler</a>.<a href="#594780" title="(expr: ToolBox.this.compiler.Tree, freeTypes: Map[ToolBox.this.compiler.TypeName,ToolBox.this.compiler.Type])Any">runExpr</a><span class="delimiter">(</span><a href="#599311" title="ToolBox.this.compiler.Tree">ctree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class ToolBoxError extends Throwable" id="594743">ToolBoxError</a><a href="#594743" title="ToolBox.this.ToolBoxError" class="delimiter">(</a><span class="keyword">val</span> <a title="ToolBoxes.this.ToolBox" id="596453">toolBox</a>: <a href="#591666" title="ToolBoxes.this.ToolBox">ToolBox</a>, <span class="keyword">val</span> <a title="String" id="596454">message</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Throwable" id="596458">cause</a>: <span title="Throwable">Throwable</span> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../package.scala.html#56957" title="Throwable">Throwable</a><span class="delimiter">(</span><a href="#596454" title="String">message</a>, <a href="#596458" title="Throwable">cause</a><span class="delimiter">)</span>

    <span class="keyword">object</span> <a title="ToolBox.this.ToolBoxError.type" id="599432">ToolBoxError</a> <a href="#594745" title="ToolBox.this.ToolBoxError.type" class="keyword">extends</a> <a href="../api/ToolBoxes.scala.html#426844" title="ToolBox.this.ToolBoxErrorExtractor">ToolBoxErrorExtractor</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(error: ToolBox.this.ToolBoxError)Option[(ToolBoxes.this.ToolBox, String)]" id="596457">unapply</a><span class="delimiter">(</span><a title="ToolBox.this.ToolBoxError" id="599421">error</a>: <a href="#594743" title="ToolBox.this.ToolBoxError">ToolBoxError</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1510" title="Option[(ToolBoxes.this.ToolBox, String)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>ToolBox, String<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="../../Option.scala.html#64111" title="(x: (ToolBoxes.this.ToolBox, String))Some[(ToolBoxes.this.ToolBox, String)]">Some</a><span class="delimiter">(</span><a href="../../Tuple2.scala.html#63804" title="(_1: ToolBoxes.this.ToolBox, _2: String)(ToolBoxes.this.ToolBox, String)" class="delimiter">(</a><a href="#599421" title="ToolBox.this.ToolBoxError">error</a>.<a href="#596453" title="=&gt; ToolBoxes.this.ToolBox">toolBox</a>, <a href="#599421" title="ToolBox.this.ToolBoxError">error</a>.<a href="#596454" title="=&gt; String">message</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>