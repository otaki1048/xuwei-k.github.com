<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/Constructors.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*  NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.<a href="../symtab/package.scala.html#36230" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> util.TreeSet

/** This phase converts classes with parameters into Java-like classes with
 *  fields, which are assigned to from constructors.
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Constructors extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="28731">Constructors</a> <a href="#28731" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#29967" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#13777" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#184069" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#40473" title="object Constructors.this.global.definitions">definitions</a>._

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="239319">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;constructors&quot;)" class="string">&quot;constructors&quot;</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: Constructors.this.global.CompilationUnit)Constructors.this.global.Transformer" id="239321">newTransformer</a><span class="delimiter">(</span><a title="Constructors.this.global.CompilationUnit" id="581847">unit</a>: <a href="../CompilationUnits.scala.html#183079" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#183129" title="Constructors.this.global.Transformer">Transformer</a> =
    <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#239326" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#581847" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" id="239322">guardedCtorStats</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" id="239324">ctorParams</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">class</span> <a title="class ConstructorTransformer extends Constructors.this.global.Transformer with ScalaObject" id="239326">ConstructorTransformer</a><a href="#239326" title="ScalaObject" class="delimiter">(</a><a title="Constructors.this.global.CompilationUnit" id="581855">unit</a>: <a href="../CompilationUnits.scala.html#183079" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#183129" title="Constructors.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(impl: Constructors.this.global.Template)Constructors.this.global.Template" id="581853">transformClassTemplate</a><span class="delimiter">(</span><a title="Constructors.this.global.Template" id="581860">impl</a>: <span title="Constructors.this.global.Template">Template</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Template">Template</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="581862">clazz</a> = <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a>  // the transformed class
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="581863">stats</a> = <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">body</span>          // the transformed template body
      <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="581864">localTyper</a> = <a href="../Global.scala.html#182992" title="object Constructors.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184435" title="(tree: Constructors.this.global.analyzer.global.Tree, owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#581860" title="Constructors.this.global.Template">impl</a>, <a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="581865">specializedFlag</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42761" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60039" title="=&gt; Constructors.this.global.nme.NameType">SPECIALIZED_INSTANCE</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="581866">shouldGuard</a> = <span class="delimiter">(</span><a href="#581865" title="Constructors.this.global.Symbol">specializedFlag</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47905" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span>

      case <span class="keyword">class</span> <a title="class ConstrInfo extends Object with ScalaObject with Product with Serializable" id="584392">ConstrInfo</a><a href="#584392" title="ScalaObject" class="delimiter">(</a>
        <a title="Constructors.this.global.DefDef" id="582084">constr</a>: <span title="Constructors.this.global.DefDef">DefDef</span>,               // The primary constructor
        <a title="List[Constructors.this.global.Symbol]" id="582085">constrParams</a>: <span title="List[Constructors.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>,   // ... and its parameters
        <a title="Constructors.this.global.Block" id="582086">constrBody</a>: <span title="Constructors.this.global.Block">Block</span>             // ... and its body
      <span class="delimiter">)</span>
      // decompose primary constructor into the three entities above.
      <span class="keyword">val</span> <a title="ConstrInfo" id="581870">constrInfo</a>: <a href="#584392" title="ConstrInfo">ConstrInfo</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Option[Constructors.this.global.Tree]" id="581993">primary</a> = <a href="#581863" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <span class="delimiter">(</span><a href="#582004" title="Constructors.this.global.Tree">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47851" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span>
        <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#581993" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Boolean">isDefined</span>, <span title="String(&quot;no constructor in template: impl = &quot;)" class="string">&quot;no constructor in template: impl = &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#581860" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="(Constructors.this.global.DefDef, List[Constructors.this.global.ValDef], Constructors.this.global.Block)" id="581995">ddef</a> @ DefDef<span class="delimiter">(</span>_, _, _, <a href="#582031" title="(x: List[List[Constructors.this.global.ValDef]])Some[List[List[Constructors.this.global.ValDef]]]">List</a><span class="delimiter">(</span><a href="#581994" title="List[Constructors.this.global.ValDef]" id="581996">vparams</a><span class="delimiter">)</span>, _, <a href="#581994" title="Constructors.this.global.Block" id="581997">rhs</a> @ Block<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#581993" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Constructors.this.global.Tree">get</span>
        <a href="#584392" title="(constr: Constructors.this.global.DefDef, constrParams: List[Constructors.this.global.Symbol], constrBody: Constructors.this.global.Block)ConstrInfo">ConstrInfo</a><span class="delimiter">(</span><a href="#581995" title="Constructors.this.global.DefDef">ddef</a>, <a href="#581996" title="List[Constructors.this.global.ValDef]">vparams</a> <span title="(f: Constructors.this.global.ValDef =&gt; Constructors.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.ValDef],Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]])List[Constructors.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#582110" title="Constructors.this.global.ValDef">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>, <a href="#581997" title="Constructors.this.global.Block">rhs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">import</span> <a href="#581870" title="ConstrInfo">constrInfo</a>._

      // The parameter accessor fields which are members of the class
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Symbol]" id="581872">paramAccessors</a> = <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47982" title="=&gt; List[Constructors.this.global.Symbol]">constrParamAccessors</a>

      // The constructor parameter corresponding to an accessor
      <span class="keyword">def</span> <a title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="581873">parameter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582149">acc</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> =
        <a href="#581874" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60688" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#582149" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Names.scala.html#39643" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">originalName</a><span class="delimiter">)</span><span class="delimiter">)</span>

      // The constructor parameter with given name. This means the parameter
      // has given name, or starts with given name, and continues with a `$` afterwards.
      <span class="keyword">def</span> <a title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol" id="581874">parameterNamed</a><span class="delimiter">(</span><a title="Constructors.this.global.Name" id="582150">name</a>: <a href="../../../reflect/internal/Names.scala.html#39679" title="Constructors.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(param: Constructors.this.global.Symbol)Boolean" id="582152">matchesName</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582153">param</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#582153" title="Constructors.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#582150" title="Constructors.this.global.Name">name</a> <span title="(x: Boolean)Boolean">||</span> <a href="#582153" title="Constructors.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Constructors.this.global.Name">name</a>.<a href="../../../reflect/internal/Names.scala.html#53443" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="#582150" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)String">+</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60633" title="=&gt; String">NAME_JOIN_STRING</a><span class="delimiter">)</span>

        <span class="delimiter">(</span><a href="#582085" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a> <span title="(p: Constructors.this.global.Symbol =&gt; Boolean)List[Constructors.this.global.Symbol]">filter</span> <a href="#582152" title="(param: Constructors.this.global.Symbol)Boolean">matchesName</a><span class="delimiter">)</span> <span title="Constructors.this.global.Symbol" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Null">Nil</span>    =&gt; <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#582150" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)String">+</span> <span title="String(&quot; not in &quot;)" class="string">&quot; not in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#582085" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a><span class="delimiter">)</span> ; <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a title="Constructors.this.global.Symbol" id="582182">p</a> :: _ =&gt; <a href="#582182" title="Constructors.this.global.Symbol">p</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a title="Boolean" id="581875">usesSpecializedField</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

      // A transformer for expressions that go into the constructor
      <span class="keyword">val</span> <a title="intoConstructorTransformer extends Constructors.this.global.Transformer" id="581876">intoConstructorTransformer</a> = <a href="#582183" title="Constructors.this.global.Transformer {def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">new</a> <a href="../ast/Trees.scala.html#183129" title="anonymous class $anon extends Constructors.this.global.Transformer" id="582183">Transformer</a> <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="582185">isParamRef</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582188">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
          <a href="#582188" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48090" title="=&gt; Boolean">isParamAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <a href="#582188" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <a href="../../../reflect/internal/Symbols.scala.html#47964" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#46370" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#582188" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47795" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#582188" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47983" title="=&gt; Constructors.this.global.Symbol">accessed</a>.<a href="../../../reflect/internal/Symbols.scala.html#47793" title="=&gt; Boolean">isVariable</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><a href="#582188" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47796" title="=&gt; Boolean">isSetter</a>
        <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Constructors.this.global.Symbol)Boolean" id="582186">possiblySpecialized</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582201">s</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../Global.scala.html#182952" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#239014" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#582201" title="Constructors.this.global.Symbol">s</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="582187">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582198">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#582198" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Apply</span><span class="delimiter">(</span>Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a href="#582231" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            // references to parameter accessor methods of own class become references to parameters
            // outer accessors become references to $outer parameter
            <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#582185" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#582186" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="../Global.scala.html#182860" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92637" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#581873" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47983" title="=&gt; Constructors.this.global.Symbol">accessed</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span> <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47992" title="=&gt; Constructors.this.global.Symbol">outerSource</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47771" title="=&gt; Boolean">isImplClass</a><span class="delimiter">)</span>
              <a href="../Global.scala.html#182860" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92637" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#581874" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60029" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span>
              <a href="#582183" title="Constructors.this.global.Transformer {def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.gen.global.Tree">Select</span><span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#582185" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#582186" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            // references to parameter accessor field of own class become references to parameters
            <a href="../Global.scala.html#182860" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92637" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#581873" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#182952" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#239014" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
              <a href="#581875" title="Boolean">usesSpecializedField</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#582183" title="Constructors.this.global.Transformer {def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
            <a href="#582183" title="Constructors.this.global.Transformer {def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#582198" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // Move tree into constructor, take care of changing owner from `oldowner` to constructor symbol
      <span class="keyword">def</span> <a title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="581877">intoConstructor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582308">oldowner</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="582309">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> =
        <a href="#581876" title="intoConstructorTransformer extends Constructors.this.global.Transformer">intoConstructorTransformer</a> <span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span> <a href="../../../reflect/internal/Trees.scala.html#40606" title="implicit scala.reflect.internal.Trees.treeOps : (tree: Constructors.this.global.Tree)Constructors.this.global.TreeOps">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#59727" title="(pairs: (Constructors.this.global.Symbol, Constructors.this.global.Symbol)*)Constructors.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#582308" title="(x: Constructors.this.global.Symbol)ArrowAssoc[Constructors.this.global.Symbol]">oldowner</a> <span title="(y: Constructors.this.global.Symbol)(Constructors.this.global.Symbol, Constructors.this.global.Symbol)">-&gt;</span> <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>

      // Should tree be moved in front of super constructor call?
      <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="581878">canBeMoved</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582332">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <a href="#582332" title="Constructors.this.global.Tree">tree</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="582342">mods</a>, _, _, _<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#582342" title="Constructors.this.global.Modifiers">mods</a> <a href="../../../reflect/internal/Trees.scala.html#85417" title="(flag: Long)Boolean">hasFlag</a> PRESUPER <span title="Long(137975824384L)">|</span> PARAMACCESSOR<span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span>                     =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>

      // Create an assignment to class field `to` with rhs `from`
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree" id="581879">mkAssign</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582347">to</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="582348">from</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> =
        <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#582347" title="Constructors.this.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../ast/TreeDSL.scala.html#184069" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#582347" title="Constructors.this.global.Symbol">to</a><span class="delimiter">)</span>, <a href="#582348" title="Constructors.this.global.Tree">from</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      // Create code to copy parameter to parameter accessor field.
      // If parameter is $outer, check that it is not null so that we NPE
      // here instead of at some unknown future $outer access.
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree" id="581880">copyParam</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582388">to</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Symbol" id="582389">from</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#184073" title="object Constructors.this.CODE">CODE</a>._
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="582391">result</a> = <a href="#581879" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#582388" title="Constructors.this.global.Symbol">to</a>, <a href="../ast/TreeDSL.scala.html#184069" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#582389" title="Constructors.this.global.Symbol">from</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#582389" title="Constructors.this.global.Symbol">from</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60029" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span> <a href="#582391" title="Constructors.this.global.Tree">result</a>
        <span class="keyword">else</span> <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#582388" title="Constructors.this.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../ast/TreeDSL.scala.html#241242" title="(tree: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">IF</a> <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#241254" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSymbol : (target: Constructors.this.global.Symbol)Constructors.this.CODE.TreeMethods">from</a> <a href="../ast/TreeDSL.scala.html#274637" title="(other: Constructors.this.global.Tree)Constructors.this.global.Apply">OBJ_EQ</a> <a href="../ast/TreeDSL.scala.html#241198" title="=&gt; Constructors.this.global.Literal">NULL</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#274600" title="(x: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">THEN</a> <a href="../ast/TreeDSL.scala.html#241224" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Throw">THROW</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46303" title="=&gt; Constructors.this.global.Symbol">NullPointerExceptionClass</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#274601" title="(elsep: Constructors.this.global.Tree)Constructors.this.global.If">ELSE</a> <a href="#582391" title="Constructors.this.global.Tree">result</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // The list of definitions that go into class
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="581881">defBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The auxiliary constructors, separate from the defBuf since they should
      // follow the primary constructor
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="581882">auxConstructorBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The list of statements that go into constructor after and including the superclass constructor call
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="581883">constrStatBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The list of early initializer statements that go into constructor before the superclass constructor call
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="581884">constrPrefixBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The early initialized field definitions of the class (these are the class members)
      <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.global.ValDef]" id="581885">presupers</a> = <a href="../ast/Trees.scala.html#183119" title="object Constructors.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118931" title="(stats: List[Constructors.this.global.treeInfo.global.Tree])List[Constructors.this.global.treeInfo.global.ValDef]">preSuperFields</a><span class="delimiter">(</span><a href="#581863" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

      // generate code to copy pre-initialized fields
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582448">stat</a> &lt;- <a href="#582086" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#581883" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#582448" title="Constructors.this.global.Tree">stat</a>
        <a href="#582448" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="582464">mods</a>, <a title="Constructors.this.global.TermName" id="582465">name</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#582464" title="Constructors.this.global.Modifiers">mods</a> <a href="../../../reflect/internal/Trees.scala.html#85417" title="(flag: Long)Boolean">hasFlag</a> <span title="Long(137438953472L)">PRESUPER</span><span class="delimiter">)</span> =&gt;
            // stat is the constructor-local definition of the field value
            <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.global.ValDef]" id="582466">fields</a> = <a href="#581885" title="List[Constructors.this.global.treeInfo.global.ValDef]">presupers</a> <span title="(p: Constructors.this.global.treeInfo.global.ValDef =&gt; Boolean)List[Constructors.this.global.treeInfo.global.ValDef]">filter</span> <span class="delimiter">(</span>
              <a title="Constructors.this.global.treeInfo.global.ValDef" id="582471">vdef</a> =&gt; <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60691" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#582471" title="Constructors.this.global.treeInfo.global.ValDef">vdef</a>.<span title="=&gt; Constructors.this.global.treeInfo.global.TermName">name</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#582465" title="Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#582466" title="List[Constructors.this.global.treeInfo.global.ValDef]">fields</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.treeInfo.global.Symbol" id="582467">to</a> = <a href="#582466" title="List[Constructors.this.global.treeInfo.global.ValDef]">fields</a>.<span title="=&gt; Constructors.this.global.treeInfo.global.ValDef">head</span>.<span title="=&gt; Constructors.this.global.treeInfo.global.Symbol">symbol</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#582467" title="Constructors.this.global.treeInfo.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.treeInfo.global.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#40127" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span>
              <a href="#581883" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#581879" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#582467" title="Constructors.this.global.treeInfo.global.Symbol">to</a>, <a href="../ast/TreeDSL.scala.html#184069" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#582448" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // Triage all template definitions to go into defBuf/auxConstructorBuf, constrStatBuf, or constrPrefixBuf.
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582532">stat</a> &lt;- <a href="#581863" title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</a><span class="delimiter">)</span> <a href="#582532" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Any">DefDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="582541">mods</a>, <a title="Constructors.this.global.Name" id="582542">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="582543">tparams</a>, <a title="List[List[Constructors.this.global.ValDef]]" id="582544">vparamss</a>, <a title="Constructors.this.global.Tree" id="582545">tpt</a>, <a title="Constructors.this.global.Tree" id="582546">rhs</a><span class="delimiter">)</span> =&gt;
          // methods with constant result type get literals as their body
          // all methods except the primary constructor go into template
          <a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="defBuf.type">MethodType</span><span class="delimiter">(</span><a href="#582551" title="(x: List[Constructors.this.global.Symbol])Some[List[Constructors.this.global.Symbol]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Constructors.this.global.ConstantType" id="582562">tp</a> @ ConstantType<span class="delimiter">(</span><a title="Constructors.this.global.Constant" id="582564">c</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#239326" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</span><span class="delimiter">(</span>
                <a href="#582532" title="Constructors.this.global.Tree">stat</a>, <a href="#582541" title="Constructors.this.global.Modifiers">mods</a>, <a href="#582542" title="Constructors.this.global.Name">name</a>, <a href="#582543" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#582544" title="List[List[Constructors.this.global.ValDef]]">vparamss</a>, <a href="#582545" title="Constructors.this.global.Tree">tpt</a>,
                <a href="../ast/TreeDSL.scala.html#184069" title="(value: Constructors.this.global.Constant)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#582564" title="Constructors.this.global.Constant">c</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.Literal">setPos</span> <a href="#582546" title="Constructors.this.global.Tree">rhs</a>.<span title="=&gt; Constructors.this.global.Position">pos</span> <span title="(tp: Constructors.this.global.Type)Constructors.this.global.Literal">setType</span> <a href="#582562" title="Constructors.this.global.ConstantType">tp</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Any">_</span> =&gt;
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47851" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47804" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <a href="#581882" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a> <span title="(x: Constructors.this.global.Tree)auxConstructorBuf.type">+=</span> <a href="#582532" title="Constructors.this.global.Tree">stat</a>
              <span class="keyword">else</span> <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#582532" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="582618">mods</a>, <a title="Constructors.this.global.TermName" id="582619">name</a>, <a title="Constructors.this.global.Tree" id="582620">tpt</a>, <a title="Constructors.this.global.Tree" id="582621">rhs</a><span class="delimiter">)</span> =&gt;
          // val defs with constant right-hand sides are eliminated.
          // for all other val defs, an empty valdef goes into the template and
          // the initializer goes as an assignment into the constructor
          // if the val def is an early initialized or a parameter accessor, it goes
          // before the superclass constructor call, otherwise it goes after.
          // Lazy vals don't get the assignment in the constructor.
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#40127" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#582621" title="Constructors.this.global.Tree">rhs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../ast/TreeDSL.scala.html#184069" title="object Constructors.this.global.EmptyTree">EmptyTree</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/HasFlags.scala.html#48081" title="=&gt; Boolean">isLazy</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="582627">rhs1</a> = <a href="#581877" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#582621" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span>;
              <span class="delimiter">(</span><span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#581878" title="(tree: Constructors.this.global.Tree)Boolean">canBeMoved</a><span class="delimiter">(</span><a href="#582532" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#581884" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a> <span class="keyword">else</span> <a href="#581883" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a><span class="delimiter">)</span> <span title="(x: Constructors.this.global.Tree)scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">+=</span> <a href="#581879" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span>
                <a href="#582532" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#582627" title="Constructors.this.global.Tree">rhs1</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#239326" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.ValDef">ValDef</span><span class="delimiter">(</span><a href="#582532" title="Constructors.this.global.Tree">stat</a>, <a href="#582618" title="Constructors.this.global.Modifiers">mods</a>, <a href="#582619" title="Constructors.this.global.TermName">name</a>, <a href="#582620" title="Constructors.this.global.Tree">tpt</a>, <a href="../ast/TreeDSL.scala.html#184069" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="defBuf.type">ClassDef</span><span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          // classes are treated recursively, and left in the template
          <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#239326" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#581855" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>.<a href="#581854" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#582532" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="constrStatBuf.type">_</span> =&gt;
          // all other statements go into the constructor
          <a href="#581883" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#581877" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#582532" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // ----------- avoid making fields for symbols that are not accessed --------------

      // A sorted set of symbols that are known to be accessed outside the primary constructor.
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" id="581886">accessedSyms</a> = <span title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" class="keyword">new</span> <a href="../util/TreeSet.scala.html#34472" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">TreeSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582721">x</a>, <a title="Constructors.this.global.Symbol" id="582722">y</a><span class="delimiter">)</span> =&gt; <a href="#582721" title="Constructors.this.global.Symbol">x</a> <a href="../../../reflect/internal/Symbols.scala.html#47961" title="(that: Constructors.this.global.Symbol)Boolean">isLess</a> <a href="#582722" title="Constructors.this.global.Symbol">y</a><span class="delimiter">)</span>

      // a list of outer accessor symbols and their bodies
      <span class="keyword">var</span> <a title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]" id="581887">outerAccessors</a>: <span title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Symbol, Tree<span class="delimiter">)</span><span class="delimiter">]</span> = List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

      // Could symbol's definition be omitted, provided it is not accessed?
      // This is the case if the symbol is defined in the current class, and
      // ( the symbol is an object private parameter accessor field, or
      //   the symbol is an outer accessor of a final class which does not override another outer accessor. )
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="581888">maybeOmittable</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582731">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#582731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
        <a href="#582731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48090" title="=&gt; Boolean">isParamAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#582731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48088" title="=&gt; Boolean">isPrivateLocal</a> <span title="(x: Boolean)Boolean">||</span>
        <a href="#582731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47844" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#582731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47861" title="=&gt; Boolean">isEffectivelyFinal</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#582731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#48016" title="=&gt; Boolean">isOverridingSymbol</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
        <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <a href="../../../reflect/internal/Symbols.scala.html#47964" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#46370" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

      // Is symbol known to be accessed outside of the primary constructor,
      // or is it a symbol whose definition cannot be omitted anyway?
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="581889">mustbeKept</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582737">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="#581888" title="(sym: Constructors.this.global.Symbol)Boolean">maybeOmittable</a><span class="delimiter">(</span><a href="#582737" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#581886" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../../../reflect/internal/util/Set.scala.html#128839" title="(x: Constructors.this.global.Symbol)Boolean">contains</a> <a href="#582737" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>

      // A traverser to set accessedSyms and outerAccessors
      <span class="keyword">val</span> <a title="Constructors.this.global.Traverser" id="581890">accessTraverser</a> = <a href="#582739" title="Constructors.this.global.Traverser" class="keyword">new</a> <a href="../ast/TreeDSL.scala.html#184069" title="anonymous class $anon extends Constructors.this.global.Traverser" id="582739">Traverser</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Unit" id="582741">traverse</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582742">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#582742" title="Constructors.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">DefDef</span><span class="delimiter">(</span>_, _, _, _, _, <a title="Constructors.this.global.Tree" id="582752">body</a><span class="delimiter">)</span>
            <span class="keyword">if</span> <span class="delimiter">(</span><a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47844" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47861" title="=&gt; Boolean">isEffectivelyFinal</a><span class="delimiter">)</span> =&gt;
              <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;outerAccessors += &quot;)" class="string">&quot;outerAccessors += &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47897" title="=&gt; String">fullName</a><span class="delimiter">)</span>
              <a href="#581887" title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">outerAccessors</a> <span title="(x: (Constructors.this.global.Symbol, Constructors.this.global.Tree))List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">::=</span> <span class="delimiter">(</span><span title="(_1: Constructors.this.global.Symbol, _2: Constructors.this.global.Tree)(Constructors.this.global.Symbol, Constructors.this.global.Tree)" class="delimiter">(</span><a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#582752" title="Constructors.this.global.Tree">body</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#581889" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;accessedSyms += &quot;)" class="string">&quot;accessedSyms += &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47897" title="=&gt; String">fullName</a><span class="delimiter">)</span>
                <a href="#581886" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../util/TreeSet.scala.html#582715" title="(x: Constructors.this.global.Symbol)Unit">addEntry</a> <a href="#582742" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>
              <span class="delimiter">}</span>
              <a href="#582739" title="Constructors.this.global.Traverser" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#582742" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
              <a href="#582739" title="Constructors.this.global.Traverser" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#582742" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // first traverse all definitions except outeraccesors
      // (outeraccessors are avoided in accessTraverser)
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582814">stat</a> &lt;- <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span> <span title="(f: Constructors.this.global.Tree =&gt; Unit)Unit">++</span> <a href="#581882" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span><span class="delimiter">)</span>
        <a href="#581890" title="Constructors.this.global.Traverser">accessTraverser</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#582814" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>

      // then traverse all bodies of outeraccessors which are accessed themselves
      // note: this relies on the fact that an outer accessor never calls another
      // outer accessor in the same class.
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582855">accSym</a>, <a title="Constructors.this.global.Tree" id="582856">accBody</a><span class="delimiter">)</span> &lt;- <a href="#581887" title="(f: ((Constructors.this.global.Symbol, Constructors.this.global.Tree)) =&gt; Unit)Unit">outerAccessors</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#581889" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#582855" title="Constructors.this.global.Symbol">accSym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#581890" title="Constructors.this.global.Traverser">accessTraverser</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#582856" title="Constructors.this.global.Tree">accBody</a><span class="delimiter">)</span>

      // Initialize all parameters fields that must be kept.
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="581891">paramInits</a> = <a href="#581872" title="List[Constructors.this.global.Symbol]">paramAccessors</a> <span title="(p: Constructors.this.global.Symbol =&gt; Boolean)List[Constructors.this.global.Symbol]">filter</span> <a href="#581889" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a> <span title="(f: Constructors.this.global.Symbol =&gt; Constructors.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Symbol],Constructors.this.global.Tree,List[Constructors.this.global.Tree]])List[Constructors.this.global.Tree]">map</span> <span class="delimiter">{</span> <a title="Constructors.this.global.Symbol" id="582883">acc</a> =&gt;
        // Check for conflicting symbol amongst parents: see bug #1960.
        // It would be better to mangle the constructor parameter name since
        // it can only be used internally, but I think we need more robust name
        // mangling before we introduce more of it.
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="582884">conflict</a> = <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42770" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">nonPrivateMember</a><span class="delimiter">(</span><a href="#582883" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47968" title="(cond: Constructors.this.global.Symbol =&gt; Boolean)Constructors.this.global.Symbol">filter</a> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582891">s</a> =&gt; <a href="#582891" title="Constructors.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#47795" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#582891" title="Constructors.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#47845" title="=&gt; Boolean">isOuterField</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#582891" title="Constructors.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#47975" title="=&gt; Constructors.this.global.Symbol">enclClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47763" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#582884" title="Constructors.this.global.Symbol">conflict</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
          <a href="#581855" title="Constructors.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: Constructors.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#582883" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Constructors.this.global.Position">pos</a>, <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;parameter '%s' requires field but conflicts with %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#582883" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Constructors.this.global.Name">name</a>, <a href="#582884" title="Constructors.this.global.Symbol">conflict</a>.<a href="../../../reflect/internal/Symbols.scala.html#48049" title="=&gt; String">fullLocationString</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <a href="#581880" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree">copyParam</a><span class="delimiter">(</span><a href="#582883" title="Constructors.this.global.Symbol">acc</a>, <a href="#581873" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#582883" title="Constructors.this.global.Symbol">acc</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      /** Return a single list of statements, merging the generic class constructor with the
       *  specialized stats. The original statements are retyped in the current class, and
       *  assignments to generic fields that have a corresponding specialized assignment in
       *  `specializedStats` are replaced by the specialized assignment.
       */
      <span class="keyword">def</span> <a title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="581892">mergeConstructors</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582925">genericClazz</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a>, <a title="List[Constructors.this.global.Tree]" id="582926">originalStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[Constructors.this.global.Tree]" id="582927">specializedStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="582928">specBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
        <a href="#582928" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])specBuf.type">++=</span> <a href="#582927" title="List[Constructors.this.global.Tree]">specializedStats</a>

        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]" id="582929">specializedAssignFor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="582934">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Option[Constructors.this.global.Tree]">Option</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
          <a href="#582927" title="List[Constructors.this.global.Tree]">specializedStats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <a href="#582941" title="Boolean" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="Boolean">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="582944">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="582952">rhs</a><span class="delimiter">)</span> =&gt;
              <span class="delimiter">(</span>    <span class="delimiter">(</span><a href="#582944" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <a href="../../../reflect/internal/Symbols.scala.html#47905" title="(mask: Long)Boolean">hasFlag</a> <span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span>
                <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60685" title="(name: Constructors.this.global.Name)Constructors.this.global.Name">unspecializedName</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60691" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#582944" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Names.scala.html#39643" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60691" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#582934" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Names.scala.html#39643" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>

        /** Rewrite calls to ScalaRunTime.array_update to the proper apply method in scala.Array.
         *  Erasure transforms Array.update to ScalaRunTime.update when the element type is a type
         *  variable, but after specialization this is a concrete primitive type, so it would
         *  be an error to pass it to array_update(.., .., Object).
         */
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="582930">rewriteArrayUpdate</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582961">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="582962">adapter</a> = <a href="#582963" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#183129" title="anonymous class $anon extends Constructors.this.global.Transformer" id="582963">Transformer</a> <span class="delimiter">{</span>
            <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Constructors.this.global.Tree)Constructors.this.global.Tree" id="582965">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582966">t</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#582966" title="Constructors.this.global.Tree">t</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="582973">fun</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582978">receiver</a>, <a title="Constructors.this.global.Name" id="582979">method</a><span class="delimiter">)</span>, <a href="#582981" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582992">xs</a>, <a title="Constructors.this.global.Tree" id="582993">idx</a>, <a title="Constructors.this.global.Tree" id="582994">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#582973" title="Constructors.this.global.Select">fun</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46353" title="=&gt; Constructors.this.global.Symbol">arrayUpdateMethod</a> =&gt;
                <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#184069" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92638" title="(qual: Constructors.this.global.gen.global.Tree, sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedSelect</a><span class="delimiter">(</span><a href="#582992" title="Constructors.this.global.Tree">xs</a>, <a href="../../../reflect/internal/Definitions.scala.html#46353" title="=&gt; Constructors.this.global.Symbol">arrayUpdateMethod</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#582993" title="Constructors.this.global.Tree">idx</a>, <a href="#582994" title="Constructors.this.global.Tree">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#582963" title="Constructors.this.global.Transformer" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#582966" title="Constructors.this.global.Tree">t</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#582962" title="Constructors.this.global.Transformer">adapter</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#582961" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;merging: &quot;)" class="string">&quot;merging: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#582926" title="List[Constructors.this.global.Tree]">originalStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\nwith\n&quot;)" class="string">&quot;\nwith\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#582927" title="List[Constructors.this.global.Tree]">specializedStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]" id="582931">res</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="583130">s</a> &lt;- <a href="#582926" title="(f: Constructors.this.global.Tree =&gt; (Constructors.this.global.Tree, Constructors.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Tree],(Constructors.this.global.Tree, Constructors.this.global.Tree),List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]])List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]">originalStats</a>; <a title="s.type" id="583131">stat</a> = <a href="#583130" title="Constructors.this.global.Tree">s</a>.<span title="=&gt; s.type">duplicate</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
          <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;merge: looking at &quot;)" class="string">&quot;merge: looking at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#583131" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="583132">stat1</a> = <a href="#583131" title="Constructors.this.global.Tree">stat</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="583135">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="Constructors.this.global.Name" id="583143">field</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt;
              <a href="#582929" title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]">specializedAssignFor</a><span class="delimiter">(</span><a href="#583135" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="(default: =&gt; Constructors.this.global.Tree)Constructors.this.global.Tree">getOrElse</span><span class="delimiter">(</span><a href="#583131" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#583131" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#583132" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#583131" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;replaced &quot;)" class="string">&quot;replaced &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#583131" title="Constructors.this.global.Tree">stat</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#583132" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            <a href="#582928" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(elem: Constructors.this.global.Tree)specBuf.type">-=</span> <a href="#583132" title="Constructors.this.global.Tree">stat1</a>
          <span class="delimiter">}</span>

          <span title="d.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#583132" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#583131" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#239324" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#582925" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#582085" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
            // this is just to make private fields public
            <span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#126028" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" class="keyword">new</a> <a href="../Global.scala.html#182952" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#239042" title="Constructors.this.global.specializeTypes.ImplementationAdapter">ImplementationAdapter</a><span class="delimiter">(</span><a href="#239324" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#582925" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>, <a href="#582085" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#583132" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="583163">stat2</a> = <a href="#582930" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">rewriteArrayUpdate</a><span class="delimiter">(</span><a href="#583132" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            // statements coming from the original class need retyping in the current context
            <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;retyping &quot;)" class="string">&quot;retyping &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#583163" title="Constructors.this.global.Tree">stat2</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.specializeTypes.Duplicator" id="583164">d</a> = <span title="Constructors.this.global.specializeTypes.Duplicator" class="keyword">new</span> <a href="../Global.scala.html#182952" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#239041" title="Constructors.this.global.specializeTypes.Duplicator">Duplicator</a>
            <a href="#583164" title="Constructors.this.global.specializeTypes.Duplicator">d</a>.<a href="../typechecker/Duplicators.scala.html#583241" title="(context: d.Context, tree: d.global.Tree, oldThis: d.global.Symbol, newThis: d.global.Symbol, env: scala.collection.Map[d.global.Symbol,d.global.Type])d.global.Tree">retyped</a><span class="delimiter">(</span><a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184334" title="=&gt; Constructors.this.global.analyzer.Context">context1</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="d.Context" class="delimiter">[</span>d.<a href="../typechecker/Contexts.scala.html#183956" title="d.Context">Context</a><span class="delimiter">]</span>,
                      <a href="#583163" title="Constructors.this.global.Tree">stat2</a>,
                      <a href="#582925" title="Constructors.this.global.Symbol">genericClazz</a>,
                      <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>,
                      <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[d.global.Symbol,Nothing]">empty</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#583132" title="Constructors.this.global.Tree">stat1</a>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#582928" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;residual specialized constructor statements: &quot;)" class="string">&quot;residual specialized constructor statements: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#582928" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a><span class="delimiter">)</span>
        <a href="#582931" title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]">res</a>
      <span class="delimiter">}</span>

      /** Add an 'if' around the statements coming after the super constructor. This
       *  guard is necessary if the code uses specialized fields. A specialized field is
       *  initialized in the subclass constructor, but the accessors are (already) overridden
       *  and pointing to the (empty) fields. To fix this, a class with specialized fields
       *  will not run its constructor statements if the instance is specialized. The specialized
       *  subclass includes a copy of those constructor statements, and runs them. To flag that a class
       *  has specialized fields, and their initialization should be deferred to the subclass, method
       *  'specInstance$' is added in phase specialize.
       */
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="581893">guardSpecializedInitializer</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="583348">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183352" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">nospecialization</a>.<a href="../settings/MutableSettings.scala.html#183734" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#583348" title="List[Constructors.this.global.Tree]">stats</a> <span class="keyword">else</span> <span class="delimiter">{</span>
        // split the statements in presuper and postsuper
    //    var (prefix, postfix) = stats0.span(tree =&gt; !((tree.symbol ne null) &amp;&amp; tree.symbol.isConstructor))
      //  if (postfix.nonEmpty) {
        //  prefix = prefix :+ postfix.head
          //postfix = postfix.tail
        //}

        <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#581875" title="Boolean">usesSpecializedField</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#581866" title="Boolean">shouldGuard</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#583348" title="List[Constructors.this.global.Tree]">stats</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // save them for duplication in the specialized subclass
          <a href="#239322" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Tree])Unit">guardedCtorStats</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#583348" title="List[Constructors.this.global.Tree]">stats</a>
          <a href="#239324" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Symbol])Unit">ctorParams</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#582085" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>

          <span class="keyword">val</span> <a title="Constructors.this.global.If" id="583352">tree</a> =
            <a href="../ast/TreeDSL.scala.html#184069" title="(cond: Constructors.this.global.Tree, thenp: Constructors.this.global.Tree, elsep: Constructors.this.global.Tree)Constructors.this.global.If">If</a><span class="delimiter">(</span>
              <a href="../ast/TreeDSL.scala.html#184069" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span>
                  <a href="../ast/TreeDSL.scala.html#184069" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92629" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="#581865" title="Constructors.this.global.Symbol">specializedFlag</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../../../reflect/internal/Definitions.scala.html#40473" title="object Constructors.this.global.definitions">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#46757" title="(owner: Constructors.this.global.Symbol, name: Constructors.this.global.Name)Constructors.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#40473" title="object Constructors.this.global.definitions">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#46850" title="=&gt; Constructors.this.global.Symbol">BooleanClass</a>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60499" title="=&gt; Constructors.this.global.TermName">UNARY_!</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#184069" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#583348" title="List[Constructors.this.global.Tree]">stats</a>, <a href="../ast/TreeDSL.scala.html#184069" title="(value: Constructors.this.global.Constant)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)Constructors.this.global.Constant">Constant</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#184069" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>

          <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#583352" title="Constructors.this.global.If">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47905" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // add initialization from its generic class constructor
          <span class="keyword">val</span> <a title="Constructors.this.global.Name" id="583466">genericName</a>  = <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60685" title="(name: Constructors.this.global.Name)Constructors.this.global.Name">unspecializedName</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="583467">genericClazz</a> = <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42761" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="#583466" title="Constructors.this.global.Name">genericName</a>.<a href="../../../reflect/internal/Names.scala.html#53413" title="=&gt; Constructors.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>
          <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#583467" title="Constructors.this.global.Symbol">genericClazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a>, <a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>

          <a href="#239322" title="=&gt; scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">guardedCtorStats</a>.<span title="(key: Constructors.this.global.Symbol)Option[List[Constructors.this.global.Tree]]">get</span><span class="delimiter">(</span><a href="#583467" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span> <span title="List[Constructors.this.global.Tree]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">Some</span><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="583478">stats1</a><span class="delimiter">)</span> =&gt; <a href="#581892" title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">mergeConstructors</a><span class="delimiter">(</span><a href="#583467" title="Constructors.this.global.Symbol">genericClazz</a>, <a href="#583478" title="List[Constructors.this.global.Tree]">stats1</a>, <a href="#583348" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">None</span> =&gt; <a href="#583348" title="List[Constructors.this.global.Tree]">stats</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#583348" title="List[Constructors.this.global.Tree]">stats</a>
      <span class="delimiter">}</span>
/*
      def isInitDef(stat: Tree) = stat match {
        case dd: DefDef =&gt; dd.symbol == delayedInitMethod
        case _ =&gt; false
      }
*/

      /** Create a getter or a setter and enter into `clazz` scope
       */
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.Symbol" id="581894">addAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="583479">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.TermName" id="583480">name</a>: <a href="../../../reflect/internal/Names.scala.html#39685" title="Constructors.this.global.TermName">TermName</a>, <a title="Long" id="583481">flags</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="583482">m</a> = <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47702" title="(name: Constructors.this.global.TermName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#583480" title="Constructors.this.global.TermName">name</a>, <a href="#583479" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Constructors.this.global.Position">pos</a>, <a href="#583481" title="Long">flags</a> <span title="(x: Int)Long">&amp;</span> <span title="=&gt; Int">~</span><span class="delimiter">(</span>LOCAL <span title="Int(524292)">|</span> PRIVATE<span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47913" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.MethodSymbol">setPrivateWithin</a> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>
        <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#61752" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a> <a href="#583482" title="Constructors.this.global.MethodSymbol">m</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="581895">addGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="583503">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="583504">getr</a> = <a href="#581894" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.Symbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#583503" title="Constructors.this.global.Symbol">sym</a>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60688" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#583503" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Names.scala.html#39643" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Flags.scala.html#39854" title="(fieldFlags: Long)Long">getterFlags</a><span class="delimiter">(</span><a href="#583503" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47898" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#583504" title="Constructors.this.global.Symbol">getr</a> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: Constructors.this.global.Type)getr.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#583503" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#583503" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40617" title="(sym: Constructors.this.global.Symbol, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#583504" title="Constructors.this.global.Symbol">getr</a>, <a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#583503" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#583504" title="Constructors.this.global.Symbol">getr</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="581896">addSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="583577">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <a href="#583577" title="Constructors.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#47901" title="(mask: Long)sym.type">setFlag</a> <span title="Long(4096L)">MUTABLE</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="583578">setr</a> = <a href="#581894" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.Symbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#583577" title="Constructors.this.global.Symbol">sym</a>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60690" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterToSetter</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#60688" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#583577" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Names.scala.html#39643" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Flags.scala.html#39855" title="(fieldFlags: Long)Long">setterFlags</a><span class="delimiter">(</span><a href="#583577" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47898" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#583578" title="Constructors.this.global.Symbol">setr</a> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: Constructors.this.global.Type)setr.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#583578" title="Constructors.this.global.Symbol">setr</a>.<a href="../../../reflect/internal/Symbols.scala.html#47731" title="(argtypes: List[Constructors.this.global.Type])List[Constructors.this.global.Symbol]">newSyntheticValueParams</a><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="#583577" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Constructors.this.global.Symbol">UnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          //util.trace(&quot;adding setter def for &quot;+setr) {
          <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.DefDef)Constructors.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#583577" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../reflect/internal/Trees.scala.html#40618" title="(sym: Constructors.this.global.Symbol, rhs: List[List[Constructors.this.global.Symbol]] =&gt; Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#583578" title="Constructors.this.global.Symbol">setr</a>, <a title="List[List[Constructors.this.global.Symbol]]" id="583615">paramss</a> =&gt;
              <a href="../ast/TreeDSL.scala.html#184069" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#583577" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="../ast/TreeDSL.scala.html#184069" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#583615" title="List[List[Constructors.this.global.Symbol]]">paramss</a>.<span title="=&gt; List[Constructors.this.global.Symbol]">head</span>.<span title="=&gt; Constructors.this.global.Symbol">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>//}
        <span class="delimiter">}</span>
        <a href="#583578" title="Constructors.this.global.Symbol">setr</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="581897">ensureAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="583660">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Constructors.this.global.Symbol" id="583661">acc</a>: =&gt; Symbol<span class="delimiter">)</span> =
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#583660" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#583660" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47773" title="=&gt; Boolean">isMethod</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#583660" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48084" title="=&gt; Boolean">isPrivate</a><span class="delimiter">)</span> <span class="delimiter">{</span> // there's an access to a naked field of the enclosing class
          <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="583667">getr</a> = <a href="#583661" title="=&gt; Constructors.this.global.Symbol">acc</a>
          <a href="#583667" title="Constructors.this.global.Symbol">getr</a> <a href="../../../reflect/internal/Symbols.scala.html#48027" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>
          <a href="#583667" title="Constructors.this.global.Symbol">getr</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#583660" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#583660" title="Constructors.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#48027" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>
          <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="581898">ensureGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="583675">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#581897" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#583675" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="583676">getr</a> = <a href="#583675" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#48020" title="(base: Constructors.this.global.Symbol)Constructors.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#583676" title="Constructors.this.global.Symbol">getr</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#583676" title="Constructors.this.global.Symbol">getr</a> <span class="keyword">else</span> <a href="#581895" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addGetter</a><span class="delimiter">(</span><a href="#583675" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="581899">ensureSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="583682">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#581897" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#583682" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="583683">setr</a> = <a href="#583682" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#48023" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#583683" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#583683" title="Constructors.this.global.Symbol">setr</a> = <a href="#583682" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#48023" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#583683" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#583683" title="Constructors.this.global.Symbol">setr</a> = <a href="#581896" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addSetter</a><span class="delimiter">(</span><a href="#583682" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <a href="#583683" title="Constructors.this.global.Symbol">setr</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree" id="581900">delayedInitClosure</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="583701">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> =
        <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.ClassDef)Constructors.this.global.ClassDef">atPos</a><span class="delimiter">(</span><a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.ClassSymbol" id="583708">closureClass</a>   = <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47734" title="(name: Constructors.this.global.TypeName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.ClassSymbol">newClass</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60206" title="=&gt; Constructors.this.global.nme.NameType">delayedInitArg</a>.<a href="../../../reflect/internal/Names.scala.html#53941" title="=&gt; Constructors.this.global.TypeName">toTypeName</a>, <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, SYNTHETIC <span title="Long(2097184L)">|</span> FINAL<span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="List[Constructors.this.global.Type]" id="583709">closureParents</a> = <span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46531" title="(i: Int)Constructors.this.global.Symbol">AbstractFunctionClass</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a>, <a href="../../../reflect/internal/Definitions.scala.html#46309" title="=&gt; Constructors.this.global.Symbol">ScalaObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>

            <a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a> <a href="../../../reflect/internal/Symbols.scala.html#47926" title="(info: Constructors.this.global.Type)closureClass.type">setInfoAndEnter</a> <span title="Constructors.this.global.ClassInfoType" class="keyword">new</span> <a href="../../../reflect/internal/Types.scala.html#40123" title="Constructors.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#583709" title="List[Constructors.this.global.Type]">closureParents</a>, <a href="../../../reflect/internal/Scopes.scala.html#61744" title="()Constructors.this.global.Scope" class="keyword">new</a> <a href="../../../reflect/internal/Scopes.scala.html#40425" title="Constructors.this.global.Scope">Scope</a>, <a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.TermSymbol" id="583710">outerField</a> = <span class="delimiter">(</span>
              <a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a>
                <a href="../../../reflect/internal/Symbols.scala.html#47698" title="(name: Constructors.this.global.TermName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60029" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a>, <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../../../reflect/internal/Flags.scala.html#39743" title="=&gt; Long">PrivateLocal</a> <span title="(x: Int)Long">|</span> <span title="Int(536870912)">PARAMACCESSOR</span><span class="delimiter">)</span>
                <a href="../../../reflect/internal/Symbols.scala.html#47926" title="(info: Constructors.this.global.Type)Constructors.this.global.TermSymbol">setInfoAndEnter</a> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a>
            <span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="583711">applyMethod</a> = <span class="delimiter">(</span>
              <a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a>
                <a href="../../../reflect/internal/Symbols.scala.html#47702" title="(name: Constructors.this.global.TermName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60160" title="=&gt; Constructors.this.global.nme.NameType">apply</a>, <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <span title="Long(32L)">FINAL</span><span class="delimiter">)</span>
                <a href="../../../reflect/internal/Symbols.scala.html#47926" title="(info: Constructors.this.global.Type)Constructors.this.global.MethodSymbol">setInfoAndEnter</a> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Constructors.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.ValDef" id="583712">outerFieldDef</a>     = <a href="../../../reflect/internal/Trees.scala.html#40611" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#583710" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="583713">closureClassTyper</a> = <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184434" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="583714">applyMethodTyper</a>  = <a href="#583713" title="Constructors.this.global.analyzer.Typer">closureClassTyper</a>.<a href="../typechecker/Typers.scala.html#184434" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#583711" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="583715">constrStatTransformer</a> = <a href="#583795" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#183129" title="anonymous class $anon extends Constructors.this.global.Transformer" id="583795">Transformer</a> <span class="delimiter">{</span>
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="583797">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="583798">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#583798" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">This</span><span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#583798" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#581862" title="Constructors.this.global.Symbol">clazz</a> =&gt;
                  <a href="#583714" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                    <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Select)Constructors.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#583798" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>, <a href="#583710" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
                  <a href="#583795" title="Constructors.this.global.Transformer" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span> <span class="delimiter">{</span>
                    <a href="#583798" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="583855">qual</a>, _<span class="delimiter">)</span> =&gt;
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="583856">getter</a> = <a href="#581898" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureGetter</a><span class="delimiter">(</span><a href="#583798" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#583856" title="Constructors.this.global.Symbol">getter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#583714" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#583798" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#184069" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#583855" title="Constructors.this.global.Tree">qual</a>, <a href="#583856" title="Constructors.this.global.Symbol">getter</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#583798" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="583914">lhs</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="583919">qual</a>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="583920">rhs</a><span class="delimiter">)</span> =&gt;
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="583921">setter</a> = <a href="#581899" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureSetter</a><span class="delimiter">(</span><a href="#583914" title="Constructors.this.global.Select">lhs</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#583921" title="Constructors.this.global.Symbol">setter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#583714" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#583798" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#184069" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#583919" title="Constructors.this.global.Tree">qual</a>, <a href="#583921" title="Constructors.this.global.Symbol">setter</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#583920" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#583798" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
                        <a href="../../../reflect/internal/Trees.scala.html#40606" title="implicit scala.reflect.internal.Trees.treeOps : (tree: Constructors.this.global.Tree)Constructors.this.global.TreeOps">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#59727" title="(pairs: (Constructors.this.global.Symbol, Constructors.this.global.Symbol)*)Constructors.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="(x: Constructors.this.global.Symbol)ArrowAssoc[Constructors.this.global.Symbol]">symbol</span> <span title="(y: Constructors.this.global.MethodSymbol)(Constructors.this.global.Symbol, Constructors.this.global.MethodSymbol)">-&gt;</span> <a href="#583711" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>

            <span class="keyword">def</span> <a title="=&gt; List[Constructors.this.global.Tree]" id="583716">applyMethodStats</a> = <a href="#583715" title="Constructors.this.global.Transformer">constrStatTransformer</a>.<span title="(trees: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">transformTrees</span><span class="delimiter">(</span><a href="#583701" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.DefDef" id="583717">applyMethodDef</a> = <a href="../../../reflect/internal/Trees.scala.html#40615" title="(sym: Constructors.this.global.Symbol, vparamss: List[List[Constructors.this.global.ValDef]], rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
              sym = <a href="#583711" title="Constructors.this.global.MethodSymbol">applyMethod</a>,
              vparamss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              rhs = <a href="../ast/TreeDSL.scala.html#184069" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#583716" title="=&gt; List[Constructors.this.global.Tree]">applyMethodStats</a>, <a href="../Global.scala.html#182860" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92629" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46669" title="=&gt; Constructors.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="../ast/Trees.scala.html#183118" title="(sym: Constructors.this.global.Symbol, constrMods: Constructors.this.global.Modifiers, vparamss: List[List[Constructors.this.global.ValDef]], argss: List[List[Constructors.this.global.Tree]], body: List[Constructors.this.global.Tree], superPos: Constructors.this.global.Position)Constructors.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span>
              sym = <a href="#583708" title="Constructors.this.global.ClassSymbol">closureClass</a>,
              constrMods = <a href="../../../reflect/internal/Trees.scala.html#40602" title="(flags: Long)Constructors.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>,
              vparamss = <span title="(xs: List[Constructors.this.global.ValDef]*)List[List[Constructors.this.global.ValDef]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.ValDef*)List[Constructors.this.global.ValDef]">List</span><span class="delimiter">(</span><a href="#583712" title="Constructors.this.global.ValDef">outerFieldDef</a><span class="delimiter">)</span><span class="delimiter">)</span>,
              argss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              body = <span title="(xs: Constructors.this.global.DefDef*)List[Constructors.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="#583717" title="Constructors.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span>,
              superPos = <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree" id="581901">delayedInitCall</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="584128">closure</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> =
        <a href="#581864" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../ast/TreeDSL.scala.html#184069" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="../ast/TreeDSL.scala.html#184069" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46372" title="=&gt; Constructors.this.global.Symbol">delayedInitMethod</a><span class="delimiter">)</span>,
              <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40624" title="(tpt: Constructors.this.global.Tree, argss: List[List[Constructors.this.global.Tree]])Constructors.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#184069" title="(tp: Constructors.this.global.Type)Constructors.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#584128" title="Constructors.this.global.Tree">closure</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>, <span title="(xs: List[Constructors.this.global.Tree]*)List[List[Constructors.this.global.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      /** Return a pair consisting of (all statements up to and including superclass and trait constr calls, rest) */
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" id="581902">splitAtSuper</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="584238">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="584239">isConstr</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="584246">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#584246" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#584246" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47804" title="=&gt; Boolean">isConstructor</a>
        <span class="keyword">val</span> <a href="#584241" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#584240" title="List[Constructors.this.global.Tree]" id="584241">pre</a>, <a href="#584240" title="List[Constructors.this.global.Tree]" id="584242">rest0</a><span class="delimiter">)</span> = <a href="#584238" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#584239" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#584252" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a href="#584244" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#584243" title="List[Constructors.this.global.Tree]" id="584244">supercalls</a>, <a href="#584243" title="List[Constructors.this.global.Tree]" id="584245">rest</a><span class="delimiter">)</span> = <a href="#584242" title="List[Constructors.this.global.Tree]">rest0</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><a href="#584239" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#584268" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="(_1: List[Constructors.this.global.Tree], _2: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</span><a href="#584241" title="List[Constructors.this.global.Tree]">pre</a> <a href="#584283" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#584244" title="List[Constructors.this.global.Tree]">supercalls</a>, <a href="#584245" title="List[Constructors.this.global.Tree]">rest</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a href="#581904" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#581903" title="List[Constructors.this.global.Tree]" id="581904">uptoSuperStats</a>, <a href="#581903" title="List[Constructors.this.global.Tree]" id="581905">remainingConstrStats</a><span class="delimiter">)</span> = <a href="#581902" title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">splitAtSuper</a><span title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree]) @unchecked" class="delimiter">(</span><a href="#581883" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span><span class="delimiter">)</span>

      /** XXX This is not corect: remainingConstrStats.nonEmpty excludes too much,
       *  but excluding it includes too much.  The constructor sequence being mimicked
       *  needs to be reproduced with total fidelity.
       *
       *  See test case files/run/bug4680.scala, the output of which is wrong in many
       *  particulars.
       */
      <span class="keyword">val</span> <a title="Boolean" id="581906">needsDelayedInit</a> =
        <span class="delimiter">(</span><a href="#581862" title="Constructors.this.global.Symbol">clazz</a> <a href="../../../reflect/internal/Symbols.scala.html#47964" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#46370" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> /*&amp;&amp; !(defBuf exists isInitDef)*/ <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#581905" title="List[Constructors.this.global.Tree]">remainingConstrStats</a>.<span title="=&gt; Boolean">nonEmpty</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#581906" title="Boolean">needsDelayedInit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="584304">dicl</a> = <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#239326" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#581855" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <a href="#581854" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a> <a href="#581900" title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree">delayedInitClosure</a><span class="delimiter">(</span><a href="#581905" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>
        <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#584304" title="Constructors.this.global.Tree">dicl</a>
        <a href="#581905" title="List[Constructors.this.global.Tree]">remainingConstrStats</a> = <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#581901" title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree">delayedInitCall</a><span class="delimiter">(</span><a href="#584304" title="Constructors.this.global.Tree">dicl</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // Assemble final constructor
      <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#239326" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</span><span class="delimiter">(</span>
        <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>, <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Modifiers">mods</span>, <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Name">name</span>, <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[Constructors.this.global.TypeDef]">tparams</span>, <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[List[Constructors.this.global.ValDef]]">vparamss</span>, <a href="#582084" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Tree">tpt</span>,
        <a href="#239326" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</span><span class="delimiter">(</span>
          <a href="#582086" title="=&gt; Constructors.this.global.Block">constrBody</a>,
          <a href="#581891" title="List[Constructors.this.global.Tree]">paramInits</a> <a href="#584321" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#581884" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <a href="#584322" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#581904" title="List[Constructors.this.global.Tree]">uptoSuperStats</a> <a href="#584323" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a>
            <a href="#581893" title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">guardSpecializedInitializer</a><span class="delimiter">(</span><a href="#581905" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>,
          <a href="#582086" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="=&gt; Constructors.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>;

      // Followed by any auxiliary constructors
      <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])defBuf.type">++=</span> <a href="#581882" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>

      // Unlink all fields that can be dropped from class scope
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="584355">sym</a> &lt;- <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="(f: Constructors.this.global.Symbol =&gt; Unit)Unit">decls</a> ; <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#581889" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#584355" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#581862" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#61758" title="(sym: Constructors.this.global.Symbol)Unit">unlink</a> <a href="#584355" title="Constructors.this.global.Symbol">sym</a>

      // Eliminate all field definitions that can be dropped from template
      <a href="#239326" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, parents: List[Constructors.this.global.Tree], self: Constructors.this.global.ValDef, body: List[Constructors.this.global.Tree])Constructors.this.global.Template">Template</span><span class="delimiter">(</span><a href="#581860" title="Constructors.this.global.Template">impl</a>, <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">parents</span>, <a href="#581860" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.ValDef">self</span>,
        <a href="#581881" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)List[Constructors.this.global.Tree]">filter</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="584404">stat</a> =&gt; <a href="#581889" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#584404" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> // transformClassTemplate

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="581854">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="582693">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> =
      <a href="#582693" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="584411">mods</a>, <a title="Constructors.this.global.TypeName" id="584412">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="584413">tparams</a>, <a title="Constructors.this.global.Template" id="584414">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#582693" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/HasFlags.scala.html#48087" title="=&gt; Boolean">isInterface</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Constructors.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#582693" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt;
          <a href="#239326" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], impl: Constructors.this.global.Template)Constructors.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a href="#582693" title="Constructors.this.global.Tree">tree</a>, <a href="#584411" title="Constructors.this.global.Modifiers">mods</a>, <a href="#584412" title="Constructors.this.global.TypeName">name</a>, <a href="#584413" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#581853" title="(impl: Constructors.this.global.Template)Constructors.this.global.Template">transformClassTemplate</a><span class="delimiter">(</span><a href="#584414" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
          <a href="#239326" title="Constructors.this.ConstructorTransformer" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#582693" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span> // ConstructorTransformer
<span class="delimiter">}</span>

        </pre>
    </body>
</html>