<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/Erasure.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Martin Odersky
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.tools.reflect.SigParser
<span class="keyword">import</span> scala.reflect.internal.<a href="../../../reflect/internal/ClassfileConstants.scala.html#8072" title="object scala.reflect.internal.ClassfileConstants">ClassfileConstants</a>._
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> symtab._
<span class="keyword">import</span> <a href="../symtab/package.scala.html#36230" title="=&gt; reflect.internal.Flags.type">Flags</a>._

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Erasure extends scala.tools.nsc.transform.AddInterfaces with scala.reflect.internal.transform.Erasure with scala.tools.nsc.typechecker.Analyzer with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="30015">Erasure</a> <a href="#30015" title="ScalaObject" class="keyword">extends</a> <a href="AddInterfaces.scala.html#29511" title="scala.tools.nsc.transform.AddInterfaces">AddInterfaces</a>
                          <span class="keyword">with</span> reflect.internal.transform.<a href="../../../reflect/internal/transform/Erasure.scala.html#10592" title="scala.reflect.internal.transform.Erasure">Erasure</a>
                          <span class="keyword">with</span> typechecker.<a href="../typechecker/Analyzer.scala.html#32245" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a>
                          <span class="keyword">with</span> <a href="TypingTransformers.scala.html#29733" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a>
                          <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#13777" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a>
<span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="TypingTransformers.scala.html#238437" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#40473" title="object Erasure.this.global.definitions">definitions</a>._
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#184073" title="object Erasure.this.CODE">CODE</a>._

  <span class="keyword">val</span> <a title="String" id="239132">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;erasure&quot;)" class="string">&quot;erasure&quot;</span>

  <span class="keyword">def</span> <a title="(unit: Erasure.this.global.CompilationUnit)Erasure.this.global.Transformer" id="239134">newTransformer</a><span class="delimiter">(</span><a title="Erasure.this.global.CompilationUnit" id="584480">unit</a>: <a href="../CompilationUnits.scala.html#183079" title="Erasure.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#183129" title="Erasure.this.global.Transformer">Transformer</a> =
    <span title="Erasure.this.ErasureTransformer" class="keyword">new</span> <a href="#239161" title="Erasure.this.ErasureTransformer">ErasureTransformer</a><span class="delimiter">(</span><a href="#584480" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="239135">keepsTypeParams</a> = <span title="Boolean(false)" class="keyword">false</span>

// -------- erasure on types --------------------------------------------------------

  // A type function from T =&gt; Class[U], used to determine the return
  // type of getClass calls.  The returned type is:
  //
  //  1. If T is a value type, Class[T].
  //  2. If T is a phantom type (Any or AnyVal), Class[_].
  //  3. If T is a local class, Class[_ &lt;: |T|].
  //  4. Otherwise, Class[_ &lt;: T].
  //
  // Note: AnyVal cannot be Class[_ &lt;: AnyVal] because if the static type of the
  // receiver is AnyVal, it implies the receiver is boxed, so the correct
  // class object is that of java.lang.Integer, not Int.
  //
  // TODO: If T is final, return type could be Class[T].  Should it?
  <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="239136">getClassReturnType</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="584499">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="584501">sym</a>     = <a href="#584499" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>

    <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70383" title="=&gt; Boolean">erasedTypes</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46321" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#584501" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46568" title="(arg: Erasure.this.global.Type)Erasure.this.global.Type">ClassType</a><span class="delimiter">(</span><a href="#584499" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42732" title="=&gt; Erasure.this.global.Type">widen</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="584506">eparams</a>    = <a href="../../../reflect/internal/Types.scala.html#40246" title="(clazz: Erasure.this.global.Symbol, tparams: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">typeParamsToExistentials</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46321" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>, <a href="../../../reflect/internal/Definitions.scala.html#46321" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47940" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="584507">upperBound</a> = <span class="delimiter">(</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46772" title="(elem: Erasure.this.global.Symbol)Boolean">isPhantomClass</a><span class="delimiter">(</span><a href="#584501" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46274" title="=&gt; Erasure.this.global.Symbol">AnyClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#584501" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47865" title="=&gt; Boolean">isLocalClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/transform/Erasure.scala.html#82329" title="(parents: List[Erasure.this.global.Type])Erasure.this.global.Type">intersectionDominator</a><span class="delimiter">(</span><a href="#584499" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42737" title="=&gt; List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#584499" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42732" title="=&gt; Erasure.this.global.Type">widen</a>
      <span class="delimiter">)</span>

      <a href="../../../reflect/internal/Types.scala.html#40208" title="(tparams: List[Erasure.this.global.Symbol], tpe0: Erasure.this.global.Type)Erasure.this.global.Type">existentialAbstraction</a><span class="delimiter">(</span>
        <a href="#584506" title="List[Erasure.this.global.Symbol]">eparams</a>,
        <a href="../../../reflect/internal/Definitions.scala.html#46568" title="(arg: Erasure.this.global.Type)Erasure.this.global.Type">ClassType</a><span class="delimiter">(</span><a href="#584506" title="List[Erasure.this.global.Symbol]">eparams</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: Erasure.this.global.Type)Erasure.this.global.Symbol">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#40114" title="object Erasure.this.global.TypeBounds">TypeBounds</a>.<a href="../../../reflect/internal/Types.scala.html#66836" title="(hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">upper</a><span class="delimiter">(</span><a href="#584507" title="Erasure.this.global.Type">upperBound</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  // convert a numeric with a toXXX method
  <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, numericSym: Erasure.this.global.Symbol)Erasure.this.global.Tree" id="239137">numericConversion</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="584537">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Symbol" id="584538">numericSym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Erasure.this.global.TermName" id="584540">mname</a>      = <a href="../../../reflect/internal/Names.scala.html#39670" title="(s: String)Erasure.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;to&quot;)" class="string">&quot;to&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#584538" title="Erasure.this.global.Symbol">numericSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Erasure.this.global.Name">name</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="584541">conversion</a> = <a href="#584537" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42769" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">member</a> <a href="#584540" title="Erasure.this.global.TermName">mname</a>

    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#584541" title="Erasure.this.global.Symbol">conversion</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a>, <a href="#584537" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">tree</a> <span title="(other: String)String">+</span> <span title="String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#584538" title="Erasure.this.global.Symbol">numericSym</a><span class="delimiter">)</span>
    <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#584537" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#584537" title="Erasure.this.global.Tree">tree</a>, <a href="#584541" title="Erasure.this.global.Symbol">conversion</a><span class="delimiter">)</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Erasure.this.NeedsSigCollector" id="239138">NeedsSigCollector</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../../reflect/internal/Types.scala.html#40244" title="Erasure.this.global.TypeCollector[Boolean]">TypeCollector</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Unit" id="584626">traverse</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="584632">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Types.scala.html#129338" title="=&gt; Boolean">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#584632" title="Erasure.this.global.Type">tp</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Unit" id="584635">st</a>: <a href="../../../reflect/internal/Types.scala.html#40085" title="Erasure.this.global.SubType">SubType</a> =&gt;
            <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#584635" title="Erasure.this.global.SubType">st</a>.<a href="../../../reflect/internal/Types.scala.html#66840" title="=&gt; Erasure.this.global.Type">supertype</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">TypeRef</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="584639">pre</a>, <a title="Erasure.this.global.Symbol" id="584640">sym</a>, <a title="List[Erasure.this.global.Type]" id="584641">args</a><span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#584640" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <a href="#584641" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; Unit)Unit">foreach</span> <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#584640" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47809" title="=&gt; Boolean">isTypeParameterOrSkolem</a> <span title="(x: Boolean)Boolean">||</span> <a href="#584640" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47770" title="=&gt; Boolean">isExistentiallyBound</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#584641" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#129339" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#584640" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47757" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82323" title="(pre: Erasure.this.global.Type, cls: Erasure.this.global.Symbol)Erasure.this.global.Type">rebindInnerClass</a><span class="delimiter">(</span><a href="#584639" title="Erasure.this.global.Type">pre</a>, <a href="#584640" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> // #2585
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#584640" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47787" title="=&gt; Boolean">isPackageClass</a><span class="delimiter">)</span> <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#584639" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">PolyType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> | ExistentialType<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
            <a href="../../../reflect/internal/Types.scala.html#129339" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span class="keyword">case</span> <span title="Unit">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="584676">parents</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#584676" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Unit)Unit">foreach</span> <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
          <span class="keyword">case</span> <span title="Unit">ClassInfoType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="584701">parents</a>, _, _<span class="delimiter">)</span> =&gt;
            <a href="#584701" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Unit)Unit">foreach</span> <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
          <span class="keyword">case</span> <span title="Unit">AnnotatedType</span><span class="delimiter">(</span>_, <a title="Erasure.this.global.Type" id="584726">atp</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#584626" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#584726" title="Erasure.this.global.Type">atp</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
            <a href="../../../reflect/internal/Types.scala.html#82353" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span title="Unit" class="delimiter">(</span><a href="#584632" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  // for debugging signatures: traces logic given system property
  // performance: get the value here
  <span class="keyword">val</span> <a title="Boolean" id="239140">traceSignatures</a> = <span class="delimiter">(</span>sys.<span title="object scala.sys.BooleanProp">BooleanProp</span> <span title="(key: String)scala.sys.BooleanProp">keyExists</span> <span title="String(&quot;scalac.sigs.trace&quot;)" class="string">&quot;scalac.sigs.trace&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">value</span>
  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Erasure.this.traceSig" id="239142">traceSig</a> <span title="ScalaObject" class="keyword">extends</span> util.<a href="../util/Tracer.scala.html#35081" title="scala.tools.nsc.util.Tracer">Tracer</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#239140" title="=&gt; Boolean">traceSignatures</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(x: Any)String" id="584764">stringify</a><span class="delimiter">(</span><a title="Any" id="584768">x</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#584768" title="Any">x</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="String" id="584776">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a>   =&gt; <span class="keyword">super</span>.<a href="../util/Tracer.scala.html#584744" title="(x: Any)String">stringify</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#137050" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">dropAllRefinements</a><span class="delimiter">(</span><a href="#584776" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="String">_</span>          =&gt; <span class="keyword">super</span>.<a href="../util/Tracer.scala.html#584744" title="(x: Any)String">stringify</a><span class="delimiter">(</span><a href="#584768" title="Any">x</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="239144">verifyJavaErasure</a> = <a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183390" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Xverify</a>.<a href="../settings/MutableSettings.scala.html#183734" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">||</span> <a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183452" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#183734" title="=&gt; Boolean">value</a>
  <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Boolean" id="239145">needsJavaSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="584790">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183466" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Ynogenericsig</a>.<a href="../settings/MutableSettings.scala.html#183734" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#239138" title="object Erasure.this.NeedsSigCollector">NeedsSigCollector</a>.<a href="../../../reflect/internal/Types.scala.html#129341" title="(tp: Erasure.this.global.Type)Boolean">collect</a><span class="delimiter">(</span><a href="#584790" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>

  // only refer to type params that will actually make it into the sig, this excludes:
  // * higher-order type parameters
  // * type parameters appearing in method parameters
  // * type members not visible in an enclosing template
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol, initialSymbol: Erasure.this.global.Symbol)Boolean" id="239146">isTypeParameterInSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="584797">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="584798">initialSymbol</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
    <span title="=&gt; Boolean">!</span><a href="#584797" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47810" title="=&gt; Boolean">isHigherOrderTypeParameter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <a href="#584797" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47809" title="=&gt; Boolean">isTypeParameterOrSkolem</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
      <span class="delimiter">(</span><a href="#584798" title="Erasure.this.global.Symbol">initialSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47880" title="=&gt; List[Erasure.this.global.Symbol]">enclClassChain</a>.<span title="(p: Erasure.this.global.Symbol =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#584797" title="Erasure.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#47962" title="(that: Erasure.this.global.Symbol)Boolean">isNestedIn</a> <a href="#584813" title="Erasure.this.global.Symbol">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <span class="delimiter">(</span><a href="#584798" title="Erasure.this.global.Symbol">initialSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47773" title="=&gt; Boolean">isMethod</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#584798" title="Erasure.this.global.Symbol">initialSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47940" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#584797" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">)</span>

  // Ensure every '.' in the generated signature immediately follows
  // a close angle bracket '&gt;'.  Any which do not are replaced with '$'.
  // This arises due to multiply nested classes in the face of the
  // rewriting explained at rebindInnerClass.   This should be done in a
  // more rigorous way up front rather than catching it after the fact,
  // but that will be more involved.
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sig: String)String" id="239147">dotCleanup</a><span class="delimiter">(</span><a title="String" id="584815">sig</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Char" id="584817">last</a>: <span title="Char">Char</span> = <span title="Char('\00')" class="char">'\0'</span>
    <a href="#584815" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">sig</a> <span title="(f: Char =&gt; Char)(implicit bf: scala.collection.generic.CanBuildFrom[String,Char,String])String">map</span> <a href="#585241" title="Char" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Char" class="char">'.'</span> <span class="keyword">if</span> <a href="#584817" title="Char">last</a> <span title="(x: Char)Boolean">!=</span> <span title="Char('&gt;')" class="char">'&gt;'</span> =&gt; <a href="#584817" title="Char">last</a> = <span title="Char('.')" class="char">'.'</span> ; <span title="Char('$')" class="char">'$'</span>
      <span class="keyword">case</span> <a title="Char" id="585247">ch</a>                 =&gt; <a href="#584817" title="Char">last</a> = <a href="#585247" title="Char">ch</a> ; <a href="#585247" title="Char">ch</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** This object is only used for sanity testing when -check:genjvm is set.
   *  In that case we make sure that the erasure of the `normalized` type
   *  is the same as the erased type that's generated. Normalization means
   *  unboxing some primitive types and further simplifications as they are done in jsig.
   */
  <span class="keyword">val</span> <a title="prepareSigMap extends Erasure.this.global.TypeMap" id="239148">prepareSigMap</a> = <a href="#351428" title="Erasure.this.global.TypeMap {def squashBoxed(tp: Erasure.this.global.Type): Erasure.this.global.Type}" class="keyword">new</a> <a href="../../../reflect/internal/Types.scala.html#40242" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="351428">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="351430">squashBoxed</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="351432">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a> = <a href="#351432" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42758" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351439">t</a> @ RefinedType<span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="351442">parents</a>, <a title="Erasure.this.global.Scope" id="351443">decls</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="351444">parents1</a> = <a href="#351442" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)List[Erasure.this.global.Type]">mapConserve</span> <a href="#351430" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351444" title="List[Erasure.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351442" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#351432" title="Erasure.this.global.Type">tp</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#61660" title="(parents: List[Erasure.this.global.Type], decls: Erasure.this.global.Scope)Erasure.this.global.RefinedType">RefinedType</a><span class="delimiter">(</span><a href="#351444" title="List[Erasure.this.global.Type]">parents1</a>, <a href="#351443" title="Erasure.this.global.Scope">decls</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351469">t</a> @ ExistentialType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="351472">tparams</a>, <a title="Erasure.this.global.Type" id="351473">tpe</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351474">tpe1</a> = <a href="#351430" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#351473" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351474" title="Erasure.this.global.Type">tpe1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351473" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="#351469" title="Erasure.this.global.ExistentialType">t</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#67120" title="(quantified: List[Erasure.this.global.Symbol], underlying: Erasure.this.global.Type)Erasure.this.global.ExistentialType">ExistentialType</a><span class="delimiter">(</span><a href="#351472" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#351474" title="Erasure.this.global.Type">tpe1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351479">t</a> =&gt;
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46819" title="=&gt; Map[Erasure.this.global.Symbol,Erasure.this.global.Symbol]">boxedClass</a> <span title="(key: Erasure.this.global.Symbol)Boolean">contains</span> <a href="#351479" title="Erasure.this.global.Type">t</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <a href="#351432" title="Erasure.this.global.Type">tp</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="351431">apply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="351433">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a> = <a href="#351433" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42758" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351482">tp1</a> @ TypeBounds<span class="delimiter">(</span><a title="Erasure.this.global.Type" id="351485">lo</a>, <a title="Erasure.this.global.Type" id="351486">hi</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351487">lo1</a> = <a href="#351430" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#351485" title="Erasure.this.global.Type">lo</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351488">hi1</a> = <a href="#351430" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#351486" title="Erasure.this.global.Type">hi</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#351487" title="Erasure.this.global.Type">lo1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351485" title="Erasure.this.global.Type">lo</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#351488" title="Erasure.this.global.Type">hi1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351486" title="Erasure.this.global.Type">hi</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#351482" title="Erasure.this.global.TypeBounds">tp1</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#66838" title="(lo: Erasure.this.global.Type, hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">TypeBounds</a><span class="delimiter">(</span><a href="#351487" title="Erasure.this.global.Type">lo1</a>, <a href="#351488" title="Erasure.this.global.Type">hi1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351494">tp1</a> @ TypeRef<span class="delimiter">(</span><a title="Erasure.this.global.Type" id="351498">pre</a>, <a title="Erasure.this.global.Symbol" id="351499">sym</a>, <a title="List[Erasure.this.global.Type]" id="351500">args</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="351501">argApply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="351502">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351503">tp1</a> = <a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#351502" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351503" title="Erasure.this.global.Type">tp1</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
          <span class="keyword">else</span> <a href="#351430" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#351503" title="Erasure.this.global.Type">tp1</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#351500" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82322" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#351494" title="Erasure.this.global.TypeRef">tp1</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
          <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#82353" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#351494" title="Erasure.this.global.TypeRef">tp1</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46274" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46832" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46375" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Definitions.scala.html#46665" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46289" title="object Erasure.this.global.definitions.NothingClass">NothingClass</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Definitions.scala.html#46284" title="=&gt; Erasure.this.global.Symbol">RuntimeNothingClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351499" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46291" title="object Erasure.this.global.definitions.NullClass">NullClass</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Definitions.scala.html#46286" title="=&gt; Erasure.this.global.Symbol">RuntimeNullClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351570">pre1</a> = <a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#351498" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="351571">args1</a> = <a href="#351500" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)List[Erasure.this.global.Type]">mapConserve</span> <a href="#351501" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">argApply</a>
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#351570" title="Erasure.this.global.Type">pre1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351498" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#351571" title="List[Erasure.this.global.Type]">args1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351500" title="List[Erasure.this.global.Type]">args</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#351494" title="Erasure.this.global.TypeRef">tp1</a>
          <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#66645" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="#351570" title="Erasure.this.global.Type">pre1</a>, <a href="#351499" title="Erasure.this.global.Symbol">sym</a>, <a href="#351571" title="List[Erasure.this.global.Type]">args1</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351586">tp1</a> @ MethodType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="351589">params</a>, <a title="Erasure.this.global.Type" id="351590">restpe</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="351591">params1</a> = <a href="../../../reflect/internal/Types.scala.html#82357" title="(origSyms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">mapOver</a><span class="delimiter">(</span><a href="#351589" title="List[Erasure.this.global.Symbol]">params</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351592">restpe1</a> = <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351590" title="Erasure.this.global.Type">restpe</a>.<a href="../../../reflect/internal/Types.scala.html#42758" title="=&gt; Erasure.this.global.Type">normalize</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#351590" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#351591" title="List[Erasure.this.global.Symbol]">params1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351589" title="List[Erasure.this.global.Symbol]">params</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#351592" title="Erasure.this.global.Type">restpe1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351590" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#351586" title="Erasure.this.global.MethodType">tp1</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[Erasure.this.global.Symbol], resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#351591" title="List[Erasure.this.global.Symbol]">params1</a>, <a href="#351592" title="Erasure.this.global.Type">restpe1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351609">tp1</a> @ RefinedType<span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="351612">parents</a>, <a title="Erasure.this.global.Scope" id="351613">decls</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="351614">parents1</a> = <a href="#351612" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)List[Erasure.this.global.Type]">mapConserve</span> <a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351614" title="List[Erasure.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351612" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#351609" title="Erasure.this.global.RefinedType">tp1</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#61660" title="(parents: List[Erasure.this.global.Type], decls: Erasure.this.global.Scope)Erasure.this.global.RefinedType">RefinedType</a><span class="delimiter">(</span><a href="#351614" title="List[Erasure.this.global.Type]">parents1</a>, <a href="#351613" title="Erasure.this.global.Scope">decls</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351629">t</a> @ ExistentialType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="351632">tparams</a>, <a title="Erasure.this.global.Type" id="351633">tpe</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="351634">tpe1</a> = <a href="#351431" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#351633" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#351634" title="Erasure.this.global.Type">tpe1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#351633" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="#351629" title="Erasure.this.global.ExistentialType">t</a>
        <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#67120" title="(quantified: List[Erasure.this.global.Symbol], underlying: Erasure.this.global.Type)Erasure.this.global.ExistentialType">ExistentialType</a><span class="delimiter">(</span><a href="#351632" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#351634" title="Erasure.this.global.Type">tpe1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.ClassInfoType" id="351635">tp1</a>: <a href="../../../reflect/internal/Types.scala.html#40123" title="Erasure.this.global.ClassInfoType">ClassInfoType</a> =&gt;
        <a href="#351635" title="Erasure.this.global.ClassInfoType">tp1</a>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="351636">tp1</a> =&gt;
        <a href="../../../reflect/internal/Types.scala.html#82353" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#351636" title="Erasure.this.global.Type">tp1</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Run the signature parser to catch bogus signatures.
   */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol, sig: String)Boolean" id="239150">isValidSignature</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="585254">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a>, <a title="String" id="585255">sig</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">(</span>
    /** Since we're using a sun internal class for signature validation,
     *  we have to allow for it not existing or otherwise malfunctioning:
     *  in which case we treat every signature as valid.  Medium term we
     *  should certainly write independent signature validation.
     */
    <a href="../../reflect/SigParser.scala.html#35597" title="object scala.tools.reflect.SigParser">SigParser</a>.<a href="../../reflect/SigParser.scala.html#351323" title="=&gt; Boolean">isParserAvailable</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#585254" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47773" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span> <a href="../../reflect/SigParser.scala.html#35597" title="object scala.tools.reflect.SigParser">SigParser</a> <a href="../../reflect/SigParser.scala.html#351325" title="(s: String)Boolean">verifyMethod</a> <a href="#585255" title="String">sig</a>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#585254" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47755" title="=&gt; Boolean">isTerm</a><span class="delimiter">)</span> <a href="../../reflect/SigParser.scala.html#35597" title="object scala.tools.reflect.SigParser">SigParser</a> <a href="../../reflect/SigParser.scala.html#351326" title="(s: String)Boolean">verifyType</a> <a href="#585255" title="String">sig</a>
      <span class="keyword">else</span> <a href="../../reflect/SigParser.scala.html#35597" title="object scala.tools.reflect.SigParser">SigParser</a> <a href="../../reflect/SigParser.scala.html#351324" title="(s: String)Boolean">verifyClass</a> <a href="#585255" title="String">sig</a>
    <span class="delimiter">)</span>
  <span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]" id="239151">hiBounds</a><span class="delimiter">(</span><a title="Erasure.this.global.TypeBounds" id="585258">bounds</a>: <a href="../../../reflect/internal/Types.scala.html#40113" title="Erasure.this.global.TypeBounds">TypeBounds</a><span class="delimiter">)</span>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <a href="#585258" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66852" title="=&gt; Erasure.this.global.Type">hi</a>.<a href="../../../reflect/internal/Types.scala.html#42758" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="List[Erasure.this.global.Type]">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="585262">parents</a>, _<span class="delimiter">)</span> =&gt; <a href="#585262" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="delimiter">(</span><a href="#585279" title="Erasure.this.global.Type">_</a>.<a href="../../../reflect/internal/Types.scala.html#42758" title="=&gt; Erasure.this.global.Type">normalize</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="List[Erasure.this.global.Type]" id="585318">tp</a>                      =&gt; <a href="#585318" title="Erasure.this.global.Type">tp</a> <a href="#585319" title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">::</a> <span title="object Nil">Nil</span>
  <span class="delimiter">}</span>

  /** The Java signature of type 'info', for symbol sym. The symbol is used to give the right return
   *  type for constructors.
   */
  <span class="keyword">def</span> <a title="(sym0: Erasure.this.global.Symbol, info: Erasure.this.global.Type)Option[String]" id="239152">javaSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="351388">sym0</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="351389">info</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Option[String])Option[String]">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185237" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="585329">isTraitSignature</a> = <a href="#351388" title="Erasure.this.global.Symbol">sym0</a>.<a href="../../../reflect/internal/Symbols.scala.html#47975" title="=&gt; Erasure.this.global.Symbol">enclClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47763" title="=&gt; Boolean">isTrait</a>

    <span class="keyword">def</span> <a title="(parents: List[Erasure.this.global.Type])String" id="585330">superSig</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="585339">parents</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../util/Tracer.scala.html#584760" title="(name: String, args: =&gt; Any)(body: =&gt; String)String">traceSig</a><span class="delimiter">(</span><span title="String(&quot;superSig&quot;)" class="string">&quot;superSig&quot;</span>, <a href="#585339" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="585349">ps</a> = <span class="delimiter">(</span>
        <span title="List[Erasure.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#585329" title="Boolean">isTraitSignature</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          // java is unthrilled about seeing interfaces inherit from classes
          <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="585350">ok</a> = <a href="#585339" title="List[Erasure.this.global.Type]">parents</a> <span title="(p: Erasure.this.global.Type =&gt; Boolean)List[Erasure.this.global.Type]">filter</span> <span class="delimiter">(</span><a title="Erasure.this.global.Type" id="585354">p</a> =&gt; <a href="#585354" title="Erasure.this.global.Type">p</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47763" title="=&gt; Boolean">isTrait</a> <span title="(x: Boolean)Boolean">||</span> <a href="#585354" title="Erasure.this.global.Type">p</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48087" title="=&gt; Boolean">isInterface</a><span class="delimiter">)</span>
          // traits should always list Object.
          <span title="List[Erasure.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#585350" title="List[Erasure.this.global.Type]">ok</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#585350" title="List[Erasure.this.global.Type]">ok</a>.<span title="=&gt; Erasure.this.global.Type">head</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="#585362" title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">::</a> <a href="#585350" title="List[Erasure.this.global.Type]">ok</a>
          <span class="keyword">else</span> <a href="#585350" title="List[Erasure.this.global.Type]">ok</a>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <a href="#585339" title="List[Erasure.this.global.Type]">parents</a>
      <span class="delimiter">)</span>
      <a href="#585349" title="List[Erasure.this.global.Type]">ps</a> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a> <span title="=&gt; String">mkString</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)String" id="585331">boxedSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="585385">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#585390" title="List[Erasure.this.global.Symbol] @scala.annotation.unchecked.uncheckedVariance" id="585396">jsig</a><span class="delimiter">(</span><a href="#585385" title="Erasure.this.global.Type" id="585393">tp</a>, primitiveOK = <a title="Boolean(false)" id="585394" class="keyword">false</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(bounds: List[Erasure.this.global.Type])String" id="585332">boundsSig</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="585431">bounds</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../util/Tracer.scala.html#584760" title="(name: String, args: =&gt; Any)(body: =&gt; String)String">traceSig</a><span class="delimiter">(</span><span title="String(&quot;boundsSig&quot;)" class="string">&quot;boundsSig&quot;</span>, <a href="#585431" title="List[Erasure.this.global.Type]">bounds</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#585437" title="(List[Erasure.this.global.Type], List[Erasure.this.global.Type])" class="delimiter">(</a><a href="#585436" title="List[Erasure.this.global.Type]" id="585437">isTrait</a>, <a href="#585436" title="List[Erasure.this.global.Type]" id="585438">isClass</a><span class="delimiter">)</span> = <a href="#585431" title="List[Erasure.this.global.Type]">bounds</a> <span title="(p: Erasure.this.global.Type =&gt; Boolean)(List[Erasure.this.global.Type], List[Erasure.this.global.Type])">partition</span> <span class="delimiter">(</span><a href="#585443" title="Erasure.this.global.Type">_</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47763" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="585439">classPart</a> = <a href="#585438" title="List[Erasure.this.global.Type]">isClass</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String(&quot;:&quot;)">Nil</span>    =&gt; <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> // + boxedSig(ObjectClass.tpe)
        <span class="keyword">case</span> <a title="String" id="585459">x</a> :: _ =&gt; <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#585459" title="Erasure.this.global.Type">x</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#585439" title="String">classPart</a> <a href="#585460" title="(x: String)List[String]">::</a> <span class="delimiter">(</span><a href="#585437" title="List[Erasure.this.global.Type]">isTrait</a> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">)</span> <span title="(sep: String)String">mkString</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(tsym: Erasure.this.global.Symbol)String" id="585333">paramSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="585515">tsym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#585515" title="Erasure.this.global.Symbol">tsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)String">+</span> <a href="#585332" title="(bounds: List[Erasure.this.global.Type])String">boundsSig</a><span class="delimiter">(</span><a href="#239151" title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]">hiBounds</a><span class="delimiter">(</span><a href="#585515" title="Erasure.this.global.Symbol">tsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42736" title="=&gt; Erasure.this.global.TypeBounds">bounds</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(tparams: List[Erasure.this.global.Symbol])String" id="585334">polyParamSig</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="585518">tparams</a>: <span title="List[Erasure.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../util/Tracer.scala.html#584760" title="(name: String, args: =&gt; Any)(body: =&gt; String)String">traceSig</a><span class="delimiter">(</span><span title="String(&quot;polyParamSig&quot;)" class="string">&quot;polyParamSig&quot;</span>, <a href="#585518" title="List[Erasure.this.global.Symbol]">tparams</a><span class="delimiter">)</span> <span class="delimiter">(</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585518" title="List[Erasure.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">else</span> <a href="#585518" title="List[Erasure.this.global.Symbol]">tparams</a> <span title="(f: Erasure.this.global.Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],String,List[String]])List[String]">map</span> <a href="#585333" title="(tsym: Erasure.this.global.Symbol)String">paramSig</a> <span title="(start: String, sep: String, end: String)String">mkString</span> <span class="delimiter">(</span><span title="String(&quot;&lt;&quot;)" class="string">&quot;&lt;&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

    // Anything which could conceivably be a module (i.e. isn't known to be
    // a type parameter or similar) must go through here or the signature is
    // likely to end up with Foo&lt;T&gt;.Empty where it needs Foo&lt;T&gt;.Empty$.
    <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)String" id="585335">fullNameInSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="585583">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="String(&quot;L&quot;)" class="string">&quot;L&quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; String)String">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185245" title="=&gt; scala.tools.nsc.Phase">icodePhase</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#585583" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47892" title="=&gt; String">javaBinaryName</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String" id="585336">jsig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="585386">tp0</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a>, <a title="List[Erasure.this.global.Symbol]" id="585390">existentiallyBound</a>: <span title="List[Erasure.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <span title="object Nil">Nil</span>, <a title="Boolean" id="585391">toplevel</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="585392">primitiveOK</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="585590">tp</a> = <a href="#585386" title="Erasure.this.global.Type">tp0</a>.<a href="../../../reflect/internal/Types.scala.html#42759" title="=&gt; Erasure.this.global.Type">dealias</a>
      <a href="#585590" title="Erasure.this.global.Type">tp</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="String" id="585591">st</a>: <a href="../../../reflect/internal/Types.scala.html#40085" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585591" title="Erasure.this.global.SubType">st</a>.<a href="../../../reflect/internal/Types.scala.html#66840" title="=&gt; Erasure.this.global.Type">supertype</a>, <a href="#585390" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#585391" title="Boolean">toplevel</a>, <a href="#585392" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">ExistentialType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="585594">tparams</a>, <a title="Erasure.this.global.Type" id="585595">tpe</a><span class="delimiter">)</span> =&gt;
          <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585595" title="Erasure.this.global.Type">tpe</a>, <a href="#585594" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#585391" title="Boolean">toplevel</a>, <a href="#585392" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">TypeRef</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="585599">pre</a>, <a title="Erasure.this.global.Symbol" id="585600">sym</a>, <a title="List[Erasure.this.global.Type]" id="585601">args</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)String" id="585602">argSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="585603">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> =
            <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585390" title="List[Erasure.this.global.Symbol]">existentiallyBound</a> <span title="(elem: Any)Boolean">contains</span> <a href="#585603" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Erasure.this.global.TypeBounds" id="585604">bounds</a> = <a href="#585603" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42736" title="=&gt; Erasure.this.global.TypeBounds">bounds</a>
              <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46276" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#585604" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66852" title="=&gt; Erasure.this.global.Type">hi</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;+&quot;)" class="string">&quot;+&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#585604" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66852" title="=&gt; Erasure.this.global.Type">hi</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#585604" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66850" title="=&gt; Erasure.this.global.Type">lo</a> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#46291" title="object Erasure.this.global.definitions.NullClass">NullClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#70289" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#585604" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66850" title="=&gt; Erasure.this.global.Type">lo</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#585603" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          // If args isEmpty, Array is being used as a type constructor
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#585601" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82322" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#585590" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="Char('[')">ARRAY_TAG</span>.<span title="()String">toString</span><span title="(x$1: Any)String">+</span><span class="delimiter">(</span><a href="#585601" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <span class="delimiter">(</span><a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585637" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#239146" title="(sym: Erasure.this.global.Symbol, initialSymbol: Erasure.this.global.Symbol)Boolean">isTypeParameterInSig</a><span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a>, <a href="#351388" title="Erasure.this.global.Symbol">sym0</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47759" title="=&gt; Boolean">isAliasType</a>, <span title="String(&quot;Unexpected alias type: &quot;)" class="string">&quot;Unexpected alias type: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#585600" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
            <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <span title="Char('T')">TVAR_TAG</span> <span title="(x$1: Any)String">+</span> <a href="#585600" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Erasure.this.global.Name">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46274" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46832" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46375" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a><span class="delimiter">)</span>
            <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span>
            <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46665" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46289" title="object Erasure.this.global.definitions.NothingClass">NothingClass</a><span class="delimiter">)</span>
            <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46284" title="=&gt; Erasure.this.global.Symbol">RuntimeNothingClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46291" title="object Erasure.this.global.definitions.NullClass">NullClass</a><span class="delimiter">)</span>
            <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46286" title="=&gt; Erasure.this.global.Symbol">RuntimeNullClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#585392" title="Boolean">primitiveOK</a><span class="delimiter">)</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46665" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="../../../reflect/internal/Definitions.scala.html#46813" title="(key: Erasure.this.global.Symbol)Char">abbrvTag</a><span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>.<span title="()String">toString</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47757" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="585721">preRebound</a> = <a href="#585599" title="Erasure.this.global.Type">pre</a>.<a href="../../../reflect/internal/Types.scala.html#42777" title="(clazz: Erasure.this.global.Symbol)Erasure.this.global.Type">baseType</a><span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> // #2585
            <a href="#239147" title="(sig: String)String">dotCleanup</a><span class="delimiter">(</span>
              <span class="delimiter">(</span>
                <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#239145" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a><span class="delimiter">(</span><a href="#585721" title="Erasure.this.global.Type">preRebound</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="String" id="585724">s</a> = <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585721" title="Erasure.this.global.Type">preRebound</a>, <a href="#585390" title="List[Erasure.this.global.Symbol]">existentiallyBound</a><span class="delimiter">)</span>
                  <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585724" title="String">s</a>.<span title="(x$1: Int)Char">charAt</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('L')" class="char">'L'</span><span class="delimiter">)</span> <a href="#585724" title="String">s</a>.<span title="(x$1: Int, x$2: Int)String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#585724" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#585600" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47891" title="=&gt; String">javaSimpleName</a>
                  <span class="keyword">else</span> <a href="#585335" title="(sym: Erasure.this.global.Symbol)String">fullNameInSig</a><span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                <span class="keyword">else</span> <a href="#585335" title="(sym: Erasure.this.global.Symbol)String">fullNameInSig</a><span class="delimiter">(</span><a href="#585600" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
              <span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span>
                <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#585601" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span>
                <span title="String(&quot;&lt;&quot;)" class="string">&quot;&lt;&quot;</span><span title="(x$1: Any)String">+</span><span class="delimiter">(</span><a href="#585601" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <a href="#585602" title="(tp: Erasure.this.global.Type)String">argSig</a><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span><span title="(x$1: Any)String">+</span><span title="String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>
              <span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span>
                <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
              <span class="delimiter">)</span>
            <span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#351388" title="Erasure.this.global.Symbol">sym0</a>, <a href="#585590" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>, <a href="#585390" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#585391" title="Boolean">toplevel</a>, <a href="#585392" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">PolyType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="585783">tparams</a>, <a title="Erasure.this.global.Type" id="585784">restpe</a><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#585783" title="List[Erasure.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="String" id="585785">poly</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585391" title="Boolean">toplevel</a><span class="delimiter">)</span> <a href="#585334" title="(tparams: List[Erasure.this.global.Symbol])String">polyParamSig</a><span class="delimiter">(</span><a href="#585783" title="List[Erasure.this.global.Symbol]">tparams</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
          <a href="#585785" title="String">poly</a> <span title="(x$1: Any)String">+</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585784" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="String">MethodType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="585790">params</a>, <a title="Erasure.this.global.Type" id="585791">restpe</a><span class="delimiter">)</span> =&gt;
          <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span><span title="(x$1: Any)String">+</span><span class="delimiter">(</span><a href="#585790" title="List[Erasure.this.global.Symbol]">params</a> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="delimiter">(</span><a href="#585808" title="Erasure.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <span class="delimiter">(</span><a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585857" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span><span title="(x$1: Any)String">+</span><span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span title="(x$1: Any)String">+</span>
          <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#585791" title="Erasure.this.global.Type">restpe</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#351388" title="Erasure.this.global.Symbol">sym0</a>.<a href="../../../reflect/internal/Symbols.scala.html#47804" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <span title="Char('V')">VOID_TAG</span>.<span title="()String">toString</span> <span class="keyword">else</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585791" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="String">RefinedType</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="585899">parent</a> :: _, <a title="Erasure.this.global.Scope" id="585900">decls</a><span class="delimiter">)</span> =&gt;
          <a href="#585331" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#585899" title="Erasure.this.global.Type">parent</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">ClassInfoType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="585904">parents</a>, _, _<span class="delimiter">)</span> =&gt;
          <a href="#585330" title="(parents: List[Erasure.this.global.Type])String">superSig</a><span class="delimiter">(</span><a href="#585904" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">AnnotatedType</span><span class="delimiter">(</span>_, <a title="Erasure.this.global.Type" id="585908">atp</a>, _<span class="delimiter">)</span> =&gt;
          <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585908" title="Erasure.this.global.Type">atp</a>, <a href="#585390" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#585391" title="Boolean">toplevel</a>, <a href="#585392" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">BoundedWildcardType</span><span class="delimiter">(</span><a title="Erasure.this.global.TypeBounds" id="585910">bounds</a><span class="delimiter">)</span> =&gt;
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;something\'s wrong: &quot;)" class="string">&quot;something's wrong: &quot;</span><span title="(x$1: Any)String">+</span><a href="#351388" title="Erasure.this.global.Symbol">sym0</a><span title="(x$1: Any)String">+</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)String">+</span><a href="#351388" title="Erasure.this.global.Symbol">sym0</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span title="(x$1: Any)String">+</span><span title="String(&quot; has a bounded wildcard type&quot;)" class="string">&quot; has a bounded wildcard type&quot;</span><span class="delimiter">)</span>
          <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585910" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66852" title="=&gt; Erasure.this.global.Type">hi</a>, <a href="#585390" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#585391" title="Boolean">toplevel</a>, <a href="#585392" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">_</span> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="585913">etp</a> = <a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#351388" title="Erasure.this.global.Symbol">sym0</a>, <a href="#585590" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#585913" title="Erasure.this.global.Type">etp</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#585590" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="Erasure.this.UnknownSig" class="keyword">new</span> <a href="#239153" title="Erasure.this.UnknownSig">UnknownSig</a>
          <span class="keyword">else</span> <a href="#585336" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#585913" title="Erasure.this.global.Type">etp</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Option[String]" id="585337">result</a> = <a href="../util/Tracer.scala.html#584760" title="(name: String, args: =&gt; Any)(body: =&gt; Option[String])Option[String]">traceSig</a><span class="delimiter">(</span><span title="String(&quot;javaSig&quot;)" class="string">&quot;javaSig&quot;</span>, <span title="(_1: Erasure.this.global.Symbol, _2: Erasure.this.global.Type)(Erasure.this.global.Symbol, Erasure.this.global.Type)" class="delimiter">(</span><a href="#351388" title="Erasure.this.global.Symbol">sym0</a>, <a href="#351389" title="Erasure.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#239145" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a><span class="delimiter">(</span><a href="#351389" title="Erasure.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#585390" title="List[Erasure.this.global.Symbol] @scala.annotation.unchecked.uncheckedVariance" id="585930">jsig</a><span class="delimiter">(</span><a href="#351389" title="Erasure.this.global.Type" id="585927">info</a>, toplevel = <a title="Boolean(true)" id="585928" class="keyword">true</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="None.type" id="585932">ex</a>: <a href="#239153" title="Erasure.this.UnknownSig">UnknownSig</a> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span title="object None">None</span>
    <span class="delimiter">}</span>
    // Debugging: immediately verify signatures when tracing.
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239140" title="=&gt; Boolean">traceSignatures</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#585337" title="Option[String]">result</a> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="String" id="585950">sig</a> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#239150" title="(sym: Erasure.this.global.Symbol, sig: String)Boolean">isValidSignature</a><span class="delimiter">(</span><a href="#351388" title="Erasure.this.global.Symbol">sym0</a>, <a href="#585950" title="String">sig</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;**** invalid signature for &quot;)" class="string">&quot;**** invalid signature for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#351388" title="Erasure.this.global.Symbol">sym0</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#585950" title="String">sig</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#585337" title="Option[String]">result</a>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class UnknownSig extends Exception with ScalaObject" id="239153">UnknownSig</a> <a href="#239153" title="ScalaObject" class="keyword">extends</a> <span title="Exception">Exception</span>

  /**  The symbol's erased info. This is the type's erasure, except for the following symbols:
   *
   *   - For $asInstanceOf      : [T]T
   *   - For $isInstanceOf      : [T]scala#Boolean
   *   - For class Array        : [T]C where C is the erased classinfo of the Array class.
   *   - For Array[T].&lt;init&gt;    : {scala#Int)Array[T]
   *   - For a type parameter   : A type bounds type consisting of the erasures of its bounds.
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type" id="239154">transformInfo</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="255164">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="255165">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a> =
    <a href="AddInterfaces.scala.html#239116" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">transformMixinInfo</a><span class="delimiter">(</span><a href="#30015" title="scala.tools.nsc.transform.Erasure" class="keyword">super</a>.<a href="../../../reflect/internal/transform/Erasure.scala.html#82334" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">transformInfo</a><span class="delimiter">(</span><a href="#255164" title="Erasure.this.global.Symbol">sym</a>, <a href="#255165" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="Erasure.this.global.TypeMap" id="239155">deconstMap</a> = <a href="#584430" title="Erasure.this.global.TypeMap" class="keyword">new</a> <a href="../../../reflect/internal/Types.scala.html#40242" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="584430">TypeMap</a> <span class="delimiter">{</span>
    // For some reason classOf[Foo] creates ConstantType(Constant(tpe)) with an actual Type for tpe,
    // which is later translated to a Class. Unfortunately that means we have bugs like the erasure
    // of Class[Foo] and classOf[Bar] not being seen as equivalent, leading to duplicate method
    // generation and failing bytecode. See ticket #4753.
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="584432">apply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="584433">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a> = <a href="#584433" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">PolyType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span>                  =&gt; <a href="../../../reflect/internal/Types.scala.html#82353" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#584433" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">MethodType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span>                =&gt; <a href="../../../reflect/internal/Types.scala.html#82353" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#584433" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>     // nullarymethod was eliminated during uncurry
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">ConstantType</span><span class="delimiter">(</span>Constant<span class="delimiter">(</span>_: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Definitions.scala.html#46321" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>  // all classOfs erase to Class
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">_</span>                               =&gt; <a href="#584433" title="Erasure.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42733" title="=&gt; Erasure.this.global.Type">deconst</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  // Methods on Any/Object which we rewrite here while we still know what
  // is a primitive and what arrived boxed.
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="239158">interceptedMethods</a> = <span title="[A](elems: A*)scala.collection.immutable.Set[A]">Set</span><span title="(elems: Erasure.this.global.Symbol*)scala.collection.immutable.Set[Erasure.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46605" title="=&gt; Erasure.this.global.Symbol">Any_##</a>, <a href="../../../reflect/internal/Definitions.scala.html#46620" title="=&gt; Erasure.this.global.Symbol">Object_##</a>, <a href="../../../reflect/internal/Definitions.scala.html#46596" title="=&gt; Erasure.this.global.Symbol">Any_getClass</a><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[Erasure.this.global.Symbol])scala.collection.immutable.Set[Erasure.this.global.Symbol]">++</span> <span class="delimiter">(</span>
    // Each value class has its own getClass for ultra-precise class object typing.
    <a href="../../../reflect/internal/Definitions.scala.html#46859" title="=&gt; List[Erasure.this.global.Symbol]">ScalaValueClasses</a> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Symbol,List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#586019" title="Erasure.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42769" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">member</a> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60444" title="=&gt; Erasure.this.global.TermName">getClass_</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

// -------- erasure on trees ------------------------------------------

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: Erasure.this.Context)Erasure.this.Eraser" id="239159">newTyper</a><span class="delimiter">(</span><a title="Erasure.this.Context" id="586072">context</a>: <a href="../typechecker/Contexts.scala.html#183956" title="Erasure.this.Context">Context</a><span class="delimiter">)</span> = <span title="Erasure.this.Eraser" class="keyword">new</span> <a href="#239160" title="Erasure.this.Eraser">Eraser</a><span class="delimiter">(</span><a href="#586072" title="Erasure.this.Context">context</a><span class="delimiter">)</span>

  /** An extractor object for boxed expressions
  object Boxed {
    def unapply(tree: Tree): Option[Tree] = tree match {
      case LabelDef(name, params, Boxed(rhs)) =&gt;
        Some(treeCopy.LabelDef(tree, name, params, rhs) setType rhs.tpe)
      case Select(_, _) if tree.symbol == BoxedUnit_UNIT =&gt;
        Some(Literal(Constant()) setPos tree.pos setType UnitClass.tpe)
      case Block(List(unboxed), ret @ Select(_, _)) if ret.symbol == BoxedUnit_UNIT =&gt;
        Some(if (unboxed.tpe.typeSymbol == UnitClass) tree
             else Block(List(unboxed), Literal(Constant()) setPos tree.pos setType UnitClass.tpe))
      case Apply(fn, List(unboxed)) if isBox(fn.symbol) =&gt;
        Some(unboxed)
      case _ =&gt;
        None
    }
  }
   */

  /** The modifier typer which retypes with erased types. */
  <span class="keyword">class</span> <a title="class Eraser extends Erasure.this.Typer with ScalaObject" id="239160">Eraser</a><a href="#239160" title="ScalaObject" class="delimiter">(</a><a title="Erasure.this.Context" id="586088">_context</a>: <a href="../typechecker/Contexts.scala.html#183956" title="Erasure.this.Context">Context</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../typechecker/Typers.scala.html#184062" title="Erasure.this.Typer">Typer</a><span class="delimiter">(</span><a href="#586088" title="Erasure.this.Context">_context</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cls: Erasure.this.global.Symbol)Boolean" id="586079">safeToRemoveUnbox</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="586092">cls</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span class="delimiter">(</span><a href="#586092" title="Erasure.this.global.Symbol">cls</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#40473" title="object Erasure.this.global.definitions">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#46291" title="object Erasure.this.global.definitions.NullClass">NullClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="../../../reflect/internal/Definitions.scala.html#46783" title="(sym: Erasure.this.global.Symbol)Boolean">isBoxedValueClass</a><span class="delimiter">(</span><a href="#586092" title="Erasure.this.global.Symbol">cls</a><span class="delimiter">)</span>

    /** Box `tree` of unboxed type */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="586080">box</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586099">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="#586099" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.LabelDef">LabelDef</span><span class="delimiter">(</span><a title="Erasure.this.global.TermName" id="586109">name</a>, <a title="List[Erasure.this.global.Ident]" id="586110">params</a>, <a title="Erasure.this.global.Tree" id="586111">rhs</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="586112">rhs1</a> = <a href="#586080" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a><span class="delimiter">(</span><a href="#586111" title="Erasure.this.global.Tree">rhs</a><span class="delimiter">)</span>
        <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, name: Erasure.this.global.Name, params: List[Erasure.this.global.Ident], rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</span><span class="delimiter">(</span><a href="#586099" title="Erasure.this.global.Tree">tree</a>, <a href="#586109" title="Erasure.this.global.TermName">name</a>, <a href="#586110" title="List[Erasure.this.global.Ident]">params</a>, <a href="#586112" title="Erasure.this.global.Tree">rhs1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">setType</span> <a href="#586112" title="Erasure.this.global.Tree">rhs1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
        <a href="../typechecker/Typers.scala.html#184437" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#586099" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#586099" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="Erasure.this.global.Tree">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../ast/Trees.scala.html#183119" title="object Erasure.this.global.treeInfo">treeInfo</a> <a href="../../../reflect/internal/TreeInfo.scala.html#118913" title="(tree: Erasure.this.global.treeInfo.global.Tree)Boolean">isExprSafeToInline</a> <a href="#586099" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#241249" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46669" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#241244" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#586099" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#241249" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46669" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../../../reflect/internal/Definitions.scala.html#46289" title="Erasure.this.global.Tree">NothingClass</a> =&gt; <a href="#586099" title="Erasure.this.global.Tree">tree</a> // a non-terminating expression doesn't need boxing
          <span class="keyword">case</span> <a title="Erasure.this.global.Tree" id="586132">x</a>          =&gt;
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#586132" title="Erasure.this.global.Symbol">x</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
            <a href="#586099" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              /** Can't always remove a Box(Unbox(x)) combination because the process of boxing x
               *  may lead to throwing an exception.
               *
               *  This is important for specialization: calls to the super constructor should not box/unbox specialized
               *  fields (see TupleX). (ID)
               */
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586143">boxFun</a>, <a href="#586145" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586167">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../reflect/internal/Definitions.scala.html#46768" title="(elem: Erasure.this.global.Symbol)Boolean">isUnbox</a><span class="delimiter">(</span><a href="#586099" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#586079" title="(cls: Erasure.this.global.Symbol)Boolean">safeToRemoveUnbox</a><span class="delimiter">(</span><a href="#586167" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> =&gt;
                <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;boxing an unbox: &quot;)" class="string">&quot;boxing an unbox: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586099" title="Erasure.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; and replying with &quot;)" class="string">&quot; and replying with &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586167" title="Erasure.this.global.Tree">arg</a><span class="delimiter">)</span>
                <a href="#586167" title="Erasure.this.global.Tree">arg</a>
              <span class="keyword">case</span> <span title="Erasure.this.global.Apply">_</span> =&gt;
                <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#241249" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#241253" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: Erasure.this.global.Tree)Erasure.this.CODE.TreeMethods" class="delimiter">(</a><a href="../../../reflect/internal/Definitions.scala.html#46825" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">boxMethod</a><span class="delimiter">(</span><a href="#586132" title="Erasure.this.global.Symbol">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#274646" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">APPLY</a> <a href="#586099" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <span class="delimiter">(</span><a href="#586099" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Unbox `tree` of boxed type to expected type `pt`.
     *
     *  @param tree the given tree
     *  @param pt   the expected type.
     *  @return     the unboxed tree
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="586081">unbox</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586225">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Type" id="586226">pt</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="#586225" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
/*
      case Boxed(unboxed) =&gt;
        println(&quot;unbox shorten: &quot;+tree) // this never seems to kick in during build and test; therefore disabled.
        adaptToType(unboxed, pt)
 */
      <span class="keyword">case</span> <span title="Erasure.this.global.LabelDef">LabelDef</span><span class="delimiter">(</span><a title="Erasure.this.global.TermName" id="586233">name</a>, <a title="List[Erasure.this.global.Ident]" id="586234">params</a>, <a title="Erasure.this.global.Tree" id="586235">rhs</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="586236">rhs1</a> = <a href="#586081" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#586235" title="Erasure.this.global.Tree">rhs</a>, <a href="#586226" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
        <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, name: Erasure.this.global.Name, params: List[Erasure.this.global.Ident], rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</span><span class="delimiter">(</span><a href="#586225" title="Erasure.this.global.Tree">tree</a>, <a href="#586233" title="Erasure.this.global.TermName">name</a>, <a href="#586234" title="List[Erasure.this.global.Ident]">params</a>, <a href="#586236" title="Erasure.this.global.Tree">rhs1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">setType</span> <a href="#586236" title="Erasure.this.global.Tree">rhs1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
        <a href="../typechecker/Typers.scala.html#184437" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#586225" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#586226" title="Erasure.this.global.Type">pt</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="Erasure.this.global.Tree">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../ast/Trees.scala.html#183119" title="object Erasure.this.global.treeInfo">treeInfo</a> <a href="../../../reflect/internal/TreeInfo.scala.html#118913" title="(tree: Erasure.this.global.treeInfo.global.Tree)Boolean">isExprSafeToInline</a> <a href="#586225" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#241199" title="=&gt; Erasure.this.global.Literal">UNIT</a>
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#241244" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#586225" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#241199" title="=&gt; Erasure.this.global.Literal">UNIT</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Erasure.this.global.Tree" id="586240">x</a>          =&gt;
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#586240" title="Erasure.this.global.Symbol">x</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
            // don't `setType pt` the Apply tree, as the Apply's fun won't be typechecked if the Apply tree already has a type
            <a href="../../../reflect/internal/Trees.scala.html#40626" title="(sym: Erasure.this.global.Symbol, args: Erasure.this.global.Tree*)Erasure.this.global.Tree">Apply</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46827" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">unboxMethod</a><span class="delimiter">(</span><a href="#586226" title="Erasure.this.global.Type">pt</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>, <a href="#586225" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Generate a synthetic cast operation from tree.tpe to pt.
     *  @pre pt eq pt.normalize
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="586082">cast</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586276">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Type" id="586277">pt</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586277" title="Erasure.this.global.Type">pt</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        // See SI-4731 for one example of how this occurs.
        <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;Attempted to cast to Unit: &quot;)" class="string">&quot;Attempted to cast to Unit: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586276" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
        <a href="#586276" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; tree.type">duplicate</span> <span title="(tp: Erasure.this.global.Type)tree.type">setType</span> <a href="#586277" title="Erasure.this.global.Type">pt</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../Global.scala.html#235503" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">mkAttributedCast</a><span class="delimiter">(</span><a href="#586276" title="Erasure.this.global.Tree">tree</a>, <a href="#586277" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="586083">isUnboxedValueMember</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="586290">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#586290" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586290" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>

    /** Adapt `tree` to expected type `pt`.
     *
     *  @param tree the given tree
     *  @param pt   the expected type
     *  @return     the adapted tree
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="586084">adaptToType</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586297">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Type" id="586298">pt</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183452" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#183734" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#586298" title="Erasure.this.global.Type">pt</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Types.scala.html#40092" title="object Erasure.this.global.WildcardType">WildcardType</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;adapting &quot;)" class="string">&quot;adapting &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586297" title="Erasure.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(x$1: Any)String">+</span>  <a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42737" title="=&gt; List[Erasure.this.global.Type]">parents</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>//debug
      <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
        <a href="#586297" title="Erasure.this.global.Tree">tree</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586298" title="Erasure.this.global.Type">pt</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#586084" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#586080" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>, <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#40145" title="Erasure.this.global.MethodType">MethodType</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42750" title="=&gt; List[Erasure.this.global.Symbol]">params</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47846" title="=&gt; Boolean">isStable</a>, <span title="String(&quot;adapt &quot;)" class="string">&quot;adapt &quot;</span><span title="(x$1: Any)String">+</span><a href="#586297" title="Erasure.this.global.Tree">tree</a><span title="(x$1: Any)String">+</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)String">+</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span title="(x$1: Any)String">+</span><span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span><span title="(x$1: Any)String">+</span><a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
        <a href="#586084" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42743" title="=&gt; Erasure.this.global.Type">resultType</a>, <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586298" title="Erasure.this.global.Type">pt</a> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
        <a href="#586082" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>, <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586298" title="Erasure.this.global.Type">pt</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#586084" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#586081" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>, <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>, <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <a href="#586082" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#586297" title="Erasure.this.global.Tree">tree</a>, <a href="#586298" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    // @PP 1/25/2011: This is less inaccurate than it was (I removed
    // BoxedAnyArray, asInstanceOf$erased, and other long ago eliminated symbols)
    // but I do not think it yet describes the code beneath it.

    /**  Replace member references as follows:
     *
     *   - `x == y` for == in class Any becomes `x equals y` with equals in class Object.
     *   - `x != y` for != in class Any becomes `!(x equals y)` with equals in class Object.
     *   - x.asInstanceOf[T] becomes x.$asInstanceOf[T]
     *   - x.isInstanceOf[T] becomes x.$isInstanceOf[T]
     *   - x.m where m is some other member of Any becomes x.m where m is a member of class Object.
     *   - x.m where x has unboxed value type T and m is not a directly translated member of T becomes T.box(x).m
     *   - x.m where x is a reference type and m is a directly translated member of value type T becomes x.TValue().m
     *   - All forms of x.m where x is a boxed type and m is a member of an unboxed class become
     *     x.m where m is the corresponding member of the boxed class.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="586085">adaptMember</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586350">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      //Console.println(&quot;adaptMember: &quot; + tree);
      <a href="#586350" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span>TypeApply<span class="delimiter">(</span><a title="Erasure.this.global.Select" id="586358">sel</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586363">qual</a>, <a title="Erasure.this.global.Name" id="586364">name</a><span class="delimiter">)</span>, <a href="#586366" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586377">targ</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#586379" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46602" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="586395">qual1</a> = <a href="../typechecker/Typers.scala.html#184439" title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type)Erasure.this.global.Tree">typedQualifier</a><span class="delimiter">(</span><a href="#586363" title="Erasure.this.global.Tree">qual</a>, <span title="Int(0)">NOmode</span>, <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> // need to have an expected type, see #3037
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="586396">qualClass</a> = <a href="#586395" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="586397">targClass</a> = <a href="#586377" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
/*
          if (isNumericValueClass(qualClass) &amp;&amp; isNumericValueClass(targClass))
            // convert numeric type casts
            atPos(tree.pos)(Apply(Select(qual1, &quot;to&quot; + targClass.name), List()))
          else
*/
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586397" title="Erasure.this.global.Symbol">targClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#586081" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#586395" title="Erasure.this.global.Tree">qual1</a>, <a href="#586377" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#586350" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586414">qual</a>, <a title="Erasure.this.global.Name" id="586415">name</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#586415" title="Erasure.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60009" title="=&gt; Erasure.this.global.nme.NameType">CONSTRUCTOR</a><span class="delimiter">)</span> =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
            <a href="#586350" title="Erasure.this.global.Tree">tree</a>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46602" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a><span class="delimiter">)</span>
            <a href="#586085" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#586414" title="Erasure.this.global.Tree">qual</a>, <a href="../../../reflect/internal/Definitions.scala.html#46628" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46599" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a><span class="delimiter">)</span>
            <a href="#586085" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#586414" title="Erasure.this.global.Tree">qual</a>, <a href="../../../reflect/internal/Definitions.scala.html#46626" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46274" title="=&gt; Erasure.this.global.Symbol">AnyClass</a><span class="delimiter">)</span>
            <a href="#586085" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#586414" title="Erasure.this.global.Tree">qual</a>, <a href="../../../reflect/internal/Definitions.scala.html#46757" title="(owner: Erasure.this.global.Symbol, name: Erasure.this.global.Name)Erasure.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>, <a href="#586415" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="586511">qual1</a> = <a href="../typechecker/Typers.scala.html#184441" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a><span class="delimiter">(</span><a href="#586414" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#586083" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#586511" title="Erasure.this.global.Tree">qual1</a> = <a href="#586080" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#586083" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#586511" title="Erasure.this.global.Tree">qual1</a> = <a href="#586081" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>, <a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>

            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="(sym: Erasure.this.global.Symbol)Unit">symbol</span> = <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#40145" title="Erasure.this.global.MethodType">MethodType</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42750" title="=&gt; List[Erasure.this.global.Symbol]">params</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47846" title="=&gt; Boolean">isStable</a>, <a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span>;
              <a href="#586511" title="Erasure.this.global.Tree">qual1</a> = <a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Position">pos</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42743" title="=&gt; Erasure.this.global.Type">resultType</a>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="Erasure.this.global.Super">Super</span><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <a href="../../../reflect/internal/Symbols.scala.html#47964" title="(that: Erasure.this.global.Symbol)Boolean">isSubClass</a> <a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
              <a href="#586511" title="Erasure.this.global.Tree">qual1</a> = <a href="#586082" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#586511" title="Erasure.this.global.Tree">qual1</a>, <a href="#586350" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, qualifier: Erasure.this.global.Tree, selector: Erasure.this.global.Name)Erasure.this.global.Select">Select</span><span class="delimiter">(</span><a href="#586350" title="Erasure.this.global.Tree">tree</a>, <a href="#586511" title="Erasure.this.global.Tree">qual1</a>, <a href="#586415" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Select">SelectFromArray</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586572">qual</a>, <a title="Erasure.this.global.Name" id="586573">name</a>, <a title="Erasure.this.global.Type" id="586574">erasure</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="586575">qual1</a> = <a href="../typechecker/Typers.scala.html#184441" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a><span class="delimiter">(</span><a href="#586572" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#586575" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#586574" title="Erasure.this.global.Type">erasure</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#586575" title="Erasure.this.global.Tree">qual1</a> = <a href="#586082" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#586575" title="Erasure.this.global.Tree">qual1</a>, <a href="#586574" title="Erasure.this.global.Type">erasure</a><span class="delimiter">)</span>
          <a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, name: Erasure.this.global.Name)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#586575" title="Erasure.this.global.Tree">qual1</a>, <a href="#586573" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span> <span title="(tree: Erasure.this.global.Tree)Erasure.this.global.Select">copyAttrs</span> <a href="#586350" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
          <a href="#586350" title="Erasure.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** A replacement for the standard typer's adapt method.
     */
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type, original: Erasure.this.global.Tree)Erasure.this.global.Tree" id="586086">adapt</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586607">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Int" id="586608">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="586609">pt</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a>, <a title="Erasure.this.global.Tree" id="586622">original</a>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="TypingTransformers.scala.html#238437" title="object Erasure.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> =
      <a href="#586084" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#586607" title="Erasure.this.global.Tree">tree</a>, <a href="#586609" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>

    /** A replacement for the standard typer's `typed1` method.
     */
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="586087">typed1</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586623">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Int" id="586624">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="586625">pt</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="586634">tree1</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#239160" title="Erasure.this.Eraser" class="keyword">super</a>.<a href="../typechecker/Typers.scala.html#184432" title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type)Erasure.this.global.Tree">typed1</a><span class="delimiter">(</span><a href="#586085" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="#586623" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>, <a href="#586624" title="Int">mode</a>, <a href="#586625" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="586641">er</a>: <a href="../../../reflect/internal/Types.scala.html#40384" title="Erasure.this.global.TypeError">TypeError</a> =&gt;
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;exception when typing &quot;)" class="string">&quot;exception when typing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586623" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#586641" title="Erasure.this.global.TypeError">er</a>.<a href="../../../reflect/internal/Types.scala.html#67272" title="=&gt; String">msg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; in file &quot;)" class="string">&quot; in file &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../typechecker/Typers.scala.html#184331" title="=&gt; Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#184558" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#48029" title="=&gt; Erasure.this.global.AbstractFileType">sourceFile</a><span class="delimiter">)</span>
          <a href="#586641" title="Erasure.this.global.TypeError">er</a>.<span title="()Unit">printStackTrace</span>
          <a href="../../../reflect/internal/SymbolTable.scala.html#36940" title="()Nothing">abort</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Nothing" id="586650">ex</a>: <span title="Exception">Exception</span> =&gt;
          //if (settings.debug.value)
          <span class="keyword">try</span> <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;exception when typing &quot;)" class="string">&quot;exception when typing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586623" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">finally</span> <span title="Nothing" class="keyword">throw</span> <a href="#586650" title="Exception">ex</a>
          <span title="Nothing" class="keyword">throw</span> <a href="#586650" title="Exception">ex</a>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef" id="586635">adaptCase</a><span class="delimiter">(</span><a title="Erasure.this.global.CaseDef" id="586653">cdef</a>: <span title="Erasure.this.global.CaseDef">CaseDef</span><span class="delimiter">)</span>: <span title="Erasure.this.global.CaseDef">CaseDef</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="586654">body1</a> = <a href="#586084" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#586653" title="Erasure.this.global.CaseDef">cdef</a>.<span title="=&gt; Erasure.this.global.Tree">body</span>, <a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
        <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, pat: Erasure.this.global.Tree, guard: Erasure.this.global.Tree, body: Erasure.this.global.Tree)Erasure.this.global.CaseDef">CaseDef</span><span class="delimiter">(</span><a href="#586653" title="Erasure.this.global.CaseDef">cdef</a>, <a href="#586653" title="Erasure.this.global.CaseDef">cdef</a>.<span title="=&gt; Erasure.this.global.Tree">pat</span>, <a href="#586653" title="Erasure.this.global.CaseDef">cdef</a>.<span title="=&gt; Erasure.this.global.Tree">guard</span>, <a href="#586654" title="Erasure.this.global.Tree">body1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.CaseDef">setType</span> <a href="#586654" title="Erasure.this.global.Tree">body1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree" id="586636">adaptBranch</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586662">branch</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> =
        <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586662" title="Erasure.this.global.Tree">branch</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="TypingTransformers.scala.html#238437" title="object Erasure.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span> <a href="#586662" title="Erasure.this.global.Tree">branch</a> <span class="keyword">else</span> <a href="#586084" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#586662" title="Erasure.this.global.Tree">branch</a>, <a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>;

      <a href="#586634" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.If">If</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586670">cond</a>, <a title="Erasure.this.global.Tree" id="586671">thenp</a>, <a title="Erasure.this.global.Tree" id="586672">elsep</a><span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, cond: Erasure.this.global.Tree, thenp: Erasure.this.global.Tree, elsep: Erasure.this.global.Tree)Erasure.this.global.If">If</span><span class="delimiter">(</span><a href="#586634" title="Erasure.this.global.Tree">tree1</a>, <a href="#586670" title="Erasure.this.global.Tree">cond</a>, <a href="#586636" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a><span class="delimiter">(</span><a href="#586671" title="Erasure.this.global.Tree">thenp</a><span class="delimiter">)</span>, <a href="#586636" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a><span class="delimiter">(</span><a href="#586672" title="Erasure.this.global.Tree">elsep</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Match">Match</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586679">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="586680">cases</a><span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, selector: Erasure.this.global.Tree, cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</span><span class="delimiter">(</span><a href="#586634" title="Erasure.this.global.Tree">tree1</a>, <a href="#586679" title="Erasure.this.global.Tree">selector</a>, <a href="#586680" title="List[Erasure.this.global.CaseDef]">cases</a> <span title="(f: Erasure.this.global.CaseDef =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.CaseDef],Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">map</span> <a href="#586635" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Try">Try</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586742">block</a>, <a title="List[Erasure.this.global.CaseDef]" id="586743">catches</a>, <a title="Erasure.this.global.Tree" id="586744">finalizer</a><span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#238437" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, block: Erasure.this.global.Tree, catches: List[Erasure.this.global.CaseDef], finalizer: Erasure.this.global.Tree)Erasure.this.global.Try">Try</span><span class="delimiter">(</span><a href="#586634" title="Erasure.this.global.Tree">tree1</a>, <a href="#586636" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a><span class="delimiter">(</span><a href="#586742" title="Erasure.this.global.Tree">block</a><span class="delimiter">)</span>, <a href="#586743" title="List[Erasure.this.global.CaseDef]">catches</a> <span title="(f: Erasure.this.global.CaseDef =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.CaseDef],Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">map</span> <a href="#586635" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a>, <a href="#586744" title="Erasure.this.global.Tree">finalizer</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Ident</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | Select<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47777" title="=&gt; Boolean">isOverloaded</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="586800">first</a> = <a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47967" title="=&gt; List[Erasure.this.global.Symbol]">alternatives</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="586801">sym1</a> = <a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47968" title="(cond: Erasure.this.global.Symbol =&gt; Boolean)Erasure.this.global.Symbol">filter</a> <span class="delimiter">{</span>
              <a title="Erasure.this.global.Symbol" id="586805">alt</a> =&gt; <a href="#586805" title="Erasure.this.global.Symbol">alt</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#586800" title="Erasure.this.global.Symbol">first</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#586800" title="Erasure.this.global.Symbol">first</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42802" title="(that: Erasure.this.global.Type)Boolean">looselyMatches</a> <a href="#586805" title="Erasure.this.global.Symbol">alt</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#586623" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#586801" title="Erasure.this.global.Symbol">sym1</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="(sym: Erasure.this.global.Symbol)Unit">symbol</span> = <a href="#586801" title="Erasure.this.global.Symbol">sym1</a>
              <a href="#586634" title="Erasure.this.global.Tree">tree1</a>.<span title="(t: Erasure.this.global.Type)Unit">tpe</span> = <a href="#586801" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#586634" title="Erasure.this.global.Tree">tree1</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
          <a href="#586634" title="Erasure.this.global.Tree">tree1</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** The erasure transformer */
  <span class="keyword">class</span> <a title="class ErasureTransformer extends Erasure.this.global.Transformer with ScalaObject" id="239161">ErasureTransformer</a><a href="#239161" title="ScalaObject" class="delimiter">(</a><a title="Erasure.this.global.CompilationUnit" id="584492">unit</a>: <a href="../CompilationUnits.scala.html#183079" title="Erasure.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#183129" title="Erasure.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
    /** Emit an error if there is a double definition. This can happen if:
     *
     *  - A template defines two members with the same name and erased type.
     *  - A template defines and inherits two members `m` with different types,
     *    but their erased types are the same.
     *  - A template inherits two members `m` with different types,
     *    but their erased types are the same.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(root: Erasure.this.global.Symbol)Unit" id="584486">checkNoDoubleDefs</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587618">root</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Unit" id="587710">doubleDefError</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587715">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="587716">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        // the .toString must also be computed at the earlier phase
        <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="587717">atRefc</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="587719">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="587722">op</a>: =&gt; T<span class="delimiter">)</span> = <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="[T](ph: scala.reflect.internal.Phase)(op: =&gt; T)T">atPhase</a><span title="(ph: scala.reflect.internal.Phase)(op: =&gt; T)T" class="delimiter">[</span><a href="#587719" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185231" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#587722" title="=&gt; T">op</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="587720">tpe1</a> = <a href="#587717" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a><span class="delimiter">(</span><a href="#587618" title="Erasure.this.global.Symbol">root</a>.<a href="../../../reflect/internal/Symbols.scala.html#47980" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../../../reflect/internal/Types.scala.html#42780" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#587715" title="Erasure.this.global.Symbol">sym1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="587721">tpe2</a> = <a href="#587717" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a><span class="delimiter">(</span><a href="#587618" title="Erasure.this.global.Symbol">root</a>.<a href="../../../reflect/internal/Symbols.scala.html#47980" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../../../reflect/internal/Types.scala.html#42780" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#587716" title="Erasure.this.global.Symbol">sym2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#587720" title="Erasure.this.global.Type">tpe1</a>.<a href="../../../reflect/internal/Types.scala.html#42723" title="=&gt; Boolean">isErroneous</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#587721" title="Erasure.this.global.Type">tpe2</a>.<a href="../../../reflect/internal/Types.scala.html#42723" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span>
          <a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: Erasure.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span>
          <span title="Erasure.this.global.Position" class="keyword">if</span> <span class="delimiter">(</span><a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587618" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Erasure.this.global.Position">pos</a> <span class="keyword">else</span> <a href="#587618" title="Erasure.this.global.Symbol">root</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Erasure.this.global.Position">pos</a>,
          <span class="delimiter">(</span><span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587716" title="Erasure.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="String(&quot;double definition:\n&quot;)" class="string">&quot;double definition:\n&quot;</span>
           <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587618" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span title="String(&quot;name clash between defined and inherited member:\n&quot;)" class="string">&quot;name clash between defined and inherited member:\n&quot;</span>
           <span class="keyword">else</span> <span title="String(&quot;name clash between inherited members:\n&quot;)" class="string">&quot;name clash between inherited members:\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
          <a href="#587715" title="Erasure.this.global.Symbol">sym1</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#587717" title="(op: =&gt; String)String">atRefc</a><span class="delimiter">(</span><a href="#587720" title="Erasure.this.global.Type">tpe1</a>.<a href="../../../reflect/internal/Types.scala.html#42813" title="()String">toString</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
            <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587618" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#48048" title="=&gt; String">locationString</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; and\n&quot;)" class="string">&quot; and\n&quot;</span> <span title="(x$1: Any)String">+</span>
          <a href="#587716" title="Erasure.this.global.Symbol">sym2</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#587717" title="(op: =&gt; String)String">atRefc</a><span class="delimiter">(</span><a href="#587721" title="Erasure.this.global.Type">tpe2</a>.<a href="../../../reflect/internal/Types.scala.html#42813" title="()String">toString</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
            <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#587716" title="Erasure.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587618" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span title="String(&quot; at line &quot;)" class="string">&quot; at line &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#587716" title="Erasure.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Erasure.this.global.Position">pos</a><span class="delimiter">)</span>.<a href="../util/Position.scala.html#183814" title="=&gt; Int">line</a> <span class="keyword">else</span> <a href="#587716" title="Erasure.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#48048" title="=&gt; String">locationString</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\nhave same type&quot;)" class="string">&quot;\nhave same type&quot;</span> <span title="(x$1: Any)String">+</span>
          <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#587717" title="(op: =&gt; Boolean)Boolean">atRefc</a><span class="delimiter">(</span><a href="#587720" title="Erasure.this.global.Type">tpe1</a> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#587721" title="Erasure.this.global.Type">tpe2</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="String(&quot; after erasure: &quot;)" class="string">&quot; after erasure: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#587715" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: Erasure.this.global.Type)sym1.type">setInfo</a><span title="Unit" class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#40090" title="object Erasure.this.global.ErrorType">ErrorType</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="587711">decls</a> = <a href="#587618" title="Erasure.this.global.Symbol">root</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; Erasure.this.global.Scope">decls</a>
      <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="587712">e</a> = <a href="#587711" title="Erasure.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#61726" title="=&gt; Erasure.this.global.ScopeEntry">elems</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#587712" title="Erasure.this.global.ScopeEntry">e</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#587714" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#587712" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47755" title="=&gt; Boolean">isTerm</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="587776">e1</a> = <a href="#587711" title="Erasure.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#61762" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a><span class="delimiter">(</span><a href="#587712" title="Erasure.this.global.ScopeEntry">e</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#587776" title="Erasure.this.global.ScopeEntry">e1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#587778" title="()Unit" class="delimiter">{</a>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#587776" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#587712" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#587710" title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a><span class="delimiter">(</span><a href="#587712" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a>, <a href="#587776" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
            <a href="#587776" title="Erasure.this.global.ScopeEntry">e1</a> = <a href="#587711" title="Erasure.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#61762" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a><span class="delimiter">(</span><a href="#587776" title="Erasure.this.global.ScopeEntry">e1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#587712" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#587712" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../../../reflect/internal/Scopes.scala.html#71198" title="=&gt; Erasure.this.global.ScopeEntry">next</a>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.Cursor" id="587713">opc</a> = <a href="#587791" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">new</a> <a href="../Global.scala.html#182868" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="587791">overridingPairs</a>.<a href="OverridingPairs.scala.html#235956" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a><span class="delimiter">(</span><a href="#587618" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="587829">exclude</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587831">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#587831" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47755" title="=&gt; Boolean">isTerm</a> <span title="(x: Boolean)Boolean">||</span> <a href="#587831" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48084" title="=&gt; Boolean">isPrivate</a> <span title="(x: Boolean)Boolean">||</span> <a href="#587791" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">super</a>.<a href="OverridingPairs.scala.html#587797" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a><span class="delimiter">(</span><a href="#587831" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
           // specialized members have no type history before 'specialize', causing double def errors for curried defs
           <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#587831" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47934" title="(pid: Int)Boolean">hasTypeAt</a><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185231" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../../../reflect/internal/Phase.scala.html#70367" title="=&gt; Int">id</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Boolean" id="587830">matches</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587835">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="587836">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#587835" title="Erasure.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#587836" title="Erasure.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587826" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#587876" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185231" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span>
              <a href="#587618" title="Erasure.this.global.Symbol">root</a>.<a href="../../../reflect/internal/Symbols.scala.html#47980" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../../../reflect/internal/Types.scala.html#42780" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587820" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#42801" title="(that: Erasure.this.global.Type)Boolean">matches</a>
              <a href="#587618" title="Erasure.this.global.Symbol">root</a>.<a href="../../../reflect/internal/Symbols.scala.html#47980" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../../../reflect/internal/Types.scala.html#42780" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587823" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587820" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../../../reflect/internal/Symbols.scala.html#48048" title="=&gt; String">locationString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span>
                     <a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587820" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../../../reflect/internal/Symbols.scala.html#48052" title="=&gt; String">infosString</a> <span title="(x$1: Any)String">+</span>
                     <a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587823" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../../../reflect/internal/Symbols.scala.html#48048" title="=&gt; String">locationString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span>
                     <a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587823" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../../../reflect/internal/Symbols.scala.html#48052" title="=&gt; String">infosString</a><span class="delimiter">)</span>
          <a href="#587710" title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a><span class="delimiter">(</span><a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587820" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>, <a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587823" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#587713" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587827" title="()Unit">next</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

/*
      for (bc &lt;- root.info.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isTerm &amp;&amp; !other.isConstructor &amp;&amp; !(other hasFlag (PRIVATE | BRIDGE))) {
          for (member &lt;- root.info.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp;
                !(member hasFlag BRIDGE) &amp;&amp;
                atPhase(phase.next)(member.tpe =:= other.tpe) &amp;&amp;
                !atPhase(refchecksPhase.next)(
                  root.thisType.memberType(member) matches root.thisType.memberType(other))) {
              debuglog(&quot;&quot; + member.locationString + &quot; &quot; + member.infosString + other.locationString + &quot; &quot; + other.infosString);
              doubleDefError(member, other)
            }
          }
        }
      }
*/

    /**  Add bridge definitions to a template. This means:
     *
     *   If there is a concrete member `m` which overrides a member in a base
     *   class of the template, and the erased types of the two members differ,
     *   and the two members are not inherited or defined by some parent class
     *   of the template, then a bridge from the overridden member `m1` to the
     *   member `m0` is added. The bridge has the erased type of `m1` and
     *   forwards to `m0`.
     *
     *   No bridge is added if there is already a bridge to `m0` with the erased
     *   type of `m1` in the template.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" id="584487">bridgeDefs</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587887">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" class="delimiter">(</span>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, immutable.Set<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="587889">toBeRemoved</a>: immutable.<span title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">Set</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = immutable.<span title="(elems: Erasure.this.global.Symbol*)scala.collection.immutable.Set[Erasure.this.global.Symbol]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span>
      //println(&quot;computing bridges for &quot; + owner)//DEBUG
      <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185237" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="587890">site</a> = <a href="#587887" title="Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47980" title="=&gt; Erasure.this.global.Type">thisType</a>
      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="587891">bridgesScope</a> = <a href="../../../reflect/internal/Scopes.scala.html#61744" title="()Erasure.this.global.Scope" class="keyword">new</a> <a href="../../../reflect/internal/Scopes.scala.html#40425" title="Erasure.this.global.Scope">Scope</a>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" id="587892">bridgeTarget</a> = <span title="()scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]">HashMap</span><span class="delimiter">[</span>Symbol, Symbol<span class="delimiter">]</span>
      <span class="keyword">var</span> <a title="List[Erasure.this.global.Tree]" id="587893">bridges</a>: <span title="List[Erasure.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="opc extends Erasure.this.global.overridingPairs.Cursor" id="587894">opc</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Erasure.this.global.overridingPairs.Cursor)Erasure.this.global.overridingPairs.Cursor">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185235" title="=&gt; scala.tools.nsc.Phase">explicitouterPhase</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#587923" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">new</a> <a href="../Global.scala.html#182868" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="587923">overridingPairs</a>.<a href="OverridingPairs.scala.html#235956" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a><span class="delimiter">(</span><a href="#587887" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[Erasure.this.global.Type]" id="587925">parents</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span><span class="delimiter">(</span><a href="#587887" title="Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42737" title="=&gt; List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span><span class="delimiter">)</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="587926">exclude</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587929">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
            <span title="=&gt; Boolean">!</span><a href="#587929" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47773" title="=&gt; Boolean">isMethod</a> <span title="(x: Boolean)Boolean">||</span> <a href="#587929" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48084" title="=&gt; Boolean">isPrivate</a> <span title="(x: Boolean)Boolean">||</span> <a href="#587923" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">super</a>.<a href="OverridingPairs.scala.html#587797" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a><span class="delimiter">(</span><a href="#587929" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#587894" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587826" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#587895" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="587950">member</a> = <a href="#587894" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587820" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="587951">other</a> = <a href="#587894" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587823" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>
        //println(&quot;bridge? &quot; + member + &quot;:&quot; + member.tpe + member.locationString + &quot; to &quot; + other + &quot;:&quot; + other.tpe + other.locationString)//DEBUG
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#183023" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#185235" title="=&gt; scala.tools.nsc.Phase">explicitouterPhase</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48097" title="=&gt; Boolean">isDeferred</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="587958">otpe</a> = <a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#587887" title="Erasure.this.global.Symbol">owner</a>, <a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Boolean" id="587959">bridgeNeeded</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">(</span>
            <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: Erasure.this.global.overridingPairs.global.Type)Boolean">=:=</a> <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
            <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#82351" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a><span class="delimiter">(</span><a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="../../../reflect/internal/Types.scala.html#82351" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a><span class="delimiter">(</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
            <span class="delimiter">{</span> <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="587994">e</a> = <a href="#587891" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../../../reflect/internal/Scopes.scala.html#61761" title="(name: Erasure.this.global.Name)Erasure.this.global.ScopeEntry">lookupEntry</a><span class="delimiter">(</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Erasure.this.global.overridingPairs.global.Name">name</a><span class="delimiter">)</span>
              <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#587994" title="Erasure.this.global.ScopeEntry">e</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#587994" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#587958" title="Erasure.this.global.Type">otpe</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#587892" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">bridgeTarget</a><span class="delimiter">(</span><a href="#587994" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../../../reflect/internal/Scopes.scala.html#71190" title="=&gt; Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#587994" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#587891" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../../../reflect/internal/Scopes.scala.html#61762" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a><span class="delimiter">(</span><a href="#587994" title="Erasure.this.global.ScopeEntry">e</a><span class="delimiter">)</span>
              <span class="delimiter">(</span><a href="#587994" title="Erasure.this.global.ScopeEntry">e</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">)</span>;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#587959" title="Boolean">bridgeNeeded</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Long" id="588041">newFlags</a> = <span class="delimiter">(</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47898" title="=&gt; Long">flags</a> <span title="(x: Int)Long">|</span> <span title="Int(67108864)">BRIDGE</span><span class="delimiter">)</span> <span title="(x: Long)Long">&amp;</span> <span title="=&gt; Long">~</span><span class="delimiter">(</span>ACCESSOR | DEFERRED <span title="Long(2281701392L)">|</span> LAZY <span title="(x: Long)Long">|</span> <a href="../../../reflect/internal/Flags.scala.html#39810" title="=&gt; Long">lateDEFERRED</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="588042">bridge</a>   = <a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#47973" title="(owner: Erasure.this.global.overridingPairs.global.Symbol, newFlags: Long)Erasure.this.global.overridingPairs.global.Symbol">cloneSymbolImpl</a><span class="delimiter">(</span><a href="#587887" title="Erasure.this.global.Symbol">owner</a>, <a href="#588041" title="Long">newFlags</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47695" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.overridingPairs.global.Symbol">setPos</a> <a href="#587887" title="Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Erasure.this.global.Position">pos</a>
            // the parameter symbols need to have the new owner
            <a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: Erasure.this.global.overridingPairs.global.Type)bridge.type">setInfo</a><span class="delimiter">(</span><a href="#587958" title="Erasure.this.global.Type">otpe</a>.<a href="../../../reflect/internal/Types.scala.html#42807" title="(owner: Erasure.this.global.Symbol)Erasure.this.global.Type">cloneInfo</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#587892" title="(key: Erasure.this.global.Symbol, value: Erasure.this.global.Symbol)Unit">bridgeTarget</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a><span class="delimiter">)</span> = <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>
            <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Erasure.this.global.Symbol)Erasure.this.global.Symbol">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#587887" title="Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#61752" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">enter</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a><span class="delimiter">)</span> <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#587887" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              //println(&quot;bridge to same: &quot;+other+other.locationString)//DEBUG
              <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Unit)Unit">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#587887" title="Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#61758" title="(sym: Erasure.this.global.Symbol)Unit">unlink</a><span class="delimiter">(</span><a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a><span class="delimiter">)</span> <span class="delimiter">}</span>
              <a href="#587889" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a> <span title="(elem: Erasure.this.global.Symbol)scala.collection.immutable.Set[Erasure.this.global.Symbol]">+=</span> <a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>
            <span class="delimiter">}</span>
            <a href="#587891" title="Erasure.this.global.Scope">bridgesScope</a> <a href="../../../reflect/internal/Scopes.scala.html#61752" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">enter</a> <a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>
            <a href="#587893" title="List[Erasure.this.global.Tree]">bridges</a> =
              <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; Erasure.this.global.overridingPairs.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="Erasure.this.global.DefDef" id="588125">bridgeDef</a> =
                    <a href="../../../reflect/internal/Trees.scala.html#40617" title="(sym: Erasure.this.global.Symbol, rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>,
                      <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                        <span class="keyword">case</span> <span title="Erasure.this.global.Literal">MethodType</span><span class="delimiter">(</span><a href="#588151" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, ConstantType<span class="delimiter">(</span><a title="Erasure.this.global.Constant" id="588163">c</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="TypingTransformers.scala.html#238437" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#588163" title="Erasure.this.global.Constant">c</a><span class="delimiter">)</span>
                        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
                          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="588165">bridgingCall</a> = <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Tree">This</a><span class="delimiter">(</span><a href="#587887" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>, <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span> <a href="#588166" title="(z: Erasure.this.global.Tree)(op: (Erasure.this.global.Tree, List[Erasure.this.global.overridingPairs.global.Symbol]) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">/:</a> <a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../../../reflect/internal/Symbols.scala.html#47941" title="=&gt; List[List[Erasure.this.global.overridingPairs.global.Symbol]]">paramss</a><span class="delimiter">)</span>
                             <span class="delimiter">(</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="588215">fun</a>, <a title="List[Erasure.this.global.overridingPairs.global.Symbol]" id="588216">vparams</a><span class="delimiter">)</span> =&gt; <a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#588215" title="Erasure.this.global.Tree">fun</a>, <a href="#588216" title="List[Erasure.this.global.overridingPairs.global.Symbol]">vparams</a> <span title="(f: Erasure.this.global.overridingPairs.global.Symbol =&gt; Erasure.this.global.Ident)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.overridingPairs.global.Symbol],Erasure.this.global.Ident,List[Erasure.this.global.Ident]])List[Erasure.this.global.Ident]">map</span> <a href="TypingTransformers.scala.html#238437" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Ident">Ident</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                          // type checking ensures we can safely call `other`, but unless `member.tpe &lt;:&lt; other.tpe`, calling `member` is not guaranteed to succeed
                          // in general, there's nothing we can do about this, except for an unapply: when this subtype test fails, return None without calling `member`
                          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span>  <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48086" title="=&gt; Boolean">isSynthetic</a> // TODO: should we do this for user-defined unapplies as well?
                             <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Erasure.this.global.overridingPairs.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60356" title="=&gt; Erasure.this.global.nme.NameType">unapply</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; Erasure.this.global.overridingPairs.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60358" title="=&gt; Erasure.this.global.nme.NameType">unapplySeq</a><span class="delimiter">)</span><span class="delimiter">)</span>
                             // &amp;&amp; (bridge.paramss.nonEmpty &amp;&amp; bridge.paramss.head.nonEmpty &amp;&amp; bridge.paramss.head.tail.isEmpty) // does the first argument list has exactly one argument -- for user-defined unapplies we can't be sure
                             <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.overridingPairs.global.Type)Boolean">&lt;:&lt;</a> <a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> // no static guarantees (TODO: is the subtype test ever true?)
                            <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#184073" title="object Erasure.this.CODE">CODE</a>._
                            <span class="keyword">val</span> <a title="Erasure.this.global.gen.global.Tree" id="588315">typeTest</a> = <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92645" title="(value: Erasure.this.global.gen.global.Tree, tpe: Erasure.this.global.gen.global.Type, any: Boolean, wrapInApply: Boolean)Erasure.this.global.gen.global.Tree">mkIsInstanceOf</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#241249" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../../../reflect/internal/Symbols.scala.html#47941" title="=&gt; List[List[Erasure.this.global.overridingPairs.global.Symbol]]">paramss</a>.<span title="=&gt; List[Erasure.this.global.overridingPairs.global.Symbol]">head</span>.<span title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">head</span><span class="delimiter">)</span>, <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#42750" title="=&gt; List[Erasure.this.global.overridingPairs.global.Symbol]">params</a>.<span title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">head</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>, any = <span title="Boolean(true)" class="keyword">true</span>, wrapInApply = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> // any = true since we're before erasure (?), wrapInapply is true since we're after uncurry
                            // println(&quot;unapp type test: &quot;+ typeTest)
                            <a href="../ast/TreeDSL.scala.html#241242" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <span class="delimiter">(</span><a href="#588315" title="Erasure.this.global.gen.global.Tree">typeTest</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#274600" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">THEN</a> <a href="#588165" title="Erasure.this.global.Tree">bridgingCall</a> <a href="../ast/TreeDSL.scala.html#274601" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">ELSE</a> <a href="../ast/TreeDSL.scala.html#241249" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46499" title="=&gt; Erasure.this.global.Symbol">NoneModule</a><span class="delimiter">)</span>
                          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#588165" title="Erasure.this.global.Tree">bridgingCall</a>
                      <span class="delimiter">}</span><span class="delimiter">)</span>;
                  <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;generating bridge from &quot;)" class="string">&quot;generating bridge from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="../symtab/package.scala.html#36230" title="=&gt; reflect.internal.Flags.type">Flags</a>.<a href="../../../reflect/internal/Flags.scala.html#39895" title="(flags: Long)String">flagsToString</a><span class="delimiter">(</span><a href="#588042" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../../../reflect/internal/Symbols.scala.html#47898" title="=&gt; Long">flags</a><span class="delimiter">)</span>  <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#587958" title="Erasure.this.global.Type">otpe</a> <span title="(x$1: Any)String">+</span> <a href="#587951" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../../../reflect/internal/Symbols.scala.html#48048" title="=&gt; String">locationString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#587887" title="Erasure.this.global.Symbol">owner</a>, <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#587950" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#48048" title="=&gt; String">locationString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; =\n &quot;)" class="string">&quot; =\n &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#588125" title="Erasure.this.global.DefDef">bridgeDef</a><span class="delimiter">)</span>;
                  <a href="#588125" title="Erasure.this.global.DefDef">bridgeDef</a>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span> <a href="#588116" title="(x: Erasure.this.global.Tree)List[Erasure.this.global.Tree]">::</a> <a href="#587893" title="List[Erasure.this.global.Tree]">bridges</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#587894" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#587827" title="()Unit">next</a>
      <span class="delimiter">}</span>
      <span title="(_1: List[Erasure.this.global.Tree], _2: scala.collection.immutable.Set[Erasure.this.global.Symbol])(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" class="delimiter">(</span><a href="#587893" title="List[Erasure.this.global.Tree]">bridges</a>, <a href="#587889" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
/*
      for (bc &lt;- site.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isMethod &amp;&amp; !other.isConstructor) {
          for (member &lt;- site.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp;
                !(member hasFlag DEFERRED) &amp;&amp;
                (site.memberType(member) matches site.memberType(other)) &amp;&amp;
                !(site.parents exists (p =&gt;
                  (p.symbol isSubClass member.owner) &amp;&amp; (p.symbol isSubClass other.owner)))) {
...
             }
          }
*/

    <span class="keyword">def</span> <a title="(stats: List[Erasure.this.global.Tree], base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]" id="584488">addBridges</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Tree]" id="587625">stats</a>: <span title="List[Erasure.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Erasure.this.global.Symbol" id="587626">base</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="List[Erasure.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
      <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#587626" title="Erasure.this.global.Symbol">base</a>.<a href="../../../reflect/internal/Symbols.scala.html#47763" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span> <a href="#587625" title="List[Erasure.this.global.Tree]">stats</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a href="#588355" title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" class="delimiter">(</a><a href="#588354" title="List[Erasure.this.global.Tree]" id="588355">bridges</a>, <a href="#588354" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="588356">toBeRemoved</a><span class="delimiter">)</span> = <a href="#584487" title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">bridgeDefs</a><span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol]) @unchecked" class="delimiter">(</span><a href="#587626" title="Erasure.this.global.Symbol">base</a><span class="delimiter">)</span>
        <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#588355" title="List[Erasure.this.global.Tree]">bridges</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#587625" title="List[Erasure.this.global.Tree]">stats</a>
        <span class="keyword">else</span> <span class="delimiter">(</span><a href="#587625" title="List[Erasure.this.global.Tree]">stats</a> <span title="(p: Erasure.this.global.Tree =&gt; Boolean)List[Erasure.this.global.Tree]">filterNot</span> <span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="588371">stat</a> =&gt; <a href="#588356" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a> <span title="(elem: Erasure.this.global.Symbol)Boolean">contains</span> <a href="#588371" title="Erasure.this.global.Tree">stat</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#588367" title="(prefix: List[Erasure.this.global.Tree])List[Erasure.this.global.Tree]">:::</a> <a href="#588355" title="List[Erasure.this.global.Tree]">bridges</a>
      <span class="delimiter">}</span>

    /**  Transform tree at phase erasure before retyping it.
     *   This entails the following:
     *
     *   - Remove all type parameters in class and method definitions.
     *   - Remove all abstract and alias type definitions.
     *   - Remove all type applications other than those involving a type test or cast.
     *   - Remove all empty trees in statements and definitions in a PackageDef.
     *   - Check that there are no double definitions in a template.
     *   - Add bridge definitions to a template.
     *   - Replace all types in type nodes and the EmptyTree object by their erasure.
     *     Type nodes of type Unit representing result types of methods are left alone.
     *   - Given a selection q.s, where the owner of `s` is not accessible but the
     *     type symbol of q's type qT is accessible, insert a cast (q.asInstanceOf[qT]).s
     *     This prevents illegal access errors (see #4283).
     *   - Reset all other type attributes to null, thus enforcing a retyping.
     */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="preTransformer extends Erasure.this.TypingTransformer" id="584489">preTransformer</a> = <a href="#586819" title="Erasure.this.TypingTransformer {def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}" class="keyword">new</a> <a href="TypingTransformers.scala.html#238439" title="anonymous class $anon extends Erasure.this.TypingTransformer" id="586819">TypingTransformer</a><span class="delimiter">(</span><a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="586840">preErase</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586842">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="#586842" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a title="Erasure.this.global.Modifiers" id="586868">mods</a>, <a title="Erasure.this.global.TypeName" id="586869">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="586870">tparams</a>, <a title="Erasure.this.global.Template" id="586871">impl</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;defs of &quot;)" class="string">&quot;defs of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; = &quot;)" class="string">&quot; = &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; Erasure.this.global.Scope">decls</a><span class="delimiter">)</span>
          <a href="#586819" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, mods: Erasure.this.global.Modifiers, name: Erasure.this.global.Name, tparams: List[Erasure.this.global.TypeDef], impl: Erasure.this.global.Template)Erasure.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>, <a href="#586868" title="Erasure.this.global.Modifiers">mods</a>, <a href="#586869" title="Erasure.this.global.TypeName">name</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#586871" title="Erasure.this.global.Template">impl</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.DefDef">DefDef</span><span class="delimiter">(</span><a title="Erasure.this.global.Modifiers" id="586907">mods</a>, <a title="Erasure.this.global.Name" id="586908">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="586909">tparams</a>, <a title="List[List[Erasure.this.global.ValDef]]" id="586910">vparamss</a>, <a title="Erasure.this.global.Tree" id="586911">tpt</a>, <a title="Erasure.this.global.Tree" id="586912">rhs</a><span class="delimiter">)</span> =&gt;
          <a href="#586819" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, mods: Erasure.this.global.Modifiers, name: Erasure.this.global.Name, tparams: List[Erasure.this.global.TypeDef], vparamss: List[List[Erasure.this.global.ValDef]], tpt: Erasure.this.global.Tree, rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</span><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>, <a href="#586907" title="Erasure.this.global.Modifiers">mods</a>, <a href="#586908" title="Erasure.this.global.Name">name</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#586910" title="List[List[Erasure.this.global.ValDef]]">vparamss</a>, <a href="#586911" title="Erasure.this.global.Tree">tpt</a>, <a href="#586912" title="Erasure.this.global.Tree">rhs</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.EmptyTree.type">TypeDef</span><span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#238437" title="object Erasure.this.global.EmptyTree">EmptyTree</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.TypeApply" id="586940">instanceOf</a> @ TypeApply<span class="delimiter">(</span><a title="Erasure.this.global.Select" id="586943">fun</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586948">qual</a>, <a title="Erasure.this.global.Name" id="586949">name</a><span class="delimiter">)</span>, <a title="List[Erasure.this.global.Tree]" id="586950">args</a> @ <a href="#586952" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586963">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#586965" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> // !!! todo: simplify by having GenericArray also extract trees
              <span class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#586943" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46599" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a> <span title="(x: Boolean)Boolean">||</span> <a href="#586943" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46626" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                  <a href="../../../reflect/internal/transform/Erasure.scala.html#82322" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#586963" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Int" id="586990">level</a> = <a href="../../../reflect/internal/transform/Erasure.scala.html#82322" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#586963" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(arg: Erasure.this.global.Tree)Erasure.this.global.gen.global.Tree" id="586991">isArrayTest</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586992">arg</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span> =
            <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235480" title="(meth: Erasure.this.global.gen.global.Name, args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60262" title="=&gt; Erasure.this.global.nme.NameType">isArray</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#586992" title="Erasure.this.global.Tree">arg</a>, <a href="TypingTransformers.scala.html#238437" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)Erasure.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#586990" title="Int">level</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="TypingTransformers.scala.html#238437" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#182992" title="object Erasure.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: Erasure.this.global.analyzer.global.Position)(tree: Erasure.this.global.analyzer.global.Tree)Erasure.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Erasure.this.global.analyzer.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586990" title="Int">level</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#586991" title="(arg: Erasure.this.global.Tree)Erasure.this.global.gen.global.Tree">isArrayTest</a><span class="delimiter">(</span><a href="#586948" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235494" title="(expr: Erasure.this.global.gen.global.Tree, owner: Erasure.this.global.gen.global.Symbol, unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a><span class="delimiter">(</span><a href="#586948" title="Erasure.this.global.Tree">qual</a>, <a href="#586819" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="587023">qual1</a> =&gt;
              <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92654" title="(tree1: Erasure.this.global.gen.global.Tree, tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkAnd</a><span class="delimiter">(</span>
                <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92623" title="(receiver: Erasure.this.global.gen.global.Tree, method: Erasure.this.global.gen.global.Symbol, targs: List[Erasure.this.global.gen.global.Type], args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkMethodCall</a><span class="delimiter">(</span>
                  <a href="#587023" title="()Erasure.this.global.gen.global.Tree">qual1</a><span class="delimiter">(</span><span class="delimiter">)</span>,
                  <a href="#586943" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>,
                  <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#586943" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>, <a href="#586963" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <span title="object Nil">Nil</span>
                <span class="delimiter">)</span>,
                <a href="#586991" title="(arg: Erasure.this.global.Tree)Erasure.this.global.gen.global.Tree">isArrayTest</a><span class="delimiter">(</span><a href="#587023" title="()Erasure.this.global.gen.global.Tree">qual1</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587060">fun</a>, <a title="List[Erasure.this.global.Tree]" id="587061">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#587060" title="Erasure.this.global.Tree">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46274" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                                      <a href="#587060" title="Erasure.this.global.Tree">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46628" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                                      <a href="#587060" title="Erasure.this.global.Tree">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#46626" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span> =&gt;
          // leave all other type tests/type casts, remove all other type applications
          <a href="#586840" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">preErase</a><span class="delimiter">(</span><a href="#587060" title="Erasure.this.global.Tree">fun</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="587082">fn</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587087">qual</a>, <a title="Erasure.this.global.Name" id="587088">name</a><span class="delimiter">)</span>, <a title="List[Erasure.this.global.Tree]" id="587089">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#587082" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> =&gt;
          // Have to also catch calls to abstract types which are bounded by Array.
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82322" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#587087" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42732" title="=&gt; Erasure.this.global.Type">widen</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">||</span> <a href="#587087" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47760" title="=&gt; Boolean">isAbstractType</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            // convert calls to apply/update/length on generic arrays to
            // calls of ScalaRunTime.array_xxx method calls
            <a href="TypingTransformers.scala.html#238437" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#182992" title="object Erasure.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: Erasure.this.global.analyzer.global.Position)(tree: Erasure.this.global.analyzer.global.Tree)Erasure.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Erasure.this.global.nme.NameType" id="587103">arrayMethodName</a> = <a href="#587088" title="Erasure.this.global.Name">name</a> <span title="Erasure.this.global.nme.NameType" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="Erasure.this.global.nme.NameType">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60160" title="=&gt; Erasure.this.global.nme.NameType">apply</a>  =&gt; <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60170" title="=&gt; Erasure.this.global.nme.NameType">array_apply</a>
                <span class="keyword">case</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="Erasure.this.global.nme.NameType">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60274" title="=&gt; Erasure.this.global.nme.NameType">length</a> =&gt; <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60174" title="=&gt; Erasure.this.global.nme.NameType">array_length</a>
                <span class="keyword">case</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="Erasure.this.global.nme.NameType">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60362" title="=&gt; Erasure.this.global.nme.NameType">update</a> =&gt; <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60176" title="=&gt; Erasure.this.global.nme.NameType">array_update</a>
                <span class="keyword">case</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="Erasure.this.global.nme.NameType">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60198" title="=&gt; Erasure.this.global.nme.NameType">clone_</a> =&gt; <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60172" title="=&gt; Erasure.this.global.nme.NameType">array_clone</a>
                <span class="keyword">case</span> <span title="Erasure.this.global.nme.NameType">_</span>          =&gt; <a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: Erasure.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>, <span title="String(&quot;Unexpected array member, no translation exists.&quot;)" class="string">&quot;Unexpected array member, no translation exists.&quot;</span><span class="delimiter">)</span> ; <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60625" title="=&gt; Erasure.this.global.nme.NameType">NO_NAME</a>
              <span class="delimiter">}</span>
              <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235480" title="(meth: Erasure.this.global.gen.global.Name, args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><a href="#587103" title="Erasure.this.global.nme.NameType">arrayMethodName</a>, <a href="#587087" title="Erasure.this.global.Tree">qual</a> <a href="#587108" title="(x: Erasure.this.global.Tree)List[Erasure.this.global.Tree]">::</a> <a href="#587089" title="List[Erasure.this.global.Tree]">args</a><span class="delimiter">)</span>
            <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            // store exact array erasure in map to be retrieved later when we might
            // need to do the cast in adaptMember
            <a href="#586819" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</span><span class="delimiter">(</span>
              <a href="#586842" title="Erasure.this.global.Tree">tree</a>,
              <a href="../ast/Trees.scala.html#251980" title="(qualifier: Erasure.this.global.Tree, name: Erasure.this.global.Name, erasure: Erasure.this.global.Type)Erasure.this.global.SelectFromArray">SelectFromArray</a><span class="delimiter">(</span><a href="#587087" title="Erasure.this.global.Tree">qual</a>, <a href="#587088" title="Erasure.this.global.Name">name</a>, <a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>, <a href="#587087" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(tree: Erasure.this.global.Tree)Erasure.this.global.SelectFromArray">copyAttrs</span><span class="delimiter">(</span><a href="#587082" title="Erasure.this.global.Select">fn</a><span class="delimiter">)</span>,
              <a href="#587089" title="List[Erasure.this.global.Tree]">args</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="587130">fn</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587135">qual</a>, _<span class="delimiter">)</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#239157" title="(elem: Erasure.this.global.Symbol)Boolean">interceptedMethods</a><span class="delimiter">(</span><a href="#587130" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587130" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46605" title="=&gt; Erasure.this.global.Symbol">Any_##</a> <span title="(x: Boolean)Boolean">||</span> <a href="#587130" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46620" title="=&gt; Erasure.this.global.Symbol">Object_##</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            // This is unattractive, but without it we crash here on ().## because after
            // erasure the ScalaRunTime.hash overload goes from Unit =&gt; Int to BoxedUnit =&gt; Int.
            // This must be because some earlier transformation is being skipped on ##, but so
            // far I don't know what.  For null we now define null.## == 0.
            <a href="#587135" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="Erasure.this.global.Literal">UnitClass</a> | <a href="../../../reflect/internal/Definitions.scala.html#46291" title="object Erasure.this.global.definitions.NullClass">NullClass</a>                    =&gt; <a href="../ast/TreeDSL.scala.html#274578" title="(x: Any)Erasure.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <a href="../../../reflect/internal/Definitions.scala.html#46842" title="Erasure.this.global.Tree">IntClass</a>                                 =&gt; <a href="#587135" title="Erasure.this.global.Tree">qual</a>
              <span class="keyword">case</span> <a title="Erasure.this.global.Tree" id="587159">s</a> @ <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46838" title="=&gt; Erasure.this.global.Symbol">ShortClass</a> | <a href="../../../reflect/internal/Definitions.scala.html#46836" title="=&gt; Erasure.this.global.Symbol">ByteClass</a> | <a href="../../../reflect/internal/Definitions.scala.html#46840" title="=&gt; Erasure.this.global.Symbol">CharClass</a><span class="delimiter">)</span> =&gt; <a href="#239137" title="(tree: Erasure.this.global.Tree, numericSym: Erasure.this.global.Symbol)Erasure.this.global.Tree">numericConversion</a><span class="delimiter">(</span><a href="#587135" title="Erasure.this.global.Tree">qual</a>, <a href="#587159" title="Erasure.this.global.Symbol">s</a><span class="delimiter">)</span>
              <span class="keyword">case</span> <a href="../../../reflect/internal/Definitions.scala.html#46850" title="Erasure.this.global.If">BooleanClass</a>                             =&gt; <a href="TypingTransformers.scala.html#238437" title="(cond: Erasure.this.global.Tree, thenp: Erasure.this.global.Tree, elsep: Erasure.this.global.Tree)Erasure.this.global.If">If</a><span class="delimiter">(</span><a href="#587135" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/TreeDSL.scala.html#274578" title="(x: Any)Erasure.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>.<span title="()Int">##</span><span class="delimiter">)</span>, <a href="../ast/TreeDSL.scala.html#274578" title="(x: Any)Erasure.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>.<span title="()Int">##</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.analyzer.global.Tree">_</span>                                        =&gt;
                <a href="TypingTransformers.scala.html#238437" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#182992" title="object Erasure.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Erasure.this.global.analyzer.global.Tree)Erasure.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235480" title="(meth: Erasure.this.global.gen.global.Name, args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60254" title="=&gt; Erasure.this.global.nme.NameType">hash_</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#587135" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          // Rewrite 5.getClass to ScalaRunTime.anyValClass(5)
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#587135" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="TypingTransformers.scala.html#238437" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#182992" title="object Erasure.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Erasure.this.global.analyzer.global.Tree)Erasure.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235480" title="(meth: Erasure.this.global.gen.global.Name, args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object Erasure.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60156" title="=&gt; Erasure.this.global.nme.NameType">anyValClass</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#587135" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#586842" title="Erasure.this.global.Tree">tree</a>

        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587199">fn</a>, <a title="List[Erasure.this.global.Tree]" id="587200">args</a><span class="delimiter">)</span> =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587199" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46602" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a><span class="delimiter">)</span>
            <span class="delimiter">(</span><a href="#587199" title="Erasure.this.global.Tree">fn</a>: @<span title="Erasure.this.global.Tree @unchecked">unchecked</span><span class="delimiter">)</span> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span>Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587212">qual</a>, _<span class="delimiter">)</span>, <a href="#587214" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587225">targ</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587212" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#587225" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
                  <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Typed)Erasure.this.global.Typed">atPos</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="TypingTransformers.scala.html#238437" title="(expr: Erasure.this.global.Tree, tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#587212" title="Erasure.this.global.Tree">qual</a>, <a href="TypingTransformers.scala.html#238437" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#587225" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
                <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46830" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a><span class="delimiter">(</span><a href="#587212" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../reflect/internal/Definitions.scala.html#46830" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a><span class="delimiter">(</span><a href="#587225" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#239137" title="(tree: Erasure.this.global.Tree, numericSym: Erasure.this.global.Symbol)Erasure.this.global.Tree">numericConversion</a><span class="delimiter">(</span><a href="#587212" title="Erasure.this.global.Tree">qual</a>, <a href="#587225" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="keyword">else</span>
                  <a href="#586842" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
            // todo: also handle the case where the singleton type is buried in a compound
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587199" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46599" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#587199" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="587261">sel</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587266">qual</a>, <a title="Erasure.this.global.Name" id="587267">name</a><span class="delimiter">)</span>, <a href="#587269" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587280">targ</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#587266" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../reflect/internal/Definitions.scala.html#46780" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#587266" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#587280" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#587280" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#46276" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
                  <a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: Erasure.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#587261" title="Erasure.this.global.Select">sel</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>, <span title="String(&quot;isInstanceOf cannot test if value types are references.&quot;)" class="string">&quot;isInstanceOf cannot test if value types are references.&quot;</span><span class="delimiter">)</span>

                <span class="keyword">def</span> <a title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree" id="587281">mkIsInstanceOf</a><span class="delimiter">(</span><a title="() =&gt; Erasure.this.global.Tree" id="587297">q</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Tree<span class="delimiter">)</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="587298">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> =
                  <a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span>
                    <a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span>
                      <a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#587297" title="()Erasure.this.global.Tree">q</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46626" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Select">setPos</span> <a href="#587261" title="Erasure.this.global.Select">sel</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>,
                      <span title="(xs: Erasure.this.global.TypeTree*)List[Erasure.this.global.TypeTree]">List</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#587298" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeTree">setPos</span> <a href="#587280" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeApply">setPos</span> <a href="#587199" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>,
                    List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>
                <a href="#587280" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Erasure.this.global.Apply">SingleType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> | ThisType<span class="delimiter">(</span>_<span class="delimiter">)</span> | SuperType<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
                    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="587374">cmpOp</a> = <span title="Erasure.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#587280" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#46832" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46587" title="=&gt; Erasure.this.global.Symbol">Any_equals</a> <span class="keyword">else</span> <a href="../../../reflect/internal/Definitions.scala.html#46608" title="=&gt; Erasure.this.global.Symbol">Object_eq</a>
                    <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="TypingTransformers.scala.html#238437" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#587266" title="Erasure.this.global.Tree">qual</a>, <a href="#587374" title="Erasure.this.global.Symbol">cmpOp</a><span class="delimiter">)</span>, <span title="(xs: Erasure.this.global.gen.global.Tree*)List[Erasure.this.global.gen.global.Tree]">List</span><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92625" title="(tpe: Erasure.this.global.gen.global.Type)Erasure.this.global.gen.global.Tree">mkAttributedQualifier</a><span class="delimiter">(</span><a href="#587280" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="keyword">case</span> <span title="Erasure.this.global.Tree">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="587433">parents</a>, <a title="Erasure.this.global.Scope" id="587434">decls</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#587433" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> =&gt;
                    // Optimization: don't generate isInstanceOf tests if the static type
                    // conforms, because it always succeeds.  (Or at least it had better.)
                    // At this writing the pattern matcher generates some instance tests
                    // involving intersections where at least one parent is statically known true.
                    // That needs fixing, but filtering the parents here adds an additional
                    // level of robustness (in addition to the short term fix.)
                    <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="587439">parentTests</a> = <a href="#587433" title="List[Erasure.this.global.Type]">parents</a> <span title="(p: Erasure.this.global.Type =&gt; Boolean)List[Erasure.this.global.Type]">filterNot</span> <span class="delimiter">(</span><a href="#587266" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#587443" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span>

                    <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587439" title="List[Erasure.this.global.Type]">parentTests</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="TypingTransformers.scala.html#238437" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)Erasure.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="keyword">else</span> <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235494" title="(expr: Erasure.this.global.gen.global.Tree, owner: Erasure.this.global.gen.global.Symbol, unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a><span class="delimiter">(</span><a href="#587266" title="Erasure.this.global.Tree">qual</a>, <a href="#586819" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="587450">q</a> =&gt;
                      <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                        <a href="#587439" title="List[Erasure.this.global.Type]">parentTests</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Tree,List[Erasure.this.global.Tree]])List[Erasure.this.global.Tree]">map</span> <a href="#587281" title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree">mkIsInstanceOf</a><a href="#587471" title="Erasure.this.global.Type" class="delimiter">(</a><a href="#587450" title="() =&gt; Erasure.this.global.gen.global.Tree">q</a><span class="delimiter">)</span> <span title="(op: (Erasure.this.global.Tree, Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">reduceRight</span> <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92654" title="(tree1: Erasure.this.global.gen.global.Tree, tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkAnd</a>
                      <span class="delimiter">}</span>
                    <span class="delimiter">}</span>
                  <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
                    <a href="#586842" title="Erasure.this.global.Tree">tree</a>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt; <a href="#586842" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">def</span> <a title="(fn: Erasure.this.global.Tree, qual: Erasure.this.global.Tree)Erasure.this.global.Tree" id="587532">doDynamic</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587533">fn</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Tree" id="587534">qual</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
              <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587533" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47779" title="=&gt; Boolean">isRefinementClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#587533" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#48016" title="=&gt; Boolean">isOverridingSymbol</a><span class="delimiter">)</span>
                <a href="TypingTransformers.scala.html#238437" title="(qual: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.ApplyDynamic">ApplyDynamic</a><span class="delimiter">(</span><a href="#587534" title="Erasure.this.global.Tree">qual</a>, <a href="#587200" title="List[Erasure.this.global.Tree]">args</a><span class="delimiter">)</span> <span title="(sym: Erasure.this.global.Symbol)Erasure.this.global.ApplyDynamic">setSymbol</span> <a href="#587533" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.ApplyDynamic">setPos</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>
              <span class="keyword">else</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
            <a href="#587199" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587551">qual</a>, _<span class="delimiter">)</span> =&gt; <a href="#587532" title="(fn: Erasure.this.global.Tree, qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a><span class="delimiter">(</span><a href="#587199" title="Erasure.this.global.Tree">fn</a>, <a href="#587551" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="587554">fni</a>@Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587559">qual</a>, _<span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <a href="#587532" title="(fn: Erasure.this.global.Tree, qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a><span class="delimiter">(</span><a href="#587554" title="Erasure.this.global.Select">fni</a>, <a href="#587559" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>// type parameters are irrelevant in case of dynamic call
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
                <a href="#586842" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587564">qual</a>, <a title="Erasure.this.global.Name" id="587565">name</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="587566">owner</a> = <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a>
          // println(&quot;preXform: &quot;+ (tree, tree.symbol, tree.symbol.owner, tree.symbol.owner.isRefinementClass))
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#587566" title="Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47779" title="=&gt; Boolean">isRefinementClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="587569">overridden</a> = <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#48017" title="=&gt; Erasure.this.global.Symbol">nextOverriddenSymbol</a>
            <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#587569" title="Erasure.this.global.Symbol">overridden</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a>, <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span>
            <a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="(sym: Erasure.this.global.Symbol)Unit">symbol</span> = <a href="#587569" title="Erasure.this.global.Symbol">overridden</a>
          <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="587567">isAccessible</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="587577">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="TypingTransformers.scala.html#586823" title="=&gt; Erasure.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184331" title="Erasure.this.global.analyzer.Context" id="587584">context</a>.<a href="../typechecker/Contexts.scala.html#430950" title="Boolean" id="587590">isAccessible</a><span class="delimiter">(</span><a href="#587577" title="Erasure.this.global.Symbol" id="587588">sym</a>, <a href="#587577" title="Erasure.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47980" title="Erasure.this.global.Type" id="587589">thisType</a><span class="delimiter">)</span>
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#587567" title="(sym: Erasure.this.global.Symbol)Boolean">isAccessible</a><span class="delimiter">(</span><a href="#587566" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#587564" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            // Todo: Figure out how qual.tpe could be null in the check above (it does appear in build where SwingWorker.this
            // has a null type).
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="587596">qualSym</a> = <a href="#587564" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42732" title="=&gt; Erasure.this.global.Type">widen</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
            <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#587567" title="(sym: Erasure.this.global.Symbol)Boolean">isAccessible</a><span class="delimiter">(</span><a href="#587596" title="Erasure.this.global.Symbol">qualSym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#587596" title="Erasure.this.global.Symbol">qualSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47787" title="=&gt; Boolean">isPackageClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#587596" title="Erasure.this.global.Symbol">qualSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47820" title="=&gt; Boolean">isPackageObjectClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              // insert cast to prevent illegal access error (see #4283)
              // util.trace(&quot;insert erasure cast &quot;) (*/
              <a href="#586819" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, qualifier: Erasure.this.global.Tree, selector: Erasure.this.global.Name)Erasure.this.global.Select">Select</span><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>, <a href="../Global.scala.html#182860" title="object Erasure.this.global.gen">gen</a>.<a href="../Global.scala.html#235503" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">mkAttributedCast</a><span class="delimiter">(</span><a href="#587564" title="Erasure.this.global.Tree">qual</a>, <a href="#587564" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42732" title="=&gt; Erasure.this.global.Type">widen</a><span class="delimiter">)</span>, <a href="#587565" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span> //)
            <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#586842" title="Erasure.this.global.Tree">tree</a>

        <span class="keyword">case</span> <span title="Erasure.this.global.Template">Template</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Tree]" id="587613">parents</a>, <a title="Erasure.this.global.ValDef" id="587614">self</a>, <a title="List[Erasure.this.global.Tree]" id="587615">body</a><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#586819" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47771" title="=&gt; Boolean">isImplClass</a><span class="delimiter">)</span>
          //Console.println(&quot;checking no dble defs &quot; + tree)//DEBUG
          <a href="#584486" title="(root: Erasure.this.global.Symbol)Unit">checkNoDoubleDefs</a><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>
          <a href="#586819" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, parents: List[Erasure.this.global.Tree], self: Erasure.this.global.ValDef, body: List[Erasure.this.global.Tree])Erasure.this.global.Template">Template</span><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>, <a href="#587613" title="List[Erasure.this.global.Tree]">parents</a>, <a href="../../../reflect/internal/Trees.scala.html#40612" title="object Erasure.this.global.emptyValDef">emptyValDef</a>, <a href="#584488" title="(stats: List[Erasure.this.global.Tree], base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]">addBridges</a><span class="delimiter">(</span><a href="#587615" title="List[Erasure.this.global.Tree]">body</a>, <a href="#586819" title="=&gt; Erasure.this.global.Symbol">currentOwner</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Match">Match</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="587630">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="587631">cases</a><span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#238437" title="(selector: Erasure.this.global.Tree, cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#238437" title="(expr: Erasure.this.global.Tree, tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#587630" title="Erasure.this.global.Tree">selector</a>, <a href="TypingTransformers.scala.html#238437" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#587630" title="Erasure.this.global.Tree">selector</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#587631" title="List[Erasure.this.global.CaseDef]">cases</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Literal">Literal</span><span class="delimiter">(</span><a title="Erasure.this.global.Constant" id="587641">ct</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#587641" title="Erasure.this.global.Constant">ct</a>.<a href="../../../reflect/internal/Constants.scala.html#47580" title="=&gt; Int">tag</a> <span title="(x: Int)Boolean">==</span> <span title="Int(12)">ClassTag</span>
                         <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#587641" title="Erasure.this.global.Constant">ct</a>.<a href="../../../reflect/internal/Constants.scala.html#47606" title="=&gt; Erasure.this.global.Type">typeValue</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#40473" title="object Erasure.this.global.definitions">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> =&gt;
          <a href="#586819" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Erasure.this.global.Tree, value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</span><span class="delimiter">(</span><a href="#586842" title="Erasure.this.global.Tree">tree</a>, <a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)Erasure.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a>, <a href="#587641" title="Erasure.this.global.Constant">ct</a>.<a href="../../../reflect/internal/Constants.scala.html#47606" title="=&gt; Erasure.this.global.Type">typeValue</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
          <a href="#586842" title="Erasure.this.global.Tree">tree</a>
      <span class="delimiter">}</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="586841">transform</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="586843">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        // Reply to &quot;!!! needed?&quot; which adorned the next line: without it, build fails with:
        //   Exception in thread &quot;main&quot; scala.tools.nsc.symtab.Types$TypeError:
        //   value array_this is not a member of object scala.runtime.ScalaRunTime
        //
        // What the heck is array_this? See preTransformer in this file:
        //   gen.mkRuntimeCall(&quot;array_&quot;+name, qual :: args)
        <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#586843" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#586843" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Boolean">isType</span><span class="delimiter">)</span> <a href="#586843" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="587659">tree1</a> = <a href="#586840" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">preErase</a><span class="delimiter">(</span><a href="#586843" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#587659" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="TypingTransformers.scala.html#238437" title="tree1.type">EmptyTree</a> | TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
              <a href="#587659" title="Erasure.this.global.Tree">tree1</a> <span title="(tp: Erasure.this.global.Type)tree1.type">setType</span> <a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="../../../reflect/internal/Symbols.scala.html#40013" title="object Erasure.this.global.NoSymbol">NoSymbol</a>, <a href="#587659" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Erasure.this.global.Tree">DefDef</span><span class="delimiter">(</span>_, _, _, _, <a title="Erasure.this.global.Tree" id="587671">tpt</a>, _<span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="587672">result</a> = <a href="#586819" title="Erasure.this.TypingTransformer {def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#587659" title="Erasure.this.global.Tree">tree1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">setType</span> <span title="Null(null)" class="keyword">null</span>
              <a href="#587671" title="Erasure.this.global.Tree">tpt</a>.<span title="(t: Erasure.this.global.Type)Unit">tpe</span> = <a href="../../../reflect/internal/transform/Erasure.scala.html#82326" title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#587659" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>, <a href="#587659" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Types.scala.html#42743" title="=&gt; Erasure.this.global.Type">resultType</a>
              <a href="#587672" title="Erasure.this.global.Tree">result</a>
            <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
              <a href="#586819" title="Erasure.this.TypingTransformer {def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#587659" title="Erasure.this.global.Tree">tree1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">setType</span> <span title="Null(null)" class="keyword">null</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** The main transform function: Pretransfom the tree, and then
     *  re-type it at phase erasure.next.
     */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="584491">transform</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="588381">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="588384">tree1</a> = <a href="#584489" title="=&gt; Erasure.this.TypingTransformer{def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}">preTransformer</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#588381" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
      <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="588391">tree2</a> = <a href="AddInterfaces.scala.html#239126" title="=&gt; Erasure.this.global.Transformer">mixinTransformer</a>.<span title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#588384" title="Erasure.this.global.Tree">tree1</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;tree after addinterfaces: \n&quot;)" class="string">&quot;tree after addinterfaces: \n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#588391" title="Erasure.this.global.Tree">tree2</a><span class="delimiter">)</span>

        <a href="#239159" title="(context: Erasure.this.Context)Erasure.this.Eraser">newTyper</a><span class="delimiter">(</span><a href="../typechecker/Contexts.scala.html#183954" title="(unit: Erasure.this.global.CompilationUnit, tree: Erasure.this.global.Tree, erasedTypes: Boolean)Erasure.this.Context">rootContext</a><span class="delimiter">(</span><a href="#584492" title="Erasure.this.global.CompilationUnit">unit</a>, <a href="#588381" title="Erasure.this.global.Tree">tree</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#588391" title="Erasure.this.global.Tree">tree2</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>