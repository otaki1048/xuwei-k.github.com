<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/UnCurry.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab.<a href="../symtab/package.scala.html#36230" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>

/*&lt;export&gt; */
/** - uncurry all symbol and tree types (@see UnCurryPhase) -- this includes normalizing all proper types.
 *  - for every curried parameter list:  (ps_1) ... (ps_n) ==&gt; (ps_1, ..., ps_n)
 *  - for every curried application: f(args_1)...(args_n) ==&gt; f(args_1, ..., args_n)
 *  - for every type application: f[Ts] ==&gt; f[Ts]() unless followed by parameters
 *  - for every use of a parameterless function: f ==&gt; f()  and  q.f ==&gt; q.f()
 *  - for every def-parameter:  x: =&gt; T ==&gt; x: () =&gt; T
 *  - for every use of a def-parameter: x ==&gt; x.apply()
 *  - for every argument to a def parameter `x: =&gt; T':
 *      if argument is not a reference to a def parameter:
 *        convert argument `e` to (expansion of) `() =&gt; e'
 *  - for every repeated Scala parameter `x: T*' --&gt; x: Seq[T].
 *  - for every repeated Java parameter `x: T...' --&gt; x: Array[T], except:
 *    if T is an unbounded abstract type, replace --&gt; x: Array[Object]
 *  - for every argument list that corresponds to a repeated Scala parameter
 *       (a_1, ..., a_n) =&gt; (Seq(a_1, ..., a_n))
 *  - for every argument list that corresponds to a repeated Java parameter
 *       (a_1, ..., a_n) =&gt; (Array(a_1, ..., a_n))
 *  - for every argument list that is an escaped sequence
 *       (a_1:_*) =&gt; (a_1) (possibly converted to sequence or array, as needed)
 *  - convert implicit method types to method types
 *  - convert non-trivial catches in try statements to matches
 *  - convert non-local returns to throws with enclosing try statements.
 */
/*&lt;/export&gt; */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class UnCurry extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with scala.reflect.internal.transform.UnCurry with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="28317">UnCurry</a> <a href="#28317" title="ScalaObject" class="keyword">extends</a> <a href="InfoTransform.scala.html#29973" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a>
                          <span class="keyword">with</span> reflect.internal.transform.<a href="../../../reflect/internal/transform/UnCurry.scala.html#10529" title="scala.reflect.internal.transform.UnCurry">UnCurry</a>
                          <span class="keyword">with</span> <a href="TypingTransformers.scala.html#29733" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#13777" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="238612">global</a>: <a href="../Global.scala.html#12521" title="scala.tools.nsc.Global">Global</a>               // need to repeat here because otherwise last mixin defines global as
                                   // SymbolTable. If we had DOT this would not be an issue
  <span class="keyword">import</span> <a href="#238612" title="=&gt; scala.tools.nsc.Global">global</a>._                  // the global environment
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#40473" title="object UnCurry.this.global.definitions">definitions</a>._             // standard classes and methods
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#184073" title="object UnCurry.this.CODE">CODE</a>._

  <span class="keyword">val</span> <a title="String" id="238616">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;uncurry&quot;)" class="string">&quot;uncurry&quot;</span>

  <span class="keyword">def</span> <a title="(unit: UnCurry.this.global.CompilationUnit)UnCurry.this.global.Transformer" id="238618">newTransformer</a><span class="delimiter">(</span><a title="UnCurry.this.global.CompilationUnit" id="615231">unit</a>: <a href="../CompilationUnits.scala.html#183079" title="UnCurry.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#183129" title="UnCurry.this.global.Transformer">Transformer</a> = <span title="UnCurry.this.UnCurryTransformer" class="keyword">new</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer">UnCurryTransformer</a><span class="delimiter">(</span><a href="#615231" title="UnCurry.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="238619">changesBaseClasses</a> = <span title="Boolean(false)" class="keyword">false</span>

// ------ Type transformation --------------------------------------------------------

// uncurry and uncurryType expand type aliases

  /** Traverse tree omitting local method definitions.
   *  If a `return` is encountered, set `returnFound` to true.
   *  Used for MSIL only.
   */
  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object UnCurry.this.lookForReturns" id="238620">lookForReturns</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#238612" title="UnCurry.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Boolean" id="615286">returnFound</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)Unit" id="615288">traverse</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615292">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =  <a href="#615292" title="UnCurry.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Return</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#615286" title="(x$1: Boolean)Unit">returnFound</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Unit">DefDef</span><span class="delimiter">(</span>_, _, _, _, _, _<span class="delimiter">)</span> =&gt; ;
      <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span class="keyword">super</span>.<span title="(tree: UnCurry.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#615292" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)Boolean" id="615289">found</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615320">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#615286" title="(x$1: Boolean)Unit">returnFound</a> = <span title="Boolean(false)" class="keyword">false</span>
      <a href="#615288" title="(tree: UnCurry.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#615320" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
      <a href="#615286" title="=&gt; Boolean">returnFound</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class UnCurryTransformer extends UnCurry.this.TypingTransformer with ScalaObject" id="238622">UnCurryTransformer</a><a href="#238622" title="ScalaObject" class="delimiter">(</a><a title="UnCurry.this.global.CompilationUnit" id="615280">unit</a>: <a href="../CompilationUnits.scala.html#183079" title="UnCurry.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="TypingTransformers.scala.html#238439" title="UnCurry.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="615238">needTryLift</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="615241">inPattern</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="615244">inConstructorFlag</a> = <span title="Long(0L)" class="long">0L</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[UnCurry.this.global.Tree]" id="615246">byNameArgs</a> = <span title="()scala.collection.mutable.HashSet[UnCurry.this.global.Tree]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[UnCurry.this.global.Tree]">HashSet</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[UnCurry.this.global.Tree]" id="615248">noApply</a> = <span title="()scala.collection.mutable.HashSet[UnCurry.this.global.Tree]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[UnCurry.this.global.Tree]">HashSet</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[UnCurry.this.global.Tree]" id="615250">newMembers</a> = mutable.<span title="[A](elems: A*)scala.collection.mutable.ArrayBuffer[A]">ArrayBuffer</span><span title="(elems: UnCurry.this.global.Tree*)scala.collection.mutable.ArrayBuffer[UnCurry.this.global.Tree]" class="delimiter">[</span><span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[UnCurry.this.global.Symbol,List[UnCurry.this.global.ValDef]]" id="615252">repeatedParams</a> = mutable.<span title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</span><span title="(elems: (UnCurry.this.global.Symbol, List[UnCurry.this.global.ValDef])*)scala.collection.mutable.Map[UnCurry.this.global.Symbol,List[UnCurry.this.global.ValDef]]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a>, <span title="List[UnCurry.this.global.ValDef]">List</span><span class="delimiter">[</span>ValDef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

    @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](value: Boolean)(body: =&gt; T)T" id="615254">withInPattern</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="615256">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Boolean" id="615336">value</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="615337">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#615256" title="T">T</a> = <span class="delimiter">{</span>
      <a href="#615241" title="(x$1: Boolean)Unit">inPattern</a> = <a href="#615336" title="Boolean">value</a>
      <span class="keyword">try</span> <a href="#615337" title="=&gt; T">body</a>
      <span class="keyword">finally</span> <a href="#615241" title="(x$1: Boolean)Unit">inPattern</a> = <span title="=&gt; Boolean">!</span><a href="#615336" title="Boolean">value</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="UnCurry.this.global.AnnotationInfo" id="615258">serialVersionUIDAnnotation</a> =
      <a href="../../../reflect/internal/AnnotationInfos.scala.html#47273" title="(atp: UnCurry.this.global.Type, args: List[UnCurry.this.global.Tree], assocs: List[(UnCurry.this.global.Name, UnCurry.this.global.ClassfileAnnotArg)])UnCurry.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46717" title="=&gt; UnCurry.this.global.Symbol">SerialVersionUIDAttr</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>, <span title="(xs: UnCurry.this.global.Literal*)List[UnCurry.this.global.Literal]">List</span><span class="delimiter">(</span><a href="#238612" title="(value: UnCurry.this.global.Constant)UnCurry.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)UnCurry.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="615260">nprinted</a> = <span title="Int(0)" class="int">0</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="615262">transform</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615362">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="keyword">try</span> <span class="delimiter">{</span> //debug
      <a href="#615277" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">postTransform</a><span class="delimiter">(</span><a href="#615276" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">mainTransform</a><span class="delimiter">(</span><a href="#615362" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="615371">ex</a>: <span title="Throwable">Throwable</span> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#615260" title="=&gt; Int">nprinted</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;exception when traversing &quot;)" class="string">&quot;exception when traversing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#615362" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#615260" title="(x$1: Int)Unit">nprinted</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span>
        <span title="Nothing" class="keyword">throw</span> <a href="#615371" title="Throwable">ex</a>
    <span class="delimiter">}</span>

    /* Is tree a reference `x` to a call by name parameter that needs to be converted to
     * x.apply()? Note that this is not the case if `x` is used as an argument to another
     * call by name parameter.
     */
    <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)Boolean" id="615263">isByNameRef</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615393">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <a href="#615393" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; Boolean">isTerm</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#615393" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; Boolean">hasSymbol</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="../../../reflect/internal/Definitions.scala.html#46393" title="(tp: UnCurry.this.global.Type)Boolean">isByNameParamType</a><span class="delimiter">(</span><a href="#615393" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span title="=&gt; Boolean">!</span><a href="#615246" title="(elem: UnCurry.this.global.Tree)Boolean">byNameArgs</a><span class="delimiter">(</span><a href="#615393" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>

    /** Uncurry a type of a tree node.
     *  This function is sensitive to whether or not we are in a pattern -- when in a pattern
     *  additional parameter sections of a case class are skipped.
     */
    <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="615264">uncurryTreeType</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="615416">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> = <a href="#615416" title="UnCurry.this.global.Type">tp</a> <span title="UnCurry.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="615420">params</a>, MethodType<span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="615423">params1</a>, <a title="UnCurry.this.global.Type" id="615424">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#615241" title="=&gt; Boolean">inPattern</a> =&gt;
        <a href="#615264" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurryTreeType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#615420" title="List[UnCurry.this.global.Symbol]">params</a>, <a href="#615424" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="UnCurry.this.global.Type">_</span> =&gt;
        <a href="../../../reflect/internal/Types.scala.html#82351" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurry</a><span class="delimiter">(</span><a href="#615416" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

// ------- Handling non-local returns -------------------------------------------------

    /** The type of a non-local return expression with given argument type */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(argtype: UnCurry.this.global.Type)UnCurry.this.global.Type" id="615265">nonLocalReturnExceptionType</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="615440">argtype</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span> =
      <a href="../../../reflect/internal/Types.scala.html#40204" title="(tycon: UnCurry.this.global.Type, args: List[UnCurry.this.global.Type])UnCurry.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46301" title="=&gt; UnCurry.this.global.Symbol">NonLocalReturnControlClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47937" title="=&gt; UnCurry.this.global.Type">typeConstructor</a>, <span title="(xs: UnCurry.this.global.Type*)List[UnCurry.this.global.Type]">List</span><span class="delimiter">(</span><a href="#615440" title="UnCurry.this.global.Type">argtype</a><span class="delimiter">)</span><span class="delimiter">)</span>

    /** A hashmap from method symbols to non-local return keys */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[UnCurry.this.global.Symbol,UnCurry.this.global.Symbol]" id="615266">nonLocalReturnKeys</a> = <span title="()scala.collection.mutable.HashMap[UnCurry.this.global.Symbol,UnCurry.this.global.Symbol]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[UnCurry.this.global.Symbol,UnCurry.this.global.Symbol]">HashMap</span><span class="delimiter">[</span>Symbol, Symbol<span class="delimiter">]</span>

    /** Return non-local return key for given method */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(meth: UnCurry.this.global.Symbol)UnCurry.this.global.Symbol" id="615268">nonLocalReturnKey</a><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="615452">meth</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#615266" title="=&gt; scala.collection.mutable.HashMap[UnCurry.this.global.Symbol,UnCurry.this.global.Symbol]">nonLocalReturnKeys</a>.<span title="(key: UnCurry.this.global.Symbol, op: =&gt; UnCurry.this.global.Symbol)UnCurry.this.global.Symbol">getOrElseUpdate</span><span class="delimiter">(</span><a href="#615452" title="UnCurry.this.global.Symbol">meth</a>,
        <a href="#615452" title="UnCurry.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/Symbols.scala.html#47698" title="(name: UnCurry.this.global.TermName, pos: UnCurry.this.global.Position, newFlags: Long)UnCurry.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185112" title="(prefix: String)UnCurry.this.global.TermName">freshTermName</a><span class="delimiter">(</span><span title="String(&quot;nonLocalReturnKey&quot;)" class="string">&quot;nonLocalReturnKey&quot;</span><span class="delimiter">)</span>, <a href="#615452" title="UnCurry.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; UnCurry.this.global.Position">pos</a>, <span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: UnCurry.this.global.Type)UnCurry.this.global.TermSymbol">setInfo</a> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>
      <span class="delimiter">)</span>

    /** Generate a non-local return throw with given return expression from given method.
     *  I.e. for the method's non-local return key, generate:
     *
     *    throw new NonLocalReturnControl(key, expr)
     *  todo: maybe clone a pre-existing exception instead?
     *  (but what to do about exceptions that miss their targets?)
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(expr: UnCurry.this.global.Tree, meth: UnCurry.this.global.Symbol)UnCurry.this.global.analyzer.global.Tree" id="615269">nonLocalReturnThrow</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615467">expr</a>: <span title="UnCurry.this.global.Tree">Tree</span>, <a title="UnCurry.this.global.Symbol" id="615468">meth</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
        <a href="#238612" title="(expr: UnCurry.this.global.Tree)UnCurry.this.global.Throw">Throw</a><span class="delimiter">(</span>
          <a href="../../../reflect/internal/Trees.scala.html#40624" title="(tpt: UnCurry.this.global.Tree, argss: List[List[UnCurry.this.global.Tree]])UnCurry.this.global.Tree">New</a><span class="delimiter">(</span>
            <a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#615265" title="(argtype: UnCurry.this.global.Type)UnCurry.this.global.Type">nonLocalReturnExceptionType</a><span class="delimiter">(</span><a href="#615467" title="UnCurry.this.global.Tree">expr</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>,
            <span title="(xs: List[UnCurry.this.global.Tree]*)List[List[UnCurry.this.global.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: UnCurry.this.global.Tree*)List[UnCurry.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#615268" title="(meth: UnCurry.this.global.Symbol)UnCurry.this.global.Symbol">nonLocalReturnKey</a><span class="delimiter">(</span><a href="#615468" title="UnCurry.this.global.Symbol">meth</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#615467" title="UnCurry.this.global.Tree">expr</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    /** Transform (body, key) to:
     *
     *  {
     *    val key = new Object()
     *    try {
     *      body
     *    } catch {
     *      case ex: NonLocalReturnControl[_] =&gt;
     *        if (ex.key().eq(key)) ex.value()
     *        else throw ex
     *    }
     *  }
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(body: UnCurry.this.global.Tree, key: UnCurry.this.global.Symbol, meth: UnCurry.this.global.Symbol)UnCurry.this.global.analyzer.global.Tree" id="615270">nonLocalReturnTry</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615529">body</a>: <span title="UnCurry.this.global.Tree">Tree</span>, <a title="UnCurry.this.global.Symbol" id="615530">key</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a>, <a title="UnCurry.this.global.Symbol" id="615531">meth</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="615536">extpe</a> = <a href="#615265" title="(argtype: UnCurry.this.global.Type)UnCurry.this.global.Type">nonLocalReturnExceptionType</a><span class="delimiter">(</span><a href="#615531" title="UnCurry.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#42747" title="=&gt; UnCurry.this.global.Type">finalResultType</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.TermSymbol" id="615537">ex</a> = <a href="#615531" title="UnCurry.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/Symbols.scala.html#47698" title="(name: UnCurry.this.global.TermName, pos: UnCurry.this.global.Position, newFlags: Long)UnCurry.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60228" title="=&gt; UnCurry.this.global.nme.NameType">ex</a>, <a href="#615529" title="UnCurry.this.global.Tree">body</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: UnCurry.this.global.Type)UnCurry.this.global.TermSymbol">setInfo</a> <a href="#615536" title="UnCurry.this.global.Type">extpe</a>
        <span class="keyword">val</span> <a title="UnCurry.this.global.Bind" id="615538">pat</a> = <a href="../../../reflect/internal/Trees.scala.html#40623" title="(sym: UnCurry.this.global.Symbol, body: UnCurry.this.global.Tree)UnCurry.this.global.Bind">Bind</a><span class="delimiter">(</span><a href="#615537" title="UnCurry.this.global.TermSymbol">ex</a>,
                       <a href="#238612" title="(expr: UnCurry.this.global.Tree, tpt: UnCurry.this.global.Tree)UnCurry.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#238612" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>,
                             <a href="#238612" title="(tpt: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.AppliedTypeTree">AppliedTypeTree</a><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46301" title="=&gt; UnCurry.this.global.Symbol">NonLocalReturnControlClass</a><span class="delimiter">)</span>,
                                             <span title="(xs: UnCurry.this.global.Bind*)List[UnCurry.this.global.Bind]">List</span><span class="delimiter">(</span><a href="#238612" title="(name: UnCurry.this.global.Name, body: UnCurry.this.global.Tree)UnCurry.this.global.Bind">Bind</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40550" title="object UnCurry.this.global.tpnme">tpnme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.tpnme.NameType">WILDCARD</a>,
                                                       <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.If" id="615539">rhs</a> =
          <a href="#238612" title="(cond: UnCurry.this.global.Tree, thenp: UnCurry.this.global.Tree, elsep: UnCurry.this.global.Tree)UnCurry.this.global.If">If</a><span class="delimiter">(</span>
            <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="#238612" title="(qualifier: UnCurry.this.global.Tree, sym: UnCurry.this.global.Symbol)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span>
                <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(qualifier: UnCurry.this.global.Tree, name: String)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#615537" title="UnCurry.this.global.TermSymbol">ex</a><span class="delimiter">)</span>, <span title="String(&quot;key&quot;)" class="string">&quot;key&quot;</span><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <a href="../../../reflect/internal/Definitions.scala.html#46608" title="=&gt; UnCurry.this.global.Symbol">Object_eq</a><span class="delimiter">)</span>,
              <span title="(xs: UnCurry.this.global.Ident*)List[UnCurry.this.global.Ident]">List</span><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#615530" title="UnCurry.this.global.Symbol">key</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
            <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span>
                <a href="#238612" title="(qualifier: UnCurry.this.global.Tree, sym: UnCurry.this.global.Symbol)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span>
                  <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(qualifier: UnCurry.this.global.Tree, name: String)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#615537" title="UnCurry.this.global.TermSymbol">ex</a><span class="delimiter">)</span>, <span title="String(&quot;value&quot;)" class="string">&quot;value&quot;</span><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../../../reflect/internal/Definitions.scala.html#46602" title="=&gt; UnCurry.this.global.Symbol">Any_asInstanceOf</a><span class="delimiter">)</span>,
                <span title="(xs: UnCurry.this.global.TypeTree*)List[UnCurry.this.global.TypeTree]">List</span><span class="delimiter">(</span><a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#615531" title="UnCurry.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#42747" title="=&gt; UnCurry.this.global.Type">finalResultType</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
            <a href="#238612" title="(expr: UnCurry.this.global.Tree)UnCurry.this.global.Throw">Throw</a><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#615537" title="UnCurry.this.global.TermSymbol">ex</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.ValDef" id="615540">keyDef</a> = <a href="../../../reflect/internal/Trees.scala.html#40610" title="(sym: UnCurry.this.global.Symbol, rhs: UnCurry.this.global.Tree)UnCurry.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#615530" title="UnCurry.this.global.Symbol">key</a>, <a href="../../../reflect/internal/Trees.scala.html#40624" title="(tpt: UnCurry.this.global.Tree, argss: List[List[UnCurry.this.global.Tree]])UnCurry.this.global.Tree">New</a><span class="delimiter">(</span><a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>, <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.Try" id="615541">tryCatch</a> = <a href="#238612" title="(block: UnCurry.this.global.Tree, catches: List[UnCurry.this.global.CaseDef], finalizer: UnCurry.this.global.Tree)UnCurry.this.global.Try">Try</a><span class="delimiter">(</span><a href="#615529" title="UnCurry.this.global.Tree">body</a>, <span title="(xs: UnCurry.this.global.CaseDef*)List[UnCurry.this.global.CaseDef]">List</span><span class="delimiter">(</span><a href="#238612" title="(pat: UnCurry.this.global.Tree, guard: UnCurry.this.global.Tree, body: UnCurry.this.global.Tree)UnCurry.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#615538" title="UnCurry.this.global.Bind">pat</a>, <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a>, <a href="#615539" title="UnCurry.this.global.If">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>
        <a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span><span title="(xs: UnCurry.this.global.ValDef*)List[UnCurry.this.global.ValDef]">List</span><span class="delimiter">(</span><a href="#615540" title="UnCurry.this.global.ValDef">keyDef</a><span class="delimiter">)</span>, <a href="#615541" title="UnCurry.this.global.Try">tryCatch</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

// ------ Transforming anonymous functions and by-name-arguments ----------------

    /** Undo eta expansion for parameterless and nullary methods */
    <span class="keyword">def</span> <a title="(fun: UnCurry.this.global.Function)UnCurry.this.global.Tree" id="615271">deEta</a><span class="delimiter">(</span><a title="UnCurry.this.global.Function" id="615958">fun</a>: <span title="UnCurry.this.global.Function">Function</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <a href="#615958" title="UnCurry.this.global.Function">fun</a> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Function</span><span class="delimiter">(</span><a href="#615963" title="(x: List[UnCurry.this.global.ValDef])Some[List[UnCurry.this.global.ValDef]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, Apply<span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615989">expr</a>, <a href="#615991" title="(x: List[UnCurry.this.global.Tree])Some[List[UnCurry.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118913" title="(tree: UnCurry.this.global.treeInfo.global.Tree)Boolean">isExprSafeToInline</a><span class="delimiter">(</span><a href="#615989" title="UnCurry.this.global.Tree">expr</a><span class="delimiter">)</span> =&gt;
        <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615989" title="UnCurry.this.global.Tree">expr</a> <span title="(f: UnCurry.this.global.Symbol =&gt; Boolean)Boolean">hasSymbolWhich</span> <span class="delimiter">(</span><a href="#616016" title="UnCurry.this.global.Symbol">_</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48081" title="=&gt; Boolean">isLazy</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#615958" title="UnCurry.this.global.Function">fun</a>
        <span class="keyword">else</span>
          <a href="#615989" title="UnCurry.this.global.Tree">expr</a>
      <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Function</span><span class="delimiter">(</span><a href="#616020" title="(x: List[UnCurry.this.global.ValDef])Some[List[UnCurry.this.global.ValDef]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="UnCurry.this.global.Tree" id="616031">expr</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#615263" title="(tree: UnCurry.this.global.Tree)Boolean">isByNameRef</a><span class="delimiter">(</span><a href="#616031" title="UnCurry.this.global.Tree">expr</a><span class="delimiter">)</span> =&gt;
        <a href="#615248" title="=&gt; scala.collection.mutable.HashSet[UnCurry.this.global.Tree]">noApply</a> <span title="(elem: UnCurry.this.global.Tree)UnCurryTransformer.this.noApply.type">+=</span> <a href="#616031" title="UnCurry.this.global.Tree">expr</a>
        <a href="#616031" title="UnCurry.this.global.Tree">expr</a>
      <span class="keyword">case</span> <span title="UnCurry.this.global.Function">_</span> =&gt;
        <a href="#615958" title="UnCurry.this.global.Function">fun</a>
    <span class="delimiter">}</span>


    /*  Transform a function node (x_1,...,x_n) =&gt; body of type FunctionN[T_1, .., T_N, R] to
     *
     *    class $anon() extends AbstractFunctionN[T_1, .., T_N, R] with Serializable {
     *      def apply(x_1: T_1, ..., x_N: T_n): R = body
     *    }
     *    new $anon()
     *
     *  transform a function node (x =&gt; body) of type PartialFunction[T, R] where
     *    body = expr match { case P_i if G_i =&gt; E_i }_i=1..n
     *  to:
     *
     *    class $anon() extends AbstractPartialFunction[T, R] with Serializable {
     *      def apply(x: T): R = (expr: @unchecked) match {
     *        case P_1 if G_1 =&gt; E_1
     *        ...
     *        case P_n if G_n =&gt; true
     *        case _ =&gt; this.missingCase(x)
     *      }
     *      def isDefinedAtCurrent(x: T): boolean = (x: @unchecked) match {
     *        case P_1 if G_1 =&gt; true
     *        ...
     *        case P_n if G_n =&gt; true
     *        case _ =&gt; false
     *      }
     *    }
     *    new $anon()
     *
     *  However, if one of the patterns P_i if G_i is a default pattern,
     *  drop the last default clause in tghe definition of `apply` and generate for `isDefinedAtCurrent` instead
     *
     *      def isDefinedAtCurrent(x: T): boolean = true
     */
    <span class="keyword">def</span> <a title="(fun: UnCurry.this.global.Function)UnCurry.this.global.Tree" id="615272">transformFunction</a><span class="delimiter">(</span><a title="UnCurry.this.global.Function" id="616041">fun</a>: <span title="UnCurry.this.global.Function">Function</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="616043">fun1</a> = <a href="#615271" title="(fun: UnCurry.this.global.Function)UnCurry.this.global.Tree">deEta</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; UnCurry.this.global.Symbol" id="616044">owner</a> = <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; UnCurry.this.global.Symbol">owner</a>
      <span class="keyword">def</span> <a title="=&gt; List[UnCurry.this.global.Type]" id="616045">targs</a> = <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42741" title="=&gt; List[UnCurry.this.global.Type]">typeArgs</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="616046">isPartial</a> = <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; UnCurry.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46311" title="=&gt; UnCurry.this.global.Symbol">PartialFunctionClass</a>

      <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#616043" title="UnCurry.this.global.Tree">fun1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#616041" title="UnCurry.this.global.Function">fun</a><span class="delimiter">)</span> <a href="#616043" title="UnCurry.this.global.Tree">fun1</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a href="#616055" title="(List[UnCurry.this.global.Type], UnCurry.this.global.Type)" class="delimiter">(</a><a href="#616054" title="List[UnCurry.this.global.Type]" id="616055">formals</a>, <a href="#616054" title="UnCurry.this.global.Type" id="616056">restpe</a><span class="delimiter">)</span> = <span title="(_1: List[UnCurry.this.global.Type], _2: UnCurry.this.global.Type)(List[UnCurry.this.global.Type], UnCurry.this.global.Type)" class="delimiter">(</span><a href="#616045" title="=&gt; List[UnCurry.this.global.Type]">targs</a>.<span title="=&gt; List[UnCurry.this.global.Type]">init</span>, <a href="#616045" title="=&gt; List[UnCurry.this.global.Type]">targs</a>.<span title="=&gt; UnCurry.this.global.Type">last</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.ClassSymbol" id="616057">anonClass</a> = <a href="#616044" title="=&gt; UnCurry.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47739" title="(pos: UnCurry.this.global.Position, newFlags: Long)UnCurry.this.global.ClassSymbol">newAnonymousFunctionClass</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, <a href="#615244" title="=&gt; Long">inConstructorFlag</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="=&gt; List[UnCurry.this.global.Type]" id="616058">parents</a> =
          <span title="List[UnCurry.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46557" title="(tp: UnCurry.this.global.Type)Boolean">isFunctionType</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(xs: UnCurry.this.global.Type*)List[UnCurry.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46556" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">abstractFunctionForFunctionType</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46377" title="=&gt; UnCurry.this.global.Symbol">SerializableClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="List[UnCurry.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#616046" title="=&gt; Boolean">isPartial</a><span class="delimiter">)</span> <span title="(xs: UnCurry.this.global.Type*)List[UnCurry.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#40204" title="(tycon: UnCurry.this.global.Type, args: List[UnCurry.this.global.Type])UnCurry.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46313" title="=&gt; UnCurry.this.global.Symbol">AbstractPartialFunctionClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47937" title="=&gt; UnCurry.this.global.Type">typeConstructor</a>, <a href="#616045" title="=&gt; List[UnCurry.this.global.Type]">targs</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46377" title="=&gt; UnCurry.this.global.Symbol">SerializableClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="(xs: UnCurry.this.global.Type*)List[UnCurry.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>, <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>, <a href="../../../reflect/internal/Definitions.scala.html#46377" title="=&gt; UnCurry.this.global.Symbol">SerializableClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>

        <a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: UnCurry.this.global.Type)anonClass.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#71108" title="(parents: List[UnCurry.this.global.Type], decls: UnCurry.this.global.Scope, typeSymbol: UnCurry.this.global.Symbol)UnCurry.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#616058" title="=&gt; List[UnCurry.this.global.Type]">parents</a>, <a href="../../../reflect/internal/Scopes.scala.html#61744" title="()UnCurry.this.global.Scope" class="keyword">new</a> <a href="../../../reflect/internal/Scopes.scala.html#40425" title="UnCurry.this.global.Scope">Scope</a>, <a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.MethodSymbol" id="616059">applyMethod</a> = <a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47702" title="(name: UnCurry.this.global.TermName, pos: UnCurry.this.global.Position, newFlags: Long)UnCurry.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60160" title="=&gt; UnCurry.this.global.nme.NameType">apply</a>, <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, <span title="Long(32L)">FINAL</span><span class="delimiter">)</span> 
        <a href="#616059" title="UnCurry.this.global.MethodSymbol">applyMethod</a> <a href="../../../reflect/internal/Symbols.scala.html#47926" title="(info: UnCurry.this.global.Type)applyMethod.type">setInfoAndEnter</a> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#616059" title="UnCurry.this.global.MethodSymbol">applyMethod</a> <a href="../../../reflect/internal/Symbols.scala.html#47731" title="(argtypes: List[UnCurry.this.global.Type])List[UnCurry.this.global.Symbol]">newSyntheticValueParams</a> <a href="#616055" title="List[UnCurry.this.global.Type]">formals</a>, <a href="#616056" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span>
        <a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a> <a href="../../../reflect/internal/Symbols.scala.html#47959" title="(annot: UnCurry.this.global.AnnotationInfo)anonClass.type">addAnnotation</a> <a href="#615257" title="=&gt; UnCurry.this.global.AnnotationInfo">serialVersionUIDAnnotation</a>

        <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; List[UnCurry.this.global.ValDef]">vparams</span> <span title="(f: UnCurry.this.global.ValDef =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#616158" title="UnCurry.this.global.ValDef">_</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47877" title="(owner: UnCurry.this.global.Symbol)Unit">owner</a> = <a href="#616059" title="UnCurry.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>
        <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#40606" title="implicit scala.reflect.internal.Trees.treeOps : (tree: UnCurry.this.global.Tree)UnCurry.this.global.TreeOps">body</a>.<a href="../../../reflect/internal/Trees.scala.html#59727" title="(pairs: (UnCurry.this.global.Symbol, UnCurry.this.global.Symbol)*)UnCurry.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="(x: UnCurry.this.global.Symbol)ArrowAssoc[UnCurry.this.global.Symbol]">symbol</span> <span title="(y: UnCurry.this.global.MethodSymbol)(UnCurry.this.global.Symbol, UnCurry.this.global.MethodSymbol)">-&gt;</span> <a href="#616059" title="UnCurry.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(scrutinee: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="616060">missingCaseCall</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616183">scrutinee</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(qualifier: UnCurry.this.global.Tree, name: UnCurry.this.global.Name)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40628" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Tree">This</a><span class="delimiter">(</span><a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60288" title="=&gt; UnCurry.this.global.nme.NameType">missingCase</a><span class="delimiter">)</span>, <span title="(xs: UnCurry.this.global.Tree*)List[UnCurry.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#616183" title="UnCurry.this.global.Tree">scrutinee</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="()UnCurry.this.global.DefDef" id="616061">applyMethodDef</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="UnCurry.this.global.analyzer.global.Tree" id="616241">body</a> = <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="UnCurry.this.global.analyzer.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#616046" title="=&gt; Boolean">isPartial</a><span class="delimiter">)</span> <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235471" title="(tree: UnCurry.this.global.gen.global.Tree)UnCurry.this.global.gen.global.Tree">mkUncheckedMatch</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235472" title="(matchExpr: UnCurry.this.global.gen.global.Tree, defaultAction: UnCurry.this.global.gen.global.Tree =&gt; UnCurry.this.global.gen.global.Tree)UnCurry.this.global.gen.global.Tree">withDefaultCase</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Tree">body</span>, <a href="#616060" title="(scrutinee: UnCurry.this.global.Tree)UnCurry.this.global.Tree">missingCaseCall</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Tree">body</span>
          <span class="delimiter">}</span>
          // Have to repack the type to avoid mismatches when existentials
          // appear in the result - see SI-4869.
          <span class="keyword">val</span> <a title="UnCurry.this.global.analyzer.global.Type" id="616242">applyResultType</a> = <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184422" title="(tree: UnCurry.this.global.analyzer.global.Tree, owner: UnCurry.this.global.analyzer.global.Symbol)UnCurry.this.global.analyzer.global.Type">packedType</a><span class="delimiter">(</span><a href="#616241" title="UnCurry.this.global.analyzer.global.Tree">body</a>, <a href="#616059" title="UnCurry.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>
          <a href="#238612" title="(mods: UnCurry.this.global.Modifiers, name: UnCurry.this.global.Name, tparams: List[UnCurry.this.global.TypeDef], vparamss: List[List[UnCurry.this.global.ValDef]], tpt: UnCurry.this.global.Tree, rhs: UnCurry.this.global.Tree)UnCurry.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40602" title="(flags: Long)UnCurry.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(32L)">FINAL</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60160" title="=&gt; UnCurry.this.global.nme.NameType">apply</a>, <span title="object Nil">Nil</span>, <span title="(xs: List[UnCurry.this.global.ValDef]*)List[List[UnCurry.this.global.ValDef]]">List</span><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; List[UnCurry.this.global.ValDef]">vparams</span><span class="delimiter">)</span>, <a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#616242" title="UnCurry.this.global.analyzer.global.Type">applyResultType</a><span class="delimiter">)</span>, <a href="#616241" title="UnCurry.this.global.analyzer.global.Tree">body</a><span class="delimiter">)</span> <span title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.DefDef">setSymbol</span> <a href="#616059" title="UnCurry.this.global.MethodSymbol">applyMethod</a>
        <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="()UnCurry.this.global.DefDef" id="616062">isDefinedAtMethodDef</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="UnCurry.this.global.nme.NameType" id="616314">isDefinedAtName</a> = <span class="delimiter">{</span>
            <span title="UnCurry.this.global.nme.NameType" class="keyword">if</span> <span class="delimiter">(</span><a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; UnCurry.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42769" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Symbol">member</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60150" title="=&gt; UnCurry.this.global.nme.NameType">_isDefinedAt</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object UnCurry.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60150" title="=&gt; UnCurry.this.global.nme.NameType">_isDefinedAt</a>
            <span class="keyword">else</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60264" title="=&gt; UnCurry.this.global.nme.NameType">isDefinedAt</a>
          <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="UnCurry.this.global.MethodSymbol" id="616315">m</a>      = <a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47702" title="(name: UnCurry.this.global.TermName, pos: UnCurry.this.global.Position, newFlags: Long)UnCurry.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#616314" title="UnCurry.this.global.nme.NameType">isDefinedAtName</a>, <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, <span title="Long(32L)">FINAL</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="List[UnCurry.this.global.Symbol]" id="616316">params</a> = <a href="#616315" title="UnCurry.this.global.MethodSymbol">m</a> <a href="../../../reflect/internal/Symbols.scala.html#47731" title="(argtypes: List[UnCurry.this.global.Type])List[UnCurry.this.global.Symbol]">newSyntheticValueParams</a> <a href="#616055" title="List[UnCurry.this.global.Type]">formals</a>
          <a href="#616315" title="UnCurry.this.global.MethodSymbol">m</a> <a href="../../../reflect/internal/Symbols.scala.html#47926" title="(info: UnCurry.this.global.Type)m.type">setInfoAndEnter</a> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#616316" title="List[UnCurry.this.global.Symbol]">params</a>, <a href="../../../reflect/internal/Definitions.scala.html#46850" title="=&gt; UnCurry.this.global.Symbol">BooleanClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="UnCurry.this.global.TreeSymSubstituter" id="616317">substParam</a> = <span title="UnCurry.this.global.TreeSymSubstituter" class="keyword">new</span> <a href="../../../reflect/internal/Trees.scala.html#40648" title="UnCurry.this.global.TreeSymSubstituter">TreeSymSubstituter</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; List[UnCurry.this.global.ValDef]">vparams</span> <span title="(f: UnCurry.this.global.ValDef =&gt; UnCurry.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.ValDef],UnCurry.this.global.Symbol,List[UnCurry.this.global.Symbol]])List[UnCurry.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#616354" title="UnCurry.this.global.ValDef">_</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span>, <a href="#616316" title="List[UnCurry.this.global.Symbol]">params</a><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="[T &lt;: UnCurry.this.global.Tree](t: T)T" id="616318">substTree</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: UnCurry.this.global.Tree" id="616320">T</a> &lt;: Tree<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="616393">t</a>: <a href="#616320" title="T">T</a><span class="delimiter">)</span>: <a href="#616320" title="T">T</a> = <a href="../../../reflect/internal/Trees.scala.html#126028" title="(tree: T)T">substParam</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#183136" title="(x: T)T">resetLocalAttrs</a><span class="delimiter">(</span><a href="#616393" title="T">t</a><span class="delimiter">)</span><span class="delimiter">)</span>

          // waiting here until we can mix case classes and extractors reliably (i.e., when virtpatmat becomes the default)
          // object VirtPatmatOpt {
          //   object Last {
          //     def unapply[T](xs: List[T]) = xs.lastOption
          //   }
          //   // keep this in synch by what's generated by combineCases/runOrElse
          //   object MatcherBlock {
          //     def unapply(matcher: Tree): Option[(ValDef, ValDef, ValDef, ValDef, List[Tree])] = matcher match { // TODO: BUG the unapplySeq version of the case below does not seem to work in virtpatmat??
          //       case Block((zero: ValDef) :: (x: ValDef) :: (matchRes: ValDef) :: (keepGoing: ValDef) :: stats, _) =&gt; Some(zero, x, matchRes, keepGoing, stats)
          //       case _ =&gt; None
          //     }
          //   }
          //   // TODO: virtpatmat use case: would be nice if could abstract over the repeated pattern more easily
          //   // case Block(Last(P)) =&gt;
          //   // case P =&gt;
          //   def unapply(matcher: Tree): Option[(ValDef, ValDef, ValDef, ValDef, List[Tree], Tree =&gt; Tree)] = matcher match {
          //     case MatcherBlock(zero, x, matchRes, keepGoing, stats) =&gt; Some(zero, x, matchRes, keepGoing, stats, identity[Tree])
          //     case Block(outerStats, MatcherBlock(zero, x, matchRes, keepGoing, stats)) =&gt; Some(zero, x, matchRes, keepGoing, stats, inner =&gt; Block(outerStats, inner))
          //     case b =&gt; treeBrowser browse b; None
          //   }
          // }

          // TODO: optimize duplication, but make sure ValDef's introduced by wrap are treated correctly
          <span class="keyword">def</span> <a title="(selector: UnCurry.this.global.Tree, cases: List[UnCurry.this.global.CaseDef], wrap: UnCurry.this.global.Match =&gt; UnCurry.this.global.Tree)UnCurry.this.global.gen.global.Tree" id="616321">dupMatch</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616405">selector</a>: <span title="UnCurry.this.global.Tree">Tree</span>, <a title="List[UnCurry.this.global.CaseDef]" id="616406">cases</a>: <span title="List[UnCurry.this.global.CaseDef]">List</span><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span>, <a title="UnCurry.this.global.Match =&gt; UnCurry.this.global.Tree" id="616408">wrap</a>: Match =&gt; Tree = <a href="#616577" title="(x: UnCurry.this.global.Match)UnCurry.this.global.Match">identity</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <span class="keyword">def</span> <a title="(cdef: UnCurry.this.global.CaseDef)UnCurry.this.global.CaseDef" id="616409">transformCase</a><span class="delimiter">(</span><a title="UnCurry.this.global.CaseDef" id="616411">cdef</a>: <span title="UnCurry.this.global.CaseDef">CaseDef</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.CaseDef">CaseDef</span> =
              <a href="#238612" title="(pat: UnCurry.this.global.Tree, guard: UnCurry.this.global.Tree, body: UnCurry.this.global.Tree)UnCurry.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#616411" title="UnCurry.this.global.CaseDef">cdef</a>.<span title="=&gt; UnCurry.this.global.Tree">pat</span>, <a href="#616411" title="UnCurry.this.global.CaseDef">cdef</a>.<span title="=&gt; UnCurry.this.global.Tree">guard</span>, <a href="#238612" title="(value: UnCurry.this.global.Constant)UnCurry.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)UnCurry.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">def</span> <a title="=&gt; UnCurry.this.global.CaseDef" id="616410">defaultCase</a> = <a href="#238612" title="(pat: UnCurry.this.global.Tree, guard: UnCurry.this.global.Tree, body: UnCurry.this.global.Tree)UnCurry.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#238612" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>, <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a>, <a href="#238612" title="(value: UnCurry.this.global.Constant)UnCurry.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)UnCurry.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235471" title="(tree: UnCurry.this.global.gen.global.Tree)UnCurry.this.global.gen.global.Tree">mkUncheckedMatch</a><span class="delimiter">(</span>
              <span title="UnCurry.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#616406" title="List[UnCurry.this.global.CaseDef]">cases</a> <span title="(p: UnCurry.this.global.CaseDef =&gt; Boolean)Boolean">exists</span> <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118949" title="(cdef: UnCurry.this.global.treeInfo.global.CaseDef)Boolean">isDefaultCase</a><span class="delimiter">)</span> <a href="#238612" title="(value: UnCurry.this.global.Constant)UnCurry.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)UnCurry.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <a href="#616318" title="(t: UnCurry.this.global.Tree)UnCurry.this.global.Tree">substTree</a><span class="delimiter">(</span><a href="#616408" title="(v1: UnCurry.this.global.Match)UnCurry.this.global.Tree">wrap</a><span class="delimiter">(</span><a href="#238612" title="(selector: UnCurry.this.global.Tree, cases: List[UnCurry.this.global.CaseDef])UnCurry.this.global.Match">Match</a><span class="delimiter">(</span><a href="#616405" title="UnCurry.this.global.Tree">selector</a>, <span class="delimiter">(</span><a href="#616406" title="List[UnCurry.this.global.CaseDef]">cases</a> <span title="(f: UnCurry.this.global.CaseDef =&gt; UnCurry.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.CaseDef],UnCurry.this.global.CaseDef,List[UnCurry.this.global.CaseDef]])List[UnCurry.this.global.CaseDef]">map</span> <a href="#616409" title="(cdef: UnCurry.this.global.CaseDef)UnCurry.this.global.CaseDef">transformCase</a><span class="delimiter">)</span> <span title="(elem: UnCurry.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.CaseDef],UnCurry.this.global.CaseDef,List[UnCurry.this.global.CaseDef]])List[UnCurry.this.global.CaseDef]">:+</span> <a href="#616410" title="=&gt; UnCurry.this.global.CaseDef">defaultCase</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; UnCurry.this.global.Tree">duplicate</span><span class="delimiter">)</span>
            <span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span class="keyword">def</span> <a title="(zero: UnCurry.this.global.ValDef, x: UnCurry.this.global.ValDef, matchRes: UnCurry.this.global.ValDef, keepGoing: UnCurry.this.global.ValDef, stats: List[UnCurry.this.global.Tree], wrap: UnCurry.this.global.Block =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="616322">dupVirtMatch</a><span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="616579">zero</a>: <span title="UnCurry.this.global.ValDef">ValDef</span>, <a title="UnCurry.this.global.ValDef" id="616580">x</a>: <span title="UnCurry.this.global.ValDef">ValDef</span>, <a title="UnCurry.this.global.ValDef" id="616581">matchRes</a>: <span title="UnCurry.this.global.ValDef">ValDef</span>, <a title="UnCurry.this.global.ValDef" id="616582">keepGoing</a>: <span title="UnCurry.this.global.ValDef">ValDef</span>, <a title="List[UnCurry.this.global.Tree]" id="616583">stats</a>: <span title="List[UnCurry.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="UnCurry.this.global.Block =&gt; UnCurry.this.global.Tree" id="616585">wrap</a>: Block =&gt; Tree = <a href="#616741" title="(x: UnCurry.this.global.Block)UnCurry.this.global.Block">identity</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <span class="keyword">object</span> <a title="object dropMatchResAssign" id="616586">dropMatchResAssign</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#183129" title="UnCurry.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
              // override val treeCopy = newStrictTreeCopier // will duplicate below
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="616591">transform</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616593">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <a href="#616593" title="UnCurry.this.global.Tree">tree</a> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                // don't compute the result of the match -- remove the block for the RHS (emitted by pmgen.one), except for the assignment to keepGoing
                <span class="keyword">case</span> <span title="UnCurry.this.global.Block">Block</span><span class="delimiter">(</span><a href="#616601" title="(x: List[UnCurry.this.global.Tree])Some[List[UnCurry.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616612">matchRes</a>, <a title="UnCurry.this.global.Assign" id="616613">ass</a>@Assign<span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616616">keepGoingLhs</a>, <a title="UnCurry.this.global.Tree" id="616617">falseLit</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a title="UnCurry.this.global.Tree" id="616618">zero</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#616616" title="UnCurry.this.global.Tree">keepGoingLhs</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#616582" title="UnCurry.this.global.ValDef">keepGoing</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> =&gt;
                  <a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span><span title="(xs: UnCurry.this.global.Assign*)List[UnCurry.this.global.Assign]">List</span><span class="delimiter">(</span><a href="#616613" title="UnCurry.this.global.Assign">ass</a><span class="delimiter">)</span>, <a href="#616618" title="UnCurry.this.global.Tree">zero</a><span class="delimiter">)</span>
                <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">_</span> =&gt;
                  <span class="keyword">super</span>.<span title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#616593" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
            <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="616588">statsNoMatchRes</a>: <span title="List[UnCurry.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <a href="#616583" title="List[UnCurry.this.global.Tree]">stats</a> <span title="(f: UnCurry.this.global.Tree =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <span class="delimiter">(</span><a href="#616586" title="object dropMatchResAssign">dropMatchResAssign</a>.<a href="#616591" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">)</span> <span title="=&gt; List[UnCurry.this.global.Tree]">toList</span>
            <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="616589">idaBlock</a> = <a href="#616585" title="(v1: UnCurry.this.global.Block)UnCurry.this.global.Tree">wrap</a><span class="delimiter">(</span><a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span>
              <a href="#616579" title="UnCurry.this.global.ValDef">zero</a> <a href="#616703" title="(x: UnCurry.this.global.Tree)List[UnCurry.this.global.Tree]">::</a>
              <a href="#616580" title="UnCurry.this.global.ValDef">x</a> <a href="#616704" title="(x: UnCurry.this.global.Tree)List[UnCurry.this.global.Tree]">::</a>
              /* drop matchRes def */
              <a href="#616582" title="UnCurry.this.global.ValDef">keepGoing</a> <a href="#616705" title="(x: UnCurry.this.global.Tree)List[UnCurry.this.global.Tree]">::</a>
              <a href="#616588" title="List[UnCurry.this.global.Tree]">statsNoMatchRes</a>,
              <a href="../ast/TreeDSL.scala.html#241245" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Select">NOT</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#241249" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="#616582" title="UnCurry.this.global.ValDef">keepGoing</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> // replace `if (keepGoing) throw new MatchError(...) else matchRes` by `!keepGoing`
            <span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#616318" title="(t: UnCurry.this.global.Tree)UnCurry.this.global.Tree">substTree</a><span class="delimiter">(</span><a href="#616589" title="UnCurry.this.global.Tree">idaBlock</a>.<span title="=&gt; idaBlock.type">duplicate</span><span class="delimiter">)</span> // duplicate on block as a whole to ensure valdefs are properly cloned and substed            
          <span class="delimiter">}</span>

          <a href="../../../reflect/internal/Trees.scala.html#40617" title="(sym: UnCurry.this.global.Symbol, rhs: UnCurry.this.global.Tree)UnCurry.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#616315" title="UnCurry.this.global.MethodSymbol">m</a>, <span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Tree">body</span>: @<span title="UnCurry.this.global.Tree @unchecked">unchecked</span><span class="delimiter">)</span> <span title="UnCurry.this.global.gen.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="UnCurry.this.global.gen.global.Tree">Match</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616769">selector</a>, <a title="List[UnCurry.this.global.CaseDef]" id="616770">cases</a><span class="delimiter">)</span> =&gt;
              <a href="#616321" title="(selector: UnCurry.this.global.Tree, cases: List[UnCurry.this.global.CaseDef], wrap: UnCurry.this.global.Match =&gt; UnCurry.this.global.Tree)UnCurry.this.global.gen.global.Tree">dupMatch</a><span class="delimiter">(</span><a href="#616769" title="UnCurry.this.global.Tree">selector</a>, <a href="#616770" title="List[UnCurry.this.global.CaseDef]">cases</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="UnCurry.this.global.gen.global.Tree">Block</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="616779">vd</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span title="object Nil">Nil</span>, Match<span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616782">selector</a>, <a title="List[UnCurry.this.global.CaseDef]" id="616783">cases</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; // can't factor this out using an extractor due to bugs in the old pattern matcher
              <a href="#616321" title="(selector: UnCurry.this.global.Tree, cases: List[UnCurry.this.global.CaseDef], wrap: UnCurry.this.global.Match =&gt; UnCurry.this.global.Tree)UnCurry.this.global.gen.global.Tree">dupMatch</a><span class="delimiter">(</span><a href="#616782" title="UnCurry.this.global.Tree">selector</a>, <a href="#616783" title="List[UnCurry.this.global.CaseDef]">cases</a>, <a title="UnCurry.this.global.Match" id="616785">m</a> =&gt; <a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span><span title="(xs: UnCurry.this.global.ValDef*)List[UnCurry.this.global.ValDef]">List</span><span class="delimiter">(</span><a href="#616779" title="UnCurry.this.global.ValDef">vd</a><span class="delimiter">)</span>, <a href="#616785" title="UnCurry.this.global.Match">m</a><span class="delimiter">)</span><span class="delimiter">)</span>
            // virtpatmat -- TODO: find a better way to keep this in synch with the code generated by patmatvirtualizer
            <span class="keyword">case</span> <span title="UnCurry.this.global.Apply">Apply</span><span class="delimiter">(</span>Apply<span class="delimiter">(</span>TypeApply<span class="delimiter">(</span>Select<span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616823">tgt</a>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60316" title="=&gt; UnCurry.this.global.nme.NameType">runOrElse</a><span class="delimiter">)</span>, <a title="List[UnCurry.this.global.Tree]" id="616824">targs</a><span class="delimiter">)</span>, <a title="List[UnCurry.this.global.Tree]" id="616825">args_scrut</a><span class="delimiter">)</span>, <a title="List[UnCurry.this.global.Tree]" id="616826">args_pm</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../Global.scala.html#182909" title="object UnCurry.this.global.opt">opt</a>.<a href="../settings/AestheticSettings.scala.html#229290" title="=&gt; Boolean">virtPatmat</a> =&gt;
              <span class="keyword">object</span> <a title="object noOne" id="616827">noOne</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#183129" title="UnCurry.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
                <span class="keyword">override</span> <span class="keyword">val</span> <a title="UnCurry.this.global.TreeCopier" id="616830">treeCopy</a> = <a href="../ast/Trees.scala.html#183125" title="=&gt; UnCurry.this.global.TreeCopier">newStrictTreeCopier</a> // must duplicate everything
                <span class="keyword">val</span> <a title="UnCurry.this.global.Symbol" id="616832">one</a> = <a href="#616823" title="UnCurry.this.global.Tree">tgt</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42769" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Symbol">member</a> <a href="../../../reflect/internal/Names.scala.html#39670" title="(s: String)UnCurry.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;one&quot;)" class="string">&quot;one&quot;</span><span class="delimiter">)</span>
                <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="616834">transform</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616844">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <a href="#616844" title="UnCurry.this.global.Tree">tree</a> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="UnCurry.this.global.Apply">Apply</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616851">fun</a>, <a href="#616853" title="(x: List[UnCurry.this.global.Tree])Some[List[UnCurry.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="616864">a</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#616851" title="UnCurry.this.global.Tree">fun</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#616832" title="=&gt; UnCurry.this.global.Symbol">one</a> =&gt;
                    // blow one's argument away since all we want to know is whether the match succeeds or not
                    // (the alternative, making `one` CBN, would entail moving away from Option)
                    <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#616851" title="UnCurry.this.global.Tree">fun</a>.<span title="=&gt; fun.type">duplicate</span>, <span title="(xs: UnCurry.this.global.gen.global.Tree*)List[UnCurry.this.global.gen.global.Tree]">List</span><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92652" title="(tp: UnCurry.this.global.gen.global.Type)UnCurry.this.global.gen.global.Tree">mkZeroContravariantAfterTyper</a><span class="delimiter">(</span><a href="#616864" title="UnCurry.this.global.Tree">a</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">_</span> =&gt;
                    <span class="keyword">super</span>.<span title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#616844" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
              <a href="#616318" title="(t: UnCurry.this.global.Apply)UnCurry.this.global.Apply">substTree</a><span class="delimiter">(</span><a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="#238612" title="(qualifier: UnCurry.this.global.Tree, sym: UnCurry.this.global.Symbol)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span><a href="#616823" title="UnCurry.this.global.Tree">tgt</a>.<span title="=&gt; tgt.type">duplicate</span>, <a href="#616823" title="UnCurry.this.global.Tree">tgt</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42769" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Symbol">member</a><span class="delimiter">(</span><a href="../../../reflect/internal/Names.scala.html#39670" title="(s: String)UnCurry.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;isSuccess&quot;)" class="string">&quot;isSuccess&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#616824" title="List[UnCurry.this.global.Tree]">targs</a> <span title="(f: UnCurry.this.global.Tree =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <span class="delimiter">(</span><a href="#616962" title="UnCurry.this.global.Tree">_</a>.<span title="=&gt; x$8.type">duplicate</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#616825" title="List[UnCurry.this.global.Tree]">args_scrut</a> <span title="(f: UnCurry.this.global.Tree =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <span class="delimiter">(</span><a href="#617009" title="UnCurry.this.global.Tree">_</a>.<span title="=&gt; x$9.type">duplicate</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#616826" title="List[UnCurry.this.global.Tree]">args_pm</a> <span title="(f: UnCurry.this.global.Tree =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <span class="delimiter">(</span><a href="#616827" title="object noOne">noOne</a>.<a href="#616834" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            // for the optimized version of virtpatmat
            <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Block</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617106">zero</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617114">x</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617119">matchRes</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617124">keepGoing</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <a title="List[UnCurry.this.global.Tree]" id="617125">stats</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="../Global.scala.html#182909" title="object UnCurry.this.global.opt">opt</a>.<a href="../settings/AestheticSettings.scala.html#229290" title="=&gt; Boolean">virtPatmat</a> =&gt;
              <a href="#616322" title="(zero: UnCurry.this.global.ValDef, x: UnCurry.this.global.ValDef, matchRes: UnCurry.this.global.ValDef, keepGoing: UnCurry.this.global.ValDef, stats: List[UnCurry.this.global.Tree], wrap: UnCurry.this.global.Block =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">dupVirtMatch</a><span class="delimiter">(</span><a href="#617106" title="UnCurry.this.global.ValDef">zero</a>, <a href="#617114" title="UnCurry.this.global.ValDef">x</a>, <a href="#617119" title="UnCurry.this.global.ValDef">matchRes</a>, <a href="#617124" title="UnCurry.this.global.ValDef">keepGoing</a>, <a href="#617125" title="List[UnCurry.this.global.Tree]">stats</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Block</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Tree]" id="617130">outerStats</a>, Block<span class="delimiter">(</span><span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617139">zero</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617144">x</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617149">matchRes</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <span class="delimiter">(</span><a title="UnCurry.this.global.ValDef" id="617154">keepGoing</a>: <span title="UnCurry.this.global.ValDef">ValDef</span><span class="delimiter">)</span> :: <a title="List[UnCurry.this.global.Tree]" id="617155">stats</a>, _<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../Global.scala.html#182909" title="object UnCurry.this.global.opt">opt</a>.<a href="../settings/AestheticSettings.scala.html#229290" title="=&gt; Boolean">virtPatmat</a> =&gt;  // can't factor this out using an extractor due to bugs in the old pattern matcher
              <a href="#616322" title="(zero: UnCurry.this.global.ValDef, x: UnCurry.this.global.ValDef, matchRes: UnCurry.this.global.ValDef, keepGoing: UnCurry.this.global.ValDef, stats: List[UnCurry.this.global.Tree], wrap: UnCurry.this.global.Block =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">dupVirtMatch</a><span class="delimiter">(</span><a href="#617139" title="UnCurry.this.global.ValDef">zero</a>, <a href="#617144" title="UnCurry.this.global.ValDef">x</a>, <a href="#617149" title="UnCurry.this.global.ValDef">matchRes</a>, <a href="#617154" title="UnCurry.this.global.ValDef">keepGoing</a>, <a href="#617155" title="List[UnCurry.this.global.Tree]">stats</a>, <a title="UnCurry.this.global.Block" id="617157">m</a> =&gt; <a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span><a href="#617130" title="List[UnCurry.this.global.Tree]">outerStats</a>, <a href="#617157" title="UnCurry.this.global.Block">m</a><span class="delimiter">)</span><span class="delimiter">)</span>
            // case other =&gt;
            //   treeBrowser browse other
          <span class="delimiter">}</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="List[UnCurry.this.global.DefDef]" id="616063">members</a> =
          <span title="List[UnCurry.this.global.DefDef]" class="keyword">if</span> <span class="delimiter">(</span><a href="#616046" title="=&gt; Boolean">isPartial</a><span class="delimiter">)</span> <span title="(xs: UnCurry.this.global.DefDef*)List[UnCurry.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="#616061" title="()UnCurry.this.global.DefDef">applyMethodDef</a>, <a href="#616062" title="()UnCurry.this.global.DefDef">isDefinedAtMethodDef</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="(xs: UnCurry.this.global.DefDef*)List[UnCurry.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="#616061" title="()UnCurry.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span>

        <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span>
            <span title="(xs: UnCurry.this.global.ClassDef*)List[UnCurry.this.global.ClassDef]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#183118" title="(sym: UnCurry.this.global.Symbol, constrMods: UnCurry.this.global.Modifiers, vparamss: List[List[UnCurry.this.global.ValDef]], argss: List[List[UnCurry.this.global.Tree]], body: List[UnCurry.this.global.Tree], superPos: UnCurry.this.global.Position)UnCurry.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span><a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a>, <a href="../../../reflect/internal/Trees.scala.html#40604" title="=&gt; UnCurry.this.global.Modifiers">NoMods</a>, <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#616063" title="List[UnCurry.this.global.DefDef]">members</a>, <a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">)</span>,
            <a href="#238612" title="(expr: UnCurry.this.global.Tree, tpt: UnCurry.this.global.Tree)UnCurry.this.global.Typed">Typed</a><span class="delimiter">(</span>
              <a href="../../../reflect/internal/Trees.scala.html#40624" title="(tpt: UnCurry.this.global.Tree, argss: List[List[UnCurry.this.global.Tree]])UnCurry.this.global.Tree">New</a><span class="delimiter">(</span><a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#616057" title="UnCurry.this.global.ClassSymbol">anonClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#70289" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>, <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#616041" title="UnCurry.this.global.Function">fun</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(pos: UnCurry.this.global.Position, fun: UnCurry.this.global.Symbol, args: List[UnCurry.this.global.Tree], formals: List[UnCurry.this.global.Type])List[UnCurry.this.global.Tree]" id="615273">transformArgs</a><span class="delimiter">(</span><a title="UnCurry.this.global.Position" id="617292">pos</a>: <a href="../util/Position.scala.html#34604" title="UnCurry.this.global.Position">Position</a>, <a title="UnCurry.this.global.Symbol" id="617293">fun</a>: <a href="../../../reflect/internal/Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a>, <a title="List[UnCurry.this.global.Tree]" id="617294">args</a>: <span title="List[UnCurry.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[UnCurry.this.global.Type]" id="617295">formals</a>: <span title="List[UnCurry.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Boolean" id="617298">isJava</a> = <a href="#617293" title="UnCurry.this.global.Symbol">fun</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48117" title="=&gt; Boolean">isJavaDefined</a>
      <span class="keyword">def</span> <a title="(varargsElemType: UnCurry.this.global.Type)List[UnCurry.this.global.Tree]" id="617299">transformVarargs</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="617301">varargsElemType</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(ts: List[UnCurry.this.global.Tree], elemtp: UnCurry.this.global.Type)UnCurry.this.global.ArrayValue" id="617302">mkArrayValue</a><span class="delimiter">(</span><a title="List[UnCurry.this.global.Tree]" id="617306">ts</a>: <span title="List[UnCurry.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="UnCurry.this.global.Type" id="617307">elemtp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span> =
          <a href="#238612" title="(elemtpt: UnCurry.this.global.Tree, elems: List[UnCurry.this.global.Tree])UnCurry.this.global.ArrayValue">ArrayValue</a><span class="delimiter">(</span><a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#617307" title="UnCurry.this.global.Type">elemtp</a><span class="delimiter">)</span>, <a href="#617306" title="List[UnCurry.this.global.Tree]">ts</a><span class="delimiter">)</span> <span title="(tp: UnCurry.this.global.Type)UnCurry.this.global.ArrayValue">setType</span> <a href="../../../reflect/internal/Definitions.scala.html#46561" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span><a href="#617307" title="UnCurry.this.global.Type">elemtp</a><span class="delimiter">)</span>

        // when calling into scala varargs, make sure it's a sequence.
        <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree, elemtp: UnCurry.this.global.Type)UnCurry.this.global.analyzer.global.Tree" id="617303">arrayToSequence</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617318">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span>, <a title="UnCurry.this.global.Type" id="617319">elemtp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#617292" title="UnCurry.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="617324">pt</a> = <a href="../../../reflect/internal/Definitions.scala.html#46561" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span><a href="#617319" title="UnCurry.this.global.Type">elemtp</a><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="617325">adaptedTree</a> = // might need to cast to Array[elemtp], as arrays are not covariant
                <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617318" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42795" title="(that: UnCurry.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#617324" title="UnCurry.this.global.Type">pt</a><span class="delimiter">)</span> <a href="#617318" title="UnCurry.this.global.Tree">tree</a>
                <span class="keyword">else</span> <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235490" title="(tree: UnCurry.this.global.gen.global.Tree, elemtp: UnCurry.this.global.gen.global.Type, pt: UnCurry.this.global.gen.global.Type)UnCurry.this.global.gen.global.Tree">mkCastArray</a><span class="delimiter">(</span><a href="#617318" title="UnCurry.this.global.Tree">tree</a>, <a href="#617319" title="UnCurry.this.global.Type">elemtp</a>, <a href="#617324" title="UnCurry.this.global.Type">pt</a><span class="delimiter">)</span>

              <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235489" title="(tree: UnCurry.this.global.gen.global.Tree, elemtp: UnCurry.this.global.gen.global.Type)UnCurry.this.global.gen.global.Tree">mkWrapArray</a><span class="delimiter">(</span><a href="#617325" title="UnCurry.this.global.Tree">adaptedTree</a>, <a href="#617319" title="UnCurry.this.global.Type">elemtp</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        // when calling into java varargs, make sure it's an array - see bug #1360
        <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.analyzer.global.Tree" id="617304">sequenceToArray</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617337">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="UnCurry.this.global.Symbol" id="617338">toArraySym</a> = <a href="#617337" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42769" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Symbol">member</a> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60342" title="=&gt; UnCurry.this.global.nme.NameType">toArray</a>
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#617338" title="UnCurry.this.global.Symbol">toArraySym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object UnCurry.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Tree" id="617339">getManifest</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="617350">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="UnCurry.this.global.analyzer.SearchResult" id="617351">manifestOpt</a> = <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184453" title="(tp: UnCurry.this.global.analyzer.global.Type, full: Boolean)UnCurry.this.global.analyzer.SearchResult">findManifest</a><span class="delimiter">(</span><a href="#617350" title="UnCurry.this.global.Type">tp</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
            // Don't want bottom types getting any further than this (SI-4024)
            <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617350" title="UnCurry.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; UnCurry.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47758" title="=&gt; Boolean">isBottomClass</a><span class="delimiter">)</span> <a href="#617339" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Tree">getManifest</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46274" title="=&gt; UnCurry.this.global.Symbol">AnyClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#617351" title="UnCurry.this.global.analyzer.SearchResult">manifestOpt</a>.<a href="../typechecker/Implicits.scala.html#431162" title="=&gt; UnCurry.this.global.analyzer.global.Tree">tree</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#617351" title="UnCurry.this.global.analyzer.SearchResult">manifestOpt</a>.<a href="../typechecker/Implicits.scala.html#431162" title="=&gt; UnCurry.this.global.analyzer.global.Tree">tree</a>
            <span class="keyword">else</span> <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617350" title="UnCurry.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42736" title="=&gt; UnCurry.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66852" title="=&gt; UnCurry.this.global.Type">hi</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#617350" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span> <a href="#617339" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Tree">getManifest</a><span class="delimiter">(</span><a href="#617350" title="UnCurry.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42736" title="=&gt; UnCurry.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#66852" title="=&gt; UnCurry.this.global.Type">hi</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184454" title="(pos: UnCurry.this.global.analyzer.global.Position, tp: UnCurry.this.global.analyzer.global.Type, full: Boolean)UnCurry.this.global.analyzer.global.Tree">getManifestTree</a><span class="delimiter">(</span><a href="#617337" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, <a href="#617350" title="UnCurry.this.global.Type">tp</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#617292" title="UnCurry.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92638" title="(qual: UnCurry.this.global.gen.global.Tree, sym: UnCurry.this.global.gen.global.Symbol)UnCurry.this.global.gen.global.Tree">mkAttributedSelect</a><span class="delimiter">(</span><a href="#617337" title="UnCurry.this.global.Tree">tree</a>, <a href="#617338" title="UnCurry.this.global.Symbol">toArraySym</a><span class="delimiter">)</span>,
                    <span title="(xs: UnCurry.this.global.Tree*)List[UnCurry.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#617339" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Tree">getManifest</a><span class="delimiter">(</span><a href="#617337" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42777" title="(clazz: UnCurry.this.global.Symbol)UnCurry.this.global.Type">baseType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46424" title="=&gt; UnCurry.this.global.Symbol">TraversableClass</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Types.scala.html#42741" title="=&gt; List[UnCurry.this.global.Type]">typeArgs</a>.<span title="=&gt; UnCurry.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <span class="keyword">var</span> <a title="UnCurry.this.global.Tree" id="617305">suffix</a>: <span title="UnCurry.this.global.Tree">Tree</span> =
          <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a> <a href="../../../reflect/internal/TreeInfo.scala.html#118947" title="(trees: List[UnCurry.this.global.treeInfo.global.Tree])Boolean">isWildcardStarArgList</a> <a href="#617294" title="List[UnCurry.this.global.Tree]">args</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> Typed<a href="#617433" title="UnCurry.this.global.Tree" id="617430" class="delimiter">(</a><a title="UnCurry.this.global.Tree" id="617433">tree</a>, _<span class="delimiter">)</span> = <a href="#617294" title="List[UnCurry.this.global.Tree]">args</a>.<span title="=&gt; UnCurry.this.global.Tree">last</span>;
            <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617298" title="Boolean">isJava</a><span class="delimiter">)</span>
              <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617430" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; UnCurry.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; UnCurry.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <a href="#617430" title="UnCurry.this.global.Tree">tree</a>
              <span class="keyword">else</span> <a href="#617304" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.analyzer.global.Tree">sequenceToArray</a><span class="delimiter">(</span><a href="#617430" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617430" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; UnCurry.this.global.Symbol">typeSymbol</a> <a href="../../../reflect/internal/Symbols.scala.html#47964" title="(that: UnCurry.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#46424" title="=&gt; UnCurry.this.global.Symbol">TraversableClass</a><span class="delimiter">)</span> <a href="#617430" title="UnCurry.this.global.Tree">tree</a>   // @PP: I suspect this should be SeqClass
              <span class="keyword">else</span> <a href="#617303" title="(tree: UnCurry.this.global.Tree, elemtp: UnCurry.this.global.Type)UnCurry.this.global.analyzer.global.Tree">arrayToSequence</a><span class="delimiter">(</span><a href="#617430" title="UnCurry.this.global.Tree">tree</a>, <a href="#617301" title="UnCurry.this.global.Type">varargsElemType</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">def</span> <a title="=&gt; UnCurry.this.global.ArrayValue" id="617442">mkArray</a> = <a href="#617302" title="(ts: List[UnCurry.this.global.Tree], elemtp: UnCurry.this.global.Type)UnCurry.this.global.ArrayValue">mkArrayValue</a><span class="delimiter">(</span><a href="#617294" title="List[UnCurry.this.global.Tree]">args</a> <span title="(n: Int)List[UnCurry.this.global.Tree]">drop</span> <span class="delimiter">(</span><a href="#617295" title="List[UnCurry.this.global.Type]">formals</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>, <a href="#617301" title="UnCurry.this.global.Type">varargsElemType</a><span class="delimiter">)</span>
            <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617298" title="Boolean">isJava</a> <span title="(x: Boolean)Boolean">||</span> <a href="#615241" title="=&gt; Boolean">inPattern</a><span class="delimiter">)</span> <a href="#617442" title="=&gt; UnCurry.this.global.ArrayValue">mkArray</a>
            <span class="keyword">else</span> <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#617294" title="List[UnCurry.this.global.Tree]">args</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92650" title="=&gt; UnCurry.this.global.gen.global.Tree">mkNil</a>  // avoid needlessly double-wrapping an empty argument list
            <span class="keyword">else</span> <a href="#617303" title="(tree: UnCurry.this.global.Tree, elemtp: UnCurry.this.global.Type)UnCurry.this.global.analyzer.global.Tree">arrayToSequence</a><span class="delimiter">(</span><a href="#617442" title="=&gt; UnCurry.this.global.ArrayValue">mkArray</a>, <a href="#617301" title="UnCurry.this.global.Type">varargsElemType</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Unit)Unit">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#617298" title="Boolean">isJava</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../reflect/internal/Definitions.scala.html#46404" title="(tp: UnCurry.this.global.Type)Boolean">isPrimitiveArray</a><span class="delimiter">(</span><a href="#617305" title="UnCurry.this.global.Tree">suffix</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../reflect/internal/Definitions.scala.html#46405" title="(tp: UnCurry.this.global.Type, elem: UnCurry.this.global.Symbol)Boolean">isArrayOfSymbol</a><span class="delimiter">(</span><a href="#617293" title="UnCurry.this.global.Symbol">fun</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#42750" title="=&gt; List[UnCurry.this.global.Symbol]">params</a>.<span title="=&gt; UnCurry.this.global.Symbol">last</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>, <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#617305" title="UnCurry.this.global.Tree">suffix</a> = <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#617292" title="UnCurry.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235480" title="(meth: UnCurry.this.global.gen.global.Name, args: List[UnCurry.this.global.gen.global.Tree])UnCurry.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60346" title="=&gt; UnCurry.this.global.nme.NameType">toObjectArray</a>, <span title="(xs: UnCurry.this.global.Tree*)List[UnCurry.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#617305" title="UnCurry.this.global.Tree">suffix</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#617294" title="List[UnCurry.this.global.Tree]">args</a>.<span title="(n: Int)List[UnCurry.this.global.Tree]">take</span><span class="delimiter">(</span><a href="#617295" title="List[UnCurry.this.global.Type]">formals</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(elem: UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">:+</span> <span class="delimiter">(</span><a href="#617305" title="UnCurry.this.global.Tree">suffix</a> <span title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Tree">setType</span> <a href="#617295" title="List[UnCurry.this.global.Type]">formals</a>.<span title="=&gt; UnCurry.this.global.Type">last</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="617300">args1</a> = <span title="List[UnCurry.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46402" title="(formals: List[UnCurry.this.global.Type])Boolean">isVarArgTypes</a><span class="delimiter">(</span><a href="#617295" title="List[UnCurry.this.global.Type]">formals</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#617299" title="(varargsElemType: UnCurry.this.global.Type)List[UnCurry.this.global.Tree]">transformVarargs</a><span class="delimiter">(</span><a href="#617295" title="List[UnCurry.this.global.Type]">formals</a>.<span title="=&gt; UnCurry.this.global.Type">last</span>.<a href="../../../reflect/internal/Types.scala.html#42741" title="=&gt; List[UnCurry.this.global.Type]">typeArgs</a>.<span title="=&gt; UnCurry.this.global.Type">head</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#617294" title="List[UnCurry.this.global.Tree]">args</a>

      <a href="../../../reflect/internal/util/Collections.scala.html#39578" title="(xs1: List[UnCurry.this.global.Type], xs2: List[UnCurry.this.global.Tree])(f: (UnCurry.this.global.Type, UnCurry.this.global.Tree) =&gt; UnCurry.this.global.Tree)List[UnCurry.this.global.Tree]">map2</a><span class="delimiter">(</span><a href="#617295" title="List[UnCurry.this.global.Type]">formals</a>, <a href="#617300" title="List[UnCurry.this.global.Tree]">args1</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="617580">formal</a>, <a title="UnCurry.this.global.Tree" id="617581">arg</a><span class="delimiter">)</span> =&gt;
        <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#46393" title="(tp: UnCurry.this.global.Type)Boolean">isByNameParamType</a><span class="delimiter">(</span><a href="#617580" title="UnCurry.this.global.Type">formal</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#617581" title="UnCurry.this.global.Tree">arg</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615263" title="(tree: UnCurry.this.global.Tree)Boolean">isByNameRef</a><span class="delimiter">(</span><a href="#617581" title="UnCurry.this.global.Tree">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#615246" title="=&gt; scala.collection.mutable.HashSet[UnCurry.this.global.Tree]">byNameArgs</a> <span title="(elem: UnCurry.this.global.Tree)UnCurryTransformer.this.byNameArgs.type">+=</span> <a href="#617581" title="UnCurry.this.global.Tree">arg</a>
          <a href="#617581" title="UnCurry.this.global.Tree">arg</a> <span title="(tp: UnCurry.this.global.Type)arg.type">setType</span> <a href="../../../reflect/internal/Definitions.scala.html#46555" title="(formals: List[UnCurry.this.global.Type], restpe: UnCurry.this.global.Type)UnCurry.this.global.Type">functionType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#617581" title="UnCurry.this.global.Tree">arg</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#182909" title="object UnCurry.this.global.opt">opt</a>.<a href="../settings/AestheticSettings.scala.html#229293" title="=&gt; Boolean">verboseDebug</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="String" id="617602">posstr</a>  = <a href="#617581" title="UnCurry.this.global.Tree">arg</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>.<a href="../util/Position.scala.html#183787" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#185156" title="=&gt; String">path</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#617581" title="UnCurry.this.global.Tree">arg</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>.<a href="../util/Position.scala.html#183814" title="=&gt; Int">line</a>
            <span class="keyword">val</span> <a title="String" id="617603">permstr</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#617293" title="UnCurry.this.global.Symbol">fun</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48084" title="=&gt; Boolean">isPrivate</a><span class="delimiter">)</span> <span title="String(&quot;private&quot;)" class="string">&quot;private&quot;</span> <span class="keyword">else</span> <span title="String(&quot;notprivate&quot;)" class="string">&quot;notprivate&quot;</span>
            <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;byname | %s | %s | %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#617602" title="String">posstr</a>, <a href="#617293" title="UnCurry.this.global.Symbol">fun</a>.<a href="../../../reflect/internal/Symbols.scala.html#47897" title="=&gt; String">fullName</a>, <a href="#617603" title="String">permstr</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span class="keyword">val</span> <a title="UnCurry.this.global.Function" id="617601">result</a> = <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184436" title="(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span>
            <a href="#238612" title="(vparams: List[UnCurry.this.global.ValDef], body: UnCurry.this.global.Tree)UnCurry.this.global.Function">Function</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <a href="#617581" title="UnCurry.this.global.Tree">arg</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)UnCurry.this.global.Function">setPos</span> <a href="#617581" title="UnCurry.this.global.Tree">arg</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="UnCurry.this.global.Function" class="delimiter">[</span><span title="UnCurry.this.global.Function">Function</span><span class="delimiter">]</span>
          <span title="UnCurry.this.global.ChangeOwnerTraverser" class="keyword">new</span> <a href="../../../reflect/internal/Trees.scala.html#40639" title="UnCurry.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentOwner</a>, <a href="#617601" title="UnCurry.this.global.Function">result</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#126010" title="(tree: UnCurry.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#617581" title="UnCurry.this.global.Tree">arg</a><span class="delimiter">)</span>
          <a href="#615272" title="(fun: UnCurry.this.global.Function)UnCurry.this.global.Tree">transformFunction</a><span class="delimiter">(</span><a href="#617601" title="UnCurry.this.global.Function">result</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** For removing calls to specially designated methods.
     */
    <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="615274">elideIntoUnit</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617627">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <a href="#238612" title="(value: UnCurry.this.global.Constant)UnCurry.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#47562" title="(value: Any)UnCurry.this.global.Constant">Constant</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)UnCurry.this.global.Literal">setPos</span> <a href="#617627" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span> <span title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Literal">setType</span> <a href="../../../reflect/internal/Definitions.scala.html#46834" title="=&gt; UnCurry.this.global.Symbol">UnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>
    <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)Boolean" id="615275">isElidable</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617637">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.treeInfo.global.Symbol" id="617640">sym</a> = <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118957" title="(tree: UnCurry.this.global.treeInfo.global.Tree)UnCurry.this.global.treeInfo.global.Tree">methPart</a><span class="delimiter">(</span><a href="#617637" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>.<span title="=&gt; UnCurry.this.global.treeInfo.global.Symbol">symbol</span>
      // XXX settings.noassertions.value temporarily retained to avoid
      // breakage until a reasonable interface is settled upon.
      <a href="#617640" title="UnCurry.this.global.treeInfo.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#617640" title="UnCurry.this.global.treeInfo.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47842" title="=&gt; Option[Int]">elisionLevel</a>.<span title="(p: Int =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="Int" id="617648">x</a> =&gt; <a href="#617648" title="Int">x</a> <span title="(x: Int)Boolean">&lt;</span> <a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183368" title="=&gt; scala.tools.nsc.Settings#IntSetting">elidebelow</a>.<a href="../settings/MutableSettings.scala.html#193186" title="=&gt; Int">value</a> <span title="(x: Boolean)Boolean">||</span> <a href="../Global.scala.html#182849" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#183366" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">noassertions</a>.<a href="../settings/MutableSettings.scala.html#183734" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#182904" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;Eliding call from &quot;)" class="string">&quot;Eliding call from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#617637" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; UnCurry.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#617640" title="UnCurry.this.global.treeInfo.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; based on its elision threshold of &quot;)" class="string">&quot; based on its elision threshold of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#617640" title="UnCurry.this.global.treeInfo.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47842" title="=&gt; Option[Int]">elisionLevel</a>.<span title="=&gt; Int">get</span><span class="delimiter">)</span>
        <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

// ------ The tree transformers --------------------------------------------------------

    <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="615276">mainTransform</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615369">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      @inline <span class="keyword">def</span> <a title="(needLift: Boolean)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="617674">withNeedLift</a><span class="delimiter">(</span><a title="Boolean" id="617678">needLift</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; UnCurry.this.global.Tree" id="617679">f</a>: =&gt; Tree<span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Boolean" id="617680">saved</a> = <a href="#615238" title="=&gt; Boolean">needTryLift</a>
        <a href="#615238" title="(x$1: Boolean)Unit">needTryLift</a> = <a href="#617678" title="Boolean">needLift</a>
        <span class="keyword">try</span> <a href="#617679" title="=&gt; UnCurry.this.global.Tree">f</a>
        <span class="keyword">finally</span> <a href="#615238" title="(x$1: Boolean)Unit">needTryLift</a> = <a href="#617680" title="Boolean">saved</a>
      <span class="delimiter">}</span>

      /** A try or synchronized needs to be lifted anyway for MSIL if it contains
       *  return statements. These are disallowed in the CLR. By lifting
       *  such returns will be converted to throws.
       */
      <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)Boolean" id="617675">shouldBeLiftedAnyway</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617681">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span title="Boolean(false)" class="keyword">false</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> // buggy, see #1981
        <a href="../Global.scala.html#183036" title="=&gt; Boolean">forMSIL</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#238620" title="object UnCurry.this.lookForReturns">lookForReturns</a>.<a href="#615289" title="(tree: UnCurry.this.global.Tree)Boolean">found</a><span class="delimiter">(</span><a href="#617681" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>

      /** Transform tree `t` to { def f = t; f } where `f` is a fresh name
       */
      <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.analyzer.global.Tree" id="617676">liftTree</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617682">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;lifting tree at: &quot;)" class="string">&quot;lifting tree at: &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#617682" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.MethodSymbol" id="617683">sym</a> = <a href="#238622" title="UnCurry.this.global.Symbol" id="617693">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#71224" title="Long" id="617696">newMethod</a><span class="delimiter">(</span><a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185112" title="(prefix: String)UnCurry.this.global.TermName">freshTermName</a><a title="UnCurry.this.global.TermName" id="617694" class="delimiter">(</a><span title="String(&quot;liftedTree&quot;)" class="string">&quot;liftedTree&quot;</span><span class="delimiter">)</span>, <a href="#617682" title="UnCurry.this.global.Tree">tree</a>.<a title="UnCurry.this.global.Position" id="617695">pos</a><span class="delimiter">)</span>
        <a href="#617683" title="UnCurry.this.global.MethodSymbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: UnCurry.this.global.Type)sym.type">setInfo</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#617682" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../reflect/internal/Trees.scala.html#40606" title="implicit scala.reflect.internal.Trees.treeOps : (tree: UnCurry.this.global.Tree)UnCurry.this.global.TreeOps">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#59727" title="(pairs: (UnCurry.this.global.Symbol, UnCurry.this.global.Symbol)*)UnCurry.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#238622" title="(x: UnCurry.this.global.Symbol)ArrowAssoc[UnCurry.this.global.Symbol]">currentOwner</a> <span title="(y: UnCurry.this.global.MethodSymbol)(UnCurry.this.global.Symbol, UnCurry.this.global.MethodSymbol)">-&gt;</span> <a href="#617683" title="UnCurry.this.global.MethodSymbol">sym</a><span class="delimiter">)</span>
        <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#617682" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span>
          <span title="(xs: UnCurry.this.global.DefDef*)List[UnCurry.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#40615" title="(sym: UnCurry.this.global.Symbol, vparamss: List[List[UnCurry.this.global.ValDef]], rhs: UnCurry.this.global.Tree)UnCurry.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#617683" title="UnCurry.this.global.MethodSymbol">sym</a>, <span title="(xs: scala.collection.immutable.Nil.type*)List[scala.collection.immutable.Nil.type]">List</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>, <a href="#617682" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>,
          <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#617683" title="UnCurry.this.global.MethodSymbol">sym</a><span class="delimiter">)</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span>
        <span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(inConstructorFlag: Long)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="617677">withInConstructorFlag</a><span class="delimiter">(</span><a title="Long" id="617801">inConstructorFlag</a>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; UnCurry.this.global.Tree" id="617802">f</a>: =&gt; Tree<span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Long" id="617803">saved</a> = <a href="#238622" title="UnCurryTransformer.this.type" class="keyword">this</a>.<a href="#615244" title="=&gt; Long">inConstructorFlag</a>
        <a href="#238622" title="UnCurryTransformer.this.type" class="keyword">this</a>.<a href="#615244" title="(x$1: Long)Unit">inConstructorFlag</a> = <a href="#617801" title="Long">inConstructorFlag</a>
        <span class="keyword">try</span> <a href="#617802" title="=&gt; UnCurry.this.global.Tree">f</a>
        <span class="keyword">finally</span> <a href="#238622" title="UnCurryTransformer.this.type" class="keyword">this</a>.<a href="#615244" title="(x$1: Long)Unit">inConstructorFlag</a> = <a href="#617803" title="Long">saved</a>
      <span class="delimiter">}</span>

      <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615275" title="(tree: UnCurry.this.global.Tree)Boolean">isElidable</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#615274" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">elideIntoUnit</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#615369" title="UnCurry.this.global.Tree">tree</a> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="UnCurry.this.global.Tree" id="617804">dd</a> @ DefDef<span class="delimiter">(</span><a title="UnCurry.this.global.Modifiers" id="617813">mods</a>, <a title="UnCurry.this.global.Name" id="617814">name</a>, <a title="List[UnCurry.this.global.TypeDef]" id="617815">tparams</a>, <a title="List[List[UnCurry.this.global.ValDef]]" id="617816">vparamss</a>, <a title="UnCurry.this.global.Tree" id="617817">tpt</a>, <a title="UnCurry.this.global.Tree" id="617818">rhs</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#617804" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> <a href="../../../reflect/internal/AnnotationInfos.scala.html#46228" title="(cls: UnCurry.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../../reflect/internal/Definitions.scala.html#46693" title="=&gt; UnCurry.this.global.Symbol">VarargsClass</a><span class="delimiter">)</span> <a href="#615278" title="(dd: UnCurry.this.global.DefDef)Unit">saveRepeatedParams</a><span class="delimiter">(</span><a href="#617804" title="UnCurry.this.global.DefDef">dd</a><span class="delimiter">)</span>
          <a href="#617674" title="(needLift: Boolean)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withNeedLift</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47802" title="=&gt; Boolean">isClassConstructor</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="TypingTransformers.scala.html#586832" title="(owner: UnCurry.this.global.Symbol)(trans: =&gt; UnCurry.this.global.DefDef)UnCurry.this.global.DefDef">atOwner</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="UnCurry.this.global.Block" id="617841">rhs1</a> = <span class="delimiter">(</span><a href="#617818" title="UnCurry.this.global.Tree">rhs</a>: @<span title="UnCurry.this.global.Tree @unchecked">unchecked</span><span class="delimiter">)</span> <span title="UnCurry.this.global.Block" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="UnCurry.this.global.Block">Block</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Tree]" id="617846">stats</a>, <a title="UnCurry.this.global.Tree" id="617847">expr</a><span class="delimiter">)</span> =&gt;
                    <span class="keyword">def</span> <a title="(stat: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="617848">transformInConstructor</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="617853">stat</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span> =
                      <a href="#617677" title="(inConstructorFlag: Long)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withInConstructorFlag</a><span class="delimiter">(</span><span title="Long(131072L)">INCONSTRUCTOR</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#617853" title="UnCurry.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">}</span>
                    <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="617849">presupers</a> = <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118931" title="(stats: List[UnCurry.this.global.treeInfo.global.Tree])List[UnCurry.this.global.treeInfo.global.ValDef]">preSuperFields</a><span class="delimiter">(</span><a href="#617846" title="List[UnCurry.this.global.Tree]">stats</a><span class="delimiter">)</span> <span title="(f: UnCurry.this.global.treeInfo.global.ValDef =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.treeInfo.global.ValDef],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <a href="#617848" title="(stat: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transformInConstructor</a>
                    <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="617850">rest</a> = <a href="#617846" title="List[UnCurry.this.global.Tree]">stats</a> <span title="(n: Int)List[UnCurry.this.global.Tree]">drop</span> <a href="#617849" title="List[UnCurry.this.global.Tree]">presupers</a>.<span title="=&gt; Int">length</span>
                    <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="617851">supercalls</a> = <a href="#617850" title="List[UnCurry.this.global.Tree]">rest</a> <span title="(n: Int)List[UnCurry.this.global.Tree]">take</span> <span title="Int(1)" class="int">1</span> <span title="(f: UnCurry.this.global.Tree =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <a href="#617848" title="(stat: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transformInConstructor</a>
                    <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="617852">others</a> = <a href="#617850" title="List[UnCurry.this.global.Tree]">rest</a> <span title="(n: Int)List[UnCurry.this.global.Tree]">drop</span> <span title="Int(1)" class="int">1</span> <span title="(f: UnCurry.this.global.Tree =&gt; UnCurry.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.Tree],UnCurry.this.global.Tree,List[UnCurry.this.global.Tree]])List[UnCurry.this.global.Tree]">map</span> <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a>
                    <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</span><span class="delimiter">(</span><a href="#617818" title="UnCurry.this.global.Tree">rhs</a>, <a href="#617849" title="List[UnCurry.this.global.Tree]">presupers</a> <a href="#618004" title="(prefix: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">:::</a> <a href="#617851" title="List[UnCurry.this.global.Tree]">supercalls</a> <a href="#618005" title="(prefix: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">:::</a> <a href="#617852" title="List[UnCurry.this.global.Tree]">others</a>, <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#617847" title="UnCurry.this.global.Tree">expr</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, mods: UnCurry.this.global.Modifiers, name: UnCurry.this.global.Name, tparams: List[UnCurry.this.global.TypeDef], vparamss: List[List[UnCurry.this.global.ValDef]], tpt: UnCurry.this.global.Tree, rhs: UnCurry.this.global.Tree)UnCurry.this.global.DefDef">DefDef</span><span class="delimiter">(</span>
                  <a href="#615369" title="UnCurry.this.global.Tree">tree</a>, <a href="#617813" title="UnCurry.this.global.Modifiers">mods</a>, <a href="#617814" title="UnCurry.this.global.Name">name</a>, <a href="#238622" title="(trees: List[UnCurry.this.global.TypeDef])List[UnCurry.this.global.TypeDef]">transformTypeDefs</a><span class="delimiter">(</span><a href="#617815" title="List[UnCurry.this.global.TypeDef]">tparams</a><span class="delimiter">)</span>,
                  <a href="#238622" title="(treess: List[List[UnCurry.this.global.ValDef]])List[List[UnCurry.this.global.ValDef]]">transformValDefss</a><span class="delimiter">(</span><a href="#617816" title="List[List[UnCurry.this.global.ValDef]]">vparamss</a><span class="delimiter">)</span>, <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#617817" title="UnCurry.this.global.Tree">tpt</a><span class="delimiter">)</span>, <a href="#617841" title="UnCurry.this.global.Block">rhs1</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">ValDef</span><span class="delimiter">(</span>_, _, _, <a title="UnCurry.this.global.Tree" id="618039">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="UnCurry.this.global.Symbol" id="618040">sym</a> = <a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#618040" title="UnCurry.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../reflect/internal/Symbols.scala.html#40013" title="object UnCurry.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Encountered Valdef without symbol: &quot;)" class="string">&quot;Encountered Valdef without symbol: &quot;</span><span title="(x$1: Any)String">+</span> <a href="#615369" title="UnCurry.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; in &quot;)" class="string">&quot; in &quot;</span><span title="(x$1: Any)String">+</span> <a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
          // a local variable that is mutable and free somewhere later should be lifted
          // as lambda lifting (coming later) will wrap 'rhs' in an Ref object.
          <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#618040" title="UnCurry.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; UnCurry.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47780" title="=&gt; Boolean">isSourceMethod</a><span class="delimiter">)</span>
            <a href="#617674" title="(needLift: Boolean)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withNeedLift</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <span class="keyword">else</span>
            <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
/*
        case Apply(Select(Block(List(), Function(vparams, body)), nme.apply), args) =&gt;
          // perform beta-reduction; this helps keep view applications small
          println(&quot;beta-reduce1: &quot;+tree)
          withNeedLift(true) {
            mainTransform(new TreeSubstituter(vparams map (_.symbol), args).transform(body))
          }

        case Apply(Select(Function(vparams, body), nme.apply), args) =&gt;
//        if (List.forall2(vparams, args)((vparam, arg) =&gt; treeInfo.isAffineIn(body) ||
//                                        treeInfo.isExprSafeToInline(arg))) =&gt;
          // perform beta-reduction; this helps keep view applications small
          println(&quot;beta-reduce2: &quot;+tree)
          withNeedLift(true) {
            mainTransform(new TreeSubstituter(vparams map (_.symbol), args).transform(body))
          }
*/
        <span class="keyword">case</span> <span title="UnCurry.this.global.UnApply">UnApply</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618062">fn</a>, <a title="List[UnCurry.this.global.Tree]" id="618063">args</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="618064">fn1</a> = <a href="#615254" title="(value: Boolean)(body: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withInPattern</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#618062" title="UnCurry.this.global.Tree">fn</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree]" id="618065">args1</a> = <a href="#238622" title="(trees: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#618062" title="UnCurry.this.global.Tree">fn</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47883" title="=&gt; UnCurry.this.global.Name">name</a> <span title="List[UnCurry.this.global.Tree]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="List[UnCurry.this.global.Tree]">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60356" title="=&gt; UnCurry.this.global.nme.NameType">unapply</a>    =&gt; <a href="#618063" title="List[UnCurry.this.global.Tree]">args</a>
            <span class="keyword">case</span> <a href="../../../reflect/internal/StdNames.scala.html#40560" title="List[UnCurry.this.global.Tree]">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60358" title="=&gt; UnCurry.this.global.nme.NameType">unapplySeq</a> =&gt; <a href="#615273" title="(pos: UnCurry.this.global.Position, fun: UnCurry.this.global.Symbol, args: List[UnCurry.this.global.Tree], formals: List[UnCurry.this.global.Type])List[UnCurry.this.global.Tree]">transformArgs</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, <a href="#618062" title="UnCurry.this.global.Tree">fn</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>, <a href="#618063" title="List[UnCurry.this.global.Tree]">args</a>, <a href="../Global.scala.html#182936" title="=&gt; Object with scala.tools.nsc.typechecker.Analyzer{val global: UnCurry.this.global.type}">analyzer</a>.<a href="../typechecker/Unapplies.scala.html#184186" title="(tp1: UnCurry.this.global.analyzer.global.Type)List[UnCurry.this.global.analyzer.global.Type]">unapplyTypeListFromReturnTypeSeq</a><span class="delimiter">(</span><a href="#618062" title="UnCurry.this.global.Tree">fn</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Nothing">_</span>              =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;internal error: UnApply node has wrong symbol&quot;)" class="string">&quot;internal error: UnApply node has wrong symbol&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.UnApply">UnApply</span><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>, <a href="#618064" title="UnCurry.this.global.Tree">fn1</a>, <a href="#618065" title="List[UnCurry.this.global.Tree]">args1</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618083">fn</a>, <a title="List[UnCurry.this.global.Tree]" id="618084">args</a><span class="delimiter">)</span> =&gt;
          <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#618083" title="UnCurry.this.global.Tree">fn</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#46623" title="=&gt; UnCurry.this.global.Symbol">Object_synchronized</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#617675" title="(tree: UnCurry.this.global.Tree)Boolean">shouldBeLiftedAnyway</a><span class="delimiter">(</span><a href="#618084" title="List[UnCurry.this.global.Tree]">args</a>.<span title="=&gt; UnCurry.this.global.Tree">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</span><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>, <a href="#618083" title="UnCurry.this.global.Tree">fn</a>, <span title="(xs: UnCurry.this.global.analyzer.global.Tree*)List[UnCurry.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#617676" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.analyzer.global.Tree">liftTree</a><span class="delimiter">(</span><a href="#618084" title="List[UnCurry.this.global.Tree]">args</a>.<span title="=&gt; UnCurry.this.global.Tree">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#617674" title="(needLift: Boolean)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withNeedLift</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="List[UnCurry.this.global.Type]" id="618100">formals</a> = <a href="#618083" title="UnCurry.this.global.Tree">fn</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<a href="../../../reflect/internal/Types.scala.html#42751" title="=&gt; List[UnCurry.this.global.Type]">paramTypes</a>
              <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</span><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>, <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#618083" title="UnCurry.this.global.Tree">fn</a><span class="delimiter">)</span>, <a href="#238622" title="(trees: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#615273" title="(pos: UnCurry.this.global.Position, fun: UnCurry.this.global.Symbol, args: List[UnCurry.this.global.Tree], formals: List[UnCurry.this.global.Type])List[UnCurry.this.global.Tree]">transformArgs</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, <a href="#618083" title="UnCurry.this.global.Tree">fn</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>, <a href="#618084" title="List[UnCurry.this.global.Tree]">args</a>, <a href="#618100" title="List[UnCurry.this.global.Type]">formals</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Assign</span><span class="delimiter">(</span>Select<span class="delimiter">(</span>_, _<span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt;
          <a href="#617674" title="(needLift: Boolean)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withNeedLift</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span> <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618111">lhs</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#618111" title="UnCurry.this.global.Tree">lhs</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47876" title="=&gt; UnCurry.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentMethod</a> <span title="(x: Boolean)Boolean">||</span> <a href="#618111" title="UnCurry.this.global.Tree">lhs</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47905" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span>LAZY <span title="Long(2281701376L)">|</span> ACCESSOR<span class="delimiter">)</span> =&gt;
          <a href="#617674" title="(needLift: Boolean)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withNeedLift</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span> <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Try</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618129">block</a>, <a title="List[UnCurry.this.global.CaseDef]" id="618130">catches</a>, <a title="UnCurry.this.global.Tree" id="618131">finalizer</a><span class="delimiter">)</span> =&gt;
          <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615238" title="=&gt; Boolean">needTryLift</a> <span title="(x: Boolean)Boolean">||</span> <a href="#617675" title="(tree: UnCurry.this.global.Tree)Boolean">shouldBeLiftedAnyway</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#617676" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.analyzer.global.Tree">liftTree</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.CaseDef">CaseDef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618140">pat</a>, <a title="UnCurry.this.global.Tree" id="618141">guard</a>, <a title="UnCurry.this.global.Tree" id="618142">body</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="618143">pat1</a> = <a href="#615254" title="(value: Boolean)(body: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withInPattern</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#618140" title="UnCurry.this.global.Tree">pat</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, pat: UnCurry.this.global.Tree, guard: UnCurry.this.global.Tree, body: UnCurry.this.global.Tree)UnCurry.this.global.CaseDef">CaseDef</span><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>, <a href="#618143" title="UnCurry.this.global.Tree">pat1</a>, <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#618141" title="UnCurry.this.global.Tree">guard</a><span class="delimiter">)</span>, <a href="#615262" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#618142" title="UnCurry.this.global.Tree">body</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <a title="UnCurry.this.global.Tree" id="618155">fun</a> @ Function<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="#615276" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">mainTransform</a><span class="delimiter">(</span><a href="#615272" title="(fun: UnCurry.this.global.Function)UnCurry.this.global.Tree">transformFunction</a><span class="delimiter">(</span><a href="#618155" title="UnCurry.this.global.Function">fun</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Template</span><span class="delimiter">(</span>_, _, _<span class="delimiter">)</span> =&gt;
          <a href="#617677" title="(inConstructorFlag: Long)(f: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">withInConstructorFlag</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span> <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">_</span> =&gt;
          <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="618172">tree1</a> = <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#615263" title="(tree: UnCurry.this.global.Tree)Boolean">isByNameRef</a><span class="delimiter">(</span><a href="#618172" title="UnCurry.this.global.Tree">tree1</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="618176">tree2</a> = <a href="#618172" title="UnCurry.this.global.Tree">tree1</a> <span title="(tp: UnCurry.this.global.Type)tree1.type">setType</span> <a href="../../../reflect/internal/Definitions.scala.html#46555" title="(formals: List[UnCurry.this.global.Type], restpe: UnCurry.this.global.Type)UnCurry.this.global.Type">functionType</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <a href="#618172" title="UnCurry.this.global.Tree">tree1</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span>
            <span title="Nothing" class="keyword">return</span> <span class="delimiter">{</span>
              <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615248" title="=&gt; scala.collection.mutable.HashSet[UnCurry.this.global.Tree]">noApply</a> <span title="(elem: UnCurry.this.global.Tree)Boolean">contains</span> <a href="#618176" title="UnCurry.this.global.Tree">tree2</a><span class="delimiter">)</span> <a href="#618176" title="UnCurry.this.global.Tree">tree2</a>
              <span class="keyword">else</span> <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#618172" title="UnCurry.this.global.Tree">tree1</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#238612" title="(qualifier: UnCurry.this.global.Tree, name: UnCurry.this.global.Name)UnCurry.this.global.Select">Select</a><span class="delimiter">(</span><a href="#618176" title="UnCurry.this.global.Tree">tree2</a>, <a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60160" title="=&gt; UnCurry.this.global.nme.NameType">apply</a><span class="delimiter">)</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#618172" title="UnCurry.this.global.Tree">tree1</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Tree">setType</span> <span class="delimiter">{</span>
      <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>, <a href="#615369" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">tree</a> <span title="(other: String)String">+</span> <span title="String(&quot; tpe is null&quot;)" class="string">&quot; tpe is null&quot;</span><span class="delimiter">)</span>
      <a href="#615264" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurryTreeType</a><span class="delimiter">(</span><a href="#615369" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree" id="615277">postTransform</a><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="615367">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <a href="../../../reflect/internal/SymbolTable.scala.html#36972" title="(ph: scala.reflect.internal.Phase)(op: =&gt; UnCurry.this.global.Tree)UnCurry.this.global.Tree">atPhase</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#36963" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#70378" title="=&gt; scala.reflect.internal.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="()UnCurry.this.global.Tree" id="618235">applyUnary</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="UnCurry.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        // TODO_NMT: verify that the inner tree of a type-apply also gets parens if the
        // whole tree is a polymorphic nullary method application
        <span class="keyword">def</span> <a title="()UnCurry.this.global.Tree" id="618236">removeNullary</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">MethodType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span>           =&gt; <a href="#615367" title="UnCurry.this.global.Tree">tree</a>
          <span class="keyword">case</span> <a title="tree.type" id="618239">tp</a>                         =&gt; <a href="#615367" title="UnCurry.this.global.Tree">tree</a> <span title="(tp: UnCurry.this.global.Type)tree.type">setType</span> <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <a href="#618239" title="UnCurry.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#42743" title="=&gt; UnCurry.this.global.Type">resultType</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47773" title="=&gt; Boolean">isMethod</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#40152" title="UnCurry.this.global.PolyType">PolyType</a><span class="delimiter">]</span><span class="delimiter">)</span>
          <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92627" title="(qual: UnCurry.this.global.gen.global.Tree)UnCurry.this.global.gen.global.Tree">mkApplyIfNeeded</a><span class="delimiter">(</span><a href="#618236" title="()UnCurry.this.global.Tree">removeNullary</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; Boolean">isType</span><span class="delimiter">)</span>
          <a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)UnCurry.this.global.TypeTree">setPos</span> <a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>
        <span class="keyword">else</span>
          <a href="#615367" title="UnCurry.this.global.Tree">tree</a>
      <span class="delimiter">}</span>

      <a href="#615367" title="UnCurry.this.global.Tree">tree</a> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        /* Some uncurry post transformations add members to templates.
         * When inside a template, the following sequence is available:
         * - newMembers
         * Any entry in this sequence will be added into the template
         * once the template transformation has finished.
         *
         * In particular, this case will add:
         * - synthetic Java varargs forwarders for repeated parameters
         */
        <span class="keyword">case</span> <span title="UnCurry.this.global.Template">Template</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Tree]" id="618256">parents</a>, <a title="UnCurry.this.global.ValDef" id="618257">self</a>, <a title="List[UnCurry.this.global.Tree]" id="618258">body</a><span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#586824" title="(x$1: UnCurry.this.global.analyzer.Typer)Unit">localTyper</a> = <a href="../Global.scala.html#182992" title="object UnCurry.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184435" title="(tree: UnCurry.this.global.analyzer.global.Tree, owner: UnCurry.this.global.analyzer.global.Symbol)UnCurry.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>, <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentClass</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="UnCurry.this.global.Template" id="618259">tmpl</a> = <span title="UnCurry.this.global.Template" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../Global.scala.html#183036" title="=&gt; Boolean">forMSIL</a> <span title="(x: Boolean)Boolean">||</span> <a href="../Global.scala.html#183036" title="=&gt; Boolean">forMSIL</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, parents: List[UnCurry.this.global.Tree], self: UnCurry.this.global.ValDef, body: List[UnCurry.this.global.Tree])UnCurry.this.global.Template">Template</span><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>, <a href="#618256" title="List[UnCurry.this.global.Tree]">parents</a>, <a href="#618257" title="UnCurry.this.global.ValDef">self</a>, <a href="#238622" title="(trees: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#615250" title="=&gt; scala.collection.mutable.ArrayBuffer[UnCurry.this.global.Tree]">newMembers</a>.<span title="=&gt; List[UnCurry.this.global.Tree]">toList</span><span class="delimiter">)</span> <a href="#618270" title="(prefix: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">:::</a> <a href="#618258" title="List[UnCurry.this.global.Tree]">body</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#238622" title="UnCurry.this.UnCurryTransformer" class="keyword">super</a>.<a href="TypingTransformers.scala.html#586838" title="(tree: UnCurry.this.global.Tree)UnCurry.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="UnCurry.this.global.Template" class="delimiter">[</span><span title="UnCurry.this.global.Template">Template</span><span class="delimiter">]</span>
          <a href="#615250" title="=&gt; scala.collection.mutable.ArrayBuffer[UnCurry.this.global.Tree]">newMembers</a>.<span title="()Unit">clear</span>
          <a href="#618259" title="UnCurry.this.global.Template">tmpl</a>
        <span class="keyword">case</span> <a title="UnCurry.this.global.DefDef" id="618281">dd</a> @ DefDef<span class="delimiter">(</span><a title="UnCurry.this.global.Modifiers" id="618290">mods</a>, <a title="UnCurry.this.global.Name" id="618291">name</a>, <a title="List[UnCurry.this.global.TypeDef]" id="618292">tparams</a>, <a title="List[List[UnCurry.this.global.ValDef]]" id="618293">vparamss</a>, <a title="UnCurry.this.global.Tree" id="618294">tpt</a>, <a title="UnCurry.this.global.Tree" id="618295">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="UnCurry.this.global.Tree" id="618296">rhs1</a> = <a href="#615266" title="=&gt; scala.collection.mutable.HashMap[UnCurry.this.global.Symbol,UnCurry.this.global.Symbol]">nonLocalReturnKeys</a>.<span title="(key: UnCurry.this.global.Symbol)Option[UnCurry.this.global.Symbol]">get</span><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="UnCurry.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">None</span> =&gt; <a href="#618295" title="UnCurry.this.global.Tree">rhs</a>
            <span class="keyword">case</span> <span title="UnCurry.this.global.analyzer.global.Tree">Some</span><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="618302">k</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: UnCurry.this.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">atPos</a><span class="delimiter">(</span><a href="#618295" title="UnCurry.this.global.Tree">rhs</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#615270" title="(body: UnCurry.this.global.Tree, key: UnCurry.this.global.Symbol, meth: UnCurry.this.global.Symbol)UnCurry.this.global.analyzer.global.Tree">nonLocalReturnTry</a><span class="delimiter">(</span><a href="#618295" title="UnCurry.this.global.Tree">rhs</a>, <a href="#618302" title="UnCurry.this.global.Symbol">k</a>, <a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="UnCurry.this.global.DefDef" id="618297">flatdd</a> = <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, mods: UnCurry.this.global.Modifiers, name: UnCurry.this.global.Name, tparams: List[UnCurry.this.global.TypeDef], vparamss: List[List[UnCurry.this.global.ValDef]], tpt: UnCurry.this.global.Tree, rhs: UnCurry.this.global.Tree)UnCurry.this.global.DefDef">DefDef</span><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>, <a href="#618290" title="UnCurry.this.global.Modifiers">mods</a>, <a href="#618291" title="UnCurry.this.global.Name">name</a>, <a href="#618292" title="List[UnCurry.this.global.TypeDef]">tparams</a>, <span title="(xs: List[UnCurry.this.global.ValDef]*)List[List[UnCurry.this.global.ValDef]]">List</span><span class="delimiter">(</span><a href="#618293" title="List[List[UnCurry.this.global.ValDef]]">vparamss</a>.<span title="(implicit asTraversable: List[UnCurry.this.global.ValDef] =&gt; scala.collection.GenTraversableOnce[UnCurry.this.global.ValDef])List[UnCurry.this.global.ValDef]">flatten</span><span class="delimiter">)</span>, <a href="#618294" title="UnCurry.this.global.Tree">tpt</a>, <a href="#618296" title="UnCurry.this.global.Tree">rhs1</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#618281" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> <a href="../../../reflect/internal/AnnotationInfos.scala.html#46228" title="(cls: UnCurry.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../../reflect/internal/Definitions.scala.html#46693" title="=&gt; UnCurry.this.global.Symbol">VarargsClass</a><span class="delimiter">)</span> <a href="#615279" title="(dd: UnCurry.this.global.DefDef, flatdd: UnCurry.this.global.DefDef, tree: UnCurry.this.global.Tree)Unit">addJavaVarargsForwarders</a><span class="delimiter">(</span><a href="#618281" title="UnCurry.this.global.DefDef">dd</a>, <a href="#618297" title="UnCurry.this.global.DefDef">flatdd</a>, <a href="#615367" title="UnCurry.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#618297" title="UnCurry.this.global.DefDef">flatdd</a>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Try</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618366">body</a>, <a title="List[UnCurry.this.global.CaseDef]" id="618367">catches</a>, <a title="UnCurry.this.global.Tree" id="618368">finalizer</a><span class="delimiter">)</span> =&gt;
          <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#618367" title="List[UnCurry.this.global.CaseDef]">catches</a> <span title="(p: UnCurry.this.global.CaseDef =&gt; Boolean)Boolean">forall</span> <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118952" title="(cdef: UnCurry.this.global.treeInfo.global.CaseDef)Boolean">isCatchCase</a><span class="delimiter">)</span> <a href="#615367" title="UnCurry.this.global.Tree">tree</a>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="UnCurry.this.global.TermName" id="618377">exname</a> = <a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185112" title="(prefix: String)UnCurry.this.global.TermName">freshTermName</a><span class="delimiter">(</span><span title="String(&quot;ex$&quot;)" class="string">&quot;ex$&quot;</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="List[UnCurry.this.global.CaseDef]" id="618378">cases</a> =
              <span title="List[UnCurry.this.global.CaseDef]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#618367" title="List[UnCurry.this.global.CaseDef]">catches</a> <span title="(p: UnCurry.this.global.CaseDef =&gt; Boolean)Boolean">exists</span> <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118949" title="(cdef: UnCurry.this.global.treeInfo.global.CaseDef)Boolean">isDefaultCase</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#618367" title="List[UnCurry.this.global.CaseDef]">catches</a>.<span title="=&gt; UnCurry.this.global.CaseDef">last</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>  // bq: handle try { } catch { ... case ex:Throwable =&gt; ...}
                    <span class="keyword">case</span> <span title="Boolean(true)">CaseDef</span><span class="delimiter">(</span>Typed<span class="delimiter">(</span>Ident<span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>, <a title="UnCurry.this.global.Tree" id="618398">tpt</a><span class="delimiter">)</span>, <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#618398" title="UnCurry.this.global.Tree">tpt</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: UnCurry.this.global.Type)Boolean">=:=</a> <a href="../../../reflect/internal/Definitions.scala.html#46305" title="=&gt; UnCurry.this.global.Symbol">ThrowableClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span> =&gt;
                      <span title="Boolean(true)" class="keyword">true</span>
                    <span class="keyword">case</span> <span title="Boolean(true)">CaseDef</span><span class="delimiter">(</span>Bind<span class="delimiter">(</span>_, Typed<span class="delimiter">(</span>Ident<span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>, <a title="UnCurry.this.global.Tree" id="618417">tpt</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#618417" title="UnCurry.this.global.Tree">tpt</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span> <a href="../../../reflect/internal/Types.scala.html#42799" title="(that: UnCurry.this.global.Type)Boolean">=:=</a> <a href="../../../reflect/internal/Definitions.scala.html#46305" title="=&gt; UnCurry.this.global.Symbol">ThrowableClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span> =&gt;
                      <span title="Boolean(true)" class="keyword">true</span>
                    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt;
                      <span title="Boolean(false)" class="keyword">false</span>
                  <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#618367" title="List[UnCurry.this.global.CaseDef]">catches</a>
              <span class="keyword">else</span> <a href="#618367" title="List[UnCurry.this.global.CaseDef]">catches</a> <span title="(elem: UnCurry.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.CaseDef],UnCurry.this.global.CaseDef,List[UnCurry.this.global.CaseDef]])List[UnCurry.this.global.CaseDef]">:+</span> <a href="#238612" title="(pat: UnCurry.this.global.Tree, guard: UnCurry.this.global.Tree, body: UnCurry.this.global.Tree)UnCurry.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#238612" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>, <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a>, <a href="#238612" title="(expr: UnCurry.this.global.Tree)UnCurry.this.global.Throw">Throw</a><span class="delimiter">(</span><a href="#238612" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#618377" title="UnCurry.this.global.TermName">exname</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="UnCurry.this.global.CaseDef" id="618379">catchall</a> =
              <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: UnCurry.this.global.Position)(tree: UnCurry.this.global.CaseDef)UnCurry.this.global.CaseDef">atPos</a><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#238612" title="(pat: UnCurry.this.global.Tree, guard: UnCurry.this.global.Tree, body: UnCurry.this.global.Tree)UnCurry.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span>
                  <a href="#238612" title="(name: UnCurry.this.global.Name, body: UnCurry.this.global.Tree)UnCurry.this.global.Bind">Bind</a><span class="delimiter">(</span><a href="#618377" title="UnCurry.this.global.TermName">exname</a>, <a href="#238612" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#40560" title="object UnCurry.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#60627" title="=&gt; UnCurry.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="#238612" title="object UnCurry.this.global.EmptyTree">EmptyTree</a>,
                  <a href="#238612" title="(selector: UnCurry.this.global.Tree, cases: List[UnCurry.this.global.CaseDef])UnCurry.this.global.Match">Match</a><span class="delimiter">(</span><a href="#238612" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#618377" title="UnCurry.this.global.TermName">exname</a><span class="delimiter">)</span>, <a href="#618378" title="List[UnCurry.this.global.CaseDef]">cases</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;rewrote try: &quot;)" class="string">&quot;rewrote try: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#618367" title="List[UnCurry.this.global.CaseDef]">catches</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; ==&gt; &quot;)" class="string">&quot; ==&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#618379" title="UnCurry.this.global.CaseDef">catchall</a><span class="delimiter">)</span>;
            <span class="keyword">val</span> <a title="List[UnCurry.this.global.analyzer.global.CaseDef]" id="618380">catches1</a> = <a href="TypingTransformers.scala.html#586823" title="=&gt; UnCurry.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#184400" title="(tree: UnCurry.this.global.analyzer.global.Tree, cases: List[UnCurry.this.global.analyzer.global.CaseDef], pattp: UnCurry.this.global.analyzer.global.Type, pt: UnCurry.this.global.analyzer.global.Type)List[UnCurry.this.global.analyzer.global.CaseDef]">typedCases</a><span class="delimiter">(</span>
              <a href="#615367" title="UnCurry.this.global.Tree">tree</a>, <span title="(xs: UnCurry.this.global.CaseDef*)List[UnCurry.this.global.CaseDef]">List</span><span class="delimiter">(</span><a href="#618379" title="UnCurry.this.global.CaseDef">catchall</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46305" title="=&gt; UnCurry.this.global.Symbol">ThrowableClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>, <a href="../../../reflect/internal/Types.scala.html#40092" title="object UnCurry.this.global.WildcardType">WildcardType</a><span class="delimiter">)</span>
            <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, block: UnCurry.this.global.Tree, catches: List[UnCurry.this.global.CaseDef], finalizer: UnCurry.this.global.Tree)UnCurry.this.global.Try">Try</span><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>, <a href="#618366" title="UnCurry.this.global.Tree">body</a>, <a href="#618380" title="List[UnCurry.this.global.analyzer.global.CaseDef]">catches1</a>, <a href="#618368" title="UnCurry.this.global.Tree">finalizer</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Apply">Apply</span><span class="delimiter">(</span>Apply<span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618581">fn</a>, <a title="List[UnCurry.this.global.Tree]" id="618582">args</a><span class="delimiter">)</span>, <a title="List[UnCurry.this.global.Tree]" id="618583">args1</a><span class="delimiter">)</span> =&gt;
          <a href="#238622" title="=&gt; UnCurry.this.global.TreeCopier">treeCopy</a>.<span title="(tree: UnCurry.this.global.Tree, fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</span><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>, <a href="#618581" title="UnCurry.this.global.Tree">fn</a>, <a href="#618582" title="List[UnCurry.this.global.Tree]">args</a> <a href="#618584" title="(prefix: List[UnCurry.this.global.Tree])List[UnCurry.this.global.Tree]">:::</a> <a href="#618583" title="List[UnCurry.this.global.Tree]">args1</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Ident</span><span class="delimiter">(</span><a title="UnCurry.this.global.Name" id="618595">name</a><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#618595" title="UnCurry.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/StdNames.scala.html#40550" title="object UnCurry.this.global.tpnme">tpnme</a>.<a href="../../../reflect/internal/StdNames.scala.html#67899" title="=&gt; UnCurry.this.global.tpnme.NameType">WILDCARD_STAR</a><span class="delimiter">)</span>
          <a href="#618235" title="()UnCurry.this.global.Tree">applyUnary</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> | TypeApply<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="#618235" title="()UnCurry.this.global.Tree">applyUnary</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.analyzer.global.Tree">Return</span><span class="delimiter">(</span><a title="UnCurry.this.global.Tree" id="618609">expr</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47976" title="=&gt; UnCurry.this.global.Symbol">enclMethod</a> <span title="(x: Boolean)Boolean">||</span> <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/HasFlags.scala.html#48081" title="=&gt; Boolean">isLazy</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#182894" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;non local return in &quot;)" class="string">&quot;non local return in &quot;</span><span title="(x$1: Any)String">+</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span title="(x$1: Any)String">+</span><span title="String(&quot; from &quot;)" class="string">&quot; from &quot;</span><span title="(x$1: Any)String">+</span><a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#47976" title="=&gt; UnCurry.this.global.Symbol">enclMethod</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Trees.scala.html#40635" title="(pos: UnCurry.this.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">atPos</a><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#615269" title="(expr: UnCurry.this.global.Tree, meth: UnCurry.this.global.Symbol)UnCurry.this.global.analyzer.global.Tree">nonLocalReturnThrow</a><span class="delimiter">(</span><a href="#618609" title="UnCurry.this.global.Tree">expr</a>, <a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">TypeTree</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
          <a href="#615367" title="UnCurry.this.global.Tree">tree</a>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Tree">_</span> =&gt;
          <span title="UnCurry.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; Boolean">isType</span><span class="delimiter">)</span> <a href="#238612" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Type">tpe</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)UnCurry.this.global.TypeTree">setPos</span> <a href="#615367" title="UnCurry.this.global.Tree">tree</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span> <span class="keyword">else</span> <a href="#615367" title="UnCurry.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /* Analyzes repeated params if method is annotated as `varargs`.
     * If the repeated params exist, it saves them into the `repeatedParams` map,
     * which is used later.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dd: UnCurry.this.global.DefDef)Unit" id="615278">saveRepeatedParams</a><span class="delimiter">(</span><a title="UnCurry.this.global.DefDef" id="617820">dd</a>: <span title="UnCurry.this.global.DefDef">DefDef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#617820" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47804" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span>
        <a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: UnCurry.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#617820" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; UnCurry.this.global.Position">pos</a>, <span title="String(&quot;A constructor cannot be annotated with a `varargs` annotation.&quot;)" class="string">&quot;A constructor cannot be annotated with a `varargs` annotation.&quot;</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="../ast/Trees.scala.html#183119" title="object UnCurry.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#118936" title="(tree: UnCurry.this.global.treeInfo.global.Tree)List[UnCurry.this.global.treeInfo.global.ValDef]">repeatedParams</a><span class="delimiter">(</span><a href="#617820" title="UnCurry.this.global.DefDef">dd</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">Nil</span>  =&gt;
          <a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: UnCurry.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#617820" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; UnCurry.this.global.Position">pos</a>, <span title="String(&quot;A method without repeated parameters cannot be annotated with the `varargs` annotation.&quot;)" class="string">&quot;A method without repeated parameters cannot be annotated with the `varargs` annotation.&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="618632">reps</a> =&gt;
          <a href="#615252" title="(key: UnCurry.this.global.Symbol, value: List[UnCurry.this.global.ValDef])Unit">repeatedParams</a><span class="delimiter">(</span><a href="#617820" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span> = <a href="#618632" title="List[UnCurry.this.global.treeInfo.global.ValDef]">reps</a>
      <span class="delimiter">}</span>

    /* Called during post transform, after the method argument lists have been flattened.
     * It looks for the method in the `repeatedParams` map, and generates a Java-style
     * varargs forwarder. It then adds the forwarder to the `newMembers` sequence.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dd: UnCurry.this.global.DefDef, flatdd: UnCurry.this.global.DefDef, tree: UnCurry.this.global.Tree)Unit" id="615279">addJavaVarargsForwarders</a><span class="delimiter">(</span><a title="UnCurry.this.global.DefDef" id="618359">dd</a>: <span title="UnCurry.this.global.DefDef">DefDef</span>, <a title="UnCurry.this.global.DefDef" id="618360">flatdd</a>: <span title="UnCurry.this.global.DefDef">DefDef</span>, <a title="UnCurry.this.global.Tree" id="618361">tree</a>: <span title="UnCurry.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#615252" title="=&gt; scala.collection.mutable.Map[UnCurry.this.global.Symbol,List[UnCurry.this.global.ValDef]]">repeatedParams</a>.<span title="(key: UnCurry.this.global.Symbol)Boolean">contains</span><span class="delimiter">(</span><a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span>

      <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="618635">toSeqType</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="618650">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="618651">arg</a> = <a href="../../../reflect/internal/Definitions.scala.html#46559" title="(container: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type">elementType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; UnCurry.this.global.Symbol">ArrayClass</a>, <a href="#618650" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
        <a href="../../../reflect/internal/Definitions.scala.html#46560" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">seqType</a><span class="delimiter">(</span><a href="#618651" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="618636">toArrayType</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="618655">tp</a>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="618656">arg</a> = <a href="../../../reflect/internal/Definitions.scala.html#46559" title="(container: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type">elementType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46420" title="=&gt; UnCurry.this.global.Symbol">SeqClass</a>, <a href="#618655" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
        // to prevent generation of an `Object` parameter from `Array[T]` parameter later
        // as this would crash the Java compiler which expects an `Object[]` array for varargs
        //   e.g.        def foo[T](a: Int, b: T*)
        //   becomes     def foo[T](a: Int, b: Array[Object])
        //   instead of  def foo[T](a: Int, b: Array[T]) ===&gt; def foo[T](a: Int, b: Object)
        <a href="../../../reflect/internal/Definitions.scala.html#46561" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span>
          <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#618656" title="UnCurry.this.global.Type">arg</a>.<a href="../../../reflect/internal/Types.scala.html#42728" title="=&gt; UnCurry.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#47809" title="=&gt; Boolean">isTypeParameterOrSkolem</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#46278" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>
          <span class="keyword">else</span> <a href="#618656" title="UnCurry.this.global.Type">arg</a>
        <span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="List[UnCurry.this.global.ValDef]" id="618637">reps</a>          = <a href="#615252" title="(key: UnCurry.this.global.Symbol)List[UnCurry.this.global.ValDef]">repeatedParams</a><span class="delimiter">(</span><a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[UnCurry.this.global.Symbol]" id="618638">rpsymbols</a>     = <a href="#618637" title="List[UnCurry.this.global.ValDef]">reps</a>.<span title="(f: UnCurry.this.global.ValDef =&gt; UnCurry.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.ValDef],UnCurry.this.global.Symbol,List[UnCurry.this.global.Symbol]])List[UnCurry.this.global.Symbol]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,UnCurry.this.global.Symbol,List[UnCurry.this.global.Symbol]]" class="delimiter">(</span><a href="#618696" title="UnCurry.this.global.ValDef">_</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[UnCurry.this.global.Symbol]">toSet</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.analyzer.Typer" id="618639">theTyper</a>      = <a href="../Global.scala.html#182992" title="object UnCurry.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#184435" title="(tree: UnCurry.this.global.analyzer.global.Tree, owner: UnCurry.this.global.analyzer.global.Symbol)UnCurry.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#618361" title="UnCurry.this.global.Tree">tree</a>, <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentClass</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[UnCurry.this.global.ValDef]" id="618640">flatparams</a>    = <a href="#618360" title="UnCurry.this.global.DefDef">flatdd</a>.<span title="=&gt; List[List[UnCurry.this.global.ValDef]]">vparamss</span>.<span title="=&gt; List[UnCurry.this.global.ValDef]">head</span>

      // create the type
      <span class="keyword">val</span> <a title="List[UnCurry.this.global.Type]" id="618641">forwformals</a> = <a href="#618640" title="List[UnCurry.this.global.ValDef]">flatparams</a> <span title="(f: UnCurry.this.global.ValDef =&gt; UnCurry.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[UnCurry.this.global.ValDef],UnCurry.this.global.Type,List[UnCurry.this.global.Type]])List[UnCurry.this.global.Type]">map</span> <a href="#618751" title="UnCurry.this.global.Type" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="UnCurry.this.global.Type" id="618752">p</a> <span class="keyword">if</span> <a href="#618638" title="(elem: UnCurry.this.global.Symbol)Boolean">rpsymbols</a><span class="delimiter">(</span><a href="#618752" title="UnCurry.this.global.ValDef">p</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt; <a href="#618636" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">toArrayType</a><span class="delimiter">(</span><a href="#618752" title="UnCurry.this.global.ValDef">p</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="UnCurry.this.global.Type" id="618773">p</a>                        =&gt; <a href="#618773" title="UnCurry.this.global.ValDef">p</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="618642">forwresult</a> = <a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#42747" title="=&gt; UnCurry.this.global.Type">finalResultType</a>
      <span class="keyword">val</span> <a title="List[UnCurry.this.global.TermSymbol]" id="618643">forwformsyms</a> = <a href="../../../reflect/internal/util/Collections.scala.html#39578" title="(xs1: List[UnCurry.this.global.Type], xs2: List[UnCurry.this.global.ValDef])(f: (UnCurry.this.global.Type, UnCurry.this.global.ValDef) =&gt; UnCurry.this.global.TermSymbol)List[UnCurry.this.global.TermSymbol]">map2</a><span class="delimiter">(</span><a href="#618641" title="List[UnCurry.this.global.Type]">forwformals</a>, <a href="#618640" title="List[UnCurry.this.global.ValDef]">flatparams</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="618837">tp</a>, <a title="UnCurry.this.global.ValDef" id="618838">oldparam</a><span class="delimiter">)</span> =&gt;
        <a href="#238622" title="UnCurry.this.global.Symbol" id="618842">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#112494" title="Long" id="618845">newValueParameter</a><span class="delimiter">(</span><a href="#618838" title="UnCurry.this.global.ValDef">oldparam</a>.<a title="UnCurry.this.global.TermName" id="618843">name</a>, <a href="#618838" title="UnCurry.this.global.ValDef">oldparam</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="UnCurry.this.global.Position" id="618844">pos</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: UnCurry.this.global.Type)UnCurry.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="#618837" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; UnCurry.this.global.MethodType" id="618644">mono</a> = <a href="../../../reflect/internal/Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#618643" title="List[UnCurry.this.global.TermSymbol]">forwformsyms</a>, <a href="#618642" title="UnCurry.this.global.Type">forwresult</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="UnCurry extends UnCurry.this.global.Type with Product with Serializable" id="618645">forwtype</a> = <a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a> <span title="UnCurry extends UnCurry.this.global.Type with Product with Serializable" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.MethodType">MethodType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt; <a href="#618644" title="=&gt; UnCurry.this.global.MethodType">mono</a>
        <span class="keyword">case</span> <span title="UnCurry.this.global.PolyType">PolyType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="618856">tps</a>, _<span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Types.scala.html#67004" title="(typeParams: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.PolyType">PolyType</a><span class="delimiter">(</span><a href="#618856" title="List[UnCurry.this.global.Symbol]">tps</a>, <a href="#618644" title="=&gt; UnCurry.this.global.MethodType">mono</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // create the symbol
      <span class="keyword">val</span> <a title="UnCurry.this.global.MethodSymbol" id="618646">forwsym</a> = <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47702" title="(name: UnCurry.this.global.TermName, pos: UnCurry.this.global.Position, newFlags: Long)UnCurry.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<a href="../../../reflect/internal/Names.scala.html#39643" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: UnCurry.this.global.Name)UnCurry.this.global.TermName">name</a>, <a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span>, VARARGS <span title="Long(8796095119360L)">|</span> SYNTHETIC <span title="(x: Long)Long">|</span> <a href="#618360" title="UnCurry.this.global.DefDef">flatdd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47898" title="=&gt; Long">flags</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#47922" title="(info: UnCurry.this.global.Type)UnCurry.this.global.MethodSymbol">setInfo</a> <a href="#618645" title="UnCurry extends UnCurry.this.global.Type with Product with Serializable">forwtype</a>

      // create the tree
      <span class="keyword">val</span> <a title="UnCurry.this.global.analyzer.global.Tree" id="618647">forwtree</a> = <a href="#618639" title="UnCurry.this.global.analyzer.Typer">theTyper</a>.<a href="../typechecker/Typers.scala.html#184437" title="(pos: UnCurry.this.global.analyzer.global.Position)(tree: UnCurry.this.global.analyzer.global.Tree)UnCurry.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[UnCurry.this.global.Block]" id="619008">locals</a> = <a href="../../../reflect/internal/util/Collections.scala.html#39578" title="(xs1: List[UnCurry.this.global.Symbol], xs2: List[UnCurry.this.global.ValDef])(f: (UnCurry.this.global.Symbol, UnCurry.this.global.ValDef) =&gt; UnCurry.this.global.Block)List[UnCurry.this.global.Block]">map2</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#241255" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: UnCurry.this.global.Symbol)UnCurry.this.CODE.SymbolMethods">forwsym</a> <a href="../ast/TreeDSL.scala.html#275761" title="=&gt; List[UnCurry.this.global.Symbol]">ARGS</a>, <a href="#618640" title="List[UnCurry.this.global.ValDef]">flatparams</a><span class="delimiter">)</span> <a href="#619049" title="UnCurry.this.global.Block" class="delimiter">{</a>
          <span class="keyword">case</span> <span title="Null(null)" class="delimiter">(</span>_, <a title="UnCurry.this.global.ValDef" id="619059">fp</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#618638" title="(elem: UnCurry.this.global.Symbol)Boolean">rpsymbols</a><span class="delimiter">(</span><a href="#619059" title="UnCurry.this.global.ValDef">fp</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt; <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <span title="UnCurry.this.global.Block" class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="619073">argsym</a>, <a title="UnCurry.this.global.ValDef" id="619074">fp</a><span class="delimiter">)</span>                     =&gt;
            <a href="#238612" title="(stats: List[UnCurry.this.global.Tree], expr: UnCurry.this.global.Tree)UnCurry.this.global.Block">Block</a><span class="delimiter">(</span><span title="object Nil">Nil</span>,
              <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92633" title="(tree: UnCurry.this.global.gen.global.Tree, pt: UnCurry.this.global.gen.global.Type)UnCurry.this.global.gen.global.Tree">mkCast</a><span class="delimiter">(</span>
                <a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#235489" title="(tree: UnCurry.this.global.gen.global.Tree, elemtp: UnCurry.this.global.gen.global.Type)UnCurry.this.global.gen.global.Tree">mkWrapArray</a><span class="delimiter">(</span><a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#619073" title="UnCurry.this.global.Symbol">argsym</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#46559" title="(container: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type">elementType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46442" title="=&gt; UnCurry.this.global.Symbol">ArrayClass</a>, <a href="#619073" title="UnCurry.this.global.Symbol">argsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                <a href="../../../reflect/internal/Definitions.scala.html#46560" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">seqType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46559" title="(container: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type">elementType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#46420" title="=&gt; UnCurry.this.global.Symbol">SeqClass</a>, <a href="#619074" title="UnCurry.this.global.ValDef">fp</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>
            <span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[UnCurry.this.global.Tree with Serializable]" id="619009">seqargs</a> = <a href="../../../reflect/internal/util/Collections.scala.html#39578" title="(xs1: List[UnCurry.this.global.Block], xs2: List[UnCurry.this.global.Symbol])(f: (UnCurry.this.global.Block, UnCurry.this.global.Symbol) =&gt; UnCurry.this.global.Tree with Serializable)List[UnCurry.this.global.Tree with Serializable]">map2</a><span class="delimiter">(</span><a href="#619008" title="List[UnCurry.this.global.Block]">locals</a>, <a href="../ast/TreeDSL.scala.html#241255" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: UnCurry.this.global.Symbol)UnCurry.this.CODE.SymbolMethods">forwsym</a> <a href="../ast/TreeDSL.scala.html#275761" title="=&gt; List[UnCurry.this.global.Symbol]">ARGS</a><span class="delimiter">)</span> <a href="#619155" title="UnCurry extends UnCurry.this.global.Tree with Serializable" class="delimiter">{</a>
          <span class="keyword">case</span> <span title="UnCurry.this.global.Ident" class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a title="UnCurry.this.global.Symbol" id="619165">argsym</a><span class="delimiter">)</span> =&gt; <a href="#238612" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#619165" title="UnCurry.this.global.Symbol">argsym</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="UnCurry.this.global.Block" class="delimiter">(</span><a title="UnCurry.this.global.Block" id="619178">l</a>, _<span class="delimiter">)</span>         =&gt; <a href="#619178" title="UnCurry.this.global.Block">l</a>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[UnCurry.this.global.Literal]" id="619010">end</a> = <span title="List[UnCurry.this.global.Literal]" class="keyword">if</span> <span class="delimiter">(</span><a href="#618646" title="UnCurry.this.global.MethodSymbol">forwsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47804" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <span title="(xs: UnCurry.this.global.Literal*)List[UnCurry.this.global.Literal]">List</span><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#241199" title="=&gt; UnCurry.this.global.Literal">UNIT</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="object Nil">Nil</span>

        <a href="../ast/TreeDSL.scala.html#241230" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#618646" title="UnCurry.this.global.MethodSymbol">forwsym</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#275367" title="(rhs: UnCurry.this.global.Tree)UnCurry.this.global.DefDef">===</a> <a href="../ast/TreeDSL.scala.html#241244" title="(xs: UnCurry.this.global.Tree*)UnCurry.this.global.Block">BLOCK</a><span class="delimiter">(</span>
          <a href="#238612" title="(fun: UnCurry.this.global.Tree, args: List[UnCurry.this.global.Tree])UnCurry.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#182860" title="object UnCurry.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92629" title="(sym: UnCurry.this.global.gen.global.Symbol)UnCurry.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="#618360" title="UnCurry.this.global.DefDef">flatdd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span><span class="delimiter">)</span>, <a href="#619009" title="List[UnCurry.this.global.Tree with Serializable]">seqargs</a><span class="delimiter">)</span> <a href="#619221" title="(x: UnCurry.this.global.TermTree with Serializable)List[UnCurry.this.global.TermTree with Serializable]">::</a> <a href="#619010" title="List[UnCurry.this.global.Literal]">end</a> : _*
        <span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // check if the method with that name and those arguments already exists in the template
      <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; UnCurry.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42769" title="(name: UnCurry.this.global.Name)UnCurry.this.global.Symbol">member</a><span class="delimiter">(</span><a href="#618646" title="UnCurry.this.global.MethodSymbol">forwsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#71238" title="=&gt; UnCurry.this.global.TermName">name</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#47967" title="=&gt; List[UnCurry.this.global.Symbol]">alternatives</a>.<span title="(p: UnCurry.this.global.Symbol =&gt; Boolean)Option[UnCurry.this.global.Symbol]">find</span><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="619275">s</a> =&gt; <a href="#619275" title="UnCurry.this.global.Symbol">s</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#618646" title="UnCurry.this.global.MethodSymbol">forwsym</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#619275" title="UnCurry.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#42801" title="(that: UnCurry.this.global.Type)Boolean">matches</a><span class="delimiter">(</span><a href="#618646" title="UnCurry.this.global.MethodSymbol">forwsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="619282">s</a><span class="delimiter">)</span> =&gt; <a href="#615280" title="UnCurry.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#185131" title="(pos: UnCurry.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#618359" title="UnCurry.this.global.DefDef">dd</a>.<span title="=&gt; UnCurry.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#47694" title="=&gt; UnCurry.this.global.Position">pos</a>,
                                   <span title="String(&quot;A method with a varargs annotation produces a forwarder method with the same signature &quot;)" class="string">&quot;A method with a varargs annotation produces a forwarder method with the same signature &quot;</span>
                                   <span title="(x$1: Any)String">+</span> <a href="#619282" title="UnCurry.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; as an existing method.&quot;)" class="string">&quot; as an existing method.&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
          // enter symbol into scope
          <a href="#238622" title="=&gt; UnCurry.this.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#47920" title="=&gt; UnCurry.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#42760" title="=&gt; UnCurry.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#61752" title="(sym: UnCurry.this.global.Symbol)UnCurry.this.global.Symbol">enter</a> <a href="#618646" title="UnCurry.this.global.MethodSymbol">forwsym</a>

          // add the method to `newMembers`
          <a href="#615250" title="=&gt; scala.collection.mutable.ArrayBuffer[UnCurry.this.global.Tree]">newMembers</a> <span title="(elem: UnCurry.this.global.Tree)UnCurryTransformer.this.newMembers.type">+=</span> <a href="#618647" title="UnCurry.this.global.analyzer.global.Tree">forwtree</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>