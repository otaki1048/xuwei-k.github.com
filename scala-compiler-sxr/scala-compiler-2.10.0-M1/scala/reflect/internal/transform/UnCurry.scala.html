<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/internal/transform/UnCurry.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect
<span class="keyword">package</span> internal
<span class="keyword">package</span> transform

<span class="keyword">import</span> <a href="../Flags.scala.html#8666" title="object scala.reflect.internal.Flags">Flags</a>._

<span class="keyword">trait</span> <a title="trait UnCurry extends Object with ScalaObject" id="10529">UnCurry</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="=&gt; scala.reflect.internal.SymbolTable" id="82508">global</a>: <a href="../SymbolTable.scala.html#9073" title="scala.reflect.internal.SymbolTable">SymbolTable</a>
  <span class="keyword">import</span> <a href="#82508" title="=&gt; scala.reflect.internal.SymbolTable">global</a>._
  <span class="keyword">import</span> <a href="../Definitions.scala.html#40473" title="object UnCurry.this.global.definitions">definitions</a>._

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="82511">expandAlias</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162554">tp</a>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> = <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#162554" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#42714" title="=&gt; Boolean">isHigherKinded</a><span class="delimiter">)</span> <a href="#162554" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#42758" title="=&gt; UnCurry.this.global.Type">normalize</a> <span class="keyword">else</span> <a href="#162554" title="UnCurry.this.global.Type">tp</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)Boolean" id="82512">isUnboundedGeneric</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162612">tp</a>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#162612" title="UnCurry.this.global.Type">tp</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Boolean" id="162615">t</a> @ TypeRef<span class="delimiter">(</span>_, <a title="UnCurry.this.global.Symbol" id="162619">sym</a>, _<span class="delimiter">)</span> =&gt; <a href="#162619" title="UnCurry.this.global.Symbol">sym</a>.<a href="../Symbols.scala.html#47760" title="=&gt; Boolean">isAbstractType</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#162615" title="UnCurry.this.global.TypeRef">t</a> <a href="../Types.scala.html#42795" title="(that: UnCurry.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../Definitions.scala.html#46276" title="=&gt; UnCurry.this.global.Symbol">AnyRefClass</a>.<a href="../Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="82513">uncurry</a>: <a href="../Types.scala.html#40242" title="UnCurry.this.global.TypeMap">TypeMap</a> = <a href="#162622" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#40242" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="162622">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="162624">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162629">tp0</a>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      // tp0.typeSymbolDirect.initialize
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="162635">tp</a> = <a href="#82511" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#162629" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#162635" title="UnCurry.this.global.Type">tp</a> <span title="UnCurry.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="162638">params</a>, MethodType<span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="162641">params1</a>, <a title="UnCurry.this.global.Type" id="162642">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#162624" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#162638" title="List[UnCurry.this.global.Symbol]">params</a> <a href="#162648" title="(prefix: List[UnCurry.this.global.Symbol])List[UnCurry.this.global.Symbol]">:::</a> <a href="#162641" title="List[UnCurry.this.global.Symbol]">params1</a>, <a href="#162642" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="162669">params</a>, ExistentialType<span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="162672">tparams</a>, <a title="UnCurry.this.global.MethodType" id="162673">restpe</a> @ MethodType<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="String(&quot;unexpected curried method types with intervening existential&quot;)" class="string">&quot;unexpected curried method types with intervening existential&quot;</span><span class="delimiter">)</span>
          <a href="#162629" title="UnCurry.this.global.Type">tp0</a>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="162688">h</a> :: <a title="List[UnCurry.this.global.Symbol]" id="162689">t</a>, <a title="UnCurry.this.global.Type" id="162690">restpe</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#162688" title="UnCurry.this.global.Symbol">h</a>.<a href="../HasFlags.scala.html#48080" title="=&gt; Boolean">isImplicit</a> =&gt;
          <a href="#162624" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#162688" title="UnCurry.this.global.Symbol">h</a>.<a href="../Symbols.scala.html#47970" title="=&gt; UnCurry.this.global.Symbol">cloneSymbol</a>.<a href="../Symbols.scala.html#47902" title="(mask: Long)UnCurry.this.global.Symbol">resetFlag</a><span class="delimiter">(</span><span title="Long(512L)">IMPLICIT</span><span class="delimiter">)</span> <a href="#162691" title="(x: UnCurry.this.global.Symbol)List[UnCurry.this.global.Symbol]">::</a> <a href="#162689" title="List[UnCurry.this.global.Symbol]">t</a>, <a href="#162690" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">NullaryMethodType</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162705">restpe</a><span class="delimiter">)</span> =&gt;
          <a href="#162624" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#66899" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#162705" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162716">pre</a>, <a href="../Definitions.scala.html#46406" title="=&gt; UnCurry.this.global.Symbol">ByNameParamClass</a>, <a href="#162718" title="(x: List[UnCurry.this.global.Type])Some[List[UnCurry.this.global.Type]]">List</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162740">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#162624" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Definitions.scala.html#46555" title="(formals: List[UnCurry.this.global.Type], restpe: UnCurry.this.global.Type)UnCurry.this.global.Type">functionType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#162740" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162753">pre</a>, <a href="../Definitions.scala.html#46389" title="=&gt; UnCurry.this.global.Symbol">RepeatedParamClass</a>, <a title="List[UnCurry.this.global.Type]" id="162754">args</a><span class="delimiter">)</span> =&gt;
          <a href="#162624" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#40204" title="(tycon: UnCurry.this.global.Type, args: List[UnCurry.this.global.Type])UnCurry.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../Definitions.scala.html#46420" title="=&gt; UnCurry.this.global.Symbol">SeqClass</a>.<a href="../Symbols.scala.html#47937" title="=&gt; UnCurry.this.global.Type">typeConstructor</a>, <a href="#162754" title="List[UnCurry.this.global.Type]">args</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162760">pre</a>, <a href="../Definitions.scala.html#46391" title="=&gt; UnCurry.this.global.Symbol">JavaRepeatedParamClass</a>, <a title="List[UnCurry.this.global.Type]" id="162761">args</a><span class="delimiter">)</span> =&gt;
          <a href="#162624" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Definitions.scala.html#46561" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span>
            <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#82512" title="(tp: UnCurry.this.global.Type)Boolean">isUnboundedGeneric</a><span class="delimiter">(</span><a href="#162761" title="List[UnCurry.this.global.Type]">args</a>.<span title="=&gt; UnCurry.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Definitions.scala.html#46278" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a>.<a href="../Symbols.scala.html#47918" title="=&gt; UnCurry.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#162761" title="List[UnCurry.this.global.Type]">args</a>.<span title="=&gt; UnCurry.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">_</span> =&gt;
          <a href="#82511" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="../Types.scala.html#82353" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#162635" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="82515">uncurryType</a> = <a href="#162544" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#40242" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="162544">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="162546">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="162547">tp0</a>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="162553">tp</a> = <a href="#82511" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#162547" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#162553" title="UnCurry.this.global.Type">tp</a> <span title="UnCurry.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">ClassInfoType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Type]" id="162559">parents</a>, <a title="UnCurry.this.global.Scope" id="162560">decls</a>, <a title="UnCurry.this.global.Symbol" id="162561">clazz</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="List[UnCurry.this.global.Type]" id="162562">parents1</a> = <a href="#162559" title="List[UnCurry.this.global.Type]">parents</a> <span title="(f: UnCurry.this.global.Type =&gt; UnCurry.this.global.Type)List[UnCurry.this.global.Type]">mapConserve</span> <a href="#82513" title="=&gt; UnCurry.this.global.TypeMap">uncurry</a>
          <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#162562" title="List[UnCurry.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#162559" title="List[UnCurry.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#162553" title="UnCurry.this.global.Type">tp</a>
          <span class="keyword">else</span> <a href="../Types.scala.html#71108" title="(parents: List[UnCurry.this.global.Type], decls: UnCurry.this.global.Scope, typeSymbol: UnCurry.this.global.Symbol)UnCurry.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#162562" title="List[UnCurry.this.global.Type]">parents1</a>, <a href="#162560" title="UnCurry.this.global.Scope">decls</a>, <a href="#162561" title="UnCurry.this.global.Symbol">clazz</a><span class="delimiter">)</span> // @MAT normalize in decls??
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">PolyType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="../Types.scala.html#82353" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#162553" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">_</span> =&gt;
          <a href="#162553" title="UnCurry.this.global.Type">tp</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** - return symbol's transformed type,
   *  - if symbol is a def parameter with transformed type T, return () =&gt; T
   *
   * @MAT: starting with this phase, the info of every symbol will be normalized
   */
  <span class="keyword">def</span> <a title="(sym: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="82517">transformInfo</a><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="82668">sym</a>: <a href="../Symbols.scala.html#40001" title="UnCurry.this.global.Symbol">Symbol</a>, <a title="UnCurry.this.global.Type" id="82669">tp</a>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#40083" title="UnCurry.this.global.Type">Type</a> =
    <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#82668" title="UnCurry.this.global.Symbol">sym</a>.<a href="../Symbols.scala.html#47756" title="=&gt; Boolean">isType</a><span class="delimiter">)</span> <a href="../Types.scala.html#82351" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurryType</a><span class="delimiter">(</span><a href="#82669" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../Types.scala.html#82351" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurry</a><span class="delimiter">(</span><a href="#82669" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>