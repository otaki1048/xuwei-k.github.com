<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/Constructors.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*  NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.<a href="../symtab/package.scala.html#34879" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> util.TreeSet

/** This phase converts classes with parameters into Java-like classes with
 *  fields, which are assigned to from constructors.
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Constructors extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="27903">Constructors</a> <a href="#27903" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#28200" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#14381" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#187429" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#39224" title="object Constructors.this.global.definitions">definitions</a>._

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="242917">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;constructors&quot;)" class="string">&quot;constructors&quot;</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: Constructors.this.global.CompilationUnit)Constructors.this.global.Transformer" id="242919">newTransformer</a><span class="delimiter">(</span><a title="Constructors.this.global.CompilationUnit" id="592981">unit</a>: <a href="../CompilationUnits.scala.html#186387" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#186434" title="Constructors.this.global.Transformer">Transformer</a> =
    <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#242924" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#592981" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" id="242920">guardedCtorStats</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" id="242922">ctorParams</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">class</span> <a title="class ConstructorTransformer extends Constructors.this.global.Transformer with ScalaObject" id="242924">ConstructorTransformer</a><a href="#242924" title="ScalaObject" class="delimiter">(</a><a title="Constructors.this.global.CompilationUnit" id="592989">unit</a>: <a href="../CompilationUnits.scala.html#186387" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#186434" title="Constructors.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(impl: Constructors.this.global.Template)Constructors.this.global.Template" id="592987">transformClassTemplate</a><span class="delimiter">(</span><a title="Constructors.this.global.Template" id="592994">impl</a>: <span title="Constructors.this.global.Template">Template</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Template">Template</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="592996">clazz</a> = <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a>  // the transformed class
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="592997">stats</a> = <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">body</span>          // the transformed template body
      <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="592998">localTyper</a> = <a href="../Global.scala.html#186285" title="object Constructors.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#187858" title="(tree: Constructors.this.global.analyzer.global.Tree, owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#592994" title="Constructors.this.global.Template">impl</a>, <a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="592999">specializedFlag</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46608" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#41537" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#58945" title="=&gt; Constructors.this.global.nme.NameType">SPECIALIZED_INSTANCE</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="593000">shouldGuard</a> = <span class="delimiter">(</span><a href="#592999" title="Constructors.this.global.Symbol">specializedFlag</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46593" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span>

      case <span class="keyword">class</span> <a title="class ConstrInfo extends Object with ScalaObject with Product with Serializable" id="595504">ConstrInfo</a><a href="#595504" title="ScalaObject" class="delimiter">(</a>
        <a title="Constructors.this.global.DefDef" id="593219">constr</a>: <span title="Constructors.this.global.DefDef">DefDef</span>,               // The primary constructor
        <a title="List[Constructors.this.global.Symbol]" id="593220">constrParams</a>: <span title="List[Constructors.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>,   // ... and its parameters
        <a title="Constructors.this.global.Block" id="593221">constrBody</a>: <span title="Constructors.this.global.Block">Block</span>             // ... and its body
      <span class="delimiter">)</span>
      // decompose primary constructor into the three entities above.
      <span class="keyword">val</span> <a title="ConstrInfo" id="593004">constrInfo</a>: <a href="#595504" title="ConstrInfo">ConstrInfo</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Option[Constructors.this.global.Tree]" id="593127">primary</a> = <a href="#592997" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <span class="delimiter">(</span><a href="#593138" title="Constructors.this.global.Tree">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46539" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#186183" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#593127" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Boolean">isDefined</span>, <span title="String(&quot;no constructor in template: impl = &quot;)" class="string">&quot;no constructor in template: impl = &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#592994" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="(Constructors.this.global.DefDef, List[Constructors.this.global.ValDef], Constructors.this.global.Block)" id="593129">ddef</a> @ DefDef<span class="delimiter">(</span>_, _, _, <a href="#593166" title="(x: List[List[Constructors.this.global.ValDef]])Some[List[List[Constructors.this.global.ValDef]]]">List</a><span class="delimiter">(</span><a href="#593128" title="List[Constructors.this.global.ValDef]" id="593130">vparams</a><span class="delimiter">)</span>, _, <a href="#593128" title="Constructors.this.global.Block" id="593131">rhs</a> @ Block<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#593127" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Constructors.this.global.Tree">get</span>
        <a href="#595504" title="(constr: Constructors.this.global.DefDef, constrParams: List[Constructors.this.global.Symbol], constrBody: Constructors.this.global.Block)ConstrInfo">ConstrInfo</a><span class="delimiter">(</span><a href="#593129" title="Constructors.this.global.DefDef">ddef</a>, <a href="#593130" title="List[Constructors.this.global.ValDef]">vparams</a> <span title="(f: Constructors.this.global.ValDef =&gt; Constructors.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.ValDef],Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]])List[Constructors.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#593245" title="Constructors.this.global.ValDef">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>, <a href="#593131" title="Constructors.this.global.Block">rhs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">import</span> <a href="#593004" title="ConstrInfo">constrInfo</a>._

      // The parameter accessor fields which are members of the class
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Symbol]" id="593006">paramAccessors</a> = <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46669" title="=&gt; List[Constructors.this.global.Symbol]">constrParamAccessors</a>

      // The constructor parameter corresponding to an accessor
      <span class="keyword">def</span> <a title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="593007">parameter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593284">acc</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> =
        <a href="#593008" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59432" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#593284" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Names.scala.html#38367" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">originalName</a><span class="delimiter">)</span><span class="delimiter">)</span>

      // The constructor parameter with given name. This means the parameter
      // has given name, or starts with given name, and continues with a `$` afterwards.
      <span class="keyword">def</span> <a title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol" id="593008">parameterNamed</a><span class="delimiter">(</span><a title="Constructors.this.global.Name" id="593285">name</a>: <a href="../../../reflect/internal/Names.scala.html#38403" title="Constructors.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(param: Constructors.this.global.Symbol)Boolean" id="593287">matchesName</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593288">param</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#593288" title="Constructors.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#593285" title="Constructors.this.global.Name">name</a> <span title="(x: Boolean)Boolean">||</span> <a href="#593288" title="Constructors.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; Constructors.this.global.Name">name</a>.<a href="../../../reflect/internal/Names.scala.html#52157" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="#593285" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)String">+</span> <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59379" title="=&gt; String">NAME_JOIN_STRING</a><span class="delimiter">)</span>

        <span class="delimiter">(</span><a href="#593220" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a> <span title="(p: Constructors.this.global.Symbol =&gt; Boolean)List[Constructors.this.global.Symbol]">filter</span> <a href="#593287" title="(param: Constructors.this.global.Symbol)Boolean">matchesName</a><span class="delimiter">)</span> <span title="Constructors.this.global.Symbol" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Null">Nil</span>    =&gt; <a href="../Global.scala.html#186183" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#593285" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)String">+</span> <span title="String(&quot; not in &quot;)" class="string">&quot; not in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#593220" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a><span class="delimiter">)</span> ; <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a title="Constructors.this.global.Symbol" id="593318">p</a> :: _ =&gt; <a href="#593318" title="Constructors.this.global.Symbol">p</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a title="Boolean" id="593009">usesSpecializedField</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

      // A transformer for expressions that go into the constructor
      <span class="keyword">val</span> <a title="intoConstructorTransformer extends Constructors.this.global.Transformer" id="593010">intoConstructorTransformer</a> = <a href="#593319" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">new</a> <a href="../ast/Trees.scala.html#186434" title="anonymous class $anon extends Constructors.this.global.Transformer" id="593319">Transformer</a> <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="593321">isParamRef</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593324">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
          <a href="#593324" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#46788" title="=&gt; Boolean">isParamAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <a href="#593324" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <a href="../../../reflect/internal/Symbols.scala.html#46650" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#45080" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#593324" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46483" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#593324" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46670" title="=&gt; Constructors.this.global.Symbol">accessed</a>.<a href="../../../reflect/internal/Symbols.scala.html#46481" title="=&gt; Boolean">isVariable</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><a href="#593324" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46484" title="=&gt; Boolean">isSetter</a>
        <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Constructors.this.global.Symbol)Boolean" id="593322">possiblySpecialized</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593337">s</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../Global.scala.html#186245" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#242611" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#593337" title="Constructors.this.global.Symbol">s</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="593323">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593334">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#593334" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Apply</span><span class="delimiter">(</span>Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a href="#593366" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            // references to parameter accessor methods of own class become references to parameters
            // outer accessors become references to $outer parameter
            <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#593321" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#593322" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92353" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#593007" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46670" title="=&gt; Constructors.this.global.Symbol">accessed</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span> <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46679" title="=&gt; Constructors.this.global.Symbol">outerSource</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46459" title="=&gt; Boolean">isImplClass</a><span class="delimiter">)</span>
              <a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92353" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#593008" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#58935" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span>
              <a href="#593319" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.gen.global.Tree">Select</span><span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#593321" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#593322" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            // references to parameter accessor field of own class become references to parameters
            <a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92353" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#593007" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#186245" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#242611" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
              <a href="#593009" title="Boolean">usesSpecializedField</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#593319" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
            <a href="#593319" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#593334" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // Move tree into constructor, take care of changing owner from `oldowner` to constructor symbol
      <span class="keyword">def</span> <a title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="593011">intoConstructor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593449">oldowner</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="593450">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> =
        <a href="#593010" title="intoConstructorTransformer extends Constructors.this.global.Transformer">intoConstructorTransformer</a> <span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span> <a href="../../../reflect/internal/Trees.scala.html#39359" title="implicit scala.reflect.internal.Trees.treeOps : (tree: Constructors.this.global.Tree)Constructors.this.global.TreeOps">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#58444" title="(pairs: (Constructors.this.global.Symbol, Constructors.this.global.Symbol)*)Constructors.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#593449" title="(x: Constructors.this.global.Symbol)ArrowAssoc[Constructors.this.global.Symbol]">oldowner</a> <span title="(y: Constructors.this.global.Symbol)(Constructors.this.global.Symbol, Constructors.this.global.Symbol)">-&gt;</span> <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>

      // Should tree be moved in front of super constructor call?
      <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="593012">canBeMoved</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593473">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <a href="#593473" title="Constructors.this.global.Tree">tree</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="593483">mods</a>, _, _, _<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#593483" title="Constructors.this.global.Modifiers">mods</a> <a href="../../../reflect/internal/Trees.scala.html#85205" title="(flag: Long)Boolean">hasFlag</a> PRESUPER <span title="Long(137975824384L)">|</span> PARAMACCESSOR<span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span>                     =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>

      // Create an assignment to class field `to` with rhs `from`
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree" id="593013">mkAssign</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593488">to</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="593489">from</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> =
        <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187860" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#593488" title="Constructors.this.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#46379" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../ast/TreeDSL.scala.html#187429" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#593488" title="Constructors.this.global.Symbol">to</a><span class="delimiter">)</span>, <a href="#593489" title="Constructors.this.global.Tree">from</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      // Create code to copy parameter to parameter accessor field.
      // If parameter is $outer, check that it is not null so that we NPE
      // here instead of at some unknown future $outer access.
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree" id="593014">copyParam</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593530">to</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Symbol" id="593531">from</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#187433" title="object Constructors.this.CODE">CODE</a>._
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="593533">result</a> = <a href="#593013" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#593530" title="Constructors.this.global.Symbol">to</a>, <a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#593531" title="Constructors.this.global.Symbol">from</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#593531" title="Constructors.this.global.Symbol">from</a>.<a href="../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#58935" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span> <a href="#593533" title="Constructors.this.global.Tree">result</a>
        <span class="keyword">else</span> <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187860" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#593530" title="Constructors.this.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#46379" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../ast/TreeDSL.scala.html#244834" title="(tree: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">IF</a> <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#244846" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSymbol : (target: Constructors.this.global.Symbol)Constructors.this.CODE.TreeMethods">from</a> <a href="../ast/TreeDSL.scala.html#284869" title="(other: Constructors.this.global.Tree)Constructors.this.global.Apply">OBJ_EQ</a> <a href="../ast/TreeDSL.scala.html#244790" title="=&gt; Constructors.this.global.Literal">NULL</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#284832" title="(x: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">THEN</a> <a href="../ast/TreeDSL.scala.html#244816" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Throw">THROW</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#45010" title="=&gt; Constructors.this.global.Symbol">NullPointerExceptionClass</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#284833" title="(elsep: Constructors.this.global.Tree)Constructors.this.global.If">ELSE</a> <a href="#593533" title="Constructors.this.global.Tree">result</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // The list of definitions that go into class
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="593015">defBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The auxiliary constructors, separate from the defBuf since they should
      // follow the primary constructor
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="593016">auxConstructorBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The list of statements that go into constructor after and including the superclass constructor call
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="593017">constrStatBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The list of early initializer statements that go into constructor before the superclass constructor call
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="593018">constrPrefixBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      // The early initialized field definitions of the class (these are the class members)
      <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.global.ValDef]" id="593019">presupers</a> = <a href="../ast/Trees.scala.html#186424" title="object Constructors.this.global.treeInfo">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#120080" title="(stats: List[Constructors.this.global.treeInfo.global.Tree])List[Constructors.this.global.treeInfo.global.ValDef]">preSuperFields</a><span class="delimiter">(</span><a href="#592997" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

      // generate code to copy pre-initialized fields
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593590">stat</a> &lt;- <a href="#593221" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#593017" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#593590" title="Constructors.this.global.Tree">stat</a>
        <a href="#593590" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="593606">mods</a>, <a title="Constructors.this.global.TermName" id="593607">name</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#593606" title="Constructors.this.global.Modifiers">mods</a> <a href="../../../reflect/internal/Trees.scala.html#85205" title="(flag: Long)Boolean">hasFlag</a> <span title="Long(137438953472L)">PRESUPER</span><span class="delimiter">)</span> =&gt;
            // stat is the constructor-local definition of the field value
            <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.global.ValDef]" id="593608">fields</a> = <a href="#593019" title="List[Constructors.this.global.treeInfo.global.ValDef]">presupers</a> <span title="(p: Constructors.this.global.treeInfo.global.ValDef =&gt; Boolean)List[Constructors.this.global.treeInfo.global.ValDef]">filter</span> <span class="delimiter">(</span>
              <a title="Constructors.this.global.treeInfo.global.ValDef" id="593613">vdef</a> =&gt; <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59435" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#593613" title="Constructors.this.global.treeInfo.global.ValDef">vdef</a>.<span title="=&gt; Constructors.this.global.treeInfo.global.TermName">name</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#593607" title="Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
            <a href="../Global.scala.html#186184" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#593608" title="List[Constructors.this.global.treeInfo.global.ValDef]">fields</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.treeInfo.global.Symbol" id="593609">to</a> = <a href="#593608" title="List[Constructors.this.global.treeInfo.global.ValDef]">fields</a>.<span title="=&gt; Constructors.this.global.treeInfo.global.ValDef">head</span>.<span title="=&gt; Constructors.this.global.treeInfo.global.Symbol">symbol</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#593609" title="Constructors.this.global.treeInfo.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.treeInfo.global.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#38860" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span>
              <a href="#593017" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#593013" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#593609" title="Constructors.this.global.treeInfo.global.Symbol">to</a>, <a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#593590" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // Triage all template definitions to go into defBuf/auxConstructorBuf, constrStatBuf, or constrPrefixBuf.
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593675">stat</a> &lt;- <a href="#592997" title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</a><span class="delimiter">)</span> <a href="#593675" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Any">DefDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="593684">mods</a>, <a title="Constructors.this.global.Name" id="593685">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="593686">tparams</a>, <a title="List[List[Constructors.this.global.ValDef]]" id="593687">vparamss</a>, <a title="Constructors.this.global.Tree" id="593688">tpt</a>, <a title="Constructors.this.global.Tree" id="593689">rhs</a><span class="delimiter">)</span> =&gt;
          // methods with constant result type get literals as their body
          // all methods except the primary constructor go into template
          <a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="defBuf.type">MethodType</span><span class="delimiter">(</span><a href="#593693" title="(x: List[Constructors.this.global.Symbol])Some[List[Constructors.this.global.Symbol]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Constructors.this.global.ConstantType" id="593704">tp</a> @ ConstantType<span class="delimiter">(</span><a title="Constructors.this.global.Constant" id="593706">c</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#242924" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</span><span class="delimiter">(</span>
                <a href="#593675" title="Constructors.this.global.Tree">stat</a>, <a href="#593684" title="Constructors.this.global.Modifiers">mods</a>, <a href="#593685" title="Constructors.this.global.Name">name</a>, <a href="#593686" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#593687" title="List[List[Constructors.this.global.ValDef]]">vparamss</a>, <a href="#593688" title="Constructors.this.global.Tree">tpt</a>,
                <a href="../ast/TreeDSL.scala.html#187429" title="(value: Constructors.this.global.Constant)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#593706" title="Constructors.this.global.Constant">c</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.Literal">setPos</span> <a href="#593689" title="Constructors.this.global.Tree">rhs</a>.<span title="=&gt; Constructors.this.global.Position">pos</span> <span title="(tp: Constructors.this.global.Type)Constructors.this.global.Literal">setType</span> <a href="#593704" title="Constructors.this.global.ConstantType">tp</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Any">_</span> =&gt;
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46539" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46492" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <a href="#593016" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a> <span title="(x: Constructors.this.global.Tree)auxConstructorBuf.type">+=</span> <a href="#593675" title="Constructors.this.global.Tree">stat</a>
              <span class="keyword">else</span> <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#593675" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="593760">mods</a>, <a title="Constructors.this.global.TermName" id="593761">name</a>, <a title="Constructors.this.global.Tree" id="593762">tpt</a>, <a title="Constructors.this.global.Tree" id="593763">rhs</a><span class="delimiter">)</span> =&gt;
          // val defs with constant right-hand sides are eliminated.
          // for all other val defs, an empty valdef goes into the template and
          // the initializer goes as an assignment into the constructor
          // if the val def is an early initialized or a parameter accessor, it goes
          // before the superclass constructor call, otherwise it goes after.
          // Lazy vals don't get the assignment in the constructor.
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#38860" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#593763" title="Constructors.this.global.Tree">rhs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../ast/TreeDSL.scala.html#187429" title="object Constructors.this.global.EmptyTree">EmptyTree</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/HasFlags.scala.html#46779" title="=&gt; Boolean">isLazy</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="593768">rhs1</a> = <a href="#593011" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#593763" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span>;
              <span class="delimiter">(</span><span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#593012" title="(tree: Constructors.this.global.Tree)Boolean">canBeMoved</a><span class="delimiter">(</span><a href="#593675" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#593018" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a> <span class="keyword">else</span> <a href="#593017" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a><span class="delimiter">)</span> <span title="(x: Constructors.this.global.Tree)scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">+=</span> <a href="#593013" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span>
                <a href="#593675" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#593768" title="Constructors.this.global.Tree">rhs1</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#242924" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.ValDef">ValDef</span><span class="delimiter">(</span><a href="#593675" title="Constructors.this.global.Tree">stat</a>, <a href="#593760" title="Constructors.this.global.Modifiers">mods</a>, <a href="#593761" title="Constructors.this.global.TermName">name</a>, <a href="#593762" title="Constructors.this.global.Tree">tpt</a>, <a href="../ast/TreeDSL.scala.html#187429" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="defBuf.type">ClassDef</span><span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          // classes are treated recursively, and left in the template
          <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#242924" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#592989" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>.<a href="#592988" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#593675" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="constrStatBuf.type">_</span> =&gt;
          // all other statements go into the constructor
          <a href="#593017" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#593011" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#593675" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // ----------- avoid making fields for symbols that are not accessed --------------

      // A sorted set of symbols that are known to be accessed outside the primary constructor.
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" id="593020">accessedSyms</a> = <span title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" class="keyword">new</span> <a href="../util/TreeSet.scala.html#33454" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">TreeSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593862">x</a>, <a title="Constructors.this.global.Symbol" id="593863">y</a><span class="delimiter">)</span> =&gt; <a href="#593862" title="Constructors.this.global.Symbol">x</a> <a href="../../../reflect/internal/Symbols.scala.html#46647" title="(that: Constructors.this.global.Symbol)Boolean">isLess</a> <a href="#593863" title="Constructors.this.global.Symbol">y</a><span class="delimiter">)</span>

      // a list of outer accessor symbols and their bodies
      <span class="keyword">var</span> <a title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]" id="593021">outerAccessors</a>: <span title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Symbol, Tree<span class="delimiter">)</span><span class="delimiter">]</span> = List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

      // Could symbol's definition be omitted, provided it is not accessed?
      // This is the case if the symbol is defined in the current class, and
      // ( the symbol is an object private parameter accessor field, or
      //   the symbol is an outer accessor of a final class which does not override another outer accessor. )
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="593022">maybeOmittable</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593872">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#593872" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
        <a href="#593872" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#46788" title="=&gt; Boolean">isParamAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#593872" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#46786" title="=&gt; Boolean">isPrivateLocal</a> <span title="(x: Boolean)Boolean">||</span>
        <a href="#593872" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46532" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#593872" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#46549" title="=&gt; Boolean">isEffectivelyFinal</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#593872" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46704" title="=&gt; Boolean">isOverridingSymbol</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
        <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <a href="../../../reflect/internal/Symbols.scala.html#46650" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#45080" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

      // Is symbol known to be accessed outside of the primary constructor,
      // or is it a symbol whose definition cannot be omitted anyway?
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="593023">mustbeKept</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="593878">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="#593022" title="(sym: Constructors.this.global.Symbol)Boolean">maybeOmittable</a><span class="delimiter">(</span><a href="#593878" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#593020" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../../../reflect/internal/util/Set.scala.html#129812" title="(x: Constructors.this.global.Symbol)Boolean">contains</a> <a href="#593878" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>

      // A traverser to set accessedSyms and outerAccessors
      <span class="keyword">val</span> <a title="Constructors.this.global.Traverser" id="593024">accessTraverser</a> = <a href="#593880" title="Constructors.this.global.Traverser" class="keyword">new</a> <a href="../ast/TreeDSL.scala.html#187429" title="anonymous class $anon extends Constructors.this.global.Traverser" id="593880">Traverser</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Unit" id="593882">traverse</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593883">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#593883" title="Constructors.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">DefDef</span><span class="delimiter">(</span>_, _, _, _, _, <a title="Constructors.this.global.Tree" id="593893">body</a><span class="delimiter">)</span>
            <span class="keyword">if</span> <span class="delimiter">(</span><a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46532" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46549" title="=&gt; Boolean">isEffectivelyFinal</a><span class="delimiter">)</span> =&gt;
              <a href="../Global.scala.html#186199" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;outerAccessors += &quot;)" class="string">&quot;outerAccessors += &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46585" title="=&gt; String">fullName</a><span class="delimiter">)</span>
              <a href="#593021" title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">outerAccessors</a> <span title="(x: (Constructors.this.global.Symbol, Constructors.this.global.Tree))List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">::=</span> <span class="delimiter">(</span><span title="(_1: Constructors.this.global.Symbol, _2: Constructors.this.global.Tree)(Constructors.this.global.Symbol, Constructors.this.global.Tree)" class="delimiter">(</span><a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#593893" title="Constructors.this.global.Tree">body</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#593023" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../Global.scala.html#186199" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;accessedSyms += &quot;)" class="string">&quot;accessedSyms += &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46585" title="=&gt; String">fullName</a><span class="delimiter">)</span>
                <a href="#593020" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../util/TreeSet.scala.html#593856" title="(x: Constructors.this.global.Symbol)Unit">addEntry</a> <a href="#593883" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>
              <span class="delimiter">}</span>
              <a href="#593880" title="Constructors.this.global.Traverser" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#593883" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
              <a href="#593880" title="Constructors.this.global.Traverser" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#593883" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // first traverse all definitions except outeraccesors
      // (outeraccessors are avoided in accessTraverser)
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593961">stat</a> &lt;- <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span> <span title="(f: Constructors.this.global.Tree =&gt; Unit)Unit">++</span> <a href="#593016" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span><span class="delimiter">)</span>
        <a href="#593024" title="Constructors.this.global.Traverser">accessTraverser</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#593961" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>

      // then traverse all bodies of outeraccessors which are accessed themselves
      // note: this relies on the fact that an outer accessor never calls another
      // outer accessor in the same class.
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594002">accSym</a>, <a title="Constructors.this.global.Tree" id="594003">accBody</a><span class="delimiter">)</span> &lt;- <a href="#593021" title="(f: ((Constructors.this.global.Symbol, Constructors.this.global.Tree)) =&gt; Unit)Unit">outerAccessors</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#593023" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#594002" title="Constructors.this.global.Symbol">accSym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#593024" title="Constructors.this.global.Traverser">accessTraverser</a>.<span title="(tree: Constructors.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#594003" title="Constructors.this.global.Tree">accBody</a><span class="delimiter">)</span>

      // Initialize all parameters fields that must be kept.
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="593025">paramInits</a> = <a href="#593006" title="List[Constructors.this.global.Symbol]">paramAccessors</a> <span title="(p: Constructors.this.global.Symbol =&gt; Boolean)List[Constructors.this.global.Symbol]">filter</span> <a href="#593023" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a> <span title="(f: Constructors.this.global.Symbol =&gt; Constructors.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Symbol],Constructors.this.global.Tree,List[Constructors.this.global.Tree]])List[Constructors.this.global.Tree]">map</span> <span class="delimiter">{</span> <a title="Constructors.this.global.Symbol" id="594030">acc</a> =&gt;
        // Check for conflicting symbol amongst parents: see bug #1960.
        // It would be better to mangle the constructor parameter name since
        // it can only be used internally, but I think we need more robust name
        // mangling before we introduce more of it.
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="594031">conflict</a> = <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46608" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#41546" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">nonPrivateMember</a><span class="delimiter">(</span><a href="#594030" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#46654" title="(cond: Constructors.this.global.Symbol =&gt; Boolean)Constructors.this.global.Symbol">filter</a> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594038">s</a> =&gt; <a href="#594038" title="Constructors.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#46483" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#594038" title="Constructors.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#46533" title="=&gt; Boolean">isOuterField</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#594038" title="Constructors.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#46662" title="=&gt; Constructors.this.global.Symbol">enclClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#46451" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594031" title="Constructors.this.global.Symbol">conflict</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
          <a href="#592989" title="Constructors.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#188714" title="(pos: Constructors.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#594030" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Symbols.scala.html#46379" title="=&gt; Constructors.this.global.Position">pos</a>, <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;parameter '%s' requires field but conflicts with %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#594030" title="Constructors.this.global.Symbol">acc</a>.<a href="../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; Constructors.this.global.Name">name</a>, <a href="#594031" title="Constructors.this.global.Symbol">conflict</a>.<a href="../../../reflect/internal/Symbols.scala.html#46745" title="=&gt; String">fullLocationString</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <a href="#593014" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree">copyParam</a><span class="delimiter">(</span><a href="#594030" title="Constructors.this.global.Symbol">acc</a>, <a href="#593007" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#594030" title="Constructors.this.global.Symbol">acc</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      /** Return a single list of statements, merging the generic class constructor with the
       *  specialized stats. The original statements are retyped in the current class, and
       *  assignments to generic fields that have a corresponding specialized assignment in
       *  `specializedStats` are replaced by the specialized assignment.
       */
      <span class="keyword">def</span> <a title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="593026">mergeConstructors</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594072">genericClazz</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a>, <a title="List[Constructors.this.global.Tree]" id="594073">originalStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[Constructors.this.global.Tree]" id="594074">specializedStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="594075">specBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
        <a href="#594075" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])specBuf.type">++=</span> <a href="#594074" title="List[Constructors.this.global.Tree]">specializedStats</a>

        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]" id="594076">specializedAssignFor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594081">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Option[Constructors.this.global.Tree]">Option</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
          <a href="#594074" title="List[Constructors.this.global.Tree]">specializedStats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <a href="#594088" title="Boolean" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="Boolean">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="594091">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="594099">rhs</a><span class="delimiter">)</span> =&gt;
              <span class="delimiter">(</span>    <span class="delimiter">(</span><a href="#594091" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <a href="../../../reflect/internal/Symbols.scala.html#46593" title="(mask: Long)Boolean">hasFlag</a> <span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span>
                <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59429" title="(name: Constructors.this.global.Name)Constructors.this.global.Name">unspecializedName</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59435" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#594091" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Names.scala.html#38367" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59435" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#594081" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Names.scala.html#38367" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>

        /** Rewrite calls to ScalaRunTime.array_update to the proper apply method in scala.Array.
         *  Erasure transforms Array.update to ScalaRunTime.update when the element type is a type
         *  variable, but after specialization this is a concrete primitive type, so it would
         *  be an error to pass it to array_update(.., .., Object).
         */
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="594077">rewriteArrayUpdate</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="594108">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="594109">adapter</a> = <a href="#594110" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#186434" title="anonymous class $anon extends Constructors.this.global.Transformer" id="594110">Transformer</a> <span class="delimiter">{</span>
            <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Constructors.this.global.Tree)Constructors.this.global.Tree" id="594112">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="594113">t</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#594113" title="Constructors.this.global.Tree">t</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="594120">fun</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="594125">receiver</a>, <a title="Constructors.this.global.Name" id="594126">method</a><span class="delimiter">)</span>, <a href="#594128" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="594139">xs</a>, <a title="Constructors.this.global.Tree" id="594140">idx</a>, <a title="Constructors.this.global.Tree" id="594141">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#594120" title="Constructors.this.global.Select">fun</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#45063" title="=&gt; Constructors.this.global.Symbol">arrayUpdateMethod</a> =&gt;
                <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92354" title="(qual: Constructors.this.global.gen.global.Tree, sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedSelect</a><span class="delimiter">(</span><a href="#594139" title="Constructors.this.global.Tree">xs</a>, <a href="../../../reflect/internal/Definitions.scala.html#45063" title="=&gt; Constructors.this.global.Symbol">arrayUpdateMethod</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#594140" title="Constructors.this.global.Tree">idx</a>, <a href="#594141" title="Constructors.this.global.Tree">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#594110" title="Constructors.this.global.Transformer" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#594113" title="Constructors.this.global.Tree">t</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#594109" title="Constructors.this.global.Transformer">adapter</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#594108" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="../Global.scala.html#186199" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;merging: &quot;)" class="string">&quot;merging: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594073" title="List[Constructors.this.global.Tree]">originalStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\nwith\n&quot;)" class="string">&quot;\nwith\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594074" title="List[Constructors.this.global.Tree]">specializedStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]" id="594078">res</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="594281">s</a> &lt;- <a href="#594073" title="(f: Constructors.this.global.Tree =&gt; (Constructors.this.global.Tree, Constructors.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Tree],(Constructors.this.global.Tree, Constructors.this.global.Tree),List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]])List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]">originalStats</a>; <a title="s.type" id="594282">stat</a> = <a href="#594281" title="Constructors.this.global.Tree">s</a>.<span title="=&gt; s.type">duplicate</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
          <a href="../Global.scala.html#186199" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;merge: looking at &quot;)" class="string">&quot;merge: looking at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594282" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="594283">stat1</a> = <a href="#594282" title="Constructors.this.global.Tree">stat</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="594286">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="Constructors.this.global.Name" id="594294">field</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt;
              <a href="#594076" title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]">specializedAssignFor</a><span class="delimiter">(</span><a href="#594286" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="(default: =&gt; Constructors.this.global.Tree)Constructors.this.global.Tree">getOrElse</span><span class="delimiter">(</span><a href="#594282" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#594282" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#594283" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#594282" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#186199" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;replaced &quot;)" class="string">&quot;replaced &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594282" title="Constructors.this.global.Tree">stat</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594283" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            <a href="#594075" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(elem: Constructors.this.global.Tree)specBuf.type">-=</span> <a href="#594283" title="Constructors.this.global.Tree">stat1</a>
          <span class="delimiter">}</span>

          <span title="d.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#594283" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#594282" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#186184" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#242922" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#594072" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#593220" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
            // this is just to make private fields public
            <span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#127177" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" class="keyword">new</a> <a href="../Global.scala.html#186245" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#242640" title="Constructors.this.global.specializeTypes.ImplementationAdapter">ImplementationAdapter</a><span class="delimiter">(</span><a href="#242922" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#594072" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>, <a href="#593220" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#594283" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="594314">stat2</a> = <a href="#594077" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">rewriteArrayUpdate</a><span class="delimiter">(</span><a href="#594283" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            // statements coming from the original class need retyping in the current context
            <a href="../Global.scala.html#186189" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;retyping &quot;)" class="string">&quot;retyping &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594314" title="Constructors.this.global.Tree">stat2</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.specializeTypes.Duplicator" id="594315">d</a> = <span title="Constructors.this.global.specializeTypes.Duplicator" class="keyword">new</span> <a href="../Global.scala.html#186245" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#242639" title="Constructors.this.global.specializeTypes.Duplicator">Duplicator</a>
            <a href="#594315" title="Constructors.this.global.specializeTypes.Duplicator">d</a>.<a href="../typechecker/Duplicators.scala.html#594394" title="(context: d.Context, tree: d.global.Tree, oldThis: d.global.Symbol, newThis: d.global.Symbol, env: scala.collection.Map[d.global.Symbol,d.global.Type])d.global.Tree">retyped</a><span class="delimiter">(</span><a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187744" title="=&gt; Constructors.this.global.analyzer.Context">context1</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="d.Context" class="delimiter">[</span>d.<a href="../typechecker/Contexts.scala.html#187302" title="d.Context">Context</a><span class="delimiter">]</span>,
                      <a href="#594314" title="Constructors.this.global.Tree">stat2</a>,
                      <a href="#594072" title="Constructors.this.global.Symbol">genericClazz</a>,
                      <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>,
                      <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[d.global.Symbol,Nothing]">empty</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#594283" title="Constructors.this.global.Tree">stat1</a>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594075" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;residual specialized constructor statements: &quot;)" class="string">&quot;residual specialized constructor statements: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#594075" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a><span class="delimiter">)</span>
        <a href="#594078" title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]">res</a>
      <span class="delimiter">}</span>

      /** Add an 'if' around the statements coming after the super constructor. This
       *  guard is necessary if the code uses specialized fields. A specialized field is
       *  initialized in the subclass constructor, but the accessors are (already) overridden
       *  and pointing to the (empty) fields. To fix this, a class with specialized fields
       *  will not run its constructor statements if the instance is specialized. The specialized
       *  subclass includes a copy of those constructor statements, and runs them. To flag that a class
       *  has specialized fields, and their initialization should be deferred to the subclass, method
       *  'specInstance$' is added in phase specialize.
       */
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="593027">guardSpecializedInitializer</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="594502">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#186138" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#186666" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">nospecialization</a>.<a href="../settings/MutableSettings.scala.html#187054" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#594502" title="List[Constructors.this.global.Tree]">stats</a> <span class="keyword">else</span> <span class="delimiter">{</span>
        // split the statements in presuper and postsuper
    //    var (prefix, postfix) = stats0.span(tree =&gt; !((tree.symbol ne null) &amp;&amp; tree.symbol.isConstructor))
      //  if (postfix.nonEmpty) {
        //  prefix = prefix :+ postfix.head
          //postfix = postfix.tail
        //}

        <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#593009" title="Boolean">usesSpecializedField</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#593000" title="Boolean">shouldGuard</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#594502" title="List[Constructors.this.global.Tree]">stats</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // save them for duplication in the specialized subclass
          <a href="#242920" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Tree])Unit">guardedCtorStats</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#594502" title="List[Constructors.this.global.Tree]">stats</a>
          <a href="#242922" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Symbol])Unit">ctorParams</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#593220" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>

          <span class="keyword">val</span> <a title="Constructors.this.global.If" id="594506">tree</a> =
            <a href="../ast/TreeDSL.scala.html#187429" title="(cond: Constructors.this.global.Tree, thenp: Constructors.this.global.Tree, elsep: Constructors.this.global.Tree)Constructors.this.global.If">If</a><span class="delimiter">(</span>
              <a href="../ast/TreeDSL.scala.html#187429" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span>
                  <a href="../ast/TreeDSL.scala.html#187429" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92345" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="#592999" title="Constructors.this.global.Symbol">specializedFlag</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../../../reflect/internal/Definitions.scala.html#39224" title="object Constructors.this.global.definitions">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#45453" title="(owner: Constructors.this.global.Symbol, name: Constructors.this.global.Name)Constructors.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#39224" title="object Constructors.this.global.definitions">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#45547" title="=&gt; Constructors.this.global.Symbol">BooleanClass</a>, <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#58724" title="=&gt; Constructors.this.global.TermName">UNARY_!</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#187429" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#594502" title="List[Constructors.this.global.Tree]">stats</a>, <a href="../ast/TreeDSL.scala.html#187429" title="(value: Constructors.this.global.Constant)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#46245" title="(value: Any)Constructors.this.global.Constant">Constant</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#187429" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>

          <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#594506" title="Constructors.this.global.If">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46593" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // add initialization from its generic class constructor
          <span class="keyword">val</span> <a title="Constructors.this.global.Name" id="594620">genericName</a>  = <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59429" title="(name: Constructors.this.global.Name)Constructors.this.global.Name">unspecializedName</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="594621">genericClazz</a> = <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#46608" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#41537" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="#594620" title="Constructors.this.global.Name">genericName</a>.<a href="../../../reflect/internal/Names.scala.html#52127" title="=&gt; Constructors.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>
          <a href="../Global.scala.html#186183" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#594621" title="Constructors.this.global.Symbol">genericClazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a>, <a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>

          <a href="#242920" title="=&gt; scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">guardedCtorStats</a>.<span title="(key: Constructors.this.global.Symbol)Option[List[Constructors.this.global.Tree]]">get</span><span class="delimiter">(</span><a href="#594621" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span> <span title="List[Constructors.this.global.Tree]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">Some</span><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="594632">stats1</a><span class="delimiter">)</span> =&gt; <a href="#593026" title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">mergeConstructors</a><span class="delimiter">(</span><a href="#594621" title="Constructors.this.global.Symbol">genericClazz</a>, <a href="#594632" title="List[Constructors.this.global.Tree]">stats1</a>, <a href="#594502" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">None</span> =&gt; <a href="#594502" title="List[Constructors.this.global.Tree]">stats</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#594502" title="List[Constructors.this.global.Tree]">stats</a>
      <span class="delimiter">}</span>
/*
      def isInitDef(stat: Tree) = stat match {
        case dd: DefDef =&gt; dd.symbol == delayedInitMethod
        case _ =&gt; false
      }
*/

      /** Create a getter or a setter and enter into `clazz` scope
       */
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.Symbol" id="593028">addAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594633">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.TermName" id="594634">name</a>: <a href="../../../reflect/internal/Names.scala.html#38409" title="Constructors.this.global.TermName">TermName</a>, <a title="Long" id="594635">flags</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="594636">m</a> = <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46387" title="(name: Constructors.this.global.TermName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#594634" title="Constructors.this.global.TermName">name</a>, <a href="#594633" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46379" title="=&gt; Constructors.this.global.Position">pos</a>, <a href="#594635" title="Long">flags</a> <span title="(x: Int)Long">&amp;</span> <span title="=&gt; Int">~</span><span class="delimiter">(</span>LOCAL <span title="Int(524292)">|</span> PRIVATE<span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#46601" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.MethodSymbol">setPrivateWithin</a> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>
        <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46608" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#41536" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#60499" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a> <a href="#594636" title="Constructors.this.global.MethodSymbol">m</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="593029">addGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594657">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="594658">getr</a> = <a href="#593028" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.Symbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#594657" title="Constructors.this.global.Symbol">sym</a>, <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59432" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#594657" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Names.scala.html#38367" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Flags.scala.html#38578" title="(fieldFlags: Long)Long">getterFlags</a><span class="delimiter">(</span><a href="#594657" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46586" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#594658" title="Constructors.this.global.Symbol">getr</a> <a href="../../../reflect/internal/Symbols.scala.html#46610" title="(info: Constructors.this.global.Type)getr.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#62346" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#594657" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187860" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#594657" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46379" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#39370" title="(sym: Constructors.this.global.Symbol, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#594658" title="Constructors.this.global.Symbol">getr</a>, <a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#594657" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#594658" title="Constructors.this.global.Symbol">getr</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="593030">addSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594731">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <a href="#594731" title="Constructors.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#46589" title="(mask: Long)sym.type">setFlag</a> <span title="Long(4096L)">MUTABLE</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="594732">setr</a> = <a href="#593028" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.Symbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#594731" title="Constructors.this.global.Symbol">sym</a>, <a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59434" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterToSetter</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/NameManglers.scala.html#59432" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#594731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Names.scala.html#38367" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Flags.scala.html#38579" title="(fieldFlags: Long)Long">setterFlags</a><span class="delimiter">(</span><a href="#594731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46586" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#594732" title="Constructors.this.global.Symbol">setr</a> <a href="../../../reflect/internal/Symbols.scala.html#46610" title="(info: Constructors.this.global.Type)setr.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#62346" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#594732" title="Constructors.this.global.Symbol">setr</a>.<a href="../../../reflect/internal/Symbols.scala.html#46419" title="(argtypes: List[Constructors.this.global.Type])List[Constructors.this.global.Symbol]">newSyntheticValueParams</a><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="#594731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#45531" title="=&gt; Constructors.this.global.Symbol">UnitClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          //util.trace(&quot;adding setter def for &quot;+setr) {
          <a href="../../../reflect/internal/Trees.scala.html#39387" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.DefDef)Constructors.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#594731" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46379" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../reflect/internal/Trees.scala.html#39371" title="(sym: Constructors.this.global.Symbol, rhs: List[List[Constructors.this.global.Symbol]] =&gt; Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#594732" title="Constructors.this.global.Symbol">setr</a>, <a title="List[List[Constructors.this.global.Symbol]]" id="594769">paramss</a> =&gt;
              <a href="../ast/TreeDSL.scala.html#187429" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#594731" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#594769" title="List[List[Constructors.this.global.Symbol]]">paramss</a>.<span title="=&gt; List[Constructors.this.global.Symbol]">head</span>.<span title="=&gt; Constructors.this.global.Symbol">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>//}
        <span class="delimiter">}</span>
        <a href="#594732" title="Constructors.this.global.Symbol">setr</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="593031">ensureAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594814">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Constructors.this.global.Symbol" id="594815">acc</a>: =&gt; Symbol<span class="delimiter">)</span> =
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#594814" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#594814" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46461" title="=&gt; Boolean">isMethod</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#594814" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#46782" title="=&gt; Boolean">isPrivate</a><span class="delimiter">)</span> <span class="delimiter">{</span> // there's an access to a naked field of the enclosing class
          <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="594821">getr</a> = <a href="#594815" title="=&gt; Constructors.this.global.Symbol">acc</a>
          <a href="#594821" title="Constructors.this.global.Symbol">getr</a> <a href="../../../reflect/internal/Symbols.scala.html#46715" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>
          <a href="#594821" title="Constructors.this.global.Symbol">getr</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594814" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46564" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#594814" title="Constructors.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#46715" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>
          <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="593032">ensureGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594829">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#593031" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#594829" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="594830">getr</a> = <a href="#594829" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46708" title="(base: Constructors.this.global.Symbol)Constructors.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#594830" title="Constructors.this.global.Symbol">getr</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#594830" title="Constructors.this.global.Symbol">getr</a> <span class="keyword">else</span> <a href="#593029" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addGetter</a><span class="delimiter">(</span><a href="#594829" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="593033">ensureSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="594836">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#38726" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#593031" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#594836" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="594837">setr</a> = <a href="#594836" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46711" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594837" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#594837" title="Constructors.this.global.Symbol">setr</a> = <a href="#594836" title="Constructors.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#46711" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#594837" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#594837" title="Constructors.this.global.Symbol">setr</a> = <a href="#593030" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addSetter</a><span class="delimiter">(</span><a href="#594836" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <a href="#594837" title="Constructors.this.global.Symbol">setr</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree" id="593034">delayedInitClosure</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="594855">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> =
        <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../../../reflect/internal/Trees.scala.html#39387" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.ClassDef)Constructors.this.global.ClassDef">atPos</a><span class="delimiter">(</span><a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.ClassSymbol" id="594862">closureClass</a>   = <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46422" title="(name: Constructors.this.global.TypeName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.ClassSymbol">newClass</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#59118" title="=&gt; Constructors.this.global.nme.NameType">delayedInitArg</a>.<a href="../../../reflect/internal/Names.scala.html#52658" title="=&gt; Constructors.this.global.TypeName">toTypeName</a>, <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, SYNTHETIC <span title="Long(2097184L)">|</span> FINAL<span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="List[Constructors.this.global.Type]" id="594863">closureParents</a> = <span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#45238" title="(i: Int)Constructors.this.global.Symbol">AbstractFunctionClass</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a>, <a href="../../../reflect/internal/Definitions.scala.html#45016" title="=&gt; Constructors.this.global.Symbol">ScalaObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>

            <a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a> <a href="../../../reflect/internal/Symbols.scala.html#46614" title="(info: Constructors.this.global.Type)closureClass.type">setInfoAndEnter</a> <span title="Constructors.this.global.ClassInfoType" class="keyword">new</span> <a href="../../../reflect/internal/Types.scala.html#38856" title="Constructors.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#594863" title="List[Constructors.this.global.Type]">closureParents</a>, <a href="../../../reflect/internal/Scopes.scala.html#39175" title="()Constructors.this.global.Scope">newScope</a>, <a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.TermSymbol" id="594864">outerField</a> = <span class="delimiter">(</span>
              <a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a>
                <a href="../../../reflect/internal/Symbols.scala.html#46383" title="(name: Constructors.this.global.TermName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#58935" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a>, <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../../../reflect/internal/Flags.scala.html#38467" title="=&gt; Long">PrivateLocal</a> <span title="(x: Int)Long">|</span> <span title="Int(536870912)">PARAMACCESSOR</span><span class="delimiter">)</span>
                <a href="../../../reflect/internal/Symbols.scala.html#46614" title="(info: Constructors.this.global.Type)Constructors.this.global.TermSymbol">setInfoAndEnter</a> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a>
            <span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="594865">applyMethod</a> = <span class="delimiter">(</span>
              <a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a>
                <a href="../../../reflect/internal/Symbols.scala.html#46387" title="(name: Constructors.this.global.TermName, pos: Constructors.this.global.Position, newFlags: Long)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#39313" title="object Constructors.this.global.nme">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#59070" title="=&gt; Constructors.this.global.nme.NameType">apply</a>, <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <span title="Long(32L)">FINAL</span><span class="delimiter">)</span>
                <a href="../../../reflect/internal/Symbols.scala.html#46614" title="(info: Constructors.this.global.Type)Constructors.this.global.MethodSymbol">setInfoAndEnter</a> <a href="../../../reflect/internal/Types.scala.html#62346" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <a href="../../../reflect/internal/Definitions.scala.html#44986" title="=&gt; Constructors.this.global.Symbol">ObjectClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#46606" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.ValDef" id="594866">outerFieldDef</a>     = <a href="../../../reflect/internal/Trees.scala.html#39364" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#594864" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="594867">closureClassTyper</a> = <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187857" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="594868">applyMethodTyper</a>  = <a href="#594867" title="Constructors.this.global.analyzer.Typer">closureClassTyper</a>.<a href="../typechecker/Typers.scala.html#187857" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#594865" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="594869">constrStatTransformer</a> = <a href="#594942" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#186434" title="anonymous class $anon extends Constructors.this.global.Transformer" id="594942">Transformer</a> <span class="delimiter">{</span>
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="594944">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="594945">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#594945" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">This</span><span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#594945" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#592996" title="Constructors.this.global.Symbol">clazz</a> =&gt;
                  <a href="#594868" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                    <a href="../../../reflect/internal/Trees.scala.html#39387" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Select)Constructors.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#594945" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>, <a href="#594864" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
                  <a href="#594942" title="Constructors.this.global.Transformer" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span> <span class="delimiter">{</span>
                    <a href="#594945" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="595002">qual</a>, _<span class="delimiter">)</span> =&gt;
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="595003">getter</a> = <a href="#593032" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureGetter</a><span class="delimiter">(</span><a href="#594945" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#595003" title="Constructors.this.global.Symbol">getter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#594868" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../../../reflect/internal/Trees.scala.html#39387" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#594945" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#187429" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#595002" title="Constructors.this.global.Tree">qual</a>, <a href="#595003" title="Constructors.this.global.Symbol">getter</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#594945" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="595061">lhs</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="595066">qual</a>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="595067">rhs</a><span class="delimiter">)</span> =&gt;
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="595068">setter</a> = <a href="#593033" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureSetter</a><span class="delimiter">(</span><a href="#595061" title="Constructors.this.global.Select">lhs</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#595068" title="Constructors.this.global.Symbol">setter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#594868" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#187859" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../../../reflect/internal/Trees.scala.html#39387" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#594945" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#187429" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#595066" title="Constructors.this.global.Tree">qual</a>, <a href="#595068" title="Constructors.this.global.Symbol">setter</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#595067" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#594945" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
                        <a href="../../../reflect/internal/Trees.scala.html#39359" title="implicit scala.reflect.internal.Trees.treeOps : (tree: Constructors.this.global.Tree)Constructors.this.global.TreeOps">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#58444" title="(pairs: (Constructors.this.global.Symbol, Constructors.this.global.Symbol)*)Constructors.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="(x: Constructors.this.global.Symbol)ArrowAssoc[Constructors.this.global.Symbol]">symbol</span> <span title="(y: Constructors.this.global.MethodSymbol)(Constructors.this.global.Symbol, Constructors.this.global.MethodSymbol)">-&gt;</span> <a href="#594865" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>

            <span class="keyword">def</span> <a title="=&gt; List[Constructors.this.global.Tree]" id="594870">applyMethodStats</a> = <a href="#594869" title="Constructors.this.global.Transformer">constrStatTransformer</a>.<span title="(trees: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">transformTrees</span><span class="delimiter">(</span><a href="#594855" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.DefDef" id="594871">applyMethodDef</a> = <a href="../../../reflect/internal/Trees.scala.html#39368" title="(sym: Constructors.this.global.Symbol, vparamss: List[List[Constructors.this.global.ValDef]], rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
              sym = <a href="#594865" title="Constructors.this.global.MethodSymbol">applyMethod</a>,
              vparamss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              rhs = <a href="../ast/TreeDSL.scala.html#187429" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#594870" title="=&gt; List[Constructors.this.global.Tree]">applyMethodStats</a>, <a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92345" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#45365" title="=&gt; Constructors.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="../ast/Trees.scala.html#186423" title="(sym: Constructors.this.global.Symbol, constrMods: Constructors.this.global.Modifiers, vparamss: List[List[Constructors.this.global.ValDef]], argss: List[List[Constructors.this.global.Tree]], body: List[Constructors.this.global.Tree], superPos: Constructors.this.global.Position)Constructors.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span>
              sym = <a href="#594862" title="Constructors.this.global.ClassSymbol">closureClass</a>,
              constrMods = <a href="../../../reflect/internal/Trees.scala.html#39355" title="(flags: Long)Constructors.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>,
              vparamss = <span title="(xs: List[Constructors.this.global.ValDef]*)List[List[Constructors.this.global.ValDef]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.ValDef*)List[Constructors.this.global.ValDef]">List</span><span class="delimiter">(</span><a href="#594866" title="Constructors.this.global.ValDef">outerFieldDef</a><span class="delimiter">)</span><span class="delimiter">)</span>,
              argss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              body = <span title="(xs: Constructors.this.global.DefDef*)List[Constructors.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="#594871" title="Constructors.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span>,
              superPos = <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree" id="593035">delayedInitCall</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="595279">closure</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <a href="#592998" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#187860" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#186149" title="object Constructors.this.global.gen">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#92339" title="(receiver: Constructors.this.global.gen.global.Tree, method: Constructors.this.global.gen.global.Symbol, targs: List[Constructors.this.global.gen.global.Type], args: List[Constructors.this.global.gen.global.Tree])Constructors.this.global.gen.global.Tree">mkMethodCall</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Definitions.scala.html#45082" title="=&gt; Constructors.this.global.Symbol">delayedInitMethod</a>, <span title="object Nil">Nil</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#39377" title="(sym: Constructors.this.global.Symbol, args: Constructors.this.global.Tree*)Constructors.this.global.Tree">New</a><span class="delimiter">(</span><a href="#595279" title="Constructors.this.global.Tree">closure</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="../ast/TreeDSL.scala.html#187429" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      /** Return a pair consisting of (all statements up to and including superclass and trait constr calls, rest) */
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" id="593036">splitAtSuper</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="595346">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="595347">isConstr</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="595354">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#595354" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#595354" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/Symbols.scala.html#46492" title="=&gt; Boolean">isConstructor</a>
        <span class="keyword">val</span> <a href="#595349" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#595348" title="List[Constructors.this.global.Tree]" id="595349">pre</a>, <a href="#595348" title="List[Constructors.this.global.Tree]" id="595350">rest0</a><span class="delimiter">)</span> = <a href="#595346" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#595347" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#595360" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a href="#595352" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#595351" title="List[Constructors.this.global.Tree]" id="595352">supercalls</a>, <a href="#595351" title="List[Constructors.this.global.Tree]" id="595353">rest</a><span class="delimiter">)</span> = <a href="#595350" title="List[Constructors.this.global.Tree]">rest0</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><a href="#595347" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#595378" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="(_1: List[Constructors.this.global.Tree], _2: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</span><a href="#595349" title="List[Constructors.this.global.Tree]">pre</a> <a href="#595393" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#595352" title="List[Constructors.this.global.Tree]">supercalls</a>, <a href="#595353" title="List[Constructors.this.global.Tree]">rest</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a href="#593038" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#593037" title="List[Constructors.this.global.Tree]" id="593038">uptoSuperStats</a>, <a href="#593037" title="List[Constructors.this.global.Tree]" id="593039">remainingConstrStats</a><span class="delimiter">)</span> = <a href="#593036" title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">splitAtSuper</a><span title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree]) @unchecked" class="delimiter">(</span><a href="#593017" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span><span class="delimiter">)</span>

      /** XXX This is not corect: remainingConstrStats.nonEmpty excludes too much,
       *  but excluding it includes too much.  The constructor sequence being mimicked
       *  needs to be reproduced with total fidelity.
       *
       *  See test case files/run/bug4680.scala, the output of which is wrong in many
       *  particulars.
       */
      <span class="keyword">val</span> <a title="Boolean" id="593040">needsDelayedInit</a> =
        <span class="delimiter">(</span><a href="#592996" title="Constructors.this.global.Symbol">clazz</a> <a href="../../../reflect/internal/Symbols.scala.html#46650" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../../../reflect/internal/Definitions.scala.html#45080" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> /*&amp;&amp; !(defBuf exists isInitDef)*/ <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#593039" title="List[Constructors.this.global.Tree]">remainingConstrStats</a>.<span title="=&gt; Boolean">nonEmpty</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#593040" title="Boolean">needsDelayedInit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="595414">dicl</a> = <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#242924" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#592989" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <a href="#592988" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a> <a href="#593034" title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree">delayedInitClosure</a><span class="delimiter">(</span><a href="#593039" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>
        <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#595414" title="Constructors.this.global.Tree">dicl</a>
        <a href="#593039" title="List[Constructors.this.global.Tree]">remainingConstrStats</a> = <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#593035" title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree">delayedInitCall</a><span class="delimiter">(</span><a href="#595414" title="Constructors.this.global.Tree">dicl</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // Assemble final constructor
      <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#242924" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</span><span class="delimiter">(</span>
        <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>, <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Modifiers">mods</span>, <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Name">name</span>, <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[Constructors.this.global.TypeDef]">tparams</span>, <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[List[Constructors.this.global.ValDef]]">vparamss</span>, <a href="#593219" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Tree">tpt</span>,
        <a href="#242924" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</span><span class="delimiter">(</span>
          <a href="#593221" title="=&gt; Constructors.this.global.Block">constrBody</a>,
          <a href="#593025" title="List[Constructors.this.global.Tree]">paramInits</a> <a href="#595431" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#593018" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <a href="#595432" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#593038" title="List[Constructors.this.global.Tree]">uptoSuperStats</a> <a href="#595433" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a>
            <a href="#593027" title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">guardSpecializedInitializer</a><span class="delimiter">(</span><a href="#593039" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>,
          <a href="#593221" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="=&gt; Constructors.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>;

      // Followed by any auxiliary constructors
      <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])defBuf.type">++=</span> <a href="#593016" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>

      // Unlink all fields that can be dropped from class scope
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="595467">sym</a> &lt;- <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46608" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#41536" title="(f: Constructors.this.global.Symbol =&gt; Unit)Unit">decls</a> ; <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#593023" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#595467" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#592996" title="Constructors.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#46608" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#41536" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#60505" title="(sym: Constructors.this.global.Symbol)Unit">unlink</a> <a href="#595467" title="Constructors.this.global.Symbol">sym</a>

      // Eliminate all field definitions that can be dropped from template
      <a href="#242924" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, parents: List[Constructors.this.global.Tree], self: Constructors.this.global.ValDef, body: List[Constructors.this.global.Tree])Constructors.this.global.Template">Template</span><span class="delimiter">(</span><a href="#592994" title="Constructors.this.global.Template">impl</a>, <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">parents</span>, <a href="#592994" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.ValDef">self</span>,
        <a href="#593015" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)List[Constructors.this.global.Tree]">filter</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="595516">stat</a> =&gt; <a href="#593023" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#595516" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> // transformClassTemplate

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="592988">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="593834">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> =
      <a href="#593834" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="595523">mods</a>, <a title="Constructors.this.global.TypeName" id="595524">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="595525">tparams</a>, <a title="Constructors.this.global.Template" id="595526">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#593834" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../../../reflect/internal/HasFlags.scala.html#46785" title="=&gt; Boolean">isInterface</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../reflect/internal/Definitions.scala.html#45476" title="(sym: Constructors.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#593834" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt;
          <a href="#242924" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<span title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], impl: Constructors.this.global.Template)Constructors.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a href="#593834" title="Constructors.this.global.Tree">tree</a>, <a href="#595523" title="Constructors.this.global.Modifiers">mods</a>, <a href="#595524" title="Constructors.this.global.TypeName">name</a>, <a href="#595525" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#592987" title="(impl: Constructors.this.global.Template)Constructors.this.global.Template">transformClassTemplate</a><span class="delimiter">(</span><a href="#595526" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
          <a href="#242924" title="Constructors.this.ConstructorTransformer" class="keyword">super</a>.<span title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#593834" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span> // ConstructorTransformer
<span class="delimiter">}</span>

        </pre>
    </body>
</html>