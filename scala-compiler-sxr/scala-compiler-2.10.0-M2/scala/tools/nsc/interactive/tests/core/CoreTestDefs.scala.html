<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/tests/core/CoreTestDefs.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive
<span class="keyword">package</span> tests.core

<span class="keyword">import</span> scala.tools.nsc.util.Position
<span class="keyword">import</span> scala.tools.nsc.interactive.tests.core._

/** Set of core test definitions that are executed for each test run. */
<span class="keyword">private</span><span class="delimiter">[</span>tests<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait CoreTestDefs extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerRequestsWorkingMode with ScalaObject" id="21252">CoreTestDefs</a>
	<span title="ScalaObject" class="keyword">extends</span> <a href="PresentationCompilerRequestsWorkingMode.scala.html#21207" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerRequestsWorkingMode">PresentationCompilerRequestsWorkingMode</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> scala.tools.nsc.interactive.Global

  /** Ask the presentation compiler for completion at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class CompletionAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskCompletionAt with ScalaObject" id="454428">CompletionAction</a><a href="#454428" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="454460">compiler</a>: <a href="../../Global.scala.html#20098" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#21249" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#21075" title="scala.tools.nsc.interactive.tests.core.AskCompletionAt">AskCompletionAt</a> <span class="delimiter">{</span>

    <span class="keyword">object</span> <a title="object CompletionAction.this.MemberPrinter" id="454452">MemberPrinter</a> <span title="ScalaObject" class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(member: CompletionAction.this.compiler.Member)String" id="459461">apply</a><span class="delimiter">(</span><a title="CompletionAction.this.compiler.Member" id="459463">member</a>: compiler.<a href="../../CompilerControl.scala.html#254506" title="CompletionAction.this.compiler.Member">Member</a><span class="delimiter">)</span>: <span title="String">String</span> =
        <span title="String(&quot;`&quot;)" class="string">&quot;`&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#459463" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#434407" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#46742" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#459463" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#434408" title="=&gt; CompletionAction.this.compiler.Type">tpe</a>.<a href="../../../../../reflect/internal/Types.scala.html#41589" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`&quot;)" class="string">&quot;`&quot;</span>
    <span class="delimiter">}</span>

    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.tests.core.CompletionMarker.type" id="454454">marker</a> = <a href="TestMarker.scala.html#21271" title="object scala.tools.nsc.interactive.tests.core.CompletionMarker">CompletionMarker</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="454456">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="PresentationCompilerRequestsWorkingMode.scala.html#454413" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]]) =&gt; (((scala.tools.nsc.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit) =&gt; Unit)">askAllSources</a><span title="(v1: scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]])((scala.tools.nsc.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit) =&gt; Unit" class="delimiter">(</span><a href="#454454" title="=&gt; scala.tools.nsc.interactive.tests.core.CompletionMarker.type">marker</a><span class="delimiter">)</span> <span title="(v1: (scala.tools.nsc.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit)Unit" class="delimiter">{</span> <a title="scala.tools.nsc.util.Position" id="459509">pos</a> =&gt;
        <a href="AskCommand.scala.html#454459" title="(pos: scala.tools.nsc.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]]">askCompletionAt</a><a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">(</a><a href="#459509" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="459514">pos</a>, <a title="List[CompletionAction.this.compiler.Member]" id="459515">members</a><span class="delimiter">)</span> =&gt;
        <a href="PresentationCompilerTestDef.scala.html#454446" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
          <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] aksTypeCompletion at &quot;)" class="string">&quot;[response] aksTypeCompletion at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#454447" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#459514" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          // we skip getClass because it changed signature between 1.5 and 1.6, so there is no
          // universal check file that we can provide for this to work
          <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;retrieved %d members&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#459515" title="List[CompletionAction.this.compiler.Member]">members</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#454460" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a> <a href="../../CompilerControl.scala.html#254502" title="(op: () =&gt; Unit)Unit">ask</a> <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="List[CompletionAction.this.compiler.Member]" id="459527">filtered</a> = <a href="#459515" title="List[CompletionAction.this.compiler.Member]">members</a>.<span title="(p: CompletionAction.this.compiler.Member =&gt; Boolean)List[CompletionAction.this.compiler.Member]">filterNot</span><span class="delimiter">(</span><a title="CompletionAction.this.compiler.Member" id="459531">member</a> =&gt; <a href="#459531" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#434407" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; CompletionAction.this.compiler.Name">name</a>.<span title="()String">toString</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;getClass&quot;)" class="string">&quot;getClass&quot;</span> <span title="(x: Boolean)Boolean">||</span> <a href="#459531" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#434407" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#46492" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span>
            <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#459527" title="List[CompletionAction.this.compiler.Member]">filtered</a>.<span title="(f: CompletionAction.this.compiler.Member =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[CompletionAction.this.compiler.Member],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#459461" title="(member: CompletionAction.this.compiler.Member)String">MemberPrinter</a><span class="delimiter">(</span><a href="#459554" title="CompletionAction.this.compiler.Member">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: String =&gt; String)(implicit ord: scala.math.Ordering[String])List[String]">sortBy</span><span title="object scala.math.Ordering.String" class="delimiter">(</span><a href="#459588" title="String">_</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Ask the presentation compiler for type info at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class TypeAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskTypeAt with ScalaObject" id="454429">TypeAction</a><a href="#454429" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="454471">compiler</a>: <a href="../../Global.scala.html#20098" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#21249" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#21294" title="scala.tools.nsc.interactive.tests.core.AskTypeAt">AskTypeAt</a> <span class="delimiter">{</span>

    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.tests.core.TypeMarker.type" id="454465">marker</a> = <a href="TestMarker.scala.html#21175" title="object scala.tools.nsc.interactive.tests.core.TypeMarker">TypeMarker</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="454467">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="PresentationCompilerRequestsWorkingMode.scala.html#454413" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree]) =&gt; (((scala.tools.nsc.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit)">askAllSources</a><span title="(v1: scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree])((scala.tools.nsc.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit" class="delimiter">(</span><a href="#454465" title="=&gt; scala.tools.nsc.interactive.tests.core.TypeMarker.type">marker</a><span class="delimiter">)</span> <span title="(v1: (scala.tools.nsc.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit)Unit" class="delimiter">{</span> <a title="scala.tools.nsc.util.Position" id="459656">pos</a> =&gt;
        <a href="AskCommand.scala.html#454470" title="(pos: scala.tools.nsc.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree]">askTypeAt</a><a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">(</a><a href="#459656" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="459660">pos</a>, <a title="TypeAction.this.compiler.Tree" id="459661">tree</a><span class="delimiter">)</span> =&gt;
        <a href="PresentationCompilerTestDef.scala.html#454446" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
          <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] askTypeAt at &quot;)" class="string">&quot;[response] askTypeAt at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#454447" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#459660" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#454471" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../CompilerControl.scala.html#254502" title="(op: () =&gt; Unit)Unit">ask</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#459661" title="TypeAction.this.compiler.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Ask the presentation compiler for hyperlink at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class HyperlinkAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskTypeAt with scala.tools.nsc.interactive.tests.core.AskCompletionAt with ScalaObject" id="454430">HyperlinkAction</a><a href="#454430" title="ScalaObject" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="454479">compiler</a>: <a href="../../Global.scala.html#20098" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#21249" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#21294" title="scala.tools.nsc.interactive.tests.core.AskTypeAt">AskTypeAt</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#21075" title="scala.tools.nsc.interactive.tests.core.AskCompletionAt">AskCompletionAt</a> <span class="delimiter">{</span>

    <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.tests.core.HyperlinkMarker.type" id="454476">marker</a> = <a href="TestMarker.scala.html#21229" title="object scala.tools.nsc.interactive.tests.core.HyperlinkMarker">HyperlinkMarker</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="454478">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="PresentationCompilerRequestsWorkingMode.scala.html#454413" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree]) =&gt; (((scala.tools.nsc.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit)">askAllSources</a><span title="(v1: scala.tools.nsc.util.Position =&gt; scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree])((scala.tools.nsc.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit" class="delimiter">(</span><a href="#454476" title="=&gt; scala.tools.nsc.interactive.tests.core.HyperlinkMarker.type">marker</a><span class="delimiter">)</span> <span title="(v1: (scala.tools.nsc.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit)Unit" class="delimiter">{</span> <a title="scala.tools.nsc.util.Position" id="459674">pos</a> =&gt;
        <a href="AskCommand.scala.html#454470" title="(pos: scala.tools.nsc.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree]">askTypeAt</a><span class="delimiter">(</span><a href="#459674" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="Reporter.scala.html#21121" title="object scala.tools.nsc.interactive.tests.core.NullReporter">NullReporter</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="459680">pos</a>, <a title="HyperlinkAction.this.compiler.Tree" id="459681">tree</a><span class="delimiter">)</span> =&gt;
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#454479" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#38740" title="=&gt; HyperlinkAction.this.compiler.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;\nNo symbol is associated with tree: &quot;)" class="string">&quot;\nNo symbol is associated with tree: &quot;</span><span title="(x$1: Any)String">+</span><a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;\naskHyperlinkPos for `&quot;)" class="string">&quot;\naskHyperlinkPos for `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; HyperlinkAction.this.compiler.Name">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;` at &quot;)" class="string">&quot;` at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#454447" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#459680" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#459680" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../../util/Position.scala.html#187128" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../../util/SourceFile.scala.html#188728" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../../io/AbstractFile.scala.html#191125" title="=&gt; String">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]" id="459687">r</a> = <span title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]" class="keyword">new</span> <a href="../../Response.scala.html#20581" title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]">Response</a><span class="delimiter">[</span>Position<span class="delimiter">]</span>
          // `tree.symbol.sourceFile` was discovered to be null when testing -Yvirtpatmat on the akka presentation test, where a position had shifted to point to `Int`
          // askHyperlinkPos for `Int` at (73,19) pi.scala --&gt; class Int in package scala has null sourceFile!
          <span class="keyword">val</span> <a title="String" id="459688">treePath</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46719" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46719" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a>.<a href="../../../io/AbstractFile.scala.html#191126" title="=&gt; String">path</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">val</span> <a title="String" id="459689">treeName</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46719" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46719" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a>.<a href="../../../io/AbstractFile.scala.html#191125" title="=&gt; String">name</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">val</span> <a title="Unit" id="459690">sourceFile</a> = <a href="TestResources.scala.html#454408" title="(xs: Array[scala.tools.nsc.util.SourceFile])scala.collection.mutable.ArrayOps[scala.tools.nsc.util.SourceFile]">sourceFiles</a>.<span title="(p: scala.tools.nsc.util.SourceFile =&gt; Boolean)Option[scala.tools.nsc.util.SourceFile]">find</span><span class="delimiter">(</span><a href="#459982" title="scala.tools.nsc.util.SourceFile">_</a>.<a href="../../../util/SourceFile.scala.html#188739" title="=&gt; String">path</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#459688" title="String">treePath</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="scala.tools.nsc.util.SourceFile" id="459989">source</a><span class="delimiter">)</span> =&gt;
              <a href="#454479" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../CompilerControl.scala.html#254490" title="(sym: HyperlinkAction.this.compiler.Symbol, source: scala.tools.nsc.util.SourceFile, response: HyperlinkAction.this.compiler.Response[HyperlinkAction.this.compiler.Position])Unit">askLinkPos</a><span class="delimiter">(</span><a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>, <a href="#459989" title="scala.tools.nsc.util.SourceFile">source</a>, <a href="#459687" title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]">r</a><span class="delimiter">)</span>
              <a href="#459687" title="scala.tools.nsc.interactive.Response[scala.tools.nsc.util.Position]">r</a>.<a href="../../Response.scala.html#254779" title="=&gt; Either[scala.tools.nsc.util.Position,Throwable]">get</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="Unit">Left</span><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="459996">pos</a><span class="delimiter">)</span> =&gt;
                  <a href="PresentationCompilerTestDef.scala.html#454446" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
                    <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] found askHyperlinkPos for `&quot;)" class="string">&quot;[response] found askHyperlinkPos for `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46571" title="=&gt; HyperlinkAction.this.compiler.Name">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;` at &quot;)" class="string">&quot;` at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#454447" title="(pos: scala.tools.nsc.util.Position)String">format</a><span class="delimiter">(</span><a href="#459996" title="scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#459681" title="HyperlinkAction.this.compiler.Tree">tree</a>.<span title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</span>.<a href="../../../../../reflect/internal/Symbols.scala.html#46719" title="=&gt; HyperlinkAction.this.compiler.AbstractFileType">sourceFile</a>.<a href="../../../io/AbstractFile.scala.html#191125" title="=&gt; String">name</a><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> <span title="Unit">Right</span><span class="delimiter">(</span><a title="Throwable" id="459999">ex</a><span class="delimiter">)</span> =&gt;
                  <a href="#459999" title="Throwable">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
              <a href="TestSettings.scala.html#454405" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#454494" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[error] could not locate sourcefile `&quot;)" class="string">&quot;[error] could not locate sourcefile `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#459689" title="String">treeName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`.&quot;)" class="string">&quot;`.&quot;</span> <span title="(x$1: Any)String">+</span>
                <span title="String(&quot;Hint: Does the looked up definition come form a binary?&quot;)" class="string">&quot;Hint: Does the looked up definition come form a binary?&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span title="Unit" class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>