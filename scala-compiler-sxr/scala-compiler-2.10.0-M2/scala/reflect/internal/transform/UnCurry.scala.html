<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/internal/transform/UnCurry.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect
<span class="keyword">package</span> internal
<span class="keyword">package</span> transform

<span class="keyword">import</span> <a href="../Flags.scala.html#8807" title="object scala.reflect.internal.Flags">Flags</a>._

<span class="keyword">trait</span> <a title="trait UnCurry extends Object with ScalaObject" id="10723">UnCurry</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="=&gt; scala.reflect.internal.SymbolTable" id="74919">global</a>: <a href="../SymbolTable.scala.html#8674" title="scala.reflect.internal.SymbolTable">SymbolTable</a>
  <span class="keyword">import</span> <a href="#74919" title="=&gt; scala.reflect.internal.SymbolTable">global</a>._
  <span class="keyword">import</span> <a href="../Definitions.scala.html#39224" title="object UnCurry.this.global.definitions">definitions</a>._

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="74922">expandAlias</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163557">tp</a>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a> = <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#163557" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#41490" title="=&gt; Boolean">isHigherKinded</a><span class="delimiter">)</span> <a href="#163557" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#41534" title="=&gt; UnCurry.this.global.Type">normalize</a> <span class="keyword">else</span> <a href="#163557" title="UnCurry.this.global.Type">tp</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)Boolean" id="74923">isUnboundedGeneric</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163621">tp</a>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#163621" title="UnCurry.this.global.Type">tp</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Boolean" id="163624">t</a> @ TypeRef<span class="delimiter">(</span>_, <a title="UnCurry.this.global.Symbol" id="163628">sym</a>, _<span class="delimiter">)</span> =&gt; <a href="#163628" title="UnCurry.this.global.Symbol">sym</a>.<a href="../Symbols.scala.html#46448" title="=&gt; Boolean">isAbstractType</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#163624" title="UnCurry.this.global.TypeRef">t</a> <a href="../Types.scala.html#41571" title="(that: UnCurry.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../Definitions.scala.html#44984" title="=&gt; UnCurry.this.global.Symbol">AnyRefClass</a>.<a href="../Symbols.scala.html#46606" title="=&gt; UnCurry.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="74924">uncurry</a>: <a href="../Types.scala.html#38980" title="UnCurry.this.global.TypeMap">TypeMap</a> = <a href="#163631" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#38980" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="163631">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="163633">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163638">tp0</a>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      // tp0.typeSymbolDirect.initialize
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="163644">tp</a> = <a href="#74922" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#163638" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#163644" title="UnCurry.this.global.Type">tp</a> <span title="UnCurry.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="163647">params</a>, MethodType<span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="163650">params1</a>, <a title="UnCurry.this.global.Type" id="163651">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#163633" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#62346" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#163647" title="List[UnCurry.this.global.Symbol]">params</a> <a href="#163657" title="(prefix: List[UnCurry.this.global.Symbol])List[UnCurry.this.global.Symbol]">:::</a> <a href="#163650" title="List[UnCurry.this.global.Symbol]">params1</a>, <a href="#163651" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="163678">params</a>, ExistentialType<span class="delimiter">(</span><a title="List[UnCurry.this.global.Symbol]" id="163681">tparams</a>, <a title="UnCurry.this.global.MethodType" id="163682">restpe</a> @ MethodType<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="String(&quot;unexpected curried method types with intervening existential&quot;)" class="string">&quot;unexpected curried method types with intervening existential&quot;</span><span class="delimiter">)</span>
          <a href="#163638" title="UnCurry.this.global.Type">tp0</a>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">MethodType</span><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="163697">h</a> :: <a title="List[UnCurry.this.global.Symbol]" id="163698">t</a>, <a title="UnCurry.this.global.Type" id="163699">restpe</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#163697" title="UnCurry.this.global.Symbol">h</a>.<a href="../HasFlags.scala.html#46778" title="=&gt; Boolean">isImplicit</a> =&gt;
          <a href="#163633" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#62346" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#163697" title="UnCurry.this.global.Symbol">h</a>.<a href="../Symbols.scala.html#46656" title="=&gt; UnCurry.this.global.Symbol">cloneSymbol</a>.<a href="../Symbols.scala.html#46590" title="(mask: Long)UnCurry.this.global.Symbol">resetFlag</a><span class="delimiter">(</span><span title="Long(512L)">IMPLICIT</span><span class="delimiter">)</span> <a href="#163700" title="(x: UnCurry.this.global.Symbol)List[UnCurry.this.global.Symbol]">::</a> <a href="#163698" title="List[UnCurry.this.global.Symbol]">t</a>, <a href="#163699" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">NullaryMethodType</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163717">restpe</a><span class="delimiter">)</span> =&gt;
          <a href="#163633" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#62346" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#163717" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163728">pre</a>, <a href="../Definitions.scala.html#45099" title="=&gt; UnCurry.this.global.Symbol">ByNameParamClass</a>, <a href="#163730" title="(x: List[UnCurry.this.global.Type])Some[List[UnCurry.this.global.Type]]">List</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163752">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#163633" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Definitions.scala.html#45262" title="(formals: List[UnCurry.this.global.Type], restpe: UnCurry.this.global.Type)UnCurry.this.global.Type">functionType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#163752" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163765">pre</a>, <a href="../Definitions.scala.html#45105" title="=&gt; UnCurry.this.global.Symbol">RepeatedParamClass</a>, <a title="List[UnCurry.this.global.Type]" id="163766">args</a><span class="delimiter">)</span> =&gt;
          <a href="#163633" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Types.scala.html#38940" title="(tycon: UnCurry.this.global.Type, args: List[UnCurry.this.global.Type])UnCurry.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../Definitions.scala.html#45130" title="=&gt; UnCurry.this.global.Symbol">SeqClass</a>.<a href="../Symbols.scala.html#46625" title="=&gt; UnCurry.this.global.Type">typeConstructor</a>, <a href="#163766" title="List[UnCurry.this.global.Type]">args</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163772">pre</a>, <a href="../Definitions.scala.html#45103" title="=&gt; UnCurry.this.global.Symbol">JavaRepeatedParamClass</a>, <a title="List[UnCurry.this.global.Type]" id="163773">args</a><span class="delimiter">)</span> =&gt;
          <a href="#163633" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><span class="delimiter">(</span><a href="../Definitions.scala.html#45268" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span>
            <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#74923" title="(tp: UnCurry.this.global.Type)Boolean">isUnboundedGeneric</a><span class="delimiter">(</span><a href="#163773" title="List[UnCurry.this.global.Type]">args</a>.<span title="=&gt; UnCurry.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Definitions.scala.html#44986" title="=&gt; UnCurry.this.global.Symbol">ObjectClass</a>.<a href="../Symbols.scala.html#46606" title="=&gt; UnCurry.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#163773" title="List[UnCurry.this.global.Type]">args</a>.<span title="=&gt; UnCurry.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">_</span> =&gt;
          <a href="#74922" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="../Types.scala.html#74772" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#163644" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="74926">uncurryType</a> = <a href="#163547" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#38980" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="163547">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="163549">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="163550">tp0</a>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="163556">tp</a> = <a href="#74922" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#163550" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#163556" title="UnCurry.this.global.Type">tp</a> <span title="UnCurry.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">ClassInfoType</span><span class="delimiter">(</span><a title="List[UnCurry.this.global.Type]" id="163562">parents</a>, <a title="UnCurry.this.global.Scope" id="163563">decls</a>, <a title="UnCurry.this.global.Symbol" id="163564">clazz</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="List[UnCurry.this.global.Type]" id="163565">parents1</a> = <a href="#163562" title="List[UnCurry.this.global.Type]">parents</a> <span title="(f: UnCurry.this.global.Type =&gt; UnCurry.this.global.Type)List[UnCurry.this.global.Type]">mapConserve</span> <a href="#74924" title="=&gt; UnCurry.this.global.TypeMap">uncurry</a>
          <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#163565" title="List[UnCurry.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#163562" title="List[UnCurry.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#163556" title="UnCurry.this.global.Type">tp</a>
          <span class="keyword">else</span> <a href="../Types.scala.html#70033" title="(parents: List[UnCurry.this.global.Type], decls: UnCurry.this.global.Scope, typeSymbol: UnCurry.this.global.Symbol)UnCurry.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#163565" title="List[UnCurry.this.global.Type]">parents1</a>, <a href="#163563" title="UnCurry.this.global.Scope">decls</a>, <a href="#163564" title="UnCurry.this.global.Symbol">clazz</a><span class="delimiter">)</span> // @MAT normalize in decls??
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">PolyType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="../Types.scala.html#74772" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#163556" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="UnCurry.this.global.Type">_</span> =&gt;
          <a href="#163556" title="UnCurry.this.global.Type">tp</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** - return symbol's transformed type,
   *  - if symbol is a def parameter with transformed type T, return () =&gt; T
   *
   * @MAT: starting with this phase, the info of every symbol will be normalized
   */
  <span class="keyword">def</span> <a title="(sym: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="74928">transformInfo</a><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="75079">sym</a>: <a href="../Symbols.scala.html#38726" title="UnCurry.this.global.Symbol">Symbol</a>, <a title="UnCurry.this.global.Type" id="75080">tp</a>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#38813" title="UnCurry.this.global.Type">Type</a> =
    <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#75079" title="UnCurry.this.global.Symbol">sym</a>.<a href="../Symbols.scala.html#46444" title="=&gt; Boolean">isType</a><span class="delimiter">)</span> <a href="../Types.scala.html#74770" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurryType</a><span class="delimiter">(</span><a href="#75080" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../Types.scala.html#74770" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurry</a><span class="delimiter">(</span><a href="#75080" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>