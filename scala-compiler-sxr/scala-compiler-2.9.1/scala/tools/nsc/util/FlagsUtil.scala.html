<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/util/FlagsUtil.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Paul Phillips
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="comment">// Overloading invariants: these are &quot;pseudoinvariants&quot; because many of the</span>
<span class="comment">// methods do not exist on Modifiers, only on Symbol, not to mention it is only</span>
<span class="comment">// speculative that they are mutually exclusive: but is here to provide a</span>
<span class="comment">// starting point for further refinement.</span>
<span class="comment">//</span>
<span class="comment">// 16: BYNAMEPARAM CAPTURED COVARIANT</span>
<span class="comment">//   x.isParameter  ==&gt; BYNAMEPARAM</span>
<span class="comment">//   x.isMutable    ==&gt; CAPTURED</span>
<span class="comment">//   x.isType       ==&gt; COVARIANT</span>
<span class="comment">//</span>
<span class="comment">// 17: CONTRAVARIANT INCONSTRUCTOR LABEL</span>
<span class="comment">//   x.isType       ==&gt; CONTRAVARIANT</span>
<span class="comment">//   x.isClass      ==&gt; INCONSTRUCTOR</span>
<span class="comment">//   x.isMethod     ==&gt; LABEL</span>
<span class="comment">//</span>
<span class="comment">// 25: DEFAULTPARAM TRAIT</span>
<span class="comment">//   x.isParameter  ==&gt; DEFAULTPARAM</span>
<span class="comment">//   x.isClass      ==&gt; TRAIT</span>
<span class="comment">//</span>
<span class="comment">// 35: EXISTENTIAL MIXEDIN</span>
<span class="comment">//   x.isType       ==&gt; EXISTENTIAL</span>
<span class="comment">//   x.isTerm       ==&gt; MIXEDIN</span>
<span class="comment">//</span>
<span class="comment">// 37: IMPLCLASS PRESUPER</span>
<span class="comment">//   x.isClass      ==&gt; IMPLCLASS</span>
<span class="comment">//   x.isTerm       ==&gt; PRESUPER</span>

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> symtab.<a href="../symtab/Flags.scala.html#24068" title="object scala.tools.nsc.symtab.Flags">Flags</a>.ExplicitFlags

<span class="keyword">class</span> <a title="class TransFlagManager[T &lt;: scala.tools.nsc.Global] extends java.lang.Object with ScalaObject" id="30609">TransFlagManager</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: scala.tools.nsc.Global" id="31311">T</a> &lt;: Global<span class="delimiter">]</span><a href="#30609" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="T" id="600440">global</a>: <a href="#31311" title="T">T</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#600440" title="=&gt; T">global</a>._
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#67699" title="object TransFlagManager.this.global.definitions">definitions</a>._
  
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[TransFlagManager.this.FlagTracker]" id="600427">trackerStack</a>: <span title="List[TransFlagManager.this.FlagTracker]">List</span><span class="delimiter">[</span>FlagTracker<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; String" id="600429">trackerString</a> = <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>
  
  <span class="keyword">class</span> <a title="class FlagTracker extends java.lang.Object with ScalaObject" id="600430">FlagTracker</a><a href="#600430" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="600471">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Long" id="600445">mask</a>               = symtab.Flags.<span title="Long(274877906944L)">TRANS_FLAG</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]" id="600447">seen</a>               = <span title="()scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">HashSet</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="600449">debug</a><span class="delimiter">(</span><a title="String" id="600472">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#600472" title="String">msg</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="600450">trace</a><span class="delimiter">(</span><a title="String" id="600478">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#36883" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#600478" title="String">msg</a><span class="delimiter">)</span>    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="600451">isDebug</a>            = <a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="600452">doWeOwnFlag</a>        = <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; Option[TransFlagManager.this.FlagTracker]">headOption</span> <span title="(p: TransFlagManager.this.FlagTracker =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#600498" title="TransFlagManager.this.FlagTracker">_</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#600430" title="TransFlagManager.this.FlagTracker" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="600453">isOK</a>               = <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; TransFlagManager.this.FlagTracker">head</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#600430" title="TransFlagManager.this.FlagTracker" class="keyword">this</a><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="(sym: TransFlagManager.this.global.Symbol)Boolean" id="600454">apply</a><span class="delimiter">(</span><a title="TransFlagManager.this.global.Symbol" id="600504">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="TransFlagManager.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#600453" title="=&gt; Boolean">isOK</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Testing &quot;)" class="string">&quot;Testing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600504" title="TransFlagManager.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; TransFlagManager.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; for &quot;)" class="string">&quot; for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600471" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flag, but not at top of stack: &quot;)" class="string">&quot; flag, but not at top of stack: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600429" title="=&gt; String">trackerString</a><span class="delimiter">)</span>
      
      <a href="#600504" title="TransFlagManager.this.global.Symbol">sym</a> <span title="(mask: Long)Boolean">hasFlag</span> <a href="#600445" title="=&gt; Long">mask</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(sym: TransFlagManager.this.global.Symbol)TransFlagManager.this.global.Symbol" id="600455">set</a><span class="delimiter">(</span><a title="TransFlagManager.this.global.Symbol" id="600507">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="TransFlagManager.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#600453" title="=&gt; Boolean">isOK</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Tried to set &quot;)" class="string">&quot;Tried to set &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600471" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; but not at top of stack: &quot;)" class="string">&quot; but not at top of stack: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600429" title="=&gt; String">trackerString</a><span class="delimiter">)</span>
      
      <a href="#600447" title="=&gt; scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">seen</a> <span title="(elem: TransFlagManager.this.global.Symbol)FlagTracker.this.seen.type">+=</span> <a href="#600507" title="TransFlagManager.this.global.Symbol">sym</a>
      <a href="#600507" title="TransFlagManager.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)sym.type">setFlag</a> <a href="#600445" title="=&gt; Long">mask</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(sym: TransFlagManager.this.global.Symbol)TransFlagManager.this.global.Symbol" id="600456">reset</a><span class="delimiter">(</span><a title="TransFlagManager.this.global.Symbol" id="600519">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="TransFlagManager.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#600453" title="=&gt; Boolean">isOK</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Tried to clear &quot;)" class="string">&quot;Tried to clear &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600471" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; but not at top of stack: &quot;)" class="string">&quot; but not at top of stack: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600429" title="=&gt; String">trackerString</a><span class="delimiter">)</span>
      
      <a href="#600447" title="=&gt; scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">seen</a> <span title="(elem: TransFlagManager.this.global.Symbol)FlagTracker.this.seen.type">-=</span> <a href="#600519" title="TransFlagManager.this.global.Symbol">sym</a>
      <a href="#600519" title="TransFlagManager.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107554" title="(mask: Long)sym.type">resetFlag</a> <a href="#600445" title="=&gt; Long">mask</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="()Unit" id="600457">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#600452" title="=&gt; Boolean">doWeOwnFlag</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#600447" title="=&gt; scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">seen</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Clearing &quot;)" class="string">&quot;Clearing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600447" title="=&gt; scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">seen</a>.<span title="=&gt; Int">size</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600471" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flags even though the stack is: &quot;)" class="string">&quot; flags even though the stack is: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600429" title="=&gt; String">trackerString</a><span class="delimiter">)</span>

      <a href="#600447" title="=&gt; scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">seen</a> <span title="(f: TransFlagManager.this.global.Symbol =&gt; TransFlagManager.this.global.Symbol)Unit">foreach</span> <span class="delimiter">(</span><a href="#600550" title="TransFlagManager.this.global.Symbol">_</a> <a href="../symtab/Symbols.scala.html#107554" title="(mask: Long)x$2.type">resetFlag</a> <a href="#600445" title="=&gt; Long">mask</a><span class="delimiter">)</span>
      <a href="#600447" title="=&gt; scala.collection.mutable.HashSet[TransFlagManager.this.global.Symbol]">seen</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()Unit" id="600431">forceClear</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Warning: force clearing the stack at &quot;)" class="string">&quot;Warning: force clearing the stack at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600429" title="=&gt; String">trackerString</a><span class="delimiter">)</span>
      <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a> <span title="(f: TransFlagManager.this.FlagTracker =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#600579" title="TransFlagManager.this.FlagTracker">_</a>.<a href="#600457" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#600427" title="(x$1: List[TransFlagManager.this.FlagTracker])Unit">trackerStack</a> = <span title="object Nil">Nil</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(label: String)TransFlagManager.this.FlagTracker" id="600432">claimTransFlag</a><span class="delimiter">(</span><a title="String" id="600581">label</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#600430" title="TransFlagManager.this.FlagTracker">FlagTracker</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; TransFlagManager.this.FlagTracker">head</span>.<a href="#600471" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#600581" title="String">label</a><span class="delimiter">)</span>
      <a href="#600427" title="(x$1: List[TransFlagManager.this.FlagTracker])Unit">trackerStack</a> <span title="(x: TransFlagManager.this.FlagTracker)List[TransFlagManager.this.FlagTracker]">::=</span> <span title="TransFlagManager.this.FlagTracker" class="keyword">new</span> <a href="#600430" title="TransFlagManager.this.FlagTracker">FlagTracker</a><span class="delimiter">(</span><a href="#600581" title="String">label</a><span class="delimiter">)</span>
    
    <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; TransFlagManager.this.FlagTracker">head</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(label: String)Boolean" id="600433">releaseTransFlag</a><span class="delimiter">(</span><a title="String" id="600602">label</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">{</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; TransFlagManager.this.FlagTracker">head</span>.<a href="#600471" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#600602" title="String">label</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; TransFlagManager.this.FlagTracker">head</span>.<a href="#600457" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#600427" title="(x$1: List[TransFlagManager.this.FlagTracker])Unit">trackerStack</a> = <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="=&gt; List[TransFlagManager.this.FlagTracker]">tail</span>
        <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Warning: trying to release &quot;)" class="string">&quot;Warning: trying to release &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600602" title="String">label</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flag but the stack is: &quot;)" class="string">&quot; flag but the stack is: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600427" title="=&gt; List[TransFlagManager.this.FlagTracker]">trackerStack</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[U](label: String)(f: TransFlagManager.this.FlagTracker =&gt; U)U" id="600434">holdingTransFlag</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="600436">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="600616">label</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="TransFlagManager.this.FlagTracker =&gt; U" id="600617">f</a>: FlagTracker =&gt; U<span class="delimiter">)</span>: <a href="#600436" title="U">U</a> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TransFlagManager.this.FlagTracker" id="600620">t</a> = <a href="#600432" title="(label: String)TransFlagManager.this.FlagTracker">claimTransFlag</a><span class="delimiter">(</span><a href="#600616" title="String">label</a><span class="delimiter">)</span>
      <a href="#600617" title="(v1: TransFlagManager.this.FlagTracker)U">f</a><span class="delimiter">(</span><a href="#600620" title="TransFlagManager.this.FlagTracker">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#600433" title="(label: String)Boolean">releaseTransFlag</a><span title="Unit" class="delimiter">(</span><a href="#600616" title="String">label</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">/** Some functions for generating comments and methods involving flags,
 *  with the output determined by reflection so we can have a little more
 *  assurance that documentation and debugging output match up with reality.
 *
 *  For the compiler, the output can be generated with:
 *    scala scala.tools.nsc.util.FlagsUtilCompiler
 */</span>
<span class="keyword">class</span> <a title="class FlagsUtil extends java.lang.Object with ScalaObject" id="30444">FlagsUtil</a><a href="#30444" title="ScalaObject" class="delimiter">(</a><a title="AnyRef" id="600635">flagsObject</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="comment">/** Override to tweak flag strings before output. */</span>
  <span class="keyword">def</span> <a title="(name: String)String" id="600625">addFlagMetadata</a><span class="delimiter">(</span><a title="String" id="600636">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#600636" title="String">name</a>

  <span class="comment">/** Runs the generative methods in this class. */</span>
  <span class="keyword">def</span> <a title="()Unit" id="600626">reflectiveAnalyzeFlags</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#600628" title="()Unit">mkFlagsTable</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <a href="#600629" title="()Unit">mkFlagToStringMethod</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/** A list of the flag names found at each bit position.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; List[List[String]]" id="600627">reflectiveFlagNames</a>: <span title="List[List[String]]">List</span><span class="delimiter">[</span>List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[(java.lang.String, Long)]" id="601945">pairs</a> = <a href="#600631" title="=&gt; List[java.lang.reflect.Method]">flagMethods</a> <span title="(f: java.lang.reflect.Method =&gt; (java.lang.String, Long))(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.reflect.Method],(java.lang.String, Long),List[(java.lang.String, Long)]])List[(java.lang.String, Long)]">map</span> <span class="delimiter">{</span> <a title="java.lang.reflect.Method" id="602243">m</a> =&gt;
      <a href="#602243" title="java.lang.reflect.Method">m</a>.<span title="(x: java.lang.String)ArrowAssoc[java.lang.String]">getName</span> <span title="(y: Long)(java.lang.String, Long)">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#602243" title="java.lang.reflect.Method">m</a> <span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span> <a href="#600635" title="AnyRef">flagsObject</a><span class="delimiter">)</span> <span title="Long" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Long" id="602259">x</a>: java.lang.<span title="java.lang.Integer">Integer</span>   =&gt; <a href="#602259" title="java.lang.Integer">x</a>.<span title="=&gt; Long">intValue</span>: <span title="Long">Long</span>
        <span class="keyword">case</span> <a title="Long" id="602260">x</a>: java.lang.<span title="java.lang.Long">Long</span>      =&gt; <a href="#602260" title="java.lang.Long">x</a>.<span title="()Long">longValue</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <span title="Int(63)" class="int">63</span><span class="delimiter">)</span>.<span title="=&gt; List[Int]">toList</span> <span title="(f: Int =&gt; List[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[List[Int],List[java.lang.String],List[List[String]]])List[List[String]]">map</span> <span class="delimiter">{</span> <a title="Int" id="602422">idx</a> =&gt;
      <a href="#601945" title="List[(java.lang.String, Long)]">pairs</a> <span title="(pf: PartialFunction[(java.lang.String, Long),java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[List[(java.lang.String, Long)],java.lang.String,List[java.lang.String]])List[java.lang.String]">collect</span> <a href="#602435" title="java.lang.String" class="delimiter">{</a> <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="java.lang.String" id="602438">name</a>, <a title="Long" id="602439">value</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#602439" title="Long">value</a> <span title="(x: Long)Boolean">==</span> <span class="delimiter">(</span><span title="Long(1L)" class="long">1L</span> <span title="(x: Int)Long">&lt;&lt;</span> <a href="#602422" title="Int">idx</a><span class="delimiter">)</span> =&gt; <a href="#602438" title="java.lang.String">name</a> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Prints a comment table identifying all the flags (as seen
   *  via reflection) and at what bit each is located.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="600628">mkFlagsTable</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[List[String]]" id="600643">markedFlagNames</a> = <a href="#600627" title="=&gt; List[List[String]]">reflectiveFlagNames</a> <span title="(f: List[String] =&gt; List[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[String]],List[String],List[List[String]]])List[List[String]]">map</span> <span class="delimiter">(</span><a href="#600668" title="List[String]">_</a> <span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</span> <a href="#600625" title="(name: String)String">addFlagMetadata</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[Int]" id="600644">widths</a> = <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <span title="Int(2)" class="int">2</span> <span title="(f: Int =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],Int,scala.collection.immutable.IndexedSeq[Int]])scala.collection.immutable.IndexedSeq[Int]">map</span> <span class="delimiter">{</span> <a title="Int" id="600873">column</a> =&gt;
      <a href="#600643" title="List[List[String]]">markedFlagNames</a> <span title="(pf: PartialFunction[List[String],Int])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[String]],Int,List[Int]])List[Int]">collect</span> <a href="#600886" title="Int" class="delimiter">{</a> <span class="keyword">case</span> <a title="Int" id="600887">xs</a> <span class="keyword">if</span> <a href="#600887" title="List[String]">xs</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <a href="#600873" title="Int">column</a> =&gt;
        <a href="#600887" title="(n: Int)String">xs</a><span class="delimiter">(</span><a href="#600873" title="Int">column</a><span class="delimiter">)</span>.<span title="()Int">length</span>
      <span class="delimiter">}</span> <span title="(implicit cmp: Ordering[Int])Int">max</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="600645">fmt</a> = <span title="java.lang.String(&quot;// %2d: &quot;)" class="string">&quot;// %2d: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#600644" title="scala.collection.immutable.IndexedSeq[Int]">widths</a> <span title="(f: Int =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],java.lang.String,scala.collection.immutable.IndexedSeq[java.lang.String]])scala.collection.immutable.IndexedSeq[java.lang.String]">map</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;%&quot;)" class="string">&quot;%&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#601037" title="Int">_</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;s&quot;)" class="string">&quot;s&quot;</span><span class="delimiter">)</span> <span title="(sep: String)String">mkString</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(xs: List[String])List[java.lang.String]" id="600646">padded</a><span class="delimiter">(</span><a title="List[String]" id="601071">xs</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#601071" title="List[String]">xs</a> <span title="List[java.lang.String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="List[java.lang.String]">Nil</span>              =&gt; <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="List[java.lang.String]" id="601083">x</a> :: <span title="object Nil">Nil</span>         =&gt; <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><a href="#601083" title="String">x</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="List[java.lang.String]" id="601095">x1</a> :: <a title="String" id="601100">x2</a> :: <span title="object Nil">Nil</span>  =&gt; <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><a href="#601095" title="String">x1</a>, <a href="#601100" title="String">x2</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="List[String]">_</span>                =&gt; <a href="#601071" title="List[String]">xs</a> <span title="(n: Int)List[String]">take</span> <span title="Int(3)" class="int">3</span>
    <span class="delimiter">}</span>
    <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;// Generated by mkFlagsTable() at &quot;)" class="string">&quot;// Generated by mkFlagsTable() at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600632" title="=&gt; java.lang.String">now</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012//&quot;)" class="string">&quot;\n//&quot;</span><span class="delimiter">)</span>
    <span class="comment">// prints the grid showing which flags are at each index</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="List[String]" id="601190">names</a>, <a title="Int" id="601191">idx</a><span class="delimiter">)</span> &lt;- <a href="#600643" title="List[List[String]]">markedFlagNames</a>.<a href="#601161" title="(f: (List[String], Int) =&gt; Unit)Unit">zipWithIndex</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#600645" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">fmt</a>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#601191" title="Int">idx</a> <a href="#601197" title="(x: Any)List[Any]">::</a> <a href="#600646" title="(xs: List[String])List[java.lang.String]">padded</a><span class="delimiter">(</span><a href="#601190" title="List[String]">names</a><span class="delimiter">)</span> : _*<span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Prints an implementation of flagToString based on the reflectively
   *  determined contents of the flags class.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="600629">mkFlagToStringMethod</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(xs: List[String], flag: Long)String" id="601217">key</a><span class="delimiter">(</span><a title="List[String]" id="601223">xs</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Long" id="601224">flag</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="#601223" title="List[String]">xs</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="String">Nil</span>    =&gt; <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%19s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><span title="java.lang.String(&quot;0x&quot;)" class="string">&quot;0x&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%x&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#601224" title="Long">flag</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;L&quot;)" class="string">&quot;L&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="601235">x</a> :: _ =&gt;
        <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#601235" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">x</a>.<span title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">head</span>.<span title="=&gt; Boolean">isLower</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;`&quot;)" class="string">&quot;`&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#601235" title="String">x</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;`&quot;)" class="string">&quot;`&quot;</span>
        <span class="keyword">else</span> <a href="#601235" title="String">x</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(xs: List[String], flag: Long)java.lang.String" id="601218">value</a><span class="delimiter">(</span><a title="List[String]" id="601461">xs</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Long" id="601462">flag</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#601461" title="List[String]">xs</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">Nil</span>                                      =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="601467">x</a> :: <span title="object Nil">Nil</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#601462" title="Long">flag</a> <span title="(x: Long)Long">&amp;</span> <a href="../symtab/Flags.scala.html#67075" title="=&gt; Long">ExplicitFlags</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span>  =&gt; <a href="#601467" title="String">x</a>.<span title="()java.lang.String">toLowerCase</span>
      <span class="keyword">case</span> <a title="String" id="601479">xs</a>                                       =&gt; <a href="#601479" title="List[String]">xs</a>.<span title="(f: String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#601496" title="String">_</a>.<span title="()java.lang.String">toLowerCase</span><span class="delimiter">)</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&lt;&quot;)" class="string">&quot;&lt;&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span>
    <span class="keyword">val</span> <a title="List[(String, String)]" id="601219">pairs</a>: <span title="List[(String, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#600627" title="=&gt; List[List[String]]">reflectiveFlagNames</a>.<span title="(implicit bf: scala.collection.generic.CanBuildFrom[List[List[String]],(List[String], Int),List[(List[String], Int)]])List[(List[String], Int)]">zipWithIndex</span> <span title="(f: (List[String], Int) =&gt; (String, java.lang.String))(implicit bf: scala.collection.generic.CanBuildFrom[List[(List[String], Int)],(String, java.lang.String),List[(String, String)]])List[(String, String)]">map</span> <a href="#601593" title="(String, java.lang.String)" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="(String, java.lang.String)" class="delimiter">(</span><a title="List[String]" id="601596">xs</a>, <a title="Int" id="601597">idx</a><span class="delimiter">)</span> =&gt; <span title="(_1: String, _2: java.lang.String)(String, java.lang.String)" class="delimiter">(</span><a href="#601217" title="(xs: List[String], flag: Long)String">key</a><span class="delimiter">(</span><a href="#601596" title="List[String]">xs</a>, <span title="Long(1L)" class="long">1L</span> <span title="(x: Int)Long">&lt;&lt;</span> <a href="#601597" title="Int">idx</a><span class="delimiter">)</span>, <a href="#601218" title="(xs: List[String], flag: Long)java.lang.String">value</a><span class="delimiter">(</span><a href="#601596" title="List[String]">xs</a>, <span title="Long(1L)" class="long">1L</span> <span title="(x: Int)Long">&lt;&lt;</span> <a href="#601597" title="Int">idx</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Int" id="601220">keyWidth</a>  = <a href="#601219" title="List[(String, String)]">pairs</a> <span title="(f: (String, String) =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],Int,List[Int]])List[Int]">map</span> <span class="delimiter">(</span><a href="#601655" title="(String, String)">_</a>.<span title="=&gt; String">_1</span>.<span title="()Int">length</span><span class="delimiter">)</span> <span title="(implicit cmp: Ordering[Int])Int">max</span>
    <span class="keyword">val</span> <a title="Int" id="601221">bodyWidth</a> = <a href="#601219" title="List[(String, String)]">pairs</a> <span title="(f: (String, String) =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],Int,List[Int]])List[Int]">map</span> <span class="delimiter">(</span><a href="#601757" title="(String, String)">_</a>.<span title="=&gt; String">_2</span>.<span title="()Int">length</span><span class="delimiter">)</span> <span title="(implicit cmp: Ordering[Int])Int">max</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="601222">fmt</a>       = <span title="java.lang.String(&quot;  case %&quot;)" class="string">&quot;  case %&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#601220" title="Int">keyWidth</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;s =&gt; %-&quot;)" class="string">&quot;s =&gt; %-&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#601221" title="Int">bodyWidth</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;s // (1L &lt;&lt; %d)&quot;)" class="string">&quot;s // (1L &lt;&lt; %d)&quot;</span>
  
    <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;// Generated by mkFlagToStringMethod() at &quot;)" class="string">&quot;// Generated by mkFlagToStringMethod() at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#600632" title="=&gt; java.lang.String">now</a><span class="delimiter">)</span>
    <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;@annotation.switch override def flagToString(flag: Long): String = flag match {&quot;)" class="string">&quot;@annotation.switch override def flagToString(flag: Long): String = flag match {&quot;</span><span class="delimiter">)</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="601932">key</a>, <a title="String" id="601933">body</a><span class="delimiter">)</span>, <a title="Int" id="601934">idx</a><span class="delimiter">)</span> &lt;- <a href="#601219" title="List[(String, String)]">pairs</a>.<a href="#601898" title="(f: ((String, String), Int) =&gt; Unit)Unit">zipWithIndex</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(x: Any)Unit">print</span><span class="delimiter">(</span><a href="#601222" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">fmt</a>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#601932" title="String">key</a>, <a href="#601933" title="String">body</a>, <a href="#601934" title="Int">idx</a><span class="delimiter">)</span><span class="delimiter">)</span>      
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;  case _ =&gt; \&quot;\&quot;&quot;)" class="string">&quot;  case _ =&gt; \&quot;\&quot;&quot;</span><span class="delimiter">)</span>
    <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;}&quot;)" class="string">&quot;}&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(s: String)Boolean" id="600630">isFlagName</a><span class="delimiter">(</span><a title="String" id="602060">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#602060" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripPrefix</span> <span title="java.lang.String(&quot;late&quot;)" class="string">&quot;late&quot;</span> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripPrefix</span> <span title="java.lang.String(&quot;not&quot;)" class="string">&quot;not&quot;</span> <span title="(p: Char =&gt; Boolean)Boolean">forall</span> <span class="delimiter">(</span><a title="Char" id="602153">x</a> =&gt; <a href="#602153" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">x</a>.<span title="=&gt; Boolean">isUpper</span> <span title="(x: Boolean)Boolean">||</span> <a href="#602153" title="Char">x</a> <span title="(x: Char)Boolean">==</span> <span title="Char(\'_\')" class="char">'_'</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; List[java.lang.reflect.Method]" id="600631">flagMethods</a>           = <a href="#600635" title="AnyRef">flagsObject</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</span>.<span title="=&gt; List[java.lang.reflect.Method]">toList</span> <span title="(p: java.lang.reflect.Method =&gt; Boolean)List[java.lang.reflect.Method]">filter</span> <span class="delimiter">(</span><a title="java.lang.reflect.Method" id="602059">x</a> =&gt; <a href="#600630" title="(s: String)Boolean">isFlagName</a><span class="delimiter">(</span><a href="#602059" title="java.lang.reflect.Method">x</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(f: java.lang.reflect.Method =&gt; java.lang.String)(implicit ord: scala.math.Ordering[java.lang.String])List[java.lang.reflect.Method]">sortBy</span> <span class="delimiter">(</span><a href="#602168" title="java.lang.reflect.Method">_</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="600632">now</a>           = <span title="java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span> <span title="()java.lang.String">toString</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scala.tools.nsc.util.FlagsUtil" id="30445">FlagsUtil</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> reflect.generic.ModifierFlags

  <span class="keyword">trait</span> <a title="trait MarkModifiers extends scala.tools.nsc.util.FlagsUtil with ScalaObject" id="602504">MarkModifiers</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#30444" title="scala.tools.nsc.util.FlagsUtil">FlagsUtil</a> <span class="delimiter">{</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.lang.String]" id="602508">isModifiersFlag</a> = classOf<span title="java.lang.Class[scala.reflect.generic.ModifierFlags](classOf[scala.reflect.generic.ModifierFlags])" class="delimiter">[</span>ModifierFlags<span class="delimiter">]</span>.<span title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</span> <span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">map</span> <span class="delimiter">(</span><a href="#602956" title="java.lang.reflect.Method">_</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span> <span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">filter</span> <a href="#600630" title="(s: String)Boolean">isFlagName</a> <span title="scala.collection.immutable.Set[java.lang.String]">toSet</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)String" id="602509">addFlagMetadata</a><span class="delimiter">(</span><a title="String" id="603346">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#602507" title="(elem: java.lang.String)Boolean">isModifiersFlag</a><span class="delimiter">(</span><a href="#603346" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#603346" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;/M&quot;)" class="string">&quot;/M&quot;</span>
      <span class="keyword">else</span> <a href="#603346" title="String">name</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>  
<span class="delimiter">}</span>

<span class="comment">/** Convenience standalone programs.
 */</span>
<span class="keyword">object</span> <a title="object scala.tools.nsc.util.FlagsUtilCompiler" id="30712">FlagsUtilCompiler</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#30444" title="scala.tools.nsc.util.FlagsUtil">FlagsUtil</a><span class="delimiter">(</span>symtab.<a href="../symtab/Flags.scala.html#24068" title="object scala.tools.nsc.symtab.Flags">Flags</a><span class="delimiter">)</span> <span class="keyword">with</span> FlagsUtil.<a href="#602504" title="scala.tools.nsc.util.FlagsUtil.MarkModifiers">MarkModifiers</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="603367">main</a><span class="delimiter">(</span><a title="Array[String]" id="603369">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#600626" title="()Unit">reflectiveAnalyzeFlags</a><span class="delimiter">(</span><span class="delimiter">)</span> 
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scala.tools.nsc.util.FlagsUtilLibrary" id="31180">FlagsUtilLibrary</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#30444" title="scala.tools.nsc.util.FlagsUtil">FlagsUtil</a><span class="delimiter">(</span>reflect.generic.<span title="object scala.reflect.generic.Flags">Flags</span><span class="delimiter">)</span> <span class="keyword">with</span> FlagsUtil.<a href="#602504" title="scala.tools.nsc.util.FlagsUtil.MarkModifiers">MarkModifiers</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="603372">main</a><span class="delimiter">(</span><a title="Array[String]" id="603374">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#600626" title="()Unit">reflectiveAnalyzeFlags</a><span class="delimiter">(</span><span class="delimiter">)</span> 
<span class="delimiter">}</span>


        </pre>
    </body>
</html>