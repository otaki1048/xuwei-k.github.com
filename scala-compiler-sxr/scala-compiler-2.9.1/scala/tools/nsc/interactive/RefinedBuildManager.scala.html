<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/RefinedBuildManager.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2009-2011 Scala Solutions and LAMP/EPFL
 * @author Iulian Dragos
 * @author Hubert Plocinicak
 */</span>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> scala.collection._
<span class="keyword">import</span> scala.tools.nsc.reporters.<span class="delimiter">{</span>Reporter, ConsoleReporter<span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.<span title="object scala.util.control.Breaks">Breaks</span>._
<span class="keyword">import</span> scala.tools.nsc.symtab.Flags

<span class="keyword">import</span> dependencies._
<span class="keyword">import</span> util.<span class="delimiter">{</span>FakePos, ClassPath<span class="delimiter">}</span>
<span class="keyword">import</span> io.AbstractFile
<span class="keyword">import</span> scala.tools.util.PathResolver

<span class="comment">/** A more defined build manager, based on change sets. For each
 *  updated source file, it computes the set of changes to its
 *  definitions, then checks all dependent units to see if the
 *  changes require a compilation. It repeats this process until
 *  a fixpoint is reached.
 */</span>
<span class="keyword">class</span> <a title="class RefinedBuildManager extends scala.tools.nsc.dependencies.Changes with scala.tools.nsc.interactive.BuildManager with ScalaObject" id="18016">RefinedBuildManager</a><a href="#18016" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="125113">settings</a>: <a href="../Settings.scala.html#10939" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../dependencies/Changes.scala.html#15924" title="scala.tools.nsc.dependencies.Changes">Changes</a> <span class="keyword">with</span> <a href="BuildManager.scala.html#17596" title="scala.tools.nsc.interactive.BuildManager">BuildManager</a> <span class="delimiter">{</span>

  <span class="keyword">class</span> <a title="class BuilderGlobal extends scala.tools.nsc.Global with ScalaObject" id="125080">BuilderGlobal</a><a href="#125080" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.Settings" id="125160">settings</a>: <a href="../Settings.scala.html#10939" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.reporters.Reporter" id="125161">reporter</a> : <a href="../reporters/Reporter.scala.html#22894" title="scala.tools.nsc.reporters.Reporter">Reporter</a><span class="delimiter">)</span> <span class="keyword">extends</span> scala.tools.nsc.<a href="../Global.scala.html#10573" title="scala.tools.nsc.Global">Global</a><span class="delimiter">(</span><a href="#125160" title="scala.tools.nsc.Settings">settings</a>, <a href="#125161" title="scala.tools.nsc.reporters.Reporter">reporter</a><span class="delimiter">)</span>  <span class="delimiter">{</span>
    
    <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal" id="125151" class="keyword">this</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="125159">settings</a>: <a href="../Settings.scala.html#10939" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> =
      <a href="#125080" title="BuilderGlobal.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#125159" title="scala.tools.nsc.Settings">settings</a>, <a href="../reporters/ConsoleReporter.scala.html#72233" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="../reporters/ConsoleReporter.scala.html#22888" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#125159" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="125152">computeInternalPhases</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#125080" title="RefinedBuildManager.this.BuilderGlobal" class="keyword">super</a>.<a href="../Global.scala.html#64956" title="()Unit">computeInternalPhases</a>
      <a href="../Global.scala.html#64963" title="=&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]">phasesSet</a> <span title="(elem: scala.tools.nsc.SubComponent)BuilderGlobal.this.phasesSet.type">+=</span> <a href="../Global.scala.html#64942" title="object BuilderGlobal.this.dependencyAnalysis">dependencyAnalysis</a>
    <span class="delimiter">}</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.util.ClassPath[_]" id="125154">_classpath</a>: <a href="../util/ClassPath.scala.html#30878" title="scala.tools.nsc.util.ClassPath[_]">ClassPath</a><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span title="RefinedBuildManager.this.NoSourcePathPathResolver" class="keyword">new</span> <a href="#125081" title="RefinedBuildManager.this.NoSourcePathPathResolver">NoSourcePathPathResolver</a><span class="delimiter">(</span><a href="#125160" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>.<a href="../../util/PathResolver.scala.html#103742" title="=&gt; scala.tools.nsc.util.JavaClassPath">result</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.util.ClassPath[_]" id="125155">classPath</a>: <a href="../util/ClassPath.scala.html#30878" title="scala.tools.nsc.util.ClassPath[_]">ClassPath</a><span class="delimiter">[</span>_<span class="delimiter">]</span> = <a href="#125153" title="=&gt; scala.tools.nsc.util.ClassPath[_]">_classpath</a>
    
    <span class="keyword">def</span> <a title="()BuilderGlobal.this.Run" id="125156">newRun</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="BuilderGlobal.this.Run" class="keyword">new</span> <a href="../Global.scala.html#64983" title="BuilderGlobal.this.Run">Run</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">class</span> <a title="class NoSourcePathPathResolver extends scala.tools.util.PathResolver with ScalaObject" id="125081">NoSourcePathPathResolver</a><a href="../../util/PathResolver.scala.html#103736" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.Settings" id="320575">settings</a>: <a href="../Settings.scala.html#10939" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../util/PathResolver.scala.html#31777" title="scala.tools.util.PathResolver">PathResolver</a><span class="delimiter">(</span><a href="#320575" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]" id="320574">containers</a> = <a href="../../util/PathResolver.scala.html#103739" title="object NoSourcePathPathResolver.this.Calculated">Calculated</a>.<a href="../../util/PathResolver.scala.html#103817" title="=&gt; List[Traversable[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]]">basis</a>.<span title="(n: Int)List[Traversable[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]]">dropRight</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(implicit asTraversable: Traversable[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]] =&gt; scala.collection.TraversableOnce[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]])List[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]">flatten</span>.<span title="=&gt; List[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]">distinct</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal" id="125082">newCompiler</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="125143">settings</a>: <a href="../Settings.scala.html#10939" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> = <a href="#125151" title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal" class="keyword">new</a> <a href="#125080" title="RefinedBuildManager.this.BuilderGlobal">BuilderGlobal</a><span class="delimiter">(</span><a href="#125143" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span> 
  
  <span class="keyword">val</span> <a title="RefinedBuildManager.this.BuilderGlobal" id="125083">compiler</a> = <a href="#125082" title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal">newCompiler</a><span class="delimiter">(</span><a href="#125113" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
  <span class="keyword">import</span> <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<span class="delimiter">{</span>Symbol, Type, atPhase, currentRun<span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.Inherited
  
  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class SymWithHistory extends java.lang.Object with ScalaObject with Product with Serializable" id="320670">SymWithHistory</a><a href="#320670" title="ScalaObject" class="delimiter">(</a><a title="RefinedBuildManager.this.compiler.Symbol" id="323744">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="RefinedBuildManager.this.compiler.Type" id="323745">befErasure</a>: <a href="../symtab/Types.scala.html#67381" title="RefinedBuildManager.this.compiler.Type">Type</a><span class="delimiter">)</span>

  <span class="comment">/** Managed source files. */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="125090">sources</a>: mutable.<span title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]" id="125092">definitions</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]">Map</span><span class="delimiter">[</span>AbstractFile, List<span class="delimiter">[</span>SymWithHistory<span class="delimiter">]</span><span class="delimiter">]</span> = 
    <a href="#320714" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]" id="320714">mutable</a>.<span title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]">HashMap</span><span class="delimiter">[</span>AbstractFile, List<span class="delimiter">[</span>SymWithHistory<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Nil.type" id="321189">default</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="321190">key</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> = <span title="object Nil">Nil</span>
    <span class="delimiter">}</span>

  <span class="comment">/** External references used by source file. */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]" id="125095">references</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">Map</span><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = _
  
  <span class="comment">/** External references for inherited members */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]]" id="125098">inherited</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]]">Map</span><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>Inherited<span class="delimiter">]</span><span class="delimiter">]</span> = _
  
  <span class="comment">/** Reverse of definitions, used for caching */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]" id="125101">classes</a>: mutable.<span title="scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">Map</span><span class="delimiter">[</span>String, AbstractFile<span class="delimiter">]</span> = 
    <a href="#321215" title="scala.collection.mutable.HashMap[String,scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[String,scala.tools.nsc.io.AbstractFile]" id="321215">mutable</a>.<span title="scala.collection.mutable.HashMap[String,scala.tools.nsc.io.AbstractFile]">HashMap</span><span class="delimiter">[</span>String, AbstractFile<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: String)Null" id="321690">default</a><span class="delimiter">(</span><a title="String" id="321691">key</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Add the given source files to the managed build process. */</span>
  <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="125103">addSourceFiles</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321716">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#125090" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <span title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">++=</span> <a href="#321716" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>
    <a href="#125107" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#321716" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Remove the given files from the managed build process. */</span>
  <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="125104">removeFiles</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322401">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#125090" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <span title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">--=</span> <a href="#322401" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>
    <a href="BuildManager.scala.html#125000" title="(sources: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">deleteClassfiles</a><span class="delimiter">(</span><a href="#322401" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
    <a href="#125107" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#125105" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidatedByRemove</a><span class="delimiter">(</span><a href="#322401" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Return the set of invalidated files caused by removing the given files.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="125105">invalidatedByRemove</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322408">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="322410">changes</a> = <span title="()scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="322428">f</a> &lt;- <a href="#322408" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">files</a>; SymWithHistory<span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="322473">sym</a>, _<span class="delimiter">)</span> &lt;- <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><a href="#322449" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]])Unit" class="delimiter">(</a><a href="#322428" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#322410" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changes</a> <span title="(kv: (RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change]))changes.type">+=</span> <a href="#322473" title="(x: RefinedBuildManager.this.compiler.Symbol)ArrowAssoc[RefinedBuildManager.this.compiler.Symbol]">sym</a> <span title="(y: List[RefinedBuildManager.this.Removed])(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Removed])">-&gt;</span> <span title="(xs: RefinedBuildManager.this.Removed*)List[RefinedBuildManager.this.Removed]">List</span><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#257710" title="(e: RefinedBuildManager.this.Entity)RefinedBuildManager.this.Removed">Removed</a><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#257554" title="(name: String)RefinedBuildManager.this.Class">Class</a><span class="delimiter">(</span><a href="#322473" title="RefinedBuildManager.this.compiler.Symbol">sym</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#125109" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidated</a><span class="delimiter">(</span><a href="#322408" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>, <a href="#322410" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(added: scala.collection.Set[scala.tools.nsc.io.AbstractFile], removed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="125106">update</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321719">added</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321720">removed</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#125090" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <span title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">--=</span> <a href="#321720" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">removed</a>
    <a href="BuildManager.scala.html#125000" title="(sources: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">deleteClassfiles</a><span class="delimiter">(</span><a href="#321720" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">removed</a><span class="delimiter">)</span>
    <a href="#125107" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#321719" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">added</a> <span title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">++</span> <a href="#125105" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidatedByRemove</a><span class="delimiter">(</span><a href="#321720" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">removed</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The given files have been modified by the user. Recompile
   *  them and all files that depend on them. Only files that
   *  have been previously added as source files are recompiled.
   *  Files that were already compiled are taken out from the result
   *  of the dependency analysis.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="125107">update</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321726">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]" id="321729">coll</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">Map</span><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span> =
        mutable.<span title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</span><span title="(elems: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])*)scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]" class="delimiter">[</span><a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, immutable.<span title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64821" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68001" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
        
    <span class="comment">// See if we really have corresponding symbols, not just those</span>
    <span class="comment">// which share the name</span>
    <span class="keyword">def</span> <a title="(from: RefinedBuildManager.this.compiler.Symbol, to: RefinedBuildManager.this.compiler.Symbol)Boolean" id="321730">isCorrespondingSym</a><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="321734">from</a>: <a href="../symtab/Symbols.scala.html#67320" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="RefinedBuildManager.this.compiler.Symbol" id="321735">to</a>: <a href="../symtab/Symbols.scala.html#67320" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span class="delimiter">(</span><a href="#321734" title="RefinedBuildManager.this.compiler.Symbol">from</a>.<span title="=&gt; Boolean">hasTraitFlag</span> <span title="(x: Boolean)Boolean">==</span> <a href="#321735" title="RefinedBuildManager.this.compiler.Symbol">to</a>.<span title="=&gt; Boolean">hasTraitFlag</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span class="delimiter">(</span><a href="#321734" title="RefinedBuildManager.this.compiler.Symbol">from</a>.<span title="=&gt; Boolean">hasModuleFlag</span> <span title="(x: Boolean)Boolean">==</span> <a href="#321735" title="RefinedBuildManager.this.compiler.Symbol">to</a>.<span title="=&gt; Boolean">hasModuleFlag</span><span class="delimiter">)</span>
      
    <span class="comment">// For testing purposes only, order irrelevant for compilation</span>
    <span class="keyword">def</span> <a title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile])String" id="321731">toStringSet</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321746">set</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> =
      <a href="#321746" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">set</a>.<span title="=&gt; List[scala.tools.nsc.io.AbstractFile]">toList</span> <span title="(f: scala.tools.nsc.io.AbstractFile =&gt; String)(implicit ord: scala.math.Ordering[String])List[scala.tools.nsc.io.AbstractFile]">sortBy</span> <span class="delimiter">(</span><a href="#321753" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../io/AbstractFile.scala.html#96452" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Set(&quot;)" class="string">&quot;Set(&quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="321732">update0</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321812">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="BuildManager.scala.html#125000" title="(sources: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">deleteClassfiles</a><span class="delimiter">(</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="RefinedBuildManager.this.compiler.Run" id="321813">run</a> = <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="#125156" title="()RefinedBuildManager.this.compiler.Run">newRun</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#125113" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36812" title="=&gt; RefinedBuildManager.this.settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; RefinedBuildManager.this.settings.Ybuildmanagerdebug.T">value</a><span class="delimiter">)</span>
        <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64862" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="java.lang.String(&quot;compiling &quot;)" class="string">&quot;compiling &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#321731" title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile])String">toStringSet</a><span class="delimiter">(</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="BuildManager.scala.html#124996" title="(included: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">buildingFiles</a><span class="delimiter">(</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>

      <a href="#321813" title="RefinedBuildManager.this.compiler.Run">run</a>.<a href="../Global.scala.html#72371" title="(files: List[scala.tools.nsc.io.AbstractFile])Unit">compileFiles</a><span class="delimiter">(</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>.<span title="=&gt; List[scala.tools.nsc.io.AbstractFile]">toList</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64821" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67993" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">return</span>
      <span class="delimiter">}</span>

      <span class="comment">// Deterministic behaviour required by partest</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="321814">changesOf</a> = <a href="#321823" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="321823">mutable</a>.<span title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="321825">toString</a>: <span title="String">String</span> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="List[java.lang.String]" id="321843">changesOrdered</a> =
              <a href="#321823" title="=&gt; List[(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])]">toList</a>.<span title="(f: (RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change]) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a title="(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])" id="321867">e</a> =&gt; <span class="delimiter">{</span>
                <a href="#321867" title="(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])">e</a>.<span title="=&gt; RefinedBuildManager.this.compiler.Symbol">_1</span>.<a href="../symtab/Symbols.scala.html#107516" title="()String">toString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                <a href="#321867" title="(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])">e</a>.<span title="=&gt; List[RefinedBuildManager.this.Change]">_2</span>.<span title="(f: RefinedBuildManager.this.Change =&gt; java.lang.String)(implicit ord: scala.math.Ordering[java.lang.String])List[RefinedBuildManager.this.Change]">sortBy</span><span title="object scala.math.Ordering.String" class="delimiter">(</span><a href="#321874" title="RefinedBuildManager.this.Change">_</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;List(&quot;)" class="string">&quot;List(&quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
            <a href="#321843" title="List[java.lang.String]">changesOrdered</a>.<span title="(implicit ord: scala.math.Ordering[java.lang.String])List[java.lang.String]">sorted</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Map(&quot;)" class="string">&quot;Map(&quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="321815">additionalDefs</a>: mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = mutable.<span title="object scala.collection.mutable.HashSet">HashSet</span>.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">empty</span>

      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]]" id="321816">defs</a> = <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108414" title="=&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]]">definitions</a>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="322051">src</a> &lt;- <a href="#321812" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Any)Unit">files</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span class="delimiter">(</span><a href="#322051" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <a href="#321815" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">additionalDefs</a> <span title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])additionalDefs.type">++=</span> <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.
                             <a href="../dependencies/DependencyAnalysis.scala.html#108410" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.FileDependencies">dependencies</a>.<a href="../dependencies/Files.scala.html#259171" title="(depth: Int, changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, mutable.<span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">(</span><a href="#322051" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]" id="322076">syms</a> = <a href="#321816" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">defs</a><span class="delimiter">(</span><a href="#322051" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol" id="322120">sym</a> &lt;- <a href="#322076" title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; Unit)Unit">syms</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span class="delimiter">(</span><a href="#322051" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span>.<span title="(p: RefinedBuildManager.this.SymWithHistory =&gt; Boolean)Option[RefinedBuildManager.this.SymWithHistory]">find</span><span class="delimiter">(</span>
               <a title="RefinedBuildManager.this.SymWithHistory" id="322144">s</a> =&gt; <span class="delimiter">(</span><a href="#322144" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#322120" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                    <a href="#321730" title="(from: RefinedBuildManager.this.compiler.Symbol, to: RefinedBuildManager.this.compiler.Symbol)Boolean">isCorrespondingSym</a><span class="delimiter">(</span><a href="#322144" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>, <a href="#322120" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span>SymWithHistory<span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="322155">oldSym</a>, <a title="RefinedBuildManager.this.compiler.Type" id="322156">info</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.Change]" id="322157">changes</a> = <a href="../dependencies/Changes.scala.html#125071" title="(from: RefinedBuildManager.this.compiler.Type, toSym: RefinedBuildManager.this.compiler.Symbol)List[RefinedBuildManager.this.Change]">changeSet</a><span class="delimiter">(</span><a href="#322155" title="RefinedBuildManager.this.compiler.Symbol">oldSym</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>, <a href="#322120" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span>
                <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.Change]" id="322158">changesErasure</a> =
                    <a href="../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[RefinedBuildManager.this.Change])List[RefinedBuildManager.this.Change]">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64980" title="=&gt; RefinedBuildManager.this.compiler.Run">currentRun</a>.<a href="../Global.scala.html#72331" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../Phase.scala.html#102821" title="=&gt; scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                        <a href="../dependencies/Changes.scala.html#125071" title="(from: RefinedBuildManager.this.compiler.Type, toSym: RefinedBuildManager.this.compiler.Symbol)List[RefinedBuildManager.this.Change]">changeSet</a><span class="delimiter">(</span><a href="#322156" title="RefinedBuildManager.this.compiler.Type">info</a>, <a href="#322120" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                <a href="#321814" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">changesOf</a><span class="delimiter">(</span><a href="#322155" title="RefinedBuildManager.this.compiler.Symbol">oldSym</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#322157" title="List[RefinedBuildManager.this.Change]">changes</a> <span title="(that: scala.collection.GenTraversableOnce[RefinedBuildManager.this.Change])(implicit bf: scala.collection.generic.CanBuildFrom[List[RefinedBuildManager.this.Change],RefinedBuildManager.this.Change,List[RefinedBuildManager.this.Change]])List[RefinedBuildManager.this.Change]">++</span> <a href="#322158" title="List[RefinedBuildManager.this.Change]">changesErasure</a><span class="delimiter">)</span>.<span title="=&gt; List[RefinedBuildManager.this.Change]">distinct</span> 
              <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
                <span class="comment">// a new top level definition</span>
                <a href="#321814" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">changesOf</a><span class="delimiter">(</span><a href="#322120" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span> =
                    <a href="#322120" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">info</a>.<a href="../symtab/Types.scala.html#105322" title="=&gt; List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type]">parents</a>.<span title="(p: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type =&gt; Boolean)List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type]">filter</span><span class="delimiter">(</span><a href="#322245" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">_</a>.<a href="../symtab/Types.scala.html#105313" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">typeSymbol</a>.<span title="=&gt; Boolean">isSealed</span><span class="delimiter">)</span>.<span title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type =&gt; RefinedBuildManager.this.Change)(implicit bf: scala.collection.generic.CanBuildFrom[List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type],RefinedBuildManager.this.Change,List[RefinedBuildManager.this.Change]])List[RefinedBuildManager.this.Change]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,RefinedBuildManager.this.Change,List[RefinedBuildManager.this.Change]]" class="delimiter">(</span>
                      <a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type" id="322265">p</a> =&gt; <a href="../dependencies/Changes.scala.html#125073" title="(sym: RefinedBuildManager.this.compiler.Symbol, msg: String)RefinedBuildManager.this.Change">changeChangeSet</a><span class="delimiter">(</span><a href="#322265" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">p</a>.<a href="../symtab/Types.scala.html#105313" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">typeSymbol</a>,
                                           <a href="#322120" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">sym</a><span title="(other: String)java.lang.String">+</span><span title="java.lang.String(&quot; extends a sealed &quot;)" class="string">&quot; extends a sealed &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#322265" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">p</a>.<a href="../symtab/Types.scala.html#105313" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <span class="comment">// Create a change for the top level classes that were removed</span>
          <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.SymWithHistory]" id="322077">removed</a> = <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span class="delimiter">(</span><a href="#322051" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span> <span title="(p: RefinedBuildManager.this.SymWithHistory =&gt; Boolean)List[RefinedBuildManager.this.SymWithHistory]">filterNot</span> <span class="delimiter">(</span><span class="delimiter">(</span>s:<a href="#320670" title="RefinedBuildManager.this.SymWithHistory">SymWithHistory</a><span class="delimiter">)</span> =&gt;
            <a href="#322076" title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">syms</a>.<span title="(p: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; Boolean)Option[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">find</span><span class="delimiter">(</span><a href="#322325" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">_</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: AnyRef)Boolean">==</span> <span class="delimiter">(</span><a href="#322318" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="322359">s</a> &lt;- <a href="#322077" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit">removed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#321814" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">changesOf</a><span class="delimiter">(</span><a href="#322359" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span> = <span title="(xs: RefinedBuildManager.this.Change*)List[RefinedBuildManager.this.Change]">List</span><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#125072" title="(sym: RefinedBuildManager.this.compiler.Symbol)RefinedBuildManager.this.Change">removeChangeSet</a><span class="delimiter">(</span><a href="#322359" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#125113" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36812" title="=&gt; RefinedBuildManager.this.settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; RefinedBuildManager.this.settings.Ybuildmanagerdebug.T">value</a><span class="delimiter">)</span>
        <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64862" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Changes: &quot;)" class="string">&quot;Changes: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#321814" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changesOf</a><span class="delimiter">)</span>
      <a href="#125110" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">updateDefinitions</a><span class="delimiter">(</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="321817">invalid</a> = <a href="#125109" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidated</a><span class="delimiter">(</span><a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>, <a href="#321814" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changesOf</a>, <a href="#321815" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">additionalDefs</a><span class="delimiter">)</span>
      <a href="#321732" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update0</a><span class="delimiter">(</span><a href="#125108" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], initial: scala.collection.Set[scala.tools.nsc.io.AbstractFile], collect: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">checkCycles</a><span class="delimiter">(</span><a href="#321817" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalid</a>, <a href="#321812" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>, <a href="#321729" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">coll</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#321732" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update0</a><span class="delimiter">(</span><a href="#321726" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
    <span class="comment">// remove the current run in order to save some memory</span>
    <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64979" title="()Unit">dropRun</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// Attempt to break the cycling reference deps as soon as possible and reduce</span>
  <span class="comment">// the number of compilations to minimum without having too coarse grained rules</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], initial: scala.collection.Set[scala.tools.nsc.io.AbstractFile], collect: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="125108">checkCycles</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322396">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322397">initial</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>,
                          <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]" id="322398">collect</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">Map</span><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>:
    <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile], rest: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="322566">followChain</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322568">set</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="322569">rest</a>: immutable.<span title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>:
        immutable.<span title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322570">deps</a>:<span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <a href="#322568" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">set</a>.<span title="(f: scala.tools.nsc.io.AbstractFile =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.Set[scala.tools.nsc.io.AbstractFile],scala.tools.nsc.io.AbstractFile,scala.collection.Set[scala.tools.nsc.io.AbstractFile]])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Set.Coll,scala.tools.nsc.io.AbstractFile,scala.collection.Set[scala.tools.nsc.io.AbstractFile]]" class="delimiter">(</span>
              <a title="scala.tools.nsc.io.AbstractFile" id="322588">s</a> =&gt; <a href="#322398" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a>.<span title="(key: scala.tools.nsc.io.AbstractFile)Option[scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">get</span><span class="delimiter">(</span><a href="#322588" title="scala.tools.nsc.io.AbstractFile">s</a><span class="delimiter">)</span> <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">match</span> <span class="delimiter">{</span>
                     <span class="keyword">case</span> <span title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Some</span><span class="delimiter">(</span><a title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="322592">x</a><span class="delimiter">)</span> =&gt; <a href="#322592" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">x</a>
                     <span class="keyword">case</span> <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">_</span> =&gt; <span title="[A](elems: A*)scala.collection.Set[A]">Set</span><span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="delimiter">[</span><a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322571">newDeps</a> = <a href="#322570" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">deps</a> <span title="(xs: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">--</span> <a href="#322569" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">rest</a>
          <span title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">if</span> <span class="delimiter">(</span><a href="#322571" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">newDeps</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#322569" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">rest</a> <span class="keyword">else</span> <a href="#322566" title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile], rest: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">followChain</a><span class="delimiter">(</span><a href="#322571" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">newDeps</a>, <a href="#322569" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">rest</a> <span title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">++</span> <a href="#322571" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">newDeps</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">var</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322567">res</a>:<span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = mutable.<span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#322396" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>.<span title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span> <a title="scala.tools.nsc.io.AbstractFile" id="322681">f</a> =&gt; 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#322398" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a> <span title="(key: scala.tools.nsc.io.AbstractFile)Boolean">contains</span> <a href="#322681" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="322683">chain</a> = <a href="#322566" title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile], rest: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">followChain</a><span class="delimiter">(</span><span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">(</span><a href="#322681" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span>, immutable.<span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">++</span> <a href="#322396" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>
          <a href="#322683" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">chain</a>.<span title="(f: scala.tools.nsc.io.AbstractFile =&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])Unit">foreach</span><span class="delimiter">(</span><span class="delimiter">(</span>fc: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =&gt; <a href="#322398" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a> <span title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]))collect.type">+=</span> <a href="#322761" title="(x: scala.tools.nsc.io.AbstractFile)ArrowAssoc[scala.tools.nsc.io.AbstractFile]">fc</a> <span title="(y: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])">-&gt;</span> <a href="#322683" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">chain</a><span class="delimiter">)</span>
          <a href="#322567" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a> <span title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">++=</span> <a href="#322683" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">chain</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> 
          <a href="#322567" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a> <span title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">+=</span> <a href="#322681" title="scala.tools.nsc.io.AbstractFile">f</a>
       <span class="delimiter">)</span>

      <a href="#322397" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">initial</a>.<span title="(f: scala.tools.nsc.io.AbstractFile =&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])Unit">foreach</span><span class="delimiter">(</span><span class="delimiter">(</span>f: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =&gt; <a href="#322398" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a> <span title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]))collect.type">+=</span> <span class="delimiter">(</span><a href="#322869" title="(x: scala.tools.nsc.io.AbstractFile)ArrowAssoc[scala.tools.nsc.io.AbstractFile]">f</a> <span title="(y: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])">-&gt;</span> <span class="delimiter">(</span><a href="#322398" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a>.<span title="(key: scala.tools.nsc.io.AbstractFile, default: =&gt; scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">getOrElse</span><span class="delimiter">(</span><a href="#322869" title="scala.tools.nsc.io.AbstractFile">f</a>, immutable.<span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">++</span> <a href="#322567" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">if</span> <span class="delimiter">(</span><a href="#322567" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a>.<span title="(that: scala.collection.GenSet[scala.tools.nsc.io.AbstractFile])Boolean">subsetOf</span><span class="delimiter">(</span><a href="#322397" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">initial</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#322567" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a>
  <span class="delimiter">}</span>  
  
  <span class="comment">/** Return the set of source files that are invalidated by the given changes. */</span>
  <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="125109">invalidated</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322391">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="322392">changesOf</a>: collection.<span title="scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span>,
                  <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322395">processed</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span title="object scala.collection.Set">Set</span>.<span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">empty</span><span class="delimiter">)</span>:
    <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="322965">buf</a> = <span title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="322966">newChangesOf</a> = <span title="()scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">var</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322967">directDeps</a> = 
      <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108410" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.FileDependencies">dependencies</a>.<a href="../dependencies/Files.scala.html#259171" title="(depth: Int, changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <a href="#322391" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit" id="322968">invalidate</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="322971">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String" id="322972">reason</a>: <span title="String">String</span>, <a title="RefinedBuildManager.this.Change" id="322973">change</a>: <a href="../dependencies/Changes.scala.html#125035" title="RefinedBuildManager.this.Change">Change</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#125113" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36812" title="=&gt; RefinedBuildManager.this.settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; RefinedBuildManager.this.settings.Ybuildmanagerdebug.T">value</a><span class="delimiter">)</span>
        <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64862" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="java.lang.String(&quot;invalidate &quot;)" class="string">&quot;invalidate &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#322971" title="scala.tools.nsc.io.AbstractFile">file</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; because &quot;)" class="string">&quot; because &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#322972" title="String">reason</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#322973" title="RefinedBuildManager.this.Change">change</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
      <a href="#322965" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a> <span title="(elem: scala.tools.nsc.io.AbstractFile)buf.type">+=</span> <a href="#322971" title="scala.tools.nsc.io.AbstractFile">file</a>
      <a href="#322967" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">directDeps</a> <span title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">-=</span> <a href="#322971" title="scala.tools.nsc.io.AbstractFile">file</a>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="323039">syms</a> &lt;- <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</span><a href="#322971" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">)</span>     <span class="comment">// fixes #2557</span>
        <a href="#322966" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">newChangesOf</a><span class="delimiter">(</span><a href="#323039" title="RefinedBuildManager.this.SymWithHistory">syms</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span> = <span title="(xs: RefinedBuildManager.this.Change*)List[RefinedBuildManager.this.Change]">List</span><span class="delimiter">(</span><a href="#322973" title="RefinedBuildManager.this.Change">change</a>, <a href="../dependencies/Changes.scala.html#125074" title="(sym: RefinedBuildManager.this.compiler.Symbol)RefinedBuildManager.this.Change">parentChangeSet</a><span class="delimiter">(</span><a href="#323039" title="RefinedBuildManager.this.SymWithHistory">syms</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="()Unit">break</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="323095">oldSym</a>, <a title="List[RefinedBuildManager.this.Change]" id="323096">changes</a><span class="delimiter">)</span> &lt;- <a href="#322392" title="(f: (RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change]) =&gt; Unit)Unit">changesOf</a>; <a title="RefinedBuildManager.this.Change" id="323116">change</a> &lt;- <a href="#323096" title="(f: RefinedBuildManager.this.Change =&gt; Unit)Unit">changes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit" id="323117">checkParents</a><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="323121">cls</a>: <a href="../symtab/Symbols.scala.html#67320" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="scala.tools.nsc.io.AbstractFile" id="323122">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Boolean" id="323123">parentChange</a> = <a href="#323121" title="RefinedBuildManager.this.compiler.Symbol">cls</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>.<a href="../symtab/Types.scala.html#105322" title="=&gt; List[RefinedBuildManager.this.compiler.Type]">parents</a>.<span title="(p: RefinedBuildManager.this.compiler.Type =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#323136" title="RefinedBuildManager.this.compiler.Type">_</a>.<a href="../symtab/Types.scala.html#105313" title="=&gt; RefinedBuildManager.this.compiler.Symbol">typeSymbol</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#323095" title="RefinedBuildManager.this.compiler.Symbol">oldSym</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
          <span class="comment">// if (settings.buildmanagerdebug.value)</span>
          <span class="comment">//   compiler.inform(&quot;checkParents &quot; + cls + &quot; oldSym: &quot; + oldSym + &quot; parentChange: &quot; + parentChange + &quot; &quot; + cls.info.parents)</span>
        <a href="#323116" title="RefinedBuildManager.this.Change">change</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Changed</span><span class="delimiter">(</span>Class<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#323123" title="Boolean">parentChange</a> =&gt;
            <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323122" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;parents have changed&quot;)" class="string">&quot;parents have changed&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">Changed</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#323123" title="Boolean">parentChange</a> =&gt;
            <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323122" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;inherited method changed&quot;)" class="string">&quot;inherited method changed&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">Added</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#323123" title="Boolean">parentChange</a> =&gt;
            <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323122" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;inherited new method&quot;)" class="string">&quot;inherited new method&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">Removed</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#323123" title="Boolean">parentChange</a> =&gt;
            <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323122" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;inherited method removed&quot;)" class="string">&quot;inherited method removed&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit" id="323118">checkInterface</a><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="323150">cls</a>: <a href="../symtab/Symbols.scala.html#67320" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="scala.tools.nsc.io.AbstractFile" id="323151">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#323116" title="RefinedBuildManager.this.Change">change</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Added</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span><a title="String" id="323153">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#323150" title="RefinedBuildManager.this.compiler.Symbol">cls</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>.<a href="../symtab/Types.scala.html#105346" title="=&gt; RefinedBuildManager.this.compiler.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#112959" title="=&gt; Iterator[RefinedBuildManager.this.compiler.Symbol]">iterator</a>.<span title="(p: RefinedBuildManager.this.compiler.Symbol =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#323171" title="RefinedBuildManager.this.compiler.Symbol">_</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#323153" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323151" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;of new method with existing name&quot;)" class="string">&quot;of new method with existing name&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">Changed</span><span class="delimiter">(</span>Class<span class="delimiter">(</span><a title="String" id="323180">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#323150" title="RefinedBuildManager.this.compiler.Symbol">cls</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>.<a href="../symtab/Types.scala.html#105313" title="=&gt; RefinedBuildManager.this.compiler.Symbol">typeSymbol</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#323180" title="String">name</a><span class="delimiter">)</span>
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323151" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;self type changed&quot;)" class="string">&quot;self type changed&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
            <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Unit" id="323119">checkReferences</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="323189">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">//if (settings.buildmanagerdebug.value)</span>
        <span class="comment">//  compiler.inform(file + &quot;:&quot; + references(file))</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="323190">refs</a> = <a href="#125095" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[String]">references</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#323190" title="scala.collection.immutable.Set[String]">refs</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it is a direct dependency and we don\'t yet have finer-grained dependency information&quot;)" class="string">&quot;it is a direct dependency and we don't yet have finer-grained dependency information&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#323116" title="RefinedBuildManager.this.Change">change</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">Removed</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span><a title="String" id="323209">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#323190" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#323209" title="String">name</a><span class="delimiter">)</span> =&gt;
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it references deleted definition&quot;)" class="string">&quot;it references deleted definition&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Removed</span><span class="delimiter">(</span>Class<span class="delimiter">(</span><a title="String" id="323222">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#323190" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#323222" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it references deleted class&quot;)" class="string">&quot;it references deleted class&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Changed</span><span class="delimiter">(</span>Class<span class="delimiter">(</span><a title="String" id="323235">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#323190" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#323235" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it references changed class&quot;)" class="string">&quot;it references changed class&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Changed</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span><a title="String" id="323248">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#323190" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#323248" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it references changed definition&quot;)" class="string">&quot;it references changed definition&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Added</span><span class="delimiter">(</span>Definition<span class="delimiter">(</span><a title="String" id="323261">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#323190" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#323261" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323189" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it references added definition&quot;)" class="string">&quot;it references added definition&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Unit" id="323120">checkInheritedReferences</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="323273">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]" id="323274">refs</a> = <a href="#125098" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">inherited</a><span class="delimiter">(</span><a href="#323273" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#323274" title="scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">refs</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <a href="#323116" title="RefinedBuildManager.this.Change">change</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">ParentChanged</span><span class="delimiter">(</span>Class<span class="delimiter">(</span><a title="String" id="323301">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <span class="keyword">for</span> <span class="delimiter">(</span>Inherited<span class="delimiter">(</span><a title="String" id="323330">q</a>, <a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Name" id="323331">member</a><span class="delimiter">)</span> &lt;- <a href="#323274" title="scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">refs</a>.<span title="(p: RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited =&gt; Boolean)Option[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">find</span><a href="#323318" title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited =&gt; Unit)Unit" class="delimiter">(</a><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited" id="323307">p</a> =&gt; <span class="delimiter">(</span><a href="#323307" title="RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited">p</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#323307" title="RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited">p</a>.<a href="../dependencies/DependencyAnalysis.scala.html#261077" title="=&gt; String">qualifier</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#323301" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>;
                   <a title="scala.tools.nsc.io.AbstractFile" id="323340">classFile</a> &lt;- <a href="#125101" title="=&gt; scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">classes</a>.<span title="(key: String)Option[scala.tools.nsc.io.AbstractFile]">get</span><span title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit" class="delimiter">(</span><a href="#323330" title="String">q</a><span class="delimiter">)</span>;
                   <a title="List[RefinedBuildManager.this.SymWithHistory]" id="323347">defs</a> &lt;- <a href="#125092" title="=&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]">definitions</a>.<span title="(key: scala.tools.nsc.io.AbstractFile)Option[List[RefinedBuildManager.this.SymWithHistory]]">get</span><span title="(f: List[RefinedBuildManager.this.SymWithHistory] =&gt; Unit)Unit" class="delimiter">(</span><a href="#323340" title="scala.tools.nsc.io.AbstractFile">classFile</a><span class="delimiter">)</span>;
                   <a title="RefinedBuildManager.this.SymWithHistory" id="323377">s</a> &lt;- <a href="#323347" title="List[RefinedBuildManager.this.SymWithHistory]">defs</a>.<span title="(p: RefinedBuildManager.this.SymWithHistory =&gt; Boolean)Option[RefinedBuildManager.this.SymWithHistory]">find</span><span title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="323354">p</a> =&gt; <a href="#323354" title="RefinedBuildManager.this.SymWithHistory">p</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#323330" title="String">q</a><span class="delimiter">)</span>
                     <span class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#323377" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; RefinedBuildManager.this.compiler.Type">tpe</a>.<a href="../symtab/Types.scala.html#105355" title="(name: RefinedBuildManager.this.compiler.Name)RefinedBuildManager.this.compiler.Symbol">nonPrivateMember</a><span class="delimiter">(</span><a href="#323331" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Name">member</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../symtab/Symbols.scala.html#67328" title="object RefinedBuildManager.this.compiler.NoSymbol">NoSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#322968" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Unit">invalidate</a><span class="delimiter">(</span><a href="#323273" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="java.lang.String(&quot;it references invalid (no longer inherited) definition&quot;)" class="string">&quot;it references invalid (no longer inherited) definition&quot;</span>, <a href="#323116" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
              <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

        <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="323408">file</a> &lt;- <a href="#322967" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">directDeps</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="(op: =&gt; Unit)Unit">breakable</span> <span class="delimiter">{</span>
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="323445">cls</a> &lt;- <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</span><a href="#323408" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#323117" title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit">checkParents</a><span class="delimiter">(</span><a href="#323445" title="RefinedBuildManager.this.SymWithHistory">cls</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>, <a href="#323408" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="323483">cls</a> &lt;- <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</span><a href="#323408" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#323118" title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit">checkInterface</a><span class="delimiter">(</span><a href="#323483" title="RefinedBuildManager.this.SymWithHistory">cls</a>.<a href="#323744" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>, <a href="#323408" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
            <a href="#323119" title="(file: scala.tools.nsc.io.AbstractFile)Unit">checkReferences</a><span class="delimiter">(</span><a href="#323408" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
            <a href="#323120" title="(file: scala.tools.nsc.io.AbstractFile)Unit">checkInheritedReferences</a><span class="delimiter">(</span><a href="#323408" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">if</span> <span class="delimiter">(</span><a href="#322965" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#322395" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">processed</a>
    <span class="keyword">else</span>
      <a href="#125109" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidated</a><span class="delimiter">(</span><a href="#322965" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a>.<span title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">clone</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">--=</span> <a href="#322395" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">processed</a>, <a href="#322966" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">newChangesOf</a>, <a href="#322395" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">processed</a> <span title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">++</span> <a href="#322965" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Update the map of definitions per source file */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="125110">updateDefinitions</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="322389">files</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="323673">src</a> &lt;- <a href="#322389" title="(f: scala.tools.nsc.io.AbstractFile =&gt; (scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.Set[scala.tools.nsc.io.AbstractFile],(scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]),scala.collection.Set[(scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol])]])scala.collection.Set[(scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol])]">files</a>; <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]" id="323674">localDefs</a> = <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108414" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">definitions</a><span class="delimiter">(</span><a href="#323673" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#125092" title="(key: scala.tools.nsc.io.AbstractFile, value: List[RefinedBuildManager.this.SymWithHistory])Unit">definitions</a><span class="delimiter">(</span><a href="#323673" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#323674" title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">localDefs</a> <span title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; RefinedBuildManager.this.SymWithHistory)(implicit bf: scala.collection.generic.CanBuildFrom[List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol],RefinedBuildManager.this.SymWithHistory,List[RefinedBuildManager.this.SymWithHistory]])List[RefinedBuildManager.this.SymWithHistory]">map</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol" id="323704">s</a> =&gt; <span class="delimiter">{</span>
        <a href="#18016" title="RefinedBuildManager.this.type" class="keyword">this</a>.<a href="#125101" title="=&gt; scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">classes</a> <span title="(kv: (java.lang.String, scala.tools.nsc.io.AbstractFile))scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">+=</span> <a href="#323704" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a>.<span title="(x: String)ArrowAssoc[String]">fullName</span> <span title="(y: scala.tools.nsc.io.AbstractFile)(String, scala.tools.nsc.io.AbstractFile)">-&gt;</span> <a href="#323673" title="scala.tools.nsc.io.AbstractFile">src</a>
        <a href="#320670" title="(sym: RefinedBuildManager.this.compiler.Symbol, befErasure: RefinedBuildManager.this.compiler.Type)RefinedBuildManager.this.SymWithHistory">SymWithHistory</a><span class="delimiter">(</span>
          <a href="#323704" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a>.<a href="../symtab/Symbols.scala.html#107453" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">cloneSymbol</a>,
          <a href="../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type)RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64980" title="=&gt; RefinedBuildManager.this.compiler.Run">currentRun</a>.<a href="../Global.scala.html#72331" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../Phase.scala.html#102821" title="=&gt; scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#323704" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">info</a>.<a href="../symtab/Types.scala.html#105387" title="(owner: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol)RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">cloneInfo</a><span class="delimiter">(</span><a href="#323704" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#18016" title="RefinedBuildManager.this.type" class="keyword">this</a>.<a href="#125095" title="(x$1: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]])Unit">references</a> = <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108416" title="=&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">references</a>
    <a href="#18016" title="RefinedBuildManager.this.type" class="keyword">this</a>.<a href="#125098" title="(x$1: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]])Unit">inherited</a> = <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108418" title="=&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]]">inherited</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Load saved dependency information. */</span>
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, toFile: String =&gt; scala.tools.nsc.io.AbstractFile)Boolean" id="125111">loadFrom</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="323792">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String =&gt; scala.tools.nsc.io.AbstractFile" id="323793">toFile</a>: String =&gt; AbstractFile<span class="delimiter">)</span> : <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="323795">success</a> = <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108421" title="(f: scala.tools.nsc.io.AbstractFile, toFile: String =&gt; scala.tools.nsc.io.AbstractFile)Boolean">loadFrom</a><span class="delimiter">(</span><a href="#323792" title="scala.tools.nsc.io.AbstractFile">file</a>, <a href="#323793" title="String =&gt; scala.tools.nsc.io.AbstractFile">toFile</a><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#323795" title="Boolean">success</a><span class="delimiter">)</span>
      <a href="#125090" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <span title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">++=</span> <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108413" title="=&gt; scala.collection.Set[scala.tools.nsc.io.AbstractFile]">managedFiles</a>
    <a href="#323795" title="Boolean">success</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Save dependency information to `file'. */</span>
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, fromFile: scala.tools.nsc.io.AbstractFile =&gt; String)Unit" id="125112">saveTo</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="323805">file</a>: <a href="../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile =&gt; String" id="323806">fromFile</a>: AbstractFile =&gt; String<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108406" title="(file: scala.tools.nsc.io.AbstractFile)Unit">dependenciesFile</a> = <a href="#323805" title="scala.tools.nsc.io.AbstractFile">file</a>
    <a href="#125083" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#64942" title="object RefinedBuildManager.this.compiler.dependencyAnalysis">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#108420" title="(fromFile: scala.tools.nsc.io.AbstractFile =&gt; String)Unit">saveDependencies</a><span class="delimiter">(</span><a href="#323806" title="scala.tools.nsc.io.AbstractFile =&gt; String">fromFile</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>