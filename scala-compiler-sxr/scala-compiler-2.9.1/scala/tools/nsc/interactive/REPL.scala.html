<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/REPL.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2009-2011 Scala Solutions and LAMP/EPFL
 * @author Martin Odersky
 */</span>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> scala.concurrent.SyncVar
<span class="keyword">import</span> scala.tools.nsc.util._
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.ast._
<span class="keyword">import</span> scala.tools.nsc.reporters._
<span class="keyword">import</span> scala.tools.nsc.io._

<span class="comment">/** Interface of interactive compiler to a client such as an IDE
 */</span>
<span class="keyword">object</span> <a title="object scala.tools.nsc.interactive.REPL" id="17717">REPL</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="318760">versionMsg</a> = <span title="java.lang.String(&quot;Scala compiler &quot;)" class="string">&quot;Scala compiler &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <a href="../Properties.scala.html#11276" title="object scala.tools.nsc.Properties">Properties</a>.<span title="=&gt; java.lang.String">versionString</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -- &quot;)" class="string">&quot; -- &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <a href="../Properties.scala.html#11276" title="object scala.tools.nsc.Properties">Properties</a>.<span title="=&gt; String">copyrightString</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="318762">prompt</a> = <span title="java.lang.String(&quot;&gt; &quot;)" class="string">&quot;&gt; &quot;</span>

  <span class="keyword">var</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="318765">reporter</a>: <a href="../reporters/ConsoleReporter.scala.html#22888" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="318767">replError</a><span class="delimiter">(</span><a title="String" id="318778">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67997" title="(pos: scala.tools.nsc.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span class="comment">/*new Position */</span><a href="../util/Position.scala.html#99306" title="(msg: String)scala.tools.nsc.util.FakePos">FakePos</a><span class="delimiter">(</span><span title="java.lang.String(&quot;scalac&quot;)" class="string">&quot;scalac&quot;</span><span class="delimiter">)</span>,
                   <a href="#318778" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012  scalac -help  gives more information&quot;)" class="string">&quot;\n  scalac -help  gives more information&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="318768">process</a><span class="delimiter">(</span><a title="Array[String]" id="318782">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="318784">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../Settings.scala.html#10939" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#318767" title="(msg: String)Unit">replError</a><span class="delimiter">)</span>
    <a href="#318765" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = <a href="../reporters/ConsoleReporter.scala.html#72233" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="../reporters/ConsoleReporter.scala.html#22888" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#318784" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="318785">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../CompilerCommand.scala.html#10690" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="#318782" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<span title="=&gt; List[String]">toList</span>, <a href="#318784" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318785" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69974" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#36898" title="=&gt; command.settings.BooleanSetting">version</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; command.settings.version.T">value</a><span class="delimiter">)</span>
      <a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67995" title="(pos: scala.tools.nsc.util.Position, msg: String, force: Boolean)Unit">info</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#318760" title="=&gt; java.lang.String">versionMsg</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">object</span> <a title="object compiler" id="318920">compiler</a> <a href="Global.scala.html#124417" title="ScalaObject" class="keyword">extends</a> <a href="Global.scala.html#17275" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">(</span><a href="#318785" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69974" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
<span class="comment">//          printTypings = true</span>
        <span class="delimiter">}</span> 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67993" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#72251" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318785" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69994" title="=&gt; Boolean">shouldStopWithInfo</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67995" title="(pos: scala.tools.nsc.util.Position, msg: String, force: Boolean)Unit">info</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#318785" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69995" title="(global: scala.tools.nsc.Global)String">getInfoMessage</a><span class="delimiter">(</span><a href="#318920" title="object compiler">compiler</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#318771" title="(comp: scala.tools.nsc.interactive.Global)Unit">run</a><span class="delimiter">(</span><a href="#318920" title="object compiler">compiler</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="318927">ex</a> @ FatalError<span class="delimiter">(</span><a title="String" id="318928">msg</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span> <span title="(x: Boolean)Boolean">||</span> <a href="#318785" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69974" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36760" title="=&gt; command.settings.BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; command.settings.debug.T">value</a><span class="delimiter">)</span> <span class="comment">// !!!</span>
            <a href="#318927" title="scala.tools.nsc.FatalError">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>;
        <a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67997" title="(pos: scala.tools.nsc.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="java.lang.String(&quot;fatal error: &quot;)" class="string">&quot;fatal error: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#318928" title="String">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="318769">main</a><span class="delimiter">(</span><a title="Array[String]" id="318931">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#318768" title="(args: Array[String])Unit">process</a><span class="delimiter">(</span><a href="#318931" title="Array[String]">args</a><span class="delimiter">)</span>
    sys.<span title="(status: Int)Nothing">exit</span><span class="delimiter">(</span><span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#318765" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#67993" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(action: String =&gt; Unit)Unit" id="318770">loop</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="318935">action</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="object Console">Console</span>.<span title="(obj: Any)Unit">print</span><span class="delimiter">(</span><a href="#318762" title="=&gt; java.lang.String">prompt</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="318937">line</a> = <span title="object Console">Console</span>.<span title="()String">readLine</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318937" title="String">line</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#318935" title="(v1: String)Unit">action</a><span class="delimiter">(</span><a href="#318937" title="String">line</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#318770" title="(action: String =&gt; Unit)Unit">loop</a><span class="delimiter">(</span><a href="#318935" title="String =&gt; Unit">action</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">_</span>: java.io.<span title="java.io.EOFException">EOFException</span> =&gt; <span class="comment">//nop</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Commands:
   *
   *  reload file1 ... fileN
   *  typeat file off1 off2?
   *  complete file off1 off2?
   */</span>
  <span class="keyword">def</span> <a title="(comp: scala.tools.nsc.interactive.Global)Unit" id="318771">run</a><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Global" id="318925">comp</a>: <a href="Global.scala.html#17275" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[Unit]" id="318945">reloadResult</a> = <span title="scala.tools.nsc.interactive.Response[Unit]" class="keyword">new</span> <a href="Response.scala.html#17914" title="scala.tools.nsc.interactive.Response[Unit]">Response</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="318946">typeatResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#17914" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[List[comp.Member]]" id="318947">completeResult</a> = <span title="scala.tools.nsc.interactive.Response[List[comp.Member]]" class="keyword">new</span> <a href="Response.scala.html#17914" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">Response</a><span class="delimiter">[</span>List<span class="delimiter">[</span>comp.Member<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="318948">typedResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#17914" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="318949">structureResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#17914" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition" id="318950">makePos</a><span class="delimiter">(</span><a title="String" id="318955">file</a>: <span title="String">String</span>, <a title="String" id="318956">off1</a>: <span title="String">String</span>, <a title="String" id="318957">off2</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.BatchSourceFile" id="318958">source</a> = <a href="#318772" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#318955" title="String">file</a><span class="delimiter">)</span>
      <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="RangePositions.scala.html#124327" title="(source: scala.tools.nsc.util.SourceFile, start: Int, point: Int, end: Int)scala.tools.nsc.util.RangePosition">rangePos</a><span class="delimiter">(</span><a href="#318958" title="scala.tools.nsc.util.BatchSourceFile">source</a>, <a href="#318956" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<span title="=&gt; Int">toInt</span>, <a href="#318956" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<span title="=&gt; Int">toInt</span>, <a href="#318957" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off2</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)Unit" id="318951">doTypeAt</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="318978">pos</a>: <a href="../util/Position.scala.html#30599" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124283" title="(pos: comp.Position, response: comp.Response[comp.Tree])Unit">askTypeAt</a><span class="delimiter">(</span><a href="#318978" title="scala.tools.nsc.util.Position">pos</a>, <a href="#318946" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
      <a href="#318773" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#318946" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)Unit" id="318952">doComplete</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="318987">pos</a>: <a href="../util/Position.scala.html#30599" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124286" title="(pos: comp.Position, response: comp.Response[List[comp.Member]])Unit">askTypeCompletion</a><span class="delimiter">(</span><a href="#318987" title="scala.tools.nsc.util.Position">pos</a>, <a href="#318947" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
      <a href="#318773" title="(svar: scala.tools.nsc.interactive.Response[List[comp.Member]])Unit">show</a><span class="delimiter">(</span><a href="#318947" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(file: String)Unit" id="318953">doTypedTree</a><span class="delimiter">(</span><a title="String" id="318993">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124284" title="(source: scala.tools.nsc.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#318772" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#318993" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#318948" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
      <a href="#318773" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#318948" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(file: String)Unit" id="318954">doStructure</a><span class="delimiter">(</span><a title="String" id="319000">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124291" title="(source: scala.tools.nsc.util.SourceFile, keepLoaded: Boolean, response: comp.Response[comp.Tree])Unit">askParsedEntered</a><span class="delimiter">(</span><a href="#318772" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319000" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#318949" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
      <a href="#318773" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#318949" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <a href="#318770" title="(action: String =&gt; Unit)Unit">loop</a> <span class="delimiter">{</span> <a title="String" id="319008">line</a> =&gt;
      <span class="delimiter">(</span><a href="#319008" title="String">line</a> <span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">split</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit" class="string">&quot;reload&quot;</span> :: <a title="List[java.lang.String]" id="319118">args</a> =&gt; 
          <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124281" title="(sources: List[scala.tools.nsc.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="#319118" title="List[java.lang.String]">args</a> <span title="(f: java.lang.String =&gt; scala.tools.nsc.util.BatchSourceFile)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],scala.tools.nsc.util.BatchSourceFile,List[scala.tools.nsc.util.SourceFile]])List[scala.tools.nsc.util.SourceFile]">map</span> <a href="#318772" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a>, <a href="#318945" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <a href="#318773" title="(svar: scala.tools.nsc.interactive.Response[Unit])Unit">show</a><span class="delimiter">(</span><a href="#318945" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit" class="string">&quot;reloadAndAskType&quot;</span> :: <a title="java.lang.String" id="319179">file</a> :: <a title="java.lang.String" id="319184">millis</a> :: <span title="object Nil">Nil</span> =&gt;
          <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124281" title="(sources: List[scala.tools.nsc.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><span title="(xs: scala.tools.nsc.util.BatchSourceFile*)List[scala.tools.nsc.util.BatchSourceFile]">List</span><span class="delimiter">(</span><a href="#318772" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319179" title="java.lang.String">file</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#318945" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <span title="object java.lang.Thread">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><a href="#319184" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">millis</a>.<span title="=&gt; Long">toInt</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ask type now&quot;)" class="string">&quot;ask type now&quot;</span><span class="delimiter">)</span>
          <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124284" title="(source: scala.tools.nsc.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#318772" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319179" title="java.lang.String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#318948" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
          <a href="#318948" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a>.<a href="Response.scala.html#124547" title="=&gt; Either[comp.Tree,Throwable]">get</a>
        <span class="keyword">case</span> <a href="#319202" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typed&quot;)" class="string">&quot;typed&quot;</span>, <a title="java.lang.String" id="319224">file</a><span class="delimiter">)</span> =&gt;
          <a href="#318953" title="(file: String)Unit">doTypedTree</a><span class="delimiter">(</span><a href="#319224" title="java.lang.String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319226" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typeat&quot;)" class="string">&quot;typeat&quot;</span>, <a title="java.lang.String" id="319237">file</a>, <a title="java.lang.String" id="319238">off1</a>, <a title="java.lang.String" id="319239">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#318951" title="(pos: scala.tools.nsc.util.Position)Unit">doTypeAt</a><span class="delimiter">(</span><a href="#318950" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319237" title="java.lang.String">file</a>, <a href="#319238" title="java.lang.String">off1</a>, <a href="#319239" title="java.lang.String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319241" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typeat&quot;)" class="string">&quot;typeat&quot;</span>, <a title="java.lang.String" id="319252">file</a>, <a title="java.lang.String" id="319253">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#318951" title="(pos: scala.tools.nsc.util.Position)Unit">doTypeAt</a><span class="delimiter">(</span><a href="#318950" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319252" title="java.lang.String">file</a>, <a href="#319253" title="java.lang.String">off1</a>, <a href="#319253" title="java.lang.String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319255" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;complete&quot;)" class="string">&quot;complete&quot;</span>, <a title="java.lang.String" id="319266">file</a>, <a title="java.lang.String" id="319267">off1</a>, <a title="java.lang.String" id="319268">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#318952" title="(pos: scala.tools.nsc.util.Position)Unit">doComplete</a><span class="delimiter">(</span><a href="#318950" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319266" title="java.lang.String">file</a>, <a href="#319267" title="java.lang.String">off1</a>, <a href="#319268" title="java.lang.String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319270" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;complete&quot;)" class="string">&quot;complete&quot;</span>, <a title="java.lang.String" id="319281">file</a>, <a title="java.lang.String" id="319282">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#318952" title="(pos: scala.tools.nsc.util.Position)Unit">doComplete</a><span class="delimiter">(</span><a href="#318950" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319281" title="java.lang.String">file</a>, <a href="#319282" title="java.lang.String">off1</a>, <a href="#319282" title="java.lang.String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319284" title="Nothing">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;quit&quot;)" class="string">&quot;quit&quot;</span><span class="delimiter">)</span> =&gt;
          <a href="#318925" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124293" title="()Unit">askShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
          sys.<span title="(status: Int)Nothing">exit</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319298" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;structure&quot;)" class="string">&quot;structure&quot;</span>, <a title="java.lang.String" id="319309">file</a><span class="delimiter">)</span> =&gt;
          <a href="#318954" title="(file: String)Unit">doStructure</a><span class="delimiter">(</span><a href="#319309" title="java.lang.String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;unrecongized command&quot;)" class="string">&quot;unrecongized command&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)scala.tools.nsc.util.BatchSourceFile" id="318772">toSourceFile</a><span class="delimiter">(</span><a title="String" id="318959">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../util/SourceFile.scala.html#96523" title="(_file: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.util.BatchSourceFile" class="keyword">new</a> <a href="../util/SourceFile.scala.html#30812" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="../io/PlainFile.scala.html#21534" title="scala.tools.nsc.io.PlainFile">PlainFile</a><span class="delimiter">(</span><a href="../io/Path.scala.html#68025" title="implicit scala.tools.nsc.io.Path.jfile2path : (jfile: scala.tools.nsc.io.package.JFile)scala.tools.nsc.io.Path" class="keyword">new</a> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><a href="#318959" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](svar: scala.tools.nsc.interactive.Response[T])Unit" id="318773">show</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="318775">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Response[T]" id="318981">svar</a>: <a href="Response.scala.html#17914" title="scala.tools.nsc.interactive.Response[T]">Response</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#318981" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#124547" title="=&gt; Either[T,Throwable]">get</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Left</span><span class="delimiter">(</span><a title="T" id="319315">result</a><span class="delimiter">)</span> =&gt; <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;==&gt; &quot;)" class="string">&quot;==&gt; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#319315" title="T">result</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Right</span><span class="delimiter">(</span><a title="Throwable" id="319319">exc</a><span class="delimiter">)</span> =&gt; <a href="#319319" title="Throwable">exc</a>.<span title="()Unit">printStackTrace</span>; <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ERROR: &quot;)" class="string">&quot;ERROR: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#319319" title="Throwable">exc</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#318981" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#124552" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>