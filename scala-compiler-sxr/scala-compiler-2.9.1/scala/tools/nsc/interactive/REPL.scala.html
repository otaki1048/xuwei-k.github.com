<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/REPL.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2009-2011 Scala Solutions and LAMP/EPFL
 * @author Martin Odersky
 */</span>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> scala.concurrent.SyncVar
<span class="keyword">import</span> scala.tools.nsc.util._
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.ast._
<span class="keyword">import</span> scala.tools.nsc.reporters._
<span class="keyword">import</span> scala.tools.nsc.io._

<span class="comment">/** Interface of interactive compiler to a client such as an IDE
 */</span>
<span class="keyword">object</span> <a title="object scala.tools.nsc.interactive.REPL" id="17706">REPL</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="318824">versionMsg</a> = <span title="java.lang.String(&quot;Scala compiler &quot;)" class="string">&quot;Scala compiler &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <a href="../Properties.scala.html#11265" title="object scala.tools.nsc.Properties">Properties</a>.<span title="=&gt; java.lang.String">versionString</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -- &quot;)" class="string">&quot; -- &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <a href="../Properties.scala.html#11265" title="object scala.tools.nsc.Properties">Properties</a>.<span title="=&gt; String">copyrightString</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="318826">prompt</a> = <span title="java.lang.String(&quot;&gt; &quot;)" class="string">&quot;&gt; &quot;</span>

  <span class="keyword">var</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="318829">reporter</a>: <a href="../reporters/ConsoleReporter.scala.html#22877" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="318831">replError</a><span class="delimiter">(</span><a title="String" id="318842">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68008" title="(pos: scala.tools.nsc.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span class="comment">/*new Position */</span><a href="../util/Position.scala.html#99329" title="(msg: String)scala.tools.nsc.util.FakePos">FakePos</a><span class="delimiter">(</span><span title="java.lang.String(&quot;scalac&quot;)" class="string">&quot;scalac&quot;</span><span class="delimiter">)</span>,
                   <a href="#318842" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012  scalac -help  gives more information&quot;)" class="string">&quot;\n  scalac -help  gives more information&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="318832">process</a><span class="delimiter">(</span><a title="Array[String]" id="318846">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="318848">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../Settings.scala.html#10928" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#318831" title="(msg: String)Unit">replError</a><span class="delimiter">)</span>
    <a href="#318829" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = <a href="../reporters/ConsoleReporter.scala.html#72244" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="../reporters/ConsoleReporter.scala.html#22877" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#318848" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="318849">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../CompilerCommand.scala.html#10679" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="#318846" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<span title="=&gt; List[String]">toList</span>, <a href="#318848" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318849" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69985" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#36885" title="=&gt; command.settings.BooleanSetting">version</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; command.settings.version.T">value</a><span class="delimiter">)</span>
      <a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68006" title="(pos: scala.tools.nsc.util.Position, msg: String, force: Boolean)Unit">info</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#318824" title="=&gt; java.lang.String">versionMsg</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">object</span> <a title="object compiler" id="318984">compiler</a> <a href="Global.scala.html#124595" title="ScalaObject" class="keyword">extends</a> <a href="Global.scala.html#17264" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">(</span><a href="#318849" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69985" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
<span class="comment">//          printTypings = true</span>
        <span class="delimiter">}</span> 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68004" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#72262" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#318849" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#70005" title="=&gt; Boolean">shouldStopWithInfo</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68006" title="(pos: scala.tools.nsc.util.Position, msg: String, force: Boolean)Unit">info</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#318849" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#70006" title="(global: scala.tools.nsc.Global)String">getInfoMessage</a><span class="delimiter">(</span><a href="#318984" title="object compiler">compiler</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#318835" title="(comp: scala.tools.nsc.interactive.Global)Unit">run</a><span class="delimiter">(</span><a href="#318984" title="object compiler">compiler</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="318991">ex</a> @ FatalError<span class="delimiter">(</span><a title="String" id="318992">msg</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span> <span title="(x: Boolean)Boolean">||</span> <a href="#318849" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#69985" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; command.settings.BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; command.settings.debug.T">value</a><span class="delimiter">)</span> <span class="comment">// !!!</span>
            <a href="#318991" title="scala.tools.nsc.FatalError">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>;
        <a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68008" title="(pos: scala.tools.nsc.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="java.lang.String(&quot;fatal error: &quot;)" class="string">&quot;fatal error: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#318992" title="String">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="318833">main</a><span class="delimiter">(</span><a title="Array[String]" id="318995">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#318832" title="(args: Array[String])Unit">process</a><span class="delimiter">(</span><a href="#318995" title="Array[String]">args</a><span class="delimiter">)</span>
    sys.<span title="(status: Int)Nothing">exit</span><span class="delimiter">(</span><span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#318829" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#68004" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(action: String =&gt; Unit)Unit" id="318834">loop</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="318999">action</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="object Console">Console</span>.<span title="(obj: Any)Unit">print</span><span class="delimiter">(</span><a href="#318826" title="=&gt; java.lang.String">prompt</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="319001">line</a> = <span title="object Console">Console</span>.<span title="()String">readLine</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#319001" title="String">line</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#318999" title="(v1: String)Unit">action</a><span class="delimiter">(</span><a href="#319001" title="String">line</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#318834" title="(action: String =&gt; Unit)Unit">loop</a><span class="delimiter">(</span><a href="#318999" title="String =&gt; Unit">action</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">_</span>: java.io.<span title="java.io.EOFException">EOFException</span> =&gt; <span class="comment">//nop</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Commands:
   *
   *  reload file1 ... fileN
   *  typeat file off1 off2?
   *  complete file off1 off2?
   */</span>
  <span class="keyword">def</span> <a title="(comp: scala.tools.nsc.interactive.Global)Unit" id="318835">run</a><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Global" id="318989">comp</a>: <a href="Global.scala.html#17264" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[Unit]" id="319009">reloadResult</a> = <span title="scala.tools.nsc.interactive.Response[Unit]" class="keyword">new</span> <a href="Response.scala.html#17903" title="scala.tools.nsc.interactive.Response[Unit]">Response</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="319010">typeatResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#17903" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[List[comp.Member]]" id="319011">completeResult</a> = <span title="scala.tools.nsc.interactive.Response[List[comp.Member]]" class="keyword">new</span> <a href="Response.scala.html#17903" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">Response</a><span class="delimiter">[</span>List<span class="delimiter">[</span>comp.Member<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="319012">typedResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#17903" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="319013">structureResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#17903" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition" id="319014">makePos</a><span class="delimiter">(</span><a title="String" id="319019">file</a>: <span title="String">String</span>, <a title="String" id="319020">off1</a>: <span title="String">String</span>, <a title="String" id="319021">off2</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.BatchSourceFile" id="319022">source</a> = <a href="#318836" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319019" title="String">file</a><span class="delimiter">)</span>
      <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="RangePositions.scala.html#124505" title="(source: scala.tools.nsc.util.SourceFile, start: Int, point: Int, end: Int)scala.tools.nsc.util.RangePosition">rangePos</a><span class="delimiter">(</span><a href="#319022" title="scala.tools.nsc.util.BatchSourceFile">source</a>, <a href="#319020" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<span title="=&gt; Int">toInt</span>, <a href="#319020" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<span title="=&gt; Int">toInt</span>, <a href="#319021" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off2</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)Unit" id="319015">doTypeAt</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="319042">pos</a>: <a href="../util/Position.scala.html#30588" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124461" title="(pos: comp.Position, response: comp.Response[comp.Tree])Unit">askTypeAt</a><span class="delimiter">(</span><a href="#319042" title="scala.tools.nsc.util.Position">pos</a>, <a href="#319010" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
      <a href="#318837" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#319010" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)Unit" id="319016">doComplete</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="319051">pos</a>: <a href="../util/Position.scala.html#30588" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124464" title="(pos: comp.Position, response: comp.Response[List[comp.Member]])Unit">askTypeCompletion</a><span class="delimiter">(</span><a href="#319051" title="scala.tools.nsc.util.Position">pos</a>, <a href="#319011" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
      <a href="#318837" title="(svar: scala.tools.nsc.interactive.Response[List[comp.Member]])Unit">show</a><span class="delimiter">(</span><a href="#319011" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(file: String)Unit" id="319017">doTypedTree</a><span class="delimiter">(</span><a title="String" id="319057">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124462" title="(source: scala.tools.nsc.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#318836" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319057" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#319012" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
      <a href="#318837" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#319012" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(file: String)Unit" id="319018">doStructure</a><span class="delimiter">(</span><a title="String" id="319064">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124469" title="(source: scala.tools.nsc.util.SourceFile, keepLoaded: Boolean, response: comp.Response[comp.Tree])Unit">askParsedEntered</a><span class="delimiter">(</span><a href="#318836" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319064" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#319013" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
      <a href="#318837" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#319013" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <a href="#318834" title="(action: String =&gt; Unit)Unit">loop</a> <span class="delimiter">{</span> <a title="String" id="319072">line</a> =&gt;
      <span class="delimiter">(</span><a href="#319072" title="String">line</a> <span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">split</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit" class="string">&quot;reload&quot;</span> :: <a title="List[java.lang.String]" id="319182">args</a> =&gt; 
          <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124459" title="(sources: List[scala.tools.nsc.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="#319182" title="List[java.lang.String]">args</a> <span title="(f: java.lang.String =&gt; scala.tools.nsc.util.BatchSourceFile)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],scala.tools.nsc.util.BatchSourceFile,List[scala.tools.nsc.util.SourceFile]])List[scala.tools.nsc.util.SourceFile]">map</span> <a href="#318836" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a>, <a href="#319009" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <a href="#318837" title="(svar: scala.tools.nsc.interactive.Response[Unit])Unit">show</a><span class="delimiter">(</span><a href="#319009" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit" class="string">&quot;reloadAndAskType&quot;</span> :: <a title="java.lang.String" id="319243">file</a> :: <a title="java.lang.String" id="319248">millis</a> :: <span title="object Nil">Nil</span> =&gt;
          <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124459" title="(sources: List[scala.tools.nsc.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><span title="(xs: scala.tools.nsc.util.BatchSourceFile*)List[scala.tools.nsc.util.BatchSourceFile]">List</span><span class="delimiter">(</span><a href="#318836" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319243" title="java.lang.String">file</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#319009" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <span title="object java.lang.Thread">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><a href="#319248" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">millis</a>.<span title="=&gt; Long">toInt</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ask type now&quot;)" class="string">&quot;ask type now&quot;</span><span class="delimiter">)</span>
          <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124462" title="(source: scala.tools.nsc.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#318836" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#319243" title="java.lang.String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#319012" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
          <a href="#319012" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a>.<a href="Response.scala.html#124725" title="=&gt; Either[comp.Tree,Throwable]">get</a>
        <span class="keyword">case</span> <a href="#319266" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typed&quot;)" class="string">&quot;typed&quot;</span>, <a title="java.lang.String" id="319288">file</a><span class="delimiter">)</span> =&gt;
          <a href="#319017" title="(file: String)Unit">doTypedTree</a><span class="delimiter">(</span><a href="#319288" title="java.lang.String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319290" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typeat&quot;)" class="string">&quot;typeat&quot;</span>, <a title="java.lang.String" id="319301">file</a>, <a title="java.lang.String" id="319302">off1</a>, <a title="java.lang.String" id="319303">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#319015" title="(pos: scala.tools.nsc.util.Position)Unit">doTypeAt</a><span class="delimiter">(</span><a href="#319014" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319301" title="java.lang.String">file</a>, <a href="#319302" title="java.lang.String">off1</a>, <a href="#319303" title="java.lang.String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319305" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typeat&quot;)" class="string">&quot;typeat&quot;</span>, <a title="java.lang.String" id="319316">file</a>, <a title="java.lang.String" id="319317">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#319015" title="(pos: scala.tools.nsc.util.Position)Unit">doTypeAt</a><span class="delimiter">(</span><a href="#319014" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319316" title="java.lang.String">file</a>, <a href="#319317" title="java.lang.String">off1</a>, <a href="#319317" title="java.lang.String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319319" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;complete&quot;)" class="string">&quot;complete&quot;</span>, <a title="java.lang.String" id="319330">file</a>, <a title="java.lang.String" id="319331">off1</a>, <a title="java.lang.String" id="319332">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#319016" title="(pos: scala.tools.nsc.util.Position)Unit">doComplete</a><span class="delimiter">(</span><a href="#319014" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319330" title="java.lang.String">file</a>, <a href="#319331" title="java.lang.String">off1</a>, <a href="#319332" title="java.lang.String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319334" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;complete&quot;)" class="string">&quot;complete&quot;</span>, <a title="java.lang.String" id="319345">file</a>, <a title="java.lang.String" id="319346">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#319016" title="(pos: scala.tools.nsc.util.Position)Unit">doComplete</a><span class="delimiter">(</span><a href="#319014" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#319345" title="java.lang.String">file</a>, <a href="#319346" title="java.lang.String">off1</a>, <a href="#319346" title="java.lang.String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319348" title="Nothing">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;quit&quot;)" class="string">&quot;quit&quot;</span><span class="delimiter">)</span> =&gt;
          <a href="#318989" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#124471" title="()Unit">askShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
          sys.<span title="(status: Int)Nothing">exit</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#319362" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;structure&quot;)" class="string">&quot;structure&quot;</span>, <a title="java.lang.String" id="319373">file</a><span class="delimiter">)</span> =&gt;
          <a href="#319018" title="(file: String)Unit">doStructure</a><span class="delimiter">(</span><a href="#319373" title="java.lang.String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;unrecongized command&quot;)" class="string">&quot;unrecongized command&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)scala.tools.nsc.util.BatchSourceFile" id="318836">toSourceFile</a><span class="delimiter">(</span><a title="String" id="319023">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../util/SourceFile.scala.html#96544" title="(_file: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.util.BatchSourceFile" class="keyword">new</a> <a href="../util/SourceFile.scala.html#30801" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="../io/PlainFile.scala.html#21523" title="scala.tools.nsc.io.PlainFile">PlainFile</a><span class="delimiter">(</span><a href="../io/Path.scala.html#68036" title="implicit scala.tools.nsc.io.Path.jfile2path : (jfile: scala.tools.nsc.io.package.JFile)scala.tools.nsc.io.Path" class="keyword">new</a> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><a href="#319023" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](svar: scala.tools.nsc.interactive.Response[T])Unit" id="318837">show</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="318839">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Response[T]" id="319045">svar</a>: <a href="Response.scala.html#17903" title="scala.tools.nsc.interactive.Response[T]">Response</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#319045" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#124725" title="=&gt; Either[T,Throwable]">get</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Left</span><span class="delimiter">(</span><a title="T" id="319379">result</a><span class="delimiter">)</span> =&gt; <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;==&gt; &quot;)" class="string">&quot;==&gt; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#319379" title="T">result</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Right</span><span class="delimiter">(</span><a title="Throwable" id="319383">exc</a><span class="delimiter">)</span> =&gt; <a href="#319383" title="Throwable">exc</a>.<span title="()Unit">printStackTrace</span>; <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ERROR: &quot;)" class="string">&quot;ERROR: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#319383" title="Throwable">exc</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#319045" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#124730" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>