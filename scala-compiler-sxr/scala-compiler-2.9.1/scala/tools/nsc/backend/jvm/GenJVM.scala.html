<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/backend/jvm/GenJVM.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Iulian Dragos
 */</span>


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.jvm

<span class="keyword">import</span> java.io.<span class="delimiter">{</span> DataOutputStream, OutputStream <span class="delimiter">}</span>
<span class="keyword">import</span> java.nio.ByteBuffer
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.generic.<span class="delimiter">{</span> PickleFormat, PickleBuffer <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.reflect.SigParser
<span class="keyword">import</span> scala.tools.nsc.io.<span class="delimiter">{</span> AbstractFile, Path <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.util.ScalaClassLoader
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.symtab.classfile.<a href="../../symtab/classfile/ClassfileConstants.scala.html#25258" title="object scala.tools.nsc.symtab.classfile.ClassfileConstants">ClassfileConstants</a>._
<span class="keyword">import</span> ch.epfl.lamp.fjbg._
<span class="keyword">import</span> <span title="object ch.epfl.lamp.fjbg.JAccessFlags">JAccessFlags</span>._
<span class="keyword">import</span> <span title="object ch.epfl.lamp.fjbg.JObjectType">JObjectType</span>.<span class="delimiter">{</span> JAVA_LANG_STRING, JAVA_LANG_OBJECT <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.jar.<span class="delimiter">{</span> JarEntry, JarOutputStream <span class="delimiter">}</span>

<span class="comment">/** This class ...
 *
 *  @author  Iulian Dragos
 *  @version 1.0
 * 
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class GenJVM extends scala.tools.nsc.SubComponent with scala.tools.nsc.backend.jvm.GenJVMUtil with scala.tools.nsc.backend.jvm.GenAndroid with scala.tools.nsc.backend.jvm.BytecodeWriters with ScalaObject" id="14999">GenJVM</a> <a href="#14999" title="ScalaObject" class="keyword">extends</a> <a href="../../SubComponent.scala.html#10972" title="scala.tools.nsc.SubComponent">SubComponent</a> <span class="keyword">with</span> <a href="GenJVMUtil.scala.html#14972" title="scala.tools.nsc.backend.jvm.GenJVMUtil">GenJVMUtil</a> <span class="keyword">with</span> <a href="GenAndroid.scala.html#15014" title="scala.tools.nsc.backend.jvm.GenAndroid">GenAndroid</a> <span class="keyword">with</span> <a href="BytecodeWriters.scala.html#15035" title="scala.tools.nsc.backend.jvm.BytecodeWriters">BytecodeWriters</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="BytecodeWriters.scala.html#112530" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../Global.scala.html#64836" title="object GenJVM.this.global.icodes">icodes</a>._
  <span class="keyword">import</span> <a href="../../Global.scala.html#64836" title="object GenJVM.this.global.icodes">icodes</a>.<a href="../icode/Opcodes.scala.html#96975" title="object GenJVM.this.global.icodes.opcodes">opcodes</a>._
  <span class="keyword">import</span> <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<span class="delimiter">{</span>
    NullClass, RuntimeNullClass, NothingClass, RuntimeNothingClass,
    AnyClass, ObjectClass, ThrowsClass, ThrowableClass, ClassfileAnnotationClass,
    SerializableClass, StringClass, ClassClass, FunctionClass,
    DeprecatedAttr, SerializableAttr, SerialVersionUIDAttr, VolatileAttr,
    TransientAttr, CloneableAttr, RemoteAttr
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="112459">phaseName</a> = <span title="java.lang.String(&quot;jvm&quot;)" class="string">&quot;jvm&quot;</span>

  <span class="comment">/** Create a new phase */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.Phase)scala.tools.nsc.Phase" id="112461">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="195432">p</a>: <a href="../../Phase.scala.html#10630" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span>: <a href="../../Phase.scala.html#10630" title="scala.tools.nsc.Phase">Phase</a> = <span title="GenJVM.this.JvmPhase" class="keyword">new</span> <a href="#112465" title="GenJVM.this.JvmPhase">JvmPhase</a><span class="delimiter">(</span><a href="#195432" title="scala.tools.nsc.Phase">p</a><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)scala.tools.nsc.io.AbstractFile" id="112462">outputDirectory</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="232252">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span class="delimiter">(</span>
    <a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/MutableSettings.scala.html#36581" title="=&gt; scala.tools.nsc.Settings#OutputDirs">outputDirs</a>.<a href="../../settings/MutableSettings.scala.html#42242" title="(src: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">outputDirFor</a> <span class="delimiter">{</span>
      <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72333" title="=&gt; scala.tools.nsc.Phase">flattenPhase</a>.<a href="../../Phase.scala.html#102821" title="=&gt; scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#232252" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107502" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">)</span>  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(base: scala.tools.nsc.io.AbstractFile, cls: ch.epfl.lamp.fjbg.JClass, suffix: String)scala.tools.nsc.io.AbstractFile" id="112463">getFile</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="232260">base</a>: <a href="../../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="ch.epfl.lamp.fjbg.JClass" id="232261">cls</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="String" id="232262">suffix</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scala.tools.nsc.io.AbstractFile" id="232264">dir</a> = <a href="#232260" title="scala.tools.nsc.io.AbstractFile">base</a>
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="232265">pathParts</a> = <a href="#232261" title="ch.epfl.lamp.fjbg.JClass">cls</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;[./]&quot;)" class="string">&quot;[./]&quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="java.lang.String" id="232396">part</a> &lt;- <a href="#232265" title="List[java.lang.String]">pathParts</a>.<span title="(f: java.lang.String =&gt; Unit)Unit">init</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#232264" title="scala.tools.nsc.io.AbstractFile">dir</a> = <a href="#232264" title="scala.tools.nsc.io.AbstractFile">dir</a>.<a href="../../io/AbstractFile.scala.html#96482" title="(name: String)scala.tools.nsc.io.AbstractFile">subdirectoryNamed</a><span class="delimiter">(</span><a href="#232396" title="java.lang.String">part</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#232264" title="scala.tools.nsc.io.AbstractFile">dir</a>.<a href="../../io/AbstractFile.scala.html#96481" title="(name: String)scala.tools.nsc.io.AbstractFile">fileNamed</a><span class="delimiter">(</span><a href="#232265" title="List[java.lang.String]">pathParts</a>.<span title="=&gt; java.lang.String">last</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#232262" title="String">suffix</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol, cls: ch.epfl.lamp.fjbg.JClass, suffix: String)scala.tools.nsc.io.AbstractFile" id="112464">getFile</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="232398">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.fjbg.JClass" id="232399">cls</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="String" id="232400">suffix</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../io/AbstractFile.scala.html#21459" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <a href="#112463" title="(base: scala.tools.nsc.io.AbstractFile, cls: ch.epfl.lamp.fjbg.JClass, suffix: String)scala.tools.nsc.io.AbstractFile">getFile</a><span class="delimiter">(</span><a href="#112462" title="(sym: GenJVM.this.global.Symbol)scala.tools.nsc.io.AbstractFile">outputDirectory</a><span class="delimiter">(</span><a href="#232398" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="#232399" title="ch.epfl.lamp.fjbg.JClass">cls</a>, <a href="#232400" title="String">suffix</a><span class="delimiter">)</span>

  <span class="comment">/** JVM code generation phase
   */</span>
  <span class="keyword">class</span> <a title="class JvmPhase extends GenJVM.this.global.icodes.ICodePhase with ScalaObject" id="112465">JvmPhase</a><a href="#112465" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="232251">prev</a>: <a href="../../Phase.scala.html#10630" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../icode/ICodes.scala.html#96950" title="GenJVM.this.global.icodes.ICodePhase">ICodePhase</a><span class="delimiter">(</span><a href="#232251" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="232247">name</a> = <a href="#112459" title="=&gt; java.lang.String">phaseName</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="232248">erasedTypes</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">def</span> <a title="(cls: GenJVM.this.global.icodes.IClass)Nothing" id="232249">apply</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IClass" id="232418">cls</a>: <a href="../icode/Members.scala.html#96961" title="GenJVM.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> = sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;no implementation&quot;)" class="string">&quot;no implementation&quot;</span><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="232250">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// we reinstantiate the bytecode generator at each run, to allow the GC</span>
      <span class="comment">// to collect everything</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Global.scala.html#64862" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="java.lang.String(&quot;[running phase &quot;)" class="string">&quot;[running phase &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#232247" title="=&gt; java.lang.String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; on icode]&quot;)" class="string">&quot; on icode]&quot;</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36758" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Xdce</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="232508">sym</a>, <a title="GenJVM.this.global.icodes.IClass" id="232509">cls</a><span class="delimiter">)</span> &lt;- <a href="../../Global.scala.html#64836" title="object GenJVM.this.global.icodes">icodes</a>.<a href="../icode/ICodes.scala.html#96919" title="(f: (GenJVM.this.global.icodes.global.Symbol, GenJVM.this.global.icodes.IClass) =&gt; scala.collection.mutable.HashMap[GenJVM.this.global.icodes.global.Symbol,GenJVM.this.global.icodes.IClass])Unit">classes</a> <span class="keyword">if</span> <a href="../../Global.scala.html#64934" title="object GenJVM.this.global.inliner">inliner</a>.<a href="../opt/Inliners.scala.html#112076" title="(cls: GenJVM.this.global.inliner.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#232508" title="GenJVM.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../Global.scala.html#64938" title="object GenJVM.this.global.deadCode">deadCode</a>.<a href="../opt/DeadCodeElimination.scala.html#112174" title="(elem: GenJVM.this.global.deadCode.global.Symbol)Boolean">liveClosures</a><span class="delimiter">(</span><a href="#232508" title="GenJVM.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../Global.scala.html#64836" title="object GenJVM.this.global.icodes">icodes</a>.<a href="../icode/ICodes.scala.html#96919" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.icodes.global.Symbol,GenJVM.this.global.icodes.IClass]">classes</a> <span title="(key: GenJVM.this.global.icodes.global.Symbol)GenJVM.this.global.icodes.classes.type">-=</span> <a href="#232508" title="GenJVM.this.global.icodes.global.Symbol">sym</a>
        
      <span class="keyword">val</span> <a title="GenJVM.this.BytecodeWriter" id="232434">bytecodeWriter</a> = <a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/MutableSettings.scala.html#36581" title="=&gt; scala.tools.nsc.Settings#OutputDirs">outputDirs</a>.<a href="../../settings/MutableSettings.scala.html#42238" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">getSingleOutput</a> <span title="GenJVM.this.BytecodeWriter" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="GenJVM.this.DirectToJarfileWriter">Some</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="232522">f</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#232522" title="scala.tools.nsc.io.AbstractFile">f</a> <a href="../../io/AbstractFile.scala.html#96454" title="(other: String)Boolean">hasExtension</a> <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>    =&gt;
          <span title="GenJVM.this.DirectToJarfileWriter" class="keyword">new</span> <a href="BytecodeWriters.scala.html#112536" title="GenJVM.this.DirectToJarfileWriter">DirectToJarfileWriter</a><span class="delimiter">(</span><a href="#232522" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="bytecodeWriter extends java.lang.Object with GenJVM.this.ClassBytecodeWriter">_</span>                                  =&gt;
          <span title="bytecodeWriter extends java.lang.Object with GenJVM.this.ClassBytecodeWriter" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36792" title="=&gt; scala.tools.nsc.Settings#StringSetting">Ygenjavap</a>.<a href="../../settings/MutableSettings.scala.html#42161" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span> <a href="#232535" title="java.lang.Object with GenJVM.this.ClassBytecodeWriter" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with GenJVM.this.ClassBytecodeWriter" id="232535">ClassBytecodeWriter</a> <span class="delimiter">{</span> <span class="delimiter">}</span>
          <span class="keyword">else</span> <a href="#232539" title="java.lang.Object with GenJVM.this.ClassBytecodeWriter with GenJVM.this.JavapBytecodeWriter" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with GenJVM.this.ClassBytecodeWriter with GenJVM.this.JavapBytecodeWriter" id="232539">ClassBytecodeWriter</a> <span class="keyword">with</span> <a href="BytecodeWriters.scala.html#112537" title="GenJVM.this.JavapBytecodeWriter">JavapBytecodeWriter</a> <span class="delimiter">{</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="GenJVM.this.BytecodeGenerator" id="232435">codeGenerator</a> = <span title="GenJVM.this.BytecodeGenerator" class="keyword">new</span> <a href="#112470" title="GenJVM.this.BytecodeGenerator">BytecodeGenerator</a><span class="delimiter">(</span><a href="#232434" title="GenJVM.this.BytecodeWriter">bytecodeWriter</a><span class="delimiter">)</span>
      <a href="../icode/ICodes.scala.html#96919" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.icodes.global.Symbol,GenJVM.this.global.icodes.IClass]">classes</a>.<span title="=&gt; Iterable[GenJVM.this.global.icodes.IClass]">values</span> <span title="(f: GenJVM.this.global.icodes.IClass =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#232435" title="GenJVM.this.BytecodeGenerator">codeGenerator</a> <a href="#231368" title="(c: GenJVM.this.global.icodes.IClass)Unit">genClass</a> <a href="#232605" title="GenJVM.this.global.icodes.IClass">_</a><span class="delimiter">)</span>
      <a href="#232434" title="GenJVM.this.BytecodeWriter">bytecodeWriter</a>.<a href="BytecodeWriters.scala.html#230552" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../icode/ICodes.scala.html#96919" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.icodes.global.Symbol,GenJVM.this.global.icodes.IClass]">classes</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Return the suffix of a class name */</span>
  <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)java.lang.String" id="112466">moduleSuffix</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="232609">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
    <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#232609" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">hasModuleFlag</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#232609" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
       <span title="=&gt; Boolean">!</span><a href="#232609" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#232609" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isJavaDefined</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
    <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="keyword">var</span> <a title="Int" id="112468">pickledBytes</a> = <span title="Int(0)" class="int">0</span> <span class="comment">// statistics</span>

  <span class="comment">/**
   * Java bytecode generator.
   *
   */</span>
  <span class="keyword">class</span> <a title="class BytecodeGenerator extends java.lang.Object with GenJVM.this.BytecodeUtil with ScalaObject" id="112470">BytecodeGenerator</a><a href="#112470" title="ScalaObject" class="delimiter">(</a><a title="GenJVM.this.BytecodeWriter" id="232570">bytecodeWriter</a>: <a href="BytecodeWriters.scala.html#112535" title="GenJVM.this.BytecodeWriter">BytecodeWriter</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="GenJVMUtil.scala.html#112514" title="GenJVM.this.BytecodeUtil">BytecodeUtil</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()GenJVM.this.BytecodeGenerator" id="231291" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#112470" title="BytecodeGenerator.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#232860" title="java.lang.Object with GenJVM.this.ClassBytecodeWriter" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with GenJVM.this.ClassBytecodeWriter" id="232860">ClassBytecodeWriter</a> <span class="delimiter">{</span> <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="231292">debugLevel</a> = <a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36739" title="=&gt; scala.tools.nsc.Settings#ChoiceSetting">debuginfo</a>.<a href="../../settings/MutableSettings.scala.html#46846" title="=&gt; Int">indexOfChoice</a>
    <span class="keyword">import</span> <a href="#232570" title="GenJVM.this.BytecodeWriter">bytecodeWriter</a>.writeClass

    <span class="keyword">val</span> <a title="Double" id="231294">MIN_SWITCH_DENSITY</a> = <span title="Double(0.7)" class="double">0.7</span>
    <span class="keyword">val</span> <a title="Int" id="231296">INNER_CLASSES_FLAGS</a> =
      <span class="delimiter">(</span>ACC_PUBLIC | ACC_PRIVATE | ACC_PROTECTED | ACC_STATIC | ACC_FINAL | ACC_INTERFACE <span title="Int(1567)">|</span> ACC_ABSTRACT<span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="231298">PublicStatic</a>      = ACC_PUBLIC <span title="Int(9)">|</span> ACC_STATIC
    <span class="keyword">val</span> <a title="Int" id="231300">PublicStaticFinal</a> = ACC_PUBLIC | ACC_STATIC <span title="Int(25)">|</span> ACC_FINAL

    <span class="keyword">val</span> <a title="String" id="231302">StringBuilderClassName</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106238" title="=&gt; GenJVM.this.global.Symbol">StringBuilderClass</a>.<span title="=&gt; String">fullName</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="231304">BoxesRunTime</a> = <span title="java.lang.String(&quot;scala.runtime.BoxesRunTime&quot;)" class="string">&quot;scala.runtime.BoxesRunTime&quot;</span>

    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JObjectType" id="231306">StringBuilderType</a> = <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><a href="#231302" title="=&gt; String">StringBuilderClassName</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethodType" id="231308">toStringType</a>      = <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_STRING</span>, <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="Array[ch.epfl.lamp.fjbg.JType]">EMPTY_ARRAY</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethodType" id="231310">arrayCloneType</a>    = <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_OBJECT</span>, <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="Array[ch.epfl.lamp.fjbg.JType]">EMPTY_ARRAY</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JObjectType" id="231312">MethodTypeType</a>    = <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.dyn.MethodType&quot;)" class="string">&quot;java.dyn.MethodType&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JObjectType" id="231314">JavaLangClassType</a> = <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.lang.Class&quot;)" class="string">&quot;java.lang.Class&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JObjectType" id="231316">MethodHandleType</a>  = <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.dyn.MethodHandle&quot;)" class="string">&quot;java.dyn.MethodHandle&quot;</span><span class="delimiter">)</span>

    <span class="comment">// Scala attributes</span>
    <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="231318">BeanInfoAttr</a>     = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;scala.reflect.BeanInfo&quot;</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="231320">BeanInfoSkipAttr</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;scala.reflect.BeanInfoSkip&quot;</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="231322">BeanDisplayNameAttr</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;scala.reflect.BeanDisplayName&quot;</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="231324">BeanDescriptionAttr</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;scala.reflect.BeanDescription&quot;</a><span class="delimiter">)</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="231327">CloneableClass</a>  = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;java.lang.Cloneable&quot;</a><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="231329">RemoteInterface</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;java.rmi.Remote&quot;</a><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="GenJVM.this.global.Type" id="231331">RemoteException</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106494" title="(fullname: GenJVM.this.global.Name)GenJVM.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)GenJVM.this.global.TermName" class="string">&quot;java.rmi.RemoteException&quot;</a><span class="delimiter">)</span>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>

    <span class="keyword">val</span> <a title="scala.reflect.generic.PickleBuffer" id="231332">versionPickle</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.reflect.generic.PickleBuffer" id="232673">vp</a> = <span title="scala.reflect.generic.PickleBuffer" class="keyword">new</span> <span title="scala.reflect.generic.PickleBuffer">PickleBuffer</span><span class="delimiter">(</span><span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(16)" class="int">16</span><span class="delimiter">)</span>, -<span title="Int(-1)" class="int">1</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#231411" title="(cond: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#232673" title="scala.reflect.generic.PickleBuffer">vp</a>.<span title="=&gt; Int">writeIndex</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#232673" title="scala.reflect.generic.PickleBuffer">vp</a> <span title="(x: Int)Unit">writeNat</span> <span title="object scala.reflect.generic.PickleFormat">PickleFormat</span>.<span title="=&gt; Int">MajorVersion</span>
      <a href="#232673" title="scala.reflect.generic.PickleBuffer">vp</a> <span title="(x: Int)Unit">writeNat</span> <span title="object scala.reflect.generic.PickleFormat">PickleFormat</span>.<span title="=&gt; Int">MinorVersion</span>
      <a href="#232673" title="scala.reflect.generic.PickleBuffer">vp</a> <span title="(x: Int)Unit">writeNat</span> <span title="Int(0)" class="int">0</span>
      <a href="#232673" title="scala.reflect.generic.PickleBuffer">vp</a>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="GenJVM.this.global.icodes.IClass" id="231335">clasz</a>: <a href="../icode/Members.scala.html#96961" title="GenJVM.this.global.icodes.IClass">IClass</a> = _
    <span class="keyword">var</span> <a title="GenJVM.this.global.icodes.IMethod" id="231338">method</a>: <a href="../icode/Members.scala.html#96963" title="GenJVM.this.global.icodes.IMethod">IMethod</a> = _
    <span class="keyword">var</span> <a title="ch.epfl.lamp.fjbg.JClass" id="231341">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span> = _
    <span class="keyword">var</span> <a title="ch.epfl.lamp.fjbg.JMethod" id="231344">jmethod</a>: <span title="ch.epfl.lamp.fjbg.JMethod">JMethod</span> = _
<span class="comment">//    var jcode: JExtendedCode = _</span>

    <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.FJBGContext" id="231346">fjbgContext</a> = <span title="(x$1: Int, x$2: Int)ch.epfl.lamp.fjbg.FJBGContext" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.FJBGContext">FJBGContext</span><span class="delimiter">(</span><span title="Int(49)" class="int">49</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Boolean" id="231348">emitSource</a> = <a href="#231292" title="=&gt; Int">debugLevel</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(1)" class="int">1</span>
    <span class="keyword">val</span> <a title="Boolean" id="231350">emitLines</a>  = <a href="#231292" title="=&gt; Int">debugLevel</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(2)" class="int">2</span>
    <span class="keyword">val</span> <a title="Boolean" id="231352">emitVars</a>   = <a href="#231292" title="=&gt; Int">debugLevel</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(3)" class="int">3</span>
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)String" id="231354">javaName</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="232164">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#232164" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#232164" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107246" title="=&gt; GenJVM.this.global.Symbol">rawowner</a>.<span title="=&gt; Boolean">isPackageClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#232164" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isModuleClass</span><span class="delimiter">)</span>
        <a href="#231366" title="=&gt; scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]">innerClassBuffer</a> <span title="(x: GenJVM.this.global.Symbol)BytecodeGenerator.this.innerClassBuffer.type">+=</span> <a href="#232164" title="GenJVM.this.global.Symbol">sym</a>
      
      <a href="#112470" title="GenJVM.this.BytecodeGenerator" class="keyword">super</a>.<a href="GenJVMUtil.scala.html#231283" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#232164" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Write a class to disk, adding the Scala signature (pickled type
     *  information) and inner classes.
     * 
     * @param jclass The FJBG class, where code was emitted
     * @param sym    The corresponding symbol, used for looking up pickled information
     */</span>
    <span class="keyword">def</span> <a title="(jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Unit" id="231355">emitClass</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="232914">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="GenJVM.this.global.Symbol" id="232915">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#231380" title="(jclass: ch.epfl.lamp.fjbg.JClass)Unit">addInnerClasses</a><span class="delimiter">(</span><a href="#232914" title="ch.epfl.lamp.fjbg.JClass">jclass</a><span class="delimiter">)</span>
      <a href="BytecodeWriters.scala.html#230551" title="(label: String, jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Unit">writeClass</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#232915" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a>, <a href="#232914" title="ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232915" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Returns the ScalaSignature annotation if it must be added to this class,
     *  none otherwise; furthermore, it adds to `jclass` the ScalaSig marker
     *  attribute (marking that a scala signature annotation is present) or the
     *  Scala marker attribute (marking that the signature for this class is in
     *  another file). The annotation that is returned by this method must be
     *  added to the class' annotations list when generating them.
     *
     *  @param jclass The class file that is being readied.
     *  @param sym    The symbol for which the signature has been entered in
     *                the symData map. This is different than the symbol
     *                that is being generated in the case of a mirror class.
     *  @return       An option that is:
     *                - defined and contains an annotation info of the
     *                  ScalaSignature type, instantiated with the pickle
     *                  signature for sym (a ScalaSig marker attribute has
     *                  been written);
     *                - undefined if the jclass/sym couple must not contain a
     *                  signature (a Scala marker attribute has been written).
     */</span>
    <span class="keyword">def</span> <a title="(jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Option[GenJVM.this.global.AnnotationInfo]" id="231356">scalaSignatureAddingMarker</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="232922">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="GenJVM.this.global.Symbol" id="232923">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Option[GenJVM.this.global.AnnotationInfo]">Option</span><span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span> =
      <a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72358" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.Symbol,scala.reflect.generic.PickleBuffer]">symData</a> <span title="(key: GenJVM.this.global.Symbol)Option[scala.reflect.generic.PickleBuffer]">get</span> <a href="#232923" title="GenJVM.this.global.Symbol">sym</a> <span title="Option[GenJVM.this.global.AnnotationInfo]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Some[GenJVM.this.global.AnnotationInfo]">Some</span><span class="delimiter">(</span><a title="scala.reflect.generic.PickleBuffer" id="232943">pickle</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JOtherAttribute" id="232944">scalaAttr</a> =
            <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: Any, x$3: java.lang.String, x$4: Array[Byte], x$5: Int)ch.epfl.lamp.fjbg.JOtherAttribute">JOtherAttribute</span><span class="delimiter">(</span><a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114967" title="=&gt; GenJVM.this.global.tpnme.NameType">ScalaSignatureATTR</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                                        <a href="#231332" title="=&gt; scala.reflect.generic.PickleBuffer">versionPickle</a>.<span title="=&gt; Array[Byte]">bytes</span>, <a href="#231332" title="=&gt; scala.reflect.generic.PickleBuffer">versionPickle</a>.<span title="=&gt; Int">writeIndex</span><span class="delimiter">)</span>
          <a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#232944" title="ch.epfl.lamp.fjbg.JOtherAttribute">scalaAttr</a>
          <span class="keyword">val</span> <a title="GenJVM.this.global.AnnotationInfo" id="232945">scalaAnnot</a> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="GenJVM.this.global.ScalaSigBytes" id="232996">sigBytes</a> = <a href="../../symtab/AnnotationInfos.scala.html#232999" title="(bytes: Array[Byte])GenJVM.this.global.ScalaSigBytes">ScalaSigBytes</a><span class="delimiter">(</span><a href="#232943" title="scala.reflect.generic.PickleBuffer">pickle</a>.<span title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">bytes</span>.<span title="(n: Int)Array[Byte]">take</span><span class="delimiter">(</span><a href="#232943" title="scala.reflect.generic.PickleBuffer">pickle</a>.<span title="=&gt; Int">writeIndex</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../symtab/AnnotationInfos.scala.html#134132" title="(atp: GenJVM.this.global.Type, args: List[GenJVM.this.global.Tree], assocs: List[(GenJVM.this.global.Name, GenJVM.this.global.ClassfileAnnotArg)])GenJVM.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">(</span><a href="#232996" title="GenJVM.this.global.ScalaSigBytes">sigBytes</a>.<a href="../../symtab/AnnotationInfos.scala.html#233008" title="=&gt; GenJVM.this.global.Type">sigAnnot</a>, <span title="object Nil">Nil</span>, <span title="(xs: (GenJVM.this.global.nme.NameType, GenJVM.this.global.ScalaSigBytes)*)List[(GenJVM.this.global.nme.NameType, GenJVM.this.global.ScalaSigBytes)]">List</span><span class="delimiter">(</span><span title="(_1: GenJVM.this.global.nme.NameType, _2: GenJVM.this.global.ScalaSigBytes)(GenJVM.this.global.nme.NameType, GenJVM.this.global.ScalaSigBytes)" class="delimiter">(</span><a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115324" title="=&gt; GenJVM.this.global.nme.NameType">bytes</a>, <a href="#232996" title="GenJVM.this.global.ScalaSigBytes">sigBytes</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#112468" title="(x$1: Int)Unit">pickledBytes</a> <span title="(x: Int)Int">+=</span> <a href="#232943" title="scala.reflect.generic.PickleBuffer">pickle</a>.<span title="=&gt; Int">writeIndex</span>
          <a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72358" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.Symbol,scala.reflect.generic.PickleBuffer]">symData</a> <span title="(key: GenJVM.this.global.Symbol)scala.collection.mutable.HashMap[GenJVM.this.global.Symbol,scala.reflect.generic.PickleBuffer]">-=</span> <a href="#232923" title="GenJVM.this.global.Symbol">sym</a>
          <a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72358" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.Symbol,scala.reflect.generic.PickleBuffer]">symData</a> <span title="(key: GenJVM.this.global.Symbol)scala.collection.mutable.HashMap[GenJVM.this.global.Symbol,scala.reflect.generic.PickleBuffer]">-=</span> <a href="#232923" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107482" title="=&gt; GenJVM.this.global.Symbol">companionSymbol</a>
          <span title="(x: GenJVM.this.global.AnnotationInfo)Some[GenJVM.this.global.AnnotationInfo]">Some</span><span class="delimiter">(</span><a href="#232945" title="GenJVM.this.global.AnnotationInfo">scalaAnnot</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="None.type">_</span> =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JOtherAttribute" id="233182">markerAttr</a> =
            <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: Any, x$3: java.lang.String, x$4: Array[Byte], x$5: Int)ch.epfl.lamp.fjbg.JOtherAttribute">JOtherAttribute</span><span class="delimiter">(</span><a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114965" title="=&gt; GenJVM.this.global.tpnme.NameType">ScalaATTR</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>, <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="#232922" title="ch.epfl.lamp.fjbg.JClass">jclass</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#233182" title="ch.epfl.lamp.fjbg.JOtherAttribute">markerAttr</a>
          <span title="object None">None</span>
      <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Option[Long]" id="231358">serialVUID</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <span title="object None">None</span>
    <span class="keyword">var</span> <a title="Boolean" id="231361">isRemoteClass</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">var</span> <a title="Boolean" id="231364">isParcelableClass</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]" id="231366">innerClassBuffer</a> = <span title="scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]">ListBuffer</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(c: GenJVM.this.global.icodes.IClass)Unit" id="231368">genClass</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IClass" id="232606">c</a>: <a href="../icode/Members.scala.html#96961" title="GenJVM.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#231335" title="(x$1: GenJVM.this.global.icodes.IClass)Unit">clasz</a> = <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>
      <a href="#231366" title="=&gt; scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]">innerClassBuffer</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="List[GenJVM.this.global.icodes.global.Type]" id="233187">parents</a> = <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#105322" title="=&gt; List[GenJVM.this.global.icodes.global.Type]">parents</a>
      <span class="keyword">var</span> <a title="Array[java.lang.String]" id="233188">ifaces</a>  = <span title="object ch.epfl.lamp.fjbg.JClass">JClass</span>.<span title="Array[java.lang.String]">NO_INTERFACES</span>
      <span class="keyword">val</span> <a title="String" id="233189">name</a>    = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <a href="#231358" title="(x$1: Option[Long])Unit">serialVUID</a>  = <span title="object None">None</span>
      <a href="#231361" title="(x$1: Boolean)Unit">isRemoteClass</a> = <span title="Boolean(false)" class="keyword">false</span>
      <a href="#231364" title="(x$1: Boolean)Unit">isParcelableClass</a> = <a href="GenAndroid.scala.html#112526" title="(sym: GenJVM.this.global.Symbol)Boolean">isAndroidParcelableClass</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
        <a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a> = <span title="(xs: GenJVM.this.global.Type*)List[GenJVM.this.global.Type]">List</span><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106079" title="=&gt; GenJVM.this.global.Symbol">ObjectClass</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a><span class="delimiter">)</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.AnnotationInfo" id="233230">annot</a> &lt;- <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107270" title="(f: GenJVM.this.global.icodes.global.AnnotationInfo =&gt; Unit)Unit">annotations</a><span class="delimiter">)</span> <a href="#233230" title="GenJVM.this.global.icodes.global.AnnotationInfo">annot</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">AnnotationInfo</span><span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="233276">tp</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#233276" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106483" title="=&gt; GenJVM.this.global.Symbol">SerializableAttr</a> =&gt;
          <a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a> <span title="(elem: GenJVM.this.global.icodes.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.global.Type],GenJVM.this.global.icodes.global.Type,List[GenJVM.this.global.icodes.global.Type]])List[GenJVM.this.global.icodes.global.Type]">:+=</span> <a href="../../symtab/Definitions.scala.html#106205" title="=&gt; GenJVM.this.global.Symbol">SerializableClass</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>
        <span class="keyword">case</span> <span title="Unit">AnnotationInfo</span><span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="233352">tp</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#233352" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106465" title="=&gt; GenJVM.this.global.Symbol">CloneableAttr</a> =&gt;
          <a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a> <span title="(elem: GenJVM.this.global.icodes.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.global.Type],GenJVM.this.global.icodes.global.Type,List[GenJVM.this.global.icodes.global.Type]])List[GenJVM.this.global.icodes.global.Type]">:+=</span> <a href="#231326" title="=&gt; GenJVM.this.global.Symbol">CloneableClass</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>
        <span class="keyword">case</span> <span title="Unit">AnnotationInfo</span><span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="233413">tp</a>, Literal<span class="delimiter">(</span><a title="GenJVM.this.global.Constant" id="233423">const</a><span class="delimiter">)</span> :: _, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#233413" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106481" title="=&gt; GenJVM.this.global.Symbol">SerialVersionUIDAttr</a> =&gt;
          <a href="#231358" title="(x$1: Option[Long])Unit">serialVUID</a> = <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#233423" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Long">longValue</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">AnnotationInfo</span><span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="233435">tp</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#233435" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106475" title="=&gt; GenJVM.this.global.Symbol">RemoteAttr</a> =&gt;
          <a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a> <span title="(elem: GenJVM.this.global.icodes.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.global.Type],GenJVM.this.global.icodes.global.Type,List[GenJVM.this.global.icodes.global.Type]])List[GenJVM.this.global.icodes.global.Type]">:+=</span> <a href="#231328" title="=&gt; GenJVM.this.global.Symbol">RemoteInterface</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>
          <a href="#231361" title="(x$1: Boolean)Unit">isRemoteClass</a> = <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
      <span class="delimiter">}</span>

      <a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a> = <a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a>.<span title="=&gt; List[GenJVM.this.global.icodes.global.Type]">distinct</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a>.<span title="=&gt; List[GenJVM.this.global.icodes.global.Type]">tail</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="#233188" title="Array[java.lang.String]">ifaces</a> = <a href="GenJVMUtil.scala.html#231282" title="(xs: Traversable[String])Array[String]">mkArray</a><span class="delimiter">(</span><a href="#233187" title="List[GenJVM.this.global.icodes.global.Type]">parents</a> <span title="(n: Int)List[GenJVM.this.global.icodes.global.Type]">drop</span> <span title="Int(1)" class="int">1</span> <span title="(f: GenJVM.this.global.icodes.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.global.Type],String,Traversable[String]])Traversable[String]">map</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Type" id="233531">x</a> =&gt; <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233531" title="GenJVM.this.global.icodes.global.Type">x</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.icodes.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#231341" title="(x$1: ch.epfl.lamp.fjbg.JClass)Unit">jclass</a> = <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: java.lang.String, x$4: Array[java.lang.String], x$5: java.lang.String)ch.epfl.lamp.fjbg.JClass">JClass</span><span class="delimiter">(</span><a href="#112471" title="(sym: GenJVM.this.global.Symbol)Int">javaFlags</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>,
                                  <a href="#233189" title="String">name</a>,
                                  <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233187" title="(n: Int)GenJVM.this.global.icodes.global.Type">parents</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.icodes.global.Symbol">typeSymbol</a><span class="delimiter">)</span>,
                                  <a href="#233188" title="Array[java.lang.String]">ifaces</a>,
                                  <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97399" title="=&gt; GenJVM.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#96402" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#96509" title="()String">toString</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112473" title="(sym: GenJVM.this.global.Symbol)Boolean">isStaticModule</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#231358" title="=&gt; Option[Long]">serialVUID</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span> <span title="(x: Boolean)Boolean">||</span> <a href="#231364" title="=&gt; Boolean">isParcelableClass</a> <span title="(x: Boolean)Boolean">||</span>
          <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97402" title="=&gt; Option[String]">bootstrapClass</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112473" title="(sym: GenJVM.this.global.Symbol)Boolean">isStaticModule</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#231386" title="()Unit">addModuleInstanceField</a>
        <a href="#231387" title="(cls: ch.epfl.lamp.fjbg.JClass, mopt: Option[GenJVM.this.global.icodes.IMethod])Unit">addStaticInit</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97412" title="=&gt; Option[GenJVM.this.global.icodes.IMethod]">lookupStaticCtor</a><span class="delimiter">)</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112472" title="(sym: GenJVM.this.global.Symbol)Boolean">isTopLevelModule</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107479" title="=&gt; GenJVM.this.global.icodes.global.Symbol">companionClass</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
            <a href="#231392" title="(clasz: GenJVM.this.global.Symbol, sourceFile: String)Unit">dumpMirrorClass</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97399" title="=&gt; GenJVM.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#96402" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#96509" title="()String">toString</a><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;No mirror class for module with linked class: &quot;)" class="string">&quot;No mirror class for module with linked class: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97412" title="=&gt; Option[GenJVM.this.global.icodes.IMethod]">lookupStaticCtor</a> <span title="(f: GenJVM.this.global.icodes.IMethod =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="233657">constructor</a> =&gt; <a href="#231387" title="(cls: ch.epfl.lamp.fjbg.JClass, mopt: Option[GenJVM.this.global.icodes.IMethod])Unit">addStaticInit</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <span title="(x: GenJVM.this.global.icodes.IMethod)Some[GenJVM.this.global.icodes.IMethod]">Some</span><span class="delimiter">(</span><a href="#233657" title="GenJVM.this.global.icodes.IMethod">constructor</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">// it must be a top level class (name contains no $s)</span>
        <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Boolean" id="233651">isCandidateForForwarders</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="233662">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72323" title="=&gt; scala.tools.nsc.Phase">picklerPhase</a>.<a href="../../Phase.scala.html#102836" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#233662" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96583" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">toString</a> <span title="(elem: Any)Boolean">contains</span> <span title="Char(\'$\')" class="char">'$'</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#233662" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">hasModuleFlag</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233662" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233662" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107391" title="=&gt; Boolean">isNestedClass</a>
          <span class="delimiter">}</span>

        <span class="comment">// At some point this started throwing lots of exceptions as a compile was finishing.</span>
        <span class="comment">// error: java.lang.AssertionError:</span>
        <span class="comment">//   assertion failed: List(object package$CompositeThrowable, object package$CompositeThrowable)</span>
        <span class="comment">// ...is the one I've seen repeatedly.  Suppressing.</span>
        <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.global.Symbol" id="233652">lmoc</a> = <span class="delimiter">(</span>
          <span class="keyword">try</span> <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107481" title="=&gt; GenJVM.this.global.icodes.global.Symbol">companionModule</a>
          <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="GenJVM.this.global.NoSymbol.type" id="233679">x</a>: <span title="java.lang.AssertionError">AssertionError</span> =&gt;
            <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Suppressing failed assert: &quot;)" class="string">&quot;Suppressing failed assert: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#233679" title="java.lang.AssertionError">x</a><span class="delimiter">)</span>
            <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a>
          <span class="delimiter">}</span>
        <span class="delimiter">)</span>
        <span class="comment">// add static forwarders if there are no name conflicts; see bugs #363 and #1735</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233652" title="GenJVM.this.global.icodes.global.Symbol">lmoc</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; Boolean">isInterface</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233651" title="(sym: GenJVM.this.global.Symbol)Boolean">isCandidateForForwarders</a><span class="delimiter">(</span><a href="#233652" title="GenJVM.this.global.icodes.global.Symbol">lmoc</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36686" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">noForwarders</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Adding static forwarders from '%s' to implementations in '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>, <a href="#233652" title="GenJVM.this.global.icodes.global.Symbol">lmoc</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#231391" title="(jclass: ch.epfl.lamp.fjbg.JClass, moduleClass: GenJVM.this.global.Symbol)Unit">addForwarders</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#233652" title="GenJVM.this.global.icodes.global.Symbol">lmoc</a>.<a href="../../symtab/Symbols.scala.html#107486" title="=&gt; GenJVM.this.global.icodes.global.Symbol">moduleClass</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97402" title="=&gt; Option[String]">bootstrapClass</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
        <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a> <span title="(x$1: java.lang.String)Unit">setBootstrapClass</span> <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97402" title="=&gt; Option[String]">bootstrapClass</a>.<span title="=&gt; String">get</span>

      <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97393" title="=&gt; List[GenJVM.this.global.icodes.IField]">fields</a> <span title="(f: GenJVM.this.global.icodes.IField =&gt; Unit)Unit">foreach</span> <a href="#231381" title="(f: GenJVM.this.global.icodes.IField)Unit">genField</a>
      <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97396" title="=&gt; List[GenJVM.this.global.icodes.IMethod]">methods</a> <span title="(f: GenJVM.this.global.icodes.IMethod =&gt; Unit)Unit">foreach</span> <a href="#231382" title="(m: GenJVM.this.global.icodes.IMethod)Unit">genMethod</a>

      <span class="keyword">val</span> <a title="Option[GenJVM.this.global.AnnotationInfo]" id="233190">ssa</a> = <a href="#231356" title="(jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Option[GenJVM.this.global.AnnotationInfo]">scalaSignatureAddingMarker</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <a href="#231376" title="(jmember: ch.epfl.lamp.fjbg.JMember, sym: GenJVM.this.global.Symbol, owner: GenJVM.this.global.Symbol)Unit">addGenericSignature</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.icodes.global.Symbol">owner</a><span class="delimiter">)</span>
      <a href="#231377" title="(jmember: ch.epfl.lamp.fjbg.JMember, annotations: List[GenJVM.this.global.AnnotationInfo])Unit">addAnnotations</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo]">annotations</a> <span title="(that: scala.collection.GenTraversableOnce[GenJVM.this.global.icodes.global.AnnotationInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.global.AnnotationInfo],GenJVM.this.global.icodes.global.AnnotationInfo,List[GenJVM.this.global.AnnotationInfo]])List[GenJVM.this.global.AnnotationInfo]">++</span> <a href="#233190" title="(xo: Option[GenJVM.this.global.AnnotationInfo])Iterable[GenJVM.this.global.AnnotationInfo]">ssa</a><span class="delimiter">)</span>

      <a href="#231369" title="(jclass: ch.epfl.lamp.fjbg.JClass, clazz: GenJVM.this.global.Symbol)Unit">addEnclosingMethodAttribute</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <a href="#231355" title="(jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Unit">emitClass</a><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a> <a href="../../symtab/Symbols.scala.html#107273" title="(cls: GenJVM.this.global.icodes.global.Symbol)Boolean">hasAnnotation</a> <a href="#231318" title="=&gt; GenJVM.this.global.Symbol">BeanInfoAttr</a><span class="delimiter">)</span>
        <a href="#231370" title="(c: GenJVM.this.global.icodes.IClass)Unit">genBeanInfoClass</a><span class="delimiter">(</span><a href="#232606" title="GenJVM.this.global.icodes.IClass">c</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(jclass: ch.epfl.lamp.fjbg.JClass, clazz: GenJVM.this.global.Symbol)Unit" id="231369">addEnclosingMethodAttribute</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="233890">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="GenJVM.this.global.Symbol" id="233891">clazz</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="233896">sym</a> = <a href="#233891" title="GenJVM.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#107475" title="=&gt; GenJVM.this.global.Symbol">originalEnclosingMethod</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233896" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;enclosing method for %s is %s (in %s)&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#233891" title="GenJVM.this.global.Symbol">clazz</a>, <a href="#233896" title="GenJVM.this.global.Symbol">sym</a>, <a href="#233896" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; GenJVM.this.global.Symbol">enclClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#233890" title="ch.epfl.lamp.fjbg.JClass">jclass</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: java.lang.String, x$3: java.lang.String, x$4: ch.epfl.lamp.fjbg.JType)ch.epfl.lamp.fjbg.JEnclosingMethodAttribute">JEnclosingMethodAttribute</span><span class="delimiter">(</span>
          <a href="#233890" title="ch.epfl.lamp.fjbg.JClass">jclass</a>,
          <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233896" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; GenJVM.this.global.Symbol">enclClass</span><span class="delimiter">)</span>,
          <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233896" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>,
          <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#233896" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233891" title="GenJVM.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#107346" title="=&gt; Boolean">isAnonymousClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="233933">enclClass</a> = <a href="#233891" title="GenJVM.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#107246" title="=&gt; GenJVM.this.global.Symbol">rawowner</a>        
        <a href="#231410" title="(cond: Boolean, msg: =&gt; String)Unit">assert</a><span class="delimiter">(</span><a href="#233933" title="GenJVM.this.global.Symbol">enclClass</a>.<span title="=&gt; Boolean">isClass</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#233933" title="GenJVM.this.global.Symbol">enclClass</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="233934">sym</a> = <a href="#233933" title="GenJVM.this.global.Symbol">enclClass</a>.<a href="../../symtab/Symbols.scala.html#107456" title="=&gt; GenJVM.this.global.Symbol">primaryConstructor</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233934" title="GenJVM.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Ran out of room looking for an enclosing method for %s: no constructor here.&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span>
            <a href="#233933" title="GenJVM.this.global.Symbol">enclClass</a>, <a href="#233891" title="GenJVM.this.global.Symbol">clazz</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;enclosing method for %s is %s (in %s)&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#233891" title="GenJVM.this.global.Symbol">clazz</a>, <a href="#233934" title="GenJVM.this.global.Symbol">sym</a>, <a href="#233933" title="GenJVM.this.global.Symbol">enclClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#233890" title="ch.epfl.lamp.fjbg.JClass">jclass</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: java.lang.String, x$3: java.lang.String, x$4: ch.epfl.lamp.fjbg.JType)ch.epfl.lamp.fjbg.JEnclosingMethodAttribute">JEnclosingMethodAttribute</span><span class="delimiter">(</span>
            <a href="#233890" title="ch.epfl.lamp.fjbg.JClass">jclass</a>,
            <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233933" title="GenJVM.this.global.Symbol">enclClass</a><span class="delimiter">)</span>,
            <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233934" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>,
            <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#233934" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JMethodType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">]</span>
          <span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Generate a bean info class that describes the given class.
     *
     * @author Ross Judson (ross.judson@soletta.com)
     */</span>
    <span class="keyword">def</span> <a title="(c: GenJVM.this.global.icodes.IClass)Unit" id="231370">genBeanInfoClass</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IClass" id="233894">c</a>: <a href="../icode/Members.scala.html#96961" title="GenJVM.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[GenJVM.this.global.icodes.global.AnnotationInfo]" id="233955">description</a> = <a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo]">annotations</a>.<span title="(p: GenJVM.this.global.icodes.global.AnnotationInfo =&gt; Boolean)Option[GenJVM.this.global.icodes.global.AnnotationInfo]">find</span><span class="delimiter">(</span><a href="#233973" title="GenJVM.this.global.icodes.global.AnnotationInfo">_</a>.<a href="../../symtab/AnnotationInfos.scala.html#133313" title="=&gt; GenJVM.this.global.icodes.global.Type">atp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.icodes.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#231324" title="=&gt; GenJVM.this.global.Symbol">BeanDescriptionAttr</a><span class="delimiter">)</span>
      <span class="comment">// informProgress(description.toString)</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JClass" id="233956">beanInfoClass</a> = <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: java.lang.String, x$4: Array[java.lang.String], x$5: java.lang.String)ch.epfl.lamp.fjbg.JClass">JClass</span><span class="delimiter">(</span><a href="#112471" title="(sym: GenJVM.this.global.Symbol)Int">javaFlags</a><span class="delimiter">(</span><a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>,
            <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;BeanInfo&quot;)" class="string">&quot;BeanInfo&quot;</span>,
            <span title="java.lang.String(&quot;scala/reflect/ScalaBeanInfo&quot;)" class="string">&quot;scala/reflect/ScalaBeanInfo&quot;</span>,
            <span title="object ch.epfl.lamp.fjbg.JClass">JClass</span>.<span title="Array[java.lang.String]">NO_INTERFACES</span>,
            <a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97399" title="=&gt; GenJVM.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#96402" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#96509" title="()String">toString</a><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="List[String]" id="233957">fieldList</a> = List<span class="delimiter">[</span>String<span class="delimiter">]</span><span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IField" id="234099">f</a> &lt;- <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97393" title="(f: GenJVM.this.global.icodes.IField =&gt; (GenJVM.this.global.icodes.IField, GenJVM.this.global.icodes.global.Symbol, GenJVM.this.global.icodes.global.Symbol))(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.IField],(GenJVM.this.global.icodes.IField, GenJVM.this.global.icodes.global.Symbol, GenJVM.this.global.icodes.global.Symbol),List[(GenJVM.this.global.icodes.IField, GenJVM.this.global.icodes.global.Symbol, GenJVM.this.global.icodes.global.Symbol)]])List[(GenJVM.this.global.icodes.IField, GenJVM.this.global.icodes.global.Symbol, GenJVM.this.global.icodes.global.Symbol)]">fields</a> <span class="keyword">if</span> <a href="#234099" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107328" title="=&gt; Boolean">hasGetter</a>;
	         <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.global.Symbol" id="234100">g</a> = <a href="#234099" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107494" title="(base: GenJVM.this.global.icodes.global.Symbol)GenJVM.this.global.icodes.global.Symbol">getter</a><span class="delimiter">(</span><a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>;
	         <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.global.Symbol" id="234101">s</a> = <a href="#234099" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107495" title="(base: GenJVM.this.global.icodes.global.Symbol)GenJVM.this.global.icodes.global.Symbol">setter</a><span class="delimiter">(</span><a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>;
	         <span class="keyword">if</span> <a href="#234100" title="GenJVM.this.global.icodes.global.Symbol">g</a>.<span title="=&gt; Boolean">isPublic</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#234099" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.icodes.global.Name">name</a> <a href="../../symtab/Names.scala.html#96606" title="(name: String)Boolean">startsWith</a> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>  <span class="comment">// inserting $outer breaks the bean</span>
        <a href="#233957" title="List[String]">fieldList</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#234099" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="#234102" title="(x: String)List[String]">::</a> <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#234100" title="GenJVM.this.global.icodes.global.Symbol">g</a><span class="delimiter">)</span> <a href="#234103" title="(x: String)List[String]">::</a> <span class="delimiter">(</span><span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#234101" title="GenJVM.this.global.icodes.global.Symbol">s</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#234101" title="GenJVM.this.global.icodes.global.Symbol">s</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#234104" title="(x: String)List[String]">::</a> <a href="#233957" title="List[String]">fieldList</a>
      <span class="keyword">val</span> <a title="List[String]" id="233958">methodList</a> = 
	     <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="234139">m</a> &lt;- <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97396" title="(f: GenJVM.this.global.icodes.IMethod =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.IMethod],String,List[String]])List[String]">methods</a> 
	         <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#234139" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107334" title="=&gt; Boolean">isConstructor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
	         <a href="#234139" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; Boolean">isPublic</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
	         <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#234139" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.icodes.global.Name">name</a> <a href="../../symtab/Names.scala.html#96606" title="(name: String)Boolean">startsWith</a> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
	         <span title="=&gt; Boolean">!</span><a href="#234139" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107325" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
	         <span title="=&gt; Boolean">!</span><a href="#234139" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107326" title="=&gt; Boolean">isSetter</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#234139" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethod" id="233959">constructor</a> = <a href="#233956" title="ch.epfl.lamp.fjbg.JClass">beanInfoClass</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType, x$4: Array[ch.epfl.lamp.fjbg.JType], x$5: Array[java.lang.String])ch.epfl.lamp.fjbg.JMethod">addNewMethod</span><span class="delimiter">(</span><span title="Int(1)">ACC_PUBLIC</span>, <span title="java.lang.String(&quot;&lt;init&gt;&quot;)" class="string">&quot;&lt;init&gt;&quot;</span>, <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">VOID</span>, <span title="Array[ch.epfl.lamp.fjbg.JType]" class="keyword">new</span> <span title="Array[ch.epfl.lamp.fjbg.JType]">Array</span><span class="delimiter">[</span>JType<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <span title="Array[String]" class="keyword">new</span> <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JExtendedCode" id="233960">jcode</a> = <a href="#233959" title="ch.epfl.lamp.fjbg.JMethod">constructor</a>.<span title="()ch.epfl.lamp.fjbg.JCode">getCode</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JExtendedCode" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JObjectType" id="233961">strKind</a> = <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106159" title="=&gt; GenJVM.this.global.Symbol">StringClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JArrayType" id="233962">stringArrayKind</a> = <span title="ch.epfl.lamp.fjbg.JArrayType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JArrayType">JArrayType</span><span class="delimiter">(</span><a href="#233961" title="ch.epfl.lamp.fjbg.JObjectType">strKind</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethodType" id="233963">conType</a> = <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">VOID</span>, <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106163" title="=&gt; GenJVM.this.global.Symbol">ClassClass</a><span class="delimiter">)</span>, <a href="#233962" title="ch.epfl.lamp.fjbg.JArrayType">stringArrayKind</a>, <a href="#233962" title="ch.epfl.lamp.fjbg.JArrayType">stringArrayKind</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(lst: Seq[String])Unit" id="233964">push</a><span class="delimiter">(</span><a title="Seq[String]" id="234260">lst</a>:<span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Int" id="234261">fi</a> = <span title="Int(0)" class="int">0</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="234278">f</a> &lt;- <a href="#234260" title="(f: String =&gt; Unit)Unit">lst</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDUP</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: Int)Unit">emitPUSH</span> <a href="#234261" title="Int">fi</a>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#234278" title="String">f</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
            <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: java.lang.String)Unit">emitPUSH</span> <a href="#234278" title="String">f</a>
          <span class="keyword">else</span>
            <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitACONST_NULL</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitASTORE</span> <a href="#233961" title="ch.epfl.lamp.fjbg.JObjectType">strKind</a>
          <a href="#234261" title="Int">fi</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span> 
      <span class="delimiter">}</span>

      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitALOAD_0</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="comment">// push the class</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitPUSH</span> <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JReferenceType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JReferenceType">JReferenceType</span><span class="delimiter">]</span>

      <span class="comment">// push the the string array of field information</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: Int)Unit">emitPUSH</span> <a href="#233957" title="List[String]">fieldList</a>.<span title="=&gt; Int">length</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitANEWARRAY</span> <a href="#233961" title="ch.epfl.lamp.fjbg.JObjectType">strKind</a>
      <a href="#233964" title="(lst: Seq[String])Unit">push</a><span class="delimiter">(</span><a href="#233957" title="List[String]">fieldList</a><span class="delimiter">)</span>

      <span class="comment">// push the string array of method information	</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: Int)Unit">emitPUSH</span> <a href="#233958" title="List[String]">methodList</a>.<span title="=&gt; Int">length</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitANEWARRAY</span> <a href="#233961" title="ch.epfl.lamp.fjbg.JObjectType">strKind</a>
      <a href="#233964" title="(lst: Seq[String])Unit">push</a><span class="delimiter">(</span><a href="#233958" title="List[String]">methodList</a><span class="delimiter">)</span>

      <span class="comment">// invoke the superclass constructor, which will do the</span>
      <span class="comment">// necessary java reflection and create Method objects.	</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESPECIAL</span><span class="delimiter">(</span><span title="java.lang.String(&quot;scala/reflect/ScalaBeanInfo&quot;)" class="string">&quot;scala/reflect/ScalaBeanInfo&quot;</span>, <span title="java.lang.String(&quot;&lt;init&gt;&quot;)" class="string">&quot;&lt;init&gt;&quot;</span>, <a href="#233963" title="ch.epfl.lamp.fjbg.JMethodType">conType</a><span class="delimiter">)</span>
      <a href="#233960" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitRETURN</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <span class="comment">// write the bean information class file.</span>
      <a href="BytecodeWriters.scala.html#230551" title="(label: String, jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Unit">writeClass</a><span class="delimiter">(</span><span title="java.lang.String(&quot;BeanInfo &quot;)" class="string">&quot;BeanInfo &quot;</span>, <a href="#233956" title="ch.epfl.lamp.fjbg.JClass">beanInfoClass</a>, <a href="#233894" title="GenJVM.this.global.icodes.IClass">c</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Add the given 'throws' attributes to jmethod */</span>
    <span class="keyword">def</span> <a title="(jmethod: ch.epfl.lamp.fjbg.JMethod, excs: List[GenJVM.this.global.AnnotationInfo])Unit" id="231371">addExceptionsAttribute</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JMethod" id="234321">jmethod</a>: <span title="ch.epfl.lamp.fjbg.JMethod">JMethod</span>, <a title="List[GenJVM.this.global.AnnotationInfo]" id="234322">excs</a>: <span title="List[GenJVM.this.global.AnnotationInfo]">List</span><span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#234322" title="List[GenJVM.this.global.AnnotationInfo]">excs</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JConstantPool" id="234324">cpool</a> = <a href="#234321" title="ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()ch.epfl.lamp.fjbg.JConstantPool">getConstantPool</span>
      <span class="keyword">val</span> <a title="java.nio.ByteBuffer" id="234325">buf</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span> = <span title="object java.nio.ByteBuffer">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><span title="Int(512)" class="int">512</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Int" id="234326">nattr</a> = <span title="Int(0)" class="int">0</span>

      <span class="comment">// put some random value; the actual number is determined at the end</span>
      <a href="#234325" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <span title="Int(47802)" class="int">0xbaba</span>.<span title="=&gt; Short">toShort</span>

      <span class="keyword">for</span> <span class="delimiter">(</span>AnnotationInfo<span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="234676">tp</a>, <a href="#234613" title="(x: List[GenJVM.this.global.Tree])Some[List[GenJVM.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="GenJVM.this.global.Tree" id="234689">exc</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> &lt;- <a href="#234322" title="List[GenJVM.this.global.AnnotationInfo]">excs</a>.<a href="#234607" title="(f: GenJVM.this.global.AnnotationInfo =&gt; Unit)Unit">distinct</a> <span class="keyword">if</span> <a href="#234676" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106121" title="=&gt; GenJVM.this.global.Symbol">ThrowsClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> Literal<a href="#234694" title="GenJVM.this.global.Constant" id="234690" class="delimiter">(</a><a title="GenJVM.this.global.Constant" id="234694">const</a><span class="delimiter">)</span> = <a href="#234689" title="GenJVM.this.global.Tree">exc</a>
        <a href="#234325" title="java.nio.ByteBuffer">buf</a>.<span title="(x$1: Short)java.nio.ByteBuffer">putShort</span><span class="delimiter">(</span>
          <a href="#234324" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addClass</span><span title="implicit scala.Predef.int2Integer : (x: Int)java.lang.Integer" class="delimiter">(</span>
            <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#234690" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; GenJVM.this.global.Type">typeValue</span>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()Short">shortValue</span><span class="delimiter">)</span>
        <a href="#234326" title="Int">nattr</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>

      <a href="#231411" title="(cond: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#234326" title="Int">nattr</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#234325" title="java.nio.ByteBuffer">buf</a>.<span title="(x$1: Int, x$2: Short)java.nio.ByteBuffer">putShort</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#234326" title="Int">nattr</a>.<span title="=&gt; Short">toShort</span><span class="delimiter">)</span>
      <a href="#231379" title="(jmember: ch.epfl.lamp.fjbg.JMember, name: GenJVM.this.global.Name, buf: java.nio.ByteBuffer)Unit">addAttribute</a><span class="delimiter">(</span><a href="#234321" title="ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114951" title="=&gt; GenJVM.this.global.tpnme.NameType">ExceptionsATTR</a>, <a href="#234325" title="java.nio.ByteBuffer">buf</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Whether an annotation should be emitted as a Java annotation
     *   .initialize: if 'annot' is read from pickle, atp might be un-initialized
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(annot: GenJVM.this.global.AnnotationInfo)Boolean" id="231372">shouldEmitAnnotation</a><span class="delimiter">(</span><a title="GenJVM.this.global.AnnotationInfo" id="234744">annot</a>: <a href="../../symtab/AnnotationInfos.scala.html#67743" title="GenJVM.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">)</span> =
      <a href="#234744" title="GenJVM.this.global.AnnotationInfo">annot</a>.<a href="../../symtab/AnnotationInfos.scala.html#133313" title="=&gt; GenJVM.this.global.Type">atp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a>.<a href="../../symtab/Symbols.scala.html#107431" title="=&gt; GenJVM.this.global.Symbol">initialize</a>.<span title="=&gt; Boolean">isJavaDefined</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#234744" title="GenJVM.this.global.AnnotationInfo">annot</a>.<a href="../../symtab/AnnotationInfos.scala.html#133313" title="=&gt; GenJVM.this.global.Type">atp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a>.<a href="../../symtab/Symbols.scala.html#107447" title="(that: GenJVM.this.global.Symbol)Boolean">isNonBottomSubClass</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106111" title="=&gt; GenJVM.this.global.Symbol">ClassfileAnnotationClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#234744" title="GenJVM.this.global.AnnotationInfo">annot</a>.<a href="../../symtab/AnnotationInfos.scala.html#133315" title="=&gt; List[GenJVM.this.global.Tree]">args</a>.<span title="=&gt; Boolean">isEmpty</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cpool: ch.epfl.lamp.fjbg.JConstantPool, buf: java.nio.ByteBuffer, annotations: List[GenJVM.this.global.AnnotationInfo])Int" id="231373">emitJavaAnnotations</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JConstantPool" id="234756">cpool</a>: <span title="ch.epfl.lamp.fjbg.JConstantPool">JConstantPool</span>, <a title="java.nio.ByteBuffer" id="234757">buf</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="List[GenJVM.this.global.AnnotationInfo]" id="234758">annotations</a>: <span title="List[GenJVM.this.global.AnnotationInfo]">List</span><span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(arg: GenJVM.this.global.ClassfileAnnotArg)Unit" id="234760">emitArgument</a><span class="delimiter">(</span><a title="GenJVM.this.global.ClassfileAnnotArg" id="234764">arg</a>: <a href="../../symtab/AnnotationInfos.scala.html#67729" title="GenJVM.this.global.ClassfileAnnotArg">ClassfileAnnotArg</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#234764" title="GenJVM.this.global.ClassfileAnnotArg">arg</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">LiteralAnnotArg</span><span class="delimiter">(</span><a title="GenJVM.this.global.Constant" id="234784">const</a><span class="delimiter">)</span> =&gt;
          <a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Int">tag</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">BooleanTag</span> =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'Z\')" class="char">'Z'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Int)Int">addInteger</span><span class="delimiter">(</span><span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Boolean">booleanValue</span><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">ByteTag</span>    =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'B\')" class="char">'B'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Int)Int">addInteger</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Int">byteValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">ShortTag</span>   =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'S\')" class="char">'S'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Int)Int">addInteger</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Int">shortValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">CharTag</span>    =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'C\')" class="char">'C'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Int)Int">addInteger</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Int">charValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">IntTag</span>     =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'I\')" class="char">'I'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Int)Int">addInteger</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Int">intValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">LongTag</span>    =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'J\')" class="char">'J'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Long)Int">addLong</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Long">longValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">FloatTag</span>   =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'F\')" class="char">'F'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Float)Int">addFloat</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Float">floatValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">DoubleTag</span>  =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'D\')" class="char">'D'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Double)Int">addDouble</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; Double">doubleValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">StringTag</span>  =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'s\')" class="char">'s'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; String">stringValue</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">ClassTag</span>   =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'c\')" class="char">'c'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; GenJVM.this.global.Type">typeValue</span><span class="delimiter">)</span>.<span title="()java.lang.String">getSignature</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
            <span class="keyword">case</span> <span title="Unit">EnumTag</span> =&gt;
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'e\')" class="char">'e'</span>.<span title="=&gt; Byte">toByte</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; GenJVM.this.global.Type">tpe</span><span class="delimiter">)</span>.<span title="()java.lang.String">getSignature</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
              <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#234784" title="GenJVM.this.global.Constant">const</a>.<span title="=&gt; GenJVM.this.global.Symbol">symbolValue</span>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <a title="Unit" id="234883">sb</a>@ScalaSigBytes<span class="delimiter">(</span><a title="Array[Byte]" id="234902">bytes</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#234883" title="GenJVM.this.global.ScalaSigBytes">sb</a>.<a href="../../symtab/AnnotationInfos.scala.html#233007" title="=&gt; Boolean">isLong</a> =&gt;
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'s\')" class="char">'s'</span>.<span title="=&gt; Byte">toByte</span>
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Array[Byte])Int">addUtf8</span><span class="delimiter">(</span><a href="#234883" title="GenJVM.this.global.ScalaSigBytes">sb</a>.<a href="../../symtab/AnnotationInfos.scala.html#233005" title="=&gt; Array[Byte]">encodedBytes</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>

        <span class="keyword">case</span> <a title="Unit" id="234936">sb</a>@ScalaSigBytes<span class="delimiter">(</span><a title="Array[Byte]" id="234937">bytes</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#234936" title="GenJVM.this.global.ScalaSigBytes">sb</a>.<a href="../../symtab/AnnotationInfos.scala.html#233007" title="=&gt; Boolean">isLong</a> =&gt;
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'[\')" class="char">'['</span>.<span title="=&gt; Byte">toByte</span>
          <span class="keyword">val</span> <a title="Int" id="234938">stringCount</a> = <span class="delimiter">(</span><a href="#234936" title="GenJVM.this.global.ScalaSigBytes">sb</a>.<a href="../../symtab/AnnotationInfos.scala.html#233005" title="=&gt; Array[Byte]">encodedBytes</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">/</span> <span title="Int(65534)" class="int">65534</span><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234938" title="Int">stringCount</a>.<span title="=&gt; Short">toShort</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="235085">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(f: Int =&gt; java.nio.ByteBuffer)Unit">until</span> <a href="#234938" title="Int">stringCount</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'s\')" class="char">'s'</span>.<span title="=&gt; Byte">toByte</span>
            <span class="keyword">val</span> <a title="Int" id="235086">j</a> = <a href="#235085" title="Int">i</a> <span title="(x: Int)Int">*</span> <span title="Int(65535)" class="int">65535</span>
            <span class="keyword">val</span> <a title="Array[Byte]" id="235087">string</a> = <a href="#234936" title="GenJVM.this.global.ScalaSigBytes">sb</a>.<a href="../../symtab/AnnotationInfos.scala.html#233005" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">encodedBytes</a>.<span title="(from: Int, until: Int)Array[Byte]">slice</span><span class="delimiter">(</span><a href="#235086" title="Int">j</a>, <a href="#235086" title="Int">j</a> <span title="(x: Int)Int">+</span> <span title="Int(65535)" class="int">65535</span><span class="delimiter">)</span>
            <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: Array[Byte])Int">addUtf8</span><span class="delimiter">(</span><a href="#235087" title="Array[Byte]">string</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">ArrayAnnotArg</span><span class="delimiter">(</span><a title="Array[GenJVM.this.global.ClassfileAnnotArg]" id="235249">args</a><span class="delimiter">)</span> =&gt;
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'[\')" class="char">'['</span>.<span title="=&gt; Byte">toByte</span>
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#235249" title="Array[GenJVM.this.global.ClassfileAnnotArg]">args</a>.<span title="=&gt; Int">length</span>.<span title="=&gt; Short">toShort</span>
          <a href="#235249" title="(xs: Array[GenJVM.this.global.ClassfileAnnotArg])scala.collection.mutable.ArrayOps[GenJVM.this.global.ClassfileAnnotArg]">args</a> <span title="(f: GenJVM.this.global.ClassfileAnnotArg =&gt; Unit)Unit">foreach</span> <a href="#234760" title="(arg: GenJVM.this.global.ClassfileAnnotArg)Unit">emitArgument</a>

        <span class="keyword">case</span> <span title="Unit">NestedAnnotArg</span><span class="delimiter">(</span><a title="GenJVM.this.global.AnnotationInfo" id="236015">annInfo</a><span class="delimiter">)</span> =&gt;
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Byte)java.nio.ByteBuffer">put</span> <span title="Char(\'@\')" class="char">'@'</span>.<span title="=&gt; Byte">toByte</span>
          <a href="#234761" title="(annotInfo: GenJVM.this.global.AnnotationInfo)Unit">emitAnnotation</a><span class="delimiter">(</span><a href="#236015" title="GenJVM.this.global.AnnotationInfo">annInfo</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(annotInfo: GenJVM.this.global.AnnotationInfo)Unit" id="234761">emitAnnotation</a><span class="delimiter">(</span><a title="GenJVM.this.global.AnnotationInfo" id="236020">annotInfo</a>: <a href="../../symtab/AnnotationInfos.scala.html#67743" title="GenJVM.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> AnnotationInfo<a href="#236022" title="(GenJVM.this.global.Type, List[GenJVM.this.global.Tree], List[(GenJVM.this.global.Name, GenJVM.this.global.ClassfileAnnotArg)])" class="delimiter">(</a><a href="#236021" title="GenJVM.this.global.Type" id="236022">typ</a>, <a href="#236021" title="List[GenJVM.this.global.Tree]" id="236023">args</a>, <a href="#236021" title="List[(GenJVM.this.global.Name, GenJVM.this.global.ClassfileAnnotArg)]" id="236024">assocs</a><span class="delimiter">)</span> = <a href="#236020" title="GenJVM.this.global.AnnotationInfo">annotInfo</a>
        <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JType" id="236025">jtype</a> = <a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#236022" title="GenJVM.this.global.Type">typ</a><span class="delimiter">)</span>
        <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#236025" title="ch.epfl.lamp.fjbg.JType">jtype</a>.<span title="()java.lang.String">getSignature</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
        <a href="#231410" title="(cond: Boolean, msg: =&gt; String)Unit">assert</a><span class="delimiter">(</span><a href="#236023" title="List[GenJVM.this.global.Tree]">args</a>.<span title="=&gt; Boolean">isEmpty</span>, <a href="#236023" title="List[GenJVM.this.global.Tree]">args</a>.<span title="()String">toString</span><span class="delimiter">)</span>
        <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#236024" title="List[(GenJVM.this.global.Name, GenJVM.this.global.ClassfileAnnotArg)]">assocs</a>.<span title="=&gt; Int">length</span>.<span title="=&gt; Short">toShort</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="GenJVM.this.global.Name" id="236106">name</a>, <a title="GenJVM.this.global.ClassfileAnnotArg" id="236107">value</a><span class="delimiter">)</span> &lt;- <a href="#236024" title="(f: (GenJVM.this.global.Name, GenJVM.this.global.ClassfileAnnotArg) =&gt; Unit)Unit">assocs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#234756" title="ch.epfl.lamp.fjbg.JConstantPool">cpool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#236106" title="GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
          <a href="#234760" title="(arg: GenJVM.this.global.ClassfileAnnotArg)Unit">emitArgument</a><span class="delimiter">(</span><a href="#236107" title="GenJVM.this.global.ClassfileAnnotArg">value</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a title="Int" id="234762">nannots</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">val</span> <a title="Int" id="234763">pos</a> = <a href="#234757" title="java.nio.ByteBuffer">buf</a>.<span title="()Int">position</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <span class="comment">// put some random value; the actual number of annotations is determined at the end</span>
      <a href="#234757" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <span title="Int(47802)" class="int">0xbaba</span>.<span title="=&gt; Short">toShort</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.AnnotationInfo" id="236127">annot</a> &lt;- <a href="#234758" title="(f: GenJVM.this.global.AnnotationInfo =&gt; Unit)Unit">annotations</a> <span class="keyword">if</span> <a href="#231372" title="(annot: GenJVM.this.global.AnnotationInfo)Boolean">shouldEmitAnnotation</a><span class="delimiter">(</span><a href="#236127" title="GenJVM.this.global.AnnotationInfo">annot</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#234762" title="Int">nannots</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
        <a href="#234761" title="(annotInfo: GenJVM.this.global.AnnotationInfo)Unit">emitAnnotation</a><span class="delimiter">(</span><a href="#236127" title="GenJVM.this.global.AnnotationInfo">annot</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">// save the number of annotations</span>
      <a href="#234757" title="java.nio.ByteBuffer">buf</a>.<span title="(x$1: Int, x$2: Short)java.nio.ByteBuffer">putShort</span><span class="delimiter">(</span><a href="#234763" title="Int">pos</a>, <a href="#234762" title="Int">nannots</a>.<span title="=&gt; Short">toShort</span><span class="delimiter">)</span>
      <a href="#234762" title="Int">nannots</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Run the signature parser to catch bogus signatures.
     */</span>
    <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol, sig: String)Boolean" id="231374">isValidSignature</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="236135">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a>, <a title="String" id="236136">sig</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">(</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#236135" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span><span class="delimiter">)</span> <a href="../../../reflect/SigParser.scala.html#31473" title="object scala.tools.reflect.SigParser">SigParser</a> <a href="../../../reflect/SigParser.scala.html#236148" title="(s: String)Boolean">verifyMethod</a> <a href="#236136" title="String">sig</a>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#236135" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isTerm</span><span class="delimiter">)</span> <a href="../../../reflect/SigParser.scala.html#31473" title="object scala.tools.reflect.SigParser">SigParser</a> <a href="../../../reflect/SigParser.scala.html#236149" title="(s: String)Boolean">verifyType</a> <a href="#236136" title="String">sig</a>
      <span class="keyword">else</span> <a href="../../../reflect/SigParser.scala.html#31473" title="object scala.tools.reflect.SigParser">SigParser</a> <a href="../../../reflect/SigParser.scala.html#236147" title="(s: String)Boolean">verifyClass</a> <a href="#236136" title="String">sig</a>
    <span class="delimiter">)</span>

    <span class="comment">// @M don't generate java generics sigs for (members of) implementation</span>
    <span class="comment">// classes, as they are monomorphic (TODO: ok?)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Boolean" id="231375">needsGenericSignature</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="236191">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><span class="delimiter">(</span>
      <span class="comment">// PP: This condition used to include sym.hasExpandedName, but this leads</span>
      <span class="comment">// to the total loss of generic information if a private member is</span>
      <span class="comment">// accessed from a closure: both the field and the accessor were generated</span>
      <span class="comment">// without it.  This is particularly bad because the availability of</span>
      <span class="comment">// generic information could disappear as a consequence of a seemingly</span>
      <span class="comment">// unrelated change.</span>
         <a href="#236191" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isSynthetic</span>
      <span title="(x: Boolean)Boolean">||</span> <a href="#236191" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107376" title="=&gt; Boolean">isLiftedMethod</a>
      <span title="(x: Boolean)Boolean">||</span> <a href="#236191" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isBridge</span>
      <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#236191" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107403" title="=&gt; List[GenJVM.this.global.Symbol]">ownerChain</a> <span title="(p: GenJVM.this.global.Symbol =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#236209" title="GenJVM.this.global.Symbol">_</a>.<span title="=&gt; Boolean">isImplClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(jmember: ch.epfl.lamp.fjbg.JMember, sym: GenJVM.this.global.Symbol, owner: GenJVM.this.global.Symbol)Unit" id="231376">addGenericSignature</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JMember" id="233770">jmember</a>: <span title="ch.epfl.lamp.fjbg.JMember">JMember</span>, <a title="GenJVM.this.global.Symbol" id="233771">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a>, <a title="GenJVM.this.global.Symbol" id="233772">owner</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231375" title="(sym: GenJVM.this.global.Symbol)Boolean">needsGenericSignature</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="GenJVM.this.global.Type" id="236210">memberTpe</a> = <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; GenJVM.this.global.Type)GenJVM.this.global.Type">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72331" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#233772" title="GenJVM.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#107459" title="=&gt; GenJVM.this.global.Type">thisType</a>.<a href="../../symtab/Types.scala.html#105360" title="(sym: GenJVM.this.global.Symbol)GenJVM.this.global.Type">memberInfo</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="comment">// println(&quot;addGenericSignature sym: &quot; + sym.fullName + &quot; : &quot; + memberTpe + &quot; sym.info: &quot; + sym.info)</span>
        <span class="comment">// println(&quot;addGenericSignature: &quot;+ (sym.ownerChain map (x =&gt; (x.name, x.isImplClass))))</span>
        <a href="../../Global.scala.html#64918" title="object GenJVM.this.global.erasure">erasure</a>.<a href="../../transform/Erasure.scala.html#111611" title="(sym0: GenJVM.this.global.erasure.global.Symbol, info: GenJVM.this.global.erasure.global.Type)Option[String]">javaSig</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>, <a href="#236210" title="GenJVM.this.global.Type">memberTpe</a><span class="delimiter">)</span> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="String" id="236229">sig</a> =&gt;
          <span class="comment">/** Since we're using a sun internal class for signature validation,
           *  we have to allow for it not existing or otherwise malfunctioning:
           *  in which case we treat every signature as valid.  Medium term we
           *  should certainly write independent signature validation.
           */</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36702" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Xverify</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../reflect/SigParser.scala.html#31473" title="object scala.tools.reflect.SigParser">SigParser</a>.<a href="../../../reflect/SigParser.scala.html#236146" title="=&gt; Boolean">isParserAvailable</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#231374" title="(sym: GenJVM.this.global.Symbol, sig: String)Boolean">isValidSignature</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>, <a href="#236229" title="String">sig</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97399" title="=&gt; GenJVM.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#96431" title="(pos: GenJVM.this.global.icodes.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107263" title="=&gt; GenJVM.this.global.Position">pos</a>, 
                <span title="java.lang.String(&quot;|compiler bug: created invalid generic signature for %s in %s\012                   |signature: %s\012                   |if this is reproducible, please report bug at http://lampsvn.epfl.ch/trac/scala\012                &quot;)" class="string">&quot;&quot;&quot;|compiler bug: created invalid generic signature for %s in %s
                   |signature: %s
                   |if this is reproducible, please report bug at http://lampsvn.epfl.ch/trac/scala
                &quot;&quot;&quot;</span>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</span>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>, <a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#107357" title="=&gt; GenJVM.this.global.Symbol">skipPackageObject</a>.<span title="=&gt; String">fullName</span>, <a href="#236229" title="String">sig</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span title="Nothing" class="keyword">return</span>
          <span class="delimiter">}</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36748" title="=&gt; scala.tools.nsc.Settings#PhasesSetting">check</a>.<a href="../../settings/MutableSettings.scala.html#48680" title="=&gt; List[java.lang.String]">value</a> <span title="(elem: Any)Boolean">contains</span> <span title="java.lang.String(&quot;genjvm&quot;)" class="string">&quot;genjvm&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="GenJVM.this.global.erasure.global.Type" id="236259">normalizedTpe</a> = <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; GenJVM.this.global.erasure.global.Type)GenJVM.this.global.erasure.global.Type">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72331" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../Global.scala.html#64918" title="object GenJVM.this.global.erasure">erasure</a>.<a href="../../transform/Erasure.scala.html#111609" title="(v1: GenJVM.this.global.erasure.global.Type)GenJVM.this.global.erasure.global.Type">prepareSigMap</a><span class="delimiter">(</span><a href="#236210" title="GenJVM.this.global.Type">memberTpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="GenJVM.this.global.Type" id="236260">bytecodeTpe</a> = <a href="#233772" title="GenJVM.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#107459" title="=&gt; GenJVM.this.global.Type">thisType</a>.<a href="../../symtab/Types.scala.html#105360" title="(sym: GenJVM.this.global.Symbol)GenJVM.this.global.Type">memberInfo</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isType</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107334" title="=&gt; Boolean">isConstructor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="../../Global.scala.html#64918" title="object GenJVM.this.global.erasure">erasure</a>.<a href="../../transform/Erasure.scala.html#236582" title="(tp: GenJVM.this.global.erasure.global.Type)GenJVM.this.global.erasure.global.Type">erasure</a><span class="delimiter">(</span><a href="#236259" title="GenJVM.this.global.erasure.global.Type">normalizedTpe</a><span class="delimiter">)</span> <a href="../../symtab/Types.scala.html#105379" title="(that: GenJVM.this.global.erasure.global.Type)Boolean">=:=</a> <a href="#236260" title="GenJVM.this.global.Type">bytecodeTpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97399" title="=&gt; GenJVM.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#96431" title="(pos: GenJVM.this.global.icodes.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107263" title="=&gt; GenJVM.this.global.Position">pos</a>, 
                  <span title="java.lang.String(&quot;|compiler bug: created generic signature for %s in %s that does not conform to its erasure\012                     |signature: %s\012                     |original type: %s\012                     |normalized type: %s\012                     |erasure type: %s\012                     |if this is reproducible, please report bug at http://lampsvn.epfl.ch/trac/scala\012                  &quot;)" class="string">&quot;&quot;&quot;|compiler bug: created generic signature for %s in %s that does not conform to its erasure
                     |signature: %s
                     |original type: %s
                     |normalized type: %s
                     |erasure type: %s
                     |if this is reproducible, please report bug at http://lampsvn.epfl.ch/trac/scala
                  &quot;&quot;&quot;</span>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</span>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>, <a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#107357" title="=&gt; GenJVM.this.global.Symbol">skipPackageObject</a>.<span title="=&gt; String">fullName</span>, <a href="#236229" title="String">sig</a>, <a href="#236210" title="GenJVM.this.global.Type">memberTpe</a>, <a href="#236259" title="GenJVM.this.global.erasure.global.Type">normalizedTpe</a>, <a href="#236260" title="GenJVM.this.global.Type">bytecodeTpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
               <span title="Nothing" class="keyword">return</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="Short" id="236230">index</a> = <a href="#233770" title="ch.epfl.lamp.fjbg.JMember">jmember</a>.<span title="()ch.epfl.lamp.fjbg.JConstantPool">getConstantPool</span>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#236229" title="String">sig</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64877" title="object GenJVM.this.global.opt">opt</a>.<a href="../../settings/AestheticSettings.scala.html#97469" title="=&gt; Boolean">verboseDebug</a><span class="delimiter">)</span> 
            <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72331" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;add generic sig &quot;)" class="string">&quot;add generic sig &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#233771" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.Type">info</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; ==&gt; &quot;)" class="string">&quot; ==&gt; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#236229" title="String">sig</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; @ &quot;)" class="string">&quot; @ &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#236230" title="Short">index</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="java.nio.ByteBuffer" id="236231">buf</a> = <span title="object java.nio.ByteBuffer">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
          <a href="#236231" title="java.nio.ByteBuffer">buf</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#236230" title="Short">index</a>
          <a href="#231379" title="(jmember: ch.epfl.lamp.fjbg.JMember, name: GenJVM.this.global.Name, buf: java.nio.ByteBuffer)Unit">addAttribute</a><span class="delimiter">(</span><a href="#233770" title="ch.epfl.lamp.fjbg.JMember">jmember</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114969" title="=&gt; GenJVM.this.global.tpnme.NameType">SignatureATTR</a>, <a href="#236231" title="java.nio.ByteBuffer">buf</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(jmember: ch.epfl.lamp.fjbg.JMember, annotations: List[GenJVM.this.global.AnnotationInfo])Unit" id="231377">addAnnotations</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JMember" id="233774">jmember</a>: <span title="ch.epfl.lamp.fjbg.JMember">JMember</span>, <a title="List[GenJVM.this.global.AnnotationInfo]" id="233775">annotations</a>: <span title="List[GenJVM.this.global.AnnotationInfo]">List</span><span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233775" title="List[GenJVM.this.global.AnnotationInfo]">annotations</a>.<span title="(p: GenJVM.this.global.AnnotationInfo =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#236632" title="GenJVM.this.global.AnnotationInfo">_</a>.<a href="../../symtab/AnnotationInfos.scala.html#133313" title="=&gt; GenJVM.this.global.Type">atp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106467" title="=&gt; GenJVM.this.global.Symbol">DeprecatedAttr</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JOtherAttribute" id="236638">attr</a> = <a href="#233774" title="ch.epfl.lamp.fjbg.JMember">jmember</a>.<span title="()ch.epfl.lamp.fjbg.FJBGContext">getContext</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: Any, x$3: java.lang.String, x$4: Array[Byte], x$5: Int)ch.epfl.lamp.fjbg.JOtherAttribute">JOtherAttribute</span><span class="delimiter">(</span>
          <a href="#233774" title="ch.epfl.lamp.fjbg.JMember">jmember</a>.<span title="()ch.epfl.lamp.fjbg.JClass">getJClass</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#233774" title="ch.epfl.lamp.fjbg.JMember">jmember</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114949" title="=&gt; GenJVM.this.global.tpnme.NameType">DeprecatedATTR</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
          <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
        <a href="#233774" title="ch.epfl.lamp.fjbg.JMember">jmember</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#236638" title="ch.epfl.lamp.fjbg.JOtherAttribute">attr</a>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="List[GenJVM.this.global.AnnotationInfo]" id="236624">toEmit</a> = <a href="#233775" title="List[GenJVM.this.global.AnnotationInfo]">annotations</a> <span title="(p: GenJVM.this.global.AnnotationInfo =&gt; Boolean)List[GenJVM.this.global.AnnotationInfo]">filter</span> <a href="#231372" title="(annot: GenJVM.this.global.AnnotationInfo)Boolean">shouldEmitAnnotation</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#236624" title="List[GenJVM.this.global.AnnotationInfo]">toEmit</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>

      <span class="keyword">val</span> <a title="java.nio.ByteBuffer" id="236625">buf</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span> = <span title="object java.nio.ByteBuffer">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><span title="Int(2048)" class="int">2048</span><span class="delimiter">)</span>
      <a href="#231373" title="(cpool: ch.epfl.lamp.fjbg.JConstantPool, buf: java.nio.ByteBuffer, annotations: List[GenJVM.this.global.AnnotationInfo])Int">emitJavaAnnotations</a><span class="delimiter">(</span><a href="#233774" title="ch.epfl.lamp.fjbg.JMember">jmember</a>.<span title="()ch.epfl.lamp.fjbg.JConstantPool">getConstantPool</span>, <a href="#236625" title="java.nio.ByteBuffer">buf</a>, <a href="#236624" title="List[GenJVM.this.global.AnnotationInfo]">toEmit</a><span class="delimiter">)</span>
      <a href="#231379" title="(jmember: ch.epfl.lamp.fjbg.JMember, name: GenJVM.this.global.Name, buf: java.nio.ByteBuffer)Unit">addAttribute</a><span class="delimiter">(</span><a href="#233774" title="ch.epfl.lamp.fjbg.JMember">jmember</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114961" title="=&gt; GenJVM.this.global.tpnme.NameType">RuntimeAnnotationATTR</a>, <a href="#236625" title="java.nio.ByteBuffer">buf</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(jmethod: ch.epfl.lamp.fjbg.JMethod, pannotss: List[List[GenJVM.this.global.AnnotationInfo]])Unit" id="231378">addParamAnnotations</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JMethod" id="236647">jmethod</a>: <span title="ch.epfl.lamp.fjbg.JMethod">JMethod</span>, <a title="List[List[GenJVM.this.global.AnnotationInfo]]" id="236648">pannotss</a>: <span title="List[List[GenJVM.this.global.AnnotationInfo]]">List</span><span class="delimiter">[</span>List<span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[List[GenJVM.this.global.AnnotationInfo]]" id="236650">annotations</a> = <a href="#236648" title="List[List[GenJVM.this.global.AnnotationInfo]]">pannotss</a> <span title="(f: List[GenJVM.this.global.AnnotationInfo] =&gt; List[GenJVM.this.global.AnnotationInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[GenJVM.this.global.AnnotationInfo]],List[GenJVM.this.global.AnnotationInfo],List[List[GenJVM.this.global.AnnotationInfo]]])List[List[GenJVM.this.global.AnnotationInfo]]">map</span> <span class="delimiter">(</span><a href="#236668" title="List[GenJVM.this.global.AnnotationInfo]">_</a> <span title="(p: GenJVM.this.global.AnnotationInfo =&gt; Boolean)List[GenJVM.this.global.AnnotationInfo]">filter</span> <a href="#231372" title="(annot: GenJVM.this.global.AnnotationInfo)Boolean">shouldEmitAnnotation</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#236650" title="List[List[GenJVM.this.global.AnnotationInfo]]">annotations</a> <span title="(p: List[GenJVM.this.global.AnnotationInfo] =&gt; Boolean)Boolean">forall</span> <span class="delimiter">(</span><a href="#236706" title="List[GenJVM.this.global.AnnotationInfo]">_</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>

      <span class="keyword">val</span> <a title="java.nio.ByteBuffer" id="236651">buf</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span> = <span title="object java.nio.ByteBuffer">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><span title="Int(2048)" class="int">2048</span><span class="delimiter">)</span>

      <span class="comment">// number of parameters</span>
      <a href="#236651" title="java.nio.ByteBuffer">buf</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#236650" title="List[List[GenJVM.this.global.AnnotationInfo]]">annotations</a>.<span title="=&gt; Int">length</span>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="List[GenJVM.this.global.AnnotationInfo]" id="236730">annots</a> &lt;- <a href="#236650" title="(f: List[GenJVM.this.global.AnnotationInfo] =&gt; Int)Unit">annotations</a><span class="delimiter">)</span>
        <a href="#231373" title="(cpool: ch.epfl.lamp.fjbg.JConstantPool, buf: java.nio.ByteBuffer, annotations: List[GenJVM.this.global.AnnotationInfo])Int">emitJavaAnnotations</a><span class="delimiter">(</span><a href="#236647" title="ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()ch.epfl.lamp.fjbg.JConstantPool">getConstantPool</span>, <a href="#236651" title="java.nio.ByteBuffer">buf</a>, <a href="#236730" title="List[GenJVM.this.global.AnnotationInfo]">annots</a><span class="delimiter">)</span>

      <a href="#231379" title="(jmember: ch.epfl.lamp.fjbg.JMember, name: GenJVM.this.global.Name, buf: java.nio.ByteBuffer)Unit">addAttribute</a><span class="delimiter">(</span><a href="#236647" title="ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114963" title="=&gt; GenJVM.this.global.tpnme.NameType">RuntimeParamAnnotationATTR</a>, <a href="#236651" title="java.nio.ByteBuffer">buf</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(jmember: ch.epfl.lamp.fjbg.JMember, name: GenJVM.this.global.Name, buf: java.nio.ByteBuffer)Unit" id="231379">addAttribute</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JMember" id="234740">jmember</a>: <span title="ch.epfl.lamp.fjbg.JMember">JMember</span>, <a title="GenJVM.this.global.Name" id="234741">name</a>: <a href="../../symtab/Names.scala.html#66914" title="GenJVM.this.global.Name">Name</a>, <a title="java.nio.ByteBuffer" id="234742">buf</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#234742" title="java.nio.ByteBuffer">buf</a>.<span title="()Int">position</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span>

      <span class="keyword">val</span> <a title="Int" id="236732">length</a> = <a href="#234742" title="java.nio.ByteBuffer">buf</a>.<span title="()Int">position</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Array[Byte]" id="236733">arr</a> = <a href="#234742" title="java.nio.ByteBuffer">buf</a>.<span title="()Array[Byte]">array</span><span title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]" class="delimiter">(</span><span class="delimiter">)</span>.<span title="(from: Int, until: Int)Array[Byte]">slice</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#236732" title="Int">length</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JOtherAttribute" id="236734">attr</a> = <a href="#234740" title="ch.epfl.lamp.fjbg.JMember">jmember</a>.<span title="()ch.epfl.lamp.fjbg.FJBGContext">getContext</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: Any, x$3: java.lang.String, x$4: Array[Byte], x$5: Int)ch.epfl.lamp.fjbg.JOtherAttribute">JOtherAttribute</span><span class="delimiter">(</span><a href="#234740" title="ch.epfl.lamp.fjbg.JMember">jmember</a>.<span title="()ch.epfl.lamp.fjbg.JClass">getJClass</span><span class="delimiter">(</span><span class="delimiter">)</span>,
                                                      <a href="#234740" title="ch.epfl.lamp.fjbg.JMember">jmember</a>,
                                                      <a href="#234741" title="GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                                                      <a href="#236733" title="Array[Byte]">arr</a>,
                                                      <a href="#236732" title="Int">length</a><span class="delimiter">)</span>
      <a href="#234740" title="ch.epfl.lamp.fjbg.JMember">jmember</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#236734" title="ch.epfl.lamp.fjbg.JOtherAttribute">attr</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(jclass: ch.epfl.lamp.fjbg.JClass)Unit" id="231380">addInnerClasses</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="232917">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">/** The outer name for this inner class. Note that it returns null
       *  when the inner class should not get an index in the constant pool.
       *  That means non-member classes (anonymous). See Section 4.7.5 in the JVMS.
       */</span>
      <span class="keyword">def</span> <a title="(innerSym: GenJVM.this.global.Symbol)String" id="236846">outerName</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="236849">innerSym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
        <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#236849" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107475" title="=&gt; GenJVM.this.global.Symbol">originalEnclosingMethod</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
          <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="236855">outerName</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#236849" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107246" title="=&gt; GenJVM.this.global.Symbol">rawowner</a><span class="delimiter">)</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#112472" title="(sym: GenJVM.this.global.Symbol)Boolean">isTopLevelModule</a><span class="delimiter">(</span><a href="#236849" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107246" title="=&gt; GenJVM.this.global.Symbol">rawowner</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#236855" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">outerName</a> <span title="(suffix: String)java.lang.String">stripSuffix</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
          <span class="keyword">else</span> <a href="#236855" title="String">outerName</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(innerSym: GenJVM.this.global.Symbol)String" id="236847">innerName</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="236859">innerSym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> = 
        <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#236859" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107346" title="=&gt; Boolean">isAnonymousClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#236859" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107347" title="=&gt; Boolean">isAnonymousFunction</a><span class="delimiter">)</span>
          <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span>
          <a href="#236859" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107249" title="=&gt; GenJVM.this.global.Name">rawname</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>

      <span class="comment">// add inner classes which might not have been referenced yet</span>
      <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72331" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../../Phase.scala.html#102836" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="236908">sym</a> &lt;- <span title="(xs: GenJVM.this.global.icodes.global.Symbol*)List[GenJVM.this.global.icodes.global.Symbol]">List</span><span title="(f: GenJVM.this.global.icodes.global.Symbol =&gt; Unit)Unit" class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>, <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107483" title="=&gt; GenJVM.this.global.icodes.global.Symbol">linkedClassOfClass</a><span class="delimiter">)</span> ; <a title="GenJVM.this.global.icodes.global.Symbol" id="236929">m</a> &lt;- <a href="#236908" title="GenJVM.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#105346" title="(f: GenJVM.this.global.icodes.global.Symbol =&gt; scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol])Unit">decls</a> ; <span class="keyword">if</span> <a href="#236929" title="GenJVM.this.global.icodes.global.Symbol">m</a>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span>
          <a href="#231366" title="=&gt; scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]">innerClassBuffer</a> <span title="(x: GenJVM.this.global.Symbol)BytecodeGenerator.this.innerClassBuffer.type">+=</span> <a href="#236929" title="GenJVM.this.global.icodes.global.Symbol">m</a>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="List[GenJVM.this.global.Symbol]" id="236848">allInners</a> = <a href="#231366" title="=&gt; scala.collection.mutable.ListBuffer[GenJVM.this.global.Symbol]">innerClassBuffer</a>.<span title="=&gt; List[GenJVM.this.global.Symbol]">toList</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#236848" title="List[GenJVM.this.global.Symbol]">allInners</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JInnerClassesAttribute" id="236936">innerClassesAttr</a> = <a href="#232917" title="ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()ch.epfl.lamp.fjbg.JInnerClassesAttribute">getInnerClasses</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="comment">// sort them so inner classes succeed their enclosing class</span>
        <span class="comment">// to satisfy the Eclipse Java compiler</span>
        <span class="comment">//for (innerSym &lt;- innerClasses.toList sortBy (_.name.length)) {</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="237047">innerSym</a> &lt;- <a href="#236848" title="List[GenJVM.this.global.Symbol]">allInners</a>.<span title="=&gt; List[GenJVM.this.global.Symbol]">distinct</span> <span title="(f: GenJVM.this.global.Symbol =&gt; Unit)Unit">sortBy</span> <span class="delimiter">(</span><a href="#236970" title="GenJVM.this.global.Symbol">_</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96572" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="Int" id="237048">flags</a> = <a href="#112471" title="(sym: GenJVM.this.global.Symbol)Int">javaFlags</a><span class="delimiter">(</span><a href="#237047" title="GenJVM.this.global.Symbol">innerSym</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#237047" title="GenJVM.this.global.Symbol">innerSym</a>.<a href="../../symtab/Symbols.scala.html#107246" title="=&gt; GenJVM.this.global.Symbol">rawowner</a>.<span title="=&gt; Boolean">hasModuleFlag</span><span class="delimiter">)</span>
            <a href="#237048" title="Int">flags</a> <span title="(x: Int)Int">|=</span> <span title="Int(8)">ACC_STATIC</span>

          <a href="#236936" title="ch.epfl.lamp.fjbg.JInnerClassesAttribute">innerClassesAttr</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: java.lang.String, x$4: Int)Unit">addEntry</span><span class="delimiter">(</span>
            <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#237047" title="GenJVM.this.global.Symbol">innerSym</a><span class="delimiter">)</span>,
            <a href="#236846" title="(innerSym: GenJVM.this.global.Symbol)String">outerName</a><span class="delimiter">(</span><a href="#237047" title="GenJVM.this.global.Symbol">innerSym</a><span class="delimiter">)</span>,
            <a href="#236847" title="(innerSym: GenJVM.this.global.Symbol)String">innerName</a><span class="delimiter">(</span><a href="#237047" title="GenJVM.this.global.Symbol">innerSym</a><span class="delimiter">)</span>,
            <a href="#237048" title="Int">flags</a> <span title="(x: Int)Int">&amp;</span> <a href="#231296" title="=&gt; Int">INNER_CLASSES_FLAGS</a>
          <span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(f: GenJVM.this.global.icodes.IField)Unit" id="231381">genField</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IField" id="233736">f</a>: <a href="../icode/Members.scala.html#96962" title="GenJVM.this.global.icodes.IField">IField</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Adding field: &quot;)" class="string">&quot;Adding field: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Int" id="237058">attributes</a> = <a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo]">annotations</a>.<span title="(f: GenJVM.this.global.icodes.global.AnnotationInfo =&gt; GenJVM.this.global.icodes.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.global.AnnotationInfo],GenJVM.this.global.icodes.global.Symbol,List[GenJVM.this.global.icodes.global.Symbol]])List[GenJVM.this.global.icodes.global.Symbol]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,GenJVM.this.global.icodes.global.Symbol,List[GenJVM.this.global.icodes.global.Symbol]]" class="delimiter">(</span><a href="#237085" title="GenJVM.this.global.icodes.global.AnnotationInfo">_</a>.<a href="../../symtab/AnnotationInfos.scala.html#133313" title="=&gt; GenJVM.this.global.icodes.global.Type">atp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.icodes.global.Symbol">typeSymbol</a><span class="delimiter">)</span>.<span title="(z: Int)(f: (Int, GenJVM.this.global.icodes.global.Symbol) =&gt; Int)Int">foldLeft</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#237132" title="Int" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="Int" class="delimiter">(</span><a title="Int" id="237142">res</a>, <a href="../../symtab/Definitions.scala.html#106487" title="=&gt; GenJVM.this.global.Symbol">TransientAttr</a><span class="delimiter">)</span> =&gt; <a href="#237142" title="Int">res</a> <span title="(x: Int)Int">|</span> <span title="Int(128)">ACC_TRANSIENT</span>
        <span class="keyword">case</span> <span title="Int" class="delimiter">(</span><a title="Int" id="237149">res</a>, <a href="../../symtab/Definitions.scala.html#106489" title="=&gt; GenJVM.this.global.Symbol">VolatileAttr</a><span class="delimiter">)</span>  =&gt; <a href="#237149" title="Int">res</a> <span title="(x: Int)Int">|</span> <span title="Int(64)">ACC_VOLATILE</span>
        <span class="keyword">case</span> <span title="Int" class="delimiter">(</span><a title="Int" id="237156">res</a>, _<span class="delimiter">)</span>             =&gt; <a href="#237156" title="Int">res</a>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a title="Int" id="237059">flags</a> = <a href="#112471" title="(sym: GenJVM.this.global.Symbol)Int">javaFlags</a><span class="delimiter">(</span><a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; Boolean">isMutable</span><span class="delimiter">)</span>
        <a href="#237059" title="Int">flags</a> <span title="(x: Int)Int">|=</span> <span title="Int(16)">ACC_FINAL</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JField" id="237060">jfield</a> =
        <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)ch.epfl.lamp.fjbg.JField">addNewField</span><span class="delimiter">(</span><a href="#237059" title="Int">flags</a> <span title="(x: Int)Int">|</span> <a href="#237058" title="Int">attributes</a>,
                           <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>,
                           <a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.icodes.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#231376" title="(jmember: ch.epfl.lamp.fjbg.JMember, sym: GenJVM.this.global.Symbol, owner: GenJVM.this.global.Symbol)Unit">addGenericSignature</a><span class="delimiter">(</span><a href="#237060" title="ch.epfl.lamp.fjbg.JField">jfield</a>, <a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>, <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <a href="#231377" title="(jmember: ch.epfl.lamp.fjbg.JMember, annotations: List[GenJVM.this.global.AnnotationInfo])Unit">addAnnotations</a><span class="delimiter">(</span><a href="#237060" title="ch.epfl.lamp.fjbg.JField">jfield</a>, <a href="#233736" title="GenJVM.this.global.icodes.IField">f</a>.<a href="../icode/Members.scala.html#210623" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo]">annotations</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: GenJVM.this.global.icodes.IMethod)Unit" id="231382">genMethod</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="233765">m</a>: <a href="../icode/Members.scala.html#96963" title="GenJVM.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107385" title="=&gt; Boolean">isStaticConstructor</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.icodes.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115525" title="=&gt; GenJVM.this.global.TermName">getClass_</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197748" title="=&gt; List[GenJVM.this.global.icodes.Local]">params</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>

      <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Generating method &quot;)" class="string">&quot;Generating method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
      <a href="#231338" title="(x$1: GenJVM.this.global.icodes.IMethod)Unit">method</a> = <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>
      <a href="#231401" title="=&gt; scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,Int]">endPC</a>.<span title="()Unit">clear</span>
      <a href="#231407" title="(m: GenJVM.this.global.icodes.IMethod)Unit">computeLocalVarsIndex</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="ch.epfl.lamp.fjbg.JType" id="237172">resTpe</a> = <a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.icodes.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#105327" title="=&gt; GenJVM.this.global.icodes.global.Type">resultType</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107332" title="=&gt; Boolean">isClassConstructor</a><span class="delimiter">)</span>
        <a href="#237172" title="ch.epfl.lamp.fjbg.JType">resTpe</a> = <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">VOID</span>

      <span class="keyword">var</span> <a title="Int" id="237173">flags</a> = <a href="#112471" title="(sym: GenJVM.this.global.Symbol)Int">javaFlags</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()Boolean">isInterface</span><span class="delimiter">)</span>
        <a href="#237173" title="Int">flags</a> <span title="(x: Int)Int">|=</span> <span title="Int(1024)">ACC_ABSTRACT</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107361" title="=&gt; Boolean">isStrictFP</a><span class="delimiter">)</span>
        <a href="#237173" title="Int">flags</a> <span title="(x: Int)Int">|=</span> <span title="Int(2048)">ACC_STRICT</span>

      <span class="comment">// native methods of objects are generated in mirror classes</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197730" title="=&gt; Boolean">native</a><span class="delimiter">)</span>
        <a href="#237173" title="Int">flags</a> <span title="(x: Int)Int">|=</span> <span title="Int(256)">ACC_NATIVE</span>

      <a href="#231344" title="(x$1: ch.epfl.lamp.fjbg.JMethod)Unit">jmethod</a> = <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType, x$4: Array[ch.epfl.lamp.fjbg.JType], x$5: Array[java.lang.String])ch.epfl.lamp.fjbg.JMethod">addNewMethod</span><span class="delimiter">(</span><a href="#237173" title="Int">flags</a>,
                                    <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>,
                                    <a href="#237172" title="ch.epfl.lamp.fjbg.JType">resTpe</a>,
                                    <a href="GenJVMUtil.scala.html#231281" title="(xs: Traversable[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">mkArray</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197748" title="=&gt; List[GenJVM.this.global.icodes.Local]">params</a> <span title="(f: GenJVM.this.global.icodes.Local =&gt; ch.epfl.lamp.fjbg.JType)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.Local],ch.epfl.lamp.fjbg.JType,Traversable[ch.epfl.lamp.fjbg.JType]])Traversable[ch.epfl.lamp.fjbg.JType]">map</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="237241">p</a> =&gt; <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#237241" title="GenJVM.this.global.icodes.Local">p</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                                    <a href="GenJVMUtil.scala.html#231282" title="(xs: Traversable[String])Array[String]">mkArray</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197748" title="=&gt; List[GenJVM.this.global.icodes.Local]">params</a> <span title="(f: GenJVM.this.global.icodes.Local =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.Local],String,Traversable[String]])Traversable[String]">map</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="237298">p</a> =&gt; <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#237298" title="GenJVM.this.global.icodes.Local">p</a>.<a href="../icode/Members.scala.html#197915" title="=&gt; GenJVM.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#231383" title="(jmethod: ch.epfl.lamp.fjbg.JMethod, meth: GenJVM.this.global.Symbol)Unit">addRemoteException</a><span class="delimiter">(</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()Boolean">isAbstract</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197730" title="=&gt; Boolean">native</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JExtendedCode" id="237329">jcode</a> = <a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()ch.epfl.lamp.fjbg.JCode">getCode</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JExtendedCode" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">]</span>

        <span class="comment">// add a fake local for debugging purposes</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231352" title="=&gt; Boolean">emitVars</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#231385" title="(sym: GenJVM.this.global.Symbol)Boolean">isClosureApply</a><span class="delimiter">(</span><a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.global.Symbol" id="237333">outerField</a> = <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#105347" title="(name: GenJVM.this.global.icodes.global.Name)GenJVM.this.global.icodes.global.Symbol">decl</a><span class="delimiter">(</span><a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115288" title="=&gt; GenJVM.this.global.nme.NameType">OUTER_LOCAL</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#237333" title="GenJVM.this.global.icodes.global.Symbol">outerField</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Adding fake local to represent outer \'this\' for closure &quot;)" class="string">&quot;Adding fake local to represent outer 'this' for closure &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.Local" id="237344">_this</a> = <span title="GenJVM.this.global.icodes.Local" class="keyword">new</span> <a href="../icode/Members.scala.html#96964" title="GenJVM.this.global.icodes.Local">Local</a><span class="delimiter">(</span>
              <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107281" title="(pos: GenJVM.this.global.icodes.global.Position, name: GenJVM.this.global.icodes.global.TermName)GenJVM.this.global.icodes.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="../../symtab/Positions.scala.html#67891" title="=&gt; tools.nsc.util.NoPosition.type">NoPosition</a>, <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115278" title="=&gt; GenJVM.this.global.nme.NameType">FAKE_LOCAL_THIS</a><span class="delimiter">)</span>, <a href="../icode/TypeKinds.scala.html#97027" title="(t: GenJVM.this.global.icodes.global.Type)GenJVM.this.global.icodes.TypeKind">toTypeKind</a><span class="delimiter">(</span><a href="#237333" title="GenJVM.this.global.icodes.global.Symbol">outerField</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.icodes.global.Type">tpe</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
            <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197746" title="(x$1: List[GenJVM.this.global.icodes.Local])Unit">locals</a> = <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197745" title="=&gt; List[GenJVM.this.global.icodes.Local]">locals</a> <a href="#237353" title="(prefix: List[GenJVM.this.global.icodes.Local])List[GenJVM.this.global.icodes.Local]">:::</a> <span title="(xs: GenJVM.this.global.icodes.Local*)List[GenJVM.this.global.icodes.Local]">List</span><span class="delimiter">(</span><a href="#237344" title="GenJVM.this.global.icodes.Local">_this</a><span class="delimiter">)</span>
            <a href="#231407" title="(m: GenJVM.this.global.icodes.IMethod)Unit">computeLocalVarsIndex</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a><span class="delimiter">)</span> <span class="comment">// since we added a new local, we need to recompute indexes</span>

            <a href="#237329" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitALOAD_0</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#237329" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitGETFIELD</span><span class="delimiter">(</span><a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>,
                               <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#237333" title="GenJVM.this.global.icodes.global.Symbol">outerField</a><span class="delimiter">)</span>,
                               <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#237333" title="GenJVM.this.global.icodes.global.Symbol">outerField</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#237329" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitSTORE</span><span class="delimiter">(</span><a href="#231406" title="(local: GenJVM.this.global.icodes.Local)Int">indexOf</a><span class="delimiter">(</span><a href="#237344" title="GenJVM.this.global.icodes.Local">_this</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#237344" title="GenJVM.this.global.icodes.Local">_this</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="237430">local</a> &lt;- <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197745" title="(f: GenJVM.this.global.icodes.Local =&gt; ch.epfl.lamp.fjbg.JLocalVariable)Unit">locals</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span> <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197748" title="=&gt; List[GenJVM.this.global.icodes.Local]">params</a>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#237430" title="GenJVM.this.global.icodes.Local">local</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;add local var: &quot;)" class="string">&quot;add local var: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#237430" title="GenJVM.this.global.icodes.Local">local</a><span class="delimiter">)</span>
          <a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: java.lang.String)ch.epfl.lamp.fjbg.JLocalVariable">addNewLocalVariable</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#237430" title="GenJVM.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>, <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#237430" title="GenJVM.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#197915" title="=&gt; GenJVM.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#231399" title="(m: GenJVM.this.global.icodes.IMethod)Unit">genCode</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231352" title="=&gt; Boolean">emitVars</a><span class="delimiter">)</span>
          <a href="#231400" title="(m: GenJVM.this.global.icodes.IMethod, jcode: ch.epfl.lamp.fjbg.JCode)Unit">genLocalVariableTable</a><span class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>, <a href="#237329" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#231376" title="(jmember: ch.epfl.lamp.fjbg.JMember, sym: GenJVM.this.global.Symbol, owner: GenJVM.this.global.Symbol)Unit">addGenericSignature</a><span class="delimiter">(</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>, <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a href="#237175" title="(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])" class="delimiter">(</a><a href="#237174" title="List[GenJVM.this.global.AnnotationInfo]" id="237175">excs</a>, <a href="#237174" title="List[GenJVM.this.global.AnnotationInfo]" id="237176">others</a><span class="delimiter">)</span> = <a href="#231384" title="(annotations: List[GenJVM.this.global.AnnotationInfo], annotSym: GenJVM.this.global.Symbol)(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])">splitAnnotations</a><span title="(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo]) @unchecked" class="delimiter">(</span><a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo]">annotations</a>, <a href="../../symtab/Definitions.scala.html#106121" title="=&gt; GenJVM.this.global.Symbol">ThrowsClass</a><span class="delimiter">)</span>
      <a href="#231371" title="(jmethod: ch.epfl.lamp.fjbg.JMethod, excs: List[GenJVM.this.global.AnnotationInfo])Unit">addExceptionsAttribute</a><span class="delimiter">(</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="#237175" title="List[GenJVM.this.global.AnnotationInfo]">excs</a><span class="delimiter">)</span>
      <a href="#231377" title="(jmember: ch.epfl.lamp.fjbg.JMember, annotations: List[GenJVM.this.global.AnnotationInfo])Unit">addAnnotations</a><span class="delimiter">(</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="#237176" title="List[GenJVM.this.global.AnnotationInfo]">others</a><span class="delimiter">)</span>
      <a href="#231378" title="(jmethod: ch.epfl.lamp.fjbg.JMethod, pannotss: List[List[GenJVM.this.global.AnnotationInfo]])Unit">addParamAnnotations</a><span class="delimiter">(</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>, <a href="#233765" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197748" title="=&gt; List[GenJVM.this.global.icodes.Local]">params</a>.<span title="(f: GenJVM.this.global.icodes.Local =&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.Local],List[GenJVM.this.global.icodes.global.AnnotationInfo],List[List[GenJVM.this.global.AnnotationInfo]]])List[List[GenJVM.this.global.AnnotationInfo]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,List[GenJVM.this.global.icodes.global.AnnotationInfo],List[List[GenJVM.this.global.icodes.global.AnnotationInfo]]]" class="delimiter">(</span><a href="#237490" title="GenJVM.this.global.icodes.Local">_</a>.<a href="../icode/Members.scala.html#197915" title="=&gt; GenJVM.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.icodes.global.AnnotationInfo]">annotations</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(jmethod: ch.epfl.lamp.fjbg.JMethod, meth: GenJVM.this.global.Symbol)Unit" id="231383">addRemoteException</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JMethod" id="237326">jmethod</a>: <span title="ch.epfl.lamp.fjbg.JMethod">JMethod</span>, <a title="GenJVM.this.global.Symbol" id="237327">meth</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(ainfo: GenJVM.this.global.AnnotationInfo)Boolean" id="237518">isRemoteThrows</a><span class="delimiter">(</span><a title="GenJVM.this.global.AnnotationInfo" id="237519">ainfo</a>: <a href="../../symtab/AnnotationInfos.scala.html#67743" title="GenJVM.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">)</span> = <a href="#237519" title="GenJVM.this.global.AnnotationInfo">ainfo</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">AnnotationInfo</span><span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="237523">tp</a>, <a href="#237525" title="(x: List[GenJVM.this.global.Tree])Some[List[GenJVM.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="GenJVM.this.global.Tree" id="237536">arg</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#237523" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106121" title="=&gt; GenJVM.this.global.Symbol">ThrowsClass</a> =&gt;
          <a href="#237536" title="GenJVM.this.global.Tree">arg</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Boolean(true)">Literal</span><span class="delimiter">(</span>Constant<span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="237545">tpe</a>: <a href="../../symtab/Types.scala.html#67381" title="GenJVM.this.global.Type">Type</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#237545" title="GenJVM.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#231330" title="=&gt; GenJVM.this.global.Type">RemoteException</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231361" title="=&gt; Boolean">isRemoteClass</a> <span title="(x: Boolean)Boolean">||</span>
          <span class="delimiter">(</span><a href="#237327" title="GenJVM.this.global.Symbol">meth</a>.<a href="../../symtab/Symbols.scala.html#107273" title="(cls: GenJVM.this.global.Symbol)Boolean">hasAnnotation</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106475" title="=&gt; GenJVM.this.global.Symbol">RemoteAttr</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#237326" title="ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()Boolean">isPublic</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="GenJVM.this.global.Constant" id="237552">c</a> = <a href="BytecodeWriters.scala.html#112530" title="(value: Any)GenJVM.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#231330" title="=&gt; GenJVM.this.global.Type">RemoteException</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="GenJVM.this.global.AnnotationInfo" id="237553">ainfo</a> = <a href="../../symtab/AnnotationInfos.scala.html#134132" title="(atp: GenJVM.this.global.Type, args: List[GenJVM.this.global.Tree], assocs: List[(GenJVM.this.global.Name, GenJVM.this.global.ClassfileAnnotArg)])GenJVM.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106121" title="=&gt; GenJVM.this.global.Symbol">ThrowsClass</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>, <span title="(xs: GenJVM.this.global.Literal*)List[GenJVM.this.global.Literal]">List</span><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="(value: GenJVM.this.global.Constant)GenJVM.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#237552" title="GenJVM.this.global.Constant">c</a><span class="delimiter">)</span>.<span title="(tp: GenJVM.this.global.Type)GenJVM.this.global.Literal">setType</span><span class="delimiter">(</span><a href="#237552" title="GenJVM.this.global.Constant">c</a>.<span title="=&gt; GenJVM.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#237327" title="GenJVM.this.global.Symbol">meth</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.AnnotationInfo]">annotations</a>.<span title="(p: GenJVM.this.global.AnnotationInfo =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#237518" title="(ainfo: GenJVM.this.global.AnnotationInfo)Boolean">isRemoteThrows</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#237327" title="GenJVM.this.global.Symbol">meth</a> <a href="../../symtab/Symbols.scala.html#107272" title="(annot: GenJVM.this.global.AnnotationInfo)Unit">addAnnotation</a> <a href="#237553" title="GenJVM.this.global.AnnotationInfo">ainfo</a>
        <span class="delimiter">}</span>      
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>


    <span class="comment">/** Return a pair of lists of annotations, first one containing all 
     *  annotations for the given symbol, and the rest.
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(annotations: List[GenJVM.this.global.AnnotationInfo], annotSym: GenJVM.this.global.Symbol)(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])" id="231384">splitAnnotations</a><span class="delimiter">(</span><a title="List[GenJVM.this.global.AnnotationInfo]" id="237447">annotations</a>: <span title="List[GenJVM.this.global.AnnotationInfo]">List</span><span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span>, <a title="GenJVM.this.global.Symbol" id="237448">annotSym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])" class="delimiter">(</span>List<span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span>, List<span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#237447" title="List[GenJVM.this.global.AnnotationInfo]">annotations</a>.<span title="(p: GenJVM.this.global.AnnotationInfo =&gt; Boolean)(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])">partition</span> <span class="delimiter">{</span> <a title="GenJVM.this.global.AnnotationInfo" id="237604">a</a> =&gt; <a href="#237604" title="GenJVM.this.global.AnnotationInfo">a</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean(true)">AnnotationInfo</span><span class="delimiter">(</span><a title="GenJVM.this.global.Type" id="237608">tp</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#237608" title="GenJVM.this.global.Type">tp</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#237448" title="GenJVM.this.global.Symbol">annotSym</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Boolean" id="231385">isClosureApply</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="237330">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      <span class="delimiter">(</span><a href="#237330" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115310" title="=&gt; GenJVM.this.global.nme.NameType">apply</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#237330" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isSynthetic</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#237330" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#105322" title="=&gt; List[GenJVM.this.global.Type]">parents</a>.<span title="(p: GenJVM.this.global.Type =&gt; Boolean)Boolean">exists</span> <span class="delimiter">{</span> <a title="GenJVM.this.global.Type" id="237632">t</a> =&gt; 
        <span class="keyword">val</span> TypeRef<a href="#237637" title="GenJVM.this.global.Symbol" id="237633" class="delimiter">(</a>_, <a title="GenJVM.this.global.Symbol" id="237637">sym</a>, _<span class="delimiter">)</span> = <a href="#237632" title="GenJVM.this.global.Type">t</a>
        <a href="../../symtab/Definitions.scala.html#106328" title="(xs: Array[GenJVM.this.global.Symbol])scala.collection.mutable.ArrayOps[GenJVM.this.global.Symbol]">FunctionClass</a> <span title="(elem: Any)Boolean">contains</span> <a href="#237633" title="GenJVM.this.global.Symbol">sym</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="()Unit" id="231386">addModuleInstanceField</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)ch.epfl.lamp.fjbg.JField">addNewField</span><span title="Unit" class="delimiter">(</span><a href="#231300" title="=&gt; Int">PublicStaticFinal</a>,
                        <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115284" title="=&gt; GenJVM.this.global.nme.NameType">MODULE_INSTANCE_FIELD</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                        <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()ch.epfl.lamp.fjbg.JType">getType</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(cls: ch.epfl.lamp.fjbg.JClass, mopt: Option[GenJVM.this.global.icodes.IMethod])Unit" id="231387">addStaticInit</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="233632">cls</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="Option[GenJVM.this.global.icodes.IMethod]" id="233633">mopt</a>: <span title="Option[GenJVM.this.global.icodes.IMethod]">Option</span><span class="delimiter">[</span>IMethod<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethod" id="237662">clinitMethod</a> = <a href="#233632" title="ch.epfl.lamp.fjbg.JClass">cls</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType, x$4: Array[ch.epfl.lamp.fjbg.JType], x$5: Array[java.lang.String])ch.epfl.lamp.fjbg.JMethod">addNewMethod</span><span class="delimiter">(</span><a href="#231298" title="=&gt; Int">PublicStatic</a>,
                                          <span title="java.lang.String(&quot;&lt;clinit&gt;&quot;)" class="string">&quot;&lt;clinit&gt;&quot;</span>,
                                          <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">VOID</span>,
                                          <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="Array[ch.epfl.lamp.fjbg.JType]">EMPTY_ARRAY</span>,
                                          <span title="Array[String]" class="keyword">new</span> <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JExtendedCode" id="237663">clinit</a> = <a href="#237662" title="ch.epfl.lamp.fjbg.JMethod">clinitMethod</a>.<span title="()ch.epfl.lamp.fjbg.JCode">getCode</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JExtendedCode" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">]</span>

      <a href="#233633" title="Option[GenJVM.this.global.icodes.IMethod]">mopt</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
       	<span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="237667">m</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97402" title="=&gt; Option[String]">bootstrapClass</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#231389" title="(jcode: ch.epfl.lamp.fjbg.JExtendedCode)Unit">legacyEmitBootstrapMethodInstall</a><span class="delimiter">(</span><a href="#237663" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.BasicBlock" id="237668">oldLastBlock</a> = <a href="#237667" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197727" title="=&gt; GenJVM.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#197800" title="=&gt; scala.collection.mutable.ListBuffer[GenJVM.this.global.icodes.BasicBlock]">blocks</a>.<span title="=&gt; GenJVM.this.global.icodes.BasicBlock">last</span>
          <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.BasicBlock" id="237669">lastBlock</a> = <a href="#237667" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197727" title="=&gt; GenJVM.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#197819" title="=&gt; GenJVM.this.global.icodes.BasicBlock">newBlock</a>
          <a href="#237668" title="GenJVM.this.global.icodes.BasicBlock">oldLastBlock</a>.<a href="../icode/BasicBlocks.scala.html#197656" title="(pos: Int, instr: GenJVM.this.global.icodes.Instruction)Boolean">replaceInstruction</a><span class="delimiter">(</span><a href="#237668" title="GenJVM.this.global.icodes.BasicBlock">oldLastBlock</a>.<a href="../icode/BasicBlocks.scala.html#197654" title="=&gt; Int">length</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>, <a href="../icode/Opcodes.scala.html#202617" title="(whereto: GenJVM.this.global.icodes.BasicBlock)GenJVM.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112473" title="(sym: GenJVM.this.global.Symbol)Boolean">isStaticModule</a><span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// call object's private ctor from static ctor</span>
            <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a> <a href="../icode/BasicBlocks.scala.html#197663" title="(instr: GenJVM.this.global.icodes.Instruction)Unit">emit</a> <a href="../icode/Opcodes.scala.html#208126" title="(kind: GenJVM.this.global.icodes.REFERENCE)GenJVM.this.global.icodes.opcodes.NEW">NEW</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#196332" title="(cls: GenJVM.this.global.icodes.global.Symbol)GenJVM.this.global.icodes.REFERENCE">REFERENCE</a><span class="delimiter">(</span><a href="#237667" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; GenJVM.this.global.icodes.global.Symbol">enclClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a> <a href="../icode/BasicBlocks.scala.html#197663" title="(instr: GenJVM.this.global.icodes.Instruction)Unit">emit</a> <a href="../icode/Opcodes.scala.html#208442" title="(method: GenJVM.this.global.icodes.global.Symbol, style: GenJVM.this.global.icodes.opcodes.InvokeStyle)GenJVM.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a><span class="delimiter">(</span><a href="#237667" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<span title="=&gt; GenJVM.this.global.icodes.global.Symbol">enclClass</span>.<a href="../../symtab/Symbols.scala.html#107456" title="=&gt; GenJVM.this.global.icodes.global.Symbol">primaryConstructor</a>, <a href="../icode/Opcodes.scala.html#208764" title="(onInstance: Boolean)GenJVM.this.global.icodes.opcodes.Static">Static</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span class="comment">// add serialVUID code</span>
          <a href="#231358" title="=&gt; Option[Long]">serialVUID</a> <span title="(f: Long =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="Long" id="237725">value</a> =&gt;
            <span class="keyword">import</span> <a href="../../symtab/Flags.scala.html#24079" title="object scala.tools.nsc.symtab.Flags">Flags</a>._, <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>._
            <span class="keyword">val</span> <a title="java.lang.String" id="237728">fieldName</a> = <span title="java.lang.String(&quot;serialVersionUID&quot;)" class="string">&quot;serialVersionUID&quot;</span>
            <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.global.TermSymbol" id="237729">fieldSymbol</a> = <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107279" title="(pos: GenJVM.this.global.icodes.global.Position, name: GenJVM.this.global.icodes.global.TermName)GenJVM.this.global.icodes.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="../../symtab/Positions.scala.html#67891" title="=&gt; tools.nsc.util.NoPosition.type">NoPosition</a>, <a href="../../symtab/Names.scala.html#66903" title="(s: String)GenJVM.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#237728" title="java.lang.String">fieldName</a><span class="delimiter">)</span><span class="delimiter">)</span>
                                .<a href="../../symtab/Symbols.scala.html#107412" title="(mask: Long)GenJVM.this.global.icodes.global.TermSymbol">setFlag</a><span class="delimiter">(</span>STATIC <span title="Long(8388640L)">|</span> FINAL<span class="delimiter">)</span>
                                .<a href="../../symtab/Symbols.scala.html#107425" title="(info: GenJVM.this.global.icodes.global.Type)GenJVM.this.global.icodes.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106314" title="=&gt; GenJVM.this.global.Type">longType</a><span class="delimiter">)</span>
            <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a> <a href="../icode/Members.scala.html#97405" title="(f: GenJVM.this.global.icodes.IField)GenJVM.this.global.icodes.IClass">addField</a> <span title="GenJVM.this.global.icodes.IField" class="keyword">new</span> <a href="../icode/Members.scala.html#96962" title="GenJVM.this.global.icodes.IField">IField</a><span class="delimiter">(</span><a href="#237729" title="GenJVM.this.global.icodes.global.TermSymbol">fieldSymbol</a><span class="delimiter">)</span>
            <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a> <a href="../icode/BasicBlocks.scala.html#197663" title="(instr: GenJVM.this.global.icodes.Instruction)Unit">emit</a> <a href="../icode/Opcodes.scala.html#206980" title="(constant: GenJVM.this.global.icodes.global.Constant)GenJVM.this.global.icodes.opcodes.CONSTANT">CONSTANT</a><span class="delimiter">(</span><a href="BytecodeWriters.scala.html#112530" title="(value: Any)GenJVM.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#237725" title="Long">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a> <a href="../icode/BasicBlocks.scala.html#197663" title="(instr: GenJVM.this.global.icodes.Instruction)Unit">emit</a> <a href="../icode/Opcodes.scala.html#205624" title="(field: GenJVM.this.global.icodes.global.Symbol, isStatic: Boolean)GenJVM.this.global.icodes.opcodes.STORE_FIELD">STORE_FIELD</a><span class="delimiter">(</span><a href="#237729" title="GenJVM.this.global.icodes.global.TermSymbol">fieldSymbol</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231364" title="=&gt; Boolean">isParcelableClass</a><span class="delimiter">)</span>
            <a href="GenAndroid.scala.html#112527" title="(codegen: GenJVM.this.BytecodeGenerator, block: GenJVM.this.global.icodes.BasicBlock)Unit">addCreatorCode</a><span class="delimiter">(</span><a href="#112470" title="GenJVM.this.BytecodeGenerator">BytecodeGenerator</a>.<span class="keyword">this</span>, <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a><span class="delimiter">)</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97402" title="=&gt; Option[String]">bootstrapClass</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
            <span class="comment">// emit bootstrap method install</span>
            <span class="comment">//emitBootstrapMethodInstall(block)</span>
          <span class="delimiter">}</span>

          <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a> <a href="../icode/BasicBlocks.scala.html#197663" title="(instr: GenJVM.this.global.icodes.Instruction)Unit">emit</a> <a href="../icode/Opcodes.scala.html#202654" title="(kind: GenJVM.this.global.icodes.TypeKind)GenJVM.this.global.icodes.opcodes.RETURN">RETURN</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#96997" title="object GenJVM.this.global.icodes.UNIT">UNIT</a><span class="delimiter">)</span>
          <a href="#237669" title="GenJVM.this.global.icodes.BasicBlock">lastBlock</a>.<a href="../icode/BasicBlocks.scala.html#197669" title="()Unit">close</a>

       	  <a href="#231338" title="(x$1: GenJVM.this.global.icodes.IMethod)Unit">method</a> = <a href="#237667" title="GenJVM.this.global.icodes.IMethod">m</a>
       	  <a href="#231344" title="(x$1: ch.epfl.lamp.fjbg.JMethod)Unit">jmethod</a> = <a href="#237662" title="ch.epfl.lamp.fjbg.JMethod">clinitMethod</a>
       	  <a href="#231399" title="(m: GenJVM.this.global.icodes.IMethod)Unit">genCode</a><span class="delimiter">(</span><a href="#237667" title="GenJVM.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
       	<span class="keyword">case</span> <span title="Unit">None</span> =&gt;
          <a href="#231388" title="(cls: ch.epfl.lamp.fjbg.JClass, clinit: ch.epfl.lamp.fjbg.JExtendedCode)Unit">legacyStaticInitializer</a><span class="delimiter">(</span><a href="#233632" title="ch.epfl.lamp.fjbg.JClass">cls</a>, <a href="#237663" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cls: ch.epfl.lamp.fjbg.JClass, clinit: ch.epfl.lamp.fjbg.JExtendedCode)Unit" id="231388">legacyStaticInitializer</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="237795">cls</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="ch.epfl.lamp.fjbg.JExtendedCode" id="237796">clinit</a>: <span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112473" title="(sym: GenJVM.this.global.Symbol)Boolean">isStaticModule</a><span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a> <span title="(x$1: java.lang.String)Unit">emitNEW</span> <a href="#237795" title="ch.epfl.lamp.fjbg.JClass">cls</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESPECIAL</span><span class="delimiter">(</span><a href="#237795" title="ch.epfl.lamp.fjbg.JClass">cls</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span>,
                                 JMethod.<span title="java.lang.String(&quot;&lt;init&gt;&quot;)">INSTANCE_CONSTRUCTOR_NAME</span>,
                                 <span title="object ch.epfl.lamp.fjbg.JMethodType">JMethodType</span>.<span title="ch.epfl.lamp.fjbg.JMethodType">ARGLESS_VOID_FUNCTION</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#231358" title="=&gt; Option[Long]">serialVUID</a> <span title="(f: Long =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="Long" id="237802">value</a> =&gt;
        <span class="keyword">val</span> <a title="java.lang.String" id="237803">fieldName</a> = <span title="java.lang.String(&quot;serialVersionUID&quot;)" class="string">&quot;serialVersionUID&quot;</span>
        <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)ch.epfl.lamp.fjbg.JField">addNewField</span><span class="delimiter">(</span><a href="#231300" title="=&gt; Int">PublicStaticFinal</a>, <a href="#237803" title="java.lang.String">fieldName</a>, <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">LONG</span><span class="delimiter">)</span>
        <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a> <span title="(x$1: Long)Unit">emitPUSH</span> <a href="#237802" title="Long">value</a>
        <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a>.<span title="(x$1: Long)Unit">emitPUSH</span><span class="delimiter">(</span><a href="#237802" title="Long">value</a><span class="delimiter">)</span>
        <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitPUTSTATIC</span><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#237803" title="java.lang.String">fieldName</a>, <span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">LONG</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231364" title="=&gt; Boolean">isParcelableClass</a><span class="delimiter">)</span>
        <a href="GenAndroid.scala.html#112528" title="(codegen: GenJVM.this.BytecodeGenerator, clinit: ch.epfl.lamp.fjbg.JExtendedCode)Unit">legacyAddCreatorCode</a><span class="delimiter">(</span><a href="#112470" title="GenJVM.this.BytecodeGenerator">BytecodeGenerator</a>.<span class="keyword">this</span>, <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97402" title="=&gt; Option[String]">bootstrapClass</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
        <a href="#231389" title="(jcode: ch.epfl.lamp.fjbg.JExtendedCode)Unit">legacyEmitBootstrapMethodInstall</a><span class="delimiter">(</span><a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a><span class="delimiter">)</span>

      <a href="#237796" title="ch.epfl.lamp.fjbg.JExtendedCode">clinit</a>.<span title="()Unit">emitRETURN</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Emit code that installs a boostrap method for invoke dynamic. It
     *  installs the default method, found in scala.runtime.DynamicDispatch.
     */</span>
    <span class="keyword">def</span> <a title="(jcode: ch.epfl.lamp.fjbg.JExtendedCode)Unit" id="231389">legacyEmitBootstrapMethodInstall</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JExtendedCode" id="237670">jcode</a>: <span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitPUSH</span> <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()ch.epfl.lamp.fjbg.JType">getType</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JReferenceType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JReferenceType">JReferenceType</span><span class="delimiter">]</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitPUSH</span> <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><span title="java.lang.String(&quot;scala.runtime.DynamicDispatch&quot;)" class="string">&quot;scala.runtime.DynamicDispatch&quot;</span><span class="delimiter">)</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: java.lang.String)Unit">emitPUSH</span> <span title="java.lang.String(&quot;bootstrapInvokeDynamic&quot;)" class="string">&quot;bootstrapInvokeDynamic&quot;</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitGETSTATIC</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.dyn.Linkage&quot;)" class="string">&quot;java.dyn.Linkage&quot;</span>, <span title="java.lang.String(&quot;BOOTSTRAP_METHOD_TYPE&quot;)" class="string">&quot;BOOTSTRAP_METHOD_TYPE&quot;</span>, <a href="#231312" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">MethodTypeType</a><span class="delimiter">)</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDUP</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESTATIC</span><span class="delimiter">(</span><span title="java.lang.String(&quot;scala.Console&quot;)" class="string">&quot;scala.Console&quot;</span>, <span title="java.lang.String(&quot;println&quot;)" class="string">&quot;println&quot;</span>, <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">VOID</span>, <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_OBJECT</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESTATIC</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.dyn.MethodHandles&quot;)" class="string">&quot;java.dyn.MethodHandles&quot;</span>, <span title="java.lang.String(&quot;findStatic&quot;)" class="string">&quot;findStatic&quot;</span>, 
                              <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><a href="#231316" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">MethodHandleType</a>, <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><a href="#231314" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">JavaLangClassType</a>, <span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_STRING</span>, <a href="#231312" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">MethodTypeType</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#237670" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESTATIC</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.dyn.Linkage&quot;)" class="string">&quot;java.dyn.Linkage&quot;</span>, <span title="java.lang.String(&quot;registerBootstrapMethod&quot;)" class="string">&quot;registerBootstrapMethod&quot;</span>,
                              <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><span title="object ch.epfl.lamp.fjbg.JType">JType</span>.<span title="ch.epfl.lamp.fjbg.JType">VOID</span>, <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><a href="#231314" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">JavaLangClassType</a>, <a href="#231316" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">MethodHandleType</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Add a forwarder for method m */</span>
    <span class="keyword">def</span> <a title="(jclass: ch.epfl.lamp.fjbg.JClass, module: GenJVM.this.global.Symbol, m: GenJVM.this.global.Symbol, accessFlags: Int)Unit" id="231390">addForwarder</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="237902">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="GenJVM.this.global.Symbol" id="237903">module</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a>, <a title="GenJVM.this.global.Symbol" id="237904">m</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a>, <a title="Int" id="237905">accessFlags</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="237907">moduleName</a>     = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#237903" title="GenJVM.this.global.Symbol">module</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="GenJVM.this.global.Type" id="237908">methodInfo</a>     = <a href="#237903" title="GenJVM.this.global.Symbol">module</a>.<a href="../../symtab/Symbols.scala.html#107459" title="=&gt; GenJVM.this.global.Type">thisType</a>.<a href="../../symtab/Types.scala.html#105360" title="(sym: GenJVM.this.global.Symbol)GenJVM.this.global.Type">memberInfo</a><span class="delimiter">(</span><a href="#237904" title="GenJVM.this.global.Symbol">m</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[ch.epfl.lamp.fjbg.JType]" id="237909">paramJavaTypes</a> = <a href="#237908" title="GenJVM.this.global.Type">methodInfo</a>.<a href="../../symtab/Types.scala.html#105335" title="=&gt; List[GenJVM.this.global.Type]">paramTypes</a> <span title="(f: GenJVM.this.global.Type =&gt; ch.epfl.lamp.fjbg.JType)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.Type],ch.epfl.lamp.fjbg.JType,List[ch.epfl.lamp.fjbg.JType]])List[ch.epfl.lamp.fjbg.JType]">map</span> <a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[java.lang.String]" id="237910">paramNames</a>     = <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(end: Int)scala.collection.immutable.Range">until</span> <a href="#237909" title="List[ch.epfl.lamp.fjbg.JType]">paramJavaTypes</a>.<span title="=&gt; Int">length</span> <span title="(f: Int =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],java.lang.String,scala.collection.immutable.IndexedSeq[java.lang.String]])scala.collection.immutable.IndexedSeq[java.lang.String]">map</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;x_&quot;)" class="string">&quot;x_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238074" title="Int">_</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethod" id="237911">mirrorMethod</a> = <a href="#237902" title="ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType, x$4: Array[ch.epfl.lamp.fjbg.JType], x$5: Array[java.lang.String])ch.epfl.lamp.fjbg.JMethod">addNewMethod</span><span class="delimiter">(</span>
        <a href="#237905" title="Int">accessFlags</a>,
        <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#237904" title="GenJVM.this.global.Symbol">m</a><span class="delimiter">)</span>,
        <a href="GenJVMUtil.scala.html#231285" title="(t: GenJVM.this.global.Type)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#237908" title="GenJVM.this.global.Type">methodInfo</a>.<a href="../../symtab/Types.scala.html#105327" title="=&gt; GenJVM.this.global.Type">resultType</a><span class="delimiter">)</span>,
        <a href="GenJVMUtil.scala.html#231281" title="(xs: Traversable[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">mkArray</a><span class="delimiter">(</span><a href="#237909" title="List[ch.epfl.lamp.fjbg.JType]">paramJavaTypes</a><span class="delimiter">)</span>,
        <a href="GenJVMUtil.scala.html#231282" title="(xs: Traversable[String])Array[String]">mkArray</a><span class="delimiter">(</span><a href="#237910" title="scala.collection.immutable.IndexedSeq[java.lang.String]">paramNames</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JExtendedCode" id="237912">mirrorCode</a> = <a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>.<span title="()ch.epfl.lamp.fjbg.JCode">getCode</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JExtendedCode" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">]</span>
      <a href="#237912" title="ch.epfl.lamp.fjbg.JExtendedCode">mirrorCode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitGETSTATIC</span><span class="delimiter">(</span><a href="#237907" title="String">moduleName</a>,
                               <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115284" title="=&gt; GenJVM.this.global.nme.NameType">MODULE_INSTANCE_FIELD</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                               <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><a href="#237907" title="String">moduleName</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="Int" id="237913">i</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="237914">index</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Array[ch.epfl.lamp.fjbg.JType]" id="237915">argTypes</a> = <a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>.<span title="()Array[ch.epfl.lamp.fjbg.JType]">getArgumentTypes</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#237913" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#237915" title="Array[ch.epfl.lamp.fjbg.JType]">argTypes</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#237919" title="()Unit" class="delimiter">{</a>
        <a href="#237912" title="ch.epfl.lamp.fjbg.JExtendedCode">mirrorCode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitLOAD</span><span class="delimiter">(</span><a href="#237914" title="Int">index</a>, <a href="#237915" title="(i: Int)ch.epfl.lamp.fjbg.JType">argTypes</a><span class="delimiter">(</span><a href="#237913" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#237914" title="Int">index</a> <span title="(x: Int)Int">+=</span> <a href="#237915" title="(i: Int)ch.epfl.lamp.fjbg.JType">argTypes</a><span class="delimiter">(</span><a href="#237913" title="Int">i</a><span class="delimiter">)</span>.<span title="()Int">getSize</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#237913" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>

      <a href="#237912" title="ch.epfl.lamp.fjbg.JExtendedCode">mirrorCode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEVIRTUAL</span><span class="delimiter">(</span><a href="#237907" title="String">moduleName</a>, <a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>.<span title="()java.lang.String">getName</span>, <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#237904" title="GenJVM.this.global.Symbol">m</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JMethodType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#237912" title="ch.epfl.lamp.fjbg.JExtendedCode">mirrorCode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitRETURN</span> <a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>.<span title="()ch.epfl.lamp.fjbg.JType">getReturnType</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#231383" title="(jmethod: ch.epfl.lamp.fjbg.JMethod, meth: GenJVM.this.global.Symbol)Unit">addRemoteException</a><span class="delimiter">(</span><a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>, <a href="#237904" title="GenJVM.this.global.Symbol">m</a><span class="delimiter">)</span>
      <span class="comment">// only add generic signature if the method is concrete; bug #1745</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#237904" title="GenJVM.this.global.Symbol">m</a>.<span title="=&gt; Boolean">isDeferred</span><span class="delimiter">)</span>
        <a href="#231376" title="(jmember: ch.epfl.lamp.fjbg.JMember, sym: GenJVM.this.global.Symbol, owner: GenJVM.this.global.Symbol)Unit">addGenericSignature</a><span class="delimiter">(</span><a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>, <a href="#237904" title="GenJVM.this.global.Symbol">m</a>, <a href="#237903" title="GenJVM.this.global.Symbol">module</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a href="#237917" title="(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])" class="delimiter">(</a><a href="#237916" title="List[GenJVM.this.global.AnnotationInfo]" id="237917">throws</a>, <a href="#237916" title="List[GenJVM.this.global.AnnotationInfo]" id="237918">others</a><span class="delimiter">)</span> = <a href="#231384" title="(annotations: List[GenJVM.this.global.AnnotationInfo], annotSym: GenJVM.this.global.Symbol)(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo])">splitAnnotations</a><span title="(List[GenJVM.this.global.AnnotationInfo], List[GenJVM.this.global.AnnotationInfo]) @unchecked" class="delimiter">(</span><a href="#237904" title="GenJVM.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.AnnotationInfo]">annotations</a>, <a href="../../symtab/Definitions.scala.html#106121" title="=&gt; GenJVM.this.global.Symbol">ThrowsClass</a><span class="delimiter">)</span>
      <a href="#231371" title="(jmethod: ch.epfl.lamp.fjbg.JMethod, excs: List[GenJVM.this.global.AnnotationInfo])Unit">addExceptionsAttribute</a><span class="delimiter">(</span><a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>, <a href="#237917" title="List[GenJVM.this.global.AnnotationInfo]">throws</a><span class="delimiter">)</span>
      <a href="#231377" title="(jmember: ch.epfl.lamp.fjbg.JMember, annotations: List[GenJVM.this.global.AnnotationInfo])Unit">addAnnotations</a><span class="delimiter">(</span><a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>, <a href="#237918" title="List[GenJVM.this.global.AnnotationInfo]">others</a><span class="delimiter">)</span>
      <a href="#231378" title="(jmethod: ch.epfl.lamp.fjbg.JMethod, pannotss: List[List[GenJVM.this.global.AnnotationInfo]])Unit">addParamAnnotations</a><span class="delimiter">(</span><a href="#237911" title="ch.epfl.lamp.fjbg.JMethod">mirrorMethod</a>, <a href="#237904" title="GenJVM.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.Type">info</a>.<a href="../../symtab/Types.scala.html#105334" title="=&gt; List[GenJVM.this.global.Symbol]">params</a>.<span title="(f: GenJVM.this.global.Symbol =&gt; List[GenJVM.this.global.AnnotationInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.Symbol],List[GenJVM.this.global.AnnotationInfo],List[List[GenJVM.this.global.AnnotationInfo]]])List[List[GenJVM.this.global.AnnotationInfo]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,List[GenJVM.this.global.AnnotationInfo],List[List[GenJVM.this.global.AnnotationInfo]]]" class="delimiter">(</span><a href="#238173" title="GenJVM.this.global.Symbol">_</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.AnnotationInfo]">annotations</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> 

    <span class="comment">/** Add forwarders for all methods defined in `module' that don't conflict
     *  with methods in the companion class of `module'. A conflict arises when
     *  a method with the same name is defined both in a class and its companion
     *  object: method signature is not taken into account.
     */</span>
    <span class="keyword">def</span> <a title="(jclass: ch.epfl.lamp.fjbg.JClass, moduleClass: GenJVM.this.global.Symbol)Unit" id="231391">addForwarders</a><span class="delimiter">(</span><a title="ch.epfl.lamp.fjbg.JClass" id="233709">jclass</a>: <span title="ch.epfl.lamp.fjbg.JClass">JClass</span>, <a title="GenJVM.this.global.Symbol" id="233710">moduleClass</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#231411" title="(cond: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a>.<span title="=&gt; Boolean">isModuleClass</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Dumping mirror class for object: &quot;)" class="string">&quot;Dumping mirror class for object: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="java.lang.String" id="238201">className</a>    = <a href="#233709" title="ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()java.lang.String">getName</span>
      <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="238202">linkedClass</a>  = <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a>.<a href="../../symtab/Symbols.scala.html#107479" title="=&gt; GenJVM.this.global.Symbol">companionClass</a>
      <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="238203">linkedModule</a> = <a href="#238202" title="GenJVM.this.global.Symbol">linkedClass</a>.<a href="../../symtab/Symbols.scala.html#107482" title="=&gt; GenJVM.this.global.Symbol">companionSymbol</a>

      <span class="comment">/** If we use the usual algorithm for forwarders, we run into a problem if
       *  an object extends its companion class.  However, there is an out: since
       *  all the forwarders are static, inheriting from the class is no problem
       *  so long as the methods aren't final (the JVM will not allow redefinition
       *  of a final static method.) Thus the following.
       */</span>
      <span class="keyword">val</span> <a title="Boolean" id="238204">isIncestuous</a> = <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a> <a href="../../symtab/Types.scala.html#105374" title="(that: GenJVM.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#238202" title="GenJVM.this.global.Symbol">linkedClass</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a>
      <span class="keyword">val</span> <a title="Int" id="238205">accessFlags</a>  = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#238204" title="Boolean">isIncestuous</a><span class="delimiter">)</span> <a href="#231298" title="=&gt; Int">PublicStatic</a> <span class="keyword">else</span> <a href="#231300" title="=&gt; Int">PublicStaticFinal</a>

      <span class="comment">/** There was a bit of a gordian logic knot here regarding forwarders.
       *  All we really have to do is exclude certain categories of symbols and
       *  then all matching names.
       */</span>
      <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)scala.collection.immutable.Set[String]" id="238206">memberNames</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="238218">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#238218" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.Type">info</a>.<a href="../../symtab/Types.scala.html#105349" title="=&gt; List[GenJVM.this.global.Symbol]">members</a> <span title="(f: GenJVM.this.global.Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.Symbol],String,List[String]])List[String]">map</span> <span class="delimiter">(</span><a href="#238238" title="GenJVM.this.global.Symbol">_</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a><span class="delimiter">)</span> <span title="scala.collection.immutable.Set[String]">toSet</span> 
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="238208">membersInCommon</a>     = 
        <a href="#238206" title="(sym: GenJVM.this.global.Symbol)scala.collection.immutable.Set[String]">memberNames</a><span class="delimiter">(</span><a href="#238203" title="GenJVM.this.global.Symbol">linkedModule</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenSet[String])scala.collection.immutable.Set[String]">intersect</span> <a href="#238206" title="(sym: GenJVM.this.global.Symbol)scala.collection.immutable.Set[String]">memberNames</a><span class="delimiter">(</span><a href="#238202" title="GenJVM.this.global.Symbol">linkedClass</a><span class="delimiter">)</span>

      <span class="comment">/** Should method `m' get a forwarder in the mirror class? */</span>      
      <span class="keyword">def</span> <a title="(m: GenJVM.this.global.Symbol)Boolean" id="238209">shouldForward</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="238276">m</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">(</span>
        <a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Definitions.scala.html#106079" title="=&gt; GenJVM.this.global.Symbol">ObjectClass</a>
        <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<span title="=&gt; Boolean">isMethod</span>
        <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<span title="=&gt; Boolean">isPublic</span>
        <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span>Flags.CASE | Flags.DEFERRED | Flags.SPECIALIZED <span title="Long(1116691499024L)">|</span> Flags.LIFTED<span class="delimiter">)</span>
        <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#107334" title="=&gt; Boolean">isConstructor</a>
        <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#107386" title="=&gt; Boolean">isStaticMember</a>
        <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#238207" title="(elem: String)Boolean">membersInCommon</a><span class="delimiter">(</span><a href="#238276" title="GenJVM.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#107407" title="=&gt; GenJVM.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="238335">m</a> &lt;- <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.Type">info</a>.<a href="../../symtab/Types.scala.html#105350" title="(f: GenJVM.this.global.Symbol =&gt; Unit)Unit">nonPrivateMembers</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238209" title="(m: GenJVM.this.global.Symbol)Boolean">shouldForward</a><span class="delimiter">(</span><a href="#238335" title="GenJVM.this.global.Symbol">m</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Adding static forwarder for '%s' from %s to '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#238335" title="GenJVM.this.global.Symbol">m</a>, <a href="#238201" title="java.lang.String">className</a>, <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#231390" title="(jclass: ch.epfl.lamp.fjbg.JClass, module: GenJVM.this.global.Symbol, m: GenJVM.this.global.Symbol, accessFlags: Int)Unit">addForwarder</a><span class="delimiter">(</span><a href="#233709" title="ch.epfl.lamp.fjbg.JClass">jclass</a>, <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a>, <a href="#238335" title="GenJVM.this.global.Symbol">m</a>, <a href="#238205" title="Int">accessFlags</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;No forwarder for '%s' from %s to '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#238335" title="GenJVM.this.global.Symbol">m</a>, <a href="#238201" title="java.lang.String">className</a>, <a href="#233710" title="GenJVM.this.global.Symbol">moduleClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Dump a mirror class for a top-level module. A mirror class is a class
     *  containing only static methods that forward to the corresponding method
     *  on the MODULE instance of the given Scala object.  It will only be
     *  generated if there is no companion class: if there is, an attempt will
     *  instead be made to add the forwarder methods to the companion class.
     */</span>
    <span class="keyword">def</span> <a title="(clasz: GenJVM.this.global.Symbol, sourceFile: String)Unit" id="231392">dumpMirrorClass</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="233644">clasz</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a>, <a title="String" id="233645">sourceFile</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">import</span> <span title="object ch.epfl.lamp.fjbg.JAccessFlags">JAccessFlags</span>._
      <span class="keyword">val</span> <a title="String" id="238347">moduleName</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#233644" title="GenJVM.this.global.Symbol">clasz</a><span class="delimiter">)</span> <span class="comment">// + &quot;$&quot;</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="238348">mirrorName</a> = <a href="#238347" title="String">moduleName</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#238347" title="String">moduleName</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JClass" id="238349">mirrorClass</a> = <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: Int, x$2: java.lang.String, x$3: java.lang.String, x$4: Array[java.lang.String], x$5: java.lang.String)ch.epfl.lamp.fjbg.JClass">JClass</span><span class="delimiter">(</span>ACC_SUPER | ACC_PUBLIC <span title="Int(49)">|</span> ACC_FINAL,
                                           <a href="#238348" title="java.lang.String">mirrorName</a>,
                                           <span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_OBJECT</span>.<span title="()java.lang.String">getName</span>,
                                           <span title="object ch.epfl.lamp.fjbg.JClass">JClass</span>.<span title="Array[java.lang.String]">NO_INTERFACES</span>,
                                           <a href="#233645" title="String">sourceFile</a><span class="delimiter">)</span>

      <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Dumping mirror class for '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#238349" title="ch.epfl.lamp.fjbg.JClass">mirrorClass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#231391" title="(jclass: ch.epfl.lamp.fjbg.JClass, moduleClass: GenJVM.this.global.Symbol)Unit">addForwarders</a><span class="delimiter">(</span><a href="#238349" title="ch.epfl.lamp.fjbg.JClass">mirrorClass</a>, <a href="#233644" title="GenJVM.this.global.Symbol">clasz</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Option[GenJVM.this.global.AnnotationInfo]" id="238350">ssa</a> = <a href="#231356" title="(jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Option[GenJVM.this.global.AnnotationInfo]">scalaSignatureAddingMarker</a><span class="delimiter">(</span><a href="#238349" title="ch.epfl.lamp.fjbg.JClass">mirrorClass</a>, <a href="#233644" title="GenJVM.this.global.Symbol">clasz</a>.<a href="../../symtab/Symbols.scala.html#107482" title="=&gt; GenJVM.this.global.Symbol">companionSymbol</a><span class="delimiter">)</span>
      <a href="#231377" title="(jmember: ch.epfl.lamp.fjbg.JMember, annotations: List[GenJVM.this.global.AnnotationInfo])Unit">addAnnotations</a><span class="delimiter">(</span><a href="#238349" title="ch.epfl.lamp.fjbg.JClass">mirrorClass</a>, <a href="#233644" title="GenJVM.this.global.Symbol">clasz</a>.<a href="../../symtab/Symbols.scala.html#107270" title="=&gt; List[GenJVM.this.global.AnnotationInfo]">annotations</a> <span title="(that: scala.collection.GenTraversableOnce[GenJVM.this.global.AnnotationInfo])(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.AnnotationInfo],GenJVM.this.global.AnnotationInfo,List[GenJVM.this.global.AnnotationInfo]])List[GenJVM.this.global.AnnotationInfo]">++</span> <a href="#238350" title="(xo: Option[GenJVM.this.global.AnnotationInfo])Iterable[GenJVM.this.global.AnnotationInfo]">ssa</a><span class="delimiter">)</span>
      <a href="#231355" title="(jclass: ch.epfl.lamp.fjbg.JClass, sym: GenJVM.this.global.Symbol)Unit">emitClass</a><span class="delimiter">(</span><a href="#238349" title="ch.epfl.lamp.fjbg.JClass">mirrorClass</a>, <a href="#233644" title="GenJVM.this.global.Symbol">clasz</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="List[GenJVM.this.global.icodes.BasicBlock]" id="231394">linearization</a>: <span title="List[GenJVM.this.global.icodes.BasicBlock]">List</span><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
    <span class="keyword">var</span> <a title="Boolean" id="231397">isModuleInitialized</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="comment">/**
     *  @param m ...
     */</span>
    <span class="keyword">def</span> <a title="(m: GenJVM.this.global.icodes.IMethod)Unit" id="231399">genCode</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="237441">m</a>: <a href="../icode/Members.scala.html#96963" title="GenJVM.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JExtendedCode" id="238466">jcode</a> = <a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()ch.epfl.lamp.fjbg.JCode">getCode</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JExtendedCode" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JExtendedCode">JExtendedCode</span><span class="delimiter">]</span>

      <span class="keyword">def</span> <a title="(bs: List[GenJVM.this.global.icodes.BasicBlock])scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,ch.epfl.lamp.fjbg.JCode#Label]" id="238467">makeLabels</a><span class="delimiter">(</span><a title="List[GenJVM.this.global.icodes.BasicBlock]" id="238475">bs</a>: <span title="List[GenJVM.this.global.icodes.BasicBlock]">List</span><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Making labels for: &quot;)" class="string">&quot;Making labels for: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a><span class="delimiter">)</span>

        mutable.<span title="(elems: (GenJVM.this.global.icodes.BasicBlock, ch.epfl.lamp.fjbg.JCode#Label)*)scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,ch.epfl.lamp.fjbg.JCode#Label]">HashMap</span><span class="delimiter">(</span><a href="#238475" title="List[GenJVM.this.global.icodes.BasicBlock]">bs</a> <span title="(f: GenJVM.this.global.icodes.BasicBlock =&gt; (GenJVM.this.global.icodes.BasicBlock, ch.epfl.lamp.fjbg.JCode#Label))(implicit bf: scala.collection.generic.CanBuildFrom[List[GenJVM.this.global.icodes.BasicBlock],(GenJVM.this.global.icodes.BasicBlock, ch.epfl.lamp.fjbg.JCode#Label),List[(GenJVM.this.global.icodes.BasicBlock, ch.epfl.lamp.fjbg.JCode#Label)]])List[(GenJVM.this.global.icodes.BasicBlock, ch.epfl.lamp.fjbg.JCode#Label)]">map</span> <span class="delimiter">(</span><a href="#238498" title="(x: GenJVM.this.global.icodes.BasicBlock)ArrowAssoc[GenJVM.this.global.icodes.BasicBlock]">_</a> <span title="(y: ch.epfl.lamp.fjbg.JCode#Label)(GenJVM.this.global.icodes.BasicBlock, ch.epfl.lamp.fjbg.JCode#Label)">-&gt;</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()ch.epfl.lamp.fjbg.JCode#Label">newLabel</span><span class="delimiter">)</span> : _*<span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#231397" title="(x$1: Boolean)Unit">isModuleInitialized</a> = <span title="Boolean(false)" class="keyword">false</span>

      <a href="#231394" title="(x$1: List[GenJVM.this.global.icodes.BasicBlock])Unit">linearization</a> = <a href="../icode/ICodes.scala.html#96923" title="=&gt; GenJVM.this.global.icodes.Linearizer">linearizer</a>.<a href="../icode/Linearizers.scala.html#215296" title="(c: GenJVM.this.global.icodes.IMethod)List[GenJVM.this.global.icodes.BasicBlock]">linearize</a><span class="delimiter">(</span><a href="#237441" title="GenJVM.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,ch.epfl.lamp.fjbg.JCode#Label]" id="238468">labels</a> = <a href="#238467" title="(bs: List[GenJVM.this.global.icodes.BasicBlock])scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,ch.epfl.lamp.fjbg.JCode#Label]">makeLabels</a><span class="delimiter">(</span><a href="#231394" title="=&gt; List[GenJVM.this.global.icodes.BasicBlock]">linearization</a><span class="delimiter">)</span>
      <span class="comment">/** local variables whose scope appears in this block. */</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]" id="238469">varsInBlock</a>: mutable.<span title="scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]">Set</span><span class="delimiter">[</span>Local<span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashSet[GenJVM.this.global.icodes.Local]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[GenJVM.this.global.icodes.Local]">HashSet</span>

      <span class="keyword">var</span> <a title="GenJVM.this.global.icodes.BasicBlock" id="238470">nextBlock</a>: <a href="../icode/BasicBlocks.scala.html#96970" title="GenJVM.this.global.icodes.BasicBlock">BasicBlock</a> = <a href="#231394" title="=&gt; List[GenJVM.this.global.icodes.BasicBlock]">linearization</a>.<span title="=&gt; GenJVM.this.global.icodes.BasicBlock">head</span>

      <span class="keyword">def</span> <a title="(l: List[GenJVM.this.global.icodes.BasicBlock])Unit" id="238471">genBlocks</a><span class="delimiter">(</span><a title="List[GenJVM.this.global.icodes.BasicBlock]" id="238570">l</a>: <span title="List[GenJVM.this.global.icodes.BasicBlock]">List</span><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#238570" title="List[GenJVM.this.global.icodes.BasicBlock]">l</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">Nil</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="238575">x</a> :: <span title="object Nil">Nil</span> =&gt; <a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>; <a href="#238473" title="(b: GenJVM.this.global.icodes.BasicBlock)Unit">genBlock</a><span class="delimiter">(</span><a href="#238575" title="GenJVM.this.global.icodes.BasicBlock">x</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="238581">x</a> :: <a title="GenJVM.this.global.icodes.BasicBlock" id="238589">y</a> :: <a title="List[GenJVM.this.global.icodes.BasicBlock]" id="238590">ys</a> =&gt; <a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> = <a href="#238589" title="GenJVM.this.global.icodes.BasicBlock">y</a>; <a href="#238473" title="(b: GenJVM.this.global.icodes.BasicBlock)Unit">genBlock</a><span class="delimiter">(</span><a href="#238581" title="GenJVM.this.global.icodes.BasicBlock">x</a><span class="delimiter">)</span>; <a href="#238471" title="(l: List[GenJVM.this.global.icodes.BasicBlock])Unit">genBlocks</a><span class="delimiter">(</span><a href="#238589" title="GenJVM.this.global.icodes.BasicBlock">y</a> <a href="#238591" title="(x: GenJVM.this.global.icodes.BasicBlock)List[GenJVM.this.global.icodes.BasicBlock]">::</a> <a href="#238590" title="List[GenJVM.this.global.icodes.BasicBlock]">ys</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/** Generate exception handlers for the current method. */</span>
    <span class="keyword">def</span> <a title="()Unit" id="238472">genExceptionHandlers</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      <span class="comment">/** Return a list of pairs of intervals where the handler is active.
       *  The intervals in the list have to be inclusive in the beginning and
       *  exclusive in the end: [start, end).
       */</span>
      <span class="keyword">def</span> <a title="(e: GenJVM.this.global.icodes.ExceptionHandler)List[(Int, Int)]" id="238597">ranges</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.ExceptionHandler" id="238598">e</a>: <a href="../icode/ExceptionHandlers.scala.html#97037" title="GenJVM.this.global.icodes.ExceptionHandler">ExceptionHandler</a><span class="delimiter">)</span>: <span title="List[(Int, Int)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]" id="238599">covered</a> = <a href="#238598" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203094" title="=&gt; scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]">covered</a>
        <span class="keyword">var</span> <a title="List[(Int, Int)]" id="238600">ranges</a>: <span title="List[(Int, Int)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="object Nil">Nil</span>
        <span class="keyword">var</span> <a title="Int" id="238601">start</a> = -<span title="Int(-1)" class="int">1</span>
        <span class="keyword">var</span> <a title="Int" id="238602">end</a> = -<span title="Int(-1)" class="int">1</span>

        <a href="#231394" title="=&gt; List[GenJVM.this.global.icodes.BasicBlock]">linearization</a> <span title="(f: GenJVM.this.global.icodes.BasicBlock =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="GenJVM.this.global.icodes.BasicBlock" id="238624">b</a> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span> <span class="delimiter">(</span><a href="#238599" title="scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]">covered</a> <span title="(elem: GenJVM.this.global.icodes.BasicBlock)Boolean">contains</span> <a href="#238624" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span> <span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238601" title="Int">start</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// we're inside a handler range</span>
              <a href="#238602" title="Int">end</a> = <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238624" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<span title="()Int">getAnchor</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <a href="#238600" title="List[(Int, Int)]">ranges</a> <span title="(x: (Int, Int))List[(Int, Int)]">::=</span> <span class="delimiter">(</span><a href="#238601" title="Int">start</a>, <a href="#238602" title="Int">end</a><span class="delimiter">)</span>
              <a href="#238601" title="Int">start</a> = -<span title="Int(-1)" class="int">1</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238601" title="Int">start</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>  <span class="comment">// we're not inside a handler range</span>
              <a href="#238601" title="Int">start</a> = <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238624" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<span title="()Int">getAnchor</span><span class="delimiter">(</span><span class="delimiter">)</span>

            <a href="#238602" title="Int">end</a> = <a href="#231401" title="(key: GenJVM.this.global.icodes.BasicBlock)Int">endPC</a><span class="delimiter">(</span><a href="#238624" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>
            <a href="#238599" title="scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]">covered</a> <span title="(elem: GenJVM.this.global.icodes.BasicBlock)scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]">-=</span> <a href="#238624" title="GenJVM.this.global.icodes.BasicBlock">b</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <span class="comment">/* Add the last interval. Note that since the intervals are 
         * open-ended to the right, we have to give a number past the actual
         * code!
         */</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238601" title="Int">start</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#238600" title="List[(Int, Int)]">ranges</a> <span title="(x: (Int, Int))List[(Int, Int)]">::=</span> <span class="delimiter">(</span><a href="#238601" title="Int">start</a>, <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#238599" title="scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Some covered blocks were not found in method: &quot;)" class="string">&quot;Some covered blocks were not found in method: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a> <span title="(x$1: Any)java.lang.String">+</span> 
                <span title="java.lang.String(&quot; covered: &quot;)" class="string">&quot; covered: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238599" title="scala.collection.immutable.Set[GenJVM.this.global.icodes.BasicBlock]">covered</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not in &quot;)" class="string">&quot; not in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231394" title="=&gt; List[GenJVM.this.global.icodes.BasicBlock]">linearization</a><span class="delimiter">)</span>
        <a href="#238600" title="List[(Int, Int)]">ranges</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.ExceptionHandler" id="238785">e</a> &lt;- <a href="#112470" title="BytecodeGenerator.this.type" class="keyword">this</a>.<a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197733" title="(f: GenJVM.this.global.icodes.ExceptionHandler =&gt; Unit)Unit">exh</a> ; <a title="(Int, Int)" id="238869">p</a> &lt;- <a href="#238597" title="(e: GenJVM.this.global.icodes.ExceptionHandler)List[(Int, Int)]">ranges</a><span class="delimiter">(</span><a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a><span class="delimiter">)</span>.<span title="(f: (Int, Int) =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[(Int, Int)]">sortBy</span><span title="(f: (Int, Int) =&gt; Unit)Unit" class="delimiter">(</span><a href="#238792" title="(Int, Int)">_</a>.<span title="=&gt; Int">_1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238869" title="(Int, Int)">p</a>.<span title="=&gt; Int">_1</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#238869" title="(Int, Int)">p</a>.<span title="=&gt; Int">_2</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Adding exception handler &quot;)" class="string">&quot;Adding exception handler &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;at block: &quot;)" class="string">&quot;at block: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203093" title="=&gt; GenJVM.this.global.icodes.BasicBlock">startBlock</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; for &quot;)" class="string">&quot; for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a> <span title="(x$1: Any)java.lang.String">+</span> 
                <span title="java.lang.String(&quot; from: &quot;)" class="string">&quot; from: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238869" title="(Int, Int)">p</a>.<span title="=&gt; Int">_1</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to: &quot;)" class="string">&quot; to: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238869" title="(Int, Int)">p</a>.<span title="=&gt; Int">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; catching: &quot;)" class="string">&quot; catching: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203077" title="=&gt; GenJVM.this.global.icodes.global.Symbol">cls</a><span class="delimiter">)</span>;
          <span class="keyword">val</span> <a title="String" id="238874">cls</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203077" title="=&gt; GenJVM.this.global.icodes.global.Symbol">cls</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Symbols.scala.html#67328" title="object GenJVM.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">||</span> <a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203077" title="=&gt; GenJVM.this.global.icodes.global.Symbol">cls</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#106105" title="=&gt; GenJVM.this.global.Symbol">ThrowableClass</a><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span>
                    <span class="keyword">else</span> <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203077" title="=&gt; GenJVM.this.global.icodes.global.Symbol">cls</a><span class="delimiter">)</span>
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: Int, x$3: Int, x$4: java.lang.String)Unit">addExceptionHandler</span><span class="delimiter">(</span><a href="#238869" title="(Int, Int)">p</a>.<span title="=&gt; Int">_1</span>, <a href="#238869" title="(Int, Int)">p</a>.<span title="=&gt; Int">_2</span>,
                                    <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238785" title="GenJVM.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#203093" title="=&gt; GenJVM.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span>.<span title="()Int">getAnchor</span><span class="delimiter">(</span><span class="delimiter">)</span>,
                                    <a href="#238874" title="String">cls</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> 
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Empty exception range: &quot;)" class="string">&quot;Empty exception range: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238869" title="(Int, Int)">p</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(b: GenJVM.this.global.icodes.BasicBlock)Unit" id="238473">genBlock</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.BasicBlock" id="238576">b</a>: <a href="../icode/BasicBlocks.scala.html#96970" title="GenJVM.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<span title="()Unit">anchorToNext</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Generating code for block: &quot;)" class="string">&quot;Generating code for block: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; at pc: &quot;)" class="string">&quot; at pc: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<span title="()Int">getAnchor</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Int" id="238937">lastMappedPC</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="238938">lastLineNr</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="238939">crtPC</a> = <span title="Int(0)" class="int">0</span>
      <a href="#238469" title="scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]">varsInBlock</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Instruction" id="238992">instr</a> &lt;- <a href="../icode/BasicBlocks.scala.html#197651" title="(f: GenJVM.this.global.icodes.Instruction =&gt; Unit)Unit">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">class</span> <a title="class CompilationException extends java.lang.Exception with ScalaObject" id="238993">CompilationException</a><a href="#238993" title="ScalaObject" class="delimiter">(</a><a title="String" id="239002">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><a href="#239002" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="238999">toString</a>: <span title="String">String</span> = <span class="delimiter">{</span>
            <a href="#239002" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> 
            <span title="java.lang.String(&quot;\012Current method: &quot;)" class="string">&quot;\nCurrent method: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a> <span title="(x$1: Any)java.lang.String">+</span> 
            <span title="java.lang.String(&quot;\012Current block: &quot;)" class="string">&quot;\nCurrent block: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot;\012Current instruction: &quot;)" class="string">&quot;\nCurrent instruction: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#238992" title="GenJVM.this.global.icodes.Instruction">instr</a> <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot;\012---------------------&quot;)" class="string">&quot;\n---------------------&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
            <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197766" title="()Unit">dump</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="(cond: Boolean, msg: String)Unit" id="238994">assert</a><span class="delimiter">(</span><a title="Boolean" id="239010">cond</a>: <span title="Boolean">Boolean</span>, <a title="String" id="239011">msg</a>: <span title="String">String</span><span class="delimiter">)</span> =
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#239010" title="Boolean">cond</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="CompilationException" class="keyword">new</span> <a href="#238993" title="CompilationException">CompilationException</a><span class="delimiter">(</span><a href="#239011" title="String">msg</a><span class="delimiter">)</span>

        <a href="#238992" title="GenJVM.this.global.icodes.Instruction">instr</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">THIS</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239013">clasz</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitALOAD_0</span><span class="delimiter">(</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">CONSTANT</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Constant" id="239015">const</a><span class="delimiter">)</span> =&gt;
            <a href="GenJVMUtil.scala.html#231287" title="(jcode: ch.epfl.lamp.fjbg.JExtendedCode, const: GenJVM.this.global.Constant)Unit">genConstant</a><span class="delimiter">(</span><a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>, <a href="#239015" title="GenJVM.this.global.icodes.global.Constant">const</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">LOAD_ARRAY_ITEM</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239022">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitALOAD</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239022" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">LOAD_LOCAL</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="239034">local</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitLOAD</span><span class="delimiter">(</span><a href="#231406" title="(local: GenJVM.this.global.icodes.Local)Int">indexOf</a><span class="delimiter">(</span><a href="#239034" title="GenJVM.this.global.icodes.Local">local</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239034" title="GenJVM.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <a title="Unit" id="239047">lf</a> @ LOAD_FIELD<span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239050">field</a>, <a title="Boolean" id="239051">isStatic</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">var</span> <a title="String" id="239052">owner</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239047" title="GenJVM.this.global.icodes.opcodes.LOAD_FIELD">lf</a>.<a href="../icode/Opcodes.scala.html#209212" title="=&gt; GenJVM.this.global.icodes.global.Symbol">hostClass</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>            
              <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;LOAD_FIELD with owner: &quot;)" class="string">&quot;LOAD_FIELD with owner: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239052" title="String">owner</a> <span title="(x$1: Any)java.lang.String">+</span>
                  <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#24079" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<span title="(flags: Long)String">flagsToString</span><span class="delimiter">(</span><a href="#239050" title="GenJVM.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#107410" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239051" title="Boolean">isStatic</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitGETSTATIC</span><span class="delimiter">(</span><a href="#239052" title="String">owner</a>,
                                  <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239050" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span>,
                                  <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239050" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitGETFIELD</span><span class="delimiter">(</span><a href="#239052" title="String">owner</a>,
                                  <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239050" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span>,
                                  <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239050" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">LOAD_MODULE</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239072">module</a><span class="delimiter">)</span> =&gt;
<span class="comment">//            assert(module.isModule, &quot;Expected module: &quot; + module)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
              <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;generating LOAD_MODULE for: &quot;)" class="string">&quot;generating LOAD_MODULE for: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239072" title="GenJVM.this.global.icodes.global.Symbol">module</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> 
                  <a href="../../symtab/Flags.scala.html#24079" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<span title="(flags: Long)String">flagsToString</span><span class="delimiter">(</span><a href="#239072" title="GenJVM.this.global.icodes.global.Symbol">module</a>.<a href="../../symtab/Symbols.scala.html#107410" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#239072" title="GenJVM.this.global.icodes.global.Symbol">module</a>.<a href="../../symtab/Symbols.scala.html#107486" title="=&gt; GenJVM.this.global.icodes.global.Symbol">moduleClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115426" title="=&gt; GenJVM.this.global.nme.NameType">readResolve</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitALOAD_0</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitGETSTATIC</span><span class="delimiter">(</span><a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239072" title="GenJVM.this.global.icodes.global.Symbol">module</a><span class="delimiter">)</span> <span class="comment">/* + &quot;$&quot; */</span> ,
                                  <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115284" title="=&gt; GenJVM.this.global.nme.NameType">MODULE_INSTANCE_FIELD</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                                  <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239072" title="GenJVM.this.global.icodes.global.Symbol">module</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">STORE_ARRAY_ITEM</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239096">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitASTORE</span> <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239096" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">STORE_LOCAL</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="239108">local</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitSTORE</span><span class="delimiter">(</span><a href="#231406" title="(local: GenJVM.this.global.icodes.Local)Int">indexOf</a><span class="delimiter">(</span><a href="#239108" title="GenJVM.this.global.icodes.Local">local</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239108" title="GenJVM.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">STORE_THIS</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
            <span class="comment">// this only works for impl classes because the self parameter comes first</span>
            <span class="comment">// in the method signature. If that changes, this code has to be revisited.</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitASTORE_0</span><span class="delimiter">(</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">STORE_FIELD</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239124">field</a>, <a title="Boolean" id="239125">isStatic</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="239126">owner</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239124" title="GenJVM.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.icodes.global.Symbol">owner</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239125" title="Boolean">isStatic</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitPUTSTATIC</span><span class="delimiter">(</span><a href="#239126" title="String">owner</a>,
                                  <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239124" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span>,
                                  <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239124" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitPUTFIELD</span><span class="delimiter">(</span><a href="#239126" title="String">owner</a>,
                                  <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239124" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span>,
                                  <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239124" title="GenJVM.this.global.icodes.global.Symbol">field</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">CALL_PRIMITIVE</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Primitive" id="239140">primitive</a><span class="delimiter">)</span> =&gt;
            <a href="#238474" title="(primitive: GenJVM.this.global.icodes.Primitive, pos: GenJVM.this.global.Position)Unit">genPrimitive</a><span class="delimiter">(</span><a href="#239140" title="GenJVM.this.global.icodes.Primitive">primitive</a>, <a href="#238992" title="GenJVM.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#197946" title="=&gt; scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span>

          <span class="comment">/** Special handling to access native Array.clone() */</span>
          <span class="keyword">case</span> <a title="Unit" id="239143">call</a> @ CALL_METHOD<span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106258" title="=&gt; GenJVM.this.global.Symbol">Array_clone</a>, <a href="../icode/Opcodes.scala.html#113648" title="object GenJVM.this.global.icodes.opcodes.Dynamic">Dynamic</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="239146">target</a>: <span title="String">String</span> = <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239143" title="GenJVM.this.global.icodes.opcodes.CALL_METHOD">call</a>.<a href="../icode/Opcodes.scala.html#208456" title="=&gt; GenJVM.this.global.icodes.TypeKind">targetTypeKind</a><span class="delimiter">)</span>.<span title="()java.lang.String">getSignature</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEVIRTUAL</span><span class="delimiter">(</span><a href="#239146" title="String">target</a>, <span title="java.lang.String(&quot;clone&quot;)" class="string">&quot;clone&quot;</span>, <a href="#231310" title="=&gt; ch.epfl.lamp.fjbg.JMethodType">arrayCloneType</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <a title="Unit" id="239153">call</a> @ CALL_METHOD<span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239156">method</a>, <a title="GenJVM.this.global.icodes.opcodes.InvokeStyle" id="239157">style</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="239158">owner</a>: <span title="String">String</span> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239156" title="GenJVM.this.global.icodes.global.Symbol">method</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.icodes.global.Symbol">owner</a><span class="delimiter">)</span>
            <span class="comment">// reference the type of the receiver instead of the method owner (if not an interface!)</span>
            <span class="keyword">val</span> <a title="String" id="239159">dynamicOwner</a> =
              <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#231408" title="(sym: GenJVM.this.global.Symbol)Boolean">needsInterfaceCall</a><span class="delimiter">(</span><a href="#239153" title="GenJVM.this.global.icodes.opcodes.CALL_METHOD">call</a>.<a href="../icode/Opcodes.scala.html#208452" title="=&gt; GenJVM.this.global.icodes.global.Symbol">hostClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#239158" title="String">owner</a>
              <span class="keyword">else</span> <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239153" title="GenJVM.this.global.icodes.opcodes.CALL_METHOD">call</a>.<a href="../icode/Opcodes.scala.html#208452" title="=&gt; GenJVM.this.global.icodes.global.Symbol">hostClass</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="String" id="239160">jname</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239156" title="GenJVM.this.global.icodes.global.Symbol">method</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethodType" id="239161">jtype</a> = <a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239156" title="GenJVM.this.global.icodes.global.Symbol">method</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JMethodType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">]</span>

            <a href="#239157" title="GenJVM.this.global.icodes.opcodes.InvokeStyle">style</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../icode/Opcodes.scala.html#113650" title="Unit">InvokeDynamic</a> =&gt;
                <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEINTERFACE</span><span class="delimiter">(</span><span title="java.lang.String(&quot;java.dyn.Dynamic&quot;)" class="string">&quot;java.dyn.Dynamic&quot;</span>, <a href="#239160" title="String">jname</a>, <a href="#239161" title="ch.epfl.lamp.fjbg.JMethodType">jtype</a><span class="delimiter">)</span>

              <span class="keyword">case</span> <a href="../icode/Opcodes.scala.html#113648" title="Unit">Dynamic</a> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#231408" title="(sym: GenJVM.this.global.Symbol)Boolean">needsInterfaceCall</a><span class="delimiter">(</span><a href="#239156" title="GenJVM.this.global.icodes.global.Symbol">method</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.icodes.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEINTERFACE</span><span class="delimiter">(</span><a href="#239158" title="String">owner</a>, <a href="#239160" title="String">jname</a>, <a href="#239161" title="ch.epfl.lamp.fjbg.JMethodType">jtype</a><span class="delimiter">)</span>
                <span class="keyword">else</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEVIRTUAL</span><span class="delimiter">(</span><a href="#239159" title="String">dynamicOwner</a>, <a href="#239160" title="String">jname</a>, <a href="#239161" title="ch.epfl.lamp.fjbg.JMethodType">jtype</a><span class="delimiter">)</span>

              <span class="keyword">case</span> <span title="Unit">Static</span><span class="delimiter">(</span><a title="Boolean" id="239170">instance</a><span class="delimiter">)</span> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239170" title="Boolean">instance</a><span class="delimiter">)</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESPECIAL</span><span class="delimiter">(</span><a href="#239158" title="String">owner</a>, <a href="#239160" title="String">jname</a>, <a href="#239161" title="ch.epfl.lamp.fjbg.JMethodType">jtype</a><span class="delimiter">)</span>
                <span class="keyword">else</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESTATIC</span><span class="delimiter">(</span><a href="#239158" title="String">owner</a>, <a href="#239160" title="String">jname</a>, <a href="#239161" title="ch.epfl.lamp.fjbg.JMethodType">jtype</a><span class="delimiter">)</span>

              <span class="keyword">case</span> <span title="Unit">SuperCall</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
                <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESPECIAL</span><span class="delimiter">(</span><a href="#239158" title="String">owner</a>, <a href="#239160" title="String">jname</a>, <a href="#239161" title="ch.epfl.lamp.fjbg.JMethodType">jtype</a><span class="delimiter">)</span>
                <span class="comment">// we initialize the MODULE$ field immediately after the super ctor</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112473" title="(sym: GenJVM.this.global.Symbol)Boolean">isStaticModule</a><span class="delimiter">(</span><a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#97390" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#231397" title="=&gt; Boolean">isModuleInitialized</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                    <a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> JMethod.<span title="java.lang.String(&quot;&lt;init&gt;&quot;)">INSTANCE_CONSTRUCTOR_NAME</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                    <a href="#239160" title="String">jname</a> <span title="(x$1: AnyRef)Boolean">==</span> JMethod.<span title="java.lang.String(&quot;&lt;init&gt;&quot;)">INSTANCE_CONSTRUCTOR_NAME</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#231397" title="(x$1: Boolean)Unit">isModuleInitialized</a> = <span title="Boolean(true)" class="keyword">true</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitALOAD_0</span><span class="delimiter">(</span><span class="delimiter">)</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JType)Unit">emitPUTSTATIC</span><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span>,
                                      <a href="../../symtab/StdNames.scala.html#67713" title="object GenJVM.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#115284" title="=&gt; GenJVM.this.global.nme.NameType">MODULE_INSTANCE_FIELD</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                                      <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()ch.epfl.lamp.fjbg.JType">getType</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">BOX</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239184">kind</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="GenJVM.this.global.Symbol" id="239185">boxedType</a> = <a href="../../symtab/Definitions.scala.html#67688" title="object GenJVM.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#106559" title="(key: GenJVM.this.global.Symbol)GenJVM.this.global.Symbol">boxedClass</a><span class="delimiter">(</span><a href="#239184" title="GenJVM.this.global.icodes.TypeKind">kind</a>.<a href="../icode/TypeKinds.scala.html#195942" title="=&gt; GenJVM.this.global.icodes.global.Type">toType</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.icodes.global.Symbol">typeSymbol</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethodType" id="239186">mtype</a> = <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231286" title="(s: GenJVM.this.global.Symbol)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239185" title="GenJVM.this.global.Symbol">boxedType</a><span class="delimiter">)</span>, <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239184" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESTATIC</span><span class="delimiter">(</span><a href="#231304" title="=&gt; java.lang.String">BoxesRunTime</a>, <span title="java.lang.String(&quot;boxTo&quot;)" class="string">&quot;boxTo&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239185" title="GenJVM.this.global.Symbol">boxedType</a>.<span title="=&gt; String">decodedName</span>, <a href="#239186" title="ch.epfl.lamp.fjbg.JMethodType">mtype</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">UNBOX</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239252">kind</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JMethodType" id="239253">mtype</a> = <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239252" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>, <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_OBJECT</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESTATIC</span><span class="delimiter">(</span><a href="#231304" title="=&gt; java.lang.String">BoxesRunTime</a>, <span title="java.lang.String(&quot;unboxTo&quot;)" class="string">&quot;unboxTo&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239252" title="GenJVM.this.global.icodes.TypeKind">kind</a>.<a href="../icode/TypeKinds.scala.html#195942" title="=&gt; GenJVM.this.global.icodes.global.Type">toType</a>.<a href="../../symtab/Types.scala.html#105313" title="=&gt; GenJVM.this.global.icodes.global.Symbol">typeSymbol</a>.<span title="=&gt; String">decodedName</span>, <a href="#239253" title="ch.epfl.lamp.fjbg.JMethodType">mtype</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">NEW</span><span class="delimiter">(</span>REFERENCE<span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239287">cls</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="239288">className</a> = <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239287" title="GenJVM.this.global.icodes.global.Symbol">cls</a><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: java.lang.String)Unit">emitNEW</span> <a href="#239288" title="String">className</a>

          <span class="keyword">case</span> <span title="Unit">CREATE_ARRAY</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239291">elem</a>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> =&gt; <a href="#239291" title="GenJVM.this.global.icodes.TypeKind">elem</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">REFERENCE</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | ARRAY<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitANEWARRAY</span> <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239291" title="GenJVM.this.global.icodes.TypeKind">elem</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JReferenceType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JReferenceType">JReferenceType</span><span class="delimiter">]</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitNEWARRAY</span> <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239291" title="GenJVM.this.global.icodes.TypeKind">elem</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">CREATE_ARRAY</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239308">elem</a>, <a title="Int" id="239309">dims</a><span class="delimiter">)</span> =&gt; 
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType, x$2: Int)Unit">emitMULTIANEWARRAY</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97018" title="(elem: GenJVM.this.global.icodes.TypeKind, dims: Int)GenJVM.this.global.icodes.ARRAY">ArrayN</a><span class="delimiter">(</span><a href="#239308" title="GenJVM.this.global.icodes.TypeKind">elem</a>, <a href="#239309" title="Int">dims</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="ch.epfl.lamp.fjbg.JReferenceType" class="delimiter">[</span><span title="ch.epfl.lamp.fjbg.JReferenceType">JReferenceType</span><span class="delimiter">]</span>, <a href="#239309" title="Int">dims</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">IS_INSTANCE</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239319">tpe</a><span class="delimiter">)</span> =&gt;
            <a href="#239319" title="GenJVM.this.global.icodes.TypeKind">tpe</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Unit">REFERENCE</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239321">cls</a><span class="delimiter">)</span> =&gt;
                <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitINSTANCEOF</span> <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239321" title="GenJVM.this.global.icodes.global.Symbol">cls</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Unit">ARRAY</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239323">elem</a><span class="delimiter">)</span> =&gt;
                <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitINSTANCEOF</span> <span title="ch.epfl.lamp.fjbg.JArrayType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JArrayType">JArrayType</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239323" title="GenJVM.this.global.icodes.TypeKind">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
                <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown reference type in IS_INSTANCE: &quot;)" class="string">&quot;Unknown reference type in IS_INSTANCE: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239319" title="GenJVM.this.global.icodes.TypeKind">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">CHECK_CAST</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239333">tpe</a><span class="delimiter">)</span> =&gt;
            <a href="#239333" title="GenJVM.this.global.icodes.TypeKind">tpe</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Unit">REFERENCE</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.global.Symbol" id="239335">cls</a><span class="delimiter">)</span> =&gt;
                <span class="comment">// No need to checkcast for Objects</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239335" title="GenJVM.this.global.icodes.global.Symbol">cls</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Definitions.scala.html#106079" title="=&gt; GenJVM.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitCHECKCAST</span> <span title="ch.epfl.lamp.fjbg.JObjectType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JObjectType">JObjectType</span><span class="delimiter">(</span><a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#239335" title="GenJVM.this.global.icodes.global.Symbol">cls</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Unit">ARRAY</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="239341">elem</a><span class="delimiter">)</span> =&gt;
                <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JReferenceType)Unit">emitCHECKCAST</span> <span title="ch.epfl.lamp.fjbg.JArrayType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JArrayType">JArrayType</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#239341" title="GenJVM.this.global.icodes.TypeKind">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
                <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown reference type in IS_INSTANCE: &quot;)" class="string">&quot;Unknown reference type in IS_INSTANCE: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239333" title="GenJVM.this.global.icodes.TypeKind">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">SWITCH</span><span class="delimiter">(</span><a title="List[List[Int]]" id="239352">tags</a>, <a title="List[GenJVM.this.global.icodes.BasicBlock]" id="239353">branches</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="Array[Array[Int]]" id="239354">tagArray</a> = <span title="Array[Array[Int]]" class="keyword">new</span> <span title="Array[Array[Int]]">Array</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#239352" title="List[List[Int]]">tags</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
            <span class="keyword">var</span> <a title="List[List[Int]]" id="239355">caze</a> = <a href="#239352" title="List[List[Int]]">tags</a>
            <span class="keyword">var</span> <a title="Int" id="239356">i</a> = <span title="Int(0)" class="int">0</span>

            <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#239356" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#239354" title="Array[Array[Int]]">tagArray</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#239358" title="()Unit" class="delimiter">{</a>
              <a href="#239354" title="(i: Int, x: Array[Int])Unit">tagArray</a><span class="delimiter">(</span><a href="#239356" title="Int">i</a><span class="delimiter">)</span> = <span title="Array[Int]" class="keyword">new</span> <span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#239355" title="List[List[Int]]">caze</a>.<span title="=&gt; List[Int]">head</span>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
              <a href="#239355" title="List[List[Int]]">caze</a>.<span title="=&gt; List[Int]">head</span>.<span title="(xs: Array[Int], start: Int)Unit">copyToArray</span><span class="delimiter">(</span><a href="#239354" title="(i: Int)Array[Int]">tagArray</a><span class="delimiter">(</span><a href="#239356" title="Int">i</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
              <a href="#239356" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
              <a href="#239355" title="List[List[Int]]">caze</a> = <a href="#239355" title="List[List[Int]]">caze</a>.<span title="=&gt; List[List[Int]]">tail</span>
            <span class="delimiter">}</span>
            <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.fjbg.JCode#Label]" id="239357">branchArray</a> = <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int)Array[ch.epfl.lamp.fjbg.JCode#Label]">newLabels</span><span class="delimiter">(</span><a href="#239354" title="Array[Array[Int]]">tagArray</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
            <a href="#239356" title="Int">i</a> = <span title="Int(0)" class="int">0</span>
            <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#239356" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#239357" title="Array[ch.epfl.lamp.fjbg.JCode#Label]">branchArray</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#239359" title="()Unit" class="delimiter">{</a>
              <a href="#239357" title="(i: Int, x: ch.epfl.lamp.fjbg.JCode#Label)Unit">branchArray</a><span class="delimiter">(</span><a href="#239356" title="Int">i</a><span class="delimiter">)</span> = <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239353" title="(n: Int)GenJVM.this.global.icodes.BasicBlock">branches</a><span class="delimiter">(</span><a href="#239356" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#239356" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
            <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
              <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Emitting SWITCH:\012tags: &quot;)" class="string">&quot;Emitting SWITCH:\ntags: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239352" title="List[List[Int]]">tags</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012branches: &quot;)" class="string">&quot;\nbranches: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239353" title="List[GenJVM.this.global.icodes.BasicBlock]">branches</a><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Array[Array[Int]], x$2: Array[ch.epfl.lamp.fjbg.JCode#Label], x$3: ch.epfl.lamp.fjbg.JCode#Label, x$4: Double)Unit">emitSWITCH</span><span class="delimiter">(</span><a href="#239354" title="Array[Array[Int]]">tagArray</a>, 
                             <a href="#239357" title="Array[ch.epfl.lamp.fjbg.JCode#Label]">branchArray</a>,
                             <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239353" title="List[GenJVM.this.global.icodes.BasicBlock]">branches</a>.<span title="=&gt; GenJVM.this.global.icodes.BasicBlock">last</span><span class="delimiter">)</span>,
                             <a href="#231294" title="=&gt; Double">MIN_SWITCH_DENSITY</a><span class="delimiter">)</span>
            <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">JUMP</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.BasicBlock" id="239526">whereto</a><span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#239526" title="GenJVM.this.global.icodes.BasicBlock">whereto</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239526" title="GenJVM.this.global.icodes.BasicBlock">whereto</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="comment">// default to short jumps</span>

          <span class="keyword">case</span> <span title="Unit">CJUMP</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.BasicBlock" id="239553">success</a>, <a title="GenJVM.this.global.icodes.BasicBlock" id="239554">failure</a>, <a title="GenJVM.this.global.icodes.TestOp" id="239555">cond</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="239556">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#239556" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#239553" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF_ICMP</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231279" title="(key: GenJVM.this.global.icodes.TestOp)GenJVM.this.global.icodes.TestOp">negate</a><span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="comment">// .. and fall through to success label</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF_ICMP</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239553" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>

              <span class="keyword">case</span> <span title="Unit">REFERENCE</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | ARRAY<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#239553" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF_ACMP</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231279" title="(key: GenJVM.this.global.icodes.TestOp)GenJVM.this.global.icodes.TestOp">negate</a><span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="comment">// .. and fall through to success label</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF_ACMP</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239553" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>

              <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
                <span class="delimiter">(</span><a href="#239556" title="GenJVM.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLCMP</span><span class="delimiter">(</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; 
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97088" title="object GenJVM.this.global.icodes.LT">LT</a> <span title="(x: Boolean)Boolean">||</span> <a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97092" title="object GenJVM.this.global.icodes.LE">LE</a><span class="delimiter">)</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCMPG</span><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="keyword">else</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; 
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97088" title="object GenJVM.this.global.icodes.LT">LT</a> <span title="(x: Boolean)Boolean">||</span> <a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97092" title="object GenJVM.this.global.icodes.LE">LE</a><span class="delimiter">)</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCMPG</span><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="keyword">else</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#239553" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231279" title="(key: GenJVM.this.global.icodes.TestOp)GenJVM.this.global.icodes.TestOp">negate</a><span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="comment">// .. and fall through to success label</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="#239555" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239553" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span><span class="delimiter">)</span>;
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#239554" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">CZJUMP</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.BasicBlock" id="240131">success</a>, <a title="GenJVM.this.global.icodes.BasicBlock" id="240132">failure</a>, <a title="GenJVM.this.global.icodes.TestOp" id="240133">cond</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="240134">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#240134" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231279" title="(key: GenJVM.this.global.icodes.TestOp)GenJVM.this.global.icodes.TestOp">negate</a><span class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>

              <span class="keyword">case</span> <span title="Unit">REFERENCE</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | ARRAY<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
                <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.BasicBlock" id="240247">Success</a> = <a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a>
                <span class="keyword">val</span> <a title="GenJVM.this.global.icodes.BasicBlock" id="240248">Failure</a> = <a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a>
                <span title="(_1: GenJVM.this.global.icodes.TestOp, _2: GenJVM.this.global.icodes.BasicBlock)(GenJVM.this.global.icodes.TestOp, GenJVM.this.global.icodes.BasicBlock)" class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a>, <a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97084" title="object GenJVM.this.global.icodes.EQ">EQ</a>, <a href="#240247" title="GenJVM.this.global.icodes.BasicBlock">Success</a><span class="delimiter">)</span> =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIFNONNULL</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97086" title="object GenJVM.this.global.icodes.NE">NE</a>, <a href="#240248" title="GenJVM.this.global.icodes.BasicBlock">Failure</a><span class="delimiter">)</span> =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIFNONNULL</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97084" title="object GenJVM.this.global.icodes.EQ">EQ</a>, <a href="#240248" title="GenJVM.this.global.icodes.BasicBlock">Failure</a><span class="delimiter">)</span> =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIFNULL</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97086" title="object GenJVM.this.global.icodes.NE">NE</a>, <a href="#240247" title="GenJVM.this.global.icodes.BasicBlock">Success</a><span class="delimiter">)</span> =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIFNULL</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97084" title="object GenJVM.this.global.icodes.EQ">EQ</a>, _<span class="delimiter">)</span> =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIFNULL</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97086" title="object GenJVM.this.global.icodes.NE">NE</a>, _<span class="delimiter">)</span> =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIFNONNULL</span> <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>

              <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
                <span class="delimiter">(</span><a href="#240134" title="GenJVM.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt;
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLCONST_0</span><span class="delimiter">(</span><span class="delimiter">)</span>; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLCMP</span><span class="delimiter">(</span><span class="delimiter">)</span>
                  <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; 
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCONST_0</span><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97088" title="object GenJVM.this.global.icodes.LT">LT</a> <span title="(x: Boolean)Boolean">||</span> <a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97092" title="object GenJVM.this.global.icodes.LE">LE</a><span class="delimiter">)</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCMPG</span><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="keyword">else</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>                    
                  <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; 
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCONST_0</span><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97088" title="object GenJVM.this.global.icodes.LT">LT</a> <span title="(x: Boolean)Boolean">||</span> <a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/Primitives.scala.html#97092" title="object GenJVM.this.global.icodes.LE">LE</a><span class="delimiter">)</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCMPG</span><span class="delimiter">(</span><span class="delimiter">)</span>
                    <span class="keyword">else</span> <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231279" title="(key: GenJVM.this.global.icodes.TestOp)GenJVM.this.global.icodes.TestOp">negate</a><span class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: ch.epfl.lamp.fjbg.JCode#Label)Unit">emitIF</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231277" title="(key: GenJVM.this.global.icodes.TestOp)Int">conds</a><span class="delimiter">(</span><a href="#240133" title="GenJVM.this.global.icodes.TestOp">cond</a><span class="delimiter">)</span>, <a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240131" title="GenJVM.this.global.icodes.BasicBlock">success</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238470" title="GenJVM.this.global.icodes.BasicBlock">nextBlock</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>
                    <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JCode#Label, x$2: Boolean)Unit">emitGOTO_maybe_W</span><span class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#240132" title="GenJVM.this.global.icodes.BasicBlock">failure</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">RETURN</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="240542">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitRETURN</span> <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240542" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">THROW</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitATHROW</span><span class="delimiter">(</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">DROP</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="240553">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#240553" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a> | <a href="../icode/TypeKinds.scala.html#97013" title="object GenJVM.this.global.icodes.DOUBLE">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitPOP2</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitPOP</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">DUP</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="240555">kind</a><span class="delimiter">)</span> =&gt;
            <a href="#240555" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a> | <a href="../icode/TypeKinds.scala.html#97013" title="object GenJVM.this.global.icodes.DOUBLE">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDUP2</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDUP</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          <span class="keyword">case</span> <span title="Unit">MONITOR_ENTER</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitMONITORENTER</span><span class="delimiter">(</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">MONITOR_EXIT</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitMONITOREXIT</span><span class="delimiter">(</span><span class="delimiter">)</span>            

          <span class="keyword">case</span> <span title="Unit">SCOPE_ENTER</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="240557">lv</a><span class="delimiter">)</span> =&gt; 
            <a href="#238469" title="scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]">varsInBlock</a> <span title="(elem: GenJVM.this.global.icodes.Local)varsInBlock.type">+=</span> <a href="#240557" title="GenJVM.this.global.icodes.Local">lv</a>
            <a href="#240557" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197926" title="(x$1: Int)Unit">start</a> = <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Any">SCOPE_EXIT</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="240567">lv</a><span class="delimiter">)</span> =&gt;
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#238469" title="(elem: GenJVM.this.global.icodes.Local)Boolean">varsInBlock</a><span class="delimiter">(</span><a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197932" title="(x$1: List[(Int, Int)])Unit">ranges</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197925" title="=&gt; Int">start</a>, <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#240589" title="(x: (Int, Int))List[(Int, Int)]">::</a> <a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="=&gt; List[(Int, Int)]">ranges</a>
              <a href="#238469" title="scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]">varsInBlock</a> <span title="(elem: GenJVM.this.global.icodes.Local)varsInBlock.type">-=</span> <a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>
            <span class="delimiter">}</span> 
            <span class="keyword">else</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#197637" title="(elem: GenJVM.this.global.icodes.Local)Boolean">varsInScope</a><span class="delimiter">(</span><a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197932" title="(x$1: List[(Int, Int)])Unit">ranges</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<span title="()Int">getAnchor</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#240619" title="(x: (Int, Int))List[(Int, Int)]">::</a> <a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="=&gt; List[(Int, Int)]">ranges</a>
              <a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#197637" title="=&gt; scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]">varsInScope</a> <span title="(elem: GenJVM.this.global.icodes.Local)scala.collection.mutable.Set[GenJVM.this.global.icodes.Local]">-=</span> <a href="#240567" title="GenJVM.this.global.icodes.Local">lv</a>
            <span class="delimiter">}</span> <span class="keyword">else</span>
              <a href="#238994" title="(cond: Boolean, msg: String)Unit">assert</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="java.lang.String(&quot;Illegal local var nesting: &quot;)" class="string">&quot;Illegal local var nesting: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit">LOAD_EXCEPTION</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
            <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#238939" title="Int">crtPC</a> = <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span>
        
<span class="comment">//        assert(instr.pos.source.isEmpty || instr.pos.source.get == (clasz.cunit.source), &quot;sources don't match&quot;)</span>
<span class="comment">//        val crtLine = instr.pos.line.get(lastLineNr);</span>

        <span class="keyword">val</span> <a title="Int" id="238995">crtLine</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
          <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#238992" title="GenJVM.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#197946" title="=&gt; scala.tools.nsc.util.Position">pos</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Positions.scala.html#67891" title="=&gt; tools.nsc.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <a href="#238938" title="Int">lastLineNr</a> <span class="keyword">else</span> <span class="delimiter">(</span><a href="#238992" title="GenJVM.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#197946" title="=&gt; scala.tools.nsc.util.Position">pos</a><span class="delimiter">)</span>.<a href="../../util/Position.scala.html#97214" title="=&gt; Int">line</a> <span class="comment">// check NoPosition to avoid costly exception</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Int">_</span>: <span title="UnsupportedOperationException">UnsupportedOperationException</span> =&gt;
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Warning: wrong position in: &quot;)" class="string">&quot;Warning: wrong position in: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a><span class="delimiter">)</span>
            <a href="#238938" title="Int">lastLineNr</a>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#197675" title="=&gt; GenJVM.this.global.icodes.Instruction">lastInstruction</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#238992" title="GenJVM.this.global.icodes.Instruction">instr</a><span class="delimiter">)</span>
          <a href="#231401" title="(key: GenJVM.this.global.icodes.BasicBlock, value: Int)Unit">endPC</a><span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span> = <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="comment">//System.err.println(&quot;CRTLINE: &quot; + instr.pos + &quot; &quot; + </span>
        <span class="comment">//           /* (if (instr.pos &lt; clasz.cunit.source.content.length) clasz.cunit.source.content(instr.pos) else '*') + */ &quot; &quot; + crtLine);</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#238939" title="Int">crtPC</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#238937" title="Int">lastMappedPC</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int, x$2: Int, x$3: Int)Unit">completeLineNumber</span><span class="delimiter">(</span><a href="#238937" title="Int">lastMappedPC</a>, <a href="#238939" title="Int">crtPC</a>, <a href="#238995" title="Int">crtLine</a><span class="delimiter">)</span>
          <a href="#238937" title="Int">lastMappedPC</a> = <a href="#238939" title="Int">crtPC</a>
          <a href="#238938" title="Int">lastLineNr</a>   = <a href="#238995" title="Int">crtLine</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      
      <span class="comment">// local vars that survived this basic block </span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="240720">lv</a> &lt;- <a href="#238469" title="(f: GenJVM.this.global.icodes.Local =&gt; Unit)Unit">varsInBlock</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#240720" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197932" title="(x$1: List[(Int, Int)])Unit">ranges</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#240720" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197925" title="=&gt; Int">start</a>, <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#240721" title="(x: (Int, Int))List[(Int, Int)]">::</a> <a href="#240720" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="=&gt; List[(Int, Int)]">ranges</a>
      <span class="delimiter">}</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="240750">lv</a> &lt;- <a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#197637" title="(f: GenJVM.this.global.icodes.Local =&gt; Unit)Unit">varsInScope</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#240750" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197932" title="(x$1: List[(Int, Int)])Unit">ranges</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#238468" title="(key: GenJVM.this.global.icodes.BasicBlock)ch.epfl.lamp.fjbg.JCode#Label">labels</a><span class="delimiter">(</span><a href="#238576" title="GenJVM.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<span title="()Int">getAnchor</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#240751" title="(x: (Int, Int))List[(Int, Int)]">::</a> <a href="#240750" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="=&gt; List[(Int, Int)]">ranges</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>


    <span class="comment">/**
     *  @param primitive ...
     *  @param pos       ...
     */</span>
    <span class="keyword">def</span> <a title="(primitive: GenJVM.this.global.icodes.Primitive, pos: GenJVM.this.global.Position)Unit" id="238474">genPrimitive</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Primitive" id="239141">primitive</a>: <a href="../icode/Primitives.scala.html#97043" title="GenJVM.this.global.icodes.Primitive">Primitive</a>, <a title="GenJVM.this.global.Position" id="239142">pos</a>: <a href="../../util/Position.scala.html#30599" title="GenJVM.this.global.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#239141" title="GenJVM.this.global.icodes.Primitive">primitive</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">Negation</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="240778">kind</a><span class="delimiter">)</span> =&gt;
          <a href="#240778" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt; 
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitINEG</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLNEG</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFNEG</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDNEG</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Impossible to negate a &quot;)" class="string">&quot;Impossible to negate a &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#240778" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">Arithmetic</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.ArithmeticOp" id="240783">op</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="240784">kind</a><span class="delimiter">)</span> =&gt;
          <a href="#240783" title="GenJVM.this.global.icodes.ArithmeticOp">op</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97097" title="Unit">ADD</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType)Unit">emitADD</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97099" title="Unit">SUB</a> =&gt;
              <span class="delimiter">(</span><a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitISUB</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLSUB</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFSUB</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDSUB</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>

            <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97101" title="Unit">MUL</a> =&gt;
              <span class="delimiter">(</span><a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIMUL</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLMUL</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFMUL</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDMUL</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>

            <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97103" title="Unit">DIV</a> =&gt;
              <span class="delimiter">(</span><a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIDIV</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLDIV</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFDIV</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDDIV</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>

            <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97105" title="Unit">REM</a> =&gt;
              <span class="delimiter">(</span><a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIREM</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLREM</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97011" title="Unit">FLOAT</a>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFREM</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Unit">DOUBLE</a> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDREM</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>

            <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97107" title="Unit">NOT</a> =&gt;
              <a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#96999" title="Unit">BOOL</a> | <a href="../icode/TypeKinds.scala.html#97001" title="object GenJVM.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#97005" title="object GenJVM.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#97003" title="object GenJVM.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a> =&gt;
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Int)Unit">emitPUSH</span><span class="delimiter">(</span>-<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIXOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97009" title="Unit">LONG</a>   =&gt;
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: Long)Unit">emitPUSH</span><span class="delimiter">(</span>-<span title="Long(-1L)" class="long">1l</span><span class="delimiter">)</span>
                  <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLXOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
                  <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Impossible to negate an &quot;)" class="string">&quot;Impossible to negate an &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#240784" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>

            <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
              <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Unknown arithmetic primitive &quot;)" class="string">&quot;Unknown arithmetic primitive &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239141" title="GenJVM.this.global.icodes.Primitive">primitive</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">Logical</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.LogicalOp" id="240805">op</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="240806">kind</a><span class="delimiter">)</span> =&gt; <span title="(_1: GenJVM.this.global.icodes.LogicalOp, _2: GenJVM.this.global.icodes.TypeKind)(GenJVM.this.global.icodes.LogicalOp, GenJVM.this.global.icodes.TypeKind)" class="delimiter">(</span><a href="#240805" title="GenJVM.this.global.icodes.LogicalOp">op</a>, <a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97117" title="object GenJVM.this.global.icodes.AND">AND</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLAND</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97117" title="object GenJVM.this.global.icodes.AND">AND</a>, <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIAND</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97117" title="object GenJVM.this.global.icodes.AND">AND</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIAND</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../icode/TypeKinds.scala.html#96999" title="object GenJVM.this.global.icodes.BOOL">BOOL</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>;

          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97119" title="object GenJVM.this.global.icodes.OR">OR</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97119" title="object GenJVM.this.global.icodes.OR">OR</a>, <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97119" title="object GenJVM.this.global.icodes.OR">OR</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../icode/TypeKinds.scala.html#96999" title="object GenJVM.this.global.icodes.BOOL">BOOL</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>;

          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97121" title="object GenJVM.this.global.icodes.XOR">XOR</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLXOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97121" title="object GenJVM.this.global.icodes.XOR">XOR</a>, <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIXOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97121" title="object GenJVM.this.global.icodes.XOR">XOR</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIXOR</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../icode/TypeKinds.scala.html#96999" title="object GenJVM.this.global.icodes.BOOL">BOOL</a><span class="delimiter">)</span>
              <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240806" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">Shift</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.ShiftOp" id="240881">op</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="240882">kind</a><span class="delimiter">)</span> =&gt; <span title="(_1: GenJVM.this.global.icodes.ShiftOp, _2: GenJVM.this.global.icodes.TypeKind)(GenJVM.this.global.icodes.ShiftOp, GenJVM.this.global.icodes.TypeKind)" class="delimiter">(</span><a href="#240881" title="GenJVM.this.global.icodes.ShiftOp">op</a>, <a href="#240882" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97110" title="object GenJVM.this.global.icodes.LSL">LSL</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLSHL</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97110" title="object GenJVM.this.global.icodes.LSL">LSL</a>, <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitISHL</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97110" title="object GenJVM.this.global.icodes.LSL">LSL</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitISHL</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240882" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97112" title="object GenJVM.this.global.icodes.ASR">ASR</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLSHR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97112" title="object GenJVM.this.global.icodes.ASR">ASR</a>, <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitISHR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97112" title="object GenJVM.this.global.icodes.ASR">ASR</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitISHR</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240882" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97114" title="object GenJVM.this.global.icodes.LSR">LSR</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLUSHR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97114" title="object GenJVM.this.global.icodes.LSR">LSR</a>, <a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIUSHR</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97114" title="object GenJVM.this.global.icodes.LSR">LSR</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitIUSHR</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97007" title="object GenJVM.this.global.icodes.INT">INT</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240882" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">Comparison</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.ComparisonOp" id="240945">op</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="240946">kind</a><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><span title="(_1: GenJVM.this.global.icodes.ComparisonOp, _2: GenJVM.this.global.icodes.TypeKind)(GenJVM.this.global.icodes.ComparisonOp, GenJVM.this.global.icodes.TypeKind)" class="delimiter">(</span><a href="#240945" title="GenJVM.this.global.icodes.ComparisonOp">op</a>, <a href="#240946" title="GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>: @<span title="(GenJVM.this.global.icodes.ComparisonOp, GenJVM.this.global.icodes.TypeKind) @unchecked">unchecked</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97079" title="object GenJVM.this.global.icodes.CMP">CMP</a>, <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a><span class="delimiter">)</span>    =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitLCMP</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97077" title="object GenJVM.this.global.icodes.CMPL">CMPL</a>, <a href="../icode/TypeKinds.scala.html#97011" title="object GenJVM.this.global.icodes.FLOAT">FLOAT</a><span class="delimiter">)</span>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97081" title="object GenJVM.this.global.icodes.CMPG">CMPG</a>, <a href="../icode/TypeKinds.scala.html#97011" title="object GenJVM.this.global.icodes.FLOAT">FLOAT</a><span class="delimiter">)</span>  =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitFCMPG</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97077" title="object GenJVM.this.global.icodes.CMPL">CMPL</a>, <a href="../icode/TypeKinds.scala.html#97013" title="object GenJVM.this.global.icodes.DOUBLE">DOUBLE</a><span class="delimiter">)</span> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a href="../icode/Primitives.scala.html#97081" title="object GenJVM.this.global.icodes.CMPG">CMPG</a>, <a href="../icode/TypeKinds.scala.html#97013" title="object GenJVM.this.global.icodes.DOUBLE">DOUBLE</a><span class="delimiter">)</span> =&gt; <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDCMPL</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Unit">Conversion</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="240965">src</a>, <a title="GenJVM.this.global.icodes.TypeKind" id="240966">dst</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Converting from: &quot;)" class="string">&quot;Converting from: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#240965" title="GenJVM.this.global.icodes.TypeKind">src</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to: &quot;)" class="string">&quot; to: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#240966" title="GenJVM.this.global.icodes.TypeKind">dst</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#240966" title="GenJVM.this.global.icodes.TypeKind">dst</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../icode/TypeKinds.scala.html#96999" title="object GenJVM.this.global.icodes.BOOL">BOOL</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Illegal conversion at: &quot;)" class="string">&quot;Illegal conversion at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231335" title="=&gt; GenJVM.this.global.icodes.IClass">clasz</a> <span title="(x$1: Any)java.lang.String">+</span>
                    <span title="java.lang.String(&quot; at: &quot;)" class="string">&quot; at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239142" title="GenJVM.this.global.Position">pos</a>.<a href="../../util/Position.scala.html#97187" title="=&gt; scala.tools.nsc.util.SourceFile">source</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239142" title="GenJVM.this.global.Position">pos</a>.<a href="../../util/Position.scala.html#97214" title="=&gt; Int">line</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JType, x$2: ch.epfl.lamp.fjbg.JType)Unit">emitT2T</span><span class="delimiter">(</span><a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240965" title="GenJVM.this.global.icodes.TypeKind">src</a><span class="delimiter">)</span>, <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240966" title="GenJVM.this.global.icodes.TypeKind">dst</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Unit">ArrayLength</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitARRAYLENGTH</span><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97071" title="Unit">StartConcat</a> =&gt;
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a> <span title="(x$1: java.lang.String)Unit">emitNEW</span> <a href="#231302" title="=&gt; String">StringBuilderClassName</a>
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="()Unit">emitDUP</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKESPECIAL</span><span class="delimiter">(</span><a href="#231302" title="=&gt; String">StringBuilderClassName</a>,
                                  JMethod.<span title="java.lang.String(&quot;&lt;init&gt;&quot;)">INSTANCE_CONSTRUCTOR_NAME</span>,
                                  <span title="object ch.epfl.lamp.fjbg.JMethodType">JMethodType</span>.<span title="ch.epfl.lamp.fjbg.JMethodType">ARGLESS_VOID_FUNCTION</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Unit">StringConcat</span><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="240992">el</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JType" id="240993">jtype</a> = <a href="#240992" title="GenJVM.this.global.icodes.TypeKind">el</a> <span title="ch.epfl.lamp.fjbg.JType" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="ch.epfl.lamp.fjbg.JObjectType">REFERENCE</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | ARRAY<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <span title="ch.epfl.lamp.fjbg.JObjectType">JAVA_LANG_OBJECT</span>
            <span class="keyword">case</span> <span title="ch.epfl.lamp.fjbg.JType">_</span> =&gt; <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#240992" title="GenJVM.this.global.icodes.TypeKind">el</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEVIRTUAL</span><span class="delimiter">(</span><a href="#231302" title="=&gt; String">StringBuilderClassName</a>,
                                  <span title="java.lang.String(&quot;append&quot;)" class="string">&quot;append&quot;</span>,
                                  <span title="ch.epfl.lamp.fjbg.JMethodType" class="keyword">new</span> <span title="ch.epfl.lamp.fjbg.JMethodType">JMethodType</span><span class="delimiter">(</span><a href="#231306" title="=&gt; ch.epfl.lamp.fjbg.JObjectType">StringBuilderType</a>,
                                  <span title="(xs: ch.epfl.lamp.fjbg.JType*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType])Array[ch.epfl.lamp.fjbg.JType]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.fjbg.JType]" class="delimiter">(</span><a href="#240993" title="ch.epfl.lamp.fjbg.JType">jtype</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../icode/Primitives.scala.html#97073" title="Unit">EndConcat</a> =&gt;
          <a href="#238466" title="ch.epfl.lamp.fjbg.JExtendedCode">jcode</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: ch.epfl.lamp.fjbg.JMethodType)Unit">emitINVOKEVIRTUAL</span><span class="delimiter">(</span><a href="#231302" title="=&gt; String">StringBuilderClassName</a>,
                                  <span title="java.lang.String(&quot;toString&quot;)" class="string">&quot;toString&quot;</span>,
                                  <a href="#231308" title="=&gt; ch.epfl.lamp.fjbg.JMethodType">toStringType</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
          <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Unimplemented primitive &quot;)" class="string">&quot;Unimplemented primitive &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239141" title="GenJVM.this.global.icodes.Primitive">primitive</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

      <span class="comment">// genCode starts here</span>
      <a href="#238471" title="(l: List[GenJVM.this.global.icodes.BasicBlock])Unit">genBlocks</a><span class="delimiter">(</span><a href="#231394" title="=&gt; List[GenJVM.this.global.icodes.BasicBlock]">linearization</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#112470" title="BytecodeGenerator.this.type" class="keyword">this</a>.<a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197733" title="=&gt; List[GenJVM.this.global.icodes.ExceptionHandler]">exh</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
        <a href="#238472" title="()Unit">genExceptionHandlers</a>;
    <span class="delimiter">}</span>


    <span class="comment">/** Emit a Local variable table for debugging purposes.
     *  Synthetic locals are skipped. All variables are method-scoped.
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: GenJVM.this.global.icodes.IMethod, jcode: ch.epfl.lamp.fjbg.JCode)Unit" id="231400">genLocalVariableTable</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="237443">m</a>: <a href="../icode/Members.scala.html#96963" title="GenJVM.this.global.icodes.IMethod">IMethod</a>, <a title="ch.epfl.lamp.fjbg.JCode" id="237444">jcode</a>: <span title="ch.epfl.lamp.fjbg.JCode">JCode</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[GenJVM.this.global.icodes.Local]" id="241033">vars</a> = <a href="#237443" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197745" title="=&gt; List[GenJVM.this.global.icodes.Local]">locals</a> <span title="(p: GenJVM.this.global.icodes.Local =&gt; Boolean)List[GenJVM.this.global.icodes.Local]">filterNot</span> <span class="delimiter">(</span><a href="#241046" title="GenJVM.this.global.icodes.Local">_</a>.<a href="../icode/Members.scala.html#197915" title="=&gt; GenJVM.this.global.icodes.global.Symbol">sym</a>.<span title="=&gt; Boolean">isSynthetic</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#241033" title="List[GenJVM.this.global.icodes.Local]">vars</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JConstantPool" id="241034">pool</a> = <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()ch.epfl.lamp.fjbg.JConstantPool">getConstantPool</span>
      <span class="keyword">val</span> <a title="Int" id="241035">pc</a> = <a href="#237444" title="ch.epfl.lamp.fjbg.JCode">jcode</a>.<span title="()Int">getPC</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Int" id="241036">anonCounter</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="241037">entries</a> = <span title="Int(0)" class="int">0</span>
      <a href="#241033" title="List[GenJVM.this.global.icodes.Local]">vars</a>.<span title="(f: GenJVM.this.global.icodes.Local =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="GenJVM.this.global.icodes.Local" id="241067">lv</a> =&gt;
        <a href="#241067" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197932" title="(x$1: List[(Int, Int)])Unit">ranges</a> = <a href="#231409" title="(ranges: List[(Int, Int)])List[(Int, Int)]">mergeEntries</a><span class="delimiter">(</span><a href="#241067" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="=&gt; List[(Int, Int)]">ranges</a>.<span title="=&gt; List[(Int, Int)]">reverse</span><span class="delimiter">)</span>;
        <a href="#241037" title="Int">entries</a> <span title="(x: Int)Int">+=</span> <a href="#241067" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="=&gt; List[(Int, Int)]">ranges</a>.<span title="=&gt; Int">length</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()Boolean">isStatic</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#241037" title="Int">entries</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>

      <span class="keyword">val</span> <a title="java.nio.ByteBuffer" id="241038">lvTab</a> = <span title="object java.nio.ByteBuffer">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span> <span title="(x: Int)Int">+</span> <span title="Int(10)" class="int">10</span> <span title="(x: Int)Int">*</span> <a href="#241037" title="Int">entries</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(name: String, signature: String, idx: Short, start: Short, end: Short)Unit" id="241039">emitEntry</a><span class="delimiter">(</span><a title="String" id="241089">name</a>: <span title="String">String</span>, <a title="String" id="241090">signature</a>: <span title="String">String</span>, <a title="Short" id="241091">idx</a>: <span title="Short">Short</span>, <a title="Short" id="241092">start</a>: <span title="Short">Short</span>, <a title="Short" id="241093">end</a>: <span title="Short">Short</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#241038" title="java.nio.ByteBuffer">lvTab</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#241092" title="Short">start</a>
        <a href="#241038" title="java.nio.ByteBuffer">lvTab</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#241093" title="Short">end</a>
        <a href="#241038" title="java.nio.ByteBuffer">lvTab</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#241034" title="ch.epfl.lamp.fjbg.JConstantPool">pool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#241089" title="String">name</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
        <a href="#241038" title="java.nio.ByteBuffer">lvTab</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#241034" title="ch.epfl.lamp.fjbg.JConstantPool">pool</a>.<span title="(x$1: java.lang.String)Int">addUtf8</span><span class="delimiter">(</span><a href="#241090" title="String">signature</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
        <a href="#241038" title="java.nio.ByteBuffer">lvTab</a> <span title="(x$1: Short)java.nio.ByteBuffer">putShort</span> <a href="#241091" title="Short">idx</a>
      <span class="delimiter">}</span>

      <a href="#241038" title="java.nio.ByteBuffer">lvTab</a>.<span title="(x$1: Short)java.nio.ByteBuffer">putShort</span><span class="delimiter">(</span><a href="#241037" title="Int">entries</a>.<span title="=&gt; Short">toShort</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#231344" title="=&gt; ch.epfl.lamp.fjbg.JMethod">jmethod</a>.<span title="()Boolean">isStatic</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#241039" title="(name: String, signature: String, idx: Short, start: Short, end: Short)Unit">emitEntry</a><span class="delimiter">(</span><span title="java.lang.String(&quot;this&quot;)" class="string">&quot;this&quot;</span>, <a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>.<span title="()ch.epfl.lamp.fjbg.JType">getType</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">getSignature</span><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="Short(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>.<span title="=&gt; Short">toShort</span>, <a href="#241035" title="Int">pc</a>.<span title="=&gt; Short">toShort</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="241126">lv</a> &lt;- <a href="#241033" title="(f: GenJVM.this.global.icodes.Local =&gt; Unit)Unit">vars</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="241127">name</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#241126" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197915" title="=&gt; GenJVM.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#241036" title="Int">anonCounter</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
          <span title="java.lang.String(&quot;&lt;anon&quot;)" class="string">&quot;&lt;anon&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#241036" title="Int">anonCounter</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#231354" title="(sym: GenJVM.this.global.Symbol)String">javaName</a><span class="delimiter">(</span><a href="#241126" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197915" title="=&gt; GenJVM.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="Short" id="241128">index</a> = <a href="#231406" title="(local: GenJVM.this.global.icodes.Local)Int">indexOf</a><span class="delimiter">(</span><a href="#241126" title="GenJVM.this.global.icodes.Local">lv</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="241129">tpe</a>   = <a href="GenJVMUtil.scala.html#231284" title="(t: GenJVM.this.global.icodes.TypeKind)ch.epfl.lamp.fjbg.JType">javaType</a><span class="delimiter">(</span><a href="#241126" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>.<span title="()java.lang.String">getSignature</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="241178">start</a>, <a title="Int" id="241179">end</a><span class="delimiter">)</span> &lt;- <a href="#241126" title="GenJVM.this.global.icodes.Local">lv</a>.<a href="../icode/Members.scala.html#197931" title="(f: (Int, Int) =&gt; Unit)Unit">ranges</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#241039" title="(name: String, signature: String, idx: Short, start: Short, end: Short)Unit">emitEntry</a><span class="delimiter">(</span><a href="#241127" title="java.lang.String">name</a>, <a href="#241129" title="java.lang.String">tpe</a>, <a href="#241128" title="Short">index</a>, <a href="#241178" title="Int">start</a>.<span title="=&gt; Short">toShort</span>, <span class="delimiter">(</span><a href="#241179" title="Int">end</a> <span title="(x: Int)Int">-</span> <a href="#241178" title="Int">start</a><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="ch.epfl.lamp.fjbg.JOtherAttribute" id="241040">attr</a> =
        <a href="#231346" title="=&gt; ch.epfl.lamp.fjbg.FJBGContext">fjbgContext</a>.<span title="(x$1: ch.epfl.lamp.fjbg.JClass, x$2: Any, x$3: java.lang.String, x$4: Array[Byte])ch.epfl.lamp.fjbg.JOtherAttribute">JOtherAttribute</span><span class="delimiter">(</span><a href="#231341" title="=&gt; ch.epfl.lamp.fjbg.JClass">jclass</a>,
                                    <a href="#237444" title="ch.epfl.lamp.fjbg.JCode">jcode</a>,
                                    <a href="../../symtab/StdNames.scala.html#67709" title="object GenJVM.this.global.tpnme">tpnme</a>.<a href="../../symtab/StdNames.scala.html#114959" title="=&gt; GenJVM.this.global.tpnme.NameType">LocalVariableTableATTR</a>.<a href="../../symtab/Names.scala.html#96583" title="()String">toString</a>,
                                    <a href="#241038" title="java.nio.ByteBuffer">lvTab</a>.<span title="()Array[Byte]">array</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#237444" title="ch.epfl.lamp.fjbg.JCode">jcode</a> <span title="(x$1: ch.epfl.lamp.fjbg.JAttribute)Unit">addAttribute</span> <a href="#241040" title="ch.epfl.lamp.fjbg.JOtherAttribute">attr</a>
    <span class="delimiter">}</span>


    <span class="comment">/** For each basic block, the first PC address following it. */</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,Int]" id="231401">endPC</a> = <span title="()scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,Int]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[GenJVM.this.global.icodes.BasicBlock,Int]">HashMap</span><span class="delimiter">[</span>BasicBlock, Int<span class="delimiter">]</span>

    <span class="comment">////////////////////// local vars ///////////////////////</span>

    <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Int" id="231403">sizeOf</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="241188">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#231404" title="(k: GenJVM.this.global.icodes.TypeKind)Int">sizeOf</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#97027" title="(t: GenJVM.this.global.icodes.global.Type)GenJVM.this.global.icodes.TypeKind">toTypeKind</a><span class="delimiter">(</span><a href="#241188" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107421" title="=&gt; GenJVM.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(k: GenJVM.this.global.icodes.TypeKind)Int" id="231404">sizeOf</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.TypeKind" id="241194">k</a>: <a href="../icode/TypeKinds.scala.html#96991" title="GenJVM.this.global.icodes.TypeKind">TypeKind</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#241194" title="GenJVM.this.global.icodes.TypeKind">k</a> <span title="Int" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#97013" title="Int(2)">DOUBLE</a> | <a href="../icode/TypeKinds.scala.html#97009" title="object GenJVM.this.global.icodes.LONG">LONG</a> =&gt; <span title="Int(2)" class="int">2</span>
      <span class="keyword">case</span> <span title="Int(1)">_</span> =&gt; <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: GenJVM.this.global.icodes.IMethod, sym: GenJVM.this.global.Symbol)Int" id="231405">indexOf</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="237411">m</a>: <a href="../icode/Members.scala.html#96963" title="GenJVM.this.global.icodes.IMethod">IMethod</a>, <a title="GenJVM.this.global.Symbol" id="237412">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> Some<a href="#241206" title="GenJVM.this.global.icodes.Local" id="241198" class="delimiter">(</a><a title="GenJVM.this.global.icodes.Local" id="241206">local</a><span class="delimiter">)</span> = <a href="#237411" title="GenJVM.this.global.icodes.IMethod">m</a> <a href="../icode/Members.scala.html#197758" title="(sym: GenJVM.this.global.icodes.global.Symbol)Option[GenJVM.this.global.icodes.Local]">lookupLocal</a> <a href="#237412" title="GenJVM.this.global.Symbol">sym</a>
      <a href="#231406" title="(local: GenJVM.this.global.icodes.Local)Int">indexOf</a><span class="delimiter">(</span><a href="#241198" title="GenJVM.this.global.icodes.Local">local</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(local: GenJVM.this.global.icodes.Local)Int" id="231406">indexOf</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="237409">local</a>: <a href="../icode/Members.scala.html#96964" title="GenJVM.this.global.icodes.Local">Local</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <a href="#231410" title="(cond: Boolean, msg: =&gt; String)Unit">assert</a><span class="delimiter">(</span><a href="#237409" title="GenJVM.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#197922" title="=&gt; Int">index</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>,
             <span title="java.lang.String(&quot;Invalid index for: &quot;)" class="string">&quot;Invalid index for: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#237409" title="GenJVM.this.global.icodes.Local">local</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;{&quot;)" class="string">&quot;{&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#237409" title="GenJVM.this.global.icodes.Local">local</a>.<span title="()Int">##</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;}: &quot;)" class="string">&quot;}: &quot;</span><span class="delimiter">)</span>
      <a href="#237409" title="GenJVM.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#197922" title="=&gt; Int">index</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Compute the indexes of each local variable of the given
     * method. Assumes parameters come first in the list of locals.
     */</span>
    <span class="keyword">def</span> <a title="(m: GenJVM.this.global.icodes.IMethod)Unit" id="231407">computeLocalVarsIndex</a><span class="delimiter">(</span><a title="GenJVM.this.global.icodes.IMethod" id="237189">m</a>: <a href="../icode/Members.scala.html#96963" title="GenJVM.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="241219">idx</a> = <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#237189" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197724" title="=&gt; GenJVM.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#107386" title="=&gt; Boolean">isStaticMember</a><span class="delimiter">)</span>
        <a href="#241219" title="Int">idx</a> = <span title="Int(0)" class="int">0</span>;

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="GenJVM.this.global.icodes.Local" id="241241">l</a> &lt;- <a href="#237189" title="GenJVM.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#197745" title="(f: GenJVM.this.global.icodes.Local =&gt; Unit)Unit">locals</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Index value for &quot;)" class="string">&quot;Index value for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#241241" title="GenJVM.this.global.icodes.Local">l</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;{&quot;)" class="string">&quot;{&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#241241" title="GenJVM.this.global.icodes.Local">l</a>.<span title="()Int">##</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;}: &quot;)" class="string">&quot;}: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#241219" title="Int">idx</a><span class="delimiter">)</span>
        <a href="#241241" title="GenJVM.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#197923" title="(x$1: Int)Unit">index</a> = <a href="#241219" title="Int">idx</a>
        <a href="#241219" title="Int">idx</a> <span title="(x: Int)Int">+=</span> <a href="#231404" title="(k: GenJVM.this.global.icodes.TypeKind)Int">sizeOf</a><span class="delimiter">(</span><a href="#241241" title="GenJVM.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#197917" title="=&gt; GenJVM.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">////////////////////// Utilities ////////////////////////</span>

    <span class="comment">/** Calls to methods in 'sym' need invokeinterface? */</span>
    <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Boolean" id="231408">needsInterfaceCall</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="239162">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      <a href="../../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;checking for interface call: &quot;)" class="string">&quot;checking for interface call: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#239162" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
      <span class="comment">// the following call to 'info' may cause certain symbols to fail loading</span>
      <span class="comment">// because we're too late in the compilation chain (aliases to overloaded</span>
      <span class="comment">// symbols will not be properly resolved, see scala.Range, method</span>
      <span class="comment">// `super$++` that fails in UnPickler at LazyTypeRefAndAlias.complete</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#239162" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107339" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span> <a href="#239162" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107423" title="=&gt; GenJVM.this.global.Type">info</a> <span class="comment">// needed so that the type is up to date</span>
                                <span class="comment">// (erasure may add lateINTERFACE to traits)</span>

      <a href="#239162" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isInterface</span> <span title="(x: Boolean)Boolean">||</span>
      <span class="delimiter">(</span><a href="#239162" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isJavaDefined</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#239162" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107447" title="(that: GenJVM.this.global.Symbol)Boolean">isNonBottomSubClass</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#106111" title="=&gt; GenJVM.this.global.Symbol">ClassfileAnnotationClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Merge adjacent ranges. */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ranges: List[(Int, Int)])List[(Int, Int)]" id="231409">mergeEntries</a><span class="delimiter">(</span><a title="List[(Int, Int)]" id="241068">ranges</a>: <span title="List[(Int, Int)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[(Int, Int)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">]</span> = 
      <span class="delimiter">(</span><a href="#241068" title="List[(Int, Int)]">ranges</a>.<span title="(z: List[(Int, Int)])(f: (List[(Int, Int)], (Int, Int)) =&gt; List[(Int, Int)])List[(Int, Int)]">foldLeft</span><span class="delimiter">(</span><span title="object Nil">Nil</span>: <span title="List[(Int, Int)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span>collapsed: <span title="List[(Int, Int)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">]</span>, p: <span title="(Int, Int)" class="delimiter">(</span>Int, Int<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(_1: List[(Int, Int)], _2: (Int, Int))(List[(Int, Int)], (Int, Int))" class="delimiter">(</span><a href="#241284" title="List[(Int, Int)]">collapsed</a>, <a href="#241285" title="(Int, Int)">p</a><span class="delimiter">)</span> <span title="List[(Int, Int)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="List[(Int, Int)]" class="delimiter">(</span><span title="object Nil">Nil</span>, _<span class="delimiter">)</span> =&gt; <span title="(xs: (Int, Int)*)List[(Int, Int)]">List</span><span class="delimiter">(</span><a href="#241285" title="(Int, Int)">p</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="List[(Int, Int)]" class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="241309">s1</a>, <a title="Int" id="241310">e1</a><span class="delimiter">)</span> :: <a title="List[(Int, Int)]" id="241311">rest</a>, <span class="delimiter">(</span><a title="Int" id="241314">s2</a>, <a title="Int" id="241315">e2</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#241310" title="Int">e1</a> <span title="(x: Int)Boolean">==</span> <a href="#241314" title="Int">s2</a><span class="delimiter">)</span> =&gt; <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#241309" title="Int">s1</a>, <a href="#241315" title="Int">e2</a><span class="delimiter">)</span> <a href="#241320" title="(x: (Int, Int))List[(Int, Int)]">::</a> <a href="#241311" title="List[(Int, Int)]">rest</a>
        <span class="keyword">case</span> <span title="List[(Int, Int)]">_</span> =&gt; <a href="#241285" title="(Int, Int)">p</a> <a href="#241332" title="(x: (Int, Int))List[(Int, Int)]">::</a> <a href="#241284" title="List[(Int, Int)]">collapsed</a>
      <span class="delimiter">}</span><span class="delimiter">}</span><span class="delimiter">)</span>.<span title="=&gt; List[(Int, Int)]">reverse</span>

    <span class="keyword">def</span> <a title="(cond: Boolean, msg: =&gt; String)Unit" id="231410">assert</a><span class="delimiter">(</span><a title="Boolean" id="232682">cond</a>: <span title="Boolean">Boolean</span>, <a title="=&gt; String" id="232683">msg</a>: =&gt; String<span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#232682" title="Boolean">cond</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#197766" title="()Unit">dump</a>
      <a href="../../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><a href="#232683" title="=&gt; String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Method: &quot;)" class="string">&quot;\nMethod: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#231338" title="=&gt; GenJVM.this.global.icodes.IMethod">method</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(cond: Boolean)Unit" id="231411">assert</a><span class="delimiter">(</span><a title="Boolean" id="232680">cond</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#231410" title="(cond: Boolean, msg: =&gt; String)Unit">assert</a><span class="delimiter">(</span><a href="#232680" title="Boolean">cond</a>, <span title="java.lang.String(&quot;Assertion failed.&quot;)" class="string">&quot;Assertion failed.&quot;</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Return the Java modifiers for the given symbol.
   * Java modifiers for classes:
   *  - public, abstract, final, strictfp (not used)
   * for interfaces:
   *  - the same as for classes, without 'final'
   * for fields:
   *  - public, private (*)
   *  - static, final 
   * for methods:
   *  - the same as for fields, plus:
   *  - abstract, synchronized (not used), strictfp (not used), native (not used)
   * 
   *  (*) protected cannot be used, since inner classes 'see' protected members,
   *      and they would fail verification after lifted.
   */</span>
  <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Int" id="112471">javaFlags</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="233611">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(args: Int*)Int" id="241343">mkFlags</a><span class="delimiter">(</span><a title="Int*" id="241345">args</a>: <span title="Int*">Int</span>*<span class="delimiter">)</span> = <a href="#241345" title="Int*">args</a>.<span title="(z: Int)(op: (Int, Int) =&gt; Int)Int">foldLeft</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#241358" title="Int">_</a> <span title="(x: Int)Int">|</span> <a href="#241359" title="Int">_</a><span class="delimiter">)</span>
    <span class="comment">// constructors of module classes should be private</span>
    <span class="comment">// PP: why are they only being marked private at this stage and not earlier?</span>
    <span class="keyword">val</span> <a title="Boolean" id="241344">isConsideredPrivate</a> =
      <a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivate</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107378" title="=&gt; Boolean">isPrimaryConstructor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#112472" title="(sym: GenJVM.this.global.Symbol)Boolean">isTopLevelModule</a><span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107400" title="=&gt; GenJVM.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#241343" title="(args: Int*)Int">mkFlags</a><span class="delimiter">(</span>
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#241344" title="Boolean">isConsideredPrivate</a><span class="delimiter">)</span> <span title="Int(2)">ACC_PRIVATE</span> <span class="keyword">else</span> <span title="Int(1)">ACC_PUBLIC</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isDeferred</span> <span title="(x: Boolean)Boolean">||</span> <a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">hasAbstractFlag</span><span class="delimiter">)</span> <span title="Int(1024)">ACC_ABSTRACT</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isInterface</span><span class="delimiter">)</span> <span title="Int(512)">ACC_INTERFACE</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isFinal</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; GenJVM.this.global.Symbol">enclClass</span>.<span title="=&gt; Boolean">isInterface</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107332" title="=&gt; Boolean">isClassConstructor</a><span class="delimiter">)</span> <span title="Int(16)">ACC_FINAL</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107386" title="=&gt; Boolean">isStaticMember</a><span class="delimiter">)</span> <span title="Int(8)">ACC_STATIC</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isBridge</span> <span title="(x: Boolean)Boolean">||</span> <a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span>Flags.<span title="Long(34359738368L)">MIXEDIN</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span><span class="delimiter">)</span> <span title="Int(64)">ACC_BRIDGE</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isInterface</span><span class="delimiter">)</span> <span title="Int(32)">ACC_SUPER</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>,
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#233611" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isVarargsMethod</span><span class="delimiter">)</span> <span title="Int(128)">ACC_VARARGS</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Boolean" id="112472">isTopLevelModule</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="233635">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="../../symtab/SymbolTable.scala.html#64804" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a> <span class="delimiter">(</span><a href="../../Global.scala.html#64980" title="=&gt; GenJVM.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#72323" title="=&gt; scala.tools.nsc.Phase">picklerPhase</a>.<a href="../../Phase.scala.html#102836" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#233635" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isModuleClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233635" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233635" title="GenJVM.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#107391" title="=&gt; Boolean">isNestedClass</a>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: GenJVM.this.global.Symbol)Boolean" id="112473">isStaticModule</a><span class="delimiter">(</span><a title="GenJVM.this.global.Symbol" id="233624">sym</a>: <a href="../../symtab/Symbols.scala.html#67320" title="GenJVM.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#233624" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isModuleClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233624" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#233624" title="GenJVM.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isLifted</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>