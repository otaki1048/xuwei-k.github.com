<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/LiftCode.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Gilles Dubochet
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> <a href="../symtab/Flags.scala.html#24079" title="object scala.tools.nsc.symtab.Flags">Flags</a>._
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.tools.nsc.util.FreshNameCreator

<span class="comment">/** Translate expressions of the form reflect.Code.lift(exp)
 *  to the lifted &quot;reflect trees&quot; representation of exp.
 *
 *  @author Gilles Dubochet
 *  @version 1.0
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LiftCode extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.Reifiers with ScalaObject" id="27116">LiftCode</a> <a href="#27116" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#27209" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> <a href="Reifiers.scala.html#26075" title="scala.tools.nsc.transform.Reifiers">Reifiers</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="../SubComponent.scala.html#95918" title="=&gt; scala.tools.nsc.Global">global</a>._                  <span class="comment">// the global environment</span>
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#67688" title="object LiftCode.this.global.definitions">definitions</a>._             <span class="comment">// standard classes and methods</span>
  <span class="keyword">import</span> <a href="../Global.scala.html#64954" title="object LiftCode.this.global.typer">typer</a>.<span class="delimiter">{</span>typed, atOwner<span class="delimiter">}</span>    <span class="comment">// methods to type trees</span>

  <span class="keyword">val</span> <a title="LiftCode.this.global.type" id="110474">symbols</a>: global.<span class="keyword">type</span> = <a href="../SubComponent.scala.html#95918" title="=&gt; scala.tools.nsc.Global">global</a>

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <a title="String" id="110476">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;liftcode&quot;)" class="string">&quot;liftcode&quot;</span>

  <span class="keyword">def</span> <a title="(unit: LiftCode.this.global.CompilationUnit)LiftCode.this.global.Transformer" id="110478">newTransformer</a><span class="delimiter">(</span><a title="LiftCode.this.global.CompilationUnit" id="508413">unit</a>: <a href="../CompilationUnits.scala.html#67942" title="LiftCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#67825" title="LiftCode.this.global.Transformer">Transformer</a> =
    <span title="LiftCode.this.AddRefFields" class="keyword">new</span> <a href="#110479" title="LiftCode.this.AddRefFields">AddRefFields</a><span class="delimiter">(</span><a href="#508413" title="LiftCode.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class AddRefFields extends LiftCode.this.global.Transformer with ScalaObject" id="110479">AddRefFields</a><a href="#110479" title="ScalaObject" class="delimiter">(</a><a title="LiftCode.this.global.CompilationUnit" id="508420">unit</a>: <a href="../CompilationUnits.scala.html#67942" title="LiftCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#67825" title="LiftCode.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree" id="508419">transform</a><span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="508423">tree</a>: <span title="LiftCode.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="LiftCode.this.global.Tree">Tree</span> = <a href="#508423" title="LiftCode.this.global.Tree">tree</a> <span title="LiftCode.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="LiftCode.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="508428">lift</a>, <a href="#508430" title="(x: List[LiftCode.this.global.Tree])Some[List[LiftCode.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="508452">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">if</span> <a href="#508428" title="LiftCode.this.global.Tree">lift</a>.<span title="=&gt; LiftCode.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106289" title="=&gt; LiftCode.this.global.Symbol">Code_lift</a> =&gt;
        <a href="../typechecker/Typers.scala.html#105922" title="(tree: LiftCode.this.global.analyzer.global.Tree)LiftCode.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67840" title="(pos: LiftCode.this.global.Position)(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#508452" title="LiftCode.this.global.Tree">tree</a>.<span title="=&gt; LiftCode.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#110483" title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree">codify</a><span class="delimiter">(</span><a href="#508452" title="LiftCode.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="LiftCode.this.global.Tree">_</span> =&gt;
        <a href="#110479" title="LiftCode.this.AddRefFields" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#508423" title="LiftCode.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">type</span> <a title="scala.collection.immutable.ListMap[scala.reflect.Symbol,LiftCode.this.global.Name]" id="110480">InjectEnvironment</a> = immutable.<span title="scala.collection.immutable.ListMap[scala.reflect.Symbol,LiftCode.this.global.Name]">ListMap</span><span class="delimiter">[</span>reflect.Symbol, Name<span class="delimiter">]</span>

  <span class="keyword">class</span> <a title="class Injector extends java.lang.Object with ScalaObject" id="110481">Injector</a><a href="#110481" title="ScalaObject" class="delimiter">(</a><a title="LiftCode.this.InjectEnvironment" id="508568">env</a>: <span title="LiftCode.this.InjectEnvironment">InjectEnvironment</span>, <a title="scala.tools.nsc.util.FreshNameCreator" id="508569">fresh</a>: <a href="../util/FreshNameCreator.scala.html#30437" title="scala.tools.nsc.util.FreshNameCreator">FreshNameCreator</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="comment">// todo replace className by caseName in CaseClass once we have switched to nsc.</span>
    <span class="keyword">def</span> <a title="(value: AnyRef)String" id="508562">className</a><span class="delimiter">(</span><a title="AnyRef" id="508570">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#508570" title="AnyRef">value</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.$colon$colon&quot;)">_</span> :: _ =&gt; <span title="java.lang.String(&quot;scala.$colon$colon&quot;)" class="string">&quot;scala.$colon$colon&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.MethodType&quot;)">reflect</span>.MethodType<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <span title="java.lang.String(&quot;scala.reflect.MethodType&quot;)" class="string">&quot;scala.reflect.MethodType&quot;</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="508607">x</a>:<span title="Product">Product</span> =&gt;
        <span title="java.lang.String(&quot;scala.reflect.&quot;)" class="string">&quot;scala.reflect.&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#508607" title="Product">x</a>.<span title="=&gt; java.lang.String">productPrefix</span> <span class="comment">//caseName</span>
      <span class="comment">//case _ =&gt; // bq:unreachable code</span>
      <span class="comment">//  &quot;&quot;</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(value: Any)String" id="508563">objectName</a><span class="delimiter">(</span><a title="Any" id="508608">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#508608" title="Any">value</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.collection.immutable.Nil&quot;)">Nil</span>                =&gt; <span title="java.lang.String(&quot;scala.collection.immutable.Nil&quot;)" class="string">&quot;scala.collection.immutable.Nil&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.NoSymbol&quot;)">reflect</span>.<span title="object scala.reflect.NoSymbol">NoSymbol</span>   =&gt; <span title="java.lang.String(&quot;scala.reflect.NoSymbol&quot;)" class="string">&quot;scala.reflect.NoSymbol&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.RootSymbol&quot;)">reflect</span>.<span title="object scala.reflect.RootSymbol">RootSymbol</span> =&gt; <span title="java.lang.String(&quot;scala.reflect.RootSymbol&quot;)" class="string">&quot;scala.reflect.RootSymbol&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.NoPrefix&quot;)">reflect</span>.<span title="object scala.reflect.NoPrefix">NoPrefix</span>   =&gt; <span title="java.lang.String(&quot;scala.reflect.NoPrefix&quot;)" class="string">&quot;scala.reflect.NoPrefix&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.NoType&quot;)">reflect</span>.<span title="object scala.reflect.NoType">NoType</span>     =&gt; <span title="java.lang.String(&quot;scala.reflect.NoType&quot;)" class="string">&quot;scala.reflect.NoType&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">_</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(value: Any)LiftCode.this.global.Tree" id="508564">inject</a><span class="delimiter">(</span><a title="Any" id="508662">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="LiftCode.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(c: Product)LiftCode.this.global.gen.global.Tree" id="508664">treatProduct</a><span class="delimiter">(</span><a title="Product" id="508665">c</a>: <span title="Product">Product</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="String" id="508666">name</a> = <a href="#508563" title="(value: Any)String">objectName</a><span class="delimiter">(</span><a href="#508665" title="Product">c</a><span class="delimiter">)</span>
        <span title="LiftCode.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#508666" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="../Global.scala.html#64832" title="object LiftCode.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105427" title="(sym: LiftCode.this.global.gen.global.Symbol)LiftCode.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67688" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106493" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="508685">name</a> = <a href="#508562" title="(value: AnyRef)String">className</a><span class="delimiter">(</span><a href="#508665" title="Product">c</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#508685" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;don\'t know how to inject &quot;)" class="string">&quot;don't know how to inject &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#508662" title="Any">value</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]" id="508686">injectedArgs</a> = <span title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="508826">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(f: Int =&gt; scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree])Unit">until</span> <a href="#508665" title="Product">c</a>.<span title="=&gt; Int">productArity</span><span class="delimiter">)</span>
            <a href="#508686" title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]">injectedArgs</a> <span title="(x: LiftCode.this.global.Tree)injectedArgs.type">+=</span> <a href="#508564" title="(value: Any)LiftCode.this.global.Tree">inject</a><span class="delimiter">(</span><a href="#508665" title="Product">c</a>.<span title="(n: Int)Any">productElement</span><span class="delimiter">(</span><a href="#508826" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../ast/Trees.scala.html#67798" title="(tpt: LiftCode.this.global.Tree, argss: List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67802" title="(sym: LiftCode.this.global.Symbol)LiftCode.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67688" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106494" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="(xs: List[LiftCode.this.global.Tree]*)List[List[LiftCode.this.global.Tree]]">List</span><span class="delimiter">(</span><a href="#508686" title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]">injectedArgs</a>.<span title="=&gt; List[LiftCode.this.global.Tree]">toList</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#508662" title="Any">value</a> <span title="LiftCode.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="LiftCode.this.global.Tree">FreeValue</span><span class="delimiter">(</span><a title="LiftCode.this.symbols.Tree" id="508898">tree</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#67798" title="(tpt: LiftCode.this.global.Tree, argss: List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67802" title="(sym: LiftCode.this.global.Symbol)LiftCode.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67688" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106494" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName" class="string">&quot;scala.reflect.Literal&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="(xs: List[LiftCode.this.symbols.Tree]*)List[List[LiftCode.this.symbols.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: LiftCode.this.symbols.Tree*)List[LiftCode.this.symbols.Tree]">List</span><span class="delimiter">(</span><a href="#508898" title="LiftCode.this.symbols.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="LiftCode.this.global.Literal" class="delimiter">(</span><span class="delimiter">)</span>           =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="508953">x</a>: <span title="String">String</span>    =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#508953" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="508971">x</a>: <span title="Boolean">Boolean</span>   =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#508971" title="Boolean">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="508989">x</a>: <span title="Byte">Byte</span>      =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#508989" title="Byte">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="509007">x</a>: <span title="Short">Short</span>     =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#509007" title="Short">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="509025">x</a>: <span title="Char">Char</span>      =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#509025" title="Char">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="509043">x</a>: <span title="Int">Int</span>       =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#509043" title="Int">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="509061">x</a>: <span title="Long">Long</span>      =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#509061" title="Long">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="509079">x</a>: <span title="Float">Float</span>     =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#509079" title="Float">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="509097">x</a>: <span title="Double">Double</span>    =&gt; <a href="../SubComponent.scala.html#95918" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#509097" title="Double">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.gen.global.Tree" id="509115">c</a>: <span title="Product">Product</span>   =&gt; <a href="#508664" title="(c: Product)LiftCode.this.global.gen.global.Tree">treatProduct</a><span class="delimiter">(</span><a href="#509115" title="Product">c</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="LiftCode.this.global.gen.global.Tree" class="keyword">null</span> =&gt;
          <a href="../Global.scala.html#64832" title="object LiftCode.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105427" title="(sym: LiftCode.this.global.gen.global.Symbol)LiftCode.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67688" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106493" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../SubComponent.scala.html#95918" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName" class="string">&quot;scala.reflect.NoType&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
          <a href="../symtab/SymbolTable.scala.html#64779" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;don\'t know how to inject &quot;)" class="string">&quot;don't know how to inject &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#508662" title="Any">value</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">// Injector</span>


  <span class="keyword">def</span> <a title="(code: scala.reflect.Tree)LiftCode.this.global.Tree" id="110482">inject</a><span class="delimiter">(</span><a title="scala.reflect.Tree" id="509121">code</a>: reflect.<span title="scala.reflect.Tree">Tree</span><span class="delimiter">)</span>: <span title="LiftCode.this.global.Tree">Tree</span> =
    <span title="LiftCode.this.Injector" class="keyword">new</span> <a href="#110481" title="LiftCode.this.Injector">Injector</a><span class="delimiter">(</span>immutable.<span title="object scala.collection.immutable.ListMap">ListMap</span>.<span title="scala.collection.immutable.ListMap[scala.reflect.Symbol,Nothing]">empty</span>, <span title="scala.tools.nsc.util.FreshNameCreator.Default" class="keyword">new</span> <a href="../util/FreshNameCreator.scala.html#30438" title="object scala.tools.nsc.util.FreshNameCreator">FreshNameCreator</a>.<a href="../util/FreshNameCreator.scala.html#97153" title="scala.tools.nsc.util.FreshNameCreator.Default">Default</a><span class="delimiter">)</span>.<a href="#508564" title="(value: Any)LiftCode.this.global.Tree">inject</a><span class="delimiter">(</span><a href="#509121" title="scala.reflect.Tree">code</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree" id="110483">codify</a> <span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="508473">tree</a>: <span title="LiftCode.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="LiftCode.this.global.Tree">Tree</span> =
    <a href="../ast/Trees.scala.html#67798" title="(tpt: LiftCode.this.global.Tree, argss: List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67807" title="(tp: LiftCode.this.global.Type)LiftCode.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="../symtab/Types.scala.html#67478" title="(tycon: LiftCode.this.global.Type, args: List[LiftCode.this.global.Type])LiftCode.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67688" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106285" title="=&gt; LiftCode.this.global.Symbol">CodeClass</a>.<a href="../symtab/Symbols.scala.html#107436" title="=&gt; LiftCode.this.global.Type">typeConstructor</a>,
                             <span title="(xs: LiftCode.this.global.Type*)List[LiftCode.this.global.Type]">List</span><span class="delimiter">(</span><a href="#508473" title="LiftCode.this.global.Tree">tree</a>.<span title="=&gt; LiftCode.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
        <span title="(xs: List[LiftCode.this.global.Tree]*)List[List[LiftCode.this.global.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: LiftCode.this.global.Tree*)List[LiftCode.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#110482" title="(code: scala.reflect.Tree)LiftCode.this.global.Tree">inject</a><span class="delimiter">(</span><a href="Reifiers.scala.html#110530" title="(tree: LiftCode.this.symbols.Tree)scala.reflect.Tree">reify</a><span class="delimiter">(</span><a href="#508473" title="LiftCode.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">// case EmptyTree =&gt;</span>
<span class="comment">// case LiftPoint(tree) =&gt;</span>
<span class="comment">// case PackageDef(pid, stats) =&gt; </span>
<span class="comment">// case ClassDef(mods, name, tparams, impl) =&gt; </span>
<span class="comment">// case ValDef(mods, name, tpt, rhs) =&gt; </span>
<span class="comment">// case DefDef(mods, name, tparams, vparamss, tpt, rhs) =&gt;</span>
<span class="comment">// case TypeDef(mods, name, tparams, rhs) =&gt;</span>
<span class="comment">// case LabelDef(name, params, rhs) =&gt;</span>
<span class="comment">// case Template(parents, self, body) =&gt;</span>
<span class="comment">// case Block(stats, expr) =&gt;</span>
<span class="comment">// case ArrayValue(elemtpt, trees) =&gt;</span>
<span class="comment">// case Assign(lhs, rhs) =&gt;</span>
<span class="comment">// case If(cond, thenp, elsep) =&gt;</span>
<span class="comment">// case Match(selector, cases) =&gt; </span>
<span class="comment">// case Return(expr) =&gt;          </span>
<span class="comment">// case Try(block, catches, finalizer) =&gt;</span>
<span class="comment">// case Throw(expr) =&gt;</span>
<span class="comment">// case New(tpt) =&gt;</span>
<span class="comment">// case Typed(expr, tpt) =&gt;</span>
<span class="comment">// case TypeApply(fun, args) =&gt;</span>
<span class="comment">// case Apply(fun, args) =&gt;</span>
<span class="comment">// case Super(qual, mix) =&gt;</span>
<span class="comment">// case This(qual) =&gt;</span>
<span class="comment">// case Select(qualifier, selector) =&gt;</span>
<span class="comment">// case Ident(name) =&gt;</span>
<span class="comment">// case Literal(value) =&gt;</span>
<span class="comment">// case TypeTree() =&gt;</span>
<span class="comment">// /* Pattern matching */</span>
<span class="comment">// case CaseDef(pat, guard, body) =&gt;</span>
<span class="comment">// case Alternative(trees) =&gt;</span>
<span class="comment">// case Star(elem) =&gt;</span>
<span class="comment">// case Bind(name, body) =&gt;</span>

        </pre>
    </body>
</html>