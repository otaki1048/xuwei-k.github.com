<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/Erasure.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Martin Odersky
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.tools.nsc.symtab.classfile.<a href="../symtab/classfile/ClassfileConstants.scala.html#25247" title="object scala.tools.nsc.symtab.classfile.ClassfileConstants">ClassfileConstants</a>._
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> symtab._
<span class="keyword">import</span> <a href="../symtab/Flags.scala.html#24068" title="object scala.tools.nsc.symtab.Flags">Flags</a>._

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Erasure extends scala.tools.nsc.transform.AddInterfaces with scala.tools.nsc.typechecker.Analyzer with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="27234">Erasure</a> <a href="#27234" title="ScalaObject" class="keyword">extends</a> <a href="AddInterfaces.scala.html#26805" title="scala.tools.nsc.transform.AddInterfaces">AddInterfaces</a> 
                          <span class="keyword">with</span> typechecker.<a href="../typechecker/Analyzer.scala.html#28830" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a>
                          <span class="keyword">with</span> <a href="TypingTransformers.scala.html#26991" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a>
                          <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#11720" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a>
<span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="TypingTransformers.scala.html#110301" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#67699" title="object Erasure.this.global.definitions">definitions</a>._
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#105837" title="object Erasure.this.CODE">CODE</a>._

  <span class="keyword">val</span> <a title="String" id="111729">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;erasure&quot;)" class="string">&quot;erasure&quot;</span>

  <span class="keyword">def</span> <a title="(unit: Erasure.this.global.CompilationUnit)Erasure.this.global.Transformer" id="111731">newTransformer</a><span class="delimiter">(</span><a title="Erasure.this.global.CompilationUnit" id="498687">unit</a>: <a href="../CompilationUnits.scala.html#67953" title="Erasure.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#67836" title="Erasure.this.global.Transformer">Transformer</a> =
    <span title="Erasure.this.ErasureTransformer" class="keyword">new</span> <a href="#111762" title="Erasure.this.ErasureTransformer">ErasureTransformer</a><span class="delimiter">(</span><a href="#498687" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="111732">keepsTypeParams</a> = <span title="Boolean(false)" class="keyword">false</span>

<span class="comment">// -------- erasure on types --------------------------------------------------------</span>

  <span class="comment">/** An extractor object for generic arrays */</span>
  <span class="keyword">object</span> <a title="object Erasure.this.GenericArray" id="111733">GenericArray</a> <span title="ScalaObject" class="delimiter">{</span>
    
    <span class="comment">/** Is `tp` an unbounded generic type (i.e. which could be instantiated
     *  with primitive as well as class types)?. 
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="498707">genericCore</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498710">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <a href="#498710" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105483" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">TypeRef</span><span class="delimiter">(</span>_, <a title="Erasure.this.global.Symbol" id="498715">sym</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#498715" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isAbstractType</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#498715" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isJavaDefined</span> =&gt;
        <a href="#498710" title="Erasure.this.global.Type">tp</a>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">ExistentialType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="498718">tparams</a>, <a title="Erasure.this.global.Type" id="498719">restp</a><span class="delimiter">)</span> =&gt; 
        <a href="#498707" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">genericCore</a><span class="delimiter">(</span><a href="#498719" title="Erasure.this.global.Type">restp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.NoType.type">_</span> =&gt; 
        <a href="../symtab/Types.scala.html#67406" title="object Erasure.this.global.NoType">NoType</a>
    <span class="delimiter">}</span>

    <span class="comment">/** If `tp` is of the form Array[...Array[T]...] where `T` is an abstract type
     *  then Some(N, T) where N is the number of Array constructors enclosing `T`,
     *  otherwise None. Existentials on any level are ignored.
     */</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Option[(Int, Erasure.this.global.Type)]" id="498708">unapply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498720">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Option[(Int, Erasure.this.global.Type)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Type<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#498720" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105483" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="Option[(Int, Erasure.this.global.Type)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Option[(Int, Erasure.this.global.Type)]">TypeRef</span><span class="delimiter">(</span>_, <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>, <a href="#498726" title="(x: List[Erasure.this.global.Type])Some[List[Erasure.this.global.Type]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498748">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#498707" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">genericCore</a><span class="delimiter">(</span><a href="#498748" title="Erasure.this.global.Type">arg</a><span class="delimiter">)</span> <span title="Option[(Int, Erasure.this.global.Type)]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../symtab/Types.scala.html#67406" title="Option[(Int, Erasure.this.global.Type)]">NoType</a> =&gt; 
            <a href="#498708" title="(tp: Erasure.this.global.Type)Option[(Int, Erasure.this.global.Type)]">unapply</a><span class="delimiter">(</span><a href="#498748" title="Erasure.this.global.Type">arg</a><span class="delimiter">)</span> <span title="Option[(Int, Erasure.this.global.Type)]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Some[(Int, Erasure.this.global.Type)]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="498752">level</a>, <a title="Erasure.this.global.Type" id="498753">core</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: (Int, Erasure.this.global.Type))Some[(Int, Erasure.this.global.Type)]">Some</span><span class="delimiter">(</span><span title="(_1: Int, _2: Erasure.this.global.Type)(Int, Erasure.this.global.Type)" class="delimiter">(</span><a href="#498752" title="Int">level</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#498753" title="Erasure.this.global.Type">core</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="None.type">None</span> =&gt; <span title="object None">None</span>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> <a title="Some[(Int, Erasure.this.global.Type)]" id="498777">core</a> =&gt; 
            <span title="(x: (Int, Erasure.this.global.Type))Some[(Int, Erasure.this.global.Type)]">Some</span><span title="(_1: Int, _2: Erasure.this.global.Type)(Int, Erasure.this.global.Type)" class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <a href="#498777" title="Erasure.this.global.Type">core</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="Option[(Int, Erasure.this.global.Type)]">ExistentialType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="498789">tparams</a>, <a title="Erasure.this.global.Type" id="498790">restp</a><span class="delimiter">)</span> =&gt;
        <a href="#498708" title="(tp: Erasure.this.global.Type)Option[(Int, Erasure.this.global.Type)]">unapply</a><span class="delimiter">(</span><a href="#498790" title="Erasure.this.global.Type">restp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">_</span> =&gt;
        <span title="object None">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">// A type function from T =&gt; Class[U], used to determine the return</span>
  <span class="comment">// type of getClass calls.  The returned type is:</span>
  <span class="comment">//</span>
  <span class="comment">//  1. If T is a value type, Class[T].</span>
  <span class="comment">//  2. If T is anonymous or a refinement type, calculate the intersection</span>
  <span class="comment">//     dominator of the parents T', and Class[_ &lt;: T'].</span>
  <span class="comment">//  3. If T is a phantom type (Any or AnyVal), Class[_].</span>
  <span class="comment">//  4. Otherwise, Class[_ &lt;: T].</span>
  <span class="comment">//</span>
  <span class="comment">// Note: AnyVal cannot be Class[_ &lt;: AnyVal] because if the static type of the</span>
  <span class="comment">// receiver is AnyVal, it implies the receiver is boxed, so the correct</span>
  <span class="comment">// class object is that of java.lang.Integer, not Int.</span>
  <span class="comment">//</span>
  <span class="comment">// TODO: If T is final, return type could be Class[T].  Should it?</span>
  <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="111735">getClassReturnType</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498791">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(targs: List[Erasure.this.global.Type])Erasure.this.global.Type" id="498793">mkClass</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="498796">targs</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../symtab/Types.scala.html#67483" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106304" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#105464" title="=&gt; Erasure.this.global.Type">prefix</a>, <a href="../symtab/Definitions.scala.html#106304" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>, <a href="#498796" title="List[Erasure.this.global.Type]">targs</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="498794">tparams</a> = <a href="../symtab/Definitions.scala.html#106304" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>.<a href="../symtab/Symbols.scala.html#107579" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a>
    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="498795">sym</a>     = <a href="#498791" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
    
    <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498794" title="List[Erasure.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#498793" title="(targs: List[Erasure.this.global.Type])Erasure.this.global.Type">mkClass</a><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>   <span class="comment">// call must be coming post-erasure</span>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#498795" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#498793" title="(targs: List[Erasure.this.global.Type])Erasure.this.global.Type">mkClass</a><span class="delimiter">(</span><span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span><span class="delimiter">(</span><a href="#498791" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105458" title="=&gt; Erasure.this.global.Type">widen</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498795" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107533" title="=&gt; Boolean">isLocalClass</a><span class="delimiter">)</span> <a href="#111735" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">getClassReturnType</a><span class="delimiter">(</span><a href="#111738" title="object Erasure.this.erasure">erasure</a>.<a href="#236645" title="(parents: List[Erasure.this.global.Type])Erasure.this.global.Type">intersectionDominator</a><span class="delimiter">(</span><a href="#498791" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105463" title="=&gt; List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="498811">eparams</a>    = <a href="../symtab/Types.scala.html#67524" title="(clazz: Erasure.this.global.Symbol, tparams: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">typeParamsToExistentials</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106304" title="=&gt; Erasure.this.global.Symbol">ClassClass</a>, <a href="#498794" title="List[Erasure.this.global.Symbol]">tparams</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="498812">upperBound</a> = <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106655" title="(elem: Erasure.this.global.Symbol)Boolean">isPhantomClass</a><span class="delimiter">(</span><a href="#498795" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106216" title="=&gt; Erasure.this.global.Symbol">AnyClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#498791" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105458" title="=&gt; Erasure.this.global.Type">widen</a>

      <a href="../symtab/Types.scala.html#67493" title="(tparams: List[Erasure.this.global.Symbol], tpe0: Erasure.this.global.Type)Erasure.this.global.Type">existentialAbstraction</a><span class="delimiter">(</span>
        <a href="#498811" title="List[Erasure.this.global.Symbol]">eparams</a>,
        <a href="#498793" title="(targs: List[Erasure.this.global.Type])Erasure.this.global.Type">mkClass</a><span class="delimiter">(</span><span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span><span class="delimiter">(</span><a href="#498811" title="List[Erasure.this.global.Symbol]">eparams</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span> <a href="../symtab/Symbols.scala.html#107566" title="(info: Erasure.this.global.Type)Erasure.this.global.Symbol">setInfo</a> <a href="../symtab/Types.scala.html#67423" title="object Erasure.this.global.TypeBounds">TypeBounds</a>.<a href="../symtab/Types.scala.html#148499" title="(hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">upper</a><span class="delimiter">(</span><a href="#498812" title="Erasure.this.global.Type">upperBound</a><span class="delimiter">)</span> <a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Int" id="111736">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236440">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#236440" title="Erasure.this.global.Type">tp</a> <span title="Int" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#498708" title="Int">GenericArray</a><span class="delimiter">(</span><a title="Int" id="498841">level</a>, <a title="Erasure.this.global.Type" id="498842">core</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#498842" title="Erasure.this.global.Type">core</a> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../symtab/Definitions.scala.html#106218" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> =&gt; <a href="#498841" title="Int">level</a>
    <span class="keyword">case</span> <span title="Int(0)">_</span> =&gt; <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>

  <span class="comment">// @M #2585 when generating a java generic signature that includes a selection of an inner class p.I,  (p = `pre`, I = `cls`)</span>
  <span class="comment">// must rewrite to p'.I, where p' refers to the class that directly defines the nested class I</span>
  <span class="comment">// see also #2585 marker in javaSig: there, type arguments must be included (use pre.baseType(cls.owner))</span>
  <span class="comment">// requires cls.isClass</span>
  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pre: Erasure.this.global.Type, cls: Erasure.this.global.Symbol)Erasure.this.global.Type" id="111737">rebindInnerClass</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498844">pre</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a>, <a title="Erasure.this.global.Symbol" id="498845">cls</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> =
    <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498845" title="Erasure.this.global.Symbol">cls</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span> <a href="#498845" title="Erasure.this.global.Symbol">cls</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#498844" title="Erasure.this.global.Type">pre</a> <span class="comment">// why not cls.isNestedClass?</span>

  <span class="comment">/**   The erasure |T| of a type T. This is:
   *
   *   - For a constant type, itself.
   *   - For a type-bounds structure, the erasure of its upper bound.
   *   - For every other singleton type, the erasure of its supertype.
   *   - For a typeref scala.Array+[T] where T is an abstract type, AnyRef.
   *   - For a typeref scala.Array+[T] where T is not an abstract type, scala.Array+[|T|].
   *   - For a typeref scala.Any or scala.AnyVal, java.lang.Object.
   *   - For a typeref scala.Unit, scala.runtime.BoxedUnit.
   *   - For a typeref P.C[Ts] where C refers to a class, |P|.C.
   *     (Where P is first rebound to the class that directly defines C.)
   *   - For a typeref P.C[Ts] where C refers to an alias type, the erasure of C's alias.
   *   - For a typeref P.C[Ts] where C refers to an abstract type, the
   *     erasure of C's upper bound.
   *   - For a non-empty type intersection (possibly with refinement),
   *     the erasure of its first parent.
   *   - For an empty type intersection, java.lang.Object.
   *   - For a method type (Fs)scala.Unit, (|Fs|)scala#Unit.
   *   - For any other method type (Fs)Y, (|Fs|)|T|.
   *   - For a polymorphic type, the erasure of its result type.
   *   - For the class info type of java.lang.Object, the same type without any parents.
   *   - For a class info type of a value class, the same type without any parents.
   *   - For any other class info type with parents Ps, the same type with
   *     parents |Ps|, but with duplicate references of Object removed.
   *   - for all other types, the type itself (with any sub-components erased)
   */</span>
  <span class="keyword">object</span> <a title="object Erasure.this.erasure" id="111738">erasure</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../symtab/Types.scala.html#67514" title="Erasure.this.global.TypeMap">TypeMap</a> <span class="delimiter">{</span>
    <span class="comment">// Compute the dominant part of the intersection type with given `parents` according to new spec.</span>
    <span class="keyword">def</span> <a title="(parents: List[Erasure.this.global.Type])Erasure.this.global.Type" id="236645">intersectionDominator</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="498809">parents</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> =
      <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498809" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="498849">psyms</a> = <a href="#498809" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Symbol,List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#498866" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498849" title="List[Erasure.this.global.Symbol]">psyms</a> <span title="(elem: Any)Boolean">contains</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// treat arrays specially</span>
          <a href="../symtab/Definitions.scala.html#106497" title="(arg: Erasure.this.global.Type)Erasure.this.global.Type">arrayType</a><span class="delimiter">(</span>
            <a href="#236645" title="(parents: List[Erasure.this.global.Type])Erasure.this.global.Type">intersectionDominator</a><span class="delimiter">(</span>
              <a href="#498809" title="List[Erasure.this.global.Type]">parents</a> <span title="(p: Erasure.this.global.Type =&gt; Boolean)List[Erasure.this.global.Type]">filter</span> <span class="delimiter">(</span><a href="#498898" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="delimiter">(</span><a href="#498927" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#105467" title="=&gt; List[Erasure.this.global.Type]">typeArgs</a>.<span title="=&gt; Erasure.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="comment">// implement new spec for erasure of refined types.</span>
          <span class="keyword">def</span> <a title="(psym: Erasure.this.global.Symbol)Boolean" id="498956">isUnshadowed</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="498958">psym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
            <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#498849" title="List[Erasure.this.global.Symbol]">psyms</a> <span title="(p: Erasure.this.global.Symbol =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="498965">qsym</a> =&gt; <span class="delimiter">(</span><a href="#498958" title="Erasure.this.global.Symbol">psym</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#498965" title="Erasure.this.global.Symbol">qsym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#498965" title="Erasure.this.global.Symbol">qsym</a> <a href="../symtab/Symbols.scala.html#107588" title="(that: Erasure.this.global.Symbol)Boolean">isNonBottomSubClass</a> <a href="#498958" title="Erasure.this.global.Symbol">psym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Iterator[Erasure.this.global.Type]" id="498957">cs</a> = <a href="#498809" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Iterator[Erasure.this.global.Type]">iterator</span>.<span title="(p: Erasure.this.global.Type =&gt; Boolean)Iterator[Erasure.this.global.Type]">filter</span> <span class="delimiter">{</span> <a title="Erasure.this.global.Type" id="498969">p</a> =&gt; <span class="comment">// isUnshadowed is a bit expensive, so try classes first</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="498970">psym</a> = <a href="#498969" title="Erasure.this.global.Type">p</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
            <a href="#498970" title="Erasure.this.global.Symbol">psym</a>.<a href="../symtab/Symbols.scala.html#107572" title="=&gt; psym.type">initialize</a>
            <a href="#498970" title="Erasure.this.global.Symbol">psym</a>.<span title="=&gt; Boolean">isClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#498970" title="Erasure.this.global.Symbol">psym</a>.<a href="../symtab/Symbols.scala.html#107480" title="=&gt; Boolean">isTrait</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#498956" title="(psym: Erasure.this.global.Symbol)Boolean">isUnshadowed</a><span class="delimiter">(</span><a href="#498970" title="Erasure.this.global.Symbol">psym</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="delimiter">(</span><span title="Iterator[Erasure.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#498957" title="Iterator[Erasure.this.global.Type]">cs</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#498957" title="Iterator[Erasure.this.global.Type]">cs</a> <span class="keyword">else</span> <a href="#498809" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Iterator[Erasure.this.global.Type]">iterator</span>.<span title="(p: Erasure.this.global.Type =&gt; Boolean)Iterator[Erasure.this.global.Type]">filter</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498972">p</a> =&gt; <a href="#498956" title="(psym: Erasure.this.global.Symbol)Boolean">isUnshadowed</a><span class="delimiter">(</span><a href="#498972" title="Erasure.this.global.Type">p</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()Erasure.this.global.Type">next</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="236646">apply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236649">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <a href="#236649" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">ConstantType</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#236649" title="Erasure.this.global.Type">tp</a>
        <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="498974">st</a>: <a href="../symtab/Types.scala.html#67394" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#498974" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#148256" title="=&gt; Erasure.this.global.Type">supertype</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498979">pre</a>, <a title="Erasure.this.global.Symbol" id="498980">sym</a>, <a title="List[Erasure.this.global.Type]" id="498981">args</a><span class="delimiter">)</span> =&gt;
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498980" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
            <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#111736" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#236649" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
            <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498981" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Erasure.this.global.Type">head</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106228" title="=&gt; Erasure.this.global.Symbol">NothingClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#498981" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Erasure.this.global.Type">head</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106226" title="=&gt; Erasure.this.global.Symbol">NullClass</a><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106497" title="(arg: Erasure.this.global.Type)Erasure.this.global.Type">arrayType</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="../symtab/Types.scala.html#67483" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#498979" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span>, <a href="#498980" title="Erasure.this.global.Symbol">sym</a>, <a href="#498981" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="keyword">this</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498980" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106216" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#498980" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106716" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#498980" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106344" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#498980" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106336" title="=&gt; Erasure.this.global.Symbol">NotNullClass</a><span class="delimiter">)</span> <a href="#111753" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498980" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="#111753" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106596" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498980" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isRefinementClass</span><span class="delimiter">)</span> <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236645" title="(parents: List[Erasure.this.global.Type])Erasure.this.global.Type">intersectionDominator</a><span class="delimiter">(</span><a href="#236649" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105463" title="=&gt; List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#498980" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span> <a href="../symtab/Types.scala.html#67483" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#111737" title="(pre: Erasure.this.global.Type, cls: Erasure.this.global.Symbol)Erasure.this.global.Type">rebindInnerClass</a><span class="delimiter">(</span><a href="#498979" title="Erasure.this.global.Type">pre</a>, <a href="#498980" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#498980" title="Erasure.this.global.Symbol">sym</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>  <span class="comment">// #2585</span>
          <span class="keyword">else</span> <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#498980" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a><span class="delimiter">)</span> <span class="comment">// alias type or abstract type</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">PolyType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="499077">tparams</a>, <a title="Erasure.this.global.Type" id="499078">restpe</a><span class="delimiter">)</span> =&gt;
          <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#499078" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">ExistentialType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="499081">tparams</a>, <a title="Erasure.this.global.Type" id="499082">restpe</a><span class="delimiter">)</span> =&gt;
          <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#499082" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Erasure.this.global.MethodType" id="499083">mt</a> @ MethodType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="499086">params</a>, <a title="Erasure.this.global.Type" id="499087">restpe</a><span class="delimiter">)</span> =&gt;
          <a href="../symtab/Types.scala.html#148762" title="(params: List[Erasure.this.global.Symbol], resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a><span class="delimiter">(</span>
            <a href="../symtab/Symbols.scala.html#67341" title="(syms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">cloneSymbols</a><span class="delimiter">(</span><a href="#499086" title="List[Erasure.this.global.Symbol]">params</a><span class="delimiter">)</span> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Symbol,List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">map</span> <span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="499161">p</a> =&gt; <a href="#499161" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#107566" title="(info: Erasure.this.global.Type)p.type">setInfo</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#499161" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
            <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#499087" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span>
              <a href="#111753" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> 
            <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36819" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">YdepMethTpes</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
              <span class="comment">// this replaces each typeref that refers to an argument by the type `p.tpe` of the actual argument p (p in params)</span>
              <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#499083" title="Erasure.this.global.MethodType">mt</a>.<a href="../symtab/Types.scala.html#148781" title="(actuals: List[Erasure.this.global.Type])Erasure.this.global.Type">resultType</a><span class="delimiter">(</span><a href="#499086" title="List[Erasure.this.global.Symbol]">params</a> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="delimiter">(</span><a href="#499221" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#499087" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="499251">parents</a>, <a title="Erasure.this.global.Scope" id="499252">decls</a><span class="delimiter">)</span> =&gt;
          <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236645" title="(parents: List[Erasure.this.global.Type])Erasure.this.global.Type">intersectionDominator</a><span class="delimiter">(</span><a href="#499251" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">AnnotatedType</span><span class="delimiter">(</span>_, <a title="Erasure.this.global.Type" id="499256">atp</a>, _<span class="delimiter">)</span> =&gt;
          <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#499256" title="Erasure.this.global.Type">atp</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.ClassInfoType">ClassInfoType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="499260">parents</a>, <a title="Erasure.this.global.Scope" id="499261">decls</a>, <a title="Erasure.this.global.Symbol" id="499262">clazz</a><span class="delimiter">)</span> =&gt;
          <a href="../symtab/Types.scala.html#148665" title="(parents: List[Erasure.this.global.Type], decls: Erasure.this.global.Scope, typeSymbol: Erasure.this.global.Symbol)Erasure.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span>
            <span title="List[Erasure.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#499262" title="Erasure.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#499262" title="Erasure.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="object Nil">Nil</span>
            <span class="keyword">else</span> <span title="List[Erasure.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#499262" title="Erasure.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span><span class="delimiter">(</span><a href="#111753" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="#111754" title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]">removeDoubleObject</a><span class="delimiter">(</span><a href="#499260" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="keyword">this</span><span class="delimiter">)</span>,
            <a href="#499261" title="Erasure.this.global.Scope">decls</a>, <a href="#499262" title="Erasure.this.global.Symbol">clazz</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Type">_</span> =&gt;
          <a href="../symtab/Types.scala.html#133458" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#236649" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Erasure.this.NeedsSigCollector" id="111740">NeedsSigCollector</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../symtab/Types.scala.html#67518" title="Erasure.this.global.TypeCollector[Boolean]">TypeCollector</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Unit" id="499347">traverse</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="499354">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> <span class="delimiter">{</span> 
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../symtab/Types.scala.html#449296" title="=&gt; Boolean">result</a><span class="delimiter">)</span> <span class="delimiter">{</span> 
        <a href="#499354" title="Erasure.this.global.Type">tp</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Unit" id="499361">st</a>: <a href="../symtab/Types.scala.html#67394" title="Erasure.this.global.SubType">SubType</a> =&gt;
            <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#499361" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#148256" title="=&gt; Erasure.this.global.Type">supertype</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">TypeRef</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="499365">pre</a>, <a title="Erasure.this.global.Symbol" id="499366">sym</a>, <a title="List[Erasure.this.global.Type]" id="499367">args</a><span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#499366" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <a href="#499367" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; Unit)Unit">foreach</span> <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#499366" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107481" title="=&gt; Boolean">isTypeParameterOrSkolem</a> <span title="(x: Boolean)Boolean">||</span> <a href="#499366" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isExistentiallyBound</span> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#499367" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../symtab/Types.scala.html#449297" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#499366" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span> <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#111737" title="(pre: Erasure.this.global.Type, cls: Erasure.this.global.Symbol)Erasure.this.global.Type">rebindInnerClass</a><span class="delimiter">(</span><a href="#499365" title="Erasure.this.global.Type">pre</a>, <a href="#499366" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// #2585</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#499366" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isPackageClass</span><span class="delimiter">)</span> <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#499365" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">PolyType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> | ExistentialType<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
            <a href="../symtab/Types.scala.html#449297" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span class="keyword">case</span> <span title="Unit">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="499400">parents</a>, <a title="Erasure.this.global.Scope" id="499401">decls</a><span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#499400" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#499400" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">ClassInfoType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="499405">parents</a>, _, _<span class="delimiter">)</span> =&gt;
            <a href="#499405" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Unit)Unit">foreach</span> <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
          <span class="keyword">case</span> <span title="Unit">AnnotatedType</span><span class="delimiter">(</span>_, <a title="Erasure.this.global.Type" id="499430">atp</a>, _<span class="delimiter">)</span> =&gt;
            <a href="#499347" title="(tp: Erasure.this.global.Type)Unit">traverse</a><span class="delimiter">(</span><a href="#499430" title="Erasure.this.global.Type">atp</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
            <a href="../symtab/Types.scala.html#133458" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span title="Unit" class="delimiter">(</span><a href="#499354" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Boolean" id="111742">needsJavaSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="499444">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36759" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Ynogenericsig</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#111740" title="object Erasure.this.NeedsSigCollector">NeedsSigCollector</a>.<a href="../symtab/Types.scala.html#449299" title="(tp: Erasure.this.global.Type)Boolean">collect</a><span class="delimiter">(</span><a href="#499444" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>

  <span class="comment">// only refer to type params that will actually make it into the sig, this excludes:</span>
  <span class="comment">// * higher-order type parameters</span>
  <span class="comment">// * type parameters appearing in method parameters</span>
  <span class="comment">// * type members not visible in an enclosing template</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol, initialSymbol: Erasure.this.global.Symbol)Boolean" id="111743">isTypeParameterInSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="499453">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="499454">initialSymbol</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
    <span title="=&gt; Boolean">!</span><a href="#499453" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107482" title="=&gt; Boolean">isHigherOrderTypeParameter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <a href="#499453" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107481" title="=&gt; Boolean">isTypeParameterOrSkolem</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
      <span class="delimiter">(</span><a href="#499454" title="Erasure.this.global.Symbol">initialSymbol</a>.<a href="../symtab/Symbols.scala.html#107545" title="=&gt; List[Erasure.this.global.Symbol]">enclClassChain</a>.<span title="(p: Erasure.this.global.Symbol =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#499453" title="Erasure.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107587" title="(that: Erasure.this.global.Symbol)Boolean">isNestedIn</a> <a href="#499465" title="Erasure.this.global.Symbol">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <a href="../util/Tracer.scala.html#498531" title="(name: String, args: =&gt; Any)(body: =&gt; Boolean)Boolean">traceSig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isMethod&quot;)" class="string">&quot;isMethod&quot;</span>, <span title="(_1: Erasure.this.global.Symbol, _2: List[Erasure.this.global.Symbol])(Erasure.this.global.Symbol, List[Erasure.this.global.Symbol])" class="delimiter">(</span><a href="#499454" title="Erasure.this.global.Symbol">initialSymbol</a>, <a href="#499454" title="Erasure.this.global.Symbol">initialSymbol</a>.<a href="../symtab/Symbols.scala.html#107579" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a href="#499454" title="Erasure.this.global.Symbol">initialSymbol</a>.<span title="=&gt; Boolean">isMethod</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#499454" title="Erasure.this.global.Symbol">initialSymbol</a>.<a href="../symtab/Symbols.scala.html#107579" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#499453" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">)</span>
  <span class="delimiter">)</span>

  <span class="comment">// Ensure every '.' in the generated signature immediately follows</span>
  <span class="comment">// a close angle bracket '&gt;'.  Any which do not are replaced with '$'.</span>
  <span class="comment">// This arises due to multiply nested classes in the face of the</span>
  <span class="comment">// rewriting explained at rebindInnerClass.   This should be done in a</span>
  <span class="comment">// more rigorous way up front rather than catching it after the fact,</span>
  <span class="comment">// but that will be more involved.</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sig: String)String" id="111744">dotCleanup</a><span class="delimiter">(</span><a title="String" id="499484">sig</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Char" id="499486">last</a>: <span title="Char">Char</span> = <span title="Char(\'\00\')" class="char">'\0'</span>
    <a href="#499484" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">sig</a> <span title="(f: Char =&gt; Char)(implicit bf: scala.collection.generic.CanBuildFrom[String,Char,String])String">map</span> <a href="#499910" title="Char" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Char" class="char">'.'</span> <span class="keyword">if</span> <a href="#499486" title="Char">last</a> <span title="(x: Char)Boolean">!=</span> <span title="Char(\'&gt;\')" class="char">'&gt;'</span> =&gt; <a href="#499486" title="Char">last</a> = <span title="Char(\'.\')" class="char">'.'</span> ; <span title="Char(\'$\')" class="char">'$'</span>
      <span class="keyword">case</span> <a title="Char" id="499916">ch</a>                 =&gt; <a href="#499486" title="Char">last</a> = <a href="#499916" title="Char">ch</a> ; <a href="#499916" title="Char">ch</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">// for debugging signatures: traces logic given system property</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Boolean" id="111745">traceProp</a> = <span class="delimiter">(</span>sys.<span title="object scala.sys.BooleanProp">BooleanProp</span> <span title="(key: String)scala.sys.BooleanProp">keyExists</span> <span title="java.lang.String(&quot;scalac.sigs.trace&quot;)" class="string">&quot;scalac.sigs.trace&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">value</span> <span class="comment">// performance: get the value here</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.tools.nsc.util.Tracer" id="111747">traceSig</a>  = util.<a href="../util/Tracer.scala.html#498507" title="(enabled: =&gt; Boolean)scala.tools.nsc.util.Tracer">Tracer</a><span class="delimiter">(</span><a href="#111745" title="=&gt; Boolean">traceProp</a><span class="delimiter">)</span>
  
  <span class="comment">/** This object is only used for sanity testing when -check:genjvm is set.
   *  In that case we make sure that the erasure of the `normalized' type
   *  is the same as the erased type that's generated. Normalization means
   *  unboxing some primitive types and further simplifications as they are done in jsig.
   */</span>
  <span class="keyword">val</span> <a title="prepareSigMap extends Erasure.this.global.TypeMap" id="111749">prepareSigMap</a> = <a href="#236329" title="Erasure.this.global.TypeMap{def squashBoxed(tp: Erasure.this.global.Type): Erasure.this.global.Type}" class="keyword">new</a> <a href="../symtab/Types.scala.html#67514" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="236329">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="236331">squashBoxed</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236333">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <a href="#236333" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105483" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236337">t</a> @ RefinedType<span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="236340">parents</a>, <a title="Erasure.this.global.Scope" id="236341">decls</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="236342">parents1</a> = <a href="#236340" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)List[Erasure.this.global.Type]">mapConserve</span> <a href="#236331" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236342" title="List[Erasure.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236340" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#236333" title="Erasure.this.global.Type">tp</a>
        <span class="keyword">else</span> <a href="../symtab/Types.scala.html#148576" title="(parents: List[Erasure.this.global.Type], decls: Erasure.this.global.Scope)Erasure.this.global.RefinedType">RefinedType</a><span class="delimiter">(</span><a href="#236342" title="List[Erasure.this.global.Type]">parents1</a>, <a href="#236341" title="Erasure.this.global.Scope">decls</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236388">t</a> @ ExistentialType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="236391">tparams</a>, <a title="Erasure.this.global.Type" id="236392">tpe</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236393">tpe1</a> = <a href="#236331" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#236392" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236393" title="Erasure.this.global.Type">tpe1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236392" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="#236388" title="Erasure.this.global.ExistentialType">t</a>
        <span class="keyword">else</span> <a href="../symtab/Types.scala.html#149138" title="(quantified: List[Erasure.this.global.Symbol], underlying: Erasure.this.global.Type)Erasure.this.global.ExistentialType">ExistentialType</a><span class="delimiter">(</span><a href="#236391" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#236393" title="Erasure.this.global.Type">tpe1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236403">t</a> =&gt;  
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106700" title="=&gt; Map[Erasure.this.global.Symbol,Erasure.this.global.Symbol]">boxedClass</a> <span title="(key: Erasure.this.global.Symbol)Boolean">contains</span> <a href="#236403" title="Erasure.this.global.Type">t</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <a href="#236333" title="Erasure.this.global.Type">tp</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="236332">apply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236334">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <a href="#236334" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105483" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236405">tp1</a> @ TypeBounds<span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236408">lo</a>, <a title="Erasure.this.global.Type" id="236409">hi</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236410">lo1</a> = <a href="#236331" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236408" title="Erasure.this.global.Type">lo</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236411">hi1</a> = <a href="#236331" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236409" title="Erasure.this.global.Type">hi</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#236410" title="Erasure.this.global.Type">lo1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236408" title="Erasure.this.global.Type">lo</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#236411" title="Erasure.this.global.Type">hi1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236409" title="Erasure.this.global.Type">hi</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#236405" title="Erasure.this.global.TypeBounds">tp1</a>
        <span class="keyword">else</span> <a href="../symtab/Types.scala.html#148501" title="(lo: Erasure.this.global.Type, hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">TypeBounds</a><span class="delimiter">(</span><a href="#236410" title="Erasure.this.global.Type">lo1</a>, <a href="#236411" title="Erasure.this.global.Type">hi1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236421">tp1</a> @ TypeRef<span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236425">pre</a>, <a title="Erasure.this.global.Symbol" id="236426">sym</a>, <a title="List[Erasure.this.global.Type]" id="236427">args</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="236428">argApply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="236429">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236430">tp1</a> = <a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236429" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236430" title="Erasure.this.global.Type">tp1</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
          <span class="keyword">else</span> <a href="#236331" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">squashBoxed</a><span class="delimiter">(</span><a href="#236430" title="Erasure.this.global.Type">tp1</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#236427" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#111736" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#236421" title="Erasure.this.global.TypeRef">tp1</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
          <span class="keyword">else</span> <a href="../symtab/Types.scala.html#133458" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#236421" title="Erasure.this.global.TypeRef">tp1</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106216" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106716" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106344" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a><span class="delimiter">)</span> 
          <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> 
          <a href="../symtab/Definitions.scala.html#106596" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106228" title="=&gt; Erasure.this.global.Symbol">NothingClass</a><span class="delimiter">)</span>
          <a href="../symtab/Definitions.scala.html#106230" title="=&gt; Erasure.this.global.Symbol">RuntimeNothingClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236426" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106226" title="=&gt; Erasure.this.global.Symbol">NullClass</a><span class="delimiter">)</span>
          <a href="../symtab/Definitions.scala.html#106232" title="=&gt; Erasure.this.global.Symbol">RuntimeNullClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236536">pre1</a> = <a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236425" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="236537">args1</a> = <a href="#236427" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)List[Erasure.this.global.Type]">mapConserve</span> <a href="#236428" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">argApply</a>
          <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#236536" title="Erasure.this.global.Type">pre1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236425" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#236537" title="List[Erasure.this.global.Type]">args1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236427" title="List[Erasure.this.global.Type]">args</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#236421" title="Erasure.this.global.TypeRef">tp1</a>
          <span class="keyword">else</span> <a href="../symtab/Types.scala.html#133525" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="#236536" title="Erasure.this.global.Type">pre1</a>, <a href="#236426" title="Erasure.this.global.Symbol">sym</a>, <a href="#236537" title="List[Erasure.this.global.Type]">args1</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236559">tp1</a> @ MethodType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="236562">params</a>, <a title="Erasure.this.global.Type" id="236563">restpe</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="236564">params1</a> = <a href="../symtab/Types.scala.html#133461" title="(origSyms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">mapOver</a><span class="delimiter">(</span><a href="#236562" title="List[Erasure.this.global.Symbol]">params</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236565">restpe1</a> = <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236563" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#105483" title="=&gt; Erasure.this.global.Type">normalize</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236563" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#236564" title="List[Erasure.this.global.Symbol]">params1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236562" title="List[Erasure.this.global.Symbol]">params</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#236565" title="Erasure.this.global.Type">restpe1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236563" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#236559" title="Erasure.this.global.MethodType">tp1</a>
        <span class="keyword">else</span> <a href="../symtab/Types.scala.html#148762" title="(params: List[Erasure.this.global.Symbol], resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#236564" title="List[Erasure.this.global.Symbol]">params1</a>, <a href="#236565" title="Erasure.this.global.Type">restpe1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236582">tp1</a> @ RefinedType<span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="236585">parents</a>, <a title="Erasure.this.global.Scope" id="236586">decls</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="236587">parents1</a> = <a href="#236585" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)List[Erasure.this.global.Type]">mapConserve</span> <a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236587" title="List[Erasure.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236585" title="List[Erasure.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#236582" title="Erasure.this.global.RefinedType">tp1</a>
        <span class="keyword">else</span> <a href="../symtab/Types.scala.html#148576" title="(parents: List[Erasure.this.global.Type], decls: Erasure.this.global.Scope)Erasure.this.global.RefinedType">RefinedType</a><span class="delimiter">(</span><a href="#236587" title="List[Erasure.this.global.Type]">parents1</a>, <a href="#236586" title="Erasure.this.global.Scope">decls</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236602">t</a> @ ExistentialType<span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="236605">tparams</a>, <a title="Erasure.this.global.Type" id="236606">tpe</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="236607">tpe1</a> = <a href="#236332" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a><span class="delimiter">(</span><a href="#236606" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#236607" title="Erasure.this.global.Type">tpe1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#236606" title="Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="#236602" title="Erasure.this.global.ExistentialType">t</a>
        <span class="keyword">else</span> <a href="../symtab/Types.scala.html#149138" title="(quantified: List[Erasure.this.global.Symbol], underlying: Erasure.this.global.Type)Erasure.this.global.ExistentialType">ExistentialType</a><span class="delimiter">(</span><a href="#236605" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#236607" title="Erasure.this.global.Type">tpe1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Erasure.this.global.ClassInfoType" id="236608">tp1</a>: <a href="../symtab/Types.scala.html#67431" title="Erasure.this.global.ClassInfoType">ClassInfoType</a> =&gt;
        <a href="#236608" title="Erasure.this.global.ClassInfoType">tp1</a>
      <span class="keyword">case</span> <a title="Erasure.this.global.Type" id="236609">tp1</a> =&gt;
        <a href="../symtab/Types.scala.html#133458" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#236609" title="Erasure.this.global.Type">tp1</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The Java signature of type 'info', for symbol sym. The symbol is used to give the right return
   *  type for constructors.
   */</span>
  <span class="keyword">def</span> <a title="(sym0: Erasure.this.global.Symbol, info: Erasure.this.global.Type)Option[String]" id="111751">javaSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="236284">sym0</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="236285">info</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Option[String])Option[String]">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72342" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)String" id="499927">boxedSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="499930">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#499935" title="List[Erasure.this.global.Symbol] @scala.annotation.unchecked.uncheckedVariance" id="499941">jsig</a><span class="delimiter">(</span><a href="#499930" title="Erasure.this.global.Type" id="499938">tp</a>, primitiveOK = <a title="Boolean(false)" id="499939" class="keyword">false</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]" id="499928">hiBounds</a><span class="delimiter">(</span><a title="Erasure.this.global.TypeBounds" id="499942">bounds</a>: <a href="../symtab/Types.scala.html#67422" title="Erasure.this.global.TypeBounds">TypeBounds</a><span class="delimiter">)</span>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <a href="#499942" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#148506" title="=&gt; Erasure.this.global.Type">hi</a>.<a href="../symtab/Types.scala.html#105483" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="List[Erasure.this.global.Type]">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="499945">parents</a>, _<span class="delimiter">)</span> =&gt; <a href="#499945" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <a href="../typechecker/Infer.scala.html#105771" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">normalize</a>
      <span class="keyword">case</span> <a title="List[Erasure.this.global.Type]" id="499993">tp</a>                      =&gt; <a href="#499993" title="Erasure.this.global.Type">tp</a> <a href="#499994" title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">::</a> <span title="object Nil">Nil</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String" id="499929">jsig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="499931">tp0</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a>, <a title="List[Erasure.this.global.Symbol]" id="499935">existentiallyBound</a>: <span title="List[Erasure.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <span title="object Nil">Nil</span>, <a title="Boolean" id="499936">toplevel</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="Boolean" id="499937">primitiveOK</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="500000">tp</a> = <a href="#499931" title="Erasure.this.global.Type">tp0</a>.<a href="../symtab/Types.scala.html#105484" title="=&gt; Erasure.this.global.Type">dealias</a> 
      <a href="#500000" title="Erasure.this.global.Type">tp</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="String" id="500001">st</a>: <a href="../symtab/Types.scala.html#67394" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500001" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#148256" title="=&gt; Erasure.this.global.Type">supertype</a>, <a href="#499935" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#499936" title="Boolean">toplevel</a>, <a href="#499937" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">ExistentialType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="500004">tparams</a>, <a title="Erasure.this.global.Type" id="500005">tpe</a><span class="delimiter">)</span> =&gt;
          <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500005" title="Erasure.this.global.Type">tpe</a>, <a href="#500004" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#499936" title="Boolean">toplevel</a>, <a href="#499937" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">TypeRef</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="500009">pre</a>, <a title="Erasure.this.global.Symbol" id="500010">sym</a>, <a title="List[Erasure.this.global.Type]" id="500011">args</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)java.lang.String" id="500012">argSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="500015">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span> =
            <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#499935" title="List[Erasure.this.global.Symbol]">existentiallyBound</a> <span title="(elem: Any)Boolean">contains</span> <a href="#500015" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Erasure.this.global.TypeBounds" id="500016">bounds</a> = <a href="#500015" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105462" title="=&gt; Erasure.this.global.TypeBounds">bounds</a>
              <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106218" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#500016" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#148506" title="=&gt; Erasure.this.global.Type">hi</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;+&quot;)" class="string">&quot;+&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500016" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#148506" title="=&gt; Erasure.this.global.Type">hi</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#500016" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#148504" title="=&gt; Erasure.this.global.Type">lo</a> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../symtab/Definitions.scala.html#106226" title="=&gt; Erasure.this.global.Symbol">NullClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500016" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#148504" title="=&gt; Erasure.this.global.Type">lo</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500015" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="=&gt; String" id="500013">classSig</a>: <span title="String">String</span> = 
            <span title="java.lang.String(&quot;L&quot;)" class="string">&quot;L&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; java.lang.String)java.lang.String">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72350" title="=&gt; scala.tools.nsc.Phase">icodePhase</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; String">fullName</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="TypingTransformers.scala.html#110301" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#64951" title="object Erasure.this.global.genJVM">genJVM</a>.<a href="../backend/jvm/GenJVM.scala.html#112606" title="(sym: Erasure.this.global.genJVM.global.Symbol)java.lang.String">moduleSuffix</a><span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(x$1: Char, x$2: Char)java.lang.String">replace</span><span class="delimiter">(</span><span title="Char(\'.\')" class="char">'.'</span>, <span title="Char(\'/\')" class="char">'/'</span><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="=&gt; String" id="500014">classSigSuffix</a>: <span title="String">String</span> = 
            <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Erasure.this.global.Name">name</a>

          <span class="comment">// If args isEmpty, Array is being used as a higher-kinded type</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#500011" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#111736" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#500000" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="Char(\'[\')">ARRAY_TAG</span>.<span title="()java.lang.String">toString</span><span title="(x$1: Any)java.lang.String">+</span><span class="delimiter">(</span><a href="#500011" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <span class="delimiter">(</span><a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500058" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#111743" title="(sym: Erasure.this.global.Symbol, initialSymbol: Erasure.this.global.Symbol)Boolean">isTypeParameterInSig</a><span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>, <a href="#236284" title="Erasure.this.global.Symbol">sym0</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isAliasType</span>, <span title="java.lang.String(&quot;Unexpected alias type: &quot;)" class="string">&quot;Unexpected alias type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500010" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
            <span title="Char(\'T\')">TVAR_TAG</span>.<span title="()java.lang.String">toString</span><span title="(x$1: Any)java.lang.String">+</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Erasure.this.global.Name">name</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106216" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106716" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106344" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a><span class="delimiter">)</span> 
            <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> 
            <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106596" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106228" title="=&gt; Erasure.this.global.Symbol">NothingClass</a><span class="delimiter">)</span>
            <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106230" title="=&gt; Erasure.this.global.Symbol">RuntimeNothingClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106226" title="=&gt; Erasure.this.global.Symbol">NullClass</a><span class="delimiter">)</span>
            <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106232" title="=&gt; Erasure.this.global.Symbol">RuntimeNullClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#499937" title="Boolean">primitiveOK</a><span class="delimiter">)</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106596" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="../symtab/Definitions.scala.html#106694" title="(key: Erasure.this.global.Symbol)Char">abbrvTag</a><span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="500142">preRebound</a> = <a href="#500009" title="Erasure.this.global.Type">pre</a>.<a href="../symtab/Types.scala.html#105499" title="(clazz: Erasure.this.global.Symbol)Erasure.this.global.Type">baseType</a><span class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span class="comment">// #2585</span>
            <a href="../util/Tracer.scala.html#498531" title="(name: String, args: =&gt; Any)(body: =&gt; String)String">traceSig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sym.isClass&quot;)" class="string">&quot;sym.isClass&quot;</span>, <span title="(_1: List[Erasure.this.global.Symbol], _2: Erasure.this.global.Type, _3: List[Erasure.this.global.Symbol])(List[Erasure.this.global.Symbol], Erasure.this.global.Type, List[Erasure.this.global.Symbol])" class="delimiter">(</span><a href="#500010" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107544" title="=&gt; List[Erasure.this.global.Symbol]">ownerChain</a>, <a href="#500142" title="Erasure.this.global.Type">preRebound</a>, <a href="#236284" title="Erasure.this.global.Symbol">sym0</a>.<a href="../symtab/Symbols.scala.html#107545" title="=&gt; List[Erasure.this.global.Symbol]">enclClassChain</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#111744" title="(sig: String)String">dotCleanup</a><span class="delimiter">(</span>
                <span class="delimiter">(</span>
                  <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#111742" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a><span class="delimiter">(</span><a href="#500142" title="Erasure.this.global.Type">preRebound</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">val</span> <a title="String" id="500157">s</a> = <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500142" title="Erasure.this.global.Type">preRebound</a>, <a href="#499935" title="List[Erasure.this.global.Symbol]">existentiallyBound</a><span class="delimiter">)</span>
                    <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500157" title="String">s</a>.<span title="(x$1: Int)Char">charAt</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char(\'L\')" class="char">'L'</span><span class="delimiter">)</span> <a href="#500157" title="String">s</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#500157" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500014" title="=&gt; String">classSigSuffix</a>
                    <span class="keyword">else</span> <a href="#500013" title="=&gt; String">classSig</a>
                  <span class="delimiter">}</span>
                  <span class="keyword">else</span> <a href="#500013" title="=&gt; String">classSig</a>
                <span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span>
                  <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#500011" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span>
                  <span title="java.lang.String(&quot;&lt;&quot;)" class="string">&quot;&lt;&quot;</span><span title="(x$1: Any)java.lang.String">+</span><span class="delimiter">(</span><a href="#500011" title="List[Erasure.this.global.Type]">args</a> <span title="(f: Erasure.this.global.Type =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span> <a href="#500012" title="(tp: Erasure.this.global.Type)java.lang.String">argSig</a><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>
                <span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span>
                  <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
                <span class="delimiter">)</span>
              <span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500000" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>, <a href="#499935" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#499936" title="Boolean">toplevel</a>, <a href="#499937" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="java.lang.String">PolyType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="500215">tparams</a>, <a title="Erasure.this.global.Type" id="500216">restpe</a><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#500215" title="List[Erasure.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(bounds: List[Erasure.this.global.Type])java.lang.String" id="500217">boundSig</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="500222">bounds</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a href="#500224" title="(List[Erasure.this.global.Type], List[Erasure.this.global.Type])" class="delimiter">(</a><a href="#500223" title="List[Erasure.this.global.Type]" id="500224">isTrait</a>, <a href="#500223" title="List[Erasure.this.global.Type]" id="500225">isClass</a><span class="delimiter">)</span> = <a href="#500222" title="List[Erasure.this.global.Type]">bounds</a> <span title="(p: Erasure.this.global.Type =&gt; Boolean)(List[Erasure.this.global.Type], List[Erasure.this.global.Type])">partition</span> <span class="delimiter">(</span><a href="#500229" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#107480" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span>
            
            <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span>
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#500225" title="List[Erasure.this.global.Type]">isClass</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500225" title="List[Erasure.this.global.Type]">isClass</a>.<span title="=&gt; Erasure.this.global.Type">head</span><span class="delimiter">)</span>
            <span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span>
              <a href="#500224" title="List[Erasure.this.global.Type]">isTrait</a> <span title="(f: Erasure.this.global.Type =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span> <span class="delimiter">(</span><a title="Erasure.this.global.Type" id="500257">x</a> =&gt; <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500257" title="Erasure.this.global.Type">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="=&gt; String">mkString</span>
            <span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="(tsym: Erasure.this.global.Symbol)java.lang.String" id="500218">paramSig</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="500288">tsym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#500288" title="Erasure.this.global.Symbol">tsym</a>.<a href="../symtab/Symbols.scala.html#107548" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)java.lang.String">+</span> <a href="#500217" title="(bounds: List[Erasure.this.global.Type])java.lang.String">boundSig</a><span class="delimiter">(</span><a href="#499928" title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]">hiBounds</a><span class="delimiter">(</span><a href="#500288" title="Erasure.this.global.Symbol">tsym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105462" title="=&gt; Erasure.this.global.TypeBounds">bounds</a><span class="delimiter">)</span><span class="delimiter">)</span>
          
          <span class="keyword">val</span> <a title="String" id="500219">paramString</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#499936" title="Boolean">toplevel</a><span class="delimiter">)</span> <a href="#500215" title="List[Erasure.this.global.Symbol]">tparams</a> <span title="(f: Erasure.this.global.Symbol =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span> <a href="#500218" title="(tsym: Erasure.this.global.Symbol)java.lang.String">paramSig</a> <span title="(start: String, sep: String, end: String)String">mkString</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;&lt;&quot;)" class="string">&quot;&lt;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span><span class="delimiter">)</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
          <a href="../util/Tracer.scala.html#498531" title="(name: String, args: =&gt; Any)(body: =&gt; java.lang.String)java.lang.String">traceSig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;PolyType&quot;)" class="string">&quot;PolyType&quot;</span>, <span title="(_1: List[Erasure.this.global.Symbol], _2: Erasure.this.global.Type)(List[Erasure.this.global.Symbol], Erasure.this.global.Type)" class="delimiter">(</span><a href="#500215" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#500216" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#500219" title="String">paramString</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500216" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="java.lang.String">MethodType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="500352">params</a>, <a title="Erasure.this.global.Type" id="500353">restpe</a><span class="delimiter">)</span> =&gt;
          <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span><span title="(x$1: Any)java.lang.String">+</span><span class="delimiter">(</span><a href="#500352" title="List[Erasure.this.global.Symbol]">params</a> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Type,List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">map</span> <span class="delimiter">(</span><a href="#500370" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <span class="delimiter">(</span><a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500417" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span title="(x$1: Any)java.lang.String">+</span>
          <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#500353" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> <span title="(x: Boolean)Boolean">||</span> <a href="#236284" title="Erasure.this.global.Symbol">sym0</a>.<a href="../symtab/Symbols.scala.html#107475" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <span title="Char(\'V\')">VOID_TAG</span>.<span title="()java.lang.String">toString</span> <span class="keyword">else</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500353" title="Erasure.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">RefinedType</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="500459">parent</a> :: _, <a title="Erasure.this.global.Scope" id="500460">decls</a><span class="delimiter">)</span> =&gt;
          <a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500459" title="Erasure.this.global.Type">parent</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">ClassInfoType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="500464">parents</a>, _, _<span class="delimiter">)</span> =&gt;
          <span class="delimiter">(</span><a href="#500464" title="List[Erasure.this.global.Type]">parents</a> <span title="(f: Erasure.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],String,List[String]])List[String]">map</span> <span class="delimiter">(</span><a href="#499927" title="(tp: Erasure.this.global.Type)String">boxedSig</a><span class="delimiter">(</span><a href="#500481" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
        <span class="keyword">case</span> <span title="String">AnnotatedType</span><span class="delimiter">(</span>_, <a title="Erasure.this.global.Type" id="500515">atp</a>, _<span class="delimiter">)</span> =&gt;
          <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500515" title="Erasure.this.global.Type">atp</a>, <a href="#499935" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#499936" title="Boolean">toplevel</a>, <a href="#499937" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">BoundedWildcardType</span><span class="delimiter">(</span><a title="Erasure.this.global.TypeBounds" id="500517">bounds</a><span class="delimiter">)</span> =&gt;
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;something\'s wrong: &quot;)" class="string">&quot;something's wrong: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#236284" title="Erasure.this.global.Symbol">sym0</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#236284" title="Erasure.this.global.Symbol">sym0</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; has a bounded wildcard type&quot;)" class="string">&quot; has a bounded wildcard type&quot;</span><span class="delimiter">)</span>
          <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500517" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#148506" title="=&gt; Erasure.this.global.Type">hi</a>, <a href="#499935" title="List[Erasure.this.global.Symbol]">existentiallyBound</a>, <a href="#499936" title="Boolean">toplevel</a>, <a href="#499937" title="Boolean">primitiveOK</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">_</span> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="500520">etp</a> = <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500000" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#500520" title="Erasure.this.global.Type">etp</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#500000" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="Erasure.this.UnknownSig" class="keyword">new</span> <a href="#111752" title="Erasure.this.UnknownSig">UnknownSig</a>
          <span class="keyword">else</span> <a href="#499929" title="(tp0: Erasure.this.global.Type, existentiallyBound: List[Erasure.this.global.Symbol], toplevel: Boolean, primitiveOK: Boolean)String">jsig</a><span class="delimiter">(</span><a href="#500520" title="Erasure.this.global.Type">etp</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="../util/Tracer.scala.html#498531" title="(name: String, args: =&gt; Any)(body: =&gt; Option[String])Option[String]">traceSig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;javaSig&quot;)" class="string">&quot;javaSig&quot;</span>, <span title="(_1: Erasure.this.global.Symbol, _2: Erasure.this.global.Type)(Erasure.this.global.Symbol, Erasure.this.global.Type)" class="delimiter">(</span><a href="#236284" title="Erasure.this.global.Symbol">sym0</a>, <a href="#236285" title="Erasure.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#111742" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a><span class="delimiter">(</span><a href="#236285" title="Erasure.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#499935" title="List[Erasure.this.global.Symbol] @scala.annotation.unchecked.uncheckedVariance" id="500537">jsig</a><span class="delimiter">(</span><a href="#236285" title="Erasure.this.global.Type" id="500534">info</a>, toplevel = <a title="Boolean(true)" id="500535" class="keyword">true</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="None.type" id="500539">ex</a>: <a href="#111752" title="Erasure.this.UnknownSig">UnknownSig</a> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span title="object None">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class UnknownSig extends java.lang.Exception with ScalaObject" id="111752">UnknownSig</a> <a href="#111752" title="ScalaObject" class="keyword">extends</a> <span title="java.lang.Exception">Exception</span>

  <span class="comment">/** Type reference after erasure */</span>
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type" id="111753">erasedTypeRef</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="499061">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> =
    <a href="../symtab/Types.scala.html#67483" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#499061" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>, <a href="#499061" title="Erasure.this.global.Symbol">sym</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** Remove duplicate references to class Object in a list of parent classes */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]" id="111754">removeDoubleObject</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="499284">tps</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <a href="#499284" title="List[Erasure.this.global.Type]">tps</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#500557" title="List[Nothing]">List</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="List[Erasure.this.global.Type]" id="500579">tp</a> :: <a title="List[Erasure.this.global.Type]" id="500580">tps1</a> =&gt; 
      <span title="List[Erasure.this.global.Type]" class="keyword">if</span> <span class="delimiter">(</span><a href="#500579" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span> <a href="#500579" title="Erasure.this.global.Type">tp</a> <a href="#500586" title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">::</a> <a href="#500580" title="List[Erasure.this.global.Type]">tps1</a>.<span title="(p: Erasure.this.global.Type =&gt; Boolean)List[Erasure.this.global.Type]">filter</span><span class="delimiter">(</span><a href="#500590" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#500579" title="Erasure.this.global.Type">tp</a> <a href="#500601" title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">::</a> <a href="#111754" title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]">removeDoubleObject</a><span class="delimiter">(</span><a href="#500580" title="List[Erasure.this.global.Type]">tps1</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**  The symbol's erased info. This is the type's erasure, except for the following symbols:
   *
   *   - For $asInstanceOf      : [T]T
   *   - For $isInstanceOf      : [T]scala#Boolean
   *   - For class Array        : [T]C where C is the erased classinfo of the Array class.
   *   - For Array[T].&lt;init&gt;    : {scala#Int)Array[T]
   *   - For a type parameter   : A type bounds type consisting of the erasures of its bounds.
   */</span>
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol, tp: Erasure.this.global.Type)Erasure.this.global.Type" id="111755">transformInfo</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="500607">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="500608">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <span class="delimiter">{</span>
    <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106559" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a><span class="delimiter">)</span>
      <a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106557" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a> <span title="(x: Boolean)Boolean">||</span> <a href="#500607" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> 
      <a href="../symtab/Types.scala.html#148921" title="(typeParams: List[Erasure.this.global.Symbol], resultType: Erasure.this.global.Type)Erasure.this.global.PolyType">PolyType</a><span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105477" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a>, <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105468" title="=&gt; Erasure.this.global.Type">resultType</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isAbstractType</span><span class="delimiter">)</span> 
      <a href="../symtab/Types.scala.html#148501" title="(lo: Erasure.this.global.Type, hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">TypeBounds</a><span class="delimiter">(</span><a href="../symtab/Types.scala.html#67401" title="object Erasure.this.global.WildcardType">WildcardType</a>, <a href="../symtab/Types.scala.html#67401" title="object Erasure.this.global.WildcardType">WildcardType</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isTerm</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107473" title="=&gt; Boolean">isClassConstructor</a><span class="delimiter">)</span>
        <a href="#500608" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Erasure.this.global.MethodType">MethodType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Symbol]" id="500645">params</a>, TypeRef<span class="delimiter">(</span><a title="Erasure.this.global.Type" id="500649">pre</a>, <a title="Erasure.this.global.Symbol" id="500650">sym</a>, <a title="List[Erasure.this.global.Type]" id="500651">args</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="../symtab/Types.scala.html#148762" title="(params: List[Erasure.this.global.Symbol], resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="../symtab/Symbols.scala.html#67341" title="(syms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">cloneSymbols</a><span class="delimiter">(</span><a href="#500645" title="List[Erasure.this.global.Symbol]">params</a><span class="delimiter">)</span> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Symbol,List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">map</span> <span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="500703">p</a> =&gt; <a href="#500703" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#107566" title="(info: Erasure.this.global.Type)p.type">setInfo</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500703" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                       <a href="../symtab/Types.scala.html#67483" title="(pre: Erasure.this.global.Type, sym: Erasure.this.global.Symbol, args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500649" title="Erasure.this.global.Type">pre</a><span class="delimiter">)</span>, <a href="#500650" title="Erasure.this.global.Symbol">sym</a>, <a href="#500651" title="List[Erasure.this.global.Type]">args</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Erasure.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/StdNames.scala.html#67724" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115450" title="=&gt; Erasure.this.global.nme.NameType">apply</a><span class="delimiter">)</span> 
        <a href="#500608" title="Erasure.this.global.Type">tp</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Erasure.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/StdNames.scala.html#67724" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115600" title="=&gt; Erasure.this.global.nme.NameType">update</a><span class="delimiter">)</span>
        <span class="delimiter">(</span><a href="#500608" title="Erasure.this.global.Type">tp</a>: @<a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type @unchecked">unchecked</a><span class="delimiter">)</span> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Erasure.this.global.MethodType">MethodType</span><span class="delimiter">(</span><a href="#500748" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="500759">index</a>, <a title="Erasure.this.global.Symbol" id="500760">tvar</a><span class="delimiter">)</span>, <a title="Erasure.this.global.Type" id="500761">restpe</a><span class="delimiter">)</span> =&gt;
            <a href="../symtab/Types.scala.html#148762" title="(params: List[Erasure.this.global.Symbol], resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a><span class="delimiter">(</span><span title="(xs: Erasure.this.global.Symbol*)List[Erasure.this.global.Symbol]">List</span><span class="delimiter">(</span><a href="#500759" title="Erasure.this.global.Symbol">index</a>.<a href="../symtab/Symbols.scala.html#107594" title="=&gt; Erasure.this.global.Symbol">cloneSymbol</a>.<a href="../symtab/Symbols.scala.html#107566" title="(info: Erasure.this.global.Type)Erasure.this.global.Symbol">setInfo</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500759" title="Erasure.this.global.Symbol">index</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#500760" title="Erasure.this.global.Symbol">tvar</a><span class="delimiter">)</span>,
                       <a href="#111753" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500608" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span>
      <a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Erasure.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#500607" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#500607" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106397" title="=&gt; Erasure.this.global.Symbol">Array_update</a>.<a href="../symtab/Symbols.scala.html#107580" title="=&gt; List[List[Erasure.this.global.Symbol]]">paramss</a>.<span title="(n: Int)Erasure.this.global.Symbol">head</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// special case for Array.update: the non-erased type remains, i.e. (Int,A)Unit</span>
      <span class="comment">// since the erasure type map gets applied to every symbol, we have to catch the</span>
      <span class="comment">// symbol here</span>
      <a href="#500608" title="Erasure.this.global.Type">tp</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
<span class="comment">/*
      val erased = 
        if (sym.isGetter &amp;&amp; sym.tpe.isInstanceOf[MethodType]) 
          erasure mapOver sym.tpe // for getters, unlike for normal methods, always convert Unit to BoxedUnit.
        else 
          erasure(tp)
*/</span>
      <a href="AddInterfaces.scala.html#111713" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">transformMixinInfo</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#500608" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="Erasure.this.global.TypeMap" id="111756">deconstMap</a> = <a href="#498534" title="Erasure.this.global.TypeMap" class="keyword">new</a> <a href="../symtab/Types.scala.html#67514" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="498534">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="498536">apply</a><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="498537">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a> = <a href="#498537" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">PolyType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt; <a href="../symtab/Types.scala.html#133458" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#498537" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">MethodType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt; <a href="../symtab/Types.scala.html#133458" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#498537" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span class="comment">// nullarymethod was eliminated during uncurry</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Type">_</span> =&gt; <a href="#498537" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#105459" title="=&gt; Erasure.this.global.Type">deconst</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">// Methods on Any/Object which we rewrite here while we still know what</span>
  <span class="comment">// is a primitive and what arrived boxed.</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="111759">interceptedMethods</a> = <span title="[A](elems: A*)scala.collection.immutable.Set[A]">Set</span><span title="(elems: Erasure.this.global.Symbol*)scala.collection.immutable.Set[Erasure.this.global.Symbol]" class="delimiter">[</span><a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106536" title="=&gt; Erasure.this.global.Symbol">Any_##</a>, <a href="../symtab/Definitions.scala.html#106551" title="=&gt; Erasure.this.global.Symbol">Object_##</a>, <a href="../symtab/Definitions.scala.html#106527" title="=&gt; Erasure.this.global.Symbol">Any_getClass</a><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[Erasure.this.global.Symbol])scala.collection.immutable.Set[Erasure.this.global.Symbol]">++</span> <span class="delimiter">(</span>
    <span class="comment">// Each value class has its own getClass for ultra-precise class object typing.</span>
    <a href="../symtab/Definitions.scala.html#106739" title="=&gt; List[Erasure.this.global.Symbol]">ScalaValueClasses</a> <span title="(f: Erasure.this.global.Symbol =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Symbol],Erasure.this.global.Symbol,List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#498637" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../symtab/Types.scala.html#105495" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">member</a> <a href="../symtab/StdNames.scala.html#67724" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115665" title="=&gt; Erasure.this.global.TermName">getClass_</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

<span class="comment">// -------- erasure on trees ------------------------------------------</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: Erasure.this.Context)Erasure.this.Eraser" id="111760">newTyper</a><span class="delimiter">(</span><a title="Erasure.this.Context" id="500805">context</a>: <a href="../typechecker/Contexts.scala.html#105654" title="Erasure.this.Context">Context</a><span class="delimiter">)</span> = <span title="Erasure.this.Eraser" class="keyword">new</span> <a href="#111761" title="Erasure.this.Eraser">Eraser</a><span class="delimiter">(</span><a href="#500805" title="Erasure.this.Context">context</a><span class="delimiter">)</span>

  <span class="comment">/** An extractor object for boxed expressions
  object Boxed {
    def unapply(tree: Tree): Option[Tree] = tree match {
      case LabelDef(name, params, Boxed(rhs)) =&gt;
        Some(treeCopy.LabelDef(tree, name, params, rhs) setType rhs.tpe)
      case Select(_, _) if tree.symbol == BoxedUnit_UNIT =&gt;
        Some(Literal(()) setPos tree.pos setType UnitClass.tpe)
      case Block(List(unboxed), ret @ Select(_, _)) if ret.symbol == BoxedUnit_UNIT =&gt;
        Some(if (unboxed.tpe.typeSymbol == UnitClass) tree
             else Block(List(unboxed), Literal(()) setPos tree.pos setType UnitClass.tpe))
      case Apply(fn, List(unboxed)) if isBox(fn.symbol) =&gt;
        Some(unboxed)
      case _ =&gt;
        None
    }
  }
   */</span>

  <span class="comment">/** The modifier typer which retypes with erased types. */</span>
  <span class="keyword">class</span> <a title="class Eraser extends Erasure.this.Typer with ScalaObject" id="111761">Eraser</a><a href="#111761" title="ScalaObject" class="delimiter">(</a><a title="Erasure.this.Context" id="500821">context</a>: <a href="../typechecker/Contexts.scala.html#105654" title="Erasure.this.Context">Context</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../typechecker/Typers.scala.html#105749" title="Erasure.this.Typer">Typer</a><span class="delimiter">(</span><a href="#500821" title="Erasure.this.Context">context</a><span class="delimiter">)</span> <span class="delimiter">{</span>  
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cls: Erasure.this.global.Symbol)Boolean" id="500812">safeToRemoveUnbox</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="500825">cls</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = 
      <span class="delimiter">(</span><a href="#500825" title="Erasure.this.global.Symbol">cls</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#67699" title="object Erasure.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106226" title="=&gt; Erasure.this.global.Symbol">NullClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="../symtab/Definitions.scala.html#106664" title="(sym: Erasure.this.global.Symbol)Boolean">isBoxedValueClass</a><span class="delimiter">(</span><a href="#500825" title="Erasure.this.global.Symbol">cls</a><span class="delimiter">)</span>
      
    <span class="comment">/** Box `tree' of unboxed type */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="500813">box</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="500832">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="#500832" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.LabelDef">LabelDef</span><span class="delimiter">(</span><a title="Erasure.this.global.TermName" id="500842">name</a>, <a title="List[Erasure.this.global.Ident]" id="500843">params</a>, <a title="Erasure.this.global.Tree" id="500844">rhs</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="500845">rhs1</a> = <a href="#500813" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a><span class="delimiter">(</span><a href="#500844" title="Erasure.this.global.Tree">rhs</a><span class="delimiter">)</span>
        <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162524" title="(tree: Erasure.this.global.Tree, name: Erasure.this.global.Name, params: List[Erasure.this.global.Ident], rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#500832" title="Erasure.this.global.Tree">tree</a>, <a href="#500842" title="Erasure.this.global.TermName">name</a>, <a href="#500843" title="List[Erasure.this.global.Ident]">params</a>, <a href="#500845" title="Erasure.this.global.Tree">rhs1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">setType</span> <a href="#500845" title="Erasure.this.global.Tree">rhs1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
        <a href="../typechecker/Typers.scala.html#106064" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#500832" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#500832" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../symtab/Definitions.scala.html#106718" title="Erasure.this.global.Tree">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../ast/Trees.scala.html#67784" title="object Erasure.this.global.treeInfo">treeInfo</a> <a href="../ast/TreeInfo.scala.html#153033" title="(tree: Erasure.this.global.treeInfo.trees.Tree)Boolean">isPureExpr</a> <a href="#500832" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#114003" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106600" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#113998" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#500832" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#114003" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106600" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../symtab/Definitions.scala.html#106228" title="Erasure.this.global.Tree">NothingClass</a> =&gt; <a href="#500832" title="Erasure.this.global.Tree">tree</a> <span class="comment">// a non-terminating expression doesn't need boxing</span>
          <span class="keyword">case</span> <a title="Erasure.this.global.Tree" id="500869">x</a>          =&gt;
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#500869" title="Erasure.this.global.Symbol">x</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
            <a href="#500832" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="comment">/** Can't always remove a Box(Unbox(x)) combination because the process of boxing x
               *  may lead to throwing an exception. 
               *  
               *  This is important for specialization: calls to the super constructor should not box/unbox specialized
               *  fields (see TupleX). (ID)
               */</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="500878">boxFun</a>, <a href="#500880" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="500902">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../symtab/Definitions.scala.html#106651" title="(elem: Erasure.this.global.Symbol)Boolean">isUnbox</a><span class="delimiter">(</span><a href="#500832" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#500812" title="(cls: Erasure.this.global.Symbol)Boolean">safeToRemoveUnbox</a><span class="delimiter">(</span><a href="#500902" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> =&gt;
                <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;boxing an unbox: &quot;)" class="string">&quot;boxing an unbox: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500832" title="Erasure.this.global.Tree">tree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; and replying with &quot;)" class="string">&quot; and replying with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500902" title="Erasure.this.global.Tree">arg</a><span class="delimiter">)</span>
                <a href="#500902" title="Erasure.this.global.Tree">arg</a>
              <span class="keyword">case</span> <span title="Erasure.this.global.Apply">_</span> =&gt;
                <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#114003" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#114008" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: Erasure.this.global.Tree)Erasure.this.CODE.TreeMethods" class="delimiter">(</a><a href="../symtab/Definitions.scala.html#106706" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">boxMethod</a><span class="delimiter">(</span><a href="#500869" title="Erasure.this.global.Symbol">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#149439" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">APPLY</a> <a href="#500832" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <span class="delimiter">(</span><a href="#500832" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Unbox `tree` of boxed type to expected type `pt`.
     *
     *  @param tree the given tree
     *  @param pt   the expected type.
     *  @return     the unboxed tree
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="500814">unbox</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="500960">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Type" id="500961">pt</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="#500960" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
<span class="comment">/*
      case Boxed(unboxed) =&gt;
        println(&quot;unbox shorten: &quot;+tree) // this never seems to kick in during build and test; therefore disabled.
        adaptToType(unboxed, pt)
 */</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.LabelDef">LabelDef</span><span class="delimiter">(</span><a title="Erasure.this.global.TermName" id="500968">name</a>, <a title="List[Erasure.this.global.Ident]" id="500969">params</a>, <a title="Erasure.this.global.Tree" id="500970">rhs</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="500971">rhs1</a> = <a href="#500814" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#500970" title="Erasure.this.global.Tree">rhs</a>, <a href="#500961" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
        <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162524" title="(tree: Erasure.this.global.Tree, name: Erasure.this.global.Name, params: List[Erasure.this.global.Ident], rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#500960" title="Erasure.this.global.Tree">tree</a>, <a href="#500968" title="Erasure.this.global.TermName">name</a>, <a href="#500969" title="List[Erasure.this.global.Ident]">params</a>, <a href="#500971" title="Erasure.this.global.Tree">rhs1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">setType</span> <a href="#500971" title="Erasure.this.global.Tree">rhs1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>
      <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
        <a href="../typechecker/Typers.scala.html#106064" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#500960" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#500961" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../symtab/Definitions.scala.html#106718" title="Erasure.this.global.Tree">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../ast/Trees.scala.html#67784" title="object Erasure.this.global.treeInfo">treeInfo</a> <a href="../ast/TreeInfo.scala.html#153033" title="(tree: Erasure.this.global.treeInfo.trees.Tree)Boolean">isPureExpr</a> <a href="#500960" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#113953" title="=&gt; Erasure.this.global.Literal">UNIT</a>
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#113998" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#500960" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#113953" title="=&gt; Erasure.this.global.Literal">UNIT</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Erasure.this.global.Apply" id="500975">x</a>          =&gt;
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#500975" title="Erasure.this.global.Symbol">x</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
            <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#114003" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#114008" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: Erasure.this.global.Tree)Erasure.this.CODE.TreeMethods" class="delimiter">(</a><a href="../symtab/Definitions.scala.html#106708" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">unboxMethod</a><span class="delimiter">(</span><a href="#500961" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#149439" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">APPLY</a> <a href="#500960" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="#500961" title="Erasure.this.global.Type">pt</a>
        <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Generate a synthetic cast operation from tree.tpe to pt.
     *  @pre pt eq pt.normalize
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="500815">cast</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501013">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Type" id="501014">pt</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501014" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// See SI-4731 for one example of how this occurs.</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Attempted to cast to Unit: &quot;)" class="string">&quot;Attempted to cast to Unit: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501013" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
        <a href="#501013" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; tree.type">duplicate</span> <span title="(tp: Erasure.this.global.Type)tree.type">setType</span> <a href="#501014" title="Erasure.this.global.Type">pt</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#114008" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: Erasure.this.global.Tree)Erasure.this.CODE.TreeMethods">tree</a> <a href="../ast/TreeDSL.scala.html#149448" title="(tpe: Erasure.this.global.Type)Erasure.this.global.Tree">AS_ATTR</a> <a href="#501014" title="Erasure.this.global.Type">pt</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="500816">isUnboxedValueMember</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="501027">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#501027" title="Erasure.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Erasure.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501027" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>

    <span class="comment">/** Adapt `tree` to expected type `pt`.
     *
     *  @param tree the given tree
     *  @param pt   the expected type
     *  @return     the adapted tree
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="500817">adaptToType</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501034">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Type" id="501035">pt</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#501035" title="Erasure.this.global.Type">pt</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Types.scala.html#67401" title="object Erasure.this.global.WildcardType">WildcardType</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;adapting &quot;)" class="string">&quot;adapting &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501034" title="Erasure.this.global.Tree">tree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>  <a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105463" title="=&gt; List[Erasure.this.global.Type]">parents</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span><span class="comment">//debug</span>
      <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
        <a href="#501034" title="Erasure.this.global.Tree">tree</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501035" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#500817" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#500813" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>, <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../symtab/Types.scala.html#67448" title="Erasure.this.global.MethodType">MethodType</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105475" title="=&gt; List[Erasure.this.global.Symbol]">params</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107514" title="=&gt; Boolean">isStable</a>, <span title="java.lang.String(&quot;adapt &quot;)" class="string">&quot;adapt &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#501034" title="Erasure.this.global.Tree">tree</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
        <a href="#500817" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105468" title="=&gt; Erasure.this.global.Type">resultType</a>, <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501035" title="Erasure.this.global.Type">pt</a> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span> 
        <a href="#500815" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>, <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501035" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#500817" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#500814" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>, <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>, <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="keyword">else</span> 
        <a href="#500815" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#501034" title="Erasure.this.global.Tree">tree</a>, <a href="#501035" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="comment">// @PP 1/25/2011: This is less inaccurate than it was (I removed</span>
    <span class="comment">// BoxedAnyArray, asInstanceOf$erased, and other long ago eliminated symbols)</span>
    <span class="comment">// but I do not think it yet describes the code beneath it.</span>

    <span class="comment">/**  Replace member references as follows:
     * 
     *   - `x == y` for == in class Any becomes `x equals y` with equals in class Object.
     *   - `x != y` for != in class Any becomes `!(x equals y)` with equals in class Object.
     *   - x.asInstanceOf[T] becomes x.$asInstanceOf[T]
     *   - x.isInstanceOf[T] becomes x.$isInstanceOf[T]
     *   - x.m where m is some other member of Any becomes x.m where m is a member of class Object.
     *   - x.m where x has unboxed value type T and m is not a directly translated member of T becomes T.box(x).m
     *   - x.m where x is a reference type and m is a directly translated member of value type T becomes x.TValue().m
     *   - All forms of x.m where x is a boxed type and m is a member of an unboxed class become
     *     x.m where m is the corresponding member of the boxed class.
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="500818">adaptMember</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501067">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="comment">//Console.println(&quot;adaptMember: &quot; + tree);</span>
      <a href="#501067" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span>TypeApply<span class="delimiter">(</span><a title="Erasure.this.global.Select" id="501073">sel</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501080">qual</a>, <a title="Erasure.this.global.Name" id="501081">name</a><span class="delimiter">)</span>, <a href="#501083" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501094">targ</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#501096" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106533" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="501112">qual1</a> = <a href="../typechecker/Typers.scala.html#106066" title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type)Erasure.this.global.Tree">typedQualifier</a><span class="delimiter">(</span><a href="#501080" title="Erasure.this.global.Tree">qual</a>, <span title="Int(0)">NOmode</span>, <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <span class="comment">// need to have an expected type, see #3037</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="501113">qualClass</a> = <a href="#501112" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="501114">targClass</a> = <a href="#501094" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
<span class="comment">/*
          if (isNumericValueClass(qualClass) &amp;&amp; isNumericValueClass(targClass))
            // convert numeric type casts
            atPos(tree.pos)(Apply(Select(qual1, &quot;to&quot; + targClass.name), List()))
          else 
*/</span>
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501114" title="Erasure.this.global.Symbol">targClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#500814" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#501112" title="Erasure.this.global.Tree">qual1</a>, <a href="#501094" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#501067" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501131">qual</a>, <a title="Erasure.this.global.Name" id="501132">name</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#501132" title="Erasure.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/StdNames.scala.html#67724" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115416" title="=&gt; Erasure.this.global.nme.NameType">CONSTRUCTOR</a><span class="delimiter">)</span> =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Symbols.scala.html#67339" title="object Erasure.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
            <a href="#501067" title="Erasure.this.global.Tree">tree</a>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106533" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a><span class="delimiter">)</span>
            <a href="#500818" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501131" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#106559" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106530" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a><span class="delimiter">)</span>
            <a href="#500818" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501131" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#106557" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106216" title="=&gt; Erasure.this.global.Symbol">AnyClass</a><span class="delimiter">)</span>
            <a href="#500818" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501131" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#106637" title="(owner: Erasure.this.global.Symbol, name: Erasure.this.global.Name)Erasure.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106220" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>, <a href="#501132" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="501231">qual1</a> = <a href="../typechecker/Typers.scala.html#106068" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a><span class="delimiter">(</span><a href="#501131" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#500816" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#501231" title="Erasure.this.global.Tree">qual1</a> = <a href="#500813" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#500816" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#501231" title="Erasure.this.global.Tree">qual1</a> = <a href="#500814" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>, <a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="(sym: Erasure.this.global.Symbol)Unit">symbol</span> = <a href="../symtab/Symbols.scala.html#67339" title="object Erasure.this.global.NoSymbol">NoSymbol</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../symtab/Types.scala.html#67448" title="Erasure.this.global.MethodType">MethodType</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105475" title="=&gt; List[Erasure.this.global.Symbol]">params</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107514" title="=&gt; Boolean">isStable</a>, <a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span>;
              <a href="#501231" title="Erasure.this.global.Tree">qual1</a> = <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Position">pos</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setType</span> <a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105468" title="=&gt; Erasure.this.global.Type">resultType</a>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="Erasure.this.global.Super">Super</span><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <a href="../symtab/Symbols.scala.html#107589" title="(that: Erasure.this.global.Symbol)Boolean">isSubClass</a> <a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span>
              <a href="#501231" title="Erasure.this.global.Tree">qual1</a> = <a href="#500815" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#501231" title="Erasure.this.global.Tree">qual1</a>, <a href="#501067" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162550" title="(tree: Erasure.this.global.Tree, qualifier: Erasure.this.global.Tree, selector: Erasure.this.global.Name)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501067" title="Erasure.this.global.Tree">tree</a>, <a href="#501231" title="Erasure.this.global.Tree">qual1</a>, <a href="#501132" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Select">SelectFromArray</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501279">qual</a>, <a title="Erasure.this.global.Name" id="501280">name</a>, <a title="Erasure.this.global.Type" id="501281">erasure</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="501282">qual1</a> = <a href="../typechecker/Typers.scala.html#106068" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a><span class="delimiter">(</span><a href="#501279" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#501282" title="Erasure.this.global.Tree">qual1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#501281" title="Erasure.this.global.Type">erasure</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#501282" title="Erasure.this.global.Tree">qual1</a> = <a href="#500815" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a><span class="delimiter">(</span><a href="#501282" title="Erasure.this.global.Tree">qual1</a>, <a href="#501281" title="Erasure.this.global.Type">erasure</a><span class="delimiter">)</span>
          <a href="TypingTransformers.scala.html#110301" title="(qualifier: Erasure.this.global.Tree, name: Erasure.this.global.Name)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501282" title="Erasure.this.global.Tree">qual1</a>, <a href="#501280" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span> <span title="(tree: Erasure.this.global.Tree)Erasure.this.global.Select">copyAttrs</span> <a href="#501067" title="Erasure.this.global.Tree">tree</a> 
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
          <a href="#501067" title="Erasure.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** A replacement for the standard typer's adapt method.
     */</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type, original: Erasure.this.global.Tree)Erasure.this.global.Tree" id="500819">adapt</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501311">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Int" id="501312">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="501313">pt</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a>, <a title="Erasure.this.global.Tree" id="501326">original</a>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="TypingTransformers.scala.html#110301" title="object Erasure.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> =
      <a href="#500817" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#501311" title="Erasure.this.global.Tree">tree</a>, <a href="#501313" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>

    <span class="comment">/** A replacement for the standard typer's `typed1' method.
     */</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="500820">typed1</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501327">tree</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Int" id="501328">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="501329">pt</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="501338">tree1</a> = <span class="keyword">try</span> <span class="delimiter">{</span> 
        <a href="#111761" title="Erasure.this.Eraser" class="keyword">super</a>.<a href="../typechecker/Typers.scala.html#106059" title="(tree: Erasure.this.global.Tree, mode: Int, pt: Erasure.this.global.Type)Erasure.this.global.Tree">typed1</a><span class="delimiter">(</span><a href="#500818" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a><span class="delimiter">(</span><a href="#501327" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>, <a href="#501328" title="Int">mode</a>, <a href="#501329" title="Erasure.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="501345">er</a>: <a href="../symtab/Types.scala.html#67669" title="Erasure.this.global.TypeError">TypeError</a> =&gt;
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;exception when typing &quot;)" class="string">&quot;exception when typing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501327" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#501345" title="Erasure.this.global.TypeError">er</a>.<a href="../symtab/Types.scala.html#313955" title="=&gt; String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in file &quot;)" class="string">&quot; in file &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500821" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#106755" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107643" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a><span class="delimiter">)</span>
          <a href="#501345" title="Erasure.this.global.TypeError">er</a>.<span title="()Unit">printStackTrace</span>
          <a href="../symtab/SymbolTable.scala.html#64791" title="()Nothing">abort</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Nothing" id="501354">ex</a>: <span title="Exception">Exception</span> =&gt;
          <span class="comment">//if (settings.debug.value) </span>
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;exception when typing &quot;)" class="string">&quot;exception when typing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501327" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>;
          <span title="Nothing" class="keyword">throw</span> <a href="#501354" title="Exception">ex</a>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef" id="501339">adaptCase</a><span class="delimiter">(</span><a title="Erasure.this.global.CaseDef" id="501357">cdef</a>: <span title="Erasure.this.global.CaseDef">CaseDef</span><span class="delimiter">)</span>: <span title="Erasure.this.global.CaseDef">CaseDef</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="501358">body1</a> = <a href="#500817" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#501357" title="Erasure.this.global.CaseDef">cdef</a>.<span title="=&gt; Erasure.this.global.Tree">body</span>, <a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
        <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162529" title="(tree: Erasure.this.global.Tree, pat: Erasure.this.global.Tree, guard: Erasure.this.global.Tree, body: Erasure.this.global.Tree)Erasure.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#501357" title="Erasure.this.global.CaseDef">cdef</a>, <a href="#501357" title="Erasure.this.global.CaseDef">cdef</a>.<span title="=&gt; Erasure.this.global.Tree">pat</span>, <a href="#501357" title="Erasure.this.global.CaseDef">cdef</a>.<span title="=&gt; Erasure.this.global.Tree">guard</span>, <a href="#501358" title="Erasure.this.global.Tree">body1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.CaseDef">setType</span> <a href="#501358" title="Erasure.this.global.Tree">body1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree" id="501340">adaptBranch</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501370">branch</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> =
        <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501370" title="Erasure.this.global.Tree">branch</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="TypingTransformers.scala.html#110301" title="object Erasure.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span> <a href="#501370" title="Erasure.this.global.Tree">branch</a> <span class="keyword">else</span> <a href="#500817" title="(tree: Erasure.this.global.Tree, pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#501370" title="Erasure.this.global.Tree">branch</a>, <a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>;

      <a href="#501338" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.If">If</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501378">cond</a>, <a title="Erasure.this.global.Tree" id="501379">thenp</a>, <a title="Erasure.this.global.Tree" id="501380">elsep</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162538" title="(tree: Erasure.this.global.Tree, cond: Erasure.this.global.Tree, thenp: Erasure.this.global.Tree, elsep: Erasure.this.global.Tree)Erasure.this.global.If">If</a><span class="delimiter">(</span><a href="#501338" title="Erasure.this.global.Tree">tree1</a>, <a href="#501378" title="Erasure.this.global.Tree">cond</a>, <a href="#501340" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a><span class="delimiter">(</span><a href="#501379" title="Erasure.this.global.Tree">thenp</a><span class="delimiter">)</span>, <a href="#501340" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a><span class="delimiter">(</span><a href="#501380" title="Erasure.this.global.Tree">elsep</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Match">Match</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501391">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="501392">cases</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162539" title="(tree: Erasure.this.global.Tree, selector: Erasure.this.global.Tree, cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a><span class="delimiter">(</span><a href="#501338" title="Erasure.this.global.Tree">tree1</a>, <a href="#501391" title="Erasure.this.global.Tree">selector</a>, <a href="#501392" title="List[Erasure.this.global.CaseDef]">cases</a> <span title="(f: Erasure.this.global.CaseDef =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.CaseDef],Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">map</span> <a href="#501339" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Try">Try</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501457">block</a>, <a title="List[Erasure.this.global.CaseDef]" id="501458">catches</a>, <a title="Erasure.this.global.Tree" id="501459">finalizer</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#67786" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162541" title="(tree: Erasure.this.global.Tree, block: Erasure.this.global.Tree, catches: List[Erasure.this.global.CaseDef], finalizer: Erasure.this.global.Tree)Erasure.this.global.Try">Try</a><span class="delimiter">(</span><a href="#501338" title="Erasure.this.global.Tree">tree1</a>, <a href="#501340" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a><span class="delimiter">(</span><a href="#501457" title="Erasure.this.global.Tree">block</a><span class="delimiter">)</span>, <a href="#501458" title="List[Erasure.this.global.CaseDef]">catches</a> <span title="(f: Erasure.this.global.CaseDef =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.CaseDef],Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">map</span> <a href="#501339" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a>, <a href="#501459" title="Erasure.this.global.Tree">finalizer</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Ident</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | Select<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<span title="=&gt; Boolean">isOverloaded</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="501520">first</a> = <a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107591" title="=&gt; List[Erasure.this.global.Symbol]">alternatives</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="501521">sym1</a> = <a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107592" title="(cond: Erasure.this.global.Symbol =&gt; Boolean)Erasure.this.global.Symbol">filter</a> <span class="delimiter">{</span> 
              <a title="Erasure.this.global.Symbol" id="501525">alt</a> =&gt; <a href="#501525" title="Erasure.this.global.Symbol">alt</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#501520" title="Erasure.this.global.Symbol">first</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#501520" title="Erasure.this.global.Symbol">first</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../symtab/Types.scala.html#105523" title="(that: Erasure.this.global.Type)Boolean">looselyMatches</a> <a href="#501525" title="Erasure.this.global.Symbol">alt</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#501327" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#501521" title="Erasure.this.global.Symbol">sym1</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="(sym: Erasure.this.global.Symbol)Unit">symbol</span> = <a href="#501521" title="Erasure.this.global.Symbol">sym1</a>
              <a href="#501338" title="Erasure.this.global.Tree">tree1</a>.<span title="(t: Erasure.this.global.Type)Unit">tpe</span> = <a href="#501521" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#501338" title="Erasure.this.global.Tree">tree1</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
          <a href="#501338" title="Erasure.this.global.Tree">tree1</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The erasure transformer */</span>
  <span class="keyword">class</span> <a title="class ErasureTransformer extends Erasure.this.global.Transformer with ScalaObject" id="111762">ErasureTransformer</a><a href="#111762" title="ScalaObject" class="delimiter">(</a><a title="Erasure.this.global.CompilationUnit" id="498699">unit</a>: <a href="../CompilationUnits.scala.html#67953" title="Erasure.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#67836" title="Erasure.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
    <span class="comment">/** Emit an error if there is a double definition. This can happen if:
     * 
     *  - A template defines two members with the same name and erased type.
     *  - A template defines and inherits two members `m` with different types,
     *    but their erased types are the same.
     *  - A template inherits two members `m` with different types,
     *    but their erased types are the same.
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(root: Erasure.this.global.Symbol)Unit" id="498693">checkNoDoubleDefs</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502357">root</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Unit" id="502449">doubleDefError</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502454">sym1</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="502455">sym2</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// the .toString must also be computed at the earlier phase</span>
        <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="502456">atRefc</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="502458">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="502461">op</a>: =&gt; T<span class="delimiter">)</span> = <a href="../symtab/SymbolTable.scala.html#64815" title="[T](ph: scala.tools.nsc.Phase)(op: =&gt; T)T">atPhase</a><span title="(ph: scala.tools.nsc.Phase)(op: =&gt; T)T" class="delimiter">[</span><a href="#502458" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72336" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#502461" title="=&gt; T">op</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="502459">tpe1</a> = <a href="#502456" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a><span class="delimiter">(</span><a href="#502357" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#107600" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#105502" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#502454" title="Erasure.this.global.Symbol">sym1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="502460">tpe2</a> = <a href="#502456" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a><span class="delimiter">(</span><a href="#502357" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#107600" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#105502" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#502455" title="Erasure.this.global.Symbol">sym2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#502459" title="Erasure.this.global.Type">tpe1</a>.<a href="../symtab/Types.scala.html#105486" title="=&gt; Boolean">isErroneous</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#502460" title="Erasure.this.global.Type">tpe2</a>.<a href="../symtab/Types.scala.html#105486" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span>
          <a href="#498699" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#96451" title="(pos: Erasure.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span>
          <span title="Erasure.this.global.Position" class="keyword">if</span> <span class="delimiter">(</span><a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502357" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Erasure.this.global.Position">pos</a> <span class="keyword">else</span> <a href="#502357" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Erasure.this.global.Position">pos</a>,
          <span class="delimiter">(</span><span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502455" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;double definition:\012&quot;)" class="string">&quot;double definition:\n&quot;</span>
           <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502357" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;name clash between defined and inherited member:\012&quot;)" class="string">&quot;name clash between defined and inherited member:\n&quot;</span>
           <span class="keyword">else</span> <span title="java.lang.String(&quot;name clash between inherited members:\012&quot;)" class="string">&quot;name clash between inherited members:\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
          <a href="#502454" title="Erasure.this.global.Symbol">sym1</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502456" title="(op: =&gt; String)String">atRefc</a><span class="delimiter">(</span><a href="#502459" title="Erasure.this.global.Type">tpe1</a>.<span title="()String">toString</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
            <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502357" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107659" title="=&gt; java.lang.String">locationString</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; and\012&quot;)" class="string">&quot; and\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
          <a href="#502455" title="Erasure.this.global.Symbol">sym2</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502456" title="(op: =&gt; String)String">atRefc</a><span class="delimiter">(</span><a href="#502460" title="Erasure.this.global.Type">tpe2</a>.<span title="()String">toString</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
            <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#502455" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502357" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span title="java.lang.String(&quot; at line &quot;)" class="string">&quot; at line &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#502455" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Erasure.this.global.Position">pos</a><span class="delimiter">)</span>.<a href="../util/Position.scala.html#97235" title="=&gt; Int">line</a> <span class="keyword">else</span> <a href="#502455" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#107659" title="=&gt; java.lang.String">locationString</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
          <span title="java.lang.String(&quot;\012have same type&quot;)" class="string">&quot;\nhave same type&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
          <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#502456" title="(op: =&gt; Boolean)Boolean">atRefc</a><span class="delimiter">(</span><a href="#502459" title="Erasure.this.global.Type">tpe1</a> <a href="../symtab/Types.scala.html#105520" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#502460" title="Erasure.this.global.Type">tpe2</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot; after erasure: &quot;)" class="string">&quot; after erasure: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#502454" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107566" title="(info: Erasure.this.global.Type)sym1.type">setInfo</a><span title="Unit" class="delimiter">(</span><a href="../symtab/Types.scala.html#67399" title="object Erasure.this.global.ErrorType">ErrorType</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="502450">decls</a> = <a href="#502357" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Erasure.this.global.Scope">decls</a>
      <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="502451">e</a> = <a href="#502450" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113061" title="=&gt; Erasure.this.global.ScopeEntry">elems</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#502451" title="Erasure.this.global.ScopeEntry">e</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#502453" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#502451" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isTerm</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="502513">e1</a> = <a href="#502450" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113096" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a><span class="delimiter">(</span><a href="#502451" title="Erasure.this.global.ScopeEntry">e</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#502513" title="Erasure.this.global.ScopeEntry">e1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#502515" title="()Unit" class="delimiter">{</a>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#502513" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a> <a href="../symtab/Types.scala.html#105520" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#502451" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#502449" title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a><span class="delimiter">(</span><a href="#502451" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a>, <a href="#502513" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
            <a href="#502513" title="Erasure.this.global.ScopeEntry">e1</a> = <a href="#502450" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113096" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a><span class="delimiter">(</span><a href="#502513" title="Erasure.this.global.ScopeEntry">e1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#502451" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#502451" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#113283" title="=&gt; Erasure.this.global.ScopeEntry">next</a>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.Cursor" id="502452">opc</a> = <a href="#502525" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">new</a> <a href="../Global.scala.html#64851" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="502525">overridingPairs</a>.<a href="OverridingPairs.scala.html#107251" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a><span class="delimiter">(</span><a href="#502357" title="Erasure.this.global.Symbol">root</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="502563">exclude</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502565">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#502565" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isTerm</span> <span title="(x: Boolean)Boolean">||</span> <a href="#502565" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivate</span> <span title="(x: Boolean)Boolean">||</span> <a href="#502525" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">super</a>.<a href="OverridingPairs.scala.html#502531" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a><span class="delimiter">(</span><a href="#502565" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span> 
           <span class="comment">// specialized members have no type history before 'specialize', causing double def errors for curried defs</span>
           <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#502565" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107574" title="(pid: Int)Boolean">hasTypeAt</a><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72336" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#102966" title="=&gt; Int">id</a><span class="delimiter">)</span><span class="delimiter">)</span> 

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Boolean" id="502564">matches</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502569">sym1</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="502570">sym2</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#502569" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../symtab/Types.scala.html#105520" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#502570" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502560" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#502608" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72336" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span>
              <a href="#502357" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#107600" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#105502" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502554" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a><span class="delimiter">)</span> <a href="../symtab/Types.scala.html#105522" title="(that: Erasure.this.global.Type)Boolean">matches</a>
              <a href="#502357" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#107600" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#105502" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><span class="delimiter">(</span><a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502557" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502554" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../symtab/Symbols.scala.html#107659" title="=&gt; java.lang.String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502554" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../symtab/Symbols.scala.html#107662" title="=&gt; java.lang.String">infosString</a> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502557" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../symtab/Symbols.scala.html#107659" title="=&gt; java.lang.String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502557" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../symtab/Symbols.scala.html#107662" title="=&gt; java.lang.String">infosString</a><span class="delimiter">)</span>
          <a href="#502449" title="(sym1: Erasure.this.global.Symbol, sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a><span class="delimiter">(</span><a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502554" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>, <a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502557" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#502452" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502561" title="()Unit">next</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

<span class="comment">/*
      for (bc &lt;- root.info.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isTerm &amp;&amp; !other.isConstructor &amp;&amp; !(other hasFlag (PRIVATE | BRIDGE))) {
          for (member &lt;- root.info.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp; 
                !(member hasFlag BRIDGE) &amp;&amp; 
                atPhase(phase.next)(member.tpe =:= other.tpe) &amp;&amp; 
                !atPhase(refchecksPhase.next)(
                  root.thisType.memberType(member) matches root.thisType.memberType(other))) {
              if (settings.debug.value) log(&quot;&quot; + member.locationString + &quot; &quot; + member.infosString + other.locationString + &quot; &quot; + other.infosString);
              doubleDefError(member, other)
            }
          }
        }
      }
*/</span>

    <span class="comment">/**  Add bridge definitions to a template. This means:
     *  
     *   If there is a concrete member `m` which overrides a member in a base
     *   class of the template, and the erased types of the two members differ,
     *   and the two members are not inherited or defined by some parent class
     *   of the template, then a bridge from the overridden member `m1` to the
     *   member `m0` is added. The bridge has the erased type of `m1` and
     *   forwards to `m0`.
     *  
     *   No bridge is added if there is already a bridge to `m0` with the erased
     *   type of `m1` in the template.
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" id="498694">bridgeDefs</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502622">owner</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" class="delimiter">(</span>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, immutable.Set<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>  
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="502624">toBeRemoved</a>: immutable.<span title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">Set</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = immutable.<span title="(elems: Erasure.this.global.Symbol*)scala.collection.immutable.Set[Erasure.this.global.Symbol]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="comment">//println(&quot;computing bridges for &quot; + owner)//DEBUG</span>
      <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72342" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="502625">site</a> = <a href="#502622" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107600" title="=&gt; Erasure.this.global.Type">thisType</a>
      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="502626">bridgesScope</a> = <a href="../symtab/Scopes.scala.html#113079" title="()Erasure.this.global.Scope" class="keyword">new</a> <a href="../symtab/Scopes.scala.html#67691" title="Erasure.this.global.Scope">Scope</a>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" id="502627">bridgeTarget</a> = <span title="()scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]">HashMap</span><span class="delimiter">[</span>Symbol, Symbol<span class="delimiter">]</span>
      <span class="keyword">var</span> <a title="List[Erasure.this.global.Tree]" id="502628">bridges</a>: <span title="List[Erasure.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="opc extends Erasure.this.global.overridingPairs.Cursor" id="502629">opc</a> = <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.overridingPairs.Cursor)Erasure.this.global.overridingPairs.Cursor">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72340" title="=&gt; scala.tools.nsc.Phase">explicitouterPhase</a><span class="delimiter">)</span> <span class="delimiter">{</span>     
        <a href="#502658" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">new</a> <a href="../Global.scala.html#64851" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="502658">overridingPairs</a>.<a href="OverridingPairs.scala.html#107251" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a><span class="delimiter">(</span><a href="#502622" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span class="delimiter">{</span>    
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[Erasure.this.global.Type]" id="502660">parents</a>: <span title="List[Erasure.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span><span class="delimiter">(</span><a href="#502622" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105463" title="=&gt; List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span><span class="delimiter">)</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="502661">exclude</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502664">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
            <span title="=&gt; Boolean">!</span><a href="#502664" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span> <span title="(x: Boolean)Boolean">||</span> <a href="#502664" title="Erasure.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivate</span> <span title="(x: Boolean)Boolean">||</span> <a href="#502658" title="Erasure.this.global.overridingPairs.Cursor" class="keyword">super</a>.<a href="OverridingPairs.scala.html#502531" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a><span class="delimiter">(</span><a href="#502664" title="Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#502629" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502560" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#502630" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="502685">member</a> = <a href="#502629" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502554" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="502686">other</a> = <a href="#502629" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502557" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>
        <span class="comment">//Console.println(&quot;bridge? &quot; + member + &quot;:&quot; + member.tpe + member.locationString + &quot; to &quot; + other + &quot;:&quot; + other.tpe + other.locationString)//DEBUG</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#64991" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#72340" title="=&gt; scala.tools.nsc.Phase">explicitouterPhase</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<span title="=&gt; Boolean">isDeferred</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="502693">otpe</a> = <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Boolean" id="502694">bridgeNeeded</a> = <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">(</span>
            <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <a href="../symtab/Types.scala.html#105520" title="(that: Erasure.this.global.overridingPairs.global.Type)Boolean">=:=</a> <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
            <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#111756" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a><span class="delimiter">(</span><a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span> <a href="../symtab/Types.scala.html#105520" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#111756" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a><span class="delimiter">(</span><a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
            <span class="delimiter">{</span> <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="502702">e</a> = <a href="#502626" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../symtab/Scopes.scala.html#113095" title="(name: Erasure.this.global.Name)Erasure.this.global.ScopeEntry">lookupEntry</a><span class="delimiter">(</span><a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Erasure.this.global.overridingPairs.global.Name">name</a><span class="delimiter">)</span>
              <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#502702" title="Erasure.this.global.ScopeEntry">e</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#502702" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a> <a href="../symtab/Types.scala.html#105520" title="(that: Erasure.this.global.Type)Boolean">=:=</a> <a href="#502693" title="Erasure.this.global.Type">otpe</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#502627" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">bridgeTarget</a><span class="delimiter">(</span><a href="#502702" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#113275" title="=&gt; Erasure.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#502702" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#502626" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../symtab/Scopes.scala.html#113096" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a><span class="delimiter">(</span><a href="#502702" title="Erasure.this.global.ScopeEntry">e</a><span class="delimiter">)</span>
              <span class="delimiter">(</span><a href="#502702" title="Erasure.this.global.ScopeEntry">e</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">)</span>;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#502694" title="Boolean">bridgeNeeded</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="502741">bridge</a> = <a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#107596" title="(owner: Erasure.this.global.overridingPairs.global.Symbol)Erasure.this.global.overridingPairs.global.Symbol">cloneSymbolImpl</a><span class="delimiter">(</span><a href="#502622" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107405" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.overridingPairs.global.Symbol">setPos</a><span class="delimiter">(</span><a href="#502622" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Erasure.this.global.Position">pos</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)Erasure.this.global.overridingPairs.global.Symbol">setFlag</a><span class="delimiter">(</span><a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107551" title="=&gt; Long">flags</a> <span title="(x: Int)Long">|</span> <span title="Int(67108864)">BRIDGE</span><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107554" title="(mask: Long)Erasure.this.global.overridingPairs.global.Symbol">resetFlag</a><span class="delimiter">(</span>ACCESSOR | DEFERRED <span title="Long(2281701392L)">|</span> LAZY <span title="(x: Long)Long">|</span> <a href="../symtab/Flags.scala.html#67047" title="=&gt; Long">lateDEFERRED</a><span class="delimiter">)</span>
            <span class="comment">// the parameter symbols need to have the new owner</span>
            <a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#107566" title="(info: Erasure.this.global.overridingPairs.global.Type)bridge.type">setInfo</a><span class="delimiter">(</span><a href="#502693" title="Erasure.this.global.Type">otpe</a>.<a href="../symtab/Types.scala.html#105528" title="(owner: Erasure.this.global.Symbol)Erasure.this.global.Type">cloneInfo</a><span class="delimiter">(</span><a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#502627" title="(key: Erasure.this.global.Symbol, value: Erasure.this.global.Symbol)Unit">bridgeTarget</a><span class="delimiter">(</span><a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a><span class="delimiter">)</span> = <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>
            <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Symbol)Erasure.this.global.Symbol">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#502622" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113086" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">enter</a><span class="delimiter">(</span><a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a><span class="delimiter">)</span> <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#502622" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="comment">//println(&quot;bridge to same: &quot;+other+other.locationString)//DEBUG</span>
              <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#502622" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113092" title="(sym: Erasure.this.global.Symbol)Unit">unlink</a><span class="delimiter">(</span><a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a><span class="delimiter">)</span> <span class="delimiter">}</span>
              <a href="#502624" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a> <span title="(elem: Erasure.this.global.Symbol)scala.collection.immutable.Set[Erasure.this.global.Symbol]">+=</span> <a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>
            <span class="delimiter">}</span>
            <a href="#502626" title="Erasure.this.global.Scope">bridgesScope</a> <a href="../symtab/Scopes.scala.html#113086" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">enter</a> <a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>
            <a href="#502628" title="List[Erasure.this.global.Tree]">bridges</a> =
              <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Erasure.this.global.overridingPairs.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="Erasure.this.global.DefDef" id="502833">bridgeDef</a> =
                    <a href="../ast/Trees.scala.html#67801" title="(sym: Erasure.this.global.Symbol, rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>,
                      <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                        <span class="keyword">case</span> <span title="Erasure.this.global.Literal">MethodType</span><span class="delimiter">(</span><a href="#502859" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, ConstantType<span class="delimiter">(</span><a title="Erasure.this.global.Constant" id="502871">c</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="TypingTransformers.scala.html#110301" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#502871" title="Erasure.this.global.Constant">c</a><span class="delimiter">)</span>
                        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
                          <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Tree">This</a><span class="delimiter">(</span><a href="#502622" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>, <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span> <a href="#502889" title="(z: Erasure.this.global.Tree)(op: (Erasure.this.global.Tree, List[Erasure.this.global.overridingPairs.global.Symbol]) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">/:</a> <a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#107580" title="=&gt; List[List[Erasure.this.global.overridingPairs.global.Symbol]]">paramss</a><span class="delimiter">)</span>
                             <span class="delimiter">(</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502938">fun</a>, <a title="List[Erasure.this.global.overridingPairs.global.Symbol]" id="502939">vparams</a><span class="delimiter">)</span> =&gt; <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#502938" title="Erasure.this.global.Tree">fun</a>, <a href="#502939" title="List[Erasure.this.global.overridingPairs.global.Symbol]">vparams</a> <span title="(f: Erasure.this.global.overridingPairs.global.Symbol =&gt; Erasure.this.global.Ident)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.overridingPairs.global.Symbol],Erasure.this.global.Ident,List[Erasure.this.global.Tree]])List[Erasure.this.global.Tree]">map</span> <a href="../ast/Trees.scala.html#67813" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Ident">Ident</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                      <span class="delimiter">}</span><span class="delimiter">)</span>;
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
                    <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;generating bridge from &quot;)" class="string">&quot;generating bridge from &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/Flags.scala.html#24068" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<span title="(flags: Long)String">flagsToString</span><span class="delimiter">(</span><a href="#502741" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#107551" title="=&gt; Long">flags</a><span class="delimiter">)</span>  <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502693" title="Erasure.this.global.Type">otpe</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502686" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#107659" title="=&gt; java.lang.String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502685" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#107659" title="=&gt; java.lang.String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =\012 &quot;)" class="string">&quot; =\n &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#502833" title="Erasure.this.global.DefDef">bridgeDef</a><span class="delimiter">)</span>;
                  <a href="#502833" title="Erasure.this.global.DefDef">bridgeDef</a>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span> <a href="#502824" title="(x: Erasure.this.global.Tree)List[Erasure.this.global.Tree]">::</a> <a href="#502628" title="List[Erasure.this.global.Tree]">bridges</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#502629" title="opc extends Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#502561" title="()Unit">next</a>
      <span class="delimiter">}</span>
      <span title="(_1: List[Erasure.this.global.Tree], _2: scala.collection.immutable.Set[Erasure.this.global.Symbol])(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" class="delimiter">(</span><a href="#502628" title="List[Erasure.this.global.Tree]">bridges</a>, <a href="#502624" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="comment">/*
      for (bc &lt;- site.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isMethod &amp;&amp; !other.isConstructor) {
          for (member &lt;- site.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp;
                !(member hasFlag DEFERRED) &amp;&amp; 
                (site.memberType(member) matches site.memberType(other)) &amp;&amp;
                !(site.parents exists (p =&gt; 
                  (p.symbol isSubClass member.owner) &amp;&amp; (p.symbol isSubClass other.owner)))) {
...
             }
          }
*/</span>

    <span class="keyword">def</span> <a title="(stats: List[Erasure.this.global.Tree], base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]" id="498695">addBridges</a><span class="delimiter">(</span><a title="List[Erasure.this.global.Tree]" id="502364">stats</a>: <span title="List[Erasure.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Erasure.this.global.Symbol" id="502365">base</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="List[Erasure.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
      <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#502365" title="Erasure.this.global.Symbol">base</a>.<a href="../symtab/Symbols.scala.html#107480" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span> <a href="#502364" title="List[Erasure.this.global.Tree]">stats</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a href="#503021" title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" class="delimiter">(</a><a href="#503020" title="List[Erasure.this.global.Tree]" id="503021">bridges</a>, <a href="#503020" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="503022">toBeRemoved</a><span class="delimiter">)</span> = <a href="#498694" title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">bridgeDefs</a><span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol]) @unchecked" class="delimiter">(</span><a href="#502365" title="Erasure.this.global.Symbol">base</a><span class="delimiter">)</span>
        <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#503021" title="List[Erasure.this.global.Tree]">bridges</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#502364" title="List[Erasure.this.global.Tree]">stats</a> 
        <span class="keyword">else</span> <span class="delimiter">(</span><a href="#502364" title="List[Erasure.this.global.Tree]">stats</a> <span title="(p: Erasure.this.global.Tree =&gt; Boolean)List[Erasure.this.global.Tree]">filterNot</span> <span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="503037">stat</a> =&gt; <a href="#503022" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a> <span title="(elem: Erasure.this.global.Symbol)Boolean">contains</span> <a href="#503037" title="Erasure.this.global.Tree">stat</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#503033" title="(prefix: List[Erasure.this.global.Tree])List[Erasure.this.global.Tree]">:::</a> <a href="#503021" title="List[Erasure.this.global.Tree]">bridges</a>
      <span class="delimiter">}</span>

    <span class="comment">/**  Transform tree at phase erasure before retyping it.
     *   This entails the following:
     *  
     *   - Remove all type parameters in class and method definitions.
     *   - Remove all abstract and alias type definitions.
     *   - Remove all type applications other than those involving a type test or cast.
     *   - Remove all empty trees in statements and definitions in a PackageDef.
     *   - Check that there are no double definitions in a template.
     *   - Add bridge definitions to a template.
     *   - Replace all types in type nodes and the EmptyTree object by their erasure.
     *     Type nodes of type Unit representing result types of methods are left alone.
     *   - Given a selection q.s, where the owner of `s` is not accessible but the
     *     type symbol of q's type qT is accessible, insert a cast (q.asInstanceOf[qT]).s
     *     This prevents illegal access errors (see #4283).
     *   - Reset all other type attributes to null, thus enforcing a retyping.
     */</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="preTransformer extends Erasure.this.TypingTransformer" id="498696">preTransformer</a> = <a href="#501539" title="Erasure.this.TypingTransformer{def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}" class="keyword">new</a> <a href="TypingTransformers.scala.html#110303" title="anonymous class $anon extends Erasure.this.TypingTransformer" id="501539">TypingTransformer</a><span class="delimiter">(</span><a href="#498699" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="501560">preErase</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501562">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <a href="#501562" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a title="Erasure.this.global.Modifiers" id="501589">mods</a>, <a title="Erasure.this.global.TypeName" id="501590">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="501591">tparams</a>, <a title="Erasure.this.global.Template" id="501592">impl</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;defs of &quot;)" class="string">&quot;defs of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; = &quot;)" class="string">&quot; = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Erasure.this.global.Scope">decls</a><span class="delimiter">)</span>
          <a href="../ast/Trees.scala.html#162568" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162469" title="(tree: Erasure.this.global.Tree, mods: Erasure.this.global.Modifiers, name: Erasure.this.global.Name, tparams: List[Erasure.this.global.TypeDef], impl: Erasure.this.global.Template)Erasure.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>, <a href="#501589" title="Erasure.this.global.Modifiers">mods</a>, <a href="#501590" title="Erasure.this.global.TypeName">name</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#501592" title="Erasure.this.global.Template">impl</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.DefDef">DefDef</span><span class="delimiter">(</span><a title="Erasure.this.global.Modifiers" id="501631">mods</a>, <a title="Erasure.this.global.TermName" id="501632">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="501633">tparams</a>, <a title="List[List[Erasure.this.global.ValDef]]" id="501634">vparamss</a>, <a title="Erasure.this.global.Tree" id="501635">tpt</a>, <a title="Erasure.this.global.Tree" id="501636">rhs</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#162568" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162473" title="(tree: Erasure.this.global.Tree, mods: Erasure.this.global.Modifiers, name: Erasure.this.global.Name, tparams: List[Erasure.this.global.TypeDef], vparamss: List[List[Erasure.this.global.ValDef]], tpt: Erasure.this.global.Tree, rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>, <a href="#501631" title="Erasure.this.global.Modifiers">mods</a>, <a href="#501632" title="Erasure.this.global.TermName">name</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#501634" title="List[List[Erasure.this.global.ValDef]]">vparamss</a>, <a href="#501635" title="Erasure.this.global.Tree">tpt</a>, <a href="#501636" title="Erasure.this.global.Tree">rhs</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.EmptyTree.type">TypeDef</span><span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#110301" title="object Erasure.this.global.EmptyTree">EmptyTree</a>
        <span class="keyword">case</span> <span title="Erasure.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.TypeApply" id="501662">instanceOf</a> @ TypeApply<span class="delimiter">(</span><a title="Erasure.this.global.Select" id="501665">fun</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501670">qual</a>, <a title="Erasure.this.global.Name" id="501671">name</a><span class="delimiter">)</span>, <a title="List[Erasure.this.global.Tree]" id="501672">args</a> @ <a href="#501674" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501685">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#501687" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// !!! todo: simplify by having GenericArray also extract trees</span>
              <span class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#501665" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106530" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a> <span title="(x: Boolean)Boolean">||</span> <a href="#501665" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106557" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                  <a href="#111736" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#501685" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Int" id="501712">level</a> = <a href="#111736" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#501685" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(arg: Erasure.this.global.Tree)Erasure.this.global.gen.global.Tree" id="501713">isArrayTest</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501714">arg</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span> = 
            <a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105598" title="(meth: Erasure.this.global.gen.global.Name, args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#110301" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)Erasure.this.global.TermName" class="string">&quot;isArray&quot;</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#501714" title="Erasure.this.global.Tree">arg</a>, <a href="TypingTransformers.scala.html#110301" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#110301" title="(value: Any)Erasure.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#501712" title="Int">level</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="TypingTransformers.scala.html#110301" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#64965" title="object Erasure.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#106064" title="(pos: Erasure.this.global.analyzer.global.Position)(tree: Erasure.this.global.analyzer.global.Tree)Erasure.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Erasure.this.global.analyzer.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501712" title="Int">level</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#501713" title="(arg: Erasure.this.global.Tree)Erasure.this.global.gen.global.Tree">isArrayTest</a><span class="delimiter">(</span><a href="#501670" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105609" title="(expr: Erasure.this.global.gen.global.Tree, owner: Erasure.this.global.gen.global.Symbol, unit: Erasure.this.global.gen.global.CompilationUnit)(within: () =&gt; Erasure.this.global.gen.global.Tree =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a><span class="delimiter">(</span><a href="#501670" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#162570" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#498699" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="501761">qual1</a> =&gt;
                <a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105588" title="(tree1: Erasure.this.global.gen.global.Tree, tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkAnd</a><span class="delimiter">(</span>
                  <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501761" title="()Erasure.this.global.gen.global.Tree">qual1</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#501665" title="Erasure.this.global.Select">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span>, 
                                  <span title="(xs: Erasure.this.global.TypeTree*)List[Erasure.this.global.TypeTree]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67818" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#501685" title="Erasure.this.global.Tree">arg</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, 
                        List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="#501713" title="(arg: Erasure.this.global.Tree)Erasure.this.global.gen.global.Tree">isArrayTest</a><span class="delimiter">(</span><a href="#501761" title="()Erasure.this.global.gen.global.Tree">qual1</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501807">fun</a>, <a title="List[Erasure.this.global.Tree]" id="501808">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#501807" title="Erasure.this.global.Tree">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106216" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
                                      <a href="#501807" title="Erasure.this.global.Tree">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106559" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                                      <a href="#501807" title="Erasure.this.global.Tree">fun</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#106557" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// leave all other type tests/type casts, remove all other type applications</span>
          <a href="#501560" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">preErase</a><span class="delimiter">(</span><a href="#501807" title="Erasure.this.global.Tree">fun</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="501827">fn</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501832">qual</a>, <a title="Erasure.this.global.Name" id="501833">name</a><span class="delimiter">)</span>, <a title="List[Erasure.this.global.Tree]" id="501834">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#501827" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> =&gt; 
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#111736" title="(tp: Erasure.this.global.Type)Int">unboundedGenericArrayLevel</a><span class="delimiter">(</span><a href="#501832" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105458" title="=&gt; Erasure.this.global.Type">widen</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> 
            <span class="comment">// convert calls to apply/update/length on generic arrays to</span>
            <span class="comment">// calls of ScalaRunTime.array_xxx method calls</span>
            <a href="TypingTransformers.scala.html#110301" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#64965" title="object Erasure.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#106064" title="(pos: Erasure.this.global.analyzer.global.Position)(tree: Erasure.this.global.analyzer.global.Tree)Erasure.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105598" title="(meth: Erasure.this.global.gen.global.Name, args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a><span class="delimiter">(</span><span title="java.lang.String(&quot;array_&quot;)" class="string">&quot;array_&quot;</span><a href="TypingTransformers.scala.html#110301" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)Erasure.this.global.TermName">+</a><a href="#501833" title="Erasure.this.global.Name">name</a>, <a href="#501832" title="Erasure.this.global.Tree">qual</a> <a href="#501849" title="(x: Erasure.this.global.Tree)List[Erasure.this.global.Tree]">::</a> <a href="#501834" title="List[Erasure.this.global.Tree]">args</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <span class="keyword">else</span>
            <span class="comment">// store exact array erasure in map to be retrieved later when we might</span>
            <span class="comment">// need to do the cast in adaptMember</span>
            <a href="../ast/Trees.scala.html#162568" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162497" title="(tree: Erasure.this.global.Tree, fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="#501562" title="Erasure.this.global.Tree">tree</a>,
              <a href="TypingTransformers.scala.html#110301" title="(qualifier: Erasure.this.global.Tree, name: Erasure.this.global.Name, erasure: Erasure.this.global.Type)Erasure.this.global.SelectFromArray">SelectFromArray</a><span class="delimiter">(</span><a href="#501832" title="Erasure.this.global.Tree">qual</a>, <a href="#501833" title="Erasure.this.global.Name">name</a>, <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#501832" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(tree: Erasure.this.global.Tree)Erasure.this.global.SelectFromArray">copyAttrs</span><span class="delimiter">(</span><a href="#501827" title="Erasure.this.global.Select">fn</a><span class="delimiter">)</span>,
              <a href="#501834" title="List[Erasure.this.global.Tree]">args</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="501869">fn</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501874">qual</a>, _<span class="delimiter">)</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#111758" title="(elem: Erasure.this.global.Symbol)Boolean">interceptedMethods</a><span class="delimiter">(</span><a href="#501869" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt;          
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501869" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106536" title="=&gt; Erasure.this.global.Symbol">Any_##</a> <span title="(x: Boolean)Boolean">||</span> <a href="#501869" title="Erasure.this.global.Select">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106551" title="=&gt; Erasure.this.global.Symbol">Object_##</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// This is unattractive, but without it we crash here on ().## because after</span>
            <span class="comment">// erasure the ScalaRunTime.hash overload goes from Unit =&gt; Int to BoxedUnit =&gt; Int.</span>
            <span class="comment">// This must be because some earlier transformation is being skipped on ##, but so</span>
            <span class="comment">// far I don't know what.  For null we now define null.## == 0.</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="501896">arg</a> = <a href="#501874" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105456" title="=&gt; Erasure.this.global.Symbol">typeSymbolDirect</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../symtab/Definitions.scala.html#106718" title="Erasure.this.global.Block">UnitClass</a>  =&gt; <a href="../ast/TreeDSL.scala.html#113998" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#501874" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/TreeDSL.scala.html#114003" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106600" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span>   <span class="comment">// ({ expr; UNIT }).##</span>
              <span class="keyword">case</span> <a href="../symtab/Definitions.scala.html#106226" title="Erasure.this.global.Literal">NullClass</a>  =&gt; <a href="../ast/TreeDSL.scala.html#149354" title="(x: Any)Erasure.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>                             <span class="comment">// (null: Object).##</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span>          =&gt; <a href="#501874" title="Erasure.this.global.Tree">qual</a>
            <span class="delimiter">}</span>
            <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105568" title="(sym: Erasure.this.global.gen.global.Symbol)Erasure.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106333" title="=&gt; Erasure.this.global.Symbol">scalaRuntimeHash</a><span class="delimiter">)</span>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#501896" title="Erasure.this.global.Tree">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="comment">// Rewrite 5.getClass to ScalaRunTime.anyValClass(5)</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#501874" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105568" title="(sym: Erasure.this.global.gen.global.Symbol)Erasure.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106334" title="=&gt; Erasure.this.global.Symbol">scalaRuntimeAnyValClass</a><span class="delimiter">)</span>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#501874" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#501562" title="Erasure.this.global.Tree">tree</a>
            
        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501928">fn</a>, <a title="List[Erasure.this.global.Tree]" id="501929">args</a><span class="delimiter">)</span> =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501928" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106533" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a><span class="delimiter">)</span>
            <span class="delimiter">(</span><a href="#501928" title="Erasure.this.global.Tree">fn</a>: @<span title="Erasure.this.global.Tree @unchecked">unchecked</span><span class="delimiter">)</span> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span>Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501941">qual</a>, _<span class="delimiter">)</span>, <a href="#501943" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501954">targ</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501941" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#501954" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Typed)Erasure.this.global.Typed">atPos</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="TypingTransformers.scala.html#110301" title="(expr: Erasure.this.global.Tree, tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#501941" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#67818" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#501954" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106712" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a><span class="delimiter">(</span><a href="#501941" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
                           <a href="../symtab/Definitions.scala.html#106712" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a><span class="delimiter">(</span><a href="#501954" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span class="comment">// convert numeric type casts</span>
                  <span class="keyword">val</span> <a title="Erasure.this.global.TermName" id="501971">cname</a> = <a href="../symtab/Names.scala.html#66914" title="(s: String)Erasure.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;to&quot;)" class="string">&quot;to&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#501954" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Erasure.this.global.Name">name</a><span class="delimiter">)</span>
                  <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="501972">csym</a> = <a href="#501941" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105495" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">member</a><span class="delimiter">(</span><a href="#501971" title="Erasure.this.global.TermName">cname</a><span class="delimiter">)</span>
                  <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#501972" title="Erasure.this.global.Symbol">csym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Erasure.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                  <a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501941" title="Erasure.this.global.Tree">qual</a>, <a href="#501972" title="Erasure.this.global.Symbol">csym</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> 
                  <a href="#501562" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
            <span class="comment">// todo: also handle the case where the singleton type is buried in a compound</span>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501928" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106530" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#501928" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="502023">sel</a> @ Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502028">qual</a>, <a title="Erasure.this.global.Name" id="502029">name</a><span class="delimiter">)</span>, <a href="#502031" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502042">targ</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#502028" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../symtab/Definitions.scala.html#106661" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#502028" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#502042" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#502042" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../symtab/Definitions.scala.html#106218" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>
                  <a href="#498699" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#96451" title="(pos: Erasure.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#502023" title="Erasure.this.global.Select">sel</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>, <span title="java.lang.String(&quot;isInstanceOf cannot test if value types are references.&quot;)" class="string">&quot;isInstanceOf cannot test if value types are references.&quot;</span><span class="delimiter">)</span>
              
                <span class="keyword">def</span> <a title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree" id="502043">mkIsInstanceOf</a><span class="delimiter">(</span><a title="() =&gt; Erasure.this.global.Tree" id="502057">q</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Tree<span class="delimiter">)</span><span class="delimiter">(</span><a title="Erasure.this.global.Type" id="502058">tp</a>: <a href="../symtab/Types.scala.html#67392" title="Erasure.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> =
                  <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span>
                    <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span>
                      <a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#502057" title="()Erasure.this.global.Tree">q</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106557" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Select">setPos</span> <a href="#502023" title="Erasure.this.global.Select">sel</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>, 
                      <span title="(xs: Erasure.this.global.TypeTree*)List[Erasure.this.global.TypeTree]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67818" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#502058" title="Erasure.this.global.Type">tp</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeTree">setPos</span> <a href="#502042" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeApply">setPos</span> <a href="#501928" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>,
                    List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">setPos</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>
                <a href="#502042" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Erasure.this.global.Apply">SingleType</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> | ThisType<span class="delimiter">(</span>_<span class="delimiter">)</span> | SuperType<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
                    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="502118">cmpOp</a> = <span title="Erasure.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#502042" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../symtab/Definitions.scala.html#106716" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="../symtab/Definitions.scala.html#106518" title="=&gt; Erasure.this.global.Symbol">Any_equals</a> <span class="keyword">else</span> <a href="../symtab/Definitions.scala.html#106539" title="=&gt; Erasure.this.global.Symbol">Object_eq</a>
                    <a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="TypingTransformers.scala.html#110301" title="(fun: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Erasure.this.global.Tree, sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#502028" title="Erasure.this.global.Tree">qual</a>, <a href="#502118" title="Erasure.this.global.Symbol">cmpOp</a><span class="delimiter">)</span>, <span title="(xs: Erasure.this.global.gen.global.Tree*)List[Erasure.this.global.gen.global.Tree]">List</span><span class="delimiter">(</span><a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105564" title="(tpe: Erasure.this.global.gen.global.Type)Erasure.this.global.gen.global.Tree">mkAttributedQualifier</a><span class="delimiter">(</span><a href="#502042" title="Erasure.this.global.Tree">targ</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="keyword">case</span> <span title="Erasure.this.global.Tree">RefinedType</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Type]" id="502160">parents</a>, <a title="Erasure.this.global.Scope" id="502161">decls</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#502160" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> =&gt;
                    <span class="comment">// Optimization: don't generate isInstanceOf tests if the static type</span>
                    <span class="comment">// conforms, because it always succeeds.  (Or at least it had better.)</span>
                    <span class="comment">// At this writing the pattern matcher generates some instance tests</span>
                    <span class="comment">// involving intersections where at least one parent is statically known true.</span>
                    <span class="comment">// That needs fixing, but filtering the parents here adds an additional</span>
                    <span class="comment">// level of robustness (in addition to the short term fix.)</span>
                    <span class="keyword">val</span> <a title="List[Erasure.this.global.Type]" id="502166">parentTests</a> = <a href="#502160" title="List[Erasure.this.global.Type]">parents</a> <span title="(p: Erasure.this.global.Type =&gt; Boolean)List[Erasure.this.global.Type]">filterNot</span> <span class="delimiter">(</span><a href="#502028" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <a href="../symtab/Types.scala.html#105515" title="(that: Erasure.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#502170" title="Erasure.this.global.Type">_</a><span class="delimiter">)</span>

                    <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#502166" title="List[Erasure.this.global.Type]">parentTests</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="TypingTransformers.scala.html#110301" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#110301" title="(value: Any)Erasure.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="keyword">else</span> <a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105609" title="(expr: Erasure.this.global.gen.global.Tree, owner: Erasure.this.global.gen.global.Symbol, unit: Erasure.this.global.gen.global.CompilationUnit)(within: () =&gt; Erasure.this.global.gen.global.Tree =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a><span class="delimiter">(</span><a href="#502028" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#162570" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#498699" title="Erasure.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="502191">q</a> =&gt;
                      <a href="../ast/Trees.scala.html#67851" title="(pos: Erasure.this.global.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                        <a href="#502166" title="List[Erasure.this.global.Type]">parentTests</a> <span title="(f: Erasure.this.global.Type =&gt; Erasure.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Erasure.this.global.Type],Erasure.this.global.Tree,List[Erasure.this.global.Tree]])List[Erasure.this.global.Tree]">map</span> <a href="#502043" title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree">mkIsInstanceOf</a><a href="#502212" title="Erasure.this.global.Type" class="delimiter">(</a><a href="#502191" title="() =&gt; Erasure.this.global.gen.global.Tree">q</a><span class="delimiter">)</span> <span title="(op: (Erasure.this.global.Tree, Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">reduceRight</span> <a href="../Global.scala.html#64843" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105588" title="(tree1: Erasure.this.global.gen.global.Tree, tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkAnd</a>
                      <span class="delimiter">}</span>
                    <span class="delimiter">}</span>
                  <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
                    <a href="#501562" title="Erasure.this.global.Tree">tree</a>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt; <a href="#501562" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">def</span> <a title="(fn: Erasure.this.global.Tree, qual: Erasure.this.global.Tree)Erasure.this.global.Tree" id="502274">doDynamic</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502275">fn</a>: <span title="Erasure.this.global.Tree">Tree</span>, <a title="Erasure.this.global.Tree" id="502276">qual</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
              <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#502275" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isRefinementClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#502275" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107632" title="=&gt; List[Erasure.this.global.Symbol]">allOverriddenSymbols</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
                <a href="TypingTransformers.scala.html#110301" title="(qual: Erasure.this.global.Tree, args: List[Erasure.this.global.Tree])Erasure.this.global.ApplyDynamic">ApplyDynamic</a><span class="delimiter">(</span><a href="#502276" title="Erasure.this.global.Tree">qual</a>, <a href="#501929" title="List[Erasure.this.global.Tree]">args</a><span class="delimiter">)</span> <span title="(sym: Erasure.this.global.Symbol)Erasure.this.global.ApplyDynamic">setSymbol</span> <a href="#502275" title="Erasure.this.global.Tree">fn</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.ApplyDynamic">setPos</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Position">pos</span>
              <span class="keyword">else</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
            <a href="#501928" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502294">qual</a>, _<span class="delimiter">)</span> =&gt; <a href="#502274" title="(fn: Erasure.this.global.Tree, qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a><span class="delimiter">(</span><a href="#501928" title="Erasure.this.global.Tree">fn</a>, <a href="#502294" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">TypeApply</span><span class="delimiter">(</span><a title="Erasure.this.global.Select" id="502297">fni</a>@Select<span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502302">qual</a>, _<span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <a href="#502274" title="(fn: Erasure.this.global.Tree, qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a><span class="delimiter">(</span><a href="#502297" title="Erasure.this.global.Select">fni</a>, <a href="#502302" title="Erasure.this.global.Tree">qual</a><span class="delimiter">)</span><span class="comment">// type parameters are irrelevant in case of dynamic call</span>
              <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
                <a href="#501562" title="Erasure.this.global.Tree">tree</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502307">qual</a>, <a title="Erasure.this.global.Name" id="502308">name</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="502309">owner</a> = <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>
          <span class="comment">// println(&quot;preXform: &quot;+ (tree, tree.symbol, tree.symbol.owner, tree.symbol.owner.isRefinementClass))</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#502309" title="Erasure.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isRefinementClass</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="502312">overridden</a> = <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107632" title="=&gt; List[Erasure.this.global.Symbol]">allOverriddenSymbols</a>
            <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#502312" title="List[Erasure.this.global.Symbol]">overridden</a>.<span title="=&gt; Boolean">isEmpty</span>, <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span><span class="delimiter">)</span>
            <a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="(sym: Erasure.this.global.Symbol)Unit">symbol</span> = <a href="#502312" title="List[Erasure.this.global.Symbol]">overridden</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
          <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="502310">isAccessible</a><span class="delimiter">(</span><a title="Erasure.this.global.Symbol" id="502316">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Erasure.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="TypingTransformers.scala.html#501543" title="=&gt; Erasure.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105970" title="Erasure.this.global.analyzer.Context" id="502320">context</a>.<a href="../typechecker/Contexts.scala.html#314349" title="Boolean" id="502325">isAccessible</a><span class="delimiter">(</span><a href="#502316" title="Erasure.this.global.Symbol" id="502323">sym</a>, <a href="#502316" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107600" title="Erasure.this.global.Type" id="502324">thisType</a><span class="delimiter">)</span>
          <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#502310" title="(sym: Erasure.this.global.Symbol)Boolean">isAccessible</a><span class="delimiter">(</span><a href="#502309" title="Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#502307" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// Todo: Figure out how qual.tpe could be null in the check above (it does appear in build where SwingWorker.this </span>
            <span class="comment">// has a null type).</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="502331">qualSym</a> = <a href="#502307" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105458" title="=&gt; Erasure.this.global.Type">widen</a>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
            <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#502310" title="(sym: Erasure.this.global.Symbol)Boolean">isAccessible</a><span class="delimiter">(</span><a href="#502331" title="Erasure.this.global.Symbol">qualSym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#502331" title="Erasure.this.global.Symbol">qualSym</a>.<span title="=&gt; Boolean">isPackageClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#502331" title="Erasure.this.global.Symbol">qualSym</a>.<a href="../symtab/Symbols.scala.html#107491" title="=&gt; Boolean">isPackageObjectClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="comment">// insert cast to prevent illegal access error (see #4283)</span>
              <span class="comment">// util.trace(&quot;insert erasure cast &quot;) (*/</span>
              <a href="../ast/Trees.scala.html#162568" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162501" title="(tree: Erasure.this.global.Tree, qualifier: Erasure.this.global.Tree, selector: Erasure.this.global.Name)Erasure.this.global.Select">Select</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#114008" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: Erasure.this.global.Tree)Erasure.this.CODE.TreeMethods">qual</a> <a href="../ast/TreeDSL.scala.html#149448" title="(tpe: Erasure.this.global.Type)Erasure.this.global.Tree">AS_ATTR</a> <a href="#502307" title="Erasure.this.global.Tree">qual</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span>.<a href="../symtab/Types.scala.html#105458" title="=&gt; Erasure.this.global.Type">widen</a>, <a href="#502308" title="Erasure.this.global.Name">name</a><span class="delimiter">)</span> <span class="comment">//)</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#501562" title="Erasure.this.global.Tree">tree</a>

        <span class="keyword">case</span> <span title="Erasure.this.global.Template">Template</span><span class="delimiter">(</span><a title="List[Erasure.this.global.Tree]" id="502352">parents</a>, <a title="Erasure.this.global.ValDef" id="502353">self</a>, <a title="List[Erasure.this.global.Tree]" id="502354">body</a><span class="delimiter">)</span> =&gt;
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../ast/Trees.scala.html#162570" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>.<span title="=&gt; Boolean">isImplClass</span><span class="delimiter">)</span>
          <span class="comment">//Console.println(&quot;checking no dble defs &quot; + tree)//DEBUG</span>
          <a href="#498693" title="(root: Erasure.this.global.Symbol)Unit">checkNoDoubleDefs</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Erasure.this.global.Symbol">owner</a><span class="delimiter">)</span>
          <a href="../ast/Trees.scala.html#162568" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162478" title="(tree: Erasure.this.global.Tree, parents: List[Erasure.this.global.Tree], self: Erasure.this.global.ValDef, body: List[Erasure.this.global.Tree])Erasure.this.global.Template">Template</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>, <a href="#502352" title="List[Erasure.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#67796" title="object Erasure.this.global.emptyValDef">emptyValDef</a>, <a href="#498695" title="(stats: List[Erasure.this.global.Tree], base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]">addBridges</a><span class="delimiter">(</span><a href="#502354" title="List[Erasure.this.global.Tree]">body</a>, <a href="../ast/Trees.scala.html#162570" title="=&gt; Erasure.this.global.Symbol">currentOwner</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Match">Match</span><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="502369">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="502370">cases</a><span class="delimiter">)</span> =&gt;
          <a href="TypingTransformers.scala.html#110301" title="(selector: Erasure.this.global.Tree, cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a><span class="delimiter">(</span><a href="TypingTransformers.scala.html#110301" title="(expr: Erasure.this.global.Tree, tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#502369" title="Erasure.this.global.Tree">selector</a>, <a href="../ast/Trees.scala.html#67818" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#502369" title="Erasure.this.global.Tree">selector</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#502370" title="List[Erasure.this.global.CaseDef]">cases</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Literal">Literal</span><span class="delimiter">(</span><a title="Erasure.this.global.Constant" id="502382">ct</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#502382" title="Erasure.this.global.Constant">ct</a>.<span title="=&gt; Int">tag</span> <span title="(x: Int)Boolean">==</span> <span title="Int(12)">ClassTag</span> 
                         <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#502382" title="Erasure.this.global.Constant">ct</a>.<span title="=&gt; Erasure.this.global.Type">typeValue</span>.<a href="../symtab/Types.scala.html#105454" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#67699" title="object Erasure.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106718" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> =&gt;
          <a href="../ast/Trees.scala.html#162568" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162503" title="(tree: Erasure.this.global.Tree, value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#501562" title="Erasure.this.global.Tree">tree</a>, <a href="TypingTransformers.scala.html#110301" title="(value: Any)Erasure.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#502382" title="Erasure.this.global.Constant">ct</a>.<span title="=&gt; Erasure.this.global.Type">typeValue</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
          <a href="#501562" title="Erasure.this.global.Tree">tree</a>
      <span class="delimiter">}</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="501561">transform</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="501563">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="comment">// Reply to &quot;!!! needed?&quot; which adorned the next line: without it, build fails with:</span>
        <span class="comment">//   Exception in thread &quot;main&quot; scala.tools.nsc.symtab.Types$TypeError:</span>
        <span class="comment">//   value array_this is not a member of object scala.runtime.ScalaRunTime</span>
        <span class="comment">//</span>
        <span class="comment">// What the heck is array_this? See preTransformer in this file:</span>
        <span class="comment">//   gen.mkRuntimeCall(&quot;array_&quot;+name, qual :: args) </span>
        <span title="Erasure.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#501563" title="Erasure.this.global.Tree">tree</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#106394" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../ast/Trees.scala.html#67788" title="implicit scala.tools.nsc.ast.Trees.treeWrapper : (tree: Erasure.this.global.Tree)Erasure.this.global.TreeOps">tree</a>.<a href="../ast/Trees.scala.html#109171" title="=&gt; Boolean">isType</a><span class="delimiter">)</span> <a href="#501563" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="502404">tree1</a> = <a href="#501560" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">preErase</a><span class="delimiter">(</span><a href="#501563" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#502404" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="TypingTransformers.scala.html#110301" title="tree1.type">EmptyTree</a> | TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
              <a href="#502404" title="Erasure.this.global.Tree">tree1</a> <span title="(tp: Erasure.this.global.Type)tree1.type">setType</span> <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#502404" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Type">tpe</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Erasure.this.global.Tree">DefDef</span><span class="delimiter">(</span>_, _, _, _, <a title="Erasure.this.global.Tree" id="502416">tpt</a>, _<span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="502417">result</a> = <a href="#501539" title="Erasure.this.TypingTransformer{def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}" class="keyword">super</a>.<a href="TypingTransformers.scala.html#501558" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#502404" title="Erasure.this.global.Tree">tree1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">setType</span> <span title="Null(null)" class="keyword">null</span>
              <a href="#502416" title="Erasure.this.global.Tree">tpt</a>.<span title="(t: Erasure.this.global.Type)Unit">tpe</span> = <a href="#236646" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a><span class="delimiter">(</span><a href="#502404" title="Erasure.this.global.Tree">tree1</a>.<span title="=&gt; Erasure.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Erasure.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../symtab/Types.scala.html#105468" title="=&gt; Erasure.this.global.Type">resultType</a>
              <a href="#502417" title="Erasure.this.global.Tree">result</a>
            <span class="keyword">case</span> <span title="Erasure.this.global.Tree">_</span> =&gt;
              <a href="#501539" title="Erasure.this.TypingTransformer{def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}" class="keyword">super</a>.<a href="TypingTransformers.scala.html#501558" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#502404" title="Erasure.this.global.Tree">tree1</a><span class="delimiter">)</span> <span title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">setType</span> <span title="Null(null)" class="keyword">null</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** The main transform function: Pretransfom the tree, and then
     *  re-type it at phase erasure.next.
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="498698">transform</a><span class="delimiter">(</span><a title="Erasure.this.global.Tree" id="503047">tree</a>: <span title="Erasure.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Erasure.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="503050">tree1</a> = <a href="#498696" title="=&gt; Erasure.this.TypingTransformer{def preErase(tree: Erasure.this.global.Tree): Erasure.this.global.Tree}">preTransformer</a>.<a href="TypingTransformers.scala.html#501558" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#503047" title="Erasure.this.global.Tree">tree</a><span class="delimiter">)</span>
      <a href="../symtab/SymbolTable.scala.html#64815" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">atPhase</a><span class="delimiter">(</span><a href="../symtab/SymbolTable.scala.html#64806" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#102977" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="503057">tree2</a> = <a href="AddInterfaces.scala.html#111723" title="=&gt; Erasure.this.global.Transformer">mixinTransformer</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#503050" title="Erasure.this.global.Tree">tree1</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
          <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;tree after addinterfaces: \012&quot;)" class="string">&quot;tree after addinterfaces: \n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#503057" title="Erasure.this.global.Tree">tree2</a><span class="delimiter">)</span>

        <a href="#111760" title="(context: Erasure.this.Context)Erasure.this.Eraser">newTyper</a><span class="delimiter">(</span><a href="../typechecker/Contexts.scala.html#105652" title="(unit: Erasure.this.global.CompilationUnit, tree: Erasure.this.global.Tree, erasedTypes: Boolean)Erasure.this.Context">rootContext</a><span class="delimiter">(</span><a href="#498699" title="Erasure.this.global.CompilationUnit">unit</a>, <a href="#503047" title="Erasure.this.global.Tree">tree</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#503057" title="Erasure.this.global.Tree">tree2</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>