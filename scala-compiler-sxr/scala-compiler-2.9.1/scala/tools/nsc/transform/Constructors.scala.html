<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/Constructors.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*  NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.<a href="../symtab/Flags.scala.html#24079" title="object scala.tools.nsc.symtab.Flags">Flags</a>._
<span class="keyword">import</span> util.TreeSet

<span class="comment">/** This phase converts classes with parameters into Java-like classes with 
 *  fields, which are assigned to from constructors.
 */</span>  
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Constructors extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="26159">Constructors</a> <a href="#26159" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#27209" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#11731" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#105692" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#67688" title="object Constructors.this.global.definitions">definitions</a>._

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <a title="String" id="111779">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;constructors&quot;)" class="string">&quot;constructors&quot;</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: Constructors.this.global.CompilationUnit)Constructors.this.global.Transformer" id="111781">newTransformer</a><span class="delimiter">(</span><a title="Constructors.this.global.CompilationUnit" id="495709">unit</a>: <a href="../CompilationUnits.scala.html#67942" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#67825" title="Constructors.this.global.Transformer">Transformer</a> =
    <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#111786" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#495709" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" id="111782">guardedCtorStats</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" id="111784">ctorParams</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">class</span> <a title="class ConstructorTransformer extends Constructors.this.global.Transformer with ScalaObject" id="111786">ConstructorTransformer</a><a href="#111786" title="ScalaObject" class="delimiter">(</a><a title="Constructors.this.global.CompilationUnit" id="495717">unit</a>: <a href="../CompilationUnits.scala.html#67942" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#67825" title="Constructors.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(impl: Constructors.this.global.Template)Constructors.this.global.Template" id="495715">transformClassTemplate</a><span class="delimiter">(</span><a title="Constructors.this.global.Template" id="495722">impl</a>: <span title="Constructors.this.global.Template">Template</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Template">Template</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="495724">clazz</a> = <a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a>  <span class="comment">// the transformed class</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="495725">stats</a> = <a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">body</span>          <span class="comment">// the transformed template body</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="495726">localTyper</a> = <a href="../Global.scala.html#64954" title="object Constructors.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#105921" title="(tree: Constructors.this.global.analyzer.global.Tree, owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>, <a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="495727">specializedFlag</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105347" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115292" title="=&gt; Constructors.this.global.nme.NameType">SPECIALIZED_INSTANCE</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="495728">shouldGuard</a> = <span class="delimiter">(</span><a href="#495727" title="Constructors.this.global.Symbol">specializedFlag</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span>

      case <span class="keyword">class</span> <a title="class ConstrInfo extends java.lang.Object with ScalaObject with Product with Serializable" id="495828">ConstrInfo</a><a href="#495828" title="ScalaObject" class="delimiter">(</a>
        <a title="Constructors.this.global.DefDef" id="495977">constr</a>: <span title="Constructors.this.global.DefDef">DefDef</span>,               <span class="comment">// The primary constructor</span>
        <a title="List[Constructors.this.global.Symbol]" id="495978">constrParams</a>: <span title="List[Constructors.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>,   <span class="comment">// ... and its parameters</span>
        <a title="Constructors.this.global.Block" id="495979">constrBody</a>: <span title="Constructors.this.global.Block">Block</span>             <span class="comment">// ... and its body</span>
      <span class="delimiter">)</span>
      <span class="comment">// decompose primary constructor into the three entities above.</span>
      <span class="keyword">val</span> <a title="ConstrInfo" id="495732">constrInfo</a>: <a href="#495828" title="ConstrInfo">ConstrInfo</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Option[Constructors.this.global.Tree]" id="495890">primary</a> = <a href="#495725" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <span class="delimiter">(</span><a href="#495901" title="Constructors.this.global.Tree">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107378" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span>
        <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#495890" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Boolean">isDefined</span>, <span title="java.lang.String(&quot;no constructor in template: impl = &quot;)" class="string">&quot;no constructor in template: impl = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#495722" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span>
        
        <span class="keyword">val</span> <a title="(Constructors.this.global.DefDef, List[Constructors.this.global.ValDef], Constructors.this.global.Block)" id="495892">ddef</a> @ DefDef<span class="delimiter">(</span>_, _, _, <a href="#495928" title="(x: List[List[Constructors.this.global.ValDef]])Some[List[List[Constructors.this.global.ValDef]]]">List</a><span class="delimiter">(</span><a href="#495891" title="List[Constructors.this.global.ValDef]" id="495893">vparams</a><span class="delimiter">)</span>, _, <a href="#495891" title="Constructors.this.global.Block" id="495894">rhs</a> @ Block<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#495890" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Constructors.this.global.Tree">get</span>
        <a href="#495828" title="(constr: Constructors.this.global.DefDef, constrParams: List[Constructors.this.global.Symbol], constrBody: Constructors.this.global.Block)ConstrInfo">ConstrInfo</a><span class="delimiter">(</span><a href="#495892" title="Constructors.this.global.DefDef">ddef</a>, <a href="#495893" title="List[Constructors.this.global.ValDef]">vparams</a> <span title="(f: Constructors.this.global.ValDef =&gt; Constructors.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.ValDef],Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]])List[Constructors.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#496003" title="Constructors.this.global.ValDef">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>, <a href="#495894" title="Constructors.this.global.Block">rhs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">import</span> <a href="#495732" title="ConstrInfo">constrInfo</a>._

      <span class="comment">// The parameter accessor fields which are members of the class</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Symbol]" id="495734">paramAccessors</a> = <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107461" title="=&gt; List[Constructors.this.global.Symbol]">constrParamAccessors</a>

      <span class="comment">// The constructor parameter corresponding to an accessor</span>
      <span class="keyword">def</span> <a title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495735">parameter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496031">acc</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = 
        <a href="#495736" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115616" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#496031" title="Constructors.this.global.Symbol">acc</a>.<a href="../ast/TreeDSL.scala.html#105692" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">originalName</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="comment">// The constructor parameter with given name. This means the parameter</span>
      <span class="comment">// has given name, or starts with given name, and continues with a `$' afterwards.</span>
      <span class="keyword">def</span> <a title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol" id="495736">parameterNamed</a><span class="delimiter">(</span><a title="Constructors.this.global.Name" id="496032">name</a>: <a href="../symtab/Names.scala.html#66914" title="Constructors.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(param: Constructors.this.global.Symbol)Boolean" id="496034">matchesName</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496035">param</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#496035" title="Constructors.this.global.Symbol">param</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#496032" title="Constructors.this.global.Name">name</a> <span title="(x: Boolean)Boolean">||</span> <a href="#496035" title="Constructors.this.global.Symbol">param</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#96606" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="#496032" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
        
        <span class="delimiter">(</span><a href="#495978" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a> <span title="(p: Constructors.this.global.Symbol =&gt; Boolean)List[Constructors.this.global.Symbol]">filter</span> <a href="#496034" title="(param: Constructors.this.global.Symbol)Boolean">matchesName</a><span class="delimiter">)</span> <span title="Constructors.this.global.Symbol" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Null">Nil</span>    =&gt; <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#496032" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot; not in &quot;)" class="string">&quot; not in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#495978" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a><span class="delimiter">)</span> ; <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a title="Constructors.this.global.Symbol" id="496064">p</a> :: _ =&gt; <a href="#496064" title="Constructors.this.global.Symbol">p</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a title="Boolean" id="495737">usesSpecializedField</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

      <span class="comment">// A transformer for expressions that go into the constructor</span>
      <span class="keyword">val</span> <a title="intoConstructorTransformer extends Constructors.this.global.Transformer" id="495738">intoConstructorTransformer</a> = <a href="#496065" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">new</a> <a href="../ast/Trees.scala.html#67825" title="anonymous class $anon extends Constructors.this.global.Transformer" id="496065">Transformer</a> <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="496067">isParamRef</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496070">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = 
          <a href="#496070" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isParamAccessor</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <a href="#496070" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <a href="../symtab/Symbols.scala.html#107448" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../symtab/Definitions.scala.html#106197" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#496070" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107325" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496070" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107462" title="=&gt; Constructors.this.global.Symbol">accessed</a>.<a href="../symtab/Symbols.scala.html#107323" title="=&gt; Boolean">isVariable</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><a href="#496070" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107326" title="=&gt; Boolean">isSetter</a>
        <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Constructors.this.global.Symbol)Boolean" id="496068">possiblySpecialized</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496083">s</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../Global.scala.html#64916" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#110936" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#496083" title="Constructors.this.global.Symbol">s</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="496069">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496080">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#496080" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Apply</span><span class="delimiter">(</span>Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a href="#496117" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <span class="comment">// references to parameter accessor methods of own class become references to parameters</span>
            <span class="comment">// outer accessors become references to $outer parameter </span>
            <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#496067" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496068" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="../Global.scala.html#64832" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105435" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#495735" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107462" title="=&gt; Constructors.this.global.Symbol">accessed</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span> <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107469" title="=&gt; Constructors.this.global.Symbol">outerSource</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<span title="=&gt; Boolean">isImplClass</span><span class="delimiter">)</span>
              <a href="../Global.scala.html#64832" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105435" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#495736" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115286" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span> 
              <a href="#496065" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.gen.global.Tree">Select</span><span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#496067" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496068" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; 
            <span class="comment">// references to parameter accessor field of own class become references to parameters</span>
            <a href="../Global.scala.html#64832" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105435" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#495735" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64916" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#110936" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
              <a href="#495737" title="Boolean">usesSpecializedField</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#496065" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
            <a href="#496065" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496080" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// Move tree into constructor, take care of changing owner from `oldowner' to constructor symbol</span>
      <span class="keyword">def</span> <a title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="495739">intoConstructor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496189">oldowner</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="496190">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> =
        <a href="#495738" title="intoConstructorTransformer extends Constructors.this.global.Transformer">intoConstructorTransformer</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span>
          <a href="../ast/Trees.scala.html#162608" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" class="keyword">new</a> <a href="../ast/Trees.scala.html#67837" title="Constructors.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#496189" title="Constructors.this.global.Symbol">oldowner</a>, <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#496190" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="comment">// Should tree be moved in front of super constructor call?</span>
      <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="495740">canBeMoved</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496199">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <a href="#496199" title="Constructors.this.global.Tree">tree</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496209">mods</a>, _, _, _<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#496209" title="Constructors.this.global.Modifiers">mods</a> <span title="(flag: Long)Boolean">hasFlag</span> PRESUPER <span title="Long(137975824384L)">|</span> PARAMACCESSOR<span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span>                     =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>

      <span class="comment">// Create an assignment to class field `to' with rhs `from'</span>
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree" id="495741">mkAssign</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496214">to</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="496215">from</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> =
        <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105923" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#496214" title="Constructors.this.global.Symbol">to</a>.<a href="../symtab/Symbols.scala.html#107263" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../ast/TreeDSL.scala.html#105692" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67800" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#496214" title="Constructors.this.global.Symbol">to</a><span class="delimiter">)</span>, <a href="#496215" title="Constructors.this.global.Tree">from</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      <span class="comment">// Create code to copy parameter to parameter accessor field. </span>
      <span class="comment">// If parameter is $outer, check that it is not null so that we NPE</span>
      <span class="comment">// here instead of at some unknown future $outer access.</span>
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree" id="495742">copyParam</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496268">to</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Symbol" id="496269">from</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#105696" title="object Constructors.this.CODE">CODE</a>._
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="496271">result</a> = <a href="#495741" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#496268" title="Constructors.this.global.Symbol">to</a>, <a href="../ast/Trees.scala.html#67802" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#496269" title="Constructors.this.global.Symbol">from</a><span class="delimiter">)</span><span class="delimiter">)</span>
        
        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#496269" title="Constructors.this.global.Symbol">from</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115286" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span> <a href="#496271" title="Constructors.this.global.Tree">result</a>
        <span class="keyword">else</span> <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105923" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#496268" title="Constructors.this.global.Symbol">to</a>.<a href="../symtab/Symbols.scala.html#107263" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../ast/TreeDSL.scala.html#113856" title="(tree: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">IF</a> <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#113869" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSymbol : (target: Constructors.this.global.Symbol)Constructors.this.CODE.TreeMethods">from</a> <a href="../ast/TreeDSL.scala.html#149366" title="(other: Constructors.this.global.Tree)Constructors.this.global.Apply">OBJ_EQ</a> <a href="../ast/TreeDSL.scala.html#113812" title="=&gt; Constructors.this.global.Literal">NULL</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#149329" title="(x: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">THEN</a> <a href="../ast/TreeDSL.scala.html#113838" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Throw">THROW</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106103" title="=&gt; Constructors.this.global.Symbol">NullPointerExceptionClass</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#149330" title="(elsep: Constructors.this.global.Tree)Constructors.this.global.If">ELSE</a> <a href="#496271" title="Constructors.this.global.Tree">result</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// The list of definitions that go into class</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495743">defBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
      
      <span class="comment">// The auxiliary constructors, separate from the defBuf since they should</span>
      <span class="comment">// follow the primary constructor</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495744">auxConstructorBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      <span class="comment">// The list of statements that go into constructor after and including the superclass constructor call</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495745">constrStatBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      <span class="comment">// The list of early initializer statements that go into constructor before the superclass constructor call</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495746">constrPrefixBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      <span class="comment">// The early initialized field definitions of the class (these are the class members)</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.trees.ValDef]" id="495747">presupers</a> = <a href="../ast/Trees.scala.html#67773" title="object Constructors.this.global.treeInfo">treeInfo</a>.<a href="../ast/TreeInfo.scala.html#152978" title="(stats: List[Constructors.this.global.treeInfo.trees.Tree])List[Constructors.this.global.treeInfo.trees.ValDef]">preSuperFields</a><span class="delimiter">(</span><a href="#495725" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

      <span class="comment">// generate code to copy pre-initialized fields</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496328">stat</a> &lt;- <a href="#495979" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#495745" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#496328" title="Constructors.this.global.Tree">stat</a>
        <a href="#496328" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496344">mods</a>, <a title="Constructors.this.global.TermName" id="496345">name</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#496344" title="Constructors.this.global.Modifiers">mods</a> <span title="(flag: Long)Boolean">hasFlag</span> <span title="Long(137438953472L)">PRESUPER</span><span class="delimiter">)</span> =&gt;
            <span class="comment">// stat is the constructor-local definition of the field value</span>
            <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.trees.ValDef]" id="496346">fields</a> = <a href="#495747" title="List[Constructors.this.global.treeInfo.trees.ValDef]">presupers</a> <span title="(p: Constructors.this.global.treeInfo.trees.ValDef =&gt; Boolean)List[Constructors.this.global.treeInfo.trees.ValDef]">filter</span> <span class="delimiter">(</span>
              <a title="Constructors.this.global.treeInfo.trees.ValDef" id="496351">vdef</a> =&gt; <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115619" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#496351" title="Constructors.this.global.treeInfo.trees.ValDef">vdef</a>.<span title="=&gt; Constructors.this.global.treeInfo.trees.TermName">name</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#496345" title="Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#496346" title="List[Constructors.this.global.treeInfo.trees.ValDef]">fields</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.treeInfo.trees.Symbol" id="496347">to</a> = <a href="#496346" title="List[Constructors.this.global.treeInfo.trees.ValDef]">fields</a>.<span title="=&gt; Constructors.this.global.treeInfo.trees.ValDef">head</span>.<span title="=&gt; Constructors.this.global.treeInfo.trees.Symbol">symbol</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#496347" title="Constructors.this.global.treeInfo.trees.Symbol">to</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.treeInfo.trees.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../symtab/Types.scala.html#67424" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span>
              <a href="#495745" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#495741" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#496347" title="Constructors.this.global.treeInfo.trees.Symbol">to</a>, <a href="../ast/Trees.scala.html#67802" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#496328" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// Triage all template definitions to go into defBuf/auxConstructorBuf, constrStatBuf, or constrPrefixBuf.</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496418">stat</a> &lt;- <a href="#495725" title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</a><span class="delimiter">)</span> <a href="#496418" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Any">DefDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496427">mods</a>, <a title="Constructors.this.global.TermName" id="496428">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="496429">tparams</a>, <a title="List[List[Constructors.this.global.ValDef]]" id="496430">vparamss</a>, <a title="Constructors.this.global.Tree" id="496431">tpt</a>, <a title="Constructors.this.global.Tree" id="496432">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// methods with constant result type get literals as their body</span>
          <span class="comment">// all methods except the primary constructor go into template</span>
          <a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="defBuf.type">MethodType</span><span class="delimiter">(</span><a href="#496437" title="(x: List[Constructors.this.global.Symbol])Some[List[Constructors.this.global.Symbol]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Constructors.this.global.ConstantType" id="496448">tp</a> @ ConstantType<span class="delimiter">(</span><a title="Constructors.this.global.Constant" id="496450">c</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="../ast/Trees.scala.html#162504" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162409" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
                <a href="#496418" title="Constructors.this.global.Tree">stat</a>, <a href="#496427" title="Constructors.this.global.Modifiers">mods</a>, <a href="#496428" title="Constructors.this.global.TermName">name</a>, <a href="#496429" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#496430" title="List[List[Constructors.this.global.ValDef]]">vparamss</a>, <a href="#496431" title="Constructors.this.global.Tree">tpt</a>,
                <a href="../ast/TreeDSL.scala.html#105692" title="(value: Constructors.this.global.Constant)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#496450" title="Constructors.this.global.Constant">c</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.Literal">setPos</span> <a href="#496432" title="Constructors.this.global.Tree">rhs</a>.<span title="=&gt; Constructors.this.global.Position">pos</span> <span title="(tp: Constructors.this.global.Type)Constructors.this.global.Literal">setType</span> <a href="#496448" title="Constructors.this.global.ConstantType">tp</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Any">_</span> =&gt;
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107378" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107334" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <a href="#495744" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a> <span title="(x: Constructors.this.global.Tree)auxConstructorBuf.type">+=</span> <a href="#496418" title="Constructors.this.global.Tree">stat</a>
              <span class="keyword">else</span> <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#496418" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496523">mods</a>, <a title="Constructors.this.global.TermName" id="496524">name</a>, <a title="Constructors.this.global.Tree" id="496525">tpt</a>, <a title="Constructors.this.global.Tree" id="496526">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// val defs with constant right-hand sides are eliminated.</span>
          <span class="comment">// for all other val defs, an empty valdef goes into the template and </span>
          <span class="comment">// the initializer goes as an assignment into the constructor</span>
          <span class="comment">// if the val def is an early initialized or a parameter accessor, it goes</span>
          <span class="comment">// before the superclass constructor call, otherwise it goes after.</span>
          <span class="comment">// Lazy vals don't get the assignment in the constructor.</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../symtab/Types.scala.html#67424" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#496526" title="Constructors.this.global.Tree">rhs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../ast/TreeDSL.scala.html#105692" title="object Constructors.this.global.EmptyTree">EmptyTree</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; Boolean">isLazy</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="496532">rhs1</a> = <a href="#495739" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496526" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span>;
              <span class="delimiter">(</span><span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#495740" title="(tree: Constructors.this.global.Tree)Boolean">canBeMoved</a><span class="delimiter">(</span><a href="#496418" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#495746" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a> <span class="keyword">else</span> <a href="#495745" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a><span class="delimiter">)</span> <span title="(x: Constructors.this.global.Tree)scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">+=</span> <a href="#495741" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span>
                <a href="#496418" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496532" title="Constructors.this.global.Tree">rhs1</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="../ast/Trees.scala.html#162504" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162408" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#496418" title="Constructors.this.global.Tree">stat</a>, <a href="#496523" title="Constructors.this.global.Modifiers">mods</a>, <a href="#496524" title="Constructors.this.global.TermName">name</a>, <a href="#496525" title="Constructors.this.global.Tree">tpt</a>, <a href="../ast/TreeDSL.scala.html#105692" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="defBuf.type">ClassDef</span><span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          <span class="comment">// classes are treated recursively, and left in the template</span>
          <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#111786" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#495717" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>.<a href="#495716" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496418" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="constrStatBuf.type">_</span> =&gt;
          <span class="comment">// all other statements go into the constructor</span>
          <a href="#495745" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#495739" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496418" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">// ----------- avoid making fields for symbols that are not accessed --------------</span>

      <span class="comment">// A sorted set of symbols that are known to be accessed outside the primary constructor.</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" id="495748">accessedSyms</a> = <span title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" class="keyword">new</span> <a href="../util/TreeSet.scala.html#30479" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">TreeSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496626">x</a>, <a title="Constructors.this.global.Symbol" id="496627">y</a><span class="delimiter">)</span> =&gt; <a href="#496626" title="Constructors.this.global.Symbol">x</a> <a href="../symtab/Symbols.scala.html#107445" title="(that: Constructors.this.global.Symbol)Boolean">isLess</a> <a href="#496627" title="Constructors.this.global.Symbol">y</a><span class="delimiter">)</span>

      <span class="comment">// a list of outer accessor symbols and their bodies</span>
      <span class="keyword">var</span> <a title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]" id="495749">outerAccessors</a>: <span title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Symbol, Tree<span class="delimiter">)</span><span class="delimiter">]</span> = List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

      <span class="comment">// Could symbol's definition be omitted, provided it is not accessed?</span>
      <span class="comment">// This is the case if the symbol is defined in the current class, and</span>
      <span class="comment">// ( the symbol is an object private parameter accessor field, or</span>
      <span class="comment">//   the symbol is an outer accessor of a final class which does not override another outer accessor. )</span>
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="495750">maybeOmittable</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496636">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#496636" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
        <a href="#496636" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isParamAccessor</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496636" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivateLocal</span> <span title="(x: Boolean)Boolean">||</span>
        <a href="#496636" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107371" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496636" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isFinal</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496636" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107491" title="=&gt; List[Constructors.this.global.Symbol]">allOverriddenSymbols</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
        <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <a href="../symtab/Symbols.scala.html#107448" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../symtab/Definitions.scala.html#106197" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

      <span class="comment">// Is symbol known to be accessed outside of the primary constructor,</span>
      <span class="comment">// or is it a symbol whose definition cannot be omitted anyway? </span>
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="495751">mustbeKept</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496645">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="#495750" title="(sym: Constructors.this.global.Symbol)Boolean">maybeOmittable</a><span class="delimiter">(</span><a href="#496645" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#495748" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../util/Set.scala.html#120166" title="(x: Constructors.this.global.Symbol)Boolean">contains</a> <a href="#496645" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="comment">// A traverser to set accessedSyms and outerAccessors</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.Traverser" id="495752">accessTraverser</a> = <a href="#496649" title="Constructors.this.global.Traverser" class="keyword">new</a> <a href="../ast/Trees.scala.html#67826" title="anonymous class $anon extends Constructors.this.global.Traverser" id="496649">Traverser</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Unit" id="496651">traverse</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496652">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#496652" title="Constructors.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">DefDef</span><span class="delimiter">(</span>_, _, _, _, _, <a title="Constructors.this.global.Tree" id="496669">body</a><span class="delimiter">)</span> 
            <span class="keyword">if</span> <span class="delimiter">(</span><a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107371" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<span title="=&gt; Boolean">isFinal</span><span class="delimiter">)</span> =&gt;
              <a href="../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;outerAccessors += &quot;)" class="string">&quot;outerAccessors += &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
              <a href="#495749" title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">outerAccessors</a> <span title="(x: (Constructors.this.global.Symbol, Constructors.this.global.Tree))List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">::=</span> <span class="delimiter">(</span><a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496669" title="Constructors.this.global.Tree">body</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#495751" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;accessedSyms += &quot;)" class="string">&quot;accessedSyms += &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
                <a href="#495748" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../util/TreeSet.scala.html#496620" title="(x: Constructors.this.global.Symbol)Unit">addEntry</a> <a href="#496652" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>
              <span class="delimiter">}</span>
              <a href="#496649" title="Constructors.this.global.Traverser" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162606" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496652" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
              <a href="#496649" title="Constructors.this.global.Traverser" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162606" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496652" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// first traverse all definitions except outeraccesors </span>
      <span class="comment">// (outeraccessors are avoided in accessTraverser)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496736">stat</a> &lt;- <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span> <span title="(f: Constructors.this.global.Tree =&gt; Unit)Unit">++</span> <a href="#495744" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span><span class="delimiter">)</span>
        <a href="#495752" title="Constructors.this.global.Traverser">accessTraverser</a>.<a href="../ast/Trees.scala.html#162606" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496736" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> 

      <span class="comment">// then traverse all bodies of outeraccessors which are accessed themselves</span>
      <span class="comment">// note: this relies on the fact that an outer accessor never calls another</span>
      <span class="comment">// outer accessor in the same class.</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496778">accSym</a>, <a title="Constructors.this.global.Tree" id="496779">accBody</a><span class="delimiter">)</span> &lt;- <a href="#495749" title="(f: (Constructors.this.global.Symbol, Constructors.this.global.Tree) =&gt; Unit)Unit">outerAccessors</a><span class="delimiter">)</span> 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#495751" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#496778" title="Constructors.this.global.Symbol">accSym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#495752" title="Constructors.this.global.Traverser">accessTraverser</a>.<a href="../ast/Trees.scala.html#162606" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496779" title="Constructors.this.global.Tree">accBody</a><span class="delimiter">)</span>

      <span class="comment">// Conflicting symbol list from parents: see bug #1960.</span>
      <span class="comment">// It would be better to mangle the constructor parameter name since</span>
      <span class="comment">// it can only be used internally, but I think we need more robust name</span>
      <span class="comment">// mangling before we introduce more of it.</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[Constructors.this.global.Name,Constructors.this.global.Tree]" id="495753">parentSymbols</a> = <span title="(elems: (Constructors.this.global.Name, Constructors.this.global.Tree)*)scala.collection.immutable.Map[Constructors.this.global.Name,Constructors.this.global.Tree]">Map</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
        <a title="Constructors.this.global.Tree" id="496797">p</a> &lt;- <a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="(f: Constructors.this.global.Tree =&gt; scala.collection.GenTraversableOnce[(Constructors.this.global.Name, Constructors.this.global.Tree)])(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Tree],(Constructors.this.global.Name, Constructors.this.global.Tree),List[(Constructors.this.global.Name, Constructors.this.global.Tree)]])List[(Constructors.this.global.Name, Constructors.this.global.Tree)]">parents</span>
        <span class="keyword">if</span> <a href="#496797" title="Constructors.this.global.Tree">p</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107339" title="=&gt; Boolean">isTrait</a>
        <a title="Constructors.this.global.Symbol" id="496813">sym</a> &lt;- <a href="#496797" title="Constructors.this.global.Tree">p</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105350" title="(f: Constructors.this.global.Symbol =&gt; (Constructors.this.global.Name, Constructors.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Symbol],(Constructors.this.global.Name, Constructors.this.global.Tree),List[(Constructors.this.global.Name, Constructors.this.global.Tree)]])List[(Constructors.this.global.Name, Constructors.this.global.Tree)]">nonPrivateMembers</a>
        <span class="keyword">if</span> <a href="#496813" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107325" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496813" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107372" title="=&gt; Boolean">isOuterField</a>
      <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#496813" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107407" title="(x: Constructors.this.global.Name)ArrowAssoc[Constructors.this.global.Name]">name</a> <span title="(y: Constructors.this.global.Tree)(Constructors.this.global.Name, Constructors.this.global.Tree)">-&gt;</span> <a href="#496797" title="Constructors.this.global.Tree">p</a><span class="delimiter">)</span>: _*<span class="delimiter">)</span>

      <span class="comment">// Initialize all parameters fields that must be kept.</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="495754">paramInits</a> = 
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496895">acc</a> &lt;- <a href="#495734" title="(f: Constructors.this.global.Symbol =&gt; Constructors.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Symbol],Constructors.this.global.Tree,List[Constructors.this.global.Tree]])List[Constructors.this.global.Tree]">paramAccessors</a> <span class="keyword">if</span> <a href="#495751" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#496895" title="Constructors.this.global.Symbol">acc</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>          
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#495753" title="scala.collection.immutable.Map[Constructors.this.global.Name,Constructors.this.global.Tree]">parentSymbols</a> <span title="(key: Constructors.this.global.Name)Boolean">contains</span> <a href="#496895" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span>
            <a href="#495717" title="Constructors.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#96430" title="(pos: Constructors.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#496895" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107263" title="=&gt; Constructors.this.global.Position">pos</a>, <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;parameter '%s' requires field but conflicts with %s in '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span>
              <a href="#496895" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a>, <a href="#496895" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a>, <a href="#495753" title="(key: Constructors.this.global.Name)Constructors.this.global.Tree">parentSymbols</a><span class="delimiter">(</span><a href="#496895" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          
          <a href="#495742" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree">copyParam</a><span class="delimiter">(</span><a href="#496895" title="Constructors.this.global.Symbol">acc</a>, <a href="#495735" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#496895" title="Constructors.this.global.Symbol">acc</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="comment">/** Return a single list of statements, merging the generic class constructor with the
       *  specialized stats. The original statements are retyped in the current class, and
       *  assignments to generic fields that have a corresponding specialized assignment in
       *  `specializedStats` are replaced by the specialized assignment.
       */</span>
      <span class="keyword">def</span> <a title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="495755">mergeConstructors</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496952">genericClazz</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a>, <a title="List[Constructors.this.global.Tree]" id="496953">originalStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[Constructors.this.global.Tree]" id="496954">specializedStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="496955">specBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
        <a href="#496955" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])specBuf.type">++=</span> <a href="#496954" title="List[Constructors.this.global.Tree]">specializedStats</a>

        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]" id="496956">specializedAssignFor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496966">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Option[Constructors.this.global.Tree]">Option</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
          <a href="#496954" title="List[Constructors.this.global.Tree]">specializedStats</a>.<span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <a href="#496973" title="Boolean" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="Boolean">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="496976">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="496984">rhs</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#496976" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a href="#496992" title="Constructors.this.global.Name" id="496986" class="delimiter">(</a><a title="Constructors.this.global.Name" id="496992">generic</a>, _, _<span class="delimiter">)</span> = <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115615" title="(name: Constructors.this.global.Name)(Constructors.this.global.Name, String, String)">splitSpecializedName</a><span title="(Constructors.this.global.Name, String, String) @unchecked" class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115619" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#496976" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../ast/TreeDSL.scala.html#105692" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#496986" title="Constructors.this.global.Name">generic</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115619" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#496966" title="Constructors.this.global.Symbol">sym</a>.<a href="../ast/TreeDSL.scala.html#105692" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>

        <span class="comment">/** Rewrite calls to ScalaRunTime.array_update to the proper apply method in scala.Array.
         *  Erasure transforms Array.update to ScalaRunTime.update when the element type is a type
         *  variable, but after specialization this is a concrete primitive type, so it would
         *  be an error to pass it to array_update(.., .., Object).
         */</span>
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="496957">rewriteArrayUpdate</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496997">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="496998">array_update</a> = <a href="../symtab/Definitions.scala.html#67688" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106180" title="=&gt; Constructors.this.global.Symbol">ScalaRunTimeModule</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105354" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">member</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#105692" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)Constructors.this.global.TermName" class="string">&quot;array_update&quot;</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="496999">adapter</a> = <a href="#497001" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#67825" title="anonymous class $anon extends Constructors.this.global.Transformer" id="497001">Transformer</a> <span class="delimiter">{</span>
            <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Constructors.this.global.Tree)Constructors.this.global.Tree" id="497003">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497004">t</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#497004" title="Constructors.this.global.Tree">t</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="497009">fun</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497014">receiver</a>, <a title="Constructors.this.global.Name" id="497015">method</a><span class="delimiter">)</span>, <a href="#497017" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497028">xs</a>, <a title="Constructors.this.global.Tree" id="497029">idx</a>, <a title="Constructors.this.global.Tree" id="497030">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#497009" title="Constructors.this.global.Select">fun</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#496998" title="Constructors.this.global.Symbol">array_update</a> =&gt;
                <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#105692" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#64832" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105436" title="(qual: Constructors.this.global.gen.global.Tree, sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedSelect</a><span class="delimiter">(</span><a href="#497028" title="Constructors.this.global.Tree">xs</a>, <a href="../symtab/Definitions.scala.html#67688" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106256" title="=&gt; Constructors.this.global.Symbol">Array_update</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#497029" title="Constructors.this.global.Tree">idx</a>, <a href="#497030" title="Constructors.this.global.Tree">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#497001" title="Constructors.this.global.Transformer" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#497004" title="Constructors.this.global.Tree">t</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#496999" title="Constructors.this.global.Transformer">adapter</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496997" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;merging: &quot;)" class="string">&quot;merging: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496953" title="List[Constructors.this.global.Tree]">originalStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012with\012&quot;)" class="string">&quot;\nwith\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496954" title="List[Constructors.this.global.Tree]">specializedStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]" id="496958">res</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497151">s</a> &lt;- <a href="#496953" title="(f: Constructors.this.global.Tree =&gt; (Constructors.this.global.Tree, Constructors.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Tree],(Constructors.this.global.Tree, Constructors.this.global.Tree),List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]])List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]">originalStats</a>; <span class="keyword">val</span> <a title="s.type" id="497152">stat</a> = <a href="#497151" title="Constructors.this.global.Tree">s</a>.<span title="=&gt; s.type">duplicate</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
          <a href="../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;merge: looking at &quot;)" class="string">&quot;merge: looking at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497152" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="497153">stat1</a> = <a href="#497152" title="Constructors.this.global.Tree">stat</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="497156">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="Constructors.this.global.Name" id="497164">field</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt;
              <a href="#496956" title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]">specializedAssignFor</a><span class="delimiter">(</span><a href="#497156" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="(default: =&gt; Constructors.this.global.Tree)Constructors.this.global.Tree">getOrElse</span><span class="delimiter">(</span><a href="#497152" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#497152" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#497153" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#497152" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;replaced &quot;)" class="string">&quot;replaced &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497152" title="Constructors.this.global.Tree">stat</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497153" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            <a href="#496955" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(elem: Constructors.this.global.Tree)specBuf.type">-=</span> <a href="#497153" title="Constructors.this.global.Tree">stat1</a>
          <span class="delimiter">}</span>

          <span title="d.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#497153" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#497152" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#111784" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#496952" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#495978" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
            <span class="comment">// this is just to make private fields public</span>
            <span class="delimiter">(</span><a href="../ast/Trees.scala.html#167590" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" class="keyword">new</a> <a href="../Global.scala.html#64916" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#110969" title="Constructors.this.global.specializeTypes.ImplementationAdapter">ImplementationAdapter</a><span class="delimiter">(</span><a href="#111784" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#496952" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>, <a href="#495978" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#497153" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="497186">stat2</a> = <a href="#496957" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">rewriteArrayUpdate</a><span class="delimiter">(</span><a href="#497153" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            <span class="comment">// statements coming from the original class need retyping in the current context</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36760" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../Global.scala.html#64872" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;retyping &quot;)" class="string">&quot;retyping &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497186" title="Constructors.this.global.Tree">stat2</a><span class="delimiter">)</span>
            
            <span class="keyword">val</span> <a title="Constructors.this.global.specializeTypes.Duplicator" id="497187">d</a> = <span title="Constructors.this.global.specializeTypes.Duplicator" class="keyword">new</span> <a href="../Global.scala.html#64916" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#110968" title="Constructors.this.global.specializeTypes.Duplicator">Duplicator</a>
            <a href="#497187" title="Constructors.this.global.specializeTypes.Duplicator">d</a>.<a href="../typechecker/Duplicators.scala.html#497267" title="(context: d.Context, tree: d.global.Tree, oldThis: d.global.Symbol, newThis: d.global.Symbol, env: scala.collection.Map[d.global.Symbol,d.global.Type])d.global.Tree">retyped</a><span class="delimiter">(</span><a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105832" title="=&gt; Constructors.this.global.analyzer.Context">context1</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="d.Context" class="delimiter">[</span>d.<a href="../typechecker/Contexts.scala.html#105513" title="d.Context">Context</a><span class="delimiter">]</span>,
                      <a href="#497186" title="Constructors.this.global.Tree">stat2</a>,
                      <a href="#496952" title="Constructors.this.global.Symbol">genericClazz</a>,
                      <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>,
                      <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[d.global.Symbol,Nothing]">empty</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#497153" title="Constructors.this.global.Tree">stat1</a>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#496955" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;residual specialized constructor statements: &quot;)" class="string">&quot;residual specialized constructor statements: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496955" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a><span class="delimiter">)</span>
        <a href="#496958" title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]">res</a>
      <span class="delimiter">}</span>

      <span class="comment">/** Add an 'if' around the statements coming after the super constructor. This
       *  guard is necessary if the code uses specialized fields. A specialized field is
       *  initialized in the subclass constructor, but the accessors are (already) overridden
       *  and pointing to the (empty) fields. To fix this, a class with specialized fields
       *  will not run its constructor statements if the instance is specialized. The specialized
       *  subclass includes a copy of those constructor statements, and runs them. To flag that a class
       *  has specialized fields, and their initialization should be deferred to the subclass, method
       *  'specInstance$' is added in phase specialize.
       */</span>
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="495756">guardSpecializedInitializer</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="497374">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64818" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36668" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">nospecialization</a>.<a href="../settings/MutableSettings.scala.html#42162" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#497374" title="List[Constructors.this.global.Tree]">stats</a> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// split the statements in presuper and postsuper</span>
    <span class="comment">//    var (prefix, postfix) = stats0.span(tree =&gt; !((tree.symbol ne null) &amp;&amp; tree.symbol.isConstructor))</span>
      <span class="comment">//  if (postfix.nonEmpty) {</span>
        <span class="comment">//  prefix = prefix :+ postfix.head</span>
          <span class="comment">//postfix = postfix.tail</span>
        <span class="comment">//}</span>

        <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#495737" title="Boolean">usesSpecializedField</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#495728" title="Boolean">shouldGuard</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#497374" title="List[Constructors.this.global.Tree]">stats</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// save them for duplication in the specialized subclass</span>
          <a href="#111782" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Tree])Unit">guardedCtorStats</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#497374" title="List[Constructors.this.global.Tree]">stats</a>
          <a href="#111784" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Symbol])Unit">ctorParams</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#495978" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>

          <span class="keyword">val</span> <a title="Constructors.this.global.If" id="497380">tree</a> =
            <a href="../ast/TreeDSL.scala.html#105692" title="(cond: Constructors.this.global.Tree, thenp: Constructors.this.global.Tree, elsep: Constructors.this.global.Tree)Constructors.this.global.If">If</a><span class="delimiter">(</span>
              <a href="../ast/TreeDSL.scala.html#105692" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span>
                  <a href="../ast/TreeDSL.scala.html#105692" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#64832" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105427" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="#495727" title="Constructors.this.global.Symbol">specializedFlag</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../symtab/Definitions.scala.html#67688" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106496" title="(owner: Constructors.this.global.Symbol, name: Constructors.this.global.Name)Constructors.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67688" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106593" title="=&gt; Constructors.this.global.Symbol">BooleanClass</a>, <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115580" title="=&gt; Constructors.this.global.TermName">UNARY_!</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#105692" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#497374" title="List[Constructors.this.global.Tree]">stats</a>, <a href="../ast/TreeDSL.scala.html#105692" title="(value: Any)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#105692" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>

          <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#497380" title="Constructors.this.global.If">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// add initialization from its generic class constructor</span>
          <span class="keyword">val</span> <a href="#497477" title="Constructors.this.global.Name" id="497472" class="delimiter">(</a><a title="Constructors.this.global.Name" id="497477">genericName</a>, _, _<span class="delimiter">)</span> = <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115615" title="(name: Constructors.this.global.Name)(Constructors.this.global.Name, String, String)">splitSpecializedName</a><span title="(Constructors.this.global.Name, String, String) @unchecked" class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107407" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="497473">genericClazz</a> = <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105347" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="#497472" title="Constructors.this.global.Name">genericName</a>.<a href="../symtab/Names.scala.html#96578" title="=&gt; Constructors.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#497473" title="Constructors.this.global.Symbol">genericClazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>

          <a href="#111782" title="=&gt; scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">guardedCtorStats</a>.<span title="(key: Constructors.this.global.Symbol)Option[List[Constructors.this.global.Tree]]">get</span><span class="delimiter">(</span><a href="#497473" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span> <span title="List[Constructors.this.global.Tree]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">Some</span><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="497492">stats1</a><span class="delimiter">)</span> =&gt; <a href="#495755" title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">mergeConstructors</a><span class="delimiter">(</span><a href="#497473" title="Constructors.this.global.Symbol">genericClazz</a>, <a href="#497492" title="List[Constructors.this.global.Tree]">stats1</a>, <a href="#497374" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">None</span> =&gt; <a href="#497374" title="List[Constructors.this.global.Tree]">stats</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#497374" title="List[Constructors.this.global.Tree]">stats</a>
      <span class="delimiter">}</span>
<span class="comment">/*
      def isInitDef(stat: Tree) = stat match {
        case dd: DefDef =&gt; dd.symbol == delayedInitMethod
        case _ =&gt; false
      }
*/</span>
      
      <span class="comment">/** Create a getter or a setter and enter into `clazz` scope
       */</span>
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.MethodSymbol" id="495757">addAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497493">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.TermName" id="497494">name</a>: <a href="../symtab/Names.scala.html#66915" title="Constructors.this.global.TermName">TermName</a>, <a title="Long" id="497495">flags</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497496">m</a> = <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107284" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TermName)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#497493" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107263" title="=&gt; Constructors.this.global.Position">pos</a>, <a href="#497494" title="Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
          .<a href="../symtab/Symbols.scala.html#107412" title="(mask: Long)Constructors.this.global.MethodSymbol">setFlag</a><span class="delimiter">(</span><a href="#497495" title="Long">flags</a> <span title="(x: Int)Long">&amp;</span> <span title="=&gt; Int">~</span><span title="Int(524288)">LOCAL</span> <span title="(x: Int)Long">&amp;</span> <span title="=&gt; Int">~</span><span title="Int(4)">PRIVATE</span><span class="delimiter">)</span>
        <a href="#497496" title="Constructors.this.global.MethodSymbol">m</a>.<a href="../symtab/Symbols.scala.html#107278" title="(sym: Constructors.this.global.Symbol)Unit">privateWithin</a> = <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>
        <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105346" title="=&gt; Constructors.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#112946" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a><span class="delimiter">(</span><a href="#497496" title="Constructors.this.global.MethodSymbol">m</a><span class="delimiter">)</span>
        <a href="#497496" title="Constructors.this.global.MethodSymbol">m</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495758">addGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497533">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497534">getr</a> = <a href="#495757" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.MethodSymbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#497533" title="Constructors.this.global.Symbol">sym</a>, <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115616" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#497533" title="Constructors.this.global.Symbol">sym</a>.<a href="../ast/TreeDSL.scala.html#105692" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span>, <a href="../symtab/Flags.scala.html#67080" title="(fieldFlags: Long)Long">getterFlags</a><span class="delimiter">(</span><a href="#497533" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107410" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#497534" title="Constructors.this.global.MethodSymbol">getr</a> <a href="../symtab/Symbols.scala.html#107425" title="(info: Constructors.this.global.Type)getr.type">setInfo</a> <a href="../symtab/Types.scala.html#148698" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#497533" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <span class="comment">//util.trace(&quot;adding getter def for &quot;+getr) {</span>
          <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.DefDef)Constructors.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#497533" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107263" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../ast/Trees.scala.html#67790" title="(sym: Constructors.this.global.Symbol, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#497534" title="Constructors.this.global.MethodSymbol">getr</a>, <a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67800" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#497533" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="comment">//}</span>
        <span class="delimiter">}</span>
        <a href="#497534" title="Constructors.this.global.MethodSymbol">getr</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495759">addSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497618">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <a href="#497618" title="Constructors.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107412" title="(mask: Long)sym.type">setFlag</a> <span title="Long(4096L)">MUTABLE</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497619">setr</a> = <a href="#495757" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.MethodSymbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#497618" title="Constructors.this.global.Symbol">sym</a>, <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115618" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterToSetter</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115616" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#497618" title="Constructors.this.global.Symbol">sym</a>.<a href="../ast/TreeDSL.scala.html#105692" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../symtab/Flags.scala.html#67081" title="(fieldFlags: Long)Long">setterFlags</a><span class="delimiter">(</span><a href="#497618" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107410" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span> 
        <a href="#497619" title="Constructors.this.global.MethodSymbol">setr</a> <a href="../symtab/Symbols.scala.html#107425" title="(info: Constructors.this.global.Type)setr.type">setInfo</a> <a href="../symtab/Types.scala.html#148698" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#497619" title="Constructors.this.global.MethodSymbol">setr</a>.<a href="../symtab/Symbols.scala.html#107305" title="(argtypes: List[Constructors.this.global.Type])List[Constructors.this.global.Symbol]">newSyntheticValueParams</a><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="#497618" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106577" title="=&gt; Constructors.this.global.Symbol">UnitClass</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <span class="comment">//util.trace(&quot;adding setter def for &quot;+setr) {</span>
          <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.DefDef)Constructors.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#497618" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107263" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../ast/Trees.scala.html#67791" title="(sym: Constructors.this.global.Symbol, rhs: List[List[Constructors.this.global.Symbol]] =&gt; Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#497619" title="Constructors.this.global.MethodSymbol">setr</a>, <a title="List[List[Constructors.this.global.Symbol]]" id="497653">paramss</a> =&gt; 
              <a href="../ast/TreeDSL.scala.html#105692" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67800" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#497618" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="../ast/Trees.scala.html#67802" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#497653" title="List[List[Constructors.this.global.Symbol]]">paramss</a>.<span title="=&gt; List[Constructors.this.global.Symbol]">head</span>.<span title="=&gt; Constructors.this.global.Symbol">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="comment">//}</span>
        <span class="delimiter">}</span>
        <a href="#497619" title="Constructors.this.global.MethodSymbol">setr</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495760">ensureAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497698">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Constructors.this.global.Symbol" id="497699">acc</a>: =&gt; Symbol<span class="delimiter">)</span> = 
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#497698" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#497698" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#497698" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivate</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// there's an access to a naked field of the enclosing class</span>
          <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="497705">getr</a> = <a href="#497699" title="=&gt; Constructors.this.global.Symbol">acc</a>
          <a href="#497705" title="Constructors.this.global.Symbol">getr</a> <a href="../symtab/Symbols.scala.html#107500" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>
          <a href="#497705" title="Constructors.this.global.Symbol">getr</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497698" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107400" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#497698" title="Constructors.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107500" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>
          <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495761">ensureGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497713">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#495760" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#497713" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="497714">getr</a> = <a href="#497713" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107494" title="(base: Constructors.this.global.Symbol)Constructors.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#497714" title="Constructors.this.global.Symbol">getr</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#497714" title="Constructors.this.global.Symbol">getr</a> <span class="keyword">else</span> <a href="#495758" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addGetter</a><span class="delimiter">(</span><a href="#497713" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495762">ensureSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497720">sym</a>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67320" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#495760" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#497720" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="497721">setr</a> = <a href="#497720" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107496" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497721" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#497721" title="Constructors.this.global.Symbol">setr</a> = <a href="#497720" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107496" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497721" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#497721" title="Constructors.this.global.Symbol">setr</a> = <a href="#495759" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addSetter</a><span class="delimiter">(</span><a href="#497720" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <a href="#497721" title="Constructors.this.global.Symbol">setr</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree" id="495763">delayedInitClosure</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="497739">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = 
        <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.ClassDef)Constructors.this.global.ClassDef">atPos</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> 
            <span class="keyword">val</span> <a title="Constructors.this.global.ClassSymbol" id="497746">closureClass</a> = <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107308" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TypeName)Constructors.this.global.ClassSymbol">newClass</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115340" title="=&gt; Constructors.this.global.nme.NameType">delayedInitArg</a>.<a href="../symtab/Names.scala.html#96636" title="=&gt; Constructors.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107412" title="(mask: Long)Constructors.this.global.ClassSymbol">setFlag</a><span class="delimiter">(</span>SYNTHETIC <span title="Long(2097184L)">|</span> FINAL<span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="List[Constructors.this.global.Type]" id="497747">closureParents</a> = <span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106330" title="(i: Int)Constructors.this.global.Symbol">AbstractFunctionClass</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a>, <a href="../symtab/Definitions.scala.html#106153" title="=&gt; Constructors.this.global.Symbol">ScalaObjectClass</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
            <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107425" title="(info: Constructors.this.global.Type)closureClass.type">setInfo</a><span class="delimiter">(</span><span title="Constructors.this.global.ClassInfoType" class="keyword">new</span> <a href="../symtab/Types.scala.html#67420" title="Constructors.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#497747" title="List[Constructors.this.global.Type]">closureParents</a>, <a href="../symtab/Scopes.scala.html#112939" title="()Constructors.this.global.Scope" class="keyword">new</a> <a href="../symtab/Scopes.scala.html#67680" title="Constructors.this.global.Scope">Scope</a>, <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.TermSymbol" id="497748">outerField</a> = <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107279" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TermName)Constructors.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115286" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107412" title="(mask: Long)Constructors.this.global.TermSymbol">setFlag</a><span class="delimiter">(</span>PRIVATE | LOCAL <span title="Long(537395204L)">|</span> PARAMACCESSOR<span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107425" title="(info: Constructors.this.global.Type)Constructors.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497749">applyMethod</a> = <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107284" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TermName)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../symtab/StdNames.scala.html#67713" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115310" title="=&gt; Constructors.this.global.nme.NameType">apply</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107412" title="(mask: Long)Constructors.this.global.MethodSymbol">setFlag</a><span class="delimiter">(</span><span title="Long(32L)">FINAL</span><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107425" title="(info: Constructors.this.global.Type)Constructors.this.global.MethodSymbol">setInfo</a><span class="delimiter">(</span><a href="../symtab/Types.scala.html#148698" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106079" title="=&gt; Constructors.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105346" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../symtab/Scopes.scala.html#112946" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a> <a href="#497748" title="Constructors.this.global.TermSymbol">outerField</a>
            <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105346" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../symtab/Scopes.scala.html#112946" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a> <a href="#497749" title="Constructors.this.global.MethodSymbol">applyMethod</a>

            <span class="keyword">val</span> <a title="Constructors.this.global.ValDef" id="497750">outerFieldDef</a> = <a href="../ast/Trees.scala.html#67784" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#497748" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.ChangeOwnerTraverser" id="497751">changeOwner</a> = <span title="Constructors.this.global.ChangeOwnerTraverser" class="keyword">new</span> <a href="../ast/Trees.scala.html#67837" title="Constructors.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#497749" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="497752">closureClassTyper</a> = <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105920" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="497753">applyMethodTyper</a> = <a href="#497752" title="Constructors.this.global.analyzer.Typer">closureClassTyper</a>.<a href="../typechecker/Typers.scala.html#105920" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#497749" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="497754">constrStatTransformer</a> = <a href="#497891" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#67825" title="anonymous class $anon extends Constructors.this.global.Transformer" id="497891">Transformer</a> <span class="delimiter">{</span>
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="497893">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497894">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#497894" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">This</span><span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#497894" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495724" title="Constructors.this.global.Symbol">clazz</a> =&gt; 
                  <a href="#497753" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                    <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Select)Constructors.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#497894" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67800" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>, <a href="#497748" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
                  <a href="#497891" title="Constructors.this.global.Transformer" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a> <span class="delimiter">{</span>
                    <a href="#497894" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497951">qual</a>, _<span class="delimiter">)</span> =&gt; 
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="497952">getter</a> = <a href="#495761" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureGetter</a><span class="delimiter">(</span><a href="#497894" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#497952" title="Constructors.this.global.Symbol">getter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#497753" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#497894" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#105692" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#497951" title="Constructors.this.global.Tree">qual</a>, <a href="#497952" title="Constructors.this.global.Symbol">getter</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#497894" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="497994">lhs</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497999">qual</a>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="498000">rhs</a><span class="delimiter">)</span> =&gt;
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="498001">setter</a> = <a href="#495762" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureSetter</a><span class="delimiter">(</span><a href="#497994" title="Constructors.this.global.Select">lhs</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#498001" title="Constructors.this.global.Symbol">setter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67328" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#497753" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#497894" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#105692" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#497999" title="Constructors.this.global.Tree">qual</a>, <a href="#498001" title="Constructors.this.global.Symbol">setter</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#498000" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#497894" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; 
                        <a href="#497751" title="Constructors.this.global.ChangeOwnerTraverser">changeOwner</a>.<a href="../ast/Trees.scala.html#162796" title="(tree: Constructors.this.global.Tree)Unit">changeOwner</a><span class="delimiter">(</span><a href="#497894" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
                        <a href="#497894" title="Constructors.this.global.Tree">tree</a>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span> 
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>

            <span class="keyword">def</span> <a title="=&gt; List[Constructors.this.global.Tree]" id="497755">applyMethodStats</a> = <a href="#497754" title="Constructors.this.global.Transformer">constrStatTransformer</a>.<a href="../ast/Trees.scala.html#162513" title="(trees: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#497739" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.DefDef" id="497756">applyMethodDef</a> = <a href="../ast/Trees.scala.html#67788" title="(sym: Constructors.this.global.Symbol, vparamss: List[List[Constructors.this.global.ValDef]], rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
              sym = <a href="#497749" title="Constructors.this.global.MethodSymbol">applyMethod</a>,
              vparamss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              rhs = <a href="../ast/TreeDSL.scala.html#105692" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#497755" title="=&gt; List[Constructors.this.global.Tree]">applyMethodStats</a>, <a href="../Global.scala.html#64832" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105427" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106459" title="=&gt; Constructors.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              
            <a href="../ast/Trees.scala.html#67781" title="(sym: Constructors.this.global.Symbol, constrMods: Constructors.this.global.Modifiers, vparamss: List[List[Constructors.this.global.ValDef]], argss: List[List[Constructors.this.global.Tree]], body: List[Constructors.this.global.Tree], superPos: Constructors.this.global.Position)Constructors.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span>
              sym = <a href="#497746" title="Constructors.this.global.ClassSymbol">closureClass</a>,
              constrMods = <a href="../ast/TreeDSL.scala.html#105692" title="(flags: Long)Constructors.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>,
              vparamss = <span title="(xs: List[Constructors.this.global.ValDef]*)List[List[Constructors.this.global.ValDef]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.ValDef*)List[Constructors.this.global.ValDef]">List</span><span class="delimiter">(</span><a href="#497750" title="Constructors.this.global.ValDef">outerFieldDef</a><span class="delimiter">)</span><span class="delimiter">)</span>,
              argss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              body = <span title="(xs: Constructors.this.global.DefDef*)List[Constructors.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="#497756" title="Constructors.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span>,
              superPos = <a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree" id="495764">delayedInitCall</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498171">closure</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = 
        <a href="#495726" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105922" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../ast/Trees.scala.html#67840" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> 
            <a href="../ast/TreeDSL.scala.html#105692" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="../ast/Trees.scala.html#67801" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67800" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106199" title="=&gt; Constructors.this.global.Symbol">delayedInitMethod</a><span class="delimiter">)</span>, 
              <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67798" title="(tpt: Constructors.this.global.Tree, argss: List[List[Constructors.this.global.Tree]])Constructors.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67807" title="(tp: Constructors.this.global.Type)Constructors.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#498171" title="Constructors.this.global.Tree">closure</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107421" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>, <span title="(xs: List[Constructors.this.global.Tree]*)List[List[Constructors.this.global.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67800" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="comment">/** Return a pair consisting of (all statements up to and including superclass and trait constr calls, rest) */</span>
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" id="495765">splitAtSuper</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="498261">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="498262">isConstr</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498269">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#498269" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#498269" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107334" title="=&gt; Boolean">isConstructor</a>
        <span class="keyword">val</span> <a href="#498264" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#498263" title="List[Constructors.this.global.Tree]" id="498264">pre</a>, <a href="#498263" title="List[Constructors.this.global.Tree]" id="498265">rest0</a><span class="delimiter">)</span> = <a href="#498261" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#498262" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#498275" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a href="#498267" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#498266" title="List[Constructors.this.global.Tree]" id="498267">supercalls</a>, <a href="#498266" title="List[Constructors.this.global.Tree]" id="498268">rest</a><span class="delimiter">)</span> = <a href="#498265" title="List[Constructors.this.global.Tree]">rest0</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><a href="#498262" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#498291" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="(_1: List[Constructors.this.global.Tree], _2: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</span><a href="#498264" title="List[Constructors.this.global.Tree]">pre</a> <a href="#498306" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#498267" title="List[Constructors.this.global.Tree]">supercalls</a>, <a href="#498268" title="List[Constructors.this.global.Tree]">rest</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a href="#495767" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#495766" title="List[Constructors.this.global.Tree]" id="495767">uptoSuperStats</a>, <a href="#495766" title="List[Constructors.this.global.Tree]" id="495768">remainingConstrStats</a><span class="delimiter">)</span> = <a href="#495765" title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">splitAtSuper</a><span title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree]) @unchecked" class="delimiter">(</span><a href="#495745" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Boolean" id="495769">needsDelayedInit</a> =
        <span class="delimiter">(</span><a href="#495724" title="Constructors.this.global.Symbol">clazz</a> <a href="../symtab/Symbols.scala.html#107448" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../symtab/Definitions.scala.html#106197" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> <span class="comment">/*&amp;&amp; !(defBuf exists isInitDef)*/</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#495768" title="List[Constructors.this.global.Tree]">remainingConstrStats</a>.<span title="=&gt; Boolean">nonEmpty</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#495769" title="Boolean">needsDelayedInit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="498329">dicl</a> = <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#111786" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#495717" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <a href="#495716" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a> <a href="#495763" title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree">delayedInitClosure</a><span class="delimiter">(</span><a href="#495768" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>
        <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#498329" title="Constructors.this.global.Tree">dicl</a>
        <a href="#495768" title="List[Constructors.this.global.Tree]">remainingConstrStats</a> = <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#495764" title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree">delayedInitCall</a><span class="delimiter">(</span><a href="#498329" title="Constructors.this.global.Tree">dicl</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">// Assemble final constructor</span>
      <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="../ast/Trees.scala.html#162504" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162409" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
        <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>, <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Modifiers">mods</span>, <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.TermName">name</span>, <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[Constructors.this.global.TypeDef]">tparams</span>, <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[List[Constructors.this.global.ValDef]]">vparamss</span>, <a href="#495977" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Tree">tpt</span>,
        <a href="../ast/Trees.scala.html#162504" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162415" title="(tree: Constructors.this.global.Tree, stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span>
          <a href="#495979" title="=&gt; Constructors.this.global.Block">constrBody</a>,
          <a href="#495754" title="List[Constructors.this.global.Tree]">paramInits</a> <a href="#498346" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#495746" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <a href="#498347" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#495767" title="List[Constructors.this.global.Tree]">uptoSuperStats</a> <a href="#498348" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> 
            <a href="#495756" title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">guardSpecializedInitializer</a><span class="delimiter">(</span><a href="#495768" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>,
          <a href="#495979" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="=&gt; Constructors.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>;

      <span class="comment">// Followed by any auxiliary constructors</span>
      <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])defBuf.type">++=</span> <a href="#495744" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>
      
      <span class="comment">// Unlink all fields that can be dropped from class scope</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="498397">sym</a> &lt;- <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105346" title="=&gt; Constructors.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#112957" title="(f: Constructors.this.global.Symbol =&gt; Unit)Unit">toList</a><span class="delimiter">)</span> 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#495751" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#498397" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// println(&quot;dropping &quot;+sym+sym.locationString)</span>
          <a href="#495724" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107423" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105346" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../symtab/Scopes.scala.html#112952" title="(sym: Constructors.this.global.Symbol)Unit">unlink</a> <a href="#498397" title="Constructors.this.global.Symbol">sym</a>
        <span class="delimiter">}</span>

      <span class="comment">// Eliminate all field definitions that can be dropped from template</span>
      <a href="../ast/Trees.scala.html#162504" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162414" title="(tree: Constructors.this.global.Tree, parents: List[Constructors.this.global.Tree], self: Constructors.this.global.ValDef, body: List[Constructors.this.global.Tree])Constructors.this.global.Template">Template</a><span class="delimiter">(</span><a href="#495722" title="Constructors.this.global.Template">impl</a>, <a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">parents</span>, <a href="#495722" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.ValDef">self</span>, 
        <a href="#495743" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)List[Constructors.this.global.Tree]">filter</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498417">stat</a> =&gt; <a href="#495751" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#498417" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="comment">// transformClassTemplate</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="495716">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496598">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = 
      <a href="#496598" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="498424">mods</a>, <a title="Constructors.this.global.TypeName" id="498425">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="498426">tparams</a>, <a title="Constructors.this.global.Template" id="498427">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#496598" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; Boolean">isInterface</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#106520" title="(sym: Constructors.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#496598" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#162504" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162405" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], impl: Constructors.this.global.Template)Constructors.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span><a href="#496598" title="Constructors.this.global.Tree">tree</a>, <a href="#498424" title="Constructors.this.global.Modifiers">mods</a>, <a href="#498425" title="Constructors.this.global.TypeName">name</a>, <a href="#498426" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#495715" title="(impl: Constructors.this.global.Template)Constructors.this.global.Template">transformClassTemplate</a><span class="delimiter">(</span><a href="#498427" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
          <a href="#111786" title="Constructors.this.ConstructorTransformer" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162512" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496598" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">// ConstructorTransformer</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>