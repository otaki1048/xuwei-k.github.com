<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/Constructors.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*  NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.<a href="../symtab/Flags.scala.html#24068" title="object scala.tools.nsc.symtab.Flags">Flags</a>._
<span class="keyword">import</span> util.TreeSet

<span class="comment">/** This phase converts classes with parameters into Java-like classes with 
 *  fields, which are assigned to from constructors.
 */</span>  
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Constructors extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="26148">Constructors</a> <a href="#26148" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#27198" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#11720" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#105833" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#67699" title="object Constructors.this.global.definitions">definitions</a>._

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <a title="String" id="111919">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;constructors&quot;)" class="string">&quot;constructors&quot;</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: Constructors.this.global.CompilationUnit)Constructors.this.global.Transformer" id="111921">newTransformer</a><span class="delimiter">(</span><a title="Constructors.this.global.CompilationUnit" id="495772">unit</a>: <a href="../CompilationUnits.scala.html#67953" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#67836" title="Constructors.this.global.Transformer">Transformer</a> =
    <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#111926" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#495772" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" id="111922">guardedCtorStats</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" id="111924">ctorParams</a>: mutable.<span title="scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">Map</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="()scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]]">HashMap</span><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">class</span> <a title="class ConstructorTransformer extends Constructors.this.global.Transformer with ScalaObject" id="111926">ConstructorTransformer</a><a href="#111926" title="ScalaObject" class="delimiter">(</a><a title="Constructors.this.global.CompilationUnit" id="495780">unit</a>: <a href="../CompilationUnits.scala.html#67953" title="Constructors.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#67836" title="Constructors.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(impl: Constructors.this.global.Template)Constructors.this.global.Template" id="495778">transformClassTemplate</a><span class="delimiter">(</span><a title="Constructors.this.global.Template" id="495785">impl</a>: <span title="Constructors.this.global.Template">Template</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Template">Template</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="495787">clazz</a> = <a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a>  <span class="comment">// the transformed class</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="495788">stats</a> = <a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">body</span>          <span class="comment">// the transformed template body</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="495789">localTyper</a> = <a href="../Global.scala.html#64965" title="object Constructors.this.global.typer">typer</a>.<a href="../typechecker/Typers.scala.html#106062" title="(tree: Constructors.this.global.analyzer.global.Tree, owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>, <a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="495790">specializedFlag</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105488" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115432" title="=&gt; Constructors.this.global.nme.NameType">SPECIALIZED_INSTANCE</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="495791">shouldGuard</a> = <span class="delimiter">(</span><a href="#495790" title="Constructors.this.global.Symbol">specializedFlag</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span>

      case <span class="keyword">class</span> <a title="class ConstrInfo extends java.lang.Object with ScalaObject with Product with Serializable" id="495891">ConstrInfo</a><a href="#495891" title="ScalaObject" class="delimiter">(</a>
        <a title="Constructors.this.global.DefDef" id="496040">constr</a>: <span title="Constructors.this.global.DefDef">DefDef</span>,               <span class="comment">// The primary constructor</span>
        <a title="List[Constructors.this.global.Symbol]" id="496041">constrParams</a>: <span title="List[Constructors.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>,   <span class="comment">// ... and its parameters</span>
        <a title="Constructors.this.global.Block" id="496042">constrBody</a>: <span title="Constructors.this.global.Block">Block</span>             <span class="comment">// ... and its body</span>
      <span class="delimiter">)</span>
      <span class="comment">// decompose primary constructor into the three entities above.</span>
      <span class="keyword">val</span> <a title="ConstrInfo" id="495795">constrInfo</a>: <a href="#495891" title="ConstrInfo">ConstrInfo</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Option[Constructors.this.global.Tree]" id="495953">primary</a> = <a href="#495788" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <span class="delimiter">(</span><a href="#495964" title="Constructors.this.global.Tree">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107519" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span>
        <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#495953" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Boolean">isDefined</span>, <span title="java.lang.String(&quot;no constructor in template: impl = &quot;)" class="string">&quot;no constructor in template: impl = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#495785" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span>
        
        <span class="keyword">val</span> <a title="(Constructors.this.global.DefDef, List[Constructors.this.global.ValDef], Constructors.this.global.Block)" id="495955">ddef</a> @ DefDef<span class="delimiter">(</span>_, _, _, <a href="#495991" title="(x: List[List[Constructors.this.global.ValDef]])Some[List[List[Constructors.this.global.ValDef]]]">List</a><span class="delimiter">(</span><a href="#495954" title="List[Constructors.this.global.ValDef]" id="495956">vparams</a><span class="delimiter">)</span>, _, <a href="#495954" title="Constructors.this.global.Block" id="495957">rhs</a> @ Block<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#495953" title="Option[Constructors.this.global.Tree]">primary</a>.<span title="=&gt; Constructors.this.global.Tree">get</span>
        <a href="#495891" title="(constr: Constructors.this.global.DefDef, constrParams: List[Constructors.this.global.Symbol], constrBody: Constructors.this.global.Block)ConstrInfo">ConstrInfo</a><span class="delimiter">(</span><a href="#495955" title="Constructors.this.global.DefDef">ddef</a>, <a href="#495956" title="List[Constructors.this.global.ValDef]">vparams</a> <span title="(f: Constructors.this.global.ValDef =&gt; Constructors.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.ValDef],Constructors.this.global.Symbol,List[Constructors.this.global.Symbol]])List[Constructors.this.global.Symbol]">map</span> <span class="delimiter">(</span><a href="#496066" title="Constructors.this.global.ValDef">_</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>, <a href="#495957" title="Constructors.this.global.Block">rhs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">import</span> <a href="#495795" title="ConstrInfo">constrInfo</a>._

      <span class="comment">// The parameter accessor fields which are members of the class</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Symbol]" id="495797">paramAccessors</a> = <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107602" title="=&gt; List[Constructors.this.global.Symbol]">constrParamAccessors</a>

      <span class="comment">// The constructor parameter corresponding to an accessor</span>
      <span class="keyword">def</span> <a title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495798">parameter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496094">acc</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = 
        <a href="#495799" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115756" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#496094" title="Constructors.this.global.Symbol">acc</a>.<a href="../ast/TreeDSL.scala.html#105833" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">originalName</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="comment">// The constructor parameter with given name. This means the parameter</span>
      <span class="comment">// has given name, or starts with given name, and continues with a `$' afterwards.</span>
      <span class="keyword">def</span> <a title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol" id="495799">parameterNamed</a><span class="delimiter">(</span><a title="Constructors.this.global.Name" id="496095">name</a>: <a href="../symtab/Names.scala.html#66925" title="Constructors.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(param: Constructors.this.global.Symbol)Boolean" id="496097">matchesName</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496098">param</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#496098" title="Constructors.this.global.Symbol">param</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#496095" title="Constructors.this.global.Name">name</a> <span title="(x: Boolean)Boolean">||</span> <a href="#496098" title="Constructors.this.global.Symbol">param</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#96627" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="#496095" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
        
        <span class="delimiter">(</span><a href="#496041" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a> <span title="(p: Constructors.this.global.Symbol =&gt; Boolean)List[Constructors.this.global.Symbol]">filter</span> <a href="#496097" title="(param: Constructors.this.global.Symbol)Boolean">matchesName</a><span class="delimiter">)</span> <span title="Constructors.this.global.Symbol" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Null">Nil</span>    =&gt; <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#496095" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot; not in &quot;)" class="string">&quot; not in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496041" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a><span class="delimiter">)</span> ; <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a title="Constructors.this.global.Symbol" id="496127">p</a> :: _ =&gt; <a href="#496127" title="Constructors.this.global.Symbol">p</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a title="Boolean" id="495800">usesSpecializedField</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

      <span class="comment">// A transformer for expressions that go into the constructor</span>
      <span class="keyword">val</span> <a title="intoConstructorTransformer extends Constructors.this.global.Transformer" id="495801">intoConstructorTransformer</a> = <a href="#496128" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">new</a> <a href="../ast/Trees.scala.html#67836" title="anonymous class $anon extends Constructors.this.global.Transformer" id="496128">Transformer</a> <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="496130">isParamRef</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496133">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = 
          <a href="#496133" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isParamAccessor</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <a href="#496133" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <a href="../symtab/Symbols.scala.html#107589" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../symtab/Definitions.scala.html#106338" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
          <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#496133" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107466" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496133" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107603" title="=&gt; Constructors.this.global.Symbol">accessed</a>.<a href="../symtab/Symbols.scala.html#107464" title="=&gt; Boolean">isVariable</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span title="=&gt; Boolean">!</span><a href="#496133" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107467" title="=&gt; Boolean">isSetter</a>
        <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Constructors.this.global.Symbol)Boolean" id="496131">possiblySpecialized</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496146">s</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../Global.scala.html#64927" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#111076" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#496146" title="Constructors.this.global.Symbol">s</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="496132">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496143">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#496143" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Apply</span><span class="delimiter">(</span>Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a href="#496180" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <span class="comment">// references to parameter accessor methods of own class become references to parameters</span>
            <span class="comment">// outer accessors become references to $outer parameter </span>
            <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#496130" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496131" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="../Global.scala.html#64843" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105576" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#495798" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107603" title="=&gt; Constructors.this.global.Symbol">accessed</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span> <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107610" title="=&gt; Constructors.this.global.Symbol">outerSource</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<span title="=&gt; Boolean">isImplClass</span><span class="delimiter">)</span>
              <a href="../Global.scala.html#64843" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105576" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#495799" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">parameterNamed</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115426" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
            <span class="keyword">else</span> 
              <a href="#496128" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.gen.global.Tree">Select</span><span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#496130" title="(sym: Constructors.this.global.Symbol)Boolean">isParamRef</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496131" title="(s: Constructors.this.global.Symbol)Boolean">possiblySpecialized</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; 
            <span class="comment">// references to parameter accessor field of own class become references to parameters</span>
            <a href="../Global.scala.html#64843" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105576" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedIdent</a><span class="delimiter">(</span><a href="#495798" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree">setPos</span> <a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64927" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#111076" title="(sym: Constructors.this.global.specializeTypes.global.Symbol)scala.collection.immutable.Set[Constructors.this.global.specializeTypes.global.Symbol]">specializedTypeVars</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
              <a href="#495800" title="Boolean">usesSpecializedField</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#496128" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
            <a href="#496128" title="Constructors.this.global.Transformer{def isParamRef(sym: Constructors.this.global.Symbol): Boolean}" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496143" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// Move tree into constructor, take care of changing owner from `oldowner' to constructor symbol</span>
      <span class="keyword">def</span> <a title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="495802">intoConstructor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496252">oldowner</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="496253">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> =
        <a href="#495801" title="intoConstructorTransformer extends Constructors.this.global.Transformer">intoConstructorTransformer</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span>
          <a href="../ast/Trees.scala.html#162672" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" class="keyword">new</a> <a href="../ast/Trees.scala.html#67848" title="Constructors.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#496252" title="Constructors.this.global.Symbol">oldowner</a>, <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#496253" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="comment">// Should tree be moved in front of super constructor call?</span>
      <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="495803">canBeMoved</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496262">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <a href="#496262" title="Constructors.this.global.Tree">tree</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496272">mods</a>, _, _, _<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#496272" title="Constructors.this.global.Modifiers">mods</a> <span title="(flag: Long)Boolean">hasFlag</span> PRESUPER <span title="Long(137975824384L)">|</span> PARAMACCESSOR<span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span>                     =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>

      <span class="comment">// Create an assignment to class field `to' with rhs `from'</span>
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree" id="495804">mkAssign</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496277">to</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Tree" id="496278">from</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> =
        <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106064" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#496277" title="Constructors.this.global.Symbol">to</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../ast/TreeDSL.scala.html#105833" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#496277" title="Constructors.this.global.Symbol">to</a><span class="delimiter">)</span>, <a href="#496278" title="Constructors.this.global.Tree">from</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      <span class="comment">// Create code to copy parameter to parameter accessor field. </span>
      <span class="comment">// If parameter is $outer, check that it is not null so that we NPE</span>
      <span class="comment">// here instead of at some unknown future $outer access.</span>
      <span class="keyword">def</span> <a title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree" id="495805">copyParam</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496331">to</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.Symbol" id="496332">from</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#105837" title="object Constructors.this.CODE">CODE</a>._
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="496334">result</a> = <a href="#495804" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#496331" title="Constructors.this.global.Symbol">to</a>, <a href="../ast/Trees.scala.html#67813" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#496332" title="Constructors.this.global.Symbol">from</a><span class="delimiter">)</span><span class="delimiter">)</span>
        
        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#496332" title="Constructors.this.global.Symbol">from</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115426" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span> <a href="#496334" title="Constructors.this.global.Tree">result</a>
        <span class="keyword">else</span> <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106064" title="(pos: Constructors.this.global.analyzer.global.Position)(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#496331" title="Constructors.this.global.Symbol">to</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../ast/TreeDSL.scala.html#113996" title="(tree: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">IF</a> <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#114009" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSymbol : (target: Constructors.this.global.Symbol)Constructors.this.CODE.TreeMethods">from</a> <a href="../ast/TreeDSL.scala.html#149430" title="(other: Constructors.this.global.Tree)Constructors.this.global.Apply">OBJ_EQ</a> <a href="../ast/TreeDSL.scala.html#113952" title="=&gt; Constructors.this.global.Literal">NULL</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#149393" title="(x: Constructors.this.global.Tree)Constructors.this.CODE.IfStart">THEN</a> <a href="../ast/TreeDSL.scala.html#113978" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Throw">THROW</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106244" title="=&gt; Constructors.this.global.Symbol">NullPointerExceptionClass</a><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#149394" title="(elsep: Constructors.this.global.Tree)Constructors.this.global.If">ELSE</a> <a href="#496334" title="Constructors.this.global.Tree">result</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// The list of definitions that go into class</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495806">defBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
      
      <span class="comment">// The auxiliary constructors, separate from the defBuf since they should</span>
      <span class="comment">// follow the primary constructor</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495807">auxConstructorBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      <span class="comment">// The list of statements that go into constructor after and including the superclass constructor call</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495808">constrStatBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      <span class="comment">// The list of early initializer statements that go into constructor before the superclass constructor call</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="495809">constrPrefixBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

      <span class="comment">// The early initialized field definitions of the class (these are the class members)</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.trees.ValDef]" id="495810">presupers</a> = <a href="../ast/Trees.scala.html#67784" title="object Constructors.this.global.treeInfo">treeInfo</a>.<a href="../ast/TreeInfo.scala.html#153042" title="(stats: List[Constructors.this.global.treeInfo.trees.Tree])List[Constructors.this.global.treeInfo.trees.ValDef]">preSuperFields</a><span class="delimiter">(</span><a href="#495788" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

      <span class="comment">// generate code to copy pre-initialized fields</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496391">stat</a> &lt;- <a href="#496042" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#495808" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#496391" title="Constructors.this.global.Tree">stat</a>
        <a href="#496391" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496407">mods</a>, <a title="Constructors.this.global.TermName" id="496408">name</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#496407" title="Constructors.this.global.Modifiers">mods</a> <span title="(flag: Long)Boolean">hasFlag</span> <span title="Long(137438953472L)">PRESUPER</span><span class="delimiter">)</span> =&gt;
            <span class="comment">// stat is the constructor-local definition of the field value</span>
            <span class="keyword">val</span> <a title="List[Constructors.this.global.treeInfo.trees.ValDef]" id="496409">fields</a> = <a href="#495810" title="List[Constructors.this.global.treeInfo.trees.ValDef]">presupers</a> <span title="(p: Constructors.this.global.treeInfo.trees.ValDef =&gt; Boolean)List[Constructors.this.global.treeInfo.trees.ValDef]">filter</span> <span class="delimiter">(</span>
              <a title="Constructors.this.global.treeInfo.trees.ValDef" id="496414">vdef</a> =&gt; <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115759" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#496414" title="Constructors.this.global.treeInfo.trees.ValDef">vdef</a>.<span title="=&gt; Constructors.this.global.treeInfo.trees.TermName">name</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#496408" title="Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#496409" title="List[Constructors.this.global.treeInfo.trees.ValDef]">fields</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.treeInfo.trees.Symbol" id="496410">to</a> = <a href="#496409" title="List[Constructors.this.global.treeInfo.trees.ValDef]">fields</a>.<span title="=&gt; Constructors.this.global.treeInfo.trees.ValDef">head</span>.<span title="=&gt; Constructors.this.global.treeInfo.trees.Symbol">symbol</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#496410" title="Constructors.this.global.treeInfo.trees.Symbol">to</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.treeInfo.trees.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../symtab/Types.scala.html#67435" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span>
              <a href="#495808" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#495804" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span><a href="#496410" title="Constructors.this.global.treeInfo.trees.Symbol">to</a>, <a href="../ast/Trees.scala.html#67813" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#496391" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// Triage all template definitions to go into defBuf/auxConstructorBuf, constrStatBuf, or constrPrefixBuf.</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496481">stat</a> &lt;- <a href="#495788" title="(f: Constructors.this.global.Tree =&gt; Any)Unit">stats</a><span class="delimiter">)</span> <a href="#496481" title="Constructors.this.global.Tree">stat</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Any">DefDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496490">mods</a>, <a title="Constructors.this.global.TermName" id="496491">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="496492">tparams</a>, <a title="List[List[Constructors.this.global.ValDef]]" id="496493">vparamss</a>, <a title="Constructors.this.global.Tree" id="496494">tpt</a>, <a title="Constructors.this.global.Tree" id="496495">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// methods with constant result type get literals as their body</span>
          <span class="comment">// all methods except the primary constructor go into template</span>
          <a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="defBuf.type">MethodType</span><span class="delimiter">(</span><a href="#496500" title="(x: List[Constructors.this.global.Symbol])Some[List[Constructors.this.global.Symbol]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Constructors.this.global.ConstantType" id="496511">tp</a> @ ConstantType<span class="delimiter">(</span><a title="Constructors.this.global.Constant" id="496513">c</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="../ast/Trees.scala.html#162568" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162473" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
                <a href="#496481" title="Constructors.this.global.Tree">stat</a>, <a href="#496490" title="Constructors.this.global.Modifiers">mods</a>, <a href="#496491" title="Constructors.this.global.TermName">name</a>, <a href="#496492" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#496493" title="List[List[Constructors.this.global.ValDef]]">vparamss</a>, <a href="#496494" title="Constructors.this.global.Tree">tpt</a>,
                <a href="../ast/TreeDSL.scala.html#105833" title="(value: Constructors.this.global.Constant)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="#496513" title="Constructors.this.global.Constant">c</a><span class="delimiter">)</span> <span title="(pos: scala.tools.nsc.util.Position)Constructors.this.global.Literal">setPos</span> <a href="#496495" title="Constructors.this.global.Tree">rhs</a>.<span title="=&gt; Constructors.this.global.Position">pos</span> <span title="(tp: Constructors.this.global.Type)Constructors.this.global.Literal">setType</span> <a href="#496511" title="Constructors.this.global.ConstantType">tp</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Any">_</span> =&gt;
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107519" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107475" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <a href="#495807" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a> <span title="(x: Constructors.this.global.Tree)auxConstructorBuf.type">+=</span> <a href="#496481" title="Constructors.this.global.Tree">stat</a>
              <span class="keyword">else</span> <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#496481" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Any">ValDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="496586">mods</a>, <a title="Constructors.this.global.TermName" id="496587">name</a>, <a title="Constructors.this.global.Tree" id="496588">tpt</a>, <a title="Constructors.this.global.Tree" id="496589">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// val defs with constant right-hand sides are eliminated.</span>
          <span class="comment">// for all other val defs, an empty valdef goes into the template and </span>
          <span class="comment">// the initializer goes as an assignment into the constructor</span>
          <span class="comment">// if the val def is an early initialized or a parameter accessor, it goes</span>
          <span class="comment">// before the superclass constructor call, otherwise it goes after.</span>
          <span class="comment">// Lazy vals don't get the assignment in the constructor.</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../symtab/Types.scala.html#67435" title="Constructors.this.global.ConstantType">ConstantType</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#496589" title="Constructors.this.global.Tree">rhs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../ast/TreeDSL.scala.html#105833" title="object Constructors.this.global.EmptyTree">EmptyTree</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; Boolean">isLazy</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="496595">rhs1</a> = <a href="#495802" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496589" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span>;
              <span class="delimiter">(</span><span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#495803" title="(tree: Constructors.this.global.Tree)Boolean">canBeMoved</a><span class="delimiter">(</span><a href="#496481" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#495809" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a> <span class="keyword">else</span> <a href="#495808" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a><span class="delimiter">)</span> <span title="(x: Constructors.this.global.Tree)scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">+=</span> <a href="#495804" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Tree)Constructors.this.global.Tree">mkAssign</a><span class="delimiter">(</span>
                <a href="#496481" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496595" title="Constructors.this.global.Tree">rhs1</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="../ast/Trees.scala.html#162568" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162472" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#496481" title="Constructors.this.global.Tree">stat</a>, <a href="#496586" title="Constructors.this.global.Modifiers">mods</a>, <a href="#496587" title="Constructors.this.global.TermName">name</a>, <a href="#496588" title="Constructors.this.global.Tree">tpt</a>, <a href="../ast/TreeDSL.scala.html#105833" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="defBuf.type">ClassDef</span><span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          <span class="comment">// classes are treated recursively, and left in the template</span>
          <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#111926" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#495780" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>.<a href="#495779" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496481" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="constrStatBuf.type">_</span> =&gt;
          <span class="comment">// all other statements go into the constructor</span>
          <a href="#495808" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a> <span title="(x: Constructors.this.global.Tree)constrStatBuf.type">+=</span> <a href="#495802" title="(oldowner: Constructors.this.global.Symbol, tree: Constructors.this.global.Tree)Constructors.this.global.Tree">intoConstructor</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496481" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">// ----------- avoid making fields for symbols that are not accessed --------------</span>

      <span class="comment">// A sorted set of symbols that are known to be accessed outside the primary constructor.</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" id="495811">accessedSyms</a> = <span title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]" class="keyword">new</span> <a href="../util/TreeSet.scala.html#30468" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">TreeSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496689">x</a>, <a title="Constructors.this.global.Symbol" id="496690">y</a><span class="delimiter">)</span> =&gt; <a href="#496689" title="Constructors.this.global.Symbol">x</a> <a href="../symtab/Symbols.scala.html#107586" title="(that: Constructors.this.global.Symbol)Boolean">isLess</a> <a href="#496690" title="Constructors.this.global.Symbol">y</a><span class="delimiter">)</span>

      <span class="comment">// a list of outer accessor symbols and their bodies</span>
      <span class="keyword">var</span> <a title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]" id="495812">outerAccessors</a>: <span title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>Symbol, Tree<span class="delimiter">)</span><span class="delimiter">]</span> = List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

      <span class="comment">// Could symbol's definition be omitted, provided it is not accessed?</span>
      <span class="comment">// This is the case if the symbol is defined in the current class, and</span>
      <span class="comment">// ( the symbol is an object private parameter accessor field, or</span>
      <span class="comment">//   the symbol is an outer accessor of a final class which does not override another outer accessor. )</span>
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="495813">maybeOmittable</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496699">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#496699" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span>
        <a href="#496699" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isParamAccessor</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496699" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivateLocal</span> <span title="(x: Boolean)Boolean">||</span>
        <a href="#496699" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107512" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496699" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isFinal</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496699" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107632" title="=&gt; List[Constructors.this.global.Symbol]">allOverriddenSymbols</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
        <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <a href="../symtab/Symbols.scala.html#107589" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../symtab/Definitions.scala.html#106338" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

      <span class="comment">// Is symbol known to be accessed outside of the primary constructor,</span>
      <span class="comment">// or is it a symbol whose definition cannot be omitted anyway? </span>
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Boolean" id="495814">mustbeKept</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496708">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="#495813" title="(sym: Constructors.this.global.Symbol)Boolean">maybeOmittable</a><span class="delimiter">(</span><a href="#496708" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#495811" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../util/Set.scala.html#120344" title="(x: Constructors.this.global.Symbol)Boolean">contains</a> <a href="#496708" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="comment">// A traverser to set accessedSyms and outerAccessors</span>
      <span class="keyword">val</span> <a title="Constructors.this.global.Traverser" id="495815">accessTraverser</a> = <a href="#496712" title="Constructors.this.global.Traverser" class="keyword">new</a> <a href="../ast/Trees.scala.html#67837" title="anonymous class $anon extends Constructors.this.global.Traverser" id="496712">Traverser</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Unit" id="496714">traverse</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496715">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#496715" title="Constructors.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Unit">DefDef</span><span class="delimiter">(</span>_, _, _, _, _, <a title="Constructors.this.global.Tree" id="496732">body</a><span class="delimiter">)</span> 
            <span class="keyword">if</span> <span class="delimiter">(</span><a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107512" title="=&gt; Boolean">isOuterAccessor</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<span title="=&gt; Boolean">isFinal</span><span class="delimiter">)</span> =&gt;
              <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;outerAccessors += &quot;)" class="string">&quot;outerAccessors += &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
              <a href="#495812" title="List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">outerAccessors</a> <span title="(x: (Constructors.this.global.Symbol, Constructors.this.global.Tree))List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]">::=</span> <span class="delimiter">(</span><a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#496732" title="Constructors.this.global.Tree">body</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Select</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#495814" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;accessedSyms += &quot;)" class="string">&quot;accessedSyms += &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
                <a href="#495811" title="scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]">accessedSyms</a> <a href="../util/TreeSet.scala.html#496683" title="(x: Constructors.this.global.Symbol)Unit">addEntry</a> <a href="#496715" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>
              <span class="delimiter">}</span>
              <a href="#496712" title="Constructors.this.global.Traverser" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162670" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496715" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
              <a href="#496712" title="Constructors.this.global.Traverser" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162670" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496715" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// first traverse all definitions except outeraccesors </span>
      <span class="comment">// (outeraccessors are avoided in accessTraverser)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496799">stat</a> &lt;- <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span> <span title="(f: Constructors.this.global.Tree =&gt; Unit)Unit">++</span> <a href="#495807" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>.<span title="=&gt; Iterator[Constructors.this.global.Tree]">iterator</span><span class="delimiter">)</span>
        <a href="#495815" title="Constructors.this.global.Traverser">accessTraverser</a>.<a href="../ast/Trees.scala.html#162670" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496799" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> 

      <span class="comment">// then traverse all bodies of outeraccessors which are accessed themselves</span>
      <span class="comment">// note: this relies on the fact that an outer accessor never calls another</span>
      <span class="comment">// outer accessor in the same class.</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496841">accSym</a>, <a title="Constructors.this.global.Tree" id="496842">accBody</a><span class="delimiter">)</span> &lt;- <a href="#495812" title="(f: (Constructors.this.global.Symbol, Constructors.this.global.Tree) =&gt; Unit)Unit">outerAccessors</a><span class="delimiter">)</span> 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#495814" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#496841" title="Constructors.this.global.Symbol">accSym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#495815" title="Constructors.this.global.Traverser">accessTraverser</a>.<a href="../ast/Trees.scala.html#162670" title="(tree: Constructors.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#496842" title="Constructors.this.global.Tree">accBody</a><span class="delimiter">)</span>

      <span class="comment">// Conflicting symbol list from parents: see bug #1960.</span>
      <span class="comment">// It would be better to mangle the constructor parameter name since</span>
      <span class="comment">// it can only be used internally, but I think we need more robust name</span>
      <span class="comment">// mangling before we introduce more of it.</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[Constructors.this.global.Name,Constructors.this.global.Tree]" id="495816">parentSymbols</a> = <span title="(elems: (Constructors.this.global.Name, Constructors.this.global.Tree)*)scala.collection.immutable.Map[Constructors.this.global.Name,Constructors.this.global.Tree]">Map</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
        <a title="Constructors.this.global.Tree" id="496860">p</a> &lt;- <a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="(f: Constructors.this.global.Tree =&gt; scala.collection.GenTraversableOnce[(Constructors.this.global.Name, Constructors.this.global.Tree)])(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Tree],(Constructors.this.global.Name, Constructors.this.global.Tree),List[(Constructors.this.global.Name, Constructors.this.global.Tree)]])List[(Constructors.this.global.Name, Constructors.this.global.Tree)]">parents</span>
        <span class="keyword">if</span> <a href="#496860" title="Constructors.this.global.Tree">p</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107480" title="=&gt; Boolean">isTrait</a>
        <a title="Constructors.this.global.Symbol" id="496876">sym</a> &lt;- <a href="#496860" title="Constructors.this.global.Tree">p</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105491" title="(f: Constructors.this.global.Symbol =&gt; (Constructors.this.global.Name, Constructors.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Symbol],(Constructors.this.global.Name, Constructors.this.global.Tree),List[(Constructors.this.global.Name, Constructors.this.global.Tree)]])List[(Constructors.this.global.Name, Constructors.this.global.Tree)]">nonPrivateMembers</a>
        <span class="keyword">if</span> <a href="#496876" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107466" title="=&gt; Boolean">isGetter</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#496876" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107513" title="=&gt; Boolean">isOuterField</a>
      <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#496876" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107548" title="(x: Constructors.this.global.Name)ArrowAssoc[Constructors.this.global.Name]">name</a> <span title="(y: Constructors.this.global.Tree)(Constructors.this.global.Name, Constructors.this.global.Tree)">-&gt;</span> <a href="#496860" title="Constructors.this.global.Tree">p</a><span class="delimiter">)</span>: _*<span class="delimiter">)</span>

      <span class="comment">// Initialize all parameters fields that must be kept.</span>
      <span class="keyword">val</span> <a title="List[Constructors.this.global.Tree]" id="495817">paramInits</a> = 
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="496958">acc</a> &lt;- <a href="#495797" title="(f: Constructors.this.global.Symbol =&gt; Constructors.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Symbol],Constructors.this.global.Tree,List[Constructors.this.global.Tree]])List[Constructors.this.global.Tree]">paramAccessors</a> <span class="keyword">if</span> <a href="#495814" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#496958" title="Constructors.this.global.Symbol">acc</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>          
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#495816" title="scala.collection.immutable.Map[Constructors.this.global.Name,Constructors.this.global.Tree]">parentSymbols</a> <span title="(key: Constructors.this.global.Name)Boolean">contains</span> <a href="#496958" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span>
            <a href="#495780" title="Constructors.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#96451" title="(pos: Constructors.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#496958" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Constructors.this.global.Position">pos</a>, <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;parameter '%s' requires field but conflicts with %s in '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span>
              <a href="#496958" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a>, <a href="#496958" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a>, <a href="#495816" title="(key: Constructors.this.global.Name)Constructors.this.global.Tree">parentSymbols</a><span class="delimiter">(</span><a href="#496958" title="Constructors.this.global.Symbol">acc</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          
          <a href="#495805" title="(to: Constructors.this.global.Symbol, from: Constructors.this.global.Symbol)Constructors.this.global.Tree">copyParam</a><span class="delimiter">(</span><a href="#496958" title="Constructors.this.global.Symbol">acc</a>, <a href="#495798" title="(acc: Constructors.this.global.Symbol)Constructors.this.global.Symbol">parameter</a><span class="delimiter">(</span><a href="#496958" title="Constructors.this.global.Symbol">acc</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="comment">/** Return a single list of statements, merging the generic class constructor with the
       *  specialized stats. The original statements are retyped in the current class, and
       *  assignments to generic fields that have a corresponding specialized assignment in
       *  `specializedStats` are replaced by the specialized assignment.
       */</span>
      <span class="keyword">def</span> <a title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="495818">mergeConstructors</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497015">genericClazz</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a>, <a title="List[Constructors.this.global.Tree]" id="497016">originalStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[Constructors.this.global.Tree]" id="497017">specializedStats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" id="497018">specBuf</a> = <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">ListBuffer</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
        <a href="#497018" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])specBuf.type">++=</span> <a href="#497017" title="List[Constructors.this.global.Tree]">specializedStats</a>

        <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]" id="497019">specializedAssignFor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497029">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="Option[Constructors.this.global.Tree]">Option</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
          <a href="#497017" title="List[Constructors.this.global.Tree]">specializedStats</a>.<span title="(p: Constructors.this.global.Tree =&gt; Boolean)Option[Constructors.this.global.Tree]">find</span> <a href="#497036" title="Boolean" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="Boolean">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="497039">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="497047">rhs</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#497039" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a href="#497055" title="Constructors.this.global.Name" id="497049" class="delimiter">(</a><a title="Constructors.this.global.Name" id="497055">generic</a>, _, _<span class="delimiter">)</span> = <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115755" title="(name: Constructors.this.global.Name)(Constructors.this.global.Name, String, String)">splitSpecializedName</a><span title="(Constructors.this.global.Name, String, String) @unchecked" class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115759" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#497039" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../ast/TreeDSL.scala.html#105833" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#497049" title="Constructors.this.global.Name">generic</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115759" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">localToGetter</a><span class="delimiter">(</span><a href="#497029" title="Constructors.this.global.Symbol">sym</a>.<a href="../ast/TreeDSL.scala.html#105833" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>

        <span class="comment">/** Rewrite calls to ScalaRunTime.array_update to the proper apply method in scala.Array.
         *  Erasure transforms Array.update to ScalaRunTime.update when the element type is a type
         *  variable, but after specialization this is a concrete primitive type, so it would
         *  be an error to pass it to array_update(.., .., Object).
         */</span>
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="497020">rewriteArrayUpdate</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497060">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="497061">array_update</a> = <a href="../symtab/Definitions.scala.html#67699" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106321" title="=&gt; Constructors.this.global.Symbol">ScalaRunTimeModule</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105495" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">member</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#105833" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)Constructors.this.global.TermName" class="string">&quot;array_update&quot;</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="497062">adapter</a> = <a href="#497064" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#67836" title="anonymous class $anon extends Constructors.this.global.Transformer" id="497064">Transformer</a> <span class="delimiter">{</span>
            <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Constructors.this.global.Tree)Constructors.this.global.Tree" id="497066">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497067">t</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#497067" title="Constructors.this.global.Tree">t</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="497072">fun</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497077">receiver</a>, <a title="Constructors.this.global.Name" id="497078">method</a><span class="delimiter">)</span>, <a href="#497080" title="(x: List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497091">xs</a>, <a title="Constructors.this.global.Tree" id="497092">idx</a>, <a title="Constructors.this.global.Tree" id="497093">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#497072" title="Constructors.this.global.Select">fun</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#497061" title="Constructors.this.global.Symbol">array_update</a> =&gt;
                <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#105833" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#64843" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105577" title="(qual: Constructors.this.global.gen.global.Tree, sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedSelect</a><span class="delimiter">(</span><a href="#497091" title="Constructors.this.global.Tree">xs</a>, <a href="../symtab/Definitions.scala.html#67699" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106397" title="=&gt; Constructors.this.global.Symbol">Array_update</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#497092" title="Constructors.this.global.Tree">idx</a>, <a href="#497093" title="Constructors.this.global.Tree">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#497064" title="Constructors.this.global.Transformer" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#497067" title="Constructors.this.global.Tree">t</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#497062" title="Constructors.this.global.Transformer">adapter</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#497060" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;merging: &quot;)" class="string">&quot;merging: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497016" title="List[Constructors.this.global.Tree]">originalStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012with\012&quot;)" class="string">&quot;\nwith\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497017" title="List[Constructors.this.global.Tree]">specializedStats</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]" id="497021">res</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497214">s</a> &lt;- <a href="#497016" title="(f: Constructors.this.global.Tree =&gt; (Constructors.this.global.Tree, Constructors.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Constructors.this.global.Tree],(Constructors.this.global.Tree, Constructors.this.global.Tree),List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]])List[(Constructors.this.global.Tree, Constructors.this.global.Tree)]">originalStats</a>; <span class="keyword">val</span> <a title="s.type" id="497215">stat</a> = <a href="#497214" title="Constructors.this.global.Tree">s</a>.<span title="=&gt; s.type">duplicate</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
          <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;merge: looking at &quot;)" class="string">&quot;merge: looking at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497215" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="497216">stat1</a> = <a href="#497215" title="Constructors.this.global.Tree">stat</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="497219">sel</a> @ Select<span class="delimiter">(</span>This<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="Constructors.this.global.Name" id="497227">field</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt;
              <a href="#497019" title="(sym: Constructors.this.global.Symbol)Option[Constructors.this.global.Tree]">specializedAssignFor</a><span class="delimiter">(</span><a href="#497219" title="Constructors.this.global.Select">sel</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="(default: =&gt; Constructors.this.global.Tree)Constructors.this.global.Tree">getOrElse</span><span class="delimiter">(</span><a href="#497215" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; <a href="#497215" title="Constructors.this.global.Tree">stat</a>
          <span class="delimiter">}</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#497216" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#497215" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;replaced &quot;)" class="string">&quot;replaced &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497215" title="Constructors.this.global.Tree">stat</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497216" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            <a href="#497018" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a> <span title="(elem: Constructors.this.global.Tree)specBuf.type">-=</span> <a href="#497216" title="Constructors.this.global.Tree">stat1</a>
          <span class="delimiter">}</span>

          <span title="d.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#497216" title="Constructors.this.global.Tree">stat1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#497215" title="Constructors.this.global.Tree">stat</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#111924" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#497015" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#496041" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
            <span class="comment">// this is just to make private fields public</span>
            <span class="delimiter">(</span><a href="../ast/Trees.scala.html#167654" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" class="keyword">new</a> <a href="../Global.scala.html#64927" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#111109" title="Constructors.this.global.specializeTypes.ImplementationAdapter">ImplementationAdapter</a><span class="delimiter">(</span><a href="#111924" title="(key: Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]">ctorParams</a><span class="delimiter">(</span><a href="#497015" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span>, <a href="#496041" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#497216" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="497249">stat2</a> = <a href="#497020" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">rewriteArrayUpdate</a><span class="delimiter">(</span><a href="#497216" title="Constructors.this.global.Tree">stat1</a><span class="delimiter">)</span>
            <span class="comment">// statements coming from the original class need retyping in the current context</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36747" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../Global.scala.html#64883" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;retyping &quot;)" class="string">&quot;retyping &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497249" title="Constructors.this.global.Tree">stat2</a><span class="delimiter">)</span>
            
            <span class="keyword">val</span> <a title="Constructors.this.global.specializeTypes.Duplicator" id="497250">d</a> = <span title="Constructors.this.global.specializeTypes.Duplicator" class="keyword">new</span> <a href="../Global.scala.html#64927" title="object Constructors.this.global.specializeTypes">specializeTypes</a>.<a href="SpecializeTypes.scala.html#111108" title="Constructors.this.global.specializeTypes.Duplicator">Duplicator</a>
            <a href="#497250" title="Constructors.this.global.specializeTypes.Duplicator">d</a>.<a href="../typechecker/Duplicators.scala.html#497330" title="(context: d.Context, tree: d.global.Tree, oldThis: d.global.Symbol, newThis: d.global.Symbol, env: scala.collection.Map[d.global.Symbol,d.global.Type])d.global.Tree">retyped</a><span class="delimiter">(</span><a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#105973" title="=&gt; Constructors.this.global.analyzer.Context">context1</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="d.Context" class="delimiter">[</span>d.<a href="../typechecker/Contexts.scala.html#105654" title="d.Context">Context</a><span class="delimiter">]</span>,
                      <a href="#497249" title="Constructors.this.global.Tree">stat2</a>,
                      <a href="#497015" title="Constructors.this.global.Symbol">genericClazz</a>,
                      <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>,
                      <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[d.global.Symbol,Nothing]">empty</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#497216" title="Constructors.this.global.Tree">stat1</a>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497018" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;residual specialized constructor statements: &quot;)" class="string">&quot;residual specialized constructor statements: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#497018" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">specBuf</a><span class="delimiter">)</span>
        <a href="#497021" title="List[d.global.Tree forSome { val d: Constructors.this.global.specializeTypes.Duplicator }]">res</a>
      <span class="delimiter">}</span>

      <span class="comment">/** Add an 'if' around the statements coming after the super constructor. This
       *  guard is necessary if the code uses specialized fields. A specialized field is
       *  initialized in the subclass constructor, but the accessors are (already) overridden
       *  and pointing to the (empty) fields. To fix this, a class with specialized fields
       *  will not run its constructor statements if the instance is specialized. The specialized
       *  subclass includes a copy of those constructor statements, and runs them. To flag that a class
       *  has specialized fields, and their initialization should be deferred to the subclass, method
       *  'specInstance$' is added in phase specialize.
       */</span>
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]" id="495819">guardSpecializedInitializer</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="497437">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#64829" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#36655" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">nospecialization</a>.<a href="../settings/MutableSettings.scala.html#42149" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#497437" title="List[Constructors.this.global.Tree]">stats</a> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// split the statements in presuper and postsuper</span>
    <span class="comment">//    var (prefix, postfix) = stats0.span(tree =&gt; !((tree.symbol ne null) &amp;&amp; tree.symbol.isConstructor))</span>
      <span class="comment">//  if (postfix.nonEmpty) {</span>
        <span class="comment">//  prefix = prefix :+ postfix.head</span>
          <span class="comment">//postfix = postfix.tail</span>
        <span class="comment">//}</span>

        <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#495800" title="Boolean">usesSpecializedField</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#495791" title="Boolean">shouldGuard</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#497437" title="List[Constructors.this.global.Tree]">stats</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// save them for duplication in the specialized subclass</span>
          <a href="#111922" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Tree])Unit">guardedCtorStats</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#497437" title="List[Constructors.this.global.Tree]">stats</a>
          <a href="#111924" title="(key: Constructors.this.global.Symbol, value: List[Constructors.this.global.Symbol])Unit">ctorParams</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> = <a href="#496041" title="=&gt; List[Constructors.this.global.Symbol]">constrParams</a>

          <span class="keyword">val</span> <a title="Constructors.this.global.If" id="497443">tree</a> =
            <a href="../ast/TreeDSL.scala.html#105833" title="(cond: Constructors.this.global.Tree, thenp: Constructors.this.global.Tree, elsep: Constructors.this.global.Tree)Constructors.this.global.If">If</a><span class="delimiter">(</span>
              <a href="../ast/TreeDSL.scala.html#105833" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span>
                  <a href="../ast/TreeDSL.scala.html#105833" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#64843" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105568" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="#495790" title="Constructors.this.global.Symbol">specializedFlag</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="../symtab/Definitions.scala.html#67699" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106637" title="(owner: Constructors.this.global.Symbol, name: Constructors.this.global.Name)Constructors.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#67699" title="object Constructors.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#106734" title="=&gt; Constructors.this.global.Symbol">BooleanClass</a>, <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115720" title="=&gt; Constructors.this.global.TermName">UNARY_!</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#105833" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#497437" title="List[Constructors.this.global.Tree]">stats</a>, <a href="../ast/TreeDSL.scala.html#105833" title="(value: Any)Constructors.this.global.Literal">Literal</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              <a href="../ast/TreeDSL.scala.html#105833" title="object Constructors.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span>

          <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#497443" title="Constructors.this.global.If">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="List[Constructors.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><span title="Long(1099511627776L)">SPECIALIZED</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// add initialization from its generic class constructor</span>
          <span class="keyword">val</span> <a href="#497540" title="Constructors.this.global.Name" id="497535" class="delimiter">(</a><a title="Constructors.this.global.Name" id="497540">genericName</a>, _, _<span class="delimiter">)</span> = <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115755" title="(name: Constructors.this.global.Name)(Constructors.this.global.Name, String, String)">splitSpecializedName</a><span title="(Constructors.this.global.Name, String, String) @unchecked" class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107548" title="=&gt; Constructors.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="497536">genericClazz</a> = <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105488" title="(name: Constructors.this.global.Name)Constructors.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="#497535" title="Constructors.this.global.Name">genericName</a>.<a href="../symtab/Names.scala.html#96599" title="=&gt; Constructors.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>
          <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#497536" title="Constructors.this.global.Symbol">genericClazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>

          <a href="#111922" title="=&gt; scala.collection.mutable.Map[Constructors.this.global.Symbol,List[Constructors.this.global.Tree]]">guardedCtorStats</a>.<span title="(key: Constructors.this.global.Symbol)Option[List[Constructors.this.global.Tree]]">get</span><span class="delimiter">(</span><a href="#497536" title="Constructors.this.global.Symbol">genericClazz</a><span class="delimiter">)</span> <span title="List[Constructors.this.global.Tree]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">Some</span><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="497555">stats1</a><span class="delimiter">)</span> =&gt; <a href="#495818" title="(genericClazz: Constructors.this.global.Symbol, originalStats: List[Constructors.this.global.Tree], specializedStats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">mergeConstructors</a><span class="delimiter">(</span><a href="#497536" title="Constructors.this.global.Symbol">genericClazz</a>, <a href="#497555" title="List[Constructors.this.global.Tree]">stats1</a>, <a href="#497437" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="List[Constructors.this.global.Tree]">None</span> =&gt; <a href="#497437" title="List[Constructors.this.global.Tree]">stats</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#497437" title="List[Constructors.this.global.Tree]">stats</a>
      <span class="delimiter">}</span>
<span class="comment">/*
      def isInitDef(stat: Tree) = stat match {
        case dd: DefDef =&gt; dd.symbol == delayedInitMethod
        case _ =&gt; false
      }
*/</span>
      
      <span class="comment">/** Create a getter or a setter and enter into `clazz` scope
       */</span>
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.MethodSymbol" id="495820">addAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497556">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a>, <a title="Constructors.this.global.TermName" id="497557">name</a>: <a href="../symtab/Names.scala.html#66926" title="Constructors.this.global.TermName">TermName</a>, <a title="Long" id="497558">flags</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497559">m</a> = <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107425" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TermName)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#497556" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Constructors.this.global.Position">pos</a>, <a href="#497557" title="Constructors.this.global.TermName">name</a><span class="delimiter">)</span>
          .<a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)Constructors.this.global.MethodSymbol">setFlag</a><span class="delimiter">(</span><a href="#497558" title="Long">flags</a> <span title="(x: Int)Long">&amp;</span> <span title="=&gt; Int">~</span><span title="Int(524288)">LOCAL</span> <span title="(x: Int)Long">&amp;</span> <span title="=&gt; Int">~</span><span title="Int(4)">PRIVATE</span><span class="delimiter">)</span>
        <a href="#497559" title="Constructors.this.global.MethodSymbol">m</a>.<a href="../symtab/Symbols.scala.html#107419" title="(sym: Constructors.this.global.Symbol)Unit">privateWithin</a> = <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>
        <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Constructors.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113086" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a><span class="delimiter">(</span><a href="#497559" title="Constructors.this.global.MethodSymbol">m</a><span class="delimiter">)</span>
        <a href="#497559" title="Constructors.this.global.MethodSymbol">m</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495821">addGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497596">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497597">getr</a> = <a href="#495820" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.MethodSymbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#497596" title="Constructors.this.global.Symbol">sym</a>, <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115756" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#497596" title="Constructors.this.global.Symbol">sym</a>.<a href="../ast/TreeDSL.scala.html#105833" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span>, <a href="../symtab/Flags.scala.html#67091" title="(fieldFlags: Long)Long">getterFlags</a><span class="delimiter">(</span><a href="#497596" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107551" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#497597" title="Constructors.this.global.MethodSymbol">getr</a> <a href="../symtab/Symbols.scala.html#107566" title="(info: Constructors.this.global.Type)getr.type">setInfo</a> <a href="../symtab/Types.scala.html#148762" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#497596" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <span class="comment">//util.trace(&quot;adding getter def for &quot;+getr) {</span>
          <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.DefDef)Constructors.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#497596" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../ast/Trees.scala.html#67801" title="(sym: Constructors.this.global.Symbol, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#497597" title="Constructors.this.global.MethodSymbol">getr</a>, <a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#497596" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="comment">//}</span>
        <span class="delimiter">}</span>
        <a href="#497597" title="Constructors.this.global.MethodSymbol">getr</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495822">addSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497681">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <a href="#497681" title="Constructors.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)sym.type">setFlag</a> <span title="Long(4096L)">MUTABLE</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497682">setr</a> = <a href="#495820" title="(sym: Constructors.this.global.Symbol, name: Constructors.this.global.TermName, flags: Long)Constructors.this.global.MethodSymbol">addAccessor</a><span class="delimiter">(</span>
          <a href="#497681" title="Constructors.this.global.Symbol">sym</a>, <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115758" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterToSetter</a><span class="delimiter">(</span><a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/NameManglers.scala.html#115756" title="(name: Constructors.this.global.TermName)Constructors.this.global.TermName">getterName</a><span class="delimiter">(</span><a href="#497681" title="Constructors.this.global.Symbol">sym</a>.<a href="../ast/TreeDSL.scala.html#105833" title="implicit scala.reflect.generic.Names.promoteTermNamesAsNecessary : (name: Constructors.this.global.Name)Constructors.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../symtab/Flags.scala.html#67092" title="(fieldFlags: Long)Long">setterFlags</a><span class="delimiter">(</span><a href="#497681" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107551" title="=&gt; Long">flags</a><span class="delimiter">)</span><span class="delimiter">)</span> 
        <a href="#497682" title="Constructors.this.global.MethodSymbol">setr</a> <a href="../symtab/Symbols.scala.html#107566" title="(info: Constructors.this.global.Type)setr.type">setInfo</a> <a href="../symtab/Types.scala.html#148762" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#497682" title="Constructors.this.global.MethodSymbol">setr</a>.<a href="../symtab/Symbols.scala.html#107446" title="(argtypes: List[Constructors.this.global.Type])List[Constructors.this.global.Symbol]">newSyntheticValueParams</a><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="#497681" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106718" title="=&gt; Constructors.this.global.Symbol">UnitClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <span class="comment">//util.trace(&quot;adding setter def for &quot;+setr) {</span>
          <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.DefDef)Constructors.this.global.DefDef">atPos</a><span class="delimiter">(</span><a href="#497681" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107404" title="=&gt; Constructors.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../ast/Trees.scala.html#67802" title="(sym: Constructors.this.global.Symbol, rhs: List[List[Constructors.this.global.Symbol]] =&gt; Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#497682" title="Constructors.this.global.MethodSymbol">setr</a>, <a title="List[List[Constructors.this.global.Symbol]]" id="497716">paramss</a> =&gt; 
              <a href="../ast/TreeDSL.scala.html#105833" title="(lhs: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#497681" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="../ast/Trees.scala.html#67813" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#497716" title="List[List[Constructors.this.global.Symbol]]">paramss</a>.<span title="=&gt; List[Constructors.this.global.Symbol]">head</span>.<span title="=&gt; Constructors.this.global.Symbol">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="comment">//}</span>
        <span class="delimiter">}</span>
        <a href="#497682" title="Constructors.this.global.MethodSymbol">setr</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495823">ensureAccessor</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497761">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Constructors.this.global.Symbol" id="497762">acc</a>: =&gt; Symbol<span class="delimiter">)</span> = 
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#497761" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#497761" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#497761" title="Constructors.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isPrivate</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// there's an access to a naked field of the enclosing class</span>
          <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="497768">getr</a> = <a href="#497762" title="=&gt; Constructors.this.global.Symbol">acc</a>
          <a href="#497768" title="Constructors.this.global.Symbol">getr</a> <a href="../symtab/Symbols.scala.html#107641" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>
          <a href="#497768" title="Constructors.this.global.Symbol">getr</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497761" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107541" title="=&gt; Constructors.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#497761" title="Constructors.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#107641" title="(base: Constructors.this.global.Symbol)Unit">makeNotPrivate</a> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>
          <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495824">ensureGetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497776">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#495823" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#497776" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="497777">getr</a> = <a href="#497776" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107635" title="(base: Constructors.this.global.Symbol)Constructors.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>
        <span title="Constructors.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#497777" title="Constructors.this.global.Symbol">getr</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#497777" title="Constructors.this.global.Symbol">getr</a> <span class="keyword">else</span> <a href="#495821" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addGetter</a><span class="delimiter">(</span><a href="#497776" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol" id="495825">ensureSetter</a><span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="497783">sym</a>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#67331" title="Constructors.this.global.Symbol">Symbol</a> = <a href="#495823" title="(sym: Constructors.this.global.Symbol)(acc: =&gt; Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureAccessor</a><span class="delimiter">(</span><a href="#497783" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Constructors.this.global.Symbol" id="497784">setr</a> = <a href="#497783" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107637" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497784" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#497784" title="Constructors.this.global.Symbol">setr</a> = <a href="#497783" title="Constructors.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#107637" title="(base: Constructors.this.global.Symbol, hasExpandedName: Boolean)Constructors.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>, hasExpandedName = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#497784" title="Constructors.this.global.Symbol">setr</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#497784" title="Constructors.this.global.Symbol">setr</a> = <a href="#495822" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">addSetter</a><span class="delimiter">(</span><a href="#497783" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <a href="#497784" title="Constructors.this.global.Symbol">setr</a>
      <span class="delimiter">}</span>
      
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree" id="495826">delayedInitClosure</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="497802">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = 
        <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.ClassDef)Constructors.this.global.ClassDef">atPos</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> 
            <span class="keyword">val</span> <a title="Constructors.this.global.ClassSymbol" id="497809">closureClass</a> = <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107449" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TypeName)Constructors.this.global.ClassSymbol">newClass</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115480" title="=&gt; Constructors.this.global.nme.NameType">delayedInitArg</a>.<a href="../symtab/Names.scala.html#96657" title="=&gt; Constructors.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)Constructors.this.global.ClassSymbol">setFlag</a><span class="delimiter">(</span>SYNTHETIC <span title="Long(2097184L)">|</span> FINAL<span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="List[Constructors.this.global.Type]" id="497810">closureParents</a> = <span title="(xs: Constructors.this.global.Type*)List[Constructors.this.global.Type]">List</span><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106471" title="(i: Int)Constructors.this.global.Symbol">AbstractFunctionClass</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a>, <a href="../symtab/Definitions.scala.html#106294" title="=&gt; Constructors.this.global.Symbol">ScalaObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>
            <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107566" title="(info: Constructors.this.global.Type)closureClass.type">setInfo</a><span class="delimiter">(</span><span title="Constructors.this.global.ClassInfoType" class="keyword">new</span> <a href="../symtab/Types.scala.html#67431" title="Constructors.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#497810" title="List[Constructors.this.global.Type]">closureParents</a>, <a href="../symtab/Scopes.scala.html#113079" title="()Constructors.this.global.Scope" class="keyword">new</a> <a href="../symtab/Scopes.scala.html#67691" title="Constructors.this.global.Scope">Scope</a>, <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.TermSymbol" id="497811">outerField</a> = <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107420" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TermName)Constructors.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115426" title="=&gt; Constructors.this.global.nme.NameType">OUTER</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)Constructors.this.global.TermSymbol">setFlag</a><span class="delimiter">(</span>PRIVATE | LOCAL <span title="Long(537395204L)">|</span> PARAMACCESSOR<span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107566" title="(info: Constructors.this.global.Type)Constructors.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.MethodSymbol" id="497812">applyMethod</a> = <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107425" title="(pos: Constructors.this.global.Position, name: Constructors.this.global.TermName)Constructors.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span>, <a href="../symtab/StdNames.scala.html#67724" title="object Constructors.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#115450" title="=&gt; Constructors.this.global.nme.NameType">apply</a><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107553" title="(mask: Long)Constructors.this.global.MethodSymbol">setFlag</a><span class="delimiter">(</span><span title="Long(32L)">FINAL</span><span class="delimiter">)</span>
              .<a href="../symtab/Symbols.scala.html#107566" title="(info: Constructors.this.global.Type)Constructors.this.global.MethodSymbol">setInfo</a><span class="delimiter">(</span><a href="../symtab/Types.scala.html#148762" title="(params: List[Constructors.this.global.Symbol], resultType: Constructors.this.global.Type)Constructors.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106220" title="=&gt; Constructors.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../symtab/Scopes.scala.html#113086" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a> <a href="#497811" title="Constructors.this.global.TermSymbol">outerField</a>
            <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../symtab/Scopes.scala.html#113086" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">enter</a> <a href="#497812" title="Constructors.this.global.MethodSymbol">applyMethod</a>

            <span class="keyword">val</span> <a title="Constructors.this.global.ValDef" id="497813">outerFieldDef</a> = <a href="../ast/Trees.scala.html#67795" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#497811" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.ChangeOwnerTraverser" id="497814">changeOwner</a> = <span title="Constructors.this.global.ChangeOwnerTraverser" class="keyword">new</span> <a href="../ast/Trees.scala.html#67848" title="Constructors.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>, <a href="#497812" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="497815">closureClassTyper</a> = <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106061" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Constructors.this.global.analyzer.Typer" id="497816">applyMethodTyper</a> = <a href="#497815" title="Constructors.this.global.analyzer.Typer">closureClassTyper</a>.<a href="../typechecker/Typers.scala.html#106061" title="(owner: Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer">atOwner</a><span class="delimiter">(</span><a href="#497812" title="Constructors.this.global.MethodSymbol">applyMethod</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.Transformer" id="497817">constrStatTransformer</a> = <a href="#497954" title="Constructors.this.global.Transformer" class="keyword">new</a> <a href="../ast/Trees.scala.html#67836" title="anonymous class $anon extends Constructors.this.global.Transformer" id="497954">Transformer</a> <span class="delimiter">{</span>
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="497956">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="497957">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = <a href="#497957" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.analyzer.global.Tree">This</span><span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#497957" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#495787" title="Constructors.this.global.Symbol">clazz</a> =&gt; 
                  <a href="#497816" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                    <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Select)Constructors.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#497957" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a><span class="delimiter">)</span>, <a href="#497811" title="Constructors.this.global.TermSymbol">outerField</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
                  <a href="#497954" title="Constructors.this.global.Transformer" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a> <span class="delimiter">{</span>
                    <a href="#497957" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Select</span><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498014">qual</a>, _<span class="delimiter">)</span> =&gt; 
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="498015">getter</a> = <a href="#495824" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureGetter</a><span class="delimiter">(</span><a href="#497957" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#498015" title="Constructors.this.global.Symbol">getter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#497816" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#497957" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#105833" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#498014" title="Constructors.this.global.Tree">qual</a>, <a href="#498015" title="Constructors.this.global.Symbol">getter</a><span class="delimiter">)</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#497957" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">Assign</span><span class="delimiter">(</span><a title="Constructors.this.global.Select" id="498057">lhs</a> @ Select<span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498062">qual</a>, _<span class="delimiter">)</span>, <a title="Constructors.this.global.Tree" id="498063">rhs</a><span class="delimiter">)</span> =&gt;
                        <span class="keyword">val</span> <a title="Constructors.this.global.Symbol" id="498064">setter</a> = <a href="#495825" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Symbol">ensureSetter</a><span class="delimiter">(</span><a href="#498057" title="Constructors.this.global.Select">lhs</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span>
                        <span title="Constructors.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#498064" title="Constructors.this.global.Symbol">setter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#67339" title="object Constructors.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
                          <a href="#497816" title="Constructors.this.global.analyzer.Typer">applyMethodTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
                            <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#497957" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                              <a href="../ast/TreeDSL.scala.html#105833" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="#498062" title="Constructors.this.global.Tree">qual</a>, <a href="#498064" title="Constructors.this.global.Symbol">setter</a><span class="delimiter">)</span>, <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#498063" title="Constructors.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span>
                            <span class="delimiter">}</span>
                          <span class="delimiter">}</span>
                        <span class="keyword">else</span> <a href="#497957" title="Constructors.this.global.Tree">tree</a>
                      <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt; 
                        <a href="#497814" title="Constructors.this.global.ChangeOwnerTraverser">changeOwner</a>.<a href="../ast/Trees.scala.html#162860" title="(tree: Constructors.this.global.Tree)Unit">changeOwner</a><span class="delimiter">(</span><a href="#497957" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
                        <a href="#497957" title="Constructors.this.global.Tree">tree</a>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span> 
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>

            <span class="keyword">def</span> <a title="=&gt; List[Constructors.this.global.Tree]" id="497818">applyMethodStats</a> = <a href="#497817" title="Constructors.this.global.Transformer">constrStatTransformer</a>.<a href="../ast/Trees.scala.html#162577" title="(trees: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#497802" title="List[Constructors.this.global.Tree]">stats</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Constructors.this.global.DefDef" id="497819">applyMethodDef</a> = <a href="../ast/Trees.scala.html#67799" title="(sym: Constructors.this.global.Symbol, vparamss: List[List[Constructors.this.global.ValDef]], rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
              sym = <a href="#497812" title="Constructors.this.global.MethodSymbol">applyMethod</a>,
              vparamss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              rhs = <a href="../ast/TreeDSL.scala.html#105833" title="(stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span><a href="#497818" title="=&gt; List[Constructors.this.global.Tree]">applyMethodStats</a>, <a href="../Global.scala.html#64843" title="object Constructors.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#105568" title="(sym: Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#106600" title="=&gt; Constructors.this.global.Symbol">BoxedUnit_UNIT</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              
            <a href="../ast/Trees.scala.html#67792" title="(sym: Constructors.this.global.Symbol, constrMods: Constructors.this.global.Modifiers, vparamss: List[List[Constructors.this.global.ValDef]], argss: List[List[Constructors.this.global.Tree]], body: List[Constructors.this.global.Tree], superPos: Constructors.this.global.Position)Constructors.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span>
              sym = <a href="#497809" title="Constructors.this.global.ClassSymbol">closureClass</a>,
              constrMods = <a href="../ast/TreeDSL.scala.html#105833" title="(flags: Long)Constructors.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>,
              vparamss = <span title="(xs: List[Constructors.this.global.ValDef]*)List[List[Constructors.this.global.ValDef]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.ValDef*)List[Constructors.this.global.ValDef]">List</span><span class="delimiter">(</span><a href="#497813" title="Constructors.this.global.ValDef">outerFieldDef</a><span class="delimiter">)</span><span class="delimiter">)</span>,
              argss = <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>,
              body = <span title="(xs: Constructors.this.global.DefDef*)List[Constructors.this.global.DefDef]">List</span><span class="delimiter">(</span><a href="#497819" title="Constructors.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span>,
              superPos = <a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree" id="495827">delayedInitCall</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498234">closure</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = 
        <a href="#495789" title="Constructors.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#106063" title="(tree: Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          <a href="../ast/Trees.scala.html#67851" title="(pos: Constructors.this.global.Position)(tree: Constructors.this.global.Apply)Constructors.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.Position">pos</span><span class="delimiter">)</span> <span class="delimiter">{</span> 
            <a href="../ast/TreeDSL.scala.html#105833" title="(fun: Constructors.this.global.Tree, args: List[Constructors.this.global.Tree])Constructors.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="../ast/Trees.scala.html#67812" title="(qualifier: Constructors.this.global.Tree, sym: Constructors.this.global.Symbol)Constructors.this.global.Select">Select</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="../symtab/Definitions.scala.html#106340" title="=&gt; Constructors.this.global.Symbol">delayedInitMethod</a><span class="delimiter">)</span>, 
              <span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67809" title="(tpt: Constructors.this.global.Tree, argss: List[List[Constructors.this.global.Tree]])Constructors.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67818" title="(tp: Constructors.this.global.Type)Constructors.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#498234" title="Constructors.this.global.Tree">closure</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107562" title="=&gt; Constructors.this.global.Type">tpe</a><span class="delimiter">)</span>, <span title="(xs: List[Constructors.this.global.Tree]*)List[List[Constructors.this.global.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: Constructors.this.global.Tree*)List[Constructors.this.global.Tree]">List</span><span class="delimiter">(</span><a href="../ast/Trees.scala.html#67811" title="(sym: Constructors.this.global.Symbol)Constructors.this.global.Tree">This</a><span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="comment">/** Return a pair consisting of (all statements up to and including superclass and trait constr calls, rest) */</span>
      <span class="keyword">def</span> <a title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" id="495828">splitAtSuper</a><span class="delimiter">(</span><a title="List[Constructors.this.global.Tree]" id="498324">stats</a>: <span title="List[Constructors.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Boolean" id="498325">isConstr</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498332">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#498332" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#498332" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<a href="../symtab/Symbols.scala.html#107475" title="=&gt; Boolean">isConstructor</a>
        <span class="keyword">val</span> <a href="#498327" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#498326" title="List[Constructors.this.global.Tree]" id="498327">pre</a>, <a href="#498326" title="List[Constructors.this.global.Tree]" id="498328">rest0</a><span class="delimiter">)</span> = <a href="#498324" title="List[Constructors.this.global.Tree]">stats</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#498325" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#498338" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a href="#498330" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#498329" title="List[Constructors.this.global.Tree]" id="498330">supercalls</a>, <a href="#498329" title="List[Constructors.this.global.Tree]" id="498331">rest</a><span class="delimiter">)</span> = <a href="#498328" title="List[Constructors.this.global.Tree]">rest0</a> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">span</span> <span class="delimiter">(</span><a href="#498325" title="(tree: Constructors.this.global.Tree)Boolean">isConstr</a><span class="delimiter">(</span><a href="#498354" title="Constructors.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="(_1: List[Constructors.this.global.Tree], _2: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</span><a href="#498327" title="List[Constructors.this.global.Tree]">pre</a> <a href="#498369" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#498330" title="List[Constructors.this.global.Tree]">supercalls</a>, <a href="#498331" title="List[Constructors.this.global.Tree]">rest</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">var</span> <a href="#495830" title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])" class="delimiter">(</a><a href="#495829" title="List[Constructors.this.global.Tree]" id="495830">uptoSuperStats</a>, <a href="#495829" title="List[Constructors.this.global.Tree]" id="495831">remainingConstrStats</a><span class="delimiter">)</span> = <a href="#495828" title="(stats: List[Constructors.this.global.Tree])(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree])">splitAtSuper</a><span title="(List[Constructors.this.global.Tree], List[Constructors.this.global.Tree]) @unchecked" class="delimiter">(</span><a href="#495808" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrStatBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Boolean" id="495832">needsDelayedInit</a> =
        <span class="delimiter">(</span><a href="#495787" title="Constructors.this.global.Symbol">clazz</a> <a href="../symtab/Symbols.scala.html#107589" title="(that: Constructors.this.global.Symbol)Boolean">isSubClass</a> <a href="../symtab/Definitions.scala.html#106338" title="=&gt; Constructors.this.global.Symbol">DelayedInitClass</a><span class="delimiter">)</span> <span class="comment">/*&amp;&amp; !(defBuf exists isInitDef)*/</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#495831" title="List[Constructors.this.global.Tree]">remainingConstrStats</a>.<span title="=&gt; Boolean">nonEmpty</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#495832" title="Boolean">needsDelayedInit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Constructors.this.global.Tree" id="498392">dicl</a> = <span title="Constructors.this.ConstructorTransformer" class="keyword">new</span> <a href="#111926" title="Constructors.this.ConstructorTransformer">ConstructorTransformer</a><span class="delimiter">(</span><a href="#495780" title="Constructors.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <a href="#495779" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a> <a href="#495826" title="(stats: List[Constructors.this.global.Tree])Constructors.this.global.analyzer.global.Tree">delayedInitClosure</a><span class="delimiter">(</span><a href="#495831" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>
        <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="#498392" title="Constructors.this.global.Tree">dicl</a>
        <a href="#495831" title="List[Constructors.this.global.Tree]">remainingConstrStats</a> = <span title="(xs: Constructors.this.global.analyzer.global.Tree*)List[Constructors.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#495827" title="(closure: Constructors.this.global.Tree)Constructors.this.global.analyzer.global.Tree">delayedInitCall</a><span class="delimiter">(</span><a href="#498392" title="Constructors.this.global.Tree">dicl</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">// Assemble final constructor</span>
      <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(x: Constructors.this.global.Tree)defBuf.type">+=</span> <a href="../ast/Trees.scala.html#162568" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162473" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], vparamss: List[List[Constructors.this.global.ValDef]], tpt: Constructors.this.global.Tree, rhs: Constructors.this.global.Tree)Constructors.this.global.DefDef">DefDef</a><span class="delimiter">(</span>
        <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>, <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Modifiers">mods</span>, <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.TermName">name</span>, <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[Constructors.this.global.TypeDef]">tparams</span>, <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; List[List[Constructors.this.global.ValDef]]">vparamss</span>, <a href="#496040" title="=&gt; Constructors.this.global.DefDef">constr</a>.<span title="=&gt; Constructors.this.global.Tree">tpt</span>,
        <a href="../ast/Trees.scala.html#162568" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162479" title="(tree: Constructors.this.global.Tree, stats: List[Constructors.this.global.Tree], expr: Constructors.this.global.Tree)Constructors.this.global.Block">Block</a><span class="delimiter">(</span>
          <a href="#496042" title="=&gt; Constructors.this.global.Block">constrBody</a>,
          <a href="#495817" title="List[Constructors.this.global.Tree]">paramInits</a> <a href="#498409" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#495809" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">constrPrefixBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <a href="#498410" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> <a href="#495830" title="List[Constructors.this.global.Tree]">uptoSuperStats</a> <a href="#498411" title="(prefix: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">:::</a> 
            <a href="#495819" title="(stats: List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]">guardSpecializedInitializer</a><span class="delimiter">(</span><a href="#495831" title="List[Constructors.this.global.Tree]">remainingConstrStats</a><span class="delimiter">)</span>,
          <a href="#496042" title="=&gt; Constructors.this.global.Block">constrBody</a>.<span title="=&gt; Constructors.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>;

      <span class="comment">// Followed by any auxiliary constructors</span>
      <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a> <span title="(xs: scala.collection.TraversableOnce[Constructors.this.global.Tree])defBuf.type">++=</span> <a href="#495807" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">auxConstructorBuf</a>
      
      <span class="comment">// Unlink all fields that can be dropped from class scope</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Constructors.this.global.Symbol" id="498460">sym</a> &lt;- <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Constructors.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#113097" title="(f: Constructors.this.global.Symbol =&gt; Unit)Unit">toList</a><span class="delimiter">)</span> 
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#495814" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#498460" title="Constructors.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// println(&quot;dropping &quot;+sym+sym.locationString)</span>
          <a href="#495787" title="Constructors.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#107564" title="=&gt; Constructors.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#105487" title="=&gt; Constructors.this.global.Scope">decls</a> <a href="../symtab/Scopes.scala.html#113092" title="(sym: Constructors.this.global.Symbol)Unit">unlink</a> <a href="#498460" title="Constructors.this.global.Symbol">sym</a>
        <span class="delimiter">}</span>

      <span class="comment">// Eliminate all field definitions that can be dropped from template</span>
      <a href="../ast/Trees.scala.html#162568" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162478" title="(tree: Constructors.this.global.Tree, parents: List[Constructors.this.global.Tree], self: Constructors.this.global.ValDef, body: List[Constructors.this.global.Tree])Constructors.this.global.Template">Template</a><span class="delimiter">(</span><a href="#495785" title="Constructors.this.global.Template">impl</a>, <a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; List[Constructors.this.global.Tree]">parents</span>, <a href="#495785" title="Constructors.this.global.Template">impl</a>.<span title="=&gt; Constructors.this.global.ValDef">self</span>, 
        <a href="#495806" title="scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]">defBuf</a>.<span title="=&gt; List[Constructors.this.global.Tree]">toList</span> <span title="(p: Constructors.this.global.Tree =&gt; Boolean)List[Constructors.this.global.Tree]">filter</span> <span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="498480">stat</a> =&gt; <a href="#495814" title="(sym: Constructors.this.global.Symbol)Boolean">mustbeKept</a><span class="delimiter">(</span><a href="#498480" title="Constructors.this.global.Tree">stat</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="comment">// transformClassTemplate</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree" id="495779">transform</a><span class="delimiter">(</span><a title="Constructors.this.global.Tree" id="496661">tree</a>: <span title="Constructors.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="Constructors.this.global.Tree">Tree</span> = 
      <a href="#496661" title="Constructors.this.global.Tree">tree</a> <span title="Constructors.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a title="Constructors.this.global.Modifiers" id="498487">mods</a>, <a title="Constructors.this.global.TypeName" id="498488">name</a>, <a title="List[Constructors.this.global.TypeDef]" id="498489">tparams</a>, <a title="Constructors.this.global.Template" id="498490">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#496661" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span>.<span title="=&gt; Boolean">isInterface</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#106661" title="(sym: Constructors.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#496661" title="Constructors.this.global.Tree">tree</a>.<span title="=&gt; Constructors.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#162568" title="=&gt; Constructors.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#162469" title="(tree: Constructors.this.global.Tree, mods: Constructors.this.global.Modifiers, name: Constructors.this.global.Name, tparams: List[Constructors.this.global.TypeDef], impl: Constructors.this.global.Template)Constructors.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span><a href="#496661" title="Constructors.this.global.Tree">tree</a>, <a href="#498487" title="Constructors.this.global.Modifiers">mods</a>, <a href="#498488" title="Constructors.this.global.TypeName">name</a>, <a href="#498489" title="List[Constructors.this.global.TypeDef]">tparams</a>, <a href="#495778" title="(impl: Constructors.this.global.Template)Constructors.this.global.Template">transformClassTemplate</a><span class="delimiter">(</span><a href="#498490" title="Constructors.this.global.Template">impl</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Constructors.this.global.Tree">_</span> =&gt;
          <a href="#111926" title="Constructors.this.ConstructorTransformer" class="keyword">super</a>.<a href="../ast/Trees.scala.html#162576" title="(tree: Constructors.this.global.Tree)Constructors.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#496661" title="Constructors.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">// ConstructorTransformer</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>