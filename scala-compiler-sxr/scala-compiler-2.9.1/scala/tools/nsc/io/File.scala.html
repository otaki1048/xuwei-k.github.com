<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/io/File.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> io

<span class="keyword">import</span> java.io.<span class="delimiter">{</span> 
  FileInputStream, FileOutputStream, BufferedReader, BufferedWriter, InputStreamReader, OutputStreamWriter, 
  BufferedInputStream, BufferedOutputStream, IOException, PrintStream, PrintWriter, Closeable =&gt; JCloseable <span class="delimiter">}</span>
<span class="keyword">import</span> java.nio.channels.<span class="delimiter">{</span> Channel, FileChannel <span class="delimiter">}</span>
<span class="keyword">import</span> scala.io.Codec

<span class="keyword">object</span> <a title="object scala.tools.nsc.io.File" id="20974">File</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="71797">pathSeparator</a> = java.io.<span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="71798">separator</a> = java.io.<span title="object java.io.File">File</span>.<span title="java.lang.String">separator</span>
  
  <span class="keyword">def</span> <a title="(path: scala.tools.nsc.io.Path)(implicit codec: scala.io.Codec)scala.tools.nsc.io.File" id="71799">apply</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="71804">path</a>: <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.io.Codec" id="71805">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span> = <span title="scala.tools.nsc.io.File" class="keyword">new</span> <a href="#20973" title="scala.tools.nsc.io.File">File</a><span class="delimiter">(</span><a href="#71804" title="scala.tools.nsc.io.Path">path</a>.<a href="Path.scala.html#68060" title="=&gt; scala.tools.nsc.io.package.JFile">jfile</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#71805" title="scala.io.Codec">codec</a><span class="delimiter">)</span>

  <span class="comment">// Create a temporary file, which will be deleted upon jvm exit.</span>
  <span class="keyword">def</span> <a title="(prefix: String, suffix: String, dir: scala.tools.nsc.io.package.JFile)scala.tools.nsc.io.File" id="71800">makeTemp</a><span class="delimiter">(</span><a title="String" id="77841">prefix</a>: <span title="String">String</span> = <a href="Path.scala.html#21082" title="object scala.tools.nsc.io.Path">Path</a>.<a href="Path.scala.html#68034" title="=&gt; String">randomPrefix</a>, <a title="String" id="77842">suffix</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>, <a title="scala.tools.nsc.io.package.JFile" id="77843">dir</a>: <span title="scala.tools.nsc.io.package.JFile">JFile</span> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.File" id="77844">jfile</a> = java.io.<span title="object java.io.File">File</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: java.io.File)java.io.File">createTempFile</span><span class="delimiter">(</span><a href="#77841" title="String">prefix</a>, <a href="#77842" title="String">suffix</a>, <a href="#77843" title="scala.tools.nsc.io.package.JFile">dir</a><span class="delimiter">)</span>
    <a href="#77844" title="java.io.File">jfile</a>.<span title="()Unit">deleteOnExit</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#71799" title="(path: scala.tools.nsc.io.Path)(implicit codec: scala.io.Codec)scala.tools.nsc.io.File">apply</a><span title="=&gt; scala.io.Codec" class="delimiter">(</span><a href="Path.scala.html#68025" title="implicit scala.tools.nsc.io.Path.jfile2path : (jfile: scala.tools.nsc.io.package.JFile)scala.tools.nsc.io.Path">jfile</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
    
  <span class="keyword">type</span> <a title="File extends AnyRef" id="71801">HasClose</a> = <a href="#383159" title="File extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> close<span class="delimiter">(</span><span class="delimiter">)</span>: Unit <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(target: scala.tools.nsc.io.File.HasClose)Unit" id="71802">closeQuietly</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.File.HasClose" id="383161">target</a>: <a href="#383159" title="scala.tools.nsc.io.File.HasClose">HasClose</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="#383161" title="scala.tools.nsc.io.File.HasClose">target</a>.<a href="#383160" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Unit" id="383163">e</a>: <span title="java.io.IOException">IOException</span> =&gt; <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(target: java.io.Closeable)Unit" id="71803">closeQuietly</a><span class="delimiter">(</span><a title="java.io.Closeable" id="383164">target</a>: <span title="java.io.Closeable">JCloseable</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="#383164" title="java.io.Closeable">target</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Unit" id="383166">e</a>: <span title="java.io.IOException">IOException</span> =&gt; <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">// this is a workaround for http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6503430</span>
  <span class="comment">// we are using a static initializer to statically initialize a java class so we don't</span>
  <span class="comment">// trigger java.lang.InternalErrors later when using it concurrently.  We ignore all</span>
  <span class="comment">// the exceptions so as not to cause spurious failures when no write access is available,</span>
  <span class="comment">// e.g. google app engine.</span>
  <span class="comment">//</span>
  <span class="comment">// XXX need to put this behind a setting.</span>
  <span class="comment">//</span>
  <span class="comment">// try {</span>
  <span class="comment">//   import Streamable.closing</span>
  <span class="comment">//   val tmp = java.io.File.createTempFile(&quot;bug6503430&quot;, null, null)</span>
  <span class="comment">//   try closing(new FileInputStream(tmp)) { in =&gt;</span>
  <span class="comment">//     val inc = in.getChannel()</span>
  <span class="comment">//     closing(new FileOutputStream(tmp, true)) { out =&gt;</span>
  <span class="comment">//       out.getChannel().transferFrom(inc, 0, 0)</span>
  <span class="comment">//     }</span>
  <span class="comment">//   }</span>
  <span class="comment">//   finally tmp.delete()</span>
  <span class="comment">// }</span>
  <span class="comment">// catch {</span>
  <span class="comment">//   case _: IllegalArgumentException | _: IllegalStateException | _: IOException | _: SecurityException =&gt; ()</span>
  <span class="comment">// }</span>
<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="#20974" title="object scala.tools.nsc.io.File">File</a>._
<span class="keyword">import</span> <a href="Path.scala.html#21082" title="object scala.tools.nsc.io.Path">Path</a>._

<span class="comment">/** An abstraction for files.  For character data, a Codec
 *  can be supplied at either creation time or when a method
 *  involving character data is called (with the latter taking
 *  precedence if supplied.) If neither is available, the value
 *  of scala.io.Codec.default is used.
 *
 *  @author  Paul Phillips
 *  @since   2.8
 */</span>
<span class="keyword">class</span> <a title="class File extends scala.tools.nsc.io.Path with scala.tools.nsc.io.Streamable.Chars with ScalaObject" id="20973">File</a><a href="#20973" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.io.package.JFile" id="71808">jfile</a>: <span title="scala.tools.nsc.io.package.JFile">JFile</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.io.Codec" id="71809">constructorCodec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">(</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a><span class="delimiter">)</span> <span class="keyword">with</span> Streamable.<a href="Streamable.scala.html#70873" title="scala.tools.nsc.io.Streamable.Chars">Chars</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.io.Codec" id="70887">creationCodec</a> = <a href="#71809" title="scala.io.Codec">constructorCodec</a>
  <span class="keyword">def</span> <a title="(codec: scala.io.Codec)scala.tools.nsc.io.File" id="70889">withCodec</a><span class="delimiter">(</span><a title="scala.io.Codec" id="383170">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <a href="#20973" title="scala.tools.nsc.io.File">File</a> = <span title="scala.tools.nsc.io.File" class="keyword">new</span> <a href="#20973" title="scala.tools.nsc.io.File">File</a><span class="delimiter">(</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#383170" title="scala.io.Codec">codec</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ext: String)scala.tools.nsc.io.File" id="70890">addExtension</a><span class="delimiter">(</span><a title="String" id="383172">ext</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#20973" title="scala.tools.nsc.io.File">File</a> = <a href="#20973" title="scala.tools.nsc.io.File" class="keyword">super</a>.<a href="Path.scala.html#68093" title="(ext: String)scala.tools.nsc.io.Path">addExtension</a><span class="delimiter">(</span><a href="#383172" title="String">ext</a><span class="delimiter">)</span>.<a href="Path.scala.html#68068" title="=&gt; scala.tools.nsc.io.File">toFile</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.File" id="70891">toAbsolute</a>: <a href="#20973" title="scala.tools.nsc.io.File">File</a> = <span title="scala.tools.nsc.io.File" class="keyword">if</span> <span class="delimiter">(</span><a href="Path.scala.html#68107" title="=&gt; Boolean">isAbsolute</a><span class="delimiter">)</span> <a href="#20973" title="scala.tools.nsc.io.File" class="keyword">this</a> <span class="keyword">else</span> <a href="#20973" title="scala.tools.nsc.io.File" class="keyword">super</a>.<a href="Path.scala.html#68070" title="=&gt; scala.tools.nsc.io.Path">toAbsolute</a>.<a href="Path.scala.html#68068" title="=&gt; scala.tools.nsc.io.File">toFile</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.Directory" id="70892">toDirectory</a>: <a href="Directory.scala.html#21564" title="scala.tools.nsc.io.Directory">Directory</a> = <span title="scala.tools.nsc.io.Directory" class="keyword">new</span> <a href="Directory.scala.html#21564" title="scala.tools.nsc.io.Directory">Directory</a><span class="delimiter">(</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.File" id="70893">toFile</a>: <a href="#20973" title="scala.tools.nsc.io.File">File</a> = <a href="#20973" title="scala.tools.nsc.io.File" class="keyword">this</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.File" id="70894">normalize</a>: <a href="#20973" title="scala.tools.nsc.io.File">File</a> = <a href="#20973" title="scala.tools.nsc.io.File" class="keyword">super</a>.<a href="Path.scala.html#68082" title="=&gt; scala.tools.nsc.io.Path">normalize</a>.<a href="Path.scala.html#68068" title="=&gt; scala.tools.nsc.io.File">toFile</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="70895">isValid</a> = <a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a>.<span title="()Boolean">isFile</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a>.<span title="()Boolean">exists</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="70896">length</a> = <a href="#20973" title="scala.tools.nsc.io.File" class="keyword">super</a><span class="delimiter">[</span>Path<span class="delimiter">]</span>.<a href="Path.scala.html#68113" title="=&gt; Long">length</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(cond: scala.tools.nsc.io.Path =&gt; Boolean)Iterator[scala.tools.nsc.io.Path]" id="70897">walkFilter</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path =&gt; Boolean" id="383186">cond</a>: Path =&gt; Boolean<span class="delimiter">)</span>: <span title="Iterator[scala.tools.nsc.io.Path]">Iterator</span><span class="delimiter">[</span>Path<span class="delimiter">]</span> =
    <span title="Iterator[scala.tools.nsc.io.Path]" class="keyword">if</span> <span class="delimiter">(</span><a href="#383186" title="(v1: scala.tools.nsc.io.Path)Boolean">cond</a><span class="delimiter">(</span><a href="#20973" title="scala.tools.nsc.io.File" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="=&gt; collection.Iterator.type">Iterator</span>.<span title="(elem: scala.tools.nsc.io.File)java.lang.Object with Iterator[scala.tools.nsc.io.File]">single</span><span class="delimiter">(</span><a href="#20973" title="scala.tools.nsc.io.File" class="keyword">this</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="=&gt; collection.Iterator.type">Iterator</span>.<span title="=&gt; java.lang.Object with Iterator[Nothing]">empty</span>

  <span class="comment">/** Obtains an InputStream. */</span>
  <span class="keyword">def</span> <a title="()java.io.FileInputStream" id="70898">inputStream</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="(x$1: java.io.File)java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a><span class="delimiter">)</span>

  <span class="comment">/** Obtains a OutputStream. */</span>
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.FileOutputStream" id="70899">outputStream</a><span class="delimiter">(</span><a title="Boolean" id="99732">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> = <span title="(x$1: java.io.File, x$2: Boolean)java.io.FileOutputStream" class="keyword">new</span> <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a>, <a href="#99732" title="Boolean">append</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.BufferedOutputStream" id="70900">bufferedOutput</a><span class="delimiter">(</span><a title="Boolean" id="99726">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> = <span title="java.io.BufferedOutputStream" class="keyword">new</span> <span title="java.io.BufferedOutputStream">BufferedOutputStream</span><span class="delimiter">(</span><a href="#70899" title="(append: Boolean)java.io.FileOutputStream">outputStream</a><span class="delimiter">(</span><a href="#99726" title="Boolean">append</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.PrintStream" id="70901">printStream</a><span class="delimiter">(</span><a title="Boolean" id="383206">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> = <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><a href="#70899" title="(append: Boolean)java.io.FileOutputStream">outputStream</a><span class="delimiter">(</span><a href="#383206" title="Boolean">append</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="comment">/** Obtains an OutputStreamWriter wrapped around a FileOutputStream.
   *  This should behave like a less broken version of java.io.FileWriter,
   *  in that unlike the java version you can specify the encoding.
   */</span>
  <span class="keyword">def</span> <a title="()java.io.OutputStreamWriter" id="70902">writer</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.io.OutputStreamWriter">OutputStreamWriter</span> = <a href="#70903" title="(append: Boolean)java.io.OutputStreamWriter">writer</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.OutputStreamWriter" id="70903">writer</a><span class="delimiter">(</span><a title="Boolean" id="383219">append</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="java.io.OutputStreamWriter">OutputStreamWriter</span> = <a href="#70904" title="(append: Boolean, codec: scala.io.Codec)java.io.OutputStreamWriter">writer</a><span class="delimiter">(</span><a href="#383219" title="Boolean">append</a>, <a href="#70887" title="=&gt; scala.io.Codec">creationCodec</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean, codec: scala.io.Codec)java.io.OutputStreamWriter" id="70904">writer</a><span class="delimiter">(</span><a title="Boolean" id="383216">append</a>: <span title="Boolean">Boolean</span>, <a title="scala.io.Codec" id="383217">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <span title="java.io.OutputStreamWriter">OutputStreamWriter</span> =
    <span title="(x$1: java.io.OutputStream, x$2: java.nio.charset.Charset)java.io.OutputStreamWriter" class="keyword">new</span> <span title="java.io.OutputStreamWriter">OutputStreamWriter</span><span class="delimiter">(</span><a href="#70899" title="(append: Boolean)java.io.FileOutputStream">outputStream</a><span class="delimiter">(</span><a href="#383216" title="Boolean">append</a><span class="delimiter">)</span>, <a href="#383217" title="scala.io.Codec">codec</a>.<span title="=&gt; java.nio.charset.Charset">charSet</span><span class="delimiter">)</span>
  
  <span class="comment">/** Wraps a BufferedWriter around the result of writer().
   */</span>
  <span class="keyword">def</span> <a title="()java.io.BufferedWriter" id="70905">bufferedWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.io.BufferedWriter">BufferedWriter</span> = <a href="#70906" title="(append: Boolean)java.io.BufferedWriter">bufferedWriter</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.BufferedWriter" id="70906">bufferedWriter</a><span class="delimiter">(</span><a title="Boolean" id="383241">append</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="java.io.BufferedWriter">BufferedWriter</span> = <a href="#70907" title="(append: Boolean, codec: scala.io.Codec)java.io.BufferedWriter">bufferedWriter</a><span class="delimiter">(</span><a href="#383241" title="Boolean">append</a>, <a href="#70887" title="=&gt; scala.io.Codec">creationCodec</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean, codec: scala.io.Codec)java.io.BufferedWriter" id="70907">bufferedWriter</a><span class="delimiter">(</span><a title="Boolean" id="383238">append</a>: <span title="Boolean">Boolean</span>, <a title="scala.io.Codec" id="383239">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <span title="java.io.BufferedWriter">BufferedWriter</span> =
    <span title="java.io.BufferedWriter" class="keyword">new</span> <span title="java.io.BufferedWriter">BufferedWriter</span><span class="delimiter">(</span><a href="#70904" title="(append: Boolean, codec: scala.io.Codec)java.io.OutputStreamWriter">writer</a><span class="delimiter">(</span><a href="#383238" title="Boolean">append</a>, <a href="#383239" title="scala.io.Codec">codec</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="()java.io.PrintWriter" id="70908">printWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.io.PrintWriter">PrintWriter</span> = <span title="(x$1: java.io.Writer, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#70905" title="()java.io.BufferedWriter">bufferedWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.PrintWriter" id="70909">printWriter</a><span class="delimiter">(</span><a title="Boolean" id="230684">append</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="java.io.PrintWriter">PrintWriter</span> = <span title="(x$1: java.io.Writer, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#70906" title="(append: Boolean)java.io.BufferedWriter">bufferedWriter</a><span class="delimiter">(</span><a href="#230684" title="Boolean">append</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
  
  <span class="comment">/** Creates a new file and writes all the Strings to it. */</span>
  <span class="keyword">def</span> <a title="(strings: String*)Unit" id="70910">writeAll</a><span class="delimiter">(</span><a title="String*" id="78457">strings</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>    
    <span class="keyword">val</span> <a title="java.io.BufferedWriter" id="383269">out</a> = <a href="#70905" title="()java.io.BufferedWriter">bufferedWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#78457" title="String*">strings</a> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#383269" title="java.io.BufferedWriter">out</a> <span title="(x$1: java.lang.String)Unit">write</span> <a href="#383290" title="String">_</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#383269" title="java.io.BufferedWriter">out</a> <span title="()Unit">close</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])Unit" id="70911">writeBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="383296">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.BufferedOutputStream" id="383298">out</a> = <a href="#70900" title="(append: Boolean)java.io.BufferedOutputStream">bufferedOutput</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#383298" title="java.io.BufferedOutputStream">out</a> <span title="(x$1: Array[Byte])Unit">write</span> <a href="#383296" title="Array[Byte]">bytes</a>
    <span class="keyword">finally</span> <a href="#383298" title="java.io.BufferedOutputStream">out</a> <span title="()Unit">close</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(strings: String*)Unit" id="70912">appendAll</a><span class="delimiter">(</span><a title="String*" id="380947">strings</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.BufferedWriter" id="383303">out</a> = <a href="#70906" title="(append: Boolean)java.io.BufferedWriter">bufferedWriter</a><span class="delimiter">(</span>append = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#380947" title="String*">strings</a> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#383303" title="java.io.BufferedWriter">out</a> <span title="(x$1: java.lang.String)Unit">write</span> <a href="#383324" title="String">_</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#383303" title="java.io.BufferedWriter">out</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Calls println on each string (so it adds a newline in the PrintWriter fashion.) */</span>
  <span class="keyword">def</span> <a title="(strings: String*)Unit" id="70913">printlnAll</a><span class="delimiter">(</span><a title="String*" id="383330">strings</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.PrintWriter" id="383332">out</a> = <a href="#70908" title="()java.io.PrintWriter">printWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#383330" title="String*">strings</a> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#383332" title="java.io.PrintWriter">out</a> <span title="(x$1: java.lang.String)Unit">println</span> <a href="#383353" title="String">_</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#383332" title="java.io.PrintWriter">out</a> <span title="()Unit">close</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()Option[String]" id="70914">safeSlurp</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span class="keyword">try</span> <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="Streamable.scala.html#70937" title="()String">slurp</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span>: <span title="java.io.IOException">IOException</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(destPath: scala.tools.nsc.io.Path, preserveFileDate: Boolean)Boolean" id="70915">copyTo</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="383366">destPath</a>: <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a>, <a title="Boolean" id="383369">preserveFileDate</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="383370">CHUNK</a> = <span class="int">1024</span> * <span class="int">1024</span> <span title="Int(16777216)">*</span> <span class="int">16</span>  <span class="comment">// 16 MB</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.File" id="383371">dest</a> = <a href="#383366" title="scala.tools.nsc.io.Path">destPath</a>.<a href="Path.scala.html#68068" title="=&gt; scala.tools.nsc.io.File">toFile</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#70895" title="=&gt; Boolean">isValid</a><span class="delimiter">)</span> <a href="Path.scala.html#68035" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Source %s is not a valid file.&quot;</span> <span title="(args: Any*)String">format</span> <a href="Path.scala.html#68080" title="=&gt; String">name</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#20973" title="File.this.type" class="keyword">this</a>.<a href="#70894" title="=&gt; scala.tools.nsc.io.File">normalize</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="#70894" title="=&gt; scala.tools.nsc.io.File">normalize</a><span class="delimiter">)</span> <a href="Path.scala.html#68035" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Source and destination are the same.&quot;)" class="string">&quot;Source and destination are the same.&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="Path.scala.html#68088" title="=&gt; scala.tools.nsc.io.Directory">parent</a>.<a href="Path.scala.html#68103" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="Path.scala.html#68035" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Destination cannot be created.&quot;)" class="string">&quot;Destination cannot be created.&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="Path.scala.html#68103" title="=&gt; Boolean">exists</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="Path.scala.html#68102" title="=&gt; Boolean">canWrite</a><span class="delimiter">)</span> <a href="Path.scala.html#68035" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Destination exists but is not writable.&quot;)" class="string">&quot;Destination exists but is not writable.&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="Path.scala.html#68106" title="=&gt; Boolean">isDirectory</a><span class="delimiter">)</span> <a href="Path.scala.html#68035" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Destination exists but is a directory.&quot;)" class="string">&quot;Destination exists but is a directory.&quot;</span><span class="delimiter">)</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.FileInputStream" id="383373">in_s</a> = <a href="#70898" title="()java.io.FileInputStream">inputStream</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.FileOutputStream" id="383375">out_s</a> = <a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="#70899" title="(append: Boolean)java.io.FileOutputStream">outputStream</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.nio.channels.FileChannel" id="383377">in</a> = <a href="#383372" title="=&gt; java.io.FileInputStream">in_s</a>.<span title="()java.nio.channels.FileChannel">getChannel</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.nio.channels.FileChannel" id="383379">out</a> = <a href="#383374" title="=&gt; java.io.FileOutputStream">out_s</a>.<span title="()java.nio.channels.FileChannel">getChannel</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>      
      <span class="keyword">val</span> <a title="Long" id="383414">size</a> = <a href="#383376" title="=&gt; java.nio.channels.FileChannel">in</a>.<span title="()Long">size</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Long" id="383415">pos</a>, <a title="Long" id="383416">count</a> = <span title="Long(0L)" class="long">0L</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#383415" title="Long">pos</a> <span title="(x: Long)Boolean">&lt;</span> <a href="#383414" title="Long">size</a><span class="delimiter">)</span> <a href="#383417" title="()Unit" class="delimiter">{</a>
        <a href="#383416" title="Long">count</a> = <span class="delimiter">(</span><a href="#383414" title="Long">size</a> <span title="implicit scala.LowPriorityImplicits.longWrapper : (x: Long)scala.runtime.RichLong">-</span> <a href="#383415" title="Long">pos</a><span class="delimiter">)</span> <span title="(that: Long)Long">min</span> <a href="#383370" title="=&gt; Long">CHUNK</a>
        <a href="#383415" title="Long">pos</a> <span title="(x: Long)Long">+=</span> <a href="#383378" title="=&gt; java.nio.channels.FileChannel">out</a>.<span title="(x$1: java.nio.channels.ReadableByteChannel, x$2: Long, x$3: Long)Long">transferFrom</span><span class="delimiter">(</span><a href="#383376" title="=&gt; java.nio.channels.FileChannel">in</a>, <a href="#383415" title="Long">pos</a>, <a href="#383416" title="Long">count</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span title="[A](xs: A*)List[A]">List</span><span title="(xs: scala.tools.nsc.io.File.HasClose*)List[scala.tools.nsc.io.File.HasClose]" class="delimiter">[</span><a href="#383159" title="scala.tools.nsc.io.File.HasClose">HasClose</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#383378" title="=&gt; java.nio.channels.FileChannel">out</a>, <a href="#383374" title="=&gt; java.io.FileOutputStream">out_s</a>, <a href="#383376" title="=&gt; java.nio.channels.FileChannel">in</a>, <a href="#383372" title="=&gt; java.io.FileInputStream">in_s</a><span class="delimiter">)</span> <span title="(f: scala.tools.nsc.io.File.HasClose =&gt; Unit)Unit">foreach</span> <a href="#71802" title="(target: scala.tools.nsc.io.File.HasClose)Unit">closeQuietly</a>
    
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#20973" title="File.this.type" class="keyword">this</a>.<a href="#70896" title="=&gt; Long">length</a> <span title="(x: Long)Boolean">!=</span> <a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="#70896" title="=&gt; Long">length</a><span class="delimiter">)</span>
      <a href="Path.scala.html#68035" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Failed to completely copy %s to %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="Path.scala.html#68080" title="=&gt; String">name</a>, <a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="Path.scala.html#68080" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="#383369" title="Boolean">preserveFileDate</a><span class="delimiter">)</span>
      <a href="#383371" title="scala.tools.nsc.io.File">dest</a>.<a href="Path.scala.html#68112" title="(time: Long)Boolean">lastModified</a> = <a href="#20973" title="File.this.type" class="keyword">this</a>.<a href="Path.scala.html#68111" title="=&gt; Long">lastModified</a>
    
    <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/** Reflection since we're into the java 6+ API.
   */</span>
  <span class="keyword">def</span> <a title="(executable: Boolean, ownerOnly: Boolean)Boolean" id="70916">setExecutable</a><span class="delimiter">(</span><a title="Boolean" id="85873">executable</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="85876">ownerOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="java.lang.Boolean" id="383551">JBoolean</a> = java.lang.<span title="java.lang.Boolean">Boolean</span>
    <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="383552">method</a> =
      <span class="keyword">try</span> classOf<span title="java.lang.Class[scala.tools.nsc.io.package.JFile](classOf[java.io.File])" class="delimiter">[</span>JFile<span class="delimiter">]</span>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="java.lang.String(&quot;setExecutable&quot;)" class="string">&quot;setExecutable&quot;</span>, classOf<span title="java.lang.Class[Boolean](classOf[scala.Boolean])" class="delimiter">[</span>Boolean<span class="delimiter">]</span>, classOf<span title="java.lang.Class[Boolean](classOf[scala.Boolean])" class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Nothing">_</span>: <span title="java.lang.NoSuchMethodException">NoSuchMethodException</span> =&gt; <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>
    
    <span class="keyword">try</span> <a href="#383552" title="java.lang.reflect.Method">method</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><a href="#71808" title="scala.tools.nsc.io.package.JFile">jfile</a>, <a href="#85873" title="implicit scala.Predef.boolean2Boolean : (x: Boolean)java.lang.Boolean">executable</a>: <span title="JBoolean">JBoolean</span>, <a href="#85876" title="implicit scala.Predef.boolean2Boolean : (x: Boolean)java.lang.Boolean">ownerOnly</a>: <span title="JBoolean">JBoolean</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="JBoolean" class="delimiter">[</span><span title="JBoolean">JBoolean</span><span class="delimiter">]</span>.<span title="()Boolean">booleanValue</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(false)">_</span>: <span title="Exception">Exception</span> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>