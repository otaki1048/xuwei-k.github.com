<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/io/Jar.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Paul Phillips
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> io

<span class="keyword">import</span> java.io.<span class="delimiter">{</span> InputStream, OutputStream, IOException, FileNotFoundException, FileInputStream <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.jar._
<span class="keyword">import</span> collection.<span title="object scala.collection.JavaConverters">JavaConverters</span>._
<span class="keyword">import</span> <span title="object java.util.jar.Attributes">Attributes</span>.Name
<span class="keyword">import</span> util.ClassPath

<span class="comment">// Attributes.Name instances:</span>
<span class="comment">//</span>
<span class="comment">// static Attributes.Name   CLASS_PATH</span>
<span class="comment">// static Attributes.Name   CONTENT_TYPE</span>
<span class="comment">// static Attributes.Name   EXTENSION_INSTALLATION</span>
<span class="comment">// static Attributes.Name   EXTENSION_LIST</span>
<span class="comment">// static Attributes.Name   EXTENSION_NAME</span>
<span class="comment">// static Attributes.Name   IMPLEMENTATION_TITLE</span>
<span class="comment">// static Attributes.Name   IMPLEMENTATION_URL</span>
<span class="comment">// static Attributes.Name   IMPLEMENTATION_VENDOR</span>
<span class="comment">// static Attributes.Name   IMPLEMENTATION_VENDOR_ID</span>
<span class="comment">// static Attributes.Name   IMPLEMENTATION_VERSION</span>
<span class="comment">// static Attributes.Name   MAIN_CLASS</span>
<span class="comment">// static Attributes.Name   MANIFEST_VERSION</span>
<span class="comment">// static Attributes.Name   SEALED</span>
<span class="comment">// static Attributes.Name   SIGNATURE_VERSION</span>
<span class="comment">// static Attributes.Name   SPECIFICATION_TITLE</span>
<span class="comment">// static Attributes.Name   SPECIFICATION_VENDOR</span>
<span class="comment">// static Attributes.Name   SPECIFICATION_VERSION</span>

<span class="keyword">class</span> <a title="class Jar extends java.lang.Object with Iterable[java.util.jar.JarEntry] with ScalaObject" id="21333">Jar</a><a href="#21333" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.io.File" id="125817">file</a>: <a href="File.scala.html#20973" title="scala.tools.nsc.io.File">File</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="Iterable[java.util.jar.JarEntry]">Iterable</span><span class="delimiter">[</span>JarEntry<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(path: String)scala.tools.nsc.io.Jar" id="125796" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="125816">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#21333" title="Jar.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="File.scala.html#71799" title="(path: scala.tools.nsc.io.Path)(implicit codec: scala.io.Codec)scala.tools.nsc.io.File">File</a><span title="=&gt; scala.io.Codec" class="delimiter">(</span><a href="Path.scala.html#68024" title="implicit scala.tools.nsc.io.Path.string2path : (s: String)scala.tools.nsc.io.Path">path</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="125797">errorFn</a><span class="delimiter">(</span><a title="String" id="383738">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="object Console">Console</span> <span title="(x: Any)Unit">println</span> <a href="#383738" title="String">msg</a>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.util.jar.JarFile" id="125799">jarFile</a>  = <span title="(x$1: java.io.File)java.util.jar.JarFile" class="keyword">new</span> <span title="java.util.jar.JarFile">JarFile</span><span class="delimiter">(</span><a href="#125817" title="scala.tools.nsc.io.File">file</a>.<a href="Path.scala.html#68060" title="=&gt; scala.tools.nsc.io.package.JFile">jfile</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[java.util.jar.Manifest]" id="125801">manifest</a> = <a href="#125803" title="(f: java.util.jar.JarInputStream =&gt; Option[java.util.jar.Manifest])Option[java.util.jar.Manifest]">withJarInput</a><span class="delimiter">(</span><a title="java.util.jar.JarInputStream" id="125841">s</a> =&gt; <span title="(x: java.util.jar.Manifest)Option[java.util.jar.Manifest]">Option</span><span class="delimiter">(</span><a href="#125841" title="java.util.jar.JarInputStream">s</a>.<span title="()java.util.jar.Manifest">getManifest</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[java.lang.String]" id="125802">mainClass</a>     = <a href="#125800" title="=&gt; Option[java.util.jar.Manifest]">manifest</a> <span title="(f: java.util.jar.Manifest =&gt; java.lang.String)Option[java.lang.String]">map</span> <span class="delimiter">(</span><a title="java.util.jar.Manifest" id="125850">f</a> =&gt; <a href="package.scala.html#71877" title="(name: java.util.jar.Attributes.Name)java.lang.String">f</a><span class="delimiter">(</span><span title="object java.util.jar.Attributes.Name">Name</span>.<span title="java.util.jar.Attributes.Name">MAIN_CLASS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](f: java.util.jar.JarInputStream =&gt; T)T" id="125803">withJarInput</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="125805">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.jar.JarInputStream =&gt; T" id="125823">f</a>: JarInputStream =&gt; T<span class="delimiter">)</span>: <a href="#125805" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.util.jar.JarInputStream" id="383742">in</a> = <span title="java.util.jar.JarInputStream" class="keyword">new</span> <span title="java.util.jar.JarInputStream">JarInputStream</span><span class="delimiter">(</span><a href="#125817" title="scala.tools.nsc.io.File">file</a>.<a href="File.scala.html#70898" title="()java.io.FileInputStream">inputStream</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#125823" title="(v1: java.util.jar.JarInputStream)T">f</a><span class="delimiter">(</span><a href="#383742" title="java.util.jar.JarInputStream">in</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#383742" title="java.util.jar.JarInputStream">in</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()scala.tools.nsc.io.JarWriter" id="125806">jarWriter</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#383764" title="scala.tools.nsc.io.JarWriter" class="keyword">new</a> <a href="#21475" title="scala.tools.nsc.io.JarWriter">JarWriter</a><span class="delimiter">(</span><a href="#125817" title="scala.tools.nsc.io.File">file</a><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[U](f: java.util.jar.JarEntry =&gt; U)Unit" id="125807">foreach</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="125809">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.jar.JarEntry =&gt; U" id="383767">f</a>: JarEntry =&gt; U<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#125803" title="(f: java.util.jar.JarInputStream =&gt; Unit)Unit">withJarInput</a> <span class="delimiter">{</span> <a title="java.util.jar.JarInputStream" id="383795">in</a> =&gt;
    <span title="=&gt; collection.Iterator.type">Iterator</span> <span title="(elem: =&gt; java.util.jar.JarEntry)Iterator[java.util.jar.JarEntry]">continually</span> <a href="#383795" title="java.util.jar.JarInputStream">in</a>.<span title="()java.util.jar.JarEntry">getNextJarEntry</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(p: java.util.jar.JarEntry =&gt; Boolean)Iterator[java.util.jar.JarEntry]">takeWhile</span> <span class="delimiter">(</span><a href="#383801" title="java.util.jar.JarEntry">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(f: java.util.jar.JarEntry =&gt; U)Unit">foreach</span> <a href="#383767" title="java.util.jar.JarEntry =&gt; U">f</a>
  <span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[java.util.jar.JarEntry]" id="125810">iterator</a>: <span title="Iterator[java.util.jar.JarEntry]">Iterator</span><span class="delimiter">[</span>JarEntry<span class="delimiter">]</span> = <a href="#21333" title="Jar.this.type" class="keyword">this</a>.<span title="=&gt; List[java.util.jar.JarEntry]">toList</span>.<span title="=&gt; Iterator[java.util.jar.JarEntry]">iterator</span>
  <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.Fileish]" id="125811">fileishIterator</a>: <span title="Iterator[scala.tools.nsc.io.Fileish]">Iterator</span><span class="delimiter">[</span>Fileish<span class="delimiter">]</span> = <a href="#125798" title="=&gt; java.util.jar.JarFile">jarFile</a>.<span title="(i: java.util.Enumeration[java.util.jar.JarEntry])collection.JavaConverters.AsScala[Iterator[java.util.jar.JarEntry]]">entries</span>.<span title="=&gt; Iterator[java.util.jar.JarEntry]">asScala</span> <span title="(f: java.util.jar.JarEntry =&gt; scala.tools.nsc.io.Fileish)Iterator[scala.tools.nsc.io.Fileish]">map</span> <span class="delimiter">(</span><a title="java.util.jar.JarEntry" id="383843">x</a> =&gt; <a href="Fileish.scala.html#383687" title="(f: java.util.jar.JarEntry, in: () =&gt; java.io.InputStream)scala.tools.nsc.io.Fileish">Fileish</a><span class="delimiter">(</span><a href="#383843" title="java.util.jar.JarEntry">x</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#125812" title="(entry: java.util.jar.JarEntry)java.io.InputStream">getEntryStream</a><span class="delimiter">(</span><a href="#383843" title="java.util.jar.JarEntry">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(entry: java.util.jar.JarEntry)java.io.InputStream" id="125812">getEntryStream</a><span class="delimiter">(</span><a title="java.util.jar.JarEntry" id="383853">entry</a>: <span title="java.util.jar.JarEntry">JarEntry</span><span class="delimiter">)</span> = <a href="#125798" title="=&gt; java.util.jar.JarFile">jarFile</a> <span title="(x$1: java.util.zip.ZipEntry)java.io.InputStream">getInputStream</span> <a href="#383853" title="java.util.jar.JarEntry">entry</a> <span title="java.io.InputStream" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Null" class="keyword">null</span>   =&gt; <a href="#125797" title="(msg: String)Unit">errorFn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;No such entry: &quot;)" class="string">&quot;No such entry: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#383853" title="java.util.jar.JarEntry">entry</a><span class="delimiter">)</span> ; <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">case</span> <a title="java.io.InputStream" id="383856">x</a>      =&gt; <a href="#383856" title="java.io.InputStream">x</a>
  <span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="125813">toString</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#125817" title="scala.tools.nsc.io.File">file</a>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class JarWriter extends java.lang.Object with ScalaObject" id="21475">JarWriter</a><a href="#21475" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.io.File" id="383761">file</a>: <a href="File.scala.html#20973" title="scala.tools.nsc.io.File">File</a>, <span class="keyword">val</span> <a title="java.util.jar.Manifest" id="383764">manifest</a>: <span title="java.util.jar.Manifest">Manifest</span> = <span title="java.util.jar.Manifest" class="keyword">new</span> <span title="java.util.jar.Manifest">Manifest</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>  
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.util.jar.JarOutputStream" id="383755">out</a> = <span title="java.util.jar.JarOutputStream" class="keyword">new</span> <span title="java.util.jar.JarOutputStream">JarOutputStream</span><span class="delimiter">(</span><a href="#383761" title="scala.tools.nsc.io.File">file</a>.<a href="File.scala.html#70899" title="(append: Boolean)java.io.FileOutputStream">outputStream</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#383764" title="=&gt; java.util.jar.Manifest">manifest</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(dir: scala.tools.nsc.io.Directory)scala.tools.nsc.io.File" id="383756">writeAllFrom</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Directory" id="383868">dir</a>: <a href="Directory.scala.html#21564" title="scala.tools.nsc.io.Directory">Directory</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="#383868" title="scala.tools.nsc.io.Directory">dir</a>.<a href="Directory.scala.html#70949" title="=&gt; Iterator[scala.tools.nsc.io.Path]">list</a> <span title="(f: scala.tools.nsc.io.Path =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="383881">x</a> =&gt; <a href="#383758" title="(entry: scala.tools.nsc.io.Path, prefix: String)Unit">addEntry</a><span class="delimiter">(</span><a href="#383881" title="scala.tools.nsc.io.Path">x</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#383754" title="=&gt; java.util.jar.JarOutputStream">out</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#383761" title="scala.tools.nsc.io.File">file</a>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(entry: scala.tools.nsc.io.File, prefix: String)Unit" id="383757">addFile</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.File" id="383886">entry</a>: <a href="File.scala.html#20973" title="scala.tools.nsc.io.File">File</a>, <a title="String" id="383887">prefix</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#383754" title="=&gt; java.util.jar.JarOutputStream">out</a> <span title="(x$1: java.util.zip.ZipEntry)Unit">putNextEntry</span> <span title="java.util.jar.JarEntry" class="keyword">new</span> <span title="java.util.jar.JarEntry">JarEntry</span><span class="delimiter">(</span><a href="#383887" title="String">prefix</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#383886" title="scala.tools.nsc.io.File">entry</a>.<a href="Path.scala.html#68080" title="=&gt; String">name</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#383760" title="(in: java.io.InputStream, out: java.io.OutputStream)Unit">transfer</a><span class="delimiter">(</span><a href="#383886" title="scala.tools.nsc.io.File">entry</a>.<a href="File.scala.html#70898" title="()java.io.FileInputStream">inputStream</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#383754" title="=&gt; java.util.jar.JarOutputStream">out</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#383754" title="=&gt; java.util.jar.JarOutputStream">out</a>.<span title="()Unit">closeEntry</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(entry: scala.tools.nsc.io.Path, prefix: String)Unit" id="383758">addEntry</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="383882">entry</a>: <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a>, <a title="String" id="383883">prefix</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#383882" title="scala.tools.nsc.io.Path">entry</a>.<a href="Path.scala.html#68105" title="=&gt; Boolean">isFile</a><span class="delimiter">)</span> <a href="#383757" title="(entry: scala.tools.nsc.io.File, prefix: String)Unit">addFile</a><span class="delimiter">(</span><a href="#383882" title="scala.tools.nsc.io.Path">entry</a>.<a href="Path.scala.html#68068" title="=&gt; scala.tools.nsc.io.File">toFile</a>, <a href="#383883" title="String">prefix</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#383759" title="(entry: scala.tools.nsc.io.Directory, prefix: String)Unit">addDirectory</a><span class="delimiter">(</span><a href="#383882" title="scala.tools.nsc.io.Path">entry</a>.<a href="Path.scala.html#68069" title="=&gt; scala.tools.nsc.io.Directory">toDirectory</a>, <a href="#383883" title="String">prefix</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#383882" title="scala.tools.nsc.io.Path">entry</a>.<a href="Path.scala.html#68080" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(entry: scala.tools.nsc.io.Directory, prefix: String)Unit" id="383759">addDirectory</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Directory" id="383906">entry</a>: <a href="Directory.scala.html#21564" title="scala.tools.nsc.io.Directory">Directory</a>, <a title="String" id="383907">prefix</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#383906" title="scala.tools.nsc.io.Directory">entry</a>.<a href="Directory.scala.html#70949" title="=&gt; Iterator[scala.tools.nsc.io.Path]">list</a> <span title="(f: scala.tools.nsc.io.Path =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="383919">p</a> =&gt; <a href="#383758" title="(entry: scala.tools.nsc.io.Path, prefix: String)Unit">addEntry</a><span class="delimiter">(</span><a href="#383919" title="scala.tools.nsc.io.Path">p</a>, <a href="#383907" title="String">prefix</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(in: java.io.InputStream, out: java.io.OutputStream)Unit" id="383760">transfer</a><span class="delimiter">(</span><a title="java.io.InputStream" id="383893">in</a>: <span title="java.io.InputStream">InputStream</span>, <a title="java.io.OutputStream" id="383894">out</a>: <span title="java.io.OutputStream">OutputStream</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[Byte]" id="383897">buf</a> = <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(10240)" class="int">10240</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()Unit" id="383898">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#383893" title="java.io.InputStream">in</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Int">read</span><span class="delimiter">(</span><a href="#383897" title="Array[Byte]">buf</a>, <span title="Int(0)" class="int">0</span>, <a href="#383897" title="Array[Byte]">buf</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">-</span><span class="int">1</span> =&gt; <a href="#383893" title="java.io.InputStream">in</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Unit" id="383903">n</a>  =&gt; <a href="#383894" title="java.io.OutputStream">out</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#383897" title="Array[Byte]">buf</a>, <span title="Int(0)" class="int">0</span>, <a href="#383903" title="Int">n</a><span class="delimiter">)</span> ; <a href="#383898" title="()Unit">loop</a>
    <span class="delimiter">}</span>
    <a href="#383898" title="()Unit">loop</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scala.tools.nsc.io.Jar" id="21334">Jar</a> <span title="ScalaObject" class="delimiter">{</span>  
  <span class="comment">// See http://download.java.net/jdk7/docs/api/java/nio/file/Path.html</span>
  <span class="comment">// for some ideas.</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[Byte]" id="103570">ZipMagicNumber</a> = <span title="[A](xs: A*)List[A]">List</span><span title="(xs: Byte*)List[Byte]" class="delimiter">[</span><span title="Byte">Byte</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="Byte(80)" class="int">80</span>, <span title="Byte(75)" class="int">75</span>, <span title="Byte(3)" class="int">3</span>, <span title="Byte(4)" class="int">4</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.Path)Boolean" id="103572">magicNumberIsZip</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="383928">f</a>: <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span> = <a href="#383928" title="scala.tools.nsc.io.Path">f</a>.<a href="Path.scala.html#68105" title="=&gt; Boolean">isFile</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#383928" title="scala.tools.nsc.io.Path">f</a>.<a href="Path.scala.html#68068" title="=&gt; scala.tools.nsc.io.File">toFile</a>.<a href="Streamable.scala.html#70921" title="()Iterator[Byte]">bytes</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(n: Int)Iterator[Byte]">take</span><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<span title="=&gt; List[Byte]">toList</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#103570" title="=&gt; List[Byte]">ZipMagicNumber</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.Path)Boolean" id="103573">isJarOrZip</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="103723">f</a>: <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#103574" title="(f: scala.tools.nsc.io.Path, examineFile: Boolean)Boolean">isJarOrZip</a><span class="delimiter">(</span><a href="#103723" title="scala.tools.nsc.io.Path">f</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.Path, examineFile: Boolean)Boolean" id="103574">isJarOrZip</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="103578">f</a>: <a href="Path.scala.html#21081" title="scala.tools.nsc.io.Path">Path</a>, <a title="Boolean" id="103579">examineFile</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="#103578" title="scala.tools.nsc.io.Path">f</a>.<a href="Path.scala.html#68091" title="(ext: String, exts: String*)Boolean">hasExtension</a><span class="delimiter">(</span><span title="java.lang.String(&quot;zip&quot;)" class="string">&quot;zip&quot;</span>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#103579" title="Boolean">examineFile</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#103572" title="(f: scala.tools.nsc.io.Path)Boolean">magicNumberIsZip</a><span class="delimiter">(</span><a href="#103578" title="scala.tools.nsc.io.Path">f</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.File, sourceDir: scala.tools.nsc.io.Directory, mainClass: String)scala.tools.nsc.io.File" id="103575">create</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.File" id="129465">file</a>: <a href="File.scala.html#20973" title="scala.tools.nsc.io.File">File</a>, <a title="scala.tools.nsc.io.Directory" id="129466">sourceDir</a>: <a href="Directory.scala.html#21564" title="scala.tools.nsc.io.Directory">Directory</a>, <a title="String" id="129467">mainClass</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="File.scala.html#20973" title="scala.tools.nsc.io.File">File</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.JarWriter" id="383942">writer</a> = <span title="scala.tools.nsc.io.Jar" class="keyword">new</span> <a href="#21333" title="scala.tools.nsc.io.Jar">Jar</a><span class="delimiter">(</span><a href="#129465" title="scala.tools.nsc.io.File">file</a><span class="delimiter">)</span>.<a href="#125806" title="()scala.tools.nsc.io.JarWriter">jarWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#383942" title="scala.tools.nsc.io.JarWriter">writer</a>.<a href="package.scala.html#71878" title="(key: java.util.jar.Attributes.Name, value: String)java.lang.Object">manifest</a><span class="delimiter">(</span><span title="object java.util.jar.Attributes.Name">Name</span>.<span title="java.util.jar.Attributes.Name">MANIFEST_VERSION</span><span class="delimiter">)</span> = <span title="java.lang.String(&quot;1.0&quot;)" class="string">&quot;1.0&quot;</span>
    <a href="#383942" title="scala.tools.nsc.io.JarWriter">writer</a>.<a href="package.scala.html#71878" title="(key: java.util.jar.Attributes.Name, value: String)java.lang.Object">manifest</a><span class="delimiter">(</span><span title="object java.util.jar.Attributes.Name">Name</span>.<span title="java.util.jar.Attributes.Name">MAIN_CLASS</span><span class="delimiter">)</span> = <a href="#129467" title="String">mainClass</a>
    <a href="#383942" title="scala.tools.nsc.io.JarWriter">writer</a> <a href="#383756" title="(dir: scala.tools.nsc.io.Directory)scala.tools.nsc.io.File">writeAllFrom</a> <a href="#129466" title="scala.tools.nsc.io.Directory">sourceDir</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>