<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/cmd/program/Tokens.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Paul Phillips
 */</span>

<span class="keyword">package</span> scala.tools
<span class="keyword">package</span> cmd
<span class="keyword">package</span> program

<span class="keyword">import</span> nsc._
<span class="keyword">import</span> util.<a href="../../nsc/util/Chars.scala.html#42440" title="object scala.tools.nsc.util.Chars">Chars</a>.char2uescape
<span class="keyword">import</span> io._
<span class="keyword">import</span> ast.parser.<a href="../../nsc/ast/parser/Tokens.scala.html#24609" title="object scala.tools.nsc.ast.parser.Tokens">Tokens</a>._

<span class="comment">/** Given paths on the command line, tokenizes any scala files found
 *  and prints one token per line.
 */</span>
<span class="keyword">object</span> <a title="object scala.tools.cmd.program.Tokens" id="22410">Tokens</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="498921">tokensUsage</a> = <span title="java.lang.String(&quot;Usage: tokens [options] &lt;path1 path2 ...&gt;\012\012Options:&quot;)" class="string">&quot;Usage: tokens [options] &lt;path1 path2 ...&gt;\n\nOptions:&quot;</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[(java.lang.String, java.lang.String)]" id="498923">tokensUnary</a> = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: (java.lang.String, java.lang.String)*)List[(java.lang.String, java.lang.String)]">List</a><span class="delimiter">(</span>
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;verbose&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;be more verbose&quot;)" class="string">&quot;be more verbose&quot;</span>,
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;freq&quot;</a>    <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;combine token lists and sort by frequency&quot;)" class="string">&quot;combine token lists and sort by frequency&quot;</span>,
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;stats&quot;</a>   <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;output some stats&quot;)" class="string">&quot;output some stats&quot;</span>
  <span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[(java.lang.String, java.lang.String)]" id="498925">tokensBinary</a> = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: (java.lang.String, java.lang.String)*)List[(java.lang.String, java.lang.String)]">List</a><span class="delimiter">(</span>
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;sliding&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;print tokens in groups of given size&quot;)" class="string">&quot;print tokens in groups of given size&quot;</span>
  <span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.tools.cmd.Spec.Info" id="498927">tokensInfo</a> = <a href="Simple.scala.html#22485" title="object scala.tools.cmd.program.Simple">Simple</a>.<a href="Simple.scala.html#497752" title="(name: String, help: String)scala.tools.cmd.Spec.Info">scalaProgramInfo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;tokens&quot;)" class="string">&quot;tokens&quot;</span>, <a href="#498921" title="=&gt; java.lang.String">tokensUsage</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.cmd.program.Simple.SimpleReference" id="498930">TokensSpec</a> = <a href="Simple.scala.html#497751" title="(info: scala.tools.cmd.Spec.Info, unary: List[(String, String)], binary: List[(String, String)], postCreation: scala.tools.cmd.program.Simple.SimpleCommandLine =&gt; scala.tools.cmd.program.Simple.SimpleCommandLine)scala.tools.cmd.program.Simple.SimpleReference">Simple</a><span class="delimiter">(</span><a href="#498927" title="=&gt; scala.tools.cmd.Spec.Info">tokensInfo</a>, <a href="#498923" title="=&gt; List[(java.lang.String, java.lang.String)]">tokensUnary</a>, <a href="#498925" title="=&gt; List[(java.lang.String, java.lang.String)]">tokensBinary</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(x: Any)String" id="498931">sanitize</a><span class="delimiter">(</span><a title="Any" id="499019">x</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#498932" title="(str: String)String">sanitize</a><span class="delimiter">(</span><a href="#499019" title="Any">x</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(str: String)String" id="498932">sanitize</a><span class="delimiter">(</span><a title="String" id="499025">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">str</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: Char =&gt; scala.collection.GenTraversableOnce[Char])(implicit bf: scala.collection.generic.CanBuildFrom[String,Char,String])String">flatMap</a> <span class="delimiter">(</span><a title="Char" id="499455">x</a> =&gt; <span title="scala.collection.immutable.StringOps" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#9475" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">x</a>.<a href="../../../runtime/RichChar.scala.html#54855" title="=&gt; Boolean">isControl</a><span class="delimiter">)</span> <a href="../../nsc/util/Chars.scala.html#498726" title="(c: Char)String">char2uescape</a><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</a><a href="#499455" title="Char">x</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#499455" title="Char">x</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">toString</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(args0: Array[String])Unit" id="498933">main</a><span class="delimiter">(</span><a title="Array[String]" id="499550">args0</a>: <a href="../../../Array.scala.html#1430" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9626" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args0</a>.<a href="../../../collection/IndexedSeqOptimized.scala.html#55925" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="#498929" title="=&gt; scala.tools.cmd.program.Simple.SimpleReference">TokensSpec</a>.<a href="../Reference.scala.html#489571" title="=&gt; String">helpMsg</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.tools.cmd.program.Simple.SimpleInstance" id="499552">runner</a> = <a href="#498929" title="=&gt; scala.tools.cmd.program.Simple.SimpleReference">TokensSpec</a> <a href="Simple.scala.html#497818" title="(args: Array[String])scala.tools.cmd.program.Simple.SimpleInstance">instance</a> <a href="#499550" title="Array[String]">args0</a>
    <span class="keyword">import</span> <a href="#499552" title="scala.tools.cmd.program.Simple.SimpleInstance">runner</a>._

    <span class="keyword">val</span> <a title="List[scala.tools.nsc.io.File]" id="499554">files</a> = <span class="delimiter">(</span><a href="../Instance.scala.html#491423" title="=&gt; List[String]">residualArgs</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: String =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],scala.tools.nsc.io.File,List[scala.tools.nsc.io.File]])List[scala.tools.nsc.io.File]">flatMap</a> <a href="#498935" title="(arg: String)List[scala.tools.nsc.io.File]">walk</a><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#54140" title="=&gt; List[scala.tools.nsc.io.File]">distinct</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Simple.scala.html#498092" title="=&gt; scala.tools.cmd.CommandLine">parsed</a> <a href="../CommandLine.scala.html#489554" title="(arg: String)Boolean">isSet</a> <span title="java.lang.String(&quot;--verbose&quot;)" class="string">&quot;--verbose&quot;</span><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Tokenizing: &quot;)" class="string">&quot;Tokenizing: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#499554" title="List[scala.tools.nsc.io.File]">files</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: scala.tools.nsc.io.File =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.io.File],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#499883" title="scala.tools.nsc.io.File">_</a>.<a href="../../nsc/io/Path.scala.html#479413" title="=&gt; String">name</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Simple.scala.html#498092" title="=&gt; scala.tools.cmd.CommandLine">parsed</a> <a href="../CommandLine.scala.html#489554" title="(arg: String)Boolean">isSet</a> <span title="java.lang.String(&quot;--stats&quot;)" class="string">&quot;--stats&quot;</span><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Stats not yet implemented.&quot;)" class="string">&quot;Stats not yet implemented.&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; List[Any]" id="499555">raw</a> = <a href="#499554" title="List[scala.tools.nsc.io.File]">files</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: scala.tools.nsc.io.File =&gt; scala.collection.GenTraversableOnce[Any])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.io.File],Any,List[Any]])List[Any]">flatMap</a> <a href="#498937" title="(file: scala.tools.nsc.io.Path)List[Any]">fromScalaSource</a>
    <span class="keyword">def</span> <a title="=&gt; List[Any]" id="499556">tokens</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> =
      <span title="List[Any]" class="keyword">if</span> <span class="delimiter">(</span><a href="Simple.scala.html#498092" title="=&gt; scala.tools.cmd.CommandLine">parsed</a> <a href="../CommandLine.scala.html#489554" title="(arg: String)Boolean">isSet</a> <span title="java.lang.String(&quot;--sliding&quot;)" class="string">&quot;--sliding&quot;</span><span class="delimiter">)</span> <a href="#499555" title="=&gt; List[Any]">raw</a> <a href="../../../collection/IterableLike.scala.html#53876" title="(size: Int)Iterator[List[Any]]">sliding</a> <a href="../CommandLine.scala.html#489552" title="(arg: String)String">parsed</a><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</a><span title="java.lang.String(&quot;--sliding&quot;)" class="string">&quot;--sliding&quot;</span><span class="delimiter">)</span>.<a href="../../../collection/immutable/StringLike.scala.html#56568" title="=&gt; Int">toInt</a> <a href="../../../collection/Iterator.scala.html#59115" title="(f: List[Any] =&gt; String)Iterator[String]">map</a> <span class="delimiter">(</span><a href="#499996" title="List[Any]">_</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: Any =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Any],String,List[String]])List[String]">map</a> <a href="#498931" title="(x: Any)String">sanitize</a> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[String]">toList</a>
      <span class="keyword">else</span> <a href="#499555" title="=&gt; List[Any]">raw</a>

    <span class="keyword">def</span> <a title="=&gt; List[Any]" id="499557">output</a> =
      <span title="List[Any]" class="keyword">if</span> <span class="delimiter">(</span><a href="Simple.scala.html#498092" title="=&gt; scala.tools.cmd.CommandLine">parsed</a> <a href="../CommandLine.scala.html#489554" title="(arg: String)Boolean">isSet</a> <span title="java.lang.String(&quot;--freq&quot;)" class="string">&quot;--freq&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">(</span><a href="#499556" title="=&gt; List[Any]">tokens</a> <a href="../../../collection/TraversableLike.scala.html#49059" title="(f: Any =&gt; Any)scala.collection.immutable.Map[Any,List[Any]]">groupBy</a> <span class="delimiter">(</span><a title="Any" id="500066">x</a> =&gt; <a href="#500066" title="Any">x</a><span class="delimiter">)</span> <a href="../../../collection/immutable/MapLike.scala.html#102821" title="(f: List[Any] =&gt; Int)scala.collection.immutable.Map[Any,Int]">mapValues</a> <span class="delimiter">(</span><a href="#500090" title="List[Any]">_</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71030" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[(Any, Int)]">toList</a> <a href="../../../collection/SeqLike.scala.html#54178" title="(f: ((Any, Int)) =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[(Any, Int)]">sortBy</a> <span class="delimiter">(</span><a href="../../../Int.scala.html#54735" title="=&gt; Int">-</a><a href="#500113" title="(Any, Int)">_</a>.<a href="../../../Tuple2.scala.html#53404" title="=&gt; Int">_2</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: ((Any, Int)) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(Any, Int)],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</a> <span class="delimiter">(</span><a title="(Any, Int)" id="500192">x</a> =&gt; <a href="#500192" title="(Any, Int)">x</a>.<a href="../../../Tuple2.scala.html#53404" title="=&gt; Int">_2</a> <a href="../../../Int.scala.html#54737" title="(x: String)String">+</a> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500192" title="(Any, Int)">x</a>.<a href="../../../Tuple2.scala.html#53402" title="=&gt; Any">_1</a><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <a href="#499556" title="=&gt; List[Any]">tokens</a>

    <a href="#499557" title="=&gt; List[Any]">output</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Any =&gt; Unit)Unit">foreach</a> <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(paths: String*)List[Any]" id="498934">fromPaths</a><span class="delimiter">(</span><a title="String*" id="500260">paths</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="#500260" title="String*">paths</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[String]">toList</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: String =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],scala.tools.nsc.io.File,List[scala.tools.nsc.io.File]])List[scala.tools.nsc.io.File]">flatMap</a> <a href="#498935" title="(arg: String)List[scala.tools.nsc.io.File]">walk</a><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#54140" title="=&gt; List[scala.tools.nsc.io.File]">distinct</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: scala.tools.nsc.io.File =&gt; scala.collection.GenTraversableOnce[Any])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.io.File],Any,List[Any]])List[Any]">flatMap</a> <a href="#498937" title="(file: scala.tools.nsc.io.Path)List[Any]">fromScalaSource</a>

  <span class="comment">/** Given a path, returns all .scala files underneath it.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(arg: String)List[scala.tools.nsc.io.File]" id="498935">walk</a><span class="delimiter">(</span><a title="String" id="499829">arg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[scala.tools.nsc.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.Path]" id="500369">traverse</a> = <a href="../../nsc/io/Path.scala.html#479374" title="(path: String)scala.tools.nsc.io.Path">Path</a><span class="delimiter">(</span><a href="#499829" title="String">arg</a><span class="delimiter">)</span> <a href="../../nsc/io/Path.scala.html#479431" title="(f: scala.tools.nsc.io.Directory =&gt; Iterator[scala.tools.nsc.io.Path])Option[Iterator[scala.tools.nsc.io.Path]]">ifDirectory</a> <span class="delimiter">(</span><a href="#500384" title="scala.tools.nsc.io.Directory">_</a>.<a href="../../nsc/io/Directory.scala.html#481588" title="(depth: Int)Iterator[scala.tools.nsc.io.Path]">deepList</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; Iterator[scala.tools.nsc.io.Path])Iterator[scala.tools.nsc.io.Path]">getOrElse</a> <a href="../../../collection/Iterator.scala.html#71478" title="(elems: scala.tools.nsc.io.File*)Iterator[scala.tools.nsc.io.File]">Iterator</a><span class="delimiter">(</span><a href="../../nsc/io/File.scala.html#482216" title="(path: scala.tools.nsc.io.Path)(implicit codec: scala.io.Codec)scala.tools.nsc.io.File">File</a><a href="../../../io/Codec.scala.html#417661" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../../nsc/io/Path.scala.html#479366" title="implicit scala.tools.nsc.io.Path.string2path : (s: String)scala.tools.nsc.io.Path">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../nsc/io/Path.scala.html#33121" title="object scala.tools.nsc.io.Path">Path</a> <a href="../../nsc/io/Path.scala.html#479370" title="(xs: Iterator[scala.tools.nsc.io.Path])Iterator[scala.tools.nsc.io.File]">onlyFiles</a> <a href="#500369" title="=&gt; Iterator[scala.tools.nsc.io.Path]">traverse</a> <a href="../../../collection/Iterator.scala.html#59124" title="(p: scala.tools.nsc.io.File =&gt; Boolean)Iterator[scala.tools.nsc.io.File]">filter</a> <span class="delimiter">(</span><a href="#500409" title="scala.tools.nsc.io.File">_</a> <a href="../../nsc/io/Path.scala.html#479424" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="java.lang.String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[scala.tools.nsc.io.File]">toList</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(code: String)List[Any]" id="498936">fromScalaString</a><span class="delimiter">(</span><a title="String" id="500440">code</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.File" id="500442">f</a> = <a href="../../nsc/io/File.scala.html#33013" title="object scala.tools.nsc.io.File">File</a>.<a href="../../nsc/io/File.scala.html#482217" title="(prefix: String, suffix: String, dir: scala.tools.nsc.io.package.JFile)scala.tools.nsc.io.File">makeTemp</a><span class="delimiter">(</span><span title="java.lang.String(&quot;tokens&quot;)" class="string">&quot;tokens&quot;</span><span class="delimiter">)</span>
    <a href="#500442" title="scala.tools.nsc.io.File">f</a> <a href="../../nsc/io/File.scala.html#481543" title="(strings: String*)Unit">writeAll</a> <a href="#500440" title="String">code</a>
    <a href="#498937" title="(file: scala.tools.nsc.io.Path)List[Any]">fromScalaSource</a><span class="delimiter">(</span><a href="#500442" title="scala.tools.nsc.io.File">f</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Tokenizes a single scala file.
   */</span>
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.Path)List[Any]" id="498937">fromScalaSource</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="499943">file</a>: <a href="../../nsc/io/Path.scala.html#33120" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <a href="#498938" title="(file: String)List[Any]">fromScalaSource</a><span class="delimiter">(</span><a href="#499943" title="scala.tools.nsc.io.Path">file</a>.<a href="../../nsc/io/Path.scala.html#479414" title="=&gt; String">path</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(file: String)List[Any]" id="498938">fromScalaSource</a><span class="delimiter">(</span><a title="String" id="499941">file</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.Global" id="500455">global</a> = <a href="../../nsc/Global.scala.html#478208" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.Global" class="keyword">new</a> <a href="../../nsc/Global.scala.html#22521" title="scala.tools.nsc.Global">Global</a><span class="delimiter">(</span><a href="../../nsc/Settings.scala.html#469589" title="()scala.tools.nsc.Settings" class="keyword">new</a> <a href="../../nsc/Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">import</span> <a href="#500455" title="scala.tools.nsc.Global">global</a>._
    <span class="keyword">import</span> <a href="../../nsc/Global.scala.html#478280" title="object global.syntaxAnalyzer">syntaxAnalyzer</a>.<span class="delimiter">{</span> UnitScanner, token2string <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="global.syntaxAnalyzer.UnitScanner" id="500458">in</a> = <a href="../../nsc/ast/parser/Scanners.scala.html#500900" title="(unit: global.syntaxAnalyzer.global.CompilationUnit)global.syntaxAnalyzer.UnitScanner" class="keyword">new</a> <a href="../../nsc/ast/parser/Scanners.scala.html#500536" title="global.syntaxAnalyzer.UnitScanner">UnitScanner</a><span class="delimiter">(</span><span title="global.CompilationUnit" class="keyword">new</span> <a href="../../nsc/CompilationUnits.scala.html#479284" title="global.CompilationUnit">CompilationUnit</a><span class="delimiter">(</span><a href="../../nsc/Global.scala.html#478263" title="(name: String)scala.tools.nsc.util.SourceFile">getSourceFile</a><span class="delimiter">(</span><a href="#499941" title="String">file</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500883" title="()Unit">init</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="../../../package.scala.html#47534" title="=&gt; collection.Iterator.type">Iterator</a> <a href="../../../collection/Iterator.scala.html#71494" title="(elem: =&gt; Any)Iterator[Any]">continually</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Any" id="501087">token</a> = <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500917" title="=&gt; Int">token</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="global.syntaxAnalyzer.global.TermName">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span>  =&gt; <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500926" title="=&gt; global.syntaxAnalyzer.global.TermName">name</a>
        <span class="keyword">case</span> <span title="Long">CHARLIT</span> | <span title="Int(2)">INTLIT</span> | <span title="Int(3)">LONGLIT</span>     =&gt; <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500870" title="=&gt; Long">intVal</a>
        <span class="keyword">case</span> <span title="Double">DOUBLELIT</span> | <span title="Int(4)">FLOATLIT</span>           =&gt; <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500872" title="=&gt; Double">floatVal</a>
        <span class="keyword">case</span> <span title="java.lang.String">STRINGLIT</span>                      =&gt; <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500929" title="=&gt; String">strVal</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span>
        <span class="keyword">case</span> <span title="java.lang.String(&quot;;&quot;)">SEMI</span> | <span title="Int(78)">NEWLINE</span>                 =&gt; <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
        <span class="keyword">case</span> <span title="java.lang.String(&quot;;;&quot;)">NEWLINES</span>                       =&gt; <span title="java.lang.String(&quot;;;&quot;)" class="string">&quot;;;&quot;</span>
        <span class="keyword">case</span> <span title="java.lang.String(&quot;,&quot;)">COMMA</span>                          =&gt; <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>
        <span class="keyword">case</span> <span title="Null(null)">EOF</span>                            =&gt; <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">case</span> <a title="String" id="501100">x</a>                              =&gt; <a href="../../nsc/ast/parser/Scanners.scala.html#500533" title="(token: Int)String">token2string</a><span class="delimiter">(</span><a href="#501100" title="Int">x</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#500458" title="global.syntaxAnalyzer.UnitScanner">in</a>.<a href="../../nsc/ast/parser/Scanners.scala.html#500853" title="()Unit">nextToken</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#501087" title="Any">token</a>
    <span class="delimiter">}</span> <a href="../../../collection/Iterator.scala.html#59136" title="(p: Any =&gt; Boolean)Iterator[Any]">takeWhile</a> <span class="delimiter">(</span><a href="#501197" title="Any">_</a> <span title="(x$1: Any)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[Any]">toList</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>