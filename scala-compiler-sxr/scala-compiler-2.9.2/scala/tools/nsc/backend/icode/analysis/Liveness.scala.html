<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/backend/icode/analysis/Liveness.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Martin Odersky
 */</span>


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.icode
<span class="keyword">package</span> analysis

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> immutable.ListSet

<span class="comment">/**
 * Compute liveness information for local variables.
 *
 * @author Iulian Dragos
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Liveness extends java.lang.Object with ScalaObject" id="26752">Liveness</a> <a href="../../../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="611462">global</a>: <a href="../../../Global.scala.html#22521" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> <a href="#611462" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../Global.scala.html#478218" title="object Liveness.this.global.icodes">icodes</a>._

  <span class="comment">/** The lattice for this analysis.   */</span>
  <span class="keyword">object</span> <a title="object Liveness.this.livenessLattice" id="611465">livenessLattice</a> <a href="../../../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="SemiLattice.scala.html#26671" title="scala.tools.nsc.backend.icode.analysis.SemiLattice">SemiLattice</a> <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="Set[Liveness.this.global.icodes.Local]" id="621070">Elem</a> = <a href="../../../../../collection/immutable/Set.scala.html#13576" title="Set[Liveness.this.global.icodes.Local]">Set</a><span class="delimiter">[</span>Local<span class="delimiter">]</span>

    <span class="keyword">object</span> <a title="object scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.top" id="621085">top</a> <a href="../../../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="../../../../../collection/immutable/ListSet.scala.html#13693" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</a><span class="delimiter">[</span>Local<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../Members.scala.html#26006" title="scala.tools.nsc.backend.icode.ReferenceEquality">ReferenceEquality</a>
    <span class="keyword">object</span> <a title="object scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.bottom" id="621091">bottom</a> <a href="../../../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="../../../../../collection/immutable/ListSet.scala.html#13693" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</a><span class="delimiter">[</span>Local<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../Members.scala.html#26006" title="scala.tools.nsc.backend.icode.ReferenceEquality">ReferenceEquality</a>

    <span class="keyword">def</span> <a title="(exceptional: Boolean)(a: scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem, b: scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem)scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="621075">lub2</a><span class="delimiter">(</span><a title="Boolean" id="621092">exceptional</a>: <a href="../../../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="621093">a</a>: <a href="../../../../../collection/immutable/Set.scala.html#13576" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</a>, <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="621094">b</a>: <a href="../../../../../collection/immutable/Set.scala.html#13576" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</a><span class="delimiter">)</span>: <a href="../../../../../collection/immutable/Set.scala.html#13576" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</a> = <a href="#621093" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">a</a> <a href="../../../../../collection/SetLike.scala.html#65658" title="(elems: scala.collection.GenTraversableOnce[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">++</a> <a href="#621094" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">b</a>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">class</span> <a title="class LivenessAnalysis extends java.lang.Object with scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[Liveness.this.livenessLattice.type] with ScalaObject" id="611467">LivenessAnalysis</a> <a href="../../../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="DataFlowAnalysis.scala.html#26764" title="scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[Liveness.this.livenessLattice.type]">DataFlowAnalysis</a><span class="delimiter">[</span>livenessLattice.<span class="keyword">type</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="Liveness.this.global.icodes.BasicBlock" id="621156">P</a> = <a href="../BasicBlocks.scala.html#501270" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>
    <span class="keyword">val</span> <a title="Liveness.this.livenessLattice.type" id="621157">lattice</a> = <a href="#611465" title="object Liveness.this.livenessLattice">livenessLattice</a>

    <span class="keyword">var</span> <a title="Liveness.this.global.icodes.IMethod" id="621160">method</a>: <a href="../Members.scala.html#501263" title="Liveness.this.global.icodes.IMethod">IMethod</a> = _

    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]" id="621162">gen</a>: mutable.<a href="../../../../../collection/mutable/Map.scala.html#14767" title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">Map</a><span class="delimiter">[</span>BasicBlock, Set<span class="delimiter">[</span>Local<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="../../../../../collection/mutable/HashMap.scala.html#73156" title="()scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]" class="keyword">new</a> mutable.<a href="../../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">HashMap</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]" id="621164">kill</a>: mutable.<a href="../../../../../collection/mutable/Map.scala.html#14767" title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">Map</a><span class="delimiter">[</span>BasicBlock, Set<span class="delimiter">[</span>Local<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="../../../../../collection/mutable/HashMap.scala.html#73156" title="()scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]" class="keyword">new</a> mutable.<a href="../../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">HashMap</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(m: Liveness.this.global.icodes.IMethod)Unit" id="621166">init</a><span class="delimiter">(</span><a title="Liveness.this.global.icodes.IMethod" id="621182">m</a>: <a href="../Members.scala.html#501263" title="Liveness.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#611467" title="LivenessAnalysis.this.type" class="keyword">this</a>.<a href="#621160" title="(x$1: Liveness.this.global.icodes.IMethod)Unit">method</a> = <a href="#621182" title="Liveness.this.global.icodes.IMethod">m</a>
      <a href="#621162" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">gen</a>.<a href="../../../../../collection/mutable/MapLike.scala.html#73293" title="()Unit">clear</a>
      <a href="#621164" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">kill</a>.<a href="../../../../../collection/mutable/MapLike.scala.html#73293" title="()Unit">clear</a>

      <span class="keyword">for</span> <span class="delimiter">(</span><a href="../../../../../Tuple2.scala.html#53390" title="Liveness.this.global.icodes.BasicBlock" id="621317">b</a> &lt;- <a href="#621182" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#594471" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../../../../../collection/TraversableLike.scala.html#49041" title="(f: Liveness.this.global.icodes.BasicBlock =&gt; (Liveness.this.global.icodes.BasicBlock, (Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local])))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock],(Liveness.this.global.icodes.BasicBlock, (Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local])),scala.collection.mutable.ListBuffer[(Liveness.this.global.icodes.BasicBlock, (Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local]))]])scala.collection.mutable.ListBuffer[(Liveness.this.global.icodes.BasicBlock, (Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local]))]">blocks</a>;
           <a href="../../../../../Tuple3.scala.html#53296" title="((Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local]), Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local])" id="621213" class="delimiter">(</a><a href="../../../../../Tuple3.scala.html#53314" title="Set[Liveness.this.global.icodes.Local]" id="621320">g</a>, <a href="../../../../../Tuple3.scala.html#53316" title="Set[Liveness.this.global.icodes.Local]" id="621321">k</a><span class="delimiter">)</span> = <a href="#621168" title="(b: Liveness.this.global.icodes.BasicBlock)(Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local])">genAndKill</a><a href="../../../../../Tuple2.scala.html#1520" title="(Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local]) @unchecked" class="delimiter">(</a><a href="#621317" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#621162" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">gen</a>  <a href="../../../../../collection/mutable/MapLike.scala.html#73273" title="(kv: (Liveness.this.global.icodes.BasicBlock, Set[Liveness.this.global.icodes.Local]))LivenessAnalysis.this.gen.type">+=</a> <span class="delimiter">(</span><a href="../../../../../Predef.scala.html#9589" title="(x: Liveness.this.global.icodes.BasicBlock)ArrowAssoc[Liveness.this.global.icodes.BasicBlock]">b</a> <a href="../../../../../Predef.scala.html#57653" title="(y: Set[Liveness.this.global.icodes.Local])(Liveness.this.global.icodes.BasicBlock, Set[Liveness.this.global.icodes.Local])">-&gt;</a> <a href="#621320" title="Set[Liveness.this.global.icodes.Local]">g</a><span class="delimiter">)</span>
        <a href="#621164" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,Set[Liveness.this.global.icodes.Local]]">kill</a> <a href="../../../../../collection/mutable/MapLike.scala.html#73273" title="(kv: (Liveness.this.global.icodes.BasicBlock, Set[Liveness.this.global.icodes.Local]))LivenessAnalysis.this.kill.type">+=</a> <span class="delimiter">(</span><a href="../../../../../Predef.scala.html#9589" title="(x: Liveness.this.global.icodes.BasicBlock)ArrowAssoc[Liveness.this.global.icodes.BasicBlock]">b</a> <a href="../../../../../Predef.scala.html#57653" title="(y: Set[Liveness.this.global.icodes.Local])(Liveness.this.global.icodes.BasicBlock, Set[Liveness.this.global.icodes.Local])">-&gt;</a> <a href="#621321" title="Set[Liveness.this.global.icodes.Local]">k</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="DataFlowAnalysis.scala.html#619377" title="(f: =&gt; Unit)Unit">init</a> <span class="delimiter">{</span>
        <a href="DataFlowAnalysis.scala.html#619363" title="=&gt; scala.collection.mutable.Set[LivenessAnalysis.this.P]">worklist</a> <a href="../../../../../collection/generic/Growable.scala.html#56649" title="(xs: scala.collection.TraversableOnce[LivenessAnalysis.this.P])LivenessAnalysis.this.worklist.type">++=</a> <a href="#621182" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#594471" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../../collection/mutable/ListBuffer.scala.html#61794" title="=&gt; List[Liveness.this.global.icodes.BasicBlock]">toList</a>
        <a href="#621182" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#594471" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../../collection/generic/TraversableForwarder.scala.html#61936" title="(f: Liveness.this.global.icodes.BasicBlock =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Liveness.this.global.icodes.BasicBlock" id="621403">b</a> =&gt;
          <a href="../../../../../collection/mutable/MapLike.scala.html#73272" title="(key: LivenessAnalysis.this.P, value: LivenessAnalysis.this.lattice.Elem)Unit">in</a><span class="delimiter">(</span><a href="#621403" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>  = <a href="#621157" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#621091" title="object LivenessAnalysis.this.lattice.bottom">bottom</a>
          <a href="../../../../../collection/mutable/MapLike.scala.html#73272" title="(key: LivenessAnalysis.this.P, value: LivenessAnalysis.this.lattice.Elem)Unit">out</a><span class="delimiter">(</span><a href="#621403" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span> = <a href="#621157" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#621091" title="object LivenessAnalysis.this.lattice.bottom">bottom</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">import</span> <a href="../Opcodes.scala.html#501275" title="object Liveness.this.global.icodes.opcodes">opcodes</a>._

    <span class="comment">/** Return the gen and kill sets for this block. */</span>
    <span class="keyword">def</span> <a title="(b: Liveness.this.global.icodes.BasicBlock)(Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local])" id="621168">genAndKill</a><span class="delimiter">(</span><a title="Liveness.this.global.icodes.BasicBlock" id="621216">b</a>: <a href="../BasicBlocks.scala.html#501270" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../../Tuple2.scala.html#1520" title="(Set[Liveness.this.global.icodes.Local], Set[Liveness.this.global.icodes.Local])" class="delimiter">(</a>Set<span class="delimiter">[</span>Local<span class="delimiter">]</span>, Set<span class="delimiter">[</span>Local<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="621409">genSet</a> = <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" class="keyword">new</span> <a href="../../../../../collection/immutable/ListSet.scala.html#13693" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</a><span class="delimiter">[</span>Local<span class="delimiter">]</span>
      <span class="keyword">var</span> <a title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="621410">killSet</a> = <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" class="keyword">new</span> <a href="../../../../../collection/immutable/ListSet.scala.html#13693" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</a><span class="delimiter">[</span>Local<span class="delimiter">]</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Liveness.this.global.icodes.Instruction" id="621430">i</a> &lt;- <a href="../BasicBlocks.scala.html#594411" title="(f: Liveness.this.global.icodes.Instruction =&gt; Unit)Unit">b</a><span class="delimiter">)</span> <a href="#621430" title="Liveness.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">LOAD_LOCAL</span><span class="delimiter">(</span><a title="Liveness.this.global.icodes.Local" id="621432">local</a><span class="delimiter">)</span>  <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="../../../../../collection/GenSetLike.scala.html#59062" title="(elem: Liveness.this.global.icodes.Local)Boolean">killSet</a><span class="delimiter">(</span><a href="#621432" title="Liveness.this.global.icodes.Local">local</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#621409" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a> = <a href="#621409" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a> <a href="../../../../../collection/immutable/ListSet.scala.html#186064" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">+</a> <a href="#621432" title="Liveness.this.global.icodes.Local">local</a>
        <span class="keyword">case</span> <span title="Unit">STORE_LOCAL</span><span class="delimiter">(</span><a title="Liveness.this.global.icodes.Local" id="621463">local</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="../../../../../collection/GenSetLike.scala.html#59062" title="(elem: Liveness.this.global.icodes.Local)Boolean">genSet</a><span class="delimiter">(</span><a href="#621463" title="Liveness.this.global.icodes.Local">local</a><span class="delimiter">)</span><span class="delimiter">)</span>  =&gt; <a href="#621410" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a> = <a href="#621410" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a> <a href="../../../../../collection/immutable/ListSet.scala.html#186064" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">+</a> <a href="#621463" title="Liveness.this.global.icodes.Local">local</a>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="../../../../../Predef.scala.html#57855" title="(x: scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local], y: scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local])(scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local], scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local])">Pair</a><span class="delimiter">(</span><a href="#621409" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a>, <a href="#621410" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="621169">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="DataFlowAnalysis.scala.html#619381" title="(f: (LivenessAnalysis.this.P, LivenessAnalysis.this.lattice.Elem) =&gt; LivenessAnalysis.this.lattice.Elem)Unit">backwardAnalysis</a><span class="delimiter">(</span><a href="#621170" title="(b: Liveness.this.global.icodes.BasicBlock, out: LivenessAnalysis.this.lattice.Elem)LivenessAnalysis.this.lattice.Elem">blockTransfer</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../ICodes.scala.html#501223" title="=&gt; Liveness.this.global.icodes.Linearizer">linearizer</a>.<a href="../Linearizers.scala.html#611346" title="(c: Liveness.this.global.icodes.IMethod)List[Liveness.this.global.icodes.BasicBlock]">linearize</a><span class="delimiter">(</span><a href="#621160" title="=&gt; Liveness.this.global.icodes.IMethod">method</a><span class="delimiter">)</span>.<a href="../../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Liveness.this.global.icodes.BasicBlock =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a title="Liveness.this.global.icodes.BasicBlock" id="621534">b</a> =&gt; <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#621534" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#621160" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#594471" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#594546" title="=&gt; Liveness.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span>
          <a href="../../../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#621157" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#621091" title="object LivenessAnalysis.this.lattice.bottom">bottom</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../../collection/MapLike.scala.html#73204" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">in</a><span class="delimiter">(</span><a href="#621534" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>,
            <span title="java.lang.String(&quot;Block &quot;)" class="string">&quot;Block &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#621534" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#611467" title="LivenessAnalysis.this.type" class="keyword">this</a>.<a href="#621160" title="=&gt; Liveness.this.global.icodes.IMethod">method</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has input equal to bottom -- not visited?&quot;)" class="string">&quot; has input equal to bottom -- not visited?&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(b: Liveness.this.global.icodes.BasicBlock, out: LivenessAnalysis.this.lattice.Elem)LivenessAnalysis.this.lattice.Elem" id="621170">blockTransfer</a><span class="delimiter">(</span><a title="Liveness.this.global.icodes.BasicBlock" id="621499">b</a>: <a href="../BasicBlocks.scala.html#501270" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="LivenessAnalysis.this.lattice.Elem" id="621500">out</a>: lattice.<a href="../../../../../collection/immutable/Set.scala.html#13576" title="LivenessAnalysis.this.lattice.Elem">Elem</a><span class="delimiter">)</span>: lattice.<a href="../../../../../collection/immutable/Set.scala.html#13576" title="LivenessAnalysis.this.lattice.Elem">Elem</a> =
      <a href="../../../../../collection/MapLike.scala.html#73204" title="(key: Liveness.this.global.icodes.BasicBlock)Set[Liveness.this.global.icodes.Local]">gen</a><span class="delimiter">(</span><a href="#621499" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span> <a href="../../../../../collection/SetLike.scala.html#65658" title="(elems: scala.collection.GenTraversableOnce[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">++</a> <span class="delimiter">(</span><a href="#621500" title="LivenessAnalysis.this.lattice.Elem">out</a> <a href="../../../../../collection/generic/Subtractable.scala.html#61846" title="(xs: scala.collection.GenTraversableOnce[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">--</a> <a href="../../../../../collection/MapLike.scala.html#73204" title="(key: Liveness.this.global.icodes.BasicBlock)Set[Liveness.this.global.icodes.Local]">kill</a><span class="delimiter">(</span><a href="#621499" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/** Abstract interpretation for one instruction. Very important:
     *  liveness is a backward DFA, so this method should be used to compute
     *  liveness *before* the given instruction `i'.
     */</span>
    <span class="keyword">def</span> <a title="(out: LivenessAnalysis.this.lattice.Elem, i: Liveness.this.global.icodes.Instruction)LivenessAnalysis.this.lattice.Elem" id="621171">interpret</a><span class="delimiter">(</span><a title="LivenessAnalysis.this.lattice.Elem" id="621655">out</a>: lattice.<a href="../../../../../collection/immutable/Set.scala.html#13576" title="LivenessAnalysis.this.lattice.Elem">Elem</a>, <a title="Liveness.this.global.icodes.Instruction" id="621656">i</a>: <a href="../Opcodes.scala.html#501274" title="Liveness.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: lattice.<a href="../../../../../collection/immutable/Set.scala.html#13576" title="LivenessAnalysis.this.lattice.Elem">Elem</a> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="LivenessAnalysis.this.lattice.Elem" id="621658">in</a> = <a href="#621655" title="LivenessAnalysis.this.lattice.Elem">out</a>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;- &quot;)" class="string">&quot;- &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#621656" title="Liveness.this.global.icodes.Instruction">i</a><span class="delimiter">)</span>
        <a href="../../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;out: &quot;)" class="string">&quot;out: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#621655" title="LivenessAnalysis.this.lattice.Elem">out</a><span class="delimiter">)</span>
        <a href="../../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#621656" title="Liveness.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">LOAD_LOCAL</span><span class="delimiter">(</span><a title="Liveness.this.global.icodes.Local" id="621663">l</a><span class="delimiter">)</span> =&gt; <a href="#621658" title="LivenessAnalysis.this.lattice.Elem">in</a> <a href="../../../../../collection/SetLike.scala.html#65656" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">+=</a> <a href="#621663" title="Liveness.this.global.icodes.Local">l</a>
        <span class="keyword">case</span> <span title="Unit">STORE_LOCAL</span><span class="delimiter">(</span><a title="Liveness.this.global.icodes.Local" id="621676">l</a><span class="delimiter">)</span> =&gt; <a href="#621658" title="LivenessAnalysis.this.lattice.Elem">in</a> <a href="../../../../../collection/SetLike.scala.html#65660" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">-=</a> <a href="#621676" title="Liveness.this.global.icodes.Local">l</a>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
          <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#621658" title="LivenessAnalysis.this.lattice.Elem">in</a>
    <span class="delimiter">}</span> <span class="comment">/* def interpret */</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="621172">toString</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="StringBuilder" id="621693">buf</a> = <a href="../../../../../collection/mutable/StringBuilder.scala.html#60509" title="()StringBuilder" class="keyword">new</a> <a href="../../../../../package.scala.html#47558" title="StringBuilder">StringBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Liveness.this.global.icodes.BasicBlock" id="621718">b</a> &lt;- <a href="#621160" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#594471" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Liveness.this.global.icodes.BasicBlock =&gt; StringBuilder)Unit">toList</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#621693" title="StringBuilder">buf</a>.<a href="../../../../../collection/mutable/StringBuilder.scala.html#60531" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012live-in(&quot;)" class="string">&quot;\nlive-in(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#621718" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)=&quot;)" class="string">&quot;)=&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../../collection/MapLike.scala.html#73204" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">in</a><span class="delimiter">(</span><a href="#621718" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012live-out(&quot;)" class="string">&quot;\nlive-out(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#621718" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)=&quot;)" class="string">&quot;)=&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../../collection/MapLike.scala.html#73204" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">out</a><span class="delimiter">(</span><a href="#621718" title="Liveness.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
      <a href="#621693" title="StringBuilder">buf</a>.<a href="../../../../../collection/mutable/StringBuilder.scala.html#60572" title="()java.lang.String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">/* Liveness analysis */</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>