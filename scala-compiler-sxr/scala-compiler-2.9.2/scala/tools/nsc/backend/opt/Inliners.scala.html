<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/backend/opt/Inliners.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Iulian Dragos
 */</span>


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.opt

<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> scala.tools.nsc.symtab._

<span class="comment">/**
 *  @author Iulian Dragos
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Inliners extends scala.tools.nsc.SubComponent with ScalaObject" id="27670">Inliners</a> <a href="../../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="../../SubComponent.scala.html#22920" title="scala.tools.nsc.SubComponent">SubComponent</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../../SubComponent.scala.html#500466" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../Global.scala.html#478218" title="object Inliners.this.global.icodes">icodes</a>._
  <span class="keyword">import</span> <a href="../../Global.scala.html#478218" title="object Inliners.this.global.icodes">icodes</a>.<a href="../icode/Opcodes.scala.html#501275" title="object Inliners.this.global.icodes.opcodes">opcodes</a>._
  <span class="keyword">import</span> <a href="../../symtab/Definitions.scala.html#479030" title="object Inliners.this.global.definitions">definitions</a>.<span class="delimiter">{</span>
    NullClass, NothingClass, ObjectClass,
    PredefModule, RuntimePackage, ScalaInlineClass, ScalaNoInlineClass,
    isFunctionType
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="java.lang.String" id="513546">phaseName</a> = <span title="java.lang.String(&quot;inliner&quot;)" class="string">&quot;inliner&quot;</span>

  <span class="comment">/** Debug - for timing the inliner. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](s: String, body: =&gt; T)T" id="513548">timed</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="513550">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="648265">s</a>: <span title="String">String</span>, <a title="=&gt; T" id="648266">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#513550" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="648270">t1</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="648271">res</a> = <a href="#648266" title="=&gt; T">body</a>
    <span class="keyword">val</span> <a title="Long" id="648272">t2</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="648273">ms</a> = <span class="delimiter">(</span><a href="#648272" title="Long">t2</a> <a href="../../../../Long.scala.html#55177" title="(x: Long)Long">-</a> <a href="#648270" title="Long">t1</a><span class="delimiter">)</span>.<a href="../../../../Long.scala.html#55095" title="=&gt; Int">toInt</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#648273" title="Int">ms</a> <a href="../../../../Int.scala.html#54782" title="(x: Int)Boolean">&gt;=</a> <span title="Int(2000)">MAX_INLINE_MILLIS</span><span class="delimiter">)</span>
      <a href="../../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s: %d milliseconds&quot;</a>.<a href="../../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#648265" title="String">s</a>, <a href="#648273" title="Int">ms</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#648271" title="T">res</a>
  <span class="delimiter">}</span>

  <span class="comment">/* A warning threshold */</span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(2000)" id="513551">MAX_INLINE_MILLIS</a> = <span title="Int(2000)" class="int">2000</span>

  <span class="comment">/** The maximum size in basic blocks of methods considered for inlining. */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(16)" id="513553">MAX_INLINE_SIZE</a> = <span title="Int(16)" class="int">16</span>

  <span class="comment">/** Maximum loop iterations. */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(15)" id="513555">MAX_INLINE_RETRY</a> = <span title="Int(15)" class="int">15</span>

  <span class="comment">/** Small method size (in blocks) */</span>
  <span class="keyword">val</span> <a title="Int" id="513557">SMALL_METHOD_SIZE</a> = <span title="Int(1)" class="int">1</span>

  <span class="comment">/** Create a new phase */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.Phase)Inliners.this.InliningPhase" id="513559">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="515082">p</a>: <a href="../../Phase.scala.html#22578" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> = <span title="Inliners.this.InliningPhase" class="keyword">new</span> <a href="#513560" title="Inliners.this.InliningPhase">InliningPhase</a><span class="delimiter">(</span><a href="#515082" title="scala.tools.nsc.Phase">p</a><span class="delimiter">)</span>

  <span class="comment">/** The Inlining phase.
   */</span>
  <span class="keyword">class</span> <a title="class InliningPhase extends Inliners.this.global.icodes.ICodePhase with ScalaObject" id="513560">InliningPhase</a><a href="../../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="515092">prev</a>: <a href="../../Phase.scala.html#22578" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../icode/ICodes.scala.html#501250" title="Inliners.this.global.icodes.ICodePhase">ICodePhase</a><span class="delimiter">(</span><a href="#515092" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="515088">name</a> = <a href="#513546" title="=&gt; java.lang.String">phaseName</a>
    <span class="keyword">val</span> <a title="Inliners.this.Inliner" id="515089">inliner</a> = <span title="Inliners.this.Inliner" class="keyword">new</span> <a href="#513564" title="Inliners.this.Inliner">Inliner</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(c: Inliners.this.global.icodes.IClass)Unit" id="515091">apply</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IClass" id="648322">c</a>: <a href="../icode/Members.scala.html#501261" title="Inliners.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#515089" title="=&gt; Inliners.this.Inliner">inliner</a> <a href="#648306" title="(cls: Inliners.this.global.icodes.IClass)Unit">analyzeClass</a> <a href="#648322" title="Inliners.this.global.icodes.IClass">c</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="513561">isBottomType</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="648341">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#648341" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#507931" title="=&gt; Inliners.this.global.Symbol">NullClass</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#648341" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#507933" title="=&gt; Inliners.this.global.Symbol">NothingClass</a>
  <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)java.lang.String" id="513562">posToStr</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="648352">pos</a>: util.<a href="../../util/Position.scala.html#42664" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#648352" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#501488" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#648352" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#501495" title="=&gt; Int">point</a>.<span title="()java.lang.String">toString</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&lt;nopos&gt;&quot;)" class="string">&quot;&lt;nopos&gt;&quot;</span>

  <span class="comment">/** Is the given class a closure? */</span>
  <span class="keyword">def</span> <a title="(cls: Inliners.this.global.Symbol)Boolean" id="513563">isClosureClass</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="627440">cls</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> =
    <a href="#627440" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435297" title="=&gt; Boolean">isFinal</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#627440" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435304" title="=&gt; Boolean">isSynthetic</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#627440" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435387" title="=&gt; Boolean">isModuleClass</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#627440" title="Inliners.this.global.Symbol">cls</a>.<a href="../../symtab/Symbols.scala.html#509193" title="=&gt; Boolean">isAnonymousFunction</a>

  <span class="comment">/**
   * Simple inliner.
   */</span>
  <span class="keyword">class</span> <a title="class Inliner extends java.lang.Object with ScalaObject" id="513564">Inliner</a> <a href="../../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    <span class="keyword">object</span> <a title="object Inliner.this.NonPublicRefs" id="648294">NonPublicRefs</a> <a href="../../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="../../../../Enumeration.scala.html#956" title="Enumeration">Enumeration</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value" id="648332">Public</a>, <a title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value" id="648334">Protected</a>, <a title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value" id="648336">Private</a> = <a href="../../../../Enumeration.scala.html#72677" title="=&gt; scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value">Value</a>

      <span class="comment">/** Cache whether a method calls private members. */</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value]" id="648338">usesNonPublics</a>: mutable.<a href="../../../../collection/mutable/Map.scala.html#14767" title="scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value]">Map</a><span class="delimiter">[</span>IMethod, Value<span class="delimiter">]</span> = <a href="../../../../collection/mutable/HashMap.scala.html#73156" title="()scala.collection.mutable.HashMap[Inliners.this.global.icodes.IMethod,scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.IMethod,scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value]">HashMap</a>
    <span class="delimiter">}</span>
    <span class="keyword">import</span> <a href="#648294" title="object Inliner.this.NonPublicRefs">NonPublicRefs</a>._

    <span class="comment">/* fresh name counter */</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,Int]" id="648297">fresh</a> = <a href="../../../../collection/mutable/HashMap.scala.html#73156" title="()scala.collection.mutable.HashMap[String,Int]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[String,Int]">HashMap</a><span class="delimiter">[</span>String, Int<span class="delimiter">]</span> <a href="../../../../collection/mutable/Map.scala.html#72699" title="(d: Int)scala.collection.mutable.Map[String,Int]">withDefaultValue</a> <span title="Int(0)" class="int">0</span>
    <span class="keyword">def</span> <a title="(s: String)java.lang.String" id="648299">freshName</a><span class="delimiter">(</span><a title="String" id="648385">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="../../../../collection/mutable/MapLike.scala.html#73272" title="(key: String, value: Int)Unit">fresh</a><span class="delimiter">(</span><a href="#648385" title="String">s</a><span class="delimiter">)</span> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="#648385" title="String">s</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../collection/MapLike.scala.html#73204" title="(key: String)Int">fresh</a><span class="delimiter">(</span><a href="#648385" title="String">s</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="648300">hasInline</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="648445">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>    = <a href="#648445" title="Inliners.this.global.Symbol">sym</a> <a href="../../symtab/Symbols.scala.html#509119" title="(cls: Inliners.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../symtab/Definitions.scala.html#507991" title="=&gt; Inliners.this.global.Symbol">ScalaInlineClass</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="648301">hasNoInline</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="648453">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>  = <a href="#648453" title="Inliners.this.global.Symbol">sym</a> <a href="../../symtab/Symbols.scala.html#509119" title="(cls: Inliners.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../symtab/Definitions.scala.html#507993" title="=&gt; Inliners.this.global.Symbol">ScalaNoInlineClass</a>

    <span class="comment">/** The current iclass */</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Inliners.this.global.icodes.IClass" id="648303">currentIClazz</a>: <a href="../icode/Members.scala.html#501261" title="Inliners.this.global.icodes.IClass">IClass</a> = _
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pos: Inliners.this.global.Position, msg: String)Unit" id="648305">warn</a><span class="delimiter">(</span><a title="Inliners.this.global.Position" id="648461">pos</a>: <a href="../../util/Position.scala.html#42664" title="Inliners.this.global.Position">Position</a>, <a title="String" id="648462">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#648303" title="=&gt; Inliners.this.global.icodes.IClass">currentIClazz</a>.<a href="../icode/Members.scala.html#501672" title="=&gt; Inliners.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#500979" title="(pos: Inliners.this.global.icodes.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#648461" title="Inliners.this.global.Position">pos</a>, <a href="#648462" title="String">msg</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(cls: Inliners.this.global.icodes.IClass)Unit" id="648306">analyzeClass</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IClass" id="648330">cls</a>: <a href="../icode/Members.scala.html#501261" title="Inliners.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#461" title="Unit">Unit</a> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469731" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">inline</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        	<a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Analyzing &quot;)" class="string">&quot;Analyzing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#648330" title="Inliners.this.global.icodes.IClass">cls</a><span class="delimiter">)</span>

        <a href="#513564" title="Inliner.this.type" class="keyword">this</a>.<a href="#648303" title="(x$1: Inliners.this.global.icodes.IClass)Unit">currentIClazz</a> = <a href="#648330" title="Inliners.this.global.icodes.IClass">cls</a>
        <a href="#648330" title="Inliners.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#501669" title="=&gt; List[Inliners.this.global.icodes.IMethod]">methods</a> <a href="../../../../collection/TraversableLike.scala.html#49052" title="(p: Inliners.this.global.icodes.IMethod =&gt; Boolean)List[Inliners.this.global.icodes.IMethod]">filterNot</a> <span class="delimiter">(</span><a href="#648484" title="Inliners.this.global.icodes.IMethod">_</a>.<a href="../icode/Members.scala.html#594468" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#509180" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span> <a href="../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Inliners.this.global.icodes.IMethod =&gt; Unit)Unit">foreach</a> <a href="#648311" title="(m: Inliners.this.global.icodes.IMethod)Unit">analyzeMethod</a>
      <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Inliners.this.global.analysis.MethodTFA" id="648307">tfa</a>   = <span title="Inliners.this.global.analysis.MethodTFA" class="keyword">new</span> <a href="../../Global.scala.html#478224" title="object Inliners.this.global.analysis">analysis</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#508979" title="Inliners.this.global.analysis.MethodTFA">MethodTFA</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#619372" title="(x$1: Boolean)Unit">stat</a>  = <a href="../../SubComponent.scala.html#500466" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../../Global.scala.html#478259" title="object Inliners.this.global.opt">opt</a>.<a href="../../settings/AestheticSettings.scala.html#501735" title="=&gt; Boolean">printStats</a>

    <span class="comment">// how many times have we already inlined this method here?</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]" id="648309">inlinedMethodCount</a>: mutable.<a href="../../../../collection/mutable/Map.scala.html#14767" title="scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]">Map</a><span class="delimiter">[</span>Symbol, Int<span class="delimiter">]</span> = <a href="#648510" title="scala.collection.mutable.HashMap[Inliners.this.global.Symbol,Int]" class="keyword">new</a> <a href="../../../../collection/mutable/HashMap.scala.html#73156" title="anonymous class $anon extends scala.collection.mutable.HashMap[Inliners.this.global.Symbol,Int]" id="648510">mutable</a>.<a href="../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[Inliners.this.global.Symbol,Int]">HashMap</a><span class="delimiter">[</span>Symbol, Int<span class="delimiter">]</span> <span class="delimiter">{</span>
    	<span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: Inliners.this.global.Symbol)Int" id="648983">default</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="648984">k</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="Int(0)" class="int">0</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: Inliners.this.global.icodes.IMethod)Unit" id="648311">analyzeMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IMethod" id="648505">m</a>: <a href="../icode/Members.scala.html#501263" title="Inliners.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="649003">sizeBeforeInlining</a> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#61783" title="=&gt; Int">length</a> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="649004">instrBeforeInlining</a> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/generic/TraversableForwarder.scala.html#61947" title="(z: Int)(op: (Int, Inliners.this.global.icodes.BasicBlock) =&gt; Int)Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#649040" title="Int">_</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <a href="#649041" title="Inliners.this.global.icodes.BasicBlock">_</a>.<a href="../icode/BasicBlocks.scala.html#594414" title="=&gt; Int">length</a><span class="delimiter">)</span>  <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Boolean" id="649005">retry</a> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">var</span> <a title="Int" id="649006">count</a> = <span title="Int(0)" class="int">0</span>
      <a href="#648297" title="=&gt; scala.collection.mutable.Map[String,Int]">fresh</a>.<a href="../../../../collection/mutable/MapLike.scala.html#73293" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#648309" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]">inlinedMethodCount</a>.<a href="../../../../collection/mutable/MapLike.scala.html#73293" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="649007">caller</a> = <span title="Inliner.this.IMethodInfo" class="keyword">new</span> <a href="#648316" title="Inliner.this.IMethodInfo">IMethodInfo</a><span class="delimiter">(</span><a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Inliner.this.tfa.lattice.Elem" id="649008">info</a>: tfa.lattice.<a href="../icode/analysis/SemiLattice.scala.html#618921" title="Inliner.this.tfa.lattice.Elem">Elem</a> = <span title="Null(null)" class="keyword">null</span>

      <span class="keyword">def</span> <a title="(msym: Inliners.this.global.Symbol, i: Inliners.this.global.icodes.Instruction, bb: Inliners.this.global.icodes.BasicBlock)Boolean" id="649009">analyzeInc</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649084">msym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.icodes.Instruction" id="649085">i</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a>, <a title="Inliners.this.global.icodes.BasicBlock" id="649086">bb</a>: <a href="../icode/BasicBlocks.scala.html#501270" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Boolean" id="649087">inlined</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.Type]" id="649088">paramTypes</a>  = <a href="#649084" title="Inliners.this.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#509272" title="=&gt; Inliners.this.global.Type">info</a>.<a href="../../symtab/Types.scala.html#507181" title="=&gt; List[Inliners.this.global.Type]">paramTypes</a>
        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.global.Symbol" id="649089">receiver</a>    = <span class="delimiter">(</span><a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#621802" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a>.<a href="../icode/TypeStacks.scala.html#608175" title="=&gt; Inliners.this.global.analysis.global.icodes.Rep">types</a> <a href="../../../../collection/immutable/List.scala.html#49164" title="(n: Int)List[Inliners.this.global.analysis.global.icodes.TypeKind]">drop</a> <a href="#649088" title="=&gt; List[Inliners.this.global.Type]">paramTypes</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#71030" title="=&gt; Int">length</a><span class="delimiter">)</span>.<a href="../../../../collection/IterableLike.scala.html#53870" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeKind">head</a> <span title="Inliners.this.global.icodes.global.Symbol" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Inliners.this.global.icodes.global.Symbol">REFERENCE</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="649108">s</a><span class="delimiter">)</span> =&gt; <a href="#649108" title="Inliners.this.global.icodes.global.Symbol">s</a>
          <span class="keyword">case</span> <span title="Inliners.this.global.NoSymbol.type">_</span>            =&gt; <a href="../../symtab/Symbols.scala.html#478667" title="object Inliners.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="Inliners.this.global.Symbol" id="649090">concreteMethod</a>  = <a href="#648315" title="(sym: Inliners.this.global.Symbol, clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">lookupImplFor</a><span class="delimiter">(</span><a href="#649084" title="Inliners.this.global.Symbol">msym</a>, <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(reason: String)Unit" id="649091">warnNoInline</a><span class="delimiter">(</span><a title="String" id="649112">reason</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#648300" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#649084" title="Inliners.this.global.Symbol">msym</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649060" title="=&gt; Boolean">isBridge</a><span class="delimiter">)</span>
            <a href="#648305" title="(pos: Inliners.this.global.Position, msg: String)Unit">warn</a><span class="delimiter">(</span><a href="#649085" title="Inliners.this.global.icodes.Instruction">i</a>.<a href="../icode/Opcodes.scala.html#594690" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="../../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Could not inline required method %s because %s.&quot;</a>.<a href="../../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#649084" title="Inliners.this.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#509258" title="=&gt; Inliners.this.global.Name">originalName</a>.<a href="../../symtab/Names.scala.html#501159" title="=&gt; String">decode</a>, <a href="#649112" title="String">reason</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#648314" title="(sym: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Boolean">shouldLoadImplFor</a><span class="delimiter">(</span><a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>, <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../Global.scala.html#478218" title="object Inliners.this.global.icodes">icodes</a>.<a href="../icode/Repository.scala.html#501447" title="(sym: Inliners.this.global.icodes.global.Symbol)Unit">load</a><span class="delimiter">(</span><a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435409" title="=&gt; Inliners.this.global.Symbol">enclClass</a><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="=&gt; Boolean" id="649092">isAvailable</a> = <a href="../../Global.scala.html#478218" title="object Inliners.this.global.icodes">icodes</a> <a href="../icode/Repository.scala.html#501444" title="(sym: Inliners.this.global.icodes.global.Symbol)Boolean">available</a> <a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435409" title="=&gt; Inliners.this.global.Symbol">enclClass</a>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="649093">isCandidate</a> = <a href="#513563" title="(cls: Inliners.this.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../symtab/Symbols.scala.html#509237" title="=&gt; Boolean">isEffectivelyFinal</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435297" title="=&gt; Boolean">isFinal</a>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="649094">isApply</a>     = <a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../symtab/Symbols.scala.html#509256" title="=&gt; Inliners.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#479055" title="object Inliners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#516580" title="=&gt; Inliners.this.global.nme.NameType">apply</a>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="649095">isCountable</a> = <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#513563" title="(cls: Inliners.this.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a><span class="delimiter">)</span>
                <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649094" title="=&gt; Boolean">isApply</a>
                <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#648312" title="(sym: Inliners.this.global.Symbol)Boolean">isMonadicMethod</a><span class="delimiter">(</span><a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a><span class="delimiter">)</span>
                <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a>.<a href="../../symtab/Symbols.scala.html#509323" title="=&gt; Inliners.this.global.icodes.global.Symbol">enclosingPackage</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#479030" title="object Inliners.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#507894" title="=&gt; Inliners.this.global.Symbol">RuntimePackage</a>
                <span class="delimiter">)</span>   <span class="comment">// only count non-closures</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Treating &quot;)" class="string">&quot;Treating &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649085" title="Inliners.this.global.icodes.Instruction">i</a>
              <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012\011receiver: &quot;)" class="string">&quot;\n\treceiver: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a>
              <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012\011icodes.available: &quot;)" class="string">&quot;\n\ticodes.available: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649092" title="=&gt; Boolean">isAvailable</a>
              <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012\011concreteMethod.isEffectivelyFinal: &quot;)" class="string">&quot;\n\tconcreteMethod.isEffectivelyFinal: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../symtab/Symbols.scala.html#509237" title="=&gt; Boolean">isEffectivelyFinal</a><span class="delimiter">)</span>

        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#649092" title="=&gt; Boolean">isAvailable</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649093" title="=&gt; Boolean">isCandidate</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#648318" title="(meth: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.IMethod]">lookupIMethod</a><span class="delimiter">(</span><a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a>, <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a><span class="delimiter">)</span> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Any">Some</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IMethod" id="649162">callee</a><span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="649163">inc</a>   = <span title="Inliner.this.IMethodInfo" class="keyword">new</span> <a href="#648316" title="Inliner.this.IMethodInfo">IMethodInfo</a><span class="delimiter">(</span><a href="#649162" title="Inliners.this.global.icodes.IMethod">callee</a><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="Inliner.this.CallerCalleeInfo" id="649164">pair</a>  = <span title="Inliner.this.CallerCalleeInfo" class="keyword">new</span> <a href="#648317" title="Inliner.this.CallerCalleeInfo">CallerCalleeInfo</a><span class="delimiter">(</span><a href="#649007" title="Inliner.this.IMethodInfo">caller</a>, <a href="#649163" title="Inliner.this.IMethodInfo">inc</a><span class="delimiter">)</span>

              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#649164" title="Inliner.this.CallerCalleeInfo">pair</a> <a href="#649174" title="(stack: Inliners.this.global.icodes.TypeStack)Boolean">isStampedForInlining</a> <a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#621802" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#649005" title="Boolean">retry</a> = <span title="Boolean(true)" class="keyword">true</span>
                <a href="#649087" title="Boolean">inlined</a> = <span title="Boolean(true)" class="keyword">true</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649095" title="=&gt; Boolean">isCountable</a><span class="delimiter">)</span>
                  <a href="#649006" title="Int">count</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>

                <a href="#649164" title="Inliner.this.CallerCalleeInfo">pair</a>.<a href="#649173" title="(block: Inliners.this.global.icodes.BasicBlock, instr: Inliners.this.global.icodes.Instruction)Unit">doInline</a><span class="delimiter">(</span><a href="#649086" title="Inliners.this.global.icodes.BasicBlock">bb</a>, <a href="#649085" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649163" title="Inliner.this.IMethodInfo">inc</a>.<a href="#649057" title="=&gt; Boolean">inline</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649163" title="Inliner.this.IMethodInfo">inc</a>.<a href="#649063" title="=&gt; Boolean">isMonadic</a><span class="delimiter">)</span>
                  <a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649078" title="(x$1: Int)Unit">inlinedCalls</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
                <a href="../../../../collection/mutable/MapLike.scala.html#73272" title="(key: Inliners.this.global.Symbol, value: Int)Unit">inlinedMethodCount</a><span class="delimiter">(</span><a href="#649163" title="Inliner.this.IMethodInfo">inc</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>

                <span class="comment">/* Remove this method from the cache, as the calls-private relation
                 * might have changed after the inlining.
                 */</span>
                <a href="#648338" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,Inliner.this.NonPublicRefs.Value]">usesNonPublics</a> <a href="../../../../collection/mutable/MapLike.scala.html#73290" title="(key: Inliners.this.global.icodes.IMethod)Inliner.this.NonPublicRefs.usesNonPublics.type">-=</a> <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>
              <span class="delimiter">}</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
                  <a href="#649164" title="Inliner.this.CallerCalleeInfo">pair</a> <a href="#649175" title="(stack: Inliners.this.global.icodes.TypeStack)Unit">logFailure</a> <a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#621802" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a>

                <a href="#649091" title="(reason: String)Unit">warnNoInline</a><span class="delimiter">(</span><a href="#649164" title="Inliner.this.CallerCalleeInfo">pair</a> <a href="#649176" title="(stack: Inliners.this.global.icodes.TypeStack)java.lang.String">failureReason</a> <a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#621802" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a href="../../../../Option.scala.html#1737" title="Unit">None</a> =&gt;
              <a href="#649091" title="(reason: String)Unit">warnNoInline</a><span class="delimiter">(</span><span title="java.lang.String(&quot;bytecode was not available&quot;)" class="string">&quot;bytecode was not available&quot;</span><span class="delimiter">)</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
                <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;could not find icode\012\011receiver: &quot;)" class="string">&quot;could not find icode\n\treceiver: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649089" title="Inliners.this.global.icodes.global.Symbol">receiver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012\011method: &quot;)" class="string">&quot;\n\tmethod: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649090" title="Inliners.this.global.Symbol">concreteMethod</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <a href="#649091" title="(reason: String)Unit">warnNoInline</a><span class="delimiter">(</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649092" title="=&gt; Boolean">isAvailable</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;bytecode was not available&quot;)" class="string">&quot;bytecode was not available&quot;</span>
          <span class="keyword">else</span> <span title="java.lang.String(&quot;it is not final&quot;)" class="string">&quot;it is not final&quot;</span>
        <span class="delimiter">)</span>
        <a href="#649087" title="Boolean">inlined</a>
      <span class="delimiter">}</span>

      <span class="keyword">import</span> scala.util.control.<a href="../../../../util/control/Breaks.scala.html#44387" title="object scala.util.control.Breaks">Breaks</a>._
      <a href="#649011" title="Unit" class="keyword">do</a> <span class="delimiter">{</span>
        <a href="#649005" title="Boolean">retry</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649057" title="=&gt; Boolean">inline</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Not inlining into &quot;)" class="string">&quot;Not inlining into &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509258" title="=&gt; Inliners.this.global.icodes.global.Name">originalName</a>.<a href="../../symtab/Names.scala.html#501159" title="=&gt; String">decode</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; because it is marked @inline.&quot;)" class="string">&quot; because it is marked @inline.&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649074" title="=&gt; Boolean">hasCode</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Analyzing &quot;)" class="string">&quot;Analyzing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; count &quot;)" class="string">&quot; count &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649006" title="Int">count</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649067" title="=&gt; Int">length</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; blocks&quot;)" class="string">&quot; blocks&quot;</span><span class="delimiter">)</span>
          <a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a> <a href="../icode/analysis/TypeFlowAnalysis.scala.html#623993" title="(m: Inliners.this.global.analysis.global.icodes.IMethod)Unit">init</a> <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>
          <a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#623996" title="()Unit">run</a>
          <a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649070" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">linearized</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="649373">bb</a> =&gt;
            <a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a> = <a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a> <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliner.this.tfa.P)Inliner.this.tfa.lattice.Elem">in</a> <a href="#649373" title="Inliners.this.global.icodes.BasicBlock">bb</a>

            <a href="../../../../util/control/Breaks.scala.html#53478" title="(op: =&gt; Unit)Unit">breakable</a> <span class="delimiter">{</span>
              <span class="keyword">for</span> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="649414">i</a> &lt;- <a href="../icode/BasicBlocks.scala.html#594411" title="(f: Inliners.this.global.icodes.Instruction =&gt; Unit)Unit">bb</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#649414" title="Inliners.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span title="Unit">CALL_METHOD</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="649417">msym</a>, <a href="../icode/Opcodes.scala.html#515028" title="object Inliners.this.global.icodes.opcodes.Dynamic">Dynamic</a><span class="delimiter">)</span> =&gt;
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649009" title="(msym: Inliners.this.global.Symbol, i: Inliners.this.global.icodes.Instruction, bb: Inliners.this.global.icodes.BasicBlock)Boolean">analyzeInc</a><span class="delimiter">(</span><a href="#649417" title="Inliners.this.global.icodes.global.Symbol">msym</a>, <a href="#649414" title="Inliners.this.global.icodes.Instruction">i</a>, <a href="#649373" title="Inliners.this.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../util/control/Breaks.scala.html#53481" title="()Unit">break</a>
                  <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                <a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a> = <a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#623998" title="(in: Inliners.this.global.analysis.typeFlowLattice.Elem, i: Inliners.this.global.analysis.global.icodes.Instruction)Inliners.this.global.analysis.typeFlowLattice.Elem">interpret</a><span class="delimiter">(</span><a href="#649008" title="Inliner.this.tfa.lattice.Elem">info</a>, <a href="#649414" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#619371" title="=&gt; Boolean">stat</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594468" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; iterations: &quot;)" class="string">&quot; iterations: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#648307" title="=&gt; Inliners.this.global.analysis.MethodTFA">tfa</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#619374" title="=&gt; Int">iterations</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; (size: &quot;)" class="string">&quot; (size: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649007" title="Inliner.this.IMethodInfo">caller</a>.<a href="#649067" title="=&gt; Int">length</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">while</span> <span class="delimiter">(</span><a href="#649005" title="Boolean">retry</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649006" title="Int">count</a> <a href="../../../../Int.scala.html#54761" title="(x: Int)Boolean">&lt;</a> <span title="Int(15)">MAX_INLINE_RETRY</span><span class="delimiter">)</span>

      <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594509" title="()Unit">normalize</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649003" title="Int">sizeBeforeInlining</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Int" id="649432">instrAfterInlining</a> = <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/generic/TraversableForwarder.scala.html#61947" title="(z: Int)(op: (Int, Inliners.this.global.icodes.BasicBlock) =&gt; Int)Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#649453" title="Int">_</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <a href="#649454" title="Inliners.this.global.icodes.BasicBlock">_</a>.<a href="../icode/BasicBlocks.scala.html#594414" title="=&gt; Int">length</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="649433">prefix</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#649432" title="Int">instrAfterInlining</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(2)" class="int">2</span> <a href="../../../../Int.scala.html#54818" title="(x: Int)Int">*</a> <a href="#649004" title="Int">instrBeforeInlining</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#649432" title="Int">instrAfterInlining</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(200)" class="int">200</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="java.lang.String(&quot; !! &quot;)" class="string">&quot; !! &quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#649433" title="java.lang.String">prefix</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; %s blocks before inlining: %d (%d) after: %d (%d)&quot;</a>.<a href="../../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span>
          <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594468" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a>, <a href="#649003" title="Int">sizeBeforeInlining</a>, <a href="#649004" title="Int">instrBeforeInlining</a>, <a href="#648505" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#61783" title="=&gt; Int">length</a>, <a href="#649432" title="Int">instrAfterInlining</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="648312">isMonadicMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649137">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#649147" title="Inliners.this.global.Name" id="649140" class="delimiter">(</a><a title="Inliners.this.global.Name" id="649147">origName</a>, _, _<span class="delimiter">)</span> = <a href="../../symtab/StdNames.scala.html#479055" title="object Inliners.this.global.nme">nme</a>.<a href="../../symtab/NameManglers.scala.html#516885" title="(name: Inliners.this.global.Name)(Inliners.this.global.Name, String, String)">splitSpecializedName</a><a href="../../../../Tuple3.scala.html#317" title="(Inliners.this.global.Name, String, String) @unchecked" class="delimiter">(</a><a href="#649137" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509256" title="=&gt; Inliners.this.global.Name">name</a><span class="delimiter">)</span>
      <a href="#649140" title="Inliners.this.global.Name">origName</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../symtab/StdNames.scala.html#479055" title="Boolean(true)">nme</a>.<a href="../../symtab/StdNames.scala.html#516634" title="=&gt; Inliners.this.global.nme.NameType">foreach</a> | <a href="../../symtab/StdNames.scala.html#479055" title="object Inliners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#516626" title="=&gt; Inliners.this.global.nme.NameType">filter</a> | <a href="../../symtab/StdNames.scala.html#479055" title="object Inliners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#516738" title="=&gt; Inliners.this.global.nme.NameType">withFilter</a> | <a href="../../symtab/StdNames.scala.html#479055" title="object Inliners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#516674" title="=&gt; Inliners.this.global.nme.NameType">map</a> | <a href="../../symtab/StdNames.scala.html#479055" title="object Inliners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#516632" title="=&gt; Inliners.this.global.nme.NameType">flatMap</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="648313">isHigherOrderMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649477">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#649477" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435384" title="=&gt; Boolean">isMethod</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../symtab/SymbolTable.scala.html#478184" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a><span class="delimiter">(</span><a href="../../Global.scala.html#478362" title="=&gt; Inliners.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#482536" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../../Phase.scala.html#505129" title="=&gt; scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#649477" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509272" title="=&gt; Inliners.this.global.Type">info</a>.<a href="../../symtab/Types.scala.html#507181" title="=&gt; List[Inliners.this.global.Type]">paramTypes</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#71036" title="(p: Inliners.this.global.Type =&gt; Boolean)Boolean">exists</a> <a href="../../symtab/Definitions.scala.html#508198" title="(tp: Inliners.this.global.Type)Boolean">isFunctionType</a><span class="delimiter">)</span>

    <span class="comment">/** Should method 'sym' being called in 'receiver' be loaded from disk? */</span>
    <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Boolean" id="648314">shouldLoadImplFor</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649125">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.Symbol" id="649126">receiver</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649498">alwaysLoad</a>    = <span class="delimiter">(</span><a href="#649126" title="Inliners.this.global.Symbol">receiver</a>.<a href="../../symtab/Symbols.scala.html#509323" title="=&gt; Inliners.this.global.Symbol">enclosingPackage</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#507894" title="=&gt; Inliners.this.global.Symbol">RuntimePackage</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#649126" title="Inliners.this.global.Symbol">receiver</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../symtab/Definitions.scala.html#508014" title="=&gt; Inliners.this.global.Symbol">PredefModule</a>.<a href="../../symtab/Symbols.scala.html#509335" title="=&gt; Inliners.this.global.Symbol">moduleClass</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649499">loadCondition</a> = <a href="#649125" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509237" title="=&gt; Boolean">isEffectivelyFinal</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#648312" title="(sym: Inliners.this.global.Symbol)Boolean">isMonadicMethod</a><span class="delimiter">(</span><a href="#649125" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#648313" title="(sym: Inliners.this.global.Symbol)Boolean">isHigherOrderMethod</a><span class="delimiter">(</span><a href="#649125" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Boolean" id="649500">res</a> = <a href="#648300" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#649125" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649498" title="=&gt; Boolean">alwaysLoad</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649499" title="=&gt; Boolean">loadCondition</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;shouldLoadImplFor: &quot;)" class="string">&quot;shouldLoadImplFor: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649126" title="Inliners.this.global.Symbol">receiver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649125" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649500" title="Boolean">res</a><span class="delimiter">)</span>
      <a href="#649500" title="Boolean">res</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Look up implementation of method 'sym in 'clazz'.
     */</span>
    <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol, clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol" id="648315">lookupImplFor</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649109">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.Symbol" id="649110">clazz</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
      <span class="comment">// TODO: verify that clazz.superClass is equivalent here to clazz.tpe.parents(0).typeSymbol (.tpe vs .info)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649513">needsLookup</a> = <span class="delimiter">(</span><a href="#649110" title="Inliners.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../symtab/Symbols.scala.html#478667" title="object Inliners.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#649110" title="Inliners.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#649109" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509249" title="=&gt; Inliners.this.global.Symbol">owner</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649109" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509237" title="=&gt; Boolean">isEffectivelyFinal</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649110" title="Inliners.this.global.Symbol">clazz</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435297" title="=&gt; Boolean">isFinal</a>

      <span class="keyword">def</span> <a title="(clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol" id="649514">lookup</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649523">clazz</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
        <span class="comment">// println(&quot;\t\tlooking up &quot; + meth + &quot; in &quot; + clazz.fullName + &quot; meth.owner = &quot; + meth.owner)</span>
        <span title="Inliners.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#649109" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509249" title="=&gt; Inliners.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#649523" title="Inliners.this.global.Symbol">clazz</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#513561" title="(sym: Inliners.this.global.Symbol)Boolean">isBottomType</a><span class="delimiter">(</span><a href="#649523" title="Inliners.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#649109" title="Inliners.this.global.Symbol">sym</a>
        <span class="keyword">else</span> <a href="#649109" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509339" title="(ofclazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">overridingSymbol</a><span class="delimiter">(</span><a href="#649523" title="Inliners.this.global.Symbol">clazz</a><span class="delimiter">)</span> <span title="Inliners.this.global.Symbol" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../symtab/Symbols.scala.html#478667" title="Inliners.this.global.Symbol">NoSymbol</a>  =&gt; <span title="Inliners.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#649109" title="Inliners.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509249" title="=&gt; Inliners.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#509185" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span> <a href="#649109" title="Inliners.this.global.Symbol">sym</a> <span class="keyword">else</span> <a href="#649514" title="(clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">lookup</a><span class="delimiter">(</span><a href="#649523" title="Inliners.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#509319" title="=&gt; Inliners.this.global.Symbol">superClass</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Inliners.this.global.Symbol" id="649535">imp</a>       =&gt; <a href="#649535" title="Inliners.this.global.Symbol">imp</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Inliners.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#649513" title="=&gt; Boolean">needsLookup</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Inliners.this.global.Symbol" id="649536">concreteMethod</a> = <a href="#649514" title="(clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">lookup</a><span class="delimiter">(</span><a href="#649110" title="Inliners.this.global.Symbol">clazz</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\011looked up method: &quot;)" class="string">&quot;\tlooked up method: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649536" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a><span class="delimiter">)</span>

        <a href="#649536" title="Inliners.this.global.Symbol">concreteMethod</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="#649109" title="Inliners.this.global.Symbol">sym</a>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class IMethodInfo extends java.lang.Object with ScalaObject" id="648316">IMethodInfo</a><a href="../../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Inliners.this.global.icodes.IMethod" id="649083">m</a>: <a href="../icode/Members.scala.html#501263" title="Inliners.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Inliners.this.global.icodes.global.Symbol" id="649050">sym</a>           = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594468" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="Inliners.this.global.icodes.global.Name" id="649052">name</a>          = <a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509256" title="=&gt; Inliners.this.global.icodes.global.Name">name</a>
      <span class="keyword">def</span> <a title="=&gt; Inliners.this.global.icodes.global.Symbol" id="649054">owner</a>         = <a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509249" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.global.Type]" id="649055">paramTypes</a>    = <a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509272" title="=&gt; Inliners.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#507181" title="=&gt; List[Inliners.this.global.icodes.global.Type]">paramTypes</a>
      <span class="keyword">def</span> <a title="=&gt; Int" id="649056">minimumStack</a>  = <a href="#649055" title="=&gt; List[Inliners.this.global.icodes.global.Type]">paramTypes</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#71030" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649057">inline</a>        = <a href="#648300" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649058">noinline</a>      = <a href="#648301" title="(sym: Inliners.this.global.Symbol)Boolean">hasNoInline</a><span class="delimiter">(</span><a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Int" id="649059">numInlined</a>    = <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.Symbol)Int">inlinedMethodCount</a><span class="delimiter">(</span><a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649060">isBridge</a>      = <a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/generic/Symbols.scala.html#435377" title="=&gt; Boolean">isBridge</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649061">isInClosure</a>   = <a href="#513563" title="(cls: Inliners.this.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#649054" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649062">isHigherOrder</a> = <a href="#648313" title="(sym: Inliners.this.global.Symbol)Boolean">isHigherOrderMethod</a><span class="delimiter">(</span><a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649063">isMonadic</a>     = <a href="#648312" title="(sym: Inliners.this.global.Symbol)Boolean">isMonadicMethod</a><span class="delimiter">(</span><a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]" id="649064">handlers</a>      = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594477" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">exh</a>
      <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]" id="649065">blocks</a>        = <span title="scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]" class="keyword">if</span> <span class="delimiter">(</span><a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> sys.<a href="../../../../sys/package.scala.html#48163" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;blocks = null + &quot;)" class="string">&quot;blocks = null + &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594544" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.Local]" id="649066">locals</a>        = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594489" title="=&gt; List[Inliners.this.global.icodes.Local]">locals</a>
      <span class="keyword">def</span> <a title="=&gt; Int" id="649067">length</a>        = <a href="#649065" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#61783" title="=&gt; Int">length</a>
      <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]" id="649068">openBlocks</a>    = <a href="#649065" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a> <a href="../../../../collection/TraversableLike.scala.html#49052" title="(p: Inliners.this.global.icodes.BasicBlock =&gt; Boolean)scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">filterNot</a> <span class="delimiter">(</span><a href="#649585" title="Inliners.this.global.icodes.BasicBlock">_</a>.<a href="../icode/BasicBlocks.scala.html#594384" title="=&gt; Boolean">closed</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.Instruction]" id="649069">instructions</a>  = <a href="#649065" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/generic/GenericTraversableTemplate.scala.html#53804" title="(implicit asTraversable: Inliners.this.global.icodes.BasicBlock =&gt; scala.collection.TraversableOnce[Inliners.this.global.icodes.Instruction])scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.Instruction]">flatten</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.BasicBlock]" id="649070">linearized</a>    = <a href="../icode/ICodes.scala.html#501223" title="=&gt; Inliners.this.global.icodes.Linearizer">linearizer</a> <a href="../icode/Linearizers.scala.html#611346" title="(c: Inliners.this.global.icodes.IMethod)List[Inliners.this.global.icodes.BasicBlock]">linearize</a> <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649071">isSmall</a>       = <span class="delimiter">(</span><a href="#649067" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54768" title="(x: Int)Boolean">&lt;=</a> <a href="#513557" title="=&gt; Int">SMALL_METHOD_SIZE</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#61784" title="(n: Int)Inliners.this.global.icodes.BasicBlock">blocks</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#594414" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54761" title="(x: Int)Boolean">&lt;</a> <span title="Int(10)" class="int">10</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649072">isLarge</a>       = <a href="#649067" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(16)">MAX_INLINE_SIZE</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649073">isRecursive</a>   = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594486" title="=&gt; Boolean">recursive</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649074">hasCode</a>       = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649075">hasSourceFile</a> = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594480" title="=&gt; String">sourceFile</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649076">hasHandlers</a>   = <a href="#649064" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a>.<a href="../../../../collection/TraversableOnce.scala.html#53619" title="=&gt; Boolean">nonEmpty</a>

      <span class="comment">// the number of inlined calls in 'm', used by 'shouldInline'</span>
      <span class="keyword">var</span> <a title="Int" id="649078">inlinedCalls</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">def</span> <a title="(ls: List[Inliners.this.global.icodes.Local])Unit" id="649080">addLocals</a><span class="delimiter">(</span><a title="List[Inliners.this.global.icodes.Local]" id="649665">ls</a>: <a href="../../../../collection/immutable/List.scala.html#14047" title="List[Inliners.this.global.icodes.Local]">List</a><span class="delimiter">[</span>Local<span class="delimiter">]</span><span class="delimiter">)</span>  = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594490" title="(x$1: List[Inliners.this.global.icodes.Local])Unit">locals</a> <a href="../../../../collection/immutable/List.scala.html#49152" title="(that: scala.collection.GenTraversableOnce[Inliners.this.global.icodes.Local])(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.Local],Inliners.this.global.icodes.Local,List[Inliners.this.global.icodes.Local]])List[Inliners.this.global.icodes.Local]">++=</a> <a href="#649665" title="List[Inliners.this.global.icodes.Local]">ls</a>
      <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Unit" id="649081">addLocal</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="649739">l</a>: <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span>          = <a href="#649080" title="(ls: List[Inliners.this.global.icodes.Local])Unit">addLocals</a><span class="delimiter">(</span><a href="../../../../collection/immutable/List.scala.html#48877" title="(xs: Inliners.this.global.icodes.Local*)List[Inliners.this.global.icodes.Local]">List</a><span class="delimiter">(</span><a href="#649739" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(exhs: List[Inliners.this.global.icodes.ExceptionHandler])Unit" id="649082">addHandlers</a><span class="delimiter">(</span><a title="List[Inliners.this.global.icodes.ExceptionHandler]" id="649749">exhs</a>: <a href="../../../../collection/immutable/List.scala.html#14047" title="List[Inliners.this.global.icodes.ExceptionHandler]">List</a><span class="delimiter">[</span>ExceptionHandler<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594478" title="(x$1: List[Inliners.this.global.icodes.ExceptionHandler])Unit">exh</a> = <a href="#649749" title="List[Inliners.this.global.icodes.ExceptionHandler]">exhs</a> <a href="../../../../collection/immutable/List.scala.html#49143" title="(prefix: List[Inliners.this.global.icodes.ExceptionHandler])List[Inliners.this.global.icodes.ExceptionHandler]">:::</a> <a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594477" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">exh</a>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class CallerCalleeInfo extends java.lang.Object with ScalaObject" id="648317">CallerCalleeInfo</a><a href="../../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="649183">caller</a>: <a href="#648316" title="Inliner.this.IMethodInfo">IMethodInfo</a>, <span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="649184">inc</a>: <a href="#648316" title="Inliner.this.IMethodInfo">IMethodInfo</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649172">isLargeSum</a>  = <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649067" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649067" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54811" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <a href="#513557" title="=&gt; Int">SMALL_METHOD_SIZE</a>

      <span class="comment">/** Inline 'inc' into 'caller' at the given block and instruction.
       *  The instruction must be a CALL_METHOD.
       */</span>
      <span class="keyword">def</span> <a title="(block: Inliners.this.global.icodes.BasicBlock, instr: Inliners.this.global.icodes.Instruction)Unit" id="649173">doInline</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.BasicBlock" id="649211">block</a>: <a href="../icode/BasicBlocks.scala.html#501270" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Inliners.this.global.icodes.Instruction" id="649212">instr</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="649784">targetPos</a> = <a href="#649212" title="Inliners.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#594690" title="=&gt; scala.tools.nsc.util.Position">pos</a>
        <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Inlining &quot;)" class="string">&quot;Inlining &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; at pos: &quot;)" class="string">&quot; at pos: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#513562" title="(pos: scala.tools.nsc.util.Position)java.lang.String">posToStr</a><span class="delimiter">(</span><a href="#649784" title="scala.tools.nsc.util.Position">targetPos</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Unit" id="649785">blockEmit</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="649803">i</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> = <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594424" title="(instr: Inliners.this.global.icodes.Instruction, pos: scala.tools.nsc.util.Position)Unit">emit</a><span class="delimiter">(</span><a href="#649803" title="Inliners.this.global.icodes.Instruction">i</a>, <a href="#649784" title="scala.tools.nsc.util.Position">targetPos</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(baseName: String, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.Local" id="649786">newLocal</a><span class="delimiter">(</span><a title="String" id="649810">baseName</a>: <span title="String">String</span>, <a title="Inliners.this.global.icodes.TypeKind" id="649811">kind</a>: <a href="../icode/TypeKinds.scala.html#501291" title="Inliners.this.global.icodes.TypeKind">TypeKind</a><span class="delimiter">)</span> =
          <span title="Inliners.this.global.icodes.Local" class="keyword">new</span> <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">(</span><a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509127" title="(pos: Inliners.this.global.icodes.global.Position, name: Inliners.this.global.icodes.global.TermName)Inliners.this.global.icodes.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="#649784" title="scala.tools.nsc.util.Position">targetPos</a>, <a href="#648299" title="(s: String)java.lang.String">freshName</a><a href="../../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)Inliners.this.global.TermName" class="delimiter">(</a><a href="#649810" title="String">baseName</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#649811" title="Inliners.this.global.icodes.TypeKind">kind</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="Inliners.this.global.analysis.MethodTFA" id="649787">a</a> = <a href="../icode/analysis/TypeFlowAnalysis.scala.html#623995" title="(m: Inliners.this.global.analysis.global.icodes.IMethod)Inliners.this.global.analysis.MethodTFA" class="keyword">new</a> <a href="../../Global.scala.html#478224" title="object Inliners.this.global.analysis">analysis</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#508979" title="Inliners.this.global.analysis.MethodTFA">MethodTFA</a><span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>

        <span class="comment">/* The exception handlers that are active at the current block. */</span>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.ExceptionHandler]" id="649788">activeHandlers</a> = <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649064" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a> <a href="../../../../collection/TraversableLike.scala.html#49051" title="(p: Inliners.this.global.icodes.ExceptionHandler =&gt; Boolean)List[Inliners.this.global.icodes.ExceptionHandler]">filter</a> <span class="delimiter">(</span><a href="#649824" title="Inliners.this.global.icodes.ExceptionHandler">_</a> <a href="../../../../collection/GenSetLike.scala.html#59062" title="(elem: Inliners.this.global.icodes.BasicBlock)Boolean">covered</a> <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a><span class="delimiter">)</span>

        <span class="comment">/* Map 'original' blocks to the ones inlined in the caller. */</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]" id="649789">inlinedBlock</a> = mutable.<a href="../../../../collection/generic/GenMapFactory.scala.html#56702" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (Inliners.this.global.icodes.BasicBlock, Inliners.this.global.icodes.BasicBlock)*)scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#501270" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a>, <a href="../icode/BasicBlocks.scala.html#501270" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]" id="649790">varsInScope</a> = mutable.<a href="../../../../collection/generic/GenericCompanion.scala.html#48813" title="[A](elems: A*)scala.collection.mutable.HashSet[A]">HashSet</a><span title="(elems: Inliners.this.global.icodes.Local*)scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]" class="delimiter">[</span><a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../../collection/generic/Growable.scala.html#56649" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.Local])scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]">++=</a> <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594397" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a>

        <span class="comment">/** Side effects varsInScope when it sees SCOPE_ENTERs. */</span>
        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Boolean" id="649791">instrBeforeFilter</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="649845">i</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
          <a href="#649845" title="Inliners.this.global.icodes.Instruction">i</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="varsInScope.type">SCOPE_ENTER</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="649847">l</a><span class="delimiter">)</span> =&gt; <a href="#649790" title="scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/mutable/HashSet.scala.html#108315" title="(elem: Inliners.this.global.icodes.Local)varsInScope.type">+=</a> <a href="#649847" title="Inliners.this.global.icodes.Local">l</a> ; <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
          <a href="#649845" title="Inliners.this.global.icodes.Instruction">i</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#649212" title="Inliners.this.global.icodes.Instruction">instr</a>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.Instruction]" id="649792">instrBefore</a> = <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594406" title="=&gt; List[Inliners.this.global.icodes.Instruction]">toList</a> <a href="../../../../collection/immutable/List.scala.html#49168" title="(p: Inliners.this.global.icodes.Instruction =&gt; Boolean)List[Inliners.this.global.icodes.Instruction]">takeWhile</a> <a href="#649791" title="(i: Inliners.this.global.icodes.Instruction)Boolean">instrBeforeFilter</a>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.Instruction]" id="649793">instrAfter</a>  = <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594406" title="=&gt; List[Inliners.this.global.icodes.Instruction]">toList</a> <a href="../../../../collection/immutable/List.scala.html#49164" title="(n: Int)List[Inliners.this.global.icodes.Instruction]">drop</a> <span class="delimiter">(</span><a href="#649792" title="List[Inliners.this.global.icodes.Instruction]">instrBefore</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#71030" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

        <a href="../../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649793" title="List[Inliners.this.global.icodes.Instruction]">instrAfter</a>.<a href="../../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a>, <span title="java.lang.String(&quot;CALL_METHOD cannot be the last instruction in block!&quot;)" class="string">&quot;CALL_METHOD cannot be the last instruction in block!&quot;</span><span class="delimiter">)</span>

        <span class="comment">// store the '$this' into the special local</span>
        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Local" id="649794">inlinedThis</a> = <a href="#649786" title="(baseName: String, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.Local">newLocal</a><span class="delimiter">(</span><span title="java.lang.String(&quot;$inlThis&quot;)" class="string">&quot;$inlThis&quot;</span>, <a href="../icode/TypeKinds.scala.html#593100" title="(cls: Inliners.this.global.icodes.global.Symbol)Inliners.this.global.icodes.REFERENCE">REFERENCE</a><span class="delimiter">(</span><a href="../../symtab/Definitions.scala.html#507925" title="=&gt; Inliners.this.global.Symbol">ObjectClass</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">/** buffer for the returned value */</span>
        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Local" id="649795">retVal</a> = <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594483" title="=&gt; Inliners.this.global.icodes.TypeKind">returnType</a> <span title="Inliners.this.global.icodes.Local" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#501297" title="Null(null)">UNIT</a>  =&gt; <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a title="Inliners.this.global.icodes.Local" id="649893">x</a>     =&gt; <a href="#649786" title="(baseName: String, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.Local">newLocal</a><span class="delimiter">(</span><span title="java.lang.String(&quot;$retVal&quot;)" class="string">&quot;$retVal&quot;</span>, <a href="#649893" title="Inliners.this.global.icodes.TypeKind">x</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]" id="649796">inlinedLocals</a>: mutable.<a href="../../../../collection/mutable/Map.scala.html#14767" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">Map</a><span class="delimiter">[</span>Local, Local<span class="delimiter">]</span> = <a href="../../../../collection/mutable/HashMap.scala.html#73156" title="()scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">HashMap</a>

        <span class="comment">/** Add a new block in the current context. */</span>
        <span class="keyword">def</span> <a title="()Inliners.this.global.icodes.BasicBlock" id="649797">newBlock</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.BasicBlock" id="649897">b</a> = <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594563" title="=&gt; Inliners.this.global.icodes.BasicBlock">newBlock</a>
          <a href="#649788" title="List[Inliners.this.global.icodes.ExceptionHandler]">activeHandlers</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Inliners.this.global.icodes.ExceptionHandler =&gt; Inliners.this.global.icodes.ExceptionHandler)Unit">foreach</a> <span class="delimiter">(</span><a href="#649917" title="Inliners.this.global.icodes.ExceptionHandler">_</a> <a href="../icode/ExceptionHandlers.scala.html#599667" title="(b: Inliners.this.global.icodes.BasicBlock)x$9.type">addCoveredBlock</a> <a href="#649897" title="Inliners.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#649795" title="Inliners.this.global.icodes.Local">retVal</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#649897" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#594397" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/mutable/SetLike.scala.html#108335" title="(elem: Inliners.this.global.icodes.Local)scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">+=</a> <a href="#649795" title="Inliners.this.global.icodes.Local">retVal</a>
          <a href="#649897" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#594397" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/mutable/SetLike.scala.html#108335" title="(elem: Inliners.this.global.icodes.Local)scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">+=</a> <a href="#649794" title="Inliners.this.global.icodes.Local">inlinedThis</a>
          <a href="#649897" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#594397" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/generic/Growable.scala.html#56649" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.Local])scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">++=</a> <a href="#649790" title="scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]">varsInScope</a>
          <a href="#649897" title="Inliners.this.global.icodes.BasicBlock">b</a>
        <span class="delimiter">}</span>

        <span class="keyword">def</span> <a title="(e: Inliners.this.global.icodes.ExceptionHandler)Inliners.this.global.icodes.ExceptionHandler" id="649798">translateExh</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.ExceptionHandler" id="649977">e</a>: <a href="../icode/ExceptionHandlers.scala.html#501337" title="Inliners.this.global.icodes.ExceptionHandler">ExceptionHandler</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.ExceptionHandler" id="649978">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#501337" title="Inliners.this.global.icodes.ExceptionHandler">ExceptionHandler</a> = <a href="#649977" title="Inliners.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#599675" title="=&gt; Inliners.this.global.icodes.ExceptionHandler">dup</a>
          <a href="#649978" title="Inliners.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#599665" title="(x$1: scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock])Unit">covered</a> = <a href="#649978" title="Inliners.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#599664" title="=&gt; scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock]">covered</a> <a href="../../../../collection/SetLike.scala.html#65650" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Inliners.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock],Inliners.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock]])scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock]">map</a> <a href="#649789" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a>
          <a href="#649978" title="Inliners.this.global.icodes.ExceptionHandler">handler</a> <a href="../icode/ExceptionHandlers.scala.html#599662" title="(b: Inliners.this.global.icodes.BasicBlock)Unit">setStartBlock</a> <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#649977" title="Inliners.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#599663" title="=&gt; Inliners.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span>
          <a href="#649978" title="Inliners.this.global.icodes.ExceptionHandler">handler</a>
        <span class="delimiter">}</span>

        <span class="comment">/** alfa-rename `l' in caller's context. */</span>
        <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local" id="649799">dupLocal</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650053">l</a>: <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span>: <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.global.TermSymbol" id="650054">sym</a> = <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509127" title="(pos: Inliners.this.global.icodes.global.Position, name: Inliners.this.global.icodes.global.TermName)Inliners.this.global.icodes.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="#650053" title="Inliners.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#594659" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509109" title="=&gt; Inliners.this.global.icodes.global.Position">pos</a>, <a href="#648299" title="(s: String)java.lang.String">freshName</a><a href="../../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)Inliners.this.global.TermName" class="delimiter">(</a><a href="#650053" title="Inliners.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#594659" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509256" title="=&gt; Inliners.this.global.icodes.global.Name">name</a>.<a href="../../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// sym.setInfo(l.sym.tpe)</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Local" id="650055">dupped</a> = <span title="Inliners.this.global.icodes.Local" class="keyword">new</span> <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">(</span><a href="#650054" title="Inliners.this.global.icodes.global.TermSymbol">sym</a>, <a href="#650053" title="Inliners.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#594661" title="=&gt; Inliners.this.global.icodes.TypeKind">kind</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          <a href="../../../../collection/mutable/MapLike.scala.html#73272" title="(key: Inliners.this.global.icodes.Local, value: Inliners.this.global.icodes.Local)Unit">inlinedLocals</a><span class="delimiter">(</span><a href="#650053" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span> = <a href="#650055" title="Inliners.this.global.icodes.Local">dupped</a>
          <a href="#650055" title="Inliners.this.global.icodes.Local">dupped</a>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.BasicBlock" id="649800">afterBlock</a> = <a href="#649797" title="()Inliners.this.global.icodes.BasicBlock">newBlock</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="comment">/** Map from nw.init instructions to their matching NEW call */</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]" id="649801">pending</a>: mutable.<a href="../../../../collection/mutable/Map.scala.html#14767" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">Map</a><span class="delimiter">[</span>Instruction, NEW<span class="delimiter">]</span> = <a href="../../../../collection/mutable/HashMap.scala.html#73156" title="()scala.collection.mutable.HashMap[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashMap.scala.html#14905" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">HashMap</a>

        <span class="comment">/** Map an instruction from the callee to one suitable for the caller. */</span>
        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" id="649802">map</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="650062">i</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a> = <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Instruction" id="650063">assertLocal</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650066">l</a>: <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <a href="../../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649066" title="=&gt; List[Inliners.this.global.icodes.Local]">locals</a> <a href="../../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <a href="#650066" title="Inliners.this.global.icodes.Local">l</a>, <span title="java.lang.String(&quot;Could not find local \'&quot;)" class="string">&quot;Could not find local '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#650066" title="Inliners.this.global.icodes.Local">l</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\' in locals, nor in inlinedLocals: &quot;)" class="string">&quot;' in locals, nor in inlinedLocals: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649796" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">inlinedLocals</a><span class="delimiter">)</span>
            <a href="#650062" title="Inliners.this.global.icodes.Instruction">i</a>
          <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Boolean" id="650064">isInlined</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650069">l</a>: <a href="../icode/Members.scala.html#501264" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span> = <a href="#649796" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">inlinedLocals</a> <a href="../../../../collection/MapLike.scala.html#73206" title="(key: Inliners.this.global.icodes.Local)Boolean">isDefinedAt</a> <a href="#650069" title="Inliners.this.global.icodes.Local">l</a>

          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Instruction" id="650065">newInstr</a> = <a href="#650062" title="Inliners.this.global.icodes.Instruction">i</a> <span title="Inliners.this.global.icodes.Instruction" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.LOAD_LOCAL">THIS</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="650073">clasz</a><span class="delimiter">)</span>                    =&gt; <a href="../icode/Opcodes.scala.html#602618" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</a><span class="delimiter">(</span><a href="#649794" title="Inliners.this.global.icodes.Local">inlinedThis</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_THIS</span><span class="delimiter">(</span>_<span class="delimiter">)</span>                  =&gt; <a href="../icode/Opcodes.scala.html#599348" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="#649794" title="Inliners.this.global.icodes.Local">inlinedThis</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.JUMP">JUMP</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.BasicBlock" id="650080">whereto</a><span class="delimiter">)</span>                  =&gt; <a href="../icode/Opcodes.scala.html#599224" title="(whereto: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650080" title="Inliners.this.global.icodes.BasicBlock">whereto</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.CJUMP">CJUMP</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.BasicBlock" id="650102">succ</a>, <a title="Inliners.this.global.icodes.BasicBlock" id="650103">fail</a>, <a title="Inliners.this.global.icodes.TestOp" id="650104">cond</a>, <a title="Inliners.this.global.icodes.TypeKind" id="650105">kind</a><span class="delimiter">)</span>  =&gt; <a href="../icode/Opcodes.scala.html#599852" title="(successBlock: Inliners.this.global.icodes.BasicBlock, failureBlock: Inliners.this.global.icodes.BasicBlock, cond: Inliners.this.global.icodes.TestOp, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.opcodes.CJUMP">CJUMP</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650102" title="Inliners.this.global.icodes.BasicBlock">succ</a><span class="delimiter">)</span>, <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650103" title="Inliners.this.global.icodes.BasicBlock">fail</a><span class="delimiter">)</span>, <a href="#650104" title="Inliners.this.global.icodes.TestOp">cond</a>, <a href="#650105" title="Inliners.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.CZJUMP">CZJUMP</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.BasicBlock" id="650148">succ</a>, <a title="Inliners.this.global.icodes.BasicBlock" id="650149">fail</a>, <a title="Inliners.this.global.icodes.TestOp" id="650150">cond</a>, <a title="Inliners.this.global.icodes.TypeKind" id="650151">kind</a><span class="delimiter">)</span> =&gt; <a href="../icode/Opcodes.scala.html#599927" title="(successBlock: Inliners.this.global.icodes.BasicBlock, failureBlock: Inliners.this.global.icodes.BasicBlock, cond: Inliners.this.global.icodes.TestOp, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.opcodes.CZJUMP">CZJUMP</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650148" title="Inliners.this.global.icodes.BasicBlock">succ</a><span class="delimiter">)</span>, <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650149" title="Inliners.this.global.icodes.BasicBlock">fail</a><span class="delimiter">)</span>, <a href="#650150" title="Inliners.this.global.icodes.TestOp">cond</a>, <a href="#650151" title="Inliners.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.SWITCH">SWITCH</span><span class="delimiter">(</span><a title="List[List[Int]]" id="650192">tags</a>, <a title="List[Inliners.this.global.icodes.BasicBlock]" id="650193">labels</a><span class="delimiter">)</span>           =&gt; <a href="../icode/Opcodes.scala.html#599999" title="(tags: List[List[Int]], labels: List[Inliners.this.global.icodes.BasicBlock])Inliners.this.global.icodes.opcodes.SWITCH">SWITCH</a><span class="delimiter">(</span><a href="#650192" title="List[List[Int]]">tags</a>, <a href="#650193" title="List[Inliners.this.global.icodes.BasicBlock]">labels</a> <a href="../../../../collection/TraversableLike.scala.html#49041" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Inliners.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.BasicBlock],Inliners.this.global.icodes.BasicBlock,List[Inliners.this.global.icodes.BasicBlock]])List[Inliners.this.global.icodes.BasicBlock]">map</a> <a href="#649789" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.JUMP">RETURN</span><span class="delimiter">(</span>_<span class="delimiter">)</span>                      =&gt; <a href="../icode/Opcodes.scala.html#599224" title="(whereto: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="#649800" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650248">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#650064" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#650248" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>  =&gt; <a href="../icode/Opcodes.scala.html#602618" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#650248" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650272">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#650064" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#650272" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span> =&gt; <a href="../icode/Opcodes.scala.html#599348" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#650272" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.Instruction">LOAD_LOCAL</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650290">l</a><span class="delimiter">)</span>                  =&gt; <a href="#650063" title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Instruction">assertLocal</a><span class="delimiter">(</span><a href="#650290" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.Instruction">STORE_LOCAL</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650292">l</a><span class="delimiter">)</span>                 =&gt; <a href="#650063" title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Instruction">assertLocal</a><span class="delimiter">(</span><a href="#650292" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.SCOPE_ENTER">SCOPE_ENTER</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650294">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#650064" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#650294" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span> =&gt; <a href="../icode/Opcodes.scala.html#603971" title="(lv: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.SCOPE_ENTER">SCOPE_ENTER</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#650294" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.SCOPE_EXIT">SCOPE_EXIT</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650313">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#650064" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#650313" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>  =&gt; <a href="../icode/Opcodes.scala.html#599317" title="(lv: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.SCOPE_EXIT">SCOPE_EXIT</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#650313" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <span class="keyword">case</span> <a title="Inliners.this.global.icodes.opcodes.NEW" id="650331">nw</a> @ NEW<span class="delimiter">(</span><a title="Inliners.this.global.icodes.REFERENCE" id="650333">sym</a><span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a title="Inliners.this.global.icodes.opcodes.NEW" id="650334">r</a> = <a href="../icode/Opcodes.scala.html#604307" title="(kind: Inliners.this.global.icodes.REFERENCE)Inliners.this.global.icodes.opcodes.NEW">NEW</a><span class="delimiter">(</span><a href="#650333" title="Inliners.this.global.icodes.REFERENCE">sym</a><span class="delimiter">)</span>
              <a href="../../../../collection/mutable/MapLike.scala.html#73272" title="(key: Inliners.this.global.icodes.Instruction, value: Inliners.this.global.icodes.opcodes.NEW)Unit">pending</a><span class="delimiter">(</span><a href="#650331" title="Inliners.this.global.icodes.opcodes.NEW">nw</a>.<a href="../icode/Opcodes.scala.html#604315" title="=&gt; Inliners.this.global.icodes.opcodes.CALL_METHOD">init</a><span class="delimiter">)</span> = <a href="#650334" title="Inliners.this.global.icodes.opcodes.NEW">r</a>
              <a href="#650334" title="Inliners.this.global.icodes.opcodes.NEW">r</a>

            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="650341">meth</a>, Static<span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#650341" title="Inliners.this.global.icodes.global.Symbol">meth</a>.<a href="../../symtab/Symbols.scala.html#509178" title="=&gt; Boolean">isClassConstructor</a> =&gt;
              <a href="../icode/Opcodes.scala.html#604613" title="(method: Inliners.this.global.icodes.global.Symbol, style: Inliners.this.global.icodes.opcodes.InvokeStyle)Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a><span class="delimiter">(</span><a href="#650341" title="Inliners.this.global.icodes.global.Symbol">meth</a>, <a href="../icode/Opcodes.scala.html#604935" title="(onInstance: Boolean)Inliners.this.global.icodes.opcodes.Static">Static</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <span class="keyword">case</span> <span title="Inliners.this.global.icodes.Instruction">_</span> =&gt; <a href="#650062" title="Inliners.this.global.icodes.Instruction">i</a>.<a href="../icode/Opcodes.scala.html#594695" title="()Inliners.this.global.icodes.Instruction">clone</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="comment">// check any pending NEW's</span>
          <a href="#649801" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">pending</a> <a href="../../../../collection/mutable/MapLike.scala.html#73289" title="(key: Inliners.this.global.icodes.Instruction)Option[Inliners.this.global.icodes.opcodes.NEW]">remove</a> <a href="#650062" title="Inliners.this.global.icodes.Instruction">i</a> <a href="../../../../Option.scala.html#48491" title="(f: Inliners.this.global.icodes.opcodes.NEW =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#650352" title="Inliners.this.global.icodes.opcodes.NEW">_</a>.<a href="../icode/Opcodes.scala.html#604316" title="(x$1: Inliners.this.global.icodes.opcodes.CALL_METHOD)Unit">init</a> = <a href="#650065" title="Inliners.this.global.icodes.Instruction">newInstr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Inliners.this.global.icodes.opcodes.CALL_METHOD" class="delimiter">[</span><a href="../icode/Opcodes.scala.html#514967" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a><span class="delimiter">]</span><span class="delimiter">)</span>
          <a href="#650065" title="Inliners.this.global.icodes.Instruction">newInstr</a>
        <span class="delimiter">}</span>

        <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#649080" title="(ls: List[Inliners.this.global.icodes.Local])Unit">addLocals</a> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649066" title="=&gt; List[Inliners.this.global.icodes.Local]">locals</a> <a href="../../../../collection/TraversableLike.scala.html#49041" title="(f: Inliners.this.global.icodes.Local =&gt; Inliners.this.global.icodes.Local)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.Local],Inliners.this.global.icodes.Local,List[Inliners.this.global.icodes.Local]])List[Inliners.this.global.icodes.Local]">map</a> <a href="#649799" title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">dupLocal</a><span class="delimiter">)</span>
        <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#649081" title="(l: Inliners.this.global.icodes.Local)Unit">addLocal</a> <a href="#649794" title="Inliners.this.global.icodes.Local">inlinedThis</a>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649795" title="Inliners.this.global.icodes.Local">retVal</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#649081" title="(l: Inliners.this.global.icodes.Local)Unit">addLocal</a> <a href="#649795" title="Inliners.this.global.icodes.Local">retVal</a>

        <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649065" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">blocks</a> <a href="../../../../collection/generic/TraversableForwarder.scala.html#61936" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local])Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="650423">b</a> =&gt;
          <a href="#649789" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a> <a href="../../../../collection/mutable/MapLike.scala.html#73273" title="(kv: (Inliners.this.global.icodes.BasicBlock, Inliners.this.global.icodes.BasicBlock))inlinedBlock.type">+=</a> <span class="delimiter">(</span><a href="../../../../Predef.scala.html#9589" title="(x: Inliners.this.global.icodes.BasicBlock)ArrowAssoc[Inliners.this.global.icodes.BasicBlock]">b</a> <a href="../../../../Predef.scala.html#57653" title="(y: Inliners.this.global.icodes.BasicBlock)(Inliners.this.global.icodes.BasicBlock, Inliners.this.global.icodes.BasicBlock)">-&gt;</a> <a href="#649797" title="()Inliners.this.global.icodes.BasicBlock">newBlock</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650423" title="Inliners.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#594397" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/generic/Growable.scala.html#56649" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.Local])scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">++=</a> <span class="delimiter">(</span><a href="#650423" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#594397" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/SetLike.scala.html#65650" title="(f: Inliners.this.global.icodes.Local =&gt; Inliners.this.global.icodes.Local)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Set[Inliners.this.global.icodes.Local],Inliners.this.global.icodes.Local,scala.collection.TraversableOnce[Inliners.this.global.icodes.Local]])scala.collection.TraversableOnce[Inliners.this.global.icodes.Local]">map</a> <a href="#649796" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">inlinedLocals</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="comment">// analyse callee</span>
        <a href="#649787" title="Inliners.this.global.analysis.MethodTFA">a</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#623996" title="()Unit">run</a>

        <span class="comment">// re-emit the instructions before the call</span>
        <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594430" title="()Unit">open</a>
        <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594431" title="()Unit">clear</a>
        <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a> <a href="../icode/BasicBlocks.scala.html#594425" title="(instrs: Seq[Inliners.this.global.icodes.Instruction])Unit">emit</a> <a href="#649792" title="List[Inliners.this.global.icodes.Instruction]">instrBefore</a>

        <span class="comment">// store the arguments into special locals</span>
        <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594492" title="=&gt; List[Inliners.this.global.icodes.Local]">params</a>.<a href="../../../../collection/immutable/List.scala.html#49171" title="=&gt; List[Inliners.this.global.icodes.Local]">reverse</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Inliners.this.global.icodes.Local =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="650614">p</a> =&gt; <a href="#649785" title="(i: Inliners.this.global.icodes.Instruction)Unit">blockEmit</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#599348" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#650614" title="Inliners.this.global.icodes.Local">p</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#649785" title="(i: Inliners.this.global.icodes.Instruction)Unit">blockEmit</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#599348" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="#649794" title="Inliners.this.global.icodes.Local">inlinedThis</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">// jump to the start block of the callee</span>
        <a href="#649785" title="(i: Inliners.this.global.icodes.Instruction)Unit">blockEmit</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#599224" title="(whereto: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#594471" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#594546" title="=&gt; Inliners.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#649211" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#594429" title="()Unit">close</a>

        <span class="comment">// duplicate the other blocks in the callee</span>
        <a href="../icode/ICodes.scala.html#501223" title="=&gt; Inliners.this.global.icodes.Linearizer">linearizer</a> <a href="../icode/Linearizers.scala.html#611346" title="(c: Inliners.this.global.icodes.IMethod)List[Inliners.this.global.icodes.BasicBlock]">linearize</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="650670">bb</a> =&gt;
          <span class="keyword">var</span> <a title="a.lattice.Elem" id="650671">info</a> = <a href="#649787" title="Inliners.this.global.analysis.MethodTFA">a</a> <a href="../../../../collection/MapLike.scala.html#73204" title="(key: a.P)a.lattice.Elem">in</a> <a href="#650670" title="Inliners.this.global.icodes.BasicBlock">bb</a>
          <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Unit" id="650672">emitInlined</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="650695">i</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> = <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650670" title="Inliners.this.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#594424" title="(instr: Inliners.this.global.icodes.Instruction, pos: scala.tools.nsc.util.Position)Unit">emit</a><span class="delimiter">(</span><a href="#650695" title="Inliners.this.global.icodes.Instruction">i</a>, <a href="#649784" title="scala.tools.nsc.util.Position">targetPos</a><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(toDrop: Int)Unit" id="650673">emitDrops</a><span class="delimiter">(</span><a title="Int" id="650717">toDrop</a>: <a href="../../../../Int.scala.html#386" title="Int">Int</a><span class="delimiter">)</span>      = <a href="#650671" title="a.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#621802" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a>.<a href="../icode/TypeStacks.scala.html#608175" title="=&gt; Inliners.this.global.analysis.global.icodes.Rep">types</a> <a href="../../../../collection/immutable/List.scala.html#49164" title="(n: Int)List[Inliners.this.global.analysis.global.icodes.TypeKind]">drop</a> <a href="#650717" title="Int">toDrop</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: Inliners.this.global.analysis.global.icodes.TypeKind =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Inliners.this.global.analysis.global.icodes.TypeKind" id="650740">t</a> =&gt; <a href="#650672" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#603023" title="(typ: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.opcodes.DROP">DROP</a><span class="delimiter">(</span><a href="#650740" title="Inliners.this.global.analysis.global.icodes.TypeKind">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">for</span> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="650763">i</a> &lt;- <a href="../icode/BasicBlocks.scala.html#594411" title="(f: Inliners.this.global.icodes.Instruction =&gt; Unit)Unit">bb</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#650763" title="Inliners.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Unit">RETURN</span><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#501297" title="object Inliners.this.global.icodes.UNIT">UNIT</a><span class="delimiter">)</span> =&gt; <a href="#650673" title="(toDrop: Int)Unit">emitDrops</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="Unit">RETURN</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.TypeKind" id="650766">kind</a><span class="delimiter">)</span> =&gt;
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#650671" title="a.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#621802" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a>.<a href="../icode/TypeStacks.scala.html#608181" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#650672" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#599348" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="#649795" title="Inliners.this.global.icodes.Local">retVal</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <a href="#650673" title="(toDrop: Int)Unit">emitDrops</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
                  <a href="#650672" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#602618" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</a><span class="delimiter">(</span><a href="#649795" title="Inliners.this.global.icodes.Local">retVal</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> <span title="Unit">_</span>            =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="#650672" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="#649802" title="(i: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction">map</a><span class="delimiter">(</span><a href="#650763" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#650671" title="a.lattice.Elem">info</a> = <a href="#649787" title="Inliners.this.global.analysis.MethodTFA">a</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#623998" title="(in: Inliners.this.global.analysis.typeFlowLattice.Elem, i: Inliners.this.global.analysis.global.icodes.Instruction)Inliners.this.global.analysis.typeFlowLattice.Elem">interpret</a><span class="delimiter">(</span><a href="#650671" title="a.lattice.Elem">info</a>, <a href="#650763" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../../collection/MapLike.scala.html#73204" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#650670" title="Inliners.this.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#594429" title="()Unit">close</a>
        <span class="delimiter">}</span>

        <a href="#649800" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a> <a href="../icode/BasicBlocks.scala.html#594425" title="(instrs: Seq[Inliners.this.global.icodes.Instruction])Unit">emit</a> <a href="#649793" title="List[Inliners.this.global.icodes.Instruction]">instrAfter</a>
        <a href="#649800" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a>.<a href="../icode/BasicBlocks.scala.html#594429" title="()Unit">close</a>

        <span class="comment">// add exception handlers of the callee</span>
        <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#649082" title="(exhs: List[Inliners.this.global.icodes.ExceptionHandler])Unit">addHandlers</a> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649064" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a> <a href="../../../../collection/TraversableLike.scala.html#49041" title="(f: Inliners.this.global.icodes.ExceptionHandler =&gt; Inliners.this.global.icodes.ExceptionHandler)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.ExceptionHandler],Inliners.this.global.icodes.ExceptionHandler,List[Inliners.this.global.icodes.ExceptionHandler]])List[Inliners.this.global.icodes.ExceptionHandler]">map</a> <a href="#649798" title="(e: Inliners.this.global.icodes.ExceptionHandler)Inliners.this.global.icodes.ExceptionHandler">translateExh</a><span class="delimiter">)</span>
        <a href="../../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#649801" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">pending</a>.<a href="../../../../collection/MapLike.scala.html#73200" title="=&gt; Boolean">isEmpty</a>, <span title="java.lang.String(&quot;Pending NEW elements: &quot;)" class="string">&quot;Pending NEW elements: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649801" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">pending</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Global.scala.html#478218" title="object Inliners.this.global.icodes">icodes</a>.<a href="../icode/ICodes.scala.html#501229" title="(m: Inliners.this.global.icodes.IMethod)Unit">checkValid</a><span class="delimiter">(</span><a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(stack: Inliners.this.global.icodes.TypeStack)Boolean" id="649174">isStampedForInlining</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.TypeStack" id="649185">stack</a>: <a href="../icode/TypeStacks.scala.html#501281" title="Inliners.this.global.icodes.TypeStack">TypeStack</a><span class="delimiter">)</span> =
        <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649178" title="=&gt; Boolean">sameSymbols</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649074" title="=&gt; Boolean">hasCode</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649182" title="=&gt; Boolean">shouldInline</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649179" title="(stack: Inliners.this.global.icodes.TypeStack)Boolean">isSafeToInline</a><span class="delimiter">(</span><a href="#649185" title="Inliners.this.global.icodes.TypeStack">stack</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(stack: Inliners.this.global.icodes.TypeStack)Unit" id="649175">logFailure</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.TypeStack" id="649271">stack</a>: <a href="../icode/TypeStacks.scala.html#501281" title="Inliners.this.global.icodes.TypeStack">TypeStack</a><span class="delimiter">)</span> = <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span>
        <a href="../../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;|inline failed for %s:
           |  pair.sameSymbols: %s
           |  inc.numInlined &lt; 2: %s
           |  inc.hasCode: %s
           |  isSafeToInline: %s
           |  shouldInline: %s
        &quot;&quot;&quot;</a>.<a href="../../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span>
          <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>, <a href="#649178" title="=&gt; Boolean">sameSymbols</a>, <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649059" title="=&gt; Int">numInlined</a> <a href="../../../../Int.scala.html#54761" title="(x: Int)Boolean">&lt;</a> <span title="Int(2)" class="int">2</span>,
          <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649074" title="=&gt; Boolean">hasCode</a>, <a href="#649179" title="(stack: Inliners.this.global.icodes.TypeStack)Boolean">isSafeToInline</a><span class="delimiter">(</span><a href="#649271" title="Inliners.this.global.icodes.TypeStack">stack</a><span class="delimiter">)</span>, <a href="#649182" title="=&gt; Boolean">shouldInline</a>
        <span class="delimiter">)</span>
      <span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(stack: Inliners.this.global.icodes.TypeStack)java.lang.String" id="649176">failureReason</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.TypeStack" id="649309">stack</a>: <a href="../icode/TypeStacks.scala.html#501281" title="Inliners.this.global.icodes.TypeStack">TypeStack</a><span class="delimiter">)</span> =
        <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649074" title="=&gt; Boolean">hasCode</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;bytecode was unavailable&quot;)" class="string">&quot;bytecode was unavailable&quot;</span>
        <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649179" title="(stack: Inliners.this.global.icodes.TypeStack)Boolean">isSafeToInline</a><span class="delimiter">(</span><a href="#649309" title="Inliners.this.global.icodes.TypeStack">stack</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;it is unsafe (target may reference private fields)&quot;)" class="string">&quot;it is unsafe (target may reference private fields)&quot;</span>
        <span class="keyword">else</span> <span title="java.lang.String(&quot;of a bug (run with -Ylog:inline -Ydebug for more information)&quot;)" class="string">&quot;of a bug (run with -Ylog:inline -Ydebug for more information)&quot;</span>

      <span class="keyword">def</span> <a title="(level: Inliner.this.NonPublicRefs.Value)Boolean" id="649177">canAccess</a><span class="delimiter">(</span><a title="Inliner.this.NonPublicRefs.Value" id="650853">level</a>: NonPublicRefs.<a href="../../../../Enumeration.scala.html#72683" title="Inliner.this.NonPublicRefs.Value">Value</a><span class="delimiter">)</span> = <a href="#650853" title="Inliner.this.NonPublicRefs.Value">level</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#648336" title="Boolean">Private</a>    =&gt; <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649054" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649054" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>
        <span class="keyword">case</span> <a href="#648334" title="Boolean">Protected</a>  =&gt; <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649054" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#509270" title="=&gt; Inliners.this.global.icodes.global.Type">tpe</a> <a href="../../symtab/Types.scala.html#507220" title="(that: Inliners.this.global.icodes.global.Type)Boolean">&lt;:&lt;</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649054" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#509270" title="=&gt; Inliners.this.global.icodes.global.Type">tpe</a>
        <span class="keyword">case</span> <a href="#648332" title="Boolean(true)">Public</a>     =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="649178">sameSymbols</a> = <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>

      <span class="comment">/** A method is safe to inline when:
       *    - it does not contain calls to private methods when
       *      called from another class
       *    - it is not inlined into a position with non-empty stack,
       *      while having a top-level finalizer (see liftedTry problem)
       *    - it is not recursive
       * Note:
       *    - synthetic private members are made public in this pass.
       */</span>
      <span class="keyword">def</span> <a title="(stack: Inliners.this.global.icodes.TypeStack)Boolean" id="649179">isSafeToInline</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.TypeStack" id="649205">stack</a>: <a href="../icode/TypeStacks.scala.html#501281" title="Inliners.this.global.icodes.TypeStack">TypeStack</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(f: Inliners.this.global.Symbol)Boolean" id="650864">makePublic</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="650867">f</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> =
          <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649075" title="=&gt; Boolean">hasSourceFile</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#650867" title="Inliners.this.global.Symbol">f</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435304" title="=&gt; Boolean">isSynthetic</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#650867" title="Inliners.this.global.Symbol">f</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435308" title="=&gt; Boolean">isParamAccessor</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
              <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Making not-private symbol out of synthetic: &quot;)" class="string">&quot;Making not-private symbol out of synthetic: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#650867" title="Inliners.this.global.Symbol">f</a><span class="delimiter">)</span>

            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#650867" title="Inliners.this.global.Symbol">f</a> <a href="../../../../reflect/generic/Symbols.scala.html#435349" title="(mask: Long)Boolean">hasFlag</a> Flags.<span title="Long(4L)">PRIVATE</span><span class="delimiter">)</span> <a href="#650867" title="Inliners.this.global.Symbol">f</a> <a href="../../symtab/Symbols.scala.html#509261" title="(mask: Long)f.type">setFlag</a> <a href="../../symtab/Flags.scala.html#36139" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#478443" title="=&gt; Long">notPRIVATE</a>
            <span title="Boolean(true)" class="keyword">true</span>
          <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649074" title="=&gt; Boolean">hasCode</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649073" title="=&gt; Boolean">isRecursive</a><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>

        <span class="keyword">val</span> <a title="Inliner.this.NonPublicRefs.Value" id="650865">accessNeeded</a> = <a href="#648338" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,Inliner.this.NonPublicRefs.Value]">usesNonPublics</a>.<a href="../../../../collection/mutable/MapLike.scala.html#73294" title="(key: Inliners.this.global.icodes.IMethod, op: =&gt; Inliner.this.NonPublicRefs.Value)Inliner.this.NonPublicRefs.Value">getOrElseUpdate</a><span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>, <span class="delimiter">{</span>
          <span class="comment">// Avoiding crashing the compiler if there are open blocks.</span>
          <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649068" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">openBlocks</a> <a href="../../../../collection/generic/TraversableForwarder.scala.html#61936" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Nothing)Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="650912">b</a> =&gt;
            <a href="#648305" title="(pos: Inliners.this.global.Position, msg: String)Unit">warn</a><span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#509109" title="=&gt; Inliners.this.global.icodes.global.Position">pos</a>,
                <span class="string">&quot;Encountered open block in isSafeToInline: this indicates a bug in the optimizer!\n&quot;</span> <span title="java.lang.String(&quot;Encountered open block in isSafeToInline: this indicates a bug in the optimizer!\012  caller = &quot;)">+</span>
                <span class="string">&quot;  caller = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, callee = &quot;)" class="string">&quot;, callee = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>
              <span class="delimiter">)</span>
            <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value" id="650885">check</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="650914">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Boolean" id="650915">cond</a>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span> =
            <span title="Inliner.this.NonPublicRefs.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="#650915" title="Boolean">cond</a><span class="delimiter">)</span> <a href="#648336" title="=&gt; Inliner.this.NonPublicRefs.Value">Private</a>
            <span class="keyword">else</span> <span title="Inliner.this.NonPublicRefs.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="#650914" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435303" title="=&gt; Boolean">isProtected</a><span class="delimiter">)</span> <a href="#648334" title="=&gt; Inliner.this.NonPublicRefs.Value">Protected</a>
            <span class="keyword">else</span> <a href="#648332" title="=&gt; Inliner.this.NonPublicRefs.Value">Public</a>

          <span class="keyword">def</span> <a title="(f: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value" id="650886">checkField</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="650916">f</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>   = <a href="#650885" title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value">check</a><span class="delimiter">(</span><a href="#650916" title="Inliners.this.global.Symbol">f</a>, <a href="#650916" title="Inliners.this.global.Symbol">f</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435302" title="=&gt; Boolean">isPrivate</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#650864" title="(f: Inliners.this.global.Symbol)Boolean">makePublic</a><span class="delimiter">(</span><a href="#650916" title="Inliners.this.global.Symbol">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(m: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value" id="650887">checkSuper</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="650917">m</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>   = <a href="#650885" title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value">check</a><span class="delimiter">(</span><a href="#650917" title="Inliners.this.global.Symbol">m</a>, <a href="#650917" title="Inliners.this.global.Symbol">m</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435302" title="=&gt; Boolean">isPrivate</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#650917" title="Inliners.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#509178" title="=&gt; Boolean">isClassConstructor</a><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(m: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value" id="650888">checkMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="650918">m</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>  = <a href="#650885" title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value">check</a><span class="delimiter">(</span><a href="#650918" title="Inliners.this.global.Symbol">m</a>, <a href="#650918" title="Inliners.this.global.Symbol">m</a>.<a href="../../../../reflect/generic/HasFlags.scala.html#435302" title="=&gt; Boolean">isPrivate</a><span class="delimiter">)</span>

          <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Inliner.this.NonPublicRefs.Value" id="650889">getAccess</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="650919">i</a>: <a href="../icode/Opcodes.scala.html#501274" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> = <a href="#650919" title="Inliners.this.global.icodes.Instruction">i</a> <span title="Inliner.this.NonPublicRefs.Value" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Inliner.this.NonPublicRefs.Value">CALL_METHOD</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="650922">m</a>, SuperCall<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#650887" title="(m: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkSuper</a><span class="delimiter">(</span><a href="#650922" title="Inliners.this.global.icodes.global.Symbol">m</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliner.this.NonPublicRefs.Value">CALL_METHOD</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="650926">m</a>, _<span class="delimiter">)</span>            =&gt; <a href="#650888" title="(m: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkMethod</a><span class="delimiter">(</span><a href="#650926" title="Inliners.this.global.icodes.global.Symbol">m</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliner.this.NonPublicRefs.Value">LOAD_FIELD</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="650929">f</a>, _<span class="delimiter">)</span>             =&gt; <a href="#650886" title="(f: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkField</a><span class="delimiter">(</span><a href="#650929" title="Inliners.this.global.icodes.global.Symbol">f</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliner.this.NonPublicRefs.Value">STORE_FIELD</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Symbol" id="650932">f</a>, _<span class="delimiter">)</span>            =&gt; <a href="#650886" title="(f: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkField</a><span class="delimiter">(</span><a href="#650932" title="Inliners.this.global.icodes.global.Symbol">f</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Inliner.this.NonPublicRefs.Value">_</span>                            =&gt; <a href="#648332" title="=&gt; Inliner.this.NonPublicRefs.Value">Public</a>
          <span class="delimiter">}</span>

          <span class="keyword">def</span> <a title="()Inliner.this.NonPublicRefs.Value" id="650890">iterate</a><span class="delimiter">(</span><span class="delimiter">)</span>: NonPublicRefs.<a href="../../../../Enumeration.scala.html#72683" title="Inliner.this.NonPublicRefs.Value">Value</a> = <span class="delimiter">{</span>
            <span class="keyword">var</span> <a title="Boolean" id="650933">seenProtected</a> = <span title="Boolean(false)" class="keyword">false</span>
            <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649069" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.Instruction]">instructions</a> <a href="../../../../collection/generic/TraversableForwarder.scala.html#61936" title="(f: Inliners.this.global.icodes.Instruction =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.Instruction" id="650963">i</a> =&gt;
              <a href="#650889" title="(i: Inliners.this.global.icodes.Instruction)Inliner.this.NonPublicRefs.Value">getAccess</a><span class="delimiter">(</span><a href="#650963" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="#648336" title="Nothing">Private</a>    =&gt; <span title="Nothing" class="keyword">return</span> <a href="#648336" title="=&gt; Inliner.this.NonPublicRefs.Value">Private</a>
                <span class="keyword">case</span> <a href="#648334" title="Unit">Protected</a>  =&gt; <a href="#650933" title="Boolean">seenProtected</a> = <span title="Boolean(true)" class="keyword">true</span>
                <span class="keyword">case</span> <span title="Unit">_</span>          =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
            <span title="Inliner.this.NonPublicRefs.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="#650933" title="Boolean">seenProtected</a><span class="delimiter">)</span> <a href="#648334" title="=&gt; Inliner.this.NonPublicRefs.Value">Protected</a> <span class="keyword">else</span> <a href="#648332" title="=&gt; Inliner.this.NonPublicRefs.Value">Public</a>
          <span class="delimiter">}</span>
          <a href="#650890" title="()Inliner.this.NonPublicRefs.Value">iterate</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="=&gt; Boolean" id="650866">isIllegalStack</a> = <span class="delimiter">(</span><a href="#649205" title="Inliners.this.global.icodes.TypeStack">stack</a>.<a href="../icode/TypeStacks.scala.html#608181" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649056" title="=&gt; Int">minimumStack</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649076" title="=&gt; Boolean">hasHandlers</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;method &quot;)" class="string">&quot;method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649050" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; is used on a non-empty stack with finalizer.&quot;)" class="string">&quot; is used on a non-empty stack with finalizer.&quot;</span><span class="delimiter">)</span>

          <span title="Boolean(false)" class="keyword">false</span>
        <span class="delimiter">}</span>
<span class="comment">//        if (!canAccess(accessNeeded))</span>
<span class="comment">//          println(&quot;access needed and failed: &quot; + accessNeeded)</span>
        <a href="#649177" title="(level: Inliner.this.NonPublicRefs.Value)Boolean">canAccess</a><span class="delimiter">(</span><a href="#650865" title="Inliner.this.NonPublicRefs.Value">accessNeeded</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#650866" title="=&gt; Boolean">isIllegalStack</a>
      <span class="delimiter">}</span>

      <span class="comment">/** Decide whether to inline or not. Heuristics:
       *   - it's bad to make the caller larger (&gt; SMALL_METHOD_SIZE) if it was small
       *   - it's bad to inline large methods
       *   - it's good to inline higher order functions
       *   - it's good to inline closures functions.
       *   - it's bad (useless) to inline inside bridge methods
       */</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="649180">neverInline</a>   = <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649060" title="=&gt; Boolean">isBridge</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649074" title="=&gt; Boolean">hasCode</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649058" title="=&gt; Boolean">noinline</a>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="649181">alwaysInline</a>  = <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649057" title="=&gt; Boolean">inline</a>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="649182">shouldInline</a>: <a href="../../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <a href="../../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#649180" title="=&gt; Boolean">neverInline</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#649181" title="=&gt; Boolean">alwaysInline</a> <a href="../../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;shouldInline: &quot;)" class="string">&quot;shouldInline: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>

        <span class="keyword">var</span> <a title="Int" id="650978">score</a> = <span title="Int(0)" class="int">0</span>

        <span class="comment">// better not inline inside closures, but hope that the closure itself</span>
        <span class="comment">// is repeatedly inlined</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649061" title="=&gt; Boolean">isInClosure</a><span class="delimiter">)</span> <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54811" title="(x: Int)Int">-=</a> <span title="Int(2)" class="int">2</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649078" title="=&gt; Int">inlinedCalls</a> <a href="../../../../Int.scala.html#54761" title="(x: Int)Boolean">&lt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54811" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span> <span class="comment">// only monadic methods can trigger the first inline</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649071" title="=&gt; Boolean">isSmall</a><span class="delimiter">)</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#649071" title="=&gt; Boolean">isSmall</a> <a href="../../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#649172" title="=&gt; Boolean">isLargeSum</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54811" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;shouldInline: score decreased to &quot;)" class="string">&quot;shouldInline: score decreased to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#650978" title="Int">score</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; because small &quot;)" class="string">&quot; because small &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649183" title="=&gt; Inliner.this.IMethodInfo">caller</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; would become large&quot;)" class="string">&quot; would become large&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649072" title="=&gt; Boolean">isLarge</a><span class="delimiter">)</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54811" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649063" title="=&gt; Boolean">isMonadic</a><span class="delimiter">)</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(3)" class="int">3</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649062" title="=&gt; Boolean">isHigherOrder</a><span class="delimiter">)</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649061" title="=&gt; Boolean">isInClosure</a><span class="delimiter">)</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(2)" class="int">2</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649059" title="=&gt; Int">numInlined</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
          <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54811" title="(x: Int)Int">-=</a> <span title="Int(2)" class="int">2</span>

        <a href="../../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;shouldInline(&quot;)" class="string">&quot;shouldInline(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#649184" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#649083" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) score: &quot;)" class="string">&quot;) score: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#650978" title="Int">score</a><span class="delimiter">)</span>

        <a href="#650978" title="Int">score</a> <a href="../../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(meth: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.IMethod]" id="648318">lookupIMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="649158">meth</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.Symbol" id="649159">receiver</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Option.scala.html#560" title="Option[Inliners.this.global.icodes.IMethod]">Option</a><span class="delimiter">[</span>IMethod<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IMethod]" id="651033">tryParent</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="651034">sym</a>: <a href="../../symtab/Symbols.scala.html#478659" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../../Global.scala.html#478218" title="object Inliners.this.global.icodes">icodes</a> <a href="../icode/Repository.scala.html#501445" title="(sym: Inliners.this.global.icodes.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IClass]">icode</a> <a href="#651034" title="Inliners.this.global.Symbol">sym</a> <a href="../../../../Option.scala.html#48483" title="(f: Inliners.this.global.icodes.global.icodes.IClass =&gt; Option[Inliners.this.global.icodes.global.icodes.IMethod])Option[Inliners.this.global.icodes.global.icodes.IMethod]">flatMap</a> <span class="delimiter">(</span><a href="#651044" title="Inliners.this.global.icodes.global.icodes.IClass">_</a> <a href="../icode/Members.scala.html#501683" title="(s: Inliners.this.global.icodes.global.icodes.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IMethod]">lookupMethod</a> <a href="#649158" title="Inliners.this.global.Symbol">meth</a><span class="delimiter">)</span>

      <a href="#649159" title="Inliners.this.global.Symbol">receiver</a>.<a href="../../symtab/Symbols.scala.html#509272" title="=&gt; Inliners.this.global.Type">info</a>.<a href="../../symtab/Types.scala.html#507231" title="=&gt; List[Inliners.this.global.Symbol]">baseClasses</a>.<a href="../../../../collection/LinearSeqLike.scala.html#70978" title="=&gt; Iterator[Inliners.this.global.Symbol]">iterator</a> <a href="../../../../collection/Iterator.scala.html#59115" title="(f: Inliners.this.global.Symbol =&gt; Option[Inliners.this.global.icodes.global.icodes.IMethod])Iterator[Option[Inliners.this.global.icodes.global.icodes.IMethod]]">map</a> <a href="#651033" title="(sym: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IMethod]">tryParent</a> <a href="../../../../collection/Iterator.scala.html#59160" title="(p: Option[Inliners.this.global.icodes.global.icodes.IMethod] =&gt; Boolean)Option[Option[Inliners.this.global.icodes.global.icodes.IMethod]]">find</a> <span class="delimiter">(</span><a href="#651069" title="Option[Inliners.this.global.icodes.global.icodes.IMethod]">_</a>.<a href="../../../../Option.scala.html#48472" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="../../../../Option.scala.html#48474" title="(default: =&gt; Option[Inliners.this.global.icodes.global.icodes.IMethod])Option[Inliners.this.global.icodes.global.icodes.IMethod]">getOrElse</a> <a href="../../../../Option.scala.html#1737" title="object None">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">/* class Inliner */</span>
<span class="delimiter">}</span> <span class="comment">/* class Inliners */</span>

        </pre>
    </body>
</html>