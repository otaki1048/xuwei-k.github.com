<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/LiftCode.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Gilles Dubochet
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> <a href="../symtab/Flags.scala.html#36139" title="object scala.tools.nsc.symtab.Flags">Flags</a>._
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.tools.nsc.util.FreshNameCreator

<span class="comment">/** Translate expressions of the form reflect.Code.lift(exp)
 *  to the lifted &quot;reflect trees&quot; representation of exp.
 *
 *  @author Gilles Dubochet
 *  @version 1.0
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LiftCode extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.Reifiers with ScalaObject" id="39184">LiftCode</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#39274" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> <a href="Reifiers.scala.html#38146" title="scala.tools.nsc.transform.Reifiers">Reifiers</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="../SubComponent.scala.html#500466" title="=&gt; scala.tools.nsc.Global">global</a>._                  <span class="comment">// the global environment</span>
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#479030" title="object LiftCode.this.global.definitions">definitions</a>._             <span class="comment">// standard classes and methods</span>
  <span class="keyword">import</span> <a href="../Global.scala.html#478336" title="object LiftCode.this.global.typer">typer</a>.<span class="delimiter">{</span>typed, atOwner<span class="delimiter">}</span>    <span class="comment">// methods to type trees</span>

  <span class="keyword">val</span> <a title="LiftCode.this.global.type" id="511961">symbols</a>: global.<span class="keyword">type</span> = <a href="../SubComponent.scala.html#500466" title="=&gt; scala.tools.nsc.Global">global</a>

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <a title="String" id="511963">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;liftcode&quot;)" class="string">&quot;liftcode&quot;</span>

  <span class="keyword">def</span> <a title="(unit: LiftCode.this.global.CompilationUnit)LiftCode.this.global.Transformer" id="511965">newTransformer</a><span class="delimiter">(</span><a title="LiftCode.this.global.CompilationUnit" id="900225">unit</a>: <a href="../CompilationUnits.scala.html#479284" title="LiftCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#479167" title="LiftCode.this.global.Transformer">Transformer</a> =
    <span title="LiftCode.this.AddRefFields" class="keyword">new</span> <a href="#511966" title="LiftCode.this.AddRefFields">AddRefFields</a><span class="delimiter">(</span><a href="#900225" title="LiftCode.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class AddRefFields extends LiftCode.this.global.Transformer with ScalaObject" id="511966">AddRefFields</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="LiftCode.this.global.CompilationUnit" id="900232">unit</a>: <a href="../CompilationUnits.scala.html#479284" title="LiftCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#479167" title="LiftCode.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree" id="900231">transform</a><span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="900235">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="LiftCode.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="LiftCode.this.global.Tree">Tree</a> = <a href="#900235" title="LiftCode.this.global.Tree">tree</a> <span title="LiftCode.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="LiftCode.this.global.analyzer.global.Tree">Apply</span><span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="900240">lift</a>, <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="(x: List[LiftCode.this.global.Tree])Some[List[LiftCode.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="900258">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">if</span> <a href="#900240" title="LiftCode.this.global.Tree">lift</a>.<a href="../../../reflect/generic/Trees.scala.html#441032" title="=&gt; LiftCode.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#508135" title="=&gt; LiftCode.this.global.Symbol">Code_lift</a> =&gt;
        <a href="../typechecker/Typers.scala.html#507768" title="(tree: LiftCode.this.global.analyzer.global.Tree)LiftCode.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479182" title="(pos: LiftCode.this.global.Position)(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#900258" title="LiftCode.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; LiftCode.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#511970" title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree">codify</a><span class="delimiter">(</span><a href="#900258" title="LiftCode.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="LiftCode.this.global.Tree">_</span> =&gt;
        <a href="#511966" title="LiftCode.this.AddRefFields" class="keyword">super</a>.<a href="../ast/Trees.scala.html#560339" title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#900235" title="LiftCode.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">type</span> <a title="scala.collection.immutable.ListMap[scala.reflect.Symbol,LiftCode.this.global.Name]" id="511967">InjectEnvironment</a> = immutable.<a href="../../../collection/immutable/ListMap.scala.html#13618" title="scala.collection.immutable.ListMap[scala.reflect.Symbol,LiftCode.this.global.Name]">ListMap</a><span class="delimiter">[</span>reflect.Symbol, Name<span class="delimiter">]</span>

  <span class="keyword">class</span> <a title="class Injector extends java.lang.Object with ScalaObject" id="511968">Injector</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="LiftCode.this.InjectEnvironment" id="900296">env</a>: <a href="../../../collection/immutable/ListMap.scala.html#13618" title="LiftCode.this.InjectEnvironment">InjectEnvironment</a>, <a title="scala.tools.nsc.util.FreshNameCreator" id="900297">fresh</a>: <a href="../util/FreshNameCreator.scala.html#42502" title="scala.tools.nsc.util.FreshNameCreator">FreshNameCreator</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="comment">// todo replace className by caseName in CaseClass once we have switched to nsc.</span>
    <span class="keyword">def</span> <a title="(value: AnyRef)String" id="900290">className</a><span class="delimiter">(</span><a title="AnyRef" id="900298">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#900298" title="AnyRef">value</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.$colon$colon&quot;)">_</span> :: _ =&gt; <span title="java.lang.String(&quot;scala.$colon$colon&quot;)" class="string">&quot;scala.$colon$colon&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.MethodType&quot;)">reflect</span>.MethodType<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <span title="java.lang.String(&quot;scala.reflect.MethodType&quot;)" class="string">&quot;scala.reflect.MethodType&quot;</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="900304">x</a>:<a href="../../../Product.scala.html#1766" title="Product">Product</a> =&gt;
        <span title="java.lang.String(&quot;scala.reflect.&quot;)" class="string">&quot;scala.reflect.&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#900304" title="Product">x</a>.<a href="../../../Product.scala.html#48468" title="=&gt; java.lang.String">productPrefix</a> <span class="comment">//caseName</span>
      <span class="comment">//case _ =&gt; // bq:unreachable code</span>
      <span class="comment">//  &quot;&quot;</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(value: Any)String" id="900291">objectName</a><span class="delimiter">(</span><a title="Any" id="900305">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#900305" title="Any">value</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#13700" title="java.lang.String(&quot;scala.collection.immutable.Nil&quot;)">Nil</a>                =&gt; <span title="java.lang.String(&quot;scala.collection.immutable.Nil&quot;)" class="string">&quot;scala.collection.immutable.Nil&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.NoSymbol&quot;)">reflect</span>.<a href="../../../reflect/Symbol.scala.html#3128" title="object scala.reflect.NoSymbol">NoSymbol</a>   =&gt; <span title="java.lang.String(&quot;scala.reflect.NoSymbol&quot;)" class="string">&quot;scala.reflect.NoSymbol&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.RootSymbol&quot;)">reflect</span>.<a href="../../../reflect/Symbol.scala.html#3032" title="object scala.reflect.RootSymbol">RootSymbol</a> =&gt; <span title="java.lang.String(&quot;scala.reflect.RootSymbol&quot;)" class="string">&quot;scala.reflect.RootSymbol&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.NoPrefix&quot;)">reflect</span>.<a href="../../../reflect/Type.scala.html#3002" title="object scala.reflect.NoPrefix">NoPrefix</a>   =&gt; <span title="java.lang.String(&quot;scala.reflect.NoPrefix&quot;)" class="string">&quot;scala.reflect.NoPrefix&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;scala.reflect.NoType&quot;)">reflect</span>.<a href="../../../reflect/Type.scala.html#2822" title="object scala.reflect.NoType">NoType</a>     =&gt; <span title="java.lang.String(&quot;scala.reflect.NoType&quot;)" class="string">&quot;scala.reflect.NoType&quot;</span>
      <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">_</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(value: Any)LiftCode.this.global.Tree" id="900292">inject</a><span class="delimiter">(</span><a title="Any" id="900307">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="LiftCode.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(c: Product)LiftCode.this.global.gen.global.Tree" id="900309">treatProduct</a><span class="delimiter">(</span><a title="Product" id="900310">c</a>: <a href="../../../Product.scala.html#1766" title="Product">Product</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="String" id="900311">name</a> = <a href="#900291" title="(value: Any)String">objectName</a><span class="delimiter">(</span><a href="#900310" title="Product">c</a><span class="delimiter">)</span>
        <span title="LiftCode.this.global.gen.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#900311" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#54754" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="../Global.scala.html#478214" title="object LiftCode.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#507273" title="(sym: LiftCode.this.global.gen.global.Symbol)LiftCode.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508339" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="900330">name</a> = <a href="#900290" title="(value: AnyRef)String">className</a><span class="delimiter">(</span><a href="#900310" title="Product">c</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#900330" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../symtab/SymbolTable.scala.html#478159" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;don\'t know how to inject &quot;)" class="string">&quot;don't know how to inject &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#900307" title="Any">value</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]" id="900331">injectedArgs</a> = <span title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]" class="keyword">new</span> <a href="../../../collection/mutable/ListBuffer.scala.html#15373" title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]">ListBuffer</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="900471">i</a> &lt;- <a href="../../../LowPriorityImplicits.scala.html#9474" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../../collection/immutable/Range.scala.html#63514" title="(f: Int =&gt; scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree])Unit">until</a> <a href="#900310" title="Product">c</a>.<a href="../../../Product.scala.html#48465" title="=&gt; Int">productArity</a><span class="delimiter">)</span>
            <a href="#900331" title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]">injectedArgs</a> <a href="../../../collection/mutable/ListBuffer.scala.html#61786" title="(x: LiftCode.this.global.Tree)injectedArgs.type">+=</a> <a href="#900292" title="(value: Any)LiftCode.this.global.Tree">inject</a><span class="delimiter">(</span><a href="#900310" title="Product">c</a>.<a href="../../../Product.scala.html#48464" title="(n: Int)Any">productElement</a><span class="delimiter">(</span><a href="#900471" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../ast/Trees.scala.html#479140" title="(tpt: LiftCode.this.global.Tree, argss: List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479144" title="(sym: LiftCode.this.global.Symbol)LiftCode.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508340" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: List[LiftCode.this.global.Tree]*)List[List[LiftCode.this.global.Tree]]">List</a><span class="delimiter">(</span><a href="#900331" title="scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]">injectedArgs</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#61794" title="=&gt; List[LiftCode.this.global.Tree]">toList</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#900307" title="Any">value</a> <span title="LiftCode.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="LiftCode.this.global.Tree">FreeValue</span><span class="delimiter">(</span><a title="LiftCode.this.symbols.Tree" id="900542">tree</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#479140" title="(tpt: LiftCode.this.global.Tree, argss: List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479144" title="(sym: LiftCode.this.global.Symbol)LiftCode.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508340" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName" class="string">&quot;scala.reflect.Literal&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: List[LiftCode.this.symbols.Tree]*)List[List[LiftCode.this.symbols.Tree]]">List</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#48877" title="(xs: LiftCode.this.symbols.Tree*)List[LiftCode.this.symbols.Tree]">List</a><span class="delimiter">(</span><a href="#900542" title="LiftCode.this.symbols.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="LiftCode.this.global.Literal" class="delimiter">(</span><span class="delimiter">)</span>           =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900597">x</a>: <span title="String">String</span>    =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900597" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900615">x</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a>   =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900615" title="Boolean">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900633">x</a>: <a href="../../../Byte.scala.html#1013" title="Byte">Byte</a>      =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900633" title="Byte">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900651">x</a>: <a href="../../../Short.scala.html#2039" title="Short">Short</a>     =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900651" title="Short">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900669">x</a>: <a href="../../../Char.scala.html#2189" title="Char">Char</a>      =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900669" title="Char">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900687">x</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a>       =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900687" title="Int">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900705">x</a>: <a href="../../../Long.scala.html#1439" title="Long">Long</a>      =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900705" title="Long">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900723">x</a>: <a href="../../../Float.scala.html#1157" title="Float">Float</a>     =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900723" title="Float">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.Literal" id="900741">x</a>: <a href="../../../Double.scala.html#281" title="Double">Double</a>    =&gt; <a href="../../../reflect/generic/Trees.scala.html#443172" title="(value: LiftCode.this.global.Constant)LiftCode.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/generic/Constants.scala.html#435761" title="(value: Any)LiftCode.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#900741" title="Double">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="LiftCode.this.global.gen.global.Tree" id="900759">c</a>: <a href="../../../Product.scala.html#1766" title="Product">Product</a>   =&gt; <a href="#900309" title="(c: Product)LiftCode.this.global.gen.global.Tree">treatProduct</a><span class="delimiter">(</span><a href="#900759" title="Product">c</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="LiftCode.this.global.gen.global.Tree" class="keyword">null</span> =&gt;
          <a href="../Global.scala.html#478214" title="object LiftCode.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#507273" title="(sym: LiftCode.this.global.gen.global.Symbol)LiftCode.this.global.gen.global.Tree">mkAttributedRef</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508339" title="(fullname: LiftCode.this.global.Name)LiftCode.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)LiftCode.this.global.TermName" class="string">&quot;scala.reflect.NoType&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
          <a href="../symtab/SymbolTable.scala.html#478159" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="java.lang.String(&quot;don\'t know how to inject &quot;)" class="string">&quot;don't know how to inject &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#900307" title="Any">value</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">// Injector</span>


  <span class="keyword">def</span> <a title="(code: scala.reflect.Tree)LiftCode.this.global.Tree" id="511969">inject</a><span class="delimiter">(</span><a title="scala.reflect.Tree" id="900765">code</a>: reflect.<a href="../../../reflect/Tree.scala.html#2902" title="scala.reflect.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="LiftCode.this.global.Tree">Tree</a> =
    <span title="LiftCode.this.Injector" class="keyword">new</span> <a href="#511968" title="LiftCode.this.Injector">Injector</a><span class="delimiter">(</span>immutable.<a href="../../../collection/immutable/ListMap.scala.html#13619" title="object scala.collection.immutable.ListMap">ListMap</a>.<a href="../../../collection/immutable/ListMap.scala.html#181579" title="scala.collection.immutable.ListMap[scala.reflect.Symbol,Nothing]">empty</a>, <span title="scala.tools.nsc.util.FreshNameCreator.Default" class="keyword">new</span> <a href="../util/FreshNameCreator.scala.html#42503" title="object scala.tools.nsc.util.FreshNameCreator">FreshNameCreator</a>.<a href="../util/FreshNameCreator.scala.html#501453" title="scala.tools.nsc.util.FreshNameCreator.Default">Default</a><span class="delimiter">)</span>.<a href="#900292" title="(value: Any)LiftCode.this.global.Tree">inject</a><span class="delimiter">(</span><a href="#900765" title="scala.reflect.Tree">code</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tree: LiftCode.this.global.Tree)LiftCode.this.global.Tree" id="511970">codify</a> <span class="delimiter">(</span><a title="LiftCode.this.global.Tree" id="900279">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="LiftCode.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="LiftCode.this.global.Tree">Tree</a> =
    <a href="../ast/Trees.scala.html#479140" title="(tpt: LiftCode.this.global.Tree, argss: List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree">New</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479149" title="(tp: LiftCode.this.global.Type)LiftCode.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="../symtab/Types.scala.html#478817" title="(tycon: LiftCode.this.global.Type, args: List[LiftCode.this.global.Type])LiftCode.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object LiftCode.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508131" title="=&gt; LiftCode.this.global.Symbol">CodeClass</a>.<a href="../symtab/Symbols.scala.html#509285" title="=&gt; LiftCode.this.global.Type">typeConstructor</a>,
                             <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: LiftCode.this.global.Type*)List[LiftCode.this.global.Type]">List</a><span class="delimiter">(</span><a href="#900279" title="LiftCode.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441028" title="=&gt; LiftCode.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
        <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: List[LiftCode.this.global.Tree]*)List[List[LiftCode.this.global.Tree]]">List</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#48877" title="(xs: LiftCode.this.global.Tree*)List[LiftCode.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#511969" title="(code: scala.reflect.Tree)LiftCode.this.global.Tree">inject</a><span class="delimiter">(</span><a href="Reifiers.scala.html#512017" title="(tree: LiftCode.this.symbols.Tree)scala.reflect.Tree">reify</a><span class="delimiter">(</span><a href="#900279" title="LiftCode.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">// case EmptyTree =&gt;</span>
<span class="comment">// case LiftPoint(tree) =&gt;</span>
<span class="comment">// case PackageDef(pid, stats) =&gt;</span>
<span class="comment">// case ClassDef(mods, name, tparams, impl) =&gt;</span>
<span class="comment">// case ValDef(mods, name, tpt, rhs) =&gt;</span>
<span class="comment">// case DefDef(mods, name, tparams, vparamss, tpt, rhs) =&gt;</span>
<span class="comment">// case TypeDef(mods, name, tparams, rhs) =&gt;</span>
<span class="comment">// case LabelDef(name, params, rhs) =&gt;</span>
<span class="comment">// case Template(parents, self, body) =&gt;</span>
<span class="comment">// case Block(stats, expr) =&gt;</span>
<span class="comment">// case ArrayValue(elemtpt, trees) =&gt;</span>
<span class="comment">// case Assign(lhs, rhs) =&gt;</span>
<span class="comment">// case If(cond, thenp, elsep) =&gt;</span>
<span class="comment">// case Match(selector, cases) =&gt;</span>
<span class="comment">// case Return(expr) =&gt;</span>
<span class="comment">// case Try(block, catches, finalizer) =&gt;</span>
<span class="comment">// case Throw(expr) =&gt;</span>
<span class="comment">// case New(tpt) =&gt;</span>
<span class="comment">// case Typed(expr, tpt) =&gt;</span>
<span class="comment">// case TypeApply(fun, args) =&gt;</span>
<span class="comment">// case Apply(fun, args) =&gt;</span>
<span class="comment">// case Super(qual, mix) =&gt;</span>
<span class="comment">// case This(qual) =&gt;</span>
<span class="comment">// case Select(qualifier, selector) =&gt;</span>
<span class="comment">// case Ident(name) =&gt;</span>
<span class="comment">// case Literal(value) =&gt;</span>
<span class="comment">// case TypeTree() =&gt;</span>
<span class="comment">// /* Pattern matching */</span>
<span class="comment">// case CaseDef(pat, guard, body) =&gt;</span>
<span class="comment">// case Alternative(trees) =&gt;</span>
<span class="comment">// case Star(elem) =&gt;</span>
<span class="comment">// case Bind(name, body) =&gt;</span>

        </pre>
    </body>
</html>