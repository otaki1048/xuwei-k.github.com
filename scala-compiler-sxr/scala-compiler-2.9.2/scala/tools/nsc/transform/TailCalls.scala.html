<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/TailCalls.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Iulian Dragos
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> <a href="../symtab/Flags.scala.html#36139" title="object scala.tools.nsc.symtab.Flags">Flags</a>.SYNTHETIC

<span class="comment">/** Perform tail recursive call elimination.
 *
 *  @author Iulian Dragos
 *  @version 1.0
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TailCalls extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with ScalaObject" id="39025">TailCalls</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="Transform.scala.html#39274" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../SubComponent.scala.html#500466" title="=&gt; scala.tools.nsc.Global">global</a>._                     <span class="comment">// the global environment</span>
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#479030" title="object TailCalls.this.global.definitions">definitions</a>._                <span class="comment">// standard classes and methods</span>
  <span class="keyword">import</span> <a href="../Global.scala.html#478336" title="object TailCalls.this.global.typer">typer</a>.<span class="delimiter">{</span> typed, typedPos <span class="delimiter">}</span>    <span class="comment">// methods to type trees</span>

  <span class="keyword">val</span> <a title="String" id="512090">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;tailcalls&quot;)" class="string">&quot;tailcalls&quot;</span>

  <span class="keyword">def</span> <a title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer" id="512092">newTransformer</a><span class="delimiter">(</span><a title="TailCalls.this.global.CompilationUnit" id="919690">unit</a>: <a href="../CompilationUnits.scala.html#479284" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#479167" title="TailCalls.this.global.Transformer">Transformer</a> =
    <span title="TailCalls.this.TailCallElimination" class="keyword">new</span> <a href="#512095" title="TailCalls.this.TailCallElimination">TailCallElimination</a><span class="delimiter">(</span><a href="#919690" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="comment">/** Create a new phase which applies transformer */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)TailCalls.this.StdPhase" id="512093">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="515255">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#22578" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span>: <a href="../SubComponent.scala.html#500485" title="TailCalls.this.StdPhase">StdPhase</a> = <span title="TailCalls.this.Phase" class="keyword">new</span> <a href="#512094" title="TailCalls.this.Phase">Phase</a><span class="delimiter">(</span><a href="#515255" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span>

  <span class="comment">/** The phase defined by this transform */</span>
  <span class="keyword">class</span> <a title="class Phase extends TailCalls.this.StdPhase with ScalaObject" id="512094">Phase</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="919712">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#22578" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../SubComponent.scala.html#500485" title="TailCalls.this.StdPhase">StdPhase</a><span class="delimiter">(</span><a href="#919712" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(unit: TailCalls.this.global.CompilationUnit)Unit" id="919711">apply</a><span class="delimiter">(</span><a title="TailCalls.this.global.CompilationUnit" id="919715">unit</a>: global.<a href="../CompilationUnits.scala.html#479284" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469706" title="=&gt; scala.tools.nsc.Settings#ChoiceSetting">debuginfo</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; java.lang.String">value</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;notailcalls&quot;)" class="string">&quot;notailcalls&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#512092" title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer">newTransformer</a><span class="delimiter">(</span><a href="#919715" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>.<a href="../ast/Trees.scala.html#560349" title="(unit: TailCalls.this.global.CompilationUnit)Unit">transformUnit</a><span class="delimiter">(</span><a href="#919715" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A Tail Call Transformer
   *
   * @author     Erik Stenman, Iulian Dragos
   * @version    1.1
   *
   * What it does:
   * &lt;p&gt;
   *   Finds method calls in tail-position and replaces them with jumps.
   *   A call is in a tail-position if it is the last instruction to be
   *   executed in the body of a method.  This is done by recursing over
   *   the trees that may contain calls in tail-position (trees that can't
   *   contain such calls are not transformed). However, they are not that
   *   many.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Self-recursive calls in tail-position are replaced by jumps to a
   *   label at the beginning of the method. As the JVM provides no way to
   *   jump from a method to another one, non-recursive calls in
   *   tail-position are not optimized.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   A method call is self-recursive if it calls the current method and
   *   the method is final (otherwise, it could
   *   be a call to an overridden method in a subclass). Furthermore, If
   *   the method has type parameters, the call must contain these
   *   parameters as type arguments. Recursive calls on a different instance
   *   are optimized. Since 'this' is not a local variable, a dummy local val
   *   is added and used as a label parameter. The backend knows to load
   *   the corresponding argument in the 'this' (local at index 0). This dummy local
   *   is never used and should be cleand up by dead code elimination (when enabled).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   This phase has been moved before pattern matching to catch more
   *   of the common cases of tail recursive functions. This means that
   *   more cases should be taken into account (like nested function, and
   *   pattern cases).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   If a method contains self-recursive calls, a label is added to at
   *   the beginning of its body and the calls are replaced by jumps to
   *   that label.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Assumes: &lt;code&gt;Uncurry&lt;/code&gt; has been run already, and no multiple
   *            parameter lists exit.
   * &lt;/p&gt;
   */</span>
  <span class="keyword">class</span> <a title="class TailCallElimination extends TailCalls.this.global.Transformer with ScalaObject" id="512095">TailCallElimination</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="TailCalls.this.global.CompilationUnit" id="919707">unit</a>: <a href="../CompilationUnits.scala.html#479284" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#479167" title="TailCalls.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="919696">defaultReason</a> = <span title="java.lang.String(&quot;it contains a recursive call not in tail position&quot;)" class="string">&quot;it contains a recursive call not in tail position&quot;</span>

    <span class="keyword">class</span> <a title="class Context extends java.lang.Object with ScalaObject" id="919698">Context</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">/** The current method */</span>
      <span class="keyword">var</span> <a title="TailCalls.this.global.Symbol" id="919731">method</a>: <a href="../symtab/Symbols.scala.html#478659" title="TailCalls.this.global.Symbol">Symbol</a> = <a href="../symtab/Symbols.scala.html#478667" title="object TailCalls.this.global.NoSymbol">NoSymbol</a>

      <span class="comment">/** The current tail-call label */</span>
      <span class="keyword">var</span> <a title="TailCalls.this.global.Symbol" id="919734">label</a>: <a href="../symtab/Symbols.scala.html#478659" title="TailCalls.this.global.Symbol">Symbol</a> = <a href="../symtab/Symbols.scala.html#478667" title="object TailCalls.this.global.NoSymbol">NoSymbol</a>

      <span class="comment">/** The expected type arguments of self-recursive calls */</span>
      <span class="keyword">var</span> <a title="List[TailCalls.this.global.Symbol]" id="919737">tparams</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[TailCalls.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a>

      <span class="comment">/** Tells whether we are in a (possible) tail position */</span>
      <span class="keyword">var</span> <a title="Boolean" id="919740">tailPos</a> = <span title="Boolean(false)" class="keyword">false</span>

      <span class="comment">/** The reason this method could not be optimized. */</span>
      <span class="keyword">var</span> <a title="java.lang.String" id="919743">failReason</a> = <a href="#919696" title="=&gt; java.lang.String">defaultReason</a>
      <span class="keyword">var</span> <a title="TailCalls.this.global.Position" id="919746">failPos</a>    = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509109" title="=&gt; TailCalls.this.global.Position">pos</a>

      <span class="comment">/** Has the label been accessed? */</span>
      <span class="keyword">var</span> <a title="Boolean" id="919749">accessed</a> = <span title="Boolean(false)" class="keyword">false</span>

      <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" id="919751" class="keyword">this</a><span class="delimiter">(</span><a title="TailCallElimination.this.Context" id="919773">that</a>: <a href="#919698" title="TailCallElimination.this.Context">Context</a><span class="delimiter">)</span> = <span title="Unit" class="delimiter">{</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919731" title="(x$1: TailCalls.this.global.Symbol)Unit">method</a>   = <a href="#919773" title="TailCallElimination.this.Context">that</a>.<a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919737" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a>  = <a href="#919773" title="TailCallElimination.this.Context">that</a>.<a href="#919737" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919740" title="(x$1: Boolean)Unit">tailPos</a>  = <a href="#919773" title="TailCallElimination.this.Context">that</a>.<a href="#919740" title="=&gt; Boolean">tailPos</a>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919749" title="(x$1: Boolean)Unit">accessed</a> = <a href="#919773" title="TailCallElimination.this.Context">that</a>.<a href="#919749" title="=&gt; Boolean">accessed</a>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919746" title="(x$1: TailCalls.this.global.Position)Unit">failPos</a>  = <a href="#919773" title="TailCallElimination.this.Context">that</a>.<a href="#919746" title="=&gt; TailCalls.this.global.Position">failPos</a>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919734" title="(x$1: TailCalls.this.global.Symbol)Unit">label</a>    = <a href="#919773" title="TailCallElimination.this.Context">that</a>.<a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(dd: TailCalls.this.global.DefDef)TailCallElimination.this.Context" id="919752" class="keyword">this</a><span class="delimiter">(</span><a title="TailCalls.this.global.DefDef" id="919780">dd</a>: <a href="../../../reflect/generic/Trees.scala.html#434052" title="TailCalls.this.global.DefDef">DefDef</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919731" title="(x$1: TailCalls.this.global.Symbol)Unit">method</a>   = <a href="#919780" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; TailCalls.this.global.Symbol">symbol</a>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919737" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a>  = <a href="#919780" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/generic/Trees.scala.html#441795" title="=&gt; List[TailCalls.this.global.TypeDef]">tparams</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: TailCalls.this.global.TypeDef =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.TypeDef],TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol]])List[TailCalls.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#919814" title="TailCalls.this.global.TypeDef">_</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919740" title="(x$1: Boolean)Unit">tailPos</a>  = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919749" title="(x$1: Boolean)Unit">accessed</a> = <span title="Boolean(false)" class="keyword">false</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919746" title="(x$1: TailCalls.this.global.Position)Unit">failPos</a>  = <a href="#919780" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a>

        <span class="comment">/** Create a new method symbol for the current method and store it in
          * the label field.
          */</span>
        <a href="#919698" title="Context.this.type" class="keyword">this</a>.<a href="#919734" title="(x$1: TailCalls.this.global.Symbol)Unit">label</a>    = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="TailCalls.this.global.MethodSymbol" id="919842">label</a>     = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509132" title="(pos: TailCalls.this.global.Position, name: TailCalls.this.global.TermName)TailCalls.this.global.MethodSymbol">newLabel</a><span class="delimiter">(</span><a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509109" title="=&gt; TailCalls.this.global.Position">pos</a>, <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)TailCalls.this.global.TermName">+</a> <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; TailCalls.this.global.Name">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="TailCalls.this.global.Symbol" id="919843">thisParam</a> = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509152" title="(argtype: TailCalls.this.global.Type)TailCalls.this.global.Symbol">newSyntheticValueParam</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#560337" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../symtab/Symbols.scala.html#509307" title="=&gt; TailCalls.this.global.Type">typeOfThis</a><span class="delimiter">)</span>
          <a href="#919842" title="TailCalls.this.global.MethodSymbol">label</a> <a href="../symtab/Symbols.scala.html#509274" title="(info: TailCalls.this.global.Type)label.type">setInfo</a> <a href="../symtab/Types.scala.html#546837" title="(params: List[TailCalls.this.global.Symbol], resultType: TailCalls.this.global.Type)TailCalls.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#919843" title="TailCalls.this.global.Symbol">thisParam</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">::</a> <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507180" title="=&gt; List[TailCalls.this.global.Symbol]">params</a>, <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507177" title="=&gt; TailCalls.this.global.Type">finalResultType</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#919755" title="=&gt; Boolean">isEligible</a><span class="delimiter">)</span>
          <a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a> <a href="../symtab/Symbols.scala.html#509274" title="(info: TailCalls.this.global.Type)TailCalls.this.global.Symbol">setInfo</a> <a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507210" title="(from: List[TailCalls.this.global.Symbol], to: List[TailCalls.this.global.Symbol])TailCalls.this.global.Type">substSym</a><span class="delimiter">(</span><a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507182" title="=&gt; List[TailCalls.this.global.Symbol]">typeParams</a>, <a href="#919737" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="=&gt; TailCalls.this.global.Type" id="919753">enclosingType</a>    = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/generic/Symbols.scala.html#435409" title="=&gt; TailCalls.this.global.Symbol">enclClass</a>.<a href="../symtab/Symbols.scala.html#509307" title="=&gt; TailCalls.this.global.Type">typeOfThis</a>
      <span class="keyword">def</span> <a title="=&gt; List[TailCalls.this.global.Symbol]" id="919754">methodTypeParams</a> = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507182" title="=&gt; List[TailCalls.this.global.Symbol]">typeParams</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="919755">isEligible</a>       = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509237" title="=&gt; Boolean">isEffectivelyFinal</a>
      <span class="comment">// @tailrec annotation indicates mandatory transformation</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="919756">isMandatory</a>      = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509119" title="(cls: TailCalls.this.global.Symbol)Boolean">hasAnnotation</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#507969" title="=&gt; TailCalls.this.global.Symbol">TailrecClass</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="../Global.scala.html#478374" title="=&gt; Boolean">forMSIL</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="919757">isTransformed</a>    = <a href="#919755" title="=&gt; Boolean">isEligible</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#919749" title="=&gt; Boolean">accessed</a>
      <span class="keyword">def</span> <a title="()Unit" id="919758">tailrecFailure</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#919707" title="TailCalls.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#500978" title="(pos: TailCalls.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#919746" title="=&gt; TailCalls.this.global.Position">failPos</a>, <span title="java.lang.String(&quot;could not optimize @tailrec annotated &quot;)" class="string">&quot;could not optimize @tailrec annotated &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919743" title="=&gt; java.lang.String">failReason</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(pos: TailCalls.this.global.Position)TailCalls.this.global.TermSymbol" id="919759">newThis</a><span class="delimiter">(</span><a title="TailCalls.this.global.Position" id="919900">pos</a>: <a href="../util/Position.scala.html#42664" title="TailCalls.this.global.Position">Position</a><span class="delimiter">)</span> = <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509125" title="(pos: TailCalls.this.global.Position, name: TailCalls.this.global.TermName)TailCalls.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="#919900" title="TailCalls.this.global.Position">pos</a>, <a href="../symtab/StdNames.scala.html#479055" title="object TailCalls.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#516566" title="=&gt; TailCalls.this.global.nme.NameType">THIS</a><span class="delimiter">)</span> <a href="../symtab/Symbols.scala.html#509274" title="(info: TailCalls.this.global.Type)TailCalls.this.global.TermSymbol">setInfo</a> <a href="../ast/Trees.scala.html#560337" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../symtab/Symbols.scala.html#509307" title="=&gt; TailCalls.this.global.Type">typeOfThis</a> <a href="../symtab/Symbols.scala.html#509261" title="(mask: Long)TailCalls.this.global.TermSymbol">setFlag</a> <span title="Long(2097152L)">SYNTHETIC</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="919760">toString</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">(</span>
        <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; TailCalls.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; tparams: &quot;)" class="string">&quot; tparams: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919737" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; tailPos: &quot;)" class="string">&quot; tailPos: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919740" title="=&gt; Boolean">tailPos</a> <span title="(x$1: Any)java.lang.String">+</span>
        <span title="java.lang.String(&quot; accessed: &quot;)" class="string">&quot; accessed: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919749" title="=&gt; Boolean">accessed</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Label: &quot;)" class="string">&quot;\nLabel: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Label type: &quot;)" class="string">&quot;\nLabel type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#509272" title="=&gt; TailCalls.this.global.Type">info</a>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="TailCallElimination.this.Context" id="919700">ctx</a>: <a href="#919698" title="TailCallElimination.this.Context">Context</a> = <span title="TailCallElimination.this.Context" class="keyword">new</span> <a href="#919698" title="TailCallElimination.this.Context">Context</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()TailCallElimination.this.Context" id="919702">noTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="919931">t</a> = <a href="#919751" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" class="keyword">new</a> <a href="#919698" title="TailCallElimination.this.Context">Context</a><span class="delimiter">(</span><a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a><span class="delimiter">)</span>
      <a href="#919931" title="TailCallElimination.this.Context">t</a>.<a href="#919740" title="(x$1: Boolean)Unit">tailPos</a> = <span title="Boolean(false)" class="keyword">false</span>
      <a href="#919931" title="TailCallElimination.this.Context">t</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Rewrite this tree to contain no tail recursive calls */</span>
    <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree" id="919703">transform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="919936">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCallElimination.this.Context" id="919937">nctx</a>: <a href="#919698" title="TailCallElimination.this.Context">Context</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="919940">saved</a> = <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>
      <a href="#919700" title="(x$1: TailCallElimination.this.Context)Unit">ctx</a> = <a href="#919937" title="TailCallElimination.this.Context">nctx</a>
      <span class="keyword">try</span> <a href="#919706" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#919936" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="keyword">finally</span> <a href="#512095" title="TailCallElimination.this.type" class="keyword">this</a>.<a href="#919700" title="(x$1: TailCallElimination.this.Context)Unit">ctx</a> = <a href="#919940" title="TailCallElimination.this.Context">saved</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="919704">noTailTransform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="919947">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a> = <a href="#919703" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#919947" title="TailCalls.this.global.Tree">tree</a>, <a href="#919702" title="()TailCallElimination.this.Context">noTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]" id="919705">noTailTransforms</a><span class="delimiter">(</span><a title="List[TailCalls.this.global.Tree]" id="919953">trees</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="919956">nctx</a> = <a href="#919702" title="()TailCallElimination.this.Context">noTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#919953" title="List[TailCalls.this.global.Tree]">trees</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.Tree],TailCalls.this.global.Tree,List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Tree]">map</a> <span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="919973">t</a> =&gt; <a href="#919703" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#919973" title="TailCalls.this.global.Tree">t</a>, <a href="#919956" title="TailCallElimination.this.Context">nctx</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="919706">transform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="919941">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="comment">/** A possibly polymorphic apply to be considered for tail call transformation.
       */</span>
      <span class="keyword">def</span> <a title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree" id="920008">rewriteApply</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920009">target</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCalls.this.global.Tree" id="920010">fun</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a>, <a title="List[TailCalls.this.global.Tree]" id="920011">targs</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[TailCalls.this.global.Tree]" id="920012">args</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="TailCalls.this.global.Tree" id="920013">receiver</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a> = <a href="#920010" title="TailCalls.this.global.Tree">fun</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="TailCalls.this.global.Tree">Select</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920028">qual</a>, _<span class="delimiter">)</span>  =&gt; <a href="#920028" title="TailCalls.this.global.Tree">qual</a>
          <span class="keyword">case</span> <span title="TailCalls.this.global.EmptyTree.type">_</span>                =&gt; <a href="../../../reflect/generic/Trees.scala.html#434035" title="object TailCalls.this.global.EmptyTree">EmptyTree</a>
        <span class="delimiter">}</span>

        <span class="keyword">def</span> <a title="=&gt; Boolean" id="920014">receiverIsSame</a>    = <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919753" title="=&gt; TailCalls.this.global.Type">enclosingType</a>.<a href="../symtab/Types.scala.html#507163" title="=&gt; TailCalls.this.global.Type">widen</a> <a href="../symtab/Types.scala.html#507225" title="(that: TailCalls.this.global.Type)Boolean">=:=</a> <a href="#920013" title="TailCalls.this.global.Tree">receiver</a>.<a href="../../../reflect/generic/Trees.scala.html#441028" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507163" title="=&gt; TailCalls.this.global.Type">widen</a>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="920015">receiverIsSuper</a>   = <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919753" title="=&gt; TailCalls.this.global.Type">enclosingType</a>.<a href="../symtab/Types.scala.html#507163" title="=&gt; TailCalls.this.global.Type">widen</a> <a href="../symtab/Types.scala.html#507220" title="(that: TailCalls.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#920013" title="TailCalls.this.global.Tree">receiver</a>.<a href="../../../reflect/generic/Trees.scala.html#441028" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507163" title="=&gt; TailCalls.this.global.Type">widen</a>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="920016">isRecursiveCall</a>   = <span class="delimiter">(</span><a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#920010" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441032" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919740" title="=&gt; Boolean">tailPos</a>
        <span class="keyword">def</span> <a title="=&gt; List[TailCalls.this.global.Tree]" id="920017">transformArgs</a>     = <a href="#919705" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><a href="#920012" title="List[TailCalls.this.global.Tree]">args</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="920018">matchesTypeArgs</a>   = <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919737" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71058" title="(that: scala.collection.GenIterable[TailCalls.this.global.Symbol])Boolean">sameElements</a> <span class="delimiter">(</span><a href="#920011" title="List[TailCalls.this.global.Tree]">targs</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.Tree],TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol]])List[TailCalls.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#920065" title="TailCalls.this.global.Tree">_</a>.<a href="../../../reflect/generic/Trees.scala.html#441028" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; TailCalls.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">/** Records failure reason in Context for reporting.
         *  Position is unchanged (by default, the method definition.)
         */</span>
        <span class="keyword">def</span> <a title="(reason: String)TailCalls.this.global.Apply" id="920019">fail</a><span class="delimiter">(</span><a title="String" id="920096">reason</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469727" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Cannot rewrite recursive call at: &quot;)" class="string">&quot;Cannot rewrite recursive call at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#920010" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; because: &quot;)" class="string">&quot; because: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#920096" title="String">reason</a><span class="delimiter">)</span>

          <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919743" title="(x$1: java.lang.String)Unit">failReason</a> = <a href="#920096" title="String">reason</a>
          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560260" title="(tree: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>, <a href="#920009" title="TailCalls.this.global.Tree">target</a>, <a href="#920017" title="=&gt; List[TailCalls.this.global.Tree]">transformArgs</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="comment">/** Position of failure is that of the tree being considered.
         */</span>
        <span class="keyword">def</span> <a title="(reason: String)TailCalls.this.global.Apply" id="920020">failHere</a><span class="delimiter">(</span><a title="String" id="920103">reason</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919746" title="(x$1: TailCalls.this.global.Position)Unit">failPos</a> = <a href="#920010" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a>
          <a href="#920019" title="(reason: String)TailCalls.this.global.Apply">fail</a><span class="delimiter">(</span><a href="#920103" title="String">reason</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="(recv: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="920021">rewriteTailCall</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920104">recv</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="TailCalls.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
          <a href="../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Rewriting tail recursive method call at: &quot;)" class="string">&quot;Rewriting tail recursive method call at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#920010" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span>

          <a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919749" title="(x$1: Boolean)Unit">accessed</a> = <span title="Boolean(true)" class="keyword">true</span>
          <a href="../typechecker/Typers.scala.html#507769" title="(pos: TailCalls.this.global.analyzer.global.Position)(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#920010" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/generic/Trees.scala.html#443864" title="(fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479144" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a><span class="delimiter">)</span>, <a href="#920104" title="TailCalls.this.global.Tree">recv</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">::</a> <a href="#920017" title="=&gt; List[TailCalls.this.global.Tree]">transformArgs</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#919700" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#919755" title="=&gt; Boolean">isEligible</a><span class="delimiter">)</span>            <a href="#920019" title="(reason: String)TailCalls.this.global.Apply">fail</a><span class="delimiter">(</span><span title="java.lang.String(&quot;it is neither private nor final so can be overridden&quot;)" class="string">&quot;it is neither private nor final so can be overridden&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#920016" title="=&gt; Boolean">isRecursiveCall</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="TailCalls.this.global.Apply" class="keyword">if</span> <span class="delimiter">(</span><a href="#920015" title="=&gt; Boolean">receiverIsSuper</a><span class="delimiter">)</span>          <a href="#920020" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><span title="java.lang.String(&quot;it contains a recursive call targetting a supertype&quot;)" class="string">&quot;it contains a recursive call targetting a supertype&quot;</span><span class="delimiter">)</span>
          <span class="keyword">else</span>                          <a href="#920020" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><a href="#919696" title="=&gt; java.lang.String">defaultReason</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#920018" title="=&gt; Boolean">matchesTypeArgs</a><span class="delimiter">)</span>      <a href="#920020" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><span title="java.lang.String(&quot;it is called recursively with different type arguments&quot;)" class="string">&quot;it is called recursively with different type arguments&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#920013" title="TailCalls.this.global.Tree">receiver</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/generic/Trees.scala.html#434035" title="object TailCalls.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span> <a href="#920021" title="(recv: TailCalls.this.global.Tree)TailCalls.this.global.Tree">rewriteTailCall</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479142" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#560337" title="=&gt; TailCalls.this.global.Symbol">currentClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#478374" title="=&gt; Boolean">forMSIL</a><span class="delimiter">)</span>               <a href="#920019" title="(reason: String)TailCalls.this.global.Apply">fail</a><span class="delimiter">(</span><span title="java.lang.String(&quot;it cannot be optimized on MSIL&quot;)" class="string">&quot;it cannot be optimized on MSIL&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#920014" title="=&gt; Boolean">receiverIsSame</a><span class="delimiter">)</span>       <a href="#920020" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><span title="java.lang.String(&quot;it changes type of \'this\' on a polymorphic recursive call&quot;)" class="string">&quot;it changes type of 'this' on a polymorphic recursive call&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span>                            <a href="#920021" title="(recv: TailCalls.this.global.Tree)TailCalls.this.global.Tree">rewriteTailCall</a><span class="delimiter">(</span><a href="#920013" title="TailCalls.this.global.Tree">receiver</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#919941" title="TailCalls.this.global.Tree">tree</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="TailCalls.this.global.DefDef" id="920145">dd</a> @ DefDef<span class="delimiter">(</span><a title="TailCalls.this.global.Modifiers" id="920168">mods</a>, <a title="TailCalls.this.global.TermName" id="920169">name</a>, <a title="List[TailCalls.this.global.TypeDef]" id="920170">tparams</a>, <a title="List[List[TailCalls.this.global.ValDef]]" id="920171">vparams</a>, <a title="TailCalls.this.global.Tree" id="920172">tpt</a>, <a title="TailCalls.this.global.Tree" id="920173">rhs</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Entering DefDef: &quot;)" class="string">&quot;Entering DefDef: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#920169" title="TailCalls.this.global.TermName">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="920174">newCtx</a> = <a href="#919752" title="(dd: TailCalls.this.global.DefDef)TailCallElimination.this.Context" class="keyword">new</a> <a href="#919698" title="TailCallElimination.this.Context">Context</a><span class="delimiter">(</span><a href="#920145" title="TailCalls.this.global.DefDef">dd</a><span class="delimiter">)</span>

          <a href="../Global.scala.html#478254" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Considering &quot;)" class="string">&quot;Considering &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#920169" title="TailCalls.this.global.TermName">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; for tailcalls&quot;)" class="string">&quot; for tailcalls&quot;</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="TailCalls.this.global.Tree" id="920175">newRHS</a> = <a href="#919703" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#920173" title="TailCalls.this.global.Tree">rhs</a>, <a href="#920174" title="TailCallElimination.this.Context">newCtx</a><span class="delimiter">)</span>

          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560236" title="(tree: TailCalls.this.global.Tree, mods: TailCalls.this.global.Modifiers, name: TailCalls.this.global.Name, tparams: List[TailCalls.this.global.TypeDef], vparamss: List[List[TailCalls.this.global.ValDef]], tpt: TailCalls.this.global.Tree, rhs: TailCalls.this.global.Tree)TailCalls.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>, <a href="#920168" title="TailCalls.this.global.Modifiers">mods</a>, <a href="#920169" title="TailCalls.this.global.TermName">name</a>, <a href="#920170" title="List[TailCalls.this.global.TypeDef]">tparams</a>, <a href="#920171" title="List[List[TailCalls.this.global.ValDef]]">vparams</a>, <a href="#920172" title="TailCalls.this.global.Tree">tpt</a>, <span class="delimiter">{</span>
            <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919757" title="=&gt; Boolean">isTransformed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="comment">/** We have rewritten the tree, but there may be nested recursive calls remaining.
               *  If @tailrec is given we need to fail those now.
               */</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919756" title="=&gt; Boolean">isMandatory</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">for</span> <span class="delimiter">(</span><a title="TailCalls.this.global.Apply" id="920286">t</a> @ Apply<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920289">fn</a>, _<span class="delimiter">)</span> &lt;- <a href="../../../collection/generic/FilterMonadic.scala.html#53496" title="(f: TailCalls.this.global.Tree =&gt; Unit)Unit">newRHS</a> ; <span class="keyword">if</span> <a href="#920289" title="TailCalls.this.global.Tree">fn</a>.<a href="../../../reflect/generic/Trees.scala.html#441032" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919731" title="=&gt; TailCalls.this.global.Symbol">method</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919746" title="(x$1: TailCalls.this.global.Position)Unit">failPos</a> = <a href="#920286" title="TailCalls.this.global.Apply">t</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a>
                  <a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919758" title="()Unit">tailrecFailure</a><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
              <span class="keyword">val</span> <a title="TailCalls.this.global.TermSymbol" id="920191">newThis</a> = <a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919759" title="(pos: TailCalls.this.global.Position)TailCalls.this.global.TermSymbol">newThis</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="List[TailCalls.this.global.Symbol]" id="920192">vpSyms</a>  = <a href="#920171" title="List[List[TailCalls.this.global.ValDef]]">vparams</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#53804" title="(implicit asTraversable: List[TailCalls.this.global.ValDef] =&gt; scala.collection.TraversableOnce[TailCalls.this.global.ValDef])List[TailCalls.this.global.ValDef]">flatten</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: TailCalls.this.global.ValDef =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.ValDef],TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol]])List[TailCalls.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#920352" title="TailCalls.this.global.ValDef">_</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span>

              <a href="../typechecker/Typers.scala.html#507769" title="(pos: TailCalls.this.global.analyzer.global.Position)(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/generic/Trees.scala.html#443384" title="(stats: List[TailCalls.this.global.Tree], expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a><span class="delimiter">(</span>
                <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: TailCalls.this.global.ValDef*)List[TailCalls.this.global.ValDef]">List</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#479125" title="(sym: TailCalls.this.global.Symbol, rhs: TailCalls.this.global.Tree)TailCalls.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#920191" title="TailCalls.this.global.TermSymbol">newThis</a>, <a href="../ast/Trees.scala.html#479142" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#560337" title="=&gt; TailCalls.this.global.Symbol">currentClass</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <a href="../ast/Trees.scala.html#479136" title="(sym: TailCalls.this.global.Symbol, params: List[TailCalls.this.global.Symbol], rhs: TailCalls.this.global.Tree)TailCalls.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919734" title="=&gt; TailCalls.this.global.Symbol">label</a>, <a href="#920191" title="TailCalls.this.global.TermSymbol">newThis</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">::</a> <a href="#920192" title="List[TailCalls.this.global.Symbol]">vpSyms</a>, <a href="#920175" title="TailCalls.this.global.Tree">newRHS</a><span class="delimiter">)</span>
              <span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <span class="keyword">else</span> <span class="delimiter">{</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919756" title="=&gt; Boolean">isMandatory</a><span class="delimiter">)</span>
                <a href="#920174" title="TailCallElimination.this.Context">newCtx</a>.<a href="#919758" title="()Unit">tailrecFailure</a><span class="delimiter">(</span><span class="delimiter">)</span>

              <a href="#920175" title="TailCalls.this.global.Tree">newRHS</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.Block">Block</span><span class="delimiter">(</span><a title="List[TailCalls.this.global.Tree]" id="920473">stats</a>, <a title="TailCalls.this.global.Tree" id="920474">expr</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560242" title="(tree: TailCalls.this.global.Tree, stats: List[TailCalls.this.global.Tree], expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#919705" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><a href="#920473" title="List[TailCalls.this.global.Tree]">stats</a><span class="delimiter">)</span>,
            <a href="#919706" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#920474" title="TailCalls.this.global.Tree">expr</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.CaseDef">CaseDef</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920489">pat</a>, <a title="TailCalls.this.global.Tree" id="920490">guard</a>, <a title="TailCalls.this.global.Tree" id="920491">body</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560243" title="(tree: TailCalls.this.global.Tree, pat: TailCalls.this.global.Tree, guard: TailCalls.this.global.Tree, body: TailCalls.this.global.Tree)TailCalls.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#920489" title="TailCalls.this.global.Tree">pat</a>,
            <a href="#920490" title="TailCalls.this.global.Tree">guard</a>,
            <a href="#919706" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#920491" title="TailCalls.this.global.Tree">body</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.If">If</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920503">cond</a>, <a title="TailCalls.this.global.Tree" id="920504">thenp</a>, <a title="TailCalls.this.global.Tree" id="920505">elsep</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560252" title="(tree: TailCalls.this.global.Tree, cond: TailCalls.this.global.Tree, thenp: TailCalls.this.global.Tree, elsep: TailCalls.this.global.Tree)TailCalls.this.global.If">If</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#920503" title="TailCalls.this.global.Tree">cond</a>,
            <a href="#919706" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#920504" title="TailCalls.this.global.Tree">thenp</a><span class="delimiter">)</span>,
            <a href="#919706" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#920505" title="TailCalls.this.global.Tree">elsep</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.Match">Match</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920520">selector</a>, <a title="List[TailCalls.this.global.CaseDef]" id="920521">cases</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560253" title="(tree: TailCalls.this.global.Tree, selector: TailCalls.this.global.Tree, cases: List[TailCalls.this.global.CaseDef])TailCalls.this.global.Match">Match</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#919704" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#920520" title="TailCalls.this.global.Tree">selector</a><span class="delimiter">)</span>,
            <a href="../ast/Trees.scala.html#560340" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#920521" title="List[TailCalls.this.global.CaseDef]">cases</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]" class="delimiter">[</span><a href="../../../collection/immutable/List.scala.html#14047" title="List[TailCalls.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>
          <span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.Try">Try</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920529">block</a>, <a title="List[TailCalls.this.global.CaseDef]" id="920530">catches</a>, <a title="TailCalls.this.global.Tree" id="920531">finalizer</a><span class="delimiter">)</span> =&gt;
           <span class="comment">// no calls inside a try are in tail position, but keep recursing for nested functions</span>
          <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560255" title="(tree: TailCalls.this.global.Tree, block: TailCalls.this.global.Tree, catches: List[TailCalls.this.global.CaseDef], finalizer: TailCalls.this.global.Tree)TailCalls.this.global.Try">Try</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#919704" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#920529" title="TailCalls.this.global.Tree">block</a><span class="delimiter">)</span>,
            <a href="#919705" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><a href="#920530" title="List[TailCalls.this.global.CaseDef]">catches</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]" class="delimiter">[</span><a href="../../../collection/immutable/List.scala.html#14047" title="List[TailCalls.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>,
            <a href="#919704" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#920531" title="TailCalls.this.global.Tree">finalizer</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="TailCalls.this.global.TypeApply" id="920538">tapply</a> @ TypeApply<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920541">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="920542">targs</a><span class="delimiter">)</span>, <a title="List[TailCalls.this.global.Tree]" id="920543">vargs</a><span class="delimiter">)</span> =&gt;
          <a href="#920008" title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteApply</a><span class="delimiter">(</span><a href="#920538" title="TailCalls.this.global.TypeApply">tapply</a>, <a href="#920541" title="TailCalls.this.global.Tree">fun</a>, <a href="#920542" title="List[TailCalls.this.global.Tree]">targs</a>, <a href="#920543" title="List[TailCalls.this.global.Tree]">vargs</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="TailCalls.this.global.Tree">Apply</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="920546">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="920547">args</a><span class="delimiter">)</span> =&gt;
          <span title="TailCalls.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#920546" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441032" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#508442" title="=&gt; TailCalls.this.global.Symbol">Boolean_or</a> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#920546" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/generic/Trees.scala.html#441032" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../symtab/Definitions.scala.html#508441" title="=&gt; TailCalls.this.global.Symbol">Boolean_and</a><span class="delimiter">)</span>
            <a href="../ast/Trees.scala.html#560331" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560260" title="(tree: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a>, <a href="#920546" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#560340" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#920547" title="List[TailCalls.this.global.Tree]">args</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#920008" title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteApply</a><span class="delimiter">(</span><a href="#920546" title="TailCalls.this.global.Tree">fun</a>, <a href="#920546" title="TailCalls.this.global.Tree">fun</a>, <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a>, <a href="#920547" title="List[TailCalls.this.global.Tree]">args</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="Nothing">Alternative</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | Star<span class="delimiter">(</span>_<span class="delimiter">)</span> | Bind<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          sys.<a href="../../../sys/package.scala.html#48163" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;We should\'ve never gotten inside a pattern&quot;)" class="string">&quot;We should've never gotten inside a pattern&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../reflect/generic/Trees.scala.html#434035" title="TailCalls.this.global.Tree">EmptyTree</a> | Super<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | This<span class="delimiter">(</span>_<span class="delimiter">)</span> | Select<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> | Literal<span class="delimiter">(</span>_<span class="delimiter">)</span> | Function<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
          <a href="#919941" title="TailCalls.this.global.Tree">tree</a>
        <span class="keyword">case</span> <span title="TailCalls.this.global.Tree">_</span> =&gt;
          <a href="#512095" title="TailCalls.this.TailCallElimination" class="keyword">super</a>.<a href="../ast/Trees.scala.html#560339" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#919941" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>