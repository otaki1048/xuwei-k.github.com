<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/util/ScalaClassLoader.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Paul Phillips
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">import</span> java.lang.<span class="delimiter">{</span> ClassLoader =&gt; JavaClassLoader <span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.reflect.<span class="delimiter">{</span> Constructor, Modifier, Method <span class="delimiter">}</span>
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> <a href="#43109" title="object scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a>._
<span class="keyword">import</span> scala.util.control.<a href="../../../util/control/Exception.scala.html#44519" title="object scala.util.control.Exception">Exception</a>.<span class="delimiter">{</span> catching <span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait ScalaClassLoader extends java.lang.ClassLoader with ScalaObject" id="43108">ScalaClassLoader</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <span title="java.lang.ClassLoader">JavaClassLoader</span> <span class="delimiter">{</span>
  <span class="comment">/** Override to see classloader activity traced */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="484620">trace</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/** Executing an action with this classloader as context classloader */</span>
  <span class="keyword">def</span> <a title="[T](action: =&gt; T)T" id="484621">asContext</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="484623">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="995655">action</a>: =&gt; T<span class="delimiter">)</span>: <a href="#484623" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.ClassLoader" id="995658">oldLoader</a> = <a href="#484509" title="()java.lang.ClassLoader">getContextLoader</a>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#484508" title="(cl: java.lang.ClassLoader)Unit">setContextLoader</a><span class="delimiter">(</span><a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#995655" title="=&gt; T">action</a>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <a href="#484508" title="(cl: java.lang.ClassLoader)Unit">setContextLoader</a><span class="delimiter">(</span><a href="#995658" title="java.lang.ClassLoader">oldLoader</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="484624">setAsContext</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#484508" title="(cl: java.lang.ClassLoader)Unit">setContextLoader</a><span class="delimiter">(</span><a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader" class="keyword">this</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="comment">/** Load and link a class with this classloader */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](path: String)Option[Class[T]]" id="484625">tryToLoadClass</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="484627">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="729224">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[Class[T]]">Option</a><span class="delimiter">[</span>Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#484631" title="(path: String, initialize: Boolean)Option[Class[T]]">tryClass</a><span class="delimiter">(</span><a href="#729224" title="String">path</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="comment">/** Load, link and initialize a class with this classloader */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](path: String)Option[Class[T]]" id="484628">tryToInitializeClass</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="484630">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="995668">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[Class[T]]">Option</a><span class="delimiter">[</span>Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#484631" title="(path: String, initialize: Boolean)Option[Class[T]]">tryClass</a><span class="delimiter">(</span><a href="#995668" title="String">path</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](path: String, initialize: Boolean)Option[Class[T]]" id="484631">tryClass</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="484633">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="995664">path</a>: <span title="String">String</span>, <a title="Boolean" id="995665">initialize</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[Class[T]]">Option</a><span class="delimiter">[</span>Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../util/control/Exception.scala.html#415015" title="(exceptions: Class[_]*)util.control.Exception.Catch[Nothing]">catching</a><span class="delimiter">(</span>classOf<span title="java.lang.Class[java.lang.ClassNotFoundException](classOf[java.lang.ClassNotFoundException])" class="delimiter">[</span>ClassNotFoundException<span class="delimiter">]</span>, classOf<span title="java.lang.Class[java.lang.SecurityException](classOf[java.lang.SecurityException])" class="delimiter">[</span>SecurityException<span class="delimiter">]</span><span class="delimiter">)</span> <a href="../../../util/control/Exception.scala.html#415084" title="(body: =&gt; Class[T])Option[Class[T]]">opt</a>
      <span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#995664" title="String">path</a>, <a href="#995665" title="Boolean">initialize</a>, <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader" class="keyword">this</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/** Create an instance of a class with this classloader */</span>
  <span class="keyword">def</span> <a title="(path: String)AnyRef" id="484634">create</a><span class="delimiter">(</span><a title="String" id="484643">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> =
    <a href="#484628" title="[T &lt;: AnyRef](path: String)Option[Class[T]]">tryToInitializeClass</a><span title="(path: String)Option[Class[AnyRef]]" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#484643" title="String">path</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48480" title="(f: Class[AnyRef] =&gt; AnyRef)Option[AnyRef]">map</a> <span class="delimiter">(</span><a href="#995710" title="Class[AnyRef]">_</a>.<span title="()AnyRef">newInstance</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48477" title="(implicit ev: &lt;:&lt;[Null,AnyRef])AnyRef">orNull</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)java.lang.Class[_]" id="484635">findClass</a><span class="delimiter">(</span><a title="String" id="728679">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.Class[_]" id="728682">result</a> = <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader" class="keyword">super</a>.<span title="(x$1: java.lang.String)java.lang.Class[_]">findClass</span><span class="delimiter">(</span><a href="#728679" title="String">name</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#484620" title="=&gt; Boolean">trace</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;findClass(%s) = %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#728679" title="String">name</a>, <a href="#728682" title="java.lang.Class[_]">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#728682" title="java.lang.Class[_]">result</a>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String, resolve: Boolean)java.lang.Class[_]" id="484636">loadClass</a><span class="delimiter">(</span><a title="String" id="742710">name</a>: <span title="String">String</span>, <a title="Boolean" id="742711">resolve</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.Class[_]" id="742716">result</a> = <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader" class="keyword">super</a>.<span title="(x$1: java.lang.String, x$2: Boolean)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#742710" title="String">name</a>, <a href="#742711" title="Boolean">resolve</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#484620" title="=&gt; Boolean">trace</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;loadClass(%s, %s) = %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#742710" title="String">name</a>, <a href="#742711" title="Boolean">resolve</a>, <a href="#742716" title="java.lang.Class[_]">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#742716" title="java.lang.Class[_]">result</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](implicit evidence$1: Manifest[T])List[java.lang.reflect.Constructor[T]]" id="995719">constructorsOf</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="484639">T</a> &lt;: AnyRef : Manifest<span class="delimiter">]</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[java.lang.reflect.Constructor[T]]">List</a><span class="delimiter">[</span>Constructor<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../Predef.scala.html#9541" title="[T](implicit m: Manifest[T])Manifest[T]">manifest</a><a href="#995719" title="(implicit m: Manifest[T])Manifest[T]" class="delimiter">[</a><a href="#484639" title="T">T</a><span class="delimiter">]</span>.<a href="../../../reflect/ClassManifest.scala.html#57004" title="=&gt; java.lang.Class[_]">erasure</a>.<a href="../../../Predef.scala.html#9626" title="(xs: Array[java.lang.reflect.Constructor[_]])scala.collection.mutable.ArrayOps[java.lang.reflect.Constructor[_]]">getConstructors</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[java.lang.reflect.Constructor[_]]">toList</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: java.lang.reflect.Constructor[_] =&gt; java.lang.reflect.Constructor[T])(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.reflect.Constructor[_]],java.lang.reflect.Constructor[T],List[java.lang.reflect.Constructor[T]]])List[java.lang.reflect.Constructor[T]]">map</a> <span class="delimiter">(</span><a href="#995887" title="java.lang.reflect.Constructor[_]">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.reflect.Constructor[T]" class="delimiter">[</span><span title="java.lang.reflect.Constructor[T]">Constructor</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/** The actual bytes for a class file, or an empty array if it can't be found. */</span>
  <span class="keyword">def</span> <a title="(className: String)Array[Byte]" id="484640">classBytes</a><span class="delimiter">(</span><a title="String" id="728671">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Array.scala.html#1430" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="#484641" title="(className: String)java.io.InputStream">classAsStream</a><span class="delimiter">(</span><a href="#728671" title="String">className</a><span class="delimiter">)</span> <span title="Array[Byte]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Array[Byte]" class="keyword">null</span>   =&gt; <a href="../../../Array.scala.html#62681" title="(xs: Byte*)(implicit evidence$2: scala.reflect.ClassManifest[Byte])Array[Byte]">Array</a><a href="../../../reflect/Manifest.scala.html#56860" title="=&gt; scala.reflect.AnyValManifest[Byte]" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Array[Byte]" id="995968">stream</a> =&gt; io.<a href="../io/Streamable.scala.html#33442" title="object scala.tools.nsc.io.Streamable">Streamable</a>.<a href="../io/Streamable.scala.html#481512" title="(is: =&gt; java.io.InputStream)Array[Byte]">bytes</a><span class="delimiter">(</span><a href="#995968" title="java.io.InputStream">stream</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** An InputStream representing the given class name, or null if not found. */</span>
  <span class="keyword">def</span> <a title="(className: String)java.io.InputStream" id="484641">classAsStream</a><span class="delimiter">(</span><a title="String" id="995947">className</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#43108" title="(x$1: java.lang.String)java.io.InputStream">getResourceAsStream</a><span class="delimiter">(</span><a href="#995947" title="String">className</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\.&quot;)" class="string">&quot;&quot;&quot;\.&quot;&quot;&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** Run the main method of a class to be loaded by this classloader */</span>
  <span class="keyword">def</span> <a title="(objectName: String, arguments: Seq[String])Unit" id="484642">run</a><span class="delimiter">(</span><a title="String" id="525957">objectName</a>: <span title="String">String</span>, <a title="Seq[String]" id="525958">arguments</a>: <a href="../../../collection/Seq.scala.html#8648" title="Seq[String]">Seq</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[Nothing]" id="995969">clsToRun</a> = <a href="#484628" title="(path: String)Option[Class[Nothing]]">tryToInitializeClass</a><span class="delimiter">(</span><a href="#525957" title="String">objectName</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; Class[Nothing])Class[Nothing]">getOrElse</a> <span class="delimiter">(</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.ClassNotFoundException" class="keyword">new</span> <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span><span class="delimiter">(</span><a href="#525957" title="String">objectName</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="995970">method</a> = <a href="#995969" title="Class[Nothing]">clsToRun</a>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="java.lang.String(&quot;main&quot;)" class="string">&quot;main&quot;</span>, classOf<span title="java.lang.Class[Array[String]](classOf[[Ljava.lang.String;])" class="delimiter">[</span>Array<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><span title="object java.lang.reflect.Modifier">Modifier</span>.<span title="(x$1: Int)Boolean">isStatic</span><span class="delimiter">(</span><a href="#995970" title="java.lang.reflect.Method">method</a>.<span title="()Int">getModifiers</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NoSuchMethodException" class="keyword">new</span> <span title="java.lang.NoSuchMethodException">NoSuchMethodException</span><span class="delimiter">(</span><a href="#525957" title="String">objectName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.main is not static&quot;)" class="string">&quot;.main is not static&quot;</span><span class="delimiter">)</span>

    <a href="#484621" title="(action: =&gt; java.lang.Object)java.lang.Object">asContext</a><span title="Unit" class="delimiter">(</span><a href="#995970" title="java.lang.reflect.Method">method</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="../../../Array.scala.html#62681" title="(xs: AnyRef*)(implicit evidence$2: scala.reflect.ClassManifest[AnyRef])Array[AnyRef]">Array</a><a href="../../../reflect/Manifest.scala.html#56880" title="=&gt; scala.reflect.Manifest[java.lang.Object]" class="delimiter">(</a><a href="#525958" title="Seq[String]">arguments</a>.<a href="../../../collection/TraversableOnce.scala.html#53687" title="(implicit evidence$1: ClassManifest[String])Array[String]">toArray</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span><span class="delimiter">)</span>  <span class="comment">// !!! : AnyRef shouldn't be necessary</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scala.tools.nsc.util.ScalaClassLoader" id="43109">ScalaClassLoader</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.util.ScalaClassLoader.apply : (cl: java.lang.ClassLoader)scala.tools.nsc.util.ScalaClassLoader" id="484506">apply</a><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="728694">cl</a>: <span title="java.lang.ClassLoader">JavaClassLoader</span><span class="delimiter">)</span>: <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.ClassLoader" id="996077">loader</a> = <span title="java.lang.ClassLoader" class="keyword">if</span> <span class="delimiter">(</span><a href="#728694" title="java.lang.ClassLoader">cl</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="object java.lang.ClassLoader">JavaClassLoader</span>.<span title="()java.lang.ClassLoader">getSystemClassLoader</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#728694" title="java.lang.ClassLoader">cl</a>
    <a href="#996082" title="java.lang.ClassLoader with scala.tools.nsc.util.ScalaClassLoader" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.ClassLoader with scala.tools.nsc.util.ScalaClassLoader" id="996082">JavaClassLoader</a><span class="delimiter">(</span><a href="#996077" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class URLClassLoader extends java.net.URLClassLoader with scala.tools.nsc.util.ScalaClassLoader with ScalaObject" id="484507">URLClassLoader</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="Seq[java.net.URL]" id="742706">urls</a>: <a href="../../../collection/Seq.scala.html#8648" title="Seq[java.net.URL]">Seq</a><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="742707">parent</a>: <span title="java.lang.ClassLoader">JavaClassLoader</span><span class="delimiter">)</span>
      <span class="keyword">extends</span> java.net.<span title="java.net.URLClassLoader">URLClassLoader</span><span class="delimiter">(</span><a href="#742706" title="Seq[java.net.URL]">urls</a>.<a href="../../../collection/TraversableOnce.scala.html#53687" title="(implicit evidence$1: ClassManifest[java.net.URL])Array[java.net.URL]">toArray</a>, <a href="#742707" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
      <span class="keyword">with</span> <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a> <span class="delimiter">{</span>

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[java.net.URL]" id="484585">classloaderURLs</a> = <a href="#742706" title="Seq[java.net.URL]">urls</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[java.net.URL]">toList</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; String" id="484587">classpathString</a> = <a href="ClassPath.scala.html#42944" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="ClassPath.scala.html#481066" title="(urls: java.net.URL*)String">fromURLs</a><span class="delimiter">(</span><a href="#742706" title="Seq[java.net.URL]">urls</a>: _*<span class="delimiter">)</span>

    <span class="comment">/** Override to widen to public */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(url: java.net.URL)Unit" id="484588">addURL</a><span class="delimiter">(</span><a title="java.net.URL" id="996116">url</a>: <span title="java.net.URL">URL</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#484585" title="(x$1: List[java.net.URL])Unit">classloaderURLs</a> <a href="../../../collection/immutable/List.scala.html#49157" title="(elem: java.net.URL)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.net.URL],java.net.URL,List[java.net.URL]])List[java.net.URL]">+:=</a> <a href="#996116" title="java.net.URL">url</a>
      <a href="#484507" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" class="keyword">super</a>.<span title="(x$1: java.net.URL)Unit">addURL</span><span class="delimiter">(</span><a href="#996116" title="java.net.URL">url</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(objectName: String, arguments: Seq[String])Unit" id="484589">run</a><span class="delimiter">(</span><a title="String" id="525954">objectName</a>: <span title="String">String</span>, <a title="Seq[String]" id="525955">arguments</a>: <a href="../../../collection/Seq.scala.html#8648" title="Seq[String]">Seq</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">try</span> <a href="#484507" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" class="keyword">super</a>.<a href="#484642" title="(objectName: String, arguments: Seq[String])Unit">run</a><span class="delimiter">(</span><a href="#525954" title="String">objectName</a>, <a href="#525955" title="Seq[String]">arguments</a><span class="delimiter">)</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Nothing" id="996182">x</a>: <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span>  =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.ClassNotFoundException" class="keyword">new</span> <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span><span class="delimiter">(</span><a href="#525954" title="String">objectName</a> <span title="(x$1: Any)java.lang.String">+</span>
          <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; (args = %s, classpath = %s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#525955" title="Seq[String]">arguments</a> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <a href="#484587" title="=&gt; String">classpathString</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="484590">toString</a> = <a href="#742706" title="Seq[java.net.URL]">urls</a>.<a href="../../../collection/TraversableOnce.scala.html#53708" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;URLClassLoader(\012  &quot;)" class="string">&quot;URLClassLoader(\n  &quot;</span>, <span title="java.lang.String(&quot;\012  &quot;)" class="string">&quot;\n  &quot;</span>, <span title="java.lang.String(&quot;\012)\012&quot;)" class="string">&quot;\n)\n&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(cl: java.lang.ClassLoader)Unit" id="484508">setContextLoader</a><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="995661">cl</a>: <span title="java.lang.ClassLoader">JavaClassLoader</span><span class="delimiter">)</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(x$1: java.lang.ClassLoader)Unit">setContextClassLoader</span><span class="delimiter">(</span><a href="#995661" title="java.lang.ClassLoader">cl</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.lang.ClassLoader" id="484509">getContextLoader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()scala.tools.nsc.util.ScalaClassLoader" id="484510">getSystemLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#43108" title="scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a> = <a href="#484506" title="implicit scala.tools.nsc.util.ScalaClassLoader.apply : (cl: java.lang.ClassLoader)scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.lang.ClassLoader" id="484511">defaultParentClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#484514" title="()java.lang.ClassLoader">findExtClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(urls: Seq[java.net.URL], parent: java.lang.ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" id="484512">fromURLs</a><span class="delimiter">(</span><a title="Seq[java.net.URL]" id="484517">urls</a>: <a href="../../../collection/Seq.scala.html#8648" title="Seq[java.net.URL]">Seq</a><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="484520">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#484511" title="()java.lang.ClassLoader">defaultParentClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <a href="#484507" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">URLClassLoader</a> =
    <span title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" class="keyword">new</span> <a href="#484507" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">URLClassLoader</a><span class="delimiter">(</span><a href="#484517" title="Seq[java.net.URL]">urls</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[java.net.URL]">toList</a>, <a href="#484520" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>

  <span class="comment">/** True if supplied class exists in supplied path */</span>
  <span class="keyword">def</span> <a title="(urls: Seq[java.net.URL], name: String)Boolean" id="484513">classExists</a><span class="delimiter">(</span><a title="Seq[java.net.URL]" id="505637">urls</a>: <a href="../../../collection/Seq.scala.html#8648" title="Seq[java.net.URL]">Seq</a><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="String" id="505638">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> =
    <span class="delimiter">(</span><a href="#484512" title="(urls: Seq[java.net.URL], parent: java.lang.ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a><span class="delimiter">(</span><a href="#505637" title="Seq[java.net.URL]">urls</a><span class="delimiter">)</span> <a href="#484625" title="(path: String)Option[Class[Nothing]]">tryToLoadClass</a> <a href="#505638" title="String">name</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#48472" title="=&gt; Boolean">isDefined</a>

  <span class="comment">// we cannot use the app classloader here or we get what looks to</span>
  <span class="comment">// be classloader deadlock, but if we pass null we bypass the extension</span>
  <span class="comment">// classloader and our extensions, so we search the hierarchy to find</span>
  <span class="comment">// the classloader whose parent is null.  Resolves bug #857.</span>
  <span class="keyword">def</span> <a title="()java.lang.ClassLoader" id="484514">findExtClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.lang.ClassLoader">JavaClassLoader</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(cl: java.lang.ClassLoader)java.lang.ClassLoader" id="996199">search</a><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="996200">cl</a>: <span title="java.lang.ClassLoader">JavaClassLoader</span><span class="delimiter">)</span>: <span title="java.lang.ClassLoader">JavaClassLoader</span> = <span class="delimiter">{</span>
      <span title="java.lang.ClassLoader" class="keyword">if</span> <span class="delimiter">(</span><a href="#996200" title="java.lang.ClassLoader">cl</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="java.lang.ClassLoader" class="keyword">if</span> <span class="delimiter">(</span><a href="#996200" title="java.lang.ClassLoader">cl</a>.<span title="()java.lang.ClassLoader">getParent</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#996200" title="java.lang.ClassLoader">cl</a>
      <span class="keyword">else</span> <a href="#996199" title="(cl: java.lang.ClassLoader)java.lang.ClassLoader">search</a><span class="delimiter">(</span><a href="#996200" title="java.lang.ClassLoader">cl</a>.<span title="()java.lang.ClassLoader">getParent</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#996199" title="(cl: java.lang.ClassLoader)java.lang.ClassLoader">search</a><span class="delimiter">(</span><a href="#484509" title="()java.lang.ClassLoader">getContextLoader</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Finding what jar a clazz or instance came from */</span>
  <span class="keyword">def</span> <a title="(x: Any)Option[java.net.URL]" id="484515">origin</a><span class="delimiter">(</span><a title="Any" id="996210">x</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[java.net.URL]">Option</a><span class="delimiter">[</span>URL<span class="delimiter">]</span> = <a href="#484516" title="(x: Class[_])Option[java.net.URL]">originOfClass</a><span class="delimiter">(</span><a href="#996210" title="Any">x</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Class[_])Option[java.net.URL]" id="484516">originOfClass</a><span class="delimiter">(</span><a title="Class[_]" id="486043">x</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[java.net.URL]">Option</a><span class="delimiter">[</span>URL<span class="delimiter">]</span> =
    <a href="../../../Option.scala.html#80649" title="(x: java.security.CodeSource)Option[java.security.CodeSource]">Option</a><span class="delimiter">(</span><a href="#486043" title="Class[_]">x</a>.<span title="()java.security.ProtectionDomain">getProtectionDomain</span>.<span title="()java.security.CodeSource">getCodeSource</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48483" title="(f: java.security.CodeSource =&gt; Option[java.net.URL])Option[java.net.URL]">flatMap</a> <span class="delimiter">(</span><a title="java.security.CodeSource" id="996224">x</a> =&gt; <a href="../../../Option.scala.html#80649" title="(x: java.net.URL)Option[java.net.URL]">Option</a><span class="delimiter">(</span><a href="#996224" title="java.security.CodeSource">x</a>.<span title="()java.net.URL">getLocation</span><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>