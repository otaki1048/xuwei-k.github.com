<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/typechecker/EtaExpansion.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.<a href="../symtab/Flags.scala.html#36139" title="object scala.tools.nsc.symtab.Flags">Flags</a>._

<span class="comment">/** This trait ...
 *
 *  @author  Martin Odersky
 *  @version 1.0
 */</span>
<span class="keyword">trait</span> <a title="trait EtaExpansion extends java.lang.Object with ScalaObject" id="41371">EtaExpansion</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a> self: Analyzer =&gt;

  <span class="keyword">import</span> <a href="Analyzer.scala.html#507332" title="=&gt; scala.tools.nsc.Global">global</a>._

  <span class="keyword">object</span> <a title="object EtaExpansion.this.etaExpansion" id="507534">etaExpansion</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(vparam: EtaExpansion.this.global.ValDef, arg: EtaExpansion.this.global.Tree)Boolean" id="927898">isMatch</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.ValDef" id="927901">vparam</a>: <a href="../../../reflect/generic/Trees.scala.html#434049" title="EtaExpansion.this.global.ValDef">ValDef</a>, <a title="EtaExpansion.this.global.Tree" id="927902">arg</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#927902" title="EtaExpansion.this.global.Tree">arg</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Boolean">Ident</span><span class="delimiter">(</span><a title="EtaExpansion.this.global.Name" id="927909">name</a><span class="delimiter">)</span>  =&gt; <a href="#927901" title="EtaExpansion.this.global.ValDef">vparam</a>.<a href="../../../reflect/generic/Trees.scala.html#441944" title="=&gt; EtaExpansion.this.global.TermName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#927909" title="EtaExpansion.this.global.Name">name</a>
      <span class="keyword">case</span> <span title="Boolean(false)">_</span>            =&gt; <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree)Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" id="927899">unapply</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="927914">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>List<span class="delimiter">[</span>ValDef<span class="delimiter">]</span>, Tree, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#927914" title="EtaExpansion.this.global.Tree">tree</a> <span title="Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Some[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]">Function</span><span class="delimiter">(</span><a title="List[EtaExpansion.this.global.ValDef]" id="927918">vparams</a>, Apply<span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="927921">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="927922">args</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#927918" title="List[EtaExpansion.this.global.ValDef]">vparams</a> <a href="../../../collection/SeqLike.scala.html#54171" title="(that: scala.collection.GenSeq[EtaExpansion.this.global.Tree])(p: (EtaExpansion.this.global.ValDef, EtaExpansion.this.global.Tree) =&gt; Boolean)Boolean">corresponds</a> <a href="#927922" title="List[EtaExpansion.this.global.Tree]">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#927898" title="(vparam: EtaExpansion.this.global.ValDef, arg: EtaExpansion.this.global.Tree)Boolean">isMatch</a><span class="delimiter">)</span> =&gt;
        <a href="../../../Option.scala.html#57885" title="(x: (List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree]))Some[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]">Some</a><span class="delimiter">(</span><a href="../../../Tuple3.scala.html#53296" title="(_1: List[EtaExpansion.this.global.ValDef], _2: EtaExpansion.this.global.Tree, _3: List[EtaExpansion.this.global.Tree])(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])" class="delimiter">(</a><a href="#927918" title="List[EtaExpansion.this.global.ValDef]">vparams</a>, <a href="#927921" title="EtaExpansion.this.global.Tree">fn</a>, <a href="#927922" title="List[EtaExpansion.this.global.Tree]">args</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">_</span> =&gt;
        <a href="../../../Option.scala.html#1737" title="object None">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** &lt;p&gt;
   *    Expand partial function applications of type &lt;code&gt;type&lt;/code&gt;.
   *  &lt;/p&gt;&lt;pre&gt;
   *  p.f(es_1)...(es_n)
   *     ==&gt;  {
   *            &lt;b&gt;private synthetic val&lt;/b&gt; eta$f   = p.f   // if p is not stable
   *            ...
   *            &lt;b&gt;private synthetic val&lt;/b&gt; eta$e_i = e_i    // if e_i is not stable
   *            ...
   *            (ps_1 =&gt; ... =&gt; ps_m =&gt; eta$f([es_1])...([es_m])(ps_1)...(ps_m))
   *          }&lt;/pre&gt;
   *  &lt;p&gt;
   *    tree is already attributed
   *  &lt;/p&gt;
   */</span>
  <span class="keyword">def</span> <a title="(unit: EtaExpansion.this.global.CompilationUnit, tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="507536">etaExpand</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.CompilationUnit" id="927960">unit</a> : <a href="../CompilationUnits.scala.html#479284" title="EtaExpansion.this.global.CompilationUnit">CompilationUnit</a>, <a title="EtaExpansion.this.global.Tree" id="927961">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="EtaExpansion.this.global.Type" id="927963">tpe</a> = <a href="#927961" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441028" title="=&gt; EtaExpansion.this.global.Type">tpe</a>
    <span class="keyword">var</span> <a title="Int" id="927964">cnt</a> = <span title="Int(0)" class="int">0</span> <span class="comment">// for NoPosition</span>
    <span class="keyword">def</span> <a title="()EtaExpansion.this.global.TermName" id="927965">freshName</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#927964" title="Int">cnt</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="#927960" title="EtaExpansion.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#500956" title="(prefix: String)EtaExpansion.this.global.TermName">freshTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;eta$&quot;)" class="string">&quot;eta$&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#927964" title="Int">cnt</a> <a href="../../../Int.scala.html#54811" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]" id="927966">defs</a> = <span title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]" class="keyword">new</span> <a href="../../../collection/mutable/ListBuffer.scala.html#15373" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">ListBuffer</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

    <span class="comment">/** Append to &lt;code&gt;defs&lt;/code&gt; value definitions for all non-stable
     *  subexpressions of the function application &lt;code&gt;tree&lt;/code&gt;.
     *
     *  @param tree ...
     *  @return     ...
     */</span>
    <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="927967">liftoutPrefix</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="927982">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="927983">liftout</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="927985">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a> =
        <span title="EtaExpansion.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../ast/Trees.scala.html#479115" title="object EtaExpansion.this.global.treeInfo">treeInfo</a>.<a href="../ast/TreeInfo.scala.html#551034" title="(tree: EtaExpansion.this.global.treeInfo.trees.Tree)Boolean">isPureExpr</a><span class="delimiter">(</span><a href="#927985" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#927985" title="EtaExpansion.this.global.Tree">tree</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="EtaExpansion.this.global.Name" id="927987">vname</a>: <a href="../symtab/Names.scala.html#478413" title="EtaExpansion.this.global.Name">Name</a> = <a href="#927965" title="()EtaExpansion.this.global.TermName">freshName</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="comment">// Problem with ticket #2351 here</span>
          <a href="#927966" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a> <a href="../../../collection/mutable/ListBuffer.scala.html#61786" title="(x: EtaExpansion.this.global.Tree)defs.type">+=</a> <a href="../ast/Trees.scala.html#479182" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.ValDef)EtaExpansion.this.global.ValDef">atPos</a><span class="delimiter">(</span><a href="#927985" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; EtaExpansion.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../reflect/generic/Trees.scala.html#441937" title="(mods: EtaExpansion.this.global.Modifiers, name: EtaExpansion.this.global.TermName, tpt: EtaExpansion.this.global.Tree, rhs: EtaExpansion.this.global.Tree)EtaExpansion.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="../../../reflect/generic/Trees.scala.html#434025" title="(flags: Long)EtaExpansion.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span>, <a href="#927987" title="EtaExpansion.this.global.Name">vname</a>.<a href="../symtab/Names.scala.html#501117" title="=&gt; EtaExpansion.this.global.TermName">toTermName</a>, <a href="../ast/Trees.scala.html#534779" title="()EtaExpansion.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#927985" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../reflect/generic/Trees.scala.html#443999" title="(name: EtaExpansion.this.global.Name)EtaExpansion.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#927987" title="EtaExpansion.this.global.Name">vname</a><span class="delimiter">)</span> <a href="../../../reflect/generic/Trees.scala.html#441026" title="(pos: scala.tools.nsc.util.Position)EtaExpansion.this.global.Ident">setPos</a> <a href="#927985" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; EtaExpansion.this.global.Position">pos</a>.<a href="../util/Position.scala.html#501506" title="=&gt; scala.tools.nsc.util.Position">focus</a>
        <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="EtaExpansion.this.global.Tree" id="927984">tree1</a> = <a href="#927982" title="EtaExpansion.this.global.Tree">tree</a> <span title="EtaExpansion.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="comment">// a partial application using named arguments has the following form:</span>
        <span class="comment">// { val qual$1 = qual</span>
        <span class="comment">//   val x$1 = arg1</span>
        <span class="comment">//   [...]</span>
        <span class="comment">//   val x$n = argn</span>
        <span class="comment">//   qual$1.fun(x$1, ..)..(.., x$n) }</span>
        <span class="comment">// Eta-expansion has to be performed on `fun'</span>
        <span class="keyword">case</span> <span title="EtaExpansion.this.global.Tree">Block</span><span class="delimiter">(</span><a title="List[EtaExpansion.this.global.Tree]" id="928067">stats</a>, <a title="EtaExpansion.this.global.Tree" id="928068">fun</a><span class="delimiter">)</span> =&gt;
          <a href="#927966" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a> <a href="../../../collection/mutable/ListBuffer.scala.html#61787" title="(xs: scala.collection.TraversableOnce[EtaExpansion.this.global.Tree])defs.type">++=</a> <a href="#928067" title="List[EtaExpansion.this.global.Tree]">stats</a>
          <a href="#927967" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><a href="#928068" title="EtaExpansion.this.global.Tree">fun</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="EtaExpansion.this.global.Apply">Apply</span><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="928078">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="928079">args</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#479117" title="=&gt; EtaExpansion.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560309" title="(tree: EtaExpansion.this.global.Tree, fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#927982" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#927967" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><a href="#928078" title="EtaExpansion.this.global.Tree">fn</a><span class="delimiter">)</span>, <a href="#928079" title="List[EtaExpansion.this.global.Tree]">args</a> <a href="../../../collection/immutable/List.scala.html#49149" title="(f: EtaExpansion.this.global.Tree =&gt; EtaExpansion.this.global.Tree)List[EtaExpansion.this.global.Tree]">mapConserve</a> <span class="delimiter">(</span><a href="#927983" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftout</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/generic/Trees.scala.html#441030" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.Apply">setType</a> <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">case</span> <span title="EtaExpansion.this.global.TypeApply">TypeApply</span><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="928099">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="928100">args</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#479117" title="=&gt; EtaExpansion.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560308" title="(tree: EtaExpansion.this.global.Tree, fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="#927982" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#927967" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><a href="#928099" title="EtaExpansion.this.global.Tree">fn</a><span class="delimiter">)</span>, <a href="#928100" title="List[EtaExpansion.this.global.Tree]">args</a><span class="delimiter">)</span> <a href="../../../reflect/generic/Trees.scala.html#441030" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.TypeApply">setType</a> <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">case</span> <span title="EtaExpansion.this.global.Select">Select</span><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="928116">qual</a>, <a title="EtaExpansion.this.global.Name" id="928117">name</a><span class="delimiter">)</span> =&gt;
          <a href="../ast/Trees.scala.html#479117" title="=&gt; EtaExpansion.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#560313" title="(tree: EtaExpansion.this.global.Tree, qualifier: EtaExpansion.this.global.Tree, selector: EtaExpansion.this.global.Name)EtaExpansion.this.global.Select">Select</a><span class="delimiter">(</span><a href="#927982" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#927983" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftout</a><span class="delimiter">(</span><a href="#928116" title="EtaExpansion.this.global.Tree">qual</a><span class="delimiter">)</span>, <a href="#928117" title="EtaExpansion.this.global.Name">name</a><span class="delimiter">)</span> <a href="../../../reflect/generic/Trees.scala.html#441034" title="(sym: EtaExpansion.this.global.Symbol)EtaExpansion.this.global.Select">setSymbol</a> <a href="../symtab/Symbols.scala.html#478667" title="object EtaExpansion.this.global.NoSymbol">NoSymbol</a> <a href="../../../reflect/generic/Trees.scala.html#441030" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.Select">setType</a> <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">case</span> <span title="EtaExpansion.this.global.Tree">Ident</span><span class="delimiter">(</span><a title="EtaExpansion.this.global.Name" id="928133">name</a><span class="delimiter">)</span> =&gt;
          <a href="#927982" title="EtaExpansion.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#927984" title="EtaExpansion.this.global.Tree">tree1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#927982" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="#927984" title="EtaExpansion.this.global.Tree">tree1</a> <a href="../../../reflect/generic/Trees.scala.html#441026" title="(pos: EtaExpansion.this.global.Position)tree1.type">setPos</a> <a href="#927984" title="EtaExpansion.this.global.Tree">tree1</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; EtaExpansion.this.global.Position">pos</a>.<a href="../util/Position.scala.html#501492" title="=&gt; scala.tools.nsc.util.Position">makeTransparent</a>
      <a href="#927984" title="EtaExpansion.this.global.Tree">tree1</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Eta-expand lifted tree.
     */</span>
    <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree, tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree" id="927968">expand</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="928143">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a>, <a title="EtaExpansion.this.global.Type" id="928144">tpe</a>: <a href="../symtab/Types.scala.html#478720" title="EtaExpansion.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="EtaExpansion.this.global.Tree">Tree</a> = <a href="#928144" title="EtaExpansion.this.global.Type">tpe</a> <span title="EtaExpansion.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="EtaExpansion.this.global.Function" id="928145">mt</a> @ MethodType<span class="delimiter">(</span><a title="List[EtaExpansion.this.global.Symbol]" id="928148">paramSyms</a>, <a title="EtaExpansion.this.global.Type" id="928149">restpe</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#928145" title="EtaExpansion.this.global.MethodType">mt</a>.<a href="../symtab/Types.scala.html#546848" title="=&gt; Boolean">isImplicit</a> =&gt;
        <span class="keyword">val</span> <a title="List[EtaExpansion.this.global.ValDef]" id="928150">params</a> = <a href="#928148" title="List[EtaExpansion.this.global.Symbol]">paramSyms</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: EtaExpansion.this.global.Symbol =&gt; EtaExpansion.this.global.ValDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[EtaExpansion.this.global.Symbol],EtaExpansion.this.global.ValDef,List[EtaExpansion.this.global.ValDef]])List[EtaExpansion.this.global.ValDef]">map</a> <span class="delimiter">(</span><a title="EtaExpansion.this.global.Symbol" id="928167">sym</a> =&gt;
          <a href="../../../reflect/generic/Trees.scala.html#441937" title="(mods: EtaExpansion.this.global.Modifiers, name: EtaExpansion.this.global.TermName, tpt: EtaExpansion.this.global.Tree, rhs: EtaExpansion.this.global.Tree)EtaExpansion.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="../../../reflect/generic/Trees.scala.html#434025" title="(flags: Long)EtaExpansion.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span>SYNTHETIC <span title="Long(2105344L)">|</span> PARAM<span class="delimiter">)</span>,
                 <a href="#928167" title="EtaExpansion.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; EtaExpansion.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#501117" title="=&gt; EtaExpansion.this.global.TermName">toTermName</a>, <a href="../ast/Trees.scala.html#479149" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#928167" title="EtaExpansion.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; EtaExpansion.this.global.Type">tpe</a><span class="delimiter">)</span> , <a href="../../../reflect/generic/Trees.scala.html#434035" title="object EtaExpansion.this.global.EmptyTree">EmptyTree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../ast/Trees.scala.html#479182" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.Function)EtaExpansion.this.global.Function">atPos</a><span class="delimiter">(</span><a href="#928143" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; EtaExpansion.this.global.Position">pos</a>.<a href="../util/Position.scala.html#501492" title="=&gt; scala.tools.nsc.util.Position">makeTransparent</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../reflect/generic/Trees.scala.html#443577" title="(vparams: List[EtaExpansion.this.global.ValDef], body: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Function">Function</a><span class="delimiter">(</span><a href="#928150" title="List[EtaExpansion.this.global.ValDef]">params</a>, <a href="#927968" title="(tree: EtaExpansion.this.global.Tree, tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree">expand</a><span class="delimiter">(</span><a href="../../../reflect/generic/Trees.scala.html#443864" title="(fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#928143" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#928150" title="List[EtaExpansion.this.global.ValDef]">params</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: EtaExpansion.this.global.ValDef =&gt; EtaExpansion.this.global.gen.global.Tree with Serializable)(implicit bf: scala.collection.generic.CanBuildFrom[List[EtaExpansion.this.global.ValDef],EtaExpansion.this.global.gen.global.Tree with Serializable,List[EtaExpansion.this.global.Tree]])List[EtaExpansion.this.global.Tree]">map</a> <a href="../Global.scala.html#478214" title="object EtaExpansion.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#507308" title="(vparam: EtaExpansion.this.global.gen.global.ValDef)EtaExpansion.this.global.gen.global.Tree with Serializable">paramToArg</a><span class="delimiter">)</span>, <a href="#928149" title="EtaExpansion.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="EtaExpansion.this.global.Tree">_</span> =&gt;
        <a href="#928143" title="EtaExpansion.this.global.Tree">tree</a>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="EtaExpansion.this.global.Tree" id="927969">tree1</a> = <a href="#927967" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><a href="#927961" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span>
    <a href="../ast/Trees.scala.html#479182" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.Block)EtaExpansion.this.global.Block">atPos</a><span class="delimiter">(</span><a href="#927961" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; EtaExpansion.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/generic/Trees.scala.html#443384" title="(stats: List[EtaExpansion.this.global.Tree], expr: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Block">Block</a><span class="delimiter">(</span><a href="#927966" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#61794" title="=&gt; List[EtaExpansion.this.global.Tree]">toList</a>, <a href="#927968" title="(tree: EtaExpansion.this.global.Tree, tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree">expand</a><span class="delimiter">(</span><a href="#927969" title="EtaExpansion.this.global.Tree">tree1</a>, <a href="#927963" title="EtaExpansion.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>