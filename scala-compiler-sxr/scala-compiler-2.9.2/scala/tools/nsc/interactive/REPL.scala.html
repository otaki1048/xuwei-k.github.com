<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/REPL.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2009-2011 Scala Solutions and LAMP/EPFL
 * @author Martin Odersky
 */</span>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> scala.concurrent.SyncVar
<span class="keyword">import</span> scala.tools.nsc.util._
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.ast._
<span class="keyword">import</span> scala.tools.nsc.reporters._
<span class="keyword">import</span> scala.tools.nsc.io._

<span class="comment">/** Interface of interactive compiler to a client such as an IDE
 */</span>
<span class="keyword">object</span> <a title="object scala.tools.nsc.interactive.REPL" id="29718">REPL</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>

  <span class="keyword">val</span> <a title="java.lang.String" id="716436">versionMsg</a> = <span title="java.lang.String(&quot;Scala compiler &quot;)" class="string">&quot;Scala compiler &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <a href="../Properties.scala.html#23224" title="object scala.tools.nsc.Properties">Properties</a>.<a href="../../../util/Properties.scala.html#62283" title="=&gt; java.lang.String">versionString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -- &quot;)" class="string">&quot; -- &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <a href="../Properties.scala.html#23224" title="object scala.tools.nsc.Properties">Properties</a>.<a href="../../../util/Properties.scala.html#62285" title="=&gt; String">copyrightString</a>

  <span class="keyword">val</span> <a title="java.lang.String" id="716438">prompt</a> = <span title="java.lang.String(&quot;&gt; &quot;)" class="string">&quot;&gt; &quot;</span>

  <span class="keyword">var</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="716441">reporter</a>: <a href="../reporters/ConsoleReporter.scala.html#34927" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="716443">replError</a><span class="delimiter">(</span><a title="String" id="716454">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479339" title="(pos: scala.tools.nsc.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span class="comment">/*new Position */</span><a href="../util/Position.scala.html#502954" title="(msg: String)scala.tools.nsc.util.FakePos">FakePos</a><span class="delimiter">(</span><span title="java.lang.String(&quot;scalac&quot;)" class="string">&quot;scalac&quot;</span><span class="delimiter">)</span>,
                   <a href="#716454" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012  scalac -help  gives more information&quot;)" class="string">&quot;\n  scalac -help  gives more information&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="716444">process</a><span class="delimiter">(</span><a title="Array[String]" id="716458">args</a>: <a href="../../../Array.scala.html#1430" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="716460">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#716443" title="(msg: String)Unit">replError</a><span class="delimiter">)</span>
    <a href="#716441" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = <a href="../reporters/ConsoleReporter.scala.html#482460" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="../reporters/ConsoleReporter.scala.html#34927" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#716460" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="716461">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../CompilerCommand.scala.html#22638" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9626" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[String]">toList</a>, <a href="#716460" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#716461" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#481235" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#469867" title="=&gt; command.settings.BooleanSetting">version</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; command.settings.version.T">value</a><span class="delimiter">)</span>
      <a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479337" title="(pos: scala.tools.nsc.util.Position, msg: String, force: Boolean)Unit">info</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#716436" title="=&gt; java.lang.String">versionMsg</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">object</span> <a title="object compiler" id="716588">compiler</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="Global.scala.html#29276" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">(</span><a href="#716461" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#481235" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
<span class="comment">//          printTypings = true</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479335" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#482478" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#716461" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#481255" title="=&gt; Boolean">shouldStopWithInfo</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479337" title="(pos: scala.tools.nsc.util.Position, msg: String, force: Boolean)Unit">info</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#716461" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#481256" title="(global: scala.tools.nsc.Global)String">getInfoMessage</a><span class="delimiter">(</span><a href="#716588" title="object compiler">compiler</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#716447" title="(comp: scala.tools.nsc.interactive.Global)Unit">run</a><span class="delimiter">(</span><a href="#716588" title="object compiler">compiler</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="716595">ex</a> @ FatalError<span class="delimiter">(</span><a title="String" id="716596">msg</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#716461" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#481235" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469727" title="=&gt; command.settings.BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; command.settings.debug.T">value</a><span class="delimiter">)</span> <span class="comment">// !!!</span>
            <a href="#716595" title="scala.tools.nsc.FatalError">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>;
        <a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479339" title="(pos: scala.tools.nsc.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="java.lang.String(&quot;fatal error: &quot;)" class="string">&quot;fatal error: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#716596" title="String">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="716445">main</a><span class="delimiter">(</span><a title="Array[String]" id="716599">args</a>: <a href="../../../Array.scala.html#1430" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#716444" title="(args: Array[String])Unit">process</a><span class="delimiter">(</span><a href="#716599" title="Array[String]">args</a><span class="delimiter">)</span>
    sys.<a href="../../../sys/package.scala.html#48165" title="(status: Int)Nothing">exit</a><span class="delimiter">(</span><span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#716441" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479335" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(action: String =&gt; Unit)Unit" id="716446">loop</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="716603">action</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../../Console.scala.html#507" title="object Console">Console</a>.<a href="../../../Console.scala.html#58052" title="(obj: Any)Unit">print</a><span class="delimiter">(</span><a href="#716438" title="=&gt; java.lang.String">prompt</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="716605">line</a> = <a href="../../../Console.scala.html#507" title="object Console">Console</a>.<a href="../../../Console.scala.html#58057" title="()String">readLine</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#716605" title="String">line</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../Function1.scala.html#53453" title="(v1: String)Unit">action</a><span class="delimiter">(</span><a href="#716605" title="String">line</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#716446" title="(action: String =&gt; Unit)Unit">loop</a><span class="delimiter">(</span><a href="#716603" title="String =&gt; Unit">action</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">_</span>: java.io.<span title="java.io.EOFException">EOFException</span> =&gt; <span class="comment">//nop</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Commands:
   *
   *  reload file1 ... fileN
   *  typeat file off1 off2?
   *  complete file off1 off2?
   */</span>
  <span class="keyword">def</span> <a title="(comp: scala.tools.nsc.interactive.Global)Unit" id="716447">run</a><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Global" id="716593">comp</a>: <a href="Global.scala.html#29276" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[Unit]" id="716613">reloadResult</a> = <span title="scala.tools.nsc.interactive.Response[Unit]" class="keyword">new</span> <a href="Response.scala.html#29921" title="scala.tools.nsc.interactive.Response[Unit]">Response</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="716614">typeatResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#29921" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[List[comp.Member]]" id="716615">completeResult</a> = <span title="scala.tools.nsc.interactive.Response[List[comp.Member]]" class="keyword">new</span> <a href="Response.scala.html#29921" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">Response</a><span class="delimiter">[</span>List<span class="delimiter">[</span>comp.Member<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="716616">typedResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#29921" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="716617">structureResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#29921" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition" id="716618">makePos</a><span class="delimiter">(</span><a title="String" id="716623">file</a>: <span title="String">String</span>, <a title="String" id="716624">off1</a>: <span title="String">String</span>, <a title="String" id="716625">off2</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.util.BatchSourceFile" id="716626">source</a> = <a href="#716448" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#716623" title="String">file</a><span class="delimiter">)</span>
      <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="RangePositions.scala.html#524165" title="(source: scala.tools.nsc.util.SourceFile, start: Int, point: Int, end: Int)scala.tools.nsc.util.RangePosition">rangePos</a><span class="delimiter">(</span><a href="#716626" title="scala.tools.nsc.util.BatchSourceFile">source</a>, <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<a href="../../../collection/immutable/StringLike.scala.html#56568" title="=&gt; Int">toInt</a>, <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<a href="../../../collection/immutable/StringLike.scala.html#56568" title="=&gt; Int">toInt</a>, <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off2</a>.<a href="../../../collection/immutable/StringLike.scala.html#56568" title="=&gt; Int">toInt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)Unit" id="716619">doTypeAt</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="716646">pos</a>: <a href="../util/Position.scala.html#42664" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524106" title="(pos: comp.Position, response: comp.Response[comp.Tree])Unit">askTypeAt</a><span class="delimiter">(</span><a href="#716646" title="scala.tools.nsc.util.Position">pos</a>, <a href="#716614" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
      <a href="#716449" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#716614" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position)Unit" id="716620">doComplete</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.Position" id="716655">pos</a>: <a href="../util/Position.scala.html#42664" title="scala.tools.nsc.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524109" title="(pos: comp.Position, response: comp.Response[List[comp.Member]])Unit">askTypeCompletion</a><span class="delimiter">(</span><a href="#716655" title="scala.tools.nsc.util.Position">pos</a>, <a href="#716615" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
      <a href="#716449" title="(svar: scala.tools.nsc.interactive.Response[List[comp.Member]])Unit">show</a><span class="delimiter">(</span><a href="#716615" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(file: String)Unit" id="716621">doTypedTree</a><span class="delimiter">(</span><a title="String" id="716661">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524107" title="(source: scala.tools.nsc.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#716448" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#716661" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#716616" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
      <a href="#716449" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#716616" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(file: String)Unit" id="716622">doStructure</a><span class="delimiter">(</span><a title="String" id="716668">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524114" title="(source: scala.tools.nsc.util.SourceFile, keepLoaded: Boolean, response: comp.Response[comp.Tree])Unit">askParsedEntered</a><span class="delimiter">(</span><a href="#716448" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#716668" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#716617" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
      <a href="#716449" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Unit">show</a><span class="delimiter">(</span><a href="#716617" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#716446" title="(action: String =&gt; Unit)Unit">loop</a> <span class="delimiter">{</span> <a title="String" id="716676">line</a> =&gt;
      <span class="delimiter">(</span><a href="#716676" title="String">line</a> <a href="../../../Predef.scala.html#9626" title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">split</a> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[java.lang.String]">toList</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit" class="string">&quot;reload&quot;</span> :: <a title="List[java.lang.String]" id="716778">args</a> =&gt;
          <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524104" title="(sources: List[scala.tools.nsc.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="#716778" title="List[java.lang.String]">args</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: java.lang.String =&gt; scala.tools.nsc.util.BatchSourceFile)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],scala.tools.nsc.util.BatchSourceFile,List[scala.tools.nsc.util.SourceFile]])List[scala.tools.nsc.util.SourceFile]">map</a> <a href="#716448" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a>, <a href="#716613" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <a href="#716449" title="(svar: scala.tools.nsc.interactive.Response[Unit])Unit">show</a><span class="delimiter">(</span><a href="#716613" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit" class="string">&quot;reloadAndAskType&quot;</span> :: <a title="java.lang.String" id="716839">file</a> :: <a title="java.lang.String" id="716844">millis</a> :: <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a> =&gt;
          <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524104" title="(sources: List[scala.tools.nsc.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#48877" title="(xs: scala.tools.nsc.util.BatchSourceFile*)List[scala.tools.nsc.util.BatchSourceFile]">List</a><span class="delimiter">(</span><a href="#716448" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#716839" title="java.lang.String">file</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#716613" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <span title="object java.lang.Thread">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">millis</a>.<a href="../../../Int.scala.html#54731" title="=&gt; Long">toInt</a><span class="delimiter">)</span>
          <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ask type now&quot;)" class="string">&quot;ask type now&quot;</span><span class="delimiter">)</span>
          <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524107" title="(source: scala.tools.nsc.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#716448" title="(name: String)scala.tools.nsc.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#716839" title="java.lang.String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#716616" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
          <a href="#716616" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a>.<a href="Response.scala.html#524389" title="=&gt; Either[comp.Tree,Throwable]">get</a>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typed&quot;)" class="string">&quot;typed&quot;</span>, <a title="java.lang.String" id="716878">file</a><span class="delimiter">)</span> =&gt;
          <a href="#716621" title="(file: String)Unit">doTypedTree</a><span class="delimiter">(</span><a href="#716878" title="java.lang.String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typeat&quot;)" class="string">&quot;typeat&quot;</span>, <a title="java.lang.String" id="716891">file</a>, <a title="java.lang.String" id="716892">off1</a>, <a title="java.lang.String" id="716893">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#716619" title="(pos: scala.tools.nsc.util.Position)Unit">doTypeAt</a><span class="delimiter">(</span><a href="#716618" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#716891" title="java.lang.String">file</a>, <a href="#716892" title="java.lang.String">off1</a>, <a href="#716893" title="java.lang.String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typeat&quot;)" class="string">&quot;typeat&quot;</span>, <a title="java.lang.String" id="716906">file</a>, <a title="java.lang.String" id="716907">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#716619" title="(pos: scala.tools.nsc.util.Position)Unit">doTypeAt</a><span class="delimiter">(</span><a href="#716618" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#716906" title="java.lang.String">file</a>, <a href="#716907" title="java.lang.String">off1</a>, <a href="#716907" title="java.lang.String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;complete&quot;)" class="string">&quot;complete&quot;</span>, <a title="java.lang.String" id="716920">file</a>, <a title="java.lang.String" id="716921">off1</a>, <a title="java.lang.String" id="716922">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#716620" title="(pos: scala.tools.nsc.util.Position)Unit">doComplete</a><span class="delimiter">(</span><a href="#716618" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#716920" title="java.lang.String">file</a>, <a href="#716921" title="java.lang.String">off1</a>, <a href="#716922" title="java.lang.String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;complete&quot;)" class="string">&quot;complete&quot;</span>, <a title="java.lang.String" id="716935">file</a>, <a title="java.lang.String" id="716936">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#716620" title="(pos: scala.tools.nsc.util.Position)Unit">doComplete</a><span class="delimiter">(</span><a href="#716618" title="(file: String, off1: String, off2: String)scala.tools.nsc.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#716935" title="java.lang.String">file</a>, <a href="#716936" title="java.lang.String">off1</a>, <a href="#716936" title="java.lang.String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Nothing">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;quit&quot;)" class="string">&quot;quit&quot;</span><span class="delimiter">)</span> =&gt;
          <a href="#716593" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#524116" title="()Unit">askShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
          sys.<a href="../../../sys/package.scala.html#48165" title="(status: Int)Nothing">exit</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Unit">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;structure&quot;)" class="string">&quot;structure&quot;</span>, <a title="java.lang.String" id="716963">file</a><span class="delimiter">)</span> =&gt;
          <a href="#716622" title="(file: String)Unit">doStructure</a><span class="delimiter">(</span><a href="#716963" title="java.lang.String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
          <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;unrecongized command&quot;)" class="string">&quot;unrecongized command&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)scala.tools.nsc.util.BatchSourceFile" id="716448">toSourceFile</a><span class="delimiter">(</span><a title="String" id="716627">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../util/SourceFile.scala.html#501063" title="(_file: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.util.BatchSourceFile" class="keyword">new</a> <a href="../util/SourceFile.scala.html#42877" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="../io/PlainFile.scala.html#33573" title="scala.tools.nsc.io.PlainFile">PlainFile</a><span class="delimiter">(</span><a href="../io/Path.scala.html#479367" title="implicit scala.tools.nsc.io.Path.jfile2path : (jfile: scala.tools.nsc.io.package.JFile)scala.tools.nsc.io.Path" class="keyword">new</a> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><a href="#716627" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](svar: scala.tools.nsc.interactive.Response[T])Unit" id="716449">show</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="716451">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Response[T]" id="716649">svar</a>: <a href="Response.scala.html#29921" title="scala.tools.nsc.interactive.Response[T]">Response</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#716649" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#524389" title="=&gt; Either[T,Throwable]">get</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Left</span><span class="delimiter">(</span><a title="T" id="716969">result</a><span class="delimiter">)</span> =&gt; <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;==&gt; &quot;)" class="string">&quot;==&gt; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#716969" title="T">result</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Right</span><span class="delimiter">(</span><a title="Throwable" id="716973">exc</a><span class="delimiter">)</span> =&gt; <a href="#716973" title="Throwable">exc</a>.<span title="()Unit">printStackTrace</span>; <a href="../../../Predef.scala.html#9594" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ERROR: &quot;)" class="string">&quot;ERROR: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#716973" title="Throwable">exc</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#716649" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#524394" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>