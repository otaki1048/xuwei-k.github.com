<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/matching/MatrixAdditions.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * Author: Paul Phillips
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> matching

<span class="keyword">import</span> transform.ExplicitOuter
<span class="keyword">import</span> <a href="../../../PartialFunction.scala.html#336" title="object PartialFunction">PartialFunction</a>._

<span class="comment">/** Traits which are mixed into MatchMatrix, but separated out as
 *  (somewhat) independent components to keep them on the sidelines.
 */</span>
<span class="keyword">trait</span> <a title="trait MatrixAdditions extends java.lang.Object with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="34585">MatrixAdditions</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> ast.<a href="../ast/TreeDSL.scala.html#23679" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  self: ExplicitOuter <span class="keyword">with</span> ParallelMatching =&gt;

  <span class="keyword">import</span> <a href="../transform/TypingTransformers.scala.html#511838" title="=&gt; scala.tools.nsc.Global">global</a>.<span class="delimiter">{</span> typer =&gt; _, _ <span class="delimiter">}</span>
  <span class="keyword">import</span> symtab.Flags
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#507542" title="object MatrixAdditions.this.CODE">CODE</a>._
  <span class="keyword">import</span> <a href="MatchSupport.scala.html#512286" title="object MatrixAdditions.this.Debug">Debug</a>._
  <span class="keyword">import</span> <a href="../ast/Trees.scala.html#479115" title="object MatrixAdditions.this.global.treeInfo">treeInfo</a>._
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#479030" title="object MatrixAdditions.this.global.definitions">definitions</a>.<span class="delimiter">{</span> isValueClass <span class="delimiter">}</span>

  <span class="comment">/** The Squeezer, responsible for all the squeezing.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>matching<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait Squeezer extends java.lang.Object with ScalaObject" id="512302">Squeezer</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    self: MatrixContext =&gt;

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Boolean" id="793724">settings_squeeze</a> = <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="../Global.scala.html#478200" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469761" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Ynosqueeze</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a>

    <span class="keyword">class</span> <a title="class RefTraverser extends MatrixAdditions.this.global.Traverser with ScalaObject" id="793726">RefTraverser</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="MatrixAdditions.this.global.ValDef" id="795932">vd</a>: <a href="../../../reflect/generic/Trees.scala.html#434049" title="MatrixAdditions.this.global.ValDef">ValDef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#479168" title="MatrixAdditions.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">val</span> <a title="MatrixAdditions.this.global.Symbol" id="795917">targetSymbol</a> = <a href="#795932" title="MatrixAdditions.this.global.ValDef">vd</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a>
      <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="795920">safeRefs</a>     = <span title="Int(0)" class="int">0</span>
      <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="795923">isSafe</a>       = <span title="Boolean(true)" class="keyword">true</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="795925">canDrop</a>   = <a href="#795923" title="=&gt; Boolean">isSafe</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#795920" title="=&gt; Int">safeRefs</a> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="795926">canInline</a> = <a href="#795923" title="=&gt; Boolean">isSafe</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#795920" title="=&gt; Int">safeRefs</a> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: MatrixAdditions.this.global.Tree)Unit" id="795927">traverse</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="795949">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <a href="#795949" title="MatrixAdditions.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="795954">t</a>: <a href="../../../reflect/generic/Trees.scala.html#434137" title="MatrixAdditions.this.global.Ident">Ident</a> <span class="keyword">if</span> <a href="#795954" title="MatrixAdditions.this.global.Ident">t</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#795917" title="=&gt; MatrixAdditions.this.global.Symbol">targetSymbol</a> =&gt;
          <span class="comment">// target symbol's owner should match currentOwner</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#795917" title="=&gt; MatrixAdditions.this.global.Symbol">targetSymbol</a>.<a href="../symtab/Symbols.scala.html#509249" title="=&gt; MatrixAdditions.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/generic/Trees.scala.html#443193" title="=&gt; MatrixAdditions.this.global.Symbol">currentOwner</a><span class="delimiter">)</span> <a href="#795920" title="(x$1: Int)Unit">safeRefs</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
          <span class="keyword">else</span> <a href="#795923" title="(x$1: Boolean)Unit">isSafe</a> = <span title="Boolean(false)" class="keyword">false</span>

        <span class="keyword">case</span> <span title="Unit">LabelDef</span><span class="delimiter">(</span>_, <a title="List[MatrixAdditions.this.global.Ident]" id="795983">params</a>, <a title="MatrixAdditions.this.global.Tree" id="795984">rhs</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#795983" title="List[MatrixAdditions.this.global.Ident]">params</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71036" title="(p: MatrixAdditions.this.global.Ident =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#795991" title="MatrixAdditions.this.global.Ident">_</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#795917" title="=&gt; MatrixAdditions.this.global.Symbol">targetSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>  <span class="comment">// cannot substitute this one</span>
            <a href="#795923" title="(x$1: Boolean)Unit">isSafe</a> = <span title="Boolean(false)" class="keyword">false</span>

          <a href="#795927" title="(tree: MatrixAdditions.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#795984" title="MatrixAdditions.this.global.Tree">rhs</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">_</span> <span class="keyword">if</span> <a href="#795920" title="=&gt; Int">safeRefs</a> <a href="../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
          <a href="#793726" title="Squeezer.this.RefTraverser" class="keyword">super</a>.<a href="../ast/Trees.scala.html#560433" title="(tree: MatrixAdditions.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#795949" title="MatrixAdditions.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Compresses multiple Blocks. */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="793727">combineBlocks</a><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="795999">stats</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="MatrixAdditions.this.global.Tree" id="796000">expr</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a> = <a href="#796000" title="MatrixAdditions.this.global.Tree">expr</a> <span title="MatrixAdditions.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Tree">Block</span><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="796007">stats1</a>, <a title="MatrixAdditions.this.global.Tree" id="796008">expr1</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#795999" title="List[MatrixAdditions.this.global.Tree]">stats</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a> =&gt; <a href="#793727" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">combineBlocks</a><span class="delimiter">(</span><a href="#796007" title="List[MatrixAdditions.this.global.Tree]">stats1</a>, <a href="#796008" title="MatrixAdditions.this.global.Tree">expr1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Block">_</span>                                     =&gt; <a href="../../../reflect/generic/Trees.scala.html#443384" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Block">Block</a><span class="delimiter">(</span><a href="#795999" title="List[MatrixAdditions.this.global.Tree]">stats</a>, <a href="#796000" title="MatrixAdditions.this.global.Tree">expr</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="793728">squeezedBlock</a><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="796029">vds</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="MatrixAdditions.this.global.Tree" id="796030">exp</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a> =
      <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#793724" title="=&gt; Boolean">settings_squeeze</a><span class="delimiter">)</span> <a href="#793727" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">combineBlocks</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a>, <a href="#793729" title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">squeezedBlock1</a><span class="delimiter">(</span><a href="#796029" title="List[MatrixAdditions.this.global.Tree]">vds</a>, <a href="#796030" title="MatrixAdditions.this.global.Tree">exp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span>                  <a href="#793727" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">combineBlocks</a><span class="delimiter">(</span><a href="#796029" title="List[MatrixAdditions.this.global.Tree]">vds</a>, <a href="#796030" title="MatrixAdditions.this.global.Tree">exp</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="793729">squeezedBlock1</a><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="796032">vds</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="MatrixAdditions.this.global.Tree" id="796033">exp</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatrixAdditions.this.global.Tree" id="796036">squeezedTail</a> = <a href="#793728" title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">squeezedBlock</a><span class="delimiter">(</span><a href="#796032" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/TraversableLike.scala.html#49082" title="=&gt; List[MatrixAdditions.this.global.Tree]">tail</a>, <a href="#796033" title="MatrixAdditions.this.global.Tree">exp</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; MatrixAdditions.this.global.Block" id="796037">default</a> = <a href="#796035" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a> <span title="MatrixAdditions.this.global.Block" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Block">Block</span><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="796042">vds2</a>, <a title="MatrixAdditions.this.global.Tree" id="796043">exp2</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/generic/Trees.scala.html#443384" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Block">Block</a><span class="delimiter">(</span><a href="#796032" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#53870" title="=&gt; MatrixAdditions.this.global.Tree">head</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: MatrixAdditions.this.global.Tree)List[MatrixAdditions.this.global.Tree]">::</a> <a href="#796042" title="List[MatrixAdditions.this.global.Tree]">vds2</a>, <a href="#796043" title="MatrixAdditions.this.global.Tree">exp2</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="MatrixAdditions.this.global.Block" id="796066">exp2</a>              =&gt; <a href="../../../reflect/generic/Trees.scala.html#443384" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Block">Block</a><span class="delimiter">(</span><a href="#796032" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#53870" title="=&gt; MatrixAdditions.this.global.Tree">head</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: MatrixAdditions.this.global.Tree)List[MatrixAdditions.this.global.Tree]">::</a> <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a>,  <a href="#796066" title="MatrixAdditions.this.global.Tree">exp2</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#796032" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#796033" title="MatrixAdditions.this.global.Tree">exp</a>
      <span class="keyword">else</span> <a href="#796032" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#53870" title="=&gt; MatrixAdditions.this.global.Tree">head</a> <span title="MatrixAdditions.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="MatrixAdditions.this.global.Tree" id="796089">vd</a>: <a href="../../../reflect/generic/Trees.scala.html#434049" title="MatrixAdditions.this.global.ValDef">ValDef</a> =&gt;
          <span class="keyword">val</span> <a title="Squeezer.this.RefTraverser" id="796090">rt</a> = <span title="Squeezer.this.RefTraverser" class="keyword">new</span> <a href="#793726" title="Squeezer.this.RefTraverser">RefTraverser</a><span class="delimiter">(</span><a href="#796089" title="MatrixAdditions.this.global.ValDef">vd</a><span class="delimiter">)</span>
          <a href="#796090" title="Squeezer.this.RefTraverser">rt</a>.<a href="../../../reflect/generic/Trees.scala.html#443200" title="(owner: MatrixAdditions.this.global.Symbol)(traverse: =&gt; Unit)Unit">atOwner</a><span class="delimiter">(</span><a href="Matrix.scala.html#793741" title="=&gt; MatrixAdditions.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#796090" title="Squeezer.this.RefTraverser">rt</a> <a href="#795927" title="(tree: MatrixAdditions.this.global.Tree)Unit">traverse</a> <a href="#796035" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a><span class="delimiter">)</span>

          <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#796090" title="Squeezer.this.RefTraverser">rt</a>.<a href="#795925" title="=&gt; Boolean">canDrop</a><span class="delimiter">)</span>
            <a href="#796035" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a>
          <span class="keyword">else</span> <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../symtab/Types.scala.html#478928" title="(tp: MatrixAdditions.this.global.Type)Boolean">isConstantType</a><span class="delimiter">(</span><a href="#796089" title="MatrixAdditions.this.global.ValDef">vd</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; MatrixAdditions.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#796090" title="Squeezer.this.RefTraverser">rt</a>.<a href="#795926" title="=&gt; Boolean">canInline</a><span class="delimiter">)</span>
            <span title="MatrixAdditions.this.global.TreeSubstituter" class="keyword">new</span> <a href="../ast/Trees.scala.html#479173" title="MatrixAdditions.this.global.TreeSubstituter">TreeSubstituter</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#48877" title="(xs: MatrixAdditions.this.global.Symbol*)List[MatrixAdditions.this.global.Symbol]">List</a><span class="delimiter">(</span><a href="#796089" title="MatrixAdditions.this.global.ValDef">vd</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: MatrixAdditions.this.global.Tree*)List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#796089" title="MatrixAdditions.this.global.ValDef">vd</a>.<a href="../../../reflect/generic/Trees.scala.html#441948" title="=&gt; MatrixAdditions.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../ast/Trees.scala.html#565104" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a> <a href="#796035" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a>
          <span class="keyword">else</span>
            <a href="#796037" title="=&gt; MatrixAdditions.this.global.Block">default</a>
        <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Block">_</span> =&gt; <a href="#796037" title="=&gt; MatrixAdditions.this.global.Block">default</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The Optimizer, responsible for some of the optimizing.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>matching<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait MatchMatrixOptimizer extends java.lang.Object with ScalaObject" id="512303">MatchMatrixOptimizer</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    self: MatchMatrix =&gt;

    <span class="keyword">import</span> <a href="#512303" title="MatchMatrixOptimizer.this.type">self</a>.<a href="ParallelMatching.scala.html#793874" title="=&gt; MatrixAdditions.this.MatrixContext">context</a>._

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="793872">optimize</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="794872">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="comment">// Uses treeInfo extractors rather than looking at trees directly</span>
      <span class="comment">// because the many Blocks obscure our vision.</span>
      <span class="keyword">object</span> <a title="object lxtt" id="796121">lxtt</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="../ast/Trees.scala.html#479167" title="MatrixAdditions.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="796124">transform</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="796126">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="MatrixAdditions.this.global.Tree">Tree</a> = <a href="#796126" title="MatrixAdditions.this.global.Tree">tree</a> <span title="MatrixAdditions.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Tree">Block</span><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="796133">stats</a>, <a title="MatrixAdditions.this.global.LabelDef" id="796134">ld</a> @ LabelDef<span class="delimiter">(</span>_, _, <a title="MatrixAdditions.this.global.Tree" id="796140">body</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="ParallelMatching.scala.html#793891" title="=&gt; List[Product with Serializable with MatchMatrixOptimizer.this.State]">targets</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71036" title="(p: Product with Serializable with MatchMatrixOptimizer.this.State =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#796148" title="&lt;none&gt; extends Product with Serializable with MatchMatrixOptimizer.this.State">_</a> <a href="ParallelMatching.scala.html#794424" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">shouldInline</a> <a href="#796134" title="MatrixAdditions.this.global.LabelDef">ld</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a><span class="delimiter">)</span> =&gt;
            <a href="#793728" title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">squeezedBlock</a><span class="delimiter">(</span><a href="../ast/Trees.scala.html#560348" title="(stats: List[MatrixAdditions.this.global.Tree], exprOwner: MatrixAdditions.this.global.Symbol)List[MatrixAdditions.this.global.Tree]">transformStats</a><span class="delimiter">(</span><a href="#796133" title="List[MatrixAdditions.this.global.Tree]">stats</a>, <a href="../ast/Trees.scala.html#560333" title="=&gt; MatrixAdditions.this.global.Symbol">currentOwner</a><span class="delimiter">)</span>, <a href="#796140" title="MatrixAdditions.this.global.Tree">body</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../ast/TreeInfo.scala.html#552601" title="MatrixAdditions.this.global.Tree">IsIf</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796171">cond</a>, <a href="../ast/TreeInfo.scala.html#552601" title="(x: MatrixAdditions.this.global.treeInfo.trees.Tree)Boolean">IsTrue</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="../ast/TreeInfo.scala.html#552601" title="(x: MatrixAdditions.this.global.treeInfo.trees.Tree)Boolean">IsFalse</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#796124" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#796171" title="MatrixAdditions.this.global.treeInfo.trees.Tree">cond</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../ast/TreeInfo.scala.html#552601" title="MatrixAdditions.this.global.Tree">IsIf</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796181">cond1</a>, <a href="../ast/TreeInfo.scala.html#552601" title="(x: MatrixAdditions.this.global.treeInfo.trees.Tree)Option[(MatrixAdditions.this.global.treeInfo.trees.Tree, MatrixAdditions.this.global.treeInfo.trees.Tree, MatrixAdditions.this.global.treeInfo.trees.Tree)]">IsIf</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796185">cond2</a>, <a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796186">thenp</a>, <a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796187">elsep1</a><span class="delimiter">)</span>, <a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796188">elsep2</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../ast/Trees.scala.html#479119" title="implicit scala.tools.nsc.ast.Trees.treeWrapper : (tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.TreeOps">elsep1</a> <a href="../ast/Trees.scala.html#510737" title="(that: MatrixAdditions.this.global.Tree)Boolean">equalsStructure</a> <a href="#796188" title="MatrixAdditions.this.global.treeInfo.trees.Tree">elsep2</a> =&gt;
            <a href="#796124" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><span class="delimiter">(</span><a href="Matrix.scala.html#793739" title="=&gt; MatrixAdditions.this.global.analyzer.Typer">typer</a> <a href="../typechecker/Typers.scala.html#507768" title="(tree: MatrixAdditions.this.global.analyzer.global.Tree)MatrixAdditions.this.global.analyzer.global.Tree">typed</a> <a href="../../../reflect/generic/Trees.scala.html#443640" title="(cond: MatrixAdditions.this.global.Tree, thenp: MatrixAdditions.this.global.Tree, elsep: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.If">If</a><span class="delimiter">(</span><a href="../Global.scala.html#478214" title="object MatrixAdditions.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#507293" title="(tree1: MatrixAdditions.this.global.gen.global.Tree, tree2: MatrixAdditions.this.global.gen.global.Tree)MatrixAdditions.this.global.gen.global.Tree">mkAnd</a><span class="delimiter">(</span><a href="#796181" title="MatrixAdditions.this.global.treeInfo.trees.Tree">cond1</a>, <a href="#796185" title="MatrixAdditions.this.global.treeInfo.trees.Tree">cond2</a><span class="delimiter">)</span>, <a href="#796186" title="MatrixAdditions.this.global.treeInfo.trees.Tree">thenp</a>, <a href="#796188" title="MatrixAdditions.this.global.treeInfo.trees.Tree">elsep2</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Tree">If</span><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="796217">cond1</a>, <a href="../ast/TreeInfo.scala.html#552601" title="(x: MatrixAdditions.this.global.treeInfo.trees.Tree)Option[(MatrixAdditions.this.global.treeInfo.trees.Tree, MatrixAdditions.this.global.treeInfo.trees.Tree, MatrixAdditions.this.global.treeInfo.trees.Tree)]">IsIf</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796221">cond2</a>, <a title="MatrixAdditions.this.global.treeInfo.trees.Tree" id="796222">thenp</a>, Apply<span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="796225">jmp</a>, <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a title="MatrixAdditions.this.global.LabelDef" id="796226">ld</a>: <a href="../../../reflect/generic/Trees.scala.html#434058" title="MatrixAdditions.this.global.LabelDef">LabelDef</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#796225" title="MatrixAdditions.this.global.Tree">jmp</a>.<a href="../../../reflect/generic/Trees.scala.html#441032" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#796226" title="MatrixAdditions.this.global.LabelDef">ld</a>.<a href="../../../reflect/generic/Trees.scala.html#441600" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> =&gt;
            <a href="#796124" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><span class="delimiter">(</span><a href="Matrix.scala.html#793739" title="=&gt; MatrixAdditions.this.global.analyzer.Typer">typer</a> <a href="../typechecker/Typers.scala.html#507768" title="(tree: MatrixAdditions.this.global.analyzer.global.Tree)MatrixAdditions.this.global.analyzer.global.Tree">typed</a> <a href="../../../reflect/generic/Trees.scala.html#443640" title="(cond: MatrixAdditions.this.global.Tree, thenp: MatrixAdditions.this.global.Tree, elsep: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.If">If</a><span class="delimiter">(</span><a href="../Global.scala.html#478214" title="object MatrixAdditions.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#507293" title="(tree1: MatrixAdditions.this.global.gen.global.Tree, tree2: MatrixAdditions.this.global.gen.global.Tree)MatrixAdditions.this.global.gen.global.Tree">mkAnd</a><span class="delimiter">(</span><a href="#796217" title="MatrixAdditions.this.global.Tree">cond1</a>, <a href="#796221" title="MatrixAdditions.this.global.treeInfo.trees.Tree">cond2</a><span class="delimiter">)</span>, <a href="#796222" title="MatrixAdditions.this.global.treeInfo.trees.Tree">thenp</a>, <a href="#796226" title="MatrixAdditions.this.global.LabelDef">ld</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="MatrixAdditions.this.global.Tree">_</span> =&gt;
            <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#560339" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#796126" title="MatrixAdditions.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">try</span> <a href="#796121" title="object lxtt">lxtt</a> <a href="#796124" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a> <a href="#794872" title="MatrixAdditions.this.global.Tree">tree</a>
      <span class="keyword">finally</span> <a href="Matrix.scala.html#793752" title="()Unit">clearSyntheticSyms</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The Exhauster.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>matching<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait MatrixExhaustiveness extends java.lang.Object with ScalaObject" id="512304">MatrixExhaustiveness</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    self: MatchMatrix =&gt;

    <span class="keyword">import</span> <a href="#512304" title="MatrixExhaustiveness.this.type">self</a>.<a href="ParallelMatching.scala.html#793874" title="=&gt; MatrixAdditions.this.MatrixContext">context</a>._

    <span class="comment">/** Exhaustiveness checking requires looking for sealed classes
     *  and if found, making sure all children are covered by a pattern.
     */</span>
    <span class="keyword">class</span> <a title="class ExhaustivenessChecker extends java.lang.Object with ScalaObject" id="793939">ExhaustivenessChecker</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="MatrixExhaustiveness.this.Rep" id="796308">rep</a>: <a href="ParallelMatching.scala.html#793926" title="MatrixExhaustiveness.this.Rep">Rep</a>, <a title="MatrixAdditions.this.global.Position" id="796309">matchPos</a>: <a href="../util/Position.scala.html#42664" title="MatrixAdditions.this.global.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> Rep<a href="../../../Tuple2.scala.html#53390" title="(MatrixExhaustiveness.this.context.PatternVarGroup, List[MatrixExhaustiveness.this.Row])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="MatrixExhaustiveness.this.context.PatternVarGroup" id="796241">tvars</a>, <a href="../../../Tuple2.scala.html#53404" title="List[MatrixExhaustiveness.this.Row]" id="796243">rows</a><span class="delimiter">)</span> = <a href="#796308" title="MatrixExhaustiveness.this.Rep">rep</a>

      <span class="keyword">import</span> <a href="../symtab/Flags.scala.html#36139" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<span class="delimiter">{</span> MUTABLE, ABSTRACT, SEALED <span class="delimiter">}</span>

      <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class Combo extends java.lang.Object with ScalaObject with Product with Serializable" id="796451">Combo</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="Int" id="796717">index</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a>, <a title="MatrixAdditions.this.global.Symbol" id="796718">sym</a>: <a href="../symtab/Symbols.scala.html#478659" title="MatrixAdditions.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[MatrixAdditions.this.global.Symbol]" id="796317">isBaseClass</a> = <a href="#796718" title="=&gt; MatrixAdditions.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507231" title="=&gt; List[MatrixAdditions.this.global.Symbol]">baseClasses</a>.<a href="../../../collection/TraversableOnce.scala.html#53700" title="scala.collection.immutable.Set[MatrixAdditions.this.global.Symbol]">toSet</a>

        <span class="comment">// is this combination covered by the given pattern?</span>
        <span class="keyword">def</span> <a title="(p: MatrixAdditions.this.Pattern)Boolean" id="796319">isCovered</a><span class="delimiter">(</span><a title="MatrixAdditions.this.Pattern" id="796341">p</a>: <a href="Patterns.scala.html#512263" title="MatrixAdditions.this.Pattern">Pattern</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="796344">coversSym</a> = <a href="../../../collection/GenSetLike.scala.html#59062" title="(elem: MatrixAdditions.this.global.Symbol)Boolean">isBaseClass</a><span class="delimiter">(</span><a href="PatternBindings.scala.html#512326" title="(tpe: MatrixAdditions.this.global.Type)MatrixAdditions.this.global.Type">decodedEqualsType</a><span class="delimiter">(</span><a href="#796341" title="MatrixAdditions.this.Pattern">p</a>.<a href="Patterns.scala.html#796385" title="=&gt; MatrixAdditions.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../symtab/Types.scala.html#507159" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>

          <a href="../../../PartialFunction.scala.html#65100" title="(x: MatrixAdditions.this.global.Tree)(pf: PartialFunction[MatrixAdditions.this.global.Tree,Boolean])Boolean">cond</a><span class="delimiter">(</span><a href="#796341" title="MatrixAdditions.this.Pattern">p</a>.<a href="Patterns.scala.html#796377" title="=&gt; MatrixAdditions.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="#796412" title="Boolean" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="Boolean(true)">_</span>: <a href="../../../reflect/generic/Trees.scala.html#434085" title="MatrixAdditions.this.global.UnApply">UnApply</a> | _: <a href="../../../reflect/generic/Trees.scala.html#434088" title="MatrixAdditions.this.global.ArrayValue">ArrayValue</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">case</span> <a title="Boolean" id="796413">x</a>                          =&gt; <a href="#796341" title="MatrixAdditions.this.Pattern">p</a>.<a href="Patterns.scala.html#796380" title="=&gt; Boolean">isDefault</a> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#796344" title="=&gt; Boolean">coversSym</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">/* True if the patterns in 'row' cover the given type symbol combination, and has no guard. */</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(row: MatrixExhaustiveness.this.Row, combos: List[ExhaustivenessChecker.this.Combo])Boolean" id="796249">rowCoversCombo</a><span class="delimiter">(</span><a title="MatrixExhaustiveness.this.Row" id="796494">row</a>: <a href="ParallelMatching.scala.html#793916" title="MatrixExhaustiveness.this.Row">Row</a>, <a title="List[ExhaustivenessChecker.this.Combo]" id="796495">combos</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">)</span> =
        <a href="#796494" title="MatrixExhaustiveness.this.Row">row</a>.<a href="ParallelMatching.scala.html#794376" title="=&gt; MatrixAdditions.this.global.Tree">guard</a>.<a href="../../../reflect/generic/Trees.scala.html#441037" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#796495" title="List[ExhaustivenessChecker.this.Combo]">combos</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71035" title="(p: ExhaustivenessChecker.this.Combo =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="ExhaustivenessChecker.this.Combo" id="796504">c</a> =&gt; <a href="#796504" title="ExhaustivenessChecker.this.Combo">c</a> <a href="#796319" title="(p: MatrixAdditions.this.Pattern)Boolean">isCovered</a> <a href="#796494" title="MatrixExhaustiveness.this.Row">row</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71031" title="(n: Int)MatrixAdditions.this.Pattern">pats</a><span class="delimiter">(</span><a href="#796504" title="ExhaustivenessChecker.this.Combo">c</a>.<a href="#796717" title="=&gt; Int">index</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: MatrixAdditions.this.global.Symbol)Boolean" id="796250">requiresExhaustive</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="796538">sym</a>: <a href="../symtab/Symbols.scala.html#478659" title="MatrixAdditions.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
         <span class="delimiter">(</span><a href="#796538" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../../../reflect/generic/HasFlags.scala.html#435300" title="=&gt; Boolean">isMutable</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a>                 <span class="comment">// indicates that have not yet checked exhaustivity</span>
        <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#796538" title="MatrixAdditions.this.global.Symbol">sym</a> <a href="../../../reflect/generic/Symbols.scala.html#435349" title="(mask: Long)Boolean">hasFlag</a> <a href="Matrix.scala.html#512312" title="=&gt; Long">NO_EXHAUSTIVE</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a>     <span class="comment">// indicates @unchecked</span>
         <span class="delimiter">(</span><a href="#796538" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/generic/HasFlags.scala.html#435314" title="=&gt; Boolean">isSealed</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a>
        <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="../symtab/Definitions.scala.html#508366" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">isValueClass</a><span class="delimiter">(</span><a href="#796538" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>   <span class="comment">// make sure it's not a primitive, else (5: Byte) match { case 5 =&gt; ... } sees no Byte</span>
      <span class="delimiter">}</span>

      <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[List[ExhaustivenessChecker.this.Combo]]" id="796252">inexhaustives</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[List[ExhaustivenessChecker.this.Combo]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="comment">// let's please not get too clever side-effecting the mutable flag.</span>
        <span class="keyword">val</span> <a title="List[(MatrixExhaustiveness.this.context.PatternVar, Int)]" id="796543">toCollect</a> = <a href="#796241" title="=&gt; MatrixExhaustiveness.this.context.PatternVarGroup">tvars</a>.<a href="Matrix.scala.html#794908" title="=&gt; List[(MatrixExhaustiveness.this.context.PatternVar, Int)]">zipWithIndex</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: ((MatrixExhaustiveness.this.context.PatternVar, Int)) =&gt; Boolean)List[(MatrixExhaustiveness.this.context.PatternVar, Int)]">filter</a> <a href="#796555" title="Boolean" class="delimiter">{</a> <span class="keyword">case</span> <span title="Boolean" class="delimiter">(</span><a title="MatrixExhaustiveness.this.context.PatternVar" id="796558">pv</a>, <a title="Int" id="796559">i</a><span class="delimiter">)</span> =&gt; <a href="#796250" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">requiresExhaustive</a><span class="delimiter">(</span><a href="#796558" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#793807" title="=&gt; MatrixAdditions.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[(Int, List[MatrixAdditions.this.global.Symbol])]" id="796544">collected</a> = <a href="#796543" title="List[(MatrixExhaustiveness.this.context.PatternVar, Int)]">toCollect</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: ((MatrixExhaustiveness.this.context.PatternVar, Int)) =&gt; (Int, List[MatrixAdditions.this.global.Symbol]))(implicit bf: scala.collection.generic.CanBuildFrom[List[(MatrixExhaustiveness.this.context.PatternVar, Int)],(Int, List[MatrixAdditions.this.global.Symbol]),List[(Int, List[MatrixAdditions.this.global.Symbol])]])List[(Int, List[MatrixAdditions.this.global.Symbol])]">map</a> <a href="#796576" title="(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">{</a> <span class="keyword">case</span> <span title="(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">(</span><a title="MatrixExhaustiveness.this.context.PatternVar" id="796579">pv</a>, <a title="Int" id="796580">i</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// okay, now reset the flag</span>
          <a href="#796579" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#793807" title="=&gt; MatrixAdditions.this.global.Symbol">sym</a> <a href="../symtab/Symbols.scala.html#509262" title="(mask: Long)MatrixAdditions.this.global.Symbol">resetFlag</a> <span title="Long(4096L)">MUTABLE</span>
          <span class="comment">// have to filter out children which cannot match: see ticket #3683 for an example</span>
          <span class="keyword">val</span> <a title="List[MatrixAdditions.this.global.Symbol]" id="796581">kids</a> = <a href="#796579" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#793808" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#509354" title="=&gt; List[MatrixAdditions.this.global.Symbol]">sealedDescendants</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: MatrixAdditions.this.global.Symbol =&gt; Boolean)List[MatrixAdditions.this.global.Symbol]">filter</a> <span class="delimiter">(</span><a href="#796592" title="MatrixAdditions.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; MatrixAdditions.this.global.Type">tpe</a> <a href="../symtab/Types.scala.html#507222" title="(that: MatrixAdditions.this.global.Type)Boolean">matchesPattern</a> <a href="#796579" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#793808" title="=&gt; MatrixAdditions.this.global.Type">tpe</a><span class="delimiter">)</span>

          <a href="../../../Predef.scala.html#9589" title="(x: Int)ArrowAssoc[Int]">i</a> <a href="../../../Predef.scala.html#57653" title="(y: List[MatrixAdditions.this.global.Symbol])(Int, List[MatrixAdditions.this.global.Symbol])">-&gt;</a> <a href="#796581" title="List[MatrixAdditions.this.global.Symbol]">kids</a>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="List[List[ExhaustivenessChecker.this.Combo]]" id="796545">folded</a> =
          <a href="#796544" title="List[(Int, List[MatrixAdditions.this.global.Symbol])]">collected</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71042" title="(z: List[List[ExhaustivenessChecker.this.Combo]])(f: ((Int, List[MatrixAdditions.this.global.Symbol]), List[List[ExhaustivenessChecker.this.Combo]]) =&gt; List[List[ExhaustivenessChecker.this.Combo]])List[List[ExhaustivenessChecker.this.Combo]]">foldRight</a><span class="delimiter">(</span>List<span class="delimiter">[</span>List<span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">]</span><a href="../../../collection/immutable/List.scala.html#13700" title="object Nil" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="(Int, List[MatrixAdditions.this.global.Symbol])" id="796669">c</a>, <a title="List[List[ExhaustivenessChecker.this.Combo]]" id="796670">xs</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="Int" id="796672">i</a>, <a href="../../../Tuple2.scala.html#53404" title="List[MatrixAdditions.this.global.Symbol]" id="796673">syms</a><span class="delimiter">)</span> = <a href="#796669" title="(Int, List[MatrixAdditions.this.global.Symbol])">c</a> <span title="(Int, List[MatrixAdditions.this.global.Symbol])" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">(</span><a title="Int" id="796676">i</a>, <a title="List[MatrixAdditions.this.global.Symbol]" id="796677">set</a><span class="delimiter">)</span> =&gt; <a href="../../../Tuple2.scala.html#53390" title="(_1: Int, _2: List[MatrixAdditions.this.global.Symbol])(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">(</a><a href="#796676" title="Int">i</a>, <a href="#796677" title="List[MatrixAdditions.this.global.Symbol]">set</a>.<a href="../../../collection/immutable/List.scala.html#49162" title="=&gt; List[MatrixAdditions.this.global.Symbol]">toList</a><span class="delimiter">)</span> <span class="delimiter">}</span>
            <a href="#796670" title="List[List[ExhaustivenessChecker.this.Combo]]">xs</a> <span title="List[List[ExhaustivenessChecker.this.Combo]]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#13700" title="List[List[ExhaustivenessChecker.this.Combo]]">Nil</a>  =&gt; <a href="#796673" title="List[MatrixAdditions.this.global.Symbol]">syms</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: MatrixAdditions.this.global.Symbol =&gt; List[ExhaustivenessChecker.this.Combo])(implicit bf: scala.collection.generic.CanBuildFrom[List[MatrixAdditions.this.global.Symbol],List[ExhaustivenessChecker.this.Combo],List[List[ExhaustivenessChecker.this.Combo]]])List[List[ExhaustivenessChecker.this.Combo]]">map</a> <span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="796710">s</a> =&gt; <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: ExhaustivenessChecker.this.Combo*)List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">(</span><a href="#796451" title="(index: Int, sym: MatrixAdditions.this.global.Symbol)ExhaustivenessChecker.this.Combo">Combo</a><span class="delimiter">(</span><a href="#796672" title="Int">i</a>, <a href="#796710" title="MatrixAdditions.this.global.Symbol">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="List[List[ExhaustivenessChecker.this.Combo]]">_</span>    =&gt; <span class="keyword">for</span> <span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="796768">s</a> &lt;- <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: MatrixAdditions.this.global.Symbol =&gt; scala.collection.GenTraversableOnce[List[ExhaustivenessChecker.this.Combo]])(implicit bf: scala.collection.generic.CanBuildFrom[List[MatrixAdditions.this.global.Symbol],List[ExhaustivenessChecker.this.Combo],List[List[ExhaustivenessChecker.this.Combo]]])List[List[ExhaustivenessChecker.this.Combo]]">syms</a> ; <a title="List[ExhaustivenessChecker.this.Combo]" id="796785">rest</a> &lt;- <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: List[ExhaustivenessChecker.this.Combo] =&gt; List[ExhaustivenessChecker.this.Combo])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[ExhaustivenessChecker.this.Combo]],List[ExhaustivenessChecker.this.Combo],List[List[ExhaustivenessChecker.this.Combo]]])List[List[ExhaustivenessChecker.this.Combo]]">xs</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#796451" title="(index: Int, sym: MatrixAdditions.this.global.Symbol)ExhaustivenessChecker.this.Combo">Combo</a><span class="delimiter">(</span><a href="#796672" title="Int">i</a>, <a href="#796768" title="MatrixAdditions.this.global.Symbol">s</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: ExhaustivenessChecker.this.Combo)List[ExhaustivenessChecker.this.Combo]">::</a> <a href="#796785" title="List[ExhaustivenessChecker.this.Combo]">rest</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <a href="#796545" title="List[List[ExhaustivenessChecker.this.Combo]]">folded</a> <a href="../../../collection/TraversableLike.scala.html#49052" title="(p: List[ExhaustivenessChecker.this.Combo] =&gt; Boolean)List[List[ExhaustivenessChecker.this.Combo]]">filterNot</a> <span class="delimiter">(</span><a title="List[ExhaustivenessChecker.this.Combo]" id="796851">combo</a> =&gt; <a href="#796243" title="=&gt; List[MatrixExhaustiveness.this.Row]">rows</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71036" title="(p: MatrixExhaustiveness.this.Row =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="MatrixExhaustiveness.this.Row" id="796858">r</a> =&gt; <a href="#796249" title="(row: MatrixExhaustiveness.this.Row, combos: List[ExhaustivenessChecker.this.Combo])Boolean">rowCoversCombo</a><span class="delimiter">(</span><a href="#796858" title="MatrixExhaustiveness.this.Row">r</a>, <a href="#796851" title="List[ExhaustivenessChecker.this.Combo]">combo</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(xs: List[ExhaustivenessChecker.this.Combo], i: Int)String" id="796253">mkPad</a><span class="delimiter">(</span><a title="List[ExhaustivenessChecker.this.Combo]" id="796859">xs</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">[</span>Combo<span class="delimiter">]</span>, <a title="Int" id="796860">i</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#796859" title="List[ExhaustivenessChecker.this.Combo]">xs</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#13700" title="String">Nil</a>                    =&gt; <a href="MatchSupport.scala.html#792503" title="(s: String)String">pad</a><span class="delimiter">(</span><span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">Combo</span><span class="delimiter">(</span><a title="Int" id="796892">j</a>, <a title="MatrixAdditions.this.global.Symbol" id="796893">sym</a><span class="delimiter">)</span> :: <a title="List[ExhaustivenessChecker.this.Combo]" id="796894">rest</a>  =&gt; <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#796892" title="Int">j</a> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <a href="#796860" title="Int">i</a><span class="delimiter">)</span> <a href="MatchSupport.scala.html#792503" title="(s: String)String">pad</a><span class="delimiter">(</span><a href="#796893" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; MatrixAdditions.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#796253" title="(xs: List[ExhaustivenessChecker.this.Combo], i: Int)String">mkPad</a><span class="delimiter">(</span><a href="#796894" title="List[ExhaustivenessChecker.this.Combo]">rest</a>, <a href="#796860" title="Int">i</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(open: List[ExhaustivenessChecker.this.Combo])String" id="796254">mkMissingStr</a><span class="delimiter">(</span><a title="List[ExhaustivenessChecker.this.Combo]" id="796904">open</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">)</span> =
        <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;missing combination %s\n&quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a> <a href="#796241" title="=&gt; MatrixExhaustiveness.this.context.PatternVarGroup">tvars</a>.<a href="Matrix.scala.html#794909" title="=&gt; scala.collection.immutable.Range">indices</a>.<a href="../../../collection/TraversableLike.scala.html#49041" title="(f: Int =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],String,scala.collection.immutable.IndexedSeq[String]])scala.collection.immutable.IndexedSeq[String]">map</a><a href="../../../collection/immutable/IndexedSeq.scala.html#56627" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,String,scala.collection.immutable.IndexedSeq[String]]" class="delimiter">(</a><a href="#796253" title="(xs: List[ExhaustivenessChecker.this.Combo], i: Int)String">mkPad</a><span class="delimiter">(</span><a href="#796904" title="List[ExhaustivenessChecker.this.Combo]">open</a>, <a href="#796932" title="Int">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#53710" title="=&gt; String">mkString</a>

      <span class="comment">/** The only public method. */</span>
      <span class="keyword">def</span> <a title="=&gt; MatrixExhaustiveness.this.Rep" id="796255">check</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="=&gt; String" id="796996">errMsg</a> = <span class="delimiter">(</span><a href="#796251" title="=&gt; List[List[ExhaustivenessChecker.this.Combo]]">inexhaustives</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: List[ExhaustivenessChecker.this.Combo] =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[List[ExhaustivenessChecker.this.Combo]],String,List[String]])List[String]">map</a> <a href="#796254" title="(open: List[ExhaustivenessChecker.this.Combo])String">mkMissingStr</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#53710" title="=&gt; String">mkString</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#796251" title="=&gt; List[List[ExhaustivenessChecker.this.Combo]]">inexhaustives</a>.<a href="../../../collection/TraversableOnce.scala.html#53619" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span>
          <a href="Matrix.scala.html#793735" title="=&gt; MatrixAdditions.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#500979" title="(pos: MatrixAdditions.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#796309" title="MatrixAdditions.this.global.Position">matchPos</a>, <span title="java.lang.String(&quot;match is not exhaustive!\012&quot;)" class="string">&quot;match is not exhaustive!\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#796996" title="=&gt; String">errMsg</a><span class="delimiter">)</span>

        <a href="#796308" title="MatrixExhaustiveness.this.Rep">rep</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>