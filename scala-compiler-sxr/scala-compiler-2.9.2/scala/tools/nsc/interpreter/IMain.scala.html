<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interpreter/IMain.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interpreter

<span class="keyword">import</span> <a href="../../../Predef.scala.html#1992" title="object Predef">Predef</a>.<span class="delimiter">{</span> println =&gt; _, _ <span class="delimiter">}</span>
<span class="keyword">import</span> util.<span class="delimiter">{</span> Set =&gt; _, _ <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.sys.BooleanProp
<span class="keyword">import</span> <a href="../util/Exceptional.scala.html#42659" title="object scala.tools.nsc.util.Exceptional">Exceptional</a>.unwrap
<span class="keyword">import</span> <a href="../util/ScalaClassLoader.scala.html#43109" title="object scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a>.URLClassLoader
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> io.VirtualDirectory
<span class="keyword">import</span> scala.tools.nsc.io.AbstractFile
<span class="keyword">import</span> reporters._
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> scala.reflect.generic.Names
<span class="keyword">import</span> scala.tools.util.PathResolver
<span class="keyword">import</span> scala.tools.nsc.util.<span class="delimiter">{</span> ScalaClassLoader, Exceptional <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="../util/ScalaClassLoader.scala.html#43109" title="object scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a>.URLClassLoader
<span class="keyword">import</span> <a href="../util/Exceptional.scala.html#42659" title="object scala.tools.nsc.util.Exceptional">Exceptional</a>.unwrap
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.<a href="../../../PartialFunction.scala.html#336" title="object PartialFunction">PartialFunction</a>.<span class="delimiter">{</span> cond, condOpt <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.<a href="../../../util/control/Exception.scala.html#44519" title="object scala.util.control.Exception">Exception</a>.<span class="delimiter">{</span> ultimately <span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.NameTransformer
<span class="keyword">import</span> <a href="#31897" title="object scala.tools.nsc.interpreter.IMain">IMain</a>._

<span class="comment">/** An interpreter for Scala code.
 *
 *  The main public entry points are compile(), interpret(), and bind().
 *  The compile() method loads a complete Scala file.  The interpret() method
 *  executes one line of Scala code at the request of the user.  The bind()
 *  method binds an object to a variable that can then be used by later
 *  interpreted code.
 *
 *  The overall approach is based on compiling the requested code and then
 *  using a Java classloader and Java reflection to run the code
 *  and access its results.
 *
 *  In more detail, a single compiler instance is used
 *  to accumulate all successfully compiled or interpreted Scala code.  To
 *  &quot;interpret&quot; a line of code, the compiler generates a fresh object that
 *  includes the line of code and which has public member(s) to export
 *  all variables defined by that code.  To extract the result of an
 *  interpreted line to show the user, a second &quot;result object&quot; is created
 *  which imports the variables exported by the above object and then
 *  exports members called &quot;$eval&quot; and &quot;$print&quot;. To accomodate user expressions
 *  that read from variables or methods defined in previous statements, &quot;import&quot;
 *  statements are used.
 *
 *  This interpreter shares the strengths and weaknesses of using the
 *  full compiler-to-Java.  The main strength is that interpreted code
 *  behaves exactly as does compiled code, including running at full speed.
 *  The main weakness is that redefining classes and methods is not handled
 *  properly, because rebinding at the Java level is technically difficult.
 *
 *  @author Moez A. Abdel-Gawad
 *  @author Lex Spoon
 */</span>
<span class="keyword">class</span> <a title="class IMain extends java.lang.Object with scala.tools.nsc.interpreter.Imports with ScalaObject" id="31896">IMain</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="523237">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a>, <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.package.JPrintWriter" id="523238">out</a>: <span title="scala.tools.nsc.interpreter.package.JPrintWriter">JPrintWriter</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Imports.scala.html#32109" title="scala.tools.nsc.interpreter.Imports">Imports</a> <span class="delimiter">{</span>
  imain =&gt;

  <span class="comment">/** construct an interpreter that reports to Console */</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.interpreter.IMain" id="522988" class="keyword">this</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="523185">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> = <a href="#31896" title="IMain.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#523185" title="scala.tools.nsc.Settings">settings</a>, <span title="scala.tools.nsc.NewLinePrintWriter" class="keyword">new</span> <a href="../NewLinePrintWriter.scala.html#22668" title="scala.tools.nsc.NewLinePrintWriter">NewLinePrintWriter</a><span class="delimiter">(</span><span title="scala.tools.nsc.ConsoleWriter" class="keyword">new</span> <a href="../ConsoleWriter.scala.html#22767" title="scala.tools.nsc.ConsoleWriter">ConsoleWriter</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.IMain" id="522989" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#522988" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.interpreter.IMain" class="keyword">this</a><span class="delimiter">(</span><a href="../Settings.scala.html#469589" title="()scala.tools.nsc.Settings" class="keyword">new</a> <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Logger" id="522991">repllog</a>: <a href="Logger.scala.html#32439" title="scala.tools.nsc.interpreter.Logger">Logger</a> = <a href="#742254" title="java.lang.Object with scala.tools.nsc.interpreter.Logger{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.tools.nsc.interpreter.Logger" id="742254">Logger</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.package.JPrintWriter" id="742258">out</a>: <span title="scala.tools.nsc.interpreter.package.JPrintWriter">JPrintWriter</span> = <a href="#31896" title="IMain.this.type">imain</a>.<a href="#523238" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>
    <span class="keyword">val</span> <a title="Boolean" id="742260">isInfo</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a>  = <a href="../../../sys/BooleanProp.scala.html#20722" title="object scala.sys.BooleanProp">BooleanProp</a> <a href="../../../sys/BooleanProp.scala.html#460942" title="implicit scala.sys.BooleanProp.booleanPropAsBoolean : (b: scala.sys.BooleanProp)Boolean">keyExists</a> <span title="java.lang.String(&quot;scala.repl.info&quot;)" class="string">&quot;scala.repl.info&quot;</span>
    <span class="keyword">val</span> <a title="Boolean" id="742262">isDebug</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <a href="../../../sys/BooleanProp.scala.html#20722" title="object scala.sys.BooleanProp">BooleanProp</a> <a href="../../../sys/BooleanProp.scala.html#460942" title="implicit scala.sys.BooleanProp.booleanPropAsBoolean : (b: scala.sys.BooleanProp)Boolean">keyExists</a> <span title="java.lang.String(&quot;scala.repl.debug&quot;)" class="string">&quot;scala.repl.debug&quot;</span>
    <span class="keyword">val</span> <a title="Boolean" id="742264">isTrace</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <a href="../../../sys/BooleanProp.scala.html#20722" title="object scala.sys.BooleanProp">BooleanProp</a> <a href="../../../sys/BooleanProp.scala.html#460942" title="implicit scala.sys.BooleanProp.booleanPropAsBoolean : (b: scala.sys.BooleanProp)Boolean">keyExists</a> <span title="java.lang.String(&quot;scala.repl.trace&quot;)" class="string">&quot;scala.repl.trace&quot;</span>
  <span class="delimiter">}</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Formatting" id="522993">formatting</a>: <a href="Formatting.scala.html#31986" title="scala.tools.nsc.interpreter.Formatting">Formatting</a> = <a href="#742279" title="java.lang.Object with scala.tools.nsc.interpreter.Formatting{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.tools.nsc.interpreter.Formatting" id="742279">Formatting</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="742283">prompt</a> = <a href="../Properties.scala.html#23224" title="object scala.tools.nsc.Properties">Properties</a>.<a href="../Properties.scala.html#470281" title="=&gt; String">shellPromptString</a>
  <span class="delimiter">}</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="522995">reporter</a>: <a href="../reporters/ConsoleReporter.scala.html#34927" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = <span title="scala.tools.nsc.interpreter.ReplReporter" class="keyword">new</span> <a href="ReplReporter.scala.html#32505" title="scala.tools.nsc.interpreter.ReplReporter">ReplReporter</a><span class="delimiter">(</span><a href="#31896" title="scala.tools.nsc.interpreter.IMain" class="keyword">this</a><span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="#522992" title="=&gt; scala.tools.nsc.interpreter.Formatting">formatting</a>._
  <span class="keyword">import</span> <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<span class="delimiter">{</span> printMessage, withoutTruncating <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>nsc<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="522999">printResults</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span>   <span class="comment">// whether to print result lines</span>
  <span class="keyword">private</span><span class="delimiter">[</span>nsc<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="523002">totalSilence</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>  <span class="comment">// whether to print anything</span>

  <span class="comment">/** directory to save .class files to */</span>
  <span class="keyword">val</span> <a title="virtualDirectory extends scala.tools.nsc.io.VirtualDirectory" id="523004">virtualDirectory</a> = <a href="#742047" title="scala.tools.nsc.io.VirtualDirectory{def show(): Unit}" class="keyword">new</a> <a href="../io/VirtualDirectory.scala.html#33300" title="anonymous class $anon extends scala.tools.nsc.io.VirtualDirectory" id="742047">VirtualDirectory</a><span class="delimiter">(</span><span title="java.lang.String(&quot;(memory)&quot;)" class="string">&quot;(memory)&quot;</span>, <a href="../../../Option.scala.html#1737" title="object None">None</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(root: scala.tools.nsc.io.AbstractFile, indentLevel: Int)Unit" id="742075">pp</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="742077">root</a>: io.<a href="../io/AbstractFile.scala.html#33498" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="Int" id="742078">indentLevel</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="742082">spaces</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;    &quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#56548" title="(n: Int)String">*</a> <a href="#742078" title="Int">indentLevel</a>
      <a href="#523238" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>.<span title="(x$1: java.lang.String)Unit">println</span><span class="delimiter">(</span><a href="#742082" title="String">spaces</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#742077" title="scala.tools.nsc.io.AbstractFile">root</a>.<a href="../io/AbstractFile.scala.html#501000" title="=&gt; String">name</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#742077" title="scala.tools.nsc.io.AbstractFile">root</a>.<a href="../io/AbstractFile.scala.html#501013" title="=&gt; Boolean">isDirectory</a><span class="delimiter">)</span>
        <a href="#742077" title="scala.tools.nsc.io.AbstractFile">root</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[scala.tools.nsc.io.AbstractFile]">toList</a> <a href="../../../collection/SeqLike.scala.html#54178" title="(f: scala.tools.nsc.io.AbstractFile =&gt; String)(implicit ord: scala.math.Ordering[String])List[scala.tools.nsc.io.AbstractFile]">sortBy</a> <span class="delimiter">(</span><a href="#742098" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../io/AbstractFile.scala.html#501000" title="=&gt; String">name</a><span class="delimiter">)</span> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="742175">x</a> =&gt; <a href="#742075" title="(root: scala.tools.nsc.io.AbstractFile, indentLevel: Int)Unit">pp</a><span class="delimiter">(</span><a href="#742175" title="scala.tools.nsc.io.AbstractFile">x</a>, <a href="#742078" title="Int">indentLevel</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="comment">// print the contents hierarchically</span>
    <span class="keyword">def</span> <a title="()Unit" id="742076">show</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#742075" title="(root: scala.tools.nsc.io.AbstractFile, indentLevel: Int)Unit">pp</a><span class="delimiter">(</span><a href="#742047" title="scala.tools.nsc.io.VirtualDirectory{def show(): Unit}" class="keyword">this</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// This exists mostly because using the reporter too early leads to deadlock.</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="523006">echo</a><span class="delimiter">(</span><a title="String" id="742292">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../Console.scala.html#507" title="object Console">Console</a> <a href="../../../Console.scala.html#58055" title="(x: Any)Unit">println</a> <a href="#742292" title="String">msg</a> <span class="delimiter">}</span>

  <span class="comment">/** We're going to go to some trouble to initialize the compiler asynchronously.
   *  It's critical that nothing call into it until it's been initialized or we will
   *  run into unrecoverable issues, but the perceived repl startup time goes
   *  through the roof if we wait for it.  So we initialize it with a future and
   *  use a lazy val to ensure that any attempt to use the compiler object waits
   *  on the future.
   */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.tools.nsc.Global" id="523007">_compiler</a>: <a href="../Global.scala.html#22521" title="scala.tools.nsc.Global">Global</a> = <a href="#523067" title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global">newCompiler</a><span class="delimiter">(</span><a href="#523237" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="523010">_initializeComplete</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.util.BatchSourceFile]" id="523012">_initSources</a> = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: scala.tools.nsc.util.BatchSourceFile*)List[scala.tools.nsc.util.BatchSourceFile]">List</a><span class="delimiter">(</span><a href="../util/SourceFile.scala.html#501064" title="(sourceName: String, cs: Seq[Char])scala.tools.nsc.util.BatchSourceFile" class="keyword">new</a> <a href="../util/SourceFile.scala.html#42877" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&lt;init&gt;&quot;)" class="string">&quot;&lt;init&gt;&quot;</span>, <a href="../../../LowPriorityImplicits.scala.html#9503" title="implicit scala.LowPriorityImplicits.wrapString : (s: String)scala.collection.immutable.WrappedString" class="string">&quot;class $repl_$init { }&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="523013">_initialize</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a title="Nothing" id="742335" class="keyword">try</a> <span class="delimiter">{</span>
      <span title="IMain.this._compiler.Run" class="keyword">new</span> <a href="#523007" title="=&gt; scala.tools.nsc.Global">_compiler</a>.<a href="../Global.scala.html#478365" title="IMain.this._compiler.Run">Run</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../Global.scala.html#482575" title="(_sources: List[scala.tools.nsc.util.SourceFile])Unit">compileSources</a> <a href="#523012" title="=&gt; List[scala.tools.nsc.util.BatchSourceFile]">_initSources</a>
      <a href="#523010" title="(x$1: Boolean)Unit">_initializeComplete</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <a href="AbstractOrMissingHandler.scala.html#729180" title="()scala.tools.nsc.interpreter.AbstractOrMissingHandler[Nothing]">AbstractOrMissingHandler</a><a href="AbstractOrMissingHandler.scala.html#729006" title="scala.tools.nsc.interpreter.AbstractOrMissingHandler[Nothing]" id="742336" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// set up initialization future</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="() =&gt; Boolean" id="523015">_isInitialized</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Boolean = <span title="Null(null)" class="keyword">null</span>
  <span class="comment">// argument is a thunk to execute after init is done</span>
  <span class="keyword">def</span> <a title="(postInitSignal: =&gt; Unit)Unit" id="523017">initialize</a><span class="delimiter">(</span><a title="=&gt; Unit" id="740851">postInitSignal</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <a href="#31896" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523015" title="=&gt; () =&gt; Boolean">_isInitialized</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#523015" title="(x$1: () =&gt; Boolean)Unit">_isInitialized</a> = scala.concurrent.<a href="../../../concurrent/ops.scala.html#18288" title="object scala.concurrent.ops">ops</a> <a href="../../../concurrent/ops.scala.html#413990" title="scala.concurrent.FutureTaskRunner" id="742356">future</a> <a href="../../../Function0.scala.html#62187" title="() =&gt; Boolean" id="742352" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Boolean" id="742354">result</a> = <a href="#523013" title="()Boolean">_initialize</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#740851" title="=&gt; Unit">postInitSignal</a>
        <a href="#742354" title="Boolean">result</a>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="523018">initializeSynchronous</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#523019" title="=&gt; Boolean">isInitializeComplete</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523013" title="()Boolean">_initialize</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>, <a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="523019">isInitializeComplete</a> = <a href="#523010" title="=&gt; Boolean">_initializeComplete</a>

  <span class="comment">/** the public, go through the future compiler */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.Global" id="523021">global</a>: <a href="../Global.scala.html#22521" title="scala.tools.nsc.Global">Global</a> = <span class="delimiter">{</span>
    <span title="scala.tools.nsc.Global" class="keyword">if</span> <span class="delimiter">(</span><a href="#523019" title="=&gt; Boolean">isInitializeComplete</a><span class="delimiter">)</span> <a href="#523007" title="=&gt; scala.tools.nsc.Global">_compiler</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// If init hasn't been called yet you're on your own.</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523015" title="=&gt; () =&gt; Boolean">_isInitialized</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Warning: compiler accessed before init set up.  Assuming no postInit code.&quot;)" class="string">&quot;Warning: compiler accessed before init set up.  Assuming no postInit code.&quot;</span><span class="delimiter">)</span>
        <a href="#523017" title="(postInitSignal: =&gt; Unit)Unit">initialize</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="comment">// blocks until it is ; false means catastrophic failure</span>
      <span title="scala.tools.nsc.Global" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Function0.scala.html#62187" title="()Boolean">_isInitialized</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#523007" title="=&gt; scala.tools.nsc.Global">_compiler</a>
      <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `global` for access to the compiler instance.&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="IMain.this.global.type" id="523023">compiler</a>: global.<span class="keyword">type</span> = <a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a>

  <span class="comment">// import global.{ treeWrapper =&gt; _, _ }</span>
  <span class="keyword">import</span> <a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<span class="delimiter">{</span> ScalaPackage, JavaLangPackage, PredefModule, RootClass <span class="delimiter">}</span>
  <span class="comment">//</span>
  <span class="comment">// private implicit def privateTreeOps(t: Tree): List[Tree] = {</span>
  <span class="comment">//   (new Traversable[Tree] {</span>
  <span class="comment">//     def foreach[U](f: Tree =&gt; U): Unit = t foreach { x =&gt; f(x) ; () }</span>
  <span class="comment">//   }).toList</span>
  <span class="comment">// }</span>

  <span class="comment">// TODO: If we try to make naming a lazy val, we run into big time</span>
  <span class="comment">// scalac unhappiness with what look like cycles.  It has not been easy to</span>
  <span class="comment">// reduce, but name resolution clearly takes different paths.</span>
  <span class="keyword">object</span> <a title="object IMain.this.naming" id="523026">naming</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="IMain.this.global.type" id="742375">global</a>: imain.global.<span class="keyword">type</span> = <a href="#31896" title="IMain.this.type">imain</a>.<a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a>
  <span class="delimiter">}</span> <span class="keyword">with</span> <a href="Naming.scala.html#31614" title="scala.tools.nsc.interpreter.Naming">Naming</a> <span class="delimiter">{</span>
    <span class="comment">// make sure we don't overwrite their unwisely named res3 etc.</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="733177">freshUserVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="742388">name</a> = <span class="keyword">super</span>.<a href="Naming.scala.html#733168" title="()String">freshUserVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a> <a href="../../../collection/MapLike.scala.html#73205" title="(key: IMain.this.global.Name)Boolean">contains</a> <a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)IMain.this.global.TermName">name</a><span class="delimiter">)</span> <a href="#733177" title="()String">freshUserVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#742388" title="String">name</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)Boolean" id="733178">isInternalVarName</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="742394">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <a href="Naming.scala.html#733165" title="(name: String)Boolean">isInternalVarName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#742394" title="IMain.this.global.Name">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#523026" title="object IMain.this.naming">naming</a>._

  <span class="comment">// object dossiers extends {</span>
  <span class="comment">//   val intp: imain.type = imain</span>
  <span class="comment">// } with Dossiers { }</span>
  <span class="comment">// import dossiers._</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="memberHandlers extends java.lang.Object with scala.tools.nsc.interpreter.MemberHandlers" id="523030">memberHandlers</a> = <a href="#733147" title="java.lang.Object with scala.tools.nsc.interpreter.MemberHandlers{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.tools.nsc.interpreter.MemberHandlers" id="733147" class="delimiter">{</a>
    <span class="keyword">val</span> <a title="IMain.this.type" id="733210">intp</a>: imain.<span class="keyword">type</span> = <a href="#31896" title="IMain.this.type">imain</a>
  <span class="delimiter">}</span> <span class="keyword">with</span> <a href="MemberHandlers.scala.html#30534" title="scala.tools.nsc.interpreter.MemberHandlers">MemberHandlers</a>
  <span class="keyword">import</span> <a href="#523029" title="=&gt; java.lang.Object with scala.tools.nsc.interpreter.MemberHandlers{val intp: IMain.this.type}">memberHandlers</a>._

  <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="523032">atPickler</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523034">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="742643">op</a>: =&gt; T<span class="delimiter">)</span>: <a href="#523034" title="T">T</a> = <a href="../symtab/SymbolTable.scala.html#478184" title="(ph: scala.tools.nsc.Phase)(op: =&gt; T)T">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#478362" title="=&gt; IMain.this.global.Run">currentRun</a>.<a href="../Global.scala.html#482528" title="=&gt; scala.tools.nsc.Phase">picklerPhase</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#742643" title="=&gt; T">op</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="523035">afterTyper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523037">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="738871">op</a>: =&gt; T<span class="delimiter">)</span>: <a href="#523037" title="T">T</a> = <a href="../symtab/SymbolTable.scala.html#478184" title="(ph: scala.tools.nsc.Phase)(op: =&gt; T)T">atPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#478362" title="=&gt; IMain.this.global.Run">currentRun</a>.<a href="../Global.scala.html#482526" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>.<a href="../Phase.scala.html#505144" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#738871" title="=&gt; T">op</a><span class="delimiter">)</span>

  <span class="comment">/** Temporarily be quiet */</span>
  <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="523038">beQuietDuring</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523040">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="741672">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#523040" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="742658">saved</a> = <a href="#522999" title="=&gt; Boolean">printResults</a>
    <a href="#522999" title="(x$1: Boolean)Unit">printResults</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">try</span> <a href="#741672" title="=&gt; T">body</a>
    <span class="keyword">finally</span> <a href="#522999" title="(x$1: Boolean)Unit">printResults</a> = <a href="#742658" title="Boolean">saved</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](operation: =&gt; T)T" id="523041">beSilentDuring</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523043">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="734585">operation</a>: =&gt; T<span class="delimiter">)</span>: <a href="#523043" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="742659">saved</a> = <a href="#523002" title="=&gt; Boolean">totalSilence</a>
    <a href="#523002" title="(x$1: Boolean)Unit">totalSilence</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">try</span> <a href="#734585" title="=&gt; T">operation</a>
    <span class="keyword">finally</span> <a href="#523002" title="(x$1: Boolean)Unit">totalSilence</a> = <a href="#742659" title="Boolean">saved</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](code: String)scala.tools.nsc.interpreter.package.IR.Result" id="523044">quietRun</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523046">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="741669">code</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523038" title="(body: =&gt; scala.tools.nsc.interpreter.package.IR.Result)scala.tools.nsc.interpreter.package.IR.Result">beQuietDuring</a><span class="delimiter">(</span><a href="#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a><span class="delimiter">(</span><a href="#741669" title="String">code</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](label: String, alt: =&gt; T)PartialFunction[Throwable,T]" id="523047">logAndDiscard</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523049">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="742660">label</a>: <span title="String">String</span>, <a title="=&gt; T" id="742661">alt</a>: =&gt; T<span class="delimiter">)</span>: <a href="../../../PartialFunction.scala.html#335" title="PartialFunction[Throwable,T]">PartialFunction</a><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> = <a href="#742666" title="T" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="T" id="742667">t</a> =&gt; <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="#742660" title="String">label</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#742667" title="Throwable">t</a><span class="delimiter">)</span> ; <a href="#742661" title="=&gt; T">alt</a>
  <span class="delimiter">}</span>

  <span class="comment">/** whether to bind the lastException variable */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="523051">bindExceptions</a> = <span title="Boolean(true)" class="keyword">true</span>
  <span class="comment">/** takes AnyRef because it may be binding a Throwable or an Exceptional */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="523053">withLastExceptionLock</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523055">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="742668">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#523055" title="T">T</a> = <span class="delimiter">{</span>
    <a href="../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#523051" title="=&gt; Boolean">bindExceptions</a>, <span title="java.lang.String(&quot;withLastExceptionLock called incorrectly.&quot;)" class="string">&quot;withLastExceptionLock called incorrectly.&quot;</span><span class="delimiter">)</span>
    <a href="#523051" title="(x$1: Boolean)Unit">bindExceptions</a> = <span title="Boolean(false)" class="keyword">false</span>

    <a title="T" id="742676" class="keyword">try</a>     <a href="#523038" title="(body: =&gt; T)T">beQuietDuring</a><span class="delimiter">(</span><a href="#742668" title="=&gt; T">body</a><span class="delimiter">)</span>
    <span class="keyword">catch</span>   <a href="#523047" title="(label: String, alt: =&gt; T)PartialFunction[Throwable,T]">logAndDiscard</a><a href="../../../PartialFunction.scala.html#53462" title="PartialFunction[Throwable,T]" id="742677" class="delimiter">(</a><span title="java.lang.String(&quot;bindLastException&quot;)" class="string">&quot;bindLastException&quot;</span>, <span title="Null(null)" class="keyword">null</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#523055" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#523051" title="(x$1: Boolean)Unit">bindExceptions</a> = <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="comment">/** A string representing code to be wrapped around all lines. */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="String" id="523057">_executionWrapper</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="523059">executionWrapper</a> = <a href="#523057" title="=&gt; String">_executionWrapper</a>
  <span class="keyword">def</span> <a title="(code: String)Unit" id="523060">setExecutionWrapper</a><span class="delimiter">(</span><a title="String" id="739562">code</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523057" title="(x$1: String)Unit">_executionWrapper</a> = <a href="#739562" title="String">code</a>
  <span class="keyword">def</span> <a title="()Unit" id="523061">clearExecutionWrapper</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#523057" title="(x$1: String)Unit">_executionWrapper</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Line.Manager" id="523063">lineManager</a> = <a href="#523066" title="()scala.tools.nsc.interpreter.Line.Manager">createLineManager</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** interpreter settings */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.ISettings" id="523065">isettings</a> = <span title="scala.tools.nsc.interpreter.ISettings" class="keyword">new</span> <a href="ISettings.scala.html#32460" title="scala.tools.nsc.interpreter.ISettings">ISettings</a><span class="delimiter">(</span><a href="#31896" title="scala.tools.nsc.interpreter.IMain" class="keyword">this</a><span class="delimiter">)</span>

  <span class="comment">/** Create a line manager.  Overridable.  */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.Line.Manager" id="523066">createLineManager</a><span class="delimiter">(</span><span class="delimiter">)</span>: Line.<a href="Line.scala.html#737192" title="scala.tools.nsc.interpreter.Line.Manager">Manager</a> =
    <span title="scala.tools.nsc.interpreter.Line.Manager" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplProps.scala.html#30982" title="object scala.tools.nsc.interpreter.ReplPropsKludge">ReplPropsKludge</a>.<a href="ReplProps.scala.html#737208" title="(settings: scala.tools.nsc.Settings)Boolean">noThreadCreation</a><span class="delimiter">(</span><a href="#523237" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <span title="scala.tools.nsc.interpreter.Line.Manager" class="keyword">new</span> <a href="Line.scala.html#30685" title="object scala.tools.nsc.interpreter.Line">Line</a>.<a href="Line.scala.html#737192" title="scala.tools.nsc.interpreter.Line.Manager">Manager</a>

  <span class="comment">/** Instantiate a compiler.  Overridable. */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global" id="523067">newCompiler</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="742296">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.reporters.Reporter" id="742297">reporter</a>: <a href="../reporters/Reporter.scala.html#34933" title="scala.tools.nsc.reporters.Reporter">Reporter</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#742296" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/MutableSettings.scala.html#469548" title="=&gt; settings.OutputDirs">outputDirs</a> <a href="../settings/MutableSettings.scala.html#470107" title="(dir: scala.tools.nsc.io.AbstractFile)Unit">setSingleOutput</a> <a href="#523004" title="=&gt; scala.tools.nsc.io.VirtualDirectory{def show(): Unit}">virtualDirectory</a>
    <a href="#742296" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469807" title="=&gt; settings.BooleanSetting">exposeEmptyPackage</a>.<a href="../settings/MutableSettings.scala.html#470031" title="(arg: settings.exposeEmptyPackage.T)Unit">value</a> = <span title="Boolean(true)" class="keyword">true</span>

    <span title="scala.tools.nsc.Global" class="keyword">new</span> <a href="../Global.scala.html#22521" title="scala.tools.nsc.Global">Global</a><span class="delimiter">(</span><a href="#742296" title="scala.tools.nsc.Settings">settings</a>, <a href="#742297" title="scala.tools.nsc.reporters.Reporter">reporter</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Parent classloader.  Overridable. */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.ClassLoader" id="523068">parentClassLoader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> =
    <a href="#523237" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/MutableSettings.scala.html#469558" title="=&gt; Option[java.lang.ClassLoader]">explicitParentLoader</a>.<a href="../../../Option.scala.html#48474" title="(default: =&gt; java.lang.ClassLoader)java.lang.ClassLoader">getOrElse</a><span class="delimiter">(</span> <a href="#31896" title="IMain.this.type" class="keyword">this</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.ClassLoader">getClassLoader</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">)</span>

  <span class="comment">/** the compiler's classpath, as URL's */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[java.net.URL]" id="523070">compilerClasspath</a> = <a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#478212" title="=&gt; scala.tools.nsc.util.ClassPath[_]">classPath</a>.<a href="../util/ClassPath.scala.html#505670" title="=&gt; List[java.net.URL]">asURLs</a>

  <span class="comment">/* A single class loader is used for all commands interpreted by this Interpreter.
     It would also be possible to create a new class loader for each command
     to interpret.  The advantages of the current approach are:

       - Expressions are only evaluated one time.  This is especially
         significant for I/O, e.g. &quot;val x = Console.readLine&quot;

     The main disadvantage is:

       - Objects, classes, and methods cannot be rebound.  Instead, definitions
         shadow the old ones, and old code objects refer to the old
         definitions.
  */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.tools.nsc.interpreter.AbstractFileClassLoader" id="523072">_classLoader</a>: <a href="AbstractFileClassLoader.scala.html#32571" title="scala.tools.nsc.interpreter.AbstractFileClassLoader">AbstractFileClassLoader</a> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">def</span> <a title="()Unit" id="523074">resetClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Setting new classloader: was &quot;)" class="string">&quot;Setting new classloader: was &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#523072" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">_classLoader</a><span class="delimiter">)</span>
    <a href="#523072" title="(x$1: scala.tools.nsc.interpreter.AbstractFileClassLoader)Unit">_classLoader</a> = <a href="#523076" title="()scala.tools.nsc.interpreter.AbstractFileClassLoader">makeClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader" id="523075">classLoader</a>: <a href="AbstractFileClassLoader.scala.html#32571" title="scala.tools.nsc.interpreter.AbstractFileClassLoader">AbstractFileClassLoader</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523072" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">_classLoader</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#523074" title="()Unit">resetClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#523072" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">_classLoader</a>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.AbstractFileClassLoader" id="523076">makeClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="AbstractFileClassLoader.scala.html#32571" title="scala.tools.nsc.interpreter.AbstractFileClassLoader">AbstractFileClassLoader</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" id="742700">parent</a> =
      <span title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" class="keyword">if</span> <span class="delimiter">(</span><a href="#523068" title="=&gt; java.lang.ClassLoader">parentClassLoader</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>  <a href="../util/ScalaClassLoader.scala.html#43109" title="object scala.tools.nsc.util.ScalaClassLoader">ScalaClassLoader</a> <a href="../util/ScalaClassLoader.scala.html#484512" title="(urls: Seq[java.net.URL], parent: java.lang.ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a> <a href="#523069" title="=&gt; List[java.net.URL]">compilerClasspath</a>
      <span class="keyword">else</span>                            <span title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" class="keyword">new</span> <a href="../util/ScalaClassLoader.scala.html#484507" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">URLClassLoader</a><span class="delimiter">(</span><a href="#523069" title="=&gt; List[java.net.URL]">compilerClasspath</a>, <a href="#523068" title="=&gt; java.lang.ClassLoader">parentClassLoader</a><span class="delimiter">)</span>

    <a href="#742708" title="scala.tools.nsc.interpreter.AbstractFileClassLoader" class="keyword">new</a> <a href="AbstractFileClassLoader.scala.html#32571" title="anonymous class $anon extends scala.tools.nsc.interpreter.AbstractFileClassLoader" id="742708">AbstractFileClassLoader</a><span class="delimiter">(</span><a href="#523004" title="=&gt; scala.tools.nsc.io.VirtualDirectory{def show(): Unit}">virtualDirectory</a>, <a href="#742700" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">parent</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">/** Overridden here to try translating a simple name to the generated
       *  class name if the original attempt fails.  This method is used by
       *  getResourceAsStream as well as findClass.
       */</span>
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)scala.tools.nsc.io.AbstractFile" id="742736">findAbstractFile</a><span class="delimiter">(</span><a title="String" id="742737">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../io/AbstractFile.scala.html#33498" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span class="delimiter">{</span>
        <a href="#742708" title="scala.tools.nsc.interpreter.AbstractFileClassLoader" class="keyword">super</a>.<a href="AbstractFileClassLoader.scala.html#727646" title="(name: String)scala.tools.nsc.io.AbstractFile">findAbstractFile</a><span class="delimiter">(</span><a href="#742737" title="String">name</a><span class="delimiter">)</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="comment">// deadlocks on startup if we try to translate names too early</span>
          <span class="keyword">case</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">null</span> <span class="keyword">if</span> <a href="#523019" title="=&gt; Boolean">isInitializeComplete</a> =&gt;
            <a href="#523079" title="(simpleName: String)Option[String]">generatedName</a><span class="delimiter">(</span><a href="#742737" title="String">name</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48480" title="(f: String =&gt; scala.tools.nsc.io.AbstractFile)Option[scala.tools.nsc.io.AbstractFile]">map</a> <span class="delimiter">(</span><a title="String" id="742745">x</a> =&gt; <a href="#742708" title="scala.tools.nsc.interpreter.AbstractFileClassLoader" class="keyword">super</a>.<a href="AbstractFileClassLoader.scala.html#727646" title="(name: String)scala.tools.nsc.io.AbstractFile">findAbstractFile</a><span class="delimiter">(</span><a href="#742745" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48477" title="(implicit ev: &lt;:&lt;[Null,scala.tools.nsc.io.AbstractFile])scala.tools.nsc.io.AbstractFile">orNull</a>
          <span class="keyword">case</span> <a title="scala.tools.nsc.io.AbstractFile" id="742754">file</a>                         =&gt;
            <a href="#742754" title="scala.tools.nsc.io.AbstractFile">file</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.AbstractFileClassLoader" id="523077">getInterpreterClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#523075" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a>

  <span class="comment">// Set the current Java &quot;context&quot; class loader to this interpreter's class loader</span>
  <span class="keyword">def</span> <a title="()Unit" id="523078">setContextClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#523075" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a>.<a href="../util/ScalaClassLoader.scala.html#484624" title="()Unit">setAsContext</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** Given a simple repl-defined name, returns the real name of
   *  the class representing it, e.g. for &quot;Bippy&quot; it may return
   *  {{{
   *    $line19.$read$$iw$$iw$$iw$$iw$$iw$$iw$$iw$$iw$Bippy
   *  }}}
   */</span>
  <span class="keyword">def</span> <a title="(simpleName: String)Option[String]" id="523079">generatedName</a><span class="delimiter">(</span><a title="String" id="742739">simpleName</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#742739" title="String">simpleName</a> <span title="(x$1: java.lang.String)Boolean">endsWith</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span> <a href="#523081" title="(id: String)Option[java.lang.String]">optFlatName</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">simpleName</a>.<a href="../../../collection/IndexedSeqOptimized.scala.html#55966" title="=&gt; String">init</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48480" title="(f: java.lang.String =&gt; java.lang.String)Option[java.lang.String]">map</a> <span class="delimiter">(</span><a href="#742874" title="java.lang.String">_</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#523081" title="(id: String)Option[java.lang.String]">optFlatName</a><span class="delimiter">(</span><a href="#742739" title="String">simpleName</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(id: String)java.lang.String" id="523080">flatName</a><span class="delimiter">(</span><a title="String" id="736872">id</a>: <span title="String">String</span><span class="delimiter">)</span>    = <a href="#523081" title="(id: String)Option[java.lang.String]">optFlatName</a><span class="delimiter">(</span><a href="#736872" title="String">id</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; java.lang.String)java.lang.String">getOrElse</a> <a href="#736872" title="String">id</a>
  <span class="keyword">def</span> <a title="(id: String)Option[java.lang.String]" id="523081">optFlatName</a><span class="delimiter">(</span><a title="String" id="736577">id</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523119" title="(line: String)Option[IMain.this.Request]">requestForIdent</a><span class="delimiter">(</span><a href="#736577" title="String">id</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48480" title="(f: IMain.this.Request =&gt; java.lang.String)Option[java.lang.String]">map</a> <span class="delimiter">(</span><a href="#736586" title="IMain.this.Request">_</a> <a href="#733967" title="(name: String)java.lang.String">fullFlatName</a> <a href="#736577" title="String">id</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; List[IMain.this.global.Name]" id="523082">allDefinedNames</a> = <a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a>.<a href="../../../collection/MapLike.scala.html#73210" title="=&gt; Iterable[IMain.this.global.Name]">keys</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[IMain.this.global.Name]">toList</a> <a href="../../../collection/SeqLike.scala.html#54178" title="(f: IMain.this.global.Name =&gt; String)(implicit ord: scala.math.Ordering[String])List[IMain.this.global.Name]">sortBy</a> <span class="delimiter">(</span><a href="#742888" title="IMain.this.global.Name">_</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(id: String)String" id="523083">pathToType</a><span class="delimiter">(</span><a title="String" id="742944">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#523085" title="(name: IMain.this.global.Name)String">pathToName</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478405" title="(s: String)IMain.this.global.TypeName">newTypeName</a><span class="delimiter">(</span><a href="#742944" title="String">id</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(id: String)String" id="523084">pathToTerm</a><span class="delimiter">(</span><a title="String" id="739565">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#523085" title="(name: IMain.this.global.Name)String">pathToName</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#739565" title="String">id</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)String" id="523085">pathToName</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="742946">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a> <a href="../../../collection/MapLike.scala.html#73205" title="(key: IMain.this.global.Name)Boolean">contains</a> <a href="#742946" title="IMain.this.global.Name">name</a><span class="delimiter">)</span>
      <a href="../../../collection/MapLike.scala.html#73204" title="(key: IMain.this.global.Name)IMain.this.Request">definedNameMap</a><span class="delimiter">(</span><a href="#742946" title="IMain.this.global.Name">name</a><span class="delimiter">)</span> <a href="#733969" title="(vname: IMain.this.global.Name)String">fullPath</a> <a href="#742946" title="IMain.this.global.Name">name</a>
    <span class="keyword">else</span> <a href="#742946" title="IMain.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Most recent tree handled which wasn't wholly synthetic. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Option[IMain.this.global.Tree]" id="523086">mostRecentlyHandledTree</a>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Tree]">Option</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#523149" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">prevRequests</a>.<a href="../../../collection/SeqLike.scala.html#54069" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">reverse</a> <a href="../../../collection/generic/TraversableForwarder.scala.html#61936" title="(f: IMain.this.Request =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="IMain.this.Request" id="743015">req</a> =&gt;
      <a href="#743015" title="IMain.this.Request">req</a>.<a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a>.<a href="../../../collection/immutable/List.scala.html#49171" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">reverse</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; Unit)Unit">foreach</a> <a href="#743037" title="Unit" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="Nothing" id="743038">x</a>: <a href="MemberHandlers.scala.html#733193" title="IMain.this.memberHandlers.MemberDefHandler">MemberDefHandler</a> <span class="keyword">if</span> <a href="#743038" title="IMain.this.memberHandlers.MemberDefHandler">x</a>.<a href="MemberHandlers.scala.html#734032" title="=&gt; Boolean">definesValue</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#733178" title="(name: IMain.this.global.Name)Boolean">isInternalVarName</a><span class="delimiter">(</span><a href="#743038" title="IMain.this.memberHandlers.MemberDefHandler">x</a>.<a href="MemberHandlers.scala.html#743043" title="=&gt; IMain.this.memberHandlers.intp.global.Name">name</a><span class="delimiter">)</span> =&gt; <span title="Nothing" class="keyword">return</span> <a href="../../../Option.scala.html#57885" title="(x: IMain.this.memberHandlers.intp.global.MemberDef)Some[IMain.this.memberHandlers.intp.global.MemberDef]">Some</a><span class="delimiter">(</span><a href="#743038" title="IMain.this.memberHandlers.MemberDefHandler">x</a>.<a href="MemberHandlers.scala.html#743040" title="=&gt; IMain.this.memberHandlers.intp.global.MemberDef">member</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="../../../Option.scala.html#1737" title="object None">None</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Stubs for work in progress. */</span>
  <span class="keyword">def</span> <a title="(name: IMain.this.global.TypeName, old: IMain.this.Request, req: IMain.this.Request)Unit" id="523087">handleTypeRedefinition</a><span class="delimiter">(</span><a title="IMain.this.global.TypeName" id="743064">name</a>: <a href="../symtab/Names.scala.html#478415" title="IMain.this.global.TypeName">TypeName</a>, <a title="IMain.this.Request" id="743065">old</a>: <a href="#523116" title="IMain.this.Request">Request</a>, <a title="IMain.this.Request" id="743066">req</a>: <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="IMain.this.global.Name" id="743090">t1</a> &lt;- <a href="#743065" title="IMain.this.Request">old</a>.<a href="#733987" title="(name: IMain.this.global.TypeName)Option[IMain.this.global.Name]">simpleNameOfType</a><a href="../../../Option.scala.html#48491" title="(f: IMain.this.global.Name =&gt; Unit)Unit" class="delimiter">(</a><a href="#743064" title="IMain.this.global.TypeName">name</a><span class="delimiter">)</span> ; <a title="IMain.this.global.Name" id="743094">t2</a> &lt;- <a href="#743066" title="IMain.this.Request">req</a>.<a href="#733987" title="(name: IMain.this.global.TypeName)Option[IMain.this.global.Name]">simpleNameOfType</a><a href="../../../Option.scala.html#48491" title="(f: IMain.this.global.Name =&gt; Unit)Unit" class="delimiter">(</a><a href="#743064" title="IMain.this.global.TypeName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Redefining type '%s'\n  %s -&gt; %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#743064" title="IMain.this.global.TypeName">name</a>, <a href="#743090" title="IMain.this.global.Name">t1</a>, <a href="#743094" title="IMain.this.global.Name">t2</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: IMain.this.global.TermName, old: IMain.this.Request, req: IMain.this.Request)Unit" id="523088">handleTermRedefinition</a><span class="delimiter">(</span><a title="IMain.this.global.TermName" id="743100">name</a>: <a href="../symtab/Names.scala.html#478414" title="IMain.this.global.TermName">TermName</a>, <a title="IMain.this.Request" id="743101">old</a>: <a href="#523116" title="IMain.this.Request">Request</a>, <a title="IMain.this.Request" id="743102">req</a>: <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="IMain.this.global.Type" id="743111">t1</a> &lt;- <a href="#743101" title="IMain.this.Request">old</a>.<a href="#733991" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Type]">compilerTypeOf</a> <a href="../../../Option.scala.html#48491" title="(f: IMain.this.global.Type =&gt; Unit)Unit">get</a> <a href="#743100" title="IMain.this.global.TermName">name</a> ; <a title="IMain.this.global.Type" id="743117">t2</a> &lt;- <a href="#743102" title="IMain.this.Request">req</a>.<a href="#733991" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Type]">compilerTypeOf</a> <a href="../../../Option.scala.html#48491" title="(f: IMain.this.global.Type =&gt; Unit)Unit">get</a> <a href="#743100" title="IMain.this.global.TermName">name</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// Printing the types here has a tendency to cause assertion errors, like</span>
      <span class="comment">//   assertion failed: fatal: &lt;refinement&gt; has owner value x, but a class owner is required</span>
      <span class="comment">// so DBG is by-name now to keep it in the family.  (It also traps the assertion error,</span>
      <span class="comment">// but we don't want to unnecessarily risk hosing the compiler's internal state.)</span>
      <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Redefining term '%s'\n  %s -&gt; %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#743100" title="IMain.this.global.TermName">name</a>, <a href="#743111" title="IMain.this.global.Type">t1</a>, <a href="#743117" title="IMain.this.global.Type">t2</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(req: IMain.this.Request)Unit" id="523089">recordRequest</a><span class="delimiter">(</span><a title="IMain.this.Request" id="743123">req</a>: <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#743123" title="IMain.this.Request">req</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#523151" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">referencedNameMap</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span>

    <a href="#523149" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">prevRequests</a> <a href="../../../collection/mutable/ListBuffer.scala.html#61786" title="(x: IMain.this.Request)IMain.this.prevRequests.type">+=</a> <a href="#743123" title="IMain.this.Request">req</a>
    <a href="#743123" title="IMain.this.Request">req</a>.<a href="#733954" title="=&gt; List[IMain.this.global.Name]">referencedNames</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: IMain.this.global.Name =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="IMain.this.global.Name" id="743161">x</a> =&gt; <a href="../../../collection/mutable/MapLike.scala.html#73272" title="(key: IMain.this.global.Name, value: IMain.this.Request)Unit">referencedNameMap</a><span class="delimiter">(</span><a href="#743161" title="IMain.this.global.Name">x</a><span class="delimiter">)</span> = <a href="#743123" title="IMain.this.Request">req</a><span class="delimiter">)</span>

    <span class="comment">// warning about serially defining companions.  It'd be easy</span>
    <span class="comment">// enough to just redefine them together but that may not always</span>
    <span class="comment">// be what people want so I'm waiting until I can do it better.</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="IMain.this.memberHandlers.intp.global.Name" id="743869">name</a>   &lt;- <a href="#743123" title="IMain.this.Request">req</a>.<a href="#733952" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: IMain.this.memberHandlers.intp.global.Name =&gt; Unit)Unit">filterNot</a> <span class="delimiter">(</span><a title="IMain.this.memberHandlers.intp.global.Name" id="743843">x</a> =&gt; <a href="#743123" title="IMain.this.Request">req</a>.<a href="#733952" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a> <a href="../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <a href="#743843" title="IMain.this.memberHandlers.intp.global.Name">x</a>.<a href="../symtab/Names.scala.html#501119" title="=&gt; IMain.this.memberHandlers.intp.global.Name">companionName</a><span class="delimiter">)</span>
      <a title="IMain.this.Request" id="743876">oldReq</a> &lt;- <a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a> <a href="../../../Option.scala.html#48491" title="(f: IMain.this.Request =&gt; Unit)Unit">get</a> <a href="#743869" title="IMain.this.memberHandlers.intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501119" title="=&gt; IMain.this.memberHandlers.intp.global.Name">companionName</a>
      <a title="IMain.this.global.Symbol" id="743883">newSym</a> &lt;- <a href="#743123" title="IMain.this.Request">req</a>.<a href="#733995" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Symbol]">definedSymbols</a> <a href="../../../Option.scala.html#48491" title="(f: IMain.this.global.Symbol =&gt; Unit)Unit">get</a> <a href="#743869" title="IMain.this.memberHandlers.intp.global.Name">name</a>
      <a title="IMain.this.global.Symbol" id="743889">oldSym</a> &lt;- <a href="#743876" title="IMain.this.Request">oldReq</a>.<a href="#733995" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Symbol]">definedSymbols</a> <a href="../../../Option.scala.html#48491" title="(f: IMain.this.global.Symbol =&gt; Unit)Unit">get</a> <a href="#743869" title="IMain.this.memberHandlers.intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501119" title="=&gt; IMain.this.memberHandlers.intp.global.Name">companionName</a>
    <span class="delimiter">}</span> <span class="delimiter">{</span>
      <a href="#523090" title="(msg: =&gt; String)Unit">replwarn</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;warning: previously defined %s is not a companion to %s.&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span>
        <a href="#523189" title="(s: String)java.lang.String">stripString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#743889" title="IMain.this.global.Symbol">oldSym</a><span class="delimiter">)</span>, <a href="#523189" title="(s: String)java.lang.String">stripString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#743883" title="IMain.this.global.Symbol">newSym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#523090" title="(msg: =&gt; String)Unit">replwarn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Companions must be defined together; you may wish to use :paste mode for this.&quot;)" class="string">&quot;Companions must be defined together; you may wish to use :paste mode for this.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// Updating the defined name map</span>
    <a href="#743123" title="IMain.this.Request">req</a>.<a href="#733952" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: IMain.this.memberHandlers.intp.global.Name =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="IMain.this.memberHandlers.intp.global.Name" id="743927">name</a> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a> <a href="../../../collection/MapLike.scala.html#73205" title="(key: IMain.this.global.Name)Boolean">contains</a> <a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501116" title="=&gt; Boolean">isTypeName</a><span class="delimiter">)</span> <a href="#523087" title="(name: IMain.this.global.TypeName, old: IMain.this.Request, req: IMain.this.Request)Unit">handleTypeRedefinition</a><span class="delimiter">(</span><a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501118" title="=&gt; IMain.this.memberHandlers.intp.global.TypeName">toTypeName</a>, <a href="../../../collection/MapLike.scala.html#73204" title="(key: IMain.this.global.Name)IMain.this.Request">definedNameMap</a><span class="delimiter">(</span><a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a><span class="delimiter">)</span>, <a href="#743123" title="IMain.this.Request">req</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#523088" title="(name: IMain.this.global.TermName, old: IMain.this.Request, req: IMain.this.Request)Unit">handleTermRedefinition</a><span class="delimiter">(</span><a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501117" title="=&gt; IMain.this.memberHandlers.intp.global.TermName">toTermName</a>, <a href="../../../collection/MapLike.scala.html#73204" title="(key: IMain.this.global.Name)IMain.this.Request">definedNameMap</a><span class="delimiter">(</span><a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a><span class="delimiter">)</span>, <a href="#743123" title="IMain.this.Request">req</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="../../../collection/mutable/MapLike.scala.html#73272" title="(key: IMain.this.global.Name, value: IMain.this.Request)Unit">definedNameMap</a><span class="delimiter">(</span><a href="#743927" title="IMain.this.memberHandlers.intp.global.Name">name</a><span class="delimiter">)</span> = <a href="#743123" title="IMain.this.Request">req</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>nsc<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(msg: =&gt; String)Unit" id="523090">replwarn</a><span class="delimiter">(</span><a title="=&gt; String" id="743890">msg</a>: =&gt; String<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#523237" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469708" title="=&gt; IMain.this.settings.BooleanSetting">nowarnings</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
      <a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="#743890" title="=&gt; String">msg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(line: String)Boolean" id="523091">isParseable</a><span class="delimiter">(</span><a title="String" id="740624">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="#523041" title="(operation: =&gt; Boolean)Boolean">beSilentDuring</a> <span class="delimiter">{</span>
      <span class="keyword">try</span> <a href="#523132" title="(line: String)Option[List[IMain.this.global.Tree]]">parse</a><span class="delimiter">(</span><a href="#740624" title="String">line</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">Some</span><span class="delimiter">(</span><a title="List[IMain.this.global.Tree]" id="743974">xs</a><span class="delimiter">)</span> =&gt; <a href="#743974" title="List[IMain.this.global.Tree]">xs</a>.<a href="../../../collection/TraversableOnce.scala.html#53619" title="=&gt; Boolean">nonEmpty</a>  <span class="comment">// parses as-is</span>
        <span class="keyword">case</span> <a href="../../../Option.scala.html#1737" title="Boolean(true)">None</a>     =&gt; <span title="Boolean(true)" class="keyword">true</span>         <span class="comment">// incomplete</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Boolean" id="743975">x</a>: <span title="Exception">Exception</span> =&gt;    <span class="comment">// crashed the compiler</span>
        <a href="#523090" title="(msg: =&gt; String)Unit">replwarn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Exception in isParseable(\&quot;&quot;)" class="string">&quot;Exception in isParseable(\&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#740624" title="String">line</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\&quot;): &quot;)" class="string">&quot;\&quot;): &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#743975" title="Exception">x</a><span class="delimiter">)</span>
        <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Compile an nsc SourceFile.  Returns true if there are
   *  no compilation errors, or false otherwise.
   */</span>
  <span class="keyword">def</span> <a title="(sources: scala.tools.nsc.util.SourceFile*)Boolean" id="523092">compileSources</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.SourceFile*" id="743977">sources</a>: <span title="scala.tools.nsc.util.SourceFile*">SourceFile</span>*<span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/AbstractReporter.scala.html#482446" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="IMain.this.global.Run" class="keyword">new</span> <a href="../Global.scala.html#478365" title="IMain.this.global.Run">Run</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../Global.scala.html#482575" title="(_sources: List[scala.tools.nsc.util.SourceFile])Unit">compileSources</a> <a href="#743977" title="scala.tools.nsc.util.SourceFile*">sources</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[scala.tools.nsc.util.SourceFile]">toList</a>
    <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479335" title="=&gt; Boolean">hasErrors</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Compile a string.  Returns true if there are no
   *  compilation errors, or false otherwise.
   */</span>
  <span class="keyword">def</span> <a title="(code: String)Boolean" id="523093">compileString</a><span class="delimiter">(</span><a title="String" id="740591">code</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> =
    <a href="#523092" title="(sources: scala.tools.nsc.util.SourceFile*)Boolean">compileSources</a><span class="delimiter">(</span><a href="../util/SourceFile.scala.html#501064" title="(sourceName: String, cs: Seq[Char])scala.tools.nsc.util.BatchSourceFile" class="keyword">new</a> <a href="../util/SourceFile.scala.html#42877" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&lt;script&gt;&quot;)" class="string">&quot;&lt;script&gt;&quot;</span>, <a href="../../../LowPriorityImplicits.scala.html#9503" title="implicit scala.LowPriorityImplicits.wrapString : (s: String)scala.collection.immutable.WrappedString">code</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** Build a request from the user. `trees` is `line` after being parsed.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String, trees: List[IMain.this.global.Tree])IMain.this.Request" id="523094">buildRequest</a><span class="delimiter">(</span><a title="String" id="743991">line</a>: <span title="String">String</span>, <a title="List[IMain.this.global.Tree]" id="743992">trees</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#523116" title="IMain.this.Request">Request</a> = <span title="IMain.this.Request" class="keyword">new</span> <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">(</span><a href="#743991" title="String">line</a>, <a href="#743992" title="List[IMain.this.global.Tree]">trees</a><span class="delimiter">)</span>

  <span class="comment">// rewriting &quot;5 // foo&quot; to &quot;val x = { 5 // foo }&quot; creates broken code because</span>
  <span class="comment">// the close brace is commented out.  Strip single-line comments.</span>
  <span class="comment">// ... but for error message output reasons this is not used, and rather than</span>
  <span class="comment">// enclosing in braces it is constructed like &quot;val x =\n5 // foo&quot;.</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)String" id="523095">removeComments</a><span class="delimiter">(</span><a title="String" id="743996">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#523165" title="(code: String)Unit">showCodeIfDebugging</a><span class="delimiter">(</span><a href="#743996" title="String">line</a><span class="delimiter">)</span> <span class="comment">// as we're about to lose our // show</span>
    <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a>.<a href="../../../collection/immutable/StringLike.scala.html#56553" title="=&gt; Iterator[String]">lines</a> <a href="../../../collection/Iterator.scala.html#59115" title="(f: String =&gt; String)Iterator[String]">map</a> <span class="delimiter">(</span><a title="String" id="744007">s</a> =&gt; <a href="#744007" title="String">s</a> <span title="(x$1: java.lang.String)Int">indexOf</span> <span title="java.lang.String(&quot;//&quot;)" class="string">&quot;//&quot;</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="String">-</span><span class="int">1</span>   =&gt; <a href="#744007" title="String">s</a>
      <span class="keyword">case</span> <a title="String" id="744012">idx</a>  =&gt; <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55967" title="(n: Int)String">take</a> <a href="#744012" title="Int">idx</a>
    <span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: IMain.this.global.Tree, alt: Int)Int" id="523096">safePos</a><span class="delimiter">(</span><a title="IMain.this.global.Tree" id="744133">t</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="IMain.this.global.Tree">Tree</a>, <a title="Int" id="744134">alt</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#386" title="Int">Int</a> =
    <span class="keyword">try</span> <a href="#744133" title="IMain.this.global.Tree">t</a>.<a href="../../../reflect/generic/Trees.scala.html#441024" title="=&gt; IMain.this.global.Position">pos</a>.<a href="../util/Position.scala.html#501494" title="=&gt; Int">startOrPoint</a>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Int">_</span>: <span title="UnsupportedOperationException">UnsupportedOperationException</span> =&gt; <a href="#744134" title="Int">alt</a> <span class="delimiter">}</span>

  <span class="comment">// Given an expression like 10 * 10 * 10 we receive the parent tree positioned</span>
  <span class="comment">// at a '*'.  So look at each subtree and find the earliest of all positions.</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: IMain.this.global.Tree)Int" id="523097">earliestPosition</a><span class="delimiter">(</span><a title="IMain.this.global.Tree" id="744136">tree</a>: <a href="../../../reflect/generic/Trees.scala.html#434028" title="IMain.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#386" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="744138">pos</a> = Int.<span title="Int(2147483647)">MaxValue</span>
    <a href="../ast/Trees.scala.html#479119" title="implicit scala.tools.nsc.ast.Trees.treeWrapper : (tree: IMain.this.global.Tree)IMain.this.global.TreeOps">tree</a> <a href="../ast/Trees.scala.html#510731" title="(f: IMain.this.global.Tree =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="IMain.this.global.Tree" id="744242">t</a> =&gt;
      <a href="#744138" title="Int">pos</a> = math.<a href="../../../MathCommon.scala.html#19251" title="(x: Int, y: Int)Int">min</a><span class="delimiter">(</span><a href="#744138" title="Int">pos</a>, <a href="#523096" title="(t: IMain.this.global.Tree, alt: Int)Int">safePos</a><span class="delimiter">(</span><a href="#744242" title="IMain.this.global.Tree">t</a>, Int.<span title="Int(2147483647)">MaxValue</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#744138" title="Int">pos</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String, synthetic: Boolean)Either[scala.tools.nsc.interpreter.package.IR.Result,IMain.this.Request]" id="523098">requestFromLine</a><span class="delimiter">(</span><a title="String" id="744249">line</a>: <span title="String">String</span>, <a title="Boolean" id="744250">synthetic</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../../Either.scala.html#2084" title="Either[scala.tools.nsc.interpreter.package.IR.Result,IMain.this.Request]">Either</a><span class="delimiter">[</span>IR.Result, Request<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="744252">content</a> = <a href="Formatting.scala.html#733050" title="(code: String)String">indentCode</a><span class="delimiter">(</span><a href="#744249" title="String">line</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[IMain.this.global.Tree]" id="744253">trees</a> = <a href="#523132" title="(line: String)Option[List[IMain.this.global.Tree]]">parse</a><span class="delimiter">(</span><a href="#744252" title="String">content</a><span class="delimiter">)</span> <span title="List[IMain.this.global.Tree]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../Option.scala.html#1737" title="Nothing">None</a>         =&gt; <span title="Nothing" class="keyword">return</span> <a href="../../../Either.scala.html#71913" title="(a: scala.tools.nsc.interpreter.package.IR.Incomplete.type)Left[scala.tools.nsc.interpreter.package.IR.Incomplete.type,Nothing]">Left</a><span class="delimiter">(</span><a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734557" title="object scala.tools.nsc.interpreter.package.IR.Incomplete">Incomplete</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">Some</span><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a><span class="delimiter">)</span>    =&gt; <span title="Nothing" class="keyword">return</span> <a href="../../../Either.scala.html#71913" title="(a: scala.tools.nsc.interpreter.package.IR.Error.type)Left[scala.tools.nsc.interpreter.package.IR.Error.type,Nothing]">Left</a><span class="delimiter">(</span><a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a><span class="delimiter">)</span> <span class="comment">// parse error or empty input</span>
      <span class="keyword">case</span> <span title="List[IMain.this.global.Tree]">Some</span><span class="delimiter">(</span><a title="List[IMain.this.global.Tree]" id="744264">trees</a><span class="delimiter">)</span>  =&gt; <a href="#744264" title="List[IMain.this.global.Tree]">trees</a>
    <span class="delimiter">}</span>
    <span class="comment">// repltrace(</span>
    <span class="comment">//   trees map { t =&gt;</span>
    <span class="comment">//     t map { t0 =&gt; t0.getClass + &quot; at &quot; + safePos(t0, -1) + &quot;\n&quot; }</span>
    <span class="comment">//   } mkString</span>
    <span class="comment">// )</span>
    <span class="comment">// If the last tree is a bare expression, pinpoint where it begins using the</span>
    <span class="comment">// AST node position and snap the line off there.  Rewrite the code embodied</span>
    <span class="comment">// by the last tree as a ValDef instead, so we can access the value.</span>
    <a href="#744253" title="List[IMain.this.global.Tree]">trees</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71051" title="=&gt; IMain.this.global.Tree">last</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">_</span>:<a href="../../../reflect/generic/Trees.scala.html#434094" title="IMain.this.global.Assign">Assign</a>                        =&gt; <span class="comment">// we don't want to include assignments</span>
      <span class="keyword">case</span> <span title="Nothing">_</span>:<a href="../../../reflect/generic/Trees.scala.html#434033" title="IMain.this.global.TermTree">TermTree</a> | _:<a href="../../../reflect/generic/Trees.scala.html#434137" title="IMain.this.global.Ident">Ident</a> | _:<a href="../../../reflect/generic/Trees.scala.html#434134" title="IMain.this.global.Select">Select</a> =&gt; <span class="comment">// ... but do want other unnamed terms.</span>
        <span class="keyword">val</span> <a title="String" id="744270">varName</a>  = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#744250" title="Boolean">synthetic</a><span class="delimiter">)</span> <a href="Naming.scala.html#733169" title="()String">freshInternalVarName</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#733177" title="()String">freshUserVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="744271">rewrittenLine</a> = <span class="delimiter">(</span>
          <span class="comment">// In theory this would come out the same without the 1-specific test, but</span>
          <span class="comment">// it's a cushion against any more sneaky parse-tree position vs. code mismatches:</span>
          <span class="comment">// this way such issues will only arise on multiple-statement repl input lines,</span>
          <span class="comment">// which most people don't use.</span>
          <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#744253" title="List[IMain.this.global.Tree]">trees</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;val &quot;)" class="string">&quot;val &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744270" title="String">varName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =\012&quot;)" class="string">&quot; =\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744252" title="String">content</a>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="comment">// The position of the last tree</span>
            <span class="keyword">val</span> <a title="Int" id="744277">lastpos0</a> = <a href="#523097" title="(tree: IMain.this.global.Tree)Int">earliestPosition</a><span class="delimiter">(</span><a href="#744253" title="List[IMain.this.global.Tree]">trees</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71051" title="=&gt; IMain.this.global.Tree">last</a><span class="delimiter">)</span>
            <span class="comment">// Oh boy, the parser throws away parens so &quot;(2+2)&quot; is mispositioned,</span>
            <span class="comment">// with increasingly hard to decipher positions as we move on to &quot;() =&gt; 5&quot;,</span>
            <span class="comment">// (x: Int) =&gt; x + 1, and more.  So I abandon attempts to finesse and just</span>
            <span class="comment">// look for semicolons and newlines, which I'm sure is also buggy.</span>
            <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(String, String)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="String" id="744279">raw1</a>, <a href="../../../Tuple2.scala.html#53404" title="String" id="744280">raw2</a><span class="delimiter">)</span> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">content</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55971" title="(n: Int)(String, String)">splitAt</a> <a href="#744277" title="Int">lastpos0</a>
            <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="java.lang.String(&quot;[raw] &quot;)" class="string">&quot;[raw] &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744279" title="String">raw1</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;   &lt;---&gt;   &quot;)" class="string">&quot;   &lt;---&gt;   &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744280" title="String">raw2</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="Int" id="744281">adjustment</a> = <span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">raw1</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">reverse</a> <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">takeWhile</a> <span class="delimiter">(</span><a title="Char" id="744562">ch</a> =&gt; <span class="delimiter">(</span><a href="#744562" title="Char">ch</a> <a href="../../../Char.scala.html#54909" title="(x: Char)Boolean">!=</a> <span title="Char(\';\')" class="char">';'</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#744562" title="Char">ch</a> <a href="../../../Char.scala.html#54909" title="(x: Char)Boolean">!=</a> <span title="Char(\'\\n\')" class="char">'\n'</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a>
            <span class="keyword">val</span> <a title="Int" id="744282">lastpos</a> = <a href="#744277" title="Int">lastpos0</a> <a href="../../../Int.scala.html#54811" title="(x: Int)Int">-</a> <a href="#744281" title="Int">adjustment</a>

            <span class="comment">// the source code split at the laboriously determined position.</span>
            <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(String, String)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="String" id="744284">l1</a>, <a href="../../../Tuple2.scala.html#53404" title="String" id="744285">l2</a><span class="delimiter">)</span> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">content</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55971" title="(n: Int)(String, String)">splitAt</a> <a href="#744282" title="Int">lastpos</a>
            <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="java.lang.String(&quot;[adj] &quot;)" class="string">&quot;[adj] &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744284" title="String">l1</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;   &lt;---&gt;   &quot;)" class="string">&quot;   &lt;---&gt;   &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744285" title="String">l2</a><span class="delimiter">)</span>

            <span class="keyword">val</span> <a title="java.lang.String" id="744286">prefix</a>   = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#744284" title="String">l1</a>.<span title="()java.lang.String">trim</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#744284" title="String">l1</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;\012&quot;)" class="string">&quot;;\n&quot;</span>
            <span class="comment">// Note to self: val source needs to have this precise structure so that</span>
            <span class="comment">// error messages print the user-submitted part without the &quot;val res0 = &quot; part.</span>
            <span class="keyword">val</span> <a title="java.lang.String" id="744287">combined</a>   = <a href="#744286" title="java.lang.String">prefix</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;val &quot;)" class="string">&quot;val &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744270" title="String">varName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =\012&quot;)" class="string">&quot; =\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744285" title="String">l2</a>

            <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#48877" title="(xs: (java.lang.String, java.lang.String)*)List[(java.lang.String, java.lang.String)]">List</a><span class="delimiter">(</span>
              <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;    line&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: String)(java.lang.String, String)">-&gt;</a> <a href="#744249" title="String">line</a>,
              <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot; content&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: String)(java.lang.String, String)">-&gt;</a> <a href="#744252" title="String">content</a>,
              <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;     was&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: String)(java.lang.String, String)">-&gt;</a> <a href="#744285" title="String">l2</a>,
              <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;combined&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <a href="#744287" title="java.lang.String">combined</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: ((java.lang.String, java.lang.String)) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(java.lang.String, java.lang.String)],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</a> <a href="#744866" title="java.lang.String" class="delimiter">{</a>
                <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="java.lang.String" id="744869">label</a>, <a title="java.lang.String" id="744870">s</a><span class="delimiter">)</span> =&gt; <a href="#744869" title="java.lang.String">label</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: \'&quot;)" class="string">&quot;: '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744870" title="java.lang.String">s</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span>
              <span class="delimiter">}</span> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
            <span class="delimiter">)</span>
            <a href="#744287" title="java.lang.String">combined</a>
          <span class="delimiter">}</span>
        <span class="delimiter">)</span>
        <span class="comment">// Rewriting    &quot;foo ; bar ; 123&quot;</span>
        <span class="comment">// to           &quot;foo ; bar ; val resXX = 123&quot;</span>
        <a href="#523098" title="(line: String, synthetic: Boolean)Either[scala.tools.nsc.interpreter.package.IR.Result,IMain.this.Request]">requestFromLine</a><span class="delimiter">(</span><a href="#744271" title="java.lang.String">rewrittenLine</a>, <a href="#744250" title="Boolean">synthetic</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Nothing">Right</span><span class="delimiter">(</span><a title="IMain.this.Request" id="744902">req</a><span class="delimiter">)</span> =&gt; <span title="Nothing" class="keyword">return</span> <a href="../../../Either.scala.html#71958" title="(b: IMain.this.Request)Right[Nothing,IMain.this.Request]">Right</a><span class="delimiter">(</span><a href="#744902" title="IMain.this.Request">req</a> <a href="#733948" title="(s: String)req.type">withOriginalLine</a> <a href="#744249" title="String">line</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Nothing" id="744909">x</a>          =&gt; <span title="Nothing" class="keyword">return</span> <a href="#744909" title="Either[scala.tools.nsc.interpreter.package.IR.Result,IMain.this.Request]">x</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
    <span class="delimiter">}</span>
    <a href="../../../Either.scala.html#71958" title="(b: IMain.this.Request)Right[Nothing,IMain.this.Request]">Right</a><span class="delimiter">(</span><a href="#523094" title="(line: String, trees: List[IMain.this.global.Tree])IMain.this.Request">buildRequest</a><span class="delimiter">(</span><a href="#744249" title="String">line</a>, <a href="#744253" title="List[IMain.this.global.Tree]">trees</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: IMain.this.global.Symbol, memberName: IMain.this.global.Name)IMain.this.global.Type" id="523099">typeCleanser</a><span class="delimiter">(</span><a title="IMain.this.global.Symbol" id="734641">sym</a>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a>, <a title="IMain.this.global.Name" id="734642">memberName</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../symtab/Types.scala.html#478720" title="IMain.this.global.Type">Type</a> = <span class="delimiter">{</span>
    <span class="comment">// the types are all =&gt;T; remove the =&gt;</span>
    <span class="keyword">val</span> <a title="IMain.this.global.Type" id="744914">tp1</a> = <a href="#523035" title="(op: =&gt; IMain.this.global.Type)IMain.this.global.Type">afterTyper</a><span class="delimiter">(</span><a href="#734641" title="IMain.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509272" title="=&gt; IMain.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#507194" title="(name: IMain.this.global.Name)IMain.this.global.Symbol">nonPrivateDecl</a><span class="delimiter">(</span><a href="#734642" title="IMain.this.global.Name">memberName</a><span class="delimiter">)</span>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; IMain.this.global.Type">tpe</a> <span title="IMain.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="IMain.this.global.Type">NullaryMethodType</span><span class="delimiter">(</span><a title="IMain.this.global.Type" id="744922">tp</a><span class="delimiter">)</span> =&gt; <a href="#744922" title="IMain.this.global.Type">tp</a>
      <span class="keyword">case</span> <a title="IMain.this.global.Type" id="744923">tp</a>                    =&gt; <a href="#744923" title="IMain.this.global.Type">tp</a>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="comment">// normalize non-public types so we don't see protected aliases like Self</span>
    <a href="#523035" title="(op: =&gt; IMain.this.global.Type)IMain.this.global.Type">afterTyper</a><span class="delimiter">(</span><a href="#744914" title="IMain.this.global.Type">tp1</a> <span title="IMain.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="IMain.this.global.Type">TypeRef</span><span class="delimiter">(</span>_, <a title="IMain.this.global.Symbol" id="744930">sym</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#744930" title="IMain.this.global.Symbol">sym</a>.<a href="../../../reflect/generic/HasFlags.scala.html#435312" title="=&gt; Boolean">isPublic</a>  =&gt; <a href="#744914" title="IMain.this.global.Type">tp1</a>.<a href="../symtab/Types.scala.html#507188" title="=&gt; IMain.this.global.Type">normalize</a>
      <span class="keyword">case</span> <a title="IMain.this.global.Type" id="744931">tp</a>                                   =&gt; <a href="#744931" title="IMain.this.global.Type">tp</a>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   *  Interpret one line of input. All feedback, including parse errors
   *  and evaluation results, are printed via the supplied compiler's
   *  reporter. Values defined are available for future interpreted strings.
   *
   *  The return value is whether the line was interpreter successfully,
   *  e.g. that there were no parse errors.
   */</span>
  <span class="keyword">def</span> <a title="(line: String)scala.tools.nsc.interpreter.package.IR.Result" id="523100">interpret</a><span class="delimiter">(</span><a title="String" id="734560">line</a>: <span title="String">String</span><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> = <a href="#523101" title="(line: String, synthetic: Boolean)scala.tools.nsc.interpreter.package.IR.Result">interpret</a><span class="delimiter">(</span><a href="#734560" title="String">line</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(line: String, synthetic: Boolean)scala.tools.nsc.interpreter.package.IR.Result" id="523101">interpret</a><span class="delimiter">(</span><a title="String" id="734549">line</a>: <span title="String">String</span>, <a title="Boolean" id="734550">synthetic</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(req: IMain.this.Request)Product with Serializable with scala.tools.nsc.interpreter.package.IR.Result" id="744937">loadAndRunReq</a><span class="delimiter">(</span><a title="IMain.this.Request" id="744938">req</a>: <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(String, Boolean)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="String" id="744940">result</a>, <a href="../../../Tuple2.scala.html#53404" title="Boolean" id="744941">succeeded</a><span class="delimiter">)</span> = <a href="#744938" title="IMain.this.Request">req</a>.<a href="#733999" title="=&gt; (String, Boolean)">loadAndRun</a>

      <span class="comment">/** To our displeasure, ConsoleReporter offers only printMessage,
       *  which tacks a newline on the end.  Since that breaks all the
       *  output checking, we have to take one off to balance.
       */</span>
      <span title="&lt;none&gt; extends Product with Serializable with scala.tools.nsc.interpreter.package.IR.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#744941" title="Boolean">succeeded</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#522999" title="=&gt; Boolean">printResults</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#744940" title="String">result</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
          <a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">result</a> <a href="../../../collection/immutable/StringLike.scala.html#56557" title="(suffix: String)java.lang.String">stripSuffix</a> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#48210" title="=&gt; Boolean">isReplDebug</a><span class="delimiter">)</span> <span class="comment">// show quiet-mode activity</span>
          <a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="#744940" title="String">result</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</a>.<a href="../../../collection/immutable/StringLike.scala.html#56553" title="=&gt; Iterator[String]">lines</a> <a href="../../../collection/Iterator.scala.html#59115" title="(f: String =&gt; java.lang.String)Iterator[java.lang.String]">map</a> <span class="delimiter">(</span><span title="java.lang.String(&quot;[quiet] &quot;)" class="string">&quot;[quiet] &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#744971" title="String">_</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>

        <span class="comment">// Book-keeping.  Have to record synthetic requests too,</span>
        <span class="comment">// as they may have been issued for information, e.g. :type</span>
        <a href="#523089" title="(req: IMain.this.Request)Unit">recordRequest</a><span class="delimiter">(</span><a href="#744938" title="IMain.this.Request">req</a><span class="delimiter">)</span>
        <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734553" title="object scala.tools.nsc.interpreter.package.IR.Success">Success</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// don't truncate stack traces</span>
        <a href="../reporters/Reporter.scala.html#479322" title="(body: =&gt; Unit)Unit">withoutTruncating</a><span class="delimiter">(</span><a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="#744940" title="String">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span title="scala.tools.nsc.interpreter.package.IR.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a>
    <span class="keyword">else</span> <a href="#523098" title="(line: String, synthetic: Boolean)Either[scala.tools.nsc.interpreter.package.IR.Result,IMain.this.Request]">requestFromLine</a><span class="delimiter">(</span><a href="#734549" title="String">line</a>, <a href="#734550" title="Boolean">synthetic</a><span class="delimiter">)</span> <span title="scala.tools.nsc.interpreter.package.IR.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scala.tools.nsc.interpreter.package.IR.Result">Left</span><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.package.IR.Result" id="744996">result</a><span class="delimiter">)</span> =&gt; <a href="#744996" title="scala.tools.nsc.interpreter.package.IR.Result">result</a>
      <span class="keyword">case</span> <span title="scala.tools.nsc.interpreter.package.IR.Result">Right</span><span class="delimiter">(</span><a title="IMain.this.Request" id="744998">req</a><span class="delimiter">)</span>   =&gt;
        <span class="comment">// null indicates a disallowed statement type; otherwise compile and</span>
        <span class="comment">// fail if false (implying e.g. a type error)</span>
        <span title="scala.tools.nsc.interpreter.package.IR.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#744998" title="IMain.this.Request">req</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#744998" title="IMain.this.Request">req</a>.<a href="#733979" title="=&gt; Boolean">compile</a><span class="delimiter">)</span> <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a>
        <span class="keyword">else</span> <a href="#744937" title="(req: IMain.this.Request)Product with Serializable with scala.tools.nsc.interpreter.package.IR.Result">loadAndRunReq</a><span class="delimiter">(</span><a href="#744998" title="IMain.this.Request">req</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Bind a specified name to a specified value.  The name may
   *  later be used by expressions passed to interpret.
   *
   *  @param name      the variable name to bind
   *  @param boundType the type of the variable, as a string
   *  @param value     the object value to bind to it
   *  @return          an indication of whether the binding succeeded
   */</span>
  <span class="keyword">def</span> <a title="(name: String, boundType: String, value: Any)scala.tools.nsc.interpreter.package.IR.Result" id="523102">bind</a><span class="delimiter">(</span><a title="String" id="737979">name</a>: <span title="String">String</span>, <a title="String" id="737980">boundType</a>: <span title="String">String</span>, <a title="Any" id="737981">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="IMain.this.ReadEvalPrint" id="745003">bindRep</a> = <a href="#736593" title="()IMain.this.ReadEvalPrint" class="keyword">new</a> <a href="#523115" title="IMain.this.ReadEvalPrint">ReadEvalPrint</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="745004">run</a> = <a href="#745003" title="IMain.this.ReadEvalPrint">bindRep</a>.<a href="#736623" title="(source: String)Boolean">compile</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
        |object %s {
        |  var value: %s = _
        |  def set(x: Any) = value = x.asInstanceOf[%s]
        |}
      &quot;&quot;&quot;</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#745003" title="IMain.this.ReadEvalPrint">bindRep</a>.<a href="#736598" title="=&gt; String">evalName</a>, <a href="#737980" title="String">boundType</a>, <a href="#737980" title="String">boundType</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <a href="#745003" title="IMain.this.ReadEvalPrint">bindRep</a>.<a href="#736611" title="(name: String, args: Any*)Either[Throwable,AnyRef]">callEither</a><span class="delimiter">(</span><span title="java.lang.String(&quot;set&quot;)" class="string">&quot;set&quot;</span>, <a href="#737981" title="Any">value</a><span class="delimiter">)</span> <span title="scala.tools.nsc.interpreter.package.IR.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scala.tools.nsc.interpreter.package.IR.Error.type">Left</span><span class="delimiter">(</span><a title="Throwable" id="745033">ex</a><span class="delimiter">)</span> =&gt;
        <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Set failed in bind(%s, %s, %s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#737979" title="String">name</a>, <a href="#737980" title="String">boundType</a>, <a href="#737981" title="Any">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span>util.<a href="../util/package.scala.html#48304" title="(ex: Throwable)String">stackTraceString</a><span class="delimiter">(</span><a href="#745033" title="Throwable">ex</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a>

      <span class="keyword">case</span> <span title="scala.tools.nsc.interpreter.package.IR.Result">Right</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="String" id="745038">line</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;val %s = %s.value&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#737979" title="String">name</a>, <a href="#745003" title="IMain.this.ReadEvalPrint">bindRep</a>.<a href="#736608" title="=&gt; java.lang.String">evalPath</a><span class="delimiter">)</span>
        <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Interpreting: &quot;)" class="string">&quot;Interpreting: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#745038" title="String">line</a><span class="delimiter">)</span>
        <a href="#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a><span class="delimiter">(</span><a href="#745038" title="String">line</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(p: scala.tools.nsc.interpreter.NamedParam)scala.tools.nsc.interpreter.package.IR.Result" id="523103">rebind</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.NamedParam" id="745049">p</a>: <a href="NamedParam.scala.html#30657" title="scala.tools.nsc.interpreter.NamedParam">NamedParam</a><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="745051">name</a>     = <a href="#745049" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733295" title="=&gt; String">name</a>
    <span class="keyword">val</span> <a title="IMain.this.global.Type" id="745052">oldType</a>  = <a href="#523126" title="(id: String)Option[IMain.this.global.Type]">typeOfTerm</a><span class="delimiter">(</span><a href="#745051" title="String">name</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; IMain.this.global.Type)IMain.this.global.Type">getOrElse</a> <span class="delimiter">{</span> <span title="Nothing" class="keyword">return</span> <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a> <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="String" id="745053">newType</a>  = <a href="#745049" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733296" title="=&gt; String">tpe</a>
    <span class="keyword">val</span> <a title="String" id="745054">tempName</a> = <a href="Naming.scala.html#733169" title="()String">freshInternalVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#523044" title="(code: String)scala.tools.nsc.interpreter.package.IR.Result">quietRun</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;val %s = %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#745054" title="String">tempName</a>, <a href="#745051" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#523044" title="(code: String)scala.tools.nsc.interpreter.package.IR.Result">quietRun</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;val %s = %s.asInstanceOf[%s]&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#745051" title="String">name</a>, <a href="#745054" title="String">tempName</a>, <a href="#745053" title="String">newType</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(ids: String*)scala.tools.nsc.interpreter.package.IR.Result" id="523104">quietImport</a><span class="delimiter">(</span><a title="String*" id="745068">ids</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> = <a href="#523038" title="(body: =&gt; scala.tools.nsc.interpreter.package.IR.Result)scala.tools.nsc.interpreter.package.IR.Result">beQuietDuring</a><span class="delimiter">(</span><a href="#523105" title="(ids: String*)scala.tools.nsc.interpreter.package.IR.Result">addImports</a><span class="delimiter">(</span><a href="#745068" title="String*">ids</a>: _*<span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(ids: String*)scala.tools.nsc.interpreter.package.IR.Result" id="523105">addImports</a><span class="delimiter">(</span><a title="String*" id="745072">ids</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> =
    <span title="scala.tools.nsc.interpreter.package.IR.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#745072" title="String*">ids</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734553" title="object scala.tools.nsc.interpreter.package.IR.Success">Success</a>
    <span class="keyword">else</span> <a href="#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a><span class="delimiter">(</span><span title="java.lang.String(&quot;import &quot;)" class="string">&quot;import &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#745072" title="String*">ids</a>.<a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(p: scala.tools.nsc.interpreter.NamedParam)scala.tools.nsc.interpreter.package.IR.Result" id="523106">quietBind</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.NamedParam" id="745081">p</a>: <a href="NamedParam.scala.html#30657" title="scala.tools.nsc.interpreter.NamedParam">NamedParam</a><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a>                  = <a href="#523038" title="(body: =&gt; scala.tools.nsc.interpreter.package.IR.Result)scala.tools.nsc.interpreter.package.IR.Result">beQuietDuring</a><span class="delimiter">(</span><a href="#523107" title="(p: scala.tools.nsc.interpreter.NamedParam)scala.tools.nsc.interpreter.package.IR.Result">bind</a><span class="delimiter">(</span><a href="#745081" title="scala.tools.nsc.interpreter.NamedParam">p</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(p: scala.tools.nsc.interpreter.NamedParam)scala.tools.nsc.interpreter.package.IR.Result" id="523107">bind</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.NamedParam" id="737969">p</a>: <a href="NamedParam.scala.html#30657" title="scala.tools.nsc.interpreter.NamedParam">NamedParam</a><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a>                       = <a href="#523102" title="(name: String, boundType: String, value: Any)scala.tools.nsc.interpreter.package.IR.Result">bind</a><span class="delimiter">(</span><a href="#737969" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733295" title="=&gt; String">name</a>, <a href="#737969" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733296" title="=&gt; String">tpe</a>, <a href="#737969" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733297" title="=&gt; Any">value</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](name: String, value: T)(implicit evidence$1: Manifest[T])scala.tools.nsc.interpreter.package.IR.Result" id="737973">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523110">T</a>: Manifest<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="737971">name</a>: <span title="String">String</span>, <a title="T" id="737972">value</a>: <a href="#523110" title="T">T</a><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a> = <a href="#523107" title="(p: scala.tools.nsc.interpreter.NamedParam)scala.tools.nsc.interpreter.package.IR.Result">bind</a><span class="delimiter">(</span><a href="NamedParam.scala.html#733282" title="(pair: (String, T))(implicit evidence$4: Manifest[T])scala.tools.nsc.interpreter.NamedParam" class="delimiter">(</a><a href="#737971" title="String">name</a>, <a href="#737972" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Any)scala.tools.nsc.interpreter.package.IR.Result" id="523111">bindValue</a><span class="delimiter">(</span><a title="Any" id="737962">x</a>: <span title="Any">Any</span><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a>                         = <a href="#523112" title="(name: String, x: Any)scala.tools.nsc.interpreter.package.IR.Result">bindValue</a><span class="delimiter">(</span><a href="#733177" title="()String">freshUserVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#737962" title="Any">x</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String, x: Any)scala.tools.nsc.interpreter.package.IR.Result" id="523112">bindValue</a><span class="delimiter">(</span><a title="String" id="737964">name</a>: <span title="String">String</span>, <a title="Any" id="737965">x</a>: <span title="Any">Any</span><span class="delimiter">)</span>: IR.<a href="Results.scala.html#734552" title="scala.tools.nsc.interpreter.package.IR.Result">Result</a>           = <a href="#523102" title="(name: String, boundType: String, value: Any)scala.tools.nsc.interpreter.package.IR.Result">bind</a><span class="delimiter">(</span><a href="#737964" title="String">name</a>, <a href="TypeStrings.scala.html#30703" title="object scala.tools.nsc.interpreter.TypeStrings">TypeStrings</a>.<a href="TypeStrings.scala.html#733252" title="(value: Any)String">fromValue</a><span class="delimiter">(</span><a href="#737965" title="Any">x</a><span class="delimiter">)</span>, <a href="#737965" title="Any">x</a><span class="delimiter">)</span>

  <span class="comment">/** Reset this interpreter, forgetting all user-specified requests. */</span>
  <span class="keyword">def</span> <a title="()Unit" id="523113">reset</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#523004" title="=&gt; scala.tools.nsc.io.VirtualDirectory{def show(): Unit}">virtualDirectory</a>.<a href="../io/VirtualDirectory.scala.html#742073" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#523074" title="()Unit">resetClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="Naming.scala.html#733170" title="()Unit">resetAllCreators</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#523149" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">prevRequests</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#61789" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** This instance is no longer needed, so release any resources
   *  it is using.  The reporter's output gets flushed.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="523114">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#482478" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Here is where we:
   *
   *  1) Read some source code, and put it in the &quot;read&quot; object.
   *  2) Evaluate the read object, and put the result in the &quot;eval&quot; object.
   *  3) Create a String for human consumption, and put it in the &quot;print&quot; object.
   *
   *  Read! Eval! Print! Some of that not yet centralized here.
   */</span>
  <span class="keyword">class</span> <a title="class ReadEvalPrint extends java.lang.Object with ScalaObject" id="523115">ReadEvalPrint</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="Int" id="736635">lineId</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()IMain.this.ReadEvalPrint" id="736593" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#523115" title="ReadEvalPrint.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../../../Function0.scala.html#62187" title="()Int">freshLineId</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.lang.String" id="736594">packageName</a> = <a href="Naming.scala.html#733156" title="=&gt; IMain.this.naming.SessionNames">sessionNames</a>.<a href="Naming.scala.html#734528" title="=&gt; String">line</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736635" title="Int">lineId</a>
    <span class="keyword">val</span> <a title="String" id="736596">readName</a>    = <a href="Naming.scala.html#733156" title="=&gt; IMain.this.naming.SessionNames">sessionNames</a>.<a href="Naming.scala.html#734529" title="=&gt; String">read</a>
    <span class="keyword">val</span> <a title="String" id="736598">evalName</a>    = <a href="Naming.scala.html#733156" title="=&gt; IMain.this.naming.SessionNames">sessionNames</a>.<a href="Naming.scala.html#734530" title="=&gt; String">eval</a>
    <span class="keyword">val</span> <a title="String" id="736600">printName</a>   = <a href="Naming.scala.html#733156" title="=&gt; IMain.this.naming.SessionNames">sessionNames</a>.<a href="Naming.scala.html#734531" title="=&gt; String">print</a>

    <span class="keyword">class</span> <a title="class LineExceptional extends scala.tools.nsc.util.Exceptional with ScalaObject" id="736602">LineExceptional</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="Throwable" id="745208">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../util/Exceptional.scala.html#42658" title="scala.tools.nsc.util.Exceptional">Exceptional</a><span class="delimiter">(</span><a href="#745208" title="Throwable">ex</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="745203">showReplInternal</a> = <a href="#523064" title="=&gt; scala.tools.nsc.interpreter.ISettings">isettings</a>.<a href="ISettings.scala.html#742197" title="=&gt; Boolean">showInternalStackTraces</a>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(frame: scala.tools.nsc.util.JavaStackFrame)Boolean" id="745204">spanFn</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.JavaStackFrame" id="745212">frame</a>: <a href="../util/JavaStackFrame.scala.html#43045" title="scala.tools.nsc.util.JavaStackFrame">JavaStackFrame</a><span class="delimiter">)</span> =
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#745203" title="=&gt; Boolean">showReplInternal</a><span class="delimiter">)</span> <a href="#736602" title="ReadEvalPrint.this.LineExceptional" class="keyword">super</a>.<a href="../util/Exceptional.scala.html#509877" title="(frame: scala.tools.nsc.util.JavaStackFrame)Boolean">spanFn</a><span class="delimiter">(</span><a href="#745212" title="scala.tools.nsc.util.JavaStackFrame">frame</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#745212" title="scala.tools.nsc.util.JavaStackFrame">frame</a>.<a href="../util/JavaStackFrame.scala.html#745222" title="=&gt; String">className</a> <span title="(x$1: java.lang.String)Boolean">startsWith</span> <a href="#736608" title="=&gt; java.lang.String">evalPath</a><span class="delimiter">)</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="745205">contextPrelude</a> = <a href="#736602" title="ReadEvalPrint.this.LineExceptional" class="keyword">super</a>.<a href="../util/Exceptional.scala.html#509878" title="=&gt; String">contextPrelude</a> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#745203" title="=&gt; Boolean">showReplInternal</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">else</span> <span title="java.lang.String(&quot;/* The repl internal portion of the stack trace is elided. */\012&quot;)" class="string">&quot;/* The repl internal portion of the stack trace is elided. */\n&quot;</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(t: Throwable)java.lang.String" id="736603">bindError</a><span class="delimiter">(</span><a title="Throwable" id="745249">t</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#523051" title="=&gt; Boolean">bindExceptions</a><span class="delimiter">)</span> <span class="comment">// avoid looping if already binding</span>
        <span title="Nothing" class="keyword">throw</span> <a href="#745249" title="Throwable">t</a>

      <span class="keyword">val</span> <a title="Throwable" id="745252">unwrapped</a> = <a href="../util/Exceptional.scala.html#509857" title="(x: Throwable)Throwable">unwrap</a><span class="delimiter">(</span><a href="#745249" title="Throwable">t</a><span class="delimiter">)</span>
      <a href="#523053" title="(body: =&gt; java.lang.String)java.lang.String">withLastExceptionLock</a> <span class="delimiter">{</span>
        <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#478259" title="object IMain.this.global.opt">opt</a>.<a href="../settings/AestheticSettings.scala.html#501736" title="=&gt; Boolean">richExes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="ReadEvalPrint.this.LineExceptional" id="745255">ex</a> = <span title="ReadEvalPrint.this.LineExceptional" class="keyword">new</span> <a href="#736602" title="ReadEvalPrint.this.LineExceptional">LineExceptional</a><span class="delimiter">(</span><a href="#745252" title="Throwable">unwrapped</a><span class="delimiter">)</span>
          <a href="#737973" title="[T](name: String, value: T)(implicit evidence$1: Manifest[T])scala.tools.nsc.interpreter.package.IR.Result">bind</a><span title="(name: String, value: scala.tools.nsc.util.Exceptional)(implicit evidence$1: Manifest[scala.tools.nsc.util.Exceptional])scala.tools.nsc.interpreter.package.IR.Result" class="delimiter">[</span><a href="../util/Exceptional.scala.html#42658" title="scala.tools.nsc.util.Exceptional">Exceptional</a><span class="delimiter">]</span><a href="../../../reflect/Manifest.scala.html#56893" title="(clazz: Class[_])scala.reflect.Manifest[scala.tools.nsc.util.Exceptional]" class="delimiter">(</a><span title="java.lang.String(&quot;lastException&quot;)" class="string">&quot;lastException&quot;</span>, <a href="#745255" title="ReadEvalPrint.this.LineExceptional">ex</a><span class="delimiter">)</span>
          <a href="#745255" title="ReadEvalPrint.this.LineExceptional">ex</a>.<a href="../util/Exceptional.scala.html#509880" title="()String">contextHead</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012(access lastException for the full trace)&quot;)" class="string">&quot;\n(access lastException for the full trace)&quot;</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#737973" title="[T](name: String, value: T)(implicit evidence$1: Manifest[T])scala.tools.nsc.interpreter.package.IR.Result">bind</a><span title="(name: String, value: Throwable)(implicit evidence$1: Manifest[Throwable])scala.tools.nsc.interpreter.package.IR.Result" class="delimiter">[</span><span title="Throwable">Throwable</span><span class="delimiter">]</span><a href="../../../reflect/Manifest.scala.html#56893" title="(clazz: Class[_])scala.reflect.Manifest[Throwable]" class="delimiter">(</a><span title="java.lang.String(&quot;lastException&quot;)" class="string">&quot;lastException&quot;</span>, <a href="#745252" title="Throwable">unwrapped</a><span class="delimiter">)</span>
          util.<a href="../util/package.scala.html#48304" title="(ex: Throwable)String">stackTraceString</a><span class="delimiter">(</span><a href="#745252" title="Throwable">unwrapped</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">// TODO: split it out into a package object and a regular</span>
    <span class="comment">// object and we can do that much less wrapping.</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736604">packageDecl</a> = <span title="java.lang.String(&quot;package &quot;)" class="string">&quot;package &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736594" title="=&gt; java.lang.String">packageName</a>

    <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="736605">pathTo</a><span class="delimiter">(</span><a title="String" id="736639">name</a>: <span title="String">String</span><span class="delimiter">)</span>   = <a href="#736594" title="=&gt; java.lang.String">packageName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736639" title="String">name</a>
    <span class="keyword">def</span> <a title="(code: String)java.lang.String" id="736606">packaged</a><span class="delimiter">(</span><a title="String" id="745295">code</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#736604" title="=&gt; java.lang.String">packageDecl</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012\012&quot;)" class="string">&quot;\n\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#745295" title="String">code</a>

    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736607">readPath</a>  = <a href="#736605" title="(name: String)java.lang.String">pathTo</a><span class="delimiter">(</span><a href="#736596" title="=&gt; String">readName</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736608">evalPath</a>  = <a href="#736605" title="(name: String)java.lang.String">pathTo</a><span class="delimiter">(</span><a href="#736598" title="=&gt; String">evalName</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736609">printPath</a> = <a href="#736605" title="(name: String)java.lang.String">pathTo</a><span class="delimiter">(</span><a href="#736600" title="=&gt; String">printName</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(name: String, args: Any*)AnyRef" id="736610">call</a><span class="delimiter">(</span><a title="String" id="745301">name</a>: <span title="String">String</span>, <a title="Any*" id="745302">args</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> =
      <a href="#736631" title="(name: String)java.lang.reflect.Method">evalMethod</a><span class="delimiter">(</span><a href="#745301" title="String">name</a><span class="delimiter">)</span>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><a href="#736619" title="=&gt; java.lang.Class[_]">evalClass</a>, <a href="#745302" title="Any*">args</a>.<a href="../../../collection/TraversableLike.scala.html#49041" title="(f: Any =&gt; AnyRef)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[Any],AnyRef,Seq[AnyRef]])Seq[AnyRef]">map</a><a href="../../../collection/Seq.scala.html#64333" title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,AnyRef,Seq[AnyRef]]" class="delimiter">(</a><a href="#745666" title="Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(name: String, args: Any*)Either[Throwable,AnyRef]" id="736611">callEither</a><span class="delimiter">(</span><a title="String" id="745029">name</a>: <span title="String">String</span>, <a title="Any*" id="745030">args</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <a href="../../../Either.scala.html#2084" title="Either[Throwable,AnyRef]">Either</a><span class="delimiter">[</span>Throwable, AnyRef<span class="delimiter">]</span> =
      <span class="keyword">try</span> <a href="../../../Either.scala.html#71958" title="(b: AnyRef)Right[Nothing,AnyRef]">Right</a><span class="delimiter">(</span><a href="#736610" title="(name: String, args: Any*)AnyRef">call</a><span class="delimiter">(</span><a href="#745029" title="String">name</a>, <a href="#745030" title="Any*">args</a>: _*<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Left[java.lang.Throwable,Nothing]" id="745690">ex</a>: <span title="Throwable">Throwable</span> =&gt; <a href="../../../Either.scala.html#71913" title="(a: java.lang.Throwable)Left[java.lang.Throwable,Nothing]">Left</a><span class="delimiter">(</span><a href="#745690" title="java.lang.Throwable">ex</a><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(name: String, args: Any*)Option[AnyRef]" id="736612">callOpt</a><span class="delimiter">(</span><a title="String" id="745695">name</a>: <span title="String">String</span>, <a title="Any*" id="745696">args</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[AnyRef]">Option</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> =
      <span class="keyword">try</span> <a href="../../../Option.scala.html#57885" title="(x: AnyRef)Some[AnyRef]">Some</a><span class="delimiter">(</span><a href="#736610" title="(name: String, args: Any*)AnyRef">call</a><span class="delimiter">(</span><a href="#745695" title="String">name</a>, <a href="#745696" title="Any*">args</a>: _*<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="None.type" id="745701">ex</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#736603" title="(t: Throwable)java.lang.String">bindError</a><span class="delimiter">(</span><a href="#745701" title="java.lang.Throwable">ex</a><span class="delimiter">)</span> ; <a href="../../../Option.scala.html#1737" title="object None">None</a> <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class EvalException extends java.lang.RuntimeException with ScalaObject" id="736613">EvalException</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="String" id="745710">msg</a>: <span title="String">String</span>, <a title="Throwable" id="745711">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../package.scala.html#47502" title="java.lang.RuntimeException">RuntimeException</a><span class="delimiter">(</span><a href="#745710" title="String">msg</a>, <a href="#745711" title="Throwable">cause</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: String, ex: Throwable)Nothing" id="736614">evalError</a><span class="delimiter">(</span><a title="String" id="745715">path</a>: <span title="String">String</span>, <a title="Throwable" id="745716">ex</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> =
      <span title="Nothing" class="keyword">throw</span> <span title="ReadEvalPrint.this.EvalException" class="keyword">new</span> <a href="#736613" title="ReadEvalPrint.this.EvalException">EvalException</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Failed to load \'&quot;)" class="string">&quot;Failed to load '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#745715" title="String">path</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\': &quot;)" class="string">&quot;': &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#745716" title="Throwable">ex</a>.<span title="()java.lang.String">getMessage</span>, <a href="#745716" title="Throwable">ex</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: String)Class[_]" id="736615">load</a><span class="delimiter">(</span><a title="String" id="745155">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">try</span> <span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#745155" title="String">path</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#523075" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a><span class="delimiter">)</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Nothing" id="745726">ex</a> =&gt; <a href="#736614" title="(path: String, ex: Throwable)Nothing">evalError</a><span class="delimiter">(</span><a href="#745155" title="String">path</a>, <a href="../util/Exceptional.scala.html#509857" title="(x: Throwable)Throwable">unwrap</a><span class="delimiter">(</span><a href="#745726" title="java.lang.Throwable">ex</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Option[Throwable]" id="736617">evalCaught</a>: <a href="../../../Option.scala.html#560" title="Option[Throwable]">Option</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <a href="../../../Option.scala.html#1737" title="object None">None</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.lang.Class[_]" id="736620">evalClass</a> = <a href="#736615" title="(path: String)Class[_]">load</a><span class="delimiter">(</span><a href="#736608" title="=&gt; java.lang.String">evalPath</a><span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[AnyRef]" id="736622">evalValue</a> = <a href="#736611" title="(name: String, args: Any*)Either[Throwable,AnyRef]">callEither</a><span class="delimiter">(</span><a href="#736598" title="=&gt; String">evalName</a><span class="delimiter">)</span> <span title="Option[AnyRef]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="None.type">Left</span><span class="delimiter">(</span><a title="Throwable" id="745163">ex</a><span class="delimiter">)</span>      =&gt; <a href="#736617" title="(x$1: Option[Throwable])Unit">evalCaught</a> = <a href="../../../Option.scala.html#57885" title="(x: Throwable)Some[Throwable]">Some</a><span class="delimiter">(</span><a href="#745163" title="Throwable">ex</a><span class="delimiter">)</span> ; <a href="../../../Option.scala.html#1737" title="object None">None</a>
      <span class="keyword">case</span> <span title="Some[AnyRef]">Right</span><span class="delimiter">(</span><a title="AnyRef" id="745168">result</a><span class="delimiter">)</span> =&gt; <a href="../../../Option.scala.html#57885" title="(x: AnyRef)Some[AnyRef]">Some</a><span class="delimiter">(</span><a href="#745168" title="AnyRef">result</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(source: String)Boolean" id="736623">compile</a><span class="delimiter">(</span><a title="String" id="745007">source</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <a href="#736632" title="(label: String, code: String)Boolean">compileAndSaveRun</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&lt;console&gt;&quot;)" class="string">&quot;&lt;console&gt;&quot;</span>, <a href="#745007" title="String">source</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="736624">lineAfterTyper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="736626">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="745748">op</a>: =&gt; T<span class="delimiter">)</span>: <a href="#736626" title="T">T</a> = <span class="delimiter">{</span>
      <a href="../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#736629" title="=&gt; IMain.this.global.Run">lastRun</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>, <span title="java.lang.String(&quot;Internal error: trying to use atPhase, but Run is null.&quot;)" class="string">&quot;Internal error: trying to use atPhase, but Run is null.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#523115" title="IMain.this.ReadEvalPrint" class="keyword">this</a><span class="delimiter">)</span>
      <a href="../symtab/SymbolTable.scala.html#478184" title="(ph: scala.tools.nsc.Phase)(op: =&gt; T)T">atPhase</a><span class="delimiter">(</span><a href="#736629" title="=&gt; IMain.this.global.Run">lastRun</a>.<a href="../Global.scala.html#482526" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>.<a href="../Phase.scala.html#505144" title="=&gt; scala.tools.nsc.Phase">next</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#745748" title="=&gt; T">op</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** The innermost object inside the wrapper, found by
      * following accessPath into the outer one.
      */</span>
    <span class="keyword">def</span> <a title="(accessPath: String)IMain.this.global.Symbol" id="736627">resolvePathToSymbol</a><span class="delimiter">(</span><a title="String" id="745764">accessPath</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="IMain.this.global.Symbol" id="745766">readRoot</a>  = <a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508339" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)IMain.this.global.TermName">readPath</a><span class="delimiter">)</span>   <span class="comment">// the outermost wrapper</span>
      <span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">accessPath</a> <a href="../../../Predef.scala.html#9626" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="Char(\'.\')" class="char">'.'</span><span class="delimiter">)</span>.<a href="../../../collection/IndexedSeqOptimized.scala.html#55938" title="(z: IMain.this.global.Symbol)(op: (IMain.this.global.Symbol, String) =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">foldLeft</a><span class="delimiter">(</span><a href="#745766" title="IMain.this.global.Symbol">readRoot</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="IMain.this.global.Symbol" id="746192">sym</a>, <a title="String" id="746193">name</a><span class="delimiter">)</span> =&gt;
        <span title="IMain.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#746193" title="String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#746192" title="IMain.this.global.Symbol">sym</a> <span class="keyword">else</span>
        <a href="#736624" title="(op: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">lineAfterTyper</a><span class="delimiter">(</span><a href="#746192" title="IMain.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509272" title="=&gt; IMain.this.global.Type">info</a> <a href="../symtab/Types.scala.html#507200" title="(name: IMain.this.global.Name)IMain.this.global.Symbol">member</a> <a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#746193" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="IMain.this.global.Run" id="736629">lastRun</a>: <a href="../Global.scala.html#478365" title="IMain.this.global.Run">Run</a> = _
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: String)java.lang.reflect.Method" id="736631">evalMethod</a><span class="delimiter">(</span><a title="String" id="745304">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#736619" title="=&gt; java.lang.Class[_]">evalClass</a>.<a href="../../../Predef.scala.html#9626" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: java.lang.reflect.Method =&gt; Boolean)Array[java.lang.reflect.Method]">filter</a> <span class="delimiter">(</span><a href="#745480" title="java.lang.reflect.Method">_</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#745304" title="String">name</a><span class="delimiter">)</span> <span title="java.lang.reflect.Method" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../Array.scala.html#62746" title="java.lang.reflect.Method">Array</a><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="745492">method</a><span class="delimiter">)</span> =&gt; <a href="#745492" title="java.lang.reflect.Method">method</a>
      <span class="keyword">case</span> <a title="Nothing" id="745493">xs</a>            =&gt; sys.<a href="../../../sys/package.scala.html#48163" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Internal error: eval object &quot;)" class="string">&quot;Internal error: eval object &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736619" title="=&gt; java.lang.Class[_]">evalClass</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../Predef.scala.html#9626" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">xs</a>.<a href="../../../collection/TraversableOnce.scala.html#53708" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>, <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(label: String, code: String)Boolean" id="736632">compileAndSaveRun</a><span class="delimiter">(</span><a title="String" id="745729">label</a>: <span title="String">String</span>, <a title="String" id="745730">code</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#523165" title="(code: String)Unit">showCodeIfDebugging</a><span class="delimiter">(</span><a href="#745730" title="String">code</a><span class="delimiter">)</span>
      <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/AbstractReporter.scala.html#482446" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#736629" title="(x$1: IMain.this.global.Run)Unit">lastRun</a> = <span title="IMain.this.global.Run" class="keyword">new</span> <a href="../Global.scala.html#478365" title="IMain.this.global.Run">Run</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#736629" title="=&gt; IMain.this.global.Run">lastRun</a>.<a href="../Global.scala.html#482575" title="(_sources: List[scala.tools.nsc.util.SourceFile])Unit">compileSources</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#48877" title="(xs: scala.tools.nsc.util.BatchSourceFile*)List[scala.tools.nsc.util.BatchSourceFile]">List</a><span class="delimiter">(</span><a href="../util/SourceFile.scala.html#501064" title="(sourceName: String, cs: Seq[Char])scala.tools.nsc.util.BatchSourceFile" class="keyword">new</a> <a href="../util/SourceFile.scala.html#42877" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><a href="#745729" title="String">label</a>, <a href="#736606" title="(code: String)java.lang.String">packaged</a><a href="../../../LowPriorityImplicits.scala.html#9503" title="implicit scala.LowPriorityImplicits.wrapString : (s: String)scala.collection.immutable.WrappedString" class="delimiter">(</a><a href="#745730" title="String">code</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479335" title="=&gt; Boolean">hasErrors</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** One line of code submitted by the user for interpretation */</span>
  <span class="comment">// private</span>
  <span class="keyword">class</span> <a title="class Request extends java.lang.Object with ScalaObject" id="523116">Request</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="743994">line</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="List[IMain.this.global.Tree]" id="743995">trees</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="IMain.this.ReadEvalPrint" id="733942">lineRep</a> = <a href="#736593" title="()IMain.this.ReadEvalPrint" class="keyword">new</a> <a href="#523115" title="IMain.this.ReadEvalPrint">ReadEvalPrint</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">import</span> <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.lineAfterTyper

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="String" id="733946">_originalLine</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="(s: String)Request.this.type" id="733948">withOriginalLine</a><span class="delimiter">(</span><a title="String" id="744906">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span> <a href="#733946" title="(x$1: String)Unit">_originalLine</a> = <a href="#744906" title="String">s</a> ; <a href="#523116" title="Request.this.type" class="keyword">this</a> <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="733949">originalLine</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#733946" title="=&gt; String">_originalLine</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#743994" title="=&gt; String">line</a> <span class="keyword">else</span> <a href="#733946" title="=&gt; String">_originalLine</a>

    <span class="comment">/** handlers for each tree in this request */</span>
    <span class="keyword">val</span> <a title="List[IMain.this.memberHandlers.MemberHandler]" id="733950">handlers</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.memberHandlers.MemberHandler]">List</a><span class="delimiter">[</span>MemberHandler<span class="delimiter">]</span> = <a href="#743995" title="=&gt; List[IMain.this.global.Tree]">trees</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: IMain.this.global.Tree =&gt; IMain.this.memberHandlers.MemberHandler)(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.global.Tree],IMain.this.memberHandlers.MemberHandler,List[IMain.this.memberHandlers.MemberHandler]])List[IMain.this.memberHandlers.MemberHandler]">map</a> <span class="delimiter">(</span><a href="#523029" title="=&gt; java.lang.Object with scala.tools.nsc.interpreter.MemberHandlers{val intp: IMain.this.type}">memberHandlers</a> <a href="MemberHandlers.scala.html#733192" title="(member: IMain.this.memberHandlers.intp.global.Tree)IMain.this.memberHandlers.MemberHandler">chooseHandler</a> <a href="#746243" title="IMain.this.global.Tree">_</a><span class="delimiter">)</span>

    <span class="comment">/** all (public) names defined by these statements */</span>
    <span class="keyword">val</span> <a title="List[IMain.this.memberHandlers.intp.global.Name]" id="733952">definedNames</a> = <a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.Name])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.intp.global.Name,List[IMain.this.memberHandlers.intp.global.Name]])List[IMain.this.memberHandlers.intp.global.Name]">flatMap</a> <span class="delimiter">(</span><a href="#743181" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="MemberHandlers.scala.html#734039" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a><span class="delimiter">)</span>

    <span class="comment">/** list of names used by this expression */</span>
    <span class="keyword">val</span> <a title="List[IMain.this.global.Name]" id="733954">referencedNames</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.global.Name]">List</a><span class="delimiter">[</span>Name<span class="delimiter">]</span> = <a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.Name])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.intp.global.Name,List[IMain.this.global.Name]])List[IMain.this.global.Name]">flatMap</a> <span class="delimiter">(</span><a href="#746289" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="MemberHandlers.scala.html#734036" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">referencedNames</a><span class="delimiter">)</span>

    <span class="comment">/** def and val names */</span>
    <span class="keyword">def</span> <a title="=&gt; List[IMain.this.memberHandlers.intp.global.TermName]" id="733956">termNames</a> = <a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.TermName])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.intp.global.TermName,List[IMain.this.memberHandlers.intp.global.TermName]])List[IMain.this.memberHandlers.intp.global.TermName]">flatMap</a> <span class="delimiter">(</span><a href="#746330" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="../../../Option.scala.html#80646" title="(xo: Option[IMain.this.memberHandlers.intp.global.TermName])Iterable[IMain.this.memberHandlers.intp.global.TermName]">definesTerm</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; List[IMain.this.memberHandlers.intp.global.TypeName]" id="733957">typeNames</a> = <a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.TypeName])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.intp.global.TypeName,List[IMain.this.memberHandlers.intp.global.TypeName]])List[IMain.this.memberHandlers.intp.global.TypeName]">flatMap</a> <span class="delimiter">(</span><a href="#746410" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="../../../Option.scala.html#80646" title="(xo: Option[IMain.this.memberHandlers.intp.global.TypeName])Iterable[IMain.this.memberHandlers.intp.global.TypeName]">definesType</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]" id="733958">definedOrImported</a> = <a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.Name])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.intp.global.Name,List[IMain.this.memberHandlers.intp.global.Name]])List[IMain.this.memberHandlers.intp.global.Name]">flatMap</a> <span class="delimiter">(</span><a href="#746490" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="MemberHandlers.scala.html#734040" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedOrImported</a><span class="delimiter">)</span>

    <span class="comment">/** Code to import bound names from previous lines - accessPath is code to
      * append to objectName to access anything bound by request.
      */</span>
    <span class="keyword">val</span> ComputedImports<a href="../../../Tuple3.scala.html#53296" title="(String, String, String)" class="delimiter">(</a><a href="../../../Tuple3.scala.html#53312" title="String" id="733960">importsPreamble</a>, <a href="../../../Tuple3.scala.html#53314" title="String" id="733962">importsTrailer</a>, <a href="../../../Tuple3.scala.html#53316" title="String" id="733964">accessPath</a><span class="delimiter">)</span> =
      <a href="Imports.scala.html#522977" title="(wanted: Set[IMain.this.global.Name])IMain.this.ComputedImports">importsCode</a><a href="Imports.scala.html#522974" title="IMain.this.ComputedImports @unchecked" class="delimiter">(</a><a href="#733954" title="=&gt; List[IMain.this.global.Name]">referencedNames</a>.<a href="../../../collection/TraversableOnce.scala.html#53700" title="scala.collection.immutable.Set[IMain.this.global.Name]">toSet</a><span class="delimiter">)</span>

    <span class="comment">/** Code to access a variable with the specified name */</span>
    <span class="keyword">def</span> <a title="(vname: String)java.lang.String" id="733966">fullPath</a><span class="delimiter">(</span><a title="String" id="742977">vname</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">(</span>
      <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736607" title="=&gt; java.lang.String">readPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#733964" title="=&gt; String">accessPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;.`%s`&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#742977" title="String">vname</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="comment">/** Same as fullpath, but after it has been flattened, so:
     *  $line5.$iw.$iw.$iw.Bippy      // fullPath
     *  $line5.$iw$$iw$$iw$Bippy      // fullFlatName
     */</span>
    <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="733967">fullFlatName</a><span class="delimiter">(</span><a title="String" id="736587">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736607" title="=&gt; java.lang.String">readPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#733964" title="=&gt; String">accessPath</a>.<span title="(x$1: Char, x$2: Char)java.lang.String">replace</span><span class="delimiter">(</span><span title="Char(\'.\')" class="char">'.'</span>, <span title="Char(\'$\')" class="char">'$'</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736587" title="String">name</a>

    <span class="comment">/** The unmangled symbol name, but supplemented with line info. */</span>
    <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)String" id="733968">disambiguated</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="746584">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="../../../Predef.scala.html#9681" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <a href="../../../runtime/StringAdd.scala.html#58450" title="(other: String)java.lang.String">+</a> <span title="java.lang.String(&quot; (in &quot;)" class="string">&quot; (in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>

    <span class="comment">/** Code to access a variable with the specified name */</span>
    <span class="keyword">def</span> <a title="(vname: IMain.this.global.Name)String" id="733969">fullPath</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="742975">vname</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#733966" title="(vname: String)java.lang.String">fullPath</a><span class="delimiter">(</span><a href="#742975" title="IMain.this.global.Name">vname</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span>

    <span class="comment">/** the line of code to compute */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="733970">toCompute</a> = <a href="#743994" title="=&gt; String">line</a>

    <span class="comment">/** generate the source code for the object that computes this request */</span>
    <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Request.this.ObjectSourceCode" id="733971">ObjectSourceCode</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="#523190" title="scala.tools.nsc.interpreter.IMain.CodeAssembler[IMain.this.memberHandlers.MemberHandler]">CodeAssembler</a><span class="delimiter">[</span>MemberHandler<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="746603">preamble</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
        |object %s {
        |%s%s
      &quot;&quot;&quot;</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736596" title="=&gt; String">readName</a>, <a href="#733960" title="=&gt; String">importsPreamble</a>, <a href="Formatting.scala.html#733050" title="(code: String)String">indentCode</a><span class="delimiter">(</span><a href="#733970" title="=&gt; String">toCompute</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="746605">postamble</a> = <a href="#733962" title="=&gt; String">importsTrailer</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012}&quot;)" class="string">&quot;\n}&quot;</span>
      <span class="keyword">val</span> <a title="IMain.this.memberHandlers.MemberHandler =&gt; String" id="746607">generate</a> = <span class="delimiter">(</span>m: <a href="MemberHandlers.scala.html#733194" title="IMain.this.memberHandlers.MemberHandler">MemberHandler</a><span class="delimiter">)</span> =&gt; <a href="#746624" title="IMain.this.memberHandlers.MemberHandler">m</a> <a href="MemberHandlers.scala.html#734041" title="(req: IMain.this.memberHandlers.intp.Request)String">extraCodeToEvaluate</a> <a href="#523116" title="IMain.this.Request">Request</a>.<span class="keyword">this</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Request.this.ResultObjectSourceCode" id="733973">ResultObjectSourceCode</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="#523190" title="scala.tools.nsc.interpreter.IMain.CodeAssembler[IMain.this.memberHandlers.MemberHandler]">CodeAssembler</a><span class="delimiter">[</span>MemberHandler<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="comment">/** We only want to generate this code when the result
       *  is a value which can be referred to as-is.
       */</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="746640">evalResult</a> =
        <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71051" title="=&gt; IMain.this.memberHandlers.MemberHandler">last</a>.<a href="MemberHandlers.scala.html#734032" title="=&gt; Boolean">definesValue</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">else</span> <a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71051" title="=&gt; IMain.this.memberHandlers.MemberHandler">last</a>.<a href="MemberHandlers.scala.html#734034" title="=&gt; Option[IMain.this.memberHandlers.intp.global.TermName]">definesTerm</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="IMain.this.memberHandlers.intp.global.TermName" id="746650">vname</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#733993" title="=&gt; Map[IMain.this.global.Name,String]">typeOf</a> <a href="../../../collection/MapLike.scala.html#73205" title="(key: IMain.this.global.Name)Boolean">contains</a> <a href="#746650" title="IMain.this.memberHandlers.intp.global.TermName">vname</a> =&gt;
            <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
            |lazy val $result = {
            |  %s
            |  %s
            |}&quot;&quot;&quot;</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736600" title="=&gt; String">printName</a>, <a href="#733969" title="(vname: IMain.this.global.Name)String">fullPath</a><span class="delimiter">(</span><a href="#746650" title="IMain.this.memberHandlers.intp.global.TermName">vname</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">_</span>  =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="delimiter">}</span>
      <span class="comment">// first line evaluates object to make sure constructor is run</span>
      <span class="comment">// initial &quot;&quot; so later code can uniformly be: + etc</span>
      <span class="keyword">val</span> <a title="String" id="746642">preamble</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
      |object %s {
      |  %s
      |  val %s: String = %s {
      |    %s
      |    (&quot;&quot;
      &quot;&quot;&quot;</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span>
        <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736598" title="=&gt; String">evalName</a>, <a href="#746640" title="=&gt; java.lang.String">evalResult</a>, <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736600" title="=&gt; String">printName</a>,
        <a href="#523059" title="=&gt; String">executionWrapper</a>, <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736596" title="=&gt; String">readName</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#733964" title="=&gt; String">accessPath</a>
      <span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="String" id="746644">postamble</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
      |    )
      |  }
      |}
      &quot;&quot;&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56560" title="=&gt; String">stripMargin</a>
      <span class="keyword">val</span> <a title="IMain.this.memberHandlers.MemberHandler =&gt; String" id="746646">generate</a> = <span class="delimiter">(</span>m: <a href="MemberHandlers.scala.html#733194" title="IMain.this.memberHandlers.MemberHandler">MemberHandler</a><span class="delimiter">)</span> =&gt; <a href="#746695" title="IMain.this.memberHandlers.MemberHandler">m</a> <a href="MemberHandlers.scala.html#734042" title="(req: IMain.this.memberHandlers.intp.Request)String">resultExtractionCode</a> <a href="#523116" title="IMain.this.Request">Request</a>.<span class="keyword">this</span>
    <span class="delimiter">}</span>

    <span class="comment">// get it</span>
    <span class="keyword">def</span> <a title="[T]=&gt; Option[T]" id="733975">getEvalTyped</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="733977">T</a><span class="delimiter">]</span> : <a href="../../../Option.scala.html#560" title="Option[T]">Option</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#733978" title="=&gt; Option[AnyRef]">getEval</a> <a href="../../../Option.scala.html#48480" title="(f: AnyRef =&gt; T)Option[T]">map</a> <span class="delimiter">(</span><a href="#746711" title="AnyRef">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#733977" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Option[AnyRef]" id="733978">getEval</a>: <a href="../../../Option.scala.html#560" title="Option[AnyRef]">Option</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="comment">// ensure it has been compiled</span>
      <a href="#733979" title="=&gt; Boolean">compile</a>
      <span class="comment">// try to load it and call the value method</span>
      <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736621" title="=&gt; Option[AnyRef]">evalValue</a> <a href="../../../Option.scala.html#48487" title="(p: AnyRef =&gt; Boolean)Option[AnyRef]">filterNot</a> <span class="delimiter">(</span><a href="#746715" title="AnyRef">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Compile the object file.  Returns whether the compilation succeeded.
     *  If all goes well, the &quot;types&quot; map is computed. */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="733980">compile</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <span class="comment">// error counting is wrong, hence interpreter may overlook failure - so we reset</span>
      <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/AbstractReporter.scala.html#482446" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <span class="comment">// compile the object containing the user's code</span>
      <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736623" title="(source: String)Boolean">compile</a><span class="delimiter">(</span><a href="#746601" title="(contributors: List[IMain.this.memberHandlers.MemberHandler])String">ObjectSourceCode</a><span class="delimiter">(</span><a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
        <span class="comment">// extract and remember types</span>
        <a href="#733993" title="=&gt; Map[IMain.this.global.Name,String]">typeOf</a>
        <a href="#733997" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Type]">typesOfDefinedTerms</a>

        <span class="comment">// compile the result-extraction object</span>
        <a href="#523041" title="(operation: =&gt; Boolean)Boolean">beSilentDuring</a> <span class="delimiter">{</span>
          <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a> <a href="#736623" title="(source: String)Boolean">compile</a> <a href="#746601" title="(contributors: List[IMain.this.memberHandlers.MemberHandler])String">ResultObjectSourceCode</a><span class="delimiter">(</span><a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="IMain.this.global.Symbol" id="733982">resultSymbol</a> = <a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736627" title="(accessPath: String)IMain.this.global.Symbol">resolvePathToSymbol</a><span class="delimiter">(</span><a href="#733964" title="=&gt; String">accessPath</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[T](name: IMain.this.global.Name, f: IMain.this.global.Symbol =&gt; T)T" id="733983">applyToResultMember</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="733985">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="IMain.this.global.Name" id="746727">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a>, <a title="IMain.this.global.Symbol =&gt; T" id="746728">f</a>: Symbol =&gt; T<span class="delimiter">)</span> = <a href="#736624" title="(op: =&gt; T)T">lineAfterTyper</a><span class="delimiter">(</span><a href="../../../Function1.scala.html#53453" title="(v1: IMain.this.global.Symbol)T">f</a><span class="delimiter">(</span><a href="#733981" title="=&gt; IMain.this.global.Symbol">resultSymbol</a>.<a href="../symtab/Symbols.scala.html#509272" title="=&gt; IMain.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#507194" title="(name: IMain.this.global.Name)IMain.this.global.Symbol">nonPrivateDecl</a><span class="delimiter">(</span><a href="#746727" title="IMain.this.global.Name">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/* typeOf lookup with encoding */</span>
    <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)String" id="733986">lookupTypeOf</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="746737">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span> = <a href="#733993" title="=&gt; Map[IMain.this.global.Name,String]">typeOf</a>.<a href="../../../collection/MapLike.scala.html#73201" title="(key: IMain.this.global.Name, default: =&gt; String)String">getOrElse</a><span class="delimiter">(</span><a href="#746737" title="IMain.this.global.Name">name</a>, <a href="../../../collection/MapLike.scala.html#73204" title="(key: IMain.this.global.Name)String">typeOf</a><span class="delimiter">(</span><a href="#523020" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../../../reflect/generic/StdNames.scala.html#434008" title="(str: String)IMain.this.global.TermName">encode</a><span class="delimiter">(</span><a href="#746737" title="IMain.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(name: IMain.this.global.TypeName)Option[IMain.this.global.Name]" id="733987">simpleNameOfType</a><span class="delimiter">(</span><a title="IMain.this.global.TypeName" id="743069">name</a>: <a href="../symtab/Names.scala.html#478415" title="IMain.this.global.TypeName">TypeName</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#733991" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Type]">compilerTypeOf</a> <a href="../../../collection/MapLike.scala.html#73194" title="(key: IMain.this.global.Name)Option[IMain.this.global.Type]">get</a> <a href="#743069" title="IMain.this.global.TypeName">name</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48480" title="(f: IMain.this.global.Type =&gt; IMain.this.global.Name)Option[IMain.this.global.Name]">map</a> <span class="delimiter">(</span><a href="#743084" title="IMain.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; IMain.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#509356" title="=&gt; IMain.this.global.Name">simpleName</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](f: IMain.this.global.Type =&gt; T)Map[IMain.this.global.Name,T]" id="733988">typeMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="733990">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="IMain.this.global.Type =&gt; T" id="743072">f</a>: Type =&gt; T<span class="delimiter">)</span>: <a href="../../../collection/immutable/Map.scala.html#13468" title="Map[IMain.this.global.Name,T]">Map</a><span class="delimiter">[</span>Name, T<span class="delimiter">]</span> =
      <a href="#733956" title="=&gt; List[IMain.this.memberHandlers.intp.global.TermName]">termNames</a> <a href="../../../collection/immutable/List.scala.html#49152" title="(that: scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.Name])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.intp.global.TermName],IMain.this.memberHandlers.intp.global.Name,List[IMain.this.memberHandlers.intp.global.Name]])List[IMain.this.memberHandlers.intp.global.Name]">++</a> <a href="#733957" title="=&gt; List[IMain.this.memberHandlers.intp.global.TypeName]">typeNames</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: IMain.this.memberHandlers.intp.global.Name =&gt; (IMain.this.memberHandlers.intp.global.Name, T))(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.intp.global.Name],(IMain.this.memberHandlers.intp.global.Name, T),List[(IMain.this.memberHandlers.intp.global.Name, T)]])List[(IMain.this.memberHandlers.intp.global.Name, T)]">map</a> <span class="delimiter">(</span><a title="IMain.this.memberHandlers.intp.global.Name" id="747411">x</a> =&gt; <a href="../../../Predef.scala.html#9589" title="(x: IMain.this.memberHandlers.intp.global.Name)ArrowAssoc[IMain.this.memberHandlers.intp.global.Name]">x</a> <a href="../../../Predef.scala.html#57653" title="(y: T)(IMain.this.memberHandlers.intp.global.Name, T)">-&gt;</a> <a href="../../../Function1.scala.html#53453" title="(v1: IMain.this.global.Type)T">f</a><span class="delimiter">(</span><a href="#523099" title="(sym: IMain.this.global.Symbol, memberName: IMain.this.global.Name)IMain.this.global.Type">typeCleanser</a><span class="delimiter">(</span><a href="#733981" title="=&gt; IMain.this.global.Symbol">resultSymbol</a>, <a href="#747411" title="IMain.this.memberHandlers.intp.global.Name">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53703" title="(implicit ev: &lt;:&lt;[(IMain.this.memberHandlers.intp.global.Name, T),(IMain.this.global.Name, T)])scala.collection.immutable.Map[IMain.this.global.Name,T]">toMap</a>

    <span class="comment">/** Types of variables defined by this request. */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[IMain.this.global.Name,IMain.this.global.Type]" id="733992">compilerTypeOf</a> = <a href="#733988" title="[T](f: IMain.this.global.Type =&gt; T)Map[IMain.this.global.Name,T]">typeMap</a><span title="(f: IMain.this.global.Type =&gt; IMain.this.global.Type)Map[IMain.this.global.Name,IMain.this.global.Type]" class="delimiter">[</span><a href="../symtab/Types.scala.html#478720" title="IMain.this.global.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="IMain.this.global.Type" id="743077">x</a> =&gt; <a href="#743077" title="IMain.this.global.Type">x</a><span class="delimiter">)</span>
    <span class="comment">/** String representations of same. */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[IMain.this.global.Name,String]" id="733994">typeOf</a>         = <a href="#733988" title="[T](f: IMain.this.global.Type =&gt; T)Map[IMain.this.global.Name,T]">typeMap</a><span title="(f: IMain.this.global.Type =&gt; String)Map[IMain.this.global.Name,String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="IMain.this.global.Type" id="746210">tp</a> =&gt; <a href="#523035" title="(op: =&gt; String)String">afterTyper</a><span class="delimiter">(</span><a href="#746210" title="IMain.this.global.Type">tp</a>.<a href="../../../reflect/generic/Types.scala.html#434192" title="()String">toString</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// lazy val definedTypes: Map[Name, Type] = {</span>
    <span class="comment">//   typeNames map (x =&gt; x -&gt; afterTyper(resultSymbol.info.nonPrivateDecl(x).tpe)) toMap</span>
    <span class="comment">// }</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[IMain.this.global.Name,IMain.this.global.Symbol]" id="733996">definedSymbols</a>: <a href="../../../collection/immutable/Map.scala.html#13468" title="Map[IMain.this.global.Name,IMain.this.global.Symbol]">Map</a><span class="delimiter">[</span>Name, Symbol<span class="delimiter">]</span> = <span class="delimiter">(</span>
      <a href="#733956" title="=&gt; List[IMain.this.memberHandlers.intp.global.TermName]">termNames</a>.<a href="../../../collection/TraversableLike.scala.html#49041" title="(f: IMain.this.memberHandlers.intp.global.TermName =&gt; (IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol))(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.intp.global.TermName],(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol),List[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol)]])List[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol)]">map</a><a href="../../../collection/immutable/List.scala.html#48868" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol),List[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol)]]" class="delimiter">(</a><a title="IMain.this.memberHandlers.intp.global.TermName" id="747497">x</a> =&gt; <a href="../../../Predef.scala.html#9589" title="(x: IMain.this.memberHandlers.intp.global.TermName)ArrowAssoc[IMain.this.memberHandlers.intp.global.TermName]">x</a> <a href="../../../Predef.scala.html#57653" title="(y: IMain.this.global.Symbol)(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol)">-&gt;</a> <a href="#733983" title="(name: IMain.this.global.Name, f: IMain.this.global.Symbol =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">applyToResultMember</a><span class="delimiter">(</span><a href="#747497" title="IMain.this.memberHandlers.intp.global.TermName">x</a>, <a title="IMain.this.global.Symbol" id="747517">x</a> =&gt; <a href="#747517" title="IMain.this.global.Symbol">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#49152" title="(that: scala.collection.GenTraversableOnce[(IMain.this.memberHandlers.intp.global.Name, IMain.this.global.Symbol)])(implicit bf: scala.collection.generic.CanBuildFrom[List[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Symbol)],(IMain.this.memberHandlers.intp.global.Name, IMain.this.global.Symbol),List[(IMain.this.memberHandlers.intp.global.Name, IMain.this.global.Symbol)]])List[(IMain.this.memberHandlers.intp.global.Name, IMain.this.global.Symbol)]">++</a>
      <a href="#733957" title="=&gt; List[IMain.this.memberHandlers.intp.global.TypeName]">typeNames</a>.<a href="../../../collection/TraversableLike.scala.html#49041" title="(f: IMain.this.memberHandlers.intp.global.TypeName =&gt; (IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol))(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.intp.global.TypeName],(IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol),List[(IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol)]])List[(IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol)]">map</a><a href="../../../collection/immutable/List.scala.html#48868" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol),List[(IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol)]]" class="delimiter">(</a><a title="IMain.this.memberHandlers.intp.global.TypeName" id="747605">x</a> =&gt; <a href="../../../Predef.scala.html#9589" title="(x: IMain.this.memberHandlers.intp.global.TypeName)ArrowAssoc[IMain.this.memberHandlers.intp.global.TypeName]">x</a> <a href="../../../Predef.scala.html#57653" title="(y: IMain.this.global.Symbol)(IMain.this.memberHandlers.intp.global.TypeName, IMain.this.global.Symbol)">-&gt;</a> <a href="#733991" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Type]">compilerTypeOf</a>.<a href="../../../collection/MapLike.scala.html#73194" title="(key: IMain.this.global.Name)Option[IMain.this.global.Type]">get</a><span class="delimiter">(</span><a href="#747605" title="IMain.this.memberHandlers.intp.global.TypeName">x</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#48480" title="(f: IMain.this.global.Type =&gt; IMain.this.global.Symbol)Option[IMain.this.global.Symbol]">map</a><span class="delimiter">(</span><a href="#747627" title="IMain.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; IMain.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#48474" title="(default: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">getOrElse</a><span class="delimiter">(</span><a href="../symtab/Symbols.scala.html#478667" title="object IMain.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#53703" title="(implicit ev: &lt;:&lt;[(IMain.this.memberHandlers.intp.global.Name, IMain.this.global.Symbol),(IMain.this.global.Name, IMain.this.global.Symbol)])scala.collection.immutable.Map[IMain.this.global.Name,IMain.this.global.Symbol]">toMap</a>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[IMain.this.global.Name,IMain.this.global.Type]" id="733998">typesOfDefinedTerms</a>: <a href="../../../collection/immutable/Map.scala.html#13468" title="Map[IMain.this.global.Name,IMain.this.global.Type]">Map</a><span class="delimiter">[</span>Name, Type<span class="delimiter">]</span> =
      <a href="#733956" title="=&gt; List[IMain.this.memberHandlers.intp.global.TermName]">termNames</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: IMain.this.memberHandlers.intp.global.TermName =&gt; (IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Type))(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.intp.global.TermName],(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Type),List[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Type)]])List[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Type)]">map</a> <span class="delimiter">(</span><a title="IMain.this.memberHandlers.intp.global.TermName" id="748300">x</a> =&gt; <a href="../../../Predef.scala.html#9589" title="(x: IMain.this.memberHandlers.intp.global.TermName)ArrowAssoc[IMain.this.memberHandlers.intp.global.TermName]">x</a> <a href="../../../Predef.scala.html#57653" title="(y: IMain.this.global.Type)(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Type)">-&gt;</a> <a href="#733983" title="(name: IMain.this.global.Name, f: IMain.this.global.Symbol =&gt; IMain.this.global.Type)IMain.this.global.Type">applyToResultMember</a><span class="delimiter">(</span><a href="#748300" title="IMain.this.memberHandlers.intp.global.TermName">x</a>, <a href="#748320" title="IMain.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; IMain.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53703" title="(implicit ev: &lt;:&lt;[(IMain.this.memberHandlers.intp.global.TermName, IMain.this.global.Type),(IMain.this.global.Name, IMain.this.global.Type)])scala.collection.immutable.Map[IMain.this.global.Name,IMain.this.global.Type]">toMap</a>

    <span class="comment">/** load and run the code using reflection */</span>
    <span class="keyword">def</span> <a title="=&gt; (String, Boolean)" id="733999">loadAndRun</a>: <a href="../../../Tuple2.scala.html#1520" title="(String, Boolean)" class="delimiter">(</a>String, Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523062" title="=&gt; scala.tools.nsc.interpreter.Line.Manager">lineManager</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span class="delimiter">{</span>
        <span class="keyword">try</span>   <span class="delimiter">{</span> <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.String, _2: Boolean)(java.lang.String, Boolean)" class="delimiter">(</a><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a> <a href="#736610" title="(name: String, args: Any*)AnyRef">call</a> <a href="Naming.scala.html#733156" title="=&gt; IMain.this.naming.SessionNames">sessionNames</a>.<a href="Naming.scala.html#734531" title="=&gt; String">print</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="(java.lang.String, Boolean)" id="748384">ex</a> =&gt; <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.String, _2: Boolean)(java.lang.String, Boolean)" class="delimiter">(</a><a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736603" title="(t: Throwable)java.lang.String">bindError</a><span class="delimiter">(</span><a href="#748384" title="java.lang.Throwable">ex</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">import</span> interpreter.<a href="Line.scala.html#30685" title="object scala.tools.nsc.interpreter.Line">Line</a>._

      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Line[AnyRef]" id="748391">execution</a> = <a href="#523062" title="=&gt; scala.tools.nsc.interpreter.Line.Manager">lineManager</a>.<a href="Line.scala.html#737202" title="(code: String)(body: =&gt; AnyRef)scala.tools.nsc.interpreter.Line[AnyRef]">set</a><span class="delimiter">(</span><a href="#733949" title="=&gt; String">originalLine</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a> <a href="#736610" title="(name: String, args: Any*)AnyRef">call</a> <a href="Naming.scala.html#733156" title="=&gt; IMain.this.naming.SessionNames">sessionNames</a>.<a href="Naming.scala.html#734531" title="=&gt; String">print</a><span class="delimiter">)</span>
        <a href="#748391" title="scala.tools.nsc.interpreter.Line[AnyRef]">execution</a>.<a href="Line.scala.html#737291" title="()Unit">await</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <a href="#748391" title="scala.tools.nsc.interpreter.Line[AnyRef]">execution</a>.<a href="Line.scala.html#737283" title="=&gt; scala.tools.nsc.interpreter.Line.State">state</a> <span title="(String, Boolean)" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="Line.scala.html#737190" title="(java.lang.String, Boolean)">Done</a>       =&gt; <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.String, _2: Boolean)(java.lang.String, Boolean)" class="delimiter">(</a><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#748391" title="scala.tools.nsc.interpreter.Line[AnyRef]">execution</a>.<a href="Line.scala.html#737290" title="()Any">get</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="Line.scala.html#737186" title="(java.lang.String, Boolean)">Threw</a>      =&gt; <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.String, _2: Boolean)(java.lang.String, Boolean)" class="delimiter">(</a><a href="#733942" title="=&gt; IMain.this.ReadEvalPrint">lineRep</a>.<a href="#736603" title="(t: Throwable)java.lang.String">bindError</a><span class="delimiter">(</span><a href="#748391" title="scala.tools.nsc.interpreter.Line[AnyRef]">execution</a>.<a href="Line.scala.html#737289" title="()Throwable">caught</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="Line.scala.html#737188" title="(java.lang.String, Boolean)">Cancelled</a>  =&gt; <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.String, _2: Boolean)(java.lang.String, Boolean)" class="delimiter">(</a><span title="java.lang.String(&quot;Execution interrupted by signal.\012&quot;)" class="string">&quot;Execution interrupted by signal.\n&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="Line.scala.html#737184" title="(java.lang.String, Boolean)">Running</a>    =&gt; <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.String, _2: Boolean)(java.lang.String, Boolean)" class="delimiter">(</a><span title="java.lang.String(&quot;Execution still running! Seems impossible.&quot;)" class="string">&quot;Execution still running! Seems impossible.&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">finally</span> <a href="#523062" title="=&gt; scala.tools.nsc.interpreter.Line.Manager">lineManager</a>.<a href="Line.scala.html#737201" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="734000">toString</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Request(line=%s, %s trees)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#743994" title="=&gt; String">line</a>, <a href="#743995" title="=&gt; List[IMain.this.global.Tree]">trees</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the name of the most recent interpreter result.
   *  Mostly this exists so you can conveniently invoke methods on
   *  the previous result.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="523117">mostRecentVar</a>: <span title="String">String</span> =
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#523086" title="=&gt; Option[IMain.this.global.Tree]">mostRecentlyHandledTree</a>.<a href="../../../Option.scala.html#48471" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#523086" title="=&gt; Option[IMain.this.global.Tree]">mostRecentlyHandledTree</a>.<a href="../../../Option.scala.html#48473" title="=&gt; IMain.this.global.Tree">get</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="IMain.this.global.TermName" id="748473">x</a>: <a href="../../../reflect/generic/Trees.scala.html#434048" title="IMain.this.global.ValOrDefDef">ValOrDefDef</a>           =&gt; <a href="#748473" title="IMain.this.global.ValOrDefDef">x</a>.<a href="../../../reflect/generic/Trees.scala.html#441782" title="=&gt; IMain.this.global.TermName">name</a>
      <span class="keyword">case</span> <span title="IMain.this.global.Name">Assign</span><span class="delimiter">(</span>Ident<span class="delimiter">(</span><a title="IMain.this.global.Name" id="748480">name</a><span class="delimiter">)</span>, _<span class="delimiter">)</span>   =&gt; <a href="#748480" title="IMain.this.global.Name">name</a>
      <span class="keyword">case</span> <span title="IMain.this.global.TermName">ModuleDef</span><span class="delimiter">(</span>_, <a title="IMain.this.global.TermName" id="748488">name</a>, _<span class="delimiter">)</span>    =&gt; <a href="#748488" title="IMain.this.global.TermName">name</a>
      <span class="keyword">case</span> <span title="String">_</span>                        =&gt; <a href="#523026" title="object IMain.this.naming">naming</a>.<a href="Naming.scala.html#733171" title="=&gt; String">mostRecentVar</a>
    <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)Option[IMain.this.Request]" id="523118">requestForName</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="748492">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.Request]">Option</a><span class="delimiter">[</span>Request<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="../../../Predef.scala.html#9566" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>, <span title="java.lang.String(&quot;definedNameMap is null&quot;)" class="string">&quot;definedNameMap is null&quot;</span><span class="delimiter">)</span>
    <a href="#523153" title="=&gt; scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]">definedNameMap</a> <a href="../../../collection/MapLike.scala.html#73194" title="(key: IMain.this.global.Name)Option[IMain.this.Request]">get</a> <a href="#748492" title="IMain.this.global.Name">name</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(line: String)Option[IMain.this.Request]" id="523119">requestForIdent</a><span class="delimiter">(</span><a title="String" id="736580">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.Request]">Option</a><span class="delimiter">[</span>Request<span class="delimiter">]</span> =
    <a href="#523118" title="(name: IMain.this.global.Name)Option[IMain.this.Request]">requestForName</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#736580" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48497" title="(alternative: =&gt; Option[IMain.this.Request])Option[IMain.this.Request]">orElse</a> <a href="#523118" title="(name: IMain.this.global.Name)Option[IMain.this.Request]">requestForName</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478405" title="(s: String)IMain.this.global.TypeName">newTypeName</a><span class="delimiter">(</span><a href="#736580" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)List[IMain.this.Request]" id="523120">requestHistoryForName</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="748511">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.Request]">List</a><span class="delimiter">[</span>Request<span class="delimiter">]</span> =
    <a href="#523149" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">prevRequests</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#61794" title="=&gt; List[IMain.this.Request]">toList</a>.<a href="../../../collection/immutable/List.scala.html#49171" title="=&gt; List[IMain.this.Request]">reverse</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: IMain.this.Request =&gt; Boolean)List[IMain.this.Request]">filter</a> <span class="delimiter">(</span><a href="#748519" title="IMain.this.Request">_</a>.<a href="#733952" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a> <a href="../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <a href="#748511" title="IMain.this.global.Name">name</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: String)Option[IMain.this.global.Symbol]" id="523121">safeClass</a><span class="delimiter">(</span><a title="String" id="733146">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Symbol]">Option</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="../../../Option.scala.html#57885" title="(x: IMain.this.global.Symbol)Some[IMain.this.global.Symbol]">Some</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508340" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478405" title="(s: String)IMain.this.global.TypeName">newTypeName</a><span class="delimiter">(</span><a href="#733146" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span>: <a href="../FatalError.scala.html#23028" title="scala.tools.nsc.MissingRequirementError">MissingRequirementError</a> =&gt; <a href="../../../Option.scala.html#1737" title="object None">None</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)Option[IMain.this.global.Symbol]" id="523122">safeModule</a><span class="delimiter">(</span><a title="String" id="734500">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Symbol]">Option</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="../../../Option.scala.html#57885" title="(x: IMain.this.global.Symbol)Some[IMain.this.global.Symbol]">Some</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508339" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#734500" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span>: <a href="../FatalError.scala.html#23028" title="scala.tools.nsc.MissingRequirementError">MissingRequirementError</a> =&gt; <a href="../../../Option.scala.html#1737" title="object None">None</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)Option[IMain.this.memberHandlers.MemberHandler]" id="523123">definitionForName</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="748534">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.memberHandlers.MemberHandler]">Option</a><span class="delimiter">[</span>MemberHandler<span class="delimiter">]</span> =
    <a href="#523118" title="(name: IMain.this.global.Name)Option[IMain.this.Request]">requestForName</a><span class="delimiter">(</span><a href="#748534" title="IMain.this.global.Name">name</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48483" title="(f: IMain.this.Request =&gt; Option[IMain.this.memberHandlers.MemberHandler])Option[IMain.this.memberHandlers.MemberHandler]">flatMap</a> <span class="delimiter">{</span> <a title="IMain.this.Request" id="748540">req</a> =&gt;
      <a href="#748540" title="IMain.this.Request">req</a>.<a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71038" title="(p: IMain.this.memberHandlers.MemberHandler =&gt; Boolean)Option[IMain.this.memberHandlers.MemberHandler]">find</a> <span class="delimiter">(</span><a href="#748547" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="MemberHandlers.scala.html#734039" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a> <a href="../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <a href="#748534" title="IMain.this.global.Name">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(id: String)Option[AnyRef]" id="523124">valueOfTerm</a><span class="delimiter">(</span><a title="String" id="748549">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[AnyRef]">Option</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> =
    <a href="#523119" title="(line: String)Option[IMain.this.Request]">requestForIdent</a><span class="delimiter">(</span><a href="#748549" title="String">id</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48483" title="(f: IMain.this.Request =&gt; Option[AnyRef])Option[AnyRef]">flatMap</a> <span class="delimiter">(</span><a href="#748554" title="IMain.this.Request">_</a>.<a href="#733978" title="=&gt; Option[AnyRef]">getEval</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(id: String)Option[scala.tools.nsc.interpreter.package.JClass]" id="523125">classOfTerm</a><span class="delimiter">(</span><a title="String" id="748556">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[scala.tools.nsc.interpreter.package.JClass]">Option</a><span class="delimiter">[</span>JClass<span class="delimiter">]</span> =
    <a href="#523124" title="(id: String)Option[AnyRef]">valueOfTerm</a><span class="delimiter">(</span><a href="#748556" title="String">id</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48480" title="(f: AnyRef =&gt; java.lang.Class[_ &lt;: AnyRef])Option[java.lang.Class[_ &lt;: AnyRef]]">map</a> <span class="delimiter">(</span><a href="#748562" title="AnyRef">_</a>.<span title="()java.lang.Class[_]">getClass</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(id: String)Option[IMain.this.global.Type]" id="523126">typeOfTerm</a><span class="delimiter">(</span><a title="String" id="734568">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Type]">Option</a><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#734568" title="String">id</a><span class="delimiter">)</span> <span title="Option[IMain.this.global.Type]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../symtab/StdNames.scala.html#479055" title="Some[IMain.this.global.Type]">nme</a>.<a href="../../../reflect/generic/StdNames.scala.html#440109" title="=&gt; IMain.this.global.nme.NameType">ROOTPKG</a>  =&gt; <a href="../../../Option.scala.html#57885" title="(x: IMain.this.global.Type)Some[IMain.this.global.Type]">Some</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#507882" title="=&gt; IMain.this.global.ModuleClassSymbol">RootClass</a>.<a href="../symtab/Symbols.scala.html#514423" title="=&gt; IMain.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Option[IMain.this.global.Type]" id="748583">name</a>         =&gt; <a href="#523118" title="(name: IMain.this.global.Name)Option[IMain.this.Request]">requestForName</a><span class="delimiter">(</span><a href="#748583" title="IMain.this.global.TermName">name</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48483" title="(f: IMain.this.Request =&gt; Option[IMain.this.global.Type])Option[IMain.this.global.Type]">flatMap</a> <span class="delimiter">(</span><a href="#748587" title="IMain.this.Request">_</a>.<a href="#733991" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Type]">compilerTypeOf</a> <a href="../../../collection/MapLike.scala.html#73194" title="(key: IMain.this.global.Name)Option[IMain.this.global.Type]">get</a> <a href="#748583" title="IMain.this.global.TermName">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(id: String)IMain.this.global.Symbol" id="523127">symbolOfTerm</a><span class="delimiter">(</span><a title="String" id="734614">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a> =
    <a href="#523119" title="(line: String)Option[IMain.this.Request]">requestForIdent</a><span class="delimiter">(</span><a href="#734614" title="String">id</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48483" title="(f: IMain.this.Request =&gt; Option[IMain.this.global.Symbol])Option[IMain.this.global.Symbol]">flatMap</a> <span class="delimiter">(</span><a href="#748594" title="IMain.this.Request">_</a>.<a href="#733995" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Symbol]">definedSymbols</a> <a href="../../../collection/MapLike.scala.html#73194" title="(key: IMain.this.global.Name)Option[IMain.this.global.Symbol]">get</a> <a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#734614" title="String">id</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">getOrElse</a> <a href="../symtab/Symbols.scala.html#478667" title="object IMain.this.global.NoSymbol">NoSymbol</a>

  <span class="keyword">def</span> <a title="(id: String)Option[(scala.tools.nsc.interpreter.package.JClass, IMain.this.global.Type)]" id="523128">runtimeClassAndTypeOfTerm</a><span class="delimiter">(</span><a title="String" id="748603">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[(scala.tools.nsc.interpreter.package.JClass, IMain.this.global.Type)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>JClass, Type<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="scala.tools.nsc.interpreter.package.JClass" id="748609">clazz</a> &lt;- <a href="#523125" title="(id: String)Option[scala.tools.nsc.interpreter.package.JClass]">classOfTerm</a><a href="../../../Option.scala.html#48483" title="(f: scala.tools.nsc.interpreter.package.JClass =&gt; Option[(java.lang.Class[_$1], IMain.this.global.Type) forSome { type _$1 }])Option[(java.lang.Class[_$1], IMain.this.global.Type) forSome { type _$1 }]" class="delimiter">(</a><a href="#748603" title="String">id</a><span class="delimiter">)</span>
      <a title="IMain.this.global.Type" id="748616">tpe</a> &lt;- <a href="#523129" title="(id: String)Option[IMain.this.global.Type]">runtimeTypeOfTerm</a><a href="../../../Option.scala.html#48483" title="(f: IMain.this.global.Type =&gt; Option[(java.lang.Class[_$1], IMain.this.global.Type) forSome { type _$1 }])Option[(java.lang.Class[_$1], IMain.this.global.Type) forSome { type _$1 }]" class="delimiter">(</a><a href="#748603" title="String">id</a><span class="delimiter">)</span>
      <a title="scala.tools.nsc.interpreter.package.JClass" id="748671">nonAnon</a> &lt;- <a href="package.scala.html#48226" title="(clazz: Class[_$1])scala.tools.nsc.interpreter.RichClass[_$1]">clazz</a>.<a href="RichClass.scala.html#523233" title="=&gt; List[scala.tools.nsc.interpreter.package.JClass]">supers</a> <a href="../../../Option.scala.html#48480" title="(f: scala.tools.nsc.interpreter.package.JClass =&gt; (java.lang.Class[_$1], IMain.this.global.Type) forSome { type _$1 })Option[(java.lang.Class[_$1], IMain.this.global.Type) forSome { type _$1 }]">find</a> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="package.scala.html#48226" title="(clazz: Class[_$1])scala.tools.nsc.interpreter.RichClass[_$1]">_</a>.<a href="RichClass.scala.html#523226" title="=&gt; Boolean">isScalaAnonymous</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <a href="../../../Tuple2.scala.html#53390" title="(_1: java.lang.Class[_$1], _2: IMain.this.global.Type)(java.lang.Class[_$1], IMain.this.global.Type)" class="delimiter">(</a><a href="#748671" title="scala.tools.nsc.interpreter.package.JClass">nonAnon</a>, <a href="#748616" title="IMain.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(id: String)Option[IMain.this.global.Type]" id="523129">runtimeTypeOfTerm</a><span class="delimiter">(</span><a title="String" id="748610">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Type]">Option</a><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="IMain.this.global.Type" id="748713">tpe</a> &lt;- <a href="#523126" title="(id: String)Option[IMain.this.global.Type]">typeOfTerm</a><a href="../../../Option.scala.html#48483" title="(f: IMain.this.global.Type =&gt; Option[IMain.this.global.Type])Option[IMain.this.global.Type]" class="delimiter">(</a><a href="#748610" title="String">id</a><span class="delimiter">)</span>
      <a href="../../../Tuple2.scala.html#53390" title="scala.tools.nsc.interpreter.package.JClass" id="748738">clazz</a> &lt;- <a href="#523125" title="(id: String)Option[scala.tools.nsc.interpreter.package.JClass]">classOfTerm</a><a href="../../../Option.scala.html#48480" title="(f: scala.tools.nsc.interpreter.package.JClass =&gt; (java.lang.Class[_$1], IMain.this.global.Symbol) forSome { type _$1 })Option[(java.lang.Class[_$1], IMain.this.global.Symbol) forSome { type _$1 }]" class="delimiter">(</a><a href="#748610" title="String">id</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="IMain.this.global.Symbol" id="748739">staticSym</a> = <a href="#748713" title="IMain.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507159" title="=&gt; IMain.this.global.Symbol">typeSymbol</a>
      <a title="IMain.this.global.Symbol" id="748759">runtimeSym</a> &lt;- <a href="#523121" title="(name: String)Option[IMain.this.global.Symbol]">safeClass</a><a href="../../../Option.scala.html#80742" title="(f: IMain.this.global.Symbol =&gt; IMain.this.global.Type)Option[IMain.this.global.Type]" class="delimiter">(</a><a href="#748738" title="java.lang.Class[_$1]">clazz</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
      <span class="keyword">if</span> <a href="#748759" title="IMain.this.global.Symbol">runtimeSym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#748739" title="IMain.this.global.Symbol">staticSym</a>
      <span class="keyword">if</span> <a href="#748759" title="IMain.this.global.Symbol">runtimeSym</a> <a href="../symtab/Symbols.scala.html#509297" title="(that: IMain.this.global.Symbol)Boolean">isSubClass</a> <a href="#748739" title="IMain.this.global.Symbol">staticSym</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <a href="#748759" title="IMain.this.global.Symbol">runtimeSym</a>.<a href="../symtab/Symbols.scala.html#509272" title="=&gt; IMain.this.global.Type">info</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object IMain.this.exprTyper" id="523130">exprTyper</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="IMain.this.type" id="748771">repl</a>: IMain.<span class="keyword">this</span>.<span class="keyword">type</span> = <a href="#31896" title="IMain.this.type">imain</a> <span class="delimiter">}</span> <span class="keyword">with</span> <a href="ExprTyper.scala.html#31062" title="scala.tools.nsc.interpreter.ExprTyper">ExprTyper</a> <span class="delimiter">{</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(line: String)Option[List[IMain.this.global.Tree]]" id="523132">parse</a><span class="delimiter">(</span><a title="String" id="743971">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[List[IMain.this.global.Tree]]">Option</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#523130" title="object IMain.this.exprTyper">exprTyper</a>.<a href="ExprTyper.scala.html#733350" title="(line: String)Option[List[IMain.this.exprTyper.repl.global.Tree]]">parse</a><span class="delimiter">(</span><a href="#743971" title="String">line</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(expr: String, silent: Boolean)Option[IMain.this.global.Type]" id="523133">typeOfExpression</a><span class="delimiter">(</span><a title="String" id="739408">expr</a>: <span title="String">String</span>, <a title="Boolean" id="739411">silent</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Type]">Option</a><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#523130" title="object IMain.this.exprTyper">exprTyper</a>.<a href="ExprTyper.scala.html#733354" title="(expr: String, silent: Boolean)Option[IMain.this.exprTyper.repl.global.Type]">typeOfExpression</a><span class="delimiter">(</span><a href="#739408" title="String">expr</a>, <a href="#739411" title="Boolean">silent</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(xs: List[IMain.this.global.Name])List[IMain.this.global.TermName]" id="523134">onlyTerms</a><span class="delimiter">(</span><a title="List[IMain.this.global.Name]" id="748772">xs</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.global.Name]">List</a><span class="delimiter">[</span>Name<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#748772" title="List[IMain.this.global.Name]">xs</a> <a href="../../../collection/TraversableLike.scala.html#49053" title="(pf: PartialFunction[IMain.this.global.Name,IMain.this.global.TermName])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.global.Name],IMain.this.global.TermName,List[IMain.this.global.TermName]])List[IMain.this.global.TermName]">collect</a> <a href="#748787" title="IMain.this.global.TermName" class="delimiter">{</a> <span class="keyword">case</span> <a title="IMain.this.global.TermName" id="748788">x</a>: <a href="../symtab/Names.scala.html#478414" title="IMain.this.global.TermName">TermName</a> =&gt; <a href="#748788" title="IMain.this.global.TermName">x</a> <span class="delimiter">}</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(xs: List[IMain.this.global.Name])List[IMain.this.global.TypeName]" id="523135">onlyTypes</a><span class="delimiter">(</span><a title="List[IMain.this.global.Name]" id="748816">xs</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.global.Name]">List</a><span class="delimiter">[</span>Name<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#748816" title="List[IMain.this.global.Name]">xs</a> <a href="../../../collection/TraversableLike.scala.html#49053" title="(pf: PartialFunction[IMain.this.global.Name,IMain.this.global.TypeName])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.global.Name],IMain.this.global.TypeName,List[IMain.this.global.TypeName]])List[IMain.this.global.TypeName]">collect</a> <a href="#748831" title="IMain.this.global.TypeName" class="delimiter">{</a> <span class="keyword">case</span> <a title="IMain.this.global.TypeName" id="748832">x</a>: <a href="../symtab/Names.scala.html#478415" title="IMain.this.global.TypeName">TypeName</a> =&gt; <a href="#748832" title="IMain.this.global.TypeName">x</a> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; List[IMain.this.global.TermName]" id="523136">definedTerms</a>   = <a href="#523134" title="(xs: List[IMain.this.global.Name])List[IMain.this.global.TermName]">onlyTerms</a><span class="delimiter">(</span><a href="#523082" title="=&gt; List[IMain.this.global.Name]">allDefinedNames</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49052" title="(p: IMain.this.global.TermName =&gt; Boolean)List[IMain.this.global.TermName]">filterNot</a> <a href="#733178" title="(name: IMain.this.global.Name)Boolean">isInternalVarName</a>
  <span class="keyword">def</span> <a title="=&gt; List[IMain.this.global.TypeName]" id="523137">definedTypes</a>   = <a href="#523135" title="(xs: List[IMain.this.global.Name])List[IMain.this.global.TypeName]">onlyTypes</a><span class="delimiter">(</span><a href="#523082" title="=&gt; List[IMain.this.global.Name]">allDefinedNames</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Set[IMain.this.global.Symbol]" id="523138">definedSymbols</a> = <a href="#523149" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">prevRequests</a>.<a href="../../../collection/generic/TraversableForwarder.scala.html#62012" title="scala.collection.immutable.Set[IMain.this.Request]">toSet</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.Request =&gt; scala.collection.GenTraversableOnce[IMain.this.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[IMain.this.Request],IMain.this.global.Symbol,scala.collection.immutable.Set[IMain.this.global.Symbol]])scala.collection.immutable.Set[IMain.this.global.Symbol]">flatMap</a> <span class="delimiter">(</span><span class="delimiter">(</span>x: <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">)</span> =&gt; <a href="#748910" title="IMain.this.Request">x</a>.<a href="#733995" title="=&gt; Map[IMain.this.global.Name,IMain.this.global.Symbol]">definedSymbols</a>.<a href="../../../collection/MapLike.scala.html#73211" title="=&gt; Iterable[IMain.this.global.Symbol]">values</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: IMain.this.global.Name)Option[IMain.this.global.Symbol]" id="523139">findName</a><span class="delimiter">(</span><a title="IMain.this.global.Name" id="748989">name</a>: <a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a><span class="delimiter">)</span> = <a href="#523138" title="=&gt; scala.collection.immutable.Set[IMain.this.global.Symbol]">definedSymbols</a> <a href="../../../collection/IterableLike.scala.html#53861" title="(p: IMain.this.global.Symbol =&gt; Boolean)Option[IMain.this.global.Symbol]">find</a> <span class="delimiter">(</span><a href="#749001" title="IMain.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; IMain.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#748989" title="IMain.this.global.Name">name</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(op: =&gt; IMain.this.global.Symbol)Option[IMain.this.global.Symbol]" id="523140">missingOpt</a><span class="delimiter">(</span><a title="=&gt; IMain.this.global.Symbol" id="749007">op</a>: =&gt; Symbol<span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[IMain.this.global.Symbol]">Option</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> =
    <span class="keyword">try</span> <a href="../../../Option.scala.html#57885" title="(x: IMain.this.global.Symbol)Some[IMain.this.global.Symbol]">Some</a><span class="delimiter">(</span><a href="#749007" title="=&gt; IMain.this.global.Symbol">op</a><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="None.type">_</span>: <a href="../FatalError.scala.html#23028" title="scala.tools.nsc.MissingRequirementError">MissingRequirementError</a> =&gt; <a href="../../../Option.scala.html#1737" title="object None">None</a> <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(op: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol" id="523141">missingWrap</a><span class="delimiter">(</span><a title="=&gt; IMain.this.global.Symbol" id="749012">op</a>: =&gt; Symbol<span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a> =
    <span class="keyword">try</span> <a href="#749012" title="=&gt; IMain.this.global.Symbol">op</a>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="IMain.this.global.NoSymbol.type">_</span>: <a href="../FatalError.scala.html#23028" title="scala.tools.nsc.MissingRequirementError">MissingRequirementError</a> =&gt; <a href="../symtab/Symbols.scala.html#478667" title="object IMain.this.global.NoSymbol">NoSymbol</a> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)Option[IMain.this.global.Symbol]" id="523142">optCompilerClass</a><span class="delimiter">(</span><a title="String" id="749014">name</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#523140" title="(op: =&gt; IMain.this.global.Symbol)Option[IMain.this.global.Symbol]">missingOpt</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508340" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)IMain.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)Option[IMain.this.global.Symbol]" id="523143">optCompilerModule</a><span class="delimiter">(</span><a title="String" id="749020">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523140" title="(op: =&gt; IMain.this.global.Symbol)Option[IMain.this.global.Symbol]">missingOpt</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508339" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)IMain.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)IMain.this.global.Symbol" id="523144">getCompilerClass</a><span class="delimiter">(</span><a title="String" id="749023">name</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#523141" title="(op: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">missingWrap</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508340" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getClass</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)IMain.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)IMain.this.global.Symbol" id="523145">getCompilerModule</a><span class="delimiter">(</span><a title="String" id="749029">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523141" title="(op: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">missingWrap</a><span class="delimiter">(</span><a href="../symtab/Definitions.scala.html#479030" title="object IMain.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#508339" title="(fullname: IMain.this.global.Name)IMain.this.global.Symbol">getModule</a><span class="delimiter">(</span><a href="../../../reflect/generic/StdNames.scala.html#434009" title="implicit scala.reflect.generic.StdNames.stringToTermName : (s: String)IMain.this.global.TermName">name</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** Translate a repl-defined identifier into a Symbol.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)IMain.this.global.Symbol" id="523146">apply</a><span class="delimiter">(</span><a title="String" id="749032">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="IMain.this.global.TypeName" id="749034">tpname</a> = <a href="../symtab/Names.scala.html#478405" title="(s: String)IMain.this.global.TypeName">newTypeName</a><span class="delimiter">(</span><a href="#749032" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">(</span>
             <a href="#523139" title="(name: IMain.this.global.Name)Option[IMain.this.global.Symbol]">findName</a><span class="delimiter">(</span><a href="#749034" title="IMain.this.global.TypeName">tpname</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#48497" title="(alternative: =&gt; Option[IMain.this.global.Symbol])Option[IMain.this.global.Symbol]">orElse</a> <a href="#523139" title="(name: IMain.this.global.Name)Option[IMain.this.global.Symbol]">findName</a><span class="delimiter">(</span><a href="#749034" title="IMain.this.global.TypeName">tpname</a>.<a href="../symtab/Names.scala.html#501548" title="=&gt; IMain.this.global.TermName">companionName</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#48497" title="(alternative: =&gt; Option[IMain.this.global.Symbol])Option[IMain.this.global.Symbol]">orElse</a> <a href="#523142" title="(name: String)Option[IMain.this.global.Symbol]">optCompilerClass</a><span class="delimiter">(</span><a href="#749032" title="String">name</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#48497" title="(alternative: =&gt; Option[IMain.this.global.Symbol])Option[IMain.this.global.Symbol]">orElse</a> <a href="#523143" title="(name: String)Option[IMain.this.global.Symbol]">optCompilerModule</a><span class="delimiter">(</span><a href="#749032" title="String">name</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#48474" title="(default: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">getOrElse</a> <a href="../symtab/Symbols.scala.html#478667" title="object IMain.this.global.NoSymbol">NoSymbol</a>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String)IMain.this.global.Symbol" id="523147">types</a><span class="delimiter">(</span><a title="String" id="749051">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
    <a href="#523139" title="(name: IMain.this.global.Name)Option[IMain.this.global.Symbol]">findName</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478405" title="(s: String)IMain.this.global.TypeName">newTypeName</a><span class="delimiter">(</span><a href="#749051" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">getOrElse</a> <a href="#523144" title="(name: String)IMain.this.global.Symbol">getCompilerClass</a><span class="delimiter">(</span><a href="#749051" title="String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String)IMain.this.global.Symbol" id="523148">terms</a><span class="delimiter">(</span><a title="String" id="749058">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
    <a href="#523139" title="(name: IMain.this.global.Name)Option[IMain.this.global.Symbol]">findName</a><span class="delimiter">(</span><a href="../symtab/Names.scala.html#478402" title="(s: String)IMain.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#749058" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#48474" title="(default: =&gt; IMain.this.global.Symbol)IMain.this.global.Symbol">getOrElse</a> <a href="#523145" title="(name: String)IMain.this.global.Symbol">getCompilerModule</a><span class="delimiter">(</span><a href="#749058" title="String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** the previous requests this interpreter has processed */</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[IMain.this.Request]" id="523150">prevRequests</a>      = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#48813" title="[A](elems: A*)scala.collection.mutable.ListBuffer[A]">ListBuffer</a><span title="(elems: IMain.this.Request*)scala.collection.mutable.ListBuffer[IMain.this.Request]" class="delimiter">[</span><a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]" id="523152">referencedNameMap</a> = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#56702" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (IMain.this.global.Name, IMain.this.Request)*)scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]" class="delimiter">[</span><a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a>, <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]" id="523154">definedNameMap</a>    = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#56702" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (IMain.this.global.Name, IMain.this.Request)*)scala.collection.mutable.Map[IMain.this.global.Name,IMain.this.Request]" class="delimiter">[</span><a href="../symtab/Names.scala.html#478413" title="IMain.this.global.Name">Name</a>, <a href="#523116" title="IMain.this.Request">Request</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[IMain.this.Request]" id="523155">prevRequestList</a>      = <a href="#523149" title="=&gt; scala.collection.mutable.ListBuffer[IMain.this.Request]">prevRequests</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#61794" title="=&gt; List[IMain.this.Request]">toList</a>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[IMain.this.memberHandlers.MemberHandler]" id="523156">allHandlers</a>            = <a href="#523155" title="=&gt; List[IMain.this.Request]">prevRequestList</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.Request =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.MemberHandler])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.Request],IMain.this.memberHandlers.MemberHandler,List[IMain.this.memberHandlers.MemberHandler]])List[IMain.this.memberHandlers.MemberHandler]">flatMap</a> <span class="delimiter">(</span><a href="#734025" title="IMain.this.Request">_</a>.<a href="#733950" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">handlers</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; List[String]" id="523157">allSeenTypes</a>                   = <a href="#523155" title="=&gt; List[IMain.this.Request]">prevRequestList</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.Request =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.Request],String,List[String]])List[String]">flatMap</a> <span class="delimiter">(</span><a href="#749087" title="IMain.this.Request">_</a>.<a href="#733993" title="=&gt; Map[IMain.this.global.Name,String]">typeOf</a>.<a href="../../../collection/MapLike.scala.html#73211" title="=&gt; Iterable[String]">values</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[String]">toList</a><span class="delimiter">)</span> <a href="../../../collection/SeqLike.scala.html#54140" title="=&gt; List[String]">distinct</a>
  <span class="keyword">def</span> <a title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]" id="523158">allImplicits</a>                   = <a href="#523156" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">allHandlers</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: IMain.this.memberHandlers.MemberHandler =&gt; Boolean)List[IMain.this.memberHandlers.MemberHandler]">filter</a> <span class="delimiter">(</span><a href="#749125" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="MemberHandlers.scala.html#734031" title="=&gt; Boolean">definesImplicit</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: IMain.this.memberHandlers.MemberHandler =&gt; scala.collection.GenTraversableOnce[IMain.this.memberHandlers.intp.global.Name])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.intp.global.Name,List[IMain.this.memberHandlers.intp.global.Name]])List[IMain.this.memberHandlers.intp.global.Name]">flatMap</a> <span class="delimiter">(</span><a href="#749148" title="IMain.this.memberHandlers.MemberHandler">_</a>.<a href="MemberHandlers.scala.html#734039" title="=&gt; List[IMain.this.memberHandlers.intp.global.Name]">definedNames</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; List[IMain.this.memberHandlers.ImportHandler]" id="523159">importHandlers</a>                 = <a href="#523156" title="=&gt; List[IMain.this.memberHandlers.MemberHandler]">allHandlers</a> <a href="../../../collection/TraversableLike.scala.html#49053" title="(pf: PartialFunction[IMain.this.memberHandlers.MemberHandler,IMain.this.memberHandlers.ImportHandler])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.memberHandlers.MemberHandler],IMain.this.memberHandlers.ImportHandler,List[IMain.this.memberHandlers.ImportHandler]])List[IMain.this.memberHandlers.ImportHandler]">collect</a> <a href="#734098" title="IMain.this.memberHandlers.ImportHandler" class="delimiter">{</a> <span class="keyword">case</span> <a title="IMain.this.memberHandlers.ImportHandler" id="734099">x</a>: <a href="MemberHandlers.scala.html#733202" title="IMain.this.memberHandlers.ImportHandler">ImportHandler</a> =&gt; <a href="#734099" title="IMain.this.memberHandlers.ImportHandler">x</a> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; List[IMain.this.global.Name]" id="523160">visibleTermNames</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[IMain.this.global.Name]">List</a><span class="delimiter">[</span>Name<span class="delimiter">]</span> = <a href="#523136" title="=&gt; List[IMain.this.global.TermName]">definedTerms</a> <a href="../../../collection/immutable/List.scala.html#49152" title="(that: scala.collection.GenTraversableOnce[IMain.this.global.TermName])(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.global.TermName],IMain.this.global.TermName,List[IMain.this.global.TermName]])List[IMain.this.global.TermName]">++</a> <a href="Imports.scala.html#522961" title="=&gt; List[IMain.this.global.TermName]">importedTerms</a> <a href="../../../collection/SeqLike.scala.html#54140" title="=&gt; List[IMain.this.global.TermName]">distinct</a>

  <span class="comment">/** Another entry point for tab-completion, ids in scope */</span>
  <span class="keyword">def</span> <a title="=&gt; List[String]" id="523161">unqualifiedIds</a> = <a href="#523160" title="=&gt; List[IMain.this.global.Name]">visibleTermNames</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: IMain.this.global.Name =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[IMain.this.global.Name],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#749320" title="IMain.this.global.Name">_</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49052" title="(p: String =&gt; Boolean)List[String]">filterNot</a> <span class="delimiter">(</span><a href="#749353" title="String">_</a> <span title="(x$1: java.lang.CharSequence)Boolean">contains</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span> <a href="../../../collection/SeqLike.scala.html#54181" title="(implicit ord: scala.math.Ordering[String])List[String]">sorted</a>

  <span class="comment">/** Parse the ScalaSig to find type aliases */</span>
  <span class="keyword">def</span> <a title="(path: String)Option[String]" id="523162">aliasForType</a><span class="delimiter">(</span><a title="String" id="749412">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="ByteCode.scala.html#32290" title="object scala.tools.nsc.interpreter.ByteCode">ByteCode</a>.<a href="ByteCode.scala.html#729204" title="(path: String)Option[String]">aliasForType</a><span class="delimiter">(</span><a href="#749412" title="String">path</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(op: =&gt; Unit)Unit" id="523163">withoutUnwrapping</a><span class="delimiter">(</span><a title="=&gt; Unit" id="749415">op</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="749417">saved</a> = <a href="#523064" title="=&gt; scala.tools.nsc.interpreter.ISettings">isettings</a>.<a href="ISettings.scala.html#742206" title="=&gt; Boolean">unwrapStrings</a>
    <a href="#523064" title="=&gt; scala.tools.nsc.interpreter.ISettings">isettings</a>.<a href="ISettings.scala.html#742207" title="(x$1: Boolean)Unit">unwrapStrings</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">try</span> <a href="#749415" title="=&gt; Unit">op</a>
    <span class="keyword">finally</span> <a href="#523064" title="=&gt; scala.tools.nsc.interpreter.ISettings">isettings</a>.<a href="ISettings.scala.html#742207" title="(x$1: Boolean)Unit">unwrapStrings</a> = <a href="#749417" title="Boolean">saved</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: IMain.this.global.Symbol)String" id="523164">symbolDefString</a><span class="delimiter">(</span><a title="IMain.this.global.Symbol" id="739384">sym</a>: <a href="../symtab/Symbols.scala.html#478659" title="IMain.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="TypeStrings.scala.html#30703" title="object scala.tools.nsc.interpreter.TypeStrings">TypeStrings</a>.<a href="TypeStrings.scala.html#733257" title="(tpe: String, alsoStrip: String*)String">quieter</a><span class="delimiter">(</span>
      <a href="#523035" title="(op: =&gt; String)String">afterTyper</a><span class="delimiter">(</span><a href="#739384" title="IMain.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509375" title="=&gt; String">defString</a><span class="delimiter">)</span>,
      <a href="#739384" title="IMain.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509249" title="=&gt; IMain.this.global.Symbol">owner</a>.<a href="../../../Predef.scala.html#9681" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <a href="../../../runtime/StringAdd.scala.html#58450" title="(other: String)java.lang.String">+</a> <span title="java.lang.String(&quot;.this.&quot;)" class="string">&quot;.this.&quot;</span>,
      <a href="#739384" title="IMain.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#509249" title="=&gt; IMain.this.global.Symbol">owner</a>.<a href="../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(code: String)Unit" id="523165">showCodeIfDebugging</a><span class="delimiter">(</span><a title="String" id="743998">code</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">/** Secret bookcase entrance for repl debuggers: end the line
     *  with &quot;// show&quot; and see what's going on.
     */</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#522990" title="=&gt; scala.tools.nsc.interpreter.Logger">repllog</a>.<a href="Logger.scala.html#742249" title="=&gt; Boolean">isTrace</a> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">code</a>.<a href="../../../collection/immutable/StringLike.scala.html#56553" title="=&gt; Iterator[String]">lines</a> <a href="../../../collection/Iterator.scala.html#59158" title="(p: String =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#749428" title="String">_</a>.<span title="()java.lang.String">trim</span> <span title="(x$1: java.lang.String)Boolean">endsWith</span> <span title="java.lang.String(&quot;// show&quot;)" class="string">&quot;// show&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523006" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#743998" title="String">code</a><span class="delimiter">)</span>
      <a href="#523132" title="(line: String)Option[List[IMain.this.global.Tree]]">parse</a><span class="delimiter">(</span><a href="#743998" title="String">code</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#48491" title="(f: List[IMain.this.global.Tree] =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="List[IMain.this.global.Tree]" id="749433">ts</a> =&gt; <a href="#749433" title="List[IMain.this.global.Tree]">ts</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: IMain.this.global.Tree =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="IMain.this.global.Tree" id="749453">t</a> =&gt; <a href="#523163" title="(op: =&gt; Unit)Unit">withoutUnwrapping</a><span class="delimiter">(</span><a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="../ast/TreePrinters.scala.html#479213" title="(t: IMain.this.global.Tree)String">asCompactString</a><span class="delimiter">(</span><a href="#749453" title="IMain.this.global.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// debugging</span>
  <span class="keyword">def</span> <a title="[T](msg: String)(res: T)T" id="523166">debugging</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523168">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="749457">msg</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="749458">res</a>: <a href="#523168" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="ReplConfig.scala.html#48206" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><a href="#749457" title="String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#749458" title="T">res</a><span class="delimiter">)</span>
    <a href="#749458" title="T">res</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Utility methods for the Interpreter. */</span>
<span class="keyword">object</span> <a title="object scala.tools.nsc.interpreter.IMain" id="31897">IMain</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
  <span class="comment">// The two name forms this is catching are the two sides of this assignment:</span>
  <span class="comment">//</span>
  <span class="comment">// $line3.$read.$iw.$iw.Bippy =</span>
  <span class="comment">//   $line3.$read$$iw$$iw$Bippy@4a6a00ca</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: String)java.lang.String" id="523187">removeLineWrapper</a><span class="delimiter">(</span><a title="String" id="743901">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#743901" title="String">s</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\$line\\d+[./]\\$(read|eval|print)[$.]&quot;)" class="string">&quot;&quot;&quot;\$line\d+[./]\$(read|eval|print)[$.]&quot;&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: String)java.lang.String" id="523188">removeIWPackages</a><span class="delimiter">(</span><a title="String" id="743898">s</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#743898" title="String">s</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\$(iw|read|eval|print)[$.]&quot;)" class="string">&quot;&quot;&quot;\$(iw|read|eval|print)[$.]&quot;&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(s: String)java.lang.String" id="523189">stripString</a><span class="delimiter">(</span><a title="String" id="743895">s</a>: <span title="String">String</span><span class="delimiter">)</span>               = <a href="#523188" title="(s: String)java.lang.String">removeIWPackages</a><span class="delimiter">(</span><a href="#523187" title="(s: String)java.lang.String">removeLineWrapper</a><span class="delimiter">(</span><a href="#743895" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">trait</span> <a title="trait CodeAssembler[T] extends java.lang.Object with ScalaObject" id="523190">CodeAssembler</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="523191">T</a><span class="delimiter">]</span> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="746598">preamble</a>: <span title="String">String</span>
    <span class="keyword">def</span> <a title="=&gt; T =&gt; String" id="746599">generate</a>: T =&gt; String
    <span class="keyword">def</span> <a title="=&gt; String" id="746600">postamble</a>: <span title="String">String</span>

    <span class="keyword">def</span> <a title="(contributors: List[T])String" id="746601">apply</a><span class="delimiter">(</span><a title="List[T]" id="746720">contributors</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[T]">List</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="../util/package.scala.html#48302" title="(writer: java.io.PrintWriter =&gt; Unit)String">stringFromWriter</a> <span class="delimiter">{</span> <a title="java.io.PrintWriter" id="749467">code</a> =&gt;
      <a href="#749467" title="java.io.PrintWriter">code</a> <span title="(x$1: java.lang.String)Unit">println</span> <a href="#746598" title="=&gt; String">preamble</a>
      <a href="#746720" title="List[T]">contributors</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: T =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[T],String,List[String]])List[String]">map</a> <a href="#746599" title="=&gt; T =&gt; String">generate</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: String =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#749467" title="java.io.PrintWriter">code</a> <span title="(x$1: java.lang.String)Unit">println</span> <a href="#749535" title="String">_</a><span class="delimiter">)</span>
      <a href="#749467" title="java.io.PrintWriter">code</a> <span title="(x$1: java.lang.String)Unit">println</span> <a href="#746600" title="=&gt; String">postamble</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait StrippingWriter extends java.lang.Object with ScalaObject" id="523192">StrippingWriter</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="736428">isStripping</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a>
    <span class="keyword">def</span> <a title="(str: String)String" id="736429">stripImpl</a><span class="delimiter">(</span><a title="String" id="749549">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span>
    <span class="keyword">def</span> <a title="(str: String)String" id="736430">strip</a><span class="delimiter">(</span><a title="String" id="749551">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#736428" title="=&gt; Boolean">isStripping</a><span class="delimiter">)</span> <a href="#736429" title="(str: String)String">stripImpl</a><span class="delimiter">(</span><a href="#749551" title="String">str</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#749551" title="String">str</a>
  <span class="delimiter">}</span>
  <span class="keyword">trait</span> <a title="trait TruncatingWriter extends java.lang.Object with ScalaObject" id="523193">TruncatingWriter</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="=&gt; Int" id="736432">maxStringLength</a>: <a href="../../../Int.scala.html#386" title="Int">Int</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="736433">isTruncating</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a>
    <span class="keyword">def</span> <a title="(str: String)String" id="736434">truncate</a><span class="delimiter">(</span><a title="String" id="749559">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#736433" title="=&gt; Boolean">isTruncating</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#749559" title="String">str</a>.<span title="()Int">length</span> <a href="../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <a href="#736432" title="=&gt; Int">maxStringLength</a><span class="delimiter">)</span>
        <span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">str</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55967" title="(n: Int)String">take</a> <a href="#736432" title="=&gt; Int">maxStringLength</a> <a href="../../../Int.scala.html#54811" title="(x: Int)Int">-</a> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;...&quot;)" class="string">&quot;...&quot;</span>
      <span class="keyword">else</span> <a href="#749559" title="String">str</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class StrippingTruncatingWriter extends java.io.PrintWriter with scala.tools.nsc.interpreter.IMain.StrippingWriter with scala.tools.nsc.interpreter.IMain.TruncatingWriter with ScalaObject" id="523194">StrippingTruncatingWriter</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.interpreter.package.JPrintWriter" id="749687">out</a>: <span title="scala.tools.nsc.interpreter.package.JPrintWriter">JPrintWriter</span><span class="delimiter">)</span>
          <span class="keyword">extends</span> <a href="package.scala.html#48220" title="java.io.PrintWriter">JPrintWriter</a><span class="delimiter">(</span><a href="#749687" title="scala.tools.nsc.interpreter.package.JPrintWriter">out</a><span class="delimiter">)</span>
             <span class="keyword">with</span> <a href="#523192" title="scala.tools.nsc.interpreter.IMain.StrippingWriter">StrippingWriter</a>
             <span class="keyword">with</span> <a href="#523193" title="scala.tools.nsc.interpreter.IMain.TruncatingWriter">TruncatingWriter</a> <span class="delimiter">{</span>
    self =&gt;

    <span class="keyword">def</span> <a title="(str: String)String" id="736417">clean</a><span class="delimiter">(</span><a title="String" id="749693">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#736434" title="(str: String)String">truncate</a><span class="delimiter">(</span><a href="#736430" title="(str: String)String">strip</a><span class="delimiter">(</span><a href="#749693" title="String">str</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(str: String)Unit" id="736418">write</a><span class="delimiter">(</span><a title="String" id="749695">str</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523194" title="scala.tools.nsc.interpreter.IMain.StrippingTruncatingWriter" class="keyword">super</a>.<span title="(x$1: java.lang.String)Unit">write</span><span class="delimiter">(</span><a href="#736417" title="(str: String)String">clean</a><span class="delimiter">(</span><a href="#749695" title="String">str</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">class</span> <a title="class ReplStrippingWriter extends scala.tools.nsc.interpreter.IMain.StrippingTruncatingWriter with ScalaObject" id="523195">ReplStrippingWriter</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.interpreter.IMain" id="736435">intp</a>: <a href="#31896" title="scala.tools.nsc.interpreter.IMain">IMain</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#523194" title="scala.tools.nsc.interpreter.IMain.StrippingTruncatingWriter">StrippingTruncatingWriter</a><span class="delimiter">(</span><a href="#736435" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="#523238" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#736435" title="scala.tools.nsc.interpreter.IMain">intp</a>._
    <span class="keyword">def</span> <a title="=&gt; Int" id="736423">maxStringLength</a>    = <a href="#523064" title="=&gt; scala.tools.nsc.interpreter.ISettings">isettings</a>.<a href="ISettings.scala.html#742200" title="=&gt; Int">maxPrintString</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="736424">isStripping</a>        = <a href="#523064" title="=&gt; scala.tools.nsc.interpreter.ISettings">isettings</a>.<a href="ISettings.scala.html#742206" title="=&gt; Boolean">unwrapStrings</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="736425">isTruncating</a>       = <a href="#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479321" title="=&gt; Boolean">truncationOK</a>

    <span class="keyword">def</span> <a title="(str: String)String" id="736426">stripImpl</a><span class="delimiter">(</span><a title="String" id="749719">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#523026" title="object ReplStrippingWriter.this.intp.naming">naming</a>.<a href="Naming.scala.html#733149" title="(str: String)String">unmangle</a><span class="delimiter">(</span><a href="#749719" title="String">str</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>