<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interpreter/ILoop.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2011 LAMP/EPFL
 * @author Alexander Spoon
 */</span>

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interpreter

<span class="keyword">import</span> <a href="../../../Predef.scala.html#1992" title="object Predef">Predef</a>.<span class="delimiter">{</span> println =&gt; _, _ <span class="delimiter">}</span>
<span class="keyword">import</span> java.io.<span class="delimiter">{</span> BufferedReader, FileReader <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock
<span class="keyword">import</span> scala.sys.process.Process
<span class="keyword">import</span> session._
<span class="keyword">import</span> scala.tools.util.<span class="delimiter">{</span> Signallable, Javap <span class="delimiter">}</span>
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.concurrent.ops
<span class="keyword">import</span> util.<span class="delimiter">{</span> ClassPath, Exceptional, stringFromWriter, stringFromStream <span class="delimiter">}</span>
<span class="keyword">import</span> interpreter._
<span class="keyword">import</span> io.<span class="delimiter">{</span> File, Sources <span class="delimiter">}</span>

<span class="comment">/** The Scala interactive shell.  It provides a read-eval-print loop
 *  around the Interpreter class.
 *  After instantiation, clients should call the main() method.
 *
 *  If no in0 is specified, then input will come from the console, and
 *  the class will attempt to provide input editing feature such as
 *  input history.
 *
 *  @author Moez A. Abdel-Gawad
 *  @author  Lex Spoon
 *  @version 1.2
 */</span>
<span class="keyword">class</span> <a title="class ILoop extends java.lang.Object with scala.tools.nsc.interpreter.LoopCommands with scala.tools.nsc.interpreter.ILoopInit with ScalaObject" id="32364">ILoop</a><a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">(</a><a title="Option[java.io.BufferedReader]" id="523461">in0</a>: <a href="../../../Option.scala.html#560" title="Option[java.io.BufferedReader]">Option</a><span class="delimiter">[</span>BufferedReader<span class="delimiter">]</span>, <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.package.JPrintWriter" id="523462">out</a>: <span title="scala.tools.nsc.interpreter.package.JPrintWriter">JPrintWriter</span><span class="delimiter">)</span>
                <span class="keyword">extends</span> <span title="java.lang.Object">AnyRef</span>
                   <span class="keyword">with</span> <a href="LoopCommands.scala.html#32040" title="scala.tools.nsc.interpreter.LoopCommands">LoopCommands</a>
                   <span class="keyword">with</span> <a href="ILoopInit.scala.html#31113" title="scala.tools.nsc.interpreter.ILoopInit">ILoopInit</a>
<span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(in0: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter)scala.tools.nsc.interpreter.ILoop" id="523304" class="keyword">this</a><span class="delimiter">(</span><a title="java.io.BufferedReader" id="523459">in0</a>: <span title="java.io.BufferedReader">BufferedReader</span>, <a title="scala.tools.nsc.interpreter.package.JPrintWriter" id="523460">out</a>: <span title="scala.tools.nsc.interpreter.package.JPrintWriter">JPrintWriter</span><span class="delimiter">)</span> = <a href="#32364" title="ILoop.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../../../Option.scala.html#57885" title="(x: java.io.BufferedReader)Some[java.io.BufferedReader]">Some</a><span class="delimiter">(</span><a href="#523459" title="java.io.BufferedReader">in0</a><span class="delimiter">)</span>, <a href="#523460" title="scala.tools.nsc.interpreter.package.JPrintWriter">out</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.ILoop" id="523305" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#32364" title="ILoop.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../../../Option.scala.html#1737" title="object None">None</a>, <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <a href="package.scala.html#48220" title="java.io.PrintWriter">JPrintWriter</a><span class="delimiter">(</span><a href="../../../Console.scala.html#507" title="object Console">Console</a>.<a href="../../../Console.scala.html#58025" title="=&gt; java.io.PrintStream">out</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="scala.tools.nsc.interpreter.InteractiveReader" id="523307">in</a>: <a href="InteractiveReader.scala.html#32316" title="scala.tools.nsc.interpreter.InteractiveReader">InteractiveReader</a> = _   <span class="comment">// the input stream from which commands come</span>
  <span class="keyword">var</span> <a title="scala.tools.nsc.Settings" id="523310">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a> = _
  <span class="keyword">var</span> <a title="scala.tools.nsc.interpreter.IMain" id="523313">intp</a>: <a href="IMain.scala.html#31896" title="scala.tools.nsc.interpreter.IMain">IMain</a> = _

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="523315">echoCommandMessage</a><span class="delimiter">(</span><a title="String" id="737049">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> =
    <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="#737049" title="String">msg</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="523316">isAsync</a> = <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469787" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Yreplsync</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Power" id="523318">power</a> = <a href="Power.scala.html#735599" title="(repl: scala.tools.nsc.interpreter.ILoop)scala.tools.nsc.interpreter.Power">Power</a><span class="delimiter">(</span><a href="#32364" title="scala.tools.nsc.interpreter.ILoop" class="keyword">this</a><span class="delimiter">)</span>

  <span class="comment">// TODO</span>
  <span class="comment">// object opt extends AestheticSettings</span>
  <span class="comment">//</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `intp` instead.&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.interpreter.IMain" id="523319">interpreter</a> = <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `intp` instead.&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(i: scala.tools.nsc.Interpreter)Unit" id="523320">interpreter_=</a> <span class="delimiter">(</span><a title="scala.tools.nsc.Interpreter" id="737136">i</a>: <a href="../Interpreter.scala.html#22599" title="scala.tools.nsc.Interpreter">Interpreter</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <a href="#523313" title="(x$1: scala.tools.nsc.interpreter.IMain)Unit">intp</a> = <a href="#737136" title="scala.tools.nsc.Interpreter">i</a>

  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.interpreter.session.History" id="523321">history</a> = <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735582" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>

  <span class="comment">/** The context class loader at the time this object was created */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="java.lang.ClassLoader" id="523322">originalClassLoader</a> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span>

  <span class="comment">// Install a signal handler so we can be prodded.</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.tools.util.Signallable[ILoop.this.Result]" id="523324">signallable</a> =
    <span title="scala.tools.util.Signallable[ILoop.this.Result]" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#48210" title="=&gt; Boolean">isReplDebug</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469787" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Yreplsync</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
      <a href="../../util/Signallable.scala.html#735622" title="(description: String)(body: =&gt; ILoop.this.Result)scala.tools.util.Signallable[ILoop.this.Result]">Signallable</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Dump repl state.&quot;)" class="string">&quot;Dump repl state.&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#523358" title="()ILoop.this.Result">dumpCommand</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

  <span class="comment">// classpath entries added via :cp</span>
  <span class="keyword">var</span> <a title="String" id="523327">addedClasspath</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/** A reverse list of commands to replay if the user requests a :replay */</span>
  <span class="keyword">var</span> <a title="List[String]" id="523330">replayCommandStack</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a>

  <span class="comment">/** A list of commands to replay if the user requests a :replay */</span>
  <span class="keyword">def</span> <a title="=&gt; List[String]" id="523332">replayCommands</a> = <a href="#523330" title="=&gt; List[String]">replayCommandStack</a>.<a href="../../../collection/immutable/List.scala.html#49171" title="=&gt; List[String]">reverse</a>

  <span class="comment">/** Record a command for replay should the user request a :replay */</span>
  <span class="keyword">def</span> <a title="(cmd: String)Unit" id="523333">addReplay</a><span class="delimiter">(</span><a title="String" id="737142">cmd</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523330" title="(x$1: List[String])Unit">replayCommandStack</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: String)List[String]">::=</a> <a href="#737142" title="String">cmd</a>

  <span class="comment">/** Close the interpreter and set the var to null. */</span>
  <span class="keyword">def</span> <a title="()Unit" id="523334">closeInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523114" title="()Unit">close</a>
      <a href="#523313" title="(x$1: scala.tools.nsc.interpreter.IMain)Unit">intp</a> = <span title="Null(null)" class="keyword">null</span>
      <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(x$1: java.lang.ClassLoader)Unit">setContextClassLoader</span><span class="delimiter">(</span><a href="#523322" title="=&gt; java.lang.ClassLoader">originalClassLoader</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ILoopInterpreter extends scala.tools.nsc.interpreter.IMain with ScalaObject" id="523335">ILoopInterpreter</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="IMain.scala.html#31896" title="scala.tools.nsc.interpreter.IMain">IMain</a><span class="delimiter">(</span><a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="formatting extends java.lang.Object with scala.tools.nsc.interpreter.Formatting" id="737156">formatting</a> = <a href="#737160" title="java.lang.Object with scala.tools.nsc.interpreter.Formatting" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.tools.nsc.interpreter.Formatting" id="737160">Formatting</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; String" id="737162">prompt</a> = <a href="#32364" title="ILoop.this.type">ILoop</a>.<span class="keyword">this</span>.<a href="#523352" title="=&gt; String">prompt</a>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.Line.Manager" id="737157">createLineManager</a><span class="delimiter">(</span><span class="delimiter">)</span>: Line.<a href="Line.scala.html#737192" title="scala.tools.nsc.interpreter.Line.Manager">Manager</a> =
      <span title="scala.tools.nsc.interpreter.Line.Manager" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplProps.scala.html#30982" title="object scala.tools.nsc.interpreter.ReplPropsKludge">ReplPropsKludge</a>.<a href="ReplProps.scala.html#737208" title="(settings: scala.tools.nsc.Settings)Boolean">noThreadCreation</a><span class="delimiter">(</span><a href="IMain.scala.html#522983" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#737244" title="scala.tools.nsc.interpreter.Line.Manager" class="keyword">new</a> <a href="Line.scala.html#30685" title="anonymous class $anon extends scala.tools.nsc.interpreter.Line.Manager" id="737244">Line</a>.<a href="Line.scala.html#737192" title="scala.tools.nsc.interpreter.Line.Manager">Manager</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(line: scala.tools.nsc.interpreter.Line[_])Unit" id="737248">onRunaway</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.Line[_]" id="737249">line</a>: <a href="Line.scala.html#30684" title="scala.tools.nsc.interpreter.Line[_]">Line</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="737293">template</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
            |// She's gone rogue, captain! Have to take her out!
            |// Calling Thread.stop on runaway %s with offending code:
            |// scala&gt; %s&quot;&quot;&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56560" title="=&gt; String">stripMargin</a>

          <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">template</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#737249" title="scala.tools.nsc.interpreter.Line[_]">line</a>.<a href="Line.scala.html#737284" title="=&gt; java.lang.Thread">thread</a>, <a href="#737249" title="scala.tools.nsc.interpreter.Line[_]">line</a>.<a href="Line.scala.html#737259" title="=&gt; String">code</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// XXX no way to suppress the deprecation warning</span>
          <a href="#737249" title="scala.tools.nsc.interpreter.Line[_]">line</a>.<a href="Line.scala.html#737284" title="=&gt; java.lang.Thread">thread</a>.<span title="()Unit">stop</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735586" title="()Unit">redrawLine</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.ClassLoader" id="737158">parentClassLoader</a> =
      <a href="IMain.scala.html#522983" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/MutableSettings.scala.html#469558" title="=&gt; Option[java.lang.ClassLoader]">explicitParentLoader</a>.<a href="../../../Option.scala.html#48474" title="(default: =&gt; java.lang.ClassLoader)java.lang.ClassLoader">getOrElse</a><span class="delimiter">(</span> classOf<span title="java.lang.Class[scala.tools.nsc.interpreter.ILoop](classOf[scala.tools.nsc.interpreter.ILoop])" class="delimiter">[</span>ILoop<span class="delimiter">]</span>.<span title="()java.lang.ClassLoader">getClassLoader</span> <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Create a new interpreter. */</span>
  <span class="keyword">def</span> <a title="()Unit" id="523336">createInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523327" title="=&gt; String">addedClasspath</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469629" title="=&gt; scala.tools.nsc.Settings#PathSetting">classpath</a> <a href="../settings/MutableSettings.scala.html#470248" title="(s: String)Unit">append</a> <a href="#523327" title="=&gt; String">addedClasspath</a>

    <a href="#523313" title="(x$1: scala.tools.nsc.interpreter.IMain)Unit">intp</a> = <span title="ILoop.this.ILoopInterpreter" class="keyword">new</span> <a href="#523335" title="ILoop.this.ILoopInterpreter">ILoopInterpreter</a>
  <span class="delimiter">}</span>

  <span class="comment">/** print a friendly help message */</span>
  <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523337">helpCommand</a><span class="delimiter">(</span><a title="String" id="736205">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#736205" title="String">line</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#523338" title="()Unit">helpSummary</a><a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#523341" title="(cmd: String)Option[ILoop.this.LoopCommand]">uniqueCommand</a><span class="delimiter">(</span><a href="#736205" title="String">line</a><span class="delimiter">)</span> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result">Some</span><span class="delimiter">(</span><a title="ILoop.this.LoopCommand" id="737588">lc</a><span class="delimiter">)</span> =&gt; <a href="#523345" title="(msg: String)Unit">echo</a><a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#737588" title="ILoop.this.LoopCommand">lc</a>.<a href="LoopCommands.scala.html#735700" title="=&gt; java.lang.String">longHelp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result">_</span>        =&gt; <a href="#523339" title="(cmd: String)ILoop.this.Result">ambiguousError</a><span class="delimiter">(</span><a href="#736205" title="String">line</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="523338">helpSummary</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="737416">usageWidth</a>  = <a href="#523372" title="=&gt; List[ILoop.this.LoopCommand]">commands</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: ILoop.this.LoopCommand =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[ILoop.this.LoopCommand],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#737443" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#735702" title="=&gt; String">usageMsg</a>.<span title="()Int">length</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53669" title="(implicit cmp: Ordering[Int])Int">max</a>
    <span class="keyword">val</span> <a title="java.lang.String" id="737417">formatStr</a>   = <span title="java.lang.String(&quot;%-&quot;)" class="string">&quot;%-&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#737416" title="Int">usageWidth</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;s %s %s&quot;)" class="string">&quot;s %s %s&quot;</span>

    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;All commands can be abbreviated, e.g. :he instead of :help.&quot;)" class="string">&quot;All commands can be abbreviated, e.g. :he instead of :help.&quot;</span><span class="delimiter">)</span>
    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Those marked with a * have more detailed help, e.g. :help imports.\012&quot;)" class="string">&quot;Those marked with a * have more detailed help, e.g. :help imports.\n&quot;</span><span class="delimiter">)</span>

    <a href="#523372" title="=&gt; List[ILoop.this.LoopCommand]">commands</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: ILoop.this.LoopCommand =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="ILoop.this.LoopCommand" id="737559">cmd</a> =&gt;
      <span class="keyword">val</span> <a title="java.lang.String" id="737560">star</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#737559" title="ILoop.this.LoopCommand">cmd</a>.<a href="LoopCommands.scala.html#735698" title="=&gt; Boolean">hasLongHelp</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">formatStr</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#737559" title="ILoop.this.LoopCommand">cmd</a>.<a href="LoopCommands.scala.html#735702" title="=&gt; String">usageMsg</a>, <a href="#737560" title="java.lang.String">star</a>, <a href="#737559" title="ILoop.this.LoopCommand">cmd</a>.<a href="LoopCommands.scala.html#735691" title="=&gt; String">help</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmd: String)ILoop.this.Result" id="523339">ambiguousError</a><span class="delimiter">(</span><a title="String" id="737589">cmd</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#523340" title="(cmd: String)List[ILoop.this.LoopCommand]">matchingCommands</a><span class="delimiter">(</span><a href="#737589" title="String">cmd</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#13700" title="Unit">Nil</a>  =&gt; <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#737589" title="String">cmd</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: no such command.  Type :help for help.&quot;)" class="string">&quot;: no such command.  Type :help for help.&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Unit" id="737602">xs</a>   =&gt; <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#737589" title="String">cmd</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; is ambiguous: did you mean &quot;)" class="string">&quot; is ambiguous: did you mean &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#737602" title="List[ILoop.this.LoopCommand]">xs</a>.<a href="../../../collection/TraversableLike.scala.html#49041" title="(f: ILoop.this.LoopCommand =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[ILoop.this.LoopCommand],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</a><a href="../../../collection/immutable/List.scala.html#48868" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</a><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#737619" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#735689" title="=&gt; String">name</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="java.lang.String(&quot; or &quot;)" class="string">&quot; or &quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;?&quot;)" class="string">&quot;?&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="LoopCommands.scala.html#735759" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="../../../Option.scala.html#1737" title="object None">None</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmd: String)List[ILoop.this.LoopCommand]" id="523340">matchingCommands</a><span class="delimiter">(</span><a title="String" id="737591">cmd</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523372" title="=&gt; List[ILoop.this.LoopCommand]">commands</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: ILoop.this.LoopCommand =&gt; Boolean)List[ILoop.this.LoopCommand]">filter</a> <span class="delimiter">(</span><a href="#737599" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#735689" title="=&gt; String">name</a> <span title="(x$1: java.lang.String)Boolean">startsWith</span> <a href="#737591" title="String">cmd</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmd: String)Option[ILoop.this.LoopCommand]" id="523341">uniqueCommand</a><span class="delimiter">(</span><a title="String" id="737585">cmd</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[ILoop.this.LoopCommand]">Option</a><span class="delimiter">[</span>LoopCommand<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// this lets us add commands willy-nilly and only requires enough command to disambiguate</span>
    <a href="#523340" title="(cmd: String)List[ILoop.this.LoopCommand]">matchingCommands</a><span class="delimiter">(</span><a href="#737585" title="String">cmd</a><span class="delimiter">)</span> <span title="Option[ILoop.this.LoopCommand]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="Some[ILoop.this.LoopCommand]">List</a><span class="delimiter">(</span><a title="ILoop.this.LoopCommand" id="737662">x</a><span class="delimiter">)</span>  =&gt; <a href="../../../Option.scala.html#57885" title="(x: ILoop.this.LoopCommand)Some[ILoop.this.LoopCommand]">Some</a><span class="delimiter">(</span><a href="#737662" title="ILoop.this.LoopCommand">x</a><span class="delimiter">)</span>
      <span class="comment">// exact match OK even if otherwise appears ambiguous</span>
      <span class="keyword">case</span> <a title="Option[ILoop.this.LoopCommand]" id="737666">xs</a>       =&gt; <a href="#737666" title="List[ILoop.this.LoopCommand]">xs</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71038" title="(p: ILoop.this.LoopCommand =&gt; Boolean)Option[ILoop.this.LoopCommand]">find</a> <span class="delimiter">(</span><a href="#737673" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#735689" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#737585" title="String">cmd</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Show the history */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="historyCommand extends ILoop.this.LoopCommand" id="523343">historyCommand</a> = <a href="#735686" title="ILoop.this.LoopCommand{def defaultLines: Int}" class="keyword">new</a> <a href="LoopCommands.scala.html#523414" title="anonymous class $anon extends ILoop.this.LoopCommand" id="735686">LoopCommand</a><span class="delimiter">(</span><span title="java.lang.String(&quot;history&quot;)" class="string">&quot;history&quot;</span>, <span title="java.lang.String(&quot;show the history (optional num is commands to show)&quot;)" class="string">&quot;show the history (optional num is commands to show)&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="735707">usage</a> = <span title="java.lang.String(&quot;[num]&quot;)" class="string">&quot;[num]&quot;</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="735708">defaultLines</a> = <span title="Int(20)" class="int">20</span>

    <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="735709">apply</a><span class="delimiter">(</span><a title="String" id="735712">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="session/History.scala.html#32914" title="object scala.tools.nsc.interpreter.session.NoHistory">NoHistory</a><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;No history available.&quot;</a>

      <span class="keyword">val</span> <a title="List[java.lang.String]" id="735722">xs</a>      = <a href="ReplStrings.scala.html#48243" title="(s: String)List[java.lang.String]">words</a><span class="delimiter">(</span><a href="#735712" title="String">line</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Int" id="735723">current</a> = <a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#735741" title="=&gt; Int">index</a>
      <span class="keyword">val</span> <a title="Int" id="735724">count</a>   = <span class="keyword">try</span> <a href="#735722" title="List[java.lang.String]">xs</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">head</a>.<a href="../../../collection/immutable/StringLike.scala.html#56568" title="=&gt; Int">toInt</a> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Int">_</span>: <span title="Exception">Exception</span> =&gt; <a href="#735708" title="=&gt; Int">defaultLines</a> <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="List[String]" id="735725">lines</a>   = <a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#735740" title="=&gt; List[String]">asStrings</a> <a href="../../../collection/immutable/List.scala.html#49166" title="(n: Int)List[String]">takeRight</a> <a href="#735724" title="Int">count</a>
      <span class="keyword">val</span> <a title="Int" id="735726">offset</a>  = <a href="#735723" title="Int">current</a> <a href="../../../Int.scala.html#54811" title="(x: Int)Int">-</a> <a href="#735725" title="List[String]">lines</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="736149">line</a>, <a title="Int" id="736150">index</a><span class="delimiter">)</span> &lt;- <a href="#735725" title="List[String]">lines</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: ((String, Int)) =&gt; Unit)Unit">zipWithIndex</a><span class="delimiter">)</span>
        <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%3d  %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#736150" title="Int">index</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <a href="#735726" title="Int">offset</a>, <a href="#736149" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// When you know you are most likely breaking into the middle</span>
  <span class="comment">// of a line being typed.  This softens the blow.</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="523344">echoAndRefresh</a><span class="delimiter">(</span><a title="String" id="737678">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#737678" title="String">msg</a><span class="delimiter">)</span>
    <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735586" title="()Unit">redrawLine</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="523345">echo</a><span class="delimiter">(</span><a title="String" id="736151">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a> <span title="(x$1: java.lang.String)Unit">println</span> <a href="#736151" title="String">msg</a>
    <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="523346">echoNoNL</a><span class="delimiter">(</span><a title="String" id="737681">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a> <span title="(x$1: java.lang.String)Unit">print</span> <a href="#737681" title="String">msg</a>
    <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Search the history */</span>
  <span class="keyword">def</span> <a title="(_cmdline: String)Unit" id="523347">searchHistory</a><span class="delimiter">(</span><a title="String" id="736209">_cmdline</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="737688">cmdline</a> = <a href="#736209" title="String">_cmdline</a>.<span title="()java.lang.String">toLowerCase</span>
    <span class="keyword">val</span> <a title="Int" id="737689">offset</a>  = <a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#735741" title="=&gt; Int">index</a> <a href="../../../Int.scala.html#54811" title="(x: Int)Int">-</a> <a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#735742" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>

    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="737770">line</a>, <a title="Int" id="737771">index</a><span class="delimiter">)</span> &lt;- <a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#735740" title="=&gt; List[String]">asStrings</a>.<a href="../../../collection/generic/FilterMonadic.scala.html#53496" title="(f: ((String, Int)) =&gt; Unit)Unit">zipWithIndex</a> ; <span class="keyword">if</span> <a href="#737770" title="String">line</a>.<span title="()java.lang.String">toLowerCase</span> <span title="(x$1: java.lang.CharSequence)Boolean">contains</span> <a href="#737688" title="java.lang.String">cmdline</a><span class="delimiter">)</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%d %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#737771" title="Int">index</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <a href="#737689" title="Int">offset</a>, <a href="#737770" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="String" id="523349">currentPrompt</a> = <a href="../Properties.scala.html#23224" title="object scala.tools.nsc.Properties">Properties</a>.<a href="../Properties.scala.html#470281" title="=&gt; String">shellPromptString</a>
  <span class="keyword">def</span> <a title="(prompt: String)Unit" id="523351">setPrompt</a><span class="delimiter">(</span><a title="String" id="737780">prompt</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#523349" title="(x$1: String)Unit">currentPrompt</a> = <a href="#737780" title="String">prompt</a>
  <span class="comment">/** Prompt to print when awaiting input */</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="523352">prompt</a> = <a href="#523349" title="=&gt; String">currentPrompt</a>

  <span class="keyword">import</span> <a href="LoopCommands.scala.html#523415" title="object ILoop.this.LoopCommand">LoopCommand</a>.<span class="delimiter">{</span> cmd, nullary <span class="delimiter">}</span>

  <span class="comment">/** Standard commands **/</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ILoop.this.LoopCommand]" id="523355">standardCommands</a> = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: ILoop.this.LoopCommand*)List[ILoop.this.LoopCommand]">List</a><span class="delimiter">(</span>
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cp&quot;)" class="string">&quot;cp&quot;</span>, <span title="java.lang.String(&quot;&lt;path&gt;&quot;)" class="string">&quot;&lt;path&gt;&quot;</span>, <span title="java.lang.String(&quot;add a jar or directory to the classpath&quot;)" class="string">&quot;add a jar or directory to the classpath&quot;</span>, <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">addClasspath</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;help&quot;)" class="string">&quot;help&quot;</span>, <span title="java.lang.String(&quot;[command]&quot;)" class="string">&quot;[command]&quot;</span>, <span title="java.lang.String(&quot;print this summary or command-specific help&quot;)" class="string">&quot;print this summary or command-specific help&quot;</span>, <a href="#523337" title="(line: String)ILoop.this.Result">helpCommand</a><span class="delimiter">)</span>,
    <a href="#523342" title="=&gt; ILoop.this.LoopCommand{def defaultLines: Int}">historyCommand</a>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;h?&quot;)" class="string">&quot;h?&quot;</span>, <span title="java.lang.String(&quot;&lt;string&gt;&quot;)" class="string">&quot;&lt;string&gt;&quot;</span>, <span title="java.lang.String(&quot;search the history&quot;)" class="string">&quot;search the history&quot;</span>, <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">searchHistory</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;imports&quot;)" class="string">&quot;imports&quot;</span>, <span title="java.lang.String(&quot;[name name ...]&quot;)" class="string">&quot;[name name ...]&quot;</span>, <span title="java.lang.String(&quot;show import history, identifying sources of names&quot;)" class="string">&quot;show import history, identifying sources of names&quot;</span>, <a href="#523361" title="(line: String)ILoop.this.Result">importsCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;implicits&quot;)" class="string">&quot;implicits&quot;</span>, <span title="java.lang.String(&quot;[-v]&quot;)" class="string">&quot;[-v]&quot;</span>, <span title="java.lang.String(&quot;show the implicits in scope&quot;)" class="string">&quot;show the implicits in scope&quot;</span>, <a href="#523362" title="(line: String)ILoop.this.Result">implicitsCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;javap&quot;)" class="string">&quot;javap&quot;</span>, <span title="java.lang.String(&quot;&lt;path|class&gt;&quot;)" class="string">&quot;&lt;path|class&gt;&quot;</span>, <span title="java.lang.String(&quot;disassemble a file or class name&quot;)" class="string">&quot;disassemble a file or class name&quot;</span>, <a href="#523367" title="(line: String)ILoop.this.Result">javapCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;keybindings&quot;)" class="string">&quot;keybindings&quot;</span>, <span title="java.lang.String(&quot;show how ctrl-[A-Z] and other keys are bound&quot;)" class="string">&quot;show how ctrl-[A-Z] and other keys are bound&quot;</span>, <a href="#523368" title="()ILoop.this.Result">keybindingsCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;load&quot;)" class="string">&quot;load&quot;</span>, <span title="java.lang.String(&quot;&lt;path&gt;&quot;)" class="string">&quot;&lt;path&gt;&quot;</span>, <span title="java.lang.String(&quot;load and interpret a Scala file&quot;)" class="string">&quot;load and interpret a Scala file&quot;</span>, <a href="#523383" title="(arg: String)ILoop.this.Result">loadCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;paste&quot;)" class="string">&quot;paste&quot;</span>, <span title="java.lang.String(&quot;enter paste mode: all input up to ctrl-D compiled together&quot;)" class="string">&quot;enter paste mode: all input up to ctrl-D compiled together&quot;</span>, <a href="#523390" title="()ILoop.this.Result">pasteCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;power&quot;)" class="string">&quot;power&quot;</span>, <span title="java.lang.String(&quot;enable power user mode&quot;)" class="string">&quot;enable power user mode&quot;</span>, <a href="#523385" title="()ILoop.this.Result">powerCmd</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;quit&quot;)" class="string">&quot;quit&quot;</span>, <span title="java.lang.String(&quot;exit the interpreter&quot;)" class="string">&quot;exit the interpreter&quot;</span>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="LoopCommands.scala.html#735759" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="../../../Option.scala.html#1737" title="object None">None</a><span class="delimiter">)</span><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;replay&quot;)" class="string">&quot;replay&quot;</span>, <span title="java.lang.String(&quot;reset execution and replay all previous commands&quot;)" class="string">&quot;reset execution and replay all previous commands&quot;</span>, <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">replay</a><span class="delimiter">)</span>,
    <a href="#523380" title="=&gt; ILoop.this.LoopCommand">shCommand</a>,
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;silent&quot;)" class="string">&quot;silent&quot;</span>, <span title="java.lang.String(&quot;disable/enable automatic printing of results&quot;)" class="string">&quot;disable/enable automatic printing of results&quot;</span>, <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">verbosity</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;type&quot;)" class="string">&quot;type&quot;</span>, <span title="java.lang.String(&quot;&lt;expr&gt;&quot;)" class="string">&quot;&lt;expr&gt;&quot;</span>, <span title="java.lang.String(&quot;display the type of an expression without evaluating it&quot;)" class="string">&quot;display the type of an expression without evaluating it&quot;</span>, <a href="#523366" title="(line: String)ILoop.this.Result">typeCommand</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

  <span class="comment">/** Power user commands */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ILoop.this.LoopCommand]" id="523357">powerCommands</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[ILoop.this.LoopCommand]">List</a><span class="delimiter">[</span>LoopCommand<span class="delimiter">]</span> = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: ILoop.this.LoopCommand*)List[ILoop.this.LoopCommand]">List</a><span class="delimiter">(</span>
    <a href="LoopCommands.scala.html#736189" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="java.lang.String(&quot;dump&quot;)" class="string">&quot;dump&quot;</span>, <span title="java.lang.String(&quot;displays a view of the interpreter\'s internal state&quot;)" class="string">&quot;displays a view of the interpreter's internal state&quot;</span>, <a href="#523358" title="()ILoop.this.Result">dumpCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;phase&quot;)" class="string">&quot;phase&quot;</span>, <span title="java.lang.String(&quot;&lt;phase&gt;&quot;)" class="string">&quot;&lt;phase&gt;&quot;</span>, <span title="java.lang.String(&quot;set the implicit phase for power commands&quot;)" class="string">&quot;set the implicit phase for power commands&quot;</span>, <a href="#523371" title="(name: String)ILoop.this.Result">phaseCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#736190" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="java.lang.String(&quot;wrap&quot;)" class="string">&quot;wrap&quot;</span>, <span title="java.lang.String(&quot;&lt;method&gt;&quot;)" class="string">&quot;&lt;method&gt;&quot;</span>, <span title="java.lang.String(&quot;name of method to wrap around each repl line&quot;)" class="string">&quot;name of method to wrap around each repl line&quot;</span>, <a href="#523369" title="(line: String)ILoop.this.Result">wrapCommand</a><span class="delimiter">)</span> <a href="LoopCommands.scala.html#735699" title="(text: java.lang.String)ILoop.this.LoopCommand">withLongHelp</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
      |:wrap
      |:wrap clear
      |:wrap &lt;method&gt;
      |
      |Installs a wrapper around each line entered into the repl.
      |Currently it must be the simple name of an existing method
      |with the specific signature shown in the following example.
      |
      |def timed[T](body: =&gt; T): T = {
      |  val start = System.nanoTime
      |  try body
      |  finally println((System.nanoTime - start) + &quot; nanos elapsed.&quot;)
      |}
      |:wrap timed
      |
      |If given no argument, :wrap names the wrapper installed.
      |An argument of clear will remove the wrapper if any is active.
      |Note that wrappers do not compose (a new one replaces the old
      |one) and also that the :phase command uses the same machinery,
      |so setting :wrap will clear any :phase setting.
    &quot;&quot;&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56560" title="=&gt; String">stripMargin</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span>
  <span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()ILoop.this.Result" id="523358">dumpCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#523317" title="=&gt; scala.tools.nsc.interpreter.Power">power</a><span class="delimiter">)</span>
    <a href="#523321" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#735740" title="=&gt; List[String]">asStrings</a> <a href="../../../collection/immutable/List.scala.html#49166" title="(n: Int)List[String]">takeRight</a> <span title="Int(30)" class="int">30</span> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: String =&gt; Unit)Unit">foreach</a> <a href="#523345" title="(msg: String)Unit">echo</a>
    <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735586" title="()Unit">redrawLine</a><a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[(java.lang.String, java.lang.String)]" id="523359">typeTransforms</a> = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: (java.lang.String, java.lang.String)*)List[(java.lang.String, java.lang.String)]">List</a><span class="delimiter">(</span>
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;scala.collection.immutable.&quot;</a> <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;immutable.&quot;)" class="string">&quot;immutable.&quot;</span>,
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;scala.collection.mutable.&quot;</a>   <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;mutable.&quot;)" class="string">&quot;mutable.&quot;</span>,
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;scala.collection.generic.&quot;</a>   <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;generic.&quot;)" class="string">&quot;generic.&quot;</span>,
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;java.lang.&quot;</a>                  <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;jl.&quot;)" class="string">&quot;jl.&quot;</span>,
    <a href="../../../Predef.scala.html#9589" title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;scala.runtime.&quot;</a>              <a href="../../../Predef.scala.html#57653" title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</a> <span title="java.lang.String(&quot;runtime.&quot;)" class="string">&quot;runtime.&quot;</span>
  <span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523361">importsCommand</a><span class="delimiter">(</span><a title="String" id="736213">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="737838">tokens</a>    = <a href="ReplStrings.scala.html#48243" title="(s: String)List[java.lang.String]">words</a><span class="delimiter">(</span><a href="#736213" title="String">line</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]" id="737839">handlers</a>  = <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="Imports.scala.html#522960" title="(=&gt; List[_1193.memberHandlers.ImportHandler]) forSome { val _1193: scala.tools.nsc.interpreter.IMain }">languageWildcardHandlers</a> <a href="../../../collection/immutable/List.scala.html#49152" title="(that: scala.collection.GenTraversableOnce[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler])(implicit bf: scala.collection.generic.CanBuildFrom[List[_1193.memberHandlers.ImportHandler],scala.tools.nsc.interpreter.MemberHandlers#ImportHandler,List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]])List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]">++</a> <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523159" title="(=&gt; List[_2641.memberHandlers.ImportHandler]) forSome { val _2641: scala.tools.nsc.interpreter.IMain }">importHandlers</a>
    <span class="keyword">val</span> <a title="Boolean" id="737840">isVerbose</a> = <a href="#737838" title="List[java.lang.String]">tokens</a> <a href="../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <span title="java.lang.String(&quot;-v&quot;)" class="string">&quot;-v&quot;</span>

    <a href="#737839" title="List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]">handlers</a>.<a href="../../../collection/TraversableLike.scala.html#49052" title="(p: scala.tools.nsc.interpreter.MemberHandlers#ImportHandler =&gt; Boolean)List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]">filterNot</a><span class="delimiter">(</span><a href="#738269" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">_</a>.<a href="MemberHandlers.scala.html#734118" title="(=&gt; List[_2642.intp.global.Symbol]) forSome { val _2642: scala.tools.nsc.interpreter.MemberHandlers }">importedSymbols</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>.<a href="../../../collection/IterableLike.scala.html#53915" title="(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler],(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int),List[(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int)]])List[(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int)]">zipWithIndex</a> <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <a href="#738348" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler" id="738351">handler</a>, <a title="Int" id="738352">idx</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(List[_1206.intp.global.Symbol], List[_1206.intp.global.Symbol])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="List[_1206.intp.global.Symbol]" id="738354">types</a>, <a href="../../../Tuple2.scala.html#53404" title="List[_1206.intp.global.Symbol]" id="738355">terms</a><span class="delimiter">)</span> = <a href="#738351" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a>.<a href="MemberHandlers.scala.html#734118" title="(=&gt; List[_2643.intp.global.Symbol]) forSome { val _2643: scala.tools.nsc.interpreter.MemberHandlers }">importedSymbols</a> <a href="../../../collection/TraversableLike.scala.html#49058" title="(p: _1206.intp.global.Symbol =&gt; Boolean)(List[_1206.intp.global.Symbol], List[_1206.intp.global.Symbol])">partition</a> <span class="delimiter">(</span><a href="#738375" title="_1206.intp.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; _1206.intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501116" title="=&gt; Boolean">isTypeName</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[_1207.intp.global.Symbol] forSome { val _1207: scala.tools.nsc.interpreter.MemberHandlers }" id="738356">imps</a>           = <a href="#738351" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a>.<a href="MemberHandlers.scala.html#734117" title="(=&gt; List[_2644.intp.global.Symbol]) forSome { val _2644: scala.tools.nsc.interpreter.MemberHandlers }">implicitSymbols</a>
        <span class="keyword">val</span> <a title="List[java.lang.String]" id="738357">found</a>          = <a href="#737838" title="List[java.lang.String]">tokens</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: java.lang.String =&gt; Boolean)List[java.lang.String]">filter</a> <span class="delimiter">(</span><a href="#738351" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a> <a href="../../../collection/GenSetLike.scala.html#59062" title="(elem: String)Boolean">importsSymbolNamed</a> <a href="#738411" title="java.lang.String">_</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="738358">typeMsg</a>        = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#738354" title="List[_1206.intp.global.Symbol] forSome { val _1206: scala.tools.nsc.interpreter.MemberHandlers }">types</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#738354" title="List[_1206.intp.global.Symbol] forSome { val _1206: scala.tools.nsc.interpreter.MemberHandlers }">types</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54737" title="(x: String)String">+</a> <span title="java.lang.String(&quot; types&quot;)" class="string">&quot; types&quot;</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="738359">termMsg</a>        = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#738355" title="List[_1206.intp.global.Symbol] forSome { val _1206: scala.tools.nsc.interpreter.MemberHandlers }">terms</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#738355" title="List[_1206.intp.global.Symbol] forSome { val _1206: scala.tools.nsc.interpreter.MemberHandlers }">terms</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54737" title="(x: String)String">+</a> <span title="java.lang.String(&quot; terms&quot;)" class="string">&quot; terms&quot;</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="738360">implicitMsg</a>    = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#738356" title="List[_1207.intp.global.Symbol] forSome { val _1207: scala.tools.nsc.interpreter.MemberHandlers }">imps</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#738356" title="List[_1207.intp.global.Symbol] forSome { val _1207: scala.tools.nsc.interpreter.MemberHandlers }">imps</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54737" title="(x: String)String">+</a> <span title="java.lang.String(&quot; are implicit&quot;)" class="string">&quot; are implicit&quot;</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="738361">foundMsg</a>       = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#738357" title="List[java.lang.String]">found</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#738357" title="List[java.lang.String]">found</a>.<a href="../../../collection/TraversableOnce.scala.html#53708" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="java.lang.String(&quot; // imports: &quot;)" class="string">&quot; // imports: &quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="738362">statsMsg</a>       = <a href="../../../collection/immutable/List.scala.html#48877" title="(xs: java.lang.String*)List[java.lang.String]">List</a><span class="delimiter">(</span><a href="#738358" title="java.lang.String">typeMsg</a>, <a href="#738359" title="java.lang.String">termMsg</a>, <a href="#738360" title="java.lang.String">implicitMsg</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49052" title="(p: java.lang.String =&gt; Boolean)List[java.lang.String]">filterNot</a> <span class="delimiter">(</span><a href="#738449" title="java.lang.String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53708" title="(start: String, sep: String, end: String)String">mkString</a> <span class="delimiter">(</span><span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>

        <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%2d) %-30s %s%s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span>
          <a href="#738352" title="Int">idx</a> <a href="../../../Int.scala.html#54804" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>,
          <a href="#738351" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a>.<a href="MemberHandlers.scala.html#734131" title="=&gt; String">importString</a>,
          <a href="#738362" title="String">statsMsg</a>,
          <a href="#738361" title="java.lang.String">foundMsg</a>
        <span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523362">implicitsCommand</a><span class="delimiter">(</span><a title="String" id="736217">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.IMain" id="738467">intp</a> = <a href="#32364" title="ILoop.this.type">ILoop</a>.<span class="keyword">this</span>.<a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>
    <span class="keyword">import</span> <a href="#738467" title="scala.tools.nsc.interpreter.IMain">intp</a>._
    <span class="keyword">import</span> <a href="IMain.scala.html#523020" title="=&gt; scala.tools.nsc.Global">global</a>.Symbol

    <span class="keyword">def</span> <a title="(x: Any)Unit" id="738470">p</a><span class="delimiter">(</span><a title="Any" id="738473">x</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#738467" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#482469" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738473" title="Any">x</a><span class="delimiter">)</span>

    <span class="comment">// If an argument is given, only show a source with that</span>
    <span class="comment">// in its name somewhere.</span>
    <span class="keyword">val</span> <a title="Array[java.lang.String]" id="738471">args</a>     = <a href="#736217" title="String">line</a> <span title="(x$1: java.lang.String)Array[java.lang.String]">split</span> <span title="java.lang.String(&quot;\\s+&quot;)" class="string">&quot;\\s+&quot;</span>
    <span class="keyword">val</span> <a title="List[(intp.global.Symbol, List[intp.global.Symbol])]" id="738472">filtered</a> = <a href="#738467" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="Imports.scala.html#522973" title="=&gt; List[(intp.global.Symbol, List[intp.global.Symbol])]">implicitSymbolsBySource</a> <a href="../../../collection/TraversableLike.scala.html#49051" title="(p: ((intp.global.Symbol, List[intp.global.Symbol])) =&gt; Boolean)List[(intp.global.Symbol, List[intp.global.Symbol])]">filter</a> <a href="#738489" title="Boolean" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Boolean" class="delimiter">(</span><a title="intp.global.Symbol" id="738492">source</a>, <a title="List[intp.global.Symbol]" id="738493">syms</a><span class="delimiter">)</span> =&gt;
        <span class="delimiter">(</span><a href="../../../Predef.scala.html#9626" title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">args</a> <a href="../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <span title="java.lang.String(&quot;-v&quot;)" class="string">&quot;-v&quot;</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <span class="delimiter">{</span>
          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#736217" title="String">line</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#738492" title="intp.global.Symbol">source</a>.<a href="../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a>.<span title="()java.lang.String">toString</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;scala.Predef&quot;)" class="string">&quot;scala.Predef&quot;</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9626" title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">args</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55930" title="(p: java.lang.String =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#738492" title="intp.global.Symbol">source</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a> <span title="(x$1: java.lang.CharSequence)Boolean">contains</span> <a href="#738823" title="java.lang.String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#738472" title="List[(intp.global.Symbol, List[intp.global.Symbol])]">filtered</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;No implicits have been imported other than those in Predef.&quot;</a>

    <a href="#738472" title="List[(intp.global.Symbol, List[intp.global.Symbol])]">filtered</a> <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <a href="#738844" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="intp.global.Symbol" id="738847">source</a>, <a title="List[intp.global.Symbol]" id="738848">syms</a><span class="delimiter">)</span> =&gt;
        <a href="#738470" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="java.lang.String(&quot;/* &quot;)" class="string">&quot;/* &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738848" title="List[intp.global.Symbol]">syms</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; implicit members imported from &quot;)" class="string">&quot; implicit members imported from &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738847" title="intp.global.Symbol">source</a>.<a href="../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; */&quot;)" class="string">&quot; */&quot;</span><span class="delimiter">)</span>

        <span class="comment">// This groups the members by where the symbol is defined</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Map[intp.global.Symbol,List[intp.global.Symbol]]" id="738849">byOwner</a> = <a href="#738848" title="List[intp.global.Symbol]">syms</a> <a href="../../../collection/TraversableLike.scala.html#49059" title="(f: intp.global.Symbol =&gt; intp.global.Symbol)scala.collection.immutable.Map[intp.global.Symbol,List[intp.global.Symbol]]">groupBy</a> <span class="delimiter">(</span><a href="#738859" title="intp.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509249" title="=&gt; intp.global.Symbol">owner</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[(intp.global.Symbol, List[intp.global.Symbol])]" id="738850">sortedOwners</a> = <a href="#738849" title="scala.collection.immutable.Map[intp.global.Symbol,List[intp.global.Symbol]]">byOwner</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[(intp.global.Symbol, List[intp.global.Symbol])]">toList</a> <a href="../../../collection/SeqLike.scala.html#54178" title="(f: ((intp.global.Symbol, List[intp.global.Symbol])) =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[(intp.global.Symbol, List[intp.global.Symbol])]">sortBy</a> <a href="#738867" title="Int" class="delimiter">{</a> <span class="keyword">case</span> <span title="Int" class="delimiter">(</span><a title="intp.global.Symbol" id="738870">owner</a>, _<span class="delimiter">)</span> =&gt; <a href="#738467" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523035" title="(op: =&gt; Int)Int">afterTyper</a><span class="delimiter">(</span><a href="#738847" title="intp.global.Symbol">source</a>.<a href="../symtab/Symbols.scala.html#509272" title="=&gt; intp.global.Type">info</a>.<a href="../symtab/Types.scala.html#507231" title="=&gt; List[intp.global.Symbol]">baseClasses</a> <a href="../../../collection/GenSeqLike.scala.html#53954" title="(elem: intp.global.Symbol)Int">indexOf</a> <a href="#738870" title="intp.global.Symbol">owner</a><span class="delimiter">)</span> <span class="delimiter">}</span>

        <a href="#738850" title="List[(intp.global.Symbol, List[intp.global.Symbol])]">sortedOwners</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: ((intp.global.Symbol, List[intp.global.Symbol])) =&gt; Unit)Unit">foreach</a> <a href="#738966" title="Unit" class="delimiter">{</a>
          <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="intp.global.Symbol" id="738969">owner</a>, <a title="List[intp.global.Symbol]" id="738970">members</a><span class="delimiter">)</span> =&gt;
            <span class="comment">// Within each owner, we cluster results based on the final result type</span>
            <span class="comment">// if there are more than a couple, and sort each cluster based on name.</span>
            <span class="comment">// This is really just trying to make the 100 or so implicits imported</span>
            <span class="comment">// by default into something readable.</span>
            <span class="keyword">val</span> <a title="List[List[intp.global.Symbol]]" id="738971">memberGroups</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[List[intp.global.Symbol]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="List[(intp.global.Type, List[intp.global.Symbol])]" id="738973">groups</a> = <a href="#738970" title="List[intp.global.Symbol]">members</a> <a href="../../../collection/TraversableLike.scala.html#49059" title="(f: intp.global.Symbol =&gt; intp.global.Type)scala.collection.immutable.Map[intp.global.Type,List[intp.global.Symbol]]">groupBy</a> <span class="delimiter">(</span><a href="#738984" title="intp.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509270" title="=&gt; intp.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#507177" title="=&gt; intp.global.Type">finalResultType</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[(intp.global.Type, List[intp.global.Symbol])]">toList</a>
              <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(List[(intp.global.Type, List[intp.global.Symbol])], List[(intp.global.Type, List[intp.global.Symbol])])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="List[(intp.global.Type, List[intp.global.Symbol])]" id="738975">big</a>, <a href="../../../Tuple2.scala.html#53404" title="List[(intp.global.Type, List[intp.global.Symbol])]" id="738976">small</a><span class="delimiter">)</span> = <a href="#738973" title="List[(intp.global.Type, List[intp.global.Symbol])]">groups</a> <a href="../../../collection/TraversableLike.scala.html#49058" title="(p: ((intp.global.Type, List[intp.global.Symbol])) =&gt; Boolean)(List[(intp.global.Type, List[intp.global.Symbol])], List[(intp.global.Type, List[intp.global.Symbol])])">partition</a> <span class="delimiter">(</span><a href="#738998" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#53404" title="=&gt; List[intp.global.Symbol]">_2</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54775" title="(x: Int)Boolean">&gt;</a> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="List[List[intp.global.Symbol]]" id="738977">xss</a> = <span class="delimiter">(</span>
                <span class="delimiter">(</span><a href="#738975" title="List[(intp.global.Type, List[intp.global.Symbol])]">big</a> <a href="../../../collection/SeqLike.scala.html#54178" title="(f: ((intp.global.Type, List[intp.global.Symbol])) =&gt; String)(implicit ord: scala.math.Ordering[String])List[(intp.global.Type, List[intp.global.Symbol])]">sortBy</a> <span class="delimiter">(</span><a href="#739021" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#53402" title="=&gt; intp.global.Type">_1</a>.<a href="../../../reflect/generic/Types.scala.html#434192" title="()String">toString</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: ((intp.global.Type, List[intp.global.Symbol])) =&gt; List[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[(intp.global.Type, List[intp.global.Symbol])],List[intp.global.Symbol],List[List[intp.global.Symbol]]])List[List[intp.global.Symbol]]">map</a> <span class="delimiter">(</span><a href="#739098" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#53404" title="=&gt; List[intp.global.Symbol]">_2</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/SeqLike.scala.html#54161" title="(elem: List[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[intp.global.Symbol]],List[intp.global.Symbol],List[List[intp.global.Symbol]]])List[List[intp.global.Symbol]]">:+</a>
                <span class="delimiter">(</span><a href="#738976" title="List[(intp.global.Type, List[intp.global.Symbol])]">small</a> <a href="../../../collection/TraversableLike.scala.html#49046" title="(f: ((intp.global.Type, List[intp.global.Symbol])) =&gt; scala.collection.GenTraversableOnce[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[(intp.global.Type, List[intp.global.Symbol])],intp.global.Symbol,List[intp.global.Symbol]])List[intp.global.Symbol]">flatMap</a> <span class="delimiter">(</span><a href="#739169" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#53404" title="=&gt; List[intp.global.Symbol]">_2</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>

              <a href="#738977" title="List[List[intp.global.Symbol]]">xss</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: List[intp.global.Symbol] =&gt; List[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[intp.global.Symbol]],List[intp.global.Symbol],List[List[intp.global.Symbol]]])List[List[intp.global.Symbol]]">map</a> <span class="delimiter">(</span><a title="List[intp.global.Symbol]" id="739247">xs</a> =&gt; <a href="#739247" title="List[intp.global.Symbol]">xs</a> <a href="../../../collection/SeqLike.scala.html#54178" title="(f: intp.global.Symbol =&gt; String)(implicit ord: scala.math.Ordering[String])List[intp.global.Symbol]">sortBy</a> <span class="delimiter">(</span><a href="#739254" title="intp.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#509256" title="=&gt; intp.global.Name">name</a>.<a href="../symtab/Names.scala.html#501123" title="()String">toString</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            <span class="keyword">val</span> <a title="java.lang.String" id="738972">ownerMessage</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#738969" title="intp.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#738847" title="intp.global.Symbol">source</a><span class="delimiter">)</span> <span title="java.lang.String(&quot; defined in &quot;)" class="string">&quot; defined in &quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot; inherited from &quot;)" class="string">&quot; inherited from &quot;</span>
            <a href="#738470" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="java.lang.String(&quot;  /* &quot;)" class="string">&quot;  /* &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738970" title="List[intp.global.Symbol]">members</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738972" title="java.lang.String">ownerMessage</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738969" title="intp.global.Symbol">owner</a>.<a href="../../../reflect/generic/Symbols.scala.html#435348" title="=&gt; String">fullName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; */&quot;)" class="string">&quot; */&quot;</span><span class="delimiter">)</span>

            <a href="#738971" title="List[List[intp.global.Symbol]]">memberGroups</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: List[intp.global.Symbol] =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="List[intp.global.Symbol]" id="739363">group</a> =&gt;
              <a href="#739363" title="List[intp.global.Symbol]">group</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: intp.global.Symbol =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="intp.global.Symbol" id="739383">s</a> =&gt; <a href="#738470" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#738467" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523164" title="(sym: intp.global.Symbol)String">symbolDefString</a><span class="delimiter">(</span><a href="#739383" title="intp.global.Symbol">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#738470" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#738470" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()scala.tools.util.Javap" id="523363">newJavap</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#736404" title="scala.tools.util.Javap" class="keyword">new</a> <a href="../../util/Javap.scala.html#43737" title="anonymous class $anon extends scala.tools.util.Javap" id="736404">Javap</a><span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523075" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a>, <span title="scala.tools.nsc.interpreter.IMain.ReplStrippingWriter" class="keyword">new</span> <a href="IMain.scala.html#31897" title="object scala.tools.nsc.interpreter.IMain">IMain</a>.<a href="IMain.scala.html#523195" title="scala.tools.nsc.interpreter.IMain.ReplStrippingWriter">ReplStrippingWriter</a><span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Array[Byte]" id="736406">tryClass</a><span class="delimiter">(</span><a title="String" id="736407">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Array.scala.html#1430" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53402" title="String" id="736437">hd</a> <a href="../../../Tuple2.scala.html#53390" title="(String, List[String])">::</a> <a href="../../../Tuple2.scala.html#53404" title="List[String]" id="736438">rest</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">path</a> <a href="../../../Predef.scala.html#9626" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="Char(\'.\')" class="char">'.'</span> <a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[String]">toList</a>;
      <span class="comment">// If there are dots in the name, the first segment is the</span>
      <span class="comment">// key to finding it.</span>
      <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="#736438" title="List[String]">rest</a>.<a href="../../../collection/TraversableOnce.scala.html#53619" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523081" title="(id: String)Option[java.lang.String]">optFlatName</a> <a href="#736437" title="String">hd</a> <span title="Array[Byte]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Array[Byte]">Some</span><span class="delimiter">(</span><a title="java.lang.String" id="736737">flat</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="736738">clazz</a> = <a href="#736737" title="java.lang.String">flat</a> <a href="../../../collection/immutable/List.scala.html#49140" title="(x: String)List[String]">::</a> <a href="#736438" title="List[String]">rest</a> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
            <span class="keyword">val</span> <a title="Array[Byte]" id="736739">bytes</a> = <a href="#736404" title="scala.tools.util.Javap" class="keyword">super</a>.<a href="../../util/Javap.scala.html#625698" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#736738" title="String">clazz</a><span class="delimiter">)</span>
            <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9634" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">bytes</a>.<a href="../../../collection/TraversableOnce.scala.html#53619" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#736739" title="Array[Byte]">bytes</a>
            <span class="keyword">else</span> <a href="#736404" title="scala.tools.util.Javap" class="keyword">super</a>.<a href="../../util/Javap.scala.html#625698" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#736738" title="String">clazz</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Array[Byte]">_</span>          =&gt; <a href="#736404" title="scala.tools.util.Javap" class="keyword">super</a>.<a href="../../util/Javap.scala.html#625698" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#736407" title="String">path</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// Look for Foo first, then Foo$, but if Foo$ is given explicitly,</span>
        <span class="comment">// we have to drop the $ to find object Foo, then tack it back onto</span>
        <span class="comment">// the end of the flattened name.</span>
        <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736869">className</a>  = <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523080" title="(id: String)java.lang.String">flatName</a> <a href="#736407" title="String">path</a>
        <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736870">moduleName</a> = <span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523080" title="(id: String)java.lang.String">flatName</a> <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">path</a>.<a href="../../../collection/immutable/StringLike.scala.html#56557" title="(suffix: String)java.lang.String">stripSuffix</a><span class="delimiter">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>

        <span class="keyword">val</span> <a title="Array[Byte]" id="736871">bytes</a> = <a href="#736404" title="scala.tools.util.Javap" class="keyword">super</a>.<a href="../../util/Javap.scala.html#625698" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#736869" title="=&gt; java.lang.String">className</a><span class="delimiter">)</span>
        <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9634" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">bytes</a>.<a href="../../../collection/TraversableOnce.scala.html#53619" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#736871" title="Array[Byte]">bytes</a>
        <span class="keyword">else</span> <a href="#736404" title="scala.tools.util.Javap" class="keyword">super</a>.<a href="../../util/Javap.scala.html#625698" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#736870" title="=&gt; java.lang.String">moduleName</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.util.Javap" id="523365">javap</a> =
    <span class="keyword">try</span> <a href="#523363" title="()scala.tools.util.Javap">newJavap</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Null(null)">_</span>: <span title="Exception">Exception</span> =&gt; <span title="Null(null)" class="keyword">null</span> <span class="delimiter">}</span>

  <span class="comment">// Still todo: modules.</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523366">typeCommand</a><span class="delimiter">(</span><a title="String" id="736310">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#736310" title="String">line</a>.<span title="()java.lang.String">trim</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;:type &lt;expression&gt;&quot;</a>
    <span class="keyword">else</span> <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523133" title="((expr: java.lang.String, silent: Boolean)Option[_2645.global.Type]) forSome { val _2645: scala.tools.nsc.interpreter.IMain }">typeOfExpression</a><span class="delimiter">(</span><a href="#736310" title="String">line</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result">Some</span><span class="delimiter">(</span><a title="_1208.global.Type" id="739418">tp</a><span class="delimiter">)</span> =&gt; <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523035" title="(op: =&gt; ILoop.this.Result)ILoop.this.Result">afterTyper</a><span class="delimiter">(</span><a href="#739418" title="_1208.global.Type">tp</a>.<a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">toString</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result">_</span>        =&gt; <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;&quot;</a> <span class="comment">// the error message was already printed</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523367">javapCommand</a><span class="delimiter">(</span><a title="String" id="736221">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523364" title="=&gt; scala.tools.util.Javap">javap</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;:javap unavailable on this platform.&quot;</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#736221" title="String">line</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;:javap [-lcsvp] [path1 path2 ...]&quot;</a>

    <a href="../../util/Javap.scala.html#625680" title="(args: Seq[String])List[scala.tools.util.Javap.JpResult]">javap</a><span class="delimiter">(</span><a href="ReplStrings.scala.html#48243" title="(s: String)List[java.lang.String]">words</a><span class="delimiter">(</span><a href="#736221" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <span class="delimiter">{</span> <a title="scala.tools.util.Javap.JpResult" id="739451">res</a> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#739451" title="scala.tools.util.Javap.JpResult">res</a>.<a href="../../util/Javap.scala.html#625756" title="=&gt; Boolean">isError</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="java.lang.String(&quot;Failed: &quot;)" class="string">&quot;Failed: &quot;</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <a href="#739451" title="scala.tools.util.Javap.JpResult">res</a>.<a href="../../util/Javap.scala.html#625757" title="=&gt; res.ResultType">value</a>
      <span class="keyword">else</span> <a href="#739451" title="scala.tools.util.Javap.JpResult">res</a>.<a href="../../util/Javap.scala.html#625758" title="()Unit">show</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()ILoop.this.Result" id="523368">keybindingsCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735584" title="=&gt; List[scala.tools.nsc.interpreter.KeyBinding]">keyBindings</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Key bindings unavailable.&quot;</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Reading jline properties for default key bindings.&quot;)" class="string">&quot;Reading jline properties for default key bindings.&quot;</span><span class="delimiter">)</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Accuracy not guaranteed: treat this as a guideline only.\012&quot;)" class="string">&quot;Accuracy not guaranteed: treat this as a guideline only.\n&quot;</span><span class="delimiter">)</span>
      <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735584" title="=&gt; List[scala.tools.nsc.interpreter.KeyBinding]">keyBindings</a> <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.KeyBinding" id="739481">x</a> =&gt; <a href="#523345" title="(msg: String)Unit">echo</a> <span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739481" title="scala.tools.nsc.interpreter.KeyBinding">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523369">wrapCommand</a><span class="delimiter">(</span><a title="String" id="737794">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="739499">failMsg</a> = <span title="java.lang.String(&quot;Argument to :wrap must be the name of a method with signature [T](=&gt; T): T&quot;)" class="string">&quot;Argument to :wrap must be the name of a method with signature [T](=&gt; T): T&quot;</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.IMain" id="739500">intp</a> = <a href="#32364" title="ILoop.this.type">ILoop</a>.<span class="keyword">this</span>.<a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>
    <span class="keyword">val</span> <a title="intp.global.type" id="739501">g</a>: intp.global.<span class="keyword">type</span> = <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523020" title="=&gt; scala.tools.nsc.Global">global</a>
    <span class="keyword">import</span> <a href="#739501" title="intp.global.type">g</a>._

    <a href="ReplStrings.scala.html#48243" title="(s: String)List[java.lang.String]">words</a><span class="delimiter">(</span><a href="#737794" title="String">line</a><span class="delimiter">)</span> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#13700" title="ILoop.this.Result">Nil</a>            =&gt;
        <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523059" title="=&gt; String">executionWrapper</a> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="ILoop.this.Result" class="string">&quot;&quot;</span>   =&gt; <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;No execution wrapper is set.&quot;</a>
          <span class="keyword">case</span> <a title="ILoop.this.Result" id="739509">s</a>    =&gt; <span title="java.lang.String(&quot;Current execution wrapper: &quot;)" class="string">&quot;Current execution wrapper: &quot;</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <a href="#739509" title="String">s</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result" class="string">&quot;clear&quot;</span> :: <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a> =&gt;
        <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523059" title="=&gt; String">executionWrapper</a> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="ILoop.this.Result" class="string">&quot;&quot;</span>   =&gt; <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;No execution wrapper is set.&quot;</a>
          <span class="keyword">case</span> <a title="ILoop.this.Result" id="739514">s</a>    =&gt; <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523061" title="()Unit">clearExecutionWrapper</a><span class="delimiter">(</span><span class="delimiter">)</span> ; <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Cleared execution wrapper.&quot;</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="ILoop.this.Result" id="739522">wrapper</a> :: <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a> =&gt;
        <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523133" title="(expr: String, silent: Boolean)Option[intp.global.Type]">typeOfExpression</a><span class="delimiter">(</span><a href="#739522" title="java.lang.String">wrapper</a><span class="delimiter">)</span> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="ILoop.this.Result">Some</span><span class="delimiter">(</span>PolyType<span class="delimiter">(</span><a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="(x: List[g.Symbol])Some[List[g.Symbol]]">List</a><span class="delimiter">(</span><a title="g.Symbol" id="739545">targ</a><span class="delimiter">)</span>, MethodType<span class="delimiter">(</span><a href="../../../collection/generic/GenSeqFactory.scala.html#48862" title="(x: List[g.Symbol])Some[List[g.Symbol]]">List</a><span class="delimiter">(</span><a title="g.Symbol" id="739560">arg</a><span class="delimiter">)</span>, <a title="g.Type" id="739561">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523060" title="(code: String)Unit">setExecutionWrapper</a> <a href="#739500" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523084" title="(id: String)String">pathToTerm</a><span class="delimiter">(</span><a href="#739522" title="java.lang.String">wrapper</a><span class="delimiter">)</span>
            <span title="java.lang.String(&quot;Set wrapper to \'&quot;)" class="string">&quot;Set wrapper to '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739522" title="java.lang.String">wrapper</a> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span>
          <span class="keyword">case</span> <span title="ILoop.this.Result">Some</span><span class="delimiter">(</span><a title="intp.global.Type" id="739568">x</a><span class="delimiter">)</span> =&gt;
            <a href="#739499" title="=&gt; java.lang.String">failMsg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Found: &quot;)" class="string">&quot;\nFound: &quot;</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <a href="#739568" title="intp.global.Type">x</a>
          <span class="keyword">case</span> <span title="ILoop.this.Result">_</span> =&gt;
            <a href="#739499" title="=&gt; java.lang.String">failMsg</a> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <span title="java.lang.String(&quot;\012Found: &lt;unknown&gt;&quot;)" class="string">&quot;\nFound: &lt;unknown&gt;&quot;</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result">_</span> =&gt; <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">failMsg</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="523370">pathToPhaseWrapper</a> = <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523084" title="(id: String)String">pathToTerm</a><span class="delimiter">(</span><span title="java.lang.String(&quot;$r&quot;)" class="string">&quot;$r&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.phased.atCurrent&quot;)" class="string">&quot;.phased.atCurrent&quot;</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: String)ILoop.this.Result" id="523371">phaseCommand</a><span class="delimiter">(</span><a title="String" id="737790">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="comment">// This line crashes us in TreeGen:</span>
    <span class="comment">//</span>
    <span class="comment">//   if (intp.power.phased set name) &quot;...&quot;</span>
    <span class="comment">//</span>
    <span class="comment">// Exception in thread &quot;main&quot; java.lang.AssertionError: assertion failed: ._7.type</span>
    <span class="comment">//  at scala.Predef$.assert(Predef.scala:99)</span>
    <span class="comment">//  at scala.tools.nsc.ast.TreeGen.mkAttributedQualifier(TreeGen.scala:69)</span>
    <span class="comment">//  at scala.tools.nsc.ast.TreeGen.mkAttributedQualifier(TreeGen.scala:44)</span>
    <span class="comment">//  at scala.tools.nsc.ast.TreeGen.mkAttributedRef(TreeGen.scala:101)</span>
    <span class="comment">//  at scala.tools.nsc.ast.TreeGen.mkAttributedStableRef(TreeGen.scala:143)</span>
    <span class="comment">//</span>
    <span class="comment">// But it works like so, type annotated.</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Phased" id="739572">phased</a>: <a href="Phased.scala.html#31908" title="scala.tools.nsc.interpreter.Phased">Phased</a> = <a href="#523317" title="=&gt; scala.tools.nsc.interpreter.Power">power</a>.<a href="Power.scala.html#737125" title="=&gt; scala.tools.nsc.interpreter.Phased">phased</a>
    <span class="keyword">import</span> <a href="#739572" title="scala.tools.nsc.interpreter.Phased">phased</a>.NoPhaseName

    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#737790" title="String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;clear&quot;)" class="string">&quot;clear&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#739572" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#739584" title="(phase: phased.PhaseName)Boolean">set</a><span class="delimiter">(</span><a href="Phased.scala.html#739674" title="object phased.NoPhaseName">NoPhaseName</a><span class="delimiter">)</span>
      <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523061" title="()Unit">clearExecutionWrapper</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Cleared active phase.&quot;</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#737790" title="String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#739572" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#739583" title="=&gt; phased.PhaseName">get</a> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="Phased.scala.html#739674" title="ILoop.this.Result">NoPhaseName</a> =&gt; <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Usage: :phase &lt;expr&gt; (e.g. typer, erasure.next, erasure+3)&quot;</a>
      <span class="keyword">case</span> <a title="ILoop.this.Result" id="739708">ph</a>          =&gt; <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Active phase is '%s'.  (To clear, :phase clear)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="delimiter">(</a><a href="#739572" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#739583" title="=&gt; phased.PhaseName">get</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="phased.PhaseName" id="739712">what</a> = <a href="#739572" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#739589" title="(str: String)phased.PhaseName">parse</a><span class="delimiter">(</span><a href="#737790" title="String">name</a><span class="delimiter">)</span>
      <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#739712" title="phased.PhaseName">what</a>.<a href="Phased.scala.html#739691" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#739572" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#739584" title="(phase: phased.PhaseName)Boolean">set</a><span class="delimiter">(</span><a href="#739712" title="phased.PhaseName">what</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#737790" title="String">name</a> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <span title="java.lang.String(&quot;\' does not appear to represent a valid phase.&quot;)" class="string">&quot;' does not appear to represent a valid phase.&quot;</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523060" title="(code: String)Unit">setExecutionWrapper</a><span class="delimiter">(</span><a href="#523370" title="=&gt; java.lang.String">pathToPhaseWrapper</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="739718">activeMessage</a> =
          <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#739712" title="phased.PhaseName">what</a>.<span title="()java.lang.String">toString</span>.<span title="()Int">length</span> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <a href="#737790" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739712" title="phased.PhaseName">what</a>
          <span class="keyword">else</span> <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s (%s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#739712" title="phased.PhaseName">what</a>, <a href="#737790" title="String">name</a><span class="delimiter">)</span>

        <span title="java.lang.String(&quot;Active phase is now: &quot;)" class="string">&quot;Active phase is now: &quot;</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <a href="#739718" title="java.lang.String">activeMessage</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Available commands */</span>
  <span class="keyword">def</span> <a title="=&gt; List[ILoop.this.LoopCommand]" id="523372">commands</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[ILoop.this.LoopCommand]">List</a><span class="delimiter">[</span>LoopCommand<span class="delimiter">]</span> = <a href="#523354" title="=&gt; List[ILoop.this.LoopCommand]">standardCommands</a> <a href="../../../collection/immutable/List.scala.html#49152" title="(that: scala.collection.GenTraversableOnce[ILoop.this.LoopCommand])(implicit bf: scala.collection.generic.CanBuildFrom[List[ILoop.this.LoopCommand],ILoop.this.LoopCommand,List[ILoop.this.LoopCommand]])List[ILoop.this.LoopCommand]">++</a> <span class="delimiter">(</span>
    <span title="List[ILoop.this.LoopCommand]" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#48212" title="=&gt; Boolean">isReplPower</a><span class="delimiter">)</span> <a href="#523356" title="=&gt; List[ILoop.this.LoopCommand]">powerCommands</a> <span class="keyword">else</span> <a href="../../../collection/immutable/List.scala.html#13700" title="object Nil">Nil</a>
  <span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="String" id="523373">replayQuestionMessage</a> =
    <span title="java.lang.String(&quot;|That entry seems to have slain the compiler.  Shall I replay\012       |your session? I can re-run each line except the last one.\012       |[y/n]\012    &quot;)" class="string">&quot;&quot;&quot;|That entry seems to have slain the compiler.  Shall I replay
       |your session? I can re-run each line except the last one.
       |[y/n]
    &quot;&quot;&quot;</span>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</a>.<a href="../../../collection/immutable/StringLike.scala.html#56560" title="=&gt; String">stripMargin</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="PartialFunction[Throwable,Unit]" id="523375">crashRecovery</a>: <a href="../../../PartialFunction.scala.html#335" title="PartialFunction[Throwable,Unit]">PartialFunction</a><span class="delimiter">[</span>Throwable, Unit<span class="delimiter">]</span> = <a href="#739789" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Unit" id="739790">ex</a>: <span title="Throwable">Throwable</span> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469773" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">YrichExes</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.Sources" id="739794">sources</a> = <a href="../../../Predef.scala.html#9553" title="[T](implicit e: T)T">implicitly</a><a href="../io/Sources.scala.html#739831" title="(implicit e: scala.tools.nsc.io.Sources)scala.tools.nsc.io.Sources" class="delimiter">[</a><a href="../io/Sources.scala.html#33663" title="scala.tools.nsc.io.Sources">Sources</a><span class="delimiter">]</span>
        <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739790" title="java.lang.Throwable">ex</a>.<span title="()java.lang.String">getMessage</span><span class="delimiter">)</span>
        <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#48210" title="=&gt; Boolean">isReplDebug</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;[searching &quot;)" class="string">&quot;[searching &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739794" title="scala.tools.nsc.io.Sources">sources</a>.<a href="../io/Sources.scala.html#739796" title="=&gt; String">path</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; for exception contexts...]&quot;)" class="string">&quot; for exception contexts...]&quot;</span>
          <span class="keyword">else</span> <span title="java.lang.String(&quot;[searching for exception contexts...]&quot;)" class="string">&quot;[searching for exception contexts...]&quot;</span>
        <span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523020" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#478256" title="(t: Throwable)String">throwableAsString</a><span class="delimiter">(</span><a href="#739790" title="java.lang.Throwable">ex</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#739790" title="java.lang.Throwable">ex</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Nothing">_</span>: <span title="java.lang.NoSuchMethodError">NoSuchMethodError</span> | _: <span title="java.lang.NoClassDefFoundError">NoClassDefFoundError</span> =&gt;
          <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012Unrecoverable error.&quot;)" class="string">&quot;\nUnrecoverable error.&quot;</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <a href="#739790" title="java.lang.Throwable">ex</a>
        <span class="keyword">case</span> <span title="Unit">_</span>  =&gt;
          <span class="keyword">def</span> <a title="()Boolean" id="739843">fn</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> =
            <span class="keyword">try</span> <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735588" title="(prompt: String, alt: =&gt; Boolean)Boolean">readYesOrNo</a><span class="delimiter">(</span><a href="#523373" title="=&gt; String">replayQuestionMessage</a>, <span class="delimiter">{</span> <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012You must enter y or n.&quot;)" class="string">&quot;\nYou must enter y or n.&quot;</span><span class="delimiter">)</span> ; <a href="#739843" title="()Boolean">fn</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
            <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(false)">_</span>: <span title="RuntimeException">RuntimeException</span> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#739843" title="()Boolean">fn</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#523379" title="()Unit">replay</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012Abandoning crashed session.&quot;)" class="string">&quot;\nAbandoning crashed session.&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The main read-eval-print loop for the repl.  It calls
   *  command() for each line of input, and stops when
   *  command() returns false.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="523377">loop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()String" id="739848">readOneLine</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a> <a href="InteractiveReader.scala.html#735593" title="(prompt: String)String">readLine</a> <a href="#523352" title="=&gt; String">prompt</a>
    <span class="delimiter">}</span>
    <span class="comment">// return false if repl should exit</span>
    <span class="keyword">def</span> <a title="(line: String)Boolean" id="739849">processLine</a><span class="delimiter">(</span><a title="String" id="739852">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523316" title="=&gt; Boolean">isAsync</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="ILoopInit.scala.html#523445" title="()Unit">awaitInitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="ILoopInit.scala.html#523452" title="()Unit">runThunks</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#739852" title="String">line</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Boolean(false)" class="keyword">false</span>               <span class="comment">// assume null means EOF</span>
      <span class="keyword">else</span> <a href="#523388" title="(line: String)ILoop.this.Result">command</a><span class="delimiter">(</span><a href="#739852" title="String">line</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean(false)">Result</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, _<span class="delimiter">)</span>           =&gt; <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">case</span> <span title="Boolean">Result</span><span class="delimiter">(</span>_, Some<span class="delimiter">(</span><a title="String" id="739883">finalLine</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#523333" title="(cmd: String)Unit">addReplay</a><span class="delimiter">(</span><a href="#739883" title="String">finalLine</a><span class="delimiter">)</span> ; <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">case</span> <span title="Boolean(true)">_</span>                          =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#739884" title="Unit" id="739885" class="keyword">try</a> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#739849" title="(line: String)Boolean">processLine</a><span class="delimiter">(</span><a href="#739848" title="()String">readOneLine</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>
      <span class="keyword">catch</span> <a href="#523375" title="PartialFunction[Throwable,Unit]" id="739886">crashRecovery</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** interpret all lines from a specified file */</span>
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.File)Unit" id="523378">interpretAllFrom</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.File" id="736243">file</a>: <a href="../io/File.scala.html#33012" title="scala.tools.nsc.io.File">File</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.InteractiveReader" id="739889">oldIn</a> = <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>
    <span class="keyword">val</span> <a title="List[String]" id="739890">oldReplay</a> = <a href="#523330" title="=&gt; List[String]">replayCommandStack</a>

    <span class="keyword">try</span> <a href="#736243" title="scala.tools.nsc.io.File">file</a> <a href="../io/Streamable.scala.html#481567" title="(f: java.io.BufferedReader =&gt; Unit)Unit">applyReader</a> <span class="delimiter">{</span> <a title="java.io.BufferedReader" id="739897">reader</a> =&gt;
      <a href="#523307" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <a href="SimpleReader.scala.html#739901" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><a href="#739897" title="java.io.BufferedReader">reader</a>, <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Loading &quot;)" class="string">&quot;Loading &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736243" title="scala.tools.nsc.io.File">file</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;...&quot;)" class="string">&quot;...&quot;</span><span class="delimiter">)</span>
      <a href="#523377" title="()Unit">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#523307" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <a href="#739889" title="scala.tools.nsc.interpreter.InteractiveReader">oldIn</a>
      <a href="#523330" title="(x$1: List[String])Unit">replayCommandStack</a> = <a href="#739890" title="List[String]">oldReplay</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** create a new interpreter and replay all commands so far */</span>
  <span class="keyword">def</span> <a title="()Unit" id="523379">replay</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#523334" title="()Unit">closeInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#523336" title="()Unit">createInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="739952">cmd</a> &lt;- <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: String =&gt; Unit)Unit">replayCommands</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Replaying: &quot;)" class="string">&quot;Replaying: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739952" title="String">cmd</a><span class="delimiter">)</span>  <span class="comment">// flush because maybe cmd will have its own output</span>
      <a href="#523388" title="(line: String)ILoop.this.Result">command</a><span class="delimiter">(</span><a href="#739952" title="String">cmd</a><span class="delimiter">)</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** fork a shell and run a command */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ILoop.this.LoopCommand" id="523381">shCommand</a> = <a href="#736260" title="ILoop.this.LoopCommand" class="keyword">new</a> <a href="LoopCommands.scala.html#523414" title="anonymous class $anon extends ILoop.this.LoopCommand" id="736260">LoopCommand</a><span class="delimiter">(</span><span title="java.lang.String(&quot;sh&quot;)" class="string">&quot;sh&quot;</span>, <span title="java.lang.String(&quot;run a shell command (result is implicitly =&gt; List[String])&quot;)" class="string">&quot;run a shell command (result is implicitly =&gt; List[String])&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="736262">usage</a> = <span title="java.lang.String(&quot;&lt;command line&gt;&quot;)" class="string">&quot;&lt;command line&gt;&quot;</span>
    <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="736263">apply</a><span class="delimiter">(</span><a title="String" id="736264">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <a href="#736264" title="String">line</a> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result" class="string">&quot;&quot;</span>   =&gt; <a href="LoopCommands.scala.html#735704" title="()ILoop.this.Result">showUsage</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="ILoop.this.Result">_</span>    =&gt;
        <span class="keyword">val</span> <a title="java.lang.String" id="736270">toRun</a> = classOf<span title="java.lang.Class[scala.tools.nsc.interpreter.ProcessResult](classOf[scala.tools.nsc.interpreter.ProcessResult])" class="delimiter">[</span>ProcessResult<span class="delimiter">]</span>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="ReplStrings.scala.html#48241" title="(str: String)java.lang.String">string2codeQuoted</a><span class="delimiter">(</span><a href="#736264" title="String">line</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
        <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a> <a href="#736270" title="java.lang.String">toRun</a>
        <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(filename: String)(action: scala.tools.nsc.io.File =&gt; Unit)Unit" id="523382">withFile</a><span class="delimiter">(</span><a title="String" id="736238">filename</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.File =&gt; Unit" id="736239">action</a>: File =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.File" id="739954">f</a> = <a href="../io/File.scala.html#482216" title="(path: scala.tools.nsc.io.Path)(implicit codec: scala.io.Codec)scala.tools.nsc.io.File">File</a><a href="../../../io/Codec.scala.html#417661" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../io/Path.scala.html#479366" title="implicit scala.tools.nsc.io.Path.string2path : (s: String)scala.tools.nsc.io.Path">filename</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#739954" title="scala.tools.nsc.io.File">f</a>.<a href="../io/Path.scala.html#479436" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="../../../Function1.scala.html#53453" title="(v1: scala.tools.nsc.io.File)Unit">action</a><span class="delimiter">(</span><a href="#739954" title="scala.tools.nsc.io.File">f</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;That file does not exist&quot;)" class="string">&quot;That file does not exist&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(arg: String)ILoop.this.Result" id="523383">loadCommand</a><span class="delimiter">(</span><a title="String" id="736234">arg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Option[String]" id="736237">shouldReplay</a>: <a href="../../../Option.scala.html#560" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../Option.scala.html#1737" title="object None">None</a>
    <a href="#523382" title="(filename: String)(action: scala.tools.nsc.io.File =&gt; Unit)Unit">withFile</a><span class="delimiter">(</span><a href="#736234" title="String">arg</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.File" id="736242">f</a> =&gt; <span class="delimiter">{</span>
      <a href="#523378" title="(file: scala.tools.nsc.io.File)Unit">interpretAllFrom</a><span class="delimiter">(</span><a href="#736242" title="scala.tools.nsc.io.File">f</a><span class="delimiter">)</span>
      <a href="#736237" title="Option[String]">shouldReplay</a> = <a href="../../../Option.scala.html#57885" title="(x: java.lang.String)Some[java.lang.String]">Some</a><span class="delimiter">(</span><span title="java.lang.String(&quot;:load &quot;)" class="string">&quot;:load &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#736234" title="String">arg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    <a href="LoopCommands.scala.html#735759" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#736237" title="Option[String]">shouldReplay</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(arg: String)Unit" id="523384">addClasspath</a><span class="delimiter">(</span><a title="String" id="736201">arg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.File" id="739956">f</a> = <a href="../io/File.scala.html#482216" title="(path: scala.tools.nsc.io.Path)(implicit codec: scala.io.Codec)scala.tools.nsc.io.File">File</a><a href="../../../io/Codec.scala.html#417661" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../io/Path.scala.html#479366" title="implicit scala.tools.nsc.io.Path.string2path : (s: String)scala.tools.nsc.io.Path">arg</a><span class="delimiter">)</span>.<a href="../io/File.scala.html#481527" title="=&gt; scala.tools.nsc.io.File">normalize</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#739956" title="scala.tools.nsc.io.File">f</a>.<a href="../io/Path.scala.html#479436" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523327" title="(x$1: String)Unit">addedClasspath</a> = <a href="../util/ClassPath.scala.html#42944" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="../util/ClassPath.scala.html#481060" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#523327" title="=&gt; String">addedClasspath</a>, <a href="#739956" title="scala.tools.nsc.io.File">f</a>.<a href="../io/Path.scala.html#479414" title="=&gt; String">path</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="739958">totalClasspath</a> = <a href="../util/ClassPath.scala.html#42944" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="../util/ClassPath.scala.html#481060" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469629" title="=&gt; scala.tools.nsc.Settings#PathSetting">classpath</a>.<a href="../settings/MutableSettings.scala.html#470249" title="=&gt; String">value</a>, <a href="#523327" title="=&gt; String">addedClasspath</a><span class="delimiter">)</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Added '%s'.  Your new classpath is:\n\&quot;%s\&quot;&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#739956" title="scala.tools.nsc.io.File">f</a>.<a href="../io/Path.scala.html#479414" title="=&gt; String">path</a>, <a href="#739958" title="String">totalClasspath</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#523379" title="()Unit">replay</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;The path \'&quot;)" class="string">&quot;The path '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#739956" title="scala.tools.nsc.io.File">f</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\' doesn\'t seem to exist.&quot;)" class="string">&quot;' doesn't seem to exist.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()ILoop.this.Result" id="523385">powerCmd</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#48212" title="=&gt; Boolean">isReplPower</a><span class="delimiter">)</span> <a href="LoopCommands.scala.html#735758" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Already in power mode.&quot;</a>
    <span class="keyword">else</span> <a href="#523386" title="(isDuringInit: Boolean)Unit">enablePowerMode</a><a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(isDuringInit: Boolean)Unit" id="523386">enablePowerMode</a><span class="delimiter">(</span><a title="Boolean" id="739966">isDuringInit</a>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="ReplConfig.scala.html#48200" title="=&gt; scala.tools.nsc.interpreter.ReplProps">replProps</a>.<a href="ReplProps.scala.html#737226" title="=&gt; scala.sys.BooleanProp">power</a> <a href="../../../sys/Prop.scala.html#460915" title="(value: Boolean)Boolean">setValue</a> <span title="Boolean(true)" class="keyword">true</span>
    <a href="#523317" title="=&gt; scala.tools.nsc.interpreter.Power">power</a>.<a href="Power.scala.html#737097" title="()Unit">unleash</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523041" title="(operation: =&gt; ILoop.this.Result)ILoop.this.Result">beSilentDuring</a><span class="delimiter">(</span><a href="#523371" title="(name: String)ILoop.this.Result">phaseCommand</a><span class="delimiter">(</span><span title="java.lang.String(&quot;typer&quot;)" class="string">&quot;typer&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#739966" title="Boolean">isDuringInit</a><span class="delimiter">)</span> <a href="ILoopInit.scala.html#523426" title="(msg: String)Unit">asyncMessage</a><span class="delimiter">(</span><a href="#523317" title="=&gt; scala.tools.nsc.interpreter.Power">power</a>.<a href="Power.scala.html#737094" title="=&gt; String">banner</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#523317" title="=&gt; scala.tools.nsc.interpreter.Power">power</a>.<a href="Power.scala.html#737094" title="=&gt; String">banner</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="523387">verbosity</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="736307">old</a> = <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#522998" title="=&gt; Boolean">printResults</a>
    <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#522999" title="(x$1: Boolean)Unit">printResults</a> = <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#736307" title="Boolean">old</a>
    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Switched &quot;)" class="string">&quot;Switched &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#736307" title="Boolean">old</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;off&quot;)" class="string">&quot;off&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;on&quot;)" class="string">&quot;on&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; result printing.&quot;)" class="string">&quot; result printing.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Run one command submitted by the user.  Two values are returned:
    * (1) whether to keep running, (2) the line to record for replay,
    * if any. */</span>
  <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="523388">command</a><span class="delimiter">(</span><a title="String" id="739855">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#739855" title="String">line</a> <span title="(x$1: java.lang.String)Boolean">startsWith</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="740041">cmd</a> = <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">tail</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55972" title="(p: Char =&gt; Boolean)String">takeWhile</a> <span class="delimiter">(</span><a title="Char" id="740264">x</a> =&gt; <a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="../../../LowPriorityImplicits.scala.html#9475" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">x</a>.<a href="../../../runtime/RichChar.scala.html#54859" title="=&gt; Boolean">isWhitespace</a><span class="delimiter">)</span>
      <a href="#523341" title="(cmd: String)Option[ILoop.this.LoopCommand]">uniqueCommand</a><span class="delimiter">(</span><a href="#740041" title="String">cmd</a><span class="delimiter">)</span> <span title="ILoop.this.Result" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="ILoop.this.Result">Some</span><span class="delimiter">(</span><a title="ILoop.this.LoopCommand" id="740268">lc</a><span class="delimiter">)</span> =&gt; <a href="LoopCommands.scala.html#735703" title="(line: String)ILoop.this.Result">lc</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a>.<a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">tail</a> <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripPrefix</a> <a href="#740041" title="String">cmd</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55973" title="(p: Char =&gt; Boolean)String">dropWhile</a> <span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#9475" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">_</a>.<a href="../../../runtime/RichChar.scala.html#54859" title="=&gt; Boolean">isWhitespace</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="ILoop.this.Result">_</span>        =&gt; <a href="#523339" title="(cmd: String)ILoop.this.Result">ambiguousError</a><span class="delimiter">(</span><a href="#740041" title="String">cmd</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523020" title="=&gt; scala.tools.nsc.Global">global</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="LoopCommands.scala.html#735759" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="../../../Option.scala.html#1737" title="object None">None</a><span class="delimiter">)</span>  <span class="comment">// Notice failure to create compiler</span>
    <span class="keyword">else</span> <a href="LoopCommands.scala.html#735759" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#523394" title="(code: String)Option[String]">interpretStartingWith</a><span class="delimiter">(</span><a href="#739855" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cond: String =&gt; Boolean)Iterator[String]" id="523389">readWhile</a><span class="delimiter">(</span><a title="String =&gt; Boolean" id="740481">cond</a>: String =&gt; Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../../package.scala.html#47534" title="=&gt; collection.Iterator.type">Iterator</a> <a href="../../../collection/Iterator.scala.html#71494" title="(elem: =&gt; String)Iterator[String]">continually</a> <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735593" title="(prompt: String)String">readLine</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#59136" title="(p: String =&gt; Boolean)Iterator[String]">takeWhile</a> <span class="delimiter">(</span><a title="String" id="740489">x</a> =&gt; <a href="#740489" title="String">x</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Function1.scala.html#53453" title="(v1: String)Boolean">cond</a><span class="delimiter">(</span><a href="#740489" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()ILoop.this.Result" id="523390">pasteCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#523420" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;// Entering paste mode (ctrl-D to finish)\012&quot;)" class="string">&quot;// Entering paste mode (ctrl-D to finish)\n&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="740495">code</a> = <a href="#523389" title="(cond: String =&gt; Boolean)Iterator[String]">readWhile</a><span class="delimiter">(</span><a title="String" id="740497">_</a> =&gt; <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53709" title="(sep: String)String">mkString</a> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
    <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012// Exiting paste mode, now interpreting.\012&quot;)" class="string">&quot;\n// Exiting paste mode, now interpreting.\n&quot;</span><span class="delimiter">)</span>
    <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a> <a href="#740495" title="String">code</a>
    <a href="LoopCommands.scala.html#735757" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object ILoop.this.paste" id="523391">paste</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="keyword">extends</a> <a href="Pasted.scala.html#30483" title="scala.tools.nsc.interpreter.Pasted">Pasted</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="740524">ContinueString</a> = <span title="java.lang.String(&quot;     | &quot;)" class="string">&quot;     | &quot;</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="740526">PromptString</a>   = <span title="java.lang.String(&quot;scala&gt; &quot;)" class="string">&quot;scala&gt; &quot;</span>

    <span class="keyword">def</span> <a title="(line: String)Unit" id="740528">interpret</a><span class="delimiter">(</span><a title="String" id="740531">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#740531" title="String">line</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span>
      <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a> <a href="#740531" title="String">line</a>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(start: String)Unit" id="740529">transcript</a><span class="delimiter">(</span><a title="String" id="740537">start</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012// Detected repl transcript paste: ctrl-D to finish.\012&quot;)" class="string">&quot;\n// Detected repl transcript paste: ctrl-D to finish.\n&quot;</span><span class="delimiter">)</span>
      <a href="Pasted.scala.html#740522" title="(lines: TraversableOnce[String])Unit">apply</a><span class="delimiter">(</span><a href="../../../collection/Iterator.scala.html#71478" title="(elems: String*)Iterator[String]">Iterator</a><span class="delimiter">(</span><a href="#740537" title="String">start</a><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#59118" title="(that: =&gt; scala.collection.GenTraversableOnce[String])Iterator[String]">++</a> <a href="#523389" title="(cond: String =&gt; Boolean)Iterator[String]">readWhile</a><span class="delimiter">(</span><a href="#740565" title="String">_</a>.<span title="()java.lang.String">trim</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#740526" title="=&gt; java.lang.String">PromptString</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#523391" title="object ILoop.this.paste">paste</a>.<span class="delimiter">{</span> ContinueString, PromptString <span class="delimiter">}</span>

  <span class="comment">/** Interpret expressions starting with the first line.
    * Read lines until a complete compilation unit is available
    * or until a syntax error has been seen.  If a full unit is
    * read, go ahead and interpret it.  Return the full string
    * to be recorded for replay, if any.
    */</span>
  <span class="keyword">def</span> <a title="(code: String)Option[String]" id="523394">interpretStartingWith</a><span class="delimiter">(</span><a title="String" id="740479">code</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#560" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// signal completion non-completion input has been received</span>
    <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735583" title="=&gt; scala.tools.nsc.interpreter.Completion">completion</a>.<a href="Completion.scala.html#729794" title="()Unit">resetVerbosity</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; (scala.tools.nsc.interpreter.package.IR.Result, Option[String])" id="740576">reallyInterpret</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.package.IR.Result" id="740579">reallyResult</a> = <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523100" title="(line: String)scala.tools.nsc.interpreter.package.IR.Result">interpret</a><span class="delimiter">(</span><a href="#740479" title="String">code</a><span class="delimiter">)</span>
      <a href="../../../Tuple2.scala.html#53390" title="(_1: scala.tools.nsc.interpreter.package.IR.Result, _2: Option[String])(scala.tools.nsc.interpreter.package.IR.Result, Option[String])" class="delimiter">(</a><a href="#740579" title="scala.tools.nsc.interpreter.package.IR.Result">reallyResult</a>, <a href="#740579" title="scala.tools.nsc.interpreter.package.IR.Result">reallyResult</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="package.scala.html#48223" title="None.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a>       =&gt; <a href="../../../Option.scala.html#1737" title="object None">None</a>
        <span class="keyword">case</span> <a href="package.scala.html#48223" title="Some[String]">IR</a>.<a href="Results.scala.html#734553" title="object scala.tools.nsc.interpreter.package.IR.Success">Success</a>     =&gt; <a href="../../../Option.scala.html#57885" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span><a href="#740479" title="String">code</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="package.scala.html#48223" title="Option[String]">IR</a>.<a href="Results.scala.html#734557" title="object scala.tools.nsc.interpreter.package.IR.Incomplete">Incomplete</a>  =&gt;
          <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735579" title="=&gt; Boolean">interactive</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#740479" title="String">code</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012\012&quot;)" class="string">&quot;\n\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;You typed two blank lines.  Starting a new command.&quot;)" class="string">&quot;You typed two blank lines.  Starting a new command.&quot;</span><span class="delimiter">)</span>
            <a href="../../../Option.scala.html#1737" title="object None">None</a>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735593" title="(prompt: String)String">readLine</a><span class="delimiter">(</span><a href="#740524" title="=&gt; java.lang.String">ContinueString</a><span class="delimiter">)</span> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="None.type" class="keyword">null</span> =&gt;
              <span class="comment">// we know compilation is going to fail since we're at EOF and the</span>
              <span class="comment">// parser thinks the input is still incomplete, but since this is</span>
              <span class="comment">// a file being read non-interactively we want to fail.  So we send</span>
              <span class="comment">// it straight to the compiler for the nice error message.</span>
              <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523093" title="(code: String)Boolean">compileString</a><span class="delimiter">(</span><a href="#740479" title="String">code</a><span class="delimiter">)</span>
              <a href="../../../Option.scala.html#1737" title="object None">None</a>

            <span class="keyword">case</span> <a title="Option[String]" id="740593">line</a> =&gt; <a href="#523394" title="(code: String)Option[String]">interpretStartingWith</a><span class="delimiter">(</span><a href="#740479" title="String">code</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#740593" title="String">line</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Here we place ourselves between the user and the interpreter and examine
     *  the input they are ostensibly submitting.  We intervene in several cases:
     *
     *  1) If the line starts with &quot;scala&gt; &quot; it is assumed to be an interpreter paste.
     *  2) If the line starts with &quot;.&quot; (but not &quot;..&quot; or &quot;./&quot;) it is treated as an invocation
     *     on the previous result.
     *  3) If the Completion object's execute returns Some(_), we inject that value
     *     and avoid the interpreter, as it's likely not valid scala code.
     */</span>
    <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#740479" title="String">code</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#1737" title="object None">None</a>
    <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#55576" title="=&gt; Boolean">!</a><a href="#523391" title="object ILoop.this.paste">paste</a>.<a href="Pasted.scala.html#740509" title="=&gt; Boolean">running</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#740479" title="String">code</a>.<span title="()java.lang.String">trim</span>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#740526" title="=&gt; java.lang.String">PromptString</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523391" title="object ILoop.this.paste">paste</a>.<a href="#740529" title="(start: String)Unit">transcript</a><span class="delimiter">(</span><a href="#740479" title="String">code</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#1737" title="object None">None</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="Completion.scala.html#31819" title="object scala.tools.nsc.interpreter.Completion">Completion</a>.<a href="Completion.scala.html#729787" title="(code: String)Boolean">looksLikeInvocation</a><span class="delimiter">(</span><a href="#740479" title="String">code</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523117" title="=&gt; String">mostRecentVar</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523394" title="(code: String)Option[String]">interpretStartingWith</a><span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523117" title="=&gt; String">mostRecentVar</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#740479" title="String">code</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; Option[scala.tools.nsc.interpreter.package.IR.Result]" id="740612">runCompletion</a> = <a href="#523307" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#735583" title="=&gt; scala.tools.nsc.interpreter.Completion">completion</a> <a href="Completion.scala.html#729795" title="(line: java.lang.String)Option[scala.tools.nsc.interpreter.Completion#ExecResult]">execute</a> <a href="#740479" title="String">code</a> <a href="../../../Option.scala.html#48480" title="(f: scala.tools.nsc.interpreter.Completion#ExecResult =&gt; scala.tools.nsc.interpreter.package.IR.Result)Option[scala.tools.nsc.interpreter.package.IR.Result]">map</a> <span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523111" title="(x: Any)scala.tools.nsc.interpreter.package.IR.Result">bindValue</a> <a href="#740620" title="scala.tools.nsc.interpreter.Completion#ExecResult">_</a><span class="delimiter">)</span>
      <span class="comment">/** Due to my accidentally letting file completion execution sneak ahead
       *  of actual parsing this now operates in such a way that the scala
       *  interpretation always wins.  However to avoid losing useful file
       *  completion I let it fail and then check the others.  So if you
       *  type /tmp it will echo a failure and then give you a Directory object.
       *  It's not pretty: maybe I'll implement the silence bits I need to avoid
       *  echoing the failure.
       */</span>
      <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523091" title="(line: String)Boolean">isParseable</a> <a href="#740479" title="String">code</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#53390" title="(scala.tools.nsc.interpreter.package.IR.Result, Option[String])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#53402" title="scala.tools.nsc.interpreter.package.IR.Result" id="740627">code</a>, <a href="../../../Tuple2.scala.html#53404" title="Option[String]" id="740628">result</a><span class="delimiter">)</span> = <a href="#740576" title="=&gt; (scala.tools.nsc.interpreter.package.IR.Result, Option[String])">reallyInterpret</a>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#523317" title="=&gt; scala.tools.nsc.interpreter.Power">power</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#740627" title="scala.tools.nsc.interpreter.package.IR.Result">code</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="package.scala.html#48223" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#734555" title="object scala.tools.nsc.interpreter.package.IR.Error">Error</a><span class="delimiter">)</span>
          <a href="#740612" title="=&gt; Option[scala.tools.nsc.interpreter.package.IR.Result]">runCompletion</a>

        <a href="#740628" title="Option[String]">result</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="#740612" title="=&gt; Option[scala.tools.nsc.interpreter.package.IR.Result]">runCompletion</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="None.type">Some</span><span class="delimiter">(</span>_<span class="delimiter">)</span>  =&gt; <a href="../../../Option.scala.html#1737" title="object None">None</a> <span class="comment">// completion hit: avoid the latent error</span>
        <span class="keyword">case</span> <span title="Option[String]">_</span>        =&gt; <a href="#740576" title="=&gt; (scala.tools.nsc.interpreter.package.IR.Result, Option[String])">reallyInterpret</a>.<a href="../../../Tuple2.scala.html#53404" title="=&gt; Option[String]">_2</a>  <span class="comment">// trigger the latent error</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// runs :load `file` on any files passed via -i</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)Unit" id="523395">loadFiles</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="740657">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> = <a href="#740657" title="scala.tools.nsc.Settings">settings</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Unit" id="740660">settings</a>: <a href="../GenericRunnerSettings.scala.html#22842" title="scala.tools.nsc.GenericRunnerSettings">GenericRunnerSettings</a> =&gt;
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="740682">filename</a> &lt;- <a href="#740660" title="scala.tools.nsc.GenericRunnerSettings">settings</a>.<a href="../GenericRunnerSettings.scala.html#505484" title="=&gt; settings.MultiStringSetting">loadfiles</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: String =&gt; Unit)Unit">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="740683">cmd</a> = <span title="java.lang.String(&quot;:load &quot;)" class="string">&quot;:load &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#740682" title="String">filename</a>
        <a href="#523388" title="(line: String)ILoop.this.Result">command</a><span class="delimiter">(</span><a href="#740683" title="java.lang.String">cmd</a><span class="delimiter">)</span>
        <a href="#523333" title="(cmd: String)Unit">addReplay</a><span class="delimiter">(</span><a href="#740683" title="java.lang.String">cmd</a><span class="delimiter">)</span>
        <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
  <span class="delimiter">}</span>

  <span class="comment">/** Tries to create a JLineReader, falling back to SimpleReader:
   *  unless settings or properties are such that it should start
   *  with SimpleReader.
   */</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.interpreter.InteractiveReader" id="523396">chooseReader</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="740685">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="InteractiveReader.scala.html#32316" title="scala.tools.nsc.interpreter.InteractiveReader">InteractiveReader</a> = <span class="delimiter">{</span>
    <span title="scala.tools.nsc.interpreter.InteractiveReader" class="keyword">if</span> <span class="delimiter">(</span><a href="#740685" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469667" title="=&gt; settings.BooleanSetting">Xnojline</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; settings.Xnojline.T">value</a> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="../Properties.scala.html#23224" title="object scala.tools.nsc.Properties">Properties</a>.<a href="../Properties.scala.html#470283" title="=&gt; Boolean">isEmacsShell</a><span class="delimiter">)</span>
      <a href="SimpleReader.scala.html#739901" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="keyword">try</span> <span title="scala.tools.nsc.interpreter.JLineReader" class="keyword">new</span> <a href="JLineReader.scala.html#31572" title="scala.tools.nsc.interpreter.JLineReader">JLineReader</a><span class="delimiter">(</span>
      <span title="scala.tools.nsc.interpreter.Completion" class="keyword">if</span> <span class="delimiter">(</span><a href="#740685" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469723" title="=&gt; settings.BooleanSetting">noCompletion</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; settings.noCompletion.T">value</a><span class="delimiter">)</span> <a href="Completion.scala.html#31249" title="object scala.tools.nsc.interpreter.NoCompletion">NoCompletion</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.interpreter.JLineCompletion" class="keyword">new</span> <a href="JLineCompletion.scala.html#31548" title="scala.tools.nsc.interpreter.JLineCompletion">JLineCompletion</a><span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="scala.tools.nsc.interpreter.SimpleReader" id="740768">ex</a> @ <span class="delimiter">(</span>_: <span title="Exception">Exception</span> | _: <span title="java.lang.NoClassDefFoundError">NoClassDefFoundError</span><span class="delimiter">)</span> =&gt;
        <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Failed to created JLineReader: &quot;)" class="string">&quot;Failed to created JLineReader: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#740768" title="java.lang.Throwable">ex</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Falling back to SimpleReader.&quot;)" class="string">&quot;\nFalling back to SimpleReader.&quot;</span><span class="delimiter">)</span>
        <a href="SimpleReader.scala.html#739901" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)Boolean" id="523397">process</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="525586">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="#32364" title="ILoop.this.type" class="keyword">this</a>.<a href="#523310" title="(x$1: scala.tools.nsc.Settings)Unit">settings</a> = <a href="#525586" title="scala.tools.nsc.Settings">settings</a>
    <a href="#523336" title="()Unit">createInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="comment">// sets in to some kind of reader depending on environmental cues</span>
    <a href="#523307" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <a href="#523461" title="Option[java.io.BufferedReader]">in0</a> <span title="scala.tools.nsc.interpreter.InteractiveReader" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scala.tools.nsc.interpreter.SimpleReader">Some</span><span class="delimiter">(</span><a title="java.io.BufferedReader" id="740770">reader</a><span class="delimiter">)</span> =&gt; <a href="SimpleReader.scala.html#739901" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><a href="#740770" title="java.io.BufferedReader">reader</a>, <a href="#523462" title="=&gt; scala.tools.nsc.interpreter.package.JPrintWriter">out</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../../Option.scala.html#1737" title="scala.tools.nsc.interpreter.InteractiveReader">None</a>         =&gt;
        <span class="comment">// some post-initialization</span>
        <a href="#523396" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.interpreter.InteractiveReader">chooseReader</a><span class="delimiter">(</span><a href="#525586" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span> <span title="scala.tools.nsc.interpreter.InteractiveReader" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="scala.tools.nsc.interpreter.JLineReader" id="740771">x</a>: <a href="JLineReader.scala.html#31572" title="scala.tools.nsc.interpreter.JLineReader">JLineReader</a> =&gt; <a href="ILoopInit.scala.html#523451" title="(body: =&gt; Unit)Unit">addThunk</a><span class="delimiter">(</span><a href="#740771" title="scala.tools.nsc.interpreter.JLineReader">x</a>.<a href="JLineReader.scala.html#740698" title="=&gt; x.JLineConsoleReader">consoleReader</a>.<a href="JLineReader.scala.html#740848" title="=&gt; Unit">postInit</a><span class="delimiter">)</span> ; <a href="#740771" title="scala.tools.nsc.interpreter.JLineReader">x</a>
          <span class="keyword">case</span> <a title="scala.tools.nsc.interpreter.InteractiveReader" id="740850">x</a>              =&gt; <a href="#740850" title="scala.tools.nsc.interpreter.InteractiveReader">x</a>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#523395" title="(settings: scala.tools.nsc.Settings)Unit">loadFiles</a><span class="delimiter">(</span><a href="#525586" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span class="comment">// it is broken on startup; go ahead and exit</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#522994" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#479335" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>

    <span class="comment">// This is about the illusion of snappiness.  We call initialize()</span>
    <span class="comment">// which spins off a separate thread, then print the prompt and try</span>
    <span class="comment">// our best to look ready.  The interlocking lazy vals tend to</span>
    <span class="comment">// inter-deadlock, so we break the cycle with a single asynchronous</span>
    <span class="comment">// message to an actor.</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#523316" title="=&gt; Boolean">isAsync</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#523017" title="(postInitSignal: =&gt; Unit)Unit">initialize</a> <a href="ILoopInit.scala.html#523443" title="()Unit">initializedCallback</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="ILoopInit.scala.html#523444" title="()java.util.concurrent.Future[Unit]">createAsyncListener</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// listens for signal to run postInitialization</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#523018" title="()Unit">initializeSynchronous</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="ILoopInit.scala.html#523447" title="()Unit">postInitialization</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="ILoopInit.scala.html#523425" title="()Unit">printWelcome</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a title="Nothing" id="740900" class="keyword">try</a> <a href="#523377" title="()Unit">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <a href="AbstractOrMissingHandler.scala.html#729180" title="()scala.tools.nsc.interpreter.AbstractOrMissingHandler[Nothing]">AbstractOrMissingHandler</a><a href="AbstractOrMissingHandler.scala.html#729006" title="scala.tools.nsc.interpreter.AbstractOrMissingHandler[Nothing]" id="740901" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#523334" title="()Unit">closeInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="comment">/** process command-line arguments and do as they request */</span>
  <span class="keyword">def</span> <a title="(args: Array[String])Boolean" id="523398">process</a><span class="delimiter">(</span><a title="Array[String]" id="525584">args</a>: <a href="../../../Array.scala.html#1430" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#65" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.CommandLine" id="740905">command</a> = <span title="scala.tools.nsc.interpreter.CommandLine" class="keyword">new</span> <a href="CommandLine.scala.html#31419" title="scala.tools.nsc.interpreter.CommandLine">CommandLine</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#9626" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[String]">toList</a>, <a title="String" id="741028">msg</a> =&gt; <a href="#523345" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;scala: &quot;)" class="string">&quot;scala: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#741028" title="String">msg</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()String" id="740906">neededHelp</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> =
      <span class="delimiter">(</span><span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#740905" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#481235" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#469848" title="=&gt; command.settings.BooleanSetting">help</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; command.settings.help.T">value</a><span class="delimiter">)</span> <a href="#740905" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#481252" title="=&gt; String">usageMsg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
      <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#740905" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#481235" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469637" title="=&gt; command.settings.BooleanSetting">Xhelp</a>.<a href="../settings/MutableSettings.scala.html#470030" title="=&gt; command.settings.Xhelp.T">value</a><span class="delimiter">)</span> <a href="#740905" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#481253" title="=&gt; String">xusageMsg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

    <span class="comment">// if they asked for no help and command is valid, we call the real main</span>
    <a href="#740906" title="()String">neededHelp</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Boolean" class="string">&quot;&quot;</span>     =&gt; <a href="#740905" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#481244" title="=&gt; Boolean">ok</a> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#523397" title="(settings: scala.tools.nsc.Settings)Boolean">process</a><span class="delimiter">(</span><a href="#740905" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#481235" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Boolean" id="741035">help</a>   =&gt; <a href="#523346" title="(msg: String)Unit">echoNoNL</a><span class="delimiter">(</span><a href="#741035" title="String">help</a><span class="delimiter">)</span> ; <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `process` instead&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="523399">main</a><span class="delimiter">(</span><a title="Array[String]" id="525686">args</a>: <a href="../../../Array.scala.html#1430" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#48210" title="=&gt; Boolean">isReplDebug</a><span class="delimiter">)</span>
      <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: Any)Unit">println</span><span class="delimiter">(</span><span title="java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">)</span>

    <a href="#523398" title="(args: Array[String])Boolean">process</a><span title="Unit" class="delimiter">(</span><a href="#525686" title="Array[String]">args</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `process` instead&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)Unit" id="523400">main</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="525684">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <a href="#523397" title="(settings: scala.tools.nsc.Settings)Boolean">process</a><span title="Unit" class="delimiter">(</span><a href="#525684" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scala.tools.nsc.interpreter.ILoop" id="32365">ILoop</a> <a href="../../../ScalaObject.scala.html#464" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.interpreter.ILoop.loopToInterpreter : (repl: scala.tools.nsc.interpreter.ILoop)scala.tools.nsc.interpreter.IMain" id="735763">loopToInterpreter</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.ILoop" id="735778">repl</a>: <a href="#32364" title="scala.tools.nsc.interpreter.ILoop">ILoop</a><span class="delimiter">)</span>: <a href="IMain.scala.html#31896" title="scala.tools.nsc.interpreter.IMain">IMain</a> = <a href="#735778" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523313" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="735764">echo</a><span class="delimiter">(</span><a title="String" id="741056">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../../../Console.scala.html#507" title="object Console">Console</a> <a href="../../../Console.scala.html#58055" title="(x: Any)Unit">println</a> <a href="#741056" title="String">msg</a>

  <span class="comment">// Designed primarily for use by test code: take a String with a</span>
  <span class="comment">// bunch of code, and prints out a transcript of what it would look</span>
  <span class="comment">// like if you'd just typed it into the repl.</span>
  <span class="keyword">def</span> <a title="(code: String, settings: scala.tools.nsc.Settings)String" id="735765">runForTranscript</a><span class="delimiter">(</span><a title="String" id="741061">code</a>: <span title="String">String</span>, <a title="scala.tools.nsc.Settings" id="741062">settings</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> java.io.<span class="delimiter">{</span> BufferedReader, StringReader, OutputStreamWriter <span class="delimiter">}</span>

    <a href="../util/package.scala.html#48303" title="(stream: java.io.OutputStream =&gt; Unit)String">stringFromStream</a> <span class="delimiter">{</span> <a title="java.io.OutputStream" id="741068">ostream</a> =&gt;
      <a href="../../../Console.scala.html#507" title="object Console">Console</a>.<a href="../../../Console.scala.html#58033" title="(out: java.io.OutputStream)(thunk: =&gt; Boolean)Boolean">withOut</a><span class="delimiter">(</span><a href="#741068" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.PrintWriter" id="741092">output</a> = <a href="#741095" title="java.io.PrintWriter" class="keyword">new</a> <a href="package.scala.html#48220" title="anonymous class $anon extends java.io.PrintWriter" id="741095">JPrintWriter</a><span class="delimiter">(</span><span title="(x$1: java.io.OutputStream)java.io.OutputStreamWriter" class="keyword">new</span> <span title="java.io.OutputStreamWriter">OutputStreamWriter</span><span class="delimiter">(</span><a href="#741068" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(str: String)Unit" id="741097">write</a><span class="delimiter">(</span><a title="String" id="741099">str</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <span class="comment">// completely skip continuation lines</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">str</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#55929" title="(p: Char =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="Char" id="741376">ch</a> =&gt; <a href="../../../LowPriorityImplicits.scala.html#9475" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">ch</a>.<a href="../../../runtime/RichChar.scala.html#54859" title="=&gt; Boolean">isWhitespace</a> <a href="../../../Boolean.scala.html#55579" title="(x: Boolean)Boolean">||</a> <a href="#741376" title="Char">ch</a> <a href="../../../Char.scala.html#54902" title="(x: Char)Boolean">==</a> <span title="Char(\'|\')" class="char">'|'</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
            <span class="comment">// print a newline on empty scala prompts</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">str</a> <a href="../../../collection/SeqLike.scala.html#54119" title="(elem: Any)Boolean">contains</a> <span title="Char(\'\\n\')" class="char">'\n'</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#55580" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#741099" title="String">str</a>.<span title="()java.lang.String">trim</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;scala&gt; &quot;)" class="string">&quot;scala&gt; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#741095" title="java.io.PrintWriter" class="keyword">super</a>.<span title="(x$1: java.lang.String)Unit">write</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="#741095" title="java.io.PrintWriter" class="keyword">super</a>.<span title="(x$1: java.lang.String)Unit">write</span><span class="delimiter">(</span><a href="#741099" title="String">str</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="java.io.BufferedReader" id="741093">input</a> = <a href="#741436" title="java.io.BufferedReader" class="keyword">new</a> <a title="anonymous class $anon extends java.io.BufferedReader" id="741436">BufferedReader</a><span class="delimiter">(</span><span title="java.io.StringReader" class="keyword">new</span> <span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#741061" title="String">code</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="741438">readLine</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="java.lang.String" id="741446">s</a> = <a href="#741436" title="java.io.BufferedReader" class="keyword">super</a>.<span title="()java.lang.String">readLine</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="comment">// helping out by printing the line being interpreted.</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#741446" title="java.lang.String">s</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
              <a href="#741092" title="java.io.PrintWriter">output</a>.<span title="(x$1: java.lang.String)Unit">println</span><span class="delimiter">(</span><a href="#741446" title="java.lang.String">s</a><span class="delimiter">)</span>
            <a href="#741446" title="java.lang.String">s</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.ILoop" id="741094">repl</a> = <a href="#523304" title="(in0: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter)scala.tools.nsc.interpreter.ILoop" class="keyword">new</a> <a href="#32364" title="scala.tools.nsc.interpreter.ILoop">ILoop</a><span class="delimiter">(</span><a href="#741093" title="java.io.BufferedReader">input</a>, <a href="#741092" title="java.io.PrintWriter">output</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#741062" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469629" title="=&gt; settings.PathSetting">classpath</a>.<a href="../settings/MutableSettings.scala.html#470029" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span>
          <a href="#741062" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#469629" title="=&gt; settings.PathSetting">classpath</a>.<a href="../settings/MutableSettings.scala.html#470031" title="(arg: settings.classpath.T)Unit">value</a> = sys.<a href="../../../collection/MapLike.scala.html#73204" title="(key: String)String">props</a><span class="delimiter">(</span><span title="java.lang.String(&quot;java.class.path&quot;)" class="string">&quot;java.class.path&quot;</span><span class="delimiter">)</span>

        <a href="#741094" title="scala.tools.nsc.interpreter.ILoop">repl</a> <a href="#523397" title="(settings: scala.tools.nsc.Settings)Boolean">process</a> <a href="#741062" title="scala.tools.nsc.Settings">settings</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Creates an interpreter loop with default settings and feeds
   *  the given code to it as input.
   */</span>
  <span class="keyword">def</span> <a title="(code: String, sets: scala.tools.nsc.Settings)String" id="735766">run</a><span class="delimiter">(</span><a title="String" id="741492">code</a>: <span title="String">String</span>, <a title="scala.tools.nsc.Settings" id="741495">sets</a>: <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a> = <a href="../Settings.scala.html#469589" title="()scala.tools.nsc.Settings" class="keyword">new</a> <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> java.io.<span class="delimiter">{</span> BufferedReader, StringReader, OutputStreamWriter <span class="delimiter">}</span>

    <a href="../util/package.scala.html#48303" title="(stream: java.io.OutputStream =&gt; Unit)String">stringFromStream</a> <span class="delimiter">{</span> <a title="java.io.OutputStream" id="741504">ostream</a> =&gt;
      <a href="../../../Console.scala.html#507" title="object Console">Console</a>.<a href="../../../Console.scala.html#58033" title="(out: java.io.OutputStream)(thunk: =&gt; Boolean)Boolean">withOut</a><span class="delimiter">(</span><a href="#741504" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.BufferedReader" id="741528">input</a>    = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="java.io.StringReader" class="keyword">new</span> <span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#741492" title="String">code</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.PrintWriter" id="741529">output</a>   = <span title="(x$1: java.io.Writer, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <a href="package.scala.html#48220" title="java.io.PrintWriter">JPrintWriter</a><span class="delimiter">(</span><span title="(x$1: java.io.OutputStream)java.io.OutputStreamWriter" class="keyword">new</span> <span title="java.io.OutputStreamWriter">OutputStreamWriter</span><span class="delimiter">(</span><a href="#741504" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.ILoop" id="741530">repl</a>     = <a href="#523304" title="(in0: java.io.BufferedReader, out: scala.tools.nsc.interpreter.package.JPrintWriter)scala.tools.nsc.interpreter.ILoop" class="keyword">new</a> <a href="#32364" title="scala.tools.nsc.interpreter.ILoop">ILoop</a><span class="delimiter">(</span><a href="#741528" title="java.io.BufferedReader">input</a>, <a href="#741529" title="java.io.PrintWriter">output</a><span class="delimiter">)</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#741495" title="scala.tools.nsc.Settings">sets</a>.<a href="../settings/ScalaSettings.scala.html#469629" title="=&gt; sets.PathSetting">classpath</a>.<a href="../settings/MutableSettings.scala.html#470029" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span>
          <a href="#741495" title="scala.tools.nsc.Settings">sets</a>.<a href="../settings/ScalaSettings.scala.html#469629" title="=&gt; sets.PathSetting">classpath</a>.<a href="../settings/MutableSettings.scala.html#470031" title="(arg: sets.classpath.T)Unit">value</a> = sys.<a href="../../../collection/MapLike.scala.html#73204" title="(key: String)String">props</a><span class="delimiter">(</span><span title="java.lang.String(&quot;java.class.path&quot;)" class="string">&quot;java.class.path&quot;</span><span class="delimiter">)</span>

        <a href="#741530" title="scala.tools.nsc.interpreter.ILoop">repl</a> <a href="#523397" title="(settings: scala.tools.nsc.Settings)Boolean">process</a> <a href="#741495" title="scala.tools.nsc.Settings">sets</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(lines: List[String])String" id="735767">run</a><span class="delimiter">(</span><a title="List[String]" id="741567">lines</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#735766" title="(code: String, sets: scala.tools.nsc.Settings)String">run</a><span class="delimiter">(</span><a href="#741567" title="List[String]">lines</a> <a href="../../../collection/TraversableLike.scala.html#49041" title="(f: String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</a> <span class="delimiter">(</span><a href="#741591" title="String">_</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#53710" title="=&gt; String">mkString</a><span class="delimiter">)</span>

  <span class="comment">// provide the enclosing type T</span>
  <span class="comment">// in order to set up the interpreter's classpath and parent class loader properly</span>
  <span class="keyword">def</span> <a title="[T](assertion: =&gt; Boolean, args: scala.tools.nsc.interpreter.NamedParam*)(implicit evidence$1: Manifest[T])Unit" id="741626">breakIf</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="735770">T</a>: Manifest<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; Boolean" id="741624">assertion</a>: =&gt; Boolean, <a title="scala.tools.nsc.interpreter.NamedParam*" id="741625">args</a>: <span title="scala.tools.nsc.interpreter.NamedParam*">NamedParam</span>*<span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#741624" title="=&gt; Boolean">assertion</a><span class="delimiter">)</span> <a href="#741630" title="[T](args: List[scala.tools.nsc.interpreter.NamedParam])(implicit evidence$2: Manifest[T])Unit">break</a><span title="(args: List[scala.tools.nsc.interpreter.NamedParam])(implicit evidence$2: Manifest[T])Unit" class="delimiter">[</span><a href="#735770" title="T">T</a><span class="delimiter">]</span><a href="#741626" title="Manifest[T]" class="delimiter">(</a><a href="#741625" title="scala.tools.nsc.interpreter.NamedParam*">args</a>.<a href="../../../collection/TraversableOnce.scala.html#53691" title="=&gt; List[scala.tools.nsc.interpreter.NamedParam]">toList</a><span class="delimiter">)</span>

  <span class="comment">// start a repl, binding supplied args</span>
  <span class="keyword">def</span> <a title="[T](args: List[scala.tools.nsc.interpreter.NamedParam])(implicit evidence$2: Manifest[T])Unit" id="741630">break</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="735773">T</a>: Manifest<span class="delimiter">]</span><span class="delimiter">(</span><a title="List[scala.tools.nsc.interpreter.NamedParam]" id="741629">args</a>: <a href="../../../collection/immutable/List.scala.html#14047" title="List[scala.tools.nsc.interpreter.NamedParam]">List</a><span class="delimiter">[</span>NamedParam<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#461" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="741634">msg</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#741629" title="List[scala.tools.nsc.interpreter.NamedParam]">args</a>.<a href="../../../collection/IterableLike.scala.html#53862" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;  Binding &quot;)" class="string">&quot;  Binding &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#741629" title="List[scala.tools.nsc.interpreter.NamedParam]">args</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../../Predef.scala.html#9682" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; value%s.&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#56577" title="(args: Any*)String">format</a><span class="delimiter">(</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#741629" title="List[scala.tools.nsc.interpreter.NamedParam]">args</a>.<a href="../../../collection/SeqLike.scala.html#54060" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#54747" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;s&quot;)" class="string">&quot;s&quot;</span>
    <span class="delimiter">)</span>
    <a href="#735764" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Debug repl starting.&quot;)" class="string">&quot;Debug repl starting.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#741634" title="java.lang.String">msg</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.ILoop" id="741635">repl</a> = <a href="#741644" title="scala.tools.nsc.interpreter.ILoop" class="keyword">new</a> <a href="#32364" title="anonymous class $anon extends scala.tools.nsc.interpreter.ILoop" id="741644">ILoop</a> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="741646">prompt</a> = <span title="java.lang.String(&quot;\012debug&gt; &quot;)" class="string">&quot;\ndebug&gt; &quot;</span>
    <span class="delimiter">}</span>
    <a href="#741635" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523310" title="(x$1: scala.tools.nsc.Settings)Unit">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../Settings.scala.html#22887" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#735764" title="(msg: String)Unit">echo</a><span class="delimiter">)</span>
    <a href="#741635" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523310" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/MutableSettings.scala.html#469554" title="[T](implicit evidence$1: Manifest[T])Unit">embeddedDefaults</a><a href="#741630" title="(implicit evidence$1: Manifest[T])Unit" class="delimiter">[</a><a href="#735773" title="T">T</a><span class="delimiter">]</span>
    <a href="#741635" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523336" title="()Unit">createInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#741635" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523307" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <span title="scala.tools.nsc.interpreter.JLineReader" class="keyword">new</span> <a href="JLineReader.scala.html#31572" title="scala.tools.nsc.interpreter.JLineReader">JLineReader</a><span class="delimiter">(</span><span title="scala.tools.nsc.interpreter.JLineCompletion" class="keyword">new</span> <a href="JLineCompletion.scala.html#31548" title="scala.tools.nsc.interpreter.JLineCompletion">JLineCompletion</a><span class="delimiter">(</span><a href="#735763" title="implicit scala.tools.nsc.interpreter.ILoop.loopToInterpreter : (repl: scala.tools.nsc.interpreter.ILoop)scala.tools.nsc.interpreter.IMain">repl</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// rebind exit so people don't accidentally call sys.exit by way of predef</span>
    <a href="#735763" title="implicit scala.tools.nsc.interpreter.ILoop.loopToInterpreter : (repl: scala.tools.nsc.interpreter.ILoop)scala.tools.nsc.interpreter.IMain">repl</a>.<a href="IMain.scala.html#523044" title="(code: String)scala.tools.nsc.interpreter.package.IR.Result">quietRun</a><span class="delimiter">(</span><span title="java.lang.String(&quot;def exit = println(\&quot;Type :quit to resume program execution.\&quot;)&quot;)" class="string">&quot;&quot;&quot;def exit = println(&quot;Type :quit to resume program execution.&quot;)&quot;&quot;&quot;</span><span class="delimiter">)</span>
    <a href="#741629" title="List[scala.tools.nsc.interpreter.NamedParam]">args</a> <a href="../../../collection/LinearSeqOptimized.scala.html#71032" title="(f: scala.tools.nsc.interpreter.NamedParam =&gt; scala.tools.nsc.interpreter.package.IR.Result)Unit">foreach</a> <span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.NamedParam" id="741703">p</a> =&gt; <a href="#735763" title="implicit scala.tools.nsc.interpreter.ILoop.loopToInterpreter : (repl: scala.tools.nsc.interpreter.ILoop)scala.tools.nsc.interpreter.IMain">repl</a>.<a href="IMain.scala.html#523102" title="(name: String, boundType: String, value: Any)scala.tools.nsc.interpreter.package.IR.Result">bind</a><span class="delimiter">(</span><a href="#741703" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733295" title="=&gt; String">name</a>, <a href="#741703" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733296" title="=&gt; String">tpe</a>, <a href="#741703" title="scala.tools.nsc.interpreter.NamedParam">p</a>.<a href="NamedParam.scala.html#733297" title="=&gt; Any">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#741635" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523377" title="()Unit">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#735764" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012Debug repl exiting.&quot;)" class="string">&quot;\nDebug repl exiting.&quot;</span><span class="delimiter">)</span>
    <a href="#741635" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#523334" title="()Unit">closeInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>