<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalatest/tools/StringReporter.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2001-2008 Artima, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>
<span class="keyword">package</span> org.scalatest.tools

<span class="keyword">import</span> org.scalatest._
<span class="keyword">import</span> java.io.BufferedOutputStream
<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.io.FileOutputStream
<span class="keyword">import</span> java.io.IOException
<span class="keyword">import</span> java.io.OutputStream
<span class="keyword">import</span> java.io.OutputStreamWriter
<span class="keyword">import</span> java.io.PrintWriter
<span class="keyword">import</span> java.util.Iterator
<span class="keyword">import</span> java.util.Set
<span class="keyword">import</span> java.io.StringWriter
<span class="keyword">import</span> org.scalatest.events._
<span class="keyword">import</span> <a href="PrintReporter.scala.html#14143" title="object org.scalatest.tools.PrintReporter">PrintReporter</a>._
<span class="keyword">import</span> org.scalatest.junit.JUnitTestFailedError
<span class="keyword">import</span> org.scalatest.prop.PropertyCheckFailedException
<span class="keyword">import</span> org.scalatest.prop.TableDrivenPropertyCheckFailedException
<span class="keyword">import</span> <a href="../Suite.scala.html#10074" title="object org.scalatest.Suite">Suite</a>.indentation

<span class="comment">/**
 * A &lt;code&gt;Reporter&lt;/code&gt; that prints test status information to
 * a &lt;code&gt;Writer&lt;/code&gt;, &lt;code&gt;OutputStream&lt;/code&gt;, or file.
 *
 * @author Bill Venners
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class StringReporter extends java.lang.Object with org.scalatest.ResourcefulReporter with ScalaObject" id="14097">StringReporter</a><a href="#14097" title="ScalaObject" class="delimiter">(</a><a title="Boolean" id="134715">presentAllDurations</a>: <span title="Boolean">Boolean</span>,
        <a title="Boolean" id="134716">presentInColor</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="134717">presentShortStackTraces</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="134718">presentFullStackTraces</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../ResourcefulReporter.scala.html#10202" title="org.scalatest.ResourcefulReporter">ResourcefulReporter</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(stringToPrint: String, throwable: Option[Throwable])String" id="49005">withPossibleLineNumber</a><span class="delimiter">(</span><a title="String" id="157079">stringToPrint</a>: <span title="String">String</span>, <a title="Option[Throwable]" id="157080">throwable</a>: <span title="Option[Throwable]">Option</span><span class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#157080" title="Option[Throwable]">throwable</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="&lt;none&gt; extends java.lang.Throwable with org.scalatest.StackDepth" id="157083">stackDepth</a>: <a href="../StackDepth.scala.html#9683" title="org.scalatest.StackDepth">StackDepth</a><span class="delimiter">)</span> =&gt;
        <a href="#157083" title="&lt;none&gt; extends java.lang.Throwable with org.scalatest.StackDepth">stackDepth</a>.<a href="../StackDepth.scala.html#27448" title="=&gt; Option[String]">failedCodeFileNameAndLineNumberString</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="String" id="157086">lineNumberString</a><span class="delimiter">)</span> =&gt;
            <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;printedReportPlusLineNumber&quot;)" class="string">&quot;printedReportPlusLineNumber&quot;</span>, <a href="#157079" title="String">stringToPrint</a>, <a href="#157086" title="String">lineNumberString</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="String">None</span> =&gt; <a href="#157079" title="String">stringToPrint</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#157079" title="String">stringToPrint</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(text: String, ansiColor: String)Unit" id="49006">printPossiblyInColor</a><span class="delimiter">(</span><a title="String" id="134891">text</a>: <span title="String">String</span>, <a title="String" id="134892">ansiColor</a>: <span title="String">String</span><span class="delimiter">)</span>

<span class="comment">/*
I either want to print the full stack trace, like this:

[scalatest] TEST FAILED - JUnitTestCaseSuite: testSomething(org.scalatestexamples.junit.JUnitTestCaseSuite) (JUnitTestCaseSuite.scala:22)
[scalatest]   hi there
[scalatest]   org.scalatest.junit.JUnitTestFailedError: hi there
[scalatest]   at org.scalatest.junit.AssertionsForJUnit$class.newAssertionFailedException(AssertionsForJUnit.scala:101)
[scalatest]   at org.scalatest.junit.JUnit3Suite.newAssertionFailedException(JUnit3Suite.scala:140)
[scalatest]   at org.scalatest.Assertions$class.fail(Assertions.scala:601)
[scalatest]   at org.scalatest.junit.JUnit3Suite.fail(JUnit3Suite.scala:140)
[scalatest]   at org.scalatestexamples.junit.JUnitTestCaseSuite.testSomething(JUnitTestCaseSuite.scala:22)
[scalatest]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[scalatest]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[scalatest]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[scalatest]   at java.lang.reflect.Method.invoke(Method.java:585)
[scalatest]   at junit.framework.TestCase.runTest(TestCase.java:168)
[scalatest]   at junit.framework.TestCase.runBare(TestCase.java:134)
[scalatest]   at junit.framework.TestResult$1.protect(TestResult.java:110)
[scalatest]   at junit.framework.TestResult.runProtected(TestResult.java:128)
[scalatest]   at junit.framework.TestResult.run(TestResult.java:113)
[scalatest]   at junit.framework.TestCase.run(TestCase.java:124)
[scalatest]   at junit.framework.TestSuite.runTest(TestSuite.java:232)
[scalatest]   at junit.framework.TestSuite.run(TestSuite.java:227)
[scalatest]   at junit.framework.TestSuite.runTest(TestSuite.java:232)
[scalatest]   at junit.framework.TestSuite.run(TestSuite.java:227)
[scalatest]   at org.scalatest.junit.JUnit3Suite.run(JUnit3Suite.scala:151)
[scalatest]   at org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:59)
[scalatest]   at org.scalatest.tools.Runner$$anonfun$doRunRunRunADoRunRun$2.apply(Runner.scala:1430)
[scalatest]   at org.scalatest.tools.Runner$$anonfun$doRunRunRunADoRunRun$2.apply(Runner.scala:1427)
[scalatest]   at scala.List.foreach(List.scala:834)
[scalatest]   at org.scalatest.tools.Runner$.doRunRunRunADoRunRun(Runner.scala:1427)
[scalatest]   at org.scalatest.tools.RunnerJFrame$RunnerThread$$anonfun$run$1.apply(RunnerJFrame.scala:1352)
[scalatest]   at org.scalatest.tools.RunnerJFrame$RunnerThread$$anonfun$run$1.apply(RunnerJFrame.scala:1350)
[scalatest]   at org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:1471)
[scalatest]   at org.scalatest.tools.RunnerJFrame$RunnerThread.run(RunnerJFrame.scala:1349)

Or show a truncated one like this:

[scalatest] TEST FAILED - JUnitTestCaseSuite: testSomething(org.scalatestexamples.junit.JUnitTestCaseSuite) (JUnitTestCaseSuite.scala:22)
[scalatest]   hi there
[scalatest] org.scalatest.junit.JUnitTestFailedError: hi there
[scalatest]   ...
[scalatest]   at org.scalatestexamples.junit.JUnitTestCaseSuite.testSomething(JUnitTestCaseSuite.scala:22)
[scalatest]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[scalatest]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[scalatest]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[scalatest]   at java.lang.reflect.Method.invoke(Method.java:585)
[scalatest]   at junit.framework.TestCase.runTest(TestCase.java:168)
[scalatest]   at junit.framework.TestCase.runBare(TestCase.java:134)
[scalatest]   ...

If F is specified for the reporter, then show the full stack trace (or if it is not a StackDepth). But
if a StackDepth and no F specified, then show the truncated form.

Now want to change from:
- should do something interesting *** FAILED *** (&lt;console&gt;:18) (0 milliseconds)
  org.scalatest.TestFailedException: 2 did not equal 3

To:

- should do something interesting *** FAILED *** (0 milliseconds)
  2 did not equal 3 (&lt;console&gt;:18)
  org.scalatest.TestFailedException: 

The second line would only be printed out if there was an exception. That way
when I add noStacks option, I get:

- should do something interesting *** FAILED *** (0 milliseconds)
  2 did not equal 3 (&lt;console&gt;:18)

Or for a prop check get:

- should do something interesting *** FAILED *** (0 milliseconds)
  Property check failed. (InfoInsideTestFiredAfterTestProp.scala:24)
  Message: 2 was not less than 1
  Location: InfoInsideTestFiredAfterTestProp.scala:27
  Occurred at table row 0 (zero based, not counting headings), which had values ( / This shouldb e had value without the s
    suite = org.scalatest.InfoInsideTestFiredAfterTestProp$$anon$3@18a4edc4
  )

Easiest thing is if the exception message just printed this out. Then StringReporter would just print the message always,
and not print it after the outermost exception
org.scalatest.prop.TableDrivenPropertyCheckFailedException:
...

And does print it out after the subsequent ones:
org.scalatest.TestFailedException: 2 did not equal 3

And it would not need to put the line number there. It would already be in the message. It would use the message sent with
the event. Message should just be the throwable's message, or &quot;&lt;exception class&gt; was thrown&quot; Then it is easy. Always
use the message from the event.

org.scalatest.prop.TableDrivenPropertyCheckFailedException: TestFailedException (included as this exception's cause) was thrown during property evaluation.
[scalatest]   Message: 
[scalatest]   Location: InfoInsideTestFiredAfterTestProp.scala:27
[scalatest]   Occurred at table row 0 (zero based, not counting headings), which had values (
[scalatest]     suite = org.scalatest.InfoInsideTestFiredAfterTestProp$$anon$3@18a4edc4
[scalatest]   )

 */</span>
  <span class="comment">// Called for TestFailed, InfoProvided (because it can have a throwable in it), SuiteAborted, and RunAborted</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(noteResourceName: String, errorResourceName: String, message: String, throwable: Option[Throwable], formatter: Option[org.scalatest.events.Formatter], suiteName: Option[String], testName: Option[String], duration: Option[Long])List[String]" id="49007">stringsToPrintOnError</a><span class="delimiter">(</span><a title="String" id="157094">noteResourceName</a>: <span title="String">String</span>, <a title="String" id="157095">errorResourceName</a>: <span title="String">String</span>, <a title="String" id="157096">message</a>: <span title="String">String</span>, <a title="Option[Throwable]" id="157097">throwable</a>: <span title="Option[Throwable]">Option</span><span class="delimiter">[</span>Throwable<span class="delimiter">]</span>,
    <a title="Option[org.scalatest.events.Formatter]" id="157098">formatter</a>: <span title="Option[org.scalatest.events.Formatter]">Option</span><span class="delimiter">[</span>Formatter<span class="delimiter">]</span>, <a title="Option[String]" id="157099">suiteName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Option[String]" id="157100">testName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Option[Long]" id="157101">duration</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="String" id="157103">stringToPrint</a> =
      <a href="#157098" title="Option[org.scalatest.events.Formatter]">formatter</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span>IndentedText<span class="delimiter">(</span><a title="String" id="157110">formattedText</a>, _, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;specTextAndNote&quot;)" class="string">&quot;specTextAndNote&quot;</span>, <a href="#157110" title="String">formattedText</a>, <a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><a href="#157094" title="String">noteResourceName</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">_</span> =&gt;
          <span class="comment">// Deny MotionToSuppress directives in error events, because error info needs to be seen by users</span>
          <a href="#157099" title="Option[String]">suiteName</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="String" id="157126">sn</a><span class="delimiter">)</span> =&gt;
              <a href="#157100" title="Option[String]">testName</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="String" id="157128">tn</a><span class="delimiter">)</span> =&gt; <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><a href="#157095" title="String">errorResourceName</a>, <a href="#157126" title="String">sn</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157128" title="String">tn</a><span class="delimiter">)</span>
                <span class="keyword">case</span> <span title="String">None</span> =&gt; <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><a href="#157095" title="String">errorResourceName</a>, <a href="#157126" title="String">sn</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="comment">// Should not get here with built-in ScalaTest stuff, but custom stuff could get here.</span>
            <span class="keyword">case</span> <span title="String">None</span> =&gt; <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><a href="#157095" title="String">errorResourceName</a>, <a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;noNameSpecified&quot;)" class="string">&quot;noNameSpecified&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="String" id="157104">stringToPrintWithPossibleDuration</a> =
      <a href="#157101" title="Option[Long]">duration</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="Long" id="157156">milliseconds</a><span class="delimiter">)</span> =&gt;
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#134715" title="Boolean">presentAllDurations</a><span class="delimiter">)</span>
            <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;withDuration&quot;)" class="string">&quot;withDuration&quot;</span>, <a href="#157103" title="String">stringToPrint</a>, <a href="PrintReporter.scala.html#48995" title="(duration: Long)String">makeDurationString</a><span class="delimiter">(</span><a href="#157156" title="Long">milliseconds</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#157103" title="String">stringToPrint</a>
        <span class="keyword">case</span> <span title="String">None</span> =&gt; <a href="#157103" title="String">stringToPrint</a>
      <span class="delimiter">}</span>

    <span class="comment">// If there's a message, put it on the next line, indented two spaces</span>
    <span class="keyword">val</span> <a title="String" id="157105">possiblyEmptyMessage</a> = <a href="../Reporter.scala.html#10104" title="object org.scalatest.Reporter">Reporter</a>.<a href="../Reporter.scala.html#31302" title="(message: String, throwable: Option[Throwable])String">messageOrThrowablesDetailMessage</a><span class="delimiter">(</span><a href="#157096" title="String">message</a>, <a href="#157097" title="Option[Throwable]">throwable</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="String" id="157106">possiblyEmptyMessageWithPossibleLineNumber</a> =
      <a href="#157097" title="Option[Throwable]">throwable</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="org.scalatest.prop.PropertyCheckFailedException" id="157164">e</a>: <a href="../prop/PropertyCheckFailedException.scala.html#12992" title="org.scalatest.prop.PropertyCheckFailedException">PropertyCheckFailedException</a><span class="delimiter">)</span> =&gt; <a href="#157105" title="String">possiblyEmptyMessage</a> <span class="comment">// PCFEs already include the line number</span>
        <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="&lt;none&gt; extends java.lang.Throwable with org.scalatest.StackDepth" id="157166">e</a>: <a href="../StackDepth.scala.html#9683" title="org.scalatest.StackDepth">StackDepth</a><span class="delimiter">)</span> =&gt; <a href="#49005" title="(stringToPrint: String, throwable: Option[Throwable])String">withPossibleLineNumber</a><span class="delimiter">(</span><a href="#157105" title="String">possiblyEmptyMessage</a>, <a href="#157097" title="Option[Throwable]">throwable</a><span class="delimiter">)</span> <span class="comment">// Show it in the stack depth case</span>
        <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">_</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="comment">// Don't show it in the non-stack depth case. It will be shown after the exception class name and colon.</span>
      <span class="delimiter">}</span>

    <span class="comment">// The whiteSpace is just used for printing out stack traces, etc., things that go after a test name. The formatted</span>
    <span class="comment">// text for test names actually goes over to the left once in a sense, to make room for the icon. So if the indentation</span>
    <span class="comment">// level is 3 for example, the &quot;- &quot; for that test's formatted text is really indented 2 times (or four spaces: &quot;    &quot;)</span>
    <span class="comment">// So that's why normally the indentation level times two spaces should be the white space. But at the top level (indentation</span>
    <span class="comment">// level of 0), the icon also has to go at 0 (because subtracting one would put it at -1), so in that case the white space</span>
    <span class="comment">// should be two spaces (or 1 level of indentation).</span>
    <span class="keyword">val</span> <a title="String" id="157107">whiteSpace</a> =
      <a href="#157098" title="Option[org.scalatest.events.Formatter]">formatter</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span>IndentedText<span class="delimiter">(</span>_, _, <a title="Int" id="157169">indentationLevel</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#157169" title="Int">indentationLevel</a> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> =&gt; <a href="../Suite.scala.html#27219" title="(level: Int)String">indentation</a><span class="delimiter">(</span><a href="#157169" title="Int">indentationLevel</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="../Suite.scala.html#27219" title="(level: Int)String">indentation</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(throwable: Option[Throwable])List[String]" id="157108">getStackTrace</a><span class="delimiter">(</span><a title="Option[Throwable]" id="157174">throwable</a>: <span title="Option[Throwable]">Option</span><span class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
      <a href="#157174" title="Option[Throwable]">throwable</a> <span title="List[String]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="List[String]">Some</span><span class="delimiter">(</span><a title="Throwable" id="157176">throwable</a><span class="delimiter">)</span> =&gt;

          <span class="keyword">def</span> <a title="(throwable: Throwable, isCause: Boolean)List[String]" id="157177">stackTrace</a><span class="delimiter">(</span><a title="Throwable" id="157178">throwable</a>: <span title="Throwable">Throwable</span>, <a title="Boolean" id="157179">isCause</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>

            <span class="keyword">val</span> <a title="java.lang.String" id="157180">className</a> = <a href="#157178" title="Throwable">throwable</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span> 
            <span class="keyword">val</span> <a title="java.lang.String" id="157181">labeledClassName</a> = <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#157179" title="Boolean">isCause</a><span class="delimiter">)</span> <a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;DetailsCause&quot;)" class="string">&quot;DetailsCause&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157180" title="java.lang.String">className</a> <span class="keyword">else</span> <a href="#157180" title="java.lang.String">className</a>
            <span class="comment">// Only show the : message if a cause, because first one will have its message printed out </span>
            <span class="comment">// Or if it is a non-StackDepth exception, because if they throw Exception with no message, the</span>
            <span class="comment">// message was coming out as &quot;java.lang.Exception&quot; then on the next line it repeated it. In the</span>
            <span class="comment">// case of no exception message, I think it looks best to just say the class name followed by a colon</span>
            <span class="comment">// and nothing else.</span>
            <span class="keyword">val</span> <a title="java.lang.String" id="157182">colonMessageOrJustColon</a> =
              <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#157178" title="Throwable">throwable</a>.<span title="()java.lang.String">getMessage</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#157178" title="Throwable">throwable</a>.<span title="()java.lang.String">getMessage</span>.<span title="()java.lang.String">trim</span>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#157179" title="Boolean">isCause</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#157178" title="Throwable">throwable</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../StackDepth.scala.html#9683" title="org.scalatest.StackDepth">StackDepth</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157178" title="Throwable">throwable</a>.<span title="()java.lang.String">getMessage</span>.<span title="()java.lang.String">trim</span>
              <span class="keyword">else</span>
                <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>

            <span class="keyword">val</span> <a title="java.lang.String" id="157183">labeledClassNameWithMessage</a> =
              <a href="#157107" title="String">whiteSpace</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157181" title="java.lang.String">labeledClassName</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157182" title="java.lang.String">colonMessageOrJustColon</a>

            <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#134717" title="Boolean">presentShortStackTraces</a> <span title="(x: Boolean)Boolean">||</span> <a href="#134718" title="Boolean">presentFullStackTraces</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#157178" title="Throwable">throwable</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../StackDepth.scala.html#9683" title="org.scalatest.StackDepth">StackDepth</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

              <span class="comment">// Indent each stack trace item two spaces, and prepend that with an &quot;at &quot;</span>
              <span class="keyword">val</span> <a title="List[java.lang.String]" id="157199">stackTraceElements</a> = <a href="#157178" title="Throwable">throwable</a>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="=&gt; List[java.lang.StackTraceElement]">toList</span> <span title="(f: java.lang.StackTraceElement =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.StackTraceElement],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span> <span class="delimiter">{</span> <a href="#157107" title="String">whiteSpace</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;at &quot;)" class="string">&quot;at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157324" title="java.lang.StackTraceElement">_</a>.<span title="()java.lang.String">toString</span> <span class="delimiter">}</span>
              <span class="keyword">val</span> <a title="java.lang.Throwable" id="157200">cause</a> = <a href="#157178" title="Throwable">throwable</a>.<span title="()java.lang.Throwable">getCause</span>

              <span class="keyword">val</span> <a title="List[java.lang.String]" id="157201">stackTraceThisThrowable</a> = <a href="#157183" title="java.lang.String">labeledClassNameWithMessage</a> <a href="#157352" title="(x: java.lang.String)List[java.lang.String]">::</a> <a href="#157199" title="List[java.lang.String]">stackTraceElements</a>

              <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#134718" title="Boolean">presentFullStackTraces</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#157200" title="java.lang.Throwable">cause</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
                  <a href="#157201" title="List[java.lang.String]">stackTraceThisThrowable</a>
                <span class="keyword">else</span>
                  <a href="#157201" title="List[java.lang.String]">stackTraceThisThrowable</a> <a href="#157362" title="(prefix: List[String])List[String]">:::</a> <a href="#157177" title="(throwable: Throwable, isCause: Boolean)List[String]">stackTrace</a><span class="delimiter">(</span><a href="#157200" title="java.lang.Throwable">cause</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="comment">// Not tail recursive, but shouldn't be too deep</span>
              <span class="delimiter">}</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>

                <span class="comment">// The drop(1) or drop(stackDepth + 1) that extra one is the labeledClassNameWithMessage</span>
                <span class="keyword">val</span> <a title="List[java.lang.String]" id="157370">stackTraceThisThrowableTruncated</a> = 
                  <a href="#157178" title="Throwable">throwable</a> <span title="List[java.lang.String]" class="keyword">match</span> <span class="delimiter">{</span>
                    <span class="keyword">case</span> <a title="List[java.lang.String]" id="157371">e</a>: <a href="#157372" title="StringReporter extends Throwable with org.scalatest.StackDepth">Throwable</a> <span class="keyword">with</span> StackDepth =&gt;
                      <span class="keyword">val</span> <a title="Int" id="157373">stackDepth</a> = <a href="#157371" title="StringReporter extends Throwable with org.scalatest.StackDepth">e</a>.<a href="../StackDepth.scala.html#27447" title="=&gt; Int">failedCodeStackDepth</a>
                      <a href="#157201" title="List[java.lang.String]">stackTraceThisThrowable</a>.<span title="=&gt; java.lang.String">head</span> <a href="#157374" title="(x: java.lang.String)List[java.lang.String]">::</a> <span class="delimiter">(</span><a href="#157107" title="String">whiteSpace</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;...&quot;)" class="string">&quot;...&quot;</span><span class="delimiter">)</span> <a href="#157375" title="(x: java.lang.String)List[java.lang.String]">::</a> <a href="#157201" title="List[java.lang.String]">stackTraceThisThrowable</a>.<span title="(n: Int)List[java.lang.String]">drop</span><span class="delimiter">(</span><a href="#157373" title="Int">stackDepth</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(n: Int)List[java.lang.String]">take</span><span class="delimiter">(</span><span title="Int(7)" class="int">7</span><span class="delimiter">)</span> <a href="#157376" title="(prefix: List[java.lang.String])List[java.lang.String]">:::</a> <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><a href="#157107" title="String">whiteSpace</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;...&quot;)" class="string">&quot;...&quot;</span><span class="delimiter">)</span>
                    <span class="keyword">case</span> <span title="List[java.lang.String]">_</span> =&gt; <span class="comment">// In case of IAE or what not, show top 10 stack frames</span>
                      <a href="#157201" title="List[java.lang.String]">stackTraceThisThrowable</a>.<span title="=&gt; java.lang.String">head</span> <a href="#157404" title="(x: java.lang.String)List[java.lang.String]">::</a> <a href="#157201" title="List[java.lang.String]">stackTraceThisThrowable</a>.<span title="(n: Int)List[java.lang.String]">drop</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(n: Int)List[java.lang.String]">take</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <a href="#157405" title="(prefix: List[java.lang.String])List[java.lang.String]">:::</a> <span title="(xs: java.lang.String*)List[java.lang.String]">List</span><span class="delimiter">(</span><a href="#157107" title="String">whiteSpace</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;...&quot;)" class="string">&quot;...&quot;</span><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
    
                <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#157200" title="java.lang.Throwable">cause</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
                  <a href="#157370" title="List[java.lang.String]">stackTraceThisThrowableTruncated</a>
                <span class="keyword">else</span>
                  <a href="#157370" title="List[java.lang.String]">stackTraceThisThrowableTruncated</a> <a href="#157426" title="(prefix: List[String])List[String]">:::</a> <a href="#157177" title="(throwable: Throwable, isCause: Boolean)List[String]">stackTrace</a><span class="delimiter">(</span><a href="#157200" title="java.lang.Throwable">cause</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="comment">// Not tail recursive, but shouldn't be too deep</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
            <span class="keyword">else</span>
              <span title="object Nil">Nil</span>
          <span class="delimiter">}</span>
          <a href="#157177" title="(throwable: Throwable, isCause: Boolean)List[String]">stackTrace</a><span class="delimiter">(</span><a href="#157176" title="Throwable">throwable</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="List[Nothing]">None</span> =&gt; List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#157106" title="String">possiblyEmptyMessageWithPossibleLineNumber</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#157104" title="String">stringToPrintWithPossibleDuration</a> <a href="#157441" title="(x: String)List[String]">::</a> <a href="#157108" title="(throwable: Option[Throwable])List[String]">getStackTrace</a><span class="delimiter">(</span><a href="#157097" title="Option[Throwable]">throwable</a><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="#157104" title="String">stringToPrintWithPossibleDuration</a> <a href="#157447" title="(x: String)List[String]">::</a> <span class="delimiter">(</span><a href="#157107" title="String">whiteSpace</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157106" title="String">possiblyEmptyMessageWithPossibleLineNumber</a><span class="delimiter">)</span> <a href="#157448" title="(x: String)List[String]">::</a> <a href="#157108" title="(throwable: Option[Throwable])List[String]">getStackTrace</a><span class="delimiter">(</span><a href="#157097" title="Option[Throwable]">throwable</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String])Option[String]" id="49008">stringToPrintWhenNoError</a><span class="delimiter">(</span><a title="String" id="157457">resourceName</a>: <span title="String">String</span>, <a title="Option[org.scalatest.events.Formatter]" id="157458">formatter</a>: <span title="Option[org.scalatest.events.Formatter]">Option</span><span class="delimiter">[</span>Formatter<span class="delimiter">]</span>, <a title="String" id="157459">suiteName</a>: <span title="String">String</span>, <a title="Option[String]" id="157460">testName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <a href="#49009" title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String], duration: Option[Long])Option[String]">stringToPrintWhenNoError</a><span class="delimiter">(</span><a href="#157457" title="String">resourceName</a>, <a href="#157458" title="Option[org.scalatest.events.Formatter]">formatter</a>, <a href="#157459" title="String">suiteName</a>, <a href="#157460" title="Option[String]">testName</a>, <span title="object None">None</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String], duration: Option[Long])Option[String]" id="49009">stringToPrintWhenNoError</a><span class="delimiter">(</span><a title="String" id="157466">resourceName</a>: <span title="String">String</span>, <a title="Option[org.scalatest.events.Formatter]" id="157467">formatter</a>: <span title="Option[org.scalatest.events.Formatter]">Option</span><span class="delimiter">[</span>Formatter<span class="delimiter">]</span>, <a title="String" id="157468">suiteName</a>: <span title="String">String</span>, <a title="Option[String]" id="157469">testName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Option[Long]" id="157470">duration</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <a href="#157467" title="Option[org.scalatest.events.Formatter]">formatter</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Option[String]">Some</span><span class="delimiter">(</span>IndentedText<span class="delimiter">(</span><a title="String" id="157473">formattedText</a>, _, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#157470" title="Option[Long]">duration</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Option[String]">Some</span><span class="delimiter">(</span><a title="Long" id="157475">milliseconds</a><span class="delimiter">)</span> =&gt;
            <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#134715" title="Boolean">presentAllDurations</a><span class="delimiter">)</span>
              <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;withDuration&quot;)" class="string">&quot;withDuration&quot;</span>, <a href="#157473" title="String">formattedText</a>, <a href="PrintReporter.scala.html#48995" title="(duration: Long)String">makeDurationString</a><span class="delimiter">(</span><a href="#157475" title="Long">milliseconds</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157473" title="String">formattedText</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Some[String]">None</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157473" title="String">formattedText</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="None.type">Some</span><span class="delimiter">(</span><a href="../events/Formatter.scala.html#10889" title="object org.scalatest.events.MotionToSuppress">MotionToSuppress</a><span class="delimiter">)</span> =&gt; <span title="object None">None</span>
      <span class="keyword">case</span> <span title="Option[String]">_</span> =&gt;
        <span class="keyword">val</span> <a title="java.lang.String" id="157492">arg</a> =
          <a href="#157469" title="Option[String]">testName</a> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="java.lang.String">Some</span><span class="delimiter">(</span><a title="String" id="157495">tn</a><span class="delimiter">)</span> =&gt; <a href="#157468" title="String">suiteName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157495" title="String">tn</a>
            <span class="keyword">case</span> <span title="String">None</span> =&gt; <a href="#157468" title="String">suiteName</a>
          <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="String" id="157493">unformattedText</a> = <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><a href="#157466" title="String">resourceName</a>, <a href="#157492" title="java.lang.String">arg</a><span class="delimiter">)</span>
        <a href="#157470" title="Option[Long]">duration</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Option[String]">Some</span><span class="delimiter">(</span><a title="Long" id="157503">milliseconds</a><span class="delimiter">)</span> =&gt;
            <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#134715" title="Boolean">presentAllDurations</a><span class="delimiter">)</span>
              <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;withDuration&quot;)" class="string">&quot;withDuration&quot;</span>, <a href="#157493" title="String">unformattedText</a>, <a href="PrintReporter.scala.html#48995" title="(duration: Long)String">makeDurationString</a><span class="delimiter">(</span><a href="#157503" title="Long">milliseconds</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157493" title="String">unformattedText</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Some[String]">None</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157493" title="String">unformattedText</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(event: org.scalatest.events.Event)Unit" id="49010">apply</a><span class="delimiter">(</span><a title="org.scalatest.events.Event" id="134903">event</a>: <a href="../events/Event.scala.html#10801" title="org.scalatest.events.Event">Event</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <a href="#134903" title="org.scalatest.events.Event">event</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>

      <span class="keyword">case</span> <span title="Unit">RunStarting</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157519">ordinal</a>, <a title="Int" id="157520">testCount</a>, <a title="Map[String,Any]" id="157521">configMap</a>, <a title="Option[org.scalatest.events.Formatter]" id="157522">formatter</a>, <a title="Option[Any]" id="157523">payload</a>, <a title="String" id="157524">threadName</a>, <a title="Long" id="157525">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#157520" title="Int">testCount</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span>

        <span class="keyword">val</span> <a title="String" id="157526">string</a> = <a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;runStarting&quot;)" class="string">&quot;runStarting&quot;</span>, <a href="#157520" title="Int">testCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
        <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157526" title="String">string</a>, <span title="java.lang.String(&quot;\033[36m&quot;)">ansiCyan</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">RunCompleted</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157539">ordinal</a>, <a title="Option[Long]" id="157540">duration</a>, <a title="Option[org.scalatest.events.Summary]" id="157541">summary</a>, <a title="Option[org.scalatest.events.Formatter]" id="157542">formatter</a>, <a title="Option[Any]" id="157543">payload</a>, <a title="String" id="157544">threadName</a>, <a title="Long" id="157545">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <a href="#49011" title="(resourceName: String, duration: Option[Long], summaryOption: Option[org.scalatest.events.Summary])Unit">makeFinalReport</a><span class="delimiter">(</span><span title="java.lang.String(&quot;runCompleted&quot;)" class="string">&quot;runCompleted&quot;</span>, <a href="#157540" title="Option[Long]">duration</a>, <a href="#157541" title="Option[org.scalatest.events.Summary]">summary</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">RunStopped</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157546">ordinal</a>, <a title="Option[Long]" id="157547">duration</a>, <a title="Option[org.scalatest.events.Summary]" id="157548">summary</a>, <a title="Option[org.scalatest.events.Formatter]" id="157549">formatter</a>, <a title="Option[Any]" id="157550">payload</a>, <a title="String" id="157551">threadName</a>, <a title="Long" id="157552">timeStamp</a><span class="delimiter">)</span> =&gt;

        <a href="#49011" title="(resourceName: String, duration: Option[Long], summaryOption: Option[org.scalatest.events.Summary])Unit">makeFinalReport</a><span class="delimiter">(</span><span title="java.lang.String(&quot;runStopped&quot;)" class="string">&quot;runStopped&quot;</span>, <a href="#157547" title="Option[Long]">duration</a>, <a href="#157548" title="Option[org.scalatest.events.Summary]">summary</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">RunAborted</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157553">ordinal</a>, <a title="String" id="157554">message</a>, <a title="Option[Throwable]" id="157555">throwable</a>, <a title="Option[Long]" id="157556">duration</a>, <a title="Option[org.scalatest.events.Summary]" id="157557">summary</a>, <a title="Option[org.scalatest.events.Formatter]" id="157558">formatter</a>, <a title="Option[Any]" id="157559">payload</a>, <a title="String" id="157560">threadName</a>, <a title="Long" id="157561">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span class="keyword">val</span> <a title="List[String]" id="157562">lines</a> = <a href="#49007" title="(noteResourceName: String, errorResourceName: String, message: String, throwable: Option[Throwable], formatter: Option[org.scalatest.events.Formatter], suiteName: Option[String], testName: Option[String], duration: Option[Long])List[String]">stringsToPrintOnError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;abortedNote&quot;)" class="string">&quot;abortedNote&quot;</span>, <span title="java.lang.String(&quot;runAborted&quot;)" class="string">&quot;runAborted&quot;</span>, <a href="#157554" title="String">message</a>, <a href="#157555" title="Option[Throwable]">throwable</a>, <a href="#157558" title="Option[org.scalatest.events.Formatter]">formatter</a>, <span title="object None">None</span>, <span title="object None">None</span>, <a href="#157556" title="Option[Long]">duration</a><span class="delimiter">)</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="157582">line</a> &lt;- <a href="#157562" title="(f: String =&gt; Unit)Unit">lines</a><span class="delimiter">)</span> <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157582" title="String">line</a>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">SuiteStarting</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157584">ordinal</a>, <a title="String" id="157585">suiteName</a>, <a title="Option[String]" id="157586">suiteClassName</a>, <a title="Option[org.scalatest.events.Formatter]" id="157587">formatter</a>, <a title="Option[org.scalatest.Rerunner]" id="157588">rerunnable</a>, <a title="Option[Any]" id="157589">payload</a>, <a title="String" id="157590">threadName</a>, <a title="Long" id="157591">timeStamp</a><span class="delimiter">)</span> =&gt;

        <span class="keyword">val</span> <a title="Option[String]" id="157592">stringToPrint</a> = <a href="#49008" title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String])Option[String]">stringToPrintWhenNoError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;suiteStarting&quot;)" class="string">&quot;suiteStarting&quot;</span>, <a href="#157587" title="Option[org.scalatest.events.Formatter]">formatter</a>, <a href="#157585" title="String">suiteName</a>, <span title="object None">None</span><span class="delimiter">)</span>

        <a href="#157592" title="Option[String]">stringToPrint</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="157598">string</a><span class="delimiter">)</span> =&gt; <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157598" title="String">string</a>, <span title="java.lang.String(&quot;\033[32m&quot;)">ansiGreen</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="Unit">SuiteCompleted</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157599">ordinal</a>, <a title="String" id="157600">suiteName</a>, <a title="Option[String]" id="157601">suiteClassName</a>, <a title="Option[Long]" id="157602">duration</a>, <a title="Option[org.scalatest.events.Formatter]" id="157603">formatter</a>, <a title="Option[org.scalatest.Rerunner]" id="157604">rerunnable</a>, <a title="Option[Any]" id="157605">payload</a>, <a title="String" id="157606">threadName</a>, <a title="Long" id="157607">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span class="keyword">val</span> <a title="Option[String]" id="157608">stringToPrint</a> = <a href="#49009" title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String], duration: Option[Long])Option[String]">stringToPrintWhenNoError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;suiteCompleted&quot;)" class="string">&quot;suiteCompleted&quot;</span>, <a href="#157603" title="Option[org.scalatest.events.Formatter]">formatter</a>, <a href="#157600" title="String">suiteName</a>, <span title="object None">None</span>, <a href="#157602" title="Option[Long]">duration</a><span class="delimiter">)</span>

        <a href="#157608" title="Option[String]">stringToPrint</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="157614">string</a><span class="delimiter">)</span> =&gt; <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157614" title="String">string</a>, <span title="java.lang.String(&quot;\033[32m&quot;)">ansiGreen</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="Unit">SuiteAborted</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157615">ordinal</a>, <a title="String" id="157616">message</a>, <a title="String" id="157617">suiteName</a>, <a title="Option[String]" id="157618">suiteClassName</a>, <a title="Option[Throwable]" id="157619">throwable</a>, <a title="Option[Long]" id="157620">duration</a>, <a title="Option[org.scalatest.events.Formatter]" id="157621">formatter</a>, <a title="Option[org.scalatest.Rerunner]" id="157622">rerunnable</a>, <a title="Option[Any]" id="157623">payload</a>, <a title="String" id="157624">threadName</a>, <a title="Long" id="157625">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span class="keyword">val</span> <a title="List[String]" id="157626">lines</a> = <a href="#49007" title="(noteResourceName: String, errorResourceName: String, message: String, throwable: Option[Throwable], formatter: Option[org.scalatest.events.Formatter], suiteName: Option[String], testName: Option[String], duration: Option[Long])List[String]">stringsToPrintOnError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;abortedNote&quot;)" class="string">&quot;abortedNote&quot;</span>, <span title="java.lang.String(&quot;suiteAborted&quot;)" class="string">&quot;suiteAborted&quot;</span>, <a href="#157616" title="String">message</a>, <a href="#157619" title="Option[Throwable]">throwable</a>, <a href="#157621" title="Option[org.scalatest.events.Formatter]">formatter</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157617" title="String">suiteName</a><span class="delimiter">)</span>, <span title="object None">None</span>, <a href="#157620" title="Option[Long]">duration</a><span class="delimiter">)</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="157649">line</a> &lt;- <a href="#157626" title="(f: String =&gt; Unit)Unit">lines</a><span class="delimiter">)</span> <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157649" title="String">line</a>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">TestStarting</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157651">ordinal</a>, <a title="String" id="157652">suiteName</a>, <a title="Option[String]" id="157653">suiteClassName</a>, <a title="String" id="157654">testName</a>, <a title="Option[org.scalatest.events.Formatter]" id="157655">formatter</a>, <a title="Option[org.scalatest.Rerunner]" id="157656">rerunnable</a>, <a title="Option[Any]" id="157657">payload</a>, <a title="String" id="157658">threadName</a>, <a title="Long" id="157659">timeStamp</a><span class="delimiter">)</span> =&gt;

        <span class="keyword">val</span> <a title="Option[String]" id="157660">stringToPrint</a> = <a href="#49008" title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String])Option[String]">stringToPrintWhenNoError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;testStarting&quot;)" class="string">&quot;testStarting&quot;</span>, <a href="#157655" title="Option[org.scalatest.events.Formatter]">formatter</a>, <a href="#157652" title="String">suiteName</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157654" title="String">testName</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <a href="#157660" title="Option[String]">stringToPrint</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="157669">string</a><span class="delimiter">)</span> =&gt; <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157669" title="String">string</a>, <span title="java.lang.String(&quot;\033[32m&quot;)">ansiGreen</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="Unit">TestSucceeded</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157670">ordinal</a>, <a title="String" id="157671">suiteName</a>, <a title="Option[String]" id="157672">suiteClassName</a>, <a title="String" id="157673">testName</a>, <a title="Option[Long]" id="157674">duration</a>, <a title="Option[org.scalatest.events.Formatter]" id="157675">formatter</a>, <a title="Option[org.scalatest.Rerunner]" id="157676">rerunnable</a>, <a title="Option[Any]" id="157677">payload</a>, <a title="String" id="157678">threadName</a>, <a title="Long" id="157679">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span class="keyword">val</span> <a title="Option[String]" id="157680">stringToPrint</a> = <a href="#49009" title="(resourceName: String, formatter: Option[org.scalatest.events.Formatter], suiteName: String, testName: Option[String], duration: Option[Long])Option[String]">stringToPrintWhenNoError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;testSucceeded&quot;)" class="string">&quot;testSucceeded&quot;</span>, <a href="#157675" title="Option[org.scalatest.events.Formatter]">formatter</a>, <a href="#157671" title="String">suiteName</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157673" title="String">testName</a><span class="delimiter">)</span>, <a href="#157674" title="Option[Long]">duration</a><span class="delimiter">)</span>

        <a href="#157680" title="Option[String]">stringToPrint</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="157689">string</a><span class="delimiter">)</span> =&gt; <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157689" title="String">string</a>, <span title="java.lang.String(&quot;\033[32m&quot;)">ansiGreen</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
        <span class="delimiter">}</span>
    
      <span class="keyword">case</span> <span title="Unit">TestIgnored</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157690">ordinal</a>, <a title="String" id="157691">suiteName</a>, <a title="Option[String]" id="157692">suiteClassName</a>, <a title="String" id="157693">testName</a>, <a title="Option[org.scalatest.events.Formatter]" id="157694">formatter</a>, <a title="Option[Any]" id="157695">payload</a>, <a title="String" id="157696">threadName</a>, <a title="Long" id="157697">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span class="keyword">val</span> <a title="Option[String]" id="157698">stringToPrint</a> =
          <a href="#157694" title="Option[org.scalatest.events.Formatter]">formatter</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Some[String]">Some</span><span class="delimiter">(</span>IndentedText<span class="delimiter">(</span><a title="String" id="157700">formattedText</a>, _, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;specTextAndNote&quot;)" class="string">&quot;specTextAndNote&quot;</span>, <a href="#157700" title="String">formattedText</a>, <a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ignoredNote&quot;)" class="string">&quot;ignoredNote&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="None.type">Some</span><span class="delimiter">(</span><a href="../events/Formatter.scala.html#10889" title="object org.scalatest.events.MotionToSuppress">MotionToSuppress</a><span class="delimiter">)</span> =&gt; <span title="object None">None</span>
            <span class="keyword">case</span> <span title="Some[String]">_</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;testIgnored&quot;)" class="string">&quot;testIgnored&quot;</span>, <a href="#157691" title="String">suiteName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157693" title="String">testName</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
 
        <a href="#157698" title="Option[String]">stringToPrint</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="157740">string</a><span class="delimiter">)</span> =&gt; <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157740" title="String">string</a>, <span title="java.lang.String(&quot;\033[33m&quot;)">ansiYellow</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="Unit">TestFailed</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157741">ordinal</a>, <a title="String" id="157742">message</a>, <a title="String" id="157743">suiteName</a>, <a title="Option[String]" id="157744">suiteClassName</a>, <a title="String" id="157745">testName</a>, <a title="Option[Throwable]" id="157746">throwable</a>, <a title="Option[Long]" id="157747">duration</a>, <a title="Option[org.scalatest.events.Formatter]" id="157748">formatter</a>, <a title="Option[org.scalatest.Rerunner]" id="157749">rerunnable</a>, <a title="Option[Any]" id="157750">payload</a>, <a title="String" id="157751">threadName</a>, <a title="Long" id="157752">timeStamp</a><span class="delimiter">)</span> =&gt; 

        <span class="keyword">val</span> <a title="List[String]" id="157753">lines</a> = <a href="#49007" title="(noteResourceName: String, errorResourceName: String, message: String, throwable: Option[Throwable], formatter: Option[org.scalatest.events.Formatter], suiteName: Option[String], testName: Option[String], duration: Option[Long])List[String]">stringsToPrintOnError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;failedNote&quot;)" class="string">&quot;failedNote&quot;</span>, <span title="java.lang.String(&quot;testFailed&quot;)" class="string">&quot;testFailed&quot;</span>, <a href="#157742" title="String">message</a>, <a href="#157746" title="Option[Throwable]">throwable</a>, <a href="#157748" title="Option[org.scalatest.events.Formatter]">formatter</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157743" title="String">suiteName</a><span class="delimiter">)</span>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157745" title="String">testName</a><span class="delimiter">)</span>, <a href="#157747" title="Option[Long]">duration</a><span class="delimiter">)</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="157779">line</a> &lt;- <a href="#157753" title="(f: String =&gt; Unit)Unit">lines</a><span class="delimiter">)</span> <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157779" title="String">line</a>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">InfoProvided</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157781">ordinal</a>, <a title="String" id="157782">message</a>, <a title="Option[org.scalatest.events.NameInfo]" id="157783">nameInfo</a>, <a title="Option[Boolean]" id="157784">aboutAPendingTest</a>, <a title="Option[Throwable]" id="157785">throwable</a>, <a title="Option[org.scalatest.events.Formatter]" id="157786">formatter</a>, <a title="Option[Any]" id="157787">payload</a>, <a title="String" id="157788">threadName</a>, <a title="Long" id="157789">timeStamp</a><span class="delimiter">)</span> =&gt;

        <span class="keyword">val</span> <a href="#157791" title="(Option[String], Option[String])" class="delimiter">(</a><a href="#157790" title="Option[String]" id="157791">suiteName</a>, <a href="#157790" title="Option[String]" id="157792">testName</a><span class="delimiter">)</span> =
          <a href="#157783" title="Option[org.scalatest.events.NameInfo]">nameInfo</a> <span title="(Option[String], Option[String])" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="(Some[String], Option[String])">Some</span><span class="delimiter">(</span>NameInfo<span class="delimiter">(</span><a title="String" id="157796">suiteName</a>, _, <a title="Option[String]" id="157797">testName</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(_1: Some[String], _2: Option[String])(Some[String], Option[String])" class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#157796" title="String">suiteName</a><span class="delimiter">)</span>, <a href="#157797" title="Option[String]">testName</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="(None.type, None.type)">None</span> =&gt; <span title="(_1: None.type, _2: None.type)(None.type, None.type)" class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[String]" id="157793">lines</a> = <a href="#49007" title="(noteResourceName: String, errorResourceName: String, message: String, throwable: Option[Throwable], formatter: Option[org.scalatest.events.Formatter], suiteName: Option[String], testName: Option[String], duration: Option[Long])List[String]">stringsToPrintOnError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;infoProvidedNote&quot;)" class="string">&quot;infoProvidedNote&quot;</span>, <span title="java.lang.String(&quot;infoProvided&quot;)" class="string">&quot;infoProvided&quot;</span>, <a href="#157782" title="String">message</a>, <a href="#157785" title="Option[Throwable]">throwable</a>, <a href="#157786" title="Option[org.scalatest.events.Formatter]">formatter</a>, <a href="#157791" title="Option[String]">suiteName</a>, <a href="#157792" title="Option[String]">testName</a>, <span title="object None">None</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="157794">shouldBeYellow</a> =
          <a href="#157784" title="Option[Boolean]">aboutAPendingTest</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Boolean">Some</span><span class="delimiter">(</span><a title="Boolean" id="157849">isPending</a><span class="delimiter">)</span> =&gt; <a href="#157849" title="Boolean">isPending</a>
            <span class="keyword">case</span> <span title="Boolean(false)">None</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="157869">line</a> &lt;- <a href="#157793" title="(f: String =&gt; Unit)Unit">lines</a><span class="delimiter">)</span> <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157869" title="String">line</a>, <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#157794" title="Boolean">shouldBeYellow</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;\033[33m&quot;)">ansiYellow</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;\033[32m&quot;)">ansiGreen</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">TestPending</span><span class="delimiter">(</span><a title="org.scalatest.events.Ordinal" id="157871">ordinal</a>, <a title="String" id="157872">suiteName</a>, <a title="Option[String]" id="157873">suiteClassName</a>, <a title="String" id="157874">testName</a>, <a title="Option[org.scalatest.events.Formatter]" id="157875">formatter</a>, <a title="Option[Any]" id="157876">payload</a>, <a title="String" id="157877">threadName</a>, <a title="Long" id="157878">timeStamp</a><span class="delimiter">)</span> =&gt;

        <span class="keyword">val</span> <a title="Option[String]" id="157879">stringToPrint</a> =
          <a href="#157875" title="Option[org.scalatest.events.Formatter]">formatter</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Some[String]">Some</span><span class="delimiter">(</span>IndentedText<span class="delimiter">(</span><a title="String" id="157881">formattedText</a>, _, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;specTextAndNote&quot;)" class="string">&quot;specTextAndNote&quot;</span>, <a href="#157881" title="String">formattedText</a>, <a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;pendingNote&quot;)" class="string">&quot;pendingNote&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="None.type">Some</span><span class="delimiter">(</span><a href="../events/Formatter.scala.html#10889" title="object org.scalatest.events.MotionToSuppress">MotionToSuppress</a><span class="delimiter">)</span> =&gt; <span title="object None">None</span>
            <span class="keyword">case</span> <span title="Some[String]">_</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;testPending&quot;)" class="string">&quot;testPending&quot;</span>, <a href="#157872" title="String">suiteName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157874" title="String">testName</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <a href="#157879" title="Option[String]">stringToPrint</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="157921">string</a><span class="delimiter">)</span> =&gt; <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="#157921" title="String">string</a>, <span title="java.lang.String(&quot;\033[33m&quot;)">ansiYellow</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
        <span class="delimiter">}</span>

     <span class="comment">// case _ =&gt; throw new RuntimeException(&quot;Unhandled event&quot;)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(resourceName: String, duration: Option[Long], summaryOption: Option[org.scalatest.events.Summary])Unit" id="49011">makeFinalReport</a><span class="delimiter">(</span><a title="String" id="134911">resourceName</a>: <span title="String">String</span>, <a title="Option[Long]" id="134912">duration</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span>, <a title="Option[org.scalatest.events.Summary]" id="134913">summaryOption</a>: <span title="Option[org.scalatest.events.Summary]">Option</span><span class="delimiter">[</span>Summary<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <a href="#134913" title="Option[org.scalatest.events.Summary]">summaryOption</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="org.scalatest.events.Summary" id="157923">summary</a><span class="delimiter">)</span> =&gt;

        <span class="keyword">import</span> <a href="#157923" title="org.scalatest.events.Summary">summary</a>._

        <a href="#134912" title="Option[Long]">duration</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="Long" id="157926">msSinceEpoch</a><span class="delimiter">)</span> =&gt;
            <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><a href="#134911" title="String">resourceName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;In&quot;)" class="string">&quot;In&quot;</span>, <a href="PrintReporter.scala.html#48995" title="(duration: Long)String">makeDurationString</a><span class="delimiter">(</span><a href="#157926" title="Long">msSinceEpoch</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[36m&quot;)">ansiCyan</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
            <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><a href="#134911" title="String">resourceName</a><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[36m&quot;)">ansiCyan</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>     

        <span class="comment">// totalNumberOfTestsRun=Total number of tests run was: {0}</span>
        <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;totalNumberOfTestsRun&quot;)" class="string">&quot;totalNumberOfTestsRun&quot;</span>, <a href="../events/Summary.scala.html#34157" title="=&gt; Int">testsCompletedCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[36m&quot;)">ansiCyan</span><span class="delimiter">)</span>

        <span class="comment">// Suite Summary: completed {0}, aborted {1}</span>
        <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;suiteSummary&quot;)" class="string">&quot;suiteSummary&quot;</span>, <a href="../events/Summary.scala.html#34152" title="=&gt; Int">suitesCompletedCount</a>.<span title="()java.lang.String">toString</span>, <a href="../events/Summary.scala.html#34154" title="=&gt; Int">suitesAbortedCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[36m&quot;)">ansiCyan</span><span class="delimiter">)</span>

        <span class="comment">// Test Summary: succeeded {0}, failed {1}, ignored, {2}, pending {3}</span>
        <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;testSummary&quot;)" class="string">&quot;testSummary&quot;</span>, <a href="../events/Summary.scala.html#34144" title="=&gt; Int">testsSucceededCount</a>.<span title="()java.lang.String">toString</span>, <a href="../events/Summary.scala.html#34146" title="=&gt; Int">testsFailedCount</a>.<span title="()java.lang.String">toString</span>, <a href="../events/Summary.scala.html#34148" title="=&gt; Int">testsIgnoredCount</a>.<span title="()java.lang.String">toString</span>, <a href="../events/Summary.scala.html#34150" title="=&gt; Int">testsPendingCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[36m&quot;)">ansiCyan</span><span class="delimiter">)</span>

        <span class="comment">// *** 1 SUITE ABORTED ***</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../events/Summary.scala.html#34154" title="=&gt; Int">suitesAbortedCount</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;oneSuiteAborted&quot;)" class="string">&quot;oneSuiteAborted&quot;</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

        <span class="comment">// *** {0} SUITES ABORTED ***</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../events/Summary.scala.html#34154" title="=&gt; Int">suitesAbortedCount</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;multipleSuitesAborted&quot;)" class="string">&quot;multipleSuitesAborted&quot;</span>, <a href="../events/Summary.scala.html#34154" title="=&gt; Int">suitesAbortedCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

        <span class="comment">// *** 1 TEST FAILED ***</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../events/Summary.scala.html#34146" title="=&gt; Int">testsFailedCount</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;oneTestFailed&quot;)" class="string">&quot;oneTestFailed&quot;</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

        <span class="comment">// *** {0} TESTS FAILED ***</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../events/Summary.scala.html#34146" title="=&gt; Int">testsFailedCount</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;multipleTestsFailed&quot;)" class="string">&quot;multipleTestsFailed&quot;</span>, <a href="../events/Summary.scala.html#34146" title="=&gt; Int">testsFailedCount</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[31m&quot;)">ansiRed</span><span class="delimiter">)</span>

        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../events/Summary.scala.html#34154" title="=&gt; Int">suitesAbortedCount</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="comment">// Maybe don't want to say this if the run aborted or stopped because &quot;all&quot;</span>
          <a href="#49006" title="(text: String, ansiColor: String)Unit">printPossiblyInColor</a><span class="delimiter">(</span><a href="../Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;allTestsPassed&quot;)" class="string">&quot;allTestsPassed&quot;</span><span class="delimiter">)</span>, <span title="java.lang.String(&quot;\033[32m&quot;)">ansiGreen</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="Unit">None</span> =&gt;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// We subtract one from test reports because we add &quot;- &quot; in front, so if one is actually zero, it will come here as -1</span>
  <span class="comment">// private def indent(s: String, times: Int) = if (times &lt;= 0) s else (&quot;  &quot; * times) + s</span>

  <span class="comment">// Stupid properties file won't let me put spaces at the beginning of a property</span>
  <span class="comment">// &quot;  {0}&quot; comes out as &quot;{0}&quot;, so I can't do indenting in a localizable way. For now</span>
  <span class="comment">// just indent two space to the left.  //  if (times &lt;= 0) s </span>
  <span class="comment">//  else Resources(&quot;indentOnce&quot;, indent(s, times - 1))</span>
<span class="delimiter">}</span>
 
<span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object org.scalatest.tools.StringReporter" id="14098">StringReporter</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(s: String)Int" id="131788">countTrailingEOLs</a><span class="delimiter">(</span><a title="String" id="158016">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#158016" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <a href="#158016" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="(p: Char =&gt; Boolean)Int">lastIndexWhere</span><span class="delimiter">(</span><a href="#158294" title="Char">_</a> <span title="(x: Char)Boolean">!=</span> <span title="Char(\'\\n\')" class="char">'\n'</span><span class="delimiter">)</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
  <span class="keyword">def</span> <a title="(s: String)Int" id="131789">countLeadingEOLs</a><span class="delimiter">(</span><a title="String" id="158303">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="158305">idx</a> = <a href="#158303" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="(p: Char =&gt; Boolean)Int">findIndexOf</span><span class="delimiter">(</span><a href="#158320" title="Char">_</a> <span title="(x: Char)Boolean">!=</span> <span title="Char(\'\\n\')" class="char">'\n'</span><span class="delimiter">)</span>
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#158305" title="Int">idx</a> <span title="(x: Int)Boolean">!=</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#158305" title="Int">idx</a> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(text: String, ansiColor: String)String" id="131790">colorizeLinesIndividually</a><span class="delimiter">(</span><a title="String" id="134898">text</a>: <span title="String">String</span>, <a title="String" id="134899">ansiColor</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> =
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#134898" title="String">text</a>.<span title="()java.lang.String">trim</span>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#134898" title="String">text</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;\n&quot;</span> <span title="(n: Int)String">*</span> <a href="#131789" title="(s: String)Int">countLeadingEOLs</a><span class="delimiter">(</span><a href="#134898" title="String">text</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
      <a href="#134898" title="String">text</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>.<span title="(p: java.lang.String =&gt; Boolean)Array[java.lang.String]">dropWhile</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><a href="#158542" title="java.lang.String">_</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[java.lang.String],java.lang.String,Array[java.lang.String]])Array[java.lang.String]">map</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><a href="#134899" title="String">ansiColor</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#158988" title="java.lang.String">_</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\033[0m&quot;)">ansiReset</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
      <span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;\n&quot;</span> <span title="(n: Int)String">*</span> <a href="#131788" title="(s: String)Int">countTrailingEOLs</a><span class="delimiter">(</span><a href="#134898" title="String">text</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>