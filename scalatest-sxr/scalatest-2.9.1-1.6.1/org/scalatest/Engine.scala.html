<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalatest/Engine.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2001-2011 Artima, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>
<span class="keyword">package</span> org.scalatest

<span class="keyword">import</span> java.util.concurrent.atomic.AtomicReference
<span class="keyword">import</span> java.util.ConcurrentModificationException
<span class="keyword">import</span> org.scalatest.<a href="StackDepthException.scala.html#9555" title="object org.scalatest.StackDepthExceptionHelper">StackDepthExceptionHelper</a>.getStackDepth
<span class="keyword">import</span> <a href="FunSuite.scala.html#9738" title="object org.scalatest.FunSuite">FunSuite</a>.IgnoreTagName 
<span class="keyword">import</span> org.scalatest.<a href="NodeFamily.scala.html#10254" title="object org.scalatest.NodeFamily">NodeFamily</a>.TestLeaf
<span class="keyword">import</span> org.scalatest.<a href="Suite.scala.html#10074" title="object org.scalatest.Suite">Suite</a>._
<span class="keyword">import</span> fixture.NoArgTestWrapper

<span class="comment">// T will be () =&gt; Unit for FunSuite and FixtureParam =&gt; Any for FixtureFunSuite</span>
<span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SuperEngine[T] extends java.lang.Object with ScalaObject" id="9611">SuperEngine</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="10401">T</a><span class="delimiter">]</span><a href="#9611" title="ScalaObject" class="delimiter">(</a><a title="String" id="36878">concurrentBundleModResourceName</a>: <span title="String">String</span>, <a title="String" id="36879">simpleClassName</a>: <span title="String">String</span><span class="delimiter">)</span>  <span class="delimiter">{</span>

  <span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Node extends java.lang.Object with ScalaObject" id="36475">Node</a><a href="#36475" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Option[SuperEngine.this.Branch]" id="36882">parentOption</a>: <span title="Option[SuperEngine.this.Branch]">Option</span><span class="delimiter">[</span>Branch<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="36548">indentationLevel</a>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(currentParentOpt: Option[SuperEngine.this.Branch], currentLevel: Int)Int" id="36885">calcLevel</a><span class="delimiter">(</span><a title="Option[SuperEngine.this.Branch]" id="36887">currentParentOpt</a>: <span title="Option[SuperEngine.this.Branch]">Option</span><span class="delimiter">[</span>Branch<span class="delimiter">]</span>, <a title="Int" id="36888">currentLevel</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = 
        <a href="#36887" title="Option[SuperEngine.this.Branch]">currentParentOpt</a> <span title="Int" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Int">None</span> =&gt; <a href="#36888" title="Int">currentLevel</a>
          <span class="keyword">case</span> <span title="Int">Some</span><span class="delimiter">(</span><a title="SuperEngine.this.Branch" id="36890">parent</a><span class="delimiter">)</span> =&gt; <a href="#36885" title="(currentParentOpt: Option[SuperEngine.this.Branch], currentLevel: Int)Int">calcLevel</a><span class="delimiter">(</span><a href="#36890" title="SuperEngine.this.Branch">parent</a>.<a href="#36882" title="=&gt; Option[SuperEngine.this.Branch]">parentOption</a>, <a href="#36888" title="Int">currentLevel</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="Int" id="36886">level</a> = <a href="#36885" title="(currentParentOpt: Option[SuperEngine.this.Branch], currentLevel: Int)Int">calcLevel</a><span class="delimiter">(</span><a href="#36882" title="=&gt; Option[SuperEngine.this.Branch]">parentOption</a>, -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#36886" title="Int">level</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <a href="#36886" title="Int">level</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Branch extends SuperEngine.this.Node with ScalaObject" id="36476">Branch</a><a href="#36476" title="ScalaObject" class="delimiter">(</a><a title="Option[SuperEngine.this.Branch]" id="36903">parentOption</a>: <span title="Option[SuperEngine.this.Branch]">Option</span><span class="delimiter">[</span>Branch<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#36475" title="SuperEngine.this.Node">Node</a><span class="delimiter">(</span><a href="#36903" title="Option[SuperEngine.this.Branch]">parentOption</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="List[SuperEngine.this.Node]" id="36553">subNodes</a>: <span title="List[SuperEngine.this.Node]">List</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
  <span class="delimiter">}</span>

  case <span class="keyword">object</span> <a href="#36922" title="object SuperEngine.this.Trunk" id="36925">Trunk</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#36476" title="SuperEngine.this.Branch">Branch</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>

  case <span class="keyword">class</span> <a title="class TestLeaf extends SuperEngine.this.Node with ScalaObject with Product with Serializable" id="37067">TestLeaf</a><a href="#37067" title="ScalaObject" class="delimiter">(</a>
    <a title="SuperEngine.this.Branch" id="39833">parent</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>,
    <a title="String" id="39834">testName</a>: <span title="String">String</span>, <span class="comment">// The full test name</span>
    <a title="String" id="39835">testText</a>: <span title="String">String</span>, <span class="comment">// The last portion of the test name that showed up on an inner most nested level</span>
    <a title="T" id="39836">testFun</a>: <a href="#10401" title="T">T</a>
  <span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#36475" title="SuperEngine.this.Node">Node</a><span class="delimiter">(</span><span title="(x: SuperEngine.this.Branch)Some[SuperEngine.this.Branch]">Some</span><span class="delimiter">(</span><a href="#39833" title="SuperEngine.this.Branch">parent</a><span class="delimiter">)</span><span class="delimiter">)</span>

  case <span class="keyword">class</span> <a title="class InfoLeaf extends SuperEngine.this.Node with ScalaObject with Product with Serializable" id="37264">InfoLeaf</a><a href="#37264" title="ScalaObject" class="delimiter">(</a><a title="SuperEngine.this.Branch" id="37654">parent</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>, <a title="String" id="37655">message</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#36475" title="SuperEngine.this.Node">Node</a><span class="delimiter">(</span><span title="(x: SuperEngine.this.Branch)Some[SuperEngine.this.Branch]">Some</span><span class="delimiter">(</span><a href="#37654" title="SuperEngine.this.Branch">parent</a><span class="delimiter">)</span><span class="delimiter">)</span>

  case <span class="keyword">class</span> <a title="class DescriptionBranch extends SuperEngine.this.Branch with ScalaObject with Product with Serializable" id="37355">DescriptionBranch</a><a href="#37355" title="ScalaObject" class="delimiter">(</a>
    <a title="SuperEngine.this.Branch" id="39622">parent</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>,
    <a title="String" id="39623">descriptionText</a>: <span title="String">String</span>,
    <a title="Option[String]" id="39624">childPrefix</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="comment">// If defined, put it at the beginning of any child descriptionText or testText </span>
  <span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#36476" title="SuperEngine.this.Branch">Branch</a><span class="delimiter">(</span><span title="(x: SuperEngine.this.Branch)Some[SuperEngine.this.Branch]">Some</span><span class="delimiter">(</span><a href="#39622" title="SuperEngine.this.Branch">parent</a><span class="delimiter">)</span><span class="delimiter">)</span>   

  <span class="comment">// Access to the testNamesList, testsMap, and tagsMap must be synchronized, because the test methods are invoked by</span>
  <span class="comment">// the primary constructor, but testNames, tags, and runTest get invoked directly or indirectly</span>
  <span class="comment">// by run. When running tests concurrently with ScalaTest Runner, different threads can</span>
  <span class="comment">// instantiate and run the suite. Instead of synchronizing, I put them in an immutable Bundle object (and</span>
  <span class="comment">// all three collections--testNamesList, testsMap, and tagsMap--are immuable collections), then I put the Bundle</span>
  <span class="comment">// in an AtomicReference. Since the expected use case is the test method will be called</span>
  <span class="comment">// from the primary constructor, which will be all done by one thread, I just in effect use optimistic locking on the Bundle.</span>
  <span class="comment">// If two threads ever called test at the same time, they could get a ConcurrentModificationException.</span>
  <span class="comment">// Test names are in reverse order of test registration method invocations</span>
  <span class="keyword">class</span> <a title="class Bundle extends java.lang.Object with ScalaObject" id="36488">Bundle</a> <a href="#36488" title="ScalaObject" class="keyword">private</a><span class="delimiter">(</span>
    <span class="keyword">val</span> <a title="SuperEngine.this.Branch" id="37412">currentBranch</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>,
    <span class="keyword">val</span> <a title="List[String]" id="37413">testNamesList</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
    <span class="keyword">val</span> <a title="Map[String,SuperEngine.this.TestLeaf]" id="37414">testsMap</a>: <span title="Map[String,SuperEngine.this.TestLeaf]">Map</span><span class="delimiter">[</span>String, TestLeaf<span class="delimiter">]</span>,
    <span class="keyword">val</span> <a title="Map[String,Set[String]]" id="37415">tagsMap</a>: <span title="Map[String,Set[String]]">Map</span><span class="delimiter">[</span>String, Set<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>,
    <span class="keyword">val</span> <a title="Boolean" id="37416">registrationClosed</a>: <span title="Boolean">Boolean</span>
  <span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" id="36535">unpack</a> = <span title="(_1: SuperEngine.this.Branch, _2: List[String], _3: Map[String,SuperEngine.this.TestLeaf], _4: Map[String,Set[String]], _5: Boolean)(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</span><a href="#37412" title="=&gt; SuperEngine.this.Branch">currentBranch</a>, <a href="#37413" title="=&gt; List[String]">testNamesList</a>, <a href="#37414" title="=&gt; Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#37415" title="=&gt; Map[String,Set[String]]">tagsMap</a>, <a href="#37416" title="=&gt; Boolean">registrationClosed</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="object SuperEngine.this.Bundle" id="36489">Bundle</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle" id="36537">apply</a><span class="delimiter">(</span>
      <a title="SuperEngine.this.Branch" id="36538">currentBranch</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>,
      <a title="List[String]" id="36539">testNamesList</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
      <a title="Map[String,SuperEngine.this.TestLeaf]" id="36540">testsMap</a>: <span title="Map[String,SuperEngine.this.TestLeaf]">Map</span><span class="delimiter">[</span>String, TestLeaf<span class="delimiter">]</span>,
      <a title="Map[String,Set[String]]" id="36541">tagsMap</a>: <span title="Map[String,Set[String]]">Map</span><span class="delimiter">[</span>String, Set<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>,
      <a title="Boolean" id="36542">registrationClosed</a>: <span title="Boolean">Boolean</span>
    <span class="delimiter">)</span>: <a href="#36488" title="SuperEngine.this.Bundle">Bundle</a> =
      <span title="SuperEngine.this.Bundle" class="keyword">new</span> <a href="#36488" title="SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#36538" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#36539" title="List[String]">testNamesList</a>, <a href="#36540" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#36541" title="Map[String,Set[String]]">tagsMap</a>, <a href="#36542" title="Boolean">registrationClosed</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]" id="36491">atomic</a> = <span title="java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">AtomicReference</span><span class="delimiter">[</span>Bundle<span class="delimiter">]</span><span class="delimiter">(</span><a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#36925" title="object SuperEngine.this.Trunk">Trunk</a>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit" id="36493">updateAtomic</a><span class="delimiter">(</span><a title="SuperEngine.this.Bundle" id="37565">oldBundle</a>: <a href="#36488" title="SuperEngine.this.Bundle">Bundle</a>, <a title="SuperEngine.this.Bundle" id="37566">newBundle</a>: <a href="#36488" title="SuperEngine.this.Bundle">Bundle</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="37568">shouldBeOldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="(x$1: SuperEngine.this.Bundle)SuperEngine.this.Bundle">getAndSet</span><span class="delimiter">(</span><a href="#37566" title="SuperEngine.this.Bundle">newBundle</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#37568" title="SuperEngine.this.Bundle">shouldBeOldBundle</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#37565" title="SuperEngine.this.Bundle">oldBundle</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.util.ConcurrentModificationException" class="keyword">new</span> <span title="java.util.ConcurrentModificationException">ConcurrentModificationException</span><span class="delimiter">(</span><a href="Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><a href="#36878" title="String">concurrentBundleModResourceName</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class RegistrationInformer extends java.lang.Object with org.scalatest.Informer with ScalaObject" id="36494">RegistrationInformer</a> <a href="#36494" title="ScalaObject" class="keyword">extends</a> <a href="Informer.scala.html#9884" title="org.scalatest.Informer">Informer</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(message: String)Unit" id="36830">apply</a><span class="delimiter">(</span><a title="String" id="37584">message</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#37584" title="String">message</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span>
      <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="37587">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
      <span class="keyword">var</span> <a href="#37589" title="(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a><a href="#37588" title="SuperEngine.this.Branch" id="37589">currentBranch</a>, <a href="#37588" title="List[String]" id="37590">testNamesList</a>, <a href="#37588" title="Map[String,SuperEngine.this.TestLeaf]" id="37591">testsMap</a>, <a href="#37588" title="Map[String,Set[String]]" id="37592">tagsMap</a>, <a href="#37588" title="Boolean" id="37593">registrationClosed</a><span class="delimiter">)</span> = <a href="#37587" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>
      <a href="#37589" title="SuperEngine.this.Branch">currentBranch</a>.<a href="#36553" title="(x$1: List[SuperEngine.this.Node])Unit">subNodes</a> <span title="(x: SuperEngine.this.Node)List[SuperEngine.this.Node]">::=</span> <a href="#37264" title="(parent: SuperEngine.this.Branch, message: String)SuperEngine.this.InfoLeaf">InfoLeaf</a><span class="delimiter">(</span><a href="#37589" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#37584" title="String">message</a><span class="delimiter">)</span>
      <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#37587" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#37589" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#37590" title="List[String]">testNamesList</a>, <a href="#37591" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#37592" title="Map[String,Set[String]]">tagsMap</a>, <a href="#37593" title="Boolean">registrationClosed</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// The informer will be a registration informer until run is called for the first time. (This</span>
  <span class="comment">// is the registration phase of a FunSuite's lifecycle.)</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]" id="36495">atomicInformer</a> = <span title="java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]">AtomicReference</span><span class="delimiter">[</span>Informer<span class="delimiter">]</span><span class="delimiter">(</span><span title="SuperEngine.this.RegistrationInformer" class="keyword">new</span> <a href="#36494" title="SuperEngine.this.RegistrationInformer">RegistrationInformer</a><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="zombieInformer extends java.lang.Object with org.scalatest.Informer" id="36497">zombieInformer</a> =
    <a href="#36831" title="java.lang.Object with org.scalatest.Informer{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalatest.Informer" id="36831">Informer</a> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">val</span> <a title="String" id="36833">complaint</a> = <a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cantCallInfoNow&quot;)" class="string">&quot;cantCallInfoNow&quot;</span>, <a href="#36879" title="String">simpleClassName</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(message: String)Unit" id="36835">apply</a><span class="delimiter">(</span><a title="String" id="36836">message</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36836" title="String">message</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalStateException" class="keyword">new</span> <span title="java.lang.IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="#36833" title="=&gt; String">complaint</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(testName: String, testTags: org.scalatest.Tag*)Unit" id="36499">checkTestOrIgnoreParamsForNull</a><span class="delimiter">(</span><a title="String" id="37662">testName</a>: <span title="String">String</span>, <a title="org.scalatest.Tag*" id="37663">testTags</a>: <span title="org.scalatest.Tag*">Tag</span>*<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#37662" title="String">testName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;testName was null&quot;)" class="string">&quot;testName was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#37663" title="org.scalatest.Tag*">testTags</a>.<span title="(p: org.scalatest.Tag =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#37676" title="org.scalatest.Tag">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;a test tag was null&quot;)" class="string">&quot;a test tag was null&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(theSuite: org.scalatest.Suite, testName: String, reporter: org.scalatest.Reporter, stopper: org.scalatest.Stopper, configMap: Map[String,Any], tracker: org.scalatest.Tracker, includeIcon: Boolean, invokeWithFixture: SuperEngine.this.TestLeaf =&gt; Unit)Unit" id="36500">runTestImpl</a><span class="delimiter">(</span>
    <a title="org.scalatest.Suite" id="37687">theSuite</a>: <a href="Suite.scala.html#10073" title="org.scalatest.Suite">Suite</a>,
    <a title="String" id="37688">testName</a>: <span title="String">String</span>,
    <a title="org.scalatest.Reporter" id="37689">reporter</a>: <a href="Reporter.scala.html#10103" title="org.scalatest.Reporter">Reporter</a>,
    <a title="org.scalatest.Stopper" id="37690">stopper</a>: <a href="Stopper.scala.html#9545" title="org.scalatest.Stopper">Stopper</a>,
    <a title="Map[String,Any]" id="37691">configMap</a>: <span title="Map[String,Any]">Map</span><span class="delimiter">[</span>String, Any<span class="delimiter">]</span>,
    <a title="org.scalatest.Tracker" id="37692">tracker</a>: <a href="Tracker.scala.html#9878" title="org.scalatest.Tracker">Tracker</a>,
    <a title="Boolean" id="37693">includeIcon</a>: <span title="Boolean">Boolean</span>,
    <a title="SuperEngine.this.TestLeaf =&gt; Unit" id="37694">invokeWithFixture</a>: TestLeaf =&gt; Unit
  <span class="delimiter">)</span> <span class="delimiter">{</span>

    <a href="Suite.scala.html#27215" title="(testName: String, reporter: org.scalatest.Reporter, stopper: org.scalatest.Stopper, configMap: Map[String,Any], tracker: org.scalatest.Tracker)Unit">checkRunTestParamsForNull</a><span class="delimiter">(</span><a href="#37688" title="String">testName</a>, <a href="#37689" title="org.scalatest.Reporter">reporter</a>, <a href="#37690" title="org.scalatest.Stopper">stopper</a>, <a href="#37691" title="Map[String,Any]">configMap</a>, <a href="#37692" title="org.scalatest.Tracker">tracker</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a href="#37697" title="(org.scalatest.Stopper, ScalaObject with org.scalatest.Reporter, Boolean, Option[org.scalatest.TestRerunner], Long)" class="delimiter">(</a><a href="#37696" title="org.scalatest.Stopper" id="37697">stopRequested</a>, <a href="#37696" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter" id="37698">report</a>, <a href="#37696" title="Boolean" id="37699">hasPublicNoArgConstructor</a>, <a href="#37696" title="Option[org.scalatest.TestRerunner]" id="37700">rerunnable</a>, <a href="#37696" title="Long" id="37701">testStartTime</a><span class="delimiter">)</span> =
      <a href="#37687" title="org.scalatest.Suite">theSuite</a>.<a href="Suite.scala.html#15666" title="(stopper: org.scalatest.Stopper, reporter: org.scalatest.Reporter, testName: String)(org.scalatest.Stopper, ScalaObject with org.scalatest.Reporter, Boolean, Option[org.scalatest.TestRerunner], Long)">getRunTestGoodies</a><span title="(org.scalatest.Stopper, ScalaObject with org.scalatest.Reporter, Boolean, Option[org.scalatest.TestRerunner], Long) @unchecked" class="delimiter">(</span><a href="#37690" title="org.scalatest.Stopper">stopper</a>, <a href="#37689" title="org.scalatest.Reporter">reporter</a>, <a href="#37688" title="String">testName</a><span class="delimiter">)</span>

    <a href="Suite.scala.html#27221" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: String, rerunnable: Option[org.scalatest.Rerunner])Unit">reportTestStarting</a><span class="delimiter">(</span><a href="#37687" title="org.scalatest.Suite">theSuite</a>, <a href="#37698" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#37692" title="org.scalatest.Tracker">tracker</a>, <a href="#37688" title="String">testName</a>, <a href="#37700" title="Option[org.scalatest.TestRerunner]">rerunnable</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>.<a href="#37414" title="=&gt; Map[String,SuperEngine.this.TestLeaf]">testsMap</a>.<span title="(key: String)Boolean">contains</span><span class="delimiter">(</span><a href="#37688" title="String">testName</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.IllegalArgumentException" class="keyword">new</span> <span title="java.lang.IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;No test in this suite has name: \&quot;&quot;)" class="string">&quot;No test in this suite has name: \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37688" title="String">testName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.TestLeaf" id="37702">theTest</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>.<a href="#37414" title="(key: String)SuperEngine.this.TestLeaf">testsMap</a><span class="delimiter">(</span><a href="#37688" title="String">testName</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="String" id="37703">testTextWithOptionalPrefix</a> = <a href="#36502" title="(branch: SuperEngine.this.Branch, testText: String)String">prependChildPrefix</a><span class="delimiter">(</span><a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a>.<a href="#39833" title="=&gt; SuperEngine.this.Branch">parent</a>, <a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a>.<a href="#39835" title="=&gt; String">testText</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="org.scalatest.events.IndentedText" id="37704">formatter</a> = <a href="Suite.scala.html#27216" title="(testText: String, level: Int, includeIcon: Boolean)org.scalatest.events.IndentedText">getIndentedText</a><span class="delimiter">(</span><a href="#37703" title="String">testTextWithOptionalPrefix</a>, <a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a>.<a href="#36548" title="=&gt; Int">indentationLevel</a>, <a href="#37693" title="Boolean">includeIcon</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.scalatest.MessageRecordingInformer2" id="37705">informerForThisTest</a> =
      <a href="ConcurrentInformer.scala.html#33148" title="(fire: (String, Boolean, Boolean) =&gt; Unit)org.scalatest.MessageRecordingInformer2">MessageRecordingInformer2</a><span class="delimiter">(</span>
        <span class="delimiter">(</span><a title="String" id="39117">message</a>, <a title="Boolean" id="39118">isConstructingThread</a>, <a title="Boolean" id="39119">testWasPending</a><span class="delimiter">)</span> =&gt; <a href="Suite.scala.html#27225" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: Option[String], message: String, level: Int, includeNameInfo: Boolean, includeIcon: Boolean, aboutAPendingTest: Option[Boolean])Unit">reportInfoProvided</a><span class="delimiter">(</span><a href="#37687" title="org.scalatest.Suite">theSuite</a>, <a href="#37698" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#37692" title="org.scalatest.Tracker">tracker</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#37688" title="String">testName</a><span class="delimiter">)</span>, <a href="#39117" title="String">message</a>, <a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a>.<a href="#36548" title="=&gt; Int">indentationLevel</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#39118" title="Boolean">isConstructingThread</a>, <a href="#37693" title="Boolean">includeIcon</a>, <span title="(x: Boolean)Some[Boolean]">Some</span><span class="delimiter">(</span><a href="#39119" title="Boolean">testWasPending</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.scalatest.Informer" id="37706">oldInformer</a> = <a href="#36495" title="=&gt; java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]">atomicInformer</a>.<span title="(x$1: org.scalatest.Informer)org.scalatest.Informer">getAndSet</span><span class="delimiter">(</span><a href="#37705" title="org.scalatest.MessageRecordingInformer2">informerForThisTest</a><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="Boolean" id="37707">testWasPending</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>

      <a href="#37694" title="(v1: SuperEngine.this.TestLeaf)Unit">invokeWithFixture</a><span class="delimiter">(</span><a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Long" id="39143">duration</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span> <span title="(x: Long)Long">-</span> <a href="#37701" title="Long">testStartTime</a>
      <a href="Suite.scala.html#27223" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: String, duration: Long, formatter: org.scalatest.events.Formatter, rerunnable: Option[org.scalatest.Rerunner])Unit">reportTestSucceeded</a><span class="delimiter">(</span><a href="#37687" title="org.scalatest.Suite">theSuite</a>, <a href="#37698" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#37692" title="org.scalatest.Tracker">tracker</a>, <a href="#37688" title="String">testName</a>, <a href="#39143" title="Long">duration</a>, <a href="#37704" title="org.scalatest.events.IndentedText">formatter</a>, <a href="#37700" title="Option[org.scalatest.TestRerunner]">rerunnable</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> 
      <span class="keyword">case</span> <span title="Unit">_</span>: <a href="TestPendingException.scala.html#9629" title="org.scalatest.TestPendingException">TestPendingException</a> =&gt;
        <a href="Suite.scala.html#27222" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: String, formatter: org.scalatest.events.Formatter)Unit">reportTestPending</a><span class="delimiter">(</span><a href="#37687" title="org.scalatest.Suite">theSuite</a>, <a href="#37698" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#37692" title="org.scalatest.Tracker">tracker</a>, <a href="#37688" title="String">testName</a>, <a href="#37704" title="org.scalatest.events.IndentedText">formatter</a><span class="delimiter">)</span>
        <a href="#37707" title="Boolean">testWasPending</a> = <span title="Boolean(true)" class="keyword">true</span> <span class="comment">// Set so info's printed out in the finally clause show up yellow</span>
      <span class="keyword">case</span> <a title="Unit" id="39164">e</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="Suite.scala.html#27211" title="(throwable: Throwable)Boolean">anErrorThatShouldCauseAnAbort</a><span class="delimiter">(</span><a href="#39164" title="java.lang.Throwable">e</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="Long" id="39215">duration</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span> <span title="(x: Long)Long">-</span> <a href="#37701" title="Long">testStartTime</a>
        <a href="Suite.scala.html#27220" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, throwable: Throwable, testName: String, testText: String, rerunnable: Option[org.scalatest.Rerunner], tracker: org.scalatest.Tracker, duration: Long, level: Int, includeIcon: Boolean)Unit">reportTestFailed</a><span class="delimiter">(</span><a href="#37687" title="org.scalatest.Suite">theSuite</a>, <a href="#37698" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#39164" title="java.lang.Throwable">e</a>, <a href="#37688" title="String">testName</a>, <a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a>.<a href="#39835" title="=&gt; String">testText</a>, <a href="#37700" title="Option[org.scalatest.TestRerunner]">rerunnable</a>, <a href="#37692" title="org.scalatest.Tracker">tracker</a>, <a href="#39215" title="Long">duration</a>, <a href="#37702" title="SuperEngine.this.TestLeaf">theTest</a>.<a href="#36548" title="=&gt; Int">indentationLevel</a>, <a href="#37693" title="Boolean">includeIcon</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Nothing" id="39231">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#39231" title="java.lang.Throwable">e</a>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#37705" title="org.scalatest.MessageRecordingInformer2">informerForThisTest</a>.<a href="ConcurrentInformer.scala.html#32224" title="(testWasPending: Boolean)Unit">fireRecordedMessages</a><span class="delimiter">(</span><a href="#37707" title="Boolean">testWasPending</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="org.scalatest.Informer" id="39232">shouldBeInformerForThisTest</a> = <a href="#36495" title="=&gt; java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]">atomicInformer</a>.<span title="(x$1: org.scalatest.Informer)org.scalatest.Informer">getAndSet</span><span class="delimiter">(</span><a href="#37706" title="org.scalatest.Informer">oldInformer</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="39233">swapAndCompareSucceeded</a> = <a href="#39232" title="org.scalatest.Informer">shouldBeInformerForThisTest</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#37705" title="org.scalatest.MessageRecordingInformer2">informerForThisTest</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#39233" title="Boolean">swapAndCompareSucceeded</a><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.util.ConcurrentModificationException" class="keyword">new</span> <span title="java.util.ConcurrentModificationException">ConcurrentModificationException</span><span class="delimiter">(</span><a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;concurrentInformerMod&quot;)" class="string">&quot;concurrentInformerMod&quot;</span>, <a href="#37687" title="org.scalatest.Suite">theSuite</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(theSuite: org.scalatest.Suite, branch: SuperEngine.this.Branch, report: org.scalatest.Reporter, stopRequested: org.scalatest.Stopper, filter: org.scalatest.Filter, configMap: Map[String,Any], tracker: org.scalatest.Tracker, includeIcon: Boolean, runTest: (String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit)Unit" id="36501">runTestsInBranch</a><span class="delimiter">(</span>
    <a title="org.scalatest.Suite" id="39244">theSuite</a>: <a href="Suite.scala.html#10073" title="org.scalatest.Suite">Suite</a>,
    <a title="SuperEngine.this.Branch" id="39245">branch</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>,
    <a title="org.scalatest.Reporter" id="39246">report</a>: <a href="Reporter.scala.html#10103" title="org.scalatest.Reporter">Reporter</a>,
    <a title="org.scalatest.Stopper" id="39247">stopRequested</a>: <a href="Stopper.scala.html#9545" title="org.scalatest.Stopper">Stopper</a>,
    <a title="org.scalatest.Filter" id="39248">filter</a>: <a href="Filter.scala.html#10079" title="org.scalatest.Filter">Filter</a>,
    <a title="Map[String,Any]" id="39249">configMap</a>: <span title="Map[String,Any]">Map</span><span class="delimiter">[</span>String, Any<span class="delimiter">]</span>,
    <a title="org.scalatest.Tracker" id="39250">tracker</a>: <a href="Tracker.scala.html#9878" title="org.scalatest.Tracker">Tracker</a>,
    <a title="Boolean" id="39251">includeIcon</a>: <span title="Boolean">Boolean</span>,
    <a title="(String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit" id="39252">runTest</a>: <span class="delimiter">(</span>String, Reporter, Stopper, Map<span class="delimiter">[</span>String, Any<span class="delimiter">]</span>, Tracker<span class="delimiter">)</span> =&gt; Unit
  <span class="delimiter">)</span> <span class="delimiter">{</span>

    <a href="#39245" title="SuperEngine.this.Branch">branch</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>

      <span class="keyword">case</span> <a title="Unit" id="39271">desc</a> @ DescriptionBranch<span class="delimiter">(</span><a title="SuperEngine.this.Branch" id="39272">parent</a>, <a title="String" id="39273">descriptionText</a>, _<span class="delimiter">)</span> =&gt;

        <span class="keyword">val</span> <a title="String" id="39274">descriptionTextWithOptionalPrefix</a> = <a href="#36502" title="(branch: SuperEngine.this.Branch, testText: String)String">prependChildPrefix</a><span class="delimiter">(</span><a href="#39272" title="SuperEngine.this.Branch">parent</a>, <a href="#39273" title="String">descriptionText</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="39275">indentationLevel</a> = <a href="#39271" title="SuperEngine.this.DescriptionBranch">desc</a>.<a href="#36548" title="=&gt; Int">indentationLevel</a>
        <a href="Suite.scala.html#27225" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: Option[String], message: String, level: Int, includeNameInfo: Boolean, includeIcon: Boolean, aboutAPendingTest: Option[Boolean])Unit">reportInfoProvided</a><span class="delimiter">(</span><a href="#39244" title="org.scalatest.Suite">theSuite</a>, <a href="#39246" title="org.scalatest.Reporter">report</a>, <a href="#39250" title="org.scalatest.Tracker">tracker</a>, <span title="object None">None</span>, <a href="#39274" title="String">descriptionTextWithOptionalPrefix</a>, <a href="#39275" title="Int">indentationLevel</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#36925" title="Unit">Trunk</a> =&gt;
    <span class="delimiter">}</span>


    <a href="#39245" title="SuperEngine.this.Branch">branch</a>.<a href="#36553" title="=&gt; List[SuperEngine.this.Node]">subNodes</a>.<span title="=&gt; List[SuperEngine.this.Node]">reverse</span>.<span title="(f: SuperEngine.this.Node =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="SuperEngine.this.Node" id="39323">node</a> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="Stopper.scala.html#17044" title="()Boolean">stopRequested</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#39323" title="SuperEngine.this.Node">node</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Unit" id="39326">testLeaf</a> @ TestLeaf<span class="delimiter">(</span>_, <a title="String" id="39327">testName</a>, <a title="String" id="39328">testText</a>, _<span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a href="#39330" title="(Boolean, Boolean)" class="delimiter">(</a><a href="#39329" title="Boolean" id="39330">filterTest</a>, <a href="#39329" title="Boolean" id="39331">ignoreTest</a><span class="delimiter">)</span> = <a href="Filter.scala.html#19399" title="(testName: String, tags: Map[String,Set[String]])(Boolean, Boolean)">filter</a><span title="(Boolean, Boolean) @unchecked" class="delimiter">(</span><a href="#39327" title="String">testName</a>, <a href="#39244" title="org.scalatest.Suite">theSuite</a>.<a href="Suite.scala.html#15661" title="=&gt; Map[String,Set[String]]">tags</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#39330" title="Boolean">filterTest</a><span class="delimiter">)</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39331" title="Boolean">ignoreTest</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="String" id="39373">testTextWithOptionalPrefix</a> = <a href="#36502" title="(branch: SuperEngine.this.Branch, testText: String)String">prependChildPrefix</a><span class="delimiter">(</span><a href="#39245" title="SuperEngine.this.Branch">branch</a>, <a href="#39328" title="String">testText</a><span class="delimiter">)</span>
                <a href="Suite.scala.html#27224" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: String, testText: String, level: Int)Unit">reportTestIgnored</a><span class="delimiter">(</span><a href="#39244" title="org.scalatest.Suite">theSuite</a>, <a href="#39246" title="org.scalatest.Reporter">report</a>, <a href="#39250" title="org.scalatest.Tracker">tracker</a>, <a href="#39327" title="String">testName</a>, <a href="#39373" title="String">testTextWithOptionalPrefix</a>, <a href="#39326" title="SuperEngine.this.TestLeaf">testLeaf</a>.<a href="#36548" title="=&gt; Int">indentationLevel</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
              <span class="keyword">else</span>
                <a href="#39252" title="(v1: String, v2: org.scalatest.Reporter, v3: org.scalatest.Stopper, v4: Map[String,Any], v5: org.scalatest.Tracker)Unit">runTest</a><span class="delimiter">(</span><a href="#39327" title="String">testName</a>, <a href="#39246" title="org.scalatest.Reporter">report</a>, <a href="#39247" title="org.scalatest.Stopper">stopRequested</a>, <a href="#39249" title="Map[String,Any]">configMap</a>, <a href="#39250" title="org.scalatest.Tracker">tracker</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <a title="Unit" id="39386">infoLeaf</a> @ InfoLeaf<span class="delimiter">(</span>_, <a title="String" id="39387">message</a><span class="delimiter">)</span> =&gt;
            <a href="Suite.scala.html#27225" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: Option[String], message: String, level: Int, includeNameInfo: Boolean, includeIcon: Boolean, aboutAPendingTest: Option[Boolean])Unit">reportInfoProvided</a><span class="delimiter">(</span><a href="#39244" title="org.scalatest.Suite">theSuite</a>, <a href="#39246" title="org.scalatest.Reporter">report</a>, <a href="#39250" title="org.scalatest.Tracker">tracker</a>, <span title="object None">None</span>, <a href="#39387" title="String">message</a>, <a href="#39386" title="SuperEngine.this.InfoLeaf">infoLeaf</a>.<a href="#36548" title="=&gt; Int">indentationLevel</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#39251" title="Boolean">includeIcon</a><span class="delimiter">)</span>

          <span class="keyword">case</span> <a title="Unit" id="39388">branch</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a> =&gt; <a href="#36501" title="(theSuite: org.scalatest.Suite, branch: SuperEngine.this.Branch, report: org.scalatest.Reporter, stopRequested: org.scalatest.Stopper, filter: org.scalatest.Filter, configMap: Map[String,Any], tracker: org.scalatest.Tracker, includeIcon: Boolean, runTest: (String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit)Unit">runTestsInBranch</a><span class="delimiter">(</span><a href="#39244" title="org.scalatest.Suite">theSuite</a>, <a href="#39388" title="SuperEngine.this.Branch">branch</a>, <a href="#39246" title="org.scalatest.Reporter">report</a>, <a href="#39247" title="org.scalatest.Stopper">stopRequested</a>, <a href="#39248" title="org.scalatest.Filter">filter</a>, <a href="#39249" title="Map[String,Any]">configMap</a>, <a href="#39250" title="org.scalatest.Tracker">tracker</a>, <a href="#39251" title="Boolean">includeIcon</a>, <a href="#39252" title="(String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit">runTest</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(branch: SuperEngine.this.Branch, testText: String)String" id="36502">prependChildPrefix</a><span class="delimiter">(</span><a title="SuperEngine.this.Branch" id="38030">branch</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a>, <a title="String" id="38031">testText</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> =
    <a href="#38030" title="SuperEngine.this.Branch">branch</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="String">DescriptionBranch</span><span class="delimiter">(</span>_, _, Some<span class="delimiter">(</span><a title="String" id="39391">cp</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixSuffix&quot;)" class="string">&quot;prefixSuffix&quot;</span>, <a href="#39391" title="String">cp</a>, <a href="#38031" title="String">testText</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#38031" title="String">testText</a>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(theSuite: org.scalatest.Suite, testName: Option[String], reporter: org.scalatest.Reporter, stopper: org.scalatest.Stopper, filter: org.scalatest.Filter, configMap: Map[String,Any], distributor: Option[org.scalatest.Distributor], tracker: org.scalatest.Tracker, info: String =&gt; Unit, includeIcon: Boolean, runTest: (String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit)Unit" id="36503">runTestsImpl</a><span class="delimiter">(</span>
    <a title="org.scalatest.Suite" id="39398">theSuite</a>: <a href="Suite.scala.html#10073" title="org.scalatest.Suite">Suite</a>,
    <a title="Option[String]" id="39399">testName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
    <a title="org.scalatest.Reporter" id="39400">reporter</a>: <a href="Reporter.scala.html#10103" title="org.scalatest.Reporter">Reporter</a>,
    <a title="org.scalatest.Stopper" id="39401">stopper</a>: <a href="Stopper.scala.html#9545" title="org.scalatest.Stopper">Stopper</a>,
    <a title="org.scalatest.Filter" id="39402">filter</a>: <a href="Filter.scala.html#10079" title="org.scalatest.Filter">Filter</a>,
    <a title="Map[String,Any]" id="39403">configMap</a>: <span title="Map[String,Any]">Map</span><span class="delimiter">[</span>String, Any<span class="delimiter">]</span>,
    <a title="Option[org.scalatest.Distributor]" id="39404">distributor</a>: <span title="Option[org.scalatest.Distributor]">Option</span><span class="delimiter">[</span>Distributor<span class="delimiter">]</span>,
    <a title="org.scalatest.Tracker" id="39405">tracker</a>: <a href="Tracker.scala.html#9878" title="org.scalatest.Tracker">Tracker</a>,
    <a title="String =&gt; Unit" id="39406">info</a>: String =&gt; Unit,
    <a title="Boolean" id="39407">includeIcon</a>: <span title="Boolean">Boolean</span>,
    <a title="(String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit" id="39408">runTest</a>: <span class="delimiter">(</span>String, Reporter, Stopper, Map<span class="delimiter">[</span>String, Any<span class="delimiter">]</span>, Tracker<span class="delimiter">)</span> =&gt; Unit
  <span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39399" title="Option[String]">testName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;testName was null&quot;)" class="string">&quot;testName was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39400" title="org.scalatest.Reporter">reporter</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;reporter was null&quot;)" class="string">&quot;reporter was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39401" title="org.scalatest.Stopper">stopper</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;stopper was null&quot;)" class="string">&quot;stopper was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39402" title="org.scalatest.Filter">filter</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;filter was null&quot;)" class="string">&quot;filter was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39403" title="Map[String,Any]">configMap</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;configMap was null&quot;)" class="string">&quot;configMap was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39404" title="Option[org.scalatest.Distributor]">distributor</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;distributor was null&quot;)" class="string">&quot;distributor was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39405" title="org.scalatest.Tracker">tracker</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;tracker was null&quot;)" class="string">&quot;tracker was null&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.scalatest.Stopper" id="39410">stopRequested</a> = <a href="#39401" title="org.scalatest.Stopper">stopper</a>

    <span class="comment">// Wrap any non-DispatchReporter, non-CatchReporter in a CatchReporter,</span>
    <span class="comment">// so that exceptions are caught and transformed</span>
    <span class="comment">// into error messages on the standard error stream.</span>
    <span class="keyword">val</span> <a title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter" id="39411">report</a> = <a href="#39398" title="org.scalatest.Suite">theSuite</a>.<a href="Suite.scala.html#15676" title="(reporter: org.scalatest.Reporter)ScalaObject with org.scalatest.Reporter">wrapReporterIfNecessary</a><span class="delimiter">(</span><a href="#39400" title="org.scalatest.Reporter">reporter</a><span class="delimiter">)</span>

    <span class="comment">// If a testName is passed to run, just run that, else run the tests returned</span>
    <span class="comment">// by testNames.</span>
    <a href="#39399" title="Option[String]">testName</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="String" id="39455">tn</a><span class="delimiter">)</span> =&gt; <a href="#39408" title="(v1: String, v2: org.scalatest.Reporter, v3: org.scalatest.Stopper, v4: Map[String,Any], v5: org.scalatest.Tracker)Unit">runTest</a><span class="delimiter">(</span><a href="#39455" title="String">tn</a>, <a href="#39411" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#39410" title="org.scalatest.Stopper">stopRequested</a>, <a href="#39403" title="Map[String,Any]">configMap</a>, <a href="#39405" title="org.scalatest.Tracker">tracker</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">None</span> =&gt; <a href="#36501" title="(theSuite: org.scalatest.Suite, branch: SuperEngine.this.Branch, report: org.scalatest.Reporter, stopRequested: org.scalatest.Stopper, filter: org.scalatest.Filter, configMap: Map[String,Any], tracker: org.scalatest.Tracker, includeIcon: Boolean, runTest: (String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit)Unit">runTestsInBranch</a><span class="delimiter">(</span><a href="#39398" title="org.scalatest.Suite">theSuite</a>, <a href="#36925" title="object SuperEngine.this.Trunk">Trunk</a>, <a href="#39411" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#39410" title="org.scalatest.Stopper">stopRequested</a>, <a href="#39402" title="org.scalatest.Filter">filter</a>, <a href="#39403" title="Map[String,Any]">configMap</a>, <a href="#39405" title="org.scalatest.Tracker">tracker</a>, <a href="#39407" title="Boolean">includeIcon</a>, <a href="#39408" title="(String, org.scalatest.Reporter, org.scalatest.Stopper, Map[String,Any], org.scalatest.Tracker) =&gt; Unit">runTest</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(theSuite: org.scalatest.Suite, testName: Option[String], reporter: org.scalatest.Reporter, stopper: org.scalatest.Stopper, filter: org.scalatest.Filter, configMap: Map[String,Any], distributor: Option[org.scalatest.Distributor], tracker: org.scalatest.Tracker, superRun: (Option[String], org.scalatest.Reporter, org.scalatest.Stopper, org.scalatest.Filter, Map[String,Any], Option[org.scalatest.Distributor], org.scalatest.Tracker) =&gt; Unit)Unit" id="36504">runImpl</a><span class="delimiter">(</span>
    <a title="org.scalatest.Suite" id="39461">theSuite</a>: <a href="Suite.scala.html#10073" title="org.scalatest.Suite">Suite</a>,
    <a title="Option[String]" id="39462">testName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
    <a title="org.scalatest.Reporter" id="39463">reporter</a>: <a href="Reporter.scala.html#10103" title="org.scalatest.Reporter">Reporter</a>,
    <a title="org.scalatest.Stopper" id="39464">stopper</a>: <a href="Stopper.scala.html#9545" title="org.scalatest.Stopper">Stopper</a>,
    <a title="org.scalatest.Filter" id="39465">filter</a>: <a href="Filter.scala.html#10079" title="org.scalatest.Filter">Filter</a>,
    <a title="Map[String,Any]" id="39466">configMap</a>: <span title="Map[String,Any]">Map</span><span class="delimiter">[</span>String, Any<span class="delimiter">]</span>,
    <a title="Option[org.scalatest.Distributor]" id="39467">distributor</a>: <span title="Option[org.scalatest.Distributor]">Option</span><span class="delimiter">[</span>Distributor<span class="delimiter">]</span>,
    <a title="org.scalatest.Tracker" id="39468">tracker</a>: <a href="Tracker.scala.html#9878" title="org.scalatest.Tracker">Tracker</a>,
    <a title="(Option[String], org.scalatest.Reporter, org.scalatest.Stopper, org.scalatest.Filter, Map[String,Any], Option[org.scalatest.Distributor], org.scalatest.Tracker) =&gt; Unit" id="39469">superRun</a>: <span class="delimiter">(</span>Option<span class="delimiter">[</span>String<span class="delimiter">]</span>, Reporter, Stopper, Filter, Map<span class="delimiter">[</span>String, Any<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Distributor<span class="delimiter">]</span>, Tracker<span class="delimiter">)</span> =&gt; Unit
  <span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.scalatest.Stopper" id="39492">stopRequested</a> = <a href="#39464" title="org.scalatest.Stopper">stopper</a>

    <span class="comment">// Set the flag that indicates registration is closed (because run has now been invoked),</span>
    <span class="comment">// which will disallow any further invocations of &quot;test&quot; or &quot;ignore&quot; with</span>
    <span class="comment">// an RegistrationClosedException.    </span>
    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="39493">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
    <span class="keyword">val</span> <a href="#39495" title="(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a><a href="#39494" title="SuperEngine.this.Branch" id="39495">currentBranch</a>, <a href="#39494" title="List[String]" id="39496">testNamesList</a>, <a href="#39494" title="Map[String,SuperEngine.this.TestLeaf]" id="39497">testsMap</a>, <a href="#39494" title="Map[String,Set[String]]" id="39498">tagsMap</a>, <a href="#39494" title="Boolean" id="39499">registrationClosed</a><span class="delimiter">)</span> = <a href="#39493" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#39499" title="Boolean">registrationClosed</a><span class="delimiter">)</span>
      <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#39493" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#39495" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#39496" title="List[String]">testNamesList</a>, <a href="#39497" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#39498" title="Map[String,Set[String]]">tagsMap</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter" id="39500">report</a> = <a href="#39461" title="org.scalatest.Suite">theSuite</a>.<a href="Suite.scala.html#15676" title="(reporter: org.scalatest.Reporter)ScalaObject with org.scalatest.Reporter">wrapReporterIfNecessary</a><span class="delimiter">(</span><a href="#39463" title="org.scalatest.Reporter">reporter</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.scalatest.ConcurrentInformer2" id="39501">informerForThisSuite</a> =
      <a href="ConcurrentInformer.scala.html#32210" title="(fire: (String, Boolean) =&gt; Unit)org.scalatest.ConcurrentInformer2">ConcurrentInformer2</a><span class="delimiter">(</span>
        <span class="delimiter">(</span><a title="String" id="39529">message</a>, <a title="Boolean" id="39530">isConstructingThread</a><span class="delimiter">)</span> =&gt; <a href="Suite.scala.html#27225" title="(theSuite: org.scalatest.Suite, report: org.scalatest.Reporter, tracker: org.scalatest.Tracker, testName: Option[String], message: String, level: Int, includeNameInfo: Boolean, includeIcon: Boolean, aboutAPendingTest: Option[Boolean])Unit">reportInfoProvided</a><span class="delimiter">(</span><a href="#39461" title="org.scalatest.Suite">theSuite</a>, <a href="#39500" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#39468" title="org.scalatest.Tracker">tracker</a>, <span title="object None">None</span>, <a href="#39529" title="String">message</a>, <span title="Int(1)" class="int">1</span>, <a href="#39530" title="Boolean">isConstructingThread</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <a href="#36495" title="=&gt; java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]">atomicInformer</a>.<span title="(x$1: org.scalatest.Informer)Unit">set</span><span class="delimiter">(</span><a href="#39501" title="org.scalatest.ConcurrentInformer2">informerForThisSuite</a><span class="delimiter">)</span>

    <span class="keyword">var</span> <a title="Boolean" id="39502">swapAndCompareSucceeded</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#39469" title="(v1: Option[String], v2: org.scalatest.Reporter, v3: org.scalatest.Stopper, v4: org.scalatest.Filter, v5: Map[String,Any], v6: Option[org.scalatest.Distributor], v7: org.scalatest.Tracker)Unit">superRun</a><span class="delimiter">(</span><a href="#39462" title="Option[String]">testName</a>, <a href="#39500" title="&lt;none&gt; extends ScalaObject with org.scalatest.Reporter">report</a>, <a href="#39492" title="org.scalatest.Stopper">stopRequested</a>, <a href="#39465" title="org.scalatest.Filter">filter</a>, <a href="#39466" title="Map[String,Any]">configMap</a>, <a href="#39467" title="Option[org.scalatest.Distributor]">distributor</a>, <a href="#39468" title="org.scalatest.Tracker">tracker</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.scalatest.Informer" id="39541">shouldBeInformerForThisSuite</a> = <a href="#36495" title="=&gt; java.util.concurrent.atomic.AtomicReference[org.scalatest.Informer]">atomicInformer</a>.<span title="(x$1: org.scalatest.Informer)org.scalatest.Informer">getAndSet</span><span class="delimiter">(</span><a href="#36497" title="=&gt; java.lang.Object with org.scalatest.Informer">zombieInformer</a><span class="delimiter">)</span>
      <a href="#39502" title="Boolean">swapAndCompareSucceeded</a> = <a href="#39541" title="org.scalatest.Informer">shouldBeInformerForThisSuite</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#39501" title="org.scalatest.ConcurrentInformer2">informerForThisSuite</a>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#39502" title="Boolean">swapAndCompareSucceeded</a><span class="delimiter">)</span>  <span class="comment">// Do outside finally to workaround Scala compiler bug</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.util.ConcurrentModificationException" class="keyword">new</span> <span title="java.util.ConcurrentModificationException">ConcurrentModificationException</span><span class="delimiter">(</span><a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;concurrentInformerMod&quot;)" class="string">&quot;concurrentInformerMod&quot;</span>, <a href="#39461" title="org.scalatest.Suite">theSuite</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/*
  def describeImpl(description: String, fun: =&gt; Unit, registrationClosedResource: String, sourceFile: String, methodName: String) {

    val oldBundle = atomic.get
    val (currentBranch, testNamesList, testsMap, tagsMap, registrationClosed) = oldBundle.unpack

    if (registrationClosed)
      throw new TestRegistrationClosedException(Resources(registrationClosedResource), getStackDepth(sourceFile, methodName))

    val oldBranch = currentBranch
    val newBranch = DescriptionBranch(currentBranch, description, None)
    oldBranch.subNodes ::= newBranch

    // Update atomic, making the current branch to the new branch
    updateAtomic(oldBundle, Bundle(newBranch, testNamesList, testsMap, tagsMap, registrationClosed))

    fun // Execute the function

    { // Put the old branch back as the current branch
      val oldBundle = atomic.get
      val (currentBranch, testNamesList, testsMap, tagsMap, registrationClosed) = oldBundle.unpack
      updateAtomic(oldBundle, Bundle(oldBranch, testNamesList, testsMap, tagsMap, registrationClosed))
    }
  } */</span>

  <span class="keyword">def</span> <a title="(description: String, childPrefix: Option[String], fun: =&gt; Unit, registrationClosedResource: String, sourceFile: String, methodName: String)Unit" id="36505">registerNestedBranch</a><span class="delimiter">(</span><a title="String" id="39552">description</a>: <span title="String">String</span>, <a title="Option[String]" id="39553">childPrefix</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="=&gt; Unit" id="39554">fun</a>: =&gt; Unit, <a title="String" id="39555">registrationClosedResource</a>: <span title="String">String</span>, <a title="String" id="39556">sourceFile</a>: <span title="String">String</span>, <a title="String" id="39557">methodName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="39559">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
    <span class="keyword">val</span> <a href="#39561" title="(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a><a href="#39560" title="SuperEngine.this.Branch" id="39561">currentBranch</a>, <a href="#39560" title="List[String]" id="39562">testNamesList</a>, <a href="#39560" title="Map[String,SuperEngine.this.TestLeaf]" id="39563">testsMap</a>, <a href="#39560" title="Map[String,Set[String]]" id="39564">tagsMap</a>, <a href="#39560" title="Boolean" id="39565">registrationClosed</a><span class="delimiter">)</span> = <a href="#39559" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39565" title="Boolean">registrationClosed</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="org.scalatest.TestRegistrationClosedException" class="keyword">new</span> <a href="TestRegistrationClosedException.scala.html#9989" title="org.scalatest.TestRegistrationClosedException">TestRegistrationClosedException</a><span class="delimiter">(</span><a href="Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><a href="#39555" title="String">registrationClosedResource</a><span class="delimiter">)</span>, <a href="StackDepthException.scala.html#36443" title="(fileName: String, methodName: String)org.scalatest.StackDepthException =&gt; Int">getStackDepth</a><span class="delimiter">(</span><a href="#39556" title="String">sourceFile</a>, <a href="#39557" title="String">methodName</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.Branch" id="39566">oldBranch</a> = <a href="#39561" title="SuperEngine.this.Branch">currentBranch</a>
    <span class="keyword">val</span> <a title="SuperEngine.this.DescriptionBranch" id="39567">newBranch</a> = <a href="#37355" title="(parent: SuperEngine.this.Branch, descriptionText: String, childPrefix: Option[String])SuperEngine.this.DescriptionBranch">DescriptionBranch</a><span class="delimiter">(</span><a href="#39561" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#39552" title="String">description</a>, <a href="#39553" title="Option[String]">childPrefix</a><span class="delimiter">)</span>
    <a href="#39566" title="SuperEngine.this.Branch">oldBranch</a>.<a href="#36553" title="(x$1: List[SuperEngine.this.Node])Unit">subNodes</a> <span title="(x: SuperEngine.this.Node)List[SuperEngine.this.Node]">::=</span> <a href="#39567" title="SuperEngine.this.DescriptionBranch">newBranch</a>

    <span class="comment">// Update atomic, making the current branch to the new branch</span>
    <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#39559" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#39567" title="SuperEngine.this.DescriptionBranch">newBranch</a>, <a href="#39562" title="List[String]">testNamesList</a>, <a href="#39563" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#39564" title="Map[String,Set[String]]">tagsMap</a>, <a href="#39565" title="Boolean">registrationClosed</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#39554" title="=&gt; Unit">fun</a> <span class="comment">// Execute the function</span>

    <span class="delimiter">{</span> <span class="comment">// Put the old branch back as the current branch</span>
      <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="39637">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
      <span class="keyword">val</span> <a href="#39639" title="(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a><a href="#39638" title="SuperEngine.this.Branch" id="39639">currentBranch</a>, <a href="#39638" title="List[String]" id="39640">testNamesList</a>, <a href="#39638" title="Map[String,SuperEngine.this.TestLeaf]" id="39641">testsMap</a>, <a href="#39638" title="Map[String,Set[String]]" id="39642">tagsMap</a>, <a href="#39638" title="Boolean" id="39643">registrationClosed</a><span class="delimiter">)</span> = <a href="#39637" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>
      <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#39637" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#39566" title="SuperEngine.this.Branch">oldBranch</a>, <a href="#39640" title="List[String]">testNamesList</a>, <a href="#39641" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#39642" title="Map[String,Set[String]]">tagsMap</a>, <a href="#39643" title="Boolean">registrationClosed</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// Used by FlatSpec, which doesn't nest. So this one just makes a new one off of the trunk</span>
  <span class="keyword">def</span> <a title="(description: String, registrationClosedResource: String, sourceFile: String, methodName: String)Unit" id="36506">registerFlatBranch</a><span class="delimiter">(</span><a title="String" id="39669">description</a>: <span title="String">String</span>, <a title="String" id="39670">registrationClosedResource</a>: <span title="String">String</span>, <a title="String" id="39671">sourceFile</a>: <span title="String">String</span>, <a title="String" id="39672">methodName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="39674">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
    <span class="keyword">val</span> <a href="#39676" title="(List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a>_, <a href="#39675" title="List[String]" id="39676">testNamesList</a>, <a href="#39675" title="Map[String,SuperEngine.this.TestLeaf]" id="39677">testsMap</a>, <a href="#39675" title="Map[String,Set[String]]" id="39678">tagsMap</a>, <a href="#39675" title="Boolean" id="39679">registrationClosed</a><span class="delimiter">)</span> = <a href="#39674" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39679" title="Boolean">registrationClosed</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="org.scalatest.TestRegistrationClosedException" class="keyword">new</span> <a href="TestRegistrationClosedException.scala.html#9989" title="org.scalatest.TestRegistrationClosedException">TestRegistrationClosedException</a><span class="delimiter">(</span><a href="Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><a href="#39670" title="String">registrationClosedResource</a><span class="delimiter">)</span>, <a href="StackDepthException.scala.html#36443" title="(fileName: String, methodName: String)org.scalatest.StackDepthException =&gt; Int">getStackDepth</a><span class="delimiter">(</span><a href="#39671" title="String">sourceFile</a>, <a href="#39672" title="String">methodName</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Need to use Trunk here. I think it will be visible to all threads because</span>
    <span class="comment">// of the atomic, even though it wasn't inside it.</span>
    <span class="keyword">val</span> <a title="SuperEngine.this.DescriptionBranch" id="39680">newBranch</a> = <a href="#37355" title="(parent: SuperEngine.this.Branch, descriptionText: String, childPrefix: Option[String])SuperEngine.this.DescriptionBranch">DescriptionBranch</a><span class="delimiter">(</span><a href="#36925" title="object SuperEngine.this.Trunk">Trunk</a>, <a href="#39669" title="String">description</a>, <span title="object None">None</span><span class="delimiter">)</span>
    <a href="#36925" title="object SuperEngine.this.Trunk">Trunk</a>.<a href="#36553" title="(x$1: List[SuperEngine.this.Node])Unit">subNodes</a> <span title="(x: SuperEngine.this.Node)List[SuperEngine.this.Node]">::=</span> <a href="#39680" title="SuperEngine.this.DescriptionBranch">newBranch</a>

    <span class="comment">// Update atomic, making the current branch to the new branch</span>
    <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#39674" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#39680" title="SuperEngine.this.DescriptionBranch">newBranch</a>, <a href="#39676" title="List[String]">testNamesList</a>, <a href="#39677" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#39678" title="Map[String,Set[String]]">tagsMap</a>, <a href="#39679" title="Boolean">registrationClosed</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="36507">currentBranchIsTrunk</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="39721">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
    <span class="keyword">var</span> <a href="#39728" title="SuperEngine.this.Branch" id="39722" class="delimiter">(</a><a title="SuperEngine.this.Branch" id="39728">currentBranch</a>, _, _, _, _<span class="delimiter">)</span> = <a href="#39721" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>
    <a href="#39722" title="SuperEngine.this.Branch">currentBranch</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#36925" title="object SuperEngine.this.Trunk">Trunk</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(testText: String, testFun: T, testRegistrationClosedResourceName: String, sourceFileName: String, methodName: String, testTags: org.scalatest.Tag*)String" id="36508">registerTest</a><span class="delimiter">(</span><a title="String" id="39734">testText</a>: <span title="String">String</span>, <a title="T" id="39735">testFun</a>: <a href="#10401" title="T">T</a>, <a title="String" id="39736">testRegistrationClosedResourceName</a>: <span title="String">String</span>, <a title="String" id="39737">sourceFileName</a>: <span title="String">String</span>, <a title="String" id="39738">methodName</a>: <span title="String">String</span>, <a title="org.scalatest.Tag*" id="39739">testTags</a>: <span title="org.scalatest.Tag*">Tag</span>*<span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span> <span class="comment">// returns testName</span>

    <a href="#36512" title="(testText: String, testTags: org.scalatest.Tag*)Unit">checkRegisterTestParamsForNull</a><span class="delimiter">(</span><a href="#39734" title="String">testText</a>, <a href="#39739" title="org.scalatest.Tag*">testTags</a>: _*<span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>.<a href="#37416" title="=&gt; Boolean">registrationClosed</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="org.scalatest.TestRegistrationClosedException" class="keyword">new</span> <a href="TestRegistrationClosedException.scala.html#9989" title="org.scalatest.TestRegistrationClosedException">TestRegistrationClosedException</a><span class="delimiter">(</span><a href="Resources.scala.html#27791" title="(resourceName: String)String">Resources</a><span class="delimiter">(</span><a href="#39736" title="String">testRegistrationClosedResourceName</a><span class="delimiter">)</span>, <a href="StackDepthException.scala.html#36443" title="(fileName: String, methodName: String)org.scalatest.StackDepthException =&gt; Int">getStackDepth</a><span class="delimiter">(</span><a href="#39737" title="String">sourceFileName</a>, <a href="#39738" title="String">methodName</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="comment">//    throw new TestRegistrationClosedException(Resources(&quot;testCannotAppearInsideAnotherTest&quot;), getStackDepth(sourceFileName, &quot;test&quot;))</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="39741">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
    <span class="keyword">var</span> <a href="#39743" title="(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a><a href="#39742" title="SuperEngine.this.Branch" id="39743">currentBranch</a>, <a href="#39742" title="List[String]" id="39744">testNamesList</a>, <a href="#39742" title="Map[String,SuperEngine.this.TestLeaf]" id="39745">testsMap</a>, <a href="#39742" title="Map[String,Set[String]]" id="39746">tagsMap</a>, <a href="#39742" title="Boolean" id="39747">registrationClosed</a><span class="delimiter">)</span> = <a href="#39741" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>

    <span class="keyword">val</span> <a title="String" id="39748">testName</a> = <a href="#36511" title="(testText: String, parent: SuperEngine.this.Branch)String">getTestName</a><span class="delimiter">(</span><a href="#39734" title="String">testText</a>, <a href="#39743" title="SuperEngine.this.Branch">currentBranch</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>.<a href="#37414" title="=&gt; Map[String,SuperEngine.this.TestLeaf]">testsMap</a>.<span title="=&gt; scala.collection.immutable.Set[String]">keySet</span>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#39748" title="String">testName</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="org.scalatest.DuplicateTestNameException" class="keyword">new</span> <a href="DuplicateTestNameException.scala.html#9677" title="org.scalatest.DuplicateTestNameException">DuplicateTestNameException</a><span class="delimiter">(</span><a href="#39748" title="String">testName</a>, <a href="StackDepthException.scala.html#36443" title="(fileName: String, methodName: String)org.scalatest.StackDepthException =&gt; Int">getStackDepth</a><span class="delimiter">(</span><a href="#39737" title="String">sourceFileName</a>, <a href="#39738" title="String">methodName</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.TestLeaf" id="39749">testLeaf</a> = <a href="#37067" title="(parent: SuperEngine.this.Branch, testName: String, testText: String, testFun: T)SuperEngine.this.TestLeaf">TestLeaf</a><span class="delimiter">(</span><a href="#39743" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#39748" title="String">testName</a>, <a href="#39734" title="String">testText</a>, <a href="#39735" title="T">testFun</a><span class="delimiter">)</span>
    <a href="#39745" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a> <span title="(kv: (String, SuperEngine.this.TestLeaf))scala.collection.immutable.Map[String,SuperEngine.this.TestLeaf]">+=</span> <span class="delimiter">(</span><a href="#39748" title="(x: String)ArrowAssoc[String]">testName</a> <span title="(y: SuperEngine.this.TestLeaf)(String, SuperEngine.this.TestLeaf)">-&gt;</span> <a href="#39749" title="SuperEngine.this.TestLeaf">testLeaf</a><span class="delimiter">)</span>
    <a href="#39744" title="List[String]">testNamesList</a> <span title="(x: String)List[String]">::=</span> <a href="#39748" title="String">testName</a>
    <a href="#39743" title="SuperEngine.this.Branch">currentBranch</a>.<a href="#36553" title="(x$1: List[SuperEngine.this.Node])Unit">subNodes</a> <span title="(x: SuperEngine.this.Node)List[SuperEngine.this.Node]">::=</span> <a href="#39749" title="SuperEngine.this.TestLeaf">testLeaf</a>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="39750">tagNames</a> = <span title="[A](elems: A*)scala.collection.immutable.Set[A]">Set</span><span title="(elems: String*)scala.collection.immutable.Set[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[String])scala.collection.immutable.Set[String]">++</span> <a href="#39739" title="org.scalatest.Tag*">testTags</a>.<span title="(f: org.scalatest.Tag =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.scalatest.Tag],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a href="#40039" title="org.scalatest.Tag">_</a>.<a href="Tag.scala.html#37678" title="=&gt; String">name</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#39750" title="scala.collection.immutable.Set[String]">tagNames</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#39746" title="Map[String,Set[String]]">tagsMap</a> <span title="(kv: (String, Set[String]))scala.collection.immutable.Map[String,Set[String]]">+=</span> <span class="delimiter">(</span><a href="#39748" title="(x: String)ArrowAssoc[String]">testName</a> <span title="(y: scala.collection.immutable.Set[String])(String, scala.collection.immutable.Set[String])">-&gt;</span> <a href="#39750" title="scala.collection.immutable.Set[String]">tagNames</a><span class="delimiter">)</span>

    <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#39741" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#39743" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#39744" title="List[String]">testNamesList</a>, <a href="#39745" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#39746" title="Map[String,Set[String]]">tagsMap</a>, <a href="#39747" title="Boolean">registrationClosed</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#39748" title="String">testName</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(testText: String, f: T, testRegistrationClosedResourceName: String, sourceFileName: String, methodName: String, testTags: org.scalatest.Tag*)Unit" id="36509">registerIgnoredTest</a><span class="delimiter">(</span><a title="String" id="40500">testText</a>: <span title="String">String</span>, <a title="T" id="40501">f</a>: <a href="#10401" title="T">T</a>, <a title="String" id="40502">testRegistrationClosedResourceName</a>: <span title="String">String</span>, <a title="String" id="40503">sourceFileName</a>: <span title="String">String</span>, <a title="String" id="40504">methodName</a>: <span title="String">String</span>, <a title="org.scalatest.Tag*" id="40505">testTags</a>: <span title="org.scalatest.Tag*">Tag</span>*<span class="delimiter">)</span> <span class="delimiter">{</span>

    <a href="#36512" title="(testText: String, testTags: org.scalatest.Tag*)Unit">checkRegisterTestParamsForNull</a><span class="delimiter">(</span><a href="#40500" title="String">testText</a>, <a href="#40505" title="org.scalatest.Tag*">testTags</a>: _*<span class="delimiter">)</span>

<span class="comment">// If this works delete this. I think we can rely on registerTest's check</span>
<span class="comment">//    if (atomic.get.registrationClosed)</span>
<span class="comment">//      throw new TestRegistrationClosedException(Resources(&quot;ignoreCannotAppearInsideATest&quot;), getStackDepth(sourceFileName, &quot;ignore&quot;))</span>

    <span class="keyword">val</span> <a title="java.lang.String" id="40507">testName</a> = <a href="#36508" title="(testText: String, testFun: T, testRegistrationClosedResourceName: String, sourceFileName: String, methodName: String, testTags: org.scalatest.Tag*)String">registerTest</a><span class="delimiter">(</span><a href="#40500" title="String">testText</a>, <a href="#40501" title="T">f</a>, <a href="#40502" title="String">testRegistrationClosedResourceName</a>, <a href="#40503" title="String">sourceFileName</a>, <a href="#40504" title="String">methodName</a><span class="delimiter">)</span> <span class="comment">// Call test without passing the tags</span>

    <span class="keyword">val</span> <a title="SuperEngine.this.Bundle" id="40508">oldBundle</a> = <a href="#36491" title="=&gt; java.util.concurrent.atomic.AtomicReference[SuperEngine.this.Bundle]">atomic</a>.<span title="()SuperEngine.this.Bundle">get</span>
    <span class="keyword">var</span> <a href="#40510" title="(SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)" class="delimiter">(</a><a href="#40509" title="SuperEngine.this.Branch" id="40510">currentBranch</a>, <a href="#40509" title="List[String]" id="40511">testNamesList</a>, <a href="#40509" title="Map[String,SuperEngine.this.TestLeaf]" id="40512">testsMap</a>, <a href="#40509" title="Map[String,Set[String]]" id="40513">tagsMap</a>, <a href="#40509" title="Boolean" id="40514">registrationClosed</a><span class="delimiter">)</span> = <a href="#40508" title="SuperEngine.this.Bundle">oldBundle</a>.<a href="#36535" title="=&gt; (SuperEngine.this.Branch, List[String], Map[String,SuperEngine.this.TestLeaf], Map[String,Set[String]], Boolean)">unpack</a>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="40515">tagNames</a> = <span title="[A](elems: A*)scala.collection.immutable.Set[A]">Set</span><span title="(elems: String*)scala.collection.immutable.Set[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[String])scala.collection.immutable.Set[String]">++</span> <a href="#40505" title="org.scalatest.Tag*">testTags</a>.<span title="(f: org.scalatest.Tag =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.scalatest.Tag],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a href="#40589" title="org.scalatest.Tag">_</a>.<a href="Tag.scala.html#37678" title="=&gt; String">name</a><span class="delimiter">)</span>
    <a href="#40513" title="Map[String,Set[String]]">tagsMap</a> <span title="(kv: (String, Set[String]))scala.collection.immutable.Map[String,Set[String]]">+=</span> <span class="delimiter">(</span><a href="#40507" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">testName</a> <span title="(y: scala.collection.immutable.Set[String])(java.lang.String, scala.collection.immutable.Set[String])">-&gt;</span> <span class="delimiter">(</span><a href="#40515" title="scala.collection.immutable.Set[String]">tagNames</a> <span title="(elem: String)scala.collection.immutable.Set[String]">+</span> <a href="FunSuite.scala.html#36446" title="=&gt; java.lang.String">IgnoreTagName</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#36493" title="(oldBundle: SuperEngine.this.Bundle, newBundle: SuperEngine.this.Bundle)Unit">updateAtomic</a><span class="delimiter">(</span><a href="#40508" title="SuperEngine.this.Bundle">oldBundle</a>, <a href="#36537" title="(currentBranch: SuperEngine.this.Branch, testNamesList: List[String], testsMap: Map[String,SuperEngine.this.TestLeaf], tagsMap: Map[String,Set[String]], registrationClosed: Boolean)SuperEngine.this.Bundle">Bundle</a><span class="delimiter">(</span><a href="#40510" title="SuperEngine.this.Branch">currentBranch</a>, <a href="#40511" title="List[String]">testNamesList</a>, <a href="#40512" title="Map[String,SuperEngine.this.TestLeaf]">testsMap</a>, <a href="#40513" title="Map[String,Set[String]]">tagsMap</a>, <a href="#40514" title="Boolean">registrationClosed</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(branch: SuperEngine.this.Branch)String" id="36510">getTestNamePrefix</a><span class="delimiter">(</span><a title="SuperEngine.this.Branch" id="40719">branch</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a><span class="delimiter">)</span>: <span title="String">String</span> =
    <a href="#40719" title="SuperEngine.this.Branch">branch</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#36925" title="java.lang.String(&quot;&quot;)">Trunk</a> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="comment">// Call to getTestNamePrefix is not tail recursive, but I don't expect</span>
      <span class="comment">// the describe nesting to be very deep (famous last words).</span>
      <span class="keyword">case</span> <span title="java.lang.String">DescriptionBranch</span><span class="delimiter">(</span><a title="SuperEngine.this.Branch" id="40721">parent</a>, <a title="String" id="40722">descriptionText</a>, <a title="Option[String]" id="40723">childPrefix</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="String" id="40724">optionalChildPrefixAndDescriptionText</a> =
          <a href="#40723" title="Option[String]">childPrefix</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="String" id="40726">cp</a><span class="delimiter">)</span> =&gt; <a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixSuffix&quot;)" class="string">&quot;prefixSuffix&quot;</span>, <a href="#40722" title="String">descriptionText</a>, <a href="#40726" title="String">cp</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#40722" title="String">descriptionText</a>
          <span class="delimiter">}</span>
        <a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixSuffix&quot;)" class="string">&quot;prefixSuffix&quot;</span>, <a href="#36510" title="(branch: SuperEngine.this.Branch)String">getTestNamePrefix</a><span class="delimiter">(</span><a href="#40721" title="SuperEngine.this.Branch">parent</a><span class="delimiter">)</span>, <a href="#40724" title="String">optionalChildPrefixAndDescriptionText</a><span class="delimiter">)</span>.<span title="()java.lang.String">trim</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(testText: String, parent: SuperEngine.this.Branch)String" id="36511">getTestName</a><span class="delimiter">(</span><a title="String" id="39791">testText</a>: <span title="String">String</span>, <a title="SuperEngine.this.Branch" id="39792">parent</a>: <a href="#36476" title="SuperEngine.this.Branch">Branch</a><span class="delimiter">)</span>: <span title="String">String</span> =
    <a href="Resources.scala.html#27793" title="(resourceName: String, o1: AnyRef*)String">Resources</a><span class="delimiter">(</span><span title="java.lang.String(&quot;prefixSuffix&quot;)" class="string">&quot;prefixSuffix&quot;</span>, <a href="#36510" title="(branch: SuperEngine.this.Branch)String">getTestNamePrefix</a><span class="delimiter">(</span><a href="#39792" title="SuperEngine.this.Branch">parent</a><span class="delimiter">)</span>, <a href="#39791" title="String">testText</a><span class="delimiter">)</span>.<span title="()java.lang.String">trim</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(testText: String, testTags: org.scalatest.Tag*)Unit" id="36512">checkRegisterTestParamsForNull</a><span class="delimiter">(</span><a title="String" id="39751">testText</a>: <span title="String">String</span>, <a title="org.scalatest.Tag*" id="39752">testTags</a>: <span title="org.scalatest.Tag*">Tag</span>*<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39751" title="String">testText</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;testText was null&quot;)" class="string">&quot;testText was null&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39752" title="org.scalatest.Tag*">testTags</a>.<span title="(p: org.scalatest.Tag =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#40756" title="org.scalatest.Tag">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.NullPointerException" class="keyword">new</span> <span title="java.lang.NullPointerException">NullPointerException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;a test tag was null&quot;)" class="string">&quot;a test tag was null&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class Engine extends org.scalatest.SuperEngine[() =&gt; Unit] with ScalaObject" id="10262">Engine</a><a href="#10262" title="ScalaObject" class="delimiter">(</a><a title="String" id="40780">concurrentBundleModResourceName</a>: <span title="String">String</span>, <a title="String" id="40781">simpleClassName</a>: <span title="String">String</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="#9611" title="org.scalatest.SuperEngine[() =&gt; Unit]">SuperEngine</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">]</span><span class="delimiter">(</span><a href="#40780" title="String">concurrentBundleModResourceName</a>, <a href="#40781" title="String">simpleClassName</a><span class="delimiter">)</span>

<span class="keyword">private</span><span class="delimiter">[</span>scalatest<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class FixtureEngine[FixtureParam] extends org.scalatest.SuperEngine[FixtureParam =&gt; Any] with ScalaObject" id="9506">FixtureEngine</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="10402">FixtureParam</a><span class="delimiter">]</span><a href="#9506" title="ScalaObject" class="delimiter">(</a><a title="String" id="40790">concurrentBundleModResourceName</a>: <span title="String">String</span>, <a title="String" id="40791">simpleClassName</a>: <span title="String">String</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="#9611" title="org.scalatest.SuperEngine[FixtureParam =&gt; Any]">SuperEngine</a><span class="delimiter">[</span>FixtureParam =&gt; Any<span class="delimiter">]</span><span class="delimiter">(</span><a href="#40790" title="String">concurrentBundleModResourceName</a>, <a href="#40791" title="String">simpleClassName</a><span class="delimiter">)</span>

        </pre>
    </body>
</html>