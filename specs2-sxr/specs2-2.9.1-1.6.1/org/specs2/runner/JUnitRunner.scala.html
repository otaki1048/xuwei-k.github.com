<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/runner/JUnitRunner.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> runner

<span class="keyword">import</span> _root_.org.junit.runner.notification.RunNotifier
<span class="keyword">import</span> _root_.org.junit.runners._
<span class="keyword">import</span> _root_.org.junit._
<span class="keyword">import</span> _root_.org.junit.runner._
<span class="keyword">import</span> junit.framework.AssertionFailedError
<span class="keyword">import</span> org.specs2.internal.scalaz.Scalaz
<span class="keyword">import</span> <span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> main.<span class="delimiter">{</span> Arguments, SystemProperties <span class="delimiter">}</span>
<span class="keyword">import</span> io._
<span class="keyword">import</span> reflect.<a href="../reflect/Classes.scala.html#10745" title="object org.specs2.reflect.Classes">Classes</a>._
<span class="keyword">import</span> execute._
<span class="keyword">import</span> reporter._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> text.AnsiColors
<span class="keyword">import</span> control.<span class="delimiter">{</span>ExecutionOrigin, Throwablex<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="../reporter/Selection.scala.html#11034" title="object org.specs2.reporter.DefaultSelection">DefaultSelection</a>._
<span class="comment">/**
 * The JUnitRunner class is a junit Runner class meant to be used with the RunWith annotation
 * to execute a specification as a JUnit suite.
 * 
 * The implementation is using a description Fold to fold the fragments into a tree
 * of Description objects and a Map relating each Description to a Fragment to execute. 
 *
 */</span>
<span class="keyword">class</span> <a title="class JUnitRunner extends org.junit.runner.Runner with org.specs2.control.ExecutionOrigin with ScalaObject" id="11241">JUnitRunner</a><a href="#11241" title="ScalaObject" class="delimiter">(</a><a title="Class[_]" id="235596">klass</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="org.junit.runner.Runner">Runner</span> <span class="keyword">with</span> <a href="../control/ExecutionOrigin.scala.html#9558" title="org.specs2.control.ExecutionOrigin">ExecutionOrigin</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="executor extends java.lang.Object with org.specs2.specification.FragmentExecution" id="60274">executor</a> = <a href="#235483" title="java.lang.Object with org.specs2.specification.FragmentExecution" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.specs2.specification.FragmentExecution" id="235483">FragmentExecution</a> <span class="delimiter">{</span><span class="delimiter">}</span>
  
  <span class="comment">/** specification to execute */</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.specification.SpecificationStructure" id="60277">specification</a> = <a href="../reflect/Classes.scala.html#60241" title="[T &lt;: AnyRef](className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader)(implicit m: scala.reflect.ClassManifest[T])Option[T]">tryToCreateObject</a><a href="../reflect/Classes.scala.html#190595" title="(className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader)(implicit m: scala.reflect.ClassManifest[org.specs2.specification.SpecificationStructure])Option[org.specs2.specification.SpecificationStructure]" class="delimiter">[</a><a href="../specification/BaseSpecification.scala.html#11333" title="org.specs2.specification.SpecificationStructure">SpecificationStructure</a><span class="delimiter">]</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[org.specs2.specification.SpecificationStructure]" class="delimiter">(</span><a href="#235596" title="Class[_]">klass</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>.<span title="=&gt; org.specs2.specification.SpecificationStructure">get</span>

  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.specification.Fragments" id="60279">content</a> = <a href="#60276" title="=&gt; org.specs2.specification.SpecificationStructure">specification</a>.<a href="../specification/BaseSpecification.scala.html#53552" title="=&gt; org.specs2.specification.Fragments">content</a>
  <span class="comment">/** arguments for the specification */</span>
  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.main.Arguments" id="60281">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a> = <a href="#60278" title="=&gt; org.specs2.specification.Fragments">content</a>.<a href="../specification/Fragments.scala.html#50153" title="=&gt; org.specs2.main.Arguments">arguments</a>
  <span class="comment">/** fold object used to create descriptions */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="org.specs2.runner.JUnitDescriptionsFragments" id="60282">descriptions</a> = <span title="org.specs2.runner.JUnitDescriptionsFragments" class="keyword">new</span> <a href="#11245" title="org.specs2.runner.JUnitDescriptionsFragments">JUnitDescriptionsFragments</a><span class="delimiter">(</span><a href="#235596" title="Class[_]">klass</a><span class="delimiter">)</span>
  <span class="comment">/** extract the root Description object and the examples to execute */</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> DescriptionAndExamples<a href="#60287" title="(org.junit.runner.Description, Stream[(org.junit.runner.Description, org.specs2.specification.Fragment)])" id="60285" class="delimiter">(</a><a href="#60284" title="org.junit.runner.Description" id="60287">desc</a>, <a href="#60284" title="Stream[(org.junit.runner.Description, org.specs2.specification.Fragment)]" id="60289">executions</a><span class="delimiter">)</span> = <a href="#60282" title="=&gt; org.specs2.runner.JUnitDescriptionsFragments">descriptions</a>.<a href="../reporter/JUnitDescriptions.scala.html#208284" title="(fs: Seq[org.specs2.specification.Fragment])(implicit args: org.specs2.main.Arguments)org.specs2.reporter.DescriptionAndExamples[(org.junit.runner.Description, org.specs2.specification.Fragment)]">foldAll</a><a href="#60280" title="=&gt; org.specs2.main.Arguments" class="delimiter">(</a><a href="../reporter/Selection.scala.html#60263" title="(fragments: Seq[org.specs2.specification.Fragment])(implicit commandLineArgs: org.specs2.main.Arguments)Seq[org.specs2.specification.Fragment]">select</a><a href="#60280" title="=&gt; org.specs2.main.Arguments" class="delimiter">(</a><a href="#60278" title="=&gt; org.specs2.specification.Fragments">content</a>.<a href="../specification/Fragments.scala.html#50160" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="comment">/** the console exporter can be used to display results in the console */</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="consoleExporter extends java.lang.Object with org.specs2.reporter.TextExporting" id="60291">consoleExporter</a> = <a href="#235579" title="java.lang.Object with org.specs2.reporter.TextExporting" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.specs2.reporter.TextExporting" id="235579">TextExporting</a> <span class="delimiter">{</span><span class="delimiter">}</span>
  <span class="comment">/** the html exporter can be used to output html files */</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="htmlExporter extends java.lang.Object with org.specs2.reporter.HtmlExporting" id="60293">htmlExporter</a> = <a href="#235587" title="java.lang.Object with org.specs2.reporter.HtmlExporting" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.specs2.reporter.HtmlExporting" id="235587">HtmlExporting</a> <span class="delimiter">{</span><span class="delimiter">}</span>
  <span class="comment">/** system properties */</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.main.SystemProperties" id="60295">properties</a>: <a href="../main/SystemProperties.scala.html#10088" title="org.specs2.main.SystemProperties">SystemProperties</a> = <a href="../main/SystemProperties.scala.html#10089" title="object org.specs2.main.SystemProperties">SystemProperties</a>
  <span class="comment">/** @return a Description for the TestSuite */</span>
  <span class="keyword">def</span> <a title="()org.junit.runner.Description" id="60296">getDescription</a> = <a href="#60286" title="=&gt; org.junit.runner.Description">desc</a>

  <span class="comment">/** 
   * run the suite by executing each fragment related to a description:
   * * execute all fragments (including Steps which are reported as steps)
   * * for each result, report the failure/error/skipped or pending message as a
   *   junit failure or ignored event on the RunNotifier
   */</span>
  <span class="keyword">def</span> <a title="(notifier: org.junit.runner.notification.RunNotifier)Unit" id="60297">run</a><span class="delimiter">(</span><a title="org.junit.runner.notification.RunNotifier" id="235603">notifier</a>: <span title="org.junit.runner.notification.RunNotifier">RunNotifier</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#60298" title="(x: =&gt; scala.collection.immutable.Stream[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)])org.specs2.internal.scalaz.Identity[scala.collection.immutable.Stream[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]]">executeSpecification</a> <span title="(x: =&gt; Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)])org.specs2.internal.scalaz.Identity[Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]]">|&gt;</span> <a href="#60299" title="=&gt; Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)] =&gt; Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">export</a> <span title="(f: Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)] =&gt; Unit)Unit">|&gt;</span> <a href="#60300" title="(notifier: org.junit.runner.notification.RunNotifier)Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)] =&gt; Unit">notifyJUnit</a><span class="delimiter">(</span><a href="#235603" title="org.junit.runner.notification.RunNotifier">notifier</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Stream[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]" id="60298">executeSpecification</a> =
    <a href="#60288" title="=&gt; Stream[(org.junit.runner.Description, org.specs2.specification.Fragment)]">executions</a>.<span title="(pf: PartialFunction[(org.junit.runner.Description, org.specs2.specification.Fragment),(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream[(org.junit.runner.Description, org.specs2.specification.Fragment)],(org.junit.runner.Description, org.specs2.specification.ExecutedFragment),scala.collection.immutable.Stream[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]])scala.collection.immutable.Stream[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">collect</span> <a href="#235654" title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a title="org.junit.runner.Description" id="235657">desc</a>, <a title="org.specs2.specification.SpecStart" id="235658">f</a> @ SpecStart<span class="delimiter">(</span>_,_,_,_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(_1: org.junit.runner.Description, _2: org.specs2.specification.ExecutedFragment)(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#235657" title="org.junit.runner.Description">desc</a>, <a href="#60274" title="=&gt; java.lang.Object with org.specs2.specification.FragmentExecution">executor</a>.<a href="../specification/FragmentExecution.scala.html#193920" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235658" title="org.specs2.specification.SpecStart">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a title="org.junit.runner.Description" id="235668">desc</a>, <a title="org.specs2.specification.Example" id="235669">f</a> @ Example<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span>      =&gt; <span title="(_1: org.junit.runner.Description, _2: org.specs2.specification.ExecutedFragment)(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#235668" title="org.junit.runner.Description">desc</a>, <a href="#60274" title="=&gt; java.lang.Object with org.specs2.specification.FragmentExecution">executor</a>.<a href="../specification/FragmentExecution.scala.html#193920" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235669" title="org.specs2.specification.Example">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a title="org.junit.runner.Description" id="235678">desc</a>, <a title="org.specs2.specification.Text" id="235679">f</a> @ Text<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span>            =&gt; <span title="(_1: org.junit.runner.Description, _2: org.specs2.specification.ExecutedFragment)(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#235678" title="org.junit.runner.Description">desc</a>, <a href="#60274" title="=&gt; java.lang.Object with org.specs2.specification.FragmentExecution">executor</a>.<a href="../specification/FragmentExecution.scala.html#193920" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235679" title="org.specs2.specification.Text">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a title="org.junit.runner.Description" id="235688">desc</a>, <a title="org.specs2.specification.Step" id="235689">f</a> @ Step<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span>            =&gt; <span title="(_1: org.junit.runner.Description, _2: org.specs2.specification.ExecutedFragment)(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#235688" title="org.junit.runner.Description">desc</a>, <a href="#60274" title="=&gt; java.lang.Object with org.specs2.specification.FragmentExecution">executor</a>.<a href="../specification/FragmentExecution.scala.html#193920" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235689" title="org.specs2.specification.Step">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a title="org.junit.runner.Description" id="235698">desc</a>, <a title="org.specs2.specification.Action" id="235699">f</a> @ Action<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span>          =&gt; <span title="(_1: org.junit.runner.Description, _2: org.specs2.specification.ExecutedFragment)(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#235698" title="org.junit.runner.Description">desc</a>, <a href="#60274" title="=&gt; java.lang.Object with org.specs2.specification.FragmentExecution">executor</a>.<a href="../specification/FragmentExecution.scala.html#193920" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235699" title="org.specs2.specification.Action">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a title="org.junit.runner.Description" id="235708">desc</a>, <a title="org.specs2.specification.SpecEnd" id="235709">f</a> @ SpecEnd<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span>         =&gt; <span title="(_1: org.junit.runner.Description, _2: org.specs2.specification.ExecutedFragment)(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#235708" title="org.junit.runner.Description">desc</a>, <a href="#60274" title="=&gt; java.lang.Object with org.specs2.specification.FragmentExecution">executor</a>.<a href="../specification/FragmentExecution.scala.html#193920" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235709" title="org.specs2.specification.SpecEnd">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)] =&gt; Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]" id="60299">export</a> = <span class="delimiter">(</span>executed: <span title="Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Description, ExecutedFragment<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[java.lang.String]" id="235825">commandLineArgs</a> = <a href="#60294" title="=&gt; org.specs2.main.SystemProperties">properties</a>.<a href="../main/SystemProperties.scala.html#99613" title="(p: String)Option[String]">getProperty</a><span class="delimiter">(</span><span title="java.lang.String(&quot;commandline&quot;)" class="string">&quot;commandline&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\s&quot;)" class="string">&quot;\\s&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="org.specs2.main.Arguments" id="235826">arguments</a> = <a href="../main/Arguments.scala.html#71244" title="(implicit arguments: String*)org.specs2.main.Arguments">Arguments</a><span class="delimiter">(</span><a href="#235825" title="Array[java.lang.String]">commandLineArgs</a>:_*<span class="delimiter">)</span> <a href="../main/Arguments.scala.html#50467" title="(other: org.specs2.main.Arguments)org.specs2.main.Arguments">&lt;|</a> <a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a>
    <span class="keyword">def</span> <a title="(name: String)Boolean" id="235827">exportTo</a><span class="delimiter">(</span><a title="String" id="235843">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#60294" title="=&gt; org.specs2.main.SystemProperties">properties</a>.<a href="../main/SystemProperties.scala.html#99624" title="(p: String)Boolean">isDefined</a><span class="delimiter">(</span><a href="#235843" title="String">name</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#235825" title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]">commandLineArgs</a>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#235843" title="String">name</a><span class="delimiter">)</span>
    
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#235827" title="(name: String)Boolean">exportTo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;console&quot;)" class="string">&quot;console&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> 
      <a href="#60290" title="=&gt; java.lang.Object with org.specs2.reporter.TextExporting">consoleExporter</a>.<a href="../reporter/TextExporting.scala.html#193988" title="(s: org.specs2.specification.SpecificationStructure)(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Unit">export</a><span class="delimiter">(</span><a href="#60276" title="=&gt; org.specs2.specification.SpecificationStructure">specification</a><span class="delimiter">)</span><span title="(v1: Seq[org.specs2.specification.ExecutedFragment])Unit" class="delimiter">(</span><a href="#235826" title="org.specs2.main.Arguments">arguments</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235824" title="Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">executed</a>.<span title="(f: (org.junit.runner.Description, org.specs2.specification.ExecutedFragment) =&gt; org.specs2.specification.ExecutedFragment)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)],org.specs2.specification.ExecutedFragment,Seq[org.specs2.specification.ExecutedFragment]])Seq[org.specs2.specification.ExecutedFragment]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.ExecutedFragment,Seq[org.specs2.specification.ExecutedFragment]]" class="delimiter">(</span><a href="#235907" title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)">_</a>.<span title="=&gt; org.specs2.specification.ExecutedFragment">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#235827" title="(name: String)Boolean">exportTo</a><span class="delimiter">(</span><span title="java.lang.String(&quot;html&quot;)" class="string">&quot;html&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> 
      <a href="#60292" title="=&gt; java.lang.Object with org.specs2.reporter.HtmlExporting">htmlExporter</a>.<a href="../reporter/HtmlExporting.scala.html#198477" title="(s: org.specs2.specification.SpecificationStructure)(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Unit">export</a><span class="delimiter">(</span><a href="#60276" title="=&gt; org.specs2.specification.SpecificationStructure">specification</a><span class="delimiter">)</span><span title="(v1: Seq[org.specs2.specification.ExecutedFragment])Unit" class="delimiter">(</span><a href="#235826" title="org.specs2.main.Arguments">arguments</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#235824" title="Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">executed</a>.<span title="(f: (org.junit.runner.Description, org.specs2.specification.ExecutedFragment) =&gt; org.specs2.specification.ExecutedFragment)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)],org.specs2.specification.ExecutedFragment,Seq[org.specs2.specification.ExecutedFragment]])Seq[org.specs2.specification.ExecutedFragment]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.ExecutedFragment,Seq[org.specs2.specification.ExecutedFragment]]" class="delimiter">(</span><a href="#235937" title="(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)">_</a>.<span title="=&gt; org.specs2.specification.ExecutedFragment">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#235824" title="Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">executed</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(notifier: org.junit.runner.notification.RunNotifier)Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)] =&gt; Unit" id="60300">notifyJUnit</a><span class="delimiter">(</span><a title="org.junit.runner.notification.RunNotifier" id="236035">notifier</a>: <span title="org.junit.runner.notification.RunNotifier">RunNotifier</span><span class="delimiter">)</span> = <span class="delimiter">(</span>executed: <span title="Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Description, ExecutedFragment<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <a href="#236039" title="Seq[(org.junit.runner.Description, org.specs2.specification.ExecutedFragment)]">executed</a> <span title="(f: (org.junit.runner.Description, org.specs2.specification.ExecutedFragment) =&gt; Unit)Unit">foreach</span> <a href="#236056" title="Unit" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="org.junit.runner.Description" id="236059">desc</a>, ExecutedResult<span class="delimiter">(</span>_, <a title="org.specs2.execute.Result" id="236060">result</a>, <a title="org.specs2.time.SimpleTimer" id="236061">timer</a>, _,_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestStarted</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
          <a href="#236060" title="org.specs2.execute.Result">result</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Unit" id="236062">f</a> @ Failure<span class="delimiter">(</span><a title="String" id="236063">m</a>, <a title="String" id="236064">e</a>, <a title="List[java.lang.StackTraceElement]" id="236065">st</a>, <a title="org.specs2.execute.Details" id="236066">d</a><span class="delimiter">)</span>                     =&gt;
              <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a>, <a href="#60301" title="(f: org.specs2.execute.Failure)(implicit args: org.specs2.main.Arguments)Throwable">junitFailure</a><a href="#60280" title="=&gt; org.specs2.main.Arguments" class="delimiter">(</a><a href="#236062" title="org.specs2.execute.Failure">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a title="Unit" id="236079">e</a> @ Error<span class="delimiter">(</span><a title="String" id="236080">m</a>, <a title="Exception" id="236081">st</a><span class="delimiter">)</span>                             =&gt;
              <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a>, <a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#67059" title="(e: Exception)Exception">traceFilter</a><span class="delimiter">(</span><a href="#236079" title="org.specs2.execute.Error">e</a>.<a href="../execute/Result.scala.html#55439" title="=&gt; Exception">exception</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">DecoratedResult</span><span class="delimiter">(</span>_, <a title="org.specs2.execute.Failure" id="236138">f</a> @ Failure<span class="delimiter">(</span><a title="String" id="236139">m</a>, <a title="String" id="236140">e</a>, <a title="List[java.lang.StackTraceElement]" id="236141">st</a>, <a title="org.specs2.execute.Details" id="236142">d</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a>, <a href="#60301" title="(f: org.specs2.execute.Failure)(implicit args: org.specs2.main.Arguments)Throwable">junitFailure</a><a href="#60280" title="=&gt; org.specs2.main.Arguments" class="delimiter">(</a><a href="#236138" title="org.specs2.execute.Failure">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">DecoratedResult</span><span class="delimiter">(</span>_, <a title="org.specs2.execute.Error" id="236145">e</a> @ Error<span class="delimiter">(</span><a title="String" id="236146">m</a>, <a title="Exception" id="236147">st</a><span class="delimiter">)</span><span class="delimiter">)</span>         =&gt;
              <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a>, <a href="#60280" title="=&gt; org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#67059" title="(e: Exception)Exception">traceFilter</a><span class="delimiter">(</span><a href="#236145" title="org.specs2.execute.Error">e</a>.<a href="../execute/Result.scala.html#55439" title="=&gt; Exception">exception</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Pending</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | Skipped<span class="delimiter">(</span>_, _<span class="delimiter">)</span>                   =&gt; <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestIgnored</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Success</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | DecoratedResult<span class="delimiter">(</span>_, _<span class="delimiter">)</span>           =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestFinished</span><span class="delimiter">(</span><a href="#236059" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="org.junit.runner.Description" id="236206">desc</a>, ExecutedSpecStart<span class="delimiter">(</span>_,_,_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestRunStarted</span><span class="delimiter">(</span><a href="#236206" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="org.junit.runner.Description" id="236209">desc</a>, ExecutedSpecEnd<span class="delimiter">(</span>_,_,_<span class="delimiter">)</span><span class="delimiter">)</span>   =&gt; <a href="#236035" title="org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Result)Unit">fireTestRunFinished</span><span class="delimiter">(</span><span title="org.junit.runner.Result" class="keyword">new</span> org.junit.runner.<span title="org.junit.runner.Result">Result</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="org.junit.runner.Description" id="236239">desc</a>, _<span class="delimiter">)</span>                        =&gt; <span class="comment">// don't do anything otherwise too many tests will be counted</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/** @return a Throwable expected by JUnit Failure object */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: org.specs2.execute.Failure)(implicit args: org.specs2.main.Arguments)Throwable" id="60301">junitFailure</a><span class="delimiter">(</span><a title="org.specs2.execute.Failure" id="236076">f</a>: <a href="../execute/Result.scala.html#9672" title="org.specs2.execute.Failure">Failure</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="236077">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: <span title="Throwable">Throwable</span> = <a href="#236076" title="org.specs2.execute.Failure">f</a> <span title="Throwable" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="org.specs2.runner.SpecFailureAssertionFailedError">Failure</span><span class="delimiter">(</span><a title="String" id="236242">m</a>, <a title="String" id="236243">e</a>, <a title="List[java.lang.StackTraceElement]" id="236244">st</a>, NoDetails<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
      <span title="org.specs2.runner.SpecFailureAssertionFailedError" class="keyword">new</span> <a href="#11244" title="org.specs2.runner.SpecFailureAssertionFailedError">SpecFailureAssertionFailedError</a><span class="delimiter">(</span><a href="../control/Throwablex.scala.html#9615" title="object org.specs2.control.Throwablex">Throwablex</a>.<a href="../control/Throwablex.scala.html#55453" title="(m: String, st: Seq[java.lang.StackTraceElement])Exception">exception</a><span class="delimiter">(</span><a href="../text/AnsiColors.scala.html#11694" title="object org.specs2.text.AnsiColors">AnsiColors</a>.<a href="../text/AnsiColors.scala.html#55900" title="(s: String, doIt: Boolean)String">removeColors</a><span class="delimiter">(</span><a href="#236242" title="String">m</a><span class="delimiter">)</span>, <a href="#236077" title="org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#67058" title="(e: Seq[java.lang.StackTraceElement])Seq[java.lang.StackTraceElement]">traceFilter</a><span class="delimiter">(</span><a href="#236244" title="List[java.lang.StackTraceElement]">st</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="org.junit.ComparisonFailure{}">Failure</span><span class="delimiter">(</span><a title="String" id="236354">m</a>, <a title="String" id="236355">e</a>, <a title="List[java.lang.StackTraceElement]" id="236356">st</a>, FailureDetails<span class="delimiter">(</span><a title="String" id="236357">expected</a>, <a title="String" id="236358">actual</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#236359" title="org.junit.ComparisonFailure{}" class="keyword">new</a> <a title="anonymous class $anon extends org.junit.ComparisonFailure" id="236359">ComparisonFailure</a><span class="delimiter">(</span><a href="../text/AnsiColors.scala.html#11694" title="object org.specs2.text.AnsiColors">AnsiColors</a>.<a href="../text/AnsiColors.scala.html#55900" title="(s: String, doIt: Boolean)String">removeColors</a><span class="delimiter">(</span><a href="#236354" title="String">m</a><span class="delimiter">)</span>, <a href="#236357" title="String">expected</a>, <a href="#236358" title="String">actual</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">private</span> <span class="keyword">val</span> <a title="Exception" id="236363">e</a> = <a href="#236077" title="org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#67059" title="(e: Exception)Exception">traceFilter</a><span class="delimiter">(</span><a href="#236076" title="org.specs2.execute.Failure">f</a>.<a href="../execute/Result.scala.html#55935" title="=&gt; Exception">exception</a><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Array[java.lang.StackTraceElement]" id="236365">getStackTrace</a> = <a href="#236363" title="=&gt; Exception">e</a>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.Throwable" id="236366">getCause</a> = <a href="#236363" title="=&gt; Exception">e</a>.<span title="()java.lang.Throwable">getCause</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="236367">printStackTrace</a> = <a href="#236363" title="=&gt; Exception">e</a>.<span title="()Unit">printStackTrace</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintStream)Unit" id="236368">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintStream" id="236385">w</a>: java.io.<span title="java.io.PrintStream">PrintStream</span><span class="delimiter">)</span> = <a href="#236363" title="=&gt; Exception">e</a>.<span title="(x$1: java.io.PrintStream)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#236385" title="java.io.PrintStream">w</a><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintWriter)Unit" id="236369">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="236393">w</a>: java.io.<span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> = <a href="#236363" title="=&gt; Exception">e</a>.<span title="(x$1: java.io.PrintWriter)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#236393" title="java.io.PrintWriter">w</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="comment">/**
 * Factory methods to help with testing
 */</span>
<span class="keyword">object</span> <a title="object org.specs2.runner.JUnitRunner" id="11242">JUnitRunner</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T &lt;: org.specs2.specification.SpecificationStructure](implicit m: ClassManifest[T])org.specs2.runner.JUnitRunner" id="236405">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.specs2.specification.SpecificationStructure" id="236407">T</a> &lt;: SpecificationStructure<span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassManifest[T]" id="236418">m</a>: <span title="ClassManifest[T]">ClassManifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="org.specs2.runner.JUnitRunner" class="keyword">new</span> <a href="#11241" title="org.specs2.runner.JUnitRunner">JUnitRunner</a><span class="delimiter">(</span><a href="#236418" title="ClassManifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T &lt;: org.specs2.specification.SpecificationStructure](s: T)(implicit m: ClassManifest[T])org.specs2.runner.JUnitRunner" id="236408">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.specs2.specification.SpecificationStructure" id="236410">T</a> &lt;: SpecificationStructure<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="236424">s</a>: <a href="#236410" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassManifest[T]" id="236425">m</a>: <span title="ClassManifest[T]">ClassManifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#236428" title="org.specs2.runner.JUnitRunner{}" class="keyword">new</a> <a href="#11241" title="anonymous class $anon extends org.specs2.runner.JUnitRunner" id="236428">JUnitRunner</a><span class="delimiter">(</span><a href="#236425" title="ClassManifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="T" id="236431">specification</a> = <a href="#236424" title="T">s</a>	  
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T &lt;: org.specs2.specification.SpecificationStructure](fragments: org.specs2.specification.Fragments)(implicit m: ClassManifest[T])org.specs2.runner.JUnitRunner" id="236411">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.specs2.specification.SpecificationStructure" id="236413">T</a> &lt;: SpecificationStructure<span class="delimiter">]</span><span class="delimiter">(</span><a title="org.specs2.specification.Fragments" id="236440">fragments</a>: <a href="../specification/Fragments.scala.html#11516" title="org.specs2.specification.Fragments">Fragments</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassManifest[T]" id="236441">m</a>: <span title="ClassManifest[T]">ClassManifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#236444" title="org.specs2.runner.JUnitRunner{}" class="keyword">new</a> <a href="#11241" title="anonymous class $anon extends org.specs2.runner.JUnitRunner" id="236444">JUnitRunner</a><span class="delimiter">(</span><a href="#236441" title="ClassManifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.specification.Fragments" id="236447">content</a> = <a href="#236440" title="org.specs2.specification.Fragments">fragments</a>	  
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T &lt;: org.specs2.specification.SpecificationStructure](f: org.specs2.specification.Fragments, props: org.specs2.main.SystemProperties, console: org.specs2.reporter.TextExporting, html: org.specs2.reporter.HtmlExporting)(implicit m: ClassManifest[T])org.specs2.runner.JUnitRunner" id="236414">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.specs2.specification.SpecificationStructure" id="236416">T</a> &lt;: SpecificationStructure<span class="delimiter">]</span><span class="delimiter">(</span><a title="org.specs2.specification.Fragments" id="236455">f</a>: <a href="../specification/Fragments.scala.html#11516" title="org.specs2.specification.Fragments">Fragments</a>, <a title="org.specs2.main.SystemProperties" id="236456">props</a>: <a href="../main/SystemProperties.scala.html#10088" title="org.specs2.main.SystemProperties">SystemProperties</a>, <a title="org.specs2.reporter.TextExporting" id="236457">console</a>: <a href="../reporter/TextExporting.scala.html#11156" title="org.specs2.reporter.TextExporting">TextExporting</a>, <a title="org.specs2.reporter.HtmlExporting" id="236458">html</a>: <a href="../reporter/HtmlExporting.scala.html#10795" title="org.specs2.reporter.HtmlExporting">HtmlExporting</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="ClassManifest[T]" id="236459">m</a>: <span title="ClassManifest[T]">ClassManifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#236462" title="org.specs2.runner.JUnitRunner{}" class="keyword">new</a> <a href="#11241" title="anonymous class $anon extends org.specs2.runner.JUnitRunner" id="236462">JUnitRunner</a><span class="delimiter">(</span><a href="#236459" title="ClassManifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="specification extends java.lang.Object with org.specs2.Specification" id="236465">specification</a> = <a href="#236472" title="java.lang.Object with org.specs2.Specification" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.specs2.Specification" id="236472">Specification</a> <span class="delimiter">{</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.specification.Fragments" id="236474">is</a> = <a href="#236455" title="org.specs2.specification.Fragments">f</a> <span class="delimiter">}</span>
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.main.SystemProperties" id="236467">properties</a> = <a href="#236456" title="org.specs2.main.SystemProperties">props</a>
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.reporter.TextExporting" id="236469">consoleExporter</a> = <a href="#236457" title="org.specs2.reporter.TextExporting">console</a>
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.reporter.HtmlExporting" id="236471">htmlExporter</a> = <a href="#236458" title="org.specs2.reporter.HtmlExporting">html</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="comment">/**
 * This class refines the &lt;code&gt;AssertionFailedError&lt;/code&gt; from junit
 * and provides the stackTrace of an exception which occurred during the specification execution
 */</span>
<span class="keyword">class</span> <a title="class SpecFailureAssertionFailedError extends junit.framework.AssertionFailedError with ScalaObject" id="11244">SpecFailureAssertionFailedError</a><a href="#11244" title="ScalaObject" class="delimiter">(</a><a title="Exception" id="236253">e</a>: <span title="Exception">Exception</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="junit.framework.AssertionFailedError">AssertionFailedError</span><span class="delimiter">(</span><a href="#236253" title="Exception">e</a>.<span title="()java.lang.String">getMessage</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Array[java.lang.StackTraceElement]" id="236248">getStackTrace</a> = <a href="#236253" title="Exception">e</a>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.Throwable" id="236249">getCause</a> = <a href="#236253" title="Exception">e</a>.<span title="()java.lang.Throwable">getCause</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="236250">printStackTrace</a> = <a href="#236253" title="Exception">e</a>.<span title="()Unit">printStackTrace</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintStream)Unit" id="236251">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintStream" id="236520">w</a>: java.io.<span title="java.io.PrintStream">PrintStream</span><span class="delimiter">)</span> = <a href="#236253" title="Exception">e</a>.<span title="(x$1: java.io.PrintStream)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#236520" title="java.io.PrintStream">w</a><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintWriter)Unit" id="236252">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="236529">w</a>: java.io.<span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> = <a href="#236253" title="Exception">e</a>.<span title="(x$1: java.io.PrintWriter)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#236529" title="java.io.PrintWriter">w</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Descriptions for a seq of Fragments to execute
 */</span>
<span class="keyword">class</span> <a title="class JUnitDescriptionsFragments extends org.specs2.reporter.JUnitDescriptions[org.specs2.specification.Fragment] with ScalaObject" id="11245">JUnitDescriptionsFragments</a><a href="#11245" title="ScalaObject" class="delimiter">(</a><a title="Class[_]" id="235507">klass</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../reporter/JUnitDescriptions.scala.html#10892" title="org.specs2.reporter.JUnitDescriptions[org.specs2.specification.Fragment]">JUnitDescriptions</a><span class="delimiter">[</span>Fragment<span class="delimiter">]</span><span class="delimiter">(</span><a href="#235507" title="Class[_]">klass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: Class[_])org.specs2.specification.Text" id="235505">initialFragment</a><span class="delimiter">(</span><a title="Class[_]" id="236548">s</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../specification/Fragment.scala.html#188101" title="(t: String)org.specs2.specification.Text">Text</a><span class="delimiter">(</span><a href="#236548" title="Class[_]">s</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
    <span class="comment">/**
     * This function is used to map each node in a Tree[Fragment] to a pair of
     * (Description, Fragment)
     *
     * The Int argument is the numeric label of the current TreeNode being mapped.
     * It is used to create a unique description of the example to executed which is required
     * by JUnit
     */</span>
    <span class="keyword">def</span> <a title="(klass: Class[_])(org.specs2.specification.Fragment, Seq[(org.junit.runner.Description, org.specs2.specification.Fragment)], Int) =&gt; Option[(org.junit.runner.Description, org.specs2.specification.Fragment)]" id="235506">mapper</a><span class="delimiter">(</span><a title="Class[_]" id="236556">klass</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="delimiter">(</span>Fragment, Seq<span class="delimiter">[</span>DescribedFragment<span class="delimiter">]</span>, Int<span class="delimiter">)</span> =&gt; Option<span class="delimiter">[</span>DescribedFragment<span class="delimiter">]</span> =
      <span class="delimiter">(</span>f: <a href="../specification/Fragment.scala.html#11467" title="org.specs2.specification.Fragment">Fragment</a>, parentNodes: <span title="Seq[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Seq</span><span class="delimiter">[</span>DescribedFragment<span class="delimiter">]</span>, nodeLabel: <span title="Int">Int</span><span class="delimiter">)</span> =&gt; <a href="#236562" title="org.specs2.specification.Fragment">f</a> <span title="Option[(org.junit.runner.Description, org.specs2.specification.Fragment)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]" id="236565">s</a> @ SpecStart<span class="delimiter">(</span>_,_,_,_<span class="delimiter">)</span>   =&gt; <span title="(x: (org.junit.runner.Description, org.specs2.specification.Fragment))Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Some</span><span class="delimiter">(</span><a href="../reporter/JUnitDescriptions.scala.html#208270" title="(testClass: Class[_], suiteName: String, testName: String, label: String)org.junit.runner.Description">createDescription</a><span title="(x: org.junit.runner.Description)ArrowAssoc[org.junit.runner.Description]" class="delimiter">(</span><a href="#236556" title="Class[_]">klass</a>, suiteName=<a href="../reporter/JUnitDescriptions.scala.html#208273" title="(s: String, parentNodes: Seq[String])String">testName</a><span class="delimiter">(</span><a href="#236565" title="org.specs2.specification.SpecStart">s</a>.<a href="../specification/Fragment.scala.html#50353" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(y: org.specs2.specification.Fragment)(org.junit.runner.Description, org.specs2.specification.Fragment)">-&gt;</span> <a href="#236562" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Text</span><span class="delimiter">(</span><a title="String" id="236610">t</a><span class="delimiter">)</span>                    =&gt; <span title="(x: (org.junit.runner.Description, org.specs2.specification.Fragment))Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Some</span><span class="delimiter">(</span><a href="../reporter/JUnitDescriptions.scala.html#208270" title="(testClass: Class[_], suiteName: String, testName: String, label: String)org.junit.runner.Description">createDescription</a><span title="(x: org.junit.runner.Description)ArrowAssoc[org.junit.runner.Description]" class="delimiter">(</span><a href="#236556" title="Class[_]">klass</a>, suiteName=<a href="../reporter/JUnitDescriptions.scala.html#208273" title="(s: String, parentNodes: Seq[String])String">testName</a><span class="delimiter">(</span><a href="#236610" title="String">t</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(y: org.specs2.specification.Fragment)(org.junit.runner.Description, org.specs2.specification.Fragment)">-&gt;</span> <a href="#236562" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Example</span><span class="delimiter">(</span><a title="org.specs2.text.MarkupString" id="236655">description</a>, <a title="() =&gt; org.specs2.execute.Result" id="236656">body</a><span class="delimiter">)</span> =&gt; <span title="(x: (org.junit.runner.Description, org.specs2.specification.Fragment))Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Some</span><span class="delimiter">(</span><a href="../reporter/JUnitDescriptions.scala.html#208300" title="String" id="236665">createDescription</a><span title="(x: org.junit.runner.Description)ArrowAssoc[org.junit.runner.Description]" class="delimiter">(</span><a href="#236556" title="Class[_$4]" id="236662">klass</a>, label=<a href="#236564" title="Int">nodeLabel</a>.<a title="java.lang.String" id="236663">toString</a>, testName=<a href="../reporter/JUnitDescriptions.scala.html#208273" title="(s: String, parentNodes: Seq[String])String">testName</a><a title="String" id="236664" class="delimiter">(</a><a href="#236655" title="org.specs2.text.MarkupString">description</a>.<span title="()java.lang.String">toString</span>, <a href="../reporter/JUnitDescriptions.scala.html#208272" title="(parentNodes: Seq[(org.junit.runner.Description, org.specs2.specification.Fragment)])Seq[java.lang.String]">parentPath</a><span class="delimiter">(</span><a href="#236563" title="Seq[(org.junit.runner.Description, org.specs2.specification.Fragment)]">parentNodes</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(y: org.specs2.specification.Fragment)(org.junit.runner.Description, org.specs2.specification.Fragment)">-&gt;</span> <a href="#236562" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Step</span><span class="delimiter">(</span><a title="org.specs2.control.LazyParameter[org.specs2.execute.Result]" id="236707">action</a><span class="delimiter">)</span>               =&gt; <span title="(x: (org.junit.runner.Description, org.specs2.specification.Fragment))Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Some</span><span class="delimiter">(</span><a href="../reporter/JUnitDescriptions.scala.html#208300" title="String" id="236715">createDescription</a><span title="(x: org.junit.runner.Description)ArrowAssoc[org.junit.runner.Description]" class="delimiter">(</span><a href="#236556" title="Class[_$4]" id="236712">klass</a>, label=<a href="#236564" title="Int">nodeLabel</a>.<a title="java.lang.String" id="236713">toString</a>, testName=<a title="java.lang.String(&quot;step&quot;)" id="236714" class="string">&quot;step&quot;</a><span class="delimiter">)</span> <span title="(y: org.specs2.specification.Fragment)(org.junit.runner.Description, org.specs2.specification.Fragment)">-&gt;</span> <a href="#236562" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Action</span><span class="delimiter">(</span><a title="org.specs2.control.LazyParameter[org.specs2.execute.Result]" id="236757">action</a><span class="delimiter">)</span>             =&gt; <span title="(x: (org.junit.runner.Description, org.specs2.specification.Fragment))Some[(org.junit.runner.Description, org.specs2.specification.Fragment)]">Some</span><span class="delimiter">(</span><a href="../reporter/JUnitDescriptions.scala.html#208300" title="String" id="236765">createDescription</a><span title="(x: org.junit.runner.Description)ArrowAssoc[org.junit.runner.Description]" class="delimiter">(</span><a href="#236556" title="Class[_$4]" id="236762">klass</a>, label=<a href="#236564" title="Int">nodeLabel</a>.<a title="java.lang.String" id="236763">toString</a>, testName=<a title="java.lang.String(&quot;action&quot;)" id="236764" class="string">&quot;action&quot;</a><span class="delimiter">)</span> <span title="(y: org.specs2.specification.Fragment)(org.junit.runner.Description, org.specs2.specification.Fragment)">-&gt;</span> <a href="#236562" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="None.type" id="236807">other</a>                      =&gt; <span title="object None">None</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
        </pre>
    </body>
</html>