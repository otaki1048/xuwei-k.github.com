<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/Sequence.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> main.Arguments
<span class="keyword">import</span> control.<a href="../control/LazyParameter.scala.html#9568" title="object org.specs2.control.LazyParameters">LazyParameters</a>._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> <a href="../specification/Fragments.scala.html#11517" title="object org.specs2.specification.Fragments">Fragments</a>._
<span class="keyword">import</span> <a href="SpecsArguments.scala.html#11068" title="object org.specs2.reporter.SpecsArguments">SpecsArguments</a>._

<span class="comment">/**
 * The Sequence trait implements the logic for the fragments to execute according to their dependencies
 */</span>
<span class="keyword">trait</span> <a title="trait Sequence extends java.lang.Object" id="11044">Sequence</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="comment">/** select function returning a filtered and ordered seq of seq of Fragments */</span>
  <span class="keyword">def</span> <a title="(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.specification.Fragment] =&gt; Seq[org.specs2.reporter.FragmentSeq]" id="193902">sequence</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="216348">arguments</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: Seq<span class="delimiter">[</span>Fragment<span class="delimiter">]</span> =&gt; Seq<span class="delimiter">[</span>FragmentSeq<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * The DefaultSequence trait sorts the Fragments by making sure Steps will be executed before Examples
 */</span>
<span class="keyword">trait</span> <a title="trait DefaultSequence extends java.lang.Object with ScalaObject" id="11045">DefaultSequence</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/** sequence function returning an ordered seq of seq of Fragments */</span>
  <span class="keyword">def</span> <a title="(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.specification.Fragment] =&gt; Seq[org.specs2.reporter.FragmentSeq]" id="193908">sequence</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="218926">arguments</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: Seq<span class="delimiter">[</span>Fragment<span class="delimiter">]</span> =&gt; Seq<span class="delimiter">[</span>FragmentSeq<span class="delimiter">]</span> =
    <span class="delimiter">(</span>fragments: <span title="Seq[org.specs2.specification.Fragment]">Seq</span><span class="delimiter">[</span>Fragment<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#193909" title="(fragments: Seq[org.specs2.specification.Fragment])(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.reporter.FragmentSeq]">sequence</a><span class="delimiter">(</span><a href="#218929" title="Seq[org.specs2.specification.Fragment]">fragments</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#218926" title="org.specs2.main.Arguments">arguments</a><span class="delimiter">)</span>

  <span class="comment">/**
   * the sequence method returns sequences of fragments which can be executed concurrently.
   * Among the constraints to respect, any Step Fragment must be executed before any following Example Fragment,
   * so that &quot;first&quot; and &quot;last&quot; actions are executed properly in a Specification
   *
   * If the arguments specify that the specification is sequential, then each fragment will be executed individually
   */</span>
  <span class="keyword">def</span> <a title="(fragments: Seq[org.specs2.specification.Fragment])(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.reporter.FragmentSeq]" id="193909">sequence</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.Fragment]" id="219117">fragments</a>: <span title="Seq[org.specs2.specification.Fragment]">Seq</span><span class="delimiter">[</span>Fragment<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="218937">arguments</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a> = <a href="../main/Arguments.scala.html#71244" title="(implicit arguments: String*)org.specs2.main.Arguments">Arguments</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Seq[org.specs2.reporter.FragmentSeq]">Seq</span><span class="delimiter">[</span>FragmentSeq<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Seq[org.specs2.reporter.FragmentSeq]" class="keyword">if</span> <span class="delimiter">(</span><a href="#218937" title="org.specs2.main.Arguments">arguments</a>.<a href="../main/Arguments.scala.html#50451" title="=&gt; Boolean">sequential</a><span class="delimiter">)</span> <a href="#219117" title="Seq[org.specs2.specification.Fragment]">fragments</a>.<span title="(f: org.specs2.specification.Fragment =&gt; org.specs2.reporter.FragmentSeq)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.Fragment],org.specs2.reporter.FragmentSeq,Seq[org.specs2.reporter.FragmentSeq]])Seq[org.specs2.reporter.FragmentSeq]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.reporter.FragmentSeq,Seq[org.specs2.reporter.FragmentSeq]]" class="delimiter">(</span><a title="org.specs2.specification.Fragment" id="218964">f</a> =&gt; <a href="#219181" title="object org.specs2.reporter.FragmentSeq">FragmentSeq</a>.<a href="#216374" title="(f: org.specs2.specification.Fragment)org.specs2.reporter.FragmentSeq">create</a><span class="delimiter">(</span><a href="#218964" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#193910" title="(fragments: Seq[org.specs2.specification.Fragment])(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.reporter.FragmentSeq]">isolateSteps</a><span class="delimiter">(</span><a href="#219117" title="Seq[org.specs2.specification.Fragment]">fragments</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#218937" title="org.specs2.main.Arguments">arguments</a><span class="delimiter">)</span>.<span title="=&gt; Seq[org.specs2.reporter.FragmentSeq]">reverse</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(fragments: Seq[org.specs2.specification.Fragment])(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.reporter.FragmentSeq]" id="193910">isolateSteps</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.Fragment]" id="218995">fragments</a>: <span title="Seq[org.specs2.specification.Fragment]">Seq</span><span class="delimiter">[</span>Fragment<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="218996">arguments</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: <span title="Seq[org.specs2.reporter.FragmentSeq]">Seq</span><span class="delimiter">[</span>FragmentSeq<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#218995" title="Seq[org.specs2.specification.Fragment]">fragments</a>.<span title="(z: List[org.specs2.reporter.FragmentSeq])(op: (List[org.specs2.reporter.FragmentSeq], org.specs2.specification.Fragment) =&gt; List[org.specs2.reporter.FragmentSeq])List[org.specs2.reporter.FragmentSeq]">foldLeft</span><span class="delimiter">(</span><span title="object Nil">Nil</span>: <span title="List[org.specs2.reporter.FragmentSeq]">List</span><span class="delimiter">[</span>FragmentSeq<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="List[org.specs2.reporter.FragmentSeq]" id="219026">res</a>, <a title="org.specs2.specification.Fragment" id="219027">f</a><span class="delimiter">)</span> =&gt;
      <a href="#219026" title="List[org.specs2.reporter.FragmentSeq]">res</a> <span title="List[org.specs2.reporter.FragmentSeq]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="List[org.specs2.reporter.FragmentSeq]">Nil</span> =&gt; <span title="(xs: org.specs2.reporter.FragmentSeq*)List[org.specs2.reporter.FragmentSeq]">List</span><span class="delimiter">(</span><a href="#219181" title="object org.specs2.reporter.FragmentSeq">FragmentSeq</a>.<a href="#216374" title="(f: org.specs2.specification.Fragment)org.specs2.reporter.FragmentSeq">create</a><span class="delimiter">(</span><a href="#219027" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="List[org.specs2.reporter.FragmentSeq]" id="219040">last</a> :: <a title="List[org.specs2.reporter.FragmentSeq]" id="219041">rest</a> =&gt; <a href="#219027" title="org.specs2.specification.Fragment">f</a> <span title="List[org.specs2.reporter.FragmentSeq]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="List[org.specs2.reporter.FragmentSeq]">Step</span><span class="delimiter">(</span>_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#219040" title="org.specs2.reporter.FragmentSeq">last</a>.<a href="#218968" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a>.<span title="(p: org.specs2.specification.Fragment =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="../specification/Fragments.scala.html#50138" title="=&gt; org.specs2.specification.Fragment =&gt; Boolean">isExampleOrStep</a><span class="delimiter">)</span>    =&gt; <a href="#219181" title="object org.specs2.reporter.FragmentSeq">FragmentSeq</a>.<a href="#216374" title="(f: org.specs2.specification.Fragment)org.specs2.reporter.FragmentSeq">create</a><span class="delimiter">(</span><a href="#219027" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span> <a href="#219048" title="(x: org.specs2.reporter.FragmentSeq)List[org.specs2.reporter.FragmentSeq]">::</a> <a href="#219040" title="org.specs2.reporter.FragmentSeq">last</a> <a href="#219049" title="(x: org.specs2.reporter.FragmentSeq)List[org.specs2.reporter.FragmentSeq]">::</a> <a href="#219041" title="List[org.specs2.reporter.FragmentSeq]">rest</a>
          <span class="keyword">case</span> <span title="List[org.specs2.reporter.FragmentSeq]">Example</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#219040" title="org.specs2.reporter.FragmentSeq">last</a>.<a href="#218968" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a>.<span title="(p: org.specs2.specification.Fragment =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="../specification/Fragments.scala.html#50137" title="=&gt; org.specs2.specification.Fragment =&gt; Boolean">isStep</a><span class="delimiter">)</span> =&gt; <a href="#219181" title="object org.specs2.reporter.FragmentSeq">FragmentSeq</a>.<a href="#216374" title="(f: org.specs2.specification.Fragment)org.specs2.reporter.FragmentSeq">create</a><span class="delimiter">(</span><a href="#219027" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span> <a href="#219062" title="(x: org.specs2.reporter.FragmentSeq)List[org.specs2.reporter.FragmentSeq]">::</a> <a href="#219040" title="org.specs2.reporter.FragmentSeq">last</a> <a href="#219063" title="(x: org.specs2.reporter.FragmentSeq)List[org.specs2.reporter.FragmentSeq]">::</a> <a href="#219041" title="List[org.specs2.reporter.FragmentSeq]">rest</a>
          <span class="keyword">case</span> <span title="List[org.specs2.reporter.FragmentSeq]">_</span> =&gt; <a href="#216375" title="(fragments: Seq[org.specs2.specification.Fragment])org.specs2.reporter.FragmentSeq">FragmentSeq</a><span class="delimiter">(</span><a href="#219040" title="org.specs2.reporter.FragmentSeq">last</a>.<a href="#218968" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a> <span title="(elem: org.specs2.specification.Fragment)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.Fragment],org.specs2.specification.Fragment,Seq[org.specs2.specification.Fragment]])Seq[org.specs2.specification.Fragment]">:+</span> <a href="#219027" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span> <a href="#219074" title="(x: org.specs2.reporter.FragmentSeq)List[org.specs2.reporter.FragmentSeq]">::</a> <a href="#219041" title="List[org.specs2.reporter.FragmentSeq]">rest</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
case <span class="keyword">class</span> <a title="class FragmentSeq extends java.lang.Object with ScalaObject with Product with Serializable" id="216375">FragmentSeq</a><a href="#216375" title="ScalaObject" class="delimiter">(</a><a title="Seq[org.specs2.specification.Fragment]" id="218968">fragments</a>: <span title="Seq[org.specs2.specification.Fragment]">Seq</span><span class="delimiter">[</span>Fragment<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; org.specs2.main.Arguments" id="195157">arguments</a> = <a href="../specification/Fragments.scala.html#11517" title="object org.specs2.specification.Fragments">Fragments</a>.<a href="../specification/Fragments.scala.html#50132" title="(fs: org.specs2.specification.Fragment*)org.specs2.specification.Fragments">create</a><span class="delimiter">(</span><a href="#218968" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a>:_*<span class="delimiter">)</span>.<a href="../specification/Fragments.scala.html#50153" title="=&gt; org.specs2.main.Arguments">arguments</a>
<span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#219176" title="object org.specs2.reporter.FragmentSeq" id="219181">FragmentSeq</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(f: org.specs2.specification.Fragment)org.specs2.reporter.FragmentSeq" id="216374">create</a><span class="delimiter">(</span><a title="org.specs2.specification.Fragment" id="218965">f</a>: <a href="../specification/Fragment.scala.html#11467" title="org.specs2.specification.Fragment">Fragment</a><span class="delimiter">)</span> = <a href="#216375" title="(fragments: Seq[org.specs2.specification.Fragment])org.specs2.reporter.FragmentSeq">FragmentSeq</a><span class="delimiter">(</span><span title="(elems: org.specs2.specification.Fragment*)Seq[org.specs2.specification.Fragment]">Seq</span><span class="delimiter">(</span><a href="#218965" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>