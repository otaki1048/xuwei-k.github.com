<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/Storing.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> org.specs2.internal.scalaz._
<span class="keyword">import</span> <span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> <a href="../specification/ExecutedFragment.scala.html#11397" title="object org.specs2.specification.ExecutedFragments">ExecutedFragments</a>._
<span class="keyword">import</span> <a href="NestedBlocks.scala.html#10974" title="object org.specs2.reporter.NestedBlocks">NestedBlocks</a>._
<span class="keyword">import</span> collection.<a href="../collection/Iterablex.scala.html#9531" title="object org.specs2.collection.Iterablex">Iterablex</a>._
<span class="keyword">import</span> main.<span class="delimiter">{</span>Execute, Arguments<span class="delimiter">}</span>

<span class="comment">/**
* This trait stores the results of an executed specification
* It also updates the statistics of:
*
*  * SpecStart fragments from SpecEnd fragments
*/</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait Storing extends java.lang.Object" id="11129">Storing</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="comment">/** @return a function storing ExecutedFragments */</span>
  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment]" id="193904">store</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="216500">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: Seq<span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span> =&gt; Seq<span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span>

<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait DefaultStoring extends java.lang.Object with org.specs2.reporter.Storing with org.specs2.reporter.Statistics with org.specs2.reporter.WithDefaultStatisticsRepository with ScalaObject" id="11130">DefaultStoring</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11129" title="org.specs2.reporter.Storing">Storing</a> <span class="keyword">with</span> <a href="Statistics.scala.html#11099" title="org.specs2.reporter.Statistics">Statistics</a> <span class="keyword">with</span> <a href="StatisticsRepository.scala.html#11116" title="org.specs2.reporter.WithDefaultStatisticsRepository">WithDefaultStatisticsRepository</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment]" id="193928">store</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="226213">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: Seq<span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span> =&gt; Seq<span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span> = <span class="delimiter">(</span>fragments: <span title="Seq[org.specs2.specification.ExecutedFragment]">Seq</span><span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#226213" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#50434" title="=&gt; org.specs2.main.Store">store</a>.<a href="../main/Arguments.scala.html#105553" title="=&gt; Boolean">reset</a><span class="delimiter">)</span> <a href="StatisticsRepository.scala.html#60259" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#217085" title="=&gt; DefaultStoring.this.repository.type">resetStatistics</a>
    <span class="delimiter">(</span><a href="NestedBlocks.scala.html#204142" title="(blocks: Seq[org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]], f: (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment) =&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment))Seq[org.specs2.specification.ExecutedFragment]">associateStartEnd</a><span class="delimiter">(</span><a href="#193929" title="(fragments: Seq[org.specs2.specification.ExecutedFragment])(implicit args: org.specs2.main.Arguments)Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]">statisticsTotals</a><a href="#226213" title="org.specs2.main.Arguments" class="delimiter">(</a><a href="#226216" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a><span class="delimiter">)</span>, <a href="#193931" title="=&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment) =&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)">updateStatsOnSpecStart</a><span class="delimiter">)</span> <span title="(x: =&gt; Seq[org.specs2.specification.ExecutedFragment])org.specs2.internal.scalaz.Identity[Seq[org.specs2.specification.ExecutedFragment]]">map</span> <span class="delimiter">(</span><a href="#226478" title="(a: org.specs2.specification.ExecutedFragment)org.specs2.internal.scalaz.Dual[org.specs2.specification.ExecutedFragment]">_</a>.<span title="=&gt; org.specs2.specification.ExecutedFragment">value</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(f: Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment])Seq[org.specs2.specification.ExecutedFragment]">|&gt;</span> <a href="#193932" title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment]">storeStatistics</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fragments: Seq[org.specs2.specification.ExecutedFragment])(implicit args: org.specs2.main.Arguments)Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]" id="193929">statisticsTotals</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutedFragment]" id="226230">fragments</a>: <span title="Seq[org.specs2.specification.ExecutedFragment]">Seq</span><span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="226231">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]" id="226234">totals</a> = <a href="#226230" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a> <span title="(that: scala.collection.GenIterable[org.specs2.specification.Stats])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.ExecutedFragment],(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats),Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]])Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]">zip</span> <a href="../collection/Iterablex.scala.html#53649" title="(xs: scala.collection.GenIterable[org.specs2.specification.ExecutedFragment])org.specs2.collection.Iterablex.ExtendedIterable[org.specs2.specification.ExecutedFragment]">fragments</a>.<a href="../collection/Iterablex.scala.html#60342" title="(reducer: org.specs2.internal.scalaz.Reducer[org.specs2.specification.ExecutedFragment,DefaultStoring.this.SpecsStatistics])DefaultStoring.this.SpecsStatistics">reduceWith</a><span class="delimiter">(</span><a href="Statistics.scala.html#193939" title="object DefaultStoring.this.StatisticsReducer">StatisticsReducer</a><span class="delimiter">)</span>.<a href="Statistics.scala.html#199133" title="=&gt; List[org.specs2.specification.Stats]">totals</a>
    <a href="#226234" title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]">totals</a> <span title="(f: (org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats) =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)],Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment],Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]])Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]">map</span> <span class="delimiter">(</span><a href="#193930" title="(implicit args: org.specs2.main.Arguments)(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats) =&gt; org.specs2.specification.ExecutedFragment">setStatsOnSpecEndFragments</a> <span title="(g: org.specs2.specification.ExecutedFragment =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment])(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats) =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]">andThen</span> <a href="NestedBlocks.scala.html#204158" title="=&gt; org.specs2.specification.ExecutedFragment =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]">executedFragmentsToSpecBlock</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * set the statistics on SpecEndFragments after they've been computed by the StatisticsReducer
   * Those statistics are updated from previously executed statistics to calculate trends
   */</span>
  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats) =&gt; org.specs2.specification.ExecutedFragment" id="193930">setStatsOnSpecEndFragments</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="226343">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>fs: <span title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)" class="delimiter">(</span>ExecutedFragment, Stats<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#226347" title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)">fs</a> <span title="org.specs2.specification.ExecutedFragment" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedSpecEnd" class="delimiter">(</span>ExecutedSpecEnd<span class="delimiter">(</span><a title="org.specs2.specification.SpecEnd" id="226350">n</a>, <a title="org.specs2.io.Location" id="226351">l</a>, <a title="org.specs2.specification.Stats" id="226352">s</a><span class="delimiter">)</span>, <a title="org.specs2.specification.Stats" id="226353">stats</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#226343" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#50434" title="=&gt; org.specs2.main.Store">store</a>.<a href="../main/Arguments.scala.html#105554" title="=&gt; Boolean">never</a> =&gt; <a href="../specification/ExecutedFragment.scala.html#194884" title="(end: org.specs2.specification.SpecEnd, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecEnd">ExecutedSpecEnd</a><span class="delimiter">(</span><a href="#226350" title="org.specs2.specification.SpecEnd">n</a>, <a href="#226351" title="org.specs2.io.Location">l</a>, <a href="#226353" title="org.specs2.specification.Stats">stats</a>.<a href="../specification/Stats.scala.html#194515" title="(previous: Option[org.specs2.specification.Stats])org.specs2.specification.Stats">updateFrom</a><span class="delimiter">(</span><a href="StatisticsRepository.scala.html#60259" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#217082" title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]">getStatistics</a><span class="delimiter">(</span><a href="#226350" title="org.specs2.specification.SpecEnd">n</a>.<a href="../specification/Fragment.scala.html#194854" title="=&gt; org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a title="org.specs2.specification.ExecutedFragment" id="226370">other</a>, <a title="org.specs2.specification.Stats" id="226371">s</a><span class="delimiter">)</span>                                             =&gt; <a href="#226370" title="org.specs2.specification.ExecutedFragment">other</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   *  &quot;associate&quot; function to set up the statistics on the SpecStart fragments after they've been computed and set on SpecEnd fragments.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment) =&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" id="193931">updateStatsOnSpecStart</a> = <span class="delimiter">(</span>start: <a href="../specification/ExecutedFragment.scala.html#11396" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a>, end: <a href="../specification/ExecutedFragment.scala.html#11396" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span title="(_1: org.specs2.specification.ExecutedFragment, _2: org.specs2.specification.ExecutedFragment)(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#226403" title="org.specs2.specification.ExecutedFragment">start</a>, <a href="#226404" title="org.specs2.specification.ExecutedFragment">end</a><span class="delimiter">)</span> <span title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="(org.specs2.specification.ExecutedSpecStart, org.specs2.specification.ExecutedSpecEnd)" class="delimiter">(</span>ExecutedSpecStart<span class="delimiter">(</span><a title="org.specs2.specification.SpecStart" id="226413">ns</a>, <a title="org.specs2.io.Location" id="226414">ss</a>, <a title="org.specs2.specification.Stats" id="226415">ls</a><span class="delimiter">)</span>, ExecutedSpecEnd<span class="delimiter">(</span><a title="org.specs2.specification.SpecEnd" id="226416">ne</a>, <a title="org.specs2.io.Location" id="226417">se</a>, <a title="org.specs2.specification.Stats" id="226418">le</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(_1: org.specs2.specification.ExecutedSpecStart, _2: org.specs2.specification.ExecutedSpecEnd)(org.specs2.specification.ExecutedSpecStart, org.specs2.specification.ExecutedSpecEnd)" class="delimiter">(</span><a href="../specification/ExecutedFragment.scala.html#194788" title="(start: org.specs2.specification.SpecStart, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecStart">ExecutedSpecStart</a><span class="delimiter">(</span><a href="#226413" title="org.specs2.specification.SpecStart">ns</a>, <a href="#226417" title="org.specs2.io.Location">se</a>, <a href="#226418" title="org.specs2.specification.Stats">le</a><span class="delimiter">)</span>, <a href="../specification/ExecutedFragment.scala.html#194884" title="(end: org.specs2.specification.SpecEnd, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecEnd">ExecutedSpecEnd</a><span class="delimiter">(</span><a href="#226416" title="org.specs2.specification.SpecEnd">ne</a>, <a href="#226417" title="org.specs2.io.Location">se</a>, <a href="#226418" title="org.specs2.specification.Stats">le</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" id="226437">other</a>                                                        =&gt; <span title="(_1: org.specs2.specification.ExecutedFragment, _2: org.specs2.specification.ExecutedFragment)(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#226403" title="org.specs2.specification.ExecutedFragment">start</a>, <a href="#226404" title="org.specs2.specification.ExecutedFragment">end</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment]" id="193932">storeStatistics</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="226709">args</a>: <a href="../main/Arguments.scala.html#10033" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>fragments: <span title="Seq[org.specs2.specification.ExecutedFragment]">Seq</span><span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span title="Seq[org.specs2.specification.ExecutedFragment]" class="keyword">if</span> <span class="delimiter">(</span><a href="#226709" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#50434" title="=&gt; org.specs2.main.Store">store</a>.<a href="../main/Arguments.scala.html#105554" title="=&gt; Boolean">never</a><span class="delimiter">)</span> <a href="#226713" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]" id="226714">fn</a> = <a href="SpecsArguments.scala.html#11068" title="object org.specs2.reporter.SpecsArguments">SpecsArguments</a>.<a href="SpecsArguments.scala.html#195187" title="(fs: Seq[org.specs2.specification.ExecutedFragment])(implicit reducer: org.specs2.internal.scalaz.Reducer[org.specs2.specification.ExecutedFragment,org.specs2.reporter.SpecsArguments[org.specs2.specification.ExecutedFragment]])org.specs2.reporter.SpecsArguments[org.specs2.specification.ExecutedFragment]">foldAll</a><a href="SpecsArguments.scala.html#195192" title="object org.specs2.reporter.SpecsArguments.SpecsArgumentsReducer" class="delimiter">(</a><a href="#226713" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a><span class="delimiter">)</span>.<a href="SpecsArguments.scala.html#195206" title="=&gt; Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">fragmentAndSpecNames</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]]" id="226715">results</a> = <a href="#226714" title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">fn</a> <span title="(pf: PartialFunction[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName),(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)],(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult),Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]])Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]">collect</span> <a href="#226746" title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)" class="delimiter">{</a> <span class="keyword">case</span> <span title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)" class="delimiter">(</span><a title="org.specs2.specification.ExecutedResult" id="226749">r</a> @ ExecutedResult<span class="delimiter">(</span>_, _, _, _, _<span class="delimiter">)</span>, <a title="org.specs2.specification.SpecName" id="226750">name</a><span class="delimiter">)</span> =&gt; <span title="(_1: org.specs2.specification.SpecName, _2: org.specs2.specification.ExecutedResult)(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)" class="delimiter">(</span><a href="#226750" title="org.specs2.specification.SpecName">name</a>, <a href="#226749" title="org.specs2.specification.ExecutedResult">r</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(f: (org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult) =&gt; org.specs2.specification.SpecName)scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]]">groupBy</span> <span class="delimiter">(</span><a href="#226788" title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)">_</a>.<span title="=&gt; org.specs2.specification.SpecName">_1</span><span class="delimiter">)</span>
      <a href="#226715" title="scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]]">results</a> <span title="(f: (org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]) =&gt; org.specs2.reporter.StatisticsRepository)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]],org.specs2.reporter.StatisticsRepository,scala.collection.immutable.Iterable[org.specs2.reporter.StatisticsRepository]])scala.collection.immutable.Iterable[org.specs2.reporter.StatisticsRepository]">map</span> <a href="#193934" title="=&gt; (org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]) =&gt; DefaultStoring.this.repository.type">storeResults</a>
      <span class="comment">// toList is called to &quot;force&quot; the view</span>
      <span class="comment">// the result of storeStats is returned because SpecStarts might have been updated from the repository</span>
      <a href="#226714" title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">fn</a>.<span title="=&gt; List[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">toList</span> <span title="(f: (org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName) =&gt; org.specs2.specification.ExecutedFragment)(implicit bf: scala.collection.generic.CanBuildFrom[List[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)],org.specs2.specification.ExecutedFragment,List[org.specs2.specification.ExecutedFragment]])List[org.specs2.specification.ExecutedFragment]">map</span> <a href="#193933" title="=&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName) =&gt; org.specs2.specification.ExecutedFragment">storeStats</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * store the statistics:
   * * for SpecEnd -&gt; put the stats in the repository
   * * for a SpecStart that's a link -&gt; read the status of the previous execution 
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName) =&gt; org.specs2.specification.ExecutedFragment" id="193933">storeStats</a> = <span class="delimiter">(</span>fn: <span title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)" class="delimiter">(</span>ExecutedFragment, SpecName<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <a href="#226928" title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)">fn</a> <span title="org.specs2.specification.ExecutedFragment" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedSpecStart" class="delimiter">(</span>ExecutedSpecStart<span class="delimiter">(</span><a title="org.specs2.specification.SpecStart" id="226931">start</a> @ SpecStart<span class="delimiter">(</span>_,_,_,<span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>, <a title="org.specs2.io.Location" id="226932">loc</a>, <a title="org.specs2.specification.Stats" id="226933">st</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt;
        <a href="../specification/ExecutedFragment.scala.html#194788" title="(start: org.specs2.specification.SpecStart, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecStart">ExecutedSpecStart</a><span class="delimiter">(</span><a href="#226931" title="org.specs2.specification.SpecStart">start</a>, <a href="#226932" title="org.specs2.io.Location">loc</a>, <a href="StatisticsRepository.scala.html#60259" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#217082" title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]">getStatistics</a><span class="delimiter">(</span><a href="#226931" title="org.specs2.specification.SpecStart">start</a>.<a href="../specification/Fragment.scala.html#50344" title="=&gt; org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>.<span title="(default: =&gt; org.specs2.specification.Stats)org.specs2.specification.Stats">getOrElse</span><span class="delimiter">(</span><a href="#226933" title="org.specs2.specification.Stats">st</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedSpecEnd" class="delimiter">(</span><a title="org.specs2.specification.ExecutedSpecEnd" id="226947">f</a> @ ExecutedSpecEnd<span class="delimiter">(</span><a title="org.specs2.specification.SpecEnd" id="226948">end</a> @ SpecEnd<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="org.specs2.io.Location" id="226949">loc</a>, <a title="org.specs2.specification.Stats" id="226950">st</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <a href="StatisticsRepository.scala.html#60259" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#217083" title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)DefaultStoring.this.repository.type">storeStatistics</a><span class="delimiter">(</span><a href="#226948" title="org.specs2.specification.SpecEnd">end</a>.<a href="../specification/Fragment.scala.html#194854" title="=&gt; org.specs2.specification.SpecName">specName</a>, <a href="#226950" title="org.specs2.specification.Stats">st</a><span class="delimiter">)</span>; <a href="#226947" title="org.specs2.specification.ExecutedSpecEnd">f</a>
      <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a title="org.specs2.specification.ExecutedFragment" id="226953">other</a>, <a title="org.specs2.specification.SpecName" id="226954">name</a><span class="delimiter">)</span>                                       =&gt; <a href="#226953" title="org.specs2.specification.ExecutedFragment">other</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * store the results by spec name
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; (org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]) =&gt; DefaultStoring.this.repository.type" id="193934">storeResults</a> = <span class="delimiter">(</span>r: <span title="(org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])" class="delimiter">(</span>SpecName, Seq<span class="delimiter">[</span><span class="delimiter">(</span>SpecName, ExecutedResult<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#226811" title="(org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])" class="delimiter">(</a><a href="#226810" title="org.specs2.specification.SpecName" id="226811">name</a>, <a href="#226810" title="Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]" id="226812">results</a><span class="delimiter">)</span> = <a href="#226809" title="(org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])">r</a>
    <a href="StatisticsRepository.scala.html#60259" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#217084" title="(specName: org.specs2.specification.SpecName, result: Seq[org.specs2.specification.ExecutedResult])DefaultStoring.this.repository.type">storeResults</a><span class="delimiter">(</span><a href="#226811" title="org.specs2.specification.SpecName">name</a>, <a href="#226812" title="Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]">results</a>.<span title="(f: (org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult) =&gt; org.specs2.specification.ExecutedResult)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)],org.specs2.specification.ExecutedResult,Seq[org.specs2.specification.ExecutedResult]])Seq[org.specs2.specification.ExecutedResult]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.ExecutedResult,Seq[org.specs2.specification.ExecutedResult]]" class="delimiter">(</span><a href="#226848" title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)">_</a>.<span title="=&gt; org.specs2.specification.ExecutedResult">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>