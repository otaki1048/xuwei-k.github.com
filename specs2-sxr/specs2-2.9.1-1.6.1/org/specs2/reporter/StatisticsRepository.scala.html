<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/StatisticsRepository.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> internal.scalaz.<span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> scala.xml._
<span class="keyword">import</span> xml.<a href="../xml/Nodex.scala.html#11821" title="object org.specs2.xml.Nodex">Nodex</a>._
<span class="keyword">import</span> specification.<span class="delimiter">{</span>Example, ExecutedResult, Stats, SpecName<span class="delimiter">}</span>
<span class="keyword">import</span> execute.<span class="delimiter">{</span>Result, Success<span class="delimiter">}</span>
<span class="keyword">import</span> io.<span class="delimiter">{</span>Location, FileSystem<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait StatisticsRepository extends java.lang.Object" id="11111">StatisticsRepository</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]" id="217082">getStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225518">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[org.specs2.specification.Stats]">Option</span><span class="delimiter">[</span>Stats<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)StatisticsRepository.this.type" id="217083">storeStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225519">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="225520">stats</a>: <a href="../specification/Stats.scala.html#11657" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, result: Seq[org.specs2.specification.ExecutedResult])StatisticsRepository.this.type" id="217084">storeResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225521">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="225522">result</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>

  <span class="comment">/**
   * remove previously stored statistics
   */</span>
  <span class="keyword">def</span> <a title="=&gt; StatisticsRepository.this.type" id="217085">resetStatistics</a>: <span class="keyword">this</span>.<span class="keyword">type</span>
  <span class="comment">/**
   * @return the previous executed result of an example
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, e: org.specs2.specification.Example)Option[org.specs2.execute.Result]" id="217086">previousResult</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="217087">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Example" id="217088">e</a>: <a href="../specification/Fragment.scala.html#11477" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="Option[org.specs2.execute.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * This repository store the results in one file per specification, in a special directory
 *
 * This solution is preferred over having a single file for all specifications because of the possible
 * concurrent execution of specifications
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait DefaultStatisticsRepository extends java.lang.Object with org.specs2.reporter.StatisticsRepository with org.specs2.reporter.OutputDir with ScalaObject" id="11112">DefaultStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11111" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a> <span class="keyword">with</span> <a href="OutputDir.scala.html#10999" title="org.specs2.reporter.OutputDir">OutputDir</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * @return the latest statistics for a given specification
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]" id="225524">getStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225546">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[org.specs2.specification.Stats]">Option</span><span class="delimiter">[</span>Stats<span class="delimiter">]</span> = <a href="#225525" title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]">latestSpecStats</a><span title="(x: =&gt; Option[scala.xml.Node])org.specs2.internal.scalaz.Identity[Option[scala.xml.Node]]" class="delimiter">(</span><a href="#225546" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(f: Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats])Option[org.specs2.specification.Stats]">|&gt;</span> <a href="#225530" title="=&gt; Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats]">extractStats</a>

  <span class="comment">/**
   * @return the latest saved statistics of a given specification
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]" id="225525">latestSpecStats</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225548">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[scala.xml.Node]">Option</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#225532" title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq">loadStatistics</a><span class="delimiter">(</span><a href="#225548" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(that: String)scala.xml.NodeSeq">\\</span> <a href="#225537" title="(specName: org.specs2.specification.SpecName)java.lang.String">statsTag</a><span class="delimiter">(</span><a href="#225548" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[scala.xml.Node]">lastOption</span>
  <span class="comment">/**
   * @return the latest saved results of a given specification
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]" id="225526">latestSpecResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225660">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[scala.xml.Node]">Option</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#225532" title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq">loadStatistics</a><span class="delimiter">(</span><a href="#225660" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(that: String)scala.xml.NodeSeq">\\</span> <a href="#225538" title="(specName: org.specs2.specification.SpecName)java.lang.String">resultsTag</a><span class="delimiter">(</span><a href="#225660" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[scala.xml.Node]">lastOption</span>

  <span class="comment">/**
   * reset the statistics
   */</span>
  <span class="keyword">def</span> <a title="=&gt; DefaultStatisticsRepository.this.type" id="225527">resetStatistics</a> = <span class="delimiter">{</span>
    <a href="OutputDir.scala.html#198482" title="=&gt; java.lang.Object with org.specs2.io.FileWriter">fileWriter</a>.<a href="../io/FileWriter.scala.html#55200" title="(path: String)Boolean">delete</a><span class="delimiter">(</span><a href="OutputDir.scala.html#198486" title="=&gt; String">statsDirPath</a><span class="delimiter">)</span>
    <a href="#11112" title="DefaultStatisticsRepository.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * @return the previous executed result of an example
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, e: org.specs2.specification.Example)Option[org.specs2.execute.Result]" id="225528">previousResult</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225668">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Example" id="225669">e</a>: <a href="../specification/Fragment.scala.html#11477" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="Option[org.specs2.execute.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#225526" title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]">latestSpecResults</a><span class="delimiter">(</span><a href="#225668" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>.<span title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">getOrElse</span><span title="(x: =&gt; scala.xml.NodeSeq)org.specs2.internal.scalaz.Identity[scala.xml.NodeSeq]" class="delimiter">(</span><span title="object scala.xml.NodeSeq">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span><span class="delimiter">)</span> <span title="(f: scala.xml.NodeSeq =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}])Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">|&gt;</span> <a href="#225529" title="(e: org.specs2.specification.Example)scala.xml.NodeSeq =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">findPreviousStats</a><span class="delimiter">(</span><a href="#225669" title="org.specs2.specification.Example">e</a><span class="delimiter">)</span>

  <span class="comment">/**
   * find the pr of an example in the loaded xml
   */</span>
  <span class="keyword">def</span> <a title="(e: org.specs2.specification.Example)scala.xml.NodeSeq =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]" id="225529">findPreviousStats</a><span class="delimiter">(</span><a title="org.specs2.specification.Example" id="225744">e</a>: <a href="../specification/Fragment.scala.html#11477" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span> = <span class="delimiter">(</span>n: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
   <span class="delimiter">(</span><a href="#225748" title="scala.xml.NodeSeq">n</a> <span title="(that: String)scala.xml.NodeSeq">\\</span> <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x: =&gt; Option[scala.xml.Node])org.specs2.internal.scalaz.Identity[Option[scala.xml.Node]]">find</span> <a href="#225531" title="(value: String)(node: scala.xml.Node)Boolean">attributeValueEquals</a><a href="#225782" title="scala.xml.Node" class="delimiter">(</a><a href="#225543" title="(e: org.specs2.specification.Example)String">exampleId</a><a href="#225780" title="String" class="delimiter">(</a><a href="#225744" title="org.specs2.specification.Example">e</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(f: Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats])Option[org.specs2.specification.Stats]">|&gt;</span>
     <a href="#225530" title="=&gt; Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats]">extractStats</a> <span title="(f: org.specs2.specification.Stats =&gt; Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result})Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">map</span> <span class="delimiter">(</span><a href="#225857" title="org.specs2.specification.Stats">_</a>.<a href="../specification/Stats.scala.html#194508" title="=&gt; Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}">result</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}])Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">orElse</span>
     <span title="(x: org.specs2.execute.Success)Some[org.specs2.execute.Success]">Some</span><span class="delimiter">(</span><a href="../execute/Result.scala.html#71021" title="(m: String)org.specs2.execute.Success">Success</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats]" id="225530">extractStats</a> = <span class="delimiter">(</span>n: <span title="Option[scala.xml.Node]">Option</span><span class="delimiter">[</span>Node<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#225626" title="Option[scala.xml.Node]">n</a> <span title="(f: scala.xml.Node =&gt; Option[scala.xml.Node])Option[scala.xml.Node]">flatMap</span> <span class="delimiter">(</span><a href="#225631" title="scala.xml.Node">_</a>.<span title="=&gt; Seq[scala.xml.Node]">child</span>.<span title="=&gt; Option[scala.xml.Node]">headOption</span><span class="delimiter">)</span> <span title="(f: scala.xml.Node =&gt; Option[org.specs2.specification.Stats])Option[org.specs2.specification.Stats]">flatMap</span> <a href="../specification/Stats.scala.html#11658" title="object org.specs2.specification.Stats">Stats</a>.<a href="../specification/Stats.scala.html#194557" title="(stats: scala.xml.Node)Option[org.specs2.specification.Stats]">fromXml</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(value: String)(node: scala.xml.Node)Boolean" id="225531">attributeValueEquals</a><span class="delimiter">(</span><a title="String" id="225755">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.xml.Node" id="225756">node</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <a href="#225756" title="scala.xml.Node">node</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>.<span title="(p: scala.xml.MetaData =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#225771" title="scala.xml.MetaData">_</a>.<span title="=&gt; Seq[scala.xml.Node]">value</span>.<span title="()String">toString</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#225755" title="String">value</a><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq" id="225532">loadStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225642">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="OutputDir.scala.html#198480" title="=&gt; java.lang.Object with org.specs2.io.FileSystem">fileSystem</a>.<a href="../io/FileReader.scala.html#55110" title="(filePath: String)scala.xml.NodeSeq">loadXhtmlFile</a><span class="delimiter">(</span><a href="#225535" title="(specName: org.specs2.specification.SpecName)java.lang.String">specStatsPath</a><span class="delimiter">(</span><a href="#225642" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, results: Seq[org.specs2.specification.ExecutedResult])DefaultStatisticsRepository.this.type" id="225533">storeResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225883">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="225884">results</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="OutputDir.scala.html#198482" title="=&gt; java.lang.Object with org.specs2.io.FileWriter">fileWriter</a>.<a href="../io/FileWriter.scala.html#55204" title="(path: String, content: =&gt; scala.xml.NodeSeq)Unit">appendToXmlFile</a><span class="delimiter">(</span><a href="#225535" title="(specName: org.specs2.specification.SpecName)java.lang.String">specStatsPath</a><span class="delimiter">(</span><a href="#225883" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>, <a href="#225540" title="(specName: org.specs2.specification.SpecName, results: Seq[org.specs2.specification.ExecutedResult])scala.xml.NodeSeq">resultsToXml</a><span class="delimiter">(</span><a href="#225883" title="org.specs2.specification.SpecName">specName</a>, <a href="#225884" title="Seq[org.specs2.specification.ExecutedResult]">results</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#225532" title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq">loadStatistics</a><span class="delimiter">(</span><a href="#225883" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>
    <a href="#11112" title="DefaultStatisticsRepository.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)DefaultStatisticsRepository.this.type" id="225534">storeStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225890">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="225891">stats</a>: <a href="../specification/Stats.scala.html#11657" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="OutputDir.scala.html#198482" title="=&gt; java.lang.Object with org.specs2.io.FileWriter">fileWriter</a>.<a href="../io/FileWriter.scala.html#55204" title="(path: String, content: =&gt; scala.xml.NodeSeq)Unit">appendToXmlFile</a><span class="delimiter">(</span><a href="#225535" title="(specName: org.specs2.specification.SpecName)java.lang.String">specStatsPath</a><span class="delimiter">(</span><a href="#225890" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>, <a href="#225539" title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)scala.xml.NodeSeq">statsToXml</a><span class="delimiter">(</span><a href="#225890" title="org.specs2.specification.SpecName">specName</a>, <a href="#225891" title="org.specs2.specification.Stats">stats</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#11112" title="DefaultStatisticsRepository.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="225535">specStatsPath</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225880">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> = <a href="OutputDir.scala.html#198486" title="=&gt; String">statsDirPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#225536" title="(specName: org.specs2.specification.SpecName)java.lang.String">nameTag</a><span class="delimiter">(</span><a href="#225880" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.stats&quot;)" class="string">&quot;.stats&quot;</span>

  <span class="comment">/**
   * make sure that no empty tag name is used to search the xml stats, and is unique, even for an anonymous class
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="225536">nameTag</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225647">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> =
    <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#225647" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#50413" title="=&gt; String">fullName</a>.<span title="()Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#225647" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#50413" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;anon&quot;)" class="string">&quot;anon&quot;</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;anon&quot;)" class="string">&quot;anon&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#225647" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#50414" title="=&gt; String">javaClassName</a>.<span title="()Int">hashCode</span>
    <span class="keyword">else</span>                                                          <a href="#225647" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#50413" title="=&gt; String">fullName</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="225537">statsTag</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225644">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> = <a href="#225536" title="(specName: org.specs2.specification.SpecName)java.lang.String">nameTag</a><span class="delimiter">(</span><a href="#225644" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;-stats&quot;)" class="string">&quot;-stats&quot;</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="225538">resultsTag</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225662">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> = <a href="#225536" title="(specName: org.specs2.specification.SpecName)java.lang.String">nameTag</a><span class="delimiter">(</span><a href="#225662" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;-results&quot;)" class="string">&quot;-results&quot;</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)scala.xml.NodeSeq" id="225539">statsToXml</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225894">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="225895">stats</a>: <a href="../specification/Stats.scala.html#11657" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#225537" title="(specName: org.specs2.specification.SpecName)java.lang.String">statsTag</a><span class="delimiter">(</span><a href="#225894" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>,
         <span title="(key: String, value: String, next: scala.xml.MetaData)scala.xml.UnprefixedAttribute" class="keyword">new</span> <span title="scala.xml.UnprefixedAttribute">UnprefixedAttribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;timestamp&quot;)" class="string">&quot;timestamp&quot;</span>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span>, <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span>, <span title="object scala.xml.TopScope">TopScope</span>, <a href="#225895" title="org.specs2.specification.Stats">stats</a>.<a href="../specification/Stats.scala.html#194512" title="=&gt; scala.xml.Elem">toXml</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">++</span> <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, results: Seq[org.specs2.specification.ExecutedResult])scala.xml.NodeSeq" id="225540">resultsToXml</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="225887">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="225888">results</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.xml.NodeSeq" id="225947">xmlResults</a> = <a href="../xml/Nodex.scala.html#57830" title="(ns: Seq[org.specs2.specification.ExecutedResult])org.specs2.xml.Nodex.AnyReducable[org.specs2.specification.ExecutedResult]">results</a> <a href="../xml/Nodex.scala.html#73931" title="(f: org.specs2.specification.ExecutedResult =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">reduceNodes</a> <a href="#225541" title="=&gt; org.specs2.specification.ExecutedResult =&gt; scala.xml.NodeSeq">resultToXml</a>
    <span title="scala.xml.NodeSeq" class="keyword">if</span> <span class="delimiter">(</span><a href="#225947" title="scala.xml.NodeSeq">xmlResults</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>  <a href="#225947" title="scala.xml.NodeSeq">xmlResults</a>
    <span class="keyword">else</span>                     <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#225538" title="(specName: org.specs2.specification.SpecName)java.lang.String">resultsTag</a><span class="delimiter">(</span><a href="#225887" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>,
                               <span title="(key: String, value: String, next: scala.xml.MetaData)scala.xml.UnprefixedAttribute" class="keyword">new</span> <span title="scala.xml.UnprefixedAttribute">UnprefixedAttribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;timestamp&quot;)" class="string">&quot;timestamp&quot;</span>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span>, <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span>, <span title="object scala.xml.TopScope">TopScope</span>, <a href="#225947" title="scala.xml.NodeSeq">xmlResults</a>:_*<span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">++</span> <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Transform a result to xml for storage. Only non-successes are stored. The results are referenced with a hashcode based on the result description
   * Location are stored for easier reference
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.specification.ExecutedResult =&gt; scala.xml.NodeSeq" id="225541">resultToXml</a>: ExecutedResult =&gt; NodeSeq = <span class="delimiter">(</span>r: <a href="../specification/ExecutedFragment.scala.html#11402" title="org.specs2.specification.ExecutedResult">ExecutedResult</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="226073">result</a> location=<span class="delimiter">{</span><a href="#226061" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#194453" title="=&gt; org.specs2.io.Location">location</a>.<a href="../io/Location.scala.html#102175" title="()String">toString</a><span class="delimiter">}</span> id=<span class="delimiter">{</span><a href="#225542" title="(r: org.specs2.specification.ExecutedResult)String">resultId</a><span class="delimiter">(</span><a href="#226061" title="org.specs2.specification.ExecutedResult">r</a><span class="delimiter">)</span><span class="delimiter">}</span>&gt;<span class="delimiter">{</span><a href="#226061" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#194459" title="=&gt; org.specs2.specification.Stats">stats</a>.<a href="../specification/Stats.scala.html#194512" title="=&gt; scala.xml.Elem">toXml</a><span class="delimiter">}</span>&lt;/result&gt; <a href="../xml/Nodex.scala.html#57835" title="implicit org.specs2.xml.Nodex.unless : (ns: =&gt; scala.xml.NodeSeq)org.specs2.xml.Nodex.UnlessEmpty">++</a> <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../xml/Nodex.scala.html#75521" title="(b: Boolean)scala.xml.NodeSeq">unless</a> <a href="#226061" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#194460" title="=&gt; Boolean">isSuccess</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(r: org.specs2.specification.ExecutedResult)String" id="225542">resultId</a><span class="delimiter">(</span><a title="org.specs2.specification.ExecutedResult" id="226067">r</a>: <a href="../specification/ExecutedFragment.scala.html#11402" title="org.specs2.specification.ExecutedResult">ExecutedResult</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#226067" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#194447" title="=&gt; org.specs2.text.MarkupString">s</a>.<span title="()java.lang.String">toString</span>.<span title="()Int">hashCode</span>.<span title="()java.lang.String">toString</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(e: org.specs2.specification.Example)String" id="225543">exampleId</a><span class="delimiter">(</span><a title="org.specs2.specification.Example" id="225778">e</a>: <a href="../specification/Fragment.scala.html#11477" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#225778" title="org.specs2.specification.Example">e</a>.<a href="../specification/Fragment.scala.html#32422" title="=&gt; org.specs2.text.MarkupString">desc</a>.<span title="()java.lang.String">toString</span>.<span title="()Int">hashCode</span>.<span title="()java.lang.String">toString</span>


<span class="delimiter">}</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">object</span> <a title="object org.specs2.reporter.DefaultStatisticsRepository" id="11113">DefaultStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11112" title="org.specs2.reporter.DefaultStatisticsRepository">DefaultStatisticsRepository</a>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait WithStatisticsRepository extends java.lang.Object" id="11115">WithStatisticsRepository</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.reporter.StatisticsRepository" id="60257">repository</a>: <a href="#11111" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a>
<span class="delimiter">}</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait WithDefaultStatisticsRepository extends java.lang.Object with org.specs2.reporter.WithStatisticsRepository with ScalaObject" id="11116">WithDefaultStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11115" title="org.specs2.reporter.WithStatisticsRepository">WithStatisticsRepository</a> <span class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.reporter.StatisticsRepository" id="60260">repository</a>: <a href="#11111" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a> = <a href="#11113" title="object org.specs2.reporter.DefaultStatisticsRepository">DefaultStatisticsRepository</a>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">object</span> <a title="object org.specs2.reporter.NoStatisticsRepository" id="11117">NoStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11111" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]" id="226185">getStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="226191">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[org.specs2.specification.Stats]">Option</span><span class="delimiter">[</span>Stats<span class="delimiter">]</span> = <span title="object None">None</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)org.specs2.reporter.NoStatisticsRepository.type" id="226186">storeStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="226193">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="226194">stats</a>: <a href="../specification/Stats.scala.html#11657" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span> = <span class="keyword">this</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, result: Seq[org.specs2.specification.ExecutedResult])org.specs2.reporter.NoStatisticsRepository.type" id="226187">storeResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="226197">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="226198">result</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="keyword">this</span>
  <span class="keyword">def</span> <a title="=&gt; org.specs2.reporter.NoStatisticsRepository.type" id="226188">resetStatistics</a> = <span class="keyword">this</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, e: org.specs2.specification.Example)Option[org.specs2.execute.Result]" id="226189">previousResult</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="226204">specName</a>: <a href="../specification/SpecName.scala.html#11630" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Example" id="226205">e</a>: <a href="../specification/Fragment.scala.html#11477" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="Option[org.specs2.execute.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <span title="object None">None</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>