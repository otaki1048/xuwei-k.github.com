<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/collection/mutable/Ctrie.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2012, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

<span class="keyword">package</span> scala.collection
<span class="keyword">package</span> mutable



<span class="keyword">import</span> java.util.concurrent.atomic._
<span class="keyword">import</span> collection.immutable.<span class="delimiter">{</span> ListMap =&gt; ImmutableListMap <span class="delimiter">}</span>
<span class="keyword">import</span> collection.parallel.mutable.ParCtrie
<span class="keyword">import</span> generic._
<span class="keyword">import</span> annotation.tailrec
<span class="keyword">import</span> annotation.switch



<span class="keyword">private</span><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class INode[K, V] extends scala.collection.mutable.INodeBase[K,V] with ScalaObject" id="13277">INode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13880">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13881">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><a title="scala.collection.mutable.MainNode[K,V]" id="250059">bn</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Gen" id="250060">g</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="INodeBase.java.html#13319" title="scala.collection.mutable.INodeBase[K,V]">INodeBase</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250060" title="scala.collection.mutable.Gen">g</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="INodeBase.java.html#13320" title="object scala.collection.mutable.INodeBase">INodeBase</a>._
  
  <a href="#250032" title="(nval: scala.collection.mutable.MainNode[K,V])Unit">WRITE</a><span class="delimiter">(</span><a href="#250059" title="scala.collection.mutable.MainNode[K,V]">bn</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(g: scala.collection.mutable.Gen)scala.collection.mutable.INode[K,V]" id="250031" class="keyword">this</a><span class="delimiter">(</span><a title="scala.collection.mutable.Gen" id="250132">g</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span> = <a href="#13277" title="INode.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#250132" title="scala.collection.mutable.Gen">g</a><span class="delimiter">)</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(nval: scala.collection.mutable.MainNode[K,V])Unit" id="250032">WRITE</a><span class="delimiter">(</span><a title="scala.collection.mutable.MainNode[K,V]" id="250068">nval</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="INodeBase.java.html#13320" title="object scala.collection.mutable.INodeBase">INodeBase</a>.<a href="INodeBase.java.html#250065" title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.INodeBase[_, _],scala.collection.mutable.MainNode[_, _]]">updater</a>.<span title="(x$1: scala.collection.mutable.INodeBase[_, _], x$2: scala.collection.mutable.MainNode[_, _])Unit">set</span><span class="delimiter">(</span><a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a>, <a href="#250068" title="scala.collection.mutable.MainNode[K,V]">nval</a><span class="delimiter">)</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V])Boolean" id="250033">CAS</a><span class="delimiter">(</span><a title="scala.collection.mutable.MainNode[K,V]" id="250142">old</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.MainNode[K,V]" id="250143">n</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="INodeBase.java.html#13320" title="object scala.collection.mutable.INodeBase">INodeBase</a>.<a href="INodeBase.java.html#250065" title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.INodeBase[_, _],scala.collection.mutable.MainNode[_, _]]">updater</a>.<span title="(x$1: scala.collection.mutable.INodeBase[_, _], x$2: scala.collection.mutable.MainNode[_, _], x$3: scala.collection.mutable.MainNode[_, _])Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a>, <a href="#250142" title="scala.collection.mutable.MainNode[K,V]">old</a>, <a href="#250143" title="scala.collection.mutable.MainNode[K,V]">n</a><span class="delimiter">)</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]" id="250034">gcasRead</a><span class="delimiter">(</span><a title="scala.collection.mutable.Ctrie[K,V]" id="250155">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250155" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]" id="250035">GCAS_READ</a><span class="delimiter">(</span><a title="scala.collection.mutable.Ctrie[K,V]" id="250206">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250208">m</a> = /*READ*/<a href="INodeBase.java.html#250021" title="scala.collection.mutable.MainNode[K,V]">mainnode</a>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250209">prevval</a> = /*READ*/<a href="#250208" title="scala.collection.mutable.MainNode[K,V]">m</a>.<a href="MainNode.java.html#250053" title="scala.collection.mutable.MainNode[K,V]">prev</a>
    <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250209" title="scala.collection.mutable.MainNode[K,V]">prevval</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#250208" title="scala.collection.mutable.MainNode[K,V]">m</a>
    <span class="keyword">else</span> <a href="#250036" title="(m: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_Complete</a><span class="delimiter">(</span><a href="#250208" title="scala.collection.mutable.MainNode[K,V]">m</a>, <a href="#250206" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
    
  @tailrec <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]" id="250036">GCAS_Complete</a><span class="delimiter">(</span><a title="scala.collection.mutable.MainNode[K,V]" id="250212">m</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250213">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    // complete the GCAS
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250215">prev</a> = /*READ*/<a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>.<a href="MainNode.java.html#250053" title="scala.collection.mutable.MainNode[K,V]">prev</a>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="250216">ctr</a> = <a href="#250213" title="scala.collection.mutable.Ctrie[K,V]">ct</a>.<a href="#250173" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">readRoot</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    
    <a href="#250215" title="scala.collection.mutable.MainNode[K,V]">prev</a> <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">null</span> =&gt;
        <a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>
      <span class="keyword">case</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250244">fn</a>: <a href="#13016" title="scala.collection.mutable.FailedNode[_,_]">FailedNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; // try to commit to previous value
        <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250033" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V])Boolean">CAS</a><span class="delimiter">(</span><a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>, <a href="#250244" title="scala.collection.mutable.FailedNode[_,_]">fn</a>.<a href="MainNode.java.html#250053" title="scala.collection.mutable.MainNode[_,_]">prev</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250244" title="scala.collection.mutable.FailedNode[_,_]">fn</a>.<a href="MainNode.java.html#250053" title="scala.collection.mutable.MainNode[_,_]">prev</a>
        <span class="keyword">else</span> <a href="#250036" title="(m: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_Complete</a><span class="delimiter">(</span>/*READ*/<a href="INodeBase.java.html#250021" title="scala.collection.mutable.MainNode[K,V]">mainnode</a>, <a href="#250213" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250253">vn</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[_,_]">MainNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt;
        // Assume that you've read the root from the generation G.
        // Assume that the snapshot algorithm is correct.
        // ==&gt; you can only reach nodes in generations &lt;= G.
        // ==&gt; `gen` is &lt;= G.
        // We know that `ctr.gen` is &gt;= G.
        // ==&gt; if `ctr.gen` = `gen` then they are both equal to G.
        // ==&gt; otherwise, we know that either `ctr.gen` &gt; G, `gen` &lt; G,
        //     or both
        <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#250216" title="scala.collection.mutable.INode[K,V]">ctr</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250213" title="scala.collection.mutable.Ctrie[K,V]">ct</a>.<a href="#250186" title="=&gt; Boolean">nonReadOnly</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          // try to commit
          <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>.<a href="MainNode.java.html#250055" title="(oldval: scala.collection.mutable.MainNode[K,V], nval: scala.collection.mutable.MainNode[K,V])Boolean">CAS_PREV</a><span class="delimiter">(</span><a href="#250215" title="scala.collection.mutable.MainNode[K,V]">prev</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>
          <span class="keyword">else</span> <a href="#250036" title="(m: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_Complete</a><span class="delimiter">(</span><a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>, <a href="#250213" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          // try to abort
          <a href="#250212" title="scala.collection.mutable.MainNode[K,V]">m</a>.<a href="MainNode.java.html#250055" title="(oldval: scala.collection.mutable.MainNode[K,V], nval: scala.collection.mutable.MainNode[K,V])Boolean">CAS_PREV</a><span class="delimiter">(</span><a href="#250215" title="scala.collection.mutable.MainNode[K,V]">prev</a>, <span title="scala.collection.mutable.FailedNode[K,V]" class="keyword">new</span> <a href="#13016" title="scala.collection.mutable.FailedNode[K,V]">FailedNode</a><span class="delimiter">(</span><a href="#250215" title="scala.collection.mutable.MainNode[K,V]">prev</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#250036" title="(m: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_Complete</a><span class="delimiter">(</span>/*READ*/<a href="INodeBase.java.html#250021" title="scala.collection.mutable.MainNode[K,V]">mainnode</a>, <a href="#250213" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean" id="250037">GCAS</a><span class="delimiter">(</span><a title="scala.collection.mutable.MainNode[K,V]" id="250268">old</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.MainNode[K,V]" id="250269">n</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250270">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="#250269" title="scala.collection.mutable.MainNode[K,V]">n</a>.<a href="MainNode.java.html#250056" title="(nval: scala.collection.mutable.MainNode[K,V])Unit">WRITE_PREV</a><span class="delimiter">(</span><a href="#250268" title="scala.collection.mutable.MainNode[K,V]">old</a><span class="delimiter">)</span>
    <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#250033" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V])Boolean">CAS</a><span class="delimiter">(</span><a href="#250268" title="scala.collection.mutable.MainNode[K,V]">old</a>, <a href="#250269" title="scala.collection.mutable.MainNode[K,V]">n</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#250036" title="(m: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_Complete</a><span class="delimiter">(</span><a href="#250269" title="scala.collection.mutable.MainNode[K,V]">n</a>, <a href="#250270" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
      /*READ*/<a href="#250269" title="scala.collection.mutable.MainNode[K,V]">n</a>.<a href="MainNode.java.html#250053" title="scala.collection.mutable.MainNode[K,V]">prev</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>
  
  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cn: scala.collection.mutable.MainNode[K,V])scala.collection.mutable.INode[K,V]" id="250038">inode</a><span class="delimiter">(</span><a title="scala.collection.mutable.MainNode[K,V]" id="250274">cn</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="250277">nin</a> = <a href="#250031" title="(g: scala.collection.mutable.Gen)scala.collection.mutable.INode[K,V]" class="keyword">new</a> <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
    <a href="#250277" title="scala.collection.mutable.INode[K,V]">nin</a>.<a href="#250032" title="(nval: scala.collection.mutable.MainNode[K,V])Unit">WRITE</a><span class="delimiter">(</span><a href="#250274" title="scala.collection.mutable.MainNode[K,V]">cn</a><span class="delimiter">)</span>
    <a href="#250277" title="scala.collection.mutable.INode[K,V]">nin</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.INode[K,V]" id="250039">copyToGen</a><span class="delimiter">(</span><a title="scala.collection.mutable.Gen" id="250280">ngen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250281">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="250284">nin</a> = <a href="#250031" title="(g: scala.collection.mutable.Gen)scala.collection.mutable.INode[K,V]" class="keyword">new</a> <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250280" title="scala.collection.mutable.Gen">ngen</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250285">main</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250281" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
    <a href="#250284" title="scala.collection.mutable.INode[K,V]">nin</a>.<a href="#250032" title="(nval: scala.collection.mutable.MainNode[K,V])Unit">WRITE</a><span class="delimiter">(</span><a href="#250285" title="scala.collection.mutable.MainNode[K,V]">main</a><span class="delimiter">)</span>
    <a href="#250284" title="scala.collection.mutable.INode[K,V]">nin</a>
  <span class="delimiter">}</span>
  
  /** Inserts a key value pair, overwriting the old pair if the keys match.
   *  
   *  @return        true if successful, false otherwise
   */
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Boolean" id="250040">rec_insert</a><span class="delimiter">(</span><a title="K" id="250288">k</a>: <a href="#13880" title="K">K</a>, <a title="V" id="250289">v</a>: <a href="#13881" title="V">V</a>, <a title="Int" id="250290">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="250291">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.INode[K,V]" id="250292">parent</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Gen" id="250293">startgen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250294">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250296">m</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span> // use -Yinline!
    
    <a href="#250296" title="scala.collection.mutable.MainNode[K,V]">m</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Boolean" id="250297">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 1) a multiway node
        <span class="keyword">val</span> <a title="Int" id="250327">idx</a> = <span class="delimiter">(</span><a href="#250290" title="Int">hc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#250291" title="Int">lev</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
        <span class="keyword">val</span> <a title="Int" id="250328">flag</a> = <span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#250327" title="Int">idx</a>
        <span class="keyword">val</span> <a title="Int" id="250329">bmp</a> = <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250392" title="=&gt; Int">bitmap</a>
        <span class="keyword">val</span> <a title="Int" id="250330">mask</a> = <a href="#250328" title="Int">flag</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span>
        <span class="keyword">val</span> <a title="Int" id="250331">pos</a> = <span title="object Integer">Integer</span>.<span title="(x$1: Int)Int">bitCount</span><span class="delimiter">(</span><a href="#250329" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#250330" title="Int">mask</a><span class="delimiter">)</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#250329" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#250328" title="Int">flag</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24643" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // 1a) insert below
          <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><a href="#250331" title="Int">pos</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Boolean" id="250361">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
              <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#250293" title="scala.collection.mutable.Gen">startgen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#250361" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250361" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250040" title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Boolean">rec_insert</a><span class="delimiter">(</span><a href="#250288" title="K">k</a>, <a href="#250289" title="V">v</a>, <a href="#250290" title="Int">hc</a>, <a href="#250291" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a>, <a href="#250293" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="#250293" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250040" title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Boolean">rec_insert</a><span class="delimiter">(</span><a href="#250288" title="K">k</a>, <a href="#250289" title="V">v</a>, <a href="#250290" title="Int">hc</a>, <a href="#250291" title="Int">lev</a>, <a href="#250292" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250293" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a title="Boolean" id="250397">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
              <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#250397" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250290" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250397" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250288" title="K">k</a><span class="delimiter">)</span> <a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250331" title="Int">pos</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250288" title="K">k</a>, <a href="#250289" title="V">v</a>, <a href="#250290" title="Int">hc</a><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250438">rn</a> = <span title="scala.collection.mutable.CNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250394" title="=&gt; scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a> <span class="keyword">else</span> <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250439">nn</a> = <a href="#250438" title="scala.collection.mutable.CNode[K,V]">rn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250331" title="Int">pos</a>, <a href="#250038" title="(cn: scala.collection.mutable.MainNode[K,V])scala.collection.mutable.INode[K,V]">inode</a><span class="delimiter">(</span><a href="#13326" title="object scala.collection.mutable.CNode">CNode</a>.<a href="#250441" title="(x: scala.collection.mutable.SNode[K,V], xhc: Int, y: scala.collection.mutable.SNode[K,V], yhc: Int, lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]">dual</a><span class="delimiter">(</span><a href="#250397" title="scala.collection.mutable.SNode[K,V]">sn</a>, <a href="#250397" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250288" title="K">k</a>, <a href="#250289" title="V">v</a>, <a href="#250290" title="Int">hc</a><span class="delimiter">)</span>, <a href="#250290" title="Int">hc</a>, <a href="#250291" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
                <a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250439" title="scala.collection.mutable.CNode[K,V]">nn</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250485">rn</a> = <span title="scala.collection.mutable.CNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250394" title="=&gt; scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a> <span class="keyword">else</span> <a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250486">ncnode</a> = <a href="#250485" title="scala.collection.mutable.CNode[K,V]">rn</a>.<a href="#250318" title="(pos: Int, flag: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">insertedAt</a><span class="delimiter">(</span><a href="#250331" title="Int">pos</a>, <a href="#250328" title="Int">flag</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250288" title="K">k</a>, <a href="#250289" title="V">v</a>, <a href="#250290" title="Int">hc</a><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
          <a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250297" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250486" title="scala.collection.mutable.CNode[K,V]">ncnode</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Boolean" id="250522">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
        <a href="#250044" title="(nd: scala.collection.mutable.INode[K,V], ct: scala.collection.mutable.Ctrie[K,V], lev: Int)Unit">clean</a><span class="delimiter">(</span><a href="#250292" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a>, <a href="#250291" title="Int">lev</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">case</span> <a title="Boolean" id="250547">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 3) an l-node
        <span class="keyword">val</span> <a title="scala.collection.mutable.LNode[K,V]" id="250559">nn</a> = <a href="#250547" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250554" title="(k: K, v: V)scala.collection.mutable.LNode[K,V]">inserted</a><span class="delimiter">(</span><a href="#250288" title="K">k</a>, <a href="#250289" title="V">v</a><span class="delimiter">)</span>
        <a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250547" title="scala.collection.mutable.LNode[K,V]">ln</a>, <a href="#250559" title="scala.collection.mutable.LNode[K,V]">nn</a>, <a href="#250294" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  /** Inserts a new key value pair, given that a specific condition is met.
   *
   *  @param cond        null - don't care if the key was there; KEY_ABSENT - key wasn't there; KEY_PRESENT - key was there; other value `v` - key must be bound to `v`
   *  @return            null if unsuccessful, Option[V] otherwise (indicating previous value bound to the key)
   */
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K, v: V, hc: Int, cond: AnyRef, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]" id="250041">rec_insertif</a><span class="delimiter">(</span><a title="K" id="250672">k</a>: <a href="#13880" title="K">K</a>, <a title="V" id="250673">v</a>: <a href="#13881" title="V">V</a>, <a title="Int" id="250674">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="AnyRef" id="250675">cond</a>: <span title="AnyRef">AnyRef</span>, <a title="Int" id="250676">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.INode[K,V]" id="250677">parent</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Gen" id="250678">startgen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250679">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250681">m</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>  // use -Yinline!
    
    <a href="#250681" title="scala.collection.mutable.MainNode[K,V]">m</a> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Option[V]" id="250682">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 1) a multiway node
        <span class="keyword">val</span> <a title="Int" id="250683">idx</a> = <span class="delimiter">(</span><a href="#250674" title="Int">hc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#250676" title="Int">lev</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
        <span class="keyword">val</span> <a title="Int" id="250684">flag</a> = <span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#250683" title="Int">idx</a>
        <span class="keyword">val</span> <a title="Int" id="250685">bmp</a> = <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250392" title="=&gt; Int">bitmap</a>
        <span class="keyword">val</span> <a title="Int" id="250686">mask</a> = <a href="#250684" title="Int">flag</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span>
        <span class="keyword">val</span> <a title="Int" id="250687">pos</a> = <span title="object Integer">Integer</span>.<span title="(x$1: Int)Int">bitCount</span><span class="delimiter">(</span><a href="#250685" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#250686" title="Int">mask</a><span class="delimiter">)</span>
        <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#250685" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#250684" title="Int">flag</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24643" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // 1a) insert below
          <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a><span class="delimiter">)</span> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Option[V]" id="250717">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
              <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250678" title="scala.collection.mutable.Gen">startgen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#250717" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250717" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250041" title="(k: K, v: V, hc: Int, cond: AnyRef, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]">rec_insertif</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a>, <a href="#250675" title="AnyRef">cond</a>, <a href="#250676" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a>, <a href="#250678" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="#250678" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250041" title="(k: K, v: V, hc: Int, cond: AnyRef, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]">rec_insertif</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a>, <a href="#250675" title="AnyRef">cond</a>, <a href="#250676" title="Int">lev</a>, <a href="#250677" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250678" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a title="Option[V]" id="250724">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#250675" title="AnyRef">cond</a> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Option[V]" class="keyword">null</span> =&gt;
                <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250674" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250672" title="K">k</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250740">rn</a> = <span title="scala.collection.mutable.CNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250394" title="=&gt; scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a> <span class="keyword">else</span> <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                  <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250741">nn</a> = <a href="#250740" title="scala.collection.mutable.CNode[K,V]">rn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a>, <a href="#250038" title="(cn: scala.collection.mutable.MainNode[K,V])scala.collection.mutable.INode[K,V]">inode</a><span class="delimiter">(</span><a href="#13326" title="object scala.collection.mutable.CNode">CNode</a>.<a href="#250441" title="(x: scala.collection.mutable.SNode[K,V], xhc: Int, y: scala.collection.mutable.SNode[K,V], yhc: Int, lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]">dual</a><span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>, <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a><span class="delimiter">)</span>, <a href="#250674" title="Int">hc</a>, <a href="#250676" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
                  <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250741" title="scala.collection.mutable.CNode[K,V]">nn</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#2425" title="object None">None</a>
                  <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> <a href="#13278" title="Option[V]">INode</a>.<a href="#250771" title="=&gt; Object">KEY_ABSENT</a> =&gt;
                <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250674" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250672" title="K">k</a><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span>
                <span class="keyword">else</span> <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250785">rn</a> = <span title="scala.collection.mutable.CNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250394" title="=&gt; scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a> <span class="keyword">else</span> <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                  <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250786">nn</a> = <a href="#250785" title="scala.collection.mutable.CNode[K,V]">rn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a>, <a href="#250038" title="(cn: scala.collection.mutable.MainNode[K,V])scala.collection.mutable.INode[K,V]">inode</a><span class="delimiter">(</span><a href="#13326" title="object scala.collection.mutable.CNode">CNode</a>.<a href="#250441" title="(x: scala.collection.mutable.SNode[K,V], xhc: Int, y: scala.collection.mutable.SNode[K,V], yhc: Int, lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]">dual</a><span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>, <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a><span class="delimiter">)</span>, <a href="#250674" title="Int">hc</a>, <a href="#250676" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
                  <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250786" title="scala.collection.mutable.CNode[K,V]">nn</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#2425" title="object None">None</a>
                  <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> <a href="#13278" title="Option[V]">INode</a>.<a href="#250769" title="=&gt; Object">KEY_PRESENT</a> =&gt;
                <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250674" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250672" title="K">k</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../Option.scala.html#2425" title="object None">None</a>
              <span class="keyword">case</span> <a title="Option[V]" id="250828">otherv</a>: <a href="#13881" title="V">V</a> =&gt;
                <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250674" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250672" title="K">k</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250828" title="&lt;root&gt; extends Object with V">otherv</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#250724" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../Option.scala.html#2425" title="object None">None</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#250675" title="AnyRef">cond</a> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Option[V]" class="keyword">null</span> | <a href="#13278" title="object scala.collection.mutable.INode">INode</a>.<a href="#250771" title="=&gt; Object">KEY_ABSENT</a> =&gt;
            <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250845">rn</a> = <span title="scala.collection.mutable.CNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250394" title="=&gt; scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a> <span class="keyword">else</span> <a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="250846">ncnode</a> = <a href="#250845" title="scala.collection.mutable.CNode[K,V]">rn</a>.<a href="#250318" title="(pos: Int, flag: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">insertedAt</a><span class="delimiter">(</span><a href="#250687" title="Int">pos</a>, <a href="#250684" title="Int">flag</a>, <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a>, <a href="#250674" title="Int">hc</a><span class="delimiter">)</span>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
            <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250682" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250846" title="scala.collection.mutable.CNode[K,V]">ncnode</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#2425" title="object None">None</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a href="#13278" title="None.type">INode</a>.<a href="#250769" title="=&gt; Object">KEY_PRESENT</a> =&gt; <a href="../../Option.scala.html#2425" title="object None">None</a>
          <span class="keyword">case</span> <a title="None.type" id="250855">otherv</a>: <a href="#13881" title="V">V</a> =&gt; <a href="../../Option.scala.html#2425" title="object None">None</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Null" id="250857">sn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
        <a href="#250044" title="(nd: scala.collection.mutable.INode[K,V], ct: scala.collection.mutable.Ctrie[K,V], lev: Int)Unit">clean</a><span class="delimiter">(</span><a href="#250677" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a>, <a href="#250676" title="Int">lev</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">case</span> <a title="Option[V]" id="250862">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 3) an l-node
        @inline <span class="keyword">def</span> <a title="()Boolean" id="250863">insertln</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.LNode[K,V]" id="250864">nn</a> = <a href="#250862" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250554" title="(k: K, v: V)scala.collection.mutable.LNode[K,V]">inserted</a><span class="delimiter">(</span><a href="#250672" title="K">k</a>, <a href="#250673" title="V">v</a><span class="delimiter">)</span>
          <a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250862" title="scala.collection.mutable.LNode[K,V]">ln</a>, <a href="#250864" title="scala.collection.mutable.LNode[K,V]">nn</a>, <a href="#250679" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#250675" title="AnyRef">cond</a> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Option[V]" class="keyword">null</span> =&gt;
            <span class="keyword">val</span> <a title="Option[V]" id="250867">optv</a> = <a href="#250862" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250672" title="K">k</a><span class="delimiter">)</span>
            <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250863" title="()Boolean">insertln</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250867" title="Option[V]">optv</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <a href="#13278" title="Option[V]">INode</a>.<a href="#250771" title="=&gt; Object">KEY_ABSENT</a> =&gt;
            <a href="#250862" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250672" title="K">k</a><span class="delimiter">)</span> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../Option.scala.html#2425" title="Option[V]">None</a> =&gt; <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250863" title="()Boolean">insertln</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#2425" title="object None">None</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
              <span class="keyword">case</span> <a title="Option[V]" id="250875">optv</a> =&gt; <a href="#250875" title="Option[V]">optv</a>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> <a href="#13278" title="Option[V]">INode</a>.<a href="#250769" title="=&gt; Object">KEY_PRESENT</a> =&gt;
            <a href="#250862" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250672" title="K">k</a><span class="delimiter">)</span> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Option[V]">Some</span><span class="delimiter">(</span><a title="V" id="250877">v0</a><span class="delimiter">)</span> =&gt; <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250863" title="()Boolean">insertln</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#250877" title="V">v0</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
              <span class="keyword">case</span> <a href="../../Option.scala.html#2425" title="None.type">None</a> =&gt; <a href="../../Option.scala.html#2425" title="object None">None</a>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> <a title="Option[V]" id="250881">otherv</a>: <a href="#13881" title="V">V</a> =&gt;
            <a href="#250862" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250672" title="K">k</a><span class="delimiter">)</span> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Option[V]">Some</span><span class="delimiter">(</span><a title="V" id="250884">v0</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#250884" title="V">v0</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250881" title="&lt;root&gt; extends Object with V">otherv</a> =&gt; <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250863" title="()Boolean">insertln</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: Object with V)Some[Object with V]">Some</a><span class="delimiter">(</span><a href="#250881" title="&lt;root&gt; extends Object with V">otherv</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
              <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <a href="../../Option.scala.html#2425" title="object None">None</a>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  /** Looks up the value associated with the key.
   *  
   *  @return          null if no value has been found, RESTART if the operation wasn't successful, or any other value otherwise
   */
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])AnyRef" id="250042">rec_lookup</a><span class="delimiter">(</span><a title="K" id="250888">k</a>: <a href="#13880" title="K">K</a>, <a title="Int" id="250889">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="250890">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.INode[K,V]" id="250891">parent</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Gen" id="250892">startgen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250893">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250895">m</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span> // use -Yinline!
    
    <a href="#250895" title="scala.collection.mutable.MainNode[K,V]">m</a> <span title="AnyRef" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="AnyRef" id="250896">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 1) a multinode
        <span class="keyword">val</span> <a title="Int" id="250897">idx</a> = <span class="delimiter">(</span><a href="#250889" title="Int">hc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#250890" title="Int">lev</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
        <span class="keyword">val</span> <a title="Int" id="250898">flag</a> = <span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#250897" title="Int">idx</a>
        <span class="keyword">val</span> <a title="Int" id="250899">bmp</a> = <a href="#250896" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250392" title="=&gt; Int">bitmap</a>
        <span title="AnyRef" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#250899" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#250898" title="Int">flag</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> // 1a) bitmap shows no binding
        <span class="keyword">else</span> <span class="delimiter">{</span> // 1b) bitmap contains a value - descend
          <span class="keyword">val</span> <a title="Int" id="250921">pos</a> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#250899" title="Int">bmp</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(-1)" class="int">0xffffffff</span><span class="delimiter">)</span> <a href="#250897" title="Int">idx</a> <span class="keyword">else</span> <span title="object Integer">Integer</span>.<span title="(x$1: Int)Int">bitCount</span><span class="delimiter">(</span><a href="#250899" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span class="delimiter">(</span><a href="#250898" title="Int">flag</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.BasicNode" id="250922">sub</a> = <a href="#250896" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><a href="#250921" title="Int">pos</a><span class="delimiter">)</span>
          <a href="#250922" title="scala.collection.mutable.BasicNode">sub</a> <span title="AnyRef" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="AnyRef" id="250935">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
              <span title="AnyRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a>.<a href="#250185" title="=&gt; Boolean">isReadOnly</a> <a href="../../Boolean.scala.html#25460" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#250892" title="scala.collection.mutable.Gen">startgen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#250935" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250935" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250042" title="(k: K, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])AnyRef">rec_lookup</a><span class="delimiter">(</span><a href="#250888" title="K">k</a>, <a href="#250889" title="Int">hc</a>, <a href="#250890" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a>, <a href="#250892" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span title="AnyRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250896" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250896" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="#250892" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>, <a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250042" title="(k: K, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])AnyRef">rec_lookup</a><span class="delimiter">(</span><a href="#250888" title="K">k</a>, <a href="#250889" title="Int">hc</a>, <a href="#250890" title="Int">lev</a>, <a href="#250891" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250892" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                <span class="keyword">else</span> <span title="Nothing" class="keyword">return</span> <a href="INodeBase.java.html#250066" title="Object">RESTART</a> // used to be throw RestartException
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a title="AnyRef" id="250945">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 2) singleton node
              <span title="AnyRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#250945" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250889" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250945" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250888" title="K">k</a><span class="delimiter">)</span> <a href="#250945" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
              <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Object" id="250950">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 3) non-live node
        <span class="keyword">def</span> <a title="(tn: scala.collection.mutable.TNode[K,V])Object" id="250951">cleanReadOnly</a><span class="delimiter">(</span><a title="scala.collection.mutable.TNode[K,V]" id="250952">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="Object" class="keyword">if</span> <span class="delimiter">(</span><a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a>.<a href="#250186" title="=&gt; Boolean">nonReadOnly</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#250044" title="(nd: scala.collection.mutable.INode[K,V], ct: scala.collection.mutable.Ctrie[K,V], lev: Int)Unit">clean</a><span class="delimiter">(</span><a href="#250891" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250893" title="scala.collection.mutable.Ctrie[K,V]">ct</a>, <a href="#250890" title="Int">lev</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
          <a href="INodeBase.java.html#250066" title="Object">RESTART</a> // used to be throw RestartException
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="AnyRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#250952" title="scala.collection.mutable.TNode[K,V]">tn</a>.<a href="#251303" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250889" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#250952" title="scala.collection.mutable.TNode[K,V]">tn</a>.<a href="#251301" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250888" title="K">k</a><span class="delimiter">)</span> <a href="#250952" title="scala.collection.mutable.TNode[K,V]">tn</a>.<a href="#251302" title="=&gt; V">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
          <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
        <span class="delimiter">}</span>
        <a href="#250951" title="(tn: scala.collection.mutable.TNode[K,V])Object">cleanReadOnly</a><span class="delimiter">(</span><a href="#250950" title="scala.collection.mutable.TNode[K,V]">tn</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="AnyRef" id="250961">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; // 5) an l-node
        <a href="#250961" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250888" title="K">k</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[AnyRef]" class="delimiter">[</span><a href="../../Option.scala.html#1467" title="Option[AnyRef]">Option</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="../../Option.scala.html#30306" title="(implicit ev: &lt;:&lt;[Null,AnyRef])AnyRef">orNull</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  /** Removes the key associated with the given value.
   *  
   *  @param v         if null, will remove the key irregardless of the value; otherwise removes only if binding contains that exact key and value
   *  @return          null if not successful, an Option[V] indicating the previous value otherwise
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]" id="250043">rec_remove</a><span class="delimiter">(</span><a title="K" id="250970">k</a>: <a href="#13880" title="K">K</a>, <a title="V" id="250971">v</a>: <a href="#13881" title="V">V</a>, <a title="Int" id="250972">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="250973">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.INode[K,V]" id="250974">parent</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Gen" id="250975">startgen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250976">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="250978">m</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span> // use -Yinline!
    
    <a href="#250978" title="scala.collection.mutable.MainNode[K,V]">m</a> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Option[V]" id="250979">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
        <span class="keyword">val</span> <a title="Int" id="250980">idx</a> = <span class="delimiter">(</span><a href="#250972" title="Int">hc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#250973" title="Int">lev</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
        <span class="keyword">val</span> <a title="Int" id="250981">bmp</a> = <a href="#250979" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250392" title="=&gt; Int">bitmap</a>
        <span class="keyword">val</span> <a title="Int" id="250982">flag</a> = <span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#250980" title="Int">idx</a>
        <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#250981" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#250982" title="Int">flag</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../Option.scala.html#2425" title="object None">None</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Int" id="251004">pos</a> = <span title="object Integer">Integer</span>.<span title="(x$1: Int)Int">bitCount</span><span class="delimiter">(</span><a href="#250981" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span class="delimiter">(</span><a href="#250982" title="Int">flag</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.BasicNode" id="251005">sub</a> = <a href="#250979" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><a href="#251004" title="Int">pos</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Option[V]" id="251006">res</a> = <a href="#251005" title="scala.collection.mutable.BasicNode">sub</a> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Option[V]" id="251015">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; 
              <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250975" title="scala.collection.mutable.Gen">startgen</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#251015" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span> <a href="#251015" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250043" title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]">rec_remove</a><span class="delimiter">(</span><a href="#250970" title="K">k</a>, <a href="#250971" title="V">v</a>, <a href="#250972" title="Int">hc</a>, <a href="#250973" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a>, <a href="#250975" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250979" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#250979" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250319" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]">renewed</a><span class="delimiter">(</span><a href="#250975" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250043" title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]">rec_remove</a><span class="delimiter">(</span><a href="#250970" title="K">k</a>, <a href="#250971" title="V">v</a>, <a href="#250972" title="Int">hc</a>, <a href="#250973" title="Int">lev</a>, <a href="#250974" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250975" title="scala.collection.mutable.Gen">startgen</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
                <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a title="Option[V]" id="251022">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
              <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#251022" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250431" title="=&gt; Int">hc</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#250972" title="Int">hc</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#251022" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250429" title="=&gt; K">k</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250970" title="K">k</a> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#250971" title="V">v</a> <span title="(x$1: Any)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <a href="../../Boolean.scala.html#25460" title="(x: Boolean)Boolean">||</a> <a href="#251022" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250971" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251027">ncn</a> = <a href="#250979" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250317" title="(pos: Int, flag: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">removedAt</a><span class="delimiter">(</span><a href="#251004" title="Int">pos</a>, <a href="#250982" title="Int">flag</a>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>.<a href="#250321" title="(lev: Int)scala.collection.mutable.MainNode[K,V]">toContracted</a><span class="delimiter">(</span><a href="#250973" title="Int">lev</a><span class="delimiter">)</span>
                <span title="Some[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#250979" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#251027" title="scala.collection.mutable.MainNode[K,V]">ncn</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#30686" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#251022" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
              <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../Option.scala.html#2425" title="object None">None</a>
          <span class="delimiter">}</span>
          
          <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#251006" title="Option[V]">res</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../Option.scala.html#2425" title="object None">None</a> <a href="../../Boolean.scala.html#25460" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#251006" title="Option[V]">res</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#251006" title="Option[V]">res</a>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            @tailrec <span class="keyword">def</span> <a title="(nonlive: AnyRef)Unit" id="251076">cleanParent</a><span class="delimiter">(</span><a title="AnyRef" id="251077">nonlive</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251078">pm</a> = <a href="#250974" title="scala.collection.mutable.INode[K,V]">parent</a>.<a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <a href="#251078" title="scala.collection.mutable.MainNode[K,V]">pm</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a title="Unit" id="251079">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
                  <span class="keyword">val</span> <a title="Int" id="251080">idx</a> = <span class="delimiter">(</span><a href="#250972" title="Int">hc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <span class="delimiter">(</span><a href="#250973" title="Int">lev</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
                  <span class="keyword">val</span> <a title="Int" id="251081">bmp</a> = <a href="#251079" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250392" title="=&gt; Int">bitmap</a>
                  <span class="keyword">val</span> <a title="Int" id="251082">flag</a> = <span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#251080" title="Int">idx</a>
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#251081" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <a href="#251082" title="Int">flag</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span> // somebody already removed this i-node, we're done
                  <span class="keyword">else</span> <span class="delimiter">{</span>
                    <span class="keyword">val</span> <a title="Int" id="251108">pos</a> = <span title="object Integer">Integer</span>.<span title="(x$1: Int)Int">bitCount</span><span class="delimiter">(</span><a href="#251081" title="Int">bmp</a> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span class="delimiter">(</span><a href="#251082" title="Int">flag</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="keyword">val</span> <a title="scala.collection.mutable.BasicNode" id="251109">sub</a> = <a href="#251079" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><a href="#251108" title="Int">pos</a><span class="delimiter">)</span>
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#251109" title="scala.collection.mutable.BasicNode">sub</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#13277" title="scala.collection.mutable.INode[K,V]" class="keyword">this</a><span class="delimiter">)</span> <a href="#251077" title="AnyRef">nonlive</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
                      <span class="keyword">case</span> <a title="Unit" id="251118">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
                        <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251119">ncn</a> = <a href="#251079" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250316" title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]">updatedAt</a><span class="delimiter">(</span><a href="#251108" title="Int">pos</a>, <a href="#251118" title="scala.collection.mutable.TNode[K,V]">tn</a>.<a href="#250535" title="=&gt; scala.collection.mutable.SNode[K,V]">copyUntombed</a>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>.<a href="#250321" title="(lev: Int)scala.collection.mutable.MainNode[K,V]">toContracted</a><span class="delimiter">(</span><a href="#250973" title="Int">lev</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
                        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#25457" title="=&gt; Boolean">!</a><a href="#250974" title="scala.collection.mutable.INode[K,V]">parent</a>.<a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#251079" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#251119" title="scala.collection.mutable.MainNode[K,V]">ncn</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span>
                          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a>.<a href="#250173" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">readRoot</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#250975" title="scala.collection.mutable.Gen">startgen</a><span class="delimiter">)</span> <a href="#251076" title="(nonlive: AnyRef)Unit">cleanParent</a><span class="delimiter">(</span><a href="#251077" title="AnyRef">nonlive</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> <span title="Unit">_</span> =&gt; // parent is no longer a cnode, we're done
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
            
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#250974" title="scala.collection.mutable.INode[K,V]">parent</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span> // never tomb at root
              <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251142">n</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#251142" title="scala.collection.mutable.MainNode[K,V]">n</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="#13391" title="scala.collection.mutable.TNode[_, _]">TNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
                <a href="#251076" title="(nonlive: AnyRef)Unit">cleanParent</a><span class="delimiter">(</span><a href="#251142" title="scala.collection.mutable.MainNode[K,V]">n</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            
            <a href="#251006" title="Option[V]">res</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Null" id="251151">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
        <a href="#250044" title="(nd: scala.collection.mutable.INode[K,V], ct: scala.collection.mutable.Ctrie[K,V], lev: Int)Unit">clean</a><span class="delimiter">(</span><a href="#250974" title="scala.collection.mutable.INode[K,V]">parent</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a>, <a href="#250973" title="Int">lev</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">case</span> <a title="Option[V]" id="251156">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
        <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250971" title="V">v</a> <span title="(x$1: Any)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Option[V]" id="251157">optv</a> = <a href="#251156" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250970" title="K">k</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251158">nn</a> = <a href="#251156" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250555" title="(k: K)scala.collection.mutable.MainNode[K,V]">removed</a><span class="delimiter">(</span><a href="#250970" title="K">k</a><span class="delimiter">)</span>
          <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#251156" title="scala.collection.mutable.LNode[K,V]">ln</a>, <a href="#251158" title="scala.collection.mutable.MainNode[K,V]">nn</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#251157" title="Option[V]">optv</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#251156" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250556" title="(k: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250970" title="K">k</a><span class="delimiter">)</span> <span title="Option[V]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Option[V]" id="251163">optv</a> @ Some<span class="delimiter">(</span><a title="V" id="251165">v0</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#251165" title="V">v0</a> <span title="(x$1: Any)Boolean">==</span> <a href="#250971" title="V">v</a> =&gt;
            <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251166">nn</a> = <a href="#251156" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250555" title="(k: K)scala.collection.mutable.MainNode[K,V]">removed</a><span class="delimiter">(</span><a href="#250970" title="K">k</a><span class="delimiter">)</span>
            <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span class="delimiter">(</span><a href="#251156" title="scala.collection.mutable.LNode[K,V]">ln</a>, <a href="#251166" title="scala.collection.mutable.MainNode[K,V]">nn</a>, <a href="#250976" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#251163" title="Some[V]">optv</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <a href="../../Option.scala.html#2425" title="object None">None</a>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(nd: scala.collection.mutable.INode[K,V], ct: scala.collection.mutable.Ctrie[K,V], lev: Int)Unit" id="250044">clean</a><span class="delimiter">(</span><a title="scala.collection.mutable.INode[K,V]" id="250539">nd</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250540">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="Int" id="250541">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251167">m</a> = <a href="#250539" title="scala.collection.mutable.INode[K,V]">nd</a>.<a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#250540" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
    <a href="#251167" title="scala.collection.mutable.MainNode[K,V]">m</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="251168">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#250539" title="scala.collection.mutable.INode[K,V]">nd</a>.<a href="#250037" title="(old: scala.collection.mutable.MainNode[K,V], n: scala.collection.mutable.MainNode[K,V], ct: scala.collection.mutable.Ctrie[K,V])Boolean">GCAS</a><span title="Unit" class="delimiter">(</span><a href="#251168" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#251168" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250322" title="(ct: scala.collection.mutable.Ctrie[K,V], lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]">toCompressed</a><span class="delimiter">(</span><a href="#250540" title="scala.collection.mutable.Ctrie[K,V]">ct</a>, <a href="#250541" title="Int">lev</a>, <a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>, <a href="#250540" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: scala.collection.mutable.Ctrie[K,V])Boolean" id="250045">isNullInode</a><span class="delimiter">(</span><a title="scala.collection.mutable.Ctrie[K,V]" id="251204">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#251204" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: scala.collection.mutable.Ctrie[K,V])Int" id="250046">cachedSize</a><span class="delimiter">(</span><a title="scala.collection.mutable.Ctrie[K,V]" id="251207">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251209">m</a> = <a href="#250035" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">GCAS_READ</a><span class="delimiter">(</span><a href="#251207" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
    <a href="#251209" title="scala.collection.mutable.MainNode[K,V]">m</a>.<a href="MainNode.java.html#250054" title="(ct: Any)Int">cachedSize</a><span class="delimiter">(</span><a href="#251207" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  /* this is a quiescent method! */
  <span class="keyword">def</span> <a title="(lev: Int)String" id="250047">string</a><span class="delimiter">(</span><a title="Int" id="251211">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span> = <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%sINode -&gt; %s&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;  &quot;</a> <a href="../immutable/StringLike.scala.html#27281" title="(n: Int)String">*</a> <a href="#251211" title="Int">lev</a>, <a href="INodeBase.java.html#250021" title="scala.collection.mutable.MainNode[K,V]">mainnode</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String(&quot;&lt;null&gt;&quot;)" class="keyword">null</span> =&gt; <span title="String(&quot;&lt;null&gt;&quot;)" class="string">&quot;&lt;null&gt;&quot;</span>
    <span class="keyword">case</span> <a title="String" id="251221">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[_,_]">TNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;TNode(%s, %s, %d, !)&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#251221" title="scala.collection.mutable.TNode[_,_]">tn</a>.<a href="#251301" title="=&gt; _">k</a>, <a href="#251221" title="scala.collection.mutable.TNode[_,_]">tn</a>.<a href="#251302" title="=&gt; _">v</a>, <a href="#251221" title="scala.collection.mutable.TNode[_,_]">tn</a>.<a href="#251303" title="=&gt; Int">hc</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="String" id="251227">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[_,_]">CNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; <a href="#251227" title="scala.collection.mutable.CNode[_,_]">cn</a>.<a href="#250323" title="(lev: Int)String">string</a><span class="delimiter">(</span><a href="#251211" title="Int">lev</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="String" id="251232">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[_,_]">LNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; <a href="#251232" title="scala.collection.mutable.LNode[_,_]">ln</a>.<a href="#250558" title="(lev: Int)String">string</a><span class="delimiter">(</span><a href="#251211" title="Int">lev</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="String" id="251246">x</a> =&gt; <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&lt;elem: %s&gt;&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#251246" title="scala.collection.mutable.MainNode[K,V]">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>
  
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object scala.collection.mutable.INode" id="13278">INode</a> <a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="Object" id="250769">KEY_PRESENT</a> = <span title="Object" class="keyword">new</span> <span title="Object">AnyRef</span>
  <span class="keyword">val</span> <a title="Object" id="250771">KEY_ABSENT</a> = <span title="Object" class="keyword">new</span> <span title="Object">AnyRef</span>
  
  <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.mutable.INode[K,V]" id="250773">newRootNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="250776">K</a>, <a title="&gt;: Nothing &lt;: Any" id="250777">V</a><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Gen" id="251255">gen</a> = <span title="scala.collection.mutable.Gen" class="keyword">new</span> <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>
    <span class="keyword">val</span> <a title="scala.collection.mutable.CNode[K,V]" id="251256">cn</a> = <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Array[scala.collection.mutable.BasicNode]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="#251255" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
    <span title="scala.collection.mutable.INode[K,V]" class="keyword">new</span> <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#251256" title="scala.collection.mutable.CNode[K,V]">cn</a>, <a href="#251255" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class FailedNode[K, V] extends scala.collection.mutable.MainNode[K,V] with ScalaObject" id="13016">FailedNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13882">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13883">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><a title="scala.collection.mutable.MainNode[K,V]" id="250265">p</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>
  <a href="MainNode.java.html#250056" title="(nval: scala.collection.mutable.MainNode[K,V])Unit">WRITE_PREV</a><span class="delimiter">(</span><a href="#250265" title="scala.collection.mutable.MainNode[K,V]">p</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(lev: Int)Nothing" id="250250">string</a><span class="delimiter">(</span><a title="Int" id="251265">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <a href="../../package.scala.html#23605" title="UnsupportedOperationException">UnsupportedOperationException</a>
  
  <span class="keyword">def</span> <a title="(ct: AnyRef)Int" id="250251">cachedSize</a><span class="delimiter">(</span><a title="AnyRef" id="251270">ct</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="../../Int.scala.html#495" title="Int">Int</a> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <a href="../../package.scala.html#23605" title="UnsupportedOperationException">UnsupportedOperationException</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="250252">toString</a> = <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;FailedNode(%s)&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#250265" title="scala.collection.mutable.MainNode[K,V]">p</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait KVNode[K, V] extends Object" id="13373">KVNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13884">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13885">V</a><span class="delimiter">]</span> <span title="Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; (K, V)" id="250413">kvPair</a>: <a href="../../Tuple2.scala.html#1191" title="(K, V)" class="delimiter">(</a>K, V<span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class SNode[K, V] extends scala.collection.mutable.BasicNode with scala.collection.mutable.KVNode[K,V] with ScalaObject" id="13064">SNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13886">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13887">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><span class="keyword">final</span> <span class="keyword">val</span> <a title="K" id="250429">k</a>: <a href="#13886" title="K">K</a>, <span class="keyword">final</span> <span class="keyword">val</span> <a title="V" id="250430">v</a>: <a href="#13887" title="V">V</a>, <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int" id="250431">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="BasicNode.java.html#13667" title="scala.collection.mutable.BasicNode">BasicNode</a> <span class="keyword">with</span> <a href="#13373" title="scala.collection.mutable.KVNode[K,V]">KVNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.SNode[K,V]" id="250408">copy</a> = <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250429" title="=&gt; K">k</a>, <a href="#250430" title="=&gt; V">v</a>, <a href="#250431" title="=&gt; Int">hc</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.TNode[K,V]" id="250409">copyTombed</a> = <span title="scala.collection.mutable.TNode[K,V]" class="keyword">new</span> <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">(</span><a href="#250429" title="=&gt; K">k</a>, <a href="#250430" title="=&gt; V">v</a>, <a href="#250431" title="=&gt; Int">hc</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.SNode[K,V]" id="250410">copyUntombed</a> = <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#250429" title="=&gt; K">k</a>, <a href="#250430" title="=&gt; V">v</a>, <a href="#250431" title="=&gt; Int">hc</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; (K, V)" id="250411">kvPair</a> = <a href="../../Tuple2.scala.html#30293" title="(_1: K, _2: V)(K, V)" class="delimiter">(</a><a href="#250429" title="=&gt; K">k</a>, <a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(lev: Int)String" id="250412">string</a><span class="delimiter">(</span><a title="Int" id="251330">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;  &quot;</a> <a href="../immutable/StringLike.scala.html#27281" title="(n: Int)String">*</a> <a href="#251330" title="Int">lev</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;SNode(%s, %s, %x)&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#250429" title="=&gt; K">k</a>, <a href="#250430" title="=&gt; V">v</a>, <a href="#250431" title="=&gt; Int">hc</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class TNode[K, V] extends scala.collection.mutable.MainNode[K,V] with scala.collection.mutable.KVNode[K,V] with ScalaObject" id="13391">TNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13888">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13889">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><span class="keyword">final</span> <span class="keyword">val</span> <a title="K" id="251301">k</a>: <a href="#13888" title="K">K</a>, <span class="keyword">final</span> <span class="keyword">val</span> <a title="V" id="251302">v</a>: <a href="#13889" title="V">V</a>, <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int" id="251303">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="keyword">with</span> <a href="#13373" title="scala.collection.mutable.KVNode[K,V]">KVNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.TNode[K,V]" id="250533">copy</a> = <span title="scala.collection.mutable.TNode[K,V]" class="keyword">new</span> <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">(</span><a href="#251301" title="=&gt; K">k</a>, <a href="#251302" title="=&gt; V">v</a>, <a href="#251303" title="=&gt; Int">hc</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.TNode[K,V]" id="250534">copyTombed</a> = <span title="scala.collection.mutable.TNode[K,V]" class="keyword">new</span> <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">(</span><a href="#251301" title="=&gt; K">k</a>, <a href="#251302" title="=&gt; V">v</a>, <a href="#251303" title="=&gt; Int">hc</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.SNode[K,V]" id="250535">copyUntombed</a> = <span title="scala.collection.mutable.SNode[K,V]" class="keyword">new</span> <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">(</span><a href="#251301" title="=&gt; K">k</a>, <a href="#251302" title="=&gt; V">v</a>, <a href="#251303" title="=&gt; Int">hc</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; (K, V)" id="250536">kvPair</a> = <a href="../../Tuple2.scala.html#30293" title="(_1: K, _2: V)(K, V)" class="delimiter">(</a><a href="#251301" title="=&gt; K">k</a>, <a href="#251302" title="=&gt; V">v</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: AnyRef)Int" id="250537">cachedSize</a><span class="delimiter">(</span><a title="AnyRef" id="251374">ct</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="../../Int.scala.html#495" title="Int">Int</a> = <span title="Int(1)" class="int">1</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(lev: Int)String" id="250538">string</a><span class="delimiter">(</span><a title="Int" id="251376">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;  &quot;</a> <a href="../immutable/StringLike.scala.html#27281" title="(n: Int)String">*</a> <a href="#251376" title="Int">lev</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;TNode(%s, %s, %x, !)&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#251301" title="=&gt; K">k</a>, <a href="#251302" title="=&gt; V">v</a>, <a href="#251303" title="=&gt; Int">hc</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class LNode[K, V] extends scala.collection.mutable.MainNode[K,V] with ScalaObject" id="12884">LNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13890">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13891">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><span class="keyword">final</span> <span class="keyword">val</span> <a title="scala.collection.immutable.ListMap[K,V]" id="250580">listmap</a>: <a href="../immutable/ListMap.scala.html#12039" title="scala.collection.immutable.ListMap[K,V]">ImmutableListMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(k: K, v: V)scala.collection.mutable.LNode[K,V]" id="250552" class="keyword">this</a><span class="delimiter">(</span><a title="K" id="250576">k</a>: <a href="#13890" title="K">K</a>, <a title="V" id="250577">v</a>: <a href="#13891" title="V">V</a><span class="delimiter">)</span> = <a href="#12884" title="LNode.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../generic/GenMapFactory.scala.html#27435" title="(elems: (K, V)*)scala.collection.immutable.ListMap[K,V]">ImmutableListMap</a><span class="delimiter">(</span><a href="../../Predef.scala.html#7780" title="(x: K)ArrowAssoc[K]">k</a> <a href="../../Predef.scala.html#30099" title="(y: V)(K, V)">-&gt;</a> <a href="#250577" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(k1: K, v1: V, k2: K, v2: V)scala.collection.mutable.LNode[K,V]" id="250553" class="keyword">this</a><span class="delimiter">(</span><a title="K" id="250568">k1</a>: <a href="#13890" title="K">K</a>, <a title="V" id="250569">v1</a>: <a href="#13891" title="V">V</a>, <a title="K" id="250570">k2</a>: <a href="#13890" title="K">K</a>, <a title="V" id="250571">v2</a>: <a href="#13891" title="V">V</a><span class="delimiter">)</span> = <a href="#12884" title="LNode.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../generic/GenMapFactory.scala.html#27435" title="(elems: (K, V)*)scala.collection.immutable.ListMap[K,V]">ImmutableListMap</a><span class="delimiter">(</span><a href="../../Predef.scala.html#7780" title="(x: K)ArrowAssoc[K]">k1</a> <a href="../../Predef.scala.html#30099" title="(y: V)(K, V)">-&gt;</a> <a href="#250569" title="V">v1</a>, <a href="../../Predef.scala.html#7780" title="(x: K)ArrowAssoc[K]">k2</a> <a href="../../Predef.scala.html#30099" title="(y: V)(K, V)">-&gt;</a> <a href="#250571" title="V">v2</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(k: K, v: V)scala.collection.mutable.LNode[K,V]" id="250554">inserted</a><span class="delimiter">(</span><a title="K" id="250560">k</a>: <a href="#13890" title="K">K</a>, <a title="V" id="250561">v</a>: <a href="#13891" title="V">V</a><span class="delimiter">)</span> = <span title="scala.collection.mutable.LNode[K,V]" class="keyword">new</span> <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">(</span><a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a> <a href="../immutable/ListMap.scala.html#163239" title="(kv: (K, V))scala.collection.immutable.ListMap[K,V]">+</a> <span class="delimiter">(</span><a href="../../Tuple2.scala.html#30293" title="(_1: K, _2: V)(K, V)" class="delimiter">(</a><a href="#250560" title="K">k</a>, <a href="#250561" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(k: K)scala.collection.mutable.MainNode[K,V]" id="250555">removed</a><span class="delimiter">(</span><a title="K" id="251160">k</a>: <a href="#13890" title="K">K</a><span class="delimiter">)</span>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.ListMap[K,V]" id="251460">updmap</a> = <a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a> <a href="../immutable/ListMap.scala.html#163251" title="(key: K)scala.collection.immutable.ListMap[K,V]">-</a> <a href="#251160" title="K">k</a>
    <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#251460" title="scala.collection.immutable.ListMap[K,V]">updmap</a>.<a href="../immutable/ListMap.scala.html#163234" title="=&gt; Int">size</a> <a href="../../Int.scala.html#24664" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="scala.collection.mutable.LNode[K,V]" class="keyword">new</span> <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">(</span><a href="#251460" title="scala.collection.immutable.ListMap[K,V]">updmap</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="../../Tuple2.scala.html#30293" title="(K, V)" class="delimiter">(</a><a href="../../Tuple2.scala.html#30016" title="K" id="251489">k</a>, <a href="../../Tuple2.scala.html#30018" title="V" id="251490">v</a><span class="delimiter">)</span> = <a href="#251460" title="scala.collection.immutable.ListMap[K,V]">updmap</a>.<a href="../immutable/ListMap.scala.html#163252" title="=&gt; Iterator[(K, V)]">iterator</a>.<a href="../Iterator.scala.html#31861" title="()(K, V)">next</a>
      <span title="scala.collection.mutable.TNode[K,V]" class="keyword">new</span> <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">(</span><a href="#251489" title="K">k</a>, <a href="#251490" title="V">v</a>, <a href="#254500" title="object scala.collection.mutable.Ctrie">Ctrie</a>.<a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#251489" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span> // create it tombed so that it gets compressed on subsequent accesses
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(k: K)Option[V]" id="250556">get</a><span class="delimiter">(</span><a title="K" id="250868">k</a>: <a href="#13890" title="K">K</a><span class="delimiter">)</span> = <a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a>.<a href="../immutable/ListMap.scala.html#163235" title="(key: K)Option[V]">get</a><span class="delimiter">(</span><a href="#250868" title="K">k</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(ct: AnyRef)Int" id="250557">cachedSize</a><span class="delimiter">(</span><a title="AnyRef" id="251531">ct</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="../../Int.scala.html#495" title="Int">Int</a> = <a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a>.<a href="../immutable/ListMap.scala.html#163234" title="=&gt; Int">size</a>
  <span class="keyword">def</span> <a title="(lev: Int)String" id="250558">string</a><span class="delimiter">(</span><a title="Int" id="251235">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; &quot;</a> <a href="../immutable/StringLike.scala.html#27281" title="(n: Int)String">*</a> <a href="#251235" title="Int">lev</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;LNode(%s)&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a>.<a href="../TraversableOnce.scala.html#25856" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class CNode[K, V] extends scala.collection.mutable.CNodeBase[K,V] with ScalaObject" id="13325">CNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13892">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13893">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><span class="keyword">final</span> <span class="keyword">val</span> <a title="Int" id="250392">bitmap</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <span class="keyword">final</span> <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="250393">array</a>: <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">[</span>BasicNode<span class="delimiter">]</span>, <span class="keyword">final</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Gen" id="250394">gen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="CNodeBase.java.html#13370" title="scala.collection.mutable.CNodeBase[K,V]">CNodeBase</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>
  
  // this should only be called from within read-only snapshots
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: AnyRef)Int" id="250314">cachedSize</a><span class="delimiter">(</span><a title="AnyRef" id="251537">ct</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="251540">currsz</a> = <a href="CNodeBase.java.html#250303" title="()Int">READ_SIZE</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#251540" title="Int">currsz</a> <a href="../../Int.scala.html#24643" title="(x: Int)Boolean">!=</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#251540" title="Int">currsz</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="251545">sz</a> = <a href="#250315" title="(ct: scala.collection.mutable.Ctrie[K,V])Int">computeSize</a><span class="delimiter">(</span><a href="#251537" title="AnyRef">ct</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.mutable.Ctrie[K,V]" class="delimiter">[</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="CNodeBase.java.html#250303" title="()Int">READ_SIZE</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="CNodeBase.java.html#250301" title="(oldval: Int, nval: Int)Boolean">CAS_SIZE</a><a href="#251546" title="()Unit" class="delimiter">(</a>-<span title="Int(-1)" class="int">1</span>, <a href="#251545" title="Int">sz</a><span class="delimiter">)</span>
      <a href="CNodeBase.java.html#250303" title="()Int">READ_SIZE</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  // lends itself towards being parallelizable by choosing
  // a random starting offset in the array
  // =&gt; if there are concurrent size computations, they start
  //    at different positions, so they are more likely to
  //    to be independent
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ct: scala.collection.mutable.Ctrie[K,V])Int" id="250315">computeSize</a><span class="delimiter">(</span><a title="scala.collection.mutable.Ctrie[K,V]" id="251547">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="251556">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">var</span> <a title="Int" id="251557">sz</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">val</span> <a title="Int" id="251558">offset</a> = math.<a href="../../math/package.scala.html#23563" title="(x: Int)Int">abs</a><span class="delimiter">(</span>util.<a href="../../util/Random.scala.html#19990" title="object scala.util.Random">Random</a>.<a href="../../util/Random.scala.html#85089" title="()Int">nextInt</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Int.scala.html#24721" title="(x: Int)Int">%</a> <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#251556" title="Int">i</a> <a href="../../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#251559" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="Int" id="251584">pos</a> = <span class="delimiter">(</span><a href="#251556" title="Int">i</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <a href="#251558" title="Int">offset</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24721" title="(x: Int)Int">%</a> <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a>
      <a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><a href="#251584" title="Int">pos</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="251593">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[_,_]">SNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; <a href="#251557" title="Int">sz</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span class="keyword">case</span> <a title="Unit" id="251602">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#251557" title="Int">sz</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <a href="#251602" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250046" title="(ct: scala.collection.mutable.Ctrie[K,V])Int">cachedSize</a><span class="delimiter">(</span><a href="#251547" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#251556" title="Int">i</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <a href="#251557" title="Int">sz</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(pos: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]" id="250316">updatedAt</a><span class="delimiter">(</span><a title="Int" id="250418">pos</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.BasicNode" id="250419">nn</a>: <a href="BasicNode.java.html#13667" title="scala.collection.mutable.BasicNode">BasicNode</a>, <a title="scala.collection.mutable.Gen" id="250420">gen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="250423">len</a> = <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="250424">narr</a> = <span title="Array[scala.collection.mutable.BasicNode]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">[</span>BasicNode<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250423" title="Int">len</a><span class="delimiter">)</span>
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>, <span title="Int(0)" class="int">0</span>, <a href="#250424" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <span title="Int(0)" class="int">0</span>, <a href="#250423" title="Int">len</a><span class="delimiter">)</span>
    <a href="../../Array.scala.html#24200" title="(i: Int, x: scala.collection.mutable.BasicNode)Unit">narr</a><span class="delimiter">(</span><a href="#250418" title="Int">pos</a><span class="delimiter">)</span> = <a href="#250419" title="scala.collection.mutable.BasicNode">nn</a>
    <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250392" title="=&gt; Int">bitmap</a>, <a href="#250424" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <a href="#250420" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(pos: Int, flag: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]" id="250317">removedAt</a><span class="delimiter">(</span><a title="Int" id="251028">pos</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="251029">flag</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.Gen" id="251030">gen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="251033">arr</a> = <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>
    <span class="keyword">val</span> <a title="Int" id="251034">len</a> = <a href="#251033" title="Array[scala.collection.mutable.BasicNode]">arr</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="251035">narr</a> = <span title="Array[scala.collection.mutable.BasicNode]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">[</span>BasicNode<span class="delimiter">]</span><span class="delimiter">(</span><a href="#251034" title="Int">len</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#251033" title="Array[scala.collection.mutable.BasicNode]">arr</a>, <span title="Int(0)" class="int">0</span>, <a href="#251035" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <span title="Int(0)" class="int">0</span>, <a href="#251028" title="Int">pos</a><span class="delimiter">)</span>
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#251033" title="Array[scala.collection.mutable.BasicNode]">arr</a>, <a href="#251028" title="Int">pos</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>, <a href="#251035" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <a href="#251028" title="Int">pos</a>, <a href="#251034" title="Int">len</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <a href="#251028" title="Int">pos</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250392" title="=&gt; Int">bitmap</a> <a href="../../Int.scala.html#24688" title="(x: Int)Int">^</a> <a href="#251029" title="Int">flag</a>, <a href="#251035" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <a href="#251030" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(pos: Int, flag: Int, nn: scala.collection.mutable.BasicNode, gen: scala.collection.mutable.Gen)scala.collection.mutable.CNode[K,V]" id="250318">insertedAt</a><span class="delimiter">(</span><a title="Int" id="250487">pos</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="250488">flag</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.BasicNode" id="250489">nn</a>: <a href="BasicNode.java.html#13667" title="scala.collection.mutable.BasicNode">BasicNode</a>, <a title="scala.collection.mutable.Gen" id="250490">gen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="250493">len</a> = <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a>
    <span class="keyword">val</span> <a title="Int" id="250494">bmp</a> = <a href="#250392" title="=&gt; Int">bitmap</a>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="250495">narr</a> = <span title="Array[scala.collection.mutable.BasicNode]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">[</span>BasicNode<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250493" title="Int">len</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>, <span title="Int(0)" class="int">0</span>, <a href="#250495" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <span title="Int(0)" class="int">0</span>, <a href="#250487" title="Int">pos</a><span class="delimiter">)</span>
    <a href="../../Array.scala.html#24200" title="(i: Int, x: scala.collection.mutable.BasicNode)Unit">narr</a><span class="delimiter">(</span><a href="#250487" title="Int">pos</a><span class="delimiter">)</span> = <a href="#250489" title="scala.collection.mutable.BasicNode">nn</a>
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>, <a href="#250487" title="Int">pos</a>, <a href="#250495" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <a href="#250487" title="Int">pos</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>, <a href="#250493" title="Int">len</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <a href="#250487" title="Int">pos</a><span class="delimiter">)</span>
    <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250494" title="Int">bmp</a> <a href="../../Int.scala.html#24678" title="(x: Int)Int">|</a> <a href="#250488" title="Int">flag</a>, <a href="#250495" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <a href="#250490" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  /** Returns a copy of this cnode such that all the i-nodes below it are copied
   *  to the specified generation `ngen`.
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.CNode[K,V]" id="250319">renewed</a><span class="delimiter">(</span><a title="scala.collection.mutable.Gen" id="250366">ngen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="250367">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="250370">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="250371">arr</a> = <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>
    <span class="keyword">val</span> <a title="Int" id="250372">len</a> = <a href="#250371" title="Array[scala.collection.mutable.BasicNode]">arr</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="250373">narr</a> = <span title="Array[scala.collection.mutable.BasicNode]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">[</span>BasicNode<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250372" title="Int">len</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#250370" title="Int">i</a> <a href="../../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#250372" title="Int">len</a><span class="delimiter">)</span> <a href="#250374" title="()Unit" class="delimiter">{</a>
      <a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">arr</a><span class="delimiter">(</span><a href="#250370" title="Int">i</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="250379">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="../../Array.scala.html#24200" title="(i: Int, x: scala.collection.mutable.BasicNode)Unit">narr</a><span class="delimiter">(</span><a href="#250370" title="Int">i</a><span class="delimiter">)</span> = <a href="#250379" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250039" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.INode[K,V]">copyToGen</a><span class="delimiter">(</span><a href="#250366" title="scala.collection.mutable.Gen">ngen</a>, <a href="#250367" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="250384">bn</a>: <a href="BasicNode.java.html#13667" title="scala.collection.mutable.BasicNode">BasicNode</a> =&gt; <a href="../../Array.scala.html#24200" title="(i: Int, x: scala.collection.mutable.BasicNode)Unit">narr</a><span class="delimiter">(</span><a href="#250370" title="Int">i</a><span class="delimiter">)</span> = <a href="#250384" title="scala.collection.mutable.BasicNode">bn</a>
      <span class="delimiter">}</span>
      <a href="#250370" title="Int">i</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250392" title="=&gt; Int">bitmap</a>, <a href="#250373" title="Array[scala.collection.mutable.BasicNode]">narr</a>, <a href="#250366" title="scala.collection.mutable.Gen">ngen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(inode: scala.collection.mutable.INode[K,V], inodemain: AnyRef)scala.collection.mutable.BasicNode" id="250320">resurrect</a><span class="delimiter">(</span><a title="scala.collection.mutable.INode[K,V]" id="251191">inode</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="AnyRef" id="251192">inodemain</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="BasicNode.java.html#13667" title="scala.collection.mutable.BasicNode">BasicNode</a> = <a href="#251192" title="AnyRef">inodemain</a> <span title="scala.collection.mutable.BasicNode" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="scala.collection.mutable.SNode[_,_]" id="251616">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[_,_]">TNode</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; <a href="#251616" title="scala.collection.mutable.TNode[_,_]">tn</a>.<a href="#250535" title="=&gt; scala.collection.mutable.SNode[_,_]">copyUntombed</a>
    <span class="keyword">case</span> <span title="scala.collection.mutable.INode[K,V]">_</span> =&gt; <a href="#251191" title="scala.collection.mutable.INode[K,V]">inode</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(lev: Int)scala.collection.mutable.MainNode[K,V]" id="250321">toContracted</a><span class="delimiter">(</span><a title="Int" id="251056">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span> <a href="../../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#251056" title="Int">lev</a> <a href="../../Int.scala.html#24664" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">array</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="scala.collection.mutable.TNode[K,V]" id="251628">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#251628" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250409" title="=&gt; scala.collection.mutable.TNode[K,V]">copyTombed</a>
    <span class="keyword">case</span> <span title="scala.collection.mutable.CNode[K,V]">_</span> =&gt; <a href="#13325" title="scala.collection.mutable.CNode[K,V]" class="keyword">this</a>
  <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]" class="keyword">this</a>
  
  // - if the branching factor is 1 for this CNode, and the child
  //   is a tombed SNode, returns its tombed version
  // - otherwise, if there is at least one non-null node below,
  //   returns the version of this node with at least some null-inodes
  //   removed (those existing when the op began)
  // - if there are only null-i-nodes below, returns null
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ct: scala.collection.mutable.Ctrie[K,V], lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]" id="250322">toCompressed</a><span class="delimiter">(</span><a title="scala.collection.mutable.Ctrie[K,V]" id="251169">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="Int" id="251170">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.Gen" id="251171">gen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="251174">bmp</a> = <a href="#250392" title="=&gt; Int">bitmap</a>
    <span class="keyword">var</span> <a title="Int" id="251175">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="251176">arr</a> = <a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.BasicNode]" id="251177">tmparray</a> = <span title="Array[scala.collection.mutable.BasicNode]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[scala.collection.mutable.BasicNode]">Array</a><span class="delimiter">[</span>BasicNode<span class="delimiter">]</span><span class="delimiter">(</span><a href="#251176" title="Array[scala.collection.mutable.BasicNode]">arr</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#251175" title="Int">i</a> <a href="../../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#251176" title="Array[scala.collection.mutable.BasicNode]">arr</a>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#251178" title="()Unit" class="delimiter">{</a> // construct new bitmap
      <span class="keyword">val</span> <a title="scala.collection.mutable.BasicNode" id="251183">sub</a> = <a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode">arr</a><span class="delimiter">(</span><a href="#251175" title="Int">i</a><span class="delimiter">)</span>
      <a href="#251183" title="scala.collection.mutable.BasicNode">sub</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="251184">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
          <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="251185">inodemain</a> = <a href="#251184" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250034" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">gcasRead</a><span class="delimiter">(</span><a href="#251169" title="scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span>
          <a href="../../Predef.scala.html#7755" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#251185" title="scala.collection.mutable.MainNode[K,V]">inodemain</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <a href="../../Array.scala.html#24200" title="(i: Int, x: scala.collection.mutable.BasicNode)Unit">tmparray</a><span class="delimiter">(</span><a href="#251175" title="Int">i</a><span class="delimiter">)</span> = <a href="#250320" title="(inode: scala.collection.mutable.INode[K,V], inodemain: AnyRef)scala.collection.mutable.BasicNode">resurrect</a><span class="delimiter">(</span><a href="#251184" title="scala.collection.mutable.INode[K,V]">in</a>, <a href="#251185" title="scala.collection.mutable.MainNode[K,V]">inodemain</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Unit" id="251194">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
          <a href="../../Array.scala.html#24200" title="(i: Int, x: scala.collection.mutable.BasicNode)Unit">tmparray</a><span class="delimiter">(</span><a href="#251175" title="Int">i</a><span class="delimiter">)</span> = <a href="#251194" title="scala.collection.mutable.SNode[K,V]">sn</a>
      <span class="delimiter">}</span>
      <a href="#251175" title="Int">i</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    
    <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#251174" title="Int">bmp</a>, <a href="#251177" title="Array[scala.collection.mutable.BasicNode]">tmparray</a>, <a href="#251171" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>.<a href="#250321" title="(lev: Int)scala.collection.mutable.MainNode[K,V]">toContracted</a><span class="delimiter">(</span><a href="#251170" title="Int">lev</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(lev: Int)String" id="250323">string</a><span class="delimiter">(</span><a title="Int" id="251230">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;CNode %x\n%s&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#250392" title="=&gt; Int">bitmap</a>, <a href="../../Predef.scala.html#7817" title="(xs: Array[scala.collection.mutable.BasicNode])scala.collection.mutable.ArrayOps[scala.collection.mutable.BasicNode]">array</a>.<a href="../TraversableLike.scala.html#24063" title="(f: scala.collection.mutable.BasicNode =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[scala.collection.mutable.BasicNode],String,Array[String]])Array[String]">map</a><a href="../../Predef.scala.html#7817" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><a href="#252089" title="scala.collection.mutable.BasicNode">_</a>.<a href="BasicNode.java.html#250019" title="(lev: Int)String">string</a><span class="delimiter">(</span><a href="#251230" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../TraversableOnce.scala.html#25856" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  
  /* quiescently consistent - don't call concurrently to anything involving a GCAS!! */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.Seq[(K, V)]" id="250324">collectElems</a>: <a href="Seq.scala.html#13514" title="scala.collection.mutable.Seq[(K, V)]">Seq</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="../../Predef.scala.html#7817" title="(xs: Array[scala.collection.mutable.BasicNode])scala.collection.mutable.ArrayOps[scala.collection.mutable.BasicNode]">array</a> <a href="../TraversableLike.scala.html#24068" title="(f: scala.collection.mutable.BasicNode =&gt; scala.collection.GenTraversableOnce[(K, V)])(implicit bf: scala.collection.generic.CanBuildFrom[Array[scala.collection.mutable.BasicNode],(K, V),scala.collection.mutable.Seq[(K, V)]])scala.collection.mutable.Seq[(K, V)]">flatMap</a> <a href="#252708" title="Iterable[(K, V)]" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Iterable[(K, V)]" id="252709">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="../../Option.scala.html#30686" title="(x: (K, V))Some[(K, V)]">Some</a><a href="../../Option.scala.html#55719" title="(xo: Option[(K, V)])Iterable[(K, V)]" class="delimiter">(</a><a href="#252709" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250411" title="=&gt; (K, V)">kvPair</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Iterable[(K, V)]" id="252750">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#252750" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="INodeBase.java.html#250021" title="scala.collection.mutable.MainNode[K,V]">mainnode</a> <span title="Iterable[(K, V)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Iterable[(K, V)]" id="252751">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="../../Option.scala.html#30686" title="(x: (K, V))Some[(K, V)]">Some</a><a href="../../Option.scala.html#55719" title="(xo: Option[(K, V)])Iterable[(K, V)]" class="delimiter">(</a><a href="#252751" title="scala.collection.mutable.TNode[K,V]">tn</a>.<a href="#250536" title="=&gt; (K, V)">kvPair</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="List[(K, V)]" id="252792">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#252792" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a>.<a href="../TraversableOnce.scala.html#25840" title="=&gt; List[(K, V)]">toList</a>
      <span class="keyword">case</span> <a title="scala.collection.mutable.Seq[(K, V)]" id="252793">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#252793" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250324" title="=&gt; scala.collection.mutable.Seq[(K, V)]">collectElems</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.Seq[String]" id="250325">collectLocalElems</a>: <a href="Seq.scala.html#13514" title="scala.collection.mutable.Seq[String]">Seq</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../Predef.scala.html#7817" title="(xs: Array[scala.collection.mutable.BasicNode])scala.collection.mutable.ArrayOps[scala.collection.mutable.BasicNode]">array</a> <a href="../TraversableLike.scala.html#24068" title="(f: scala.collection.mutable.BasicNode =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[Array[scala.collection.mutable.BasicNode],String,scala.collection.mutable.Seq[String]])scala.collection.mutable.Seq[String]">flatMap</a> <a href="#253295" title="Iterable[String]" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Iterable[String]" id="253296">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="../../Option.scala.html#30686" title="(x: String)Some[String]">Some</a><a href="../../Option.scala.html#55719" title="(xo: Option[String])Iterable[String]" class="delimiter">(</a><a href="#253296" title="scala.collection.mutable.SNode[K,V]">sn</a>.<a href="#250411" title="=&gt; (K, V)">kvPair</a>.<a href="../../Tuple2.scala.html#30018" title="=&gt; V">_2</a>.<span title="()String">toString</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Iterable[String]" id="253338">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="../../Option.scala.html#30686" title="(x: String)Some[String]">Some</a><a href="../../Option.scala.html#55719" title="(xo: Option[String])Iterable[String]" class="delimiter">(</a><a href="#253338" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">toString</a>.<a href="../IndexedSeqOptimized.scala.html#26681" title="(n: Int)String">drop</a><span class="delimiter">(</span><span title="Int(14)" class="int">14</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#253338" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="250326">toString</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Seq[String]" id="253466">elems</a> = <a href="#250325" title="=&gt; scala.collection.mutable.Seq[String]">collectLocalElems</a>
    <a href="../../Predef.scala.html#7873" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;CNode(sz: %d; %s)&quot;</a>.<a href="../immutable/StringLike.scala.html#27310" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#253466" title="scala.collection.mutable.Seq[String]">elems</a>.<a href="../SeqLike.scala.html#26271" title="=&gt; Int">size</a>, <a href="#253466" title="scala.collection.mutable.Seq[String]">elems</a>.<a href="../SeqLike.scala.html#26390" title="(implicit ord: scala.math.Ordering[String])scala.collection.mutable.Seq[String]">sorted</a>.<a href="../TraversableOnce.scala.html#25856" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object scala.collection.mutable.CNode" id="13326">CNode</a> <a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">{</a>
  
  <span class="keyword">def</span> <a title="[K, V](x: scala.collection.mutable.SNode[K,V], xhc: Int, y: scala.collection.mutable.SNode[K,V], yhc: Int, lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]" id="250441">dual</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="250444">K</a>, <a title="&gt;: Nothing &lt;: Any" id="250445">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.collection.mutable.SNode[K,V]" id="250446">x</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="Int" id="250447">xhc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.SNode[K,V]" id="250448">y</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="Int" id="250449">yhc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="250450">lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.Gen" id="250451">gen</a>: <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a><span class="delimiter">)</span>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250450" title="Int">lev</a> <a href="../../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <span title="Int(35)" class="int">35</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="253536">xidx</a> = <span class="delimiter">(</span><a href="#250447" title="Int">xhc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#250450" title="Int">lev</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
    <span class="keyword">val</span> <a title="Int" id="253537">yidx</a> = <span class="delimiter">(</span><a href="#250449" title="Int">yhc</a> <a href="../../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#250450" title="Int">lev</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24683" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
    <span class="keyword">val</span> <a title="Int" id="253538">bmp</a> = <span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#253536" title="Int">xidx</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24678" title="(x: Int)Int">|</a> <span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <a href="#253537" title="Int">yidx</a><span class="delimiter">)</span>
    <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#253536" title="Int">xidx</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <a href="#253537" title="Int">yidx</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="253571">subinode</a> = <a href="#250031" title="(g: scala.collection.mutable.Gen)scala.collection.mutable.INode[K,V]" class="keyword">new</a> <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#250451" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>//(Ctrie.inodeupdater)
      <a href="#253571" title="scala.collection.mutable.INode[K,V]">subinode</a>.<a href="INodeBase.java.html#250021" title="scala.collection.mutable.MainNode[K,V]">mainnode</a> = <a href="#250441" title="(x: scala.collection.mutable.SNode[K,V], xhc: Int, y: scala.collection.mutable.SNode[K,V], yhc: Int, lev: Int, gen: scala.collection.mutable.Gen)scala.collection.mutable.MainNode[K,V]">dual</a><span class="delimiter">(</span><a href="#250446" title="scala.collection.mutable.SNode[K,V]">x</a>, <a href="#250447" title="Int">xhc</a>, <a href="#250448" title="scala.collection.mutable.SNode[K,V]">y</a>, <a href="#250449" title="Int">yhc</a>, <a href="#250450" title="Int">lev</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(5)" class="int">5</span>, <a href="#250451" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
      <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">(</span><a href="#253538" title="Int">bmp</a>, <a href="../../Array.scala.html#35466" title="(xs: scala.collection.mutable.BasicNode*)(implicit evidence$2: scala.reflect.ClassManifest[scala.collection.mutable.BasicNode])Array[scala.collection.mutable.BasicNode]">Array</a><a href="../../reflect/ClassManifest.scala.html#27558" title="(clazz: Class[_])scala.reflect.ClassManifest[scala.collection.mutable.BasicNode]" class="delimiter">(</a><a href="#253571" title="scala.collection.mutable.INode[K,V]">subinode</a><span class="delimiter">)</span>, <a href="#250451" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="scala.collection.mutable.MainNode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#253536" title="Int">xidx</a> <a href="../../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#253537" title="Int">yidx</a><span class="delimiter">)</span> <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">(</span><a href="#253538" title="Int">bmp</a>, <a href="../../Array.scala.html#35466" title="(xs: scala.collection.mutable.BasicNode*)(implicit evidence$2: scala.reflect.ClassManifest[scala.collection.mutable.BasicNode])Array[scala.collection.mutable.BasicNode]">Array</a><a href="../../reflect/ClassManifest.scala.html#27558" title="(clazz: Class[_])scala.reflect.ClassManifest[scala.collection.mutable.BasicNode]" class="delimiter">(</a><a href="#250446" title="scala.collection.mutable.SNode[K,V]">x</a>, <a href="#250448" title="scala.collection.mutable.SNode[K,V]">y</a><span class="delimiter">)</span>, <a href="#250451" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="scala.collection.mutable.CNode[K,V]" class="keyword">new</span> <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">(</span><a href="#253538" title="Int">bmp</a>, <a href="../../Array.scala.html#35466" title="(xs: scala.collection.mutable.BasicNode*)(implicit evidence$2: scala.reflect.ClassManifest[scala.collection.mutable.BasicNode])Array[scala.collection.mutable.BasicNode]">Array</a><a href="../../reflect/ClassManifest.scala.html#27558" title="(clazz: Class[_])scala.reflect.ClassManifest[scala.collection.mutable.BasicNode]" class="delimiter">(</a><a href="#250448" title="scala.collection.mutable.SNode[K,V]">y</a>, <a href="#250446" title="scala.collection.mutable.SNode[K,V]">x</a><span class="delimiter">)</span>, <a href="#250451" title="scala.collection.mutable.Gen">gen</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <a href="#250553" title="(k1: K, v1: V, k2: K, v2: V)scala.collection.mutable.LNode[K,V]" class="keyword">new</a> <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">(</span><a href="#250446" title="scala.collection.mutable.SNode[K,V]">x</a>.<a href="#250429" title="=&gt; K">k</a>, <a href="#250446" title="scala.collection.mutable.SNode[K,V]">x</a>.<a href="#250430" title="=&gt; V">v</a>, <a href="#250448" title="scala.collection.mutable.SNode[K,V]">y</a>.<a href="#250429" title="=&gt; K">k</a>, <a href="#250448" title="scala.collection.mutable.SNode[K,V]">y</a>.<a href="#250430" title="=&gt; V">v</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> case <span class="keyword">class</span> <a title="class RDCSS_Descriptor[K, V] extends Object with ScalaObject with Product with Serializable" id="255312">RDCSS_Descriptor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253927">K</a>, <a title="&gt;: Nothing &lt;: Any" id="253928">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><a title="scala.collection.mutable.INode[K,V]" id="253983">old</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.MainNode[K,V]" id="253984">expectedmain</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.INode[K,V]" id="253985">nv</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  @volatile <span class="keyword">var</span> <a title="Boolean" id="253702">committed</a> = <span title="Boolean(false)" class="keyword">false</span>
<span class="delimiter">}</span>


/** A concurrent hash-trie or Ctrie is a concurrent thread-safe lock-free
 *  implementation of a hash array mapped trie. It is used to implement the
 *  concurrent map abstraction. It has particularly scalable concurrent insert
 *  and remove operations and is memory-efficient. It supports O(1), atomic,
 *  lock-free snapshots which are used to implement linearizable lock-free size,
 *  iterator and clear operations. The cost of evaluating the (lazy) snapshot is
 *  distributed across subsequent updates, thus making snapshot evaluation horizontally scalable.
 *  
 *  For details, see: http://lampwww.epfl.ch/~prokopec/ctries-snapshot.pdf
 *  
 *  @author Aleksandar Prokopec
 *  @since 2.10
 */
@SerialVersionUID<span class="delimiter">(</span><span class="long">0L</span> - <span class="long">6402774413839597105L</span><span class="delimiter">)</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class Ctrie[K, V] extends Object with scala.collection.mutable.ConcurrentMap[K,V] with scala.collection.mutable.MapLike[K,V,scala.collection.mutable.Ctrie[K,V]] with scala.collection.CustomParallelizable[(K, V),scala.collection.parallel.mutable.ParCtrie[K,V]] with Serializable with ScalaObject" id="13100">Ctrie</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13896">K</a>, <a title="&gt;: Nothing &lt;: Any" id="13897">V</a><span class="delimiter">]</span> <a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="keyword">private</a> <span class="delimiter">(</span><a title="AnyRef" id="253827">r</a>: <span title="AnyRef">AnyRef</span>, <a title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]" id="253828">rtupd</a>: <span title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">AtomicReferenceFieldUpdater</span><span class="delimiter">[</span>Ctrie<span class="delimiter">[</span>K, V<span class="delimiter">]</span>, AnyRef<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="ConcurrentMap.scala.html#13067" title="scala.collection.mutable.ConcurrentMap[K,V]">ConcurrentMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="MapLike.scala.html#13763" title="scala.collection.mutable.MapLike[K,V,scala.collection.mutable.Ctrie[K,V]]">MapLike</a><span class="delimiter">[</span>K, V, Ctrie<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../CustomParallelizable.scala.html#4067" title="scala.collection.CustomParallelizable[(K, V),scala.collection.parallel.mutable.ParCtrie[K,V]]">CustomParallelizable</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span>, ParCtrie<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../Serializable.scala.html#1332" title="Serializable">Serializable</a>
<span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#254500" title="object scala.collection.mutable.Ctrie">Ctrie</a>.computeHash
  
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]" id="250164">rootupdater</a> = <a href="#253828" title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">rtupd</a>
  @volatile <span class="keyword">var</span> <a title="AnyRef" id="250167">root</a> = <a href="#253827" title="AnyRef">r</a>
  
  <span class="keyword">def</span> <a title="()scala.collection.mutable.Ctrie[K,V]" id="250169" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#13100" title="Ctrie.this.type" class="keyword">this</a><span class="delimiter">(</span>
    <a href="#13278" title="object scala.collection.mutable.INode">INode</a>.<a href="#250773" title="scala.collection.mutable.INode[Nothing,Nothing]">newRootNode</a>,
    <span title="object java.util.concurrent.atomic.AtomicReferenceFieldUpdater">AtomicReferenceFieldUpdater</span>.<span title="(x$1: Class[scala.collection.mutable.Ctrie[K,V]], x$2: Class[AnyRef], x$3: String)java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">newUpdater</span><span class="delimiter">(</span>classOf<span title="Class[scala.collection.mutable.Ctrie[K,V]](classOf[scala.collection.mutable.Ctrie])" class="delimiter">[</span>Ctrie<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>, classOf<span title="Class[AnyRef](classOf[java.lang.Object])" class="delimiter">[</span>AnyRef<span class="delimiter">]</span>, <span title="String(&quot;root&quot;)" class="string">&quot;root&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">)</span>
  
  /* internal methods */
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(out: java.io.ObjectOutputStream)Unit" id="250170">writeObject</a><span class="delimiter">(</span><a title="java.io.ObjectOutputStream" id="253849">out</a>: java.io.<span title="java.io.ObjectOutputStream">ObjectOutputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterator[(K, V)]" id="253851">it</a> = <a href="#250202" title="=&gt; Iterator[(K, V)]">iterator</a>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#253851" title="Iterator[(K, V)]">it</a>.<a href="../Iterator.scala.html#31860" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#253852" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a href="../../Tuple2.scala.html#30293" title="(K, V)" class="delimiter">(</a><a href="../../Tuple2.scala.html#30016" title="K" id="253856">k</a>, <a href="../../Tuple2.scala.html#30018" title="V" id="253857">v</a><span class="delimiter">)</span> = <a href="#253851" title="Iterator[(K, V)]">it</a>.<a href="../Iterator.scala.html#31861" title="()(K, V)">next</a><a href="../../Tuple2.scala.html#1191" title="(K, V) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
      <a href="#253849" title="java.io.ObjectOutputStream">out</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#253856" title="K">k</a><span class="delimiter">)</span>
      <a href="#253849" title="java.io.ObjectOutputStream">out</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#253857" title="V">v</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#253849" title="java.io.ObjectOutputStream">out</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#255142" title="object scala.collection.mutable.CtrieSerializationEnd">CtrieSerializationEnd</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(in: java.io.ObjectInputStream)Unit" id="250171">readObject</a><span class="delimiter">(</span><a title="java.io.ObjectInputStream" id="253869">in</a>: java.io.<span title="java.io.ObjectInputStream">ObjectInputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#250167" title="(x$1: AnyRef)Unit">root</a> = <a href="#13278" title="object scala.collection.mutable.INode">INode</a>.<a href="#250773" title="scala.collection.mutable.INode[Nothing,Nothing]">newRootNode</a>
    <a href="#250164" title="(x$1: java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef])Unit">rootupdater</a> = <span title="object java.util.concurrent.atomic.AtomicReferenceFieldUpdater">AtomicReferenceFieldUpdater</span>.<span title="(x$1: Class[scala.collection.mutable.Ctrie[K,V]], x$2: Class[AnyRef], x$3: String)java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">newUpdater</span><span class="delimiter">(</span>classOf<span title="Class[scala.collection.mutable.Ctrie[K,V]](classOf[scala.collection.mutable.Ctrie])" class="delimiter">[</span>Ctrie<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>, classOf<span title="Class[AnyRef](classOf[java.lang.Object])" class="delimiter">[</span>AnyRef<span class="delimiter">]</span>, <span title="String(&quot;root&quot;)" class="string">&quot;root&quot;</span><span class="delimiter">)</span>
    
    <span class="keyword">var</span> <a title="AnyRef" id="253871">obj</a>: <span title="AnyRef">AnyRef</span> = <span title="Null(null)" class="keyword">null</span>
    <a href="#253882" title="Unit" class="keyword">do</a> <span class="delimiter">{</span>
      <a href="#253871" title="AnyRef">obj</a> = <a href="#253869" title="java.io.ObjectInputStream">in</a>.<span title="()Object">readObject</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#253871" title="AnyRef">obj</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#255142" title="object scala.collection.mutable.CtrieSerializationEnd">CtrieSerializationEnd</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="K" id="253888">k</a> = <a href="#253871" title="AnyRef">obj</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="K" class="delimiter">[</span><a href="#13896" title="K">K</a><span class="delimiter">]</span>
        <span class="keyword">val</span> <a title="V" id="253889">v</a> = <a href="#253869" title="java.io.ObjectInputStream">in</a>.<span title="()Object">readObject</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="V" class="delimiter">[</span><a href="#13897" title="V">V</a><span class="delimiter">]</span>
        <a href="#250194" title="(k: K, v: V)Unit">update</a><span class="delimiter">(</span><a href="#253888" title="K">k</a>, <a href="#253889" title="V">v</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">while</span> <span class="delimiter">(</span><a href="#253871" title="AnyRef">obj</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#255142" title="object scala.collection.mutable.CtrieSerializationEnd">CtrieSerializationEnd</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ov: AnyRef, nv: AnyRef)Boolean" id="250172">CAS_ROOT</a><span class="delimiter">(</span><a title="AnyRef" id="253900">ov</a>: <span title="AnyRef">AnyRef</span>, <a title="AnyRef" id="253901">nv</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <a href="#250164" title="=&gt; java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">rootupdater</a>.<span title="(x$1: scala.collection.mutable.Ctrie[K,V], x$2: AnyRef, x$3: AnyRef)Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a>, <a href="#253900" title="AnyRef">ov</a>, <a href="#253901" title="AnyRef">nv</a><span class="delimiter">)</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(abort: Boolean)scala.collection.mutable.INode[K,V]" id="250173">readRoot</a><span class="delimiter">(</span><a title="Boolean" id="250219">abort</a>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><a href="#250219" title="Boolean">abort</a><span class="delimiter">)</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(abort: Boolean)scala.collection.mutable.INode[K,V]" id="250174">RDCSS_READ_ROOT</a><span class="delimiter">(</span><a title="Boolean" id="253909">abort</a>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="AnyRef" id="253910">r</a> = /*READ*/<a href="#250167" title="=&gt; AnyRef">root</a>
    <a href="#253910" title="AnyRef">r</a> <span title="scala.collection.mutable.INode[K,V]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="scala.collection.mutable.INode[K,V]" id="253911">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#253911" title="scala.collection.mutable.INode[K,V]">in</a>
      <span class="keyword">case</span> <a title="scala.collection.mutable.INode[K,V]" id="253912">desc</a>: <a href="#255312" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">RDCSS_Descriptor</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#250175" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_Complete</a><span class="delimiter">(</span><a href="#253909" title="Boolean">abort</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  @tailrec <span class="keyword">private</span> <span class="keyword">def</span> <a title="(abort: Boolean)scala.collection.mutable.INode[K,V]" id="250175">RDCSS_Complete</a><span class="delimiter">(</span><a title="Boolean" id="253913">abort</a>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="AnyRef" id="253915">v</a> = /*READ*/<a href="#250167" title="=&gt; AnyRef">root</a>
    <a href="#253915" title="AnyRef">v</a> <span title="scala.collection.mutable.INode[K,V]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="scala.collection.mutable.INode[K,V]" id="253916">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt; <a href="#253916" title="scala.collection.mutable.INode[K,V]">in</a>
      <span class="keyword">case</span> <a title="scala.collection.mutable.INode[K,V]" id="253917">desc</a>: <a href="#255312" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">RDCSS_Descriptor</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
        <span class="keyword">val</span> RDCSS_Descriptor<a href="../../Tuple3.scala.html#30734" title="(scala.collection.mutable.INode[K,V], scala.collection.mutable.MainNode[K,V], scala.collection.mutable.INode[K,V])" class="delimiter">(</a><a href="../../Tuple3.scala.html#29911" title="scala.collection.mutable.INode[K,V]" id="253919">ov</a>, <a href="../../Tuple3.scala.html#29913" title="scala.collection.mutable.MainNode[K,V]" id="253920">exp</a>, <a href="../../Tuple3.scala.html#29915" title="scala.collection.mutable.INode[K,V]" id="253921">nv</a><span class="delimiter">)</span> = <a href="#253917" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a>
        <span title="scala.collection.mutable.INode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#253913" title="Boolean">abort</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="scala.collection.mutable.INode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250172" title="(ov: AnyRef, nv: AnyRef)Boolean">CAS_ROOT</a><span class="delimiter">(</span><a href="#253917" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a>, <a href="#253919" title="scala.collection.mutable.INode[K,V]">ov</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#253919" title="scala.collection.mutable.INode[K,V]">ov</a>
          <span class="keyword">else</span> <a href="#250175" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_Complete</a><span class="delimiter">(</span><a href="#253913" title="Boolean">abort</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="253976">oldmain</a> = <a href="#253919" title="scala.collection.mutable.INode[K,V]">ov</a>.<a href="#250034" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">gcasRead</a><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
          <span title="scala.collection.mutable.INode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#253976" title="scala.collection.mutable.MainNode[K,V]">oldmain</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#253920" title="scala.collection.mutable.MainNode[K,V]">exp</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="scala.collection.mutable.INode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250172" title="(ov: AnyRef, nv: AnyRef)Boolean">CAS_ROOT</a><span class="delimiter">(</span><a href="#253917" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a>, <a href="#253921" title="scala.collection.mutable.INode[K,V]">nv</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#253917" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a>.<a href="#253702" title="(x$1: Boolean)Unit">committed</a> = <span title="Boolean(true)" class="keyword">true</span>
              <a href="#253921" title="scala.collection.mutable.INode[K,V]">nv</a>
            <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#250175" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_Complete</a><span class="delimiter">(</span><a href="#253913" title="Boolean">abort</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span title="scala.collection.mutable.INode[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250172" title="(ov: AnyRef, nv: AnyRef)Boolean">CAS_ROOT</a><span class="delimiter">(</span><a href="#253917" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a>, <a href="#253919" title="scala.collection.mutable.INode[K,V]">ov</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#253919" title="scala.collection.mutable.INode[K,V]">ov</a>
            <span class="keyword">else</span> <a href="#250175" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_Complete</a><span class="delimiter">(</span><a href="#253913" title="Boolean">abort</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ov: scala.collection.mutable.INode[K,V], expectedmain: scala.collection.mutable.MainNode[K,V], nv: scala.collection.mutable.INode[K,V])Boolean" id="250176">RDCSS_ROOT</a><span class="delimiter">(</span><a title="scala.collection.mutable.INode[K,V]" id="253978">ov</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.MainNode[K,V]" id="253979">expectedmain</a>: <a href="MainNode.java.html#13142" title="scala.collection.mutable.MainNode[K,V]">MainNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="scala.collection.mutable.INode[K,V]" id="253980">nv</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.RDCSS_Descriptor[K,V]" id="253982">desc</a> = <a href="#255312" title="(old: scala.collection.mutable.INode[K,V], expectedmain: scala.collection.mutable.MainNode[K,V], nv: scala.collection.mutable.INode[K,V])scala.collection.mutable.RDCSS_Descriptor[K,V]">RDCSS_Descriptor</a><span class="delimiter">(</span><a href="#253978" title="scala.collection.mutable.INode[K,V]">ov</a>, <a href="#253979" title="scala.collection.mutable.MainNode[K,V]">expectedmain</a>, <a href="#253980" title="scala.collection.mutable.INode[K,V]">nv</a><span class="delimiter">)</span>
    <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#250172" title="(ov: AnyRef, nv: AnyRef)Boolean">CAS_ROOT</a><span class="delimiter">(</span><a href="#253978" title="scala.collection.mutable.INode[K,V]">ov</a>, <a href="#253982" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#250175" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_Complete</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      /*READ*/<a href="#253982" title="scala.collection.mutable.RDCSS_Descriptor[K,V]">desc</a>.<a href="#253702" title="=&gt; Boolean">committed</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>
  
  @tailrec <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: K, hc: Int, v: V)Unit" id="250177">inserthc</a><span class="delimiter">(</span><a title="K" id="253998">k</a>: <a href="#13896" title="K">K</a>, <a title="Int" id="253999">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="V" id="254000">v</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254002">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#25457" title="=&gt; Boolean">!</a><a href="#254002" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250040" title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Boolean">rec_insert</a><span class="delimiter">(</span><a href="#253998" title="K">k</a>, <a href="#254000" title="V">v</a>, <a href="#253999" title="Int">hc</a>, <span title="Int(0)" class="int">0</span>, <span title="Null(null)" class="keyword">null</span>, <a href="#254002" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250177" title="(k: K, hc: Int, v: V)Unit">inserthc</a><span class="delimiter">(</span><a href="#253998" title="K">k</a>, <a href="#253999" title="Int">hc</a>, <a href="#254000" title="V">v</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  @tailrec <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: K, hc: Int, v: V, cond: AnyRef)Option[V]" id="250178">insertifhc</a><span class="delimiter">(</span><a title="K" id="254012">k</a>: <a href="#13896" title="K">K</a>, <a title="Int" id="254013">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="V" id="254014">v</a>: <a href="#13897" title="V">V</a>, <a title="AnyRef" id="254015">cond</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254017">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Option[V]" id="254018">ret</a> = <a href="#254017" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250041" title="(k: K, v: V, hc: Int, cond: AnyRef, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]">rec_insertif</a><span class="delimiter">(</span><a href="#254012" title="K">k</a>, <a href="#254014" title="V">v</a>, <a href="#254013" title="Int">hc</a>, <a href="#254015" title="AnyRef">cond</a>, <span title="Int(0)" class="int">0</span>, <span title="Null(null)" class="keyword">null</span>, <a href="#254017" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254018" title="Option[V]">ret</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#250178" title="(k: K, hc: Int, v: V, cond: AnyRef)Option[V]">insertifhc</a><span class="delimiter">(</span><a href="#254012" title="K">k</a>, <a href="#254013" title="Int">hc</a>, <a href="#254014" title="V">v</a>, <a href="#254015" title="AnyRef">cond</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#254018" title="Option[V]">ret</a>
  <span class="delimiter">}</span>
  
  @tailrec <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: K, hc: Int)AnyRef" id="250179">lookuphc</a><span class="delimiter">(</span><a title="K" id="254027">k</a>: <a href="#13896" title="K">K</a>, <a title="Int" id="254028">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254030">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="AnyRef" id="254031">res</a> = <a href="#254030" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250042" title="(k: K, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])AnyRef">rec_lookup</a><span class="delimiter">(</span><a href="#254027" title="K">k</a>, <a href="#254028" title="Int">hc</a>, <span title="Int(0)" class="int">0</span>, <span title="Null(null)" class="keyword">null</span>, <a href="#254030" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="AnyRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#254031" title="AnyRef">res</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="INodeBase.java.html#13320" title="object scala.collection.mutable.INodeBase">INodeBase</a>.<a href="INodeBase.java.html#250066" title="Object">RESTART</a><span class="delimiter">)</span> <a href="#250179" title="(k: K, hc: Int)AnyRef">lookuphc</a><span class="delimiter">(</span><a href="#254027" title="K">k</a>, <a href="#254028" title="Int">hc</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#254031" title="AnyRef">res</a>
  <span class="delimiter">}</span>
  
  /* slower:
  //@tailrec
  private def lookuphc(k: K, hc: Int): AnyRef = {
    val r = RDCSS_READ_ROOT()
    try {
      r.rec_lookup(k, hc, 0, null, r.gen, this)
    } catch {
      case RestartException =&gt;
        lookuphc(k, hc)
    }
  }
  */
  
  @tailrec <span class="keyword">private</span> <span class="keyword">def</span> <a title="(k: K, v: V, hc: Int)Option[V]" id="250180">removehc</a><span class="delimiter">(</span><a title="K" id="254038">k</a>: <a href="#13896" title="K">K</a>, <a title="V" id="254039">v</a>: <a href="#13897" title="V">V</a>, <a title="Int" id="254040">hc</a>: <a href="../../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254042">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[V]" id="254043">res</a> = <a href="#254042" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250043" title="(k: K, v: V, hc: Int, lev: Int, parent: scala.collection.mutable.INode[K,V], startgen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])Option[V]">rec_remove</a><span class="delimiter">(</span><a href="#254038" title="K">k</a>, <a href="#254039" title="V">v</a>, <a href="#254040" title="Int">hc</a>, <span title="Int(0)" class="int">0</span>, <span title="Null(null)" class="keyword">null</span>, <a href="#254042" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="INodeBase.java.html#250022" title="scala.collection.mutable.Gen">gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254043" title="Option[V]">res</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#254043" title="Option[V]">res</a>
    <span class="keyword">else</span> <a href="#250180" title="(k: K, v: V, hc: Int)Option[V]">removehc</a><span class="delimiter">(</span><a href="#254038" title="K">k</a>, <a href="#254039" title="V">v</a>, <a href="#254040" title="Int">hc</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; String" id="250181">string</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="#250047" title="(lev: Int)String">string</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  
  /* public methods */
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.Ctrie[K,V]" id="250182">seq</a> = <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.mutable.ParCtrie[K,V]" id="250183">par</a> = <span title="scala.collection.parallel.mutable.ParCtrie[K,V]" class="keyword">new</span> <a href="../parallel/mutable/ParCtrie.scala.html#16082" title="scala.collection.parallel.mutable.ParCtrie[K,V]">ParCtrie</a><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.Ctrie[K,V]" id="250184">empty</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <a href="#250169" title="()scala.collection.mutable.Ctrie[K,V]" class="keyword">new</a> <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="250185">isReadOnly</a> = <a href="#250164" title="=&gt; java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">rootupdater</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="250186">nonReadOnly</a> = <a href="#250164" title="=&gt; java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">rootupdater</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span>
  
  /** Returns a snapshot of this Ctrie.
   *  This operation is lock-free and linearizable.
   *  
   *  The snapshot is lazily updated - the first time some branch
   *  in the snapshot or this Ctrie are accessed, they are rewritten.
   *  This means that the work of rebuilding both the snapshot and this
   *  Ctrie is distributed across all the threads doing updates or accesses
   *  subsequent to the snapshot creation.
   */
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="()scala.collection.mutable.Ctrie[K,V]" id="250187">snapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254163">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="254164">expmain</a> = <a href="#254163" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250034" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">gcasRead</a><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="scala.collection.mutable.Ctrie[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250176" title="(ov: scala.collection.mutable.INode[K,V], expectedmain: scala.collection.mutable.MainNode[K,V], nv: scala.collection.mutable.INode[K,V])Boolean">RDCSS_ROOT</a><span class="delimiter">(</span><a href="#254163" title="scala.collection.mutable.INode[K,V]">r</a>, <a href="#254164" title="scala.collection.mutable.MainNode[K,V]">expmain</a>, <a href="#254163" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250039" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.INode[K,V]">copyToGen</a><span class="delimiter">(</span><span title="scala.collection.mutable.Gen" class="keyword">new</span> <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="scala.collection.mutable.Ctrie[K,V]" class="keyword">new</span> <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">(</span><a href="#254163" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250039" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.INode[K,V]">copyToGen</a><span class="delimiter">(</span><span title="scala.collection.mutable.Gen" class="keyword">new</span> <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>, <a href="#250164" title="=&gt; java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.Ctrie[K,V],AnyRef]">rootupdater</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#250187" title="()scala.collection.mutable.Ctrie[K,V]">snapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  /** Returns a read-only snapshot of this Ctrie.
   *  This operation is lock-free and linearizable.
   *  
   *  The snapshot is lazily updated - the first time some branch
   *  of this Ctrie are accessed, it is rewritten. The work of creating
   *  the snapshot is thus distributed across subsequent updates
   *  and accesses on this Ctrie by all threads.
   *  Note that the snapshot itself is never rewritten unlike when calling
   *  the `snapshot` method, but the obtained snapshot cannot be modified.
   *  
   *  This method is used by other methods such as `size` and `iterator`.
   */
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="()scala.collection.Map[K,V]" id="250188">readOnlySnapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>: collection.<a href="../Map.scala.html#4022" title="scala.collection.Map[K,V]">Map</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254177">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.MainNode[K,V]" id="254178">expmain</a> = <a href="#254177" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250034" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">gcasRead</a><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
    <span title="scala.collection.Map[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250176" title="(ov: scala.collection.mutable.INode[K,V], expectedmain: scala.collection.mutable.MainNode[K,V], nv: scala.collection.mutable.INode[K,V])Boolean">RDCSS_ROOT</a><span class="delimiter">(</span><a href="#254177" title="scala.collection.mutable.INode[K,V]">r</a>, <a href="#254178" title="scala.collection.mutable.MainNode[K,V]">expmain</a>, <a href="#254177" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250039" title="(ngen: scala.collection.mutable.Gen, ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.INode[K,V]">copyToGen</a><span class="delimiter">(</span><span title="scala.collection.mutable.Gen" class="keyword">new</span> <a href="Gen.java.html#13751" title="scala.collection.mutable.Gen">Gen</a>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="scala.collection.mutable.Ctrie[K,Nothing]" class="keyword">new</span> <a href="#13100" title="scala.collection.mutable.Ctrie[K,Nothing]">Ctrie</a><span class="delimiter">(</span><a href="#254177" title="scala.collection.mutable.INode[K,V]">r</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#250188" title="()scala.collection.Map[K,V]">readOnlySnapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  @tailrec <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="250189">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254207">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#25457" title="=&gt; Boolean">!</a><a href="#250176" title="(ov: scala.collection.mutable.INode[K,V], expectedmain: scala.collection.mutable.MainNode[K,V], nv: scala.collection.mutable.INode[K,V])Boolean">RDCSS_ROOT</a><span class="delimiter">(</span><a href="#254207" title="scala.collection.mutable.INode[K,V]">r</a>, <a href="#254207" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250034" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">gcasRead</a><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>, <a href="#13278" title="object scala.collection.mutable.INode">INode</a>.<a href="#250773" title="[K, V]=&gt; scala.collection.mutable.INode[K,V]">newRootNode</a><span title="scala.collection.mutable.INode[K,V]" class="delimiter">[</span><a href="#13896" title="K">K</a>, <a href="#13897" title="V">V</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#250189" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K)V" id="250190">lookup</a><span class="delimiter">(</span><a title="K" id="254209">k</a>: <a href="#13896" title="K">K</a><span class="delimiter">)</span>: <a href="#13897" title="V">V</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254211">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254209" title="K">k</a><span class="delimiter">)</span>
    <a href="#250179" title="(k: K, hc: Int)AnyRef">lookuphc</a><span class="delimiter">(</span><a href="#254209" title="K">k</a>, <a href="#254211" title="Int">hc</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="V" class="delimiter">[</span><a href="#13897" title="V">V</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K)V" id="250191">apply</a><span class="delimiter">(</span><a title="K" id="254215">k</a>: <a href="#13896" title="K">K</a><span class="delimiter">)</span>: <a href="#13897" title="V">V</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254221">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254215" title="K">k</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="AnyRef" id="254222">res</a> = <a href="#250179" title="(k: K, hc: Int)AnyRef">lookuphc</a><span class="delimiter">(</span><a href="#254215" title="K">k</a>, <a href="#254221" title="Int">hc</a><span class="delimiter">)</span>
    <span title="V" class="keyword">if</span> <span class="delimiter">(</span><a href="#254222" title="AnyRef">res</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="java.util.NoSuchElementException" class="keyword">new</span> <a href="../../package.scala.html#23607" title="java.util.NoSuchElementException">NoSuchElementException</a>
    <span class="keyword">else</span> <a href="#254222" title="AnyRef">res</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="V" class="delimiter">[</span><a href="#13897" title="V">V</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K)Option[V]" id="250192">get</a><span class="delimiter">(</span><a title="K" id="254228">k</a>: <a href="#13896" title="K">K</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254233">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254228" title="K">k</a><span class="delimiter">)</span>
    <a href="../../Option.scala.html#55722" title="(x: AnyRef)Option[AnyRef]">Option</a><span class="delimiter">(</span><a href="#250179" title="(k: K, hc: Int)AnyRef">lookuphc</a><span class="delimiter">(</span><a href="#254228" title="K">k</a>, <a href="#254233" title="Int">hc</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[V]" class="delimiter">[</span><a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: K, value: V)Option[V]" id="250193">put</a><span class="delimiter">(</span><a title="K" id="254240">key</a>: <a href="#13896" title="K">K</a>, <a title="V" id="254241">value</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254245">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254240" title="K">key</a><span class="delimiter">)</span>
    <a href="#250178" title="(k: K, hc: Int, v: V, cond: AnyRef)Option[V]">insertifhc</a><span class="delimiter">(</span><a href="#254240" title="K">key</a>, <a href="#254245" title="Int">hc</a>, <a href="#254241" title="V">value</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K, v: V)Unit" id="250194">update</a><span class="delimiter">(</span><a title="K" id="253890">k</a>: <a href="#13896" title="K">K</a>, <a title="V" id="253891">v</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254249">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#253890" title="K">k</a><span class="delimiter">)</span>
    <a href="#250177" title="(k: K, hc: Int, v: V)Unit">inserthc</a><span class="delimiter">(</span><a href="#253890" title="K">k</a>, <a href="#254249" title="Int">hc</a>, <a href="#253891" title="V">v</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(kv: (K, V))Ctrie.this.type" id="250195">+=</a><span class="delimiter">(</span><a title="(K, V)" id="254253">kv</a>: <a href="../../Tuple2.scala.html#1191" title="(K, V)" class="delimiter">(</a>K, V<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#250194" title="(k: K, v: V)Unit">update</a><span class="delimiter">(</span><a href="#254253" title="(K, V)">kv</a>.<a href="../../Tuple2.scala.html#30016" title="=&gt; K">_1</a>, <a href="#254253" title="(K, V)">kv</a>.<a href="../../Tuple2.scala.html#30018" title="=&gt; V">_2</a><span class="delimiter">)</span>
    <a href="#13100" title="Ctrie.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K)Option[V]" id="250196">remove</a><span class="delimiter">(</span><a title="K" id="254278">k</a>: <a href="#13896" title="K">K</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254287">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254278" title="K">k</a><span class="delimiter">)</span>
    <a href="#250180" title="(k: K, v: V, hc: Int)Option[V]">removehc</a><span class="delimiter">(</span><a href="#254278" title="K">k</a>, <span title="Null(null)" class="keyword">null</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="V" class="delimiter">[</span><a href="#13897" title="V">V</a><span class="delimiter">]</span>, <a href="#254287" title="Int">hc</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(k: K)Ctrie.this.type" id="250197">-=</a><span class="delimiter">(</span><a title="K" id="254291">k</a>: <a href="#13896" title="K">K</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#250196" title="(k: K)Option[V]">remove</a><span class="delimiter">(</span><a href="#254291" title="K">k</a><span class="delimiter">)</span>
    <a href="#13100" title="Ctrie.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(k: K, v: V)Option[V]" id="250198">putIfAbsent</a><span class="delimiter">(</span><a title="K" id="254328">k</a>: <a href="#13896" title="K">K</a>, <a title="V" id="254329">v</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254333">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254328" title="K">k</a><span class="delimiter">)</span>
    <a href="#250178" title="(k: K, hc: Int, v: V, cond: AnyRef)Option[V]">insertifhc</a><span class="delimiter">(</span><a href="#254328" title="K">k</a>, <a href="#254333" title="Int">hc</a>, <a href="#254329" title="V">v</a>, <a href="#13278" title="object scala.collection.mutable.INode">INode</a>.<a href="#250771" title="=&gt; Object">KEY_ABSENT</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(k: K, v: V)Boolean" id="250199">remove</a><span class="delimiter">(</span><a title="K" id="254314">k</a>: <a href="#13896" title="K">K</a>, <a title="V" id="254315">v</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254337">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254314" title="K">k</a><span class="delimiter">)</span>
    <a href="#250180" title="(k: K, v: V, hc: Int)Option[V]">removehc</a><span class="delimiter">(</span><a href="#254314" title="K">k</a>, <a href="#254315" title="V">v</a>, <a href="#254337" title="Int">hc</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#30320" title="=&gt; Boolean">nonEmpty</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(k: K, oldvalue: V, newvalue: V)Boolean" id="250200">replace</a><span class="delimiter">(</span><a title="K" id="254341">k</a>: <a href="#13896" title="K">K</a>, <a title="V" id="254342">oldvalue</a>: <a href="#13897" title="V">V</a>, <a title="V" id="254343">newvalue</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254351">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254341" title="K">k</a><span class="delimiter">)</span>
    <a href="#250178" title="(k: K, hc: Int, v: V, cond: AnyRef)Option[V]">insertifhc</a><span class="delimiter">(</span><a href="#254341" title="K">k</a>, <a href="#254351" title="Int">hc</a>, <a href="#254343" title="V">newvalue</a>, <a href="#254342" title="V">oldvalue</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>.<a href="../../Option.scala.html#30320" title="=&gt; Boolean">nonEmpty</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(k: K, v: V)Option[V]" id="250201">replace</a><span class="delimiter">(</span><a title="K" id="254355">k</a>: <a href="#13896" title="K">K</a>, <a title="V" id="254356">v</a>: <a href="#13897" title="V">V</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#1467" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254359">hc</a> = <a href="#251519" title="(k: K)Int">computeHash</a><span class="delimiter">(</span><a href="#254355" title="K">k</a><span class="delimiter">)</span>
    <a href="#250178" title="(k: K, hc: Int, v: V, cond: AnyRef)Option[V]">insertifhc</a><span class="delimiter">(</span><a href="#254355" title="K">k</a>, <a href="#254359" title="Int">hc</a>, <a href="#254356" title="V">v</a>, <a href="#13278" title="object scala.collection.mutable.INode">INode</a>.<a href="#250769" title="=&gt; Object">KEY_PRESENT</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Iterator[(K, V)]" id="250202">iterator</a>: <a href="../Iterator.scala.html#4712" title="Iterator[(K, V)]">Iterator</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span><span class="delimiter">]</span> =
    <span title="Iterator[(K, V)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#250186" title="=&gt; Boolean">nonReadOnly</a><span class="delimiter">)</span> <a href="#250188" title="()scala.collection.Map[K,V]">readOnlySnapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../MapLike.scala.html#44964" title="=&gt; Iterator[(K, V)]">iterator</a>
    <span class="keyword">else</span> <a href="#254411" title="scala.collection.mutable.CtrieIterator[K,V]" class="keyword">new</a> <a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]">CtrieIterator</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Int" id="250203">cachedSize</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254437">r</a> = <a href="#250174" title="(abort: Boolean)scala.collection.mutable.INode[K,V]">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#254437" title="scala.collection.mutable.INode[K,V]">r</a>.<a href="#250046" title="(ct: scala.collection.mutable.Ctrie[K,V])Int">cachedSize</a><span class="delimiter">(</span><a href="#13100" title="scala.collection.mutable.Ctrie[K,V]" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="250204">size</a>: <a href="../../Int.scala.html#495" title="Int">Int</a> =
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#250186" title="=&gt; Boolean">nonReadOnly</a><span class="delimiter">)</span> <a href="#250188" title="()scala.collection.Map[K,V]">readOnlySnapshot</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../TraversableOnce.scala.html#25767" title="=&gt; Int">size</a>
    <span class="keyword">else</span> <a href="#250203" title="()Int">cachedSize</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="250205">stringPrefix</a> = <span title="String(&quot;Ctrie&quot;)" class="string">&quot;Ctrie&quot;</span>
  
<span class="delimiter">}</span>


<span class="keyword">object</span> <a title="object scala.collection.mutable.Ctrie" id="254500">Ctrie</a> <a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="keyword">extends</a> <a href="../generic/MutableMapFactory.scala.html#11018" title="scala.collection.generic.MutableMapFactory[scala.collection.mutable.Ctrie]">MutableMapFactory</a><span class="delimiter">[</span>Ctrie<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.INodeBase[_, _],scala.collection.mutable.MainNode[_, _]]" id="251507">inodeupdater</a> = <span title="object java.util.concurrent.atomic.AtomicReferenceFieldUpdater">AtomicReferenceFieldUpdater</span>.<span title="(x$1: Class[scala.collection.mutable.INodeBase[_, _]], x$2: Class[scala.collection.mutable.MainNode[_, _]], x$3: String)java.util.concurrent.atomic.AtomicReferenceFieldUpdater[scala.collection.mutable.INodeBase[_, _],scala.collection.mutable.MainNode[_, _]]">newUpdater</span><span class="delimiter">(</span>classOf<span title="Class[scala.collection.mutable.INodeBase[_, _]](classOf[scala.collection.mutable.INodeBase])" class="delimiter">[</span>INodeBase<span class="delimiter">[</span>_, _<span class="delimiter">]</span><span class="delimiter">]</span>, classOf<span title="Class[scala.collection.mutable.MainNode[_, _]](classOf[scala.collection.mutable.MainNode])" class="delimiter">[</span>MainNode<span class="delimiter">[</span>_, _<span class="delimiter">]</span><span class="delimiter">]</span>, <span title="String(&quot;mainnode&quot;)" class="string">&quot;mainnode&quot;</span><span class="delimiter">)</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.generic.CanBuildFrom[scala.collection.mutable.Ctrie.Coll,(K, V),scala.collection.mutable.Ctrie[K,V]]" id="251509">canBuildFrom</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="251512">K</a>, <a title="&gt;: Nothing &lt;: Any" id="251513">V</a><span class="delimiter">]</span>: <a href="../generic/CanBuildFrom.scala.html#11066" title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Ctrie.Coll,(K, V),scala.collection.mutable.Ctrie[K,V]]">CanBuildFrom</a><span class="delimiter">[</span>Coll, <span class="delimiter">(</span>K, V<span class="delimiter">)</span>, Ctrie<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="scala.collection.mutable.Ctrie.MapCanBuildFrom[K,V]" class="keyword">new</span> <a href="../generic/GenMapFactory.scala.html#27445" title="scala.collection.mutable.Ctrie.MapCanBuildFrom[K,V]">MapCanBuildFrom</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.mutable.Ctrie[K,V]" id="251514">empty</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="251517">K</a>, <a title="&gt;: Nothing &lt;: Any" id="251518">V</a><span class="delimiter">]</span>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <a href="#250169" title="()scala.collection.mutable.Ctrie[K,V]" class="keyword">new</a> <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
  
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="[K](k: K)Int" id="251519">computeHash</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="251521">K</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="K" id="251522">k</a>: <a href="#251521" title="K">K</a><span class="delimiter">)</span>: <a href="../../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="254491">hcode</a> = <a href="#251522" title="K">k</a>.<span title="()Int">hashCode</span>
    <a href="#254491" title="Int">hcode</a> = <a href="#254491" title="Int">hcode</a> <a href="../../Int.scala.html#24707" title="(x: Int)Int">*</a> <span title="Int(-1640532531)" class="int">0x9e3775cd</span>
    <a href="#254491" title="Int">hcode</a> = java.lang.<span title="object Integer">Integer</span>.<span title="(x$1: Int)Int">reverseBytes</span><span class="delimiter">(</span><a href="#254491" title="Int">hcode</a><span class="delimiter">)</span>
    <a href="#254491" title="Int">hcode</a> <a href="../../Int.scala.html#24707" title="(x: Int)Int">*</a> <span title="Int(-1640532531)" class="int">0x9e3775cd</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class CtrieIterator[K, V] extends Object with Iterator[(K, V)] with ScalaObject" id="13587">CtrieIterator</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="254414">K</a>, <a title="&gt;: Nothing &lt;: Any" id="254415">V</a><span class="delimiter">]</span><a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">(</a><span class="keyword">var</span> <a title="Int" id="254407">level</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Ctrie[K,V]" id="254408">ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="Boolean" id="254411">mustInit</a>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../Iterator.scala.html#4712" title="Iterator[(K, V)]">Iterator</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span><span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Array[Array[scala.collection.mutable.BasicNode]]" id="254381">stack</a> = <span title="Array[Array[scala.collection.mutable.BasicNode]]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[Array[scala.collection.mutable.BasicNode]]">Array</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>BasicNode<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(7)" class="int">7</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="Array[Int]" id="254384">stackpos</a> = <span title="Array[Int]" class="keyword">new</span> <a href="../../Array.scala.html#279" title="Array[Int]">Array</a><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(7)" class="int">7</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="Int" id="254387">depth</a> = -<span title="Int(-1)" class="int">1</span>
  <span class="keyword">var</span> <a title="Iterator[(K, V)]" id="254390">subiter</a>: <a href="../Iterator.scala.html#4712" title="Iterator[(K, V)]">Iterator</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">var</span> <a title="scala.collection.mutable.KVNode[K,V]" id="254393">current</a>: <a href="#13373" title="scala.collection.mutable.KVNode[K,V]">KVNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>
  
  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#254411" title="Boolean">mustInit</a><span class="delimiter">)</span> <a href="#254399" title="()Unit">initialize</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="254395">hasNext</a> = <span class="delimiter">(</span><a href="#254393" title="=&gt; scala.collection.mutable.KVNode[K,V]">current</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../Boolean.scala.html#25460" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="()(K, V)" id="254396">next</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="(K, V)" class="keyword">if</span> <span class="delimiter">(</span><a href="#254395" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="(K, V)" id="254518">r</a>: <a href="../../Tuple2.scala.html#1191" title="(K, V)" class="delimiter">(</a>K, V<span class="delimiter">)</span> = <span title="Null(null)" class="keyword">null</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#254518" title="(K, V)">r</a> = <a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a>.<a href="../Iterator.scala.html#31861" title="()(K, V)">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#254398" title="()Unit">checkSubiter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#254518" title="(K, V)">r</a> = <a href="#254393" title="=&gt; scala.collection.mutable.KVNode[K,V]">current</a>.<a href="#250413" title="=&gt; (K, V)">kvPair</a>
      <a href="#254400" title="()Unit">advance</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#254518" title="(K, V)">r</a>
  <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../Iterator.scala.html#4713" title="object Iterator">Iterator</a>.<a href="../Iterator.scala.html#55877" title="=&gt; Iterator[Nothing]">empty</a>.<a href="../Iterator.scala.html#31861" title="()Nothing">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(in: scala.collection.mutable.INode[K,V])Unit" id="254397">readin</a><span class="delimiter">(</span><a title="scala.collection.mutable.INode[K,V]" id="254522">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#254522" title="scala.collection.mutable.INode[K,V]">in</a>.<a href="#250034" title="(ct: scala.collection.mutable.Ctrie[K,V])scala.collection.mutable.MainNode[K,V]">gcasRead</a><span class="delimiter">(</span><a href="#254408" title="=&gt; scala.collection.mutable.Ctrie[K,V]">ct</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="Unit" id="254526">cn</a>: <a href="#13325" title="scala.collection.mutable.CNode[K,V]">CNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
      <a href="#254387" title="(x$1: Int)Unit">depth</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="../../Array.scala.html#24200" title="(i: Int, x: Array[scala.collection.mutable.BasicNode])Unit">stack</a><span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span> = <a href="#254526" title="scala.collection.mutable.CNode[K,V]">cn</a>.<a href="#250393" title="=&gt; Array[scala.collection.mutable.BasicNode]">array</a>
      <a href="../../Array.scala.html#24200" title="(i: Int, x: Int)Unit">stackpos</a><span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span> = -<span title="Int(-1)" class="int">1</span>
      <a href="#254400" title="()Unit">advance</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Unit" id="254537">tn</a>: <a href="#13391" title="scala.collection.mutable.TNode[K,V]">TNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
      <a href="#254393" title="(x$1: scala.collection.mutable.KVNode[K,V])Unit">current</a> = <a href="#254537" title="scala.collection.mutable.TNode[K,V]">tn</a>
    <span class="keyword">case</span> <a title="Unit" id="254538">ln</a>: <a href="#12884" title="scala.collection.mutable.LNode[K,V]">LNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
      <a href="#254390" title="(x$1: Iterator[(K, V)])Unit">subiter</a> = <a href="#254538" title="scala.collection.mutable.LNode[K,V]">ln</a>.<a href="#250580" title="=&gt; scala.collection.immutable.ListMap[K,V]">listmap</a>.<a href="../immutable/ListMap.scala.html#163252" title="=&gt; Iterator[(K, V)]">iterator</a>
      <a href="#254398" title="()Unit">checkSubiter</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Unit" class="keyword">null</span> =&gt;
      <a href="#254393" title="(x$1: scala.collection.mutable.KVNode[K,V])Unit">current</a> = <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>
  
  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="254398">checkSubiter</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#25457" title="=&gt; Boolean">!</a><a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a>.<a href="../Iterator.scala.html#31860" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#254390" title="(x$1: Iterator[(K, V)])Unit">subiter</a> = <span title="Null(null)" class="keyword">null</span>
    <a href="#254400" title="()Unit">advance</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="254399">initialize</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../Predef.scala.html#7755" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#254408" title="=&gt; scala.collection.mutable.Ctrie[K,V]">ct</a>.<a href="#250185" title="=&gt; Boolean">isReadOnly</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.INode[K,V]" id="254539">r</a> = <a href="#254408" title="scala.collection.mutable.Ctrie[K,V]" id="254542">ct</a>.<a href="#253909" title="Boolean" id="254543">RDCSS_READ_ROOT</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#254397" title="(in: scala.collection.mutable.INode[K,V])Unit">readin</a><span class="delimiter">(</span><a href="#254539" title="scala.collection.mutable.INode[K,V]">r</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()Unit" id="254400">advance</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#2325" title="Unit">Unit</a> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a> <a href="../../Int.scala.html#24671" title="(x: Int)Boolean">&gt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="254548">npos</a> = <a href="../../Array.scala.html#24199" title="(i: Int)Int">stackpos</a><span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#254548" title="Int">npos</a> <a href="../../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="../../Array.scala.html#24199" title="(i: Int)Array[scala.collection.mutable.BasicNode]">stack</a><span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../Array.scala.html#24200" title="(i: Int, x: Int)Unit">stackpos</a><span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span> = <a href="#254548" title="Int">npos</a>
      <a href="../../Array.scala.html#24199" title="(i: Int)Array[scala.collection.mutable.BasicNode]">stack</a><a href="../../Array.scala.html#24199" title="(i: Int)scala.collection.mutable.BasicNode" class="delimiter">(</a><a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#254548" title="Int">npos</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Unit" id="254557">sn</a>: <a href="#13064" title="scala.collection.mutable.SNode[K,V]">SNode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
          <a href="#254393" title="(x$1: scala.collection.mutable.KVNode[K,V])Unit">current</a> = <a href="#254557" title="scala.collection.mutable.SNode[K,V]">sn</a>
        <span class="keyword">case</span> <a title="Unit" id="254558">in</a>: <a href="#13277" title="scala.collection.mutable.INode[K,V]">INode</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> =&gt;
          <a href="#254397" title="(in: scala.collection.mutable.INode[K,V])Unit">readin</a><span class="delimiter">(</span><a href="#254558" title="scala.collection.mutable.INode[K,V]">in</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#254387" title="(x$1: Int)Unit">depth</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>
      <a href="#254400" title="()Unit">advance</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#254393" title="(x$1: scala.collection.mutable.KVNode[K,V])Unit">current</a> = <span title="Null(null)" class="keyword">null</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(_lev: Int, _ct: scala.collection.mutable.Ctrie[K,V], _mustInit: Boolean)scala.collection.mutable.CtrieIterator[K,V]" id="254401">newIterator</a><span class="delimiter">(</span><a title="Int" id="254565">_lev</a>: <a href="../../Int.scala.html#495" title="Int">Int</a>, <a title="scala.collection.mutable.Ctrie[K,V]" id="254566">_ct</a>: <a href="#13100" title="scala.collection.mutable.Ctrie[K,V]">Ctrie</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>, <a title="Boolean" id="254567">_mustInit</a>: <a href="../../Boolean.scala.html#2157" title="Boolean">Boolean</a><span class="delimiter">)</span> = <span title="scala.collection.mutable.CtrieIterator[K,V]" class="keyword">new</span> <a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]">CtrieIterator</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="#254565" title="Int">_lev</a>, <a href="#254566" title="scala.collection.mutable.Ctrie[K,V]">_ct</a>, <a href="#254567" title="Boolean">_mustInit</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(it: scala.collection.mutable.CtrieIterator[K,V])Unit" id="254402">dupTo</a><span class="delimiter">(</span><a title="scala.collection.mutable.CtrieIterator[K,V]" id="254570">it</a>: <a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]">CtrieIterator</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254407" title="(x$1: Int)Unit">level</a> = <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254407" title="=&gt; Int">level</a>
    <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254408" title="(x$1: scala.collection.mutable.Ctrie[K,V])Unit">ct</a> = <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254408" title="=&gt; scala.collection.mutable.Ctrie[K,V]">ct</a>
    <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254387" title="(x$1: Int)Unit">depth</a> = <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254387" title="=&gt; Int">depth</a>
    <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254393" title="(x$1: scala.collection.mutable.KVNode[K,V])Unit">current</a> = <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254393" title="=&gt; scala.collection.mutable.KVNode[K,V]">current</a>
    
    // these need a deep copy
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254381" title="=&gt; Array[Array[scala.collection.mutable.BasicNode]]">stack</a>, <span title="Int(0)" class="int">0</span>, <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254381" title="=&gt; Array[Array[scala.collection.mutable.BasicNode]]">stack</a>, <span title="Int(0)" class="int">0</span>, <span title="Int(7)" class="int">7</span><span class="delimiter">)</span>
    <a href="../../Array.scala.html#280" title="object Array">Array</a>.<a href="../../Array.scala.html#35462" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254384" title="=&gt; Array[Int]">stackpos</a>, <span title="Int(0)" class="int">0</span>, <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254384" title="=&gt; Array[Int]">stackpos</a>, <span title="Int(0)" class="int">0</span>, <span title="Int(7)" class="int">7</span><span class="delimiter">)</span>
    
    // this one needs to be evaluated
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254390" title="(x$1: Iterator[(K, V)])Unit">subiter</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[(K, V)]" id="254578">lst</a> = <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a>.<a href="../TraversableOnce.scala.html#25840" title="=&gt; List[(K, V)]">toList</a>
      <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254390" title="(x$1: Iterator[(K, V)])Unit">subiter</a> = <a href="#254578" title="List[(K, V)]">lst</a>.<a href="../LinearSeqLike.scala.html#42832" title="=&gt; Iterator[(K, V)]">iterator</a>
      <a href="#254570" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254390" title="(x$1: Iterator[(K, V)])Unit">subiter</a> = <a href="#254578" title="List[(K, V)]">lst</a>.<a href="../LinearSeqLike.scala.html#42832" title="=&gt; Iterator[(K, V)]">iterator</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  /** Returns a sequence of iterators over subsets of this iterator.
   *  It's used to ease the implementation of splitters for a parallel version of the Ctrie.
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()scala.collection.mutable.Seq[Iterator[(K, V)]]" id="254403">subdivide</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="Seq.scala.html#13514" title="scala.collection.mutable.Seq[Iterator[(K, V)]]">Seq</a><span class="delimiter">[</span>Iterator<span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span> = <span title="scala.collection.mutable.Seq[Iterator[(K, V)]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    // the case where an LNode is being iterated
    <span class="keyword">val</span> <a title="Iterator[(K, V)]" id="254581">it</a> = <a href="#254390" title="=&gt; Iterator[(K, V)]">subiter</a>
    <a href="#254390" title="(x$1: Iterator[(K, V)])Unit">subiter</a> = <span title="Null(null)" class="keyword">null</span>
    <a href="#254400" title="()Unit">advance</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254407" title="(x$1: Int)Unit">level</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <a href="../generic/GenericCompanion.scala.html#23843" title="(elems: Iterator[(K, V)]*)scala.collection.mutable.Seq[Iterator[(K, V)]]">Seq</a><span class="delimiter">(</span><a href="#254581" title="Iterator[(K, V)]">it</a>, <a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="scala.collection.mutable.Seq[Iterator[(K, V)]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254387" title="=&gt; Int">depth</a> <a href="../../Int.scala.html#24636" title="(x: Int)Boolean">==</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254407" title="(x$1: Int)Unit">level</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <a href="../generic/GenericCompanion.scala.html#23843" title="(elems: Iterator[(K, V)]*)scala.collection.mutable.Seq[Iterator[(K, V)]]">Seq</a><span class="delimiter">(</span><a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="254605">d</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#254605" title="Int">d</a> <a href="../../Int.scala.html#24657" title="(x: Int)Boolean">&lt;=</a> <a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span> <a href="#254606" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="Int" id="254611">rem</a> = <a href="../../Array.scala.html#24199" title="(i: Int)Array[scala.collection.mutable.BasicNode]">stack</a><span class="delimiter">(</span><a href="#254605" title="Int">d</a><span class="delimiter">)</span>.<a href="../../Array.scala.html#24198" title="=&gt; Int">length</a> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span> <a href="../../Int.scala.html#24700" title="(x: Int)Int">-</a> <a href="../../Array.scala.html#24199" title="(i: Int)Int">stackpos</a><span class="delimiter">(</span><a href="#254605" title="Int">d</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#254611" title="Int">rem</a> <a href="../../Int.scala.html#24664" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a href="../../Tuple2.scala.html#30293" title="(Array[scala.collection.mutable.BasicNode], Array[scala.collection.mutable.BasicNode])" class="delimiter">(</a><a href="../../Tuple2.scala.html#30016" title="Array[scala.collection.mutable.BasicNode]" id="254625">arr1</a>, <a href="../../Tuple2.scala.html#30018" title="Array[scala.collection.mutable.BasicNode]" id="254626">arr2</a><span class="delimiter">)</span> = <a href="../../Array.scala.html#24199" title="(i: Int)Array[scala.collection.mutable.BasicNode]">stack</a><a href="../../Predef.scala.html#7817" title="(xs: Array[scala.collection.mutable.BasicNode])scala.collection.mutable.ArrayOps[scala.collection.mutable.BasicNode]" class="delimiter">(</a><a href="#254605" title="Int">d</a><span class="delimiter">)</span>.<a href="../IndexedSeqOptimized.scala.html#26681" title="(n: Int)Array[scala.collection.mutable.BasicNode]">drop</a><a href="../../Predef.scala.html#7817" title="(xs: Array[scala.collection.mutable.BasicNode])scala.collection.mutable.ArrayOps[scala.collection.mutable.BasicNode]" class="delimiter">(</a><a href="../../Array.scala.html#24199" title="(i: Int)Int">stackpos</a><span class="delimiter">(</span><a href="#254605" title="Int">d</a><span class="delimiter">)</span> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../IndexedSeqOptimized.scala.html#26684" title="(n: Int)(Array[scala.collection.mutable.BasicNode], Array[scala.collection.mutable.BasicNode])">splitAt</a><a href="../../Tuple2.scala.html#1191" title="(Array[scala.collection.mutable.BasicNode], Array[scala.collection.mutable.BasicNode]) @unchecked" class="delimiter">(</a><a href="#254611" title="Int">rem</a> <a href="../../Int.scala.html#24714" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <a href="../../Array.scala.html#24200" title="(i: Int, x: Array[scala.collection.mutable.BasicNode])Unit">stack</a><span class="delimiter">(</span><a href="#254605" title="Int">d</a><span class="delimiter">)</span> = <a href="#254625" title="Array[scala.collection.mutable.BasicNode]">arr1</a>
        <a href="../../Array.scala.html#24200" title="(i: Int, x: Int)Unit">stackpos</a><span class="delimiter">(</span><a href="#254605" title="Int">d</a><span class="delimiter">)</span> = -<span title="Int(-1)" class="int">1</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.CtrieIterator[K,V]" id="254627">it</a> = <a href="#254401" title="(_lev: Int, _ct: scala.collection.mutable.Ctrie[K,V], _mustInit: Boolean)scala.collection.mutable.CtrieIterator[K,V]">newIterator</a><span class="delimiter">(</span><a href="#254407" title="=&gt; Int">level</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>, <a href="#254408" title="=&gt; scala.collection.mutable.Ctrie[K,V]">ct</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <a href="#254627" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="../../Array.scala.html#24200" title="(i: Int, x: Array[scala.collection.mutable.BasicNode])Unit">stack</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> = <a href="#254626" title="Array[scala.collection.mutable.BasicNode]">arr2</a>
        <a href="#254627" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="../../Array.scala.html#24200" title="(i: Int, x: Int)Unit">stackpos</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> = -<span title="Int(-1)" class="int">1</span>
        <a href="#254627" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254387" title="(x$1: Int)Unit">depth</a> = <span title="Int(0)" class="int">0</span>
        <a href="#254627" title="scala.collection.mutable.CtrieIterator[K,V]">it</a>.<a href="#254400" title="()Unit">advance</a><span class="delimiter">(</span><span class="delimiter">)</span> // &lt;-- fix it
        <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254407" title="(x$1: Int)Unit">level</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span title="Nothing" class="keyword">return</span> <a href="../generic/GenericCompanion.scala.html#23843" title="(elems: Iterator[(K, V)]*)scala.collection.mutable.Seq[Iterator[(K, V)]]">Seq</a><span class="delimiter">(</span><a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]" class="keyword">this</a>, <a href="#254627" title="scala.collection.mutable.CtrieIterator[K,V]">it</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#254605" title="Int">d</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <a href="#13587" title="CtrieIterator.this.type" class="keyword">this</a>.<a href="#254407" title="(x$1: Int)Unit">level</a> <a href="../../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <a href="../generic/GenericCompanion.scala.html#23843" title="(elems: Iterator[(K, V)]*)scala.collection.mutable.Seq[Iterator[(K, V)]]">Seq</a><span class="delimiter">(</span><a href="#13587" title="scala.collection.mutable.CtrieIterator[K,V]" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Unit" id="254404">printDebug</a> <span class="delimiter">{</span>
    <a href="../../Predef.scala.html#7785" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;ctrie iterator&quot;)" class="string">&quot;ctrie iterator&quot;</span><span class="delimiter">)</span>
    <a href="../../Predef.scala.html#7785" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../Predef.scala.html#7820" title="implicit scala.Predef.intArrayOps : (xs: Array[Int])scala.collection.mutable.ArrayOps[Int]">stackpos</a>.<a href="../TraversableOnce.scala.html#25856" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../Predef.scala.html#7785" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;depth: &quot;)" class="string">&quot;depth: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#254387" title="=&gt; Int">depth</a><span class="delimiter">)</span>
    <a href="../../Predef.scala.html#7785" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;curr.: &quot;)" class="string">&quot;curr.: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#254393" title="=&gt; scala.collection.mutable.KVNode[K,V]">current</a><span class="delimiter">)</span>
    <a href="../../Predef.scala.html#7785" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../Predef.scala.html#7817" title="(xs: Array[Array[scala.collection.mutable.BasicNode]])scala.collection.mutable.ArrayOps[Array[scala.collection.mutable.BasicNode]]">stack</a>.<a href="../TraversableOnce.scala.html#25856" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object scala.collection.mutable.RestartException" id="255129">RestartException</a> <a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="keyword">extends</a> util.control.<a href="../../util/control/ControlThrowable.scala.html#20547" title="scala.util.control.ControlThrowable">ControlThrowable</a>


/** Only used for ctrie serialization. */
@SerialVersionUID<span class="delimiter">(</span><span class="long">0L</span> - <span class="long">7237891413820527142L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> case <span class="keyword">object</span> <a href="#255134" title="object scala.collection.mutable.CtrieSerializationEnd" id="255142">CtrieSerializationEnd</a>


<a href="#13732" title="object scala.collection.mutable.CtrieSerializationEnd" class="keyword">private</a><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object scala.collection.mutable.Debug" id="12852">Debug</a> <a href="../../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">import</span> collection._
  
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.util.concurrent.ConcurrentLinkedQueue[AnyRef]" id="255146">logbuffer</a> = <span title="java.util.concurrent.ConcurrentLinkedQueue[AnyRef]" class="keyword">new</span> java.util.concurrent.<span title="java.util.concurrent.ConcurrentLinkedQueue[AnyRef]">ConcurrentLinkedQueue</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="(s: AnyRef)Boolean" id="255147">log</a><span class="delimiter">(</span><a title="AnyRef" id="255276">s</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <a href="#255145" title="=&gt; java.util.concurrent.ConcurrentLinkedQueue[AnyRef]">logbuffer</a>.<span title="(x$1: AnyRef)Boolean">add</span><span class="delimiter">(</span><a href="#255276" title="AnyRef">s</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="()Unit" id="255148">flush</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="AnyRef" id="255298">s</a> &lt;- <a href="../JavaConversions.scala.html#3939" title="object scala.collection.JavaConversions">JavaConversions</a>.<a href="../JavaConversions.scala.html#113430" title="(it: java.util.Iterator[AnyRef])Iterator[AnyRef]">asScalaIterator</a><a href="../Iterator.scala.html#31907" title="(f: AnyRef =&gt; Unit)Unit" class="delimiter">(</a><a href="#255145" title="=&gt; java.util.concurrent.ConcurrentLinkedQueue[AnyRef]">logbuffer</a>.<span title="()java.util.Iterator[AnyRef]">iterator</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Console.scala.html#217" title="object Console">Console</a>.<a href="../../Console.scala.html#30852" title="=&gt; java.io.PrintStream">out</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#255298" title="AnyRef">s</a>.<span title="()String">toString</span><span class="delimiter">)</span>
    <a href="#255145" title="=&gt; java.util.concurrent.ConcurrentLinkedQueue[AnyRef]">logbuffer</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()Unit" id="255149">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#255145" title="=&gt; java.util.concurrent.ConcurrentLinkedQueue[AnyRef]">logbuffer</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>











        </pre>
    </body>
</html>