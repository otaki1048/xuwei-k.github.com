<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/concurrent/Future.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

<span class="keyword">package</span> scala.concurrent



<span class="keyword">import</span> java.util.concurrent.<span class="delimiter">{</span> ConcurrentLinkedQueue, TimeUnit, Callable <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.<span title="object java.util.concurrent.TimeUnit">TimeUnit</span>.<span class="delimiter">{</span> NANOSECONDS =&gt; NANOS, MILLISECONDS â‡’ MILLIS <span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.<span class="delimiter">{</span> Iterable =&gt; JIterable <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.<span class="delimiter">{</span> LinkedList =&gt; JLinkedList <span class="delimiter">}</span>
<span class="keyword">import</span> java.<span class="delimiter">{</span> lang =&gt; jl <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.atomic.<span class="delimiter">{</span> AtomicReferenceFieldUpdater, AtomicInteger, AtomicBoolean <span class="delimiter">}</span>

<span class="keyword">import</span> scala.util.<span class="delimiter">{</span> Timeout, Duration, Try, Success, Failure <span class="delimiter">}</span>
<span class="keyword">import</span> scala.Option

<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.collection.mutable.Stack
<span class="keyword">import</span> scala.collection.mutable.Builder
<span class="keyword">import</span> scala.collection.generic.CanBuildFrom



/** The trait that represents futures.
 *  
 *  Asynchronous computations that yield futures are created with the `future` call:
 *  
 *  {{{
 *  val s = &quot;Hello&quot;
 *  val f: Future[String] = future {
 *    s + &quot; future!&quot;
 *  }
 *  f onSuccess {
 *    case msg =&gt; println(msg)
 *  }
 *  }}}
 *  
 *  @author  Philipp Haller, Heather Miller, Aleksandar Prokopec, Viktor Klang
 *  
 *  @define multipleCallbacks
 *  Multiple callbacks may be registered; there is no guarantee that they will be
 *  executed in a particular order.
 *
 *  @define caughtThrowables
 *  The future may contain a throwable object and this means that the future failed.
 *  Futures obtained through combinators have the same exception as the future they were obtained from.
 *  The following throwable objects are not contained in the future:
 *  - `Error` - errors are not contained within futures
 *  - `InterruptedException` - not contained within futures
 *  - all `scala.util.control.ControlThrowable` except `NonLocalReturnControl` - not contained within futures
 *  
 *  Instead, the future is completed with a ExecutionException with one of the exceptions above
 *  as the cause.
 *  If a future is failed with a `scala.runtime.NonLocalReturnControl`,
 *  it is completed with a value instead from that throwable instead instead.
 *  
 *  @define nonDeterministic
 *  Note: using this method yields nondeterministic dataflow programs.
 *  
 *  @define forComprehensionExamples
 *  Example:
 *  
 *  {{{
 *  val f = future { 5 }
 *  val g = future { 3 }
 *  val h = for {
 *    x: Int &lt;- f // returns Future(5)
 *    y: Int &lt;- g // returns Future(5)
 *  } yield x + y
 *  }}}
 *  
 *  is translated to:
 *  
 *  {{{
 *  f flatMap { (x: Int) =&gt; g map { (y: Int) =&gt; x + y } }
 *  }}}
 */
<span class="keyword">trait</span> <a title="trait Future[+T] extends Object with scala.concurrent.Awaitable[T] with ScalaObject" id="16789">Future</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="16967">T</a><span class="delimiter">]</span> <a href="../ScalaObject.scala.html#1452" title="ScalaObject" class="keyword">extends</a> <a href="Awaitable.scala.html#16618" title="scala.concurrent.Awaitable[T]">Awaitable</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
self =&gt;
  
  /* Callbacks */
  
  /** When this future is completed successfully (i.e. with a value),
   *  apply the provided partial function to the value if the partial function
   *  is defined at that value.
   *  
   *  If the future has already been completed with a value,
   *  this will either be applied immediately or be scheduled asynchronously.
   *  
   *  $multipleCallbacks
   */
  <span class="keyword">def</span> <a title="[U](pf: PartialFunction[T,U])Future.this.type" id="374410">onSuccess</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374412">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[T,U]" id="375184">pf</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[T,U]">PartialFunction</a><span class="delimiter">[</span>T, U<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <a href="#374416" title="(func: scala.util.Try[T] =&gt; Any)Future.this.type">onComplete</a> <a href="#375190" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Unit">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375191">t</a><span class="delimiter">)</span> =&gt; // do nothing
    <span class="keyword">case</span> <span title="Any">Success</span><span class="delimiter">(</span><a title="T" id="375193">v</a><span class="delimiter">)</span> =&gt; <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#375184" title="PartialFunction[T,U]">pf</a> <a href="../PartialFunction.scala.html#26131" title="(x: T)Boolean">isDefinedAt</a> <a href="#375193" title="T">v</a><span class="delimiter">)</span> <a href="../Function1.scala.html#26122" title="(v1: T)U">pf</a><span class="delimiter">(</span><a href="#375193" title="T">v</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Unit" class="delimiter">{</span> /*do nothing*/ <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  /** When this future is completed with a failure (i.e. with a throwable),
   *  apply the provided callback to the throwable.
   *  
   *  $caughtThrowables
   *  
   *  If the future has already been completed with a failure,
   *  this will either be applied immediately or be scheduled asynchronously.
   *  
   *  Will not be called in case that the future is completed with a value.
   *  
   *  $multipleCallbacks
   */
  <span class="keyword">def</span> <a title="[U](callback: PartialFunction[Throwable,U])Future.this.type" id="374413">onFailure</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374415">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Throwable,U]" id="375201">callback</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[Throwable,U]">PartialFunction</a><span class="delimiter">[</span>Throwable, U<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <a href="#374416" title="(func: scala.util.Try[T] =&gt; Any)Future.this.type">onComplete</a> <a href="#375207" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="Any">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375208">t</a><span class="delimiter">)</span> =&gt; <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="ConcurrentPackageObject.scala.html#23510" title="(t: Throwable)Boolean">isFutureThrowable</a><span class="delimiter">(</span><a href="#375208" title="Throwable">t</a><span class="delimiter">)</span> <a href="../Boolean.scala.html#25461" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#375201" title="PartialFunction[Throwable,U]">callback</a>.<a href="../PartialFunction.scala.html#26131" title="(x: Throwable)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#375208" title="Throwable">t</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Function1.scala.html#26122" title="(v1: Throwable)U">callback</a><span class="delimiter">(</span><a href="#375208" title="Throwable">t</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Unit" class="delimiter">{</span> /*do nothing*/ <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="Unit">Success</span><span class="delimiter">(</span><a title="T" id="375216">v</a><span class="delimiter">)</span> =&gt; // do nothing
  <span class="delimiter">}</span>
  
  /** When this future is completed, either through an exception, a timeout, or a value,
   *  apply the provided function.
   *  
   *  If the future has already been completed,
   *  this will either be applied immediately or be scheduled asynchronously.
   *  
   *  $multipleCallbacks
   */
  <span class="keyword">def</span> <a title="[U](func: scala.util.Try[T] =&gt; U)Future.this.type" id="374416">onComplete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374418">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.util.Try[T] =&gt; U" id="375023">func</a>: Try<span class="delimiter">[</span>T<span class="delimiter">]</span> =&gt; U<span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>
  
  
  /* Miscellaneous */
  
  /** Creates a new promise.
   */
  <span class="keyword">def</span> <a title="[S]=&gt; scala.concurrent.Promise[S]" id="374419">newPromise</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374421">S</a><span class="delimiter">]</span>: <a href="Promise.scala.html#16774" title="scala.concurrent.Promise[S]">Promise</a><span class="delimiter">[</span>S<span class="delimiter">]</span>
  
  
  /* Projections */
  
  /** Returns a failed projection of this future.
   *  
   *  The failed projection is a future holding a value of type `Throwable`.
   *  
   *  It is completed with a value which is the throwable of the original future
   *  in case the original future is failed.
   *  
   *  It is failed with a `NoSuchElementException` if the original future is completed successfully.
   *  
   *  Blocking on this future returns a value if the original future is completed with an exception
   *  and throws a corresponding exception if the original future fails.
   */
  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.Future[Throwable]" id="374422">failed</a>: <a href="#16789" title="scala.concurrent.Future[Throwable]">Future</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(v: T)java.util.NoSuchElementException" id="375222">noSuchElem</a><span class="delimiter">(</span><a title="T" id="375224">v</a>: <a href="#16967" title="T">T</a><span class="delimiter">)</span> = 
      <span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#23607" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;Future.failed not completed with a throwable. Instead completed with: &quot;)" class="string">&quot;Future.failed not completed with a throwable. Instead completed with: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#375224" title="T">v</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[Throwable]" id="375223">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[Throwable]" class="delimiter">[</span><span title="Throwable">Throwable</span><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; scala.concurrent.Promise[Throwable])Future.this.type">onComplete</a> <a href="#375230" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375231">t</a><span class="delimiter">)</span> =&gt; <a href="#375223" title="scala.concurrent.Promise[Throwable]">p</a> <a href="Promise.scala.html#374487" title="(v: Throwable)p.type">success</a> <a href="#375231" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="T" id="375234">v</a><span class="delimiter">)</span> =&gt; <a href="#375223" title="scala.concurrent.Promise[Throwable]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375222" title="(v: T)java.util.NoSuchElementException">noSuchElem</a><span class="delimiter">(</span><a href="#375234" title="T">v</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <a href="#375223" title="scala.concurrent.Promise[Throwable]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[Throwable]">future</a>
  <span class="delimiter">}</span>
  
  
  /* Monadic operations */
  
  /** Asynchronously processes the value in the future once the value becomes available.
   *  
   *  Will not be called if the future fails.
   */
  <span class="keyword">def</span> <a title="[U](f: T =&gt; U)Unit" id="374423">foreach</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374425">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; U" id="375236">f</a>: T =&gt; U<span class="delimiter">)</span>: <a href="../Unit.scala.html#2325" title="Unit">Unit</a> = <a href="#374416" title="(func: scala.util.Try[T] =&gt; Any)Future.this.type">onComplete</a> <a href="#375242" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="U">Success</span><span class="delimiter">(</span><a title="T" id="375244">r</a><span class="delimiter">)</span> =&gt; <a href="../Function1.scala.html#26122" title="(v1: T)U">f</a><span class="delimiter">(</span><a href="#375244" title="T">r</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Unit">Failure</span><span class="delimiter">(</span>_<span class="delimiter">)</span>  =&gt; // do nothing
  <span class="delimiter">}</span>
  
  /** Creates a new future by applying a function to the successful result of
   *  this future. If this future is completed with an exception then the new
   *  future will also contain this exception.
   *  
   *  $forComprehensionExample
   */
  <span class="keyword">def</span> <a title="[S](f: T =&gt; S)scala.concurrent.Future[S]" id="374426">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374428">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; S" id="375251">f</a>: T =&gt; S<span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="375254">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#374428" title="S">S</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; scala.concurrent.Promise[S])Future.this.type">onComplete</a> <a href="#375258" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375259">t</a><span class="delimiter">)</span> =&gt; <a href="#375254" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375259" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="T" id="375261">v</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">try</span> <a href="#375254" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374487" title="(v: S)p.type">success</a> <a href="../Function1.scala.html#26122" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#375261" title="T">v</a><span class="delimiter">)</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="p.type" id="375264">t</a> =&gt; <a href="#375254" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[S])p.type">complete</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.util.Try[Nothing]">resolver</a><span class="delimiter">(</span><a href="#375264" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <a href="#375254" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future by applying a function to the successful result of
   *  this future, and returns the result of the function as the new future.
   *  If this future is completed with an exception then the new future will
   *  also contain this exception.
   *  
   *  $forComprehensionExample
   */
  <span class="keyword">def</span> <a title="[S](f: T =&gt; scala.concurrent.Future[S])scala.concurrent.Future[S]" id="374429">flatMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374431">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; scala.concurrent.Future[S]" id="375271">f</a>: T =&gt; Future<span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="375274">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#374431" title="S">S</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; ScalaObject)Future.this.type">onComplete</a> <a href="#375278" title="ScalaObject" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375279">t</a><span class="delimiter">)</span> =&gt; <a href="#375274" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375279" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="ScalaObject">Success</span><span class="delimiter">(</span><a title="T" id="375281">v</a><span class="delimiter">)</span> =&gt; 
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="../Function1.scala.html#26122" title="(v1: T)scala.concurrent.Future[S]">f</a><span class="delimiter">(</span><a href="#375281" title="T">v</a><span class="delimiter">)</span> <a href="#374416" title="(func: scala.util.Try[S] =&gt; scala.concurrent.Promise[S])scala.concurrent.Future[S]">onComplete</a> <a href="#375289" title="p.type" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375290">t</a><span class="delimiter">)</span> =&gt; <a href="#375274" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375290" title="Throwable">t</a>
            <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="S" id="375292">v</a><span class="delimiter">)</span> =&gt; <a href="#375274" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374487" title="(v: S)p.type">success</a> <a href="#375292" title="S">v</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="p.type" id="375295">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#375274" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[S])p.type">complete</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.util.Try[Nothing]">resolver</a><span class="delimiter">(</span><a href="#375295" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <a href="#375274" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future by filtering the value of the current future with a predicate.
   *  
   *  If the current future contains a value which satisfies the predicate, the new future will also hold that value.
   *  Otherwise, the resulting future will fail with a `NoSuchElementException`.
   *  
   *  If the current future fails or times out, the resulting future also fails or times out, respectively.
   *
   *  Example:
   *  {{{
   *  val f = future { 5 }
   *  val g = f filter { _ % 2 == 1 }
   *  val h = f filter { _ % 2 == 0 }
   *  await(0) g // evaluates to 5
   *  await(0) h // throw a NoSuchElementException
   *  }}}
   */
  <span class="keyword">def</span> <a title="(pred: T =&gt; Boolean)scala.concurrent.Future[T]" id="374432">filter</a><span class="delimiter">(</span><a title="T =&gt; Boolean" id="375312">pred</a>: T =&gt; Boolean<span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[T]" id="375314">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[T]" class="delimiter">[</span><a href="#16967" title="T">T</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; scala.concurrent.Promise[T])Future.this.type">onComplete</a> <a href="#375318" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375319">t</a><span class="delimiter">)</span> =&gt; <a href="#375314" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375319" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="T" id="375321">v</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <span title="p.type" class="keyword">if</span> <span class="delimiter">(</span><a href="../Function1.scala.html#26122" title="(v1: T)Boolean">pred</a><span class="delimiter">(</span><a href="#375321" title="T">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#375314" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#374487" title="(v: T)p.type">success</a> <a href="#375321" title="T">v</a>
          <span class="keyword">else</span> <a href="#375314" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#23607" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;Future.filter predicate is not satisfied by: &quot;)" class="string">&quot;Future.filter predicate is not satisfied by: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#375321" title="T">v</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="p.type" id="375326">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#375314" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[T])p.type">complete</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.util.Try[Nothing]">resolver</a><span class="delimiter">(</span><a href="#375326" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <a href="#375314" title="scala.concurrent.Promise[T]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[T]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future by mapping the value of the current future if the given partial function is defined at that value.
   *  
   *  If the current future contains a value for which the partial function is defined, the new future will also hold that value.
   *  Otherwise, the resulting future will fail with a `NoSuchElementException`.
   *
   *  If the current future fails or times out, the resulting future also fails or times out, respectively.
   *
   *  Example:
   *  {{{
   *  val f = future { -5 }
   *  val g = f collect {
   *    case x if x &lt; 0 =&gt; -x
   *  }
   *  val h = f collect {
   *    case x if x &gt; 0 =&gt; x * 2
   *  }
   *  await(0) g // evaluates to 5
   *  await(0) h // throw a NoSuchElementException
   *  }}}
   */
  <span class="keyword">def</span> <a title="[S](pf: PartialFunction[T,S])scala.concurrent.Future[S]" id="374433">collect</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374435">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[T,S]" id="375331">pf</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[T,S]">PartialFunction</a><span class="delimiter">[</span>T, S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[S]">Future</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[S]" id="375334">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[S]" class="delimiter">[</span><a href="#374435" title="S">S</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; scala.concurrent.Promise[S])Future.this.type">onComplete</a> <a href="#375338" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375339">t</a><span class="delimiter">)</span> =&gt; <a href="#375334" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375339" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="T" id="375341">v</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <span title="p.type" class="keyword">if</span> <span class="delimiter">(</span><a href="#375331" title="PartialFunction[T,S]">pf</a>.<a href="../PartialFunction.scala.html#26131" title="(x: T)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#375341" title="T">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#375334" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374487" title="(v: S)p.type">success</a> <a href="../Function1.scala.html#26122" title="(v1: T)S">pf</a><span class="delimiter">(</span><a href="#375341" title="T">v</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#375334" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <span title="(x$1: String)java.util.NoSuchElementException" class="keyword">new</span> <a href="../package.scala.html#23607" title="java.util.NoSuchElementException">NoSuchElementException</a><span class="delimiter">(</span><span title="String(&quot;Future.collect partial function is not defined at: &quot;)" class="string">&quot;Future.collect partial function is not defined at: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#375341" title="T">v</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="p.type" id="375347">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#375334" title="scala.concurrent.Promise[S]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[S])p.type">complete</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.util.Try[Nothing]">resolver</a><span class="delimiter">(</span><a href="#375347" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <a href="#375334" title="scala.concurrent.Promise[S]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[S]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future that will handle any matching throwable that this
   *  future might contain. If there is no match, or if this future contains
   *  a valid result then the new future will contain the same.
   *  
   *  Example:
   *  
   *  {{{
   *  future (6 / 0) recover { case e: ArithmeticException â‡’ 0 } // result: 0
   *  future (6 / 0) recover { case e: NotFoundException   â‡’ 0 } // result: exception
   *  future (6 / 2) recover { case e: ArithmeticException â‡’ 0 } // result: 3
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](pf: PartialFunction[Throwable,U])scala.concurrent.Future[U]" id="374436">recover</a><span class="delimiter">[</span><a title="&gt;: T &lt;: Any" id="374438">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Throwable,U]" id="375352">pf</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[Throwable,U]">PartialFunction</a><span class="delimiter">[</span>Throwable, U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="375355">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#374438" title="U">U</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; scala.concurrent.Promise[U])Future.this.type">onComplete</a> <a href="#375359" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375360">t</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#375352" title="PartialFunction[Throwable,U]">pf</a> <a href="../PartialFunction.scala.html#26131" title="(x: Throwable)Boolean">isDefinedAt</a> <a href="#375360" title="Throwable">t</a> =&gt;
        <span class="keyword">try</span> <span class="delimiter">{</span> <a href="#375355" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374487" title="(v: U)p.type">success</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)U">pf</a><span class="delimiter">(</span><a href="#375360" title="Throwable">t</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="p.type" id="375364">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#375355" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[U])p.type">complete</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.util.Try[Nothing]">resolver</a><span class="delimiter">(</span><a href="#375364" title="Throwable">t</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="p.type" id="375368">otherwise</a> =&gt; <a href="#375355" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[U])p.type">complete</a> <a href="#375368" title="scala.util.Try[T]">otherwise</a>
    <span class="delimiter">}</span>
    
    <a href="#375355" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future that will handle any matching throwable that this
   *  future might contain by assigning it a value of another future.
   *  
   *  If there is no match, or if this future contains
   *  a valid result then the new future will contain the same result.
   *  
   *  Example:
   *  
   *  {{{
   *  val f = future { Int.MaxValue }
   *  future (6 / 0) recoverWith { case e: ArithmeticException =&gt; f } // result: Int.MaxValue
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](pf: PartialFunction[Throwable,scala.concurrent.Future[U]])scala.concurrent.Future[U]" id="374439">recoverWith</a><span class="delimiter">[</span><a title="&gt;: T &lt;: Any" id="374441">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Throwable,scala.concurrent.Future[U]]" id="375370">pf</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[Throwable,scala.concurrent.Future[U]]">PartialFunction</a><span class="delimiter">[</span>Throwable, Future<span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="375373">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#374441" title="U">U</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; scala.concurrent.Promise[U])Future.this.type">onComplete</a> <a href="#375377" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375378">t</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#375370" title="PartialFunction[Throwable,scala.concurrent.Future[U]]">pf</a> <a href="../PartialFunction.scala.html#26131" title="(x: Throwable)Boolean">isDefinedAt</a> <a href="#375378" title="Throwable">t</a> =&gt;
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="#375373" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374486" title="(other: scala.concurrent.Future[U])p.type">completeWith</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.concurrent.Future[U]">pf</a><span class="delimiter">(</span><a href="#375378" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="p.type" id="375384">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#375373" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[U])p.type">complete</a> <a href="../Function1.scala.html#26122" title="(v1: Throwable)scala.util.Try[Nothing]">resolver</a><span class="delimiter">(</span><a href="#375384" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="p.type" id="375388">otherwise</a> =&gt; <a href="#375373" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[U])p.type">complete</a> <a href="#375388" title="scala.util.Try[T]">otherwise</a>
    <span class="delimiter">}</span>
    
    <a href="#375373" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>
  
  /** Zips the values of `this` and `that` future, and creates
   *  a new future holding the tuple of their results.
   *  
   *  If `this` future fails, the resulting future is failed
   *  with the throwable stored in `this`.
   *  Otherwise, if `that` future fails, the resulting future is failed
   *  with the throwable stored in `that`.
   */
  <span class="keyword">def</span> <a title="[U](that: scala.concurrent.Future[U])scala.concurrent.Future[(T, U)]" id="374442">zip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374444">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Future[U]" id="375390">that</a>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[(T, U)]">Future</a><span class="delimiter">[</span><span class="delimiter">(</span>T, U<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[(T, U)]" id="375393">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[(T, U)]" class="delimiter">[</span><a href="../Tuple2.scala.html#1191" title="(T, U)" class="delimiter">(</a>T, U<span class="delimiter">)</span><span class="delimiter">]</span>
    
    <a href="#16789" title="Future.this.type" class="keyword">this</a> <a href="#374416" title="(func: scala.util.Try[T] =&gt; ScalaObject)Future.this.type">onComplete</a> <a href="#375397" title="ScalaObject" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375398">t</a><span class="delimiter">)</span>  =&gt; <a href="#375393" title="scala.concurrent.Promise[(T, U)]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375398" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="that.type">Success</span><span class="delimiter">(</span><a title="T" id="375400">r</a><span class="delimiter">)</span> =&gt; <a href="#375390" title="scala.concurrent.Future[U]">that</a> <a href="#374410" title="(pf: PartialFunction[U,scala.concurrent.Promise[(T, U)]])that.type">onSuccess</a> <a href="#375405" title="p.type" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="p.type" id="375406">r2</a> =&gt; <a href="#375393" title="scala.concurrent.Promise[(T, U)]">p</a> <a href="Promise.scala.html#374487" title="(v: (T, U))p.type">success</a> <span class="delimiter">(</span><a href="../Tuple2.scala.html#30293" title="(_1: T, _2: U)(T, U)" class="delimiter">(</a><a href="#375400" title="T">r</a>, <a href="#375406" title="U">r2</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <a href="#375390" title="scala.concurrent.Future[U]">that</a> <a href="#374413" title="(callback: PartialFunction[Throwable,scala.concurrent.Promise[(T, U)]])that.type">onFailure</a> <a href="#375431" title="p.type" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="p.type" id="375432">f</a> =&gt; <a href="#375393" title="scala.concurrent.Promise[(T, U)]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375432" title="Throwable">f</a>
    <span class="delimiter">}</span>
    
    <a href="#375393" title="scala.concurrent.Promise[(T, U)]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[(T, U)]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future which holds the result of this future if it was completed successfully, or, if not,
   *  the result of the `that` future if `that` is completed successfully.
   *  If both futures are failed, the resulting future holds the throwable object of the first future.
   *  
   *  Using this method will not cause concurrent programs to become nondeterministic.
   *  
   *  Example:
   *  {{{
   *  val f = future { sys.error(&quot;failed&quot;) }
   *  val g = future { 5 }
   *  val h = f orElse g
   *  await(0) h // evaluates to 5
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](that: scala.concurrent.Future[U])scala.concurrent.Future[U]" id="374445">fallbackTo</a><span class="delimiter">[</span><a title="&gt;: T &lt;: Any" id="374447">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Future[U]" id="375434">that</a>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="375437">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#374447" title="U">U</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; ScalaObject)Future.this.type">onComplete</a> <a href="#375441" title="ScalaObject" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="that.type">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375442">t</a><span class="delimiter">)</span> =&gt; <a href="#375434" title="scala.concurrent.Future[U]">that</a> <a href="#374416" title="(func: scala.util.Try[U] =&gt; scala.concurrent.Promise[U])that.type">onComplete</a> <a href="#375447" title="p.type" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="p.type">Failure</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#375437" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374489" title="(t: Throwable)p.type">failure</a> <a href="#375442" title="Throwable">t</a>
        <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="U" id="375449">v</a><span class="delimiter">)</span> =&gt; <a href="#375437" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374487" title="(v: U)p.type">success</a> <a href="#375449" title="U">v</a>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="p.type">Success</span><span class="delimiter">(</span><a title="T" id="375453">v</a><span class="delimiter">)</span> =&gt; <a href="#375437" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374487" title="(v: U)p.type">success</a> <a href="#375453" title="T">v</a>
    <span class="delimiter">}</span>
    
    <a href="#375437" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>
  
  /** Applies the side-effecting function to the result of this future, and returns
   *  a new future with the result of this future.
   *  
   *  This method allows one to enforce that the callbacks are executed in a
   *  specified order.
   *  
   *  Note that if one of the chained `andThen` callbacks throws
   *  an exception, that exception is not propagated to the subsequent `andThen`
   *  callbacks. Instead, the subsequent `andThen` callbacks are given the original
   *  value of this future.
   *  
   *  The following example prints out `5`:
   *  
   *  {{{
   *  val f = future { 5 }
   *  f andThen {
   *    case r =&gt; sys.error(&quot;runtime exception&quot;)
   *  } andThen {
   *    case Failure(t) =&gt; println(t)
   *    case Success(v) =&gt; println(v)
   *  }
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U](pf: PartialFunction[scala.util.Try[T],U])scala.concurrent.Future[T]" id="374448">andThen</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="374450">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[scala.util.Try[T],U]" id="375467">pf</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[scala.util.Try[T],U]">PartialFunction</a><span class="delimiter">[</span>Try<span class="delimiter">[</span>T<span class="delimiter">]</span>, U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[T]" id="375470">p</a> = <a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[T]" class="delimiter">[</span><a href="#16967" title="T">T</a><span class="delimiter">]</span>
    
    <a href="#374416" title="(func: scala.util.Try[T] =&gt; Any)Future.this.type">onComplete</a> <a href="#375474" title="Any" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Any" id="375475">r</a> =&gt;
        <span class="keyword">try</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#375467" title="PartialFunction[scala.util.Try[T],U]">pf</a> <a href="../PartialFunction.scala.html#26131" title="(x: scala.util.Try[T])Boolean">isDefinedAt</a> <a href="#375475" title="scala.util.Try[T]">r</a><span class="delimiter">)</span> <a href="../Function1.scala.html#26122" title="(v1: scala.util.Try[T])U">pf</a><span class="delimiter">(</span><a href="#375475" title="scala.util.Try[T]">r</a><span class="delimiter">)</span>
        <span class="keyword">finally</span> <a href="#375470" title="scala.concurrent.Promise[T]">p</a> <a href="Promise.scala.html#374484" title="(result: scala.util.Try[T])p.type">complete</a> <a href="#375475" title="scala.util.Try[T]">r</a>
    <span class="delimiter">}</span>
    
    <a href="#375470" title="scala.concurrent.Promise[T]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[T]">future</a>
  <span class="delimiter">}</span>
  
  /** Creates a new future which holds the result of either this future or `that` future, depending on
   *  which future was completed first.
   *  
   *  $nonDeterministic
   *  
   *  Example:
   *  {{{
   *  val f = future { sys.error(&quot;failed&quot;) }
   *  val g = future { 5 }
   *  val h = f either g
   *  await(0) h // evaluates to either 5 or throws a runtime exception
   *  }}}
   */
  <span class="keyword">def</span> <a title="[U &gt;: T](that: scala.concurrent.Future[U])scala.concurrent.Future[U]" id="374451">either</a><span class="delimiter">[</span><a title="&gt;: T &lt;: Any" id="374453">U</a> &gt;: T<span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Future[U]" id="375484">that</a>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[U]">Future</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[U]" id="375487">p</a> = <a href="#16789" title="Future.this.type">self</a>.<a href="#374419" title="[S]=&gt; scala.concurrent.Promise[S]">newPromise</a><span title="scala.concurrent.Promise[U]" class="delimiter">[</span><a href="#374453" title="U">U</a><span class="delimiter">]</span>
    
    <span class="keyword">val</span> <a title="PartialFunction[scala.util.Try[U],_$1] forSome { type _$1 }" id="375488">completePromise</a>: <a href="../PartialFunction.scala.html#207" title="PartialFunction[scala.util.Try[U],_$1] forSome { type _$1 }">PartialFunction</a><span class="delimiter">[</span>Try<span class="delimiter">[</span>U<span class="delimiter">]</span>, _<span class="delimiter">]</span> = <a href="#375493" title="Boolean" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Boolean">Failure</span><span class="delimiter">(</span><a title="Throwable" id="375494">t</a><span class="delimiter">)</span> =&gt; <a href="#375487" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374490" title="(t: Throwable)Boolean">tryFailure</a> <a href="#375494" title="Throwable">t</a>
      <span class="keyword">case</span> <span title="Boolean">Success</span><span class="delimiter">(</span><a title="U" id="375496">v</a><span class="delimiter">)</span> =&gt; <a href="#375487" title="scala.concurrent.Promise[U]">p</a> <a href="Promise.scala.html#374488" title="(value: U)Boolean">trySuccess</a> <a href="#375496" title="U">v</a>
    <span class="delimiter">}</span>
    
    <a href="#16789" title="Future.this.type">self</a> <a href="#374416" title="(func: scala.util.Try[T] =&gt; _$1)Future.this.type">onComplete</a> <a href="#375488" title="PartialFunction[scala.util.Try[U],_$1] forSome { type _$1 }">completePromise</a>
    <a href="#375484" title="scala.concurrent.Future[U]">that</a> <a href="#374416" title="(func: scala.util.Try[U] =&gt; _$1)that.type">onComplete</a> <a href="#375488" title="PartialFunction[scala.util.Try[U],_$1] forSome { type _$1 }">completePromise</a>
    
    <a href="#375487" title="scala.concurrent.Promise[U]">p</a>.<a href="Promise.scala.html#374483" title="=&gt; scala.concurrent.Future[U]">future</a>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>



/** TODO some docs
 *  
 *  @define nonDeterministic
 *  Note: using this method yields nondeterministic dataflow programs.
 */
<span class="keyword">object</span> <a title="object scala.concurrent.Future" id="16790">Future</a> <a href="../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">{</a>
  
  // TODO make more modular by encoding all other helper methods within the execution context
  /** TODO some docs
   */
  <span class="keyword">def</span> <a title="[T, Coll[X] &lt;: Traversable[X]](futures: Coll[scala.concurrent.Future[T]])(implicit cbf: scala.collection.generic.CanBuildFrom[Coll[_],T,Coll[T]], implicit ec: scala.concurrent.ExecutionContext)scala.concurrent.Future[Coll[T]]" id="375509">all</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="375512">T</a>, <a title="[X]&gt;: Nothing &lt;: Traversable[X]" id="375513">Coll</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="375527">X</a><span class="delimiter">]</span> &lt;: Traversable<span class="delimiter">[</span>X<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="Coll[scala.concurrent.Future[T]]" id="375524">futures</a>: <a href="#375513" title="Coll[scala.concurrent.Future[T]]">Coll</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.collection.generic.CanBuildFrom[Coll[_],T,Coll[T]]" id="375525">cbf</a>: <a href="../collection/generic/CanBuildFrom.scala.html#11066" title="scala.collection.generic.CanBuildFrom[Coll[_],T,Coll[T]]">CanBuildFrom</a><span class="delimiter">[</span>Coll<span class="delimiter">[</span>_<span class="delimiter">]</span>, T, Coll<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scala.concurrent.ExecutionContext" id="375526">ec</a>: <a href="ExecutionContext.scala.html#16648" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[Coll[T]]">Future</a><span class="delimiter">[</span>Coll<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#375526" title="scala.concurrent.ExecutionContext">ec</a>.<a href="ExecutionContext.scala.html#374163" title="[T, Coll[X] &lt;: Traversable[X]](futures: Coll[scala.concurrent.Future[T]])(implicit cbf: scala.collection.generic.CanBuildFrom[Coll[_],T,Coll[T]])scala.concurrent.Future[Coll[T]]">all</a><span title="(futures: Coll[scala.concurrent.Future[T]])(implicit cbf: scala.collection.generic.CanBuildFrom[Coll[_],T,Coll[T]])scala.concurrent.Future[Coll[T]]" class="delimiter">[</span><a href="#375512" title="T">T</a>, <a href="#375513" title="Coll">Coll</a><span class="delimiter">]</span><a href="#375525" title="scala.collection.generic.CanBuildFrom[Coll[_],T,Coll[T]]" class="delimiter">(</a><a href="#375524" title="Coll[scala.concurrent.Future[T]]">futures</a><span class="delimiter">)</span>
  
  // move this to future companion object
  @inline <span class="keyword">def</span> <a title="[T](body: =&gt; T)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[T]" id="375514">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="375516">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="375549">body</a>: =&gt;T<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="375550">executor</a>: <a href="ExecutionContext.scala.html#16648" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#375550" title="scala.concurrent.ExecutionContext">executor</a>.<a href="ExecutionContext.scala.html#374145" title="(body: =&gt; T)scala.concurrent.Future[T]">future</a><span class="delimiter">(</span><a href="#375549" title="=&gt; T">body</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](futures: Traversable[scala.concurrent.Future[T]])(implicit ec: scala.concurrent.ExecutionContext)scala.concurrent.Future[T]" id="375517">any</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="375519">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[scala.concurrent.Future[T]]" id="375568">futures</a>: <a href="../collection/Traversable.scala.html#5042" title="Traversable[scala.concurrent.Future[T]]">Traversable</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="375569">ec</a>: <a href="ExecutionContext.scala.html#16648" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[T]">Future</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#375569" title="scala.concurrent.ExecutionContext">ec</a>.<a href="ExecutionContext.scala.html#374168" title="(futures: Traversable[scala.concurrent.Future[T]])scala.concurrent.Future[T]">any</a><span class="delimiter">(</span><a href="#375568" title="Traversable[scala.concurrent.Future[T]]">futures</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](futures: Traversable[scala.concurrent.Future[T]])(predicate: T =&gt; Boolean)(implicit ec: scala.concurrent.ExecutionContext)scala.concurrent.Future[Option[T]]" id="375520">find</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="375522">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[scala.concurrent.Future[T]]" id="375578">futures</a>: <a href="../collection/Traversable.scala.html#5042" title="Traversable[scala.concurrent.Future[T]]">Traversable</a><span class="delimiter">[</span>Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="T =&gt; Boolean" id="375579">predicate</a>: T =&gt; Boolean<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="375580">ec</a>: <a href="ExecutionContext.scala.html#16648" title="scala.concurrent.ExecutionContext">ExecutionContext</a><span class="delimiter">)</span>: <a href="#16789" title="scala.concurrent.Future[Option[T]]">Future</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#375580" title="scala.concurrent.ExecutionContext">ec</a>.<a href="ExecutionContext.scala.html#374171" title="(futures: Traversable[scala.concurrent.Future[T]])(predicate: T =&gt; Boolean)scala.concurrent.Future[Option[T]]">find</a><span class="delimiter">(</span><a href="#375578" title="Traversable[scala.concurrent.Future[T]]">futures</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#375579" title="T =&gt; Boolean">predicate</a><span class="delimiter">)</span>
  
<span class="delimiter">}</span>





        </pre>
    </body>
</html>