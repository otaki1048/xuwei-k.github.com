<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/util/MurmurHash3.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.util

<span class="keyword">import</span> java.lang.<span title="object Integer">Integer</span>.<span class="delimiter">{</span> rotateLeft =&gt; rotl <span class="delimiter">}</span>

/**
 * An implementation of Austin Appleby's MurmurHash 3 algorithm
 * (MurmurHash3_x86_32).
 *
 * An algorithm designed to generate well-distributed non-cryptographic
 * hashes. It is designed to hash data in 32 bit chunks (ints).
 *
 * The mix method needs to be called at each step to update the intermediate
 * hash value. For the last chunk to incorporate into the hash mixLast may
 * be used instead, which is slightly faster. Finally finalizeHash needs to
 * be called to compute the final hash value.
 *
 * This is based on the earlier MurmurHash3 code by Rex Kerr, but the
 * MurmurHash3 algorithm was since changed by its creator Austin Appleby
 * to remedy some weaknesses and improve performance. This represents the
 * latest and supposedly final version of the algortihm (revision 136).
 *
 * @see http://code.google.com/p/smhasher
 */
<span class="keyword">class</span> <a title="class MurmurHash3 extends Object with ScalaObject" id="20046">MurmurHash3</a> <a href="../ScalaObject.scala.html#1452" title="ScalaObject" class="delimiter">{</a>
  /** Mix in a block of data into an intermediate hash value. */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(hash: Int, data: Int)Int" id="47873">mix</a><span class="delimiter">(</span><a title="Int" id="408544">hash</a>: <a href="../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="408545">data</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408547">h</a> = <a href="#47874" title="(hash: Int, data: Int)Int">mixLast</a><span class="delimiter">(</span><a href="#408544" title="Int">hash</a>, <a href="#408545" title="Int">data</a><span class="delimiter">)</span>
    <a href="#408547" title="Int">h</a> = <span title="(x$1: Int, x$2: Int)Int">rotl</span><span class="delimiter">(</span><a href="#408547" title="Int">h</a>, <span title="Int(13)" class="int">13</span><span class="delimiter">)</span>
    <a href="#408547" title="Int">h</a> <a href="../Int.scala.html#24707" title="(x: Int)Int">*</a> <span title="Int(5)" class="int">5</span> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(-430675100)" class="int">0xe6546b64</span>
  <span class="delimiter">}</span>

  /** May optionally be used as the last mixing step. Is a little bit faster than mix,
   *  as it does no further mixing of the resulting hash. For the last element this is not
   *  necessary as the hash is thoroughly mixed during finalization anyway. */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(hash: Int, data: Int)Int" id="47874">mixLast</a><span class="delimiter">(</span><a title="Int" id="408548">hash</a>: <a href="../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="408549">data</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408560">k</a> = <a href="#408549" title="Int">data</a>

    <a href="#408560" title="Int">k</a> <a href="../Int.scala.html#24707" title="(x: Int)Int">*=</a> <span title="Int(-862048943)" class="int">0xcc9e2d51</span>
    <a href="#408560" title="Int">k</a> = <span title="(x$1: Int, x$2: Int)Int">rotl</span><span class="delimiter">(</span><a href="#408560" title="Int">k</a>, <span title="Int(15)" class="int">15</span><span class="delimiter">)</span>
    <a href="#408560" title="Int">k</a> <a href="../Int.scala.html#24707" title="(x: Int)Int">*=</a> <span title="Int(461845907)" class="int">0x1b873593</span>

    <a href="#408548" title="Int">hash</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^</a> <a href="#408560" title="Int">k</a>
  <span class="delimiter">}</span>

  /** Finalize a hash to incorporate the length and make sure all bits avalanche. */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(hash: Int, length: Int)Int" id="47875">finalizeHash</a><span class="delimiter">(</span><a title="Int" id="408577">hash</a>: <a href="../Int.scala.html#495" title="Int">Int</a>, <a title="Int" id="408578">length</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <a href="#47876" title="(hash: Int)Int">avalanche</a><span class="delimiter">(</span><a href="#408577" title="Int">hash</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^</a> <a href="#408578" title="Int">length</a><span class="delimiter">)</span>

  /** Force all bits of the hash to avalanche. Used for finalizing the hash. */
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(hash: Int)Int" id="47876">avalanche</a><span class="delimiter">(</span><a title="Int" id="408580">hash</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408586">h</a> = <a href="#408580" title="Int">hash</a>

    <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <span title="Int(16)" class="int">16</span>
    <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24707" title="(x: Int)Int">*=</a> <span title="Int(-2048144789)" class="int">0x85ebca6b</span>
    <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <span title="Int(13)" class="int">13</span>
    <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24707" title="(x: Int)Int">*=</a> <span title="Int(-1028477387)" class="int">0xc2b2ae35</span>
    <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <a href="#408586" title="Int">h</a> <a href="../Int.scala.html#24629" title="(x: Int)Int">&gt;&gt;&gt;</a> <span title="Int(16)" class="int">16</span>

    <a href="#408586" title="Int">h</a>
  <span class="delimiter">}</span>

  /** Compute the hash of a product */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(x: Product, seed: Int)Int" id="47877">productHash</a><span class="delimiter">(</span><a title="Product" id="398185">x</a>: <a href="../Product.scala.html#291" title="Product">Product</a>, <a title="Int" id="398186">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="408629">arr</a> = <a href="#398185" title="Product">x</a>.<a href="../Product.scala.html#27676" title="=&gt; Int">productArity</a>
    // Case objects have the hashCode inlined directly into the
    // synthetic hashCode method, but this method should still give
    // a correct result if passed a case object.
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#408629" title="Int">arr</a> <a href="../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#398185" title="Product">x</a>.<a href="../Product.scala.html#27678" title="=&gt; String">productPrefix</a>.<span title="()Int">hashCode</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="408635">h</a> = <a href="#398186" title="Int">seed</a>
      <span class="keyword">var</span> <a title="Int" id="408636">i</a> = <span title="Int(0)" class="int">0</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#408636" title="Int">i</a> <a href="../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#408629" title="Int">arr</a><span class="delimiter">)</span> <a href="#408637" title="()Unit" class="delimiter">{</a>
        <a href="#408635" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408635" title="Int">h</a>, <a href="#398185" title="Product">x</a>.<a href="../Product.scala.html#27675" title="(n: Int)Any">productElement</a><span class="delimiter">(</span><a href="#408636" title="Int">i</a><span class="delimiter">)</span>.<span title="()Int">##</span><span class="delimiter">)</span>
        <a href="#408636" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>
      <a href="#47875" title="(hash: Int, length: Int)Int">finalizeHash</a><span class="delimiter">(</span><a href="#408635" title="Int">h</a>, <a href="#408629" title="Int">arr</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Compute the hash of a string */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(str: String, seed: Int)Int" id="47878">stringHash</a><span class="delimiter">(</span><a title="String" id="408648">str</a>: <span title="String">String</span>, <a title="Int" id="408649">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408651">h</a> = <a href="#408649" title="Int">seed</a>
    <span class="keyword">var</span> <a title="Int" id="408652">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#408652" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span> <a href="../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#408648" title="String">str</a>.<span title="()Int">length</span><span class="delimiter">)</span> <a href="#408653" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="Int" id="408662">data</a> = <span class="delimiter">(</span><a href="#408648" title="String">str</a>.<span title="(x$1: Int)Char">charAt</span><span class="delimiter">(</span><a href="#408652" title="Int">i</a><span class="delimiter">)</span> <a href="../Char.scala.html#24779" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(16)" class="int">16</span><span class="delimiter">)</span> <a href="../Int.scala.html#24692" title="(x: Char)Int">+</a> <a href="#408648" title="String">str</a>.<span title="(x$1: Int)Char">charAt</span><span class="delimiter">(</span><a href="#408652" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <a href="#408651" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408651" title="Int">h</a>, <a href="#408662" title="Int">data</a><span class="delimiter">)</span>
      <a href="#408652" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(2)" class="int">2</span>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#408652" title="Int">i</a> <a href="../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#408648" title="String">str</a>.<span title="()Int">length</span><span class="delimiter">)</span> <a href="#408651" title="Int">h</a> = <a href="#47874" title="(hash: Int, data: Int)Int">mixLast</a><span class="delimiter">(</span><a href="#408651" title="Int">h</a>, <a href="#408648" title="String">str</a>.<span title="(x$1: Int)Char">charAt</span><a href="../Char.scala.html#24771" title="=&gt; Int" class="delimiter">(</a><a href="#408652" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#47875" title="(hash: Int, length: Int)Int">finalizeHash</a><span class="delimiter">(</span><a href="#408651" title="Int">h</a>, <a href="#408648" title="String">str</a>.<span title="()Int">length</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Compute a hash that is symmetric in its arguments - that is a hash
   *  where the order of appearance of elements does not matter.
   *  This is useful for hashing sets, for example.
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(xs: TraversableOnce[Any], seed: Int)Int" id="47879">unorderedHash</a><span class="delimiter">(</span><a title="TraversableOnce[Any]" id="408685">xs</a>: <a href="../collection/TraversableOnce.scala.html#5006" title="TraversableOnce[Any]">TraversableOnce</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="Int" id="408686">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408688">a</a>, <a title="Int" id="408689">b</a>, <a title="Int" id="408690">n</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">var</span> <a title="Int" id="408691">c</a> = <span title="Int(1)" class="int">1</span>
    <a href="#408685" title="TraversableOnce[Any]">xs</a> <a href="../collection/TraversableOnce.scala.html#25754" title="(f: Any =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Any" id="408699">x</a> =&gt;
      <span class="keyword">val</span> <a title="Int" id="408700">h</a> = <a href="#408699" title="Any">x</a>.<span title="()Int">##</span>
      <a href="#408688" title="Int">a</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <a href="#408700" title="Int">h</a>
      <a href="#408689" title="Int">b</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <a href="#408700" title="Int">h</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#408700" title="Int">h</a> <a href="../Int.scala.html#24643" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#408691" title="Int">c</a> <a href="../Int.scala.html#24707" title="(x: Int)Int">*=</a> <a href="#408700" title="Int">h</a>
      <a href="#408690" title="Int">n</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <span class="keyword">var</span> <a title="Int" id="408692">h</a> = <a href="#408686" title="Int">seed</a>
    <a href="#408692" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408692" title="Int">h</a>, <a href="#408688" title="Int">a</a><span class="delimiter">)</span>
    <a href="#408692" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408692" title="Int">h</a>, <a href="#408689" title="Int">b</a><span class="delimiter">)</span>
    <a href="#408692" title="Int">h</a> = <a href="#47874" title="(hash: Int, data: Int)Int">mixLast</a><span class="delimiter">(</span><a href="#408692" title="Int">h</a>, <a href="#408691" title="Int">c</a><span class="delimiter">)</span>
    <a href="#47875" title="(hash: Int, length: Int)Int">finalizeHash</a><span class="delimiter">(</span><a href="#408692" title="Int">h</a>, <a href="#408690" title="Int">n</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  /** Compute a hash that depends on the order of its arguments.
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(xs: TraversableOnce[Any], seed: Int)Int" id="47880">orderedHash</a><span class="delimiter">(</span><a title="TraversableOnce[Any]" id="408730">xs</a>: <a href="../collection/TraversableOnce.scala.html#5006" title="TraversableOnce[Any]">TraversableOnce</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="Int" id="408731">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408733">n</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">var</span> <a title="Int" id="408734">h</a> = <a href="#408731" title="Int">seed</a>
    <a href="#408730" title="TraversableOnce[Any]">xs</a> <a href="../collection/TraversableOnce.scala.html#25754" title="(f: Any =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Any" id="408741">x</a> =&gt;
      <a href="#408734" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408734" title="Int">h</a>, <a href="#408741" title="Any">x</a>.<span title="()Int">##</span><span class="delimiter">)</span>
      <a href="#408733" title="Int">n</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <a href="#47875" title="(hash: Int, length: Int)Int">finalizeHash</a><span class="delimiter">(</span><a href="#408734" title="Int">h</a>, <a href="#408733" title="Int">n</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Compute the hash of an array.
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](a: Array[T], seed: Int)Int" id="47881">arrayHash</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="47883">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Array[T]" id="408749">a</a>: <a href="../Array.scala.html#279" title="Array[T]">Array</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Int" id="408750">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408761">h</a> = <a href="#408750" title="Int">seed</a>
    <span class="keyword">var</span> <a title="Int" id="408762">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#408762" title="Int">i</a> <a href="../Int.scala.html#24650" title="(x: Int)Boolean">&lt;</a> <a href="#408749" title="Array[T]">a</a>.<a href="../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#408763" title="()Unit" class="delimiter">{</a>
      <a href="#408761" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408761" title="Int">h</a>, <a href="../Array.scala.html#24199" title="(i: Int)T">a</a><span class="delimiter">(</span><a href="#408762" title="Int">i</a><span class="delimiter">)</span>.<span title="()Int">##</span><span class="delimiter">)</span>
      <a href="#408762" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <a href="#47875" title="(hash: Int, length: Int)Int">finalizeHash</a><span class="delimiter">(</span><a href="#408761" title="Int">h</a>, <a href="#408749" title="Array[T]">a</a>.<a href="../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Compute the hash of a byte array. Faster than arrayHash, because
   *  it hashes 4 bytes at once.
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(data: Array[Byte], seed: Int)Int" id="47884">bytesHash</a><span class="delimiter">(</span><a title="Array[Byte]" id="408774">data</a>: <a href="../Array.scala.html#279" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Int" id="408775">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="408777">len</a> = <a href="#408774" title="Array[Byte]">data</a>.<a href="../Array.scala.html#24198" title="=&gt; Int">length</a>
    <span class="keyword">var</span> <a title="Int" id="408778">h</a> = <a href="#408775" title="Int">seed</a>

    // Body
    <span class="keyword">var</span> <a title="Int" id="408779">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#408777" title="Int">len</a> <a href="../Int.scala.html#24671" title="(x: Int)Boolean">&gt;=</a> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> <a href="#408781" title="()Unit" class="delimiter">{</a>
      <span class="keyword">var</span> <a title="Int" id="408786">k</a> = <a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span>
      <a href="#408786" title="Int">k</a> <a href="../Int.scala.html#24678" title="(x: Int)Int">|=</a> <span class="delimiter">(</span><a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <a href="../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(8)" class="int">8</span>
      <a href="#408786" title="Int">k</a> <a href="../Int.scala.html#24678" title="(x: Int)Int">|=</a> <span class="delimiter">(</span><a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <a href="../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(16)" class="int">16</span>
      <a href="#408786" title="Int">k</a> <a href="../Int.scala.html#24678" title="(x: Int)Int">|=</a> <span class="delimiter">(</span><a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <a href="../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(24)" class="int">24</span>

      <a href="#408778" title="Int">h</a> = <a href="#47873" title="(hash: Int, data: Int)Int">mix</a><span class="delimiter">(</span><a href="#408778" title="Int">h</a>, <a href="#408786" title="Int">k</a><span class="delimiter">)</span>

      <a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+=</a> <span title="Int(4)" class="int">4</span>
      <a href="#408777" title="Int">len</a> <a href="../Int.scala.html#24700" title="(x: Int)Int">-=</a> <span title="Int(4)" class="int">4</span>
    <span class="delimiter">}</span>

    // Tail
    <span class="keyword">var</span> <a title="Int" id="408780">k</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#408777" title="Int">len</a> <a href="../Int.scala.html#24636" title="(x: Int)Boolean">==</a> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <a href="#408780" title="Int">k</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <span class="delimiter">(</span><a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <a href="../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(16)" class="int">16</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#408777" title="Int">len</a> <a href="../Int.scala.html#24671" title="(x: Int)Boolean">&gt;=</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="#408780" title="Int">k</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <span class="delimiter">(</span><a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <a href="../Int.scala.html#24627" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(8)" class="int">8</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#408777" title="Int">len</a> <a href="../Int.scala.html#24671" title="(x: Int)Boolean">&gt;=</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#408780" title="Int">k</a> <a href="../Int.scala.html#24688" title="(x: Int)Int">^=</a> <span class="delimiter">(</span><a href="../Array.scala.html#24199" title="(i: Int)Byte">data</a><span class="delimiter">(</span><a href="#408779" title="Int">i</a> <a href="../Int.scala.html#24693" title="(x: Int)Int">+</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../Byte.scala.html#24386" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span>
      <a href="#408778" title="Int">h</a> = <a href="#47874" title="(hash: Int, data: Int)Int">mixLast</a><span class="delimiter">(</span><a href="#408778" title="Int">h</a>, <a href="#408780" title="Int">k</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    // Finalization
    <a href="#47875" title="(hash: Int, length: Int)Int">finalizeHash</a><span class="delimiter">(</span><a href="#408778" title="Int">h</a>, <a href="#408774" title="Array[Byte]">data</a>.<a href="../Array.scala.html#24198" title="=&gt; Int">length</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

/**
 * An instance of MurmurHash3 with predefined seeds for various
 * classes.  Used by all the scala collections and case classes.
 */
<span class="keyword">object</span> <a title="object scala.util.MurmurHash3" id="20047">MurmurHash3</a> <a href="../ScalaObject.scala.html#1452" title="ScalaObject" class="keyword">extends</a> <a href="#20046" title="scala.util.MurmurHash3">MurmurHash3</a> <span class="delimiter">{</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(1007110753)" id="47886">arraySeed</a>       = <span title="Int(1007110753)" class="int">0x3c074a61</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(-137723950)" id="47888">stringSeed</a>      = <span title="Int(-137723950)" class="int">0xf7ca7fd2</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(-889275714)" id="47890">productSeed</a>     = <span title="Int(-889275714)" class="int">0xcafebabe</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(-1248659538)" id="47892">symmetricSeed</a>   = <span title="Int(-1248659538)" class="int">0xb592f7ae</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(-415593707)" id="47894">traversableSeed</a> = <span title="Int(-415593707)" class="int">0xe73a8b15</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int" id="47896">seqSeed</a>         = <span title="String(&quot;Seq&quot;)" class="string">&quot;Seq&quot;</span>.<span title="()Int">hashCode</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int" id="47898">mapSeed</a>         = <span title="String(&quot;Map&quot;)" class="string">&quot;Map&quot;</span>.<span title="()Int">hashCode</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int" id="47900">setSeed</a>         = <span title="String(&quot;Set&quot;)" class="string">&quot;Set&quot;</span>.<span title="()Int">hashCode</span>

  <span class="keyword">def</span> <a title="[T](a: Array[T])Int" id="47902">arrayHash</a><span class="delimiter">[</span>@specialized <a title="&gt;: Nothing &lt;: Any" id="47904">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Array[T]" id="408928">a</a>: <a href="../Array.scala.html#279" title="Array[T]">Array</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>  = <a href="#47881" title="(a: Array[T], seed: Int)Int">arrayHash</a><span class="delimiter">(</span><a href="#408928" title="Array[T]">a</a>, <span title="Int(1007110753)">arraySeed</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(data: Array[Byte])Int" id="47905">bytesHash</a><span class="delimiter">(</span><a title="Array[Byte]" id="408955">data</a>: <a href="../Array.scala.html#279" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>            = <a href="#47884" title="(data: Array[Byte], seed: Int)Int">bytesHash</a><span class="delimiter">(</span><a href="#408955" title="Array[Byte]">data</a>, <span title="Int(1007110753)">arraySeed</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(xs: TraversableOnce[Any])Int" id="47906">orderedHash</a><span class="delimiter">(</span><a title="TraversableOnce[Any]" id="408961">xs</a>: <a href="../collection/TraversableOnce.scala.html#5006" title="TraversableOnce[Any]">TraversableOnce</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>   = <a href="#47880" title="(xs: TraversableOnce[Any], seed: Int)Int">orderedHash</a><span class="delimiter">(</span><a href="#408961" title="TraversableOnce[Any]">xs</a>, <span title="Int(-1248659538)">symmetricSeed</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Product)Int" id="47907">productHash</a><span class="delimiter">(</span><a title="Product" id="398183">x</a>: <a href="../Product.scala.html#291" title="Product">Product</a><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>                 = <a href="#47877" title="(x: Product, seed: Int)Int">productHash</a><span class="delimiter">(</span><a href="#398183" title="Product">x</a>, <span title="Int(-889275714)">productSeed</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: String)Int" id="47908">stringHash</a><span class="delimiter">(</span><a title="String" id="409036">x</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>                   = <a href="#47878" title="(str: String, seed: Int)Int">stringHash</a><span class="delimiter">(</span><a href="#409036" title="String">x</a>, <span title="Int(-137723950)">stringSeed</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(xs: TraversableOnce[Any])Int" id="47909">unorderedHash</a><span class="delimiter">(</span><a title="TraversableOnce[Any]" id="409042">xs</a>: <a href="../collection/TraversableOnce.scala.html#5006" title="TraversableOnce[Any]">TraversableOnce</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <a href="#47879" title="(xs: TraversableOnce[Any], seed: Int)Int">unorderedHash</a><span class="delimiter">(</span><a href="#409042" title="TraversableOnce[Any]">xs</a>, <span title="Int(-415593707)">traversableSeed</span><span class="delimiter">)</span>

  /** To offer some potential for optimization.
   */
  <span class="keyword">def</span> <a title="(xs: Seq[_])Int" id="47910">seqHash</a><span class="delimiter">(</span><a title="Seq[_]" id="94045">xs</a>: collection.<a href="../collection/Seq.scala.html#4994" title="Seq[_]">Seq</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>    = <a href="#47880" title="(xs: TraversableOnce[Any], seed: Int)Int">orderedHash</a><span class="delimiter">(</span><a href="#94045" title="Seq[_]">xs</a>, <a href="#47896" title="=&gt; Int">seqSeed</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(xs: scala.collection.Map[_, _])Int" id="47911">mapHash</a><span class="delimiter">(</span><a title="scala.collection.Map[_, _]" id="47919">xs</a>: collection.<a href="../collection/Map.scala.html#4022" title="scala.collection.Map[_, _]">Map</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> = <a href="#47879" title="(xs: TraversableOnce[Any], seed: Int)Int">unorderedHash</a><span class="delimiter">(</span><a href="#47919" title="scala.collection.Map[_, _]">xs</a>, <a href="#47898" title="=&gt; Int">mapSeed</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(xs: scala.collection.Set[_])Int" id="47912">setHash</a><span class="delimiter">(</span><a title="scala.collection.Set[_]" id="86478">xs</a>: collection.<a href="../collection/Set.scala.html#5057" title="scala.collection.Set[_]">Set</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a>    = <a href="#47879" title="(xs: TraversableOnce[Any], seed: Int)Int">unorderedHash</a><span class="delimiter">(</span><a href="#86478" title="scala.collection.Set[_]">xs</a>, <a href="#47900" title="=&gt; Int">setSeed</a><span class="delimiter">)</span>

  /** All this trouble and foreach still appears faster.
   *  Leaving in place in case someone would like to investigate further.
   */
  /**
  def linearSeqHash(xs: collection.LinearSeq[_], seed: Int): Int = {
    var n = 0
    var h = seed
    var elems = xs
    while (elems.nonEmpty) {
      h = mix(h, elems.head.##)
      n += 1
      elems = elems.tail
    }
    finalizeHash(h, n)
  }

  def indexedSeqHash(xs: collection.IndexedSeq[_], seed: Int): Int = {
    var n = 0
    var h = seed
    val len = xs.length
    while (n &lt; len) {
      h = mix(h, xs(n).##)
      n += 1
    }
    finalizeHash(h, n)
  }
  */

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use unorderedHash&quot;</span>, <span class="string">&quot;2.10.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](xs: scala.collection.GenTraversableOnce[T], seed: Int)Int" id="47913">symmetricHash</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="409329">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.collection.GenTraversableOnce[T]" id="409324">xs</a>: collection.<a href="../collection/GenTraversableOnce.scala.html#4409" title="scala.collection.GenTraversableOnce[T]">GenTraversableOnce</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Int" id="409327">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span title="Int(-1248659538)">symmetricSeed</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> =
    <a href="#47879" title="(xs: TraversableOnce[Any], seed: Int)Int">unorderedHash</a><span class="delimiter">(</span><a href="#409324" title="scala.collection.GenTraversableOnce[T]">xs</a>.<a href="../collection/GenTraversableOnce.scala.html#25656" title="=&gt; scala.collection.TraversableOnce[T]">seq</a>, <a href="#409327" title="Int">seed</a><span class="delimiter">)</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use orderedHash&quot;</span>, <span class="string">&quot;2.10.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](xs: scala.collection.GenTraversableOnce[T], seed: Int)Int" id="47916">traversableHash</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="409405">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.collection.GenTraversableOnce[T]" id="409400">xs</a>: collection.<a href="../collection/GenTraversableOnce.scala.html#4409" title="scala.collection.GenTraversableOnce[T]">GenTraversableOnce</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Int" id="409403">seed</a>: <a href="../Int.scala.html#495" title="Int">Int</a> = <span title="Int(-415593707)">traversableSeed</span><span class="delimiter">)</span>: <a href="../Int.scala.html#495" title="Int">Int</a> =
    <a href="#47880" title="(xs: TraversableOnce[Any], seed: Int)Int">orderedHash</a><span class="delimiter">(</span><a href="#409400" title="scala.collection.GenTraversableOnce[T]">xs</a>.<a href="../collection/GenTraversableOnce.scala.html#25656" title="=&gt; scala.collection.TraversableOnce[T]">seq</a>, <a href="#409403" title="Int">seed</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>