<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/actors/Actor.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2005-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>


<span class="keyword">package</span> scala.actors

<span class="keyword">import</span> scala.util.control.ControlThrowable
<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Timer, TimerTask<span class="delimiter">}</span>

<span class="comment">/**
 * Provides functions for the definition of
 * actors, as well as actor operations, such as
 * &lt;code&gt;receive&lt;/code&gt;, &lt;code&gt;react&lt;/code&gt;, &lt;code&gt;reply&lt;/code&gt;,
 * etc.
 *
 * @author Philipp Haller
 */</span>
<span class="keyword">object</span> <a title="object scala.actors.Actor" id="74092">Actor</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> <a href="Combinators.scala.html#10886" title="scala.actors.Combinators">Combinators</a> <span class="delimiter">{</span>

  <span class="comment">/** State of an actor.
   *  &lt;ul&gt;
   *    &lt;li&gt;&lt;b&gt;New&lt;/b&gt; - 
   *      Not yet started&lt;/li&gt;
   *    &lt;li&gt;&lt;b&gt;Runnable&lt;/b&gt; - 
   *      Executing&lt;/li&gt;
   *    &lt;li&gt;&lt;b&gt;Suspended&lt;/b&gt; - 
   *      Suspended, waiting in a `react`&lt;/li&gt;
   *    &lt;li&gt;&lt;b&gt;TimedSuspended&lt;/b&gt; - 
   *      Suspended, waiting in a `reactWithin` &lt;/li&gt;
   *    &lt;li&gt;&lt;b&gt;Blocked&lt;/b&gt; - 
   *      Blocked waiting in a `receive` &lt;/li&gt;
   *    &lt;li&gt;&lt;b&gt;TimedBlocked&lt;/b&gt; - 
   *      Blocked waiting in a `receiveWithin` &lt;/li&gt;
   *    &lt;li&gt;&lt;b&gt;Terminated&lt;/b&gt; - 
   *      Actor has terminated &lt;/li&gt;
   *  &lt;/ul&gt;
   */</span>
  <span class="keyword">object</span> <a title="object scala.actors.Actor.State" id="73379">State</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> <a href="../Enumeration.scala.html#952" title="Enumeration">Enumeration</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.actors.Actor.State.Value" id="73612">New</a>,
        <a title="scala.actors.Actor.State.Value" id="73614">Runnable</a>,
        <a title="scala.actors.Actor.State.Value" id="73616">Suspended</a>,
        <a title="scala.actors.Actor.State.Value" id="73618">TimedSuspended</a>,
        <a title="scala.actors.Actor.State.Value" id="73620">Blocked</a>,
        <a title="scala.actors.Actor.State.Value" id="73622">TimedBlocked</a>,
        <a title="scala.actors.Actor.State.Value" id="73624">Terminated</a> = <a href="../Enumeration.scala.html#50009" title="=&gt; scala.actors.Actor.State.Value">Value</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">val</span> <a title="java.lang.ThreadLocal[scala.actors.ReplyReactor]" id="73381">tl</a> = <span title="java.lang.ThreadLocal[scala.actors.ReplyReactor]" class="keyword">new</span> <span title="java.lang.ThreadLocal[scala.actors.ReplyReactor]">ThreadLocal</span><span class="delimiter">[</span>ReplyReactor<span class="delimiter">]</span>

  <span class="comment">// timer thread runs as daemon</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">val</span> <a title="java.util.Timer" id="73383">timer</a> = <span title="(x$1: Boolean)java.util.Timer" class="keyword">new</span> <span title="java.util.Timer">Timer</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.actors.SuspendActorControl" id="73385">suspendException</a> = <span title="scala.actors.SuspendActorControl" class="keyword">new</span> <a href="#10913" title="scala.actors.SuspendActorControl">SuspendActorControl</a>

  <span class="comment">/**
   * Returns the currently executing actor. Should be used instead
   * of &lt;code&gt;this&lt;/code&gt; in all blocks of code executed by
   * actors.
   *
   * @return returns the currently executing actor.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.actors.Actor" id="73387">self</a>: <a href="#11216" title="scala.actors.Actor">Actor</a> = <a href="#73388" title="(sched: scala.actors.IScheduler)scala.actors.Actor">self</a><span class="delimiter">(</span><a href="Scheduler.scala.html#11064" title="object scala.actors.Scheduler">Scheduler</a><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(sched: scala.actors.IScheduler)scala.actors.Actor" id="73388">self</a><span class="delimiter">(</span><a title="scala.actors.IScheduler" id="73666">sched</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a><span class="delimiter">)</span>: <a href="#11216" title="scala.actors.Actor">Actor</a> =
    <a href="#73390" title="(sched: scala.actors.IScheduler)scala.actors.ReplyReactor">rawSelf</a><span class="delimiter">(</span><a href="#73666" title="scala.actors.IScheduler">sched</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.actors.Actor" class="delimiter">[</span><a href="#11216" title="scala.actors.Actor">Actor</a><span class="delimiter">]</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; scala.actors.ReplyReactor" id="73389">rawSelf</a>: <a href="ReplyReactor.scala.html#10982" title="scala.actors.ReplyReactor">ReplyReactor</a> =
    <a href="#73390" title="(sched: scala.actors.IScheduler)scala.actors.ReplyReactor">rawSelf</a><span class="delimiter">(</span><a href="Scheduler.scala.html#11064" title="object scala.actors.Scheduler">Scheduler</a><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(sched: scala.actors.IScheduler)scala.actors.ReplyReactor" id="73390">rawSelf</a><span class="delimiter">(</span><a title="scala.actors.IScheduler" id="73706">sched</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a><span class="delimiter">)</span>: <a href="ReplyReactor.scala.html#10982" title="scala.actors.ReplyReactor">ReplyReactor</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.actors.ReplyReactor" id="73714">s</a> = <a href="#73381" title="=&gt; java.lang.ThreadLocal[scala.actors.ReplyReactor]">tl</a>.<span title="()scala.actors.ReplyReactor">get</span>
    <span title="scala.actors.ReplyReactor" class="keyword">if</span> <span class="delimiter">(</span><a href="#73714" title="scala.actors.ReplyReactor">s</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.actors.ActorProxy" id="73715">r</a> = <span title="scala.actors.ActorProxy" class="keyword">new</span> <a href="ActorProxy.scala.html#10922" title="scala.actors.ActorProxy">ActorProxy</a><span class="delimiter">(</span><span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>, <a href="#73706" title="scala.actors.IScheduler">sched</a><span class="delimiter">)</span>
      <a href="#73381" title="=&gt; java.lang.ThreadLocal[scala.actors.ReplyReactor]">tl</a>.<span title="(x$1: scala.actors.ReplyReactor)Unit">set</span><span class="delimiter">(</span><a href="#73715" title="scala.actors.ActorProxy">r</a><span class="delimiter">)</span>
      <a href="#73715" title="scala.actors.ActorProxy">r</a>
    <span class="delimiter">}</span> <span class="keyword">else</span>
      <a href="#73714" title="scala.actors.ReplyReactor">s</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.actors.IScheduler" id="73391">parentScheduler</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.actors.ReplyReactor" id="73729">s</a> = <a href="#73381" title="=&gt; java.lang.ThreadLocal[scala.actors.ReplyReactor]">tl</a>.<span title="()scala.actors.ReplyReactor">get</span>
    <span title="scala.actors.IScheduler" class="keyword">if</span> <span class="delimiter">(</span><a href="#73729" title="scala.actors.ReplyReactor">s</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="Scheduler.scala.html#11064" title="object scala.actors.Scheduler">Scheduler</a> <span class="keyword">else</span> <a href="#73729" title="scala.actors.ReplyReactor">s</a>.<a href="Reactor.scala.html#73491" title="=&gt; scala.actors.IScheduler">scheduler</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Resets an actor proxy associated with the current thread.
   * It replaces the implicit &lt;code&gt;ActorProxy&lt;/code&gt; instance
   * of the current thread (if any) with a new instance.
   *
   * This permits to re-use the current thread as an actor
   * even if its &lt;code&gt;ActorProxy&lt;/code&gt; has died for some reason.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="73392">resetProxy</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.actors.ReplyReactor" id="73733">a</a> = <a href="#73381" title="=&gt; java.lang.ThreadLocal[scala.actors.ReplyReactor]">tl</a>.<span title="()scala.actors.ReplyReactor">get</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#73733" title="scala.actors.ReplyReactor">a</a><span class="delimiter">)</span> <a href="../Boolean.scala.html#32917" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#73733" title="scala.actors.ReplyReactor">a</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ActorProxy.scala.html#10922" title="scala.actors.ActorProxy">ActorProxy</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#73381" title="=&gt; java.lang.ThreadLocal[scala.actors.ReplyReactor]">tl</a>.<span title="(x$1: scala.actors.ReplyReactor)Unit">set</span><span class="delimiter">(</span><span title="scala.actors.ActorProxy" class="keyword">new</span> <a href="ActorProxy.scala.html#10922" title="scala.actors.ActorProxy">ActorProxy</a><span class="delimiter">(</span><span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>, <a href="#73391" title="=&gt; scala.actors.IScheduler">parentScheduler</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Removes any reference to an &lt;code&gt;Actor&lt;/code&gt; instance
   * currently stored in thread-local storage.
   *
   * This allows to release references from threads that are
   * potentially long-running or being re-used (e.g. inside
   * a thread pool). Permanent references in thread-local storage
   * are a potential memory leak.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="73393">clearSelf</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#73381" title="=&gt; java.lang.ThreadLocal[scala.actors.ReplyReactor]">tl</a>.<span title="(x$1: scala.actors.ReplyReactor)Unit">set</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Factory method for creating and starting an actor.
   *
   * @example {{{
   * import scala.actors.Actor._
   * ...
   * val a = actor {
   *   ...
   * }
   * }}}
   *
   * @param  body  the code block to be executed by the newly created actor
   * @return       the newly created actor. Note that it is automatically started.
   */</span>
  <span class="keyword">def</span> <a title="(body: =&gt; Unit)scala.actors.Actor" id="73394">actor</a><span class="delimiter">(</span><a title="=&gt; Unit" id="73735">body</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="#11216" title="scala.actors.Actor">Actor</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="a extends java.lang.Object with scala.actors.Actor" id="73737">a</a> = <a href="#73738" title="java.lang.Object with scala.actors.Actor{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.actors.Actor" id="73738">Actor</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="()Unit" id="73740">act</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#73735" title="=&gt; Unit">body</a>
      <span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="scala.actors.IScheduler" id="73741">scheduler</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a> = <a href="#73391" title="=&gt; scala.actors.IScheduler">parentScheduler</a>
    <span class="delimiter">}</span>
    <a href="#73737" title="a extends java.lang.Object with scala.actors.Actor">a</a>.<a href="#73453" title="()scala.actors.Actor">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#73737" title="a extends java.lang.Object with scala.actors.Actor">a</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Factory method for creating actors whose
   * body is defined using a `Responder`.
   *
   * @example {{{
   * import scala.actors.Actor._
   * import Responder.exec
   * ...
   * val a = reactor {
   *   for {
   *     res &lt;- b !! MyRequest;
   *     if exec(println(&quot;result: &quot;+res))
   *   } yield {}
   * }
   * }}}
   *
   * @param  body  the `Responder` to be executed by the newly created actor
   * @return       the newly created actor. Note that it is automatically started.
   */</span>
  <span class="keyword">def</span> <a title="(body: =&gt; Responder[Unit])scala.actors.Actor" id="73395">reactor</a><span class="delimiter">(</span><a title="=&gt; Responder[Unit]" id="73760">body</a>: =&gt; Responder<span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#11216" title="scala.actors.Actor">Actor</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="a extends java.lang.Object with scala.actors.Actor" id="73762">a</a> = <a href="#73763" title="java.lang.Object with scala.actors.Actor{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.actors.Actor" id="73763">Actor</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="()Unit" id="73765">act</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../Responder.scala.html#1838" title="object Responder">Responder</a>.<a href="../Responder.scala.html#60230" title="(r: Responder[Unit])Option[Unit]">run</a><span title="Unit" class="delimiter">(</span><a href="#73760" title="=&gt; Responder[Unit]">body</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="scala.actors.IScheduler" id="73766">scheduler</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a> = <a href="#73391" title="=&gt; scala.actors.IScheduler">parentScheduler</a>
    <span class="delimiter">}</span>
    <a href="#73762" title="a extends java.lang.Object with scala.actors.Actor">a</a>.<a href="#73453" title="()scala.actors.Actor">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#73762" title="a extends java.lang.Object with scala.actors.Actor">a</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Receives the next message from the mailbox of the current actor
   * &lt;code&gt;self&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Any" id="73396">?</a> : <span title="Any">Any</span> = <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73445" title="=&gt; Any">?</a>

  <span class="comment">/**
   * Receives a message from the mailbox of
   * &lt;code&gt;self&lt;/code&gt;. Blocks if no message matching any of the
   * cases of &lt;code&gt;f&lt;/code&gt; can be received.
   *
   * @example {{{
   * receive {
   *   case &quot;exit&quot; =&gt; println(&quot;exiting&quot;)
   *   case 42 =&gt; println(&quot;got the answer&quot;)
   *   case x:Int =&gt; println(&quot;got an answer&quot;)
   * }
   * }}}
   *
   * @param  f a partial function specifying patterns and actions
   * @return   the result of processing the received message
   */</span>
  <span class="keyword">def</span> <a title="[A](f: PartialFunction[Any,A])A" id="73397">receive</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73399">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Any,A]" id="73791">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,A]">PartialFunction</a><span class="delimiter">[</span>Any, A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73399" title="A">A</a> =
    <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73437" title="(f: PartialFunction[Any,A])A">receive</a><span class="delimiter">(</span><a href="#73791" title="PartialFunction[Any,A]">f</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Receives a message from the mailbox of
   * &lt;code&gt;self&lt;/code&gt;. Blocks at most &lt;code&gt;msec&lt;/code&gt;
   * milliseconds if no message matching any of the cases of
   * &lt;code&gt;f&lt;/code&gt; can be received. If no message could be
   * received the &lt;code&gt;TIMEOUT&lt;/code&gt; action is executed if
   * specified.
   *
   * @param  msec the time span before timeout
   * @param  f    a partial function specifying patterns and actions
   * @return      the result of processing the received message
   */</span>
  <span class="keyword">def</span> <a title="[R](msec: Long)(f: PartialFunction[Any,R])R" id="73400">receiveWithin</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73402">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Long" id="73812">msec</a>: <a href="../Long.scala.html#1435" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,R]" id="73813">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,R]">PartialFunction</a><span class="delimiter">[</span>Any, R<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73402" title="R">R</a> =
    <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73440" title="(msec: Long)(f: PartialFunction[Any,R])R">receiveWithin</a><span class="delimiter">(</span><a href="#73812" title="Long">msec</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#73813" title="PartialFunction[Any,R]">f</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Lightweight variant of &lt;code&gt;receive&lt;/code&gt;.
   *
   * Actions in &lt;code&gt;f&lt;/code&gt; have to contain the rest of the
   * computation of &lt;code&gt;self&lt;/code&gt;, as this method will never
   * return.
   *
   * A common method of continuting the computation is to send a message
   * to another actor:
   * {{{
   * react {
   *   case Get(from) =&gt;
   *     react {
   *       case Put(x) =&gt; from ! x
   *     }
   * }
   * }}}
   *
   * Another common method is to use `loop` to continuously `react` to messages:
   * {{{
   * loop {
   *   react {
   *     case Msg(data) =&gt; // process data
   *   }
   * }
   * }}}
   *
   * @param  f a partial function specifying patterns and actions
   * @return   this function never returns
   */</span>
  <span class="keyword">def</span> <a title="(f: PartialFunction[Any,Unit])Nothing" id="73403">react</a><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="73837">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> =
    <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="ReplyReactor.scala.html#73536" title="(handler: PartialFunction[Any,Unit])Nothing">react</a><span class="delimiter">(</span><a href="#73837" title="PartialFunction[Any,Unit]">f</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Lightweight variant of &lt;code&gt;receiveWithin&lt;/code&gt;.
   *
   * Actions in &lt;code&gt;f&lt;/code&gt; have to contain the rest of the
   * computation of &lt;code&gt;self&lt;/code&gt;, as this method will never
   * return.
   *
   * @param  msec the time span before timeout
   * @param  f    a partial function specifying patterns and actions
   * @return      this function never returns
   */</span>
  <span class="keyword">def</span> <a title="(msec: Long)(f: PartialFunction[Any,Unit])Nothing" id="73404">reactWithin</a><span class="delimiter">(</span><a title="Long" id="73850">msec</a>: <a href="../Long.scala.html#1435" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="73851">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> =
    <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73444" title="(msec: Long)(handler: PartialFunction[Any,Unit])Nothing">reactWithin</a><span class="delimiter">(</span><a href="#73850" title="Long">msec</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#73851" title="PartialFunction[Any,Unit]">f</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(f: PartialFunction[Any,Unit])Nothing" id="73405">eventloop</a><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="73866">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> =
    <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="ReplyReactor.scala.html#73536" title="(handler: PartialFunction[Any,Unit])Nothing">react</a><span class="delimiter">(</span><span title="scala.actors.Actor.RecursiveProxyHandler" class="keyword">new</span> <a href="#73406" title="scala.actors.Actor.RecursiveProxyHandler">RecursiveProxyHandler</a><span class="delimiter">(</span><a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>, <a href="#73866" title="PartialFunction[Any,Unit]">f</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class RecursiveProxyHandler extends java.lang.Object with PartialFunction[Any,Unit] with ScalaObject" id="73406">RecursiveProxyHandler</a><a href="../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">(</a><a title="scala.actors.ReplyReactor" id="73881">a</a>: <a href="ReplyReactor.scala.html#10982" title="scala.actors.ReplyReactor">ReplyReactor</a>, <a title="PartialFunction[Any,Unit]" id="73882">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">extends</span> <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(m: Any)Boolean" id="73879">isDefinedAt</a><span class="delimiter">(</span><a title="Any" id="73890">m</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../Boolean.scala.html#61" title="Boolean">Boolean</a> =
      <span title="Boolean(true)" class="keyword">true</span> <span class="comment">// events are immediately removed from the mailbox</span>
    <span class="keyword">def</span> <a title="(m: Any)Unit" id="73880">apply</a><span class="delimiter">(</span><a title="Any" id="73893">m</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73882" title="PartialFunction[Any,Unit]">f</a>.<a href="../PartialFunction.scala.html#30799" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#73893" title="Any">m</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Function1.scala.html#30790" title="(v1: Any)Unit">f</a><span class="delimiter">(</span><a href="#73893" title="Any">m</a><span class="delimiter">)</span>
      <a href="#73881" title="scala.actors.ReplyReactor">a</a>.<a href="ReplyReactor.scala.html#73536" title="(handler: PartialFunction[Any,Unit])Nothing">react</a><span class="delimiter">(</span><a href="#73406" title="scala.actors.Actor.RecursiveProxyHandler" class="keyword">this</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the actor which sent the last received message.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.actors.OutputChannel[Any]" id="73407">sender</a>: <a href="OutputChannel.scala.html#11264" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> =
    <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="ReplyReactor.scala.html#73529" title="=&gt; scala.actors.OutputChannel[Any]">sender</a>

  <span class="comment">/**
   * Sends &lt;code&gt;msg&lt;/code&gt; to the actor waiting in a call to
   * &lt;code&gt;!?&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <a title="(msg: Any)Unit" id="73408">reply</a><span class="delimiter">(</span><a title="Any" id="73907">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a> =
    <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="ReplyReactor.scala.html#73530" title="(msg: Any)Unit">reply</a><span class="delimiter">(</span><a href="#73907" title="Any">msg</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Sends &lt;code&gt;()&lt;/code&gt; to the actor waiting in a call to
   * &lt;code&gt;!?&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="73409">reply</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a> =
    <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="ReplyReactor.scala.html#73530" title="(msg: Any)Unit">reply</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns the number of messages in &lt;code&gt;self&lt;/code&gt;'s mailbox
   *
   * @return the number of messages in &lt;code&gt;self&lt;/code&gt;'s mailbox
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="73410">mailboxSize</a>: <a href="../Int.scala.html#382" title="Int">Int</a> = <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="Reactor.scala.html#73492" title="=&gt; Int">mailboxSize</a>

  <span class="comment">/**
   * Converts a synchronous event-based operation into
   * an asynchronous `Responder`.
   *
   * @example {{{
   * val adder = reactor {
   *   for {
   *     _ &lt;- respondOn(react) { case Add(a, b) =&gt; reply(a+b) }
   *   } yield {}
   * }
   * }}}
   */</span>
  <span class="keyword">def</span> <a title="[A, B](fun: PartialFunction[A,Unit] =&gt; Nothing)PartialFunction[A,B] =&gt; Responder[B]" id="73411">respondOn</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73414">A</a>, <a title="&gt;: Nothing &lt;: Any" id="73415">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[A,Unit] =&gt; Nothing" id="73928">fun</a>: PartialFunction<span class="delimiter">[</span>A, Unit<span class="delimiter">]</span> =&gt; Nothing<span class="delimiter">)</span>:
    PartialFunction<span class="delimiter">[</span>A, B<span class="delimiter">]</span> =&gt; Responder<span class="delimiter">[</span>B<span class="delimiter">]</span> =
      <span class="delimiter">(</span>caseBlock: <a href="../PartialFunction.scala.html#331" title="PartialFunction[A,B]">PartialFunction</a><span class="delimiter">[</span>A, B<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#73933" title="Responder[B]" class="keyword">new</a> <a title="anonymous class $anon extends Responder[B]" id="73933">Responder</a><span class="delimiter">[</span>B<span class="delimiter">]</span> <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(k: B =&gt; Unit)Nothing" id="73937">respond</a><span class="delimiter">(</span><a title="B =&gt; Unit" id="73938">k</a>: B =&gt; Unit<span class="delimiter">)</span> = <a href="../Function1.scala.html#30790" title="(v1: PartialFunction[A,Unit])Nothing">fun</a><span class="delimiter">(</span><a href="#73932" title="PartialFunction[A,B]">caseBlock</a> <a href="../PartialFunction.scala.html#30805" title="(k: B =&gt; Unit)PartialFunction[A,Unit]">andThen</a> <a href="#73938" title="B =&gt; Unit">k</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait Body[a] extends java.lang.Object" id="73416">Body</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73417">a</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[b](other: =&gt; b)Unit" id="73960">andThen</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73962">b</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; b" id="73964">other</a>: =&gt; b<span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[a](body: =&gt; a)java.lang.Object with scala.actors.Actor.Body[a]" id="73418">mkBody</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73420">a</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; a" id="73966">body</a>: =&gt; a<span class="delimiter">)</span> = <a href="#73977" title="java.lang.Object with scala.actors.Actor.Body[a]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.actors.Actor.Body[a]" id="73977">Body</a><span class="delimiter">[</span>a<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[b](other: =&gt; b)Unit" id="73981">andThen</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73983">b</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; b" id="73984">other</a>: =&gt; b<span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a> = <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="Reactor.scala.html#73515" title="(first: =&gt; a, next: =&gt; b)Unit">seq</a><span class="delimiter">(</span><a href="#73966" title="=&gt; a">body</a>, <a href="#73984" title="=&gt; b">other</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to actor &lt;code&gt;to&lt;/code&gt;.
   *
   * @param  to the actor to link to
   * @return    the parameter actor
   */</span>
  <span class="keyword">def</span> <a title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor" id="73421">link</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="74025">to</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a> = <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73458" title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor">link</a><span class="delimiter">(</span><a href="#74025" title="scala.actors.AbstractActor">to</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to the actor defined by &lt;code&gt;body&lt;/code&gt;.
   *
   * @param body the body of the actor to link to
   * @return     the parameter actor
   */</span>
  <span class="keyword">def</span> <a title="(body: =&gt; Unit)scala.actors.Actor" id="73422">link</a><span class="delimiter">(</span><a title="=&gt; Unit" id="74039">body</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="#11216" title="scala.actors.Actor">Actor</a> = <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73459" title="(body: =&gt; Unit)scala.actors.Actor">link</a><span class="delimiter">(</span><a href="#74039" title="=&gt; Unit">body</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Unlinks &lt;code&gt;self&lt;/code&gt; from actor &lt;code&gt;from&lt;/code&gt;.
   *
   * @param from the actor to unlink from
   */</span>
  <span class="keyword">def</span> <a title="(from: scala.actors.AbstractActor)Unit" id="73423">unlink</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="74060">from</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a> = <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73461" title="(from: scala.actors.AbstractActor)Unit">unlink</a><span class="delimiter">(</span><a href="#74060" title="scala.actors.AbstractActor">from</a><span class="delimiter">)</span>

  <span class="comment">/**
   * &lt;p&gt;
   *   Terminates execution of &lt;code&gt;self&lt;/code&gt; with the following
   *   effect on linked actors:
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;, send message
   *   &lt;code&gt;Exit(self, reason)&lt;/code&gt; to &lt;code&gt;a&lt;/code&gt;.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;false&lt;/code&gt; (default),
   *   call &lt;code&gt;a.exit(reason)&lt;/code&gt; if
   *   &lt;code&gt;reason != 'normal&lt;/code&gt;.
   * &lt;/p&gt;
   */</span>
  <span class="keyword">def</span> <a title="(reason: AnyRef)Nothing" id="73424">exit</a><span class="delimiter">(</span><a title="AnyRef" id="74068">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <a href="#73387" title="=&gt; scala.actors.Actor">self</a>.<a href="#73472" title="(reason: AnyRef)Nothing">exit</a><span class="delimiter">(</span><a href="#74068" title="AnyRef">reason</a><span class="delimiter">)</span>

  <span class="comment">/**
   * &lt;p&gt;
   *   Terminates execution of &lt;code&gt;self&lt;/code&gt; with the following
   *   effect on linked actors:
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;, send message
   *   &lt;code&gt;Exit(self, 'normal)&lt;/code&gt; to &lt;code&gt;a&lt;/code&gt;.
   * &lt;/p&gt;
   */</span>
  <span class="keyword">def</span> <a title="()Nothing" id="73425">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <a href="#73389" title="=&gt; scala.actors.ReplyReactor">rawSelf</a>.<a href="Reactor.scala.html#73520" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * &lt;p&gt;
 *   Provides lightweight, concurrent actors. Actors are
 *   created by extending the `Actor` trait (alternatively, one of the
 *   factory methods in its companion object can be used).  The
 *   behavior of an `Actor` subclass is defined by implementing its
 *   `act` method:
 *   
 *   {{{
 *   class MyActor extends Actor {
 *     def act() {
 *       // actor behavior goes here
 *     }
 *   }
 *   }}}
 *   
 *   A new `Actor` instance is started by invoking its `start` method.
 *   
 *   '''Note:''' care must be taken when invoking thread-blocking methods
 *   other than those provided by the `Actor` trait or its companion
 *   object (such as `receive`). Blocking the underlying thread inside
 *   an actor may lead to starvation of other actors. This also
 *   applies to actors hogging their thread for a long time between
 *   invoking `receive`/`react`.
 *   
 *   If actors use blocking operations (for example, methods for
 *   blocking I/O), there are several options:
 *   &lt;ul&gt;
 *     &lt;li&gt;The run-time system can be configured to use a larger thread pool size
 *     (for example, by setting the `actors.corePoolSize` JVM property).&lt;/li&gt;
 *     
 *     &lt;li&gt;The `scheduler` method of the `Actor` trait can be overridden to return a 
 *     `ResizableThreadPoolScheduler`, which resizes its thread pool to
 *     avoid starvation caused by actors that invoke arbitrary blocking methods.&lt;/li&gt;
 *     
 *     &lt;li&gt;The `actors.enableForkJoin` JVM property can be set to `false`, in which 
 *     case a `ResizableThreadPoolScheduler` is used by default to execute actors.&lt;/li&gt;
 *   &lt;/ul&gt;
 * &lt;/p&gt;
 * &lt;p&gt;
 * The main ideas of the implementation are explained in the two papers
 * &lt;ul&gt;
 *   &lt;li&gt;
 *     &lt;a href=&quot;http://lampwww.epfl.ch/~odersky/papers/jmlc06.pdf&quot;&gt;
 *     &lt;span style=&quot;font-weight:bold; white-space:nowrap;&quot;&gt;Event-Based
 *     Programming without Inversion of Control&lt;/span&gt;&lt;/a&gt;,
 *     Philipp Haller and Martin Odersky, &lt;i&gt;Proc. JMLC 2006&lt;/i&gt;, and
 *   &lt;/li&gt;
 *   &lt;li&gt;
 *     &lt;a href=&quot;http://lamp.epfl.ch/~phaller/doc/haller07coord.pdf&quot;&gt;
 *     &lt;span style=&quot;font-weight:bold; white-space:nowrap;&quot;&gt;Actors that
 *     Unify Threads and Events&lt;/span&gt;&lt;/a&gt;,
 *     Philipp Haller and Martin Odersky, &lt;i&gt;Proc. COORDINATION 2007&lt;/i&gt;.
 *   &lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;/p&gt;
 * 
 * @author Philipp Haller
 *
 * @define actor actor
 * @define channel actor's mailbox
 */</span>
@SerialVersionUID<span class="delimiter">(</span>-<span class="long">781154067877019505L</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait Actor extends java.lang.Object with scala.actors.AbstractActor with scala.actors.ReplyReactor with scala.actors.ActorCanReply with scala.actors.InputChannel[Any] with Serializable with ScalaObject" id="11216">Actor</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a> <span class="keyword">with</span> <a href="ReplyReactor.scala.html#10982" title="scala.actors.ReplyReactor">ReplyReactor</a> <span class="keyword">with</span> <a href="ActorCanReply.scala.html#11048" title="scala.actors.ActorCanReply">ActorCanReply</a> <span class="keyword">with</span> <a href="InputChannel.scala.html#10967" title="scala.actors.InputChannel[Any]">InputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../Serializable.scala.html#898" title="Serializable">Serializable</a> <span class="delimiter">{</span>

  <span class="comment">/* The following two fields are only used when the actor
   * suspends by blocking its underlying thread, for example,
   * when waiting in a receive or synchronous send.
   */</span>
  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="73428">isSuspended</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/* This field is used to communicate the received message from
   * the invocation of send to the place where the thread of
   * the receiving actor resumes inside receive/receiveWithin.
   */</span>
  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[Any]" id="73431">received</a>: <a href="../Option.scala.html#556" title="Option[Any]">Option</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <a href="../Option.scala.html#1733" title="object None">None</a>

  <span class="keyword">protected</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.actors.IScheduler" id="73433">scheduler</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a> = <a href="Scheduler.scala.html#11064" title="object scala.actors.Scheduler">Scheduler</a>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(msg: Any, replyTo: scala.actors.OutputChannel[Any], handler: PartialFunction[Any,Any])() =&gt; Unit" id="73434">startSearch</a><span class="delimiter">(</span><a title="Any" id="74109">msg</a>: <span title="Any">Any</span>, <a title="scala.actors.OutputChannel[Any]" id="74110">replyTo</a>: <a href="OutputChannel.scala.html#11264" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="PartialFunction[Any,Any]" id="74111">handler</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73428" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
        <a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MessageQueue.scala.html#74156" title="(msg: Any, session: scala.actors.OutputChannel[Any])Unit">append</a><span class="delimiter">(</span><a href="#74109" title="Any">msg</a>, <a href="#74110" title="scala.actors.OutputChannel[Any]">replyTo</a><span class="delimiter">)</span>
        <a href="#73450" title="()Unit">resumeActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="Reactor.scala.html#73494" title="(msg: Any, replyTo: scala.actors.OutputChannel[Any], handler: PartialFunction[Any,Any])() =&gt; Unit">startSearch</a><span class="delimiter">(</span><a href="#74109" title="Any">msg</a>, <a href="#74110" title="scala.actors.OutputChannel[Any]">replyTo</a>, <a href="#74111" title="PartialFunction[Any,Any]">handler</a><span class="delimiter">)</span>

  <span class="comment">// we override this method to check `shouldExit` before suspending</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(startMbox: scala.actors.MQueue[Any], handler: PartialFunction[Any,Any], resumeOnSameThread: Boolean)Unit" id="73435">searchMailbox</a><span class="delimiter">(</span><a title="scala.actors.MQueue[Any]" id="74275">startMbox</a>: <a href="MessageQueue.scala.html#10937" title="scala.actors.MQueue[Any]">MQueue</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>,
                                             <a title="PartialFunction[Any,Any]" id="74276">handler</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>,
                                             <a title="Boolean" id="74277">resumeOnSameThread</a>: <a href="../Boolean.scala.html#61" title="Boolean">Boolean</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scala.actors.MQueue[Any]" id="74289">tmpMbox</a> = <a href="#74275" title="scala.actors.MQueue[Any]">startMbox</a>
    <span class="keyword">var</span> <a title="Boolean" id="74290">done</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#74290" title="Boolean">done</a><span class="delimiter">)</span> <a href="#74291" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="scala.actors.MQueueElement[Any]" id="74292">qel</a> = <a href="#74289" title="scala.actors.MQueue[Any]">tmpMbox</a>.<a href="MessageQueue.scala.html#74166" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>msg: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#11264" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="../collection/immutable/List.scala.html#26214" title="(xs: scala.actors.OutputChannel[Any]*)List[scala.actors.OutputChannel[Any]]">List</a><span class="delimiter">(</span><a href="#74306" title="scala.actors.OutputChannel[Any]">replyTo</a><span class="delimiter">)</span>
        <a href="#74276" title="PartialFunction[Any,Any]">handler</a>.<a href="../PartialFunction.scala.html#30799" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#74305" title="Any">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#74289" title="scala.actors.MQueue[Any]">tmpMbox</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
        <a href="#74289" title="scala.actors.MQueue[Any]">tmpMbox</a>.<a href="MessageQueue.scala.html#74158" title="(f: (Any, scala.actors.OutputChannel[Any]) =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="Any" id="74320">m</a>, <a title="scala.actors.OutputChannel[Any]" id="74321">s</a><span class="delimiter">)</span> =&gt; <a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MessageQueue.scala.html#74156" title="(msg: Any, session: scala.actors.OutputChannel[Any])Unit">append</a><span class="delimiter">(</span><a href="#74320" title="Any">m</a>, <a href="#74321" title="scala.actors.OutputChannel[Any]">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#74292" title="scala.actors.MQueueElement[Any]">qel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          <span class="comment">// in mean time new stuff might have arrived</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="Reactor.scala.html#73481" title="=&gt; scala.actors.MQueue[Any]">sendBuffer</a>.<a href="MessageQueue.scala.html#74154" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#74289" title="scala.actors.MQueue[Any]">tmpMbox</a> = <span title="scala.actors.MQueue[Any]" class="keyword">new</span> <a href="MessageQueue.scala.html#10937" title="scala.actors.MQueue[Any]">MQueue</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Temp&quot;)" class="string">&quot;Temp&quot;</span><span class="delimiter">)</span>
            <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="#74289" title="scala.actors.MQueue[Any]">tmpMbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="comment">// very important to check for `shouldExit` at this point</span>
            <span class="comment">// since linked actors might have set it after we checked</span>
            <span class="comment">// last time (e.g., at the beginning of `react`)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73470" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="Reactor.scala.html#73484" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="#74276" title="PartialFunction[Any,Any]">handler</a>
            <span class="comment">// see Reactor.searchMailbox</span>
            <span title="Nothing" class="keyword">throw</span> <a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73385" title="=&gt; scala.actors.SuspendActorControl">suspendException</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="ReplyReactor.scala.html#73533" title="(item: (Any, scala.actors.OutputChannel[Any]), handler: PartialFunction[Any,Any], onSameThread: Boolean)Unit">resumeReceiver</a><span class="delimiter">(</span><a href="../Tuple2.scala.html#30727" title="(_1: Any, _2: scala.actors.OutputChannel[Any])(Any, scala.actors.OutputChannel[Any])" class="delimiter">(</a><a href="#74292" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MessageQueue.scala.html#74180" title="=&gt; Any">msg</a>, <a href="#74292" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MessageQueue.scala.html#74182" title="=&gt; scala.actors.OutputChannel[Any]">session</a><span class="delimiter">)</span>, <a href="#74276" title="PartialFunction[Any,Any]">handler</a>, <a href="#74277" title="Boolean">resumeOnSameThread</a><span class="delimiter">)</span>
        <a href="#74290" title="Boolean">done</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(fun: () =&gt; Unit, handler: PartialFunction[Any,Any], msg: Any)java.lang.Runnable" id="73436">makeReaction</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="74457">fun</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit, <a title="PartialFunction[Any,Any]" id="74458">handler</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>, <a title="Any" id="74459">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="java.lang.Runnable">Runnable</span> =
    <span title="scala.actors.ActorTask" class="keyword">new</span> <a href="ActorTask.scala.html#11057" title="scala.actors.ActorTask">ActorTask</a><span class="delimiter">(</span><a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <a href="#74457" title="() =&gt; Unit">fun</a>, <a href="#74458" title="PartialFunction[Any,Any]">handler</a>, <a href="#74459" title="Any">msg</a><span class="delimiter">)</span>

  <span class="comment">/** See the companion object's `receive` method. */</span>
  <span class="keyword">def</span> <a title="[R](f: PartialFunction[Any,R])R" id="73437">receive</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73439">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Any,R]" id="73799">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,R]">PartialFunction</a><span class="delimiter">[</span>Any, R<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73439" title="R">R</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#9560" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73388" title="(sched: scala.actors.IScheduler)scala.actors.Actor">self</a><span class="delimiter">(</span><a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <span title="java.lang.String(&quot;receive from channel belonging to other actor&quot;)" class="string">&quot;receive from channel belonging to other actor&quot;</span><span class="delimiter">)</span>

    <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73470" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// links</span>
      <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Boolean" id="75153">done</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#75153" title="Boolean">done</a><span class="delimiter">)</span> <a href="#75155" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="scala.actors.MQueueElement[Any]" id="75258">qel</a> = <a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MessageQueue.scala.html#74166" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>m: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#11264" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#75267" title="scala.actors.OutputChannel[Any]">replyTo</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        <span class="keyword">val</span> <a title="Boolean" id="75268">matches</a> = <a href="#73799" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#30799" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#75266" title="Any">m</a><span class="delimiter">)</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#26419" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
        <a href="#75268" title="Boolean">matches</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#75258" title="scala.actors.MQueueElement[Any]">qel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          <span class="comment">// in mean time new stuff might have arrived</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="Reactor.scala.html#73481" title="=&gt; scala.actors.MQueue[Any]">sendBuffer</a>.<a href="MessageQueue.scala.html#74154" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="Reactor.scala.html#73484" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="#73799" title="PartialFunction[Any,R]">f</a>
            <a href="#73428" title="(x$1: Boolean)Unit">isSuspended</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a>.<a href="IScheduler.scala.html#73677" title="(blocker: scala.concurrent.ManagedBlocker)Unit">managedBlock</a><span class="delimiter">(</span><a href="#73447" title="object Actor.this.blocker">blocker</a><span class="delimiter">)</span>
            <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#73431" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#35222" title="(x: Any)Some[Any]">Some</a><span class="delimiter">(</span><a href="#75258" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MessageQueue.scala.html#74180" title="=&gt; Any">msg</a><span class="delimiter">)</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#75258" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MessageQueue.scala.html#74182" title="=&gt; scala.actors.OutputChannel[Any]">session</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        <a href="#75153" title="Boolean">done</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="R" id="75154">result</a> = <a href="../Function1.scala.html#30790" title="(v1: Any)R">f</a><span class="delimiter">(</span><a href="#73431" title="=&gt; Option[Any]">received</a>.<a href="../Option.scala.html#25810" title="=&gt; Any">get</a><span class="delimiter">)</span>
    <a href="#73431" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#1733" title="object None">None</a>
    <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#26419" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
    <a href="#75154" title="R">result</a>
  <span class="delimiter">}</span>

  <span class="comment">/** See the companion object's `receiveWithin` method. */</span>
  <span class="keyword">def</span> <a title="[R](msec: Long)(f: PartialFunction[Any,R])R" id="73440">receiveWithin</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="73442">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Long" id="73821">msec</a>: <a href="../Long.scala.html#1435" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,R]" id="73822">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,R]">PartialFunction</a><span class="delimiter">[</span>Any, R<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#73442" title="R">R</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#9560" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73388" title="(sched: scala.actors.IScheduler)scala.actors.Actor">self</a><span class="delimiter">(</span><a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <span title="java.lang.String(&quot;receive from channel belonging to other actor&quot;)" class="string">&quot;receive from channel belonging to other actor&quot;</span><span class="delimiter">)</span>

    <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73470" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// links</span>
      <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// first, remove spurious TIMEOUT message from mailbox if any</span>
    <a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MessageQueue.scala.html#74166" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>m: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#11264" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#75419" title="Any">m</a> <span title="(x$1: Any)Boolean">==</span> <a href="#76466" title="object scala.actors.TIMEOUT">TIMEOUT</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="() =&gt; Unit" id="75308">receiveTimeout</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73822" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#30799" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#76466" title="object scala.actors.TIMEOUT">TIMEOUT</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#73431" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#35222" title="(x: scala.actors.TIMEOUT.type)Some[scala.actors.TIMEOUT.type]">Some</a><span class="delimiter">(</span><a href="#76466" title="object scala.actors.TIMEOUT">TIMEOUT</a><span class="delimiter">)</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#11216" title="scala.actors.Actor" class="keyword">this</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
      <span class="delimiter">}</span> <span class="keyword">else</span>
        sys.<a href="../sys/package.scala.html#25626" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;unhandled timeout&quot;)" class="string">&quot;unhandled timeout&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Boolean" id="75309">done</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#75309" title="Boolean">done</a><span class="delimiter">)</span> <a href="#75311" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="scala.actors.MQueueElement[Any]" id="75431">qel</a> = <a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MessageQueue.scala.html#74166" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>m: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#11264" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#75438" title="scala.actors.OutputChannel[Any]">replyTo</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        <span class="keyword">val</span> <a title="Boolean" id="75439">matches</a> = <a href="#73822" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#30799" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#75437" title="Any">m</a><span class="delimiter">)</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#26419" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
        <a href="#75439" title="Boolean">matches</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#75431" title="scala.actors.MQueueElement[Any]">qel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="() =&gt; Unit" id="75445">todo</a> = <a href="#11216" title="(x$1: () =&gt; Unit)() =&gt; Unit">synchronized</a> <span class="delimiter">{</span>
          <span class="comment">// in mean time new stuff might have arrived</span>
          <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="Reactor.scala.html#73481" title="=&gt; scala.actors.MQueue[Any]">sendBuffer</a>.<a href="MessageQueue.scala.html#74154" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73821" title="Long">msec</a> <a href="../Long.scala.html#32450" title="(x: Long)Boolean">==</a> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#75309" title="Boolean">done</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#75308" title="() =&gt; Unit">receiveTimeout</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplyReactor.scala.html#73526" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#25808" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#73822" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#30799" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#76466" title="object scala.actors.TIMEOUT">TIMEOUT</a><span class="delimiter">)</span><span class="delimiter">)</span>
                sys.<a href="../sys/package.scala.html#25626" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;unhandled timeout&quot;)" class="string">&quot;unhandled timeout&quot;</span><span class="delimiter">)</span>
              
              <span class="keyword">val</span> <a title="scala.actors.Actor" id="75465">thisActor</a> = <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>
              <a href="ReplyReactor.scala.html#73527" title="(x$1: Option[java.util.TimerTask])Unit">onTimeout</a> = <a href="../Option.scala.html#35222" title="(x: java.util.TimerTask)Some[java.util.TimerTask]">Some</a><span class="delimiter">(</span><a href="#75469" title="java.util.TimerTask" class="keyword">new</a> <a title="anonymous class $anon extends java.util.TimerTask" id="75469">TimerTask</a> <span class="delimiter">{</span>
                <span class="keyword">def</span> <a title="()Unit" id="75473">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#75465" title="scala.actors.Actor">thisActor</a>.<a href="Reactor.scala.html#73493" title="(msg: Any, replyTo: scala.actors.OutputChannel[Any])Unit">send</a><span class="delimiter">(</span><a href="#76466" title="object scala.actors.TIMEOUT">TIMEOUT</a>, <a href="#75465" title="scala.actors.Actor">thisActor</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
              <a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73383" title="=&gt; java.util.Timer">timer</a>.<span title="(x$1: java.util.TimerTask, x$2: Long)Unit">schedule</span><span class="delimiter">(</span><a href="ReplyReactor.scala.html#73526" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#25810" title="=&gt; java.util.TimerTask">get</a>, <a href="#73821" title="Long">msec</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            
            <span class="comment">// It is possible that !onTimeout.isEmpty, but TIMEOUT is not yet in mailbox</span>
            <span class="comment">// See SI-4759</span>
            <a href="Reactor.scala.html#73484" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="#73822" title="PartialFunction[Any,R]">f</a>
            <a href="#73431" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#1733" title="object None">None</a>
            <a href="#73428" title="(x$1: Boolean)Unit">isSuspended</a> = <span title="Boolean(true)" class="keyword">true</span>
            <a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a>.<a href="IScheduler.scala.html#73677" title="(blocker: scala.concurrent.ManagedBlocker)Unit">managedBlock</a><span class="delimiter">(</span><a href="#73447" title="object Actor.this.blocker">blocker</a><span class="delimiter">)</span>
            <a href="Reactor.scala.html#73501" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#73479" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="../Function0.scala.html#39519" title="()Unit">todo</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="ReplyReactor.scala.html#73526" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#25808" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="ReplyReactor.scala.html#73526" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#25810" title="=&gt; java.util.TimerTask">get</a>.<span title="()Boolean">cancel</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="ReplyReactor.scala.html#73527" title="(x$1: Option[java.util.TimerTask])Unit">onTimeout</a> = <a href="../Option.scala.html#1733" title="object None">None</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#73431" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#35222" title="(x: Any)Some[Any]">Some</a><span class="delimiter">(</span><a href="#75431" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MessageQueue.scala.html#74180" title="=&gt; Any">msg</a><span class="delimiter">)</span>
        <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#75431" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MessageQueue.scala.html#74182" title="=&gt; scala.actors.OutputChannel[Any]">session</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        <a href="#75309" title="Boolean">done</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="R" id="75310">result</a> = <a href="../Function1.scala.html#30790" title="(v1: Any)R">f</a><span class="delimiter">(</span><a href="#73431" title="=&gt; Option[Any]">received</a>.<a href="../Option.scala.html#25810" title="=&gt; Any">get</a><span class="delimiter">)</span>
    <a href="#73431" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#1733" title="object None">None</a>
    <a href="ReplyReactor.scala.html#73524" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="ReplyReactor.scala.html#73523" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#26419" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
    <a href="#75310" title="R">result</a>
  <span class="delimiter">}</span>

  <span class="comment">/** See the companion object's `react` method. */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(handler: PartialFunction[Any,Unit])Nothing" id="73443">react</a><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="75580">handler</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73470" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="ReplyReactor.scala.html#73536" title="(handler: PartialFunction[Any,Unit])Nothing">react</a><span class="delimiter">(</span><a href="#75580" title="PartialFunction[Any,Unit]">handler</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** See the companion object's `reactWithin` method. */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(msec: Long)(handler: PartialFunction[Any,Unit])Nothing" id="73444">reactWithin</a><span class="delimiter">(</span><a title="Long" id="73858">msec</a>: <a href="../Long.scala.html#1435" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="73859">handler</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73470" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="ReplyReactor.scala.html#73537" title="(msec: Long)(handler: PartialFunction[Any,Unit])Nothing">reactWithin</a><span class="delimiter">(</span><a href="#73858" title="Long">msec</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#73859" title="PartialFunction[Any,Unit]">handler</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Receives the next message from the mailbox */</span>
  <span class="keyword">def</span> <a title="=&gt; Any" id="73445">?</a> : <span title="Any">Any</span> = <a href="#73437" title="(f: PartialFunction[Any,Any])Any">receive</a> <a href="#75776" title="Any" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Any" id="75777">x</a> =&gt; <a href="#75777" title="Any">x</a>
  <span class="delimiter">}</span>

  <span class="comment">// guarded by lock of this</span>
  <span class="comment">// never throws SuspendActorControl</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: PartialFunction[Any,Any], msg: Any)Unit" id="73446">scheduleActor</a><span class="delimiter">(</span><a title="PartialFunction[Any,Any]" id="75779">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>, <a title="Any" id="75780">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#75779" title="PartialFunction[Any,Any]">f</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
      <span class="comment">// do nothing (timeout is handled instead)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.actors.ActorTask" id="75788">task</a> = <span title="scala.actors.ActorTask" class="keyword">new</span> <a href="ActorTask.scala.html#11057" title="scala.actors.ActorTask">ActorTask</a><span class="delimiter">(</span><a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <span title="Null(null)" class="keyword">null</span>, <a href="#75779" title="PartialFunction[Any,Any]">f</a>, <a href="#75780" title="Any">msg</a><span class="delimiter">)</span>
      <a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a> <a href="IScheduler.scala.html#73671" title="(task: java.lang.Runnable)Unit">executeFromActor</a> <a href="#75788" title="scala.actors.ActorTask">task</a>
    <span class="delimiter">}</span>

  <span class="comment">/* Used for notifying scheduler when blocking inside receive/receiveWithin. */</span>
  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Actor.this.blocker" id="73447">blocker</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> scala.concurrent.<a href="../concurrent/ManagedBlocker.scala.html#18276" title="scala.concurrent.ManagedBlocker">ManagedBlocker</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()Boolean" id="75296">block</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#11216" title="Actor.this.type">Actor</a>.<span class="keyword">this</span>.<a href="#73449" title="()Unit">suspendActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="75297">isReleasable</a> =
      <a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#11216" title="Actor.this.type">Actor</a>.<span class="keyword">this</span>.<a href="#73428" title="=&gt; Boolean">isSuspended</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="73449">suspendActor</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#73428" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#75798" title="()Unit" class="keyword">try</a> <span class="delimiter">{</span>
        <a href="#11216" title="()Unit">wait</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">_</span>: <span title="java.lang.InterruptedException">InterruptedException</span> =&gt;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="comment">// links: check if we should exit</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73470" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="73450">resumeActor</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#73428" title="(x$1: Boolean)Unit">isSuspended</a> = <span title="Boolean(false)" class="keyword">false</span>
    <a href="#11216" title="()Unit">notify</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="73451">exiting</a> = <a href="#11216" title="(x$1: Boolean)Boolean">synchronized</a> <span class="delimiter">{</span>
    <a href="Reactor.scala.html#73486" title="=&gt; scala.actors.Actor.State.Value">_state</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73379" title="object scala.actors.Actor.State">State</a>.<a href="#73624" title="=&gt; scala.actors.Actor.State.Value">Terminated</a>
  <span class="delimiter">}</span>

  <span class="comment">// guarded by this</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="73452">dostart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Reset various flags.</span>
    <span class="comment">//</span>
    <span class="comment">// Note that we do *not* reset `trapExit`. The reason is that</span>
    <span class="comment">// users should be able to set the field in the constructor</span>
    <span class="comment">// and before `act` is called.</span>
    <a href="#73467" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="../Symbol.scala.html#60686" title="(name: String)Symbol" class="symbol">'normal</a>
    <a href="#73470" title="(x$1: Boolean)Unit">shouldExit</a> = <span title="Boolean(false)" class="keyword">false</span>

    <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="Reactor.scala.html#73505" title="()Unit">dostart</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()scala.actors.Actor" id="73453">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#11216" title="scala.actors.Actor">Actor</a> = <a href="#11216" title="(x$1: scala.actors.Actor)scala.actors.Actor">synchronized</a> <span class="delimiter">{</span>
    <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="Reactor.scala.html#73506" title="()scala.actors.Reactor[Any]">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="comment">/** State of this actor */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.actors.Actor.State.Value" id="73454">getState</a>: Actor.State.<a href="../Enumeration.scala.html#50015" title="scala.actors.Actor.State.Value">Value</a> = <a href="#11216" title="(x$1: scala.actors.Actor.State.Value)scala.actors.Actor.State.Value">synchronized</a> <span class="delimiter">{</span>
    <span title="scala.actors.Actor.State.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="#73428" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="scala.actors.Actor.State.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplyReactor.scala.html#73526" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#25808" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
        <a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73379" title="object scala.actors.Actor.State">State</a>.<a href="#73620" title="=&gt; scala.actors.Actor.State.Value">Blocked</a>
      <span class="keyword">else</span>
        <a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73379" title="object scala.actors.Actor.State">State</a>.<a href="#73622" title="=&gt; scala.actors.Actor.State.Value">TimedBlocked</a>
    <span class="delimiter">}</span> <span class="keyword">else</span>
      <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="ReplyReactor.scala.html#73538" title="=&gt; scala.actors.Actor.State.Value">getState</a>
  <span class="delimiter">}</span>

  <span class="comment">// guarded by this</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">var</span> <a title="List[scala.actors.AbstractActor]" id="73456">links</a>: <a href="../collection/immutable/List.scala.html#14042" title="List[scala.actors.AbstractActor]">List</a><span class="delimiter">[</span>AbstractActor<span class="delimiter">]</span> = <a href="../collection/immutable/List.scala.html#13695" title="object Nil">Nil</a>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to actor &lt;code&gt;to&lt;/code&gt;.
   *
   * @param to the actor to link to
   * @return   the parameter actor
   */</span>
  <span class="keyword">def</span> <a title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor" id="73458">link</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="74035">to</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#9560" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73388" title="(sched: scala.actors.IScheduler)scala.actors.Actor">self</a><span class="delimiter">(</span><a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <span title="java.lang.String(&quot;link called on actor different from self&quot;)" class="string">&quot;link called on actor different from self&quot;</span><span class="delimiter">)</span>
    <a href="#11216" title="Actor.this.type" class="keyword">this</a> <a href="#73460" title="(to: scala.actors.AbstractActor)Unit">linkTo</a> <a href="#74035" title="scala.actors.AbstractActor">to</a>
    <a href="#74035" title="scala.actors.AbstractActor">to</a> <a href="AbstractActor.scala.html#73336" title="(to: scala.actors.AbstractActor)Unit">linkTo</a> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>
    <a href="#74035" title="scala.actors.AbstractActor">to</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to the actor defined by &lt;code&gt;body&lt;/code&gt;.
   *
   * @param body the body of the actor to link to
   * @return     the parameter actor
   */</span>
  <span class="keyword">def</span> <a title="(body: =&gt; Unit)scala.actors.Actor" id="73459">link</a><span class="delimiter">(</span><a title="=&gt; Unit" id="74033">body</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="#11216" title="scala.actors.Actor">Actor</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#9560" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73388" title="(sched: scala.actors.IScheduler)scala.actors.Actor">self</a><span class="delimiter">(</span><a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <span title="java.lang.String(&quot;link called on actor different from self&quot;)" class="string">&quot;link called on actor different from self&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="a extends java.lang.Object with scala.actors.Actor" id="75952">a</a> = <a href="#75964" title="java.lang.Object with scala.actors.Actor{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.actors.Actor" id="75964">Actor</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="()Unit" id="75966">act</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#74033" title="=&gt; Unit">body</a>
      <span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="scala.actors.IScheduler" id="75967">scheduler</a>: <a href="IScheduler.scala.html#10958" title="scala.actors.IScheduler">IScheduler</a> = <a href="#11216" title="Actor.this.type">Actor</a>.<span class="keyword">this</span>.<a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a>
    <span class="delimiter">}</span>
    <a href="#73458" title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor">link</a><span class="delimiter">(</span><a href="#75952" title="a extends java.lang.Object with scala.actors.Actor">a</a><span class="delimiter">)</span>
    <a href="#75952" title="a extends java.lang.Object with scala.actors.Actor">a</a>.<a href="#73453" title="()scala.actors.Actor">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#75952" title="a extends java.lang.Object with scala.actors.Actor">a</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(to: scala.actors.AbstractActor)Unit" id="73460">linkTo</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="75940">to</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> = <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#73456" title="(x$1: List[scala.actors.AbstractActor])Unit">links</a> = <a href="#75940" title="scala.actors.AbstractActor">to</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: scala.actors.AbstractActor)List[scala.actors.AbstractActor]">::</a> <a href="#73456" title="=&gt; List[scala.actors.AbstractActor]">links</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Unlinks &lt;code&gt;self&lt;/code&gt; from actor &lt;code&gt;from&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <a title="(from: scala.actors.AbstractActor)Unit" id="73461">unlink</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="74066">from</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../Predef.scala.html#9560" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73388" title="(sched: scala.actors.IScheduler)scala.actors.Actor">self</a><span class="delimiter">(</span><a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <span title="java.lang.String(&quot;unlink called on actor different from self&quot;)" class="string">&quot;unlink called on actor different from self&quot;</span><span class="delimiter">)</span>
    <a href="#11216" title="Actor.this.type" class="keyword">this</a> <a href="#73462" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a> <a href="#74066" title="scala.actors.AbstractActor">from</a>
    <a href="#74066" title="scala.actors.AbstractActor">from</a> <a href="AbstractActor.scala.html#73337" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a> <a href="#11216" title="scala.actors.Actor" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(from: scala.actors.AbstractActor)Unit" id="73462">unlinkFrom</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="75998">from</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> = <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#73456" title="(x$1: List[scala.actors.AbstractActor])Unit">links</a> = <a href="#73456" title="=&gt; List[scala.actors.AbstractActor]">links</a>.<a href="../collection/TraversableLike.scala.html#26389" title="(p: scala.actors.AbstractActor =&gt; Boolean)List[scala.actors.AbstractActor]">filterNot</a><span class="delimiter">(</span><a href="#75998" title="scala.actors.AbstractActor">from</a>.<a href="#76022" title="(x$1: AnyRef)Boolean">==</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @volatile
  <span class="keyword">var</span> <a title="Boolean" id="73464">trapExit</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="comment">// guarded by this</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="AnyRef" id="73467">exitReason</a>: <span title="AnyRef">AnyRef</span> = <a href="../Symbol.scala.html#60686" title="(name: String)Symbol" class="symbol">'normal</a>
  <span class="comment">// guarded by this</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="73470">shouldExit</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * &lt;p&gt;
   *   Terminates execution of &lt;code&gt;self&lt;/code&gt; with the following
   *   effect on linked actors:
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;, send message
   *   &lt;code&gt;Exit(self, reason)&lt;/code&gt; to &lt;code&gt;a&lt;/code&gt;.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;false&lt;/code&gt; (default),
   *   call &lt;code&gt;a.exit(reason)&lt;/code&gt; if
   *   &lt;code&gt;reason != 'normal&lt;/code&gt;.
   * &lt;/p&gt;
   */</span>
  <span class="keyword">protected</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(reason: AnyRef)Nothing" id="73472">exit</a><span class="delimiter">(</span><a title="AnyRef" id="74076">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <a href="#73467" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="#74076" title="AnyRef">reason</a>
    <span class="delimiter">}</span>
    <a href="#73473" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Terminates with exit reason &lt;code&gt;'normal&lt;/code&gt;.
   */</span>
  <span class="keyword">protected</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Nothing" id="73473">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="() =&gt; Unit" id="76119">todo</a> = <a href="#11216" title="(x$1: () =&gt; Unit)() =&gt; Unit">synchronized</a> <span class="delimiter">{</span>
      <span title="() =&gt; Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#73456" title="=&gt; List[scala.actors.AbstractActor]">links</a>.<a href="../collection/IterableLike.scala.html#31199" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
        <a href="#73474" title="()() =&gt; Unit">exitLinked</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="../Function0.scala.html#39519" title="()Unit">todo</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#11216" title="scala.actors.Actor" class="keyword">super</a>.<a href="Reactor.scala.html#73520" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// Assume !links.isEmpty</span>
  <span class="comment">// guarded by this</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="()() =&gt; Unit" id="73474">exitLinked</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">{</span>
    <a href="Reactor.scala.html#73487" title="(x$1: scala.actors.Actor.State.Value)Unit">_state</a> = <a href="#74092" title="object scala.actors.Actor">Actor</a>.<a href="#73379" title="object scala.actors.Actor.State">State</a>.<a href="#73624" title="=&gt; scala.actors.Actor.State.Value">Terminated</a>
    <span class="comment">// reset waitingFor, otherwise getState returns Suspended</span>
    <a href="Reactor.scala.html#73484" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="Reactor.scala.html#11136" title="object scala.actors.Reactor">Reactor</a>.<a href="Reactor.scala.html#74053" title="=&gt; java.lang.Object with PartialFunction[Any,Unit]">waitingForNone</a>
    <span class="comment">// remove this from links</span>
    <span class="keyword">val</span> <a title="List[scala.actors.AbstractActor]" id="76223">mylinks</a> = <a href="#73456" title="=&gt; List[scala.actors.AbstractActor]">links</a>.<a href="../collection/TraversableLike.scala.html#26389" title="(p: scala.actors.AbstractActor =&gt; Boolean)List[scala.actors.AbstractActor]">filterNot</a><span class="delimiter">(</span><a href="#11216" title="Actor.this.type" class="keyword">this</a>.<a href="#76261" title="(x$1: AnyRef)Boolean">==</a><span class="delimiter">)</span>
    <span class="comment">// unlink actors</span>
    <a href="#76223" title="List[scala.actors.AbstractActor]">mylinks</a>.<a href="../collection/LinearSeqOptimized.scala.html#48364" title="(f: scala.actors.AbstractActor =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#73462" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a><span class="delimiter">(</span><a href="#76302" title="scala.actors.AbstractActor">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="comment">// return closure that locks linked actors</span>
    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <a href="#76223" title="List[scala.actors.AbstractActor]">mylinks</a>.<a href="../collection/LinearSeqOptimized.scala.html#48364" title="(f: scala.actors.AbstractActor =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><span class="delimiter">(</span>linked: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#76316" title="scala.actors.AbstractActor">linked</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="#76316" title="scala.actors.AbstractActor">linked</a>.<a href="AbstractActor.scala.html#73335" title="=&gt; Boolean">exiting</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#76316" title="scala.actors.AbstractActor">linked</a>.<a href="AbstractActor.scala.html#73337" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a><span class="delimiter">(</span><a href="#11216" title="scala.actors.Actor" class="keyword">this</a><span class="delimiter">)</span>
            <a href="#76316" title="scala.actors.AbstractActor">linked</a>.<a href="AbstractActor.scala.html#73338" title="(from: scala.actors.AbstractActor, reason: AnyRef)Unit">exit</a><span class="delimiter">(</span><a href="#11216" title="scala.actors.Actor" class="keyword">this</a>, <a href="#73467" title="=&gt; AnyRef">exitReason</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// Assume !links.isEmpty</span>
  <span class="comment">// guarded by this</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(reason: AnyRef)() =&gt; Unit" id="73475">exitLinked</a><span class="delimiter">(</span><a title="AnyRef" id="76131">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">{</span>
    <a href="#73467" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="#76131" title="AnyRef">reason</a>
    <a href="#73474" title="()() =&gt; Unit">exitLinked</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// Assume !this.exiting</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(from: scala.actors.AbstractActor, reason: AnyRef)Unit" id="73476">exit</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="74081">from</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a>, <a title="AnyRef" id="74082">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73464" title="=&gt; Boolean">trapExit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#11216" title="Actor.this.type" class="keyword">this</a> <a href="ReplyReactor.scala.html#73531" title="(msg: Any)Unit">!</a> <a href="#76535" title="(from: scala.actors.AbstractActor, reason: AnyRef)scala.actors.Exit">Exit</a><span class="delimiter">(</span><a href="#74081" title="scala.actors.AbstractActor">from</a>, <a href="#74082" title="AnyRef">reason</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#74082" title="AnyRef">reason</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../Symbol.scala.html#60686" title="(name: String)Symbol" class="symbol">'normal</a><span class="delimiter">)</span>
      <a href="#11216" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
        <a href="#73470" title="(x$1: Boolean)Unit">shouldExit</a> = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#73467" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="#74082" title="AnyRef">reason</a>
        <span class="comment">// resume this Actor in a way that</span>
        <span class="comment">// causes it to exit</span>
        <span class="comment">// (because shouldExit == true)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#73428" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span>
          <a href="#73450" title="()Unit">resumeActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Reactor.scala.html#73483" title="=&gt; PartialFunction[Any,Any]">waitingFor</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="Reactor.scala.html#11136" title="object scala.actors.Reactor">Reactor</a>.<a href="Reactor.scala.html#74053" title="=&gt; java.lang.Object with PartialFunction[Any,Unit]">waitingForNone</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="Reactor.scala.html#73484" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="Reactor.scala.html#11136" title="object scala.actors.Reactor">Reactor</a>.<a href="Reactor.scala.html#74053" title="=&gt; java.lang.Object with PartialFunction[Any,Unit]">waitingForNone</a>
          <span class="comment">// it doesn't matter what partial function we are passing here</span>
          <a href="#73446" title="(f: PartialFunction[Any,Any], msg: Any)Unit">scheduleActor</a><span class="delimiter">(</span><a href="Reactor.scala.html#73483" title="=&gt; PartialFunction[Any,Any]">waitingFor</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span class="comment">/* Here we should not throw a SuspendActorControl,
             since the current method is called from an actor that
             is in the process of exiting.
             
             Therefore, the contract for scheduleActor is that
             it never throws a SuspendActorControl.
           */</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/* Requires qualified private, because &lt;code&gt;RemoteActor&lt;/code&gt; must
   * register a termination handler.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(f: =&gt; Unit)Unit" id="73477">onTerminate</a><span class="delimiter">(</span><a title="=&gt; Unit" id="76447">f</a>: =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#73433" title="=&gt; scala.actors.IScheduler">scheduler</a>.<a href="IScheduler.scala.html#73676" title="(a: scala.actors.package.TrackedReactor)(f: =&gt; Unit)Unit">onTerminate</a><span class="delimiter">(</span><a href="#11216" title="scala.actors.Actor" class="keyword">this</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#76447" title="=&gt; Unit">f</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">/**
 *    Used as the timeout pattern in
 *    &lt;a href=&quot;Actor.html#receiveWithin(Long)&quot; target=&quot;contentFrame&quot;&gt;
 *    &lt;code&gt;receiveWithin&lt;/code&gt;&lt;/a&gt; and
 *    &lt;a href=&quot;Actor.html#reactWithin(Long)&quot; target=&quot;contentFrame&quot;&gt;
 *    &lt;code&gt;reactWithin&lt;/code&gt;&lt;/a&gt;.
 *
 * @example {{{
 *    receiveWithin(500) {
 *      case (x, y) =&gt; ...
 *      case TIMEOUT =&gt; ...
 *    }
 * }}}
 *
 *  @author Philipp Haller
 */</span>
case <span class="keyword">object</span> <a href="#76461" title="object scala.actors.TIMEOUT" id="76466">TIMEOUT</a>


<span class="comment">/** Sent to an actor
 *  with `trapExit` set to `true` whenever one of its linked actors
 *  terminates.
 *
 *  @param from   the actor that terminated
 *  @param reason the reason that caused the actor to terminate
 */</span>
case <span class="keyword">class</span> <a title="class Exit extends java.lang.Object with ScalaObject with Product with Serializable" id="76535">Exit</a><a href="../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">(</a><a title="scala.actors.AbstractActor" id="76433">from</a>: <a href="AbstractActor.scala.html#10907" title="scala.actors.AbstractActor">AbstractActor</a>, <a title="AnyRef" id="76434">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>

<span class="comment">/** Manages control flow of actor executions.
 *
 * @author Philipp Haller
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>actors<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class SuspendActorControl extends java.lang.Throwable with scala.util.control.ControlThrowable with ScalaObject" id="10913">SuspendActorControl</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> <a href="../util/control/ControlThrowable.scala.html#21918" title="scala.util.control.ControlThrowable">ControlThrowable</a>

        </pre>
    </body>
</html>