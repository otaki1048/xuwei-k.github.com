<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/collection/parallel/mutable/ParHashMap.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>


<span class="keyword">package</span> scala.collection.parallel
<span class="keyword">package</span> mutable




<span class="keyword">import</span> collection.generic._
<span class="keyword">import</span> collection.mutable.DefaultEntry
<span class="keyword">import</span> collection.mutable.HashEntry
<span class="keyword">import</span> collection.mutable.HashTable
<span class="keyword">import</span> collection.mutable.UnrolledBuffer



<span class="comment">/** A parallel hash map.
 *  
 *  `ParHashMap` is a parallel map which internally keeps elements within a hash table.
 *  It uses chaining to resolve collisions.
 *  
 *  @tparam T        type of the elements in the parallel hash map
 *  
 *  @define Coll ParHashMap
 *  @define coll parallel hash map
 *  
 *  @author Aleksandar Prokopec
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class ParHashMap[K, V] extends java.lang.Object with scala.collection.parallel.mutable.ParMap[K,V] with scala.collection.generic.GenericParMapTemplate[K,V,scala.collection.parallel.mutable.ParHashMap] with scala.collection.parallel.mutable.ParMapLike[K,V,scala.collection.parallel.mutable.ParHashMap[K,V],scala.collection.mutable.HashMap[K,V]] with scala.collection.parallel.mutable.ParHashTable[K,scala.collection.mutable.DefaultEntry[K,V]] with Serializable with ScalaObject" id="17686">ParHashMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="18040">K</a>, <a title="&gt;: Nothing &lt;: Any" id="18041">V</a><span class="delimiter">]</span> <a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="keyword">private</a><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="delimiter">(</span><a title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]" id="254384">contents</a>: HashTable.<a href="../../mutable/HashTable.scala.html#50676" title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">Contents</a><span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="ParMap.scala.html#17734" title="scala.collection.parallel.mutable.ParMap[K,V]">ParMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../generic/GenericParTemplate.scala.html#12636" title="scala.collection.generic.GenericParMapTemplate[K,V,scala.collection.parallel.mutable.ParHashMap]">GenericParMapTemplate</a><span class="delimiter">[</span>K, V, ParHashMap<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="ParMapLike.scala.html#17770" title="scala.collection.parallel.mutable.ParMapLike[K,V,scala.collection.parallel.mutable.ParHashMap[K,V],scala.collection.mutable.HashMap[K,V]]">ParMapLike</a><span class="delimiter">[</span>K, V, ParHashMap<span class="delimiter">[</span>K, V<span class="delimiter">]</span>, collection.mutable.HashMap<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="ParHashTable.scala.html#17935" title="scala.collection.parallel.mutable.ParHashTable[K,scala.collection.mutable.DefaultEntry[K,V]]">ParHashTable</a><span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../../Serializable.scala.html#894" title="Serializable">Serializable</a>
<span class="delimiter">{</span>
self =&gt;
  <a href="../../mutable/HashTable.scala.html#50731" title="(c: scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]])Unit">initWithContents</a><span class="delimiter">(</span><a href="#254384" title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">contents</a><span class="delimiter">)</span>
  
  <span class="keyword">type</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="254246">Entry</a> = collection.mutable.<a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="()scala.collection.parallel.mutable.ParHashMap[K,V]" id="254247" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#17686" title="ParHashMap.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.generic.GenericParMapCompanion[scala.collection.parallel.mutable.ParHashMap]" id="254248">mapCompanion</a>: <a href="../../generic/GenericParCompanion.scala.html#12639" title="scala.collection.generic.GenericParMapCompanion[scala.collection.parallel.mutable.ParHashMap]">GenericParMapCompanion</a><span class="delimiter">[</span>ParHashMap<span class="delimiter">]</span> = <a href="#386105" title="object scala.collection.parallel.mutable.ParHashMap">ParHashMap</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.mutable.ParHashMap[K,V]" id="254249">empty</a>: <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <a href="#254247" title="()scala.collection.parallel.mutable.ParHashMap[K,V]" class="keyword">new</a> <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
  
  <span class="keyword">protected</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.mutable.ParHashMapCombiner[K,V]" id="254250">newCombiner</a> = <a href="#348697" title="[K, V]=&gt; scala.collection.parallel.mutable.ParHashMapCombiner[K,V]">ParHashMapCombiner</a><span title="scala.collection.parallel.mutable.ParHashMapCombiner[K,V]" class="delimiter">[</span><a href="#18040" title="K">K</a>, <a href="#18041" title="V">V</a><span class="delimiter">]</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.HashMap[K,V]" id="254251">seq</a> = <span title="scala.collection.mutable.HashMap[K,V]" class="keyword">new</span> collection.mutable.<a href="../../mutable/HashMap.scala.html#14879" title="scala.collection.mutable.HashMap[K,V]">HashMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50732" title="=&gt; scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">hashTableContents</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="=&gt; ParHashMap.this.ParHashMapIterator with ParHashMap.this.SCPI" id="254252">splitter</a> = <a href="#383959" title="ParHashMap.this.ParHashMapIterator with ParHashMap.this.SCPI" class="keyword">new</a> <a href="#254263" title="anonymous class $anon extends ParHashMap.this.ParHashMapIterator with ParHashMap.this.SCPI" id="383959">ParHashMapIterator</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a>, <a href="#254253" title="=&gt; Int">size</a>, <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">table</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.mutable.DefaultEntry[K,V]" class="delimiter">[</span><a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41698" title="ParHashMap.this.SCPI">SCPI</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="254253">size</a> = <a href="../../mutable/HashTable.scala.html#50692" title="=&gt; Int">tableSize</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="254254">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="../../mutable/HashTable.scala.html#50716" title="()Unit">clearTable</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(key: K)Option[V]" id="254255">get</a><span class="delimiter">(</span><a title="K" id="384248">key</a>: <a href="#18040" title="K">K</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#552" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="384251">e</a> = <a href="../../mutable/HashTable.scala.html#50708" title="(key: K)scala.collection.mutable.DefaultEntry[K,V]">findEntry</a><span class="delimiter">(</span><a href="#384248" title="K">key</a><span class="delimiter">)</span>
    <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#384251" title="scala.collection.mutable.DefaultEntry[K,V]">e</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#1729" title="object None">None</a>
    <span class="keyword">else</span> <a href="../../../Option.scala.html#35203" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#384251" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123483" title="=&gt; V">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(key: K, value: V)Option[V]" id="254256">put</a><span class="delimiter">(</span><a title="K" id="384260">key</a>: <a href="#18040" title="K">K</a>, <a title="V" id="384261">value</a>: <a href="#18041" title="V">V</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#552" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="384268">e</a> = <a href="../../mutable/HashTable.scala.html#50708" title="(key: K)scala.collection.mutable.DefaultEntry[K,V]">findEntry</a><span class="delimiter">(</span><a href="#384260" title="K">key</a><span class="delimiter">)</span>
    <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#384268" title="scala.collection.mutable.DefaultEntry[K,V]">e</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../mutable/HashTable.scala.html#50709" title="(e: scala.collection.mutable.DefaultEntry[K,V])Unit">addEntry</a><span class="delimiter">(</span><span title="scala.collection.mutable.DefaultEntry[K,V]" class="keyword">new</span> <a href="#254246" title="scala.collection.mutable.DefaultEntry[K,V]">Entry</a><span class="delimiter">(</span><a href="#384260" title="K">key</a>, <a href="#384261" title="V">value</a><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="../../../Option.scala.html#1729" title="object None">None</a> <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="V" id="384276">v</a> = <a href="#384268" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123483" title="=&gt; V">value</a>; <a href="#384268" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123484" title="(x$1: V)Unit">value</a> = <a href="#384261" title="V">value</a>; <a href="../../../Option.scala.html#35203" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#384276" title="V">v</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(key: K, value: V)Unit" id="254257">update</a><span class="delimiter">(</span><a title="K" id="384281">key</a>: <a href="#18040" title="K">K</a>, <a title="V" id="384282">value</a>: <a href="#18041" title="V">V</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#453" title="Unit">Unit</a> = <a href="#254256" title="(key: K, value: V)Option[V]">put</a><span title="Unit" class="delimiter">(</span><a href="#384281" title="K">key</a>, <a href="#384282" title="V">value</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(key: K)Option[V]" id="254258">remove</a><span class="delimiter">(</span><a title="K" id="384284">key</a>: <a href="#18040" title="K">K</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#552" title="Option[V]">Option</a><span class="delimiter">[</span>V<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="384286">e</a> = <a href="../../mutable/HashTable.scala.html#50710" title="(key: K)scala.collection.mutable.DefaultEntry[K,V]">removeEntry</a><span class="delimiter">(</span><a href="#384284" title="K">key</a><span class="delimiter">)</span>
    <span title="Option[V]" class="keyword">if</span> <span class="delimiter">(</span><a href="#384286" title="scala.collection.mutable.DefaultEntry[K,V]">e</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#35203" title="(x: V)Some[V]">Some</a><span class="delimiter">(</span><a href="#384286" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123483" title="=&gt; V">value</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="../../../Option.scala.html#1729" title="object None">None</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(kv: (K, V))ParHashMap.this.type" id="254259">+=</a> <span class="delimiter">(</span><a title="(K, V)" id="384291">kv</a>: <a href="../../../Tuple2.scala.html#1512" title="(K, V)" class="delimiter">(</a>K, V<span class="delimiter">)</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="384296">e</a> = <a href="../../mutable/HashTable.scala.html#50708" title="(key: K)scala.collection.mutable.DefaultEntry[K,V]">findEntry</a><span class="delimiter">(</span><a href="#384291" title="(K, V)">kv</a>.<a href="../../../Tuple2.scala.html#30718" title="=&gt; K">_1</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#384296" title="scala.collection.mutable.DefaultEntry[K,V]">e</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../mutable/HashTable.scala.html#50709" title="(e: scala.collection.mutable.DefaultEntry[K,V])Unit">addEntry</a><span class="delimiter">(</span><span title="scala.collection.mutable.DefaultEntry[K,V]" class="keyword">new</span> <a href="#254246" title="scala.collection.mutable.DefaultEntry[K,V]">Entry</a><span class="delimiter">(</span><a href="#384291" title="(K, V)">kv</a>.<a href="../../../Tuple2.scala.html#30718" title="=&gt; K">_1</a>, <a href="#384291" title="(K, V)">kv</a>.<a href="../../../Tuple2.scala.html#30720" title="=&gt; V">_2</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#384296" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123484" title="(x$1: V)Unit">value</a> = <a href="#384291" title="(K, V)">kv</a>.<a href="../../../Tuple2.scala.html#30720" title="=&gt; V">_2</a>
    <a href="#17686" title="ParHashMap.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(key: K)ParHashMap.this.type" id="254260">-=</a><span class="delimiter">(</span><a title="K" id="384302">key</a>: <a href="#18040" title="K">K</a><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span> <a href="../../mutable/HashTable.scala.html#50710" title="(key: K)scala.collection.mutable.DefaultEntry[K,V]">removeEntry</a><span class="delimiter">(</span><a href="#384302" title="K">key</a><span class="delimiter">)</span>; <a href="#17686" title="ParHashMap.this.type" class="keyword">this</a> <span class="delimiter">}</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="254261">stringPrefix</a> = <span title="java.lang.String(&quot;ParHashMap&quot;)" class="string">&quot;ParHashMap&quot;</span>
  
  <span class="keyword">type</span> <a title="ParHashMap.this.SignalContextPassingIterator[ParHashMap.this.ParHashMapIterator]" id="254262">SCPI</a> = <a href="../ParIterableLike.scala.html#41698" title="ParHashMap.this.SignalContextPassingIterator[ParHashMap.this.ParHashMapIterator]">SignalContextPassingIterator</a><span class="delimiter">[</span>ParHashMapIterator<span class="delimiter">]</span>
  
  <span class="keyword">class</span> <a title="class ParHashMapIterator extends ParHashMap.this.EntryIterator[(K, V),ParHashMap.this.ParHashMapIterator] with ParHashMap.this.ParIterator with ScalaObject" id="254263">ParHashMapIterator</a><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><a title="Int" id="384234">start</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="384235">untilIdx</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="384236">totalSize</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="scala.collection.mutable.DefaultEntry[K,V]" id="384237">e</a>: <a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="ParHashTable.scala.html#254271" title="ParHashMap.this.EntryIterator[(K, V),ParHashMap.this.ParHashMapIterator]">EntryIterator</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span>, ParHashMapIterator<span class="delimiter">]</span><span class="delimiter">(</span><a href="#384234" title="Int">start</a>, <a href="#384235" title="Int">untilIdx</a>, <a href="#384236" title="Int">totalSize</a>, <a href="#384237" title="scala.collection.mutable.DefaultEntry[K,V]">e</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41697" title="ParHashMap.this.ParIterator">ParIterator</a> <span class="delimiter">{</span>
  me: SCPI =&gt;
    <span class="keyword">def</span> <a title="(entry: scala.collection.mutable.DefaultEntry[K,V])(K, V)" id="384228">entry2item</a><span class="delimiter">(</span><a title="scala.collection.mutable.DefaultEntry[K,V]" id="384323">entry</a>: <a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../../../Tuple2.scala.html#30706" title="(_1: K, _2: V)(K, V)" class="delimiter">(</a><a href="#384323" title="scala.collection.mutable.DefaultEntry[K,V]">entry</a>.<a href="../../mutable/DefaultEntry.scala.html#123481" title="=&gt; K">key</a>, <a href="#384323" title="scala.collection.mutable.DefaultEntry[K,V]">entry</a>.<a href="../../mutable/DefaultEntry.scala.html#123483" title="=&gt; V">value</a><span class="delimiter">)</span>;
    <span class="keyword">def</span> <a title="(idxFrom: Int, idxUntil: Int, totalSz: Int, es: scala.collection.mutable.DefaultEntry[K,V])ParHashMap.this.ParHashMapIterator with ParHashMap.this.SCPI" id="384229">newIterator</a><span class="delimiter">(</span><a title="Int" id="384335">idxFrom</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="384336">idxUntil</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="384337">totalSz</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="scala.collection.mutable.DefaultEntry[K,V]" id="384338">es</a>: <a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#384350" title="ParHashMap.this.ParHashMapIterator with ParHashMap.this.SCPI" class="keyword">new</a> <a href="#254263" title="anonymous class $anon extends ParHashMap.this.ParHashMapIterator with ParHashMap.this.SCPI" id="384350">ParHashMapIterator</a><span class="delimiter">(</span><a href="#384335" title="Int">idxFrom</a>, <a href="#384336" title="Int">idxUntil</a>, <a href="#384337" title="Int">totalSz</a>, <a href="#384338" title="scala.collection.mutable.DefaultEntry[K,V]">es</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41698" title="ParHashMap.this.SCPI">SCPI</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(out: java.io.ObjectOutputStream)Unit" id="254264">writeObject</a><span class="delimiter">(</span><a title="java.io.ObjectOutputStream" id="385375">out</a>: java.io.<span title="java.io.ObjectOutputStream">ObjectOutputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../mutable/HashTable.scala.html#50705" title="(out: java.io.ObjectOutputStream, value: scala.collection.mutable.DefaultEntry[K,V] =&gt; V)Unit">serializeTo</a><span class="delimiter">(</span><a href="#385375" title="java.io.ObjectOutputStream">out</a>, <a href="#385383" title="scala.collection.mutable.DefaultEntry[K,V]">_</a>.<a href="../../mutable/DefaultEntry.scala.html#123483" title="=&gt; V">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(in: java.io.ObjectInputStream)Unit" id="254265">readObject</a><span class="delimiter">(</span><a title="java.io.ObjectInputStream" id="385386">in</a>: java.io.<span title="java.io.ObjectInputStream">ObjectInputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../mutable/HashTable.scala.html#50702" title="[B](in: java.io.ObjectInputStream, f: (K, B) =&gt; scala.collection.mutable.DefaultEntry[K,V])Unit">init</a><span title="(in: java.io.ObjectInputStream, f: (K, V) =&gt; scala.collection.mutable.DefaultEntry[K,V])Unit" class="delimiter">[</span><a href="#18041" title="V">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#385386" title="java.io.ObjectInputStream">in</a>, <span title="scala.collection.mutable.DefaultEntry[K,V]" class="keyword">new</span> <a href="#254246" title="scala.collection.mutable.DefaultEntry[K,V]">Entry</a><span class="delimiter">(</span><a href="#385393" title="K">_</a>, <a href="#385394" title="V">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span><span class="delimiter">[</span>parallel<span class="delimiter">]</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Seq[String]" id="254266">brokenInvariants</a> = <span class="delimiter">{</span>
    <span class="comment">// bucket by bucket, count elements</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[List[java.lang.String]]" id="385398">buckets</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="385553">i</a> &lt;- <a href="../../../LowPriorityImplicits.scala.html#9447" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../TraversableLike.scala.html#26357" title="(f: Int =&gt; List[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],List[java.lang.String],scala.collection.immutable.IndexedSeq[List[java.lang.String]]])scala.collection.immutable.IndexedSeq[List[java.lang.String]]">until</a> <span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#32141" title="(x: Int)Int">/</a> <a href="../../mutable/HashTable.scala.html#50681" title="=&gt; Int">sizeMapBucketSize</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#254267" title="(i: Int)List[java.lang.String]">checkBucket</a><span class="delimiter">(</span><a href="#385553" title="Int">i</a><span class="delimiter">)</span>
    
    <span class="comment">// check if each element is in the position corresponding to its key</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[List[String]]" id="385399">elems</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="385868">i</a> &lt;- <a href="../../../LowPriorityImplicits.scala.html#9447" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../TraversableLike.scala.html#26357" title="(f: Int =&gt; List[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],List[String],scala.collection.immutable.IndexedSeq[List[String]]])scala.collection.immutable.IndexedSeq[List[String]]">until</a> <a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#254268" title="(i: Int)List[String]">checkEntry</a><span class="delimiter">(</span><a href="#385868" title="Int">i</a><span class="delimiter">)</span>
    
    <a href="#385398" title="scala.collection.immutable.IndexedSeq[List[java.lang.String]]">buckets</a>.<a href="../../TraversableLike.scala.html#26362" title="(f: List[java.lang.String] =&gt; scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[List[java.lang.String]],java.lang.String,scala.collection.immutable.IndexedSeq[java.lang.String]])scala.collection.immutable.IndexedSeq[java.lang.String]">flatMap</a><a href="../../immutable/IndexedSeq.scala.html#33943" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,java.lang.String,scala.collection.immutable.IndexedSeq[java.lang.String]]" class="delimiter">(</a><a title="List[java.lang.String]" id="385935">x</a> =&gt; <a href="#385935" title="List[java.lang.String]">x</a><span class="delimiter">)</span> <a href="../../TraversableLike.scala.html#26337" title="(that: scala.collection.GenTraversableOnce[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[java.lang.String],java.lang.String,Seq[String]])Seq[String]">++</a> <a href="#385399" title="scala.collection.immutable.IndexedSeq[List[String]]">elems</a>.<a href="../../TraversableLike.scala.html#26362" title="(f: List[String] =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[List[String]],String,scala.collection.immutable.IndexedSeq[String]])scala.collection.immutable.IndexedSeq[String]">flatMap</a><a href="../../immutable/IndexedSeq.scala.html#33943" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,String,scala.collection.immutable.IndexedSeq[String]]" class="delimiter">(</a><a title="List[String]" id="386009">x</a> =&gt; <a href="#386009" title="List[String]">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(i: Int)List[java.lang.String]" id="254267">checkBucket</a><span class="delimiter">(</span><a title="Int" id="385554">i</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])Int" id="385557">count</a><span class="delimiter">(</span><a title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]" id="385560">e</a>: <a href="../../mutable/HashEntry.scala.html#14669" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">HashEntry</a><span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Int.scala.html#378" title="Int">Int</a> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#385560" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#385557" title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])Int">count</a><span class="delimiter">(</span><a href="#385560" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123476" title="=&gt; scala.collection.mutable.DefaultEntry[K,V]">next</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="385558">expected</a> = <a href="../../../Array.scala.html#26521" title="(i: Int)Int">sizemap</a><span class="delimiter">(</span><a href="#385554" title="Int">i</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="385559">found</a> = <span class="delimiter">(</span><span class="delimiter">(</span><a href="#385554" title="Int">i</a> <a href="../../../LowPriorityImplicits.scala.html#9447" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">*</a> <a href="../../mutable/HashTable.scala.html#50681" title="=&gt; Int">sizeMapBucketSize</a><span class="delimiter">)</span> <a href="../../../runtime/RichInt.scala.html#32027" title="(end: Int)scala.collection.immutable.Range">until</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#385554" title="Int">i</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="../../mutable/HashTable.scala.html#50681" title="=&gt; Int">sizeMapBucketSize</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../TraversableOnce.scala.html#30946" title="(z: Int)(op: (Int, Int) =&gt; Int)Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="Int" id="385701">acc</a>, <a title="Int" id="385702">c</a><span class="delimiter">)</span> =&gt; <a href="#385701" title="Int">acc</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#385557" title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])Int">count</a><span class="delimiter">(</span><a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">table</a><span class="delimiter">(</span><a href="#385702" title="Int">c</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="List[java.lang.String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#385559" title="Int">found</a> <a href="../../../Int.scala.html#32070" title="(x: Int)Boolean">!=</a> <a href="#385558" title="Int">expected</a><span class="delimiter">)</span> <a href="../../immutable/List.scala.html#26193" title="(xs: java.lang.String*)List[java.lang.String]">List</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Found &quot;)" class="string">&quot;Found &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#385559" title="Int">found</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; elements, while sizemap showed &quot;)" class="string">&quot; elements, while sizemap showed &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#385558" title="Int">expected</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="../../immutable/List.scala.html#13674" title="object Nil">Nil</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(i: Int)List[String]" id="254268">checkEntry</a><span class="delimiter">(</span><a title="Int" id="385869">i</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])List[String]" id="385872">check</a><span class="delimiter">(</span><a title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]" id="385873">e</a>: <a href="../../mutable/HashEntry.scala.html#14669" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">HashEntry</a><span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../immutable/List.scala.html#14021" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../immutable/List.scala.html#13674" title="object Nil">Nil</a> <span class="keyword">else</span>
      <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50730" title="(hcode: Int)Int">index</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50682" title="(key: K)Int">elemHashCode</a><span class="delimiter">(</span><a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123475" title="=&gt; K">key</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#32063" title="(x: Int)Boolean">==</a> <a href="#385869" title="Int">i</a><span class="delimiter">)</span> <a href="#385872" title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])List[String]">check</a><span class="delimiter">(</span><a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123476" title="=&gt; scala.collection.mutable.DefaultEntry[K,V]">next</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;Element &quot;)" class="string">&quot;Element &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123475" title="=&gt; K">key</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; at &quot;)" class="string">&quot; at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#385869" title="Int">i</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../mutable/HashTable.scala.html#50682" title="(key: K)Int">elemHashCode</a><span class="delimiter">(</span><a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123475" title="=&gt; K">key</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; maps to &quot;)" class="string">&quot; maps to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../mutable/HashTable.scala.html#50730" title="(hcode: Int)Int">index</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50682" title="(key: K)Int">elemHashCode</a><span class="delimiter">(</span><a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123475" title="=&gt; K">key</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../immutable/List.scala.html#26456" title="(x: String)List[String]">::</a> <a href="#385872" title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])List[String]">check</a><span class="delimiter">(</span><a href="#385873" title="scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">e</a>.<a href="../../mutable/HashEntry.scala.html#123476" title="=&gt; scala.collection.mutable.DefaultEntry[K,V]">next</a><span class="delimiter">)</span>
    <a href="#385872" title="(e: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])List[String]">check</a><span class="delimiter">(</span><a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">table</a><span class="delimiter">(</span><a href="#385869" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="comment">/** $factoryInfo
 *  @define Coll mutable.ParHashMap
 *  @define coll parallel hash map
 */</span>
<span class="keyword">object</span> <a title="object scala.collection.parallel.mutable.ParHashMap" id="386105">ParHashMap</a> <a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="keyword">extends</a> <a href="../../generic/ParMapFactory.scala.html#12723" title="scala.collection.generic.ParMapFactory[scala.collection.parallel.mutable.ParHashMap]">ParMapFactory</a><span class="delimiter">[</span>ParHashMap<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="383892">iters</a> = <span title="Int(0)" class="int">0</span>
  
  <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.parallel.mutable.ParHashMap[K,V]" id="383894">empty</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="383897">K</a>, <a title="&gt;: Nothing &lt;: Any" id="383898">V</a><span class="delimiter">]</span>: <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <a href="#254247" title="()scala.collection.parallel.mutable.ParHashMap[K,V]" class="keyword">new</a> <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.parallel.Combiner[(K, V),scala.collection.parallel.mutable.ParHashMap[K,V]]" id="383899">newCombiner</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="383902">K</a>, <a title="&gt;: Nothing &lt;: Any" id="383903">V</a><span class="delimiter">]</span>: <a href="../Combiner.scala.html#16369" title="scala.collection.parallel.Combiner[(K, V),scala.collection.parallel.mutable.ParHashMap[K,V]]">Combiner</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span>, ParHashMap<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348697" title="[K, V]=&gt; scala.collection.parallel.mutable.ParHashMapCombiner[K,V]">apply</a><span title="scala.collection.parallel.mutable.ParHashMapCombiner[K,V]" class="delimiter">[</span><a href="#383902" title="K">K</a>, <a href="#383903" title="V">V</a><span class="delimiter">]</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.generic.CanCombineFrom[scala.collection.parallel.mutable.ParHashMap.Coll,(K, V),scala.collection.parallel.mutable.ParHashMap[K,V]]" id="383904">canBuildFrom</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="383907">K</a>, <a title="&gt;: Nothing &lt;: Any" id="383908">V</a><span class="delimiter">]</span>: <a href="../../generic/CanCombineFrom.scala.html#12840" title="scala.collection.generic.CanCombineFrom[scala.collection.parallel.mutable.ParHashMap.Coll,(K, V),scala.collection.parallel.mutable.ParHashMap[K,V]]">CanCombineFrom</a><span class="delimiter">[</span>Coll, <span class="delimiter">(</span>K, V<span class="delimiter">)</span>, ParHashMap<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="scala.collection.parallel.mutable.ParHashMap.CanCombineFromMap[K,V]" class="keyword">new</span> <a href="../../generic/ParMapFactory.scala.html#117912" title="scala.collection.parallel.mutable.ParHashMap.CanCombineFromMap[K,V]">CanCombineFromMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ParHashMapCombiner[K, V] extends collection.parallel.package.BucketCombiner[(K, V),scala.collection.parallel.mutable.ParHashMap[K,V],scala.collection.mutable.DefaultEntry[K,V],scala.collection.parallel.mutable.ParHashMapCombiner[K,V]] with collection.mutable.HashTable.HashUtils[K] with ScalaObject" id="17827">ParHashMapCombiner</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="18042">K</a>, <a title="&gt;: Nothing &lt;: Any" id="18043">V</a><span class="delimiter">]</span><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="348724">tableLoadFactor</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span>
<span class="keyword">extends</span> collection.parallel.<a href="../package.scala.html#24918" title="collection.parallel.package.BucketCombiner[(K, V),scala.collection.parallel.mutable.ParHashMap[K,V],scala.collection.mutable.DefaultEntry[K,V],scala.collection.parallel.mutable.ParHashMapCombiner[K,V]]">BucketCombiner</a><span class="delimiter">[</span><span class="delimiter">(</span>K, V<span class="delimiter">)</span>, ParHashMap<span class="delimiter">[</span>K, V<span class="delimiter">]</span>, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span>, ParHashMapCombiner<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348691" title="=&gt; Int">numblocks</a><span class="delimiter">)</span>
   <span class="keyword">with</span> collection.mutable.HashTable.<a href="../../mutable/HashTable.scala.html#50673" title="collection.mutable.HashTable.HashUtils[K]">HashUtils</a><span class="delimiter">[</span>K<span class="delimiter">]</span>
<span class="delimiter">{</span>
<span class="comment">//self: EnvironmentPassingCombiner[(K, V), ParHashMap[K, V]] =&gt;</span>
  <span class="keyword">import</span> collection.parallel.<a href="../package.scala.html#24895" title="=&gt; scala.collection.parallel.TaskSupport">tasksupport</a>._
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="348712">mask</a> = <a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348693" title="=&gt; Int">discriminantmask</a>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="348715">nonmasklen</a> = <a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348695" title="=&gt; Int">nonmasklength</a>
  
  <span class="keyword">def</span> <a title="(elem: (K, V))ParHashMapCombiner.this.type" id="348717">+=</a><span class="delimiter">(</span><a title="(K, V)" id="386126">elem</a>: <a href="../../../Tuple2.scala.html#1512" title="(K, V)" class="delimiter">(</a>K, V<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../package.scala.html#218317" title="(x$1: Int)Unit">sz</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="keyword">val</span> <a title="Int" id="386149">hc</a> = <a href="../../mutable/HashTable.scala.html#50683" title="(hcode: Int)Int">improve</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50682" title="(key: K)Int">elemHashCode</a><span class="delimiter">(</span><a href="#386126" title="(K, V)">elem</a>.<a href="../../../Tuple2.scala.html#30718" title="=&gt; K">_1</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="386150">pos</a> = <span class="delimiter">(</span><a href="#386149" title="Int">hc</a> <a href="../../../Int.scala.html#32056" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#348715" title="=&gt; Int">nonmasklen</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">buckets</a><span class="delimiter">(</span><a href="#386150" title="Int">pos</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// initialize bucket</span>
      <a href="../../../Array.scala.html#26522" title="(i: Int, x: scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]])Unit">buckets</a><span class="delimiter">(</span><a href="#386150" title="Int">pos</a><span class="delimiter">)</span> = <a href="../../../reflect/ClassManifest.scala.html#34159" title="scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]" class="keyword">new</a> <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">UnrolledBuffer</a><span class="delimiter">[</span>DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="comment">// add to bucket</span>
    <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">buckets</a><span class="delimiter">(</span><a href="#386150" title="Int">pos</a><span class="delimiter">)</span> <a href="../../mutable/UnrolledBuffer.scala.html#282110" title="(elem: scala.collection.mutable.DefaultEntry[K,V])scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">+=</a> <span title="scala.collection.mutable.DefaultEntry[K,V]" class="keyword">new</span> <a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">(</span><a href="#386126" title="(K, V)">elem</a>.<a href="../../../Tuple2.scala.html#30718" title="=&gt; K">_1</a>, <a href="#386126" title="(K, V)">elem</a>.<a href="../../../Tuple2.scala.html#30720" title="=&gt; V">_2</a><span class="delimiter">)</span>
    <a href="#17827" title="ParHashMapCombiner.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()scala.collection.parallel.mutable.ParHashMap[K,V]" id="348718">result</a>: <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> = <span title="scala.collection.parallel.mutable.ParHashMap[K,V]" class="keyword">if</span> <span class="delimiter">(</span><a href="../package.scala.html#218319" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#32098" title="(x: Int)Boolean">&gt;=</a> <span class="delimiter">(</span><a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348691" title="=&gt; Int">numblocks</a> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="../../mutable/HashTable.scala.html#50681" title="=&gt; Int">sizeMapBucketSize</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// 1024</span>
    <span class="comment">// construct table</span>
    <span class="keyword">val</span> <a title="ParHashMapCombiner.this.AddingHashTable" id="386225">table</a> = <span title="ParHashMapCombiner.this.AddingHashTable" class="keyword">new</span> <a href="#348719" title="ParHashMapCombiner.this.AddingHashTable">AddingHashTable</a><span class="delimiter">(</span><a href="../package.scala.html#218319" title="=&gt; Int">size</a>, <a href="#348724" title="=&gt; Int">tableLoadFactor</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]" id="386226">bucks</a> = <a href="../../../Predef.scala.html#9599" title="(xs: Array[scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]])scala.collection.mutable.ArrayOps[scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]]">buckets</a>.<a href="../../TraversableLike.scala.html#26357" title="(f: scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]] =&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]])(implicit bf: scala.collection.generic.CanBuildFrom[Array[scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]],scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]],Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]])Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]">map</a><a href="../../../Array.scala.html#39989" title="(implicit m: scala.reflect.ClassManifest[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]])scala.collection.generic.CanBuildFrom[Array[_],scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]],Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]]" class="delimiter">(</a><a title="scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]" id="386677">b</a> =&gt; <span title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#386677" title="scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">b</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#386677" title="scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">b</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282100" title="=&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">headPtr</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="386227">insertcount</a> = <a href="../Tasks.scala.html#215849" title="(task: collection.parallel.package.tasksupport.Task[Int,ParHashMapCombiner.this.FillBlocks])Int">executeAndWaitResult</a><span class="delimiter">(</span><span title="ParHashMapCombiner.this.FillBlocks" class="keyword">new</span> <a href="#348721" title="ParHashMapCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">(</span><a href="#386226" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]">bucks</a>, <a href="#386225" title="ParHashMapCombiner.this.AddingHashTable">table</a>, <span title="Int(0)" class="int">0</span>, <a href="#386226" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]">bucks</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#386225" title="ParHashMapCombiner.this.AddingHashTable">table</a>.<a href="#386235" title="(sz: Int)Unit">setSize</a><span class="delimiter">(</span><a href="#386227" title="Int">insertcount</a><span class="delimiter">)</span>
    <span class="comment">// TODO compare insertcount and size to see if compression is needed</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]" id="386228">c</a> = <a href="#386225" title="ParHashMapCombiner.this.AddingHashTable">table</a>.<a href="../../mutable/HashTable.scala.html#50732" title="=&gt; scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">hashTableContents</a>
    <span title="scala.collection.parallel.mutable.ParHashMap[K,V]" class="keyword">new</span> <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">(</span><a href="#386228" title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">c</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <span class="comment">// construct a normal table and fill it sequentially</span>
    <span class="comment">// TODO parallelize by keeping separate sizemaps and merging them</span>
    <span class="keyword">val</span> <a title="table extends java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]" id="386788">table</a> = <a href="#386792" title="java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]{def insertEntry(e: scala.collection.mutable.DefaultEntry[K,V]): Unit}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]" id="386792">HashTable</a><span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(e: scala.collection.mutable.DefaultEntry[K,V])Unit" id="386794">insertEntry</a><span class="delimiter">(</span><a title="scala.collection.mutable.DefaultEntry[K,V]" id="386795">e</a>: <a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#386792" title="java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]{def insertEntry(e: scala.collection.mutable.DefaultEntry[K,V]): Unit}" class="keyword">super</a>.<a href="../../mutable/HashTable.scala.html#50708" title="(key: K)scala.collection.mutable.DefaultEntry[K,V]">findEntry</a><span class="delimiter">(</span><a href="#386795" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123481" title="=&gt; K">key</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#386792" title="java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]{def insertEntry(e: scala.collection.mutable.DefaultEntry[K,V]): Unit}" class="keyword">super</a>.<a href="../../mutable/HashTable.scala.html#50709" title="(e: scala.collection.mutable.DefaultEntry[K,V])Unit">addEntry</a><span class="delimiter">(</span><a href="#386795" title="scala.collection.mutable.DefaultEntry[K,V]">e</a><span class="delimiter">)</span>
      <a href="../../mutable/HashTable.scala.html#50723" title="(tableLength: Int)Unit">sizeMapInit</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">var</span> <a title="Int" id="386789">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#386789" title="Int">i</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348691" title="=&gt; Int">numblocks</a><span class="delimiter">)</span> <a href="#386791" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">buckets</a><span class="delimiter">(</span><a href="#386789" title="Int">i</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.DefaultEntry[K,V]" id="386839">elem</a> &lt;- <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[scala.collection.mutable.DefaultEntry[K,V]]">buckets</a><a href="../../mutable/UnrolledBuffer.scala.html#282113" title="(f: scala.collection.mutable.DefaultEntry[K,V] =&gt; Unit)Unit" class="delimiter">(</a><a href="#386789" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#386788" title="table extends java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]">table</a>.<a href="#386812" title="(e: scala.collection.mutable.DefaultEntry[K,V])Unit">insertEntry</a><span class="delimiter">(</span><a href="#386839" title="scala.collection.mutable.DefaultEntry[K,V]">elem</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#386789" title="Int">i</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]" id="386790">c</a> = <a href="#386788" title="table extends java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]">table</a>.<a href="../../mutable/HashTable.scala.html#50732" title="=&gt; scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">hashTableContents</a>
    <span title="scala.collection.parallel.mutable.ParHashMap[K,V]" class="keyword">new</span> <a href="#17686" title="scala.collection.parallel.mutable.ParHashMap[K,V]">ParHashMap</a><span class="delimiter">(</span><a href="#386790" title="scala.collection.mutable.HashTable.Contents[K,scala.collection.mutable.DefaultEntry[K,V]]">c</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/* classes */</span>
  
  <span class="comment">/** A hash table which will never resize itself. Knowing the number of elements in advance,
   *  it allocates the table of the required size when created.
   *  
   *  Entries are added using the `insertEntry` method. This method checks whether the element
   *  exists and updates the size map. It returns false if the key was already in the table,
   *  and true if the key was successfully inserted. It does not update the number of elements
   *  in the table.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>ParHashMapCombiner<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class AddingHashTable extends java.lang.Object with scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]] with ScalaObject" id="348719">AddingHashTable</a><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><a title="Int" id="386238">numelems</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="386239">lf</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../mutable/HashTable.scala.html#15053" title="scala.collection.mutable.HashTable[K,scala.collection.mutable.DefaultEntry[K,V]]">HashTable</a><span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="../../mutable/HashTable.scala.html#15054" title="object scala.collection.mutable.HashTable">HashTable</a>._
    <a href="../../mutable/HashTable.scala.html#50687" title="(x$1: Int)Unit">_loadFactor</a> = <a href="#386239" title="Int">lf</a>
    <a href="../../mutable/HashTable.scala.html#50690" title="(x$1: Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]])Unit">table</a> = <span title="Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]" class="keyword">new</span> <a href="../../../Array.scala.html#1422" title="Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">Array</a><span class="delimiter">[</span>HashEntry<span class="delimiter">[</span>K, DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50672" title="(expectedSize: Int)Int">capacity</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50671" title="(_loadFactor: Int, thr: Int)Int">sizeForThreshold</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50686" title="=&gt; Int">_loadFactor</a>, <a href="#386238" title="Int">numelems</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../mutable/HashTable.scala.html#50693" title="(x$1: Int)Unit">tableSize</a> = <span title="Int(0)" class="int">0</span>
    <a href="../../mutable/HashTable.scala.html#50696" title="(x$1: Int)Unit">threshold</a> = <a href="../../mutable/HashTable.scala.html#50670" title="(_loadFactor: Int, size: Int)Int">newThreshold</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50686" title="=&gt; Int">_loadFactor</a>, <a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <a href="../../mutable/HashTable.scala.html#50723" title="(tableLength: Int)Unit">sizeMapInit</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(sz: Int)Unit" id="386235">setSize</a><span class="delimiter">(</span><a title="Int" id="386770">sz</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <a href="../../mutable/HashTable.scala.html#50693" title="(x$1: Int)Unit">tableSize</a> = <a href="#386770" title="Int">sz</a>
    <span class="keyword">def</span> <a title="(e: scala.collection.mutable.DefaultEntry[K,V])Boolean" id="386236">insertEntry</a><span class="delimiter">(</span><span class="comment">/*block: Int, */</span><a title="scala.collection.mutable.DefaultEntry[K,V]" id="386857">e</a>: <a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="386860">h</a> = <a href="../../mutable/HashTable.scala.html#50730" title="(hcode: Int)Int">index</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50682" title="(key: K)Int">elemHashCode</a><span class="delimiter">(</span><a href="#386857" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123481" title="=&gt; K">key</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// assertCorrectBlock(h, block)</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="386861">olde</a> = <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]">table</a><span class="delimiter">(</span><a href="#386860" title="Int">h</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.mutable.DefaultEntry[K,V]" class="delimiter">[</span><a href="../../mutable/DefaultEntry.scala.html#14588" title="scala.collection.mutable.DefaultEntry[K,V]">DefaultEntry</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span>
      
      <span class="comment">// check if key already exists</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="386862">ce</a> = <a href="#386861" title="scala.collection.mutable.DefaultEntry[K,V]">olde</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#386862" title="scala.collection.mutable.DefaultEntry[K,V]">ce</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#386863" title="Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#386862" title="scala.collection.mutable.DefaultEntry[K,V]">ce</a>.<a href="../../mutable/DefaultEntry.scala.html#123481" title="=&gt; K">key</a> <span title="(x$1: Any)Boolean">==</span> <a href="#386857" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/DefaultEntry.scala.html#123481" title="=&gt; K">key</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#386860" title="Int">h</a> = -<span title="Int(-1)" class="int">1</span>
          <a href="#386862" title="scala.collection.mutable.DefaultEntry[K,V]">ce</a> = <span title="Null(null)" class="keyword">null</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#386862" title="scala.collection.mutable.DefaultEntry[K,V]">ce</a> = <a href="#386862" title="scala.collection.mutable.DefaultEntry[K,V]">ce</a>.<a href="../../mutable/HashEntry.scala.html#123476" title="=&gt; scala.collection.mutable.DefaultEntry[K,V]">next</a>
      <span class="delimiter">}</span>
      
      <span class="comment">// if key does not already exist</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#386860" title="Int">h</a> <a href="../../../Int.scala.html#32070" title="(x: Int)Boolean">!=</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#386857" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>.<a href="../../mutable/HashEntry.scala.html#123477" title="(x$1: scala.collection.mutable.DefaultEntry[K,V])Unit">next</a> = <a href="#386861" title="scala.collection.mutable.DefaultEntry[K,V]">olde</a>
        <a href="../../../Array.scala.html#26522" title="(i: Int, x: scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]])Unit">table</a><span class="delimiter">(</span><a href="#386860" title="Int">h</a><span class="delimiter">)</span> = <a href="#386857" title="scala.collection.mutable.DefaultEntry[K,V]">e</a>
        <a href="../../mutable/HashTable.scala.html#50718" title="(h: Int)Unit">nnSizeMapAdd</a><span class="delimiter">(</span><a href="#386860" title="Int">h</a><span class="delimiter">)</span>
        <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(h: Int, block: Int)Unit" id="386237">assertCorrectBlock</a><span class="delimiter">(</span><a title="Int" id="386874">h</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="386875">block</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="386877">blocksize</a> = <a href="../../mutable/HashTable.scala.html#50689" title="=&gt; Array[scala.collection.mutable.HashEntry[K,scala.collection.mutable.DefaultEntry[K,V]]]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#32141" title="(x: Int)Int">/</a> <span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32054" title="(x: Int)Int">&lt;&lt;</a> <a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348689" title="=&gt; Int">discriminantbits</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#32892" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#386874" title="Int">h</a> <a href="../../../Int.scala.html#32098" title="(x: Int)Boolean">&gt;=</a> <a href="#386875" title="Int">block</a> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#386877" title="Int">blocksize</a> <a href="../../../Boolean.scala.html#32896" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#386874" title="Int">h</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <span class="delimiter">(</span><a href="#386875" title="Int">block</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#386877" title="Int">blocksize</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../Predef.scala.html#9567" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;trying to put &quot;)" class="string">&quot;trying to put &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#386874" title="Int">h</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; into block no.: &quot;)" class="string">&quot; into block no.: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#386875" title="Int">block</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, range: [&quot;)" class="string">&quot;, range: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#386875" title="Int">block</a> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#386877" title="Int">blocksize</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#386875" title="Int">block</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#386877" title="Int">blocksize</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span><span class="delimiter">)</span>
        <a href="../../../Predef.scala.html#9538" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#386874" title="Int">h</a> <a href="../../../Int.scala.html#32098" title="(x: Int)Boolean">&gt;=</a> <a href="#386875" title="Int">block</a> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#386877" title="Int">blocksize</a> <a href="../../../Boolean.scala.html#32896" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#386874" title="Int">h</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <span class="delimiter">(</span><a href="#386875" title="Int">block</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#386877" title="Int">blocksize</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/* tasks */</span>
  
  <span class="keyword">import</span> <a href="../../mutable/UnrolledBuffer.scala.html#15129" title="object scala.collection.mutable.UnrolledBuffer">UnrolledBuffer</a>.Unrolled
  
  <span class="keyword">class</span> <a title="class FillBlocks extends java.lang.Object with collection.parallel.package.tasksupport.Task[Int,ParHashMapCombiner.this.FillBlocks] with ScalaObject" id="348721">FillBlocks</a><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><a title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]" id="386765">buckets</a>: <a href="../../../Array.scala.html#1422" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]">Array</a><span class="delimiter">[</span>Unrolled<span class="delimiter">[</span>DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>, <a title="ParHashMapCombiner.this.AddingHashTable" id="386766">table</a>: <a href="#348719" title="ParHashMapCombiner.this.AddingHashTable">AddingHashTable</a>, <a title="Int" id="386767">offset</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="386768">howmany</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../Tasks.scala.html#215831" title="collection.parallel.package.tasksupport.Task[Int,ParHashMapCombiner.this.FillBlocks]">Task</a><span class="delimiter">[</span>Int, FillBlocks<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Int" id="386757">result</a> = Int.<span title="Int(-2147483648)">MinValue</span>
    <span class="keyword">def</span> <a title="(prev: Option[Int])Unit" id="386759">leaf</a><span class="delimiter">(</span><a title="Option[Int]" id="386948">prev</a>: <a href="../../../Option.scala.html#552" title="Option[Int]">Option</a><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="386952">i</a> = <a href="#386767" title="Int">offset</a>
      <span class="keyword">val</span> <a title="Int" id="386953">until</a> = <a href="#386767" title="Int">offset</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#386768" title="Int">howmany</a>
      <a href="#386757" title="(x$1: Int)Unit">result</a> = <span title="Int(0)" class="int">0</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#386952" title="Int">i</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <a href="#386953" title="Int">until</a><span class="delimiter">)</span> <a href="#386959" title="()Unit" class="delimiter">{</a>
        <a href="#386757" title="(x$1: Int)Unit">result</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <a href="#386760" title="(block: Int, elems: scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]])Int">fillBlock</a><span class="delimiter">(</span><a href="#386952" title="Int">i</a>, <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">buckets</a><span class="delimiter">(</span><a href="#386952" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#386952" title="Int">i</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(block: Int, elems: scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]])Int" id="386760">fillBlock</a><span class="delimiter">(</span><a title="Int" id="386968">block</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]" id="386969">elems</a>: <a href="../../mutable/UnrolledBuffer.scala.html#282162" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">Unrolled</a><span class="delimiter">[</span>DefaultEntry<span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="386972">insertcount</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]" id="386973">unrolled</a> = <a href="#386969" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">elems</a>
      <span class="keyword">var</span> <a title="Int" id="386974">i</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">val</span> <a title="ParHashMapCombiner.this.AddingHashTable" id="386975">t</a> = <a href="#386766" title="ParHashMapCombiner.this.AddingHashTable">table</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#386973" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">unrolled</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#386976" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Array[scala.collection.mutable.DefaultEntry[K,V]]" id="386977">chunkarr</a> = <a href="#386973" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282174" title="=&gt; Array[scala.collection.mutable.DefaultEntry[K,V]]">array</a>
        <span class="keyword">val</span> <a title="Int" id="386978">chunksz</a> = <a href="#386973" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282171" title="=&gt; Int">size</a>
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#386974" title="Int">i</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <a href="#386978" title="Int">chunksz</a><span class="delimiter">)</span> <a href="#386979" title="()Unit" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="scala.collection.mutable.DefaultEntry[K,V]" id="386984">elem</a> = <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.DefaultEntry[K,V]">chunkarr</a><span class="delimiter">(</span><a href="#386974" title="Int">i</a><span class="delimiter">)</span>
          <span class="comment">// assertCorrectBlock(block, elem.key)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#386975" title="ParHashMapCombiner.this.AddingHashTable">t</a>.<a href="#386236" title="(e: scala.collection.mutable.DefaultEntry[K,V])Boolean">insertEntry</a><span class="delimiter">(</span><a href="#386984" title="scala.collection.mutable.DefaultEntry[K,V]">elem</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#386972" title="Int">insertcount</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
          <a href="#386974" title="Int">i</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span>
        <a href="#386974" title="Int">i</a> = <span title="Int(0)" class="int">0</span>
        <a href="#386973" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">unrolled</a> = <a href="#386973" title="scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282177" title="=&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]">next</a>
      <span class="delimiter">}</span>
      <a href="#386972" title="Int">insertcount</a>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(block: Int, k: K)Unit" id="386761">assertCorrectBlock</a><span class="delimiter">(</span><a title="Int" id="386997">block</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="K" id="386998">k</a>: <a href="#18042" title="K">K</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="387000">hc</a> = <a href="../../mutable/HashTable.scala.html#50683" title="(hcode: Int)Int">improve</a><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#50682" title="(key: K)Int">elemHashCode</a><span class="delimiter">(</span><a href="#386998" title="K">k</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#387000" title="Int">hc</a> <a href="../../../Int.scala.html#32056" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#348715" title="=&gt; Int">nonmasklen</a><span class="delimiter">)</span> <a href="../../../Int.scala.html#32070" title="(x: Int)Boolean">!=</a> <a href="#386997" title="Int">block</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../Predef.scala.html#9567" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="#387000" title="Int">hc</a> <a href="../../../Int.scala.html#32053" title="(x: String)String">+</a> <span title="java.lang.String(&quot; goes to &quot;)" class="string">&quot; goes to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><a href="#387000" title="Int">hc</a> <a href="../../../Int.scala.html#32056" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#348715" title="=&gt; Int">nonmasklen</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, while expected block is &quot;)" class="string">&quot;, while expected block is &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#386997" title="Int">block</a><span class="delimiter">)</span>
        <a href="../../../Predef.scala.html#9538" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#387000" title="Int">hc</a> <a href="../../../Int.scala.html#32056" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#348715" title="=&gt; Int">nonmasklen</a><span class="delimiter">)</span> <a href="../../../Int.scala.html#32063" title="(x: Int)Boolean">==</a> <a href="#386997" title="Int">block</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; List[ParHashMapCombiner.this.FillBlocks]" id="386762">split</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="387035">fp</a> = <a href="#386768" title="Int">howmany</a> <a href="../../../Int.scala.html#32141" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span>
      <a href="../../immutable/List.scala.html#26193" title="(xs: ParHashMapCombiner.this.FillBlocks*)List[ParHashMapCombiner.this.FillBlocks]">List</a><span class="delimiter">(</span><span title="ParHashMapCombiner.this.FillBlocks" class="keyword">new</span> <a href="#348721" title="ParHashMapCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">(</span><a href="#386765" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]">buckets</a>, <a href="#386766" title="ParHashMapCombiner.this.AddingHashTable">table</a>, <a href="#386767" title="Int">offset</a>, <a href="#387035" title="Int">fp</a><span class="delimiter">)</span>, <span title="ParHashMapCombiner.this.FillBlocks" class="keyword">new</span> <a href="#348721" title="ParHashMapCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">(</span><a href="#386765" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[scala.collection.mutable.DefaultEntry[K,V]]]">buckets</a>, <a href="#386766" title="ParHashMapCombiner.this.AddingHashTable">table</a>, <a href="#386767" title="Int">offset</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#387035" title="Int">fp</a>, <a href="#386768" title="Int">howmany</a> <a href="../../../Int.scala.html#32127" title="(x: Int)Int">-</a> <a href="#387035" title="Int">fp</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: ParHashMapCombiner.this.FillBlocks)Unit" id="386763">merge</a><span class="delimiter">(</span><a title="ParHashMapCombiner.this.FillBlocks" id="387055">that</a>: <a href="#348721" title="ParHashMapCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#348721" title="FillBlocks.this.type" class="keyword">this</a>.<a href="#386757" title="(x$1: Int)Unit">result</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <a href="#387055" title="ParHashMapCombiner.this.FillBlocks">that</a>.<a href="#386757" title="=&gt; Int">result</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="386764">shouldSplitFurther</a> = <a href="#386768" title="Int">howmany</a> <a href="../../../Int.scala.html#32091" title="(x: Int)Boolean">&gt;</a> collection.parallel.<a href="../package.scala.html#24890" title="(sz: Int, parallelismLevel: Int)Int">thresholdFromSize</a><span class="delimiter">(</span><a href="#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="#348691" title="=&gt; Int">numblocks</a>, <a href="../Tasks.scala.html#215854" title="=&gt; Int">parallelismLevel</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>parallel<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object scala.collection.parallel.mutable.ParHashMapCombiner" id="17828">ParHashMapCombiner</a> <a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="348689">discriminantbits</a> = <span title="Int(5)" class="int">5</span>
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="348691">numblocks</a> = <span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32054" title="(x: Int)Int">&lt;&lt;</a> <a href="#348689" title="=&gt; Int">discriminantbits</a>
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="348693">discriminantmask</a> = <span class="delimiter">(</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32054" title="(x: Int)Int">&lt;&lt;</a> <a href="#348689" title="=&gt; Int">discriminantbits</a><span class="delimiter">)</span> <a href="../../../Int.scala.html#32127" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>;
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="348695">nonmasklength</a> = <span title="Int(32)" class="int">32</span> <a href="../../../Int.scala.html#32127" title="(x: Int)Int">-</a> <a href="#348689" title="=&gt; Int">discriminantbits</a>
  
  <span class="keyword">def</span> <a title="[K, V]=&gt; scala.collection.parallel.mutable.ParHashMapCombiner[K,V]" id="348697">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="348700">K</a>, <a title="&gt;: Nothing &lt;: Any" id="348701">V</a><span class="delimiter">]</span> = <a href="#348705" title="scala.collection.parallel.mutable.ParHashMapCombiner[K,V]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.parallel.mutable.ParHashMapCombiner[K,V]" id="348705">ParHashMapCombiner</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../mutable/HashTable.scala.html#15054" title="object scala.collection.mutable.HashTable">HashTable</a>.<a href="../../mutable/HashTable.scala.html#50665" title="=&gt; Int">defaultLoadFactor</a><span class="delimiter">)</span> <span class="delimiter">{</span><span class="delimiter">}</span> <span class="comment">// was: with EnvironmentPassingCombiner[(K, V), ParHashMap[K, V]]</span>
<span class="delimiter">}</span>















        </pre>
    </body>
</html>