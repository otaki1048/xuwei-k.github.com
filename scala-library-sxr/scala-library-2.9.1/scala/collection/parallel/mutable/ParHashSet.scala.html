<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/collection/parallel/mutable/ParHashSet.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="keyword">package</span> scala.collection.parallel.mutable

<span class="keyword">import</span> collection.generic._
<span class="keyword">import</span> collection.mutable.HashSet
<span class="keyword">import</span> collection.mutable.FlatHashTable
<span class="keyword">import</span> collection.parallel.Combiner
<span class="keyword">import</span> collection.mutable.UnrolledBuffer

<span class="comment">/** A parallel hash set.
 *  
 *  `ParHashSet` is a parallel set which internally keeps elements within a hash table.
 *  It uses linear probing to resolve collisions.
 *  
 *  @tparam T        type of the elements in the $coll.
 *  
 *  @define Coll ParHashSet
 *  @define coll parallel hash set
 *  
 *  @author Aleksandar Prokopec
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class ParHashSet[T] extends java.lang.Object with scala.collection.parallel.mutable.ParSet[T] with scala.collection.generic.GenericParTemplate[T,scala.collection.parallel.mutable.ParHashSet] with scala.collection.parallel.mutable.ParSetLike[T,scala.collection.parallel.mutable.ParHashSet[T],scala.collection.mutable.HashSet[T]] with scala.collection.parallel.mutable.ParFlatHashTable[T] with Serializable with ScalaObject" id="17872">ParHashSet</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="18052">T</a><span class="delimiter">]</span> <a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="keyword">private</a><span class="delimiter">[</span>collection<span class="delimiter">]</span> <span class="delimiter">(</span><a title="scala.collection.mutable.FlatHashTable.Contents[T]" id="256016">contents</a>: FlatHashTable.<a href="../../mutable/FlatHashTable.scala.html#85788" title="scala.collection.mutable.FlatHashTable.Contents[T]">Contents</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="ParSet.scala.html#17764" title="scala.collection.parallel.mutable.ParSet[T]">ParSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../generic/GenericParTemplate.scala.html#12891" title="scala.collection.generic.GenericParTemplate[T,scala.collection.parallel.mutable.ParHashSet]">GenericParTemplate</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="ParSetLike.scala.html#17800" title="scala.collection.parallel.mutable.ParSetLike[T,scala.collection.parallel.mutable.ParHashSet[T],scala.collection.mutable.HashSet[T]]">ParSetLike</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span>, collection.mutable.HashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="ParFlatHashTable.scala.html#17749" title="scala.collection.parallel.mutable.ParFlatHashTable[T]">ParFlatHashTable</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../../Serializable.scala.html#894" title="Serializable">Serializable</a>
<span class="delimiter">{</span>
  <a href="../../mutable/FlatHashTable.scala.html#85842" title="(c: scala.collection.mutable.FlatHashTable.Contents[T])Unit">initWithContents</a><span class="delimiter">(</span><a href="#256016" title="scala.collection.mutable.FlatHashTable.Contents[T]">contents</a><span class="delimiter">)</span>
  <span class="comment">// println(&quot;----&gt; new par hash set!&quot;)</span>
  <span class="comment">// java.lang.Thread.dumpStack</span>
  <span class="comment">// println(debugInformation)</span>
  
  <span class="keyword">def</span> <a title="()scala.collection.parallel.mutable.ParHashSet[T]" id="255870" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#17872" title="ParHashSet.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.mutable.ParHashSet.type" id="255871">companion</a> = <a href="#387760" title="object scala.collection.parallel.mutable.ParHashSet">ParHashSet</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.mutable.ParHashSet[T]" id="255872">empty</a> = <a href="#255870" title="()scala.collection.parallel.mutable.ParHashSet[T]" class="keyword">new</a> <a href="#17872" title="scala.collection.parallel.mutable.ParHashSet[T]">ParHashSet</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="255873">iterator</a> = <a href="#255881" title="=&gt; ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI">splitter</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="255874">size</a> = <a href="../../mutable/FlatHashTable.scala.html#85807" title="=&gt; Int">tableSize</a>
  
  <span class="keyword">def</span> <a title="()Unit" id="255875">clear</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="../../mutable/FlatHashTable.scala.html#85840" title="()Unit">clearTable</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.HashSet[T]" id="255876">seq</a> = <span title="scala.collection.mutable.HashSet[T]" class="keyword">new</span> <a href="../../mutable/HashSet.scala.html#14567" title="scala.collection.mutable.HashSet[T]">HashSet</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85841" title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]">hashTableContents</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(elem: T)ParHashSet.this.type" id="255877">+=</a><span class="delimiter">(</span><a title="T" id="387453">elem</a>: <a href="#18052" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../mutable/FlatHashTable.scala.html#85823" title="(elem: T)Boolean">addEntry</a><span class="delimiter">(</span><a href="#387453" title="T">elem</a><span class="delimiter">)</span>
    <a href="#17872" title="ParHashSet.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(elem: T)ParHashSet.this.type" id="255878">-=</a><span class="delimiter">(</span><a title="T" id="387460">elem</a>: <a href="#18052" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../mutable/FlatHashTable.scala.html#85824" title="(elem: T)Option[T]">removeEntry</a><span class="delimiter">(</span><a href="#387460" title="T">elem</a><span class="delimiter">)</span>
    <a href="#17872" title="ParHashSet.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="255879">stringPrefix</a> = <span title="java.lang.String(&quot;ParHashSet&quot;)" class="string">&quot;ParHashSet&quot;</span>
  
  <span class="keyword">def</span> <a title="(elem: T)Boolean" id="255880">contains</a><span class="delimiter">(</span><a title="T" id="387470">elem</a>: <a href="#18052" title="T">T</a><span class="delimiter">)</span> = <a href="../../mutable/FlatHashTable.scala.html#85822" title="(elem: T)Boolean">containsEntry</a><span class="delimiter">(</span><a href="#387470" title="T">elem</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="=&gt; ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="255881">splitter</a> = <a href="#387181" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#255883" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="387181">ParHashSetIterator</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a>, <a href="#255874" title="=&gt; Int">size</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41698" title="ParHashSet.this.SCPI">SCPI</a>
  
  <span class="keyword">type</span> <a title="ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]" id="255882">SCPI</a> = <a href="../ParIterableLike.scala.html#41698" title="ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]">SignalContextPassingIterator</a><span class="delimiter">[</span>ParHashSetIterator<span class="delimiter">]</span>
  
  <span class="keyword">class</span> <a title="class ParHashSetIterator extends ParHashSet.this.ParFlatHashTableIterator with ParHashSet.this.ParIterator with ScalaObject" id="255883">ParHashSetIterator</a><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><a title="Int" id="387421">start</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="387422">iteratesUntil</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="387423">totalElements</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="ParFlatHashTable.scala.html#255890" title="ParHashSet.this.ParFlatHashTableIterator">ParFlatHashTableIterator</a><span class="delimiter">(</span><a href="#387421" title="Int">start</a>, <a href="#387422" title="Int">iteratesUntil</a>, <a href="#387423" title="Int">totalElements</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41697" title="ParHashSet.this.ParIterator">ParIterator</a> <span class="delimiter">{</span>
  me: SCPI =&gt;
    <span class="keyword">def</span> <a title="(start: Int, until: Int, total: Int)ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="387416">newIterator</a><span class="delimiter">(</span><a title="Int" id="387479">start</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="387480">until</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="387481">total</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <a href="#387484" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#255883" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="387484">ParHashSetIterator</a><span class="delimiter">(</span><a href="#387479" title="Int">start</a>, <a href="#387480" title="Int">until</a>, <a href="#387481" title="Int">total</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41698" title="ParHashSet.this.SCPI">SCPI</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: java.io.ObjectOutputStream)Unit" id="255884">writeObject</a><span class="delimiter">(</span><a title="java.io.ObjectOutputStream" id="387718">s</a>: java.io.<span title="java.io.ObjectOutputStream">ObjectOutputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../mutable/FlatHashTable.scala.html#85820" title="(out: java.io.ObjectOutputStream)Unit">serializeTo</a><span class="delimiter">(</span><a href="#387718" title="java.io.ObjectOutputStream">s</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(in: java.io.ObjectInputStream)Unit" id="255885">readObject</a><span class="delimiter">(</span><a title="java.io.ObjectInputStream" id="387720">in</a>: java.io.<span title="java.io.ObjectInputStream">ObjectInputStream</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../mutable/FlatHashTable.scala.html#85819" title="(in: java.io.ObjectInputStream, f: T =&gt; Unit)Unit">init</a><span class="delimiter">(</span><a href="#387720" title="java.io.ObjectInputStream">in</a>, <a title="T" id="387725">x</a> =&gt; <a href="#387725" title="T">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">import</span> collection.<a href="../../package.scala.html#8535" title="object scala.collection.DebugUtils">DebugUtils</a>._
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="255887">debugInformation</a> = <a href="../../package.scala.html#257033" title="(closure: Any =&gt; Unit =&gt; Unit)String">buildString</a> <span class="delimiter">{</span>
    <a title="Any =&gt; Unit" id="387730">append</a> =&gt;
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Parallel flat hash table set&quot;)" class="string">&quot;Parallel flat hash table set&quot;</span><span class="delimiter">)</span>
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><span title="java.lang.String(&quot;No. elems: &quot;)" class="string">&quot;No. elems: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../mutable/FlatHashTable.scala.html#85807" title="=&gt; Int">tableSize</a><span class="delimiter">)</span>
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Table length: &quot;)" class="string">&quot;Table length: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Table: &quot;)" class="string">&quot;Table: &quot;</span><span class="delimiter">)</span>
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><a href="../../package.scala.html#257034" title="(array: Array[AnyRef], from: Int, until: Int)String">arrayString</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>, <span title="Int(0)" class="int">0</span>, <a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Sizemap: &quot;)" class="string">&quot;Sizemap: &quot;</span><span class="delimiter">)</span>
    <a href="../../../Function1.scala.html#30769" title="(v1: Any)Unit">append</a><span class="delimiter">(</span><a href="../../package.scala.html#257034" title="(array: Array[Int], from: Int, until: Int)String">arrayString</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85813" title="=&gt; Array[Int]">sizemap</a>, <span title="Int(0)" class="int">0</span>, <a href="../../mutable/FlatHashTable.scala.html#85813" title="=&gt; Array[Int]">sizemap</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="comment">/** $factoryInfo
 *  @define Coll mutable.ParHashSet
 *  @define coll parallel hash set
 */</span>
<span class="keyword">object</span> <a title="object scala.collection.parallel.mutable.ParHashSet" id="387760">ParHashSet</a> <a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="keyword">extends</a> <a href="../../generic/ParSetFactory.scala.html#12882" title="scala.collection.generic.ParSetFactory[scala.collection.parallel.mutable.ParHashSet]">ParSetFactory</a><span class="delimiter">[</span>ParHashSet<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.generic.CanCombineFrom[scala.collection.parallel.mutable.ParHashSet.Coll,T,scala.collection.parallel.mutable.ParHashSet[T]]" id="363000">canBuildFrom</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="363002">T</a><span class="delimiter">]</span>: <a href="../../generic/CanCombineFrom.scala.html#12840" title="scala.collection.generic.CanCombineFrom[scala.collection.parallel.mutable.ParHashSet.Coll,T,scala.collection.parallel.mutable.ParHashSet[T]]">CanCombineFrom</a><span class="delimiter">[</span>Coll, T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="scala.collection.parallel.mutable.ParHashSet.GenericCanCombineFrom[T]" class="keyword">new</span> <a href="../../generic/ParSetFactory.scala.html#140297" title="scala.collection.parallel.mutable.ParHashSet.GenericCanCombineFrom[T]">GenericCanCombineFrom</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.parallel.Combiner[T,scala.collection.parallel.mutable.ParHashSet[T]]" id="363003">newBuilder</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="363005">T</a><span class="delimiter">]</span>: <a href="../Combiner.scala.html#16369" title="scala.collection.parallel.Combiner[T,scala.collection.parallel.mutable.ParHashSet[T]]">Combiner</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#363006" title="scala.collection.parallel.Combiner[T,scala.collection.parallel.mutable.ParHashSet[T]]">newCombiner</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.parallel.Combiner[T,scala.collection.parallel.mutable.ParHashSet[T]]" id="363006">newCombiner</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="363008">T</a><span class="delimiter">]</span>: <a href="../Combiner.scala.html#16369" title="scala.collection.parallel.Combiner[T,scala.collection.parallel.mutable.ParHashSet[T]]">Combiner</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#17927" title="object scala.collection.parallel.mutable.ParHashSetCombiner">ParHashSetCombiner</a>.<a href="#363040" title="[T]=&gt; scala.collection.parallel.mutable.ParHashSetCombiner[T]">apply</a><span title="scala.collection.parallel.mutable.ParHashSetCombiner[T]" class="delimiter">[</span><a href="#363008" title="T">T</a><span class="delimiter">]</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ParHashSetCombiner[T] extends collection.parallel.package.BucketCombiner[T,scala.collection.parallel.mutable.ParHashSet[T],Any,scala.collection.parallel.mutable.ParHashSetCombiner[T]] with collection.mutable.FlatHashTable.HashUtils[T] with ScalaObject" id="17926">ParHashSetCombiner</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="18053">T</a><span class="delimiter">]</span><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="363066">tableLoadFactor</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span>
<span class="keyword">extends</span> collection.parallel.<a href="../package.scala.html#24918" title="collection.parallel.package.BucketCombiner[T,scala.collection.parallel.mutable.ParHashSet[T],Any,scala.collection.parallel.mutable.ParHashSetCombiner[T]]">BucketCombiner</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span>, Any, ParHashSetCombiner<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#17927" title="object scala.collection.parallel.mutable.ParHashSetCombiner">ParHashSetCombiner</a>.<a href="#363034" title="=&gt; Int">numblocks</a><span class="delimiter">)</span>
<span class="keyword">with</span> collection.mutable.FlatHashTable.<a href="../../mutable/FlatHashTable.scala.html#85790" title="collection.mutable.FlatHashTable.HashUtils[T]">HashUtils</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
<span class="comment">//self: EnvironmentPassingCombiner[T, ParHashSet[T]] =&gt;</span>
  <span class="keyword">import</span> collection.parallel.<a href="../package.scala.html#24895" title="=&gt; scala.collection.parallel.TaskSupport">tasksupport</a>._
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="363053">mask</a> = <a href="#17927" title="object scala.collection.parallel.mutable.ParHashSetCombiner">ParHashSetCombiner</a>.<a href="#363036" title="=&gt; Int">discriminantmask</a>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="363056">nonmasklen</a> = <a href="#17927" title="object scala.collection.parallel.mutable.ParHashSetCombiner">ParHashSetCombiner</a>.<a href="#363038" title="=&gt; Int">nonmasklength</a>
  
  <span class="keyword">def</span> <a title="(elem: T)ParHashSetCombiner.this.type" id="363058">+=</a><span class="delimiter">(</span><a title="T" id="387781">elem</a>: <a href="#18053" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../package.scala.html#218317" title="(x$1: Int)Unit">sz</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="keyword">val</span> <a title="Int" id="387804">hc</a> = <a href="../../mutable/FlatHashTable.scala.html#85796" title="(hcode: Int)Int">improve</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85795" title="(elem: T)Int">elemHashCode</a><span class="delimiter">(</span><a href="#387781" title="T">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="387805">pos</a> = <a href="#387804" title="Int">hc</a> <a href="../../../Int.scala.html#32056" title="(x: Int)Int">&gt;&gt;&gt;</a> <a href="#363056" title="=&gt; Int">nonmasklen</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[Any]">buckets</a><span class="delimiter">(</span><a href="#387805" title="Int">pos</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// initialize bucket</span>
      <a href="../../../Array.scala.html#26522" title="(i: Int, x: scala.collection.mutable.UnrolledBuffer[Any])Unit">buckets</a><span class="delimiter">(</span><a href="#387805" title="Int">pos</a><span class="delimiter">)</span> = <a href="../../../reflect/Manifest.scala.html#34194" title="scala.collection.mutable.UnrolledBuffer[Any]" class="keyword">new</a> <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
    <span class="delimiter">}</span>
    <span class="comment">// add to bucket</span>
    <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[Any]">buckets</a><span class="delimiter">(</span><a href="#387805" title="Int">pos</a><span class="delimiter">)</span> <a href="../../mutable/UnrolledBuffer.scala.html#282110" title="(elem: Any)scala.collection.mutable.UnrolledBuffer[Any]">+=</a> <a href="#387781" title="T">elem</a>
    <a href="#17926" title="ParHashSetCombiner.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()scala.collection.parallel.mutable.ParHashSet[T]" id="363059">result</a>: <a href="#17872" title="scala.collection.parallel.mutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.FlatHashTable.Contents[T]" id="387838">contents</a> = <span title="scala.collection.mutable.FlatHashTable.Contents[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="../package.scala.html#218319" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#32098" title="(x: Int)Boolean">&gt;=</a> <a href="#17927" title="object scala.collection.parallel.mutable.ParHashSetCombiner">ParHashSetCombiner</a>.<a href="#363034" title="=&gt; Int">numblocks</a> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="../../mutable/FlatHashTable.scala.html#85794" title="=&gt; Int">sizeMapBucketSize</a><span class="delimiter">)</span> <a href="#363060" title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]">parPopulate</a> <span class="keyword">else</span> <a href="#363061" title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]">seqPopulate</a>
    <span title="scala.collection.parallel.mutable.ParHashSet[T]" class="keyword">new</span> <a href="#17872" title="scala.collection.parallel.mutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">(</span><a href="#387838" title="scala.collection.mutable.FlatHashTable.Contents[T]">contents</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]" id="363060">parPopulate</a>: FlatHashTable.<a href="../../mutable/FlatHashTable.scala.html#85788" title="scala.collection.mutable.FlatHashTable.Contents[T]">Contents</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// construct it in parallel</span>
    <span class="keyword">val</span> <a title="ParHashSetCombiner.this.AddingFlatHashTable" id="387864">table</a> = <span title="ParHashSetCombiner.this.AddingFlatHashTable" class="keyword">new</span> <a href="#363062" title="ParHashSetCombiner.this.AddingFlatHashTable">AddingFlatHashTable</a><span class="delimiter">(</span><a href="../package.scala.html#218319" title="=&gt; Int">size</a>, <a href="#363066" title="=&gt; Int">tableLoadFactor</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#30706" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#30718" title="Int" id="387866">inserted</a>, <a href="../../../Tuple2.scala.html#30720" title="scala.collection.mutable.UnrolledBuffer[Any]" id="387867">leftovers</a><span class="delimiter">)</span> = <a href="../Tasks.scala.html#215849" title="(task: collection.parallel.package.tasksupport.Task[(Int, scala.collection.mutable.UnrolledBuffer[Any]),ParHashSetCombiner.this.FillBlocks])(Int, scala.collection.mutable.UnrolledBuffer[Any])">executeAndWaitResult</a><a href="../../../Tuple2.scala.html#1512" title="(Int, scala.collection.mutable.UnrolledBuffer[Any]) @unchecked" class="delimiter">(</a><span title="ParHashSetCombiner.this.FillBlocks" class="keyword">new</span> <a href="#363063" title="ParHashSetCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">(</span><a href="../package.scala.html#218313" title="=&gt; Array[scala.collection.mutable.UnrolledBuffer[Any]]">buckets</a>, <a href="#387864" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>, <span title="Int(0)" class="int">0</span>, <a href="../package.scala.html#218313" title="=&gt; Array[scala.collection.mutable.UnrolledBuffer[Any]]">buckets</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="Int" id="387868">leftinserts</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="Any" id="387941">elem</a> &lt;- <a href="../../mutable/UnrolledBuffer.scala.html#282113" title="(f: Any =&gt; Unit)Unit">leftovers</a><span class="delimiter">)</span> <a href="#387868" title="Int">leftinserts</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <a href="#387864" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>.<a href="#387877" title="(insertAt: Int, comesBefore: Int, elem: T)Int">insertEntry</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#387864" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>.<a href="#387875" title="=&gt; Int">tableLength</a>, <a href="#387941" title="Any">elem</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#18053" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <a href="#387864" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>.<a href="#387876" title="(sz: Int)Unit">setSize</a><span class="delimiter">(</span><a href="#387868" title="Int">leftinserts</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#387866" title="Int">inserted</a><span class="delimiter">)</span>
    <a href="#387864" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>.<a href="../../mutable/FlatHashTable.scala.html#85841" title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]">hashTableContents</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]" id="363061">seqPopulate</a>: FlatHashTable.<a href="../../mutable/FlatHashTable.scala.html#85788" title="scala.collection.mutable.FlatHashTable.Contents[T]">Contents</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// construct it sequentially</span>
    <span class="comment">// TODO parallelize by keeping separate size maps and merging them</span>
    <span class="keyword">val</span> <a title="tbl extends java.lang.Object with scala.collection.mutable.FlatHashTable[T]" id="387962">tbl</a> = <a href="#387963" title="java.lang.Object with scala.collection.mutable.FlatHashTable[T]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.collection.mutable.FlatHashTable[T]" id="387963">FlatHashTable</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
      <a href="../../mutable/FlatHashTable.scala.html#85833" title="(tableLength: Int)Unit">sizeMapInit</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="scala.collection.mutable.UnrolledBuffer[Any]" id="388146">buffer</a> &lt;- <a href="../../generic/FilterMonadic.scala.html#30812" title="(f: scala.collection.mutable.UnrolledBuffer[Any] =&gt; Unit)Unit">buckets</a>;
      <span class="keyword">if</span> <a href="#388146" title="scala.collection.mutable.UnrolledBuffer[Any]">buffer</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span>;
      <a title="Any" id="388166">elem</a> &lt;- <a href="../../mutable/UnrolledBuffer.scala.html#282113" title="(f: Any =&gt; Boolean)Unit">buffer</a>
    <span class="delimiter">}</span> <a href="#387962" title="tbl extends java.lang.Object with scala.collection.mutable.FlatHashTable[T]">tbl</a>.<a href="../../mutable/FlatHashTable.scala.html#85823" title="(elem: T)Boolean">addEntry</a><span class="delimiter">(</span><a href="#388166" title="Any">elem</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#18053" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <a href="#387962" title="tbl extends java.lang.Object with scala.collection.mutable.FlatHashTable[T]">tbl</a>.<a href="../../mutable/FlatHashTable.scala.html#85841" title="=&gt; scala.collection.mutable.FlatHashTable.Contents[T]">hashTableContents</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/* classes */</span>
  
  <span class="comment">/** A flat hash table which doesn't resize itself. It accepts the number of elements
   *  it has to take and allocates the underlying hash table in advance.
   *  Elements can only be added to it. The final size has to be adjusted manually.
   *  It is internal to `ParHashSet` combiners.
   *  
   */</span>
  <span class="keyword">class</span> <a title="class AddingFlatHashTable extends java.lang.Object with scala.collection.mutable.FlatHashTable[T] with ScalaObject" id="363062">AddingFlatHashTable</a><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><a title="Int" id="387878">numelems</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="387879">lf</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../mutable/FlatHashTable.scala.html#14858" title="scala.collection.mutable.FlatHashTable[T]">FlatHashTable</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
    <a href="../../mutable/FlatHashTable.scala.html#85802" title="(x$1: Int)Unit">_loadFactor</a> = <a href="#387879" title="Int">lf</a>
    <a href="../../mutable/FlatHashTable.scala.html#85805" title="(x$1: Array[AnyRef])Unit">table</a> = <span title="Array[AnyRef]" class="keyword">new</span> <a href="../../../Array.scala.html#1422" title="Array[AnyRef]">Array</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85817" title="(expectedSize: Int)Int">capacity</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#14859" title="object scala.collection.mutable.FlatHashTable">FlatHashTable</a>.<a href="../../mutable/FlatHashTable.scala.html#85786" title="(size: Int, _loadFactor: Int)Int">sizeForThreshold</a><span class="delimiter">(</span><a href="#387878" title="Int">numelems</a>, <a href="../../mutable/FlatHashTable.scala.html#85801" title="=&gt; Int">_loadFactor</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../mutable/FlatHashTable.scala.html#85808" title="(x$1: Int)Unit">tableSize</a> = <span title="Int(0)" class="int">0</span>
    <a href="../../mutable/FlatHashTable.scala.html#85811" title="(x$1: Int)Unit">threshold</a> = <a href="../../mutable/FlatHashTable.scala.html#14859" title="object scala.collection.mutable.FlatHashTable">FlatHashTable</a>.<a href="../../mutable/FlatHashTable.scala.html#85787" title="(_loadFactor: Int, size: Int)Int">newThreshold</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85801" title="=&gt; Int">_loadFactor</a>, <a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <a href="../../mutable/FlatHashTable.scala.html#85833" title="(tableLength: Int)Unit">sizeMapInit</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="387874">toString</a> = <a href="../../../Predef.scala.html#9655" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;AFHT(%s)&quot;</a>.<a href="../../immutable/StringLike.scala.html#33893" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="=&gt; Int" id="387875">tableLength</a> = <a href="../../mutable/FlatHashTable.scala.html#85804" title="=&gt; Array[AnyRef]">table</a>.<a href="../../../Array.scala.html#26520" title="=&gt; Int">length</a>
    
    <span class="keyword">def</span> <a title="(sz: Int)Unit" id="387876">setSize</a><span class="delimiter">(</span><a title="Int" id="387955">sz</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <a href="../../mutable/FlatHashTable.scala.html#85808" title="(x$1: Int)Unit">tableSize</a> = <a href="#387955" title="Int">sz</a>

    <span class="comment">/**
     *  The elements are added using the `insertEntry` method. This method accepts three
     *  arguments:
     *  
     *  @param insertAt      where to add the element (set to -1 to use its hashcode)
     *  @param comesBefore   the position before which the element should be added to
     *  @param elem          the element to be added
     *  
     *  If the element is to be inserted at the position corresponding to its hash code, 
     *  the table will try to add the element in such a position if possible. Collisions are resolved
     *  using linear hashing, so the element may actually have to be added to a position
     *  that follows the specified one. In the case that the first unoccupied position
     *  comes after `comesBefore`, the element is not added and the method simply returns -1,
     *  indicating that it couldn't add the element in a position that comes before the
     *  specified one.
     *  If the element is already present in the hash table, it is not added, and this method
     *  returns 0. If the element is added, it returns 1.
     */</span>
    <span class="keyword">def</span> <a title="(insertAt: Int, comesBefore: Int, elem: T)Int" id="387877">insertEntry</a><span class="delimiter">(</span><a title="Int" id="387947">insertAt</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="387948">comesBefore</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="T" id="387949">elem</a>: <a href="#18053" title="T">T</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#378" title="Int">Int</a> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="388181">h</a> = <a href="#387947" title="Int">insertAt</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#388181" title="Int">h</a> <a href="../../../Int.scala.html#32063" title="(x: Int)Boolean">==</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#388181" title="Int">h</a> = <a href="../../mutable/FlatHashTable.scala.html#85839" title="(hcode: Int)Int">index</a><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#85795" title="(elem: T)Int">elemHashCode</a><span class="delimiter">(</span><a href="#387949" title="T">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="AnyRef" id="388182">entry</a> = <a href="../../../Array.scala.html#26521" title="(i: Int)AnyRef">table</a><span class="delimiter">(</span><a href="#388181" title="Int">h</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#388182" title="AnyRef">entry</a><span class="delimiter">)</span> <a href="#388183" title="()Unit" class="delimiter">{</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#388182" title="AnyRef">entry</a> <span title="(x$1: Any)Boolean">==</span> <a href="#387949" title="T">elem</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Int(0)" class="int">0</span>
        <a href="#388181" title="Int">h</a> = <a href="#388181" title="Int">h</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span> <span class="comment">// we *do not* do `(h + 1) % table.length` here, because we'll never overflow!!</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#388181" title="Int">h</a> <a href="../../../Int.scala.html#32098" title="(x: Int)Boolean">&gt;=</a> <a href="#387948" title="Int">comesBefore</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> -<span title="Int(-1)" class="int">1</span>
        <a href="#388182" title="AnyRef">entry</a> = <a href="../../../Array.scala.html#26521" title="(i: Int)AnyRef">table</a><span class="delimiter">(</span><a href="#388181" title="Int">h</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="../../../Array.scala.html#26522" title="(i: Int, x: AnyRef)Unit">table</a><span class="delimiter">(</span><a href="#388181" title="Int">h</a><span class="delimiter">)</span> = <a href="#387949" title="T">elem</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
      
      <span class="comment">// this is incorrect since we set size afterwards anyway and a counter</span>
      <span class="comment">// like this would not even work:</span>
      <span class="comment">// </span>
      <span class="comment">//   tableSize = tableSize + 1</span>
      <span class="comment">// </span>
      <span class="comment">// furthermore, it completely bogs down the parallel</span>
      <span class="comment">// execution when there are multiple workers</span>
      
      <a href="../../mutable/FlatHashTable.scala.html#85828" title="(h: Int)Unit">nnSizeMapAdd</a><span class="delimiter">(</span><a href="#388181" title="Int">h</a><span class="delimiter">)</span>
      <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/* tasks */</span>
  
  <span class="keyword">class</span> <a title="class FillBlocks extends java.lang.Object with collection.parallel.package.tasksupport.Task[(Int, scala.collection.mutable.UnrolledBuffer[Any]),ParHashSetCombiner.this.FillBlocks] with ScalaObject" id="363063">FillBlocks</a><a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">(</a><a title="Array[scala.collection.mutable.UnrolledBuffer[Any]]" id="387907">buckets</a>: <a href="../../../Array.scala.html#1422" title="Array[scala.collection.mutable.UnrolledBuffer[Any]]">Array</a><span class="delimiter">[</span>UnrolledBuffer<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="ParHashSetCombiner.this.AddingFlatHashTable" id="387908">table</a>: <a href="#363062" title="ParHashSetCombiner.this.AddingFlatHashTable">AddingFlatHashTable</a>, <span class="keyword">val</span> <a title="Int" id="387909">offset</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <span class="keyword">val</span> <a title="Int" id="387910">howmany</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../Tasks.scala.html#215831" title="collection.parallel.package.tasksupport.Task[(Int, scala.collection.mutable.UnrolledBuffer[Any]),ParHashSetCombiner.this.FillBlocks]">Task</a><span class="delimiter">[</span><span class="delimiter">(</span>Int, UnrolledBuffer<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>, FillBlocks<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" id="387895">result</a> = <a href="../../../Tuple2.scala.html#30706" title="(_1: Int, _2: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a>Int.<span title="Int(-2147483648)">MinValue</span>, <a href="../../../reflect/Manifest.scala.html#34194" title="scala.collection.mutable.UnrolledBuffer[Any]" class="keyword">new</a> <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>;
    <span class="keyword">def</span> <a title="(prev: Option[(Int, scala.collection.mutable.UnrolledBuffer[Any])])Unit" id="387897">leaf</a><span class="delimiter">(</span><a title="Option[(Int, scala.collection.mutable.UnrolledBuffer[Any])]" id="388226">prev</a>: <a href="../../../Option.scala.html#552" title="Option[(Int, scala.collection.mutable.UnrolledBuffer[Any])]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>Int, UnrolledBuffer<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="388229">i</a> = <a href="#387909" title="=&gt; Int">offset</a>
      <span class="keyword">var</span> <a title="Int" id="388230">totalinserts</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.UnrolledBuffer[Any]" id="388231">leftover</a> = <a href="../../../reflect/Manifest.scala.html#34194" title="scala.collection.mutable.UnrolledBuffer[Any]" class="keyword">new</a> <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#388229" title="Int">i</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <span class="delimiter">(</span><a href="#387909" title="=&gt; Int">offset</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#387910" title="=&gt; Int">howmany</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#388232" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#30706" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#30718" title="Int" id="388242">inserted</a>, <a href="../../../Tuple2.scala.html#30720" title="scala.collection.mutable.UnrolledBuffer[Any]" id="388243">intonextblock</a><span class="delimiter">)</span> = <a href="#387902" title="(block: Int, elems: scala.collection.mutable.UnrolledBuffer[Any], leftovers: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])">fillBlock</a><a href="../../../Tuple2.scala.html#1512" title="(Int, scala.collection.mutable.UnrolledBuffer[Any]) @unchecked" class="delimiter">(</a><a href="#388229" title="Int">i</a>, <a href="../../../Array.scala.html#26521" title="(i: Int)scala.collection.mutable.UnrolledBuffer[Any]">buckets</a><span class="delimiter">(</span><a href="#388229" title="Int">i</a><span class="delimiter">)</span>, <a href="#388231" title="scala.collection.mutable.UnrolledBuffer[Any]">leftover</a><span class="delimiter">)</span>
        <a href="#388230" title="Int">totalinserts</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <a href="#388242" title="Int">inserted</a>
        <a href="#388231" title="scala.collection.mutable.UnrolledBuffer[Any]">leftover</a> = <a href="#388243" title="scala.collection.mutable.UnrolledBuffer[Any]">intonextblock</a>
        <a href="#388229" title="Int">i</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>
      <a href="#387895" title="(x$1: (Int, scala.collection.mutable.UnrolledBuffer[Any]))Unit">result</a> = <a href="../../../Tuple2.scala.html#30706" title="(_1: Int, _2: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="#388230" title="Int">totalinserts</a>, <a href="#388231" title="scala.collection.mutable.UnrolledBuffer[Any]">leftover</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="387898">blocksize</a> = <a href="#387908" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>.<a href="#387875" title="=&gt; Int">tableLength</a> <a href="../../../Int.scala.html#32058" title="(x: Int)Int">&gt;&gt;</a> <a href="#17927" title="object scala.collection.parallel.mutable.ParHashSetCombiner">ParHashSetCombiner</a>.<a href="#363032" title="=&gt; Int">discriminantbits</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(block: Int)Int" id="387900">blockStart</a><span class="delimiter">(</span><a title="Int" id="388273">block</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <a href="#388273" title="Int">block</a> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#387898" title="=&gt; Int">blocksize</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(block: Int)Int" id="387901">nextBlockStart</a><span class="delimiter">(</span><a title="Int" id="388280">block</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#388280" title="Int">block</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#32134" title="(x: Int)Int">*</a> <a href="#387898" title="=&gt; Int">blocksize</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(block: Int, elems: scala.collection.mutable.UnrolledBuffer[Any], leftovers: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" id="387902">fillBlock</a><span class="delimiter">(</span><a title="Int" id="388244">block</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="scala.collection.mutable.UnrolledBuffer[Any]" id="388245">elems</a>: <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="scala.collection.mutable.UnrolledBuffer[Any]" id="388246">leftovers</a>: <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#1512" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a>Int, UnrolledBuffer<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="388291">beforePos</a> = <a href="#387901" title="(block: Int)Int">nextBlockStart</a><span class="delimiter">(</span><a href="#388244" title="Int">block</a><span class="delimiter">)</span>
      
      <span class="comment">// store the elems</span>
      <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#30706" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#30718" title="Int" id="388293">elemsIn</a>, <a href="../../../Tuple2.scala.html#30720" title="scala.collection.mutable.UnrolledBuffer[Any]" id="388294">elemsLeft</a><span class="delimiter">)</span> = <span title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="keyword">if</span> <span class="delimiter">(</span><a href="#388245" title="scala.collection.mutable.UnrolledBuffer[Any]">elems</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#387903" title="(atPos: Int, beforePos: Int, elems: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])">insertAll</a><span class="delimiter">(</span>-<span title="Int(-1)" class="int">1</span>, <a href="#388291" title="Int">beforePos</a>, <a href="#388245" title="scala.collection.mutable.UnrolledBuffer[Any]">elems</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../Tuple2.scala.html#30706" title="(_1: Int, _2: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><span title="Int(0)" class="int">0</span>, <a href="../../generic/GenericClassManifestCompanion.scala.html#151853" title="[A](elems: A*)(implicit ord: ClassManifest[A])scala.collection.mutable.UnrolledBuffer[A]">UnrolledBuffer</a><span title="(elems: Any*)(implicit ord: ClassManifest[Any])scala.collection.mutable.UnrolledBuffer[Any]" class="delimiter">[</span><span title="Any">Any</span><span class="delimiter">]</span><a href="../../../reflect/Manifest.scala.html#34194" title="=&gt; scala.reflect.Manifest[Any]" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
      <span class="comment">// store the leftovers</span>
      <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#30706" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#30718" title="Int" id="388296">leftoversIn</a>, <a href="../../../Tuple2.scala.html#30720" title="scala.collection.mutable.UnrolledBuffer[Any]" id="388297">leftoversLeft</a><span class="delimiter">)</span> = <a href="#387903" title="(atPos: Int, beforePos: Int, elems: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])">insertAll</a><a href="../../../Tuple2.scala.html#1512" title="(Int, scala.collection.mutable.UnrolledBuffer[Any]) @unchecked" class="delimiter">(</a><a href="#387900" title="(block: Int)Int">blockStart</a><span class="delimiter">(</span><a href="#388244" title="Int">block</a><span class="delimiter">)</span>, <a href="#388291" title="Int">beforePos</a>, <a href="#388246" title="scala.collection.mutable.UnrolledBuffer[Any]">leftovers</a><span class="delimiter">)</span>
      
      <span class="comment">// return the no. of stored elements tupled with leftovers</span>
      <a href="../../../Tuple2.scala.html#30706" title="(_1: Int, _2: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="#388293" title="Int">elemsIn</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#388296" title="Int">leftoversIn</a>, <a href="#388294" title="scala.collection.mutable.UnrolledBuffer[Any]">elemsLeft</a> <a href="../../mutable/UnrolledBuffer.scala.html#282109" title="(that: scala.collection.mutable.UnrolledBuffer[Any])scala.collection.mutable.UnrolledBuffer[Any]">concat</a> <a href="#388297" title="scala.collection.mutable.UnrolledBuffer[Any]">leftoversLeft</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(atPos: Int, beforePos: Int, elems: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" id="387903">insertAll</a><span class="delimiter">(</span><a title="Int" id="388302">atPos</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="Int" id="388303">beforePos</a>: <a href="../../../Int.scala.html#378" title="Int">Int</a>, <a title="scala.collection.mutable.UnrolledBuffer[Any]" id="388304">elems</a>: <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#1512" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a>Int, UnrolledBuffer<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.UnrolledBuffer[Any]" id="388345">leftovers</a> = <a href="../../../reflect/Manifest.scala.html#34194" title="scala.collection.mutable.UnrolledBuffer[Any]" class="keyword">new</a> <a href="../../mutable/UnrolledBuffer.scala.html#15128" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
      <span class="keyword">var</span> <a title="Int" id="388346">inserted</a> = <span title="Int(0)" class="int">0</span>
      
      <span class="keyword">var</span> <a title="scala.collection.mutable.UnrolledBuffer.Unrolled[Any]" id="388347">unrolled</a> = <a href="#388304" title="scala.collection.mutable.UnrolledBuffer[Any]">elems</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282100" title="=&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">headPtr</a>
      <span class="keyword">var</span> <a title="Int" id="388348">i</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="ParHashSetCombiner.this.AddingFlatHashTable" id="388349">t</a> = <a href="#387908" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#388347" title="scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#388350" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Array[Any]" id="388351">chunkarr</a> = <a href="#388347" title="scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282174" title="=&gt; Array[Any]">array</a>
        <span class="keyword">val</span> <a title="Int" id="388352">chunksz</a> = <a href="#388347" title="scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282171" title="=&gt; Int">size</a>
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#388348" title="Int">i</a> <a href="../../../Int.scala.html#32077" title="(x: Int)Boolean">&lt;</a> <a href="#388352" title="Int">chunksz</a><span class="delimiter">)</span> <a href="#388353" title="()Unit" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="Any" id="388358">elem</a> = <a href="../../../Array.scala.html#26521" title="(i: Int)Any">chunkarr</a><span class="delimiter">(</span><a href="#388348" title="Int">i</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Int" id="388359">res</a> = <a href="#388349" title="ParHashSetCombiner.this.AddingFlatHashTable">t</a>.<a href="#387877" title="(insertAt: Int, comesBefore: Int, elem: T)Int">insertEntry</a><span class="delimiter">(</span><a href="#388302" title="Int">atPos</a>, <a href="#388303" title="Int">beforePos</a>, <a href="#388358" title="Any">elem</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#18053" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#388359" title="Int">res</a> <a href="../../../Int.scala.html#32098" title="(x: Int)Boolean">&gt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#388346" title="Int">inserted</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <a href="#388359" title="Int">res</a>
          <span class="keyword">else</span> <a href="#388345" title="scala.collection.mutable.UnrolledBuffer[Any]">leftovers</a> <a href="../../mutable/UnrolledBuffer.scala.html#282110" title="(elem: Any)scala.collection.mutable.UnrolledBuffer[Any]">+=</a> <a href="#388358" title="Any">elem</a>
          <a href="#388348" title="Int">i</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span>
        <a href="#388348" title="Int">i</a> = <span title="Int(0)" class="int">0</span>
        <a href="#388347" title="scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a> = <a href="#388347" title="scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282177" title="=&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">next</a>
      <span class="delimiter">}</span>
      
      <span class="comment">// slower:</span>
      <span class="comment">// var it = elems.iterator</span>
      <span class="comment">// while (it.hasNext) {</span>
      <span class="comment">//   val elem = it.next</span>
      <span class="comment">//   val res = table.insertEntry(atPos, beforePos, elem.asInstanceOf[T])</span>
      <span class="comment">//   if (res &gt;= 0) inserted += res</span>
      <span class="comment">//   else leftovers += elem</span>
      <span class="comment">// }</span>
      
      <a href="../../../Tuple2.scala.html#30706" title="(_1: Int, _2: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="#388346" title="Int">inserted</a>, <a href="#388345" title="scala.collection.mutable.UnrolledBuffer[Any]">leftovers</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; List[ParHashSetCombiner.this.FillBlocks]" id="387904">split</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="388433">fp</a> = <a href="#387910" title="=&gt; Int">howmany</a> <a href="../../../Int.scala.html#32141" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span>
      <a href="../../immutable/List.scala.html#26193" title="(xs: ParHashSetCombiner.this.FillBlocks*)List[ParHashSetCombiner.this.FillBlocks]">List</a><span class="delimiter">(</span><span title="ParHashSetCombiner.this.FillBlocks" class="keyword">new</span> <a href="#363063" title="ParHashSetCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">(</span><a href="#387907" title="Array[scala.collection.mutable.UnrolledBuffer[Any]]">buckets</a>, <a href="#387908" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>, <a href="#387909" title="=&gt; Int">offset</a>, <a href="#388433" title="Int">fp</a><span class="delimiter">)</span>, <span title="ParHashSetCombiner.this.FillBlocks" class="keyword">new</span> <a href="#363063" title="ParHashSetCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">(</span><a href="#387907" title="Array[scala.collection.mutable.UnrolledBuffer[Any]]">buckets</a>, <a href="#387908" title="ParHashSetCombiner.this.AddingFlatHashTable">table</a>, <a href="#387909" title="=&gt; Int">offset</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#388433" title="Int">fp</a>, <a href="#387910" title="=&gt; Int">howmany</a> <a href="../../../Int.scala.html#32127" title="(x: Int)Int">-</a> <a href="#388433" title="Int">fp</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: ParHashSetCombiner.this.FillBlocks)Unit" id="387905">merge</a><span class="delimiter">(</span><a title="ParHashSetCombiner.this.FillBlocks" id="388453">that</a>: <a href="#363063" title="ParHashSetCombiner.this.FillBlocks">FillBlocks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// take the leftovers from the left task, store them into the block of the right task</span>
      <span class="keyword">val</span> <a title="Int" id="388456">atPos</a> = <a href="#387900" title="(block: Int)Int">blockStart</a><span class="delimiter">(</span><a href="#388453" title="ParHashSetCombiner.this.FillBlocks">that</a>.<a href="#387909" title="=&gt; Int">offset</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Int" id="388457">beforePos</a> = <a href="#387900" title="(block: Int)Int">blockStart</a><span class="delimiter">(</span><a href="#388453" title="ParHashSetCombiner.this.FillBlocks">that</a>.<a href="#387909" title="=&gt; Int">offset</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#388453" title="ParHashSetCombiner.this.FillBlocks">that</a>.<a href="#387910" title="=&gt; Int">howmany</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#30706" title="(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#30718" title="Int" id="388459">inserted</a>, <a href="../../../Tuple2.scala.html#30720" title="scala.collection.mutable.UnrolledBuffer[Any]" id="388460">remainingLeftovers</a><span class="delimiter">)</span> = <a href="#387903" title="(atPos: Int, beforePos: Int, elems: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])">insertAll</a><a href="../../../Tuple2.scala.html#1512" title="(Int, scala.collection.mutable.UnrolledBuffer[Any]) @unchecked" class="delimiter">(</a><a href="#388456" title="Int">atPos</a>, <a href="#388457" title="Int">beforePos</a>, <a href="#363063" title="FillBlocks.this.type" class="keyword">this</a>.<a href="#387895" title="=&gt; (Int, scala.collection.mutable.UnrolledBuffer[Any])">result</a>.<a href="../../../Tuple2.scala.html#30720" title="=&gt; scala.collection.mutable.UnrolledBuffer[Any]">_2</a><span class="delimiter">)</span>
      
      <span class="comment">// anything left after trying the store the left leftovers is added to the right task leftovers</span>
      <span class="comment">// and a new leftovers set is produced in this way</span>
      <span class="comment">// the total number of successfully inserted elements is adjusted accordingly</span>
      <a href="#387895" title="(x$1: (Int, scala.collection.mutable.UnrolledBuffer[Any]))Unit">result</a> = <a href="../../../Tuple2.scala.html#30706" title="(_1: Int, _2: scala.collection.mutable.UnrolledBuffer[Any])(Int, scala.collection.mutable.UnrolledBuffer[Any])" class="delimiter">(</a><a href="#363063" title="FillBlocks.this.type" class="keyword">this</a>.<a href="#387895" title="=&gt; (Int, scala.collection.mutable.UnrolledBuffer[Any])">result</a>.<a href="../../../Tuple2.scala.html#30718" title="=&gt; Int">_1</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#388453" title="ParHashSetCombiner.this.FillBlocks">that</a>.<a href="#387895" title="=&gt; (Int, scala.collection.mutable.UnrolledBuffer[Any])">result</a>.<a href="../../../Tuple2.scala.html#30718" title="=&gt; Int">_1</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">+</a> <a href="#388459" title="Int">inserted</a>, <a href="#388460" title="scala.collection.mutable.UnrolledBuffer[Any]">remainingLeftovers</a> <a href="../../mutable/UnrolledBuffer.scala.html#282109" title="(that: scala.collection.mutable.UnrolledBuffer[Any])scala.collection.mutable.UnrolledBuffer[Any]">concat</a> <a href="#388453" title="ParHashSetCombiner.this.FillBlocks">that</a>.<a href="#387895" title="=&gt; (Int, scala.collection.mutable.UnrolledBuffer[Any])">result</a>.<a href="../../../Tuple2.scala.html#30720" title="=&gt; scala.collection.mutable.UnrolledBuffer[Any]">_2</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="387906">shouldSplitFurther</a> = <a href="#387910" title="=&gt; Int">howmany</a> <a href="../../../Int.scala.html#32091" title="(x: Int)Boolean">&gt;</a> collection.parallel.<a href="../package.scala.html#24890" title="(sz: Int, parallelismLevel: Int)Int">thresholdFromSize</a><span class="delimiter">(</span><a href="ParHashMap.scala.html#17828" title="object scala.collection.parallel.mutable.ParHashMapCombiner">ParHashMapCombiner</a>.<a href="ParHashMap.scala.html#348691" title="=&gt; Int">numblocks</a>, <a href="../Tasks.scala.html#215854" title="=&gt; Int">parallelismLevel</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>parallel<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object scala.collection.parallel.mutable.ParHashSetCombiner" id="17927">ParHashSetCombiner</a> <a href="../../../ScalaObject.scala.html#456" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="363032">discriminantbits</a> = <span title="Int(5)" class="int">5</span>
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="363034">numblocks</a> = <span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32054" title="(x: Int)Int">&lt;&lt;</a> <a href="#363032" title="=&gt; Int">discriminantbits</a>
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="363036">discriminantmask</a> = <span class="delimiter">(</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32054" title="(x: Int)Int">&lt;&lt;</a> <a href="#363032" title="=&gt; Int">discriminantbits</a><span class="delimiter">)</span> <a href="../../../Int.scala.html#32127" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>;
  <span class="keyword">private</span><span class="delimiter">[</span>mutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="363038">nonmasklength</a> = <span title="Int(32)" class="int">32</span> <a href="../../../Int.scala.html#32127" title="(x: Int)Int">-</a> <a href="#363032" title="=&gt; Int">discriminantbits</a>
  
  <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.parallel.mutable.ParHashSetCombiner[T]" id="363040">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="363042">T</a><span class="delimiter">]</span> = <a href="#363046" title="scala.collection.parallel.mutable.ParHashSetCombiner[T]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.parallel.mutable.ParHashSetCombiner[T]" id="363046">ParHashSetCombiner</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../mutable/FlatHashTable.scala.html#14859" title="object scala.collection.mutable.FlatHashTable">FlatHashTable</a>.<a href="../../mutable/FlatHashTable.scala.html#85783" title="=&gt; Int">defaultLoadFactor</a><span class="delimiter">)</span> <span class="delimiter">{</span><span class="delimiter">}</span> <span class="comment">//with EnvironmentPassingCombiner[T, ParHashSet[T]]</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>