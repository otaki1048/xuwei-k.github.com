<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/collection/parallel/immutable/ParHashSet.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="keyword">package</span> scala.collection.parallel.immutable

<span class="keyword">import</span> scala.collection.parallel.ParSetLike
<span class="keyword">import</span> scala.collection.parallel.Combiner
<span class="keyword">import</span> scala.collection.parallel.IterableSplitter
<span class="keyword">import</span> scala.collection.mutable.<a href="../../mutable/UnrolledBuffer.scala.html#15139" title="object scala.collection.mutable.UnrolledBuffer">UnrolledBuffer</a>.Unrolled
<span class="keyword">import</span> scala.collection.mutable.UnrolledBuffer
<span class="keyword">import</span> scala.collection.generic.ParSetFactory
<span class="keyword">import</span> scala.collection.generic.CanCombineFrom
<span class="keyword">import</span> scala.collection.generic.GenericParTemplate
<span class="keyword">import</span> scala.collection.generic.GenericParCompanion
<span class="keyword">import</span> scala.collection.generic.GenericCompanion
<span class="keyword">import</span> scala.collection.immutable.<span class="delimiter">{</span> HashSet, TrieIterator <span class="delimiter">}</span>

<span class="comment">/** Immutable parallel hash set, based on hash tries.
 *  
 *  $paralleliterableinfo
 *  
 *  $sideeffects
 *  
 *  @tparam T    the element type of the set
 *  
 *  @author Aleksandar Prokopec
 *  @since 2.9
 *
 *  @define Coll immutable.ParHashSet
 *  @define coll immutable parallel hash set
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class ParHashSet[T] extends java.lang.Object with scala.collection.parallel.immutable.ParSet[T] with scala.collection.generic.GenericParTemplate[T,scala.collection.parallel.immutable.ParHashSet] with scala.collection.parallel.ParSetLike[T,scala.collection.parallel.immutable.ParHashSet[T],scala.collection.immutable.HashSet[T]] with Serializable with ScalaObject" id="17480">ParHashSet</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="17613">T</a><span class="delimiter">]</span> <a href="../../../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">private</a><span class="delimiter">[</span>immutable<span class="delimiter">]</span> <span class="delimiter">(</span><span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.collection.immutable.HashSet[T]" id="162994">trie</a>: <a href="../../immutable/HashSet.scala.html#13227" title="scala.collection.immutable.HashSet[T]">HashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="ParSet.scala.html#17384" title="scala.collection.parallel.immutable.ParSet[T]">ParSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../generic/GenericParTemplate.scala.html#12901" title="scala.collection.generic.GenericParTemplate[T,scala.collection.parallel.immutable.ParHashSet]">GenericParTemplate</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../ParSetLike.scala.html#16262" title="scala.collection.parallel.ParSetLike[T,scala.collection.parallel.immutable.ParHashSet[T],scala.collection.immutable.HashSet[T]]">ParSetLike</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span>, HashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
   <span class="keyword">with</span> <a href="../../../Serializable.scala.html#898" title="Serializable">Serializable</a>
<span class="delimiter">{</span>
self =&gt;
  
  <span class="keyword">def</span> <a title="()scala.collection.parallel.immutable.ParHashSet[T]" id="162862" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#17480" title="ParHashSet.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../../immutable/HashSet.scala.html#13228" title="object scala.collection.immutable.HashSet">HashSet</a>.<a href="../../immutable/HashSet.scala.html#162938" title="[A]=&gt; scala.collection.immutable.HashSet[A]">empty</a><span title="scala.collection.immutable.HashSet[T]" class="delimiter">[</span><a href="#17613" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.generic.GenericCompanion[scala.collection.parallel.immutable.ParHashSet] with scala.collection.generic.GenericParCompanion[scala.collection.parallel.immutable.ParHashSet]" id="162863">companion</a>: <a href="#374098" title="ParHashSet extends scala.collection.generic.GenericCompanion[scala.collection.parallel.immutable.ParHashSet] with scala.collection.generic.GenericParCompanion[scala.collection.parallel.immutable.ParHashSet]">GenericCompanion</a><span class="delimiter">[</span>ParHashSet<span class="delimiter">]</span> <span class="keyword">with</span> GenericParCompanion<span class="delimiter">[</span>ParHashSet<span class="delimiter">]</span> = <a href="#375222" title="object scala.collection.parallel.immutable.ParHashSet">ParHashSet</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.immutable.ParHashSet[T]" id="162864">empty</a>: <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#162862" title="()scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</a> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.IterableSplitter[T]" id="162865">splitter</a>: <a href="../RemainsIterator.scala.html#16100" title="scala.collection.parallel.IterableSplitter[T]">IterableSplitter</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#374170" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#162877" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374170">ParHashSetIterator</a><span class="delimiter">(</span><a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a>.<a href="../../immutable/HashSet.scala.html#162817" title="=&gt; Iterator[T]">iterator</a>, <a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a>.<a href="../../immutable/HashSet.scala.html#162815" title="=&gt; Int">size</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41711" title="ParHashSet.this.SCPI">SCPI</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.HashSet[T]" id="162866">seq</a> = <a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a>
  
  <span class="keyword">def</span> <a title="(e: T)scala.collection.parallel.immutable.ParHashSet[T]" id="162867">-</a><span class="delimiter">(</span><a title="T" id="374422">e</a>: <a href="#17613" title="T">T</a><span class="delimiter">)</span> = <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</span> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">(</span><a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a> <a href="../../immutable/HashSet.scala.html#162824" title="(e: T)scala.collection.immutable.HashSet[T]">-</a> <a href="#374422" title="T">e</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="(e: T)scala.collection.parallel.immutable.ParHashSet[T]" id="162868">+</a><span class="delimiter">(</span><a title="T" id="374442">e</a>: <a href="#17613" title="T">T</a><span class="delimiter">)</span> = <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</span> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">(</span><a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a> <a href="../../immutable/HashSet.scala.html#162822" title="(e: T)scala.collection.immutable.HashSet[T]">+</a> <a href="#374442" title="T">e</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(e: T)Boolean" id="162869">contains</a><span class="delimiter">(</span><a title="T" id="374464">e</a>: <a href="#17613" title="T">T</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#61" title="Boolean">Boolean</a> = <a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a>.<a href="../../immutable/HashSet.scala.html#162821" title="(e: T)Boolean">contains</a><span class="delimiter">(</span><a href="#374464" title="T">e</a><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="162870">size</a> = <a href="#162994" title="scala.collection.immutable.HashSet[T]">trie</a>.<a href="../../immutable/HashSet.scala.html#162815" title="=&gt; Int">size</a>
  
  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="[S, That](oldc: Option[scala.collection.parallel.Combiner[S,That]], newc: scala.collection.parallel.Combiner[S,That])scala.collection.parallel.Combiner[S,That]" id="162871">reuse</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="162874">S</a>, <a title="&gt;: Nothing &lt;: Any" id="162875">That</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[scala.collection.parallel.Combiner[S,That]]" id="374473">oldc</a>: <a href="../../../Option.scala.html#556" title="Option[scala.collection.parallel.Combiner[S,That]]">Option</a><span class="delimiter">[</span>Combiner<span class="delimiter">[</span>S, That<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="scala.collection.parallel.Combiner[S,That]" id="374474">newc</a>: <a href="../Combiner.scala.html#16379" title="scala.collection.parallel.Combiner[S,That]">Combiner</a><span class="delimiter">[</span>S, That<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#374473" title="Option[scala.collection.parallel.Combiner[S,That]]">oldc</a> <span title="scala.collection.parallel.Combiner[S,That]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="scala.collection.parallel.Combiner[S,That]">Some</span><span class="delimiter">(</span><a title="scala.collection.parallel.Combiner[S,That]" id="374488">old</a><span class="delimiter">)</span> =&gt; <a href="#374488" title="scala.collection.parallel.Combiner[S,That]">old</a>
    <span class="keyword">case</span> <a href="../../../Option.scala.html#1733" title="scala.collection.parallel.Combiner[S,That]">None</a> =&gt; <a href="#374474" title="scala.collection.parallel.Combiner[S,That]">newc</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">type</span> <a title="ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]" id="162876">SCPI</a> = <a href="../ParIterableLike.scala.html#41711" title="ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]">SignalContextPassingIterator</a><span class="delimiter">[</span>ParHashSetIterator<span class="delimiter">]</span>
  
  <span class="keyword">class</span> <a title="class ParHashSetIterator extends java.lang.Object with ParHashSet.this.ParIterator with ScalaObject" id="162877">ParHashSetIterator</a><a href="../../../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">(</a><span class="keyword">var</span> <a title="Iterator[T]" id="374420">triter</a>: <a href="../../Iterator.scala.html#8766" title="Iterator[T]">Iterator</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="Int" id="374421">sz</a>: <a href="../../../Int.scala.html#382" title="Int">Int</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <span class="keyword">super</span>.<a href="../ParIterableLike.scala.html#41710" title="ParHashSet.this.ParIterator">ParIterator</a> <span class="delimiter">{</span>
  self: SignalContextPassingIterator<span class="delimiter">[</span>ParHashSetIterator<span class="delimiter">]</span> =&gt;
    <span class="keyword">var</span> <a title="Int" id="374408">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">def</span> <a title="=&gt; scala.collection.parallel.IterableSplitter[T]" id="374410">dup</a> = <a href="#374420" title="=&gt; Iterator[T]">triter</a> <span title="scala.collection.parallel.IterableSplitter[T]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="phit extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374499">t</a>: <a href="../../immutable/TrieIterator.scala.html#13428" title="scala.collection.immutable.TrieIterator[_]">TrieIterator</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <a href="#374411" title="(it: Iterator[T])ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI">dupFromIterator</a><span class="delimiter">(</span><a href="#374499" title="scala.collection.immutable.TrieIterator[_]">t</a>.<a href="../../immutable/TrieIterator.scala.html#160678" title="=&gt; scala.collection.immutable.TrieIterator[_]">dupIterator</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="phit extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI">_</span> =&gt;
        <span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[T]" id="374513">buff</a> = <a href="#374420" title="=&gt; Iterator[T]">triter</a>.<a href="../../TraversableOnce.scala.html#31023" title="scala.collection.mutable.Buffer[T]">toBuffer</a>
        <a href="#374420" title="(x$1: Iterator[T])Unit">triter</a> = <a href="#374513" title="scala.collection.mutable.Buffer[T]">buff</a>.<a href="../../IterableLike.scala.html#31181" title="=&gt; Iterator[T]">iterator</a>
        <a href="#374411" title="(it: Iterator[T])ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI">dupFromIterator</a><span class="delimiter">(</span><a href="#374513" title="scala.collection.mutable.Buffer[T]">buff</a>.<a href="../../IterableLike.scala.html#31181" title="=&gt; Iterator[T]">iterator</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(it: Iterator[T])ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374411">dupFromIterator</a><span class="delimiter">(</span><a title="Iterator[T]" id="374501">it</a>: <a href="../../Iterator.scala.html#8766" title="Iterator[T]">Iterator</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="phit extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374504">phit</a> = <a href="#374505" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#162877" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374505">ParHashSetIterator</a><span class="delimiter">(</span><a href="#374501" title="Iterator[T]">it</a>, <a href="#374421" title="=&gt; Int">sz</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41711" title="ParHashSet.this.SCPI">SCPI</a>
      <a href="#374504" title="phit extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI">phit</a>.<a href="#374408" title="(x$1: Int)Unit">i</a> = <a href="#374408" title="=&gt; Int">i</a>
      <a href="#374504" title="phit extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI">phit</a>      
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Seq[ParHashSet.this.ParIterator]" id="374412">split</a>: <a href="../../Seq.scala.html#8631" title="Seq[ParHashSet.this.ParIterator]">Seq</a><span class="delimiter">[</span>ParIterator<span class="delimiter">]</span> = <span title="Seq[ParHashSet.this.ParIterator]" class="keyword">if</span> <span class="delimiter">(</span><a href="#374415" title="=&gt; Int">remaining</a> <a href="../../../Int.scala.html#32087" title="(x: Int)Boolean">&lt;</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="../../generic/GenericCompanion.scala.html#26139" title="(elems: ParHashSet.this.ParHashSetIterator with ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]*)Seq[ParHashSet.this.ParHashSetIterator with ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]]">Seq</a><span class="delimiter">(</span><a href="#162877" title="&lt;none&gt; extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]" class="keyword">this</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#374420" title="=&gt; Iterator[T]">triter</a> <span title="Seq[ParHashSet.this.ParIterator]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Seq[ParHashSet.this.ParHashSetIterator with ParHashSet.this.SignalContextPassingIterator[ParHashSet.this.ParHashSetIterator]]" id="374552">t</a>: <a href="../../immutable/TrieIterator.scala.html#13428" title="scala.collection.immutable.TrieIterator[_]">TrieIterator</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <span class="keyword">val</span> <a title="Int" id="374554">previousRemaining</a> = <a href="#374415" title="=&gt; Int">remaining</a>
        <span class="keyword">val</span> <a href="../../../Tuple3.scala.html#30622" title="(Iterator[_], Int, Iterator[_])" class="delimiter">(</a><span class="delimiter">(</span><a href="../../../Tuple3.scala.html#30638" title="Iterator[_]" id="374556">fst</a>, <a href="../../../Tuple3.scala.html#30640" title="Int" id="374557">fstlength</a><span class="delimiter">)</span>, <a href="../../../Tuple3.scala.html#30642" title="Iterator[_]" id="374558">snd</a><span class="delimiter">)</span> = <a href="#374552" title="scala.collection.immutable.TrieIterator[_]">t</a>.<a href="../../immutable/TrieIterator.scala.html#160686" title="=&gt; ((Iterator[_], Int), Iterator[_])">split</a>
        <span class="keyword">val</span> <a title="Int" id="374559">sndlength</a> = <a href="#374554" title="Int">previousRemaining</a> <a href="../../../Int.scala.html#32137" title="(x: Int)Int">-</a> <a href="#374557" title="Int">fstlength</a>
        <a href="../../generic/GenericCompanion.scala.html#26139" title="(elems: ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI*)Seq[ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI]">Seq</a><span class="delimiter">(</span>
          <a href="#374582" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#162877" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374582">ParHashSetIterator</a><span class="delimiter">(</span><a href="#374556" title="Iterator[_]">fst</a>, <a href="#374557" title="Int">fstlength</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41711" title="ParHashSet.this.SCPI">SCPI</a>,
          <a href="#374812" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#162877" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="374812">ParHashSetIterator</a><span class="delimiter">(</span><a href="#374558" title="Iterator[_]">snd</a>, <a href="#374559" title="Int">sndlength</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41711" title="ParHashSet.this.SCPI">SCPI</a>
        <span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Seq[ParHashSet.this.ParIterator]">_</span> =&gt;
        <span class="comment">// iterator of the collision map case</span>
        <span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[T]" id="375046">buff</a> = <a href="#374420" title="=&gt; Iterator[T]">triter</a>.<a href="../../TraversableOnce.scala.html#31023" title="scala.collection.mutable.Buffer[T]">toBuffer</a>
        <span class="keyword">val</span> <a href="../../../Tuple2.scala.html#30716" title="(scala.collection.mutable.Buffer[T], scala.collection.mutable.Buffer[T])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#30728" title="scala.collection.mutable.Buffer[T]" id="375048">fp</a>, <a href="../../../Tuple2.scala.html#30730" title="scala.collection.mutable.Buffer[T]" id="375049">sp</a><span class="delimiter">)</span> = <a href="#375046" title="scala.collection.mutable.Buffer[T]">buff</a>.<a href="../../TraversableLike.scala.html#26421" title="(n: Int)(scala.collection.mutable.Buffer[T], scala.collection.mutable.Buffer[T])">splitAt</a><a href="../../../Tuple2.scala.html#1516" title="(scala.collection.mutable.Buffer[T], scala.collection.mutable.Buffer[T]) @unchecked" class="delimiter">(</a><a href="#375046" title="scala.collection.mutable.Buffer[T]">buff</a>.<a href="../../mutable/BufferLike.scala.html#39140" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#32151" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <a href="../../generic/GenericCompanion.scala.html#26139" title="(elems: scala.collection.mutable.Buffer[T]*)Seq[scala.collection.mutable.Buffer[T]]">Seq</a><span class="delimiter">(</span><a href="#375048" title="scala.collection.mutable.Buffer[T]">fp</a>, <a href="#375049" title="scala.collection.mutable.Buffer[T]">sp</a><span class="delimiter">)</span> <a href="../../TraversableLike.scala.html#26367" title="(f: scala.collection.mutable.Buffer[T] =&gt; ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[scala.collection.mutable.Buffer[T]],ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI,Seq[ParHashSet.this.ParIterator]])Seq[ParHashSet.this.ParIterator]">map</a> <span class="delimiter">{</span> <a title="scala.collection.mutable.Buffer[T]" id="375112">b</a> =&gt; <a href="#375113" title="ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" class="keyword">new</a> <a href="#162877" title="anonymous class $anon extends ParHashSet.this.ParHashSetIterator with ParHashSet.this.SCPI" id="375113">ParHashSetIterator</a><span class="delimiter">(</span><a href="#375112" title="scala.collection.mutable.Buffer[T]">b</a>.<a href="../../IterableLike.scala.html#31181" title="=&gt; Iterator[T]">iterator</a>, <a href="#375112" title="scala.collection.mutable.Buffer[T]">b</a>.<a href="../../mutable/BufferLike.scala.html#39140" title="=&gt; Int">length</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../ParIterableLike.scala.html#41711" title="ParHashSet.this.SCPI">SCPI</a> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="()T" id="374413">next</a>: <a href="#17613" title="T">T</a> = <span class="delimiter">{</span>
      <a href="#374408" title="(x$1: Int)Unit">i</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="#374420" title="=&gt; Iterator[T]">triter</a>.<a href="../../Iterator.scala.html#36434" title="()T">next</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="374414">hasNext</a>: <a href="../../../Boolean.scala.html#61" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <a href="#374408" title="=&gt; Int">i</a> <a href="../../../Int.scala.html#32087" title="(x: Int)Boolean">&lt;</a> <a href="#374421" title="=&gt; Int">sz</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="374415">remaining</a> = <a href="#374421" title="=&gt; Int">sz</a> <a href="../../../Int.scala.html#32137" title="(x: Int)Int">-</a> <a href="#374408" title="=&gt; Int">i</a>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="comment">/** $factoryInfo
 *  @define Coll immutable.ParHashSet
 *  @define coll immutable parallel hash set
 */</span>
<span class="keyword">object</span> <a title="object scala.collection.parallel.immutable.ParHashSet" id="375222">ParHashSet</a> <a href="../../../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> <a href="../../generic/ParSetFactory.scala.html#12892" title="scala.collection.generic.ParSetFactory[scala.collection.parallel.immutable.ParHashSet]">ParSetFactory</a><span class="delimiter">[</span>ParHashSet<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.parallel.Combiner[T,scala.collection.parallel.immutable.ParHashSet[T]]" id="162979">newCombiner</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="162981">T</a><span class="delimiter">]</span>: <a href="../Combiner.scala.html#16379" title="scala.collection.parallel.Combiner[T,scala.collection.parallel.immutable.ParHashSet[T]]">Combiner</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#375193" title="[T]=&gt; scala.collection.parallel.immutable.HashSetCombiner[T]">HashSetCombiner</a><span title="scala.collection.parallel.immutable.HashSetCombiner[T]" class="delimiter">[</span><a href="#162981" title="T">T</a><span class="delimiter">]</span>
  
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.generic.CanCombineFrom[scala.collection.parallel.immutable.ParHashSet.Coll,T,scala.collection.parallel.immutable.ParHashSet[T]]" id="162982">canBuildFrom</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="162984">T</a><span class="delimiter">]</span>: <a href="../../generic/CanCombineFrom.scala.html#12850" title="scala.collection.generic.CanCombineFrom[scala.collection.parallel.immutable.ParHashSet.Coll,T,scala.collection.parallel.immutable.ParHashSet[T]]">CanCombineFrom</a><span class="delimiter">[</span>Coll, T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> =
    <span title="scala.collection.parallel.immutable.ParHashSet.GenericCanCombineFrom[T]" class="keyword">new</span> <a href="../../generic/ParSetFactory.scala.html#140307" title="scala.collection.parallel.immutable.ParHashSet.GenericCanCombineFrom[T]">GenericCanCombineFrom</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="[T](t: scala.collection.immutable.HashSet[T])scala.collection.parallel.immutable.ParHashSet[T]" id="162985">fromTrie</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="162987">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.collection.immutable.HashSet[T]" id="162988">t</a>: <a href="../../immutable/HashSet.scala.html#13227" title="scala.collection.immutable.HashSet[T]">HashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</span> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">(</span><a href="#162988" title="scala.collection.immutable.HashSet[T]">t</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">private</span><span class="delimiter">[</span>immutable<span class="delimiter">]</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class HashSetCombiner[T] extends collection.parallel.package.BucketCombiner[T,scala.collection.parallel.immutable.ParHashSet[T],Any,scala.collection.parallel.immutable.HashSetCombiner[T]] with ScalaObject" id="17333">HashSetCombiner</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="17614">T</a><span class="delimiter">]</span>
<a href="../../../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> collection.parallel.<a href="../package.scala.html#24928" title="collection.parallel.package.BucketCombiner[T,scala.collection.parallel.immutable.ParHashSet[T],Any,scala.collection.parallel.immutable.HashSetCombiner[T]]">BucketCombiner</a><span class="delimiter">[</span>T, ParHashSet<span class="delimiter">[</span>T<span class="delimiter">]</span>, Any, HashSetCombiner<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#17334" title="object scala.collection.parallel.immutable.HashSetCombiner">HashSetCombiner</a>.<a href="#375198" title="=&gt; Int">rootsize</a><span class="delimiter">)</span> <span class="delimiter">{</span>
<span class="comment">//self: EnvironmentPassingCombiner[T, ParHashSet[T]] =&gt;</span>
  <span class="keyword">import</span> <a href="#17334" title="object scala.collection.parallel.immutable.HashSetCombiner">HashSetCombiner</a>._
  <span class="keyword">import</span> collection.parallel.<a href="../package.scala.html#24905" title="=&gt; scala.collection.parallel.TaskSupport">tasksupport</a>._
  <span class="keyword">val</span> <a title="scala.collection.immutable.HashSet[T]" id="375207">emptyTrie</a> = <a href="../../immutable/HashSet.scala.html#13228" title="object scala.collection.immutable.HashSet">HashSet</a>.<a href="../../immutable/HashSet.scala.html#162938" title="[A]=&gt; scala.collection.immutable.HashSet[A]">empty</a><span title="scala.collection.immutable.HashSet[T]" class="delimiter">[</span><a href="#17614" title="T">T</a><span class="delimiter">]</span>
  
  <span class="keyword">def</span> <a title="(elem: T)HashSetCombiner.this.type" id="375209">+=</a><span class="delimiter">(</span><a title="T" id="375228">elem</a>: <a href="#17614" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../package.scala.html#218329" title="(x$1: Int)Unit">sz</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="keyword">val</span> <a title="Int" id="375251">hc</a> = <a href="#375207" title="=&gt; scala.collection.immutable.HashSet[T]">emptyTrie</a>.<a href="../../immutable/HashSet.scala.html#162827" title="(key: T)Int">computeHash</a><span class="delimiter">(</span><a href="#375228" title="T">elem</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="375252">pos</a> = <a href="#375251" title="Int">hc</a> <a href="../../../Int.scala.html#32120" title="(x: Int)Int">&amp;</a> <span title="Int(31)" class="int">0x1f</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Array.scala.html#26531" title="(i: Int)scala.collection.mutable.UnrolledBuffer[Any]">buckets</a><span class="delimiter">(</span><a href="#375252" title="Int">pos</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// initialize bucket</span>
      <a href="../../../Array.scala.html#26532" title="(i: Int, x: scala.collection.mutable.UnrolledBuffer[Any])Unit">buckets</a><span class="delimiter">(</span><a href="#375252" title="Int">pos</a><span class="delimiter">)</span> = <a href="../../../reflect/Manifest.scala.html#34204" title="scala.collection.mutable.UnrolledBuffer[Any]" class="keyword">new</a> <a href="../../mutable/UnrolledBuffer.scala.html#15138" title="scala.collection.mutable.UnrolledBuffer[Any]">UnrolledBuffer</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>
    <span class="delimiter">}</span>
    <span class="comment">// add to bucket</span>
    <a href="../../../Array.scala.html#26531" title="(i: Int)scala.collection.mutable.UnrolledBuffer[Any]">buckets</a><span class="delimiter">(</span><a href="#375252" title="Int">pos</a><span class="delimiter">)</span> <a href="../../mutable/UnrolledBuffer.scala.html#282122" title="(elem: Any)scala.collection.mutable.UnrolledBuffer[Any]">+=</a> <a href="#375228" title="T">elem</a>
    <a href="#17333" title="HashSetCombiner.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()scala.collection.parallel.immutable.ParHashSet[T]" id="375210">result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]" id="375302">bucks</a> = <a href="../../../Predef.scala.html#9609" title="(xs: Array[scala.collection.mutable.UnrolledBuffer[Any]])scala.collection.mutable.ArrayOps[scala.collection.mutable.UnrolledBuffer[Any]]">buckets</a>.<a href="../../TraversableLike.scala.html#26377" title="(p: scala.collection.mutable.UnrolledBuffer[Any] =&gt; Boolean)Array[scala.collection.mutable.UnrolledBuffer[Any]]">filter</a><a href="../../../Predef.scala.html#9609" title="(xs: Array[scala.collection.mutable.UnrolledBuffer[Any]])scala.collection.mutable.ArrayOps[scala.collection.mutable.UnrolledBuffer[Any]]" class="delimiter">(</a><a href="#375476" title="scala.collection.mutable.UnrolledBuffer[Any]">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>.<a href="../../TraversableLike.scala.html#26367" title="(f: scala.collection.mutable.UnrolledBuffer[Any] =&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[Any])(implicit bf: scala.collection.generic.CanBuildFrom[Array[scala.collection.mutable.UnrolledBuffer[Any]],scala.collection.mutable.UnrolledBuffer.Unrolled[Any],Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]])Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]">map</a><a href="../../../Array.scala.html#40002" title="(implicit m: scala.reflect.ClassManifest[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]])scala.collection.generic.CanBuildFrom[Array[_],scala.collection.mutable.UnrolledBuffer.Unrolled[Any],Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]]" class="delimiter">(</a><a href="#375918" title="scala.collection.mutable.UnrolledBuffer[Any]">_</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282112" title="=&gt; scala.collection.mutable.UnrolledBuffer.Unrolled[Any]">headPtr</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[scala.collection.immutable.HashSet[T]]" id="375303">root</a> = <span title="Array[scala.collection.immutable.HashSet[T]]" class="keyword">new</span> <a href="../../../Array.scala.html#1426" title="Array[scala.collection.immutable.HashSet[T]]">Array</a><span class="delimiter">[</span>HashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#375302" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]">bucks</a>.<a href="../../../Array.scala.html#26530" title="=&gt; Int">length</a><span class="delimiter">)</span>
    
    <a href="../Tasks.scala.html#215861" title="(task: collection.parallel.package.tasksupport.Task[Unit,HashSetCombiner.this.CreateTrie])Unit">executeAndWaitResult</a><span class="delimiter">(</span><span title="HashSetCombiner.this.CreateTrie" class="keyword">new</span> <a href="#375211" title="HashSetCombiner.this.CreateTrie">CreateTrie</a><span class="delimiter">(</span><a href="#375302" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]">bucks</a>, <a href="#375303" title="Array[scala.collection.immutable.HashSet[T]]">root</a>, <span title="Int(0)" class="int">0</span>, <a href="#375302" title="Array[scala.collection.mutable.UnrolledBuffer.Unrolled[Any]]">bucks</a>.<a href="../../../Array.scala.html#26530" title="=&gt; Int">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">var</span> <a title="Int" id="375304">bitmap</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">var</span> <a title="Int" id="375305">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#375305" title="Int">i</a> <a href="../../../Int.scala.html#32087" title="(x: Int)Boolean">&lt;</a> <a href="#375198" title="=&gt; Int">rootsize</a><span class="delimiter">)</span> <a href="#375307" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Array.scala.html#26531" title="(i: Int)scala.collection.mutable.UnrolledBuffer[Any]">buckets</a><span class="delimiter">(</span><a href="#375305" title="Int">i</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#375304" title="Int">bitmap</a> <a href="../../../Int.scala.html#32115" title="(x: Int)Int">|=</a> <span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#32064" title="(x: Int)Int">&lt;&lt;</a> <a href="#375305" title="Int">i</a>
      <a href="#375305" title="Int">i</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Int" id="375306">sz</a> = <a href="../../../Predef.scala.html#9609" title="(xs: Array[scala.collection.immutable.HashSet[T]])scala.collection.mutable.ArrayOps[scala.collection.immutable.HashSet[T]]">root</a>.<a href="../../IndexedSeqOptimized.scala.html#33264" title="(z: Int)(op: (Int, scala.collection.immutable.HashSet[T]) =&gt; Int)Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#376424" title="Int">_</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+</a> <a href="#376425" title="scala.collection.immutable.HashSet[T]">_</a>.<a href="../../immutable/HashSet.scala.html#162815" title="=&gt; Int">size</a><span class="delimiter">)</span>
    
    <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#375306" title="Int">sz</a> <a href="../../../Int.scala.html#32073" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#162862" title="()scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</a> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
    <span class="keyword">else</span> <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#375306" title="Int">sz</a> <a href="../../../Int.scala.html#32073" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</span> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../Array.scala.html#26531" title="(i: Int)scala.collection.immutable.HashSet[T]">root</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.HashSet.HashTrieSet[T]" id="376443">trie</a> = <span title="scala.collection.immutable.HashSet.HashTrieSet[T]" class="keyword">new</span> HashSet.<a href="../../immutable/HashSet.scala.html#162947" title="scala.collection.immutable.HashSet.HashTrieSet[T]">HashTrieSet</a><span class="delimiter">(</span><a href="#375304" title="Int">bitmap</a>, <a href="#375303" title="Array[scala.collection.immutable.HashSet[T]]">root</a>, <a href="#375306" title="Int">sz</a><span class="delimiter">)</span>
      <span title="scala.collection.parallel.immutable.ParHashSet[T]" class="keyword">new</span> <a href="#17480" title="scala.collection.parallel.immutable.ParHashSet[T]">ParHashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#376443" title="scala.collection.immutable.HashSet.HashTrieSet[T]">trie</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/* tasks */</span>
  
  <span class="keyword">class</span> <a title="class CreateTrie extends java.lang.Object with collection.parallel.package.tasksupport.Task[Unit,HashSetCombiner.this.CreateTrie] with ScalaObject" id="375211">CreateTrie</a><a href="../../../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">(</a><a title="Array[collection.mutable.UnrolledBuffer.Unrolled[Any]]" id="375994">bucks</a>: <a href="../../../Array.scala.html#1426" title="Array[collection.mutable.UnrolledBuffer.Unrolled[Any]]">Array</a><span class="delimiter">[</span>Unrolled<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Array[scala.collection.immutable.HashSet[T]]" id="375995">root</a>: <a href="../../../Array.scala.html#1426" title="Array[scala.collection.immutable.HashSet[T]]">Array</a><span class="delimiter">[</span>HashSet<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Int" id="375996">offset</a>: <a href="../../../Int.scala.html#382" title="Int">Int</a>, <a title="Int" id="375997">howmany</a>: <a href="../../../Int.scala.html#382" title="Int">Int</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../Tasks.scala.html#215843" title="collection.parallel.package.tasksupport.Task[Unit,HashSetCombiner.this.CreateTrie]">Task</a><span class="delimiter">[</span>Unit, CreateTrie<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Unit" id="375988">result</a> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(prev: Option[Unit])Unit" id="375990">leaf</a><span class="delimiter">(</span><a title="Option[Unit]" id="376459">prev</a>: <a href="../../../Option.scala.html#556" title="Option[Unit]">Option</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="376463">i</a> = <a href="#375996" title="Int">offset</a>
      <span class="keyword">val</span> <a title="Int" id="376464">until</a> = <a href="#375996" title="Int">offset</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+</a> <a href="#375997" title="Int">howmany</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#376463" title="Int">i</a> <a href="../../../Int.scala.html#32087" title="(x: Int)Boolean">&lt;</a> <a href="#376464" title="Int">until</a><span class="delimiter">)</span> <a href="#376469" title="()Unit" class="delimiter">{</a>
        <a href="../../../Array.scala.html#26532" title="(i: Int, x: scala.collection.immutable.HashSet[T])Unit">root</a><span class="delimiter">(</span><a href="#376463" title="Int">i</a><span class="delimiter">)</span> = <a href="#375991" title="(elems: collection.mutable.UnrolledBuffer.Unrolled[Any])scala.collection.immutable.HashSet[T]">createTrie</a><span class="delimiter">(</span><a href="../../../Array.scala.html#26531" title="(i: Int)collection.mutable.UnrolledBuffer.Unrolled[Any]">bucks</a><span class="delimiter">(</span><a href="#376463" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#376463" title="Int">i</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(elems: collection.mutable.UnrolledBuffer.Unrolled[Any])scala.collection.immutable.HashSet[T]" id="375991">createTrie</a><span class="delimiter">(</span><a title="collection.mutable.UnrolledBuffer.Unrolled[Any]" id="376476">elems</a>: <a href="../../mutable/UnrolledBuffer.scala.html#282174" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">Unrolled</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../immutable/HashSet.scala.html#13227" title="scala.collection.immutable.HashSet[T]">HashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scala.collection.immutable.HashSet[T]" id="376482">trie</a> = <span title="scala.collection.immutable.HashSet[T]" class="keyword">new</span> <a href="../../immutable/HashSet.scala.html#13227" title="scala.collection.immutable.HashSet[T]">HashSet</a><span class="delimiter">[</span>T<span class="delimiter">]</span>
      
      <span class="keyword">var</span> <a title="collection.mutable.UnrolledBuffer.Unrolled[Any]" id="376483">unrolled</a> = <a href="#376476" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">elems</a>
      <span class="keyword">var</span> <a title="Int" id="376484">i</a> = <span title="Int(0)" class="int">0</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#376483" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#376485" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="Array[Any]" id="376486">chunkarr</a> = <a href="#376483" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282186" title="=&gt; Array[Any]">array</a>
        <span class="keyword">val</span> <a title="Int" id="376487">chunksz</a> = <a href="#376483" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282183" title="=&gt; Int">size</a>
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#376484" title="Int">i</a> <a href="../../../Int.scala.html#32087" title="(x: Int)Boolean">&lt;</a> <a href="#376487" title="Int">chunksz</a><span class="delimiter">)</span> <a href="#376488" title="()Unit" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="T" id="376493">v</a> = <a href="../../../Array.scala.html#26531" title="(i: Int)Any">chunkarr</a><span class="delimiter">(</span><a href="#376484" title="Int">i</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#17614" title="T">T</a><span class="delimiter">]</span>
          <span class="keyword">val</span> <a title="Int" id="376494">hc</a> = <a href="#376482" title="scala.collection.immutable.HashSet[T]">trie</a>.<a href="../../immutable/HashSet.scala.html#162827" title="(key: T)Int">computeHash</a><span class="delimiter">(</span><a href="#376493" title="T">v</a><span class="delimiter">)</span>
          <a href="#376482" title="scala.collection.immutable.HashSet[T]">trie</a> = <a href="#376482" title="scala.collection.immutable.HashSet[T]">trie</a>.<a href="../../immutable/HashSet.scala.html#162829" title="(key: T, hash: Int, level: Int)scala.collection.immutable.HashSet[T]">updated0</a><span class="delimiter">(</span><a href="#376493" title="T">v</a>, <a href="#376494" title="Int">hc</a>, <a href="#375196" title="=&gt; Int">rootbits</a><span class="delimiter">)</span>
          <a href="#376484" title="Int">i</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span>
        <a href="#376484" title="Int">i</a> = <span title="Int(0)" class="int">0</span>
        <a href="#376483" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a> = <a href="#376483" title="collection.mutable.UnrolledBuffer.Unrolled[Any]">unrolled</a>.<a href="../../mutable/UnrolledBuffer.scala.html#282189" title="=&gt; collection.mutable.UnrolledBuffer.Unrolled[Any]">next</a>
      <span class="delimiter">}</span>
      
      <a href="#376482" title="scala.collection.immutable.HashSet[T]">trie</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; List[HashSetCombiner.this.CreateTrie]" id="375992">split</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="376506">fp</a> = <a href="#375997" title="Int">howmany</a> <a href="../../../Int.scala.html#32151" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span>
      <a href="../../immutable/List.scala.html#26203" title="(xs: HashSetCombiner.this.CreateTrie*)List[HashSetCombiner.this.CreateTrie]">List</a><span class="delimiter">(</span><span title="HashSetCombiner.this.CreateTrie" class="keyword">new</span> <a href="#375211" title="HashSetCombiner.this.CreateTrie">CreateTrie</a><span class="delimiter">(</span><a href="#375994" title="Array[collection.mutable.UnrolledBuffer.Unrolled[Any]]">bucks</a>, <a href="#375995" title="Array[scala.collection.immutable.HashSet[T]]">root</a>, <a href="#375996" title="Int">offset</a>, <a href="#376506" title="Int">fp</a><span class="delimiter">)</span>, <span title="HashSetCombiner.this.CreateTrie" class="keyword">new</span> <a href="#375211" title="HashSetCombiner.this.CreateTrie">CreateTrie</a><span class="delimiter">(</span><a href="#375994" title="Array[collection.mutable.UnrolledBuffer.Unrolled[Any]]">bucks</a>, <a href="#375995" title="Array[scala.collection.immutable.HashSet[T]]">root</a>, <a href="#375996" title="Int">offset</a> <a href="../../../Int.scala.html#32130" title="(x: Int)Int">+</a> <a href="#376506" title="Int">fp</a>, <a href="#375997" title="Int">howmany</a> <a href="../../../Int.scala.html#32137" title="(x: Int)Int">-</a> <a href="#376506" title="Int">fp</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="375993">shouldSplitFurther</a> = <a href="#375997" title="Int">howmany</a> <a href="../../../Int.scala.html#32101" title="(x: Int)Boolean">&gt;</a> collection.parallel.<a href="../package.scala.html#24900" title="(sz: Int, parallelismLevel: Int)Int">thresholdFromSize</a><span class="delimiter">(</span><a href="#375995" title="Array[scala.collection.immutable.HashSet[T]]">root</a>.<a href="../../../Array.scala.html#26530" title="=&gt; Int">length</a>, <a href="../Tasks.scala.html#215866" title="=&gt; Int">parallelismLevel</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>


<span class="keyword">object</span> <a title="object scala.collection.parallel.immutable.HashSetCombiner" id="17334">HashSetCombiner</a> <a href="../../../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="[T]=&gt; scala.collection.parallel.immutable.HashSetCombiner[T]" id="375193">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="375195">T</a><span class="delimiter">]</span> = <a href="#375203" title="scala.collection.parallel.immutable.HashSetCombiner[T]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.parallel.immutable.HashSetCombiner[T]" id="375203">HashSetCombiner</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span><span class="delimiter">}</span> <span class="comment">// was: with EnvironmentPassingCombiner[T, ParHashSet[T]] {}</span>
  
  <span class="keyword">private</span><span class="delimiter">[</span>immutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="375196">rootbits</a> = <span title="Int(5)" class="int">5</span>
  <span class="keyword">private</span><span class="delimiter">[</span>immutable<span class="delimiter">]</span> <span class="keyword">val</span> <a title="Int" id="375198">rootsize</a> = <span class="int">1</span> <span title="Int(32)">&lt;&lt;</span> <span class="int">5</span>
<span class="delimiter">}</span>











































        </pre>
    </body>
</html>