<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/concurrent/MailBox.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2011, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>



<span class="keyword">package</span> scala.concurrent

<span class="comment">/** This class ...
 *
 *  @author  Martin Odersky
 *  @version 1.0, 12/03/2003
 */</span>
<span class="comment">//class MailBox with Monitor with LinkedListQueueCreator {</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;use actors instead&quot;</span>, <span class="string">&quot;2.8.0&quot;</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class MailBox extends java.lang.Object with scala.concurrent.ListQueueCreator with ScalaObject" id="18327">MailBox</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="keyword">extends</a> <span title="java.lang.Object">AnyRef</span> <span class="keyword">with</span> <a href="#18321" title="scala.concurrent.ListQueueCreator">ListQueueCreator</a> <span class="delimiter">{</span>

  <span class="keyword">type</span> <a title="AnyRef" id="391259">Message</a> = <span title="AnyRef">AnyRef</span>

  <span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PreReceiver extends java.lang.Object with ScalaObject" id="391260">PreReceiver</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">{</a>
    <span class="keyword">var</span> <a title="MailBox.this.Message" id="391296">msg</a>: <span title="MailBox.this.Message">Message</span> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="(msg: MailBox.this.Message)Boolean" id="391298">isDefinedAt</a><span class="delimiter">(</span><a title="MailBox.this.Message" id="391305">msg</a>: <span title="MailBox.this.Message">Message</span><span class="delimiter">)</span>: <a href="../Boolean.scala.html#61" title="Boolean">Boolean</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class Receiver[A] extends MailBox.this.PreReceiver with ScalaObject" id="391261">Receiver</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="391262">A</a><span class="delimiter">]</span><a href="../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">(</a><a title="PartialFunction[MailBox.this.Message,A]" id="391335">receiver</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[MailBox.this.Message,A]">PartialFunction</a><span class="delimiter">[</span>Message, A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#391260" title="MailBox.this.PreReceiver">PreReceiver</a> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(msg: MailBox.this.Message)Boolean" id="391330">isDefinedAt</a><span class="delimiter">(</span><a title="MailBox.this.Message" id="391338">msg</a>: <span title="MailBox.this.Message">Message</span><span class="delimiter">)</span> = <a href="#391335" title="PartialFunction[MailBox.this.Message,A]">receiver</a>.<a href="../PartialFunction.scala.html#30799" title="(x: MailBox.this.Message)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#391338" title="MailBox.this.Message">msg</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="()A" id="391331">receive</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#391262" title="A">A</a> = <a href="#391261" title="(x$1: A)A">synchronized</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#391296" title="=&gt; MailBox.this.Message">msg</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#391261" title="()Unit">wait</a><a href="#391360" title="()Unit" class="delimiter">(</a><span class="delimiter">)</span>
      <a href="../Function1.scala.html#30790" title="(v1: MailBox.this.Message)A">receiver</a><span class="delimiter">(</span><a href="#391296" title="=&gt; MailBox.this.Message">msg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(msec: Long)A" id="391332">receiveWithin</a><span class="delimiter">(</span><a title="Long" id="391346">msec</a>: <a href="../Long.scala.html#1435" title="Long">Long</a><span class="delimiter">)</span>: <a href="#391262" title="A">A</a> = <a href="#391261" title="(x$1: A)A">synchronized</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#391296" title="=&gt; MailBox.this.Message">msg</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#391261" title="(x$1: Long)Unit">wait</a><span class="delimiter">(</span><a href="#391346" title="Long">msec</a><span class="delimiter">)</span>
      <a href="../Function1.scala.html#30790" title="(v1: MailBox.this.Message)A">receiver</a><span class="delimiter">(</span><span title="MailBox.this.Message" class="keyword">if</span> <span class="delimiter">(</span><a href="#391296" title="=&gt; MailBox.this.Message">msg</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#391296" title="=&gt; MailBox.this.Message">msg</a> <span class="keyword">else</span> <a href="TIMEOUT.scala.html#18391" title="object scala.concurrent.TIMEOUT">TIMEOUT</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.concurrent.QueueModule[MailBox.this.Message]" id="391263">messageQueue</a> = <a href="#391285" title="[A]=&gt; scala.concurrent.QueueModule[A]">queueCreate</a><span title="scala.concurrent.QueueModule[MailBox.this.Message]" class="delimiter">[</span><span title="MailBox.this.Message">Message</span><span class="delimiter">]</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.concurrent.QueueModule[MailBox.this.PreReceiver]" id="391265">receiverQueue</a> = <a href="#391285" title="[A]=&gt; scala.concurrent.QueueModule[A]">queueCreate</a><span title="scala.concurrent.QueueModule[MailBox.this.PreReceiver]" class="delimiter">[</span><a href="#391260" title="MailBox.this.PreReceiver">PreReceiver</a><span class="delimiter">]</span>

  <span class="comment">/** Unconsumed messages. */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="MailBox.this.messageQueue.T" id="391268">sent</a> = <a href="#391263" title="=&gt; scala.concurrent.QueueModule[MailBox.this.Message]">messageQueue</a>.<a href="#391291" title="=&gt; MailBox.this.messageQueue.T">make</a>

  <span class="comment">/** Pending receivers. */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="MailBox.this.receiverQueue.T" id="391271">receivers</a> = <a href="#391265" title="=&gt; scala.concurrent.QueueModule[MailBox.this.PreReceiver]">receiverQueue</a>.<a href="#391291" title="=&gt; MailBox.this.receiverQueue.T">make</a>

  <span class="comment">/**
  * Check whether the receiver can be applied to an unconsumed message.
  * If yes, the message is extracted and associated with the receiver.
  * Otherwise the receiver is appended to the list of pending receivers.
  */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[A](receiver: MailBox.this.Receiver[A])Unit" id="391273">scanSentMsgs</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="391275">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="MailBox.this.Receiver[A]" id="391376">receiver</a>: <a href="#391261" title="MailBox.this.Receiver[A]">Receiver</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a> = <a href="#18327" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#391263" title="=&gt; scala.concurrent.QueueModule[MailBox.this.Message]">messageQueue</a>.<a href="#391293" title="(l: MailBox.this.messageQueue.T, p: MailBox.this.Message =&gt; Boolean)Option[(MailBox.this.Message, MailBox.this.messageQueue.T)]">extractFirst</a><span class="delimiter">(</span><a href="#391268" title="=&gt; MailBox.this.messageQueue.T">sent</a>, <a title="MailBox.this.Message" id="391401">msg</a> =&gt; <a href="#391376" title="MailBox.this.Receiver[A]">receiver</a>.<a href="#391330" title="(msg: MailBox.this.Message)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#391401" title="MailBox.this.Message">msg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../Option.scala.html#1733" title="Unit">None</a> =&gt;
        <a href="#391271" title="(x$1: MailBox.this.receiverQueue.T)Unit">receivers</a> = <a href="#391265" title="=&gt; scala.concurrent.QueueModule[MailBox.this.PreReceiver]">receiverQueue</a>.<a href="#391292" title="(l: MailBox.this.receiverQueue.T, x: MailBox.this.PreReceiver)MailBox.this.receiverQueue.T">append</a><span class="delimiter">(</span><a href="#391271" title="=&gt; MailBox.this.receiverQueue.T">receivers</a>, <a href="#391376" title="MailBox.this.Receiver[A]">receiver</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="MailBox.this.Message" id="391409">msg</a>, <a title="MailBox.this.messageQueue.T" id="391410">withoutMsg</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#391268" title="(x$1: MailBox.this.messageQueue.T)Unit">sent</a> = <a href="#391410" title="MailBox.this.messageQueue.T">withoutMsg</a>
        <a href="#391376" title="MailBox.this.Receiver[A]">receiver</a>.<a href="#391296" title="(x$1: MailBox.this.Message)Unit">msg</a> = <a href="#391409" title="MailBox.this.Message">msg</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * First check whether a pending receiver is applicable to the sent
  * message. If yes, the receiver is notified. Otherwise the message
  * is appended to the linked list of sent messages.  
  */</span>
  <span class="keyword">def</span> <a title="(msg: MailBox.this.Message)Unit" id="391276">send</a><span class="delimiter">(</span><a title="MailBox.this.Message" id="391412">msg</a>: <span title="MailBox.this.Message">Message</span><span class="delimiter">)</span>: <a href="../Unit.scala.html#457" title="Unit">Unit</a> = <a href="#18327" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#391265" title="=&gt; scala.concurrent.QueueModule[MailBox.this.PreReceiver]">receiverQueue</a>.<a href="#391293" title="(l: MailBox.this.receiverQueue.T, p: MailBox.this.PreReceiver =&gt; Boolean)Option[(MailBox.this.PreReceiver, MailBox.this.receiverQueue.T)]">extractFirst</a><span class="delimiter">(</span><a href="#391271" title="=&gt; MailBox.this.receiverQueue.T">receivers</a>, <a title="MailBox.this.PreReceiver" id="391419">r</a> =&gt; <a href="#391419" title="MailBox.this.PreReceiver">r</a>.<a href="#391298" title="(msg: MailBox.this.Message)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#391412" title="MailBox.this.Message">msg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../Option.scala.html#1733" title="Unit">None</a> =&gt;
        <a href="#391268" title="(x$1: MailBox.this.messageQueue.T)Unit">sent</a> = <a href="#391263" title="=&gt; scala.concurrent.QueueModule[MailBox.this.Message]">messageQueue</a>.<a href="#391292" title="(l: MailBox.this.messageQueue.T, x: MailBox.this.Message)MailBox.this.messageQueue.T">append</a><span class="delimiter">(</span><a href="#391268" title="=&gt; MailBox.this.messageQueue.T">sent</a>, <a href="#391412" title="MailBox.this.Message">msg</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="MailBox.this.PreReceiver" id="391425">receiver</a>, <a title="MailBox.this.receiverQueue.T" id="391426">withoutReceiver</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#391271" title="(x$1: MailBox.this.receiverQueue.T)Unit">receivers</a> = <a href="#391426" title="MailBox.this.receiverQueue.T">withoutReceiver</a>
        <a href="#391425" title="MailBox.this.PreReceiver">receiver</a>.<a href="#391296" title="(x$1: MailBox.this.Message)Unit">msg</a> = <a href="#391412" title="MailBox.this.Message">msg</a>
        <a href="#391425" title="MailBox.this.PreReceiver">receiver</a> <span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span> <a href="#391425" title="MailBox.this.PreReceiver">receiver</a>.<span title="()Unit">notify</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Block until there is a message in the mailbox for which the processor
  * &lt;code&gt;f&lt;/code&gt; is defined.
  */</span>
  <span class="keyword">def</span> <a title="[A](f: PartialFunction[MailBox.this.Message,A])A" id="391277">receive</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="391279">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[MailBox.this.Message,A]" id="391431">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[MailBox.this.Message,A]">PartialFunction</a><span class="delimiter">[</span>Message, A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#391279" title="A">A</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="MailBox.this.Receiver[A]" id="391434">r</a> = <span title="MailBox.this.Receiver[A]" class="keyword">new</span> <a href="#391261" title="MailBox.this.Receiver[A]">Receiver</a><span class="delimiter">(</span><a href="#391431" title="PartialFunction[MailBox.this.Message,A]">f</a><span class="delimiter">)</span>
    <a href="#391273" title="(receiver: MailBox.this.Receiver[A])Unit">scanSentMsgs</a><span class="delimiter">(</span><a href="#391434" title="MailBox.this.Receiver[A]">r</a><span class="delimiter">)</span>
    <a href="#391434" title="MailBox.this.Receiver[A]">r</a>.<a href="#391331" title="()A">receive</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
  * Block until there is a message in the mailbox for which the processor
  * &lt;code&gt;f&lt;/code&gt; is defined or the timeout is over.
  */</span>
  <span class="keyword">def</span> <a title="[A](msec: Long)(f: PartialFunction[MailBox.this.Message,A])A" id="391280">receiveWithin</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="391282">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Long" id="391441">msec</a>: <a href="../Long.scala.html#1435" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[MailBox.this.Message,A]" id="391442">f</a>: <a href="../PartialFunction.scala.html#331" title="PartialFunction[MailBox.this.Message,A]">PartialFunction</a><span class="delimiter">[</span>Message, A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#391282" title="A">A</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="MailBox.this.Receiver[A]" id="391445">r</a> = <span title="MailBox.this.Receiver[A]" class="keyword">new</span> <a href="#391261" title="MailBox.this.Receiver[A]">Receiver</a><span class="delimiter">(</span><a href="#391442" title="PartialFunction[MailBox.this.Message,A]">f</a><span class="delimiter">)</span>
    <a href="#391273" title="(receiver: MailBox.this.Receiver[A])Unit">scanSentMsgs</a><span class="delimiter">(</span><a href="#391445" title="MailBox.this.Receiver[A]">r</a><span class="delimiter">)</span>
    <a href="#391445" title="MailBox.this.Receiver[A]">r</a>.<a href="#391332" title="(msec: Long)A">receiveWithin</a><span class="delimiter">(</span><a href="#391441" title="Long">msec</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>



<span class="comment">/**
* Module for dealing with queues.
*/</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;use actors instead&quot;</span>, <span class="string">&quot;2.8.0&quot;</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait QueueModule[A] extends java.lang.Object" id="18342">QueueModule</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="18495">A</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="comment">/** Type of queues. */</span>
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: Any" id="391290">T</a>
  <span class="comment">/** Create an empty queue. */</span>
  <span class="keyword">def</span> <a title="=&gt; QueueModule.this.T" id="391291">make</a>: <a href="#391290" title="QueueModule.this.T">T</a>
  <span class="comment">/** Append an element to a queue. */</span>
  <span class="keyword">def</span> <a title="(l: QueueModule.this.T, x: A)QueueModule.this.T" id="391292">append</a><span class="delimiter">(</span><a title="QueueModule.this.T" id="391402">l</a>: <a href="#391290" title="QueueModule.this.T">T</a>, <a title="A" id="391403">x</a>: <a href="#18495" title="A">A</a><span class="delimiter">)</span>: <a href="#391290" title="QueueModule.this.T">T</a>
  <span class="comment">/** Extract an element satisfying a predicate from a queue. */</span>
  <span class="keyword">def</span> <a title="(l: QueueModule.this.T, p: A =&gt; Boolean)Option[(A, QueueModule.this.T)]" id="391293">extractFirst</a><span class="delimiter">(</span><a title="QueueModule.this.T" id="391396">l</a>: <a href="#391290" title="QueueModule.this.T">T</a>, <a title="A =&gt; Boolean" id="391397">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="../Option.scala.html#556" title="Option[(A, QueueModule.this.T)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>A, T<span class="delimiter">)</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/** Inefficient but simple queue module creator. */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;use actors instead&quot;</span>, <span class="string">&quot;2.8.0&quot;</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait ListQueueCreator extends java.lang.Object with ScalaObject" id="18321">ListQueueCreator</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="[A]=&gt; scala.concurrent.QueueModule[A]" id="391285">queueCreate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="391287">A</a><span class="delimiter">]</span>: <a href="#18342" title="scala.concurrent.QueueModule[A]">QueueModule</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#391455" title="java.lang.Object with scala.concurrent.QueueModule[A]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.concurrent.QueueModule[A]" id="391455">QueueModule</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="List[A]" id="391459">T</a> = <a href="../collection/immutable/List.scala.html#14042" title="List[A]">List</a><span class="delimiter">[</span>A<span class="delimiter">]</span>
    <span class="keyword">def</span> <a title="=&gt; this.T" id="391460">make</a>: <a href="../collection/immutable/List.scala.html#14042" title="this.T">T</a> = <a href="../collection/immutable/List.scala.html#13695" title="object Nil">Nil</a>
    <span class="keyword">def</span> <a title="(l: this.T, x: A)this.T" id="391461">append</a><span class="delimiter">(</span><a title="this.T" id="391465">l</a>: <a href="../collection/immutable/List.scala.html#14042" title="this.T">T</a>, <a title="A" id="391466">x</a>: <a href="#391287" title="A">A</a><span class="delimiter">)</span>: <a href="../collection/immutable/List.scala.html#14042" title="this.T">T</a> = <a href="#391465" title="this.T">l</a> <a href="../collection/immutable/List.scala.html#26480" title="(prefix: List[A])List[A]">:::</a> <a href="#391466" title="A">x</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: A)List[A]">::</a> <a href="../collection/immutable/List.scala.html#13695" title="object Nil">Nil</a>
    <span class="keyword">def</span> <a title="(l: this.T, p: A =&gt; Boolean)Option[(A, this.T)]" id="391462">extractFirst</a><span class="delimiter">(</span><a title="this.T" id="391470">l</a>: <a href="../collection/immutable/List.scala.html#14042" title="this.T">T</a>, <a title="A =&gt; Boolean" id="391471">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="../Option.scala.html#556" title="Option[(A, this.T)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>A, T<span class="delimiter">)</span><span class="delimiter">]</span> =
      <a href="#391470" title="this.T">l</a> <span title="Option[(A, this.T)]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../collection/immutable/List.scala.html#13695" title="None.type">Nil</a> =&gt; <a href="../Option.scala.html#1733" title="object None">None</a>
        <span class="keyword">case</span> <a title="Option[(A, this.T)]" id="391503">head</a> :: <a title="List[A]" id="391504">tail</a> =&gt;
          <span title="Option[(A, this.T)]" class="keyword">if</span> <span class="delimiter">(</span><a href="../Function1.scala.html#30790" title="(v1: A)Boolean">p</a><span class="delimiter">(</span><a href="#391503" title="A">head</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../Option.scala.html#35222" title="(x: (A, List[A]))Some[(A, List[A])]">Some</a><span class="delimiter">(</span><a href="../Tuple2.scala.html#30727" title="(_1: A, _2: List[A])(A, List[A])" class="delimiter">(</a><a href="#391503" title="A">head</a>, <a href="#391504" title="List[A]">tail</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#391462" title="(l: this.T, p: A =&gt; Boolean)Option[(A, this.T)]">extractFirst</a><span class="delimiter">(</span><a href="#391504" title="List[A]">tail</a>, <a href="#391471" title="A =&gt; Boolean">p</a><span class="delimiter">)</span> <span title="Option[(A, this.T)]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../Option.scala.html#1733" title="None.type">None</a> =&gt; <a href="../Option.scala.html#1733" title="object None">None</a>
              <span class="keyword">case</span> <span title="Some[(A, List[A])]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="A" id="391521">x</a>, <a title="this.T" id="391522">without_x</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="../Option.scala.html#35222" title="(x: (A, List[A]))Some[(A, List[A])]">Some</a><span class="delimiter">(</span><a href="../Tuple2.scala.html#30727" title="(_1: A, _2: List[A])(A, List[A])" class="delimiter">(</a><a href="#391521" title="A">x</a>, <a href="#391503" title="A">head</a> <a href="../collection/immutable/List.scala.html#26477" title="(x: A)List[A]">::</a> <a href="#391522" title="this.T">without_x</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/** Efficient queue module creator based on linked lists. */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;use actors instead&quot;</span>, <span class="string">&quot;2.8.0&quot;</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait LinkedListQueueCreator extends java.lang.Object with ScalaObject" id="18357">LinkedListQueueCreator</a> <a href="../ScalaObject.scala.html#460" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">import</span> scala.collection.mutable.LinkedList
  <span class="keyword">def</span> <a title="[A &gt;: Null &lt;: AnyRef]=&gt; scala.concurrent.QueueModule[A]" id="391540">queueCreate</a><span class="delimiter">[</span><a title="&gt;: Null &lt;: AnyRef" id="391542">A</a> &gt;: Null &lt;: AnyRef<span class="delimiter">]</span>: <a href="#18342" title="scala.concurrent.QueueModule[A]">QueueModule</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#391547" title="java.lang.Object with scala.concurrent.QueueModule[A]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.concurrent.QueueModule[A]" id="391547">QueueModule</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="391551">T</a> = <a href="../Tuple2.scala.html#1516" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" class="delimiter">(</a>LinkedList<span class="delimiter">[</span>A<span class="delimiter">]</span>, LinkedList<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="comment">// fst = the list, snd = last elem</span>
    <span class="keyword">def</span> <a title="=&gt; (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="391552">make</a>: <a href="../Tuple2.scala.html#1516" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedList[A]" id="391569">l</a> = <a href="../collection/mutable/LinkedList.scala.html#257019" title="(elem: A, next: scala.collection.mutable.LinkedList[A])scala.collection.mutable.LinkedList[A]" class="keyword">new</a> <a href="../collection/mutable/LinkedList.scala.html#14678" title="scala.collection.mutable.LinkedList[A]">LinkedList</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="../Tuple2.scala.html#30727" title="(_1: scala.collection.mutable.LinkedList[A], _2: scala.collection.mutable.LinkedList[A])(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" class="delimiter">(</a><a href="#391569" title="scala.collection.mutable.LinkedList[A]">l</a>, <a href="#391569" title="scala.collection.mutable.LinkedList[A]">l</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(l: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]), x: A)(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="391553">append</a><span class="delimiter">(</span><a title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="391557">l</a>: <a href="../Tuple2.scala.html#1516" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a>, <a title="A" id="391558">x</a>: <a href="#391542" title="A">A</a><span class="delimiter">)</span>: <a href="../Tuple2.scala.html#1516" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedList[A]" id="391592">atTail</a> = <a href="../collection/mutable/LinkedList.scala.html#257019" title="(elem: A, next: scala.collection.mutable.LinkedList[A])scala.collection.mutable.LinkedList[A]" class="keyword">new</a> <a href="../collection/mutable/LinkedList.scala.html#14678" title="scala.collection.mutable.LinkedList[A]">LinkedList</a><span class="delimiter">(</span><a href="#391558" title="A">x</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#391557" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#30741" title="=&gt; scala.collection.mutable.LinkedList[A]">_2</a> <a href="../collection/mutable/LinkedListLike.scala.html#252486" title="(that: scala.collection.mutable.LinkedList[A])scala.collection.mutable.LinkedList[A]">append</a> <a href="#391592" title="scala.collection.mutable.LinkedList[A]">atTail</a>;
      <a href="../Tuple2.scala.html#30727" title="(_1: scala.collection.mutable.LinkedList[A], _2: scala.collection.mutable.LinkedList[A])(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" class="delimiter">(</a><a href="#391557" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#30739" title="=&gt; scala.collection.mutable.LinkedList[A]">_1</a>, <a href="#391592" title="scala.collection.mutable.LinkedList[A]">atTail</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(l: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]), p: A =&gt; Boolean)Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]" id="391554">extractFirst</a><span class="delimiter">(</span><a title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="391562">l</a>: <a href="../Tuple2.scala.html#1516" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a>, <a title="A =&gt; Boolean" id="391563">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="../Option.scala.html#556" title="Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>A, T<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scala.collection.mutable.LinkedList[A]" id="391619">xs</a> = <a href="#391562" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#30739" title="=&gt; scala.collection.mutable.LinkedList[A]">_1</a>
      <span class="keyword">var</span> <a title="scala.collection.mutable.LinkedList[A]" id="391620">xs1</a> = <a href="#391619" title="scala.collection.mutable.LinkedList[A]">xs</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252478" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../Boolean.scala.html#32917" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../Boolean.scala.html#32913" title="=&gt; Boolean">!</a><a href="../Function1.scala.html#30790" title="(v1: A)Boolean">p</a><span class="delimiter">(</span><a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252475" title="=&gt; A">elem</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#391621" title="()Unit" class="delimiter">{</a>
        <a href="#391619" title="scala.collection.mutable.LinkedList[A]">xs</a> = <a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a>
        <a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a> = <a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252478" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a>
      <span class="delimiter">}</span>
      <span title="Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]" class="keyword">if</span> <span class="delimiter">(</span><a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#391619" title="scala.collection.mutable.LinkedList[A]">xs</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252479" title="(x$1: scala.collection.mutable.LinkedList[A])Unit">next</a> = <a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252478" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a>
        <span title="Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]" class="keyword">if</span> <span class="delimiter">(</span><a href="#391619" title="scala.collection.mutable.LinkedList[A]">xs</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252478" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <a href="../Option.scala.html#35222" title="(x: (A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])))Some[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]">Some</a><span class="delimiter">(</span><a href="../Tuple2.scala.html#30727" title="(_1: A, _2: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))" class="delimiter">(</a><a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252475" title="=&gt; A">elem</a>, <a href="../Tuple2.scala.html#30727" title="(_1: scala.collection.mutable.LinkedList[A], _2: scala.collection.mutable.LinkedList[A])(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" class="delimiter">(</a><a href="#391562" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#30739" title="=&gt; scala.collection.mutable.LinkedList[A]">_1</a>, <a href="#391619" title="scala.collection.mutable.LinkedList[A]">xs</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="../Option.scala.html#35222" title="(x: (A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])))Some[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]">Some</a><span class="delimiter">(</span><a href="../Tuple2.scala.html#30727" title="(_1: A, _2: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))" class="delimiter">(</a><a href="#391620" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/mutable/LinkedListLike.scala.html#252475" title="=&gt; A">elem</a>, <a href="#391562" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span>
        <a href="../Option.scala.html#1733" title="object None">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>