<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/scalacheck/Commands.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*-------------------------------------------------------------------------*\
**  ScalaCheck                                                             **
**  Copyright (c) 2007-2011 Rickard Nilsson. All rights reserved.          **
**  http://www.scalacheck.org                                              **
**                                                                         **
**  This software is released under the terms of the Revised BSD License.  **
**  There is NO WARRANTY. See the file LICENSE for the full text.          **
\*-------------------------------------------------------------------------*/</span>

<span class="keyword">package</span> org.scalacheck

<span class="keyword">import</span> <a href="Gen.scala.html#9507" title="object org.scalacheck.Gen">Gen</a>._
<span class="keyword">import</span> <a href="Prop.scala.html#9522" title="object org.scalacheck.Prop">Prop</a>._
<span class="keyword">import</span> <a href="Shrink.scala.html#9540" title="object org.scalacheck.Shrink">Shrink</a>._

<span class="comment">/** See User Guide for usage examples */</span>
<span class="keyword">trait</span> <a title="trait Commands extends java.lang.Object with org.scalacheck.Prop with ScalaObject" id="9485">Commands</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Prop.scala.html#9521" title="org.scalacheck.Prop">Prop</a> <span class="delimiter">{</span>

  <span class="comment">/** The abstract state data type. This type must be immutable.
   *  The state type that encodes the abstract state. The abstract state
   *  should model all the features we need from the real state, the system
   *  under test. We should leave out all details that aren't needed for
   *  specifying our pre- and postconditions. The state type must be called
   *  State and be immutable. */</span>
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: AnyRef" id="39811">State</a> &lt;: AnyRef

  <span class="keyword">class</span> <a title="class Binding extends java.lang.Object with ScalaObject" id="39812">Binding</a><a href="#39812" title="ScalaObject" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="Commands.this.State" id="39838">key</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Any" id="39835">get</a>: <span title="Any">Any</span> = <a href="#39818" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Any)]">bindings</a>.<span title="(p: (Commands.this.State, Any) =&gt; Boolean)Option[(Commands.this.State, Any)]">find</span><span class="delimiter">(</span><a href="#39847" title="(Commands.this.State, Any)">_</a>.<span title="=&gt; Commands.this.State">_1</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#39838" title="=&gt; Commands.this.State">key</a><span class="delimiter">)</span> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Nothing">None</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;No value bound&quot;)" class="string">&quot;No value bound&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Any">Some</span><span class="delimiter">(</span><a title="(Commands.this.State, Any)" id="39962">x</a><span class="delimiter">)</span> =&gt; <a href="#39962" title="(Commands.this.State, Any)">x</a>.<span title="=&gt; Any">_2</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Abstract commands are defined as subtypes of the traits Command or SetCommand.
   *  Each command must have a run method and a method that returns the new abstract
   *  state, as it should look after the command has been run.
   *  A command can also define a precondition that states how the current
   *  abstract state must look if the command should be allowed to run.
   *  Finally, we can also define a postcondition which verifies that the
   *  system under test is in a correct state after the command exectution. */</span>
  <span class="keyword">trait</span> <a title="trait Command extends java.lang.Object with ScalaObject" id="39813">Command</a> <span title="ScalaObject" class="delimiter">{</span>

    <span class="comment">/** Used internally. */</span>
    <span class="keyword">protected</span><span class="delimiter">[</span>Commands<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(s: Commands.this.State)Any" id="39964">run_</a><span class="delimiter">(</span><a title="Commands.this.State" id="39978">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span> = <a href="#39965" title="(s: Commands.this.State)Any">run</a><span class="delimiter">(</span><a href="#39978" title="Commands.this.State">s</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(s: Commands.this.State)Any" id="39965">run</a><span class="delimiter">(</span><a title="Commands.this.State" id="39981">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span>: <span title="Any">Any</span>
    <span class="keyword">def</span> <a title="(s: Commands.this.State)Commands.this.State" id="39966">nextState</a><span class="delimiter">(</span><a title="Commands.this.State" id="39983">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span>: <a href="#39811" title="Commands.this.State">State</a>

    <span class="comment">/** @deprecated Use &lt;code&gt;preConditions += ...&lt;/code&gt; instead. */</span>
    @deprecated<span class="delimiter">(</span><span class="string">&quot;Use 'preConditions += ...' instead.&quot;</span>, <span class="string">&quot;1.6&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(f: Commands.this.State =&gt; Boolean)scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]" id="39967">preCondition_=</a><span class="delimiter">(</span><a title="Commands.this.State =&gt; Boolean" id="39985">f</a>: State =&gt; Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#39969" title="=&gt; scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]">preConditions</a>.<span title="()Unit">clear</span>
      <a href="#39969" title="=&gt; scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]">preConditions</a> <span title="(x: Commands.this.State =&gt; Boolean)Command.this.preConditions.type">+=</span> <a href="#39985" title="Commands.this.State =&gt; Boolean">f</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Returns all preconditions merged into a single function */</span>
    <span class="keyword">def</span> <a title="=&gt; Commands.this.State =&gt; Boolean" id="39968">preCondition</a>: <span class="delimiter">(</span>State =&gt; Boolean<span class="delimiter">)</span> = <a title="Commands.this.State" id="40009">s</a> =&gt; <a href="#39969" title="=&gt; scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]">preConditions</a>.<span title="=&gt; List[Commands.this.State =&gt; Boolean]">toList</span>.<span title="(p: Commands.this.State =&gt; Boolean =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#40036" title="Commands.this.State =&gt; Boolean">_</a>.<span title="(v1: Commands.this.State)Boolean">apply</span><span class="delimiter">(</span><a href="#40009" title="Commands.this.State">s</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/** A precondition is a function that
     *  takes the current abstract state as parameter and returns a boolean
     *  that says if the precondition is fulfilled or not. You can add several
     *  conditions to the precondition list */</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]" id="39969">preConditions</a> = <span title="scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]" class="keyword">new</span> collection.mutable.<span title="scala.collection.mutable.ListBuffer[Commands.this.State =&gt; Boolean]">ListBuffer</span><span class="delimiter">[</span>State =&gt; Boolean<span class="delimiter">]</span>

    <span class="comment">/** @deprecated Use &lt;code&gt;postConditions += ...&lt;/code&gt; instead. */</span>
    @deprecated<span class="delimiter">(</span><span class="string">&quot;Use 'postConditions += ...' instead.&quot;</span>, <span class="string">&quot;1.6&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(f: (Commands.this.State, Any) =&gt; org.scalacheck.Prop)scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]" id="39971">postCondition_=</a><span class="delimiter">(</span><a title="(Commands.this.State, Any) =&gt; org.scalacheck.Prop" id="40038">f</a>: <span class="delimiter">(</span>State,Any<span class="delimiter">)</span> =&gt; Prop<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#39974" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]">postConditions</a>.<span title="()Unit">clear</span>
      <a href="#39974" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]">postConditions</a> <span title="(x: (Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop)Command.this.postConditions.type">+=</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="Commands.this.State" id="40051">s0</a>,<a title="Commands.this.State" id="40052">s1</a>,<a title="Any" id="40053">r</a><span class="delimiter">)</span> =&gt; <a href="#40038" title="(v1: Commands.this.State, v2: Any)org.scalacheck.Prop">f</a><span class="delimiter">(</span><a href="#40051" title="Commands.this.State">s0</a>,<a href="#40053" title="Any">r</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** @deprecated Use &lt;code&gt;postConditions += ...&lt;/code&gt; instead. */</span>
    @deprecated<span class="delimiter">(</span><span class="string">&quot;Use 'postConditions += ...' instead.&quot;</span>, <span class="string">&quot;1.6&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(f: (Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop)scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]" id="39972">postCondition_=</a><span class="delimiter">(</span><a title="(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop" id="40056">f</a>: <span class="delimiter">(</span>State,State,Any<span class="delimiter">)</span> =&gt; Prop<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#39974" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]">postConditions</a>.<span title="()Unit">clear</span>
      <a href="#39974" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]">postConditions</a> <span title="(x: (Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop)Command.this.postConditions.type">+=</span> <a href="#40056" title="(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop">f</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Returns all postconditions merged into a single function */</span>
    <span class="keyword">def</span> <a title="=&gt; (Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop" id="39973">postCondition</a>: <span class="delimiter">(</span>State,State,Any<span class="delimiter">)</span> =&gt; Prop = <span class="delimiter">(</span><a title="Commands.this.State" id="40064">s0</a>,<a title="Commands.this.State" id="40065">s1</a>,<a title="Any" id="40066">r</a><span class="delimiter">)</span> =&gt; <a href="Prop.scala.html#15118" title="(ps: org.scalacheck.Prop*)org.scalacheck.Prop">all</a><span class="delimiter">(</span><a href="#39974" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]">postConditions</a>.<span title="(f: (Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop =&gt; org.scalacheck.Prop)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop],org.scalacheck.Prop,scala.collection.mutable.ListBuffer[org.scalacheck.Prop]])scala.collection.mutable.ListBuffer[org.scalacheck.Prop]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ListBuffer.Coll,org.scalacheck.Prop,scala.collection.mutable.ListBuffer[org.scalacheck.Prop]]" class="delimiter">(</span><a href="#40691" title="(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop">_</a>.<span title="(v1: Commands.this.State, v2: Commands.this.State, v3: Any)org.scalacheck.Prop">apply</span><span class="delimiter">(</span><a href="#40064" title="Commands.this.State">s0</a>,<a href="#40065" title="Commands.this.State">s1</a>,<a href="#40066" title="Any">r</a><span class="delimiter">)</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>

    <span class="comment">/** A postcondition is a function that
     *  takes three parameters, s0, s1 and r. s0 is the abstract state before
     *  the command was run, s1 is the abstract state after the command was
     *  run, and r is the result from the command's run
     *  method. The postcondition function should return a Boolean (or
     *  a Prop instance) that says if the condition holds or not. You can add several
     *  conditions to the postConditions list. */</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]" id="39974">postConditions</a> = <span title="scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]" class="keyword">new</span> collection.mutable.<span title="scala.collection.mutable.ListBuffer[(Commands.this.State, Commands.this.State, Any) =&gt; org.scalacheck.Prop]">ListBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>State,State,Any<span class="delimiter">)</span> =&gt; Prop<span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/** A command that binds its result for later use */</span>
  <span class="keyword">trait</span> <a title="trait SetCommand extends java.lang.Object with Commands.this.Command with ScalaObject" id="39814">SetCommand</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#39813" title="Commands.this.Command">Command</a> <span class="delimiter">{</span>
    <span class="comment">/** Used internally. */</span>
    <span class="keyword">protected</span><span class="delimiter">[</span>Commands<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(s: Commands.this.State)Any" id="41026">run_</a><span class="delimiter">(</span><a title="Commands.this.State" id="41031">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Any" id="41034">r</a> = <a href="#39965" title="(s: Commands.this.State)Any">run</a><span class="delimiter">(</span><a href="#41031" title="Commands.this.State">s</a><span class="delimiter">)</span>
      <a href="#39818" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Any)]">bindings</a> <span title="(x: (Commands.this.State, Any))Commands.this.bindings.type">+=</span> <span class="delimiter">(</span><span title="(_1: Commands.this.State, _2: Any)(Commands.this.State, Any)" class="delimiter">(</span><a href="#41031" title="Commands.this.State">s</a>,<a href="#41034" title="Any">r</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#41034" title="Any">r</a>
    <span class="delimiter">}</span>

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(s: Commands.this.State)Commands.this.State" id="41027">nextState</a><span class="delimiter">(</span><a title="Commands.this.State" id="41050">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span> = <a href="#41028" title="(s: Commands.this.State, b: Commands.this.Binding)Commands.this.State">nextState</a><span class="delimiter">(</span><a href="#41050" title="Commands.this.State">s</a>, <span title="Commands.this.Binding" class="keyword">new</span> <a href="#39812" title="Commands.this.Binding">Binding</a><span class="delimiter">(</span><a href="#41050" title="Commands.this.State">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(s: Commands.this.State, b: Commands.this.Binding)Commands.this.State" id="41028">nextState</a><span class="delimiter">(</span><a title="Commands.this.State" id="41053">s</a>: <a href="#39811" title="Commands.this.State">State</a>, <a title="Commands.this.Binding" id="41054">b</a>: <a href="#39812" title="Commands.this.Binding">Binding</a><span class="delimiter">)</span>: <a href="#39811" title="Commands.this.State">State</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class Cmds extends java.lang.Object with ScalaObject with Product with Serializable" id="41338">Cmds</a><a href="#41338" title="ScalaObject" class="delimiter">(</a><a title="List[Commands.this.Command]" id="41451">cs</a>: <span title="List[Commands.this.Command]">List</span><span class="delimiter">[</span>Command<span class="delimiter">]</span>, <a title="List[Commands.this.State]" id="41452">ss</a>: <span title="List[Commands.this.State]">List</span><span class="delimiter">[</span>State<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="41146">toString</a> = <a href="#41451" title="=&gt; List[Commands.this.Command]">cs</a>.<span title="(f: Commands.this.Command =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Commands.this.Command],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#41176" title="Commands.this.Command">_</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[(Commands.this.State, Any)]" id="39818">bindings</a> = <span title="scala.collection.mutable.ListBuffer[(Commands.this.State, Any)]" class="keyword">new</span> scala.collection.mutable.<span title="scala.collection.mutable.ListBuffer[(Commands.this.State, Any)]">ListBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>State,Any<span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Commands.this.State" id="39820">initState</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#39818" title="=&gt; scala.collection.mutable.ListBuffer[(Commands.this.State, Any)]">bindings</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#39826" title="()Commands.this.State">initialState</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.scalacheck.Gen[Commands.this.Cmds]" id="39821">genCmds</a>: <a href="Gen.scala.html#9505" title="org.scalacheck.Gen[Commands.this.Cmds]">Gen</a><span class="delimiter">[</span>Cmds<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: Commands.this.State)(sz: Int)org.scalacheck.Gen[Commands.this.Cmds]" id="41421">sizedCmds</a><span class="delimiter">(</span><a title="Commands.this.State" id="41422">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="41423">sz</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="Gen.scala.html#9505" title="org.scalacheck.Gen[Commands.this.Cmds]">Gen</a><span class="delimiter">[</span>Cmds<span class="delimiter">]</span> =
      <span title="org.scalacheck.Gen[Commands.this.Cmds]" class="keyword">if</span><span class="delimiter">(</span><a href="#41423" title="Int">sz</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="Gen.scala.html#14852" title="(x: Commands.this.Cmds)java.lang.Object with org.scalacheck.Gen[Commands.this.Cmds]">value</a><span class="delimiter">(</span><a href="#41338" title="(cs: List[Commands.this.Command], ss: List[Commands.this.State])Commands.this.Cmds">Cmds</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <span class="keyword">for</span> <span class="delimiter">{</span>
        <a title="Commands.this.Command" id="41471">c</a> &lt;- <a href="#39827" title="(s: Commands.this.State)org.scalacheck.Gen[Commands.this.Command]">genCommand</a><span class="delimiter">(</span><a href="#41422" title="Commands.this.State">s</a><span class="delimiter">)</span> <a href="Gen.scala.html#11723" title="(f: Commands.this.Command =&gt; org.scalacheck.Gen[Commands.this.Cmds])org.scalacheck.Gen[Commands.this.Cmds]">suchThat</a> <span class="delimiter">(</span><a href="#41465" title="Commands.this.Command">_</a>.<a href="#39968" title="(v1: Commands.this.State)Boolean">preCondition</a><span class="delimiter">(</span><a href="#41422" title="Commands.this.State">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
        Cmds<span class="delimiter">(</span><a title="List[Commands.this.Command]" id="41500">cs</a>,<a title="List[Commands.this.State]" id="41501">ss</a><span class="delimiter">)</span> &lt;- <a href="#41421" title="(s: Commands.this.State)(sz: Int)org.scalacheck.Gen[Commands.this.Cmds]">sizedCmds</a><span class="delimiter">(</span><a href="#41471" title="Commands.this.Command">c</a>.<a href="#39966" title="(s: Commands.this.State)Commands.this.State">nextState</a><span class="delimiter">(</span><a href="#41422" title="Commands.this.State">s</a><span class="delimiter">)</span><span class="delimiter">)</span><a href="Gen.scala.html#11675" title="(f: Commands.this.Cmds =&gt; Commands.this.Cmds)org.scalacheck.Gen[Commands.this.Cmds]" class="delimiter">(</a><a href="#41423" title="Int">sz</a><span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#41338" title="(cs: List[Commands.this.Command], ss: List[Commands.this.State])Commands.this.Cmds">Cmds</a><span class="delimiter">(</span><a href="#41471" title="Commands.this.Command">c</a><a href="#41502" title="(x: Commands.this.Command)List[Commands.this.Command]">::</a><a href="#41500" title="List[Commands.this.Command]">cs</a>, <a href="#41422" title="Commands.this.State">s</a><a href="#41508" title="(x: Commands.this.State)List[Commands.this.State]">::</a><a href="#41501" title="List[Commands.this.State]">ss</a><span class="delimiter">)</span>

    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="Commands.this.State" id="41548">s0</a> &lt;- <a href="Gen.scala.html#14849" title="(g: =&gt; org.scalacheck.Gen[Commands.this.State])java.lang.Object with org.scalacheck.Gen[Commands.this.State]">wrap</a><a href="Gen.scala.html#11723" title="(f: Commands.this.State =&gt; org.scalacheck.Gen[Commands.this.Cmds])org.scalacheck.Gen[Commands.this.Cmds]" class="delimiter">(</a><a href="Gen.scala.html#14852" title="(x: Commands.this.State)java.lang.Object with org.scalacheck.Gen[Commands.this.State]">value</a><span class="delimiter">(</span><a href="#39826" title="()Commands.this.State">initialState</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a title="Commands.this.Cmds" id="41557">cmds</a> &lt;- <a href="Gen.scala.html#14864" title="(f: Int =&gt; org.scalacheck.Gen[Commands.this.Cmds])org.scalacheck.Gen[Commands.this.Cmds]">sized</a><a href="Gen.scala.html#11675" title="(f: Commands.this.Cmds =&gt; Commands.this.Cmds)org.scalacheck.Gen[Commands.this.Cmds]" class="delimiter">(</a><a href="#41421" title="(s: Commands.this.State)(sz: Int)org.scalacheck.Gen[Commands.this.Cmds]">sizedCmds</a><a href="#41552" title="Int" class="delimiter">(</a><a href="#41548" title="Commands.this.State">s0</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#41557" title="Commands.this.Cmds">cmds</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Commands.this.State, cs: List[Commands.this.Command])Option[Commands.this.Cmds]" id="39822">validCmds</a><span class="delimiter">(</span><a title="Commands.this.State" id="41560">s</a>: <a href="#39811" title="Commands.this.State">State</a>, <a title="List[Commands.this.Command]" id="41561">cs</a>: <span title="List[Commands.this.Command]">List</span><span class="delimiter">[</span>Command<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Commands.this.Cmds]">Option</span><span class="delimiter">[</span>Cmds<span class="delimiter">]</span> =
    <a href="#41561" title="List[Commands.this.Command]">cs</a> <span title="Option[Commands.this.Cmds]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Some[Commands.this.Cmds]">Nil</span> =&gt; <span title="(x: Commands.this.Cmds)Some[Commands.this.Cmds]">Some</span><span class="delimiter">(</span><a href="#41338" title="(cs: List[Commands.this.Command], ss: List[Commands.this.State])Commands.this.Cmds">Cmds</a><span class="delimiter">(</span><span title="object Nil">Nil</span>, <a href="#41560" title="Commands.this.State">s</a><a href="#41584" title="(x: Commands.this.State)List[Commands.this.State]">::</a><span title="object Nil">Nil</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="None.type" id="41665">c</a>::_ <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#41665" title="Commands.this.Command">c</a>.<a href="#39968" title="(v1: Commands.this.State)Boolean">preCondition</a><span class="delimiter">(</span><a href="#41560" title="Commands.this.State">s</a><span class="delimiter">)</span> =&gt; <span title="object None">None</span>
      <span class="keyword">case</span> <a title="Option[Commands.this.Cmds]" id="41670">c</a>::<a title="List[Commands.this.Command]" id="41671">cmds</a> =&gt; <span class="keyword">for</span> <span class="delimiter">{</span>
        Cmds<span class="delimiter">(</span>_, <a title="List[Commands.this.State]" id="41681">ss</a><span class="delimiter">)</span> &lt;- <a href="#39822" title="(s: Commands.this.State, cs: List[Commands.this.Command])Option[Commands.this.Cmds]">validCmds</a><a href="#41674" title="(f: Commands.this.Cmds =&gt; Commands.this.Cmds)Option[Commands.this.Cmds]" class="delimiter">(</a><a href="#41670" title="Commands.this.Command">c</a>.<a href="#39966" title="(s: Commands.this.State)Commands.this.State">nextState</a><span class="delimiter">(</span><a href="#41560" title="Commands.this.State">s</a><span class="delimiter">)</span>, <a href="#41671" title="List[Commands.this.Command]">cmds</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#41338" title="(cs: List[Commands.this.Command], ss: List[Commands.this.State])Commands.this.Cmds">Cmds</a><span class="delimiter">(</span><a href="#41561" title="List[Commands.this.Command]">cs</a>, <a href="#41560" title="Commands.this.State">s</a><a href="#41682" title="(x: Commands.this.State)List[Commands.this.State]">::</a><a href="#41681" title="List[Commands.this.State]">ss</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmds: Commands.this.Cmds)org.scalacheck.Prop" id="39823">runCommands</a><span class="delimiter">(</span><a title="Commands.this.Cmds" id="41689">cmds</a>: <a href="#41338" title="Commands.this.Cmds">Cmds</a><span class="delimiter">)</span>: <a href="Prop.scala.html#9521" title="org.scalacheck.Prop">Prop</a> = <a href="#41689" title="Commands.this.Cmds">cmds</a> <span title="org.scalacheck.Prop" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="org.scalacheck.Prop">Cmds</span><span class="delimiter">(</span><span title="object Nil">Nil</span>, _<span class="delimiter">)</span> =&gt; <a href="Prop.scala.html#15097" title="=&gt; org.scalacheck.Prop">proved</a>
    <span class="keyword">case</span> <span title="org.scalacheck.Prop">Cmds</span><span class="delimiter">(</span><a title="Commands.this.Command" id="41714">c</a>::<a title="List[Commands.this.Command]" id="41715">cs</a>, <a title="Commands.this.State" id="41727">s</a>::<a title="List[Commands.this.State]" id="41728">ss</a><span class="delimiter">)</span> =&gt;
      <a href="#41714" title="Commands.this.Command">c</a>.<a href="#39973" title="(v1: Commands.this.State, v2: Commands.this.State, v3: Any)org.scalacheck.Prop">postCondition</a><span class="delimiter">(</span><a href="#41727" title="Commands.this.State">s</a>,<a href="#41714" title="Commands.this.Command">c</a>.<a href="#39966" title="(s: Commands.this.State)Commands.this.State">nextState</a><span class="delimiter">(</span><a href="#41727" title="Commands.this.State">s</a><span class="delimiter">)</span>,<a href="#41714" title="Commands.this.Command">c</a>.<a href="#39964" title="(s: Commands.this.State)Any">run_</a><span class="delimiter">(</span><a href="#41727" title="Commands.this.State">s</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="Prop.scala.html#21065" title="(p: org.scalacheck.Prop)org.scalacheck.Prop">&amp;&amp;</a> <a href="#39823" title="(cmds: Commands.this.Cmds)org.scalacheck.Prop">runCommands</a><span class="delimiter">(</span><a href="#41338" title="(cs: List[Commands.this.Command], ss: List[Commands.this.State])Commands.this.Cmds">Cmds</a><span class="delimiter">(</span><a href="#41715" title="List[Commands.this.Command]">cs</a>,<a href="#41728" title="List[Commands.this.State]">ss</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Should not be here&quot;)" class="string">&quot;Should not be here&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.scalacheck.Prop" id="39824">commandsProp</a>: <a href="Prop.scala.html#9521" title="org.scalacheck.Prop">Prop</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(cmds: Commands.this.Cmds)scala.collection.immutable.Stream[Commands.this.Cmds]" id="41757">shrinkCmds</a><span class="delimiter">(</span><a title="Commands.this.Cmds" id="41758">cmds</a>: <a href="#41338" title="Commands.this.Cmds">Cmds</a><span class="delimiter">)</span> = <a href="#41758" title="Commands.this.Cmds">cmds</a> <span title="scala.collection.immutable.Stream[Commands.this.Cmds]" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="scala.collection.immutable.Stream[Commands.this.Cmds]">Cmds</span><span class="delimiter">(</span><a title="List[Commands.this.Command]" id="41759">cs</a>,_<span class="delimiter">)</span> =&gt;
      <a href="Shrink.scala.html#15482" title="(x: List[Commands.this.Command])(implicit s: org.scalacheck.Shrink[List[Commands.this.Command]])Stream[List[Commands.this.Command]]">shrink</a><span class="delimiter">(</span><a href="#41759" title="List[Commands.this.Command]">cs</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="Shrink.scala.html#15488" title="(implicit v: List[Commands.this.Command] =&gt; Traversable[Commands.this.Command], implicit s: org.scalacheck.Shrink[Commands.this.Command], implicit b: org.scalacheck.util.Buildable[Commands.this.Command,List])org.scalacheck.Shrink[List[Commands.this.Command]]">shrinkContainer</a><span class="delimiter">)</span>.<span title="(f: List[Commands.this.Command] =&gt; scala.collection.GenTraversableOnce[Commands.this.Cmds])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream[List[Commands.this.Command]],Commands.this.Cmds,scala.collection.immutable.Stream[Commands.this.Cmds]])scala.collection.immutable.Stream[Commands.this.Cmds]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream.Coll,Commands.this.Cmds,scala.collection.immutable.Stream[Commands.this.Cmds]]" class="delimiter">(</span><a title="List[Commands.this.Command]" id="41961">cs</a> =&gt; <a href="#39822" title="(s: Commands.this.State, cs: List[Commands.this.Command])Option[Commands.this.Cmds]">validCmds</a><span class="delimiter">(</span><a href="#39826" title="()Commands.this.State">initialState</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#41961" title="List[Commands.this.Command]">cs</a><span class="delimiter">)</span>.<span title="=&gt; List[Commands.this.Cmds]">toList</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="Prop.scala.html#15248" title="(g: org.scalacheck.Gen[Commands.this.Cmds], shrink: Commands.this.Cmds =&gt; Stream[Commands.this.Cmds])(f: Commands.this.Cmds =&gt; org.scalacheck.Prop)(implicit evidence$5: Commands.this.Cmds =&gt; org.scalacheck.Pretty, implicit evidence$6: org.scalacheck.Prop =&gt; org.scalacheck.Prop)org.scalacheck.Prop">forAllShrink</a><span class="delimiter">(</span><a href="#39821" title="=&gt; org.scalacheck.Gen[Commands.this.Cmds]">genCmds</a> <a href="Gen.scala.html#11669" title="(l: String)org.scalacheck.Gen[Commands.this.Cmds]">label</a> <span title="java.lang.String(&quot;COMMANDS&quot;)" class="string">&quot;COMMANDS&quot;</span>, <a href="#41757" title="(cmds: Commands.this.Cmds)scala.collection.immutable.Stream[Commands.this.Cmds]">shrinkCmds</a><span class="delimiter">)</span><a href="Pretty.scala.html#42207" title="implicit org.scalacheck.Pretty.prettyAny : (t: Any)java.lang.Object with org.scalacheck.Pretty" class="delimiter">(</a><a href="#39823" title="(cmds: Commands.this.Cmds)org.scalacheck.Prop">runCommands</a> _<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(p: org.scalacheck.Prop.Params)org.scalacheck.Prop.Result" id="39825">apply</a><span class="delimiter">(</span><a title="org.scalacheck.Prop.Params" id="44319">p</a>: Prop.<a href="Prop.scala.html#15066" title="org.scalacheck.Prop.Params">Params</a><span class="delimiter">)</span> = <a href="Prop.scala.html#21056" title="(prms: org.scalacheck.Prop.Params)org.scalacheck.Prop.Result">commandsProp</a><span class="delimiter">(</span><a href="#44319" title="org.scalacheck.Prop.Params">p</a><span class="delimiter">)</span>

  <span class="comment">/** initialState should reset the system under test to a well defined
   *  initial state, and return the abstract version of that state. */</span>
  <span class="keyword">def</span> <a title="()Commands.this.State" id="39826">initialState</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#39811" title="Commands.this.State">State</a>

  <span class="comment">/** The command generator. Given an abstract state, the generator
   *  should return a command that is allowed to run in that state. Note that
   *  it is still neccessary to define preconditions on the commands if there
   *  are any. The generator is just giving a hint of which commands that are
   *  suitable for a given state, the preconditions will still be checked before
   *  a command runs. Sometimes you maybe want to adjust the distribution of
   *  your command generator according to the state, or do other calculations
   *  based on the state. */</span>
  <span class="keyword">def</span> <a title="(s: Commands.this.State)org.scalacheck.Gen[Commands.this.Command]" id="39827">genCommand</a><span class="delimiter">(</span><a title="Commands.this.State" id="41461">s</a>: <a href="#39811" title="Commands.this.State">State</a><span class="delimiter">)</span>: <a href="Gen.scala.html#9505" title="org.scalacheck.Gen[Commands.this.Command]">Gen</a><span class="delimiter">[</span>Command<span class="delimiter">]</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>